{
  "metadata": {
    "specification_id": "ts_23.335",
    "version": "18.0.0",
    "title": "3GPP TS 23.335",
    "file_path": "/content/drive/MyDrive/RAG_thesis/data/23_series/23335-i00/23335-i00.docx"
  },
  "export_info": {
    "export_date": "2025-07-26T09:28:13.927881",
    "total_chunks": 22
  },
  "chunks": [
    {
      "chunk_id": "ts_23.335_1",
      "section_id": "1",
      "section_title": "Scope",
      "content": "The present document describes the procedures and signalling flows associated to the technical realization of the 3GPP User Data Convergence (UDC). It furthermore indicates some requirements for the stage 3 specifications.\nSpecial consideration is put in the following areas:\n- reference architecture for the UDC concept\n- general description of procedures for the user data manipulation (e.g. create, delete, update, etc.)\n- identification of the requirements on the UDC for the applicability of the mechanisms described in this document.\nUser data convergence is an optional concept to ensure data consistency and simplify creation of new services by providing easy access to the user data, as well as to ensure the consistency of storage and data models and to have minimum impact on traffic mechanisms, reference points and protocols of network elements.\nStandization of the Data Model for the Ud interface between Front-Ends and the UDR is out of the scope of 3GPP.",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.335_2",
      "section_id": "2",
      "section_title": "References",
      "content": "The following documents contain provisions which, through reference in this text, constitute provisions of the present document.\n-\tReferences are either specific (identified by date of publication, edition number, version number, etc.) or non‑specific.\n-\tFor a specific reference, subsequent revisions do not apply.\n-\tFor a non-specific reference, the latest version applies. In the case of a reference to a 3GPP document (including a GSM document), a non-specific reference implicitly refers to the latest version of that document in the same Release as the present document.\n[1]\t3GPP TR 21.905: \"Vocabulary for 3GPP Specifications\".\n[2]\t3GPP TR 22.985: \"Service requirement for the User Data Convergence (UDC)\".\n[3]\t3GPP TS 22.101: \"Service aspects; Service principles\".\n[4]\t3GPP TS 29.002: \"Mobile Application Part (MAP) specification\".\n[5]\t3GPP TS 23.002: \"Network architecture\".\n[6]\t3GPP TS 32.182: \"User Data Convergence (UDC); Common Baseline Information Model (CBIM)\".\n[7]\t3GPP TS 33.210: \"3G Security; Network Domain Security; IP network layer security\".\n[8]\t3GPP TS 32.181: \"Telecommunication management; User Data Convergence (UDC); Framework for Model Handling and Management\".\n[9]\tVoid.\n[10]\t3GPP TS 23.280: \"Common functional architecture to support mission critical services\".",
      "chunk_type": "general",
      "cross_references": [
        "ts_21.905",
        "ts_22.985",
        "ts_22.101",
        "ts_29.002",
        "ts_23.002",
        "ts_32.182",
        "ts_33.210",
        "ts_32.181",
        "ts_23.280"
      ]
    },
    {
      "chunk_id": "ts_23.335_3.1",
      "section_id": "3.1",
      "section_title": "Definitions",
      "content": "For the purposes of the present document, the terms and definitions given in 3GPP TR 21.905 [1] and the following apply. A term defined in the present document takes precedence over the definition of the same term, if any, in 3GPP TR 21.905 [1].\nFront End: a core network functional entity or service layer entity or provisioning entity that can access user data stored in a unique repository.\nFront End Identifier: A name that uniquely identifies an FE within the set of all FEs accessing an UDR.\nFront End Cluster: FEs handling the same application may be grouped in clusters to differentiate between them e.g. with regard to geographical location, feature support, vendor, or other characteristics. All FEs within a cluster are treated equally for required purposes (e.g. authorization, notifications, etc.).\nApplication type: The application handled by a FE (e.g. HLR) determines the application type of the FE. The application type is derived from the name indicated by a FE.\nFront End Cluster Identifier: A name that identifies a cluster grouped with FEs supporting the same application.\nUser Data Repository: facility where user data can be accessed stored and managed in a common way.\nTransaction: a transaction is a sequence of operations towards the User Data Repository (one or several), performed as a single logical unit of work. A logical unit of work must exhibit four properties, called the ACID (Atomicity, Consistency, Isolation, and Durability) properties, to qualify as a transaction.\nA transaction usually consists of the following steps, start transaction, making updates, and end of transaction; the transaction can finish successfully, in that case it is said the updated data is committed, or unsuccessfully, in that case the transaction is cancelled and the updates made till that moment are rolled back so that the data remains as it were before the transaction.\nAtomicity: a transaction must be an atomic unit of work; either all of its data modifications are performed or none of them is performed.\nConsistency: when completed, a transaction must leave all data in a consistent state. In the User Data Repository, all rules must be applied to the transaction's modifications to maintain all data integrity. All internal data structures must be correct at the end of the transaction.\nIsolation: modifications made by concurrent transactions must be isolated from the modifications made by any other concurrent transactions. A transaction either sees data in the state it was in before another concurrent transaction modified it, or it sees the data after the second transaction has completed, but it does not see an intermediate state. This is referred to as serialization because it results in the ability to reload the starting data and replay a series of transactions to end up with the data in the same state it was in after the original transactions were performed.\nDurability: after a transaction has completed, its effects are permanently in place in the User Data Repository. The modifications persist even in the event of a system failure.",
      "chunk_type": "definition",
      "cross_references": [
        "ts_21.905"
      ]
    },
    {
      "chunk_id": "ts_23.335_3.2",
      "section_id": "3.2",
      "section_title": "Symbols",
      "content": "For the purposes of the present document, the following symbols apply:\nUd\treference point between a FE and the UDR",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.335_3.3",
      "section_id": "3.3",
      "section_title": "Abbreviations",
      "content": "For the purposes of the present document, the abbreviations given in TR 21.905 [1] and the following apply. An abbreviation defined in the present document takes precedence over the definition of the same abbreviation, if any, in 3GPP TR 21.905 [1].\nFE\tFront End\nUDC\tUser Data Convergence\nUDR\tUser Data Repository",
      "chunk_type": "general",
      "cross_references": [
        "ts_21.905"
      ]
    },
    {
      "chunk_id": "ts_23.335_4.1",
      "section_id": "4.1",
      "section_title": "UDC System architecture",
      "content": "Figure 4.1-1 presents the reference UDC architecture. UDC is the logical representation of the layered architecture that separates the user data from the application logic, so that user data is stored in a logically unique repository allowing access from entities handling an application logic, hereby named Application Front Ends.\nIn the architecture, the User Data Repository (UDR) is a functional entity that acts as a single logical repository of user data and is unique from Application Front End's perspective. Entities which do not store user data and that need to access user data stored in the UDR are collectively known as application front ends.\nNOTE:\tDepending on the different network deployment, there may be more than one UDC in an operator's network.\nApplication Front Ends connect to the UDR through the reference point named Ud to access user data.\nReference points towards network elements are marked in discontinuous lines in Figure 4.1-1, and are just shown for information purposes only. Details of the roles of these functional entities are described in clauses 4.2.1, 4.2.2, 4.2.3 and 4.2. 4.\nFigure 4.1-1: UDC reference architecture\nFigure 4.1-2 shows how the UDC reference architecture is related to the overall network architecture by comparing a Non-UDC Network with an UDC Network. In the non-UDC Network, the figure shows NEs with their own database storing persistent user data and a NE accessing an external database; in both cases, when UDC architecture is applied,  the persistent user data are moved to the UDR and  concerned NEs are becoming Application-FEs (NE-FEs) according to the UDC architecture. This figure also shows that network interfaces between NEs are not impacted .A Network Element (NE), which in its original form represents application logic with persistent data storage, when the UDC architecture is applied, may become a NE Front End, since the related persistent data storage is moved to the UDR.\nFigure 4.1-2: Comparison Non-UDC Network to UDC Network",
      "chunk_type": "general",
      "cross_references": [
        "figure_4.1-1",
        "figure_4.1-2"
      ]
    },
    {
      "chunk_id": "ts_23.335_4.2.1",
      "section_id": "4.2.1",
      "section_title": "Application Front Ends",
      "content": "Functional entities, such as the HLR/HSS/AUC, Application Servers, Access Network Discovery and Selection Function in Home Network (H-ANDSF), any other Core Network nodes, Provisioning system, etc., when the UDC architecture is applied, keep the application logic, but they do not locally store user data permanently. These data-less functional entities are collectively known in the UDC architecture as Application Front Ends. The application that is handled by an FE determines the type of FE. A HSS Front End may implement a full or a part of the HSS functionalities as listed in 3GPP TS 23.002 [5], this choice being implementation dependant. The reference points between the different Front Ends and the core and service layers are not affected by the UDC architecture.",
      "chunk_type": "general",
      "cross_references": [
        "ts_23.002"
      ]
    },
    {
      "chunk_id": "ts_23.335_4.2.2",
      "section_id": "4.2.2",
      "section_title": "Provisioning Front Ends",
      "content": "A Provisioning Front End is an Application Front End for the purpose of provisioning the UDR. A Provisioning Front End provides means to create, delete, modify and retrieve user data. However, the provisioning should not be allowed to manipulate on the common baseline information model.\nProvisioning may be associated to an application/implementation and may comprise semantic control specific to this application. It may correspond to different types of provisioning FEs corresponding to different applications logics.\nThe UDC may support the following provisioning possibilities of user data via Provisioning Front Ends:\n-\tProvisioning from self care systems interfacing subscribers or users that should be allowed to initiate provisioning actions with a good response time.\n-\tProvisioning via Applications servers that often offer user service configurations facilities (e.g. via the Ut interface) and that will control the validity of user requests before storing the data in the UDC.\nThe interoperation between UDC and the provisioning system is out of the scope of this specification.",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.335_4.2.3",
      "section_id": "4.2.3",
      "section_title": "User Data Repository",
      "content": "The User Data Repository (UDR) is a functional entity that acts as a single logical repository that stores converged user data. The user-related data that traditionally has been stored into the HSS /HLR/AuC, Application Servers, etc., is now stored in the UDR according to a UDC information model. UDR facilitates the share and the provisioning of user-related data throughout services of 3GPP system.\nUDR provides a unique reference point to one or more Applications Front Ends, such as: one or more HSS/HLR/AuC-FEs, and one or more AS- FEs. The reference point is named Ud. UDR shall provide support for multiple applications simultaneously.\nApplication FEs should only be able to access the user data after proper authentication and authorization taking into account security and privacy requirements, i.e. it shall be possible to present different views on the data to the parties which require access, dependent on the authorization. The UDR shall take care of the authorization of the access to the user data. The authorization shall be based on the requestor information, the requested data, and the performed operation.\nUd reference point shall make use of Network Domain Security (3GPP TS 33.210 [7]) where applicable. For applications requiring sensitive data to be transferred over Ud (e.g. permanent authentication keys), encryption shall be required when storing these data in the UDR and transferring it over Ud.\nThe Application FEs managing these data shall support common algorithm(s) and key(s) for encryption/decryption.\nNOTE:\tGiven that different FEs (e.g. HLR/AuC) belonging to the same cluster can serve the same user, the encryption algorithm and key must be known by all FEs serving a given user. The key is not subscriber-specific.\nThe UDR functional entity may be distributed over different locations or be centralized; it may support replication mechanisms, back up functions and geographical redundancy to secure the storage of data. These functions are out of the scope of the present specification. They do not impact the functional content of the reference point Ud.\nThe UDR shall be able to store the following types of data:\n-\tPermanent subscriber data: this is subscription data and relates to the necessary information the system ought to know to perform the service. User identities (e.g. MSISDN, IMSI, IMPU, IMPI), service data (e.g. service profile in IMS) and authentication data are examples of the subscription data. This kind of user data has a lifetime as long as the user is permitted to use the service and may be modified by administration means.\n-\tTemporary subscriber data: this is data which may be changed as a result of normal operation of the system or traffic conditions (e.g. transparent data stored by Application Servers for service execution, SGSN number, user status, etc.).\nThere are certain types of data, as specified in 3GPP TR 22.985 [2] that in principle are not required to be stored in the UDR. However, it might be beneficial to converge these data to the UDR due to, e.g., sharing of the data within a cluster of Application Front Ends. It shall not be required that the UDR stores the following types of data:\n-\tUser-content data: content defined by the user and that may be quite large in size (e.g. Photos, videos, SMS, voice mail).\n-\tUser data that concerns event data records that can be generated on various events in the usage of services by a user and that can be used not only for charging or billing purposes but e.g. for user profiling regarding user behavior and habits, and that can be valuable for marketing purposes.\n-\tUser traffic data: this kind of user data contains call-related or session-related dynamic data (e.g. MSRN, P-TMSI), which are typically stored in VLR, SGSN or S-CSCF. These dynamic data are only used by their owner transitorily and proprietarily, and hardly shared by other services in the short term.\nThe UDR shall offer a Provisioning Interface to the OSS which serves as a single logical point for consistent provisioning of user data from the operator's OSS system. This interface is out of scope of this specification.",
      "chunk_type": "general",
      "cross_references": [
        "ts_33.210",
        "ts_22.985"
      ]
    },
    {
      "chunk_id": "ts_23.335_4.2.4",
      "section_id": "4.2.4",
      "section_title": "Other Network Elements",
      "content": "Other Network Elements, which in their original form represent pure application logic with no persistent data storage functionality but with user data access towards an external database, when the UDC architecture is applied, may be assumed to perform the functionality of an Application Front End, i.e. access the user data via the Ud interface from the UDR.\nFor example, for Mission Critical Services (see 3GPP TS 23.280 [10]), the MC Service  Server, and Configuration Management Server may be considered as Application Front Ends accessing MC Service User Profile Data via the Ud interface from the UDR.",
      "chunk_type": "general",
      "cross_references": [
        "ts_23.280"
      ]
    },
    {
      "chunk_id": "ts_23.335_4.3",
      "section_id": "4.3",
      "section_title": "Reference point Ud",
      "content": "This reference point shall allow the different FEs to create, read, modify and delete user data stored in the UDR using the harmonized access interface.\nThis reference point shall support subscriptions/notifications functionality which allows a relevant FE to be notified about specific events which may occur on specific user data in the UDR. The events can be changes on existing user data, addition of user data, and so on.\nThrough the reference point, an Application Front End shall only interface with the UDR for the data relevant to its function, and not be impacted by other data that UDR stores for other applications.\nThe user data that an Application Front End accesses in the UDR through the reference point Ud shall comply with an agreed data structure between the Application Front End and the UDR. Such data structure shall comply with the Application Specific Data Model, specified in 3GPP TS 32.182 [6] and in 3GPP TS 32.181 [8].\nReference point Ud shall support transactions. Operations and transactions carried out over Ud shall support the ACID (Atomicity, Consistency, Isolation, and Durability) characteristics.",
      "chunk_type": "requirement",
      "cross_references": [
        "ts_32.182",
        "ts_32.181"
      ]
    },
    {
      "chunk_id": "ts_23.335_4.4",
      "section_id": "4.4",
      "section_title": "Front-End Session",
      "content": "The application logic in a Front End is performed during an FE-Session. An FE-Session starts either with the receipt of a request message on one of the supported interfaces from the UE, Core Network, service Layer or OSS, or with receipt of a notification message on the Ud interface from the UDR.\nBefore an FE-Session starts, the FE does not have any user data stored.\nDuring an FE-Session the FE\n-\tmay (depending on the application logic) read user data from the UDR and store them temporarily locally;\n-\tmay (depending on the application logic) write user data to the UDR;\n-\tmay (depending on the application logic) communicate with entities of the Network or Service Layer or OSS on supported interfaces;\n-\tshall delete all temporarily locally stored user data when the FE-Session is completed.\nAfter completion of an FE-Session, the FE does not have any user data stored and the FE does not maintain any state information. A subsequent FE-Session for the same user triggered by a new request message on one of the supported interfaces from the UE, Core Network, service Layer or OSS, or a new notification message on the Ud interface from the UDR may be performed by a different FE.\nIt must be noted that the FE-Session concept may have the following side effects on the core network and service layer:\n-\tWhile in networks that do not support UDC, means are needed to route messages destined for an HSS to the correct HSS (i.e. the HSS that serves the user in question), networks that support UDC may deploy several HSS-FEs all of which have access to the UDR and hence can serve any user. Instead of routing towards the correct HSS, routing towards one of the available HSS-FE is needed. HSS-FE selection may allow load sharing or failover; details of the selection algorithm are operator specific and out of scope of this specification.\n-\tWhile the FE session duration may vary (depending on the application logic), means should be provided by the different FEs (e.g. storing temporary data in the UDR to be shared by other FEs) so that any request may be handled by any FE at any given time.",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.335_4.5",
      "section_id": "4.5",
      "section_title": "UDR Session",
      "content": "The UDR needs to process read accesses and write accesses received via the Ud reference point.\nWhen receiving a read-request the UDR shall check whether the requesting FE is allowed to read the requested data. If it is not, the request shall be rejected, otherwise the requested data value shall be returned to the FE respecting the FEs data view.\nWhen receiving a write-request the UDR shall check whether the requesting FE is allowed to write the requested data. If it is not, the request shall be rejected, otherwise the UDR shall\n-\tcheck whether a notification message needs to be sent via the Ud reference point to a suitable and available FE. If so, the UDR shall send the notification message;\n-\tperform the write-request and return a successful response to the FE.",
      "chunk_type": "requirement",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.335_5.1",
      "section_id": "5.1",
      "section_title": "General",
      "content": "This clause documents the main procedures on the Ud reference point that are used by the different Front Ends. These procedures are described using text description as well as information flow diagrams. The procedures described in this document are meant to provide a high level description and are not intended to be exhaustive.\nIn the following clauses, the multiple network elements are depicted as a single entity, since the procedures are common for all applications.\nThese procedures assume that the existing network elements accept a request message sent by any FE, e.g. a MSC/VLR accepts a MAP Cancel Location sent by any HLR-FE, an AS accepts Sh-Notif from any HSS-FE and an S-CSCF accepts Cx-Deregister from any HSS-FE. Figure 5.1-1 shows the general UDC information flow. See Annex A for specific examples.\nFigure 5.1-1: General UDC Information Flow\n1.\tThe FE receives an initial request on one of the supported interfaces from UE, Core Network, Service Layer or OSS.\n2.\tWhen receiving an initial request message, the FE may read user data from the UDR.\n3.\tThe FE shall store the read user data (if any) as a temporary local copy and use it when performing its application logic. There may be applications that do not need to retrieve and store user data from the UDR in order to perform the application logic.\n4.\tThe FE performs its application logic.\n4a.\tAs part of performing the application logic, the FE shall continue and complete the communication with the UE, Core Network, Service Layer or OSS. This may include sending messages to and receiving messages from entities within the UE, Core Network, Service Layer or OSS other than the entity that sent the initial request.\n4b.\tAs part of performing the application logic, the FE shall access user data in the UDR if so required by the application. This may happen more often than once. Steps 4a and 4b may be performed in any order of sequence.\n5.\tAfter application logic is completed, the FE shall delete its temporary local copy of user data.\n6.\tThe UDR shall send a notification message to an appropriate FE if the data modified in step 4b are subscribed data for notification. The notification message shall include user data. More than one notification messages are sent if the modified data are subscribed more often than once.\n7.\tThe FE shall store the received user data as a temporary local copy and use it when performing its application logic.\n8.\tThe FE performs its application logic.\n8a.\tAs part of performing the application logic, the FE shall communicate with the UE, Core Network, Service Layer or OSS if so required by the application.\n8b.\tAs part of performing the application logic, the FE shall access user data in the UDR if so required by the application. This may happen more often than once. Steps 8a and 8b may be performed in any order of sequence.\nNOTE:\tIn the UDR step 8b may result in another notification message being sent to an appropriate FE, which is not shown in the figure.\n9.\tAfter application logic is completed, the FE shall send a notify acknowledgement to the UDR. Depending on the application the notify acknowledgement may be sent earlier, e.g. immediately after step 6.\n10.\tAfter application logic is completed, the FE shall delete its temporary local copy of user data.",
      "chunk_type": "definition",
      "cross_references": [
        "figure_5.1-1"
      ]
    },
    {
      "chunk_id": "ts_23.335_5.2",
      "section_id": "5.2",
      "section_title": "Requirements",
      "content": "The following points are considered as requirements for the purpose of these procedures.\n1.\tIt shall be possible for an authorized Front End to read relevant user data stored in the UDR.\n2.\tIt shall be possible for an authorized Front End to modify (i.e. create, update, and delete) relevant user data stored in the UDR.\n3.\tThe UDR shall support notifications to the related Front Ends about changes of user data which they have subscribed to. Specifically, the UDR shall allow applications to subscribe to specific events on specific data of specific users.\n4.\tThe UDR shall support controlled access. Accordingly, UDR shall authenticate and authorize Application Front Ends.\nThe authentication shall be based on the identity provided by the FE when accessing the UDR.\nThe authorization/access control shall be based on the following criteria:\n-\tthe requested user's network (e.g. PLMN identity)\n-\tidentity provided by the FE\n-\tapplication type\n-\tthe user data which are requested\n-\tthe request type (e.g. query, modify)\nNOTE:\tThe UDR derives the application type from the name indicated by the FE. If the FE provided the Front End Identifier the UDR can also derive the Front End Cluster Identifier(s).\n5.\tAccess to the UDR shall be independent of the structure of the data models, i.e. the changes in the data models shall not affect these procedures.\n6.\tIt shall be possible to present different views on the user data to the different FEs which require access.\n7.\tA group of Front Ends (or a single Front End) for a specific application type shall be distinguished by a unique Front End cluster identifier.\n8.\tThe UDR may store the current Front End identifier/Front End cluster identifier(s) when certain user data (e.g. user's location, Sh AS subscription data, service data settings, etc.) is changed as part of the user data and may use this information to determine which Front Ends should be used for notifications.",
      "chunk_type": "requirement",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.335_5.3",
      "section_id": "5.3",
      "section_title": "Querying data from the UDR",
      "content": "The Query data procedure is used by an FE to retrieve data from the UDR.\nThe information flow for the Query data procedure is shown in figure 5.3-1:\nFigure 5.3-1: Query data procedure\n1.\tWhen an application FE - during processing of its application logic - needs to retrieve user data from the UDR it shall issue a Query data request message and send it over the Ud reference point to the UDR. The message shall contain:\n-\tthe FE Identifier or the FE Cluster Identifier\n-\tthe user identityan identity of the user, e.g. IMSI, MSISDN, IMS public user identity, IMS private user identity\n-\tthe requested datathe identification of the data of which the value is requested\nData identification and structure shall comply with the requesting FE's data view.\n2.\tThe UDR shall perform access control to check whether the FE/application type is allowed to read the requested data. If it is not, an unsuccessful response shall be returned to the FE and steps 3 and 4 shall be skipped.\n3.\tIf the access control check is successful, the UDR shall fetch the value of the requested data and format it according to the requesting FE's data view.\n4.\tThe UDR shall return a Query data answer message to the FE. The FE then shall continue processing its application logic with the retrieved data.",
      "chunk_type": "general",
      "cross_references": [
        "figure_5.3-1"
      ]
    },
    {
      "chunk_id": "ts_23.335_5.4",
      "section_id": "5.4",
      "section_title": "Creating data within the UDR",
      "content": "Create data procedure is used by a FE to insert a new user data record into the UDR, e.g. when a provisioning FE creates an account for a new user, or creates a new service profile for an existing user.\nThe information flow for create data procedure is shown in figure 5.4-1.\nFigure 5.4-1 Create Data flow\n1.\tWhen an application FE - during processing of its application logic - needs to insert new user data in the UDR, e.g. open a new user account in the database, it shall issue a Create Data Request message and send it over the Ud reference point to the UDR. The message shall contain:\n-\tthe FE Identifier or the FE Cluster Identifier\n-\tthe user identityan identity of the user, e.g. IMSI, MSISDN, IMS public user identity, IMS private user identity\n-\tthe identification of data to be inserted.\n-\tthe new data value.\n2.\tThe UDR shall perform access control to check whether the FE/application type is allowed to create the requested data. If it is not, an unsuccessful response shall be returned to the FE and steps 3 and 4 shall be skipped.\n3.\tIf the access control check is successful, the UDR shall insert the user data with the new data value.\n4.\tIf the notification triggering conditions are met, the UDR shall perform notification procedure. This procedure may run before, after or in parallel of sending Create data answer (see step 5). See clause 5.8.\n5.\tThe UDR shall return a Create data answer to the FE. The FE then shall continue processing its application logic.",
      "chunk_type": "general",
      "cross_references": [
        "clause_5.8",
        "figure_5.4-1"
      ]
    },
    {
      "chunk_id": "ts_23.335_5.5",
      "section_id": "5.5",
      "section_title": "Deleting data from the UDR",
      "content": "Delete Data procedure is used by a FE to delete user data stored in the UDR, e.g. when a provisioning FE deletes a service profile for an existing user, or removes the account of a user.\nThe information flow for Delete Data procedure is shown in figure 5.5-1.\nFigure 5.5-1 Delete Data flow\n1.\tWhen an application FE - during processing of its application logic - needs to delete user data from the UDR, e.g. delete user service profile, it shall issue a Delete Data Request message and send it over the Ud reference point to the UDR. The message shall contain:\n-\tthe FE Identifier or the FE Cluster Identifier\n-\tthe user identityan identity of the user, e.g. IMSI, MSISDN, IMS public user identity, IMS private user identity\n-\tthe identification of data to be deleted.\nThe message may contain:\n-\tthe delete condition, if supported by the UDR\n2.\tThe UDR shall perform access control to check whether the FE/application type is allowed to delete the requested data. If it is not, an unsuccessful response shall be returned to the FE and steps 3-5 shall be skipped.\n3.\tIf the message contains the delete condition, the UDR shall check if the delete condition is satisfied. If it is not, an unsuccessful response shall be returned to the FE and steps 4-6 shall be skipped\n4.\tIf the access control check is successful and the delete condition is satisfied, the UDR shall delete the requested user data.\n5.\tIf the notification triggering conditions are met, the UDR shall perform notification procedure. This procedure may run before, after or in parallel of sending Delete data answer (see step 6). See clause 5.8.\n6.\tThe UDR shall return a Delete data answer to the FE. The FE then shall continue processing its application logic.",
      "chunk_type": "general",
      "cross_references": [
        "clause_5.8",
        "figure_5.5-1"
      ]
    },
    {
      "chunk_id": "ts_23.335_5.6",
      "section_id": "5.6",
      "section_title": "Updating data within the UDR",
      "content": "The Update data procedure is used by an application FE to modify user data in the UDR.\nThe information flow for the Update data procedure is shown in figure 5.6-1:\nFigure 5.6-1: Update data procedure\n1.\tWhen an application FE - during processing of its application logic - needs to update user data in the UDR it shall issue an Update data request message and send it over the Ud reference point to the UDR. The message shall contain:\n-\tthe FE Identifier or the FE Cluster Identifier\n-\tthe user identityan identity of the user, e.g. IMSI, MSISDN, IMS public user identity, IMS private user identity\n-\tthe requested datathe identification of the data of which the value is to be updated.\n-\tthe new data valuevalue of the data that is to be written in the UDR\nThe message may contain:\n-\tthe update condition, if supported by the UDR\nData that is updated may have a complex structure with multiple attributes. So the data update achieved through the Update data procedure may comprise addition, modification or deletion of some attributes of this data.\nData identification and structure shall comply with the  Data view associated to the application FE.\n2.\tThe UDR shall perform access control to check whether the FE/application type is allowed to update the requested data. If it is not, an unsuccessful response shall be returned to the FE and steps 3-5 shall be skipped.\n3.\tIf the message contains the update condition, the UDR shall check if the condition is satisfied. If it is not, an unsuccessful response shall be returned to the FE and steps 4-5 shall be skipped.\n4.\tIf the access control check is successful and the update condition is satisfied, the UDR shall update the requested data with the new data value. If the notification triggering conditions are met, the UDR shall perform the Notification Procedure. This procedure may run before, after or in parallel of sending Update data answer (see step 5). See clause 5.8.\n5.\tThe UDR shall return an Update data answer message to the FE. The FE then shall continue processing its application logic.",
      "chunk_type": "general",
      "cross_references": [
        "clause_5.8",
        "figure_5.6-1"
      ]
    },
    {
      "chunk_id": "ts_23.335_5.7",
      "section_id": "5.7",
      "section_title": "Subscription to Notifications",
      "content": "This procedure is used by FE to perform the subscription/un-subscription to notification to specific events which occurs on specific user data stored in the UDR. The events can be changes on existing user data, addition of user data, and so on. The information flow for the Subscription to Notifications procedure is shown in figure 5.7-1.\nFigure 5.7-1: Subscription procedure\n1.\tWhen an FE wants to receive notifications of specific events on specific user data stored in the UDR, it shall construct a Subscription Request message and send it over the Ud reference point to the UDR. The message may consist of the following information:\n-\tthe FE Identifier or the FE Cluster Identifier\n-\tUser identity, e.g. IMSI, MSISDN, IMS public user identity or IMS private user identity. The User Identity may not be present indicating that the subscription is applicable to all users in the UDR.\n-\tSubscription Type\nThe Subscription Type indicates whether this request is to subscribe or to unsubscribe.\n-\tNotification Type. It indicates whether this subscription request should result in a notification to any FE of the application type or cluster identifier, or in a notification to the FE requesting the notification.\n-\tSubscription to Notifications information, which consists of:\n-\tIdentification of the requested data\nThe Identification of the requested data indicates the data to which notifications are subscribed.\n-\tThe notification condition(s)\nThe notification condition indicates the specific events on which the notification shall be triggered. It shall consist of the addition of the requested data, the deletion of the requested data or the changes of the requested data.\n-\tThe expiry time\nIf the subscription is not permanent, the expiry time indicates the point in time when the subscription to notifications expires.\n-\tThe original entity identity\nIf the subscription request is related to a UDC external entity (e.g. AS) subscription request, this item indicates the original entity which sent the subscription request message to the FE in order to subscribe to the notification of the specific events of the requested data. The item shall contain the address or the name of the original entity.\n2.  When receiving a Subscription Request from a specific FE, the UDR shall perform access control to check whether the FE is allowed to perform the subscription to the UDR on the requested data. If not, an unsuccessful response shall be returned to the FE, and steps 3 and 4 are skipped.\n3.  The UDR shall store the subscription to notifications information.\n4.  The UDR shall return a successful response message to the FE.\nNOTE 1:\tSince Subscription to Notifications information cannot be shared among different FEs (i.e. a FE cannot read from the UDR subscription information related to another FE), and for interoperability purposes, careful consideration is to be taken into account when using subscriptions over Ud. For example, an application FE could subscribe to notifications about certain data changes without being aware that another FE was already subscribed for the purpose of performing the same operations towards the external UDC entities.\nNOTE 2:\tApplications that require subscribe/unsubscribe to notifications about many data changes on a per user basis and for common conditions (e.g. HLR/HSS) can make use of UDR pre-configured subscriptions in order to decrease the signalling over Ud. See information flows (annex A).",
      "chunk_type": "general",
      "cross_references": [
        "figure_5.7-1"
      ]
    },
    {
      "chunk_id": "ts_23.335_5.8.1",
      "section_id": "5.8.1",
      "section_title": "Description",
      "content": "The Notification procedure shall be used by the UDR to notify an FE about modification of data, when data in the UDR is added, modified or deleted, and an FE needs to be informed about this, due to a previous subscription to notifications procedure (as defined within clause 5.7) or due to local configuration policy in the UDR. No notification should be done towards the FE at the origin of a data modification or to a FE belonging to the cluster of the FE at the origin of a data modification.\nThe information flow for the Notification procedure is shown in figure 5.8-1:\nFigure 5.8-1: Notification procedure\n1.\tThe Notification procedure in the UDR is started by the Update data procedure, the Create procedure, or the Delete procedure; see clause 5.6, 5.4 and 5.5 respectively.The UDR shall check whether the relevant notification condition(s) are met. If not met, the following steps shall be skipped and the procedure terminates.\nNOTE:\tThe conditions based on local configuration policy in the UDR (e.g. application type of the FE which performs the create, delete or update procedure, presence or absence of other user data) are operator specific and out of scope of this specification.\n2.\tIf the notification condition(s) are met the UDR shall select an available FE that supports the relevant application. If the notification is the result of a Subscription to Notification procedure, the FE selection shall take into account the value of the Notification Type information element:\n-\tIf the Notification Type indicates that the notification is to be sent to the FE requesting the subscription, the UDR shall select the FE that requested the notification.\n-\tIf the Notification Type indicates that the notification is to be sent to any FE of the application type or cluster identifier, the UDR shall select an appropriate FE of the application type or cluster identifier as applicable.\nNOTE:  Details of the FE selection algorithm can be operator specific and are out of scope of this specification.\n3.\tThe UDR shall fetch the data that are needed by the FE to perform the relevant application logic, such as the value of updated data, and may fetch other additional data based on local configuration policy in the UDR, such as the previous value of updated data, the original subscribing entity identity, etc. to construct a notification request message that includes data (in FE data view).\n4.\tThe UDR shall send the notification request message to the selected FE. The FE shall perform the relevant application logic.\n5.\tThe FE shall return a response message to the UDR to indicate success or failure. If no response is received or a failure is indicated, the UDR shall repeat the procedure starting with step 2 and selecting a different FE.",
      "chunk_type": "requirement",
      "cross_references": [
        "clause_5.7",
        "clause_5.6",
        "figure_5.8-1"
      ]
    },
    {
      "chunk_id": "ts_23.335_5.8.2",
      "section_id": "5.8.2",
      "section_title": "Notifications and transactions",
      "content": "An optional feature allows grouping of notifications associated to the data changes occurring within a transaction. When this optional feature is supported, the notifications of data changes associated to a transaction shall be grouped into one notification procedure to each relevant FE or cluster of FEs, taking into account the subscriptions to notifications or the local configuration policies that requested the notifications of the data changes. The grouping of notifications shall apply independently of those subscriptions to notifications or local configuration policies that requested the notifications of the data changes.\nAnnex A (informative):\tInformation flows\nA.0\tIntroduction\nThe following information flows examples show the possible use of Ud procedures by application front-ends such as HLR, HSS front-ends when executing some of their own procedures with the network\nA.1\tInformation flows with Query data procedure over Ud\nA.1.1\tGeneral\nWhen user data (temporary or permanent) has to be fetched, the application front-end shall perform a query towards the UDR.\nThe following flows show an example of a terminating call in CS network and an example of a re-registration procedure in an IMS network. These scenarios do not address the mechanisms for access authorisation in the UDR. These scenarios only address the specific actions of traffic events that are currently in effect.\nA.1.2\tCS terminating call information flow example\nFigure A.1.2-1: CS terminating call example with Ud Query from HLR-FE\n1.\tThe GMSC initiates MAP Send Routing Info towards the HLR\n2.\tUpon reception of SRI, the application specific front-end (HLR-FE) fetches all the user data it needs to perform its application logic (e.g. VLR number, barring indicators, call forwarding data) from the UDR through a Ud Query procedure.\n3.\tAfter applying the proper access control (i.e. the front-end is allowed to read that type of data), the UDR responds with the requested user data.\n4.\tThe HLR-FE sends MAP Provide Roaming Number to get a MSRN from the VLR.\nNOTE: For simplicity, this example does not show any other procedures that the HLR-FE can possibly do\n5.\tIf the user is reachable, the VLR provides a MSRN in the response. This MSRN is not stored in the UDR, since it is temporarily reserved and consumed in the VLR,\n6.\tThe HLR-FE responds to GMSC with the provided roaming number. No user data is kept in the front-end after the procedure is ended.\nA.1.3\tIMS re-registration information flow example\nFigure A.1.3-1: IMS re-registration flow example with Ud Query from HSS-FE\n1.\tI-CSCF receives an incoming REGISTER request.\n2.\tThe I‑CSCF sends the Cx-Query/Cx-Select-Pull to the HSS with the Public User Identity.\n3.\tUpon reception of Cx-Query, the application specific front-end (HSS-FE) fetches all the user data it needs to perform its application logic (e.g. capabilities associated to the user subscription, list of visited networks allowed, S-CSCF name, etc.) in the UDR through a Ud Query procedure.\n4.\tAfter applying the proper access control (i.e. the front-end is allowed to read the type of data), the UDR responds with data requested (user location, required capabilities, etc.).\n5.\tThe HSS-FE includes the S-CSCF name in the response. No user data is kept in the HSS FE.\n6.\tThe I-CSCF sends the REGISTER request to the received S-CSCF.\n7.\tThe S-CSCF sends to HSS Cx-Put/Pull. This request, in this example, is received by a different HSS-FE.\n8.\tUpon reception of Cx-Put/Pull, the HSS-FE fetches the user profile, S-CSCF name, etc. from the UDR through a Ud Query procedure .\n9.\tAfter applying the proper access control, the UDR responds with data requested (e.g. user profile).\n10.\tThe HSS- FE detects that this is a re-registration, so it sends Cx-Put/Pull Resp to S-CSCF. No user data is kept in the front-end after the procedure is ended.\n11.\tThe S-CSCF returns 200 OK to I-CSCF\n12.\tThe I-CSCF forwards the response to P-CSCF.\nA.2\tInformation flows with Updating data procedure over Ud\nA.2.1\tGeneral\nWhen user data (temporary or permanent) has to be modified, the application front-end shall perform an update procedure towards the UDR.\nThe following flows show an example of a location update in CS network and an example of a service data update in an IMS network. These scenarios do not address the mechanisms for access authorisation in the UDR. These scenarios only address the specific actions of traffic events that are currently in effect.\nA.2.2\tCS location update information flow example\nFigure A.2.2-1: CS location update with Ud Update from HLR-FE\n1.\tThe VLR initiates MAP Update Location message towards HLR.\n2.\tUpon reception of UL, the application specific front-end (HLR-FE) fetches all the user data it needs to perform its application logic (e.g. barrings, VLR number, etc.) from the UDR through a Ud query procedure.\n3.\tAfter applying the proper access control (i.e. the front-end is allowed to read that type of data), the UDR responds with the user data requested.\n4.\tIf the request is allowed (e.g. no barring is to be applied), the HLR-FE sends MAP Insert Subscriber Data to provide the user data to VLR.\n5.\tThe VLR acknowledges the request. HLR-FE receives the information about services supported by the new VLR. This can lead to certain additional modifications on user data.\n6.\tIf the previous and new VLR are not the same, the HLR-FE updates the new user data (e.g. VLR number) in the UDR through a Ud Update procedure.\nNOTE: Step 6 can be done immediately after step 3\n7.\tIf the front-end is allowed to modify the type of data, the UDR updates the new VLR number.\n8.\tThe HLR-FE sends MAP CANCEL LOCATION to cancel the location in the old VLR.\n9.\tThe old VLR acknowledges the request and remove all data related.\n10.\tThe HLR-FE informs the new VLR about the result of the Update Location procedure. No user data is kept in the front-end after the procedure is ended.\nNOTE:\tIn this example, by updating the VLR-Number in the UDR after receiving MAP-Update-Location, the HLR-FE implicitly activates a pre-configured subscription to notification of relevant Subscriber Data changes. By deleting the VLR-Number in the UDR after receiving MAP-PurgeMS, a HLR-FE implicitly deactivates the pre-configured subscription to notification. The presence of a VLR-Number in the UDR is equivalent to a HLR-FE subscription over Ud for sending Notification Messages at modification of any relevant Subscriber Data.\nA.2.3\tIMS service data change information flow example\nFigure A.2.3-1: IMS service data change information flow example with Ud Update from HSS-FE\n1.\tUE initiates a service data configuration update (e.g. activates call waiting) via Ut interface towards the AS.\n2.\tAS performs Sh-update to store the new service data (i.e. transparent data) in the HSS.\n3.\tUpon reception of Sh-Update, the application specific front-end (HSS-FE) checks the AS permission list. If AS is allowed, the HSS-FE fetches the service data for the user from the UDR through a Ud Query procedure. These data include the sequence number to synchronize the writing of data among different ASs.\n4.\tIf the front-end is allowed to read the type of data, the UDR responds with service data.\nNOTE 1:\tAt this step the HSS-FE can also receive the subscription information stored for data requested (i.e. list of ASs subscribed to transparent data changes)\n5.\tIf sequence number is correct, the application specific front-end (HSS-FE) updates the service data for the user in the UDR through a Ud Update procedure. The update data request message contains an update condition to ensure that the data is to be updated if the sequence number was not updated by other FEs.\n6.\tIf the front-end is allowed to update the type of data and the update condition is satisfied, the UDR stores the new service data configuration and the new sequence number\nNOTE 2:\tIf the HSS-FE knows from step 4 that no other AS has subscribed to be notified when transparent data change, the HSS-FE does not send Sh-PNR to any other AS. If no other AS subscribed to transparent data changes and no other notifications are required (based on local configuration policy in the UDR), no Ud Notify is sent.\nNOTE 3:\tIt is assumed that the UDR has not allowed to write the transparent data and sequence number by a HSS-FE during steps 3-6.\n7.\tThe HSS-FE sends the response to Sh-Update to AS. No user data is kept in the front-end after the procedure is ended.\nA.3\tExample Information flows for subscriptions to notifications\nA.3.1\tGeneral\nWhen an UDC-external entity subscribes/un-subscribes to notifications of specific events which occurs on specific user data stored in the UDR, the application front-end should perform a subscription procedure towards the UDR.\nThe following flows show examples of an application server subscription to notification and un-subscription to notification in IMS network. These scenarios do not address the mechanisms for access authorisation in the UDR.\nA.3.2\tApplication Server Subscription information flow example\nFigure A.3.2-1 Subscription over Sh with Ud subscription from HSS-FE\n1.\tAS sends the Sh-Subs-Notif request to the HSS-FE to subscribe or un-subscribe to the notifications of changes on the Repository Data with the related Public User Identity, the Service Indication, the Application Server Identity, the Expiry Time (not for un-subscribing) and other information.\n2.\tUpon reception of the Sh-Subs-Notif request, the HSS-FE checks the AS-permission list to see whether the AS is allowed to contact the HSS. If so, the HSS-FE sends the Query Request to the UDR to fetch the user data needed to process the Sh-Subs-Notify request from the UDR.\n3.\tAfter applying the access control, the UDR responds to the HSS-FE with the requested data.\n4.\tThe FE sends a Subscription Request to the UDR.\nThe Subscription Request message includes:\n-\tThe Application type of the FE\n-\tApplication FE identity\n-\tPublic User Identity\n-\tSubscription Type: indicates whether this request is to subscribe or to un-subscribe.\n-\tNotification Type\n-\tthe following Subscription-to-Notifications information:\n-\tIdentification of the requested data:  Repository Data with Service Indication.\n-\tThe notification condition: change on user data.\n-\tThe original entity identity: Application Server Identity which issues the Sh-Subs-Notif request.\n-\tThe expiry time: the Expiry Time in the Sh-Subs-Notif Request, if any (possibly modified by the HSS-FE); expiry time is not applicable for un-subscriptions.\n5.\tThe UDR checks whether the subscription/un-subscription is allowed. If it is permitted, the UDR shall store/delete the Subscription-to-Notification information. The UDR responds with the Success Indication.\n6.\tUpon reception the Subscription Response, the HSS-FE sends the Sh-Subs-Notif Resp to the AS with the value of the requested data and with the result code set to DIAMETER_SUCCESS.\nA.4\tInformation flows with notification procedure over Ud\nA.4.1\tGeneral\nWhen user data (temporary or permanent) has been modified, the application front-end may require a notification.\nWhen an UDC-external entity modifies subscribable data in the UDR via an application FE, this application FE shall send notifications to other UDC-external entities on supported UDC-external interfaces as part of its application logic (if so required). Notifications to other UDC-external entities to which this FE is not connected, or to other AS which subscribed to notifications, require notification on the Ud-Interface.\nThe following flows show examples of IMS capability change for a user, an application server subscription to notification and un-subscription to notification in IMS network. These scenarios do not address the mechanisms for access authorisation in the UDR. These scenarios only address the specific actions of traffic events that are currently in effect.\nA.4.2\tIMS user capability change with notification information flow example\nFigure A.4.2-1: IMS service data change information flow example with Ud notification towards HSS-FE\n1.\tThe operator changes the capabilities to move the user to a new S-CSCF, the user is administratively de-registered and S-CSCF is cleared (via Provisioning FE).\n2.\tAfter applying the proper access control (i.e. the front-end is allowed to write that type of data), the UDR updates the requested data (e.g. registration status, user capabilities, etc.)\n3.\tThe UDR checks if a FE is required to be notified upon these modified data. If so, it selects a FE supporting the HSS application and sends a notification which contains the user data needed by the FE to perform its application logic (old/new user status, S-CSCF name, etc.)\nNOTE 1:\tThe conditions to trigger the notification can be common for all users and can be based on local configuration policy in the UDR, e.g. a Provisioning FE modifies user data that is relevant for another application type (HSS) and other related user data is present (S-CSCF name).\nNOTE 2:\tThe FE selection mechanism performed by the UDR (e.g. FE cluster identity if it was stored at user's registration, application supported, load balancing, etc.) is out of scope of this specification.\n4.\tHSS-FE acknowledges the notification.\n5.\tThe user is de-registered from S-CSCF1 by HSS-FE.\n6.\tS-CSCF1 acknowledges the Cx command.\nA.4.3\tApplication Server Notification information flow example without Ud-Notify\nFigure A.4.3-1 Notification over Sh without Ud notification\n1.\tAS1 sends the Sh-Update request to the HSS-FE to update the Repository Data with the related Public User Identity, the Service Indication, the Application Server Identity, and other information.\n2.\tUpon reception of the Sh-Update request, the HSS-FE checks the AS-permission list to see whether the AS is allowed to contact the HSS. If so the HSS-FE sends the Query Request to the UDR to fetch the user data needed to process the Sh-Update request from the UDR.\n3.\tAfter applying the access control, the UDR responds to the HSS-FE with the requested data.\n4.\tThe HSS-FE sends an Update Data Request to the UDR.\n5.\tThe UDR checks whether the update is allowed. If it is permitted, the UDR shall update the repository data. The UDR responds with the Success Indication. Since the update data request was sent by an FE which can contact AS2 and there is no other AS which subscribed to changes in repository data, the UDR does not send Ud-notify.\nNOTE: The UDR knows that the FE can contact AS2 based on local configuration policy\n6.\tUpon reception the Update Data Response, the HSS-FE sends the Sh-Update Resp to the AS with the result code set to DIAMETER_SUCCESS.\n7.\tThe HSS-FE checks data received in step 3 to see whether an AS has subscribed to notifications (i.e. whether a HSS-FE has previously added/stored an AS in the Application Server Identity List for the Repository Data of the user upon receiving a previous Sh-Subs-Notif). If so the HSS-FE checks the notification conditions. In this example the conditions are met (i.e. AS expiry time stored in the Application Server Identity list has not elapsed) and the HSS-FE sends Sh-Notif to AS2.\n8.\tAS2 sends Sh-Notif Resp to the HSS FE.\nA.4.4\tApplication Server Notification information flow example with Ud-Notify\nFigure A.4.4-1 Notification over Sh with Ud notification\n1.\tOSS sends the Update request to the Provisioning-FE to update the Charging Information with the related Public User Identity.\n2.\tUpon reception of the Update request, the Provisioning-FE sends the Query Request to the UDR to fetch user data from the UDR.\n3.\tAfter applying the access control, the UDR responds to the Provisioning-FE with the requested data.\n4.\tThe Provisioning-FE sends Update Data Request to the UDR to update the Charging Information.\n5.\tThe UDR checks whether the update is allowed. If it is permitted, the UDR shall update the charging information. The UDR responds with the Success Indication.\n6.\tUpon reception the Update Data Response, the Provisioning-FE sends the Update Resp to the OSS.\n7.\tSince an AS has subscribed to notification of update of Charging Information (i.e. a HSS-FE has previously added/stored an AS in the Application Server Identity List for the Charging Information of the user upon receiving Sh-Subs-Notif) and the update data request was sent by an non HSS-FE (that is, a FE which cannot contact the AS), the UDR selects an HSS-FE and sends Notify Request to the selected FE.\nThe Notify Request includes the following items:\n-\tPublic User Identity.\n-\tIdentification of the requested data:  Charging Information.\n-\tOriginal data: Original value of the Charging Information before update.\n-\tUpdated data: updated value of the Charging Information.\n-\tAdditional data: the additional information needed by the FE to perform the Notification procedure in addition to the requested data.\n-\tThe original entity identity: the identity of the Application Server which issues the Sh-Subs-Notif request.\nNOTE:\tIn this example, it is assumed that a pre-configured subscription exists in the UDR and that a modification to the Charging Information is done by a non HSS-FE, which results in a notification to an HSS-FE.\n8.\tThe HSS-FE checks data received in step 7 to see whether an AS has subscribed to notifications on modification on charging information (i.e. whether a HSS-FE has previously added/stored an AS in the Application Server Identity List for the Charging Information of the user upon receiving a previous Sh-Subs-Notif). If so the HSS-FE checks the detailed notification conditions. In this example the conditions are met (i.e. AS expiry time stored in the Application Server Identity list has not elapsed) and the HSS-FE sends Sh-Notif to the AS.\n9.\tAS sends Sh-Notif Resp to the HSS FE.\n10.\tHSS-FE sends Notify Resp to the UDR.\nA.4.5\tApplication Server Notification information flow example without Ud-Notify – Subscription expired\nFigure A.4.5-1 Notification over Sh without Ud notification – Subscription expired\n1-6.\tSee A.4.3.\n7.\tThe HSS-FE checks data received in step 3 to see whether an AS has subscribed to notifications (i.e. whether a HSS-FE has previously added/stored an AS in the Application Server Identity List for the Repository Data of the user upon receiving a previous Sh-Subs-Notif). If so the HSS-FE checks the notification conditions. In this example the conditions are not met (i.e. AS expiry time stored in the Application Server Identity list has elapsed). The HSS-FE un-subscribes the expired AS subscription in the UDR by removing the AS from Application Server Identity List for the Repository Data for the user.\n8.\tUDR sends Un-Subscribe Resp to the HSS FE.\nA.4.6\tApplication Server Notification information flow example with Ud-Notify – Subscription expired\nFigure A.4.6-1 Notification over Sh with Ud notification\n1-7.\tSee A.4.4\n8.\tThe HSS-FE checks data received in step 7 to see whether an AS has subscribed to notifications on modification on charging information (i.e. whether a HSS-FE has previously added/stored an AS in the Application Server Identity List for the Charging Information of the user upon receiving Sh-Subs-Notif). If so the HSS-FE checks the notification conditions. In this example the conditions are not met (i.e. AS expiry time stored in the Application Server Identity list has elapsed). The HSS-FE un-subscribes the expired AS subscription in the UDR by removing the AS from Application Server Identity List for the Charging Information for the user.\n9.\tUDR sends Un-Subscribe Resp to the HSS FE.\n10.\tHSS-FE sends Notify Resp to the UDR.\nAnnex B (informative): Applicability of the UDC concept to network nodes\nB.1 Introduction\nThis informative annex outlines a step by step approach which aims to help clarifying whether a given network node is applicable to the UDC concept.\nB.2 Basic Prerequisite\nA fundamental concept of UDC is to separate a network node's user data from a network node's application logic.\nIt is understood that a network node's application logic is running in sessions, which last for a limited duration. During a session the application logic makes use of user data, i.e. user data cannot be separated from the application logic while a session is ongoing. Only when no session is ongoing user data can be separated from the application logic.\nNOTE:\tThe terms \"session\" and \"application\" in this context have special meaning which must not be mixed up with a user's communication session or service application.\nConsequently, Network Nodes that (in non-UDC networks) do not store user data (while no session is ongoing), are not applicable to the UDC concept.\nFurthermore, Network Nodes that (in non-UDC networks) do not perform application logic (i.e. pure data bases), are not applicable to the UDC concept.\nB.3 Step 1 – Separating User Data from Application Logic\nIn principle, any network node (in non-UDC networks) that stores user data while no session is ongoing and that performs application logic is a candidate for separation of user data and application logic:\nFigure B.3.1/1: Separating User Data from Application Logic\nHowever, separating user data from application logic without any additional steps does not provide much benefit (if any).\nB.4 Step 2 – Introducing Provisioning FEs\nIf part of the candidate node's user data is permanent data which is applicable to provisioning at that node, provisioning-application logic could also be separated from the node's application logic.\nFigure B.4.1/1: Introducing Provisioning FEs\nAgain, this step alone does not provide much benefit.\nB.5 Step 3 - Storing outsourced user data in a logically single UDR\nThis step is an essential part of the UDC concept. The outsourced user data are stored in a logically unique UDR:\nFigure B.5.1/1: Storing outsourced user data in a logically single UDR\nOne of the benefits of this step is that e.g. Provisioning FE 2 could not only access via Ud those user data which were separated from the application logic in Node-FE 2, but also those user data that were separated from the application logic in Node-FE 1.\nFigure B.5.1/2: Storing outsourced user data in a logically single UDR\nB.6 Step 4 –Full Load Sharing and Failover functionality\nWhat is said for the provisioning FEs in step 3, in theory also holds for other node-FEs: Node-FE 2 could access via Ud not only its own outsourced data, but also data sourced out by Node-FE 1. However, careful analysis is needed before deciding the cases in which \"cross data accessibility\" should be allowed. The main point to consider is whether or not parallel sessions in different FEs result in problems.\nIf routing mechanisms used on the network interfaces allow configuration of alternative routes to address e.g. load sharing, link loss or node outage, and parallel sessions in different FEs are not regarded a problem, FEs of the same application type could share load or could take over in cases of node-FE outage.\nFigure B.6.1/1: Full Load Sharing and Failover functionality\nThis step does not impact FE or UDR implementation but is a routing configuration issue outside the UDC. Furthermore, this step – although it provides great advantages - is believed not to be essential to the UDC concept. Deployments may or may not take advantage of this step if applicable. Non-applicability of this step is not a knock-out criterion for the decision on applicability of the UDC concept for a given node.\nB.7 Step 5 – Converging user data in the UDR\nIt is believed to be beneficial when the user data outsourced by several nodes are not stored separated within the UDR but are somehow converged:\nFigure B.7.1/1: Converging user data in the UDR\nThis step is purely UDR internal and therefore out of scope of CT4 standards, and not further looked at in this annex.\nB.8 Example analysis for HLR\n1.\tAn HLR (in non-UDC Networks) stores user data (while no session is ongoing) and performs application logic, therefore step 1 is applicable.\n2.\tAn HLR (in non-UDC Networks) stores permanent user data provisioned at the HLR, therefore step 2 is applicable.\n3.\tOutsourced HLR user data may be stored in a common UDR to allow access from any Provisioning-FE connected to the UDR. Step 3 is applicable.\n4.\tParallel sessions in two different HLR-FEs: It is believed that e.g. one HLR-FE could process a MAP-SendRoutingInfoForSM message while another HLR-FE processes a MAP-AnyTimeInterrogation message for the same user at the same time. This in general holds for all HLR-FE session initiating messages. Furthermore the duration of an HLR-FE session in general is in the range of seconds or minutes rather than hours or days. The transaction mechanism supported on the Ud interface is suitable to address data synchronization.\nStep 4 is applicable.\nIn summary all steps are applicable and provide the full benefits of the UDC concept.\nB.9 Example analysis for S-CSCF\n1.\tAn S-CSCF (in non-UDC Networks) stores (or may store) user data (while no session is ongoing i.e. no SCSCF-application logic is running) and performs application logic, therefore step 1 is applicable.\n2.\tAn S-CSCF (in non-UDC Networks) does not store permanent user data provisioned at the S-CSCF, therefore step 2 is not applicable.\n3.\tOutsourced S-CSCF user data may be stored in a common UDR, but access from Provisioning FEs is not applicable. Step 3 is applicable, but does not provide any benefit.\n4.\tParallel sessions in two different S-CSCF-FEs may be regarded a challenge.\nStep 4 is not applicable.\nIn summary the applicable steps (1 and 3) do not provide any benefit.\nB.10 Example analysis for PCRF and SPR\n1.\tA PCRF (in non-UDC Networks) does not store user data (while no session is ongoing); on the other hand an SPR does not perform application logic. It seems that the concept of separating application logic from user data (see step 1) is already in place.\n2. Also step 2 (direct provisioning of user data in the SPR rather than via PCRF) seems to be already in place.\n3. Also step 3 (combining several SPRs to a logically unique database) is applicable.\n4. Parallel sessions in two different PCRFs needs further study.\nStep 4 may not applicable.\nIn summary steps 1, 2, and 3 are applicable and provide some benefits. Applicability of step 4 may provide further benefits but it is for further study.\nB.11 Summary\nAny network entity that performs application logic (in sessions which are limited in duration) and that stores user data (during the time where no session is running) is in principle applicable to the UDC concept. However some nodes may not fully benefit from the UDC concept, especially if\n-\tpermanent user data stored at the node - in a non UDC network - is not provisioned at that node\n-\tparallel sessions for the same user at the same time cannot run independently\nAnnex C (informative): Change history\nChange history\nDate\nMeeting\nTDoc\nCR\nRev\nCat\nSubject/Comment\nNew version\n2010-03\nCP#47\nCP-100051\nApproved in CT#47\n9.0.0\n2010-06\nCP#48\nCP-100282\n0001\n1\nRemoval of normative behaviour of the HLR-FE during MAP Update Location flow\n9.1.0\n0002\n1\nRemoval of security editor's note\n0005\nFE data view\n2010-09\nCP#48\nCP-100459\n0004\n3\nUDC Reference Architecture\n9.2.0\n2010-12\nCP#50\nCP-100680\n0006\nProvisioning FE correction\n9.3.0\n0007\n1\nNotifications triggered by a FE to its cluster\n0008\n1\nProvisioning from self care systems\n2011-03\nCP#51\nCP-110074\n0013\n2\nNotifications and transactions\n10.0.0\n2012-03\nCP#57\nCP-120469\n0014\n1\nAdding note on Data Model for User Data Convergence architecture\n11.0.0\n2014-09\n-\n-\n-\n-\nUpdate to Rel-12 version (MCC)\n12.0.0\n2015-12\nCT#70\n-\n-\n-\nUpdate to Rel-13 version (MCC)\n13.0.0\n2016-03\nCT#71\nCP-160031\n0015\n3\nMCPTT Application FEs\n13.1.0\n2017-03\nCT#75\nCP-170045\n0018\n1\nMC services application FEs\n14.0.0\n2018-06\nCT#80\n-\n-\n-\nUpdate to Rel-15 version (MCC)\n15.0.0\n2020-07\nCT#88e\n-\n-\n-\nUpdate to Rel-16 version (MCC)\n16.0.0\n2022-03\nCT#95e\n-\n-\n-\n-\nUpdate to Rel-17 version (MCC)\n17.0.0\n2024-03\n-\n-\n-\n-\n-\nUpdate to Rel-18 version (MCC)\n18.0.0",
      "chunk_type": "general",
      "cross_references": []
    }
  ]
}