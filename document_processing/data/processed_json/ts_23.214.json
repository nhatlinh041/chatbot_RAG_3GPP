{
  "metadata": {
    "specification_id": "ts_23.214",
    "version": "18.0.0",
    "title": "3GPP TS 23.214",
    "file_path": "/content/drive/MyDrive/RAG_thesis/data/23_series/23214-i00/23214-i00.docx"
  },
  "export_info": {
    "export_date": "2025-07-26T09:40:05.417757",
    "total_chunks": 108
  },
  "chunks": [
    {
      "chunk_id": "ts_23.214_1",
      "section_id": "1",
      "section_title": "Scope",
      "content": "The present document specifies the overall stage 2 level functionality for control and user plane separation of EPC's SGW, PGW and TDF. This enables a flexible placement of the separated control plane and user plane functions for supporting diverse deployment scenarios (e.g. central or distributed user plane function) without affecting the overall functionality provided by these EPC entities.",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.214_2",
      "section_id": "2",
      "section_title": "References",
      "content": "The following documents contain provisions which, through reference in this text, constitute provisions of the present document.\n-\tReferences are either specific (identified by date of publication, edition number, version number, etc.) or non‑specific.\n-\tFor a specific reference, subsequent revisions do not apply.\n-\tFor a non-specific reference, the latest version applies. In the case of a reference to a 3GPP document (including a GSM document), a non-specific reference implicitly refers to the latest version of that document in the same Release as the present document.\n[1]\t3GPP TR 21.905: \"Vocabulary for 3GPP Specifications\".\n[2]\t3GPP TS 23.401: \"General Packet Radio Service (GPRS) enhancements for Evolved Universal Terrestrial Radio Access Network (E-UTRAN) access\".\n[3]\t3GPP TS 23.203: \"Policy and charging control architecture\".\n[4]\t3GPP TS 23.402: \"Architecture enhancements for non-3GPP accesses\".\n[5]\t3GPP TS 23.060: \"General Packet Radio Service (GPRS); Service description; Stage 2\".\n[6]\t3GPP TS 29.060: \"GPRS Tunnelling Protocol (GTP) across the Gn and Gp interface\".\n[7]\t3GPP TS 29.274: \"3GPP Evolved Packet System (EPS); Evolved General Packet Radio Service (GPRS) Tunnelling Protocol for Control plane (GTPv2-C); Stage 3\".\n[8]\t3GPP TS 32.251: \"Telecommunication management; Charging management; Packet Switched (PS) domain charging\".\n[9]\t3GPP TS 32.240: \"Charging architecture and principles\".\n[10]\t3GPP TS 33.107: \"3G security; Lawful interception architecture and functions\".\n[11]\t3GPP TS 29.212: \"Policy and Charging Control (PCC); Reference points\".\n[12]\t3GPP TS 29.244: \"Interface between the Control Plane and the User Plane of EPC Nodes; Stage 3\".\n[13]\t3GPP TS 28.708: \"Telecommunication management; Evolved Packet Core (EPC) Network Resource Model (NRM) Integration Reference Point (IRP); Information Service (IS)\".\n[14]\t3GPP TS 29.061: \"Interworking between the Public Land Mobile Network (PLMN) supporting packet based services and Packet Data Networks (PDN)\".",
      "chunk_type": "general",
      "cross_references": [
        "ts_21.905",
        "ts_23.401",
        "ts_23.203",
        "ts_23.402",
        "ts_23.060",
        "ts_29.060",
        "ts_29.274",
        "ts_32.251",
        "ts_32.240",
        "ts_33.107",
        "ts_29.212",
        "ts_29.244",
        "ts_28.708",
        "ts_29.061"
      ]
    },
    {
      "chunk_id": "ts_23.214_3.1",
      "section_id": "3.1",
      "section_title": "Definitions",
      "content": "For the purposes of the present document, the terms and definitions given in TR 21.905 [1], TS 23.401 [2], TS 23.203 [3] and the following apply. A term defined in the present document takes precedence over the definition of the same term, if any, in TR 21.905 [1].\nF-TEID: as defined in clause 8.22 of TS 29.274 [7].\nF-TEIDu: The F-TEID of a GTP-u tunnel.",
      "chunk_type": "definition",
      "cross_references": [
        "ts_21.905_clause_8.22",
        "ts_29.274_clause_8.22",
        "ts_21.905",
        "ts_23.401",
        "ts_23.203",
        "ts_29.274"
      ]
    },
    {
      "chunk_id": "ts_23.214_3.2",
      "section_id": "3.2",
      "section_title": "Abbreviations",
      "content": "For the purposes of the present document, the abbreviations given in TR 21.905 [1], TS 23.401 [2], TS 23.203 [3] and the following apply. An abbreviation defined in the present document takes precedence over the definition of the same abbreviation, if any, in TR 21.905 [1].\nCP function\tControl Plane function\nPGW\tPDN Gateway\nPGW-C\tPDN Gateway Control plane function\nPGW-U\tPDN Gateway User plane function\nSGW\tServing Gateway\nSGW-C\tServing Gateway Control plane function\nSGW-U\tServing Gateway User plane function\nTDF\tTraffic Detection Function\nTDF-C\tTraffic Detection Function Control plane function\nTDF-U\tTraffic Detection Function User plane function\nUP function\tUser Plane function",
      "chunk_type": "general",
      "cross_references": [
        "ts_21.905",
        "ts_23.401",
        "ts_23.203"
      ]
    },
    {
      "chunk_id": "ts_23.214_4.1",
      "section_id": "4.1",
      "section_title": "General concepts",
      "content": "The architecture and functionality for control and user plane separation of SGW, PGW and TDF is based on the following concepts:\n-\tInterworking with networks not applying control and user plane separation is possible (i.e. in case of roaming scenarios);\n-\tSplit network entities can interwork with network entities that are not split within the same network;\n-\tSplit network entities have no requirement to update UE, and Radio Access Network;\n-\tThe SGW/PGW selection function of the MME/ePDG/TWAN described in TS 23.401 [2] and TS 23.402 [4] is used for the selection of the respective CP function;\n-\tThe configuration based mechanism (in PGW or PCRF) described in TS 23.203 [3] is used for the selection of the CP function of the TDF;\n-\tA CP function can interface with one or more UP functions (e.g. to enable independent scalability of CP functions and UP functions).",
      "chunk_type": "definition",
      "cross_references": [
        "ts_23.401",
        "ts_23.402",
        "ts_23.203"
      ]
    },
    {
      "chunk_id": "ts_23.214_4.2.1",
      "section_id": "4.2.1",
      "section_title": "Non-roaming and roaming architectures",
      "content": "This clause defines the complementary aspects of the architecture reference models specified in clause 4.2 of TS 23.401 [2] and clauses 4.2.2 and 4.2.3 of TS 23.402 [4] for GTP-based interfaces when SGW, PGW and TDF control and user planes are separated.\nFor S2a, S2b, S5 and S8 reference points, this architecture reference model is only supported with GTP-based interfaces. PMIP-based interfaces and S2c interface are not supported.\nFigure 4.2.1-1 shows the architecture reference model in the case of separation between control plane and user plane. This architecture reference model covers non-roaming as well as home routed and local breakout roaming scenarios.\nFigure 4.2.1-1: Architecture reference model with separation of user plane and control plane for non-roaming and roaming scenarios\nNOTE 1:\tThe -C or -U suffix appended to S2a, S2b, S5 and S8 existing reference points only indicate the control plane and user plane components of those interfaces.\nNOTE 2:\tThe architecture in figure 4.2.1-1 only depicts the case when the CP and UP functions of all SGW, PGW and TDF nodes are split. However, the other cases when the CP and UP function of only one of these nodes is split while the CP and UP function of the other interfacing node is not split, e.g. PGW's control plane and user plane is split while SGW's control plane and user plane is not split, are also supported. The split architecture of a node does not put any architectural requirements on the peer nodes with which it interfaces.\nNOTE 3:\tTDF is an optional functional entity.\nNOTE 4:\tAdditional interfaces/reference points are documented in TS 23.401 [2], TS 23.402 [4], TS 23.060 [5] and TS 23.203 [3].\nNOTE 5:\tFor a roaming architecture with local breakout, the Gx interface is defined between the PGW-C and PCRF in the visited network.\nNOTE 6:\tS11-U is the interface between MME and SGW-U, supporting CP CIoT EPS Optimisation (see TS 23.401 [2]).",
      "chunk_type": "general",
      "cross_references": [
        "ts_23.401_clause_4.2",
        "figure_4.2.1-1",
        "ts_23.401",
        "ts_23.402",
        "ts_23.060",
        "ts_23.203"
      ]
    },
    {
      "chunk_id": "ts_23.214_4.2.2",
      "section_id": "4.2.2",
      "section_title": "Combined SGW/PGW architecture",
      "content": "The usage of a combined SGW/PGW documented in TS 23.401 [2] remains possible in a deployment with separated control and user planes. This is enabled by supporting an Sx interface with a common parameter structure for non-combined and combined cases. Figure 4.2.2-1 shows the architecture reference model for a combined SGW/PGW in the case of separation between control plane and user plane.\nFigure 4.2.2-1: Architecture reference model with separation of user plane and control plane for a combined SGW/PGW\nNOTE 1:\tThe combined Sxa/Sxb shown in figure 4.2.2-1 only covers the functionality of Sxa and Sxb.\nNOTE 2:\tS11-U is the interface between MME and combined SGW/PGW-U, supporting CP CIoT EPS Optimisation (see TS 23.401 [2]).",
      "chunk_type": "general",
      "cross_references": [
        "figure_4.2.2-1",
        "ts_23.401"
      ]
    },
    {
      "chunk_id": "ts_23.214_4.2.3",
      "section_id": "4.2.3",
      "section_title": "Reference points",
      "content": "This clause defines the complementary reference points of the architecture reference models specified in clause 4.2 of TS 23.401 [2] and clauses 4.2.2 and 4.2.3 of TS 23.402 [4] for GTP-based interfaces when SGW, PGW and TDF control and user planes are separated.\nThe reference points added to the reference points defined in TS 23.401 [2], TS 23.402 [4] and TS 23.203 [3] are the following ones:\nSxa:\tReference point between SGW-C and SGW-U.\nSxb:\tReference point between PGW-C and PGW-U.\nSxc:\tReference point between TDF-C and TDF-U.",
      "chunk_type": "general",
      "cross_references": [
        "ts_23.401_clause_4.2",
        "ts_23.401",
        "ts_23.402",
        "ts_23.203"
      ]
    },
    {
      "chunk_id": "ts_23.214_4.3.1",
      "section_id": "4.3.1",
      "section_title": "General",
      "content": "This clause documents the existing functionality of SGW, PGW and TDF as described in TS 23.401 [2], TS 23.402 [4] and TS 23.203 [3].\nTable 4.3.1-1: Existing functionality of SGW, PGW and TDF\nMain functionality\nSub-functionality\nSGW\nPGW\nTDF\nA. Session management\n1. Resource management for bearer resources\nX\nX\n(default & dedicated bearer\n2. IP address and TEID assignment for GTP-U\nX\nX\nestablishment,\n3. Packet forwarding\nX\nX\nbearer modification, bearer deactivation)\n4. Transport level packet marking\nX\nX\n1. IP address allocation from local pool\nX\n2. DHCPv4 / DHCPv6 client\nX\nB. UE IP address\n3. DHCPv4 / DHCPv6 server\nX\nmanagement\n4. Router advertisement, router solicitation, neighbour advertisement, neighbour solicitation (as in RFC 4861)\nX\n1. Forwarding of \"end marker\" (as long as user plane to source eNB exists)\nX\nC. Support for UE mobility\n2. Sending of \"end marker\" after switching the path to target node\nX\nX\n3. Forwarding of buffered packet\nX\n4. Change of target GTP-U endpoint within 3GPP accesses\nX\nX\n5. Change of target GTP-U endpoint between 3GPP and non-3GPP access\nX\n1. ECM-IDLE mode DL packet buffering; Triggering of Downlink Data Notification message generation per bearer (multiple, if DL packet received on higher ARP than previous DDN); Inclusion of DSCP of packet in DDN message for Paging Policy Differentiation\nX\nD. S1-Release / Buffering / Downlink Data Notification\n2. Delay Downlink Data Notification Request (if terminating side replies to uplink data after UE service request before SGW gets updated)\nX\n3. Extended buffering of downlink data when the UE is in a power saving state and not reachable (high latency communication); dropping of downlink data (if MME has requested SGW to throttle downlink low priority traffic and if the downlink data packet is received on such a bearer (see clause 4.3.7.4.1a).\nX\n4. PGW pause of charging procedure based on operator policy/configuration the SGW (failed paging, abnormal radio link release, number/fraction of packets/bytes dropped at SGW)\nX\nX\n1. UL/DL APN-AMBR enforcement\nX\nX\nE. Bearer/APN policing\n2. UL/DL bearer MBR enforcement (for GBR bearer)\nX\n3. UL/DL bearer MBR enforcement (for nonGBR bearer on Gn/Gp interface)\nX\n1. Service detection (DPI, IP-5-tuple)\nX\nX\n2. Bearer binding (bearer QoS & TFT)\nX\n3. UL bearer binding verification and mapping of DL traffic to bearers\nX\n4. UL and DL service level gating\nX\nX\n5. UL and DL service level MBR enforcement\nX\nX\n6. UL and DL service level charging (online & offline, per charging key)\nX\nX\n7. Usage monitoring\nX\nX\nF. PCC related functions\n8. Event reporting (including application detection)\nX\nX\n9. Request for forwarding of event reporting\nX\n10. Redirection\nX\nX\n11. FMSS handling\nX\nX\n12. PCC support for NBIFOM\nX\n13. DL DSCP marking for application indication\nX\n14. Predefined PCC/ADC rules activation and deactivation\nX\nX\n15. PCC support for SDCI\nX\nX\nG. NBIFOM\nNon-PCC aspects of NBIFOM\nX\nX\nH. Inter-operator\n1. Accounting per UE and bearer\nX\nX\naccounting (counting of volume and time)\n2. Interfacing OFCS through reference points specified in TS 32.240 [9]\nX\nX\nX\nI. Load/overload control functions\nExchange of load/overload control information and actions during peer node overload\nX\nX\nJ. Lawful interception\nInterfacing LI functions through reference points specified in TS 33.107 [10] and performing LI functionality\nX\nX\nK. Packet screening function\nX\nL. Restoration and recovery\nX\nX\nX\nM. RADIUS / Diameter on SGi\nX\nN. OAM interfaces\nX\nX\nX\nO. GTP bearer and path management\nGeneration of echo request, handling of echo response, echo request timeout and Error Indication message\nX\nX",
      "chunk_type": "definition",
      "cross_references": [
        "clause_4.3.7.4.1",
        "ts_23.401_table_4.3.1-1",
        "ts_23.401",
        "ts_23.402",
        "ts_23.203",
        "ts_32.240",
        "ts_33.107"
      ]
    },
    {
      "chunk_id": "ts_23.214_4.3.2.1",
      "section_id": "4.3.2.1",
      "section_title": "Functional split of SGW",
      "content": "The following table describes the functionality of the SGW-C and the SGW-U.\nAll functionality performed by the SGW-U is controlled from the SGW-C and thus even if it is marked below as a SGW-U functionality only, there will be corresponding control functionality in the SGW-C.\nNOTE:\tFunctionality not marked for SGW-U is either only provided by SGW-C or does not require any specific SGW-U behaviour.\nFor interfaces not listed in the table below, Figure 4.2.1-1 describes whether they are terminated in SGW- C or SGW-U.\nTable 4.3.2-1: Functional split of SGW\nMain functionality\nSub-functionality\nSGW-C\nSGW-U\nComments\nA. Session management\n1. Resource management for bearer resources\nX\nX\nSee clause 5.10\n(default & dedicated bearer\n2. IP address and TEID assignment for GTP-U\nX\nX\nSee clause 5.4\nestablishment,\n3. Packet forwarding\nX\nbearer modification, bearer deactivation\n4. Transport level packet marking\nX\n1. Forwarding of \"end marker\" (as long as user plane to source eNB exists)\nX\nC. Support for UE mobility\n2. Sending of \"end marker\" after switching the path to target node\nX\nX\nSee clause 5.8\n3. Forwarding of buffered packet\nX\nX\nSee clause 5.9\n4. Change of target GTP-U endpoint within 3GPP accesses\nX\n5. Change of target GTP-U endpoint between 3GPP and non-3GPP access\nN/A\n1. ECM-IDLE mode DL packet buffering; Triggering of Downlink Data Notification message generation per bearer (multiple, if DL packet received on higher ARP than previous DDN); Inclusion of DSCP of packet in DDN message for Paging Policy Differentiation\nX\nX\nSee clause 5.9\nD. S1-Release / Buffering / Downlink Data Notification\n2. Delay Downlink Data Notification Request (if terminating side replies to uplink data after UE service request before SGW gets updated)\nX\n3. Extended buffering of downlink data when the UE is in a power saving state and not reachable (high latency communication); dropping of downlink data (if MME has requested SGW to throttle downlink low priority traffic and if the downlink data packet is received on such a bearer (see clause 4.3.7.4.1a).\nX\nX\nSee clause 5.9\n4. PGW pause of charging procedure based on operator policy/configuration the SGW (failed paging, abnormal radio link release, number/fraction of packets/bytes dropped at SGW)\nX\nSee clause 5.3.4\nG. NBIFOM\nNon-PCC aspects of NBIFOM\nX\nH. Inter-operator\n1. Accounting per UE and bearer\nX\nSee clause 5.3\naccounting (counting of volume and time)\n2. Interfacing OFCS through reference points specified in TS 32.240 [9]\nX\nSee clause 5.3\nI. Load/overload control functions\nExchange of load/overload control information and actions during peer node overload\nAs defined in CT WG4 TS 29.244 [12]\nJ. Lawful interception\nInterfacing LI functions through reference points specified in TS 33.107 [10] and performing LI functionality\nX\nX\nAs defined in SA WG3-LI TS 33.107 [10]\nL. Restoration and recovery\nAs defined in CT WG4 TS 29.244 [12]\nN. OAM interfaces\nAs defined in SA WG5 TS 28.708 [13]\nO. GTP bearer and path management\nGeneration of echo request, handling of echo response, echo request timeout and Error Indication message\nAs defined in CT WG4 TS 29.244 [12]",
      "chunk_type": "general",
      "cross_references": [
        "clause_5.10",
        "clause_5.4",
        "clause_5.8",
        "clause_5.9",
        "clause_4.3.7.4.1",
        "clause_5.3.4",
        "clause_5.3",
        "ts_32.240_clause_5.3",
        "table_4.3.2-1",
        "figure_4.2.1-1",
        "ts_32.240",
        "ts_29.244",
        "ts_33.107",
        "ts_28.708"
      ]
    },
    {
      "chunk_id": "ts_23.214_4.3.2.2",
      "section_id": "4.3.2.2",
      "section_title": "Functional split of PGW",
      "content": "The following table describes the functionality of the PGW-C and the PGW-U.\nAll functionality performed by the PGW-U is controlled from the PGW-C and thus even if it is marked below as a PGW-U functionality only there will be corresponding control functionality in the PGW-C.\nNOTE:\tFunctionality not marked for PGW-U is either only provided by PGW-C or does not require any specific PGW-U behaviour.\nFor interfaces not listed in the table below, Figure 4.2.1-1 describes whether they are terminated in the PGW-C or the PGW-U.\nTable 4.3.2-2: Functional split of PGW\nMain functionality\nSub-functionality\nPGW-C\nPGW-U\nComments\nA. Session management\n1. Resource management for bearer resources\nX\nX\nSee clause 5.10\n(default & dedicated bearer\n2. IP address and TEID assignment for GTP-U\nX\nX\nSee clause 5.4\nestablishment,\n3. Packet forwarding\nX\nbearer modification, bearer deactivation)\n4. Transport level packet marking\nX\n1. IP address allocation from local pool\nX\nSee clause 5.5\nB. UE IP address management\n2. DHCPv4 / DHCPv6 client\nX\nSee clause 5.5\n3. DHCPv4 / DHCPv6 server\nX\nSee clause 5.5\n4. Router advertisement, router solicitation, neighbour advertisement, neighbour solicitation (as in RFC 4861)\nX\nSee clause 5.5\n1. Forwarding of \"end marker\" (as long as user plane to source eNB exists)\nN/A\nC. Support for UE mobility\n2. Sending of \"end marker\" after switching the path to target node\nX\nX\nSee clause 5.8\n3. Forwarding of buffered packet\nN/A\n4. Change of target GTP-U endpoint within 3GPP accesses\nX\n5. Change of target GTP-U endpoint between 3GPP and non-3GPP access\nX\n1. ECM-IDLE mode DL packet buffering; Triggering of Downlink Data Notification message generation per bearer (multiple, if DL packet received on higher ARP than previous DDN); Inclusion of DSCP of packet in DDN message for Paging Policy Differentiation\nN/A\nD. S1-Release / Buffering / Downlink Data Notification\n2. Delay Downlink Data Notification Request (if terminating side replies to uplink data after UE service request before SGW gets updated)\nN/A\n3. Extended buffering of downlink data when the UE is in a power saving state and not reachable (high latency communication); dropping of downlink data (if MME has requested SGW to throttle downlink low priority traffic and if the downlink data packet is received on such a bearer (see 4.3.7.4.1a).\nN/A\n4. PGW pause of charging procedure based on operator policy/configuration the SGW (failed paging, abnormal radio link release, number/fraction of packets/bytes dropped at SGW)\nX\nSee clause 5.3.4\n1. UL/DL APN-AMBR enforcement\nX\nE. Bearer/APN policing\n2. UL/DL bearer MBR enforcement (for GBR bearer)\nX\n3. UL/DL bearer MBR enforcement (for nonGBR bearer on Gn/Gp interface)\nX\n1. Service detection (DPI, IP-5-tuple)\nX\n2. Bearer binding (bearer QoS & TFT)\nX\n3. UL bearer binding verification and mapping of DL traffic to bearers\nX\nSee clause 5.2\n4. UL and DL service level gating\nX\n5. UL and DL service level MBR enforcement\nX\n6. UL and DL service level charging (online & offline, per charging key)\nX\nX\nSee clause 5.3\n7. Usage monitoring\nX\nX\nSee clause 5.3\nF. PCC related functions\n8. Event reporting (including application detection)\nX\nX\nNote: User-plane related events such as application detection reporting supported in UP function, while control-plane related events such as RAT change etc. supported only in CP function.\n9. Request for forwarding of event reporting\nN/A\n10. Redirection\nX\nX\nSee clause 5.11.3\n11. FMSS handling\nX\n12. PCC support for NBIFOM\nX\n13. DL DSCP marking for application indication\nN/A\n14. Predefined PCC/ADC rules activation and deactivation\nX\nX\nSee clause 5.11.1\n15. PCC support for SDCI\nX\nX\nSee clause 5.11.4\nG. NBIFOM\nNon-PCC aspects of NBIFOM\nX\nH. Inter-operator\n1. Accounting per UE and bearer\nX\nSee clause 5.3\naccounting (counting of volume and time)\n2. Interfacing OFCS through reference points specified in TS 32.240 [9]\nX\nSee clause 5.3\nI. Load/overload control functions\nExchange of load/overload control information and actions during peer node overload\nAs defined in CT WG4 TS 29.244 [12]\nJ. Lawful interception\nInterfacing LI functions through reference points specified in TS 33.107 [10] and performing LI functionality\nX\nX\nAs defined in SA WG3-LI TS 33.107 [10]\nK. Packet screening function\nX\nL. Restoration and recovery\nAs defined in CT WG4 TS 29.244 [12]\nM. RADIUS / Diameter on SGi\nX\nX\nSee clause 5.5\nN. OAM interfaces\nAs defined in SA WG5 TS 28.708 [13]\nO. GTP bearer and path management\nGeneration of echo request, handling of echo response, echo request timeout and Error Indication message\nAs defined in CT WG4 TS 29.244 [12]",
      "chunk_type": "general",
      "cross_references": [
        "clause_5.10",
        "clause_5.4",
        "clause_5.5",
        "clause_5.8",
        "clause_5.3.4",
        "clause_5.2",
        "clause_5.3",
        "clause_5.11.3",
        "clause_5.11.1",
        "clause_5.11.4",
        "ts_32.240_clause_5.3",
        "table_4.3.2-2",
        "figure_4.2.1-1",
        "ts_32.240",
        "ts_29.244",
        "ts_33.107",
        "ts_28.708"
      ]
    },
    {
      "chunk_id": "ts_23.214_4.3.2.3",
      "section_id": "4.3.2.3",
      "section_title": "Functional split of TDF",
      "content": "The following table describes the functionality of the TDF-C and the TDF-U.\nAll functionality performed by the TDF-U is controlled from the TDF-C and thus even if it is marked below as a TDF-U functionality only there will be corresponding control functionality in the TDF-C.\nFor interfaces not listed in the table below, Figure 4.2.1-1 describes whether they are terminated in the TDF-C or TDF-U.\nTable 4.3.2-3: Functional split of TDF\nMain functionality\nSub-functionality\nTDF-C\nTDF-U\nComments\nE. Bearer/APN policing\n1. UL/DL APN-AMBR enforcement\nX\nNot identical to APN-AMBR enforcement as it a) covers every flow in TDF session and b) does not cover other TDF sessions of the UE to the same APN\n2. UL/DL bearer MBR enforcement (for GBR bearer)\nN/A\n3. UL/DL bearer MBR enforcement (for nonGBR bearer on Gn/Gp interface)\nN/A\n1. Service detection (DPI, IP-5-tuple)\nX\n2. Bearer binding (bearer QoS & TFT)\nN/A\n3. UL bearer binding verification and mapping of DL traffic to bearers\nN/A\n4. UL and DL service level gating\nX\n5. UL and DL service level MBR enforcement\nX\n6. UL and DL service level charging (online & offline, per charging key)\nX\nX\nSee clause 5.3\n7. Usage monitoring\nX\nX\nSee clause 5.3\nF. PCC related functions\n8. Event reporting (including application detection)\nX\nX\nNote: User-plane related events such as application detection reporting supported in UP function, while control-plane related events such as RAT change etc. supported only in CP function.\n9. Request for forwarding of event reporting\nX\n10. Redirection\nX\nX\nSee clause 5.11.3\n11. FMSS handling\nX\n12. PCC support for NBIFOM\nN/A\n13. DL DSCP marking for application indication\nX\n14. Predefined PCC/ADC rules activation and deactivation\nX\nX\nSee clause 5.11.1\n15. PCC support for SDCI\nX\nX\nSee clause 5.11.4\nH. Inter-operator\n1. Accounting per UE and bearer\nN/A\naccounting (counting of volume and time)\n2. Interfacing OFCS through reference points specified in TS 32.240 [9]\nX\nSee clause 5.3\nI. Load/overload control functions\nExchange of load/overload control information and actions during peer node overload\nAs defined in CT WG4 TS 29.244 [12]\nL. Restoration and recovery\nAs defined in CT WG4 TS 29.244 [12]\nN. OAM interfaces\nNot defined by SA WG5",
      "chunk_type": "general",
      "cross_references": [
        "clause_5.3",
        "clause_5.11.3",
        "clause_5.11.1",
        "clause_5.11.4",
        "ts_32.240_clause_5.3",
        "table_4.3.2-3",
        "figure_4.2.1-1",
        "ts_32.240",
        "ts_29.244"
      ]
    },
    {
      "chunk_id": "ts_23.214_4.3.3",
      "section_id": "4.3.3",
      "section_title": "User Plane Function selection",
      "content": "The CP function of a functional entity performs selection of its respective UP function considering parameters such as UE's location information, capability of the UP function and features required for an UE. Additionally, the selection of UP function shall consider UP function deployment scenarios such as centrally located UP function and distributed UP functions located close to or at the RAN site. The selection of UP function shall also allow deployment of UP functions with different capabilities, e.g. UP functions supporting no or a subset of optional functionalities.\nFor standalone CP functions:\n-\tSGW's CP function shall select SGW's UP function;\n-\tPGW's CP function shall select PGW's UP function;\n-\tTDF's CP function shall select TDF's UP function.\nCombined SGW/PGW's CP function should select either combined SGW/PGW UP function or standalone SGW UP and PGW UP functions.\nFor details, refer to clause 5.12.",
      "chunk_type": "general",
      "cross_references": [
        "clause_5.12"
      ]
    },
    {
      "chunk_id": "ts_23.214_4.3.4",
      "section_id": "4.3.4",
      "section_title": "SGW-C Partitioning",
      "content": "If the SGW-U service area is smaller than the SGW-C service area, the SGW-C can be partitioned into multiple SGW-C partitions. Each of the SGW-C partition is aligned with the corresponding SGW-U service area. The MME treats the SGW-C partition as legacy SGW.\nNOTE 1:\tThere is only one Sxa reference point between one SGW-C and one SGW-U.\nNOTE 2:\tThis ensures that the TAI List allocated by the MME will only contain TAs that have connectivity to the SGW-U function serving the UE in case the MME uses the service area of the SGW-C partition when constructing the TAI List (and it cannot be assured that there is \"full mesh\" IP connectivity between the eNBs and the SGW-U function outside the SGW-U Service Area).\nNOTE 3:\tIf more than one SGW-U is selected to serve a given UE, these SGW-Us need to cover an area including at least the service area of the SGW-C.",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.214_4.4.1",
      "section_id": "4.4.1",
      "section_title": "General",
      "content": "SGW-C and SGW-U jointly provide functionality equivalent to the functionality provided by SGW as defined by the TS 23.401 [2].\nPGW-C and PGW-U jointly provide functionality equivalent to the functionality provided by PGW as defined by the TS 23.401 [2] and TS 23.402 [4], and the PCEF as defined by the TS 23.203 [3].\nTDF-C and TDF-U jointly provide functionality equivalent to the functionality provided by TDF as defined by the TS 23.203 [3].\nThe clause 4.3.2 defines how the functional control and user plane split is done and which functionality SGW-C, SGW-U, PGW-C, PGW-U, TDF-C, TDF-U correspondingly support.",
      "chunk_type": "definition",
      "cross_references": [
        "ts_23.203_clause_4.3.2",
        "ts_23.401",
        "ts_23.402",
        "ts_23.203"
      ]
    },
    {
      "chunk_id": "ts_23.214_4.4.2",
      "section_id": "4.4.2",
      "section_title": "SGW control plane function",
      "content": "The SGW control plane function (SGW-C) provides the functionality of the SGW as defined by TS 23.401 [2] except for the functions that are performed by the SGW-U as described in table 4.3.2-1.\nIn addition, the SGW-C is responsible for selecting the SGW-U (as described in clause 4.3.3) and for controlling the SGW-U with respect to the functions described in table 4.3.2-1.",
      "chunk_type": "general",
      "cross_references": [
        "clause_4.3.3",
        "table_4.3.2-1",
        "ts_23.401"
      ]
    },
    {
      "chunk_id": "ts_23.214_4.4.3",
      "section_id": "4.4.3",
      "section_title": "SGW user plane function",
      "content": "The SGW user plane function (SGW-U) provides the functionality described in this TS. The functions that are performed by the SGW-U are listed in table 4.3.2-1 together with a reference to a detailed functional description in clause 5 for some of them. The control parameters relevant for the SGW-U are described in clause 7.\nNOTE:\tThe standard allows certain functionalities to be supported in both SGW-C and SGW-U. For details refer to clause 5.",
      "chunk_type": "general",
      "cross_references": [
        "clause_5",
        "clause_7",
        "table_4.3.2-1"
      ]
    },
    {
      "chunk_id": "ts_23.214_4.4.4",
      "section_id": "4.4.4",
      "section_title": "PGW control plane function",
      "content": "The PGW control plane function (PGW-C) provides the functionality of the PGW as defined by TS 23.401 [2] and TS 23.402 [4], and the PCEF as defined by the TS 23.203 [3] except for the functions that are performed by the PGW-U as described in table 4.3.2-2.\nIn addition, the PGW-C is responsible for selecting the PGW-U (as described in clause 4.3.3) and for controlling the PGW-U with respect to the functions described in table 4.3.2-2.",
      "chunk_type": "general",
      "cross_references": [
        "clause_4.3.3",
        "table_4.3.2-2",
        "ts_23.401",
        "ts_23.402",
        "ts_23.203"
      ]
    },
    {
      "chunk_id": "ts_23.214_4.4.5",
      "section_id": "4.4.5",
      "section_title": "PGW user plane function",
      "content": "The PGW user plane function (PGW-U) provides the functionality described in this TS. The functions that are performed by the PGW-U are listed in table 4.3.2-2 together with a reference to a detailed functional description in clause 5 for some of them. The control parameters relevant for the PGW-U are described in clause 7.\nNOTE:\tThe standard allows certain functionalities to be supported in both PGW-C and PGW-U. For details refer to clause 5.",
      "chunk_type": "general",
      "cross_references": [
        "clause_5",
        "clause_7",
        "table_4.3.2-2"
      ]
    },
    {
      "chunk_id": "ts_23.214_4.4.6",
      "section_id": "4.4.6",
      "section_title": "TDF control plane function",
      "content": "The TDF control plane function (TDF -C) provides the functionality of the TDF as defined by TS 23.203 [3] except for the functions that are performed by the TDF -U as described in table 4.3.2-3.\nIn addition, the TDF -C is responsible for selecting the TDF -U (as described in clause 4.3.3) and for controlling the TDF -U with respect to the functions described in table 4.3.2-3.",
      "chunk_type": "general",
      "cross_references": [
        "clause_4.3.3",
        "table_4.3.2-3",
        "ts_23.203"
      ]
    },
    {
      "chunk_id": "ts_23.214_4.4.7",
      "section_id": "4.4.7",
      "section_title": "TDF user plane function",
      "content": "The TDF user plane function (TDF -U) provides the functionality described in this TS. The functions that are performed by the TDF -U are listed in table 4.3.2-3 together with a reference to a detailed functional description in clause 5 for some of them. The control parameters relevant for the TDF-U are described in clause 7.\nNOTE:\tThe standard allows certain functionalities to be supported in both TDF-C and TDF-U. For details refer to clause 5.",
      "chunk_type": "general",
      "cross_references": [
        "clause_5",
        "clause_7",
        "table_4.3.2-3"
      ]
    },
    {
      "chunk_id": "ts_23.214_5.1",
      "section_id": "5.1",
      "section_title": "General",
      "content": "This clause contains detailed functional descriptions for some of the functions provided by the UP function of SGW, PGW and TDF (whether a function has to be supported by a functional entity is defined in clause 4.3.2). It is documented how the respective CP function instructs it's corresponding UP function and which control parameters are used.",
      "chunk_type": "definition",
      "cross_references": [
        "clause_4.3.2"
      ]
    },
    {
      "chunk_id": "ts_23.214_5.2.1",
      "section_id": "5.2.1",
      "section_title": "General",
      "content": "This clause describes the detection process at the UP function that identifies the packets belonging to a bearer, service data flow or IP-CAN/TDF session.\nThe CP function is responsible for instructing the UP function about how to detect user data traffic belonging to a Packet Detection Rule (PDR). The other parameters provided within a PDR describe how the UP function shall treat a packet that matches the detection information.",
      "chunk_type": "definition",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.214_5.2.2",
      "section_id": "5.2.2",
      "section_title": "Traffic detection information",
      "content": "The CP function controls the traffic detection at the UP function by providing detection information for every PDR. Detection information is a combination of:\n-\tUE IP address;\n-\tF-TEIDu;\n-\tSDF filters as defined in TS 23.203 [3];\n-\tApplication ID (referring to an application detection filter) as defined in TS 23.203 [3].\nThe following Table 5.2.2-1 lists the possible combinations of the traffic detection information for the different UP functions and usage scenarios.\nTable 5.2.2-1: Detection information for the different UP functions and usage scenarios\nUsage scenario\nUP function\nDetection information for UL\nDetection information for DL\nDescription\n1\nSGW-U\nLocal F-TEIDu (access side)\nLocal F-TEIDu (core side)\nDetection of traffic belonging to a bearer\n2\nPGW-U\nLocal F-TEIDu (access side) + uplink SDF filter(s)/application ID\n(NOTE 2)\nUE IP address as destination + downlink SDF filter(s)/application ID\nDetection of traffic belonging to a service data flow + UL bearer binding verification (based on F-TEIDu in UL filter)\n3\nPGW-U\nLocal F-TEID (access side) + UE IP address as source + uplink SDF filter(s)/application ID\n(NOTE 2)\nUE IP address as destination + downlink SDF filter(s)/application ID\nUsage scenario 2 + Packet screening (based on UE IP as source in UL filter)\n4\nPGW-U\nLocal F-TEID (access side)\n(NOTE 1)\n-\nDetection of remaining traffic, e.g. with wrong UE IP address or on wrong bearer, for measurement and discarding.\n5\nPGW-U\n-\nUE IP address as destination\n(NOTE 1)\nDetection of remaining traffic, e.g. not matching any other detection information, for discarding.\n6\nPGW-U\n-\nDownlink SDF filter(s)/application ID\n(NOTE 2)\nDetection of RADIUS, Diameter and DHCP signalling traffic on SGi.\n7\nTDF-U\nUE IP address as source + uplink SDF filter(s)/application ID\nUE IP address as destination + downlink SDF filter(s)/application ID\nDetection of traffic belonging to a service data flow\n8\nTDF-U\nUE IP address as source\n(NOTE 1)\nUE IP address as destination\n(NOTE 1)\nDetecting of remaining traffic (i.e. not matching any other PDR) belonging to a TDF session\nNOTE 1:\tA PDR with such detection information should have the lowest precedence amongst all the PDRs installed for this Sx session.\nNOTE 2:\tThe detection of traffic related to UE IP address allocation as well as RADIUS, Diameter and DHCP signalling traffic on SGi can be accomplished using SDF filter(s) or an application ID (referring to an application detection filter).",
      "chunk_type": "general",
      "cross_references": [
        "ts_23.203_table_5.2.2-1",
        "table_5.2.2-1",
        "ts_23.203"
      ]
    },
    {
      "chunk_id": "ts_23.214_5.3.1",
      "section_id": "5.3.1",
      "section_title": "General",
      "content": "If functional split of SGW into SGW-C and SGW-U is supported, the overall functionality of offline charging support as defined by TS 23.401 [2] and TS 32.251 [8] shall be preserved.\nIf functional split of PGW into PGW-C and PGW-U is supported, the overall functionality of online and offline charging as defined by TS 32.251 [8], and of usage monitoring control as defined by TS 23.401 [2], TS 23.203 [3] shall be preserved.\nIf functional split of TDF into TDF-C and TDF-U is supported, the overall functionality of online and offline charging as defined by TS 32.251 [8], and of usage monitoring control as defined by TS 23.203 [3] shall be preserved.\nThe following principles shall apply in case of a functional split:\n-\tThe Gx, Sd, Gy, Gyn, Gz, Gzn interfaces as well as the interface between SGW and OFCS shall be terminated in the CP function (SGW-C/PGW-C/TDF-C). This implies that the CP function shall support those interfaces towards OCS/OFCS and PCRF, based on information received at the corresponding CP function as well as gathered user-plane related information received from the UP function as further described below.\n-\tThere is no impact on PCRF, OCS and OFCS compared to non-split architecture.\n-\tAll bearer/traffic flow level, session level and subscriber related information remains at the CP function, and only usage information is requested from UP function.",
      "chunk_type": "definition",
      "cross_references": [
        "ts_23.401",
        "ts_32.251",
        "ts_23.203"
      ]
    },
    {
      "chunk_id": "ts_23.214_5.3.2",
      "section_id": "5.3.2",
      "section_title": "Activation of usage reporting in UP function",
      "content": "Triggered by the PCC/ADC rules received from the PCRF or preconfigured information available at PGW-C/TDF-C/SGW-C, as well as from the OCS for online charging via Credit-Control session mechanisms, the CP function (PGW-C/TDF-C/SGW-C) shall provide Usage Reporting Rules to the UP function (PGW-U/TDF-U/SGW-U) for controlling how usage reporting is performed.\nThe CP function shall request the report of the relevant usage information for Usage Monitoring, based on Monitoring Keys and triggers which are specified in TS 23.203 [3] and TS 29.212 [11]. Each Usage Reporting Rule requested for usage monitoring control is associated with the PDR(s) whose traffic is to be accounted under this rule. The CP function shall generate the Usage Reporting Rule for each Monitoring-key within the active PCC/ADC rule(s), either preconfigured or received from the PCRF, and also shall keep the mapping between them. Multiple Usage Reporting Rules may be associated with the same PDR.\nThe CP function shall request the report of the relevant usage information for offline and online charging, based on Charging keys and additional triggers which are specified in TS 32.251 [8]. Each Usage Reporting Rule requested for offline or online charging is associated with the PDR(s) whose traffic is to be accounted under this rule. The CP function shall generate the Usage Reporting Rule for each Charging key or Sponsor Identity (if applicable) within the active PCC/ADC rule(s), either preconfigured or received from the PCRF, and also shall keep the mapping between them.  Multiple Usage Reporting Rules may be associated with the same PDR.\nThe CP function shall also provide reporting trigger events to the UP function for when to report usage information. The reporting trigger events (e.g. triggers, threshold information etc.) shall be supported for the session (IP-CAN/TDF) level reporting as well as on Rule level basis as determined by the CP function. The triggers may be provided as a volume, time or event to cater for the different charging/usage monitoring models supported by the TS 23.203 [3] for usage monitoring and by TS 32.251 [8] for offline and online charging. The CP function shall decide on the thresholds value(s) based on allowance received from PCRF, OCS or based on local configuration.\nIn some cases, the same Usage Reporting Rule can be used for different purposes (for both usage monitoring and charging), e.g. in case the same set of PDR(s), measurement method, trigger event, threshold, etc. apply. Similarly a reported measurement can be used for different purposes by the CP function.",
      "chunk_type": "general",
      "cross_references": [
        "ts_23.203",
        "ts_29.212",
        "ts_32.251"
      ]
    },
    {
      "chunk_id": "ts_23.214_5.3.3",
      "section_id": "5.3.3",
      "section_title": "Reporting of usage information towards CP function",
      "content": "The UP function shall support reporting of usage information to the CP function. The UP function shall be capable to support reporting based on different triggers, including:\n-\tPeriodic reporting with period defined by the CP function.\n-\tUsage thresholds provided by the CP function.\n-\tReport on demand received from the CP function.\nThe CP function shall make sure that the multiple granularity levels required by the reporting keys in the Usage Reporting rules satisfy the following aggregation levels without requiring a knowledge of the granularity levels by the UP function:\n-\tSession level reporting (IP-CAN/TDF session);\n-\tBearer (for charging)/traffic flow (for both charging and usage monitoring) level reporting as defined by the reporting keys in the Usage Reporting Rule (see the description above).\nBased on the mapping between Monitoring-key and PCC/ADC rule stored at the CP function, the CP function shall combine the reported information with session and subscriber related information which is available at the CP function, for Usage Monitoring reporting over the corresponding Gx, Sd interfaces.\nBased on the mapping between Rating Group or Sponsor Identity and PCC/ADC rule stored at the CP function, the CP function shall combine the reported information with session and subscriber related information which is available at the CP function, for offline and online charging reporting over the corresponding Gy, Gyn, Gz, Gzn interfaces.\nThis functionality is specified in TS 32.240 [9].\nThe usage information shall be collected in the UP function and reported to the CP function as defined in 5.3.3, based on Monitoring Keys and triggers which are specified in TS 23.203 [3] and TS 29.212 [11].",
      "chunk_type": "requirement",
      "cross_references": [
        "ts_32.240",
        "ts_23.203",
        "ts_29.212"
      ]
    },
    {
      "chunk_id": "ts_23.214_5.3.4",
      "section_id": "5.3.4",
      "section_title": "PGW Pause of Charging",
      "content": "When the UE moves to ECM-IDLE state and the SGW-C decides to activate buffering in SGW-U for the session, it shall also instruct the SGW-U to measure the number of packets/bytes that are buffered or discarded in SGW-U and the criteria for reporting within the Usage Reporting Rule.\nOnce the trigger of reporting is met, the SGW-U shall inform the SGW-C by reporting usage information.\nThe SGW-C can then inform the PGW-C as described in TS 23.401 [2].\nWhen the PGW-C determines to stop the charging and usage monitoring actions for the PDN connection, it shall indicate the PGW-U to stop collecting the usage information.\nPGW-C sends an Sx session modification request message to the PGW-U and modifies all the Usage Reporting Rules within the PDN connection to indicate the usage collection shall be stopped. When PGW-C determines to continue the charging action for the PDN connection, it sends an Sx session modification request message to the PGW-U and modifies all the Usage Reporting Rules within the PDN connection to indicate the usage collection shall be resumed.\nNOTE:\tThe support for PGW pause of charging is optional as described in TS 23.401 [2], and used only if both the SGW-C and the PGW-C support this feature.",
      "chunk_type": "requirement",
      "cross_references": [
        "ts_23.401"
      ]
    },
    {
      "chunk_id": "ts_23.214_5.4.1",
      "section_id": "5.4.1",
      "section_title": "General",
      "content": "Allocation and release of F-TEIDu is performed by SGW and PGW when a bearer needs to be established or released. If functional split into SGW-C/PGW-C and SGW-U/PGW-U is supported, F-TEIDu allocation and release is done in the UP function, as described in clause 5.4.3 below.\nThe support of F-TEIDu allocation by the UP function is mandatory.",
      "chunk_type": "definition",
      "cross_references": [
        "clause_5.4.3"
      ]
    },
    {
      "chunk_id": "ts_23.214_5.4.3",
      "section_id": "5.4.3",
      "section_title": "F-TEIDu allocation / release in the UP function",
      "content": "The SGW-U, the SGW-U shall manage the SGW F-TEIDu space, including ensuring that the allocated F-TEIDu(s) are unique as described in TS 29.060 [6]. In case of bearer activation, the SGW-C shall request SGW-U to allocate F-TEIDu(s) for the applicable SGW-U reference points and provide them to the SGW-C. The SGW-C shall provide the F-TEIDu(s) to other network entities as described in TS 23.401 [2] in order to complete the bearer establishment. In case of bearer deactivation, the SGW-C shall request SGW-U to release F-TEIDu(s) for the bearer.\nThe PGW-U shall manage the PGW F-TEIDu space, including ensuring that the allocated F-TEIDu(s) are unique as described in TS 29.060 [6]. In case of bearer activation, the PGW-C shall request PGW-U to allocate F-TEIDu(s) for the applicable PGW-U reference points and provide them to the PGW-C. The PGW-C shall provide the F-TEIDu(s) to other network entities as described in TS 23.401 [2] and TS 23.402 [4] in order to complete the bearer establishment. In case of bearer deactivation, the PGW-C shall request PGW-U to release F-TEIDu(s) for the bearer.",
      "chunk_type": "requirement",
      "cross_references": [
        "ts_29.060",
        "ts_23.401",
        "ts_23.402"
      ]
    },
    {
      "chunk_id": "ts_23.214_5.5",
      "section_id": "5.5",
      "section_title": "UE IP address management (allocation, renewal and release)",
      "content": "The UE IP address management includes allocation and release of the UE IP address as well as renewal of the allocated IP address, where applicable.\nThe UE IP address management shall be performed by the PGW-C or the PGW-U. As part of this functionality, various UE IP address management mechanisms as defined in clause 5.3.1 of TS 23.401 [2] are supported by the PGW-C. The PGW-C shall process the UE IP address management related messages, maintain the corresponding state information and provide the response messages to the UE.\nWhen Static IP addresses for a PDN Connection are not used, the actual allocation of the UE IP address(es) for a PDN Connection may use any of the following mechanisms:\n-\tThe PGW-C allocates the UE IP address from an IP address pool that corresponds to the PGW-U that has been selected.\n-\tThe UE IP address is obtained from the PGW-U. In that case the PGW-C shall interact with the PGW-U via Sxb procedures and request the PGW-U to allocate a suitable IP address. The PGW-C provides the PGW-U with the necessary information allowing the PGW-U to derive the proper IP address (e.g. the network instance).\n-\tIf the UE IP address is obtained from the external PDN, the PGW-C shall send the allocation, renewal and release related request messages to the external PDN and maintain the corresponding state information. The PGW-U shall support forwarding of the UE IP address management related messages to the PGW-C, when they are received via the user plane signalling from the UE or from the external PDN.\nWhen PGW-C performs IPv4 address allocation via default bearer activation and release via PDN connection release (clause 5.3.1.2.1 of TS 23.401 [2]), no special functionality is required from the PGW-U.\nFor the other UE IP address management mechanisms, the UE sends the IP address management related request messages via the user plane signalling. Hence the PGW-U is required to forward these request messages to the PGW-C for processing. Once these request messages are processed by the PGW-C, the PGW-C sends response messages to the UE via the user plane signalling. Hence the PGW-C is required to forward these response messages to the PGW-U so that it can be relayed it to the UE. Correspondingly, following functionality is required to be supported by the PGW-C and PGW-U:\n-\tFor IPv6 default prefix management via IPv6 stateless address autoconfiguration (clause 5.3.1.2.2 of TS 23.401 [2]): PGW-C shall configure PGW-U to forward Router Solicitation and Neighbor Solicitation messages from the UE to the PGW-C. The PGW-C shall forward Router Advertisement and Neighbor Advertisement messages to the PGW-U for relaying them to the UE.\n-\tFor IPv6 parameter configuration via stateless DHCPv6 (clause 5.3.1.2.3 of TS 23.401 [2]): PGW-C shall configure PGW-U to forward all the DHCPv6 messages from the UE to the PGW-C. The PGW-C shall forward the DHCPv6 response messages to the PGW-U for relaying them to the UE.\n-\tFor IPv4 address management and parameter configuration DHCPv4 (clause 5.3.1.2.4 of TS 23.401 [2]): PGW-C shall configure PGW-U to forward all the DHCPv4 messages from the UE to the PGW-C. The PGW-C shall forward the DHCPv4 response messages to PGW-U for relaying them to the UE.\n-\tFor IPv6 prefix management via IPv6 prefix delegation (clause 5.3.1.2.6 of TS 23.401 [2]): PGW-C shall configure PGW-U to forward all the DHCPv6 messages from the UE to the PGW-C. The PGW-C shall forward the DHCPv6 response messages to PGW-U for relaying them to the UE.\nIn addition to the above, when the UE IP address is obtained from the external PDN, following functionality is required to be supported by the PGW-C and PGW-U:\n-\tFor UE IP address from AAA server in the external PDN: If the AAA server in the external PDN is reachable only via the PGW-U the PGW-C shall configure the PGW-U to forward all the Diameter or RADIUS messages from the AAA server in the external PDN to the PGW-C. And the PGW-C shall forward the Diameter or RADIUS messages to the PGW-U for relaying them to the AAA server in the external PDN.\n-\tFor UE IP address from DHCPv4/v6 server in the external PDN: If the DHCPv4/v6 server in the external PDN is reachable only via the PGW-U the PGW-C shall configure the PGW-U to forward all the DHCPv4/v6 messages from the DHCPv4/v6 server in the external PDN to the PGW-C. And the PGW-C shall forward the DHCPv4/v6 messages to the PGW-U for relaying them to the DHCPv4/v6 server in the external PDN.\nNOTE:\tIf the AAA server or the DHCPv4/v6 server in the external PDN is reachable directly, then the PGW-C communicates with it directly, without involving the PGW-U.",
      "chunk_type": "requirement",
      "cross_references": [
        "ts_23.401_clause_5.3.1",
        "ts_23.401_clause_5.3.1.2.1",
        "ts_23.401_clause_5.3.1.2.2",
        "ts_23.401_clause_5.3.1.2.3",
        "ts_23.401_clause_5.3.1.2.4",
        "ts_23.401_clause_5.3.1.2.6",
        "ts_23.401"
      ]
    },
    {
      "chunk_id": "ts_23.214_5.6.1",
      "section_id": "5.6.1",
      "section_title": "General",
      "content": "One of the main tasks of the Sx interface is to enable the CP function to instruct the UP function about how to forward user data traffic. There are several different user plane forwarding scenarios supported. Some scenarios are applicable to SGW only or PGW only, while other scenarios are applicable to SGW and PGW or PGW and TDF. A non-exhaustive list of forwarding scenarios is provided in Table 5.6.2-1 below.\nThe CP function shall be able to provide the UP with instructions for at least the following behaviors: forward, forward with end marker. The CP function shall also be able to request multiple sets of forwarding instructions to be performed in sequence, e.g. forward to the DL side and forward to the CP function for the purpose of duplication.",
      "chunk_type": "definition",
      "cross_references": [
        "table_5.6.2-1"
      ]
    },
    {
      "chunk_id": "ts_23.214_5.6.2",
      "section_id": "5.6.2",
      "section_title": "Control of user plane forwarding",
      "content": "The CP function controls user-plane packet forwarding for traffic detected by a PDR by providing FAR(s) with instructions to the UP function, including:\n-\tForwarding operation information;\n-\tForwarding target information.\nThe details of the forwarding target and operation will depend on the scenario and is described in Table 5.6.2-1 below. The following forwarding functionality is required by the UP function (more than one forwarding scenario can be active for the same traffic):\n-\tApply GTP-U bearer related handling, i.e. encapsulation, de-capsulation or both. (This covers scenario 1 in the table below).\n-\tForward the traffic to the CP function (This covers scenario 2, 3, 4 in the table below).\n-\tApply locally configured policy for traffic steering. (This covers scenario 5 in the table below).\nFurther details on the forwarding related information are provided in clause 7.5.\nTable 5.6.2-1: Forwarding information for different scenarios\nScenario description\nForwarding target and operation\nApplicable to\n1\nForwarding of user-plane between UE and PDN, including mapping onto GTP-U tunnels and mapping between GTP-U tunnels\nGTP-U encapsulation information (F-TEID)\nSGW, PGW\n2\nForwarding of user-plane packets from UE and CP function (e.g. RS/RA, DHCPv4/v6, traffic subject to HTTP redirect etc)\nInformation that the CP function is source/target (CP function IP address)\nPGW\n3\nForwarding of packets from the external PDN / SGi and the CP function (e.g. for RADIUS, Diameter and DHCP signalling, traffic subject to HTTP redirect etc)\nInformation that the CP function is source/target (CP function IP address)\nPGW\n4\nForwarding of packets subject to buffering in CP function\nInformation that the CP function is source/target (CP function IP address)\nSGW\n5\nForwarding of packets between the UP function and the SGi-LAN for Flexible Mobile Service Chaining\nReference to a predefined traffic steering configuration (e.g. Traffic-Steering Policy identifier)\nPGW, TDF",
      "chunk_type": "general",
      "cross_references": [
        "clause_7.5",
        "table_5.6.2-1"
      ]
    },
    {
      "chunk_id": "ts_23.214_5.6.3",
      "section_id": "5.6.3",
      "section_title": "Format of forwarded user plane data",
      "content": "For forwarding between the CP function and UP function the user plane packet is forwarded via an Sx-u tunnel by encapsulating the user-plane packet using GTP-U protocol that allows the receiving entity to identify which PDN Connection and which bearer the traffic belongs to. In the direction from the CP function to UP function for forwarding towards the UE or PDN, the UP encapsulation protocol also shall contain information that allows the UP function to identify whether the UE or PDN is targeted.\nNOTE:\tThe Sx-u tunnel may be established per bearer of a PDN connection, or per PDN or per UP function. The details of Sx-u tunnel are defined in TS 29.244 [12].",
      "chunk_type": "general",
      "cross_references": [
        "ts_29.244"
      ]
    },
    {
      "chunk_id": "ts_23.214_5.7",
      "section_id": "5.7",
      "section_title": "UE's permanent identifier usage",
      "content": "For the scenarios requiring UE's permanent identity at the UP function, e.g. UP function performing http header enrichment in a trusted environment, the UE's permanent identity may be provided from the CP function to the UP function in a container, instead of in an Sx parameter.\nNOTE:\tIn an untrusted environment in which the UE's permanent identity cannot be provided, due to e.g. to fulfil the privacy requirements, the session identifier is used between the CP function and UP function for correlating UE's session related events.",
      "chunk_type": "parameter",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.214_5.8",
      "section_id": "5.8",
      "section_title": "Functionality of sending of \"end marker\"",
      "content": "Sending of \"end marker\" is a functionality which involve SGW-C and SGW-U, and PGW-C and PGW-U. As part of the functionality, constructing of end marker packets can either be done in the CP function or in the UP function, as described in clauses 5.8.1 and 5.8.2. Whether constructing of end marker packets is performed by CP function or UP function is determined by network configuration.",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.214_5.8.1",
      "section_id": "5.8.1",
      "section_title": "UP function constructing the \"end marker\" packets",
      "content": "In case of eNodeB relocation during handover procedure without SGW-U change, SGW-C shall indicate the SGW-U to switch the S1 path(s) by sending an Sx session modification request message with the new F-TEID-u of eNodeB and in addition, provide an indication to the SGW-U to send the end marker packet(s) on the old path.\nOn receiving this indication, the SGW-U shall construct end marker packet(s) and send it for each S1 GTP-U tunnel towards the source eNodeB after sending the last PDU on the old path.\nIn case of SGW-U relocation during handover procedure, PGW-C shall indicate the PGW-U to switch the S5/S8 path(s) by sending an Sx session modification request message (bearer ID, new F-TEID of SGW-U) and in addition, provide an indication to the PGW-U to send the end marker packet(s) on the old path.\nOn receiving this indication, the PGW-U shall construct end marker packet(s) and send it for each S5/S8 GTP-U tunnel towards the source SGW-U after sending the last PDU on the old path.\nOn receiving the end marker packet(s) on S5/S8 GTP-U tunnel, SGW-U shall forward the end marker packet(s) and send it for each S1 GTP-U tunnel towards the source eNodeB.",
      "chunk_type": "requirement",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.214_5.8.2",
      "section_id": "5.8.2",
      "section_title": "CP function constructing the \"end marker\" packets",
      "content": "In case of eNodeB relocation during handover procedure without SGW-U change, SGW-C shall indicate the SGW-U to switch the S1 path(s) by sending an Sx session modification request message (bearer ID, new F-TEID of eNodeB). After sending the last PDU on the old path, SGW-U shall replace the old F-TEID with the new one and responds with an Sx session modification response message to acknowledge the success of path switch.\nWhen the path switch is finished, SGW-C constructs the end marker packet(s) and sends it to the SGW-U. SGW-U then forwards the packet(s) to the source eNodeB.\nIn case of SGW-U relocation during handover procedure, PGW-C shall indicate the PGW-U to switch the S5/S8 path(s) by sending an Sx session modification request message (bearer ID, new F-TEID of SGW-U). After sending the last PDU on the old S5/S8 path, PGW-U shall replace the old F-TEID with the new one and responds with an Sx session modification response message to acknowledge the success of path switch.\nWhen the path switch is finished, PGW-C constructs the end marker packet(s) and sends it to PGW-U. PGW-U then forwards the packet(s) to the source SGW-U.",
      "chunk_type": "requirement",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.214_5.9.1",
      "section_id": "5.9.1",
      "section_title": "General",
      "content": "Buffering of the UE's data packets for the UE in idle or power saving mode can be performed in SGW-U or SGW-C.\nThe support of buffering in the SGW-U is mandatory and the SGW-C shall support buffering by the SGW-U.\nThe support of buffering in the SGW-C is optional and the SGW-U optionally supports buffering by the SGW-C. An exception is that in a dedicated core network serving UEs which may enter power saving mode or apply eDRX, e.g. NB-IoT UEs, the SGW-C shall support buffering capability.\nWhen buffering is supported in both SGW-C and SGW-U, the SGW-C decides on a per UE session basis (e.g. based on local configuration and other information such as UE capability) to perform buffering in either the SGW-C or the SGW-U.",
      "chunk_type": "definition",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.214_5.9.2",
      "section_id": "5.9.2",
      "section_title": "Buffering in CP function",
      "content": "When the UE moves to ECM-IDLE state, if the SGW-C supports buffering capability and decides to activate buffering, the SGW-C shall inform the SGW-U to stop sending data packets to eNodeB and start forwarding the downlink data packets towards the SGW-C.\nWhen the UE transition to the ECM-CONNECTED state, the SGW-C shall update the SGW-U via Sxa interface with the F-TEIDu of the eNodeB. If there are buffered packets available and their buffering duration has not expired, the SGW-C shall forward those packets to the SGW-U outside of the control plane signalling (see clause 5.6.3 \"Format of forwarded user plane data\") to relay them to the UE. These packets are then forwarded by the SGW-U to the eNodeB.",
      "chunk_type": "requirement",
      "cross_references": [
        "clause_5.6.3"
      ]
    },
    {
      "chunk_id": "ts_23.214_5.9.3.1",
      "section_id": "5.9.3.1",
      "section_title": "General",
      "content": "The SGW-C shall be able to provide the SGW-U with instructions for at least the following behaviors: buffer without reporting the arrival of first downlink packet, buffer with reporting the arrival of first downlink packet, drop packets.\nWhen the UE moves to ECM-IDLE state, if the SGW-C does not support buffering capability, or if the SGW-C supports buffering capability and decides to activate buffering in SGW-U for the session, the SGW-C shall inform the SGW-U, via an Sx session modification. The SGW-C decides whether buffering timers are handled by the SGW-U or by the SGW-C. The activation of buffering implicitly stops sending data to the eNodeB/RNC/SGSN.\nAfter starting the buffering, when the first downlink packet arrives on any bearer, SGW-U shall inform the SGW-C. SGW-U sends an Sx reporting message to the SGW-C unless specified otherwise and identifies the S5/S8 bearer on which the downlink packet was received.\nOn receiving this reporting message, the SGW-C decides whether to send a Downlink Data Notification message to the MME as defined in TS 23.401 [2].\nAt the UE transition to ECM-CONNECTED state, the SGW-C shall update the SGW-U via Sxa interface with the F-TEIDu of the eNodeB/RNC/SGSN. The buffered data packets, if any, are then forwarded to the eNodeB/RNC/SGSN by the SGW-U.\nIn case of SGW-U relocation, buffered data packets are transferred from the old SGW-U to the new SGW-U.",
      "chunk_type": "definition",
      "cross_references": [
        "ts_23.401"
      ]
    },
    {
      "chunk_id": "ts_23.214_5.9.3.2",
      "section_id": "5.9.3.2",
      "section_title": "Delay Downlink Packet Notification",
      "content": "According to clause 5.3.4.2 of TS 23.401 [2], the MME/SGSN may inform the SGW that for all UEs served by the MME/SGSN, the Downlink Packet Data Notification shall be delayed for a period D.\nIf the parameter D is handled by the SGW-U, the SGW-C shall include the parameter D in the Sx session establishment for new Sx sessions, in the Sx session modification for Sx sessions which are not in buffering state (when transitioning these sessions to the buffering state), and in the next Sx report ack message for Sx sessions already in buffering state. The SGW-U shall then delay the sending of subsequent Sx reporting upon next DL data arrival.\nIf the parameter D is handled by the SGW-C, there is no special handling compared to clause 5.9.3.1. When the SGW-U reports the arrival of a DL data packet, the SGW-C shall delay the sending of the Downlink Data Notification to the MME by parameter D delay.",
      "chunk_type": "requirement",
      "cross_references": [
        "ts_23.401_clause_5.3.4.2",
        "clause_5.9.3.1",
        "ts_23.401"
      ]
    },
    {
      "chunk_id": "ts_23.214_5.9.3.3",
      "section_id": "5.9.3.3",
      "section_title": "Extended buffering",
      "content": "According to clauses 5.3.4.3 and 5.7.3 of TS 23.401 [2], the MME/SGSN invoking extended buffering indicates it to the Serving GW in the Downlink Data Notification Ack message, includes a DL Buffering Duration time and optionally a DL Buffering Suggested Packet Count.\nIf the MME/SGSN included the DL Suggested Packet Count, the SGW-C shall include the DL Suggested Packet Count in the Sx reporting Ack message.\nIf the DL Data Buffer Expiration Time is handled by the SGW-U, the SGW-C includes it in the Sx reporting Ack message and requests the SGW-U to buffer DL data packets. When the SGW-U receives the DL Data Buffer Expiration Time, the SGW-U buffers the DL data packets without reporting the arrival of the first DL data packet until the DL Data Buffer Expiration Time expires. When the DL Data Buffer Expiration Time expires, the SGW-U shall discard the buffered DL packets and shall restart buffering DL data packets with reporting the arrival of the first DL data packet.\nIf the DL Data Buffer Expiration Time is handled by the SGW-C, the SGW-C requests the SGW-U to buffer the DL data packets without reporting the arrival of the first DL data packet. When the DL Data Buffer Expiration Time expires, the SGW-C requests the SGW-U to drop the buffered data packets and to start buffering the DL data packets with reporting of the arrival of the first DL data packet, via an Sx Session Modification.\nIf the DL Suggested Packet Count was included in the request from the SGW-C, the SGW-U buffers the DL data packets up to the number of packets indicated by the DL Suggested Packet Count.",
      "chunk_type": "general",
      "cross_references": [
        "ts_23.401"
      ]
    },
    {
      "chunk_id": "ts_23.214_5.9.3.4",
      "section_id": "5.9.3.4",
      "section_title": "Throttling",
      "content": "According to clause 4.3.7.4.1a of TS 23.401 [2], the MME/SGSN can request the SGWs to selectively reduce the number of Downlink Data Notification requests it sends for downlink non-priority traffic received for UEs in idle mode according to a throttling factor and for a throttling delay specified in the Downlink Data Notification Ack message.\nThrottling mechanism by which the MME uses Downlink Data Notification Acknowledgement messages DL low priority traffic Throttling parameters, is handled by the SGW-C as follows:\n-\tOn receiving Downlink Data Notification Acknowledgement from the MME/SGSN, the SGW-C determines which bearers are subject to the throttling of Downlink Data Notification requests on the basis of the bearer's ARP priority level and the operator policy.\n-\tUpon receipt of an Sx report notifying the arrival of DL data packets on those bearers, the SGW-C decides whether or not to send a DDN to MME based on the requested throttling factor. The SGW-C may indicate in the Sx Report Ack whether SGW-U shall discard the buffered packet and may also indicate whether SGW-U shall notify when additional DL packets arrive.\n-\tThe throttling delay timer and throttling factor are handled by the SGW-C and not provided to SGW-U.",
      "chunk_type": "general",
      "cross_references": [
        "ts_23.401_clause_4.3.7.4.1",
        "ts_23.401"
      ]
    },
    {
      "chunk_id": "ts_23.214_5.10",
      "section_id": "5.10",
      "section_title": "Bearer and APN policing",
      "content": "ARP is used for admission control (i.e. retention and pre-emption of the bearer). The value of ARP is not required to be provided to the UP function.\nFor every bearer, SGW-C/PGW-C shall use the QCI and optionally, the ARP priority level, to determine the transport level packet marking and provide the transport level packet marking to the SGW-U/PGW-U.\nPGW-C shall provide the APN-AMBR value together with a QoS Enforcement Rule correlation ID (as described in clause 7.6) to PGW-U so that the PGW-U can enforce the APN-AMBR across all IP‑CAN sessions of the UE to the same APN at the PGW-U.\nSGW-C/PGW-C shall provide the GBR and MBR value for each GBR bearer of the PDN connection to the SGW-U/PGW-U. When the Gn/Gp interface is used by the PGW-U, PGW-C shall also provide the MBR value to the PGW-U for each non-GBR bearer of the PDN connection on the Gn/Gp interface.\nTDF-C shall provide the TDF session MBR value to TDF-U to be applied to the TDF session of the UE.",
      "chunk_type": "requirement",
      "cross_references": [
        "clause_7.6"
      ]
    },
    {
      "chunk_id": "ts_23.214_5.11.1",
      "section_id": "5.11.1",
      "section_title": "Activation/Deactivation of predefined PCC/ADC rules",
      "content": "A predefined PCC/ADC rule is configured in the CP function.\nThe traffic detection filters required in the UP function can be configured either in the CP function and provided to the UP function, as service data flow filter(s), or be configured in the UP function, as the application detection filter identified by an application identifier. For the latter case, the application identifier has to be configured in the CP function and the UP function.\nThe traffic steering policy information can be only configured in the UP function, together with traffic steering policy identifier(s), while the CP function has to be configured with the traffic steering policy identifier(s).\nPolicies for traffic handling in the UP function, which are referred by some identifiers corresponding to the parameters of a PCC/ADC rule, can be configured in the UP function. These traffic handling policies are configured as predefined QER(s), FAR(s) and URR(s).\nWhen a predefined PCC/ADC rule is activated/deactivated by the PCRF, PGW-C/TDF-C shall decide what information has to be provided to the PGW-U/TDF-U to enforce the rule based on where the traffic detection filters (i.e. service data flow filter(s) or application detection filter), traffic steering policy information and the policies used for the traffic handling in the UP function are configured and where they are enforced:\n-\tIf the predefined PCC/ADC rule contains an application identifier for which corresponding application detection filters are configured in the UP function, the PGW-C/TDF-C shall provide a corresponding application identifier to the UP function;\n-\tIf the predefined PCC/ADC rule contains traffic steering policy identifier(s), the PGW-C/TDF-C shall provide a corresponding traffic steering policy identifier(s) to the UP function;\n-\tIf the predefined PCC/ADC rule contains service data flow filter(s), the PGW-C/TDF-C shall provide them to the PGW-U/TDF-U;\n-\tIf the predefined PCC/ADC rule contains some parameters for which corresponding policies for traffic handling in the UP function are configured in the UP function, the PGW-C/TDF-C shall activate those traffic handling policies via their rule ID(s).\nThe CP function shall maintain the mapping between a PCC/ADC rule received over Gx/Sd and the flow level PDR rule(s) used on Sx.",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.214_5.11.2",
      "section_id": "5.11.2",
      "section_title": "Enforcement of dynamic PCC/ADC rules",
      "content": "The application detection filters required in the UP function can be configured either in the CP function and provided to the UP function as the service data flow filter, or be configured in the UP function identified by an application identifier.\nWhen receiving a dynamic PCC/ADC rule from the PCRF which contains an application identifier and/or parameters for traffic handling in the UP function:\n-\tif the application detection filter is configured in the PGW-C/TDF-C, the PGW-C/TDF-C shall provide it in the service data flow filter to the UP function, as well as parameters for traffic handling in the UP function received from the dynamic PCC/ADC rule;\n-\totherwise, the application detection filters is configured in UP function, the PGW-C/TDF-C shall provide to PGW-U/TDF-U with the application identifier and the parameters for traffic handling in the UP function as required based on the dynamic PCC/ADC rule.\nThe CP function shall maintain the mapping between a PCC/ADC rule received over Gx/Sd and the flow level PDR(s) used on Sx.",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.214_5.11.3",
      "section_id": "5.11.3",
      "section_title": "Redirection",
      "content": "The uplink application's traffic redirection may be enforced either in the PGW-C/TDF-C (as specified in 5.4.2 Control of user plane forwarding) or directly in the UP function. The redirect destination may be provided in the dynamic PCC/ADC rule or be preconfigured, either in the CP function or in the UP function.\nWhen receiving redirect information (redirection enabled/disabled and redirect destination) within a dynamic PCC/ADC rule or being activated/deactivated by the PCRF for the predefined redirection policies, PGW-C/TDF-C shall decide whether to provide and what information to be provided to the UP function based on where the redirection is enforced and where the redirect destination is acquired/preconfigured. When redirection is enforced in the UP function and the redirect destination is acquired from the dynamic PCC/ACD rule or is configured in the CP function, CP function shall provide the redirect destination to the UP function. When redirection is enforced in the CP function, CP function shall instruct the UP function to forward applicable user plane traffic to the CP function.",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.214_5.11.4",
      "section_id": "5.11.4",
      "section_title": "Support of SDCI",
      "content": "PFDF shall provide PFD(s) to the PGW-C/TDF-C on the request of PGW-C/TDF-C (pull mode) or on the request of PFD management from SCEF (push mode), as described in TS 23.203 [3]. The PGW-C/TDF-C shall provide the PFD(s) to the PGW-U/TDF-U, on which the Application ID corresponding to the PFD(s) is active.\nThe PGW-C/TDF-C supports the procedures for Gw/Gwn as specified in TS 23.203 [3], for management of PFDs. PFD(s) is cached in the PGW-C/TDF-C, and the PGW-C/TDF-C maintains a caching timer associated to the PFD(s). When the caching timer expires and there's no active PCC/ADC rule that refers to the corresponding application identifier, the PGW-C/TDF-C informs the PGW-U/TDF-U to remove the PFD(s) identified by the application identifier using the PFD management message.\nWhen a PDR is provided for an Application ID corresponding to the PFD(s) that are not already provided to the PGW-U/TDF-U, the PGW-C/TDF-C shall provide the PFD(s) to the PGW-U/TDF-U (if there are no PFD(s) cached, the PGW-C/TDF-C retrieves them from the PFDF as specified in TS 23.203 [3]). When any update of the PFD(s) is received from PFDF by PGW-C/TDF-C (using \"push\" or \"pull\" mode), and there are still active PDRs in PGW-U/TDF-U for the Application ID, the PGW-C/TDF-C shall provision the updated PFD set corresponding to the Application ID to the PGW-U/TDF-U using the PFD management message.\nNOTE 1:\tPGW-C/TDF-C should assure not to overload Sx signalling while managing PFD(s) to the UP function, e.g. forwarding the PFD(s) to the right UP function where the PFD(s) is enforced.\nWhen the PGW-U/TDF-U receives the updated PFD(s) from either the same or different PGW-C/TDF-C for the same application identifier, the latest received PFD(s) shall overwrite any existing PFD(s) stored in the UP function.\nNOTE 2:\tFor the case a single UP function is controlled by multiple CP functions, the conflict of PFD(s) corresponding to the same application identifier provided by different CP functions should be avoided by operator enforcing a well-planned PFDF and CP/UP function deployment.\nWhen a PFD is removed/modified and this PFD was used to detect application traffic related to an application identifier in a PDR of an Sx session and the PGW-U/TDF-U has reported the application start as described in clause 6.4.2 to the PGW-C/TDF-C for the application instance corresponding to this PFD, the PGW-U/TDF-U shall report the application stop to the PGW-C/TDF-C for the corresponding application instance identifier if the removed/modified PFD in PGW-U/TDF-U results in that the stop of the application instance is not being able to be detected.\nIf the PFDs are managed by local O&M procedures, PFD retrieval is not used; otherwise, the PFDs retrieved from PFDF override any PFDs pre-configured in the PGW-C/TDF-C. When all the PFDs retrieved from the PFDF for an application identifier are removed, the pre-configured PFDs are used. The PGW-C/TDF-C shall provide either the PFDs retrieved from PFDF or the pre-configured PFDs for an application identifier to the PGW-U/TDF-U as specified in clause 6.5.2.",
      "chunk_type": "requirement",
      "cross_references": [
        "clause_6.4.2",
        "clause_6.5.2",
        "ts_23.203"
      ]
    },
    {
      "chunk_id": "ts_23.214_5.12.1",
      "section_id": "5.12.1",
      "section_title": "General",
      "content": "The selection of the UP function (SGW-U, PGW-U, TDF-U, combined SGW/PGW-U) is performed by its respective CP function (SGW-C, PGW-C, TDF-C, combined SGW/PGW-C).\nThe UP function's capabilities shall be signalled during the initial connection establishment between the CP function and the UP function.\nThe CP function shall be made dynamically aware on the UP function load and relative static capacity for which it has an established Sx session as specified in the clauses below.\nThe exact set of parameters used for the selection mechanism is deployment specific and controlled by the operator configuration, e.g. UE capabilities such as the UE support for dual connectivity with NR, and, the UE's location information may be used for selecting UP function in some deployments while may not be used in other deployments.",
      "chunk_type": "definition",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.214_5.12.2",
      "section_id": "5.12.2",
      "section_title": "Selection of PGW-U",
      "content": "For PGW-U selection, the PGW-C shall be able to consider the following parameters:\n-\tthe PGW-U's dynamic load, at the node level (the PGW-C may then derive the load at the APN level);\n-\tthe PGW-U's relative static capacity (among PGW-Us supporting the same APN);\n-\tthe PGW-U location configured in the PGW-C and the UE location information provided by the MME/SGSN in order to select the appropriate PGW-U, e.g. for SIPTO above RAN service;\n-\tthe capability of the UP function and the functionality required for the particular UE session: An appropriate UP function can be selected by matching the functionality and features required for an UE (which can be derived from the information received over S11/S4/S5/S8 (e.g. APN, mapped UE Usage Type, UE location information, UE capabilities (e.g. UE support for dual connectivity with NR)) or from the PCRF (e.g. need to perform DPI)) with the capabilities of the UP function so as to fulfil the service for the UE, e.g. if L7 based traffic detection is needed then an UP function supporting corresponding functionality needs to be selected.\n-\tto enable APN-AMBR enforcement, whether a PDN connection already exists for the same UE and APN, in which case the same PGW-U shall be selected;\nThe criteria for PGW-U selection may include load balancing between PGW-Us.\nThe PGW-C may support the Sx Load Control feature.\nIn order to allow the PGW-C to select a PGW-U according to above parameters:\n-\tthe SGW-C shall provide the relevant UE's capabilities when available (e.g. UE support for dual connectivity with NR) over the S5/S8 interface.\n-\tthe SGW-C may provide the mapped UE Usage Type over the S5 interface.",
      "chunk_type": "requirement",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.214_5.12.3",
      "section_id": "5.12.3",
      "section_title": "Selection of SGW-U",
      "content": "For SGW-U selection, the SGW-C shall be able to consider the following parameters:\n-\tthe SGW-U location (e.g. SGW Service Area) and the UE location information, provided by the MME/SGSN in order to select a UP function close to the UE's point of attachment;\n-\tthe SGW-U's dynamic load;\n-\tthe SGW-U's relative static capacity (versus other SGW-Us);\n-\tthe capability of the UP function and the functionality required for the particular UE session: An appropriate UP function can be selected by matching the functionalities and features required for an UE (which can be derived from the information received over S11/S4 (e.g. individual CIoT capabilities, UE Usage Type, the APN (for selection of combined SGW/PGW), UE capabilities (e.g. UE support for dual connectivity with NR)) with the capabilities of the UP function so as to fulfil the service requirement for the UE then a UP function supporting corresponding functionality needs to be selected.\nThe criteria for SGW-U selection may include load balancing between SGW-Us.\nThe SGW-C may support the Sx Load Control feature.\nIn order to allow the SGW-C to select a SGW-U according to the above parameters:\n-\tthe MME/SGSN shall provide the location of the UE (i.e. ECGI, eNB or TAI for E-UTRAN, and RAI or RNC-ID for UTRAN), the APN (for selection of a combined SGW/PGW), relevant UE capabilities when available (e.g. UE support for dual connectivity with NR) and may provide the mapped UE Usage Type in the Create Session Request over the S11/S4 interface;\nNOTE:\tMME sets the UE support for dual connectivity with NR indication when the UE indicates support for NR and there is no Access Restriction for NR for the UE (see clause 4.3.2a of TS 23.401 [2]).",
      "chunk_type": "requirement",
      "cross_references": [
        "ts_23.401_clause_4.3.2",
        "ts_23.401"
      ]
    },
    {
      "chunk_id": "ts_23.214_5.12.4",
      "section_id": "5.12.4",
      "section_title": "Selection of a combined SGW/PGW-U",
      "content": "A combined SGW/PGW-C selects the SGW-U and PGW-U as defined respectively in clauses 5.12.3 and 5.12.4, with the following addition:\n-\tThe SGW-C determines that it is a combined SGW/PGW-C entity the same way as in the non-split case;\n-\tThe combined SGW/PGW-C may optimize UP function selection by selecting the best couple of SGW-U and PGW-U for the requested APN, among all candidate couples of (SGW-U, PGW-U), instead of selecting independently the SGW-U first and then the PGW-U (which may result in selecting non-co-located SGW-U and PGW-U).",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.214_5.12.5.1",
      "section_id": "5.12.5.1",
      "section_title": "Solicited application reporting mode",
      "content": "TDF-C shall select TDF-U at PDN connection establishment (TDF session establishment).\nThe selection may be based on the following parameters:\n-\tthe TDF-U's dynamic load;\n-\tthe TDF-U's relative static capacity;\n-\tthe capability of the UP function and the functionalities and the capabilities required for the particular UE session: An appropriate UP function can be selected by matching the functionalities and features required for the UE from the PCRF.\nThe criteria for TDF-U selection includes load balancing between TDF-Us.\nThe TDF-C may support the Sx Load Control feature.",
      "chunk_type": "requirement",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.214_5.12.5.2",
      "section_id": "5.12.5.2",
      "section_title": "Unsolicited application reporting mode",
      "content": "The selection of TDF-U for the unsolicited application reporting is performed by TDF-C during the Sx management procedure, using the information configured in TDF-C.\nNOTE:\tTDF-C provides the instructions for application detection and reporting to the TDF-U during the Sx session management procedure. TDF-U shall communicate with the TDF-C (using the same Sx session) when application reporting is necessary, based on instructions provided by TDF-C.",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.214_5.13",
      "section_id": "5.13",
      "section_title": "Support for L2TP tunneling on SGi",
      "content": "If requested by the PGW-C during Sx Session Establishment, the PGW-U may setup L2TP towards an L2TP network server (LNS) in the DN and tunnel the PDN Connection user plane traffic in L2TP. In this case the PGW-U acts as a L2TP access concentrator (LAC). To enable this, the PGW-C may provide L2TP information to the PGW-U, such as LNS IP address and/or LNS host name, as described in TS 29.244 [12]. This L2TP information may be configured on the PGW-C as part of the APN configuration or received from a AAA server, as described in TS 29.061 [14]. Alternatively, the L2TP tunnel parameters may be configured in the PGW-U. The L2TP tunnel parameters include necessary parameters for setting up L2TP tunnel towards the LNS (e.g. LNS address, tunnel password, etc.).\nIn addition, the PGW-C may provide PAP/CHAP authentication information to the PGW-U, for use in L2TP session establishment, in case it was received from the UE in the PCO of the PDN Connection Establishment Request.\nWhen L2TP is to be used for a PDN Connection, the PGW-C may select a PGW-U based upon support of this feature. The PGW-C determines whether the PGW-U supports this feature via Sx capability negotiation during Sx Association Setup.\nIf the PGW-C requests the PGW-U to allocate a UE IP address as described in clause 5.5, the PGW-U (LAC) may retrieve this IP address from the LNS. In addition, if the PGW-C requests the PGW-U to provide DNS server address(es), the PGW-U (LAC) may request the LNS to provide DNS server address(es) and report such DNS server address(es) to the PGW-C.",
      "chunk_type": "general",
      "cross_references": [
        "clause_5.5",
        "ts_29.244",
        "ts_29.061"
      ]
    },
    {
      "chunk_id": "ts_23.214_6",
      "section_id": "6",
      "section_title": "Information flows",
      "content": "Editor's note:\tThis clause will document the Sx information flows and their usage for the various existing procedures.",
      "chunk_type": "procedure",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.214_6.1",
      "section_id": "6.1",
      "section_title": "General",
      "content": "This clause defines the procedures that are used for the interaction between SGW-C and SGW-U, PGW-C and PGW-U, TDF-C and TDF-U, and documents how these procedures shall be embedded into existing procedures of TS 23.401 [2], TS 23.402 [4], TS 23.060 [5] and TS 23.203 [3].\nNOTE:\tTS 23.401 [2], TS 23.402 [4], TS 23.060 [5] and TS 23.203 [3] do not reflect control and user plane separation of SGW, PGW or TDF and thus the procedures in these specifications do not show the interaction between the respective CP function and UP function. In case of any discrepancies, the procedures defined in TS 23.401 [2], TS 23.402 [4], TS 23.060 [5] and TS 23.203 [3] apply.",
      "chunk_type": "definition",
      "cross_references": [
        "ts_23.401",
        "ts_23.402",
        "ts_23.060",
        "ts_23.203"
      ]
    },
    {
      "chunk_id": "ts_23.214_6.2.1",
      "section_id": "6.2.1",
      "section_title": "General",
      "content": "Sx session management procedures are used to control the functionality of the UP function, which involve SGW, PGW or TDF. The CP function can create, update and remove the Sx session context (i.e. the parameters related to a PDN connection, IP-CAN session, TDF session or TDF in unsolicited reporting mode) in the UP function.\nThe following Sx session management procedures exist: Sx session establishment procedure, Sx session modification procedure and Sx session termination procedure. All of them are initiated by the CP function.",
      "chunk_type": "definition",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.214_6.2.2",
      "section_id": "6.2.2",
      "section_title": "Sx Session Establishment Procedure",
      "content": "The Sx session establishment procedure is used to create the initial Sx session context for a PDN connection, IP-CAN session, TDF session or TDF in unsolicited reporting mode at the UP function. The CP function assigns a new Session ID and provids it to the UP function. The Session ID is stored by both entities and used to identify the Sx session context during their interaction. The CP function stores also the relation between the Session ID and PDN connection, IP-CAN session, TDF session or TDF in unsolicited reporting mode and can then correlate events reported by the UP function to them.\nDuring PDN connection establishment, the Sx session establishment procedure is executed between SGW-C and SGW-U as well as PGW-C and PGW-U. The Sx session context comprises the parameters for the default as well as every dedicated bearer of the PDN connection. In addition, the Sx session context for the PGW-U comprises IP-CAN session related parameters.\nDuring SGW-U relocation, the Sx session establishment procedure is executed between SGW-C and the target SGW-U. The Sx session context comprises the parameters for the default as well as every dedicated bearer of the PDN connection.\nDuring TDF session establishment, the Sx session establishment procedure is executed between TDF-C and TDF-U. The Sx session context comprises TDF session related parameters.\nFor a TDF in unsolicited reporting mode, the Sx session establishment procedure is executed between TDF-C and the TDF-U selected during Sx management procedure. The Sx session context comprises the instructions for application detection and reporting in unsolicited reporting mode.\nFigure 6.2.2-1 Sx session establishment procedure\nNOTE:\tIn case of a TDF in unsolicited reporting mode, the procedure is triggered by TDF configuration and step 1 and 4 do not apply.\n1.\tCP function receives the trigger to establish a new PDN connection or TDF session from a peer CP function, an MME or a PCRF.\n2.\tThe CP function sends an Sx session establishment request message to the UP function that contains the structured control information which defines how the UP function needs to behave.\n3.\tThe UP function responds with an Sx session establishment response message containing any information that the UP function has to provide to the CP function in response to the control information received.\n4.\tThe CP function interacts with the network entity which triggered this procedure (e.g. a peer CP function, an MME or a PCRF).",
      "chunk_type": "procedure",
      "cross_references": [
        "figure_6.2.2-1"
      ]
    },
    {
      "chunk_id": "ts_23.214_6.2.3",
      "section_id": "6.2.3",
      "section_title": "Sx Session Modification Procedure",
      "content": "The Sx session modification procedure is used to update the Sx session context of an existing PDN connection, IP-CAN session, TDF session or TDF in unsolicited reporting mode at the UP function.\nThe Sx session modification procedure is executed between SGW-C and SGW-U whenever PDN connection related parameters have to be modified, as well as between PGW-C and PGW-U whenever PDN connection or IP-CAN session related parameters have to be modified.\nThe Sx session modification procedure is executed between TDF-C and TDF-U whenever TDF session related parameters have to be modified.\nFor a TDF in unsolicited reporting mode, the Sx session modification procedure is executed between TDF-C and TDF-U whenever instructions for application detection and reporting have to be modified.\nFigure 6.2.3-1 Sx session modification procedure\nNOTE:\tIn case of a TDF in unsolicited reporting mode, the procedure is triggered by TDF configuration and step 1 and 4 do not apply.\n1.\tCP function receives the trigger to modify the existing PDN connection or TDF session from a peer CP function, an MME or a PCRF.\n2.\tThe CP function sends an Sx session modification request message to the UP function that contains the update for the structured control information which defines how the UP function needs to behave.\n3.\tThe UP function identifies the Sx session context to be modified by the Session ID. Then, the UP function updates the parameters of this Sx session context according to the list of parameters sent by the CP function. The UP function responds with an Sx session modification response message containing any information that the UP function has to provide to the CP function in response to the control information received.\n4.\tThe CP function interacts with the network entity which triggered this procedure (e.g. a peer CP function, an MME or a PCRF).",
      "chunk_type": "procedure",
      "cross_references": [
        "figure_6.2.3-1"
      ]
    },
    {
      "chunk_id": "ts_23.214_6.2.4",
      "section_id": "6.2.4",
      "section_title": "Sx Session Termination Procedure",
      "content": "The Sx session termination procedure is used to remove the Sx session context of an existing PDN connection, IP-CAN session, TDF session or TDF in unsolicited reporting mode at the UP function.\nFigure 6.2.4-1 Sx session termination procedure\nNOTE:\tIn case of a TDF in unsolicited reporting mode, the procedure is triggered by TDF configuration and step 1 and 4 do not apply.\n1.\tCP function receives the trigger to terminate the existing PDN connection or TDF session from a peer CP function, an MME or a PCRF.\n2.\tThe CP function sends an Sx session termination request message to the UP function.\n3.\tThe UP function identifies the Sx session context to be terminated by the Session ID and removes the whole session context. The UP function responds with an Sx session termination response message containing any information that the UP function has to provide to the CP function.\n4.\tThe CP function interacts with the network entity which triggered this procedure (e.g. a peer CP function, an MME or a PCRF).",
      "chunk_type": "procedure",
      "cross_references": [
        "figure_6.2.4-1"
      ]
    },
    {
      "chunk_id": "ts_23.214_6.3.1.1",
      "section_id": "6.3.1.1",
      "section_title": "Procedures with PDN connection establishment",
      "content": "This clause defines interactions between the CP and UP function during the following procedures:\n-\tE-UTRAN initial attach (clause 5.3.2.1 of TS 23.401 [2])\n-\tUE requested PDN connectivity (clause 5.10.2 of TS 23.401 [2])\nDuring the above procedures following is the nature of interactions between the CP and UP function:\n-\tThe new SGW-C selects a new SGW-U and creates an Sx session.\n-\tThe new PGW-C selects a new PGW-U and creates an Sx session.\n-\tThe old SGW-C releases the existing Sx session from the old SGW-U.\n-\tThe old PGW-C releases the existing Sx session from the old PGW-U.\n-\tThe SGW-C modifies the SGW-U to update with the F-TEIDu of the eNodeB and the PGW-U.\nFigure 6.3.1.1-1: Interaction between CP and UP function during PDN connection establishment\n1.\tProcedure as listed in this step is initiated as specified in the relevant clauses of this specification. The relevant steps of the procedure as specified in the figure above are executed.\nFor all the steps below upon receiving a Sx Session Termination Request, the SGW-U or PGW-U releseases all associated resources including the F-TEIDu allocated for the Sx session.\n2a.\tThe SGW-C may send an Sx Session Termination Request to the SGW-U to release the Sx session.\n2b.\tThe SGW-U sends an Sx Session Termination Response to the SGW-C confirming the release of the Sx session.\n3a.\tThe PGW-C may send an Sx Session Termination Request to the PGW-U to release the Sx session.\n3b.\tThe PGW-U sends an Sx Session Termination Response to the PGW-C confirming the release of the Sx session.\n4.\tThe relevant steps of the procedure as specified in the figure above are executed.\n5a.\tThe SGW-C may send an Sx Session Termination Request to the SGW-U to release the Sx session.\n5b.\tThe SGW-U sends an Sx Session Termination Response to the SGW-C confirming the release of the Sx session.\n6a.\tThe PGW-C may send an Sx Session Termination Request to the PGW-U to release the Sx session.\n6b.\tThe PGW-U sends an Sx Session Termination Response to the PGW-C confirming the release of the Sx session.\n7.\tThe relevant steps of the procedure as specified in the figure above are executed.\n8a.\tThe SGW-C shall select new SGW-U as specified in clause 5.12. The SGW-C sends an Sx Session Establishment Request to the selected SGW-U for creating an Sx session for the UE.\n8b.\tThe SGW-U allocates F-TEIDu for the default bearer. The SGW-U sends an Sx Session Establishment Response to the SGW-C confirming the successful creation of the Sx session. It includes the F-TEIDu it has allocated.\n9.\tThe relevant steps of the procedure as specified in the figure above are executed.\n10a.\tThe PGW-C shall select new PGW-U as specified in clause 5.12. The PGW-C sends an Sx Session Establishment Request to the selected PGW-U for creating an Sx session for the UE.\n10b.\tThe PGW-U allocates F-TEIDu for the bearer. The PGW-U sends an Sx Session Establishment Response to the PGW-C confirming the successful creation of the Sx session. It includes the F-TEIDu it has allocated.\n11.\tThe relevant steps of the procedure as specified in the figure above are executed.\n12a.\tThe SGW-C sends Session Modification Request to the SGW-U. The SGW-C shall include the F-TEIDu of the default bearer received from the PGW.\n12b.\tThe SGW-U sends an Sx Session Modification Response to the SGW-C confirming the success of the Sx session modification.\n13.\tThe relevant steps of the procedure as specified in the figure above are executed.\n14a.\tThe SGW-C sends an Sx Session Modification Request to the SGW-U. The SGW-C shall include the F-TEIDu of the default bearer received from the eNodeB.\n14b.\tThe SGW-U sends an Sx Session Modification Response to the SGW-C confirming the success of the Sx session modification.\n15.\tThe relevant steps of the procedure as specified in the figure above are executed.\n16a.\tIf the Handover Indication is included in step 15, the PGW-C updates the old PGW-U session corresponding to the non-3GPP access by sending \"Sx session modification request\" message to the PGW-U (session ID) and instructs the PGW-U to start routing the downlink packets to the SGW/SGW-U.\n16b.\tThe PGW-U sends \"Sx session modification response\" message to the PGW-C.\n17.\tThe relevant steps of the procedure as specified in the figure above are executed.",
      "chunk_type": "procedure",
      "cross_references": [
        "ts_23.401_clause_5.3.2.1",
        "ts_23.401_clause_5.10.2",
        "clause_5.12",
        "figure_6.3.1.1-1",
        "ts_23.401"
      ]
    },
    {
      "chunk_id": "ts_23.214_6.3.1.2.1",
      "section_id": "6.3.1.2.1",
      "section_title": "General",
      "content": "This clause covers the following two types of procedures involving SGW change:\n-\tType 1: Procedures in which only Create Session Request message is sent from MME/SGSN to SGW-C during SGW change.\n-\tType 2: Procedures in which Create Session Request message followed by Modify Bearer Request message are sent from MME/SGSN to SGW-C during SGW change.",
      "chunk_type": "definition",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.214_6.3.1.2.2",
      "section_id": "6.3.1.2.2",
      "section_title": "Type 1",
      "content": "This clause defines interactions between the CP and UP function during the following procedures:\n-\tTracking Area Update procedure with Serving GW change (clause 5.3.3.1 of TS 23.401 [2]).\n-\tRouting Area Update with MME interaction and with SGW change (clause 5.3.3.6 of TS 23.401 [2]).\n-\tX2-based handover with Serving GW relocation (clause 5.5.1.1.3 of TS 23.401 [2]).\n-\tMME triggered Serving GW relocation (clause 5.10.4 of TS 23.401 [2]).\nEditor's Note: \"Tracking Area Update procedure with Serving GW change and data forwarding\" (clause 5.3.3.1A of TS 23.401 [2]) is FFS.\nDuring the above procedures following is the nature of interactions between the CP and UP function:\n-\tThe new SGW-C selects a new SGW-U and creates an Sx session.\n-\tThe PGW-C modifies the PGW-U to update with the F-TEIDu(s) of the new SGW-U.\n-\tThe old SGW-C releases the existing Sx session from the old SGW-U.\nFigure 6.3.1.2.2-1: Interaction between CP and UP function during procedures with SGW change (Type 1)\n1.\tProcedure as listed in this step is initiated as specified in the relevant clauses of this specification. The relevant steps of the procedure as specified in the figure above are executed.\n2.\tThe new SGW-C shall select new SGW-U as specified in clause 5.12. The new SGW-C sends Sx Session Establishment Request to the selected SGW-U for creating an Sx session for the UE.\n3.\tThe SGW-U allocates an F-TEIDu for each and every bearer received in the Sx Session Establishment Request. The new SGW-U sends Sx Session Establishment Response to the new SGW-C confirming the successful creation of the Sx session. It includes the F-TEIDu it has allocated for each and every bearer.\n4.\tThe relevant steps of the procedure as specified in the figure above are executed.\n5.\tThe PGW-C sends an Sx Session Modification Request to the PGW-U. The PGW-C shall include the F-TEIDu(s) of the new SGW-U. Additionally, based on the interaction with the PCRF, the PGW-C may also update other Sx parameters for the PDN connection.\n6.\tThe PGW-U sends Sx Session Modification Response to the PGW-C confirming the success of the Sx session modification.\n7.\tThe relevant steps of the procedure as specified in the figure above are executed.\n8.\tThe old SGW-C sends Sx Session Termination Request to the old SGW-U to release the Sx session.\n9.\tThe old SGW-U sends Sx Session Termination Response to the old SGW-C confirming the release of the Sx session.\n10.\tThe relevant steps of the procedure as specified in the figure above are executed.",
      "chunk_type": "general",
      "cross_references": [
        "ts_23.401_clause_5.3.3.1",
        "ts_23.401_clause_5.3.3.6",
        "ts_23.401_clause_5.5.1.1.3",
        "ts_23.401_clause_5.10.4",
        "clause_5.12",
        "figure_6.3.1.2.2-1",
        "ts_23.401"
      ]
    },
    {
      "chunk_id": "ts_23.214_6.3.1.2.3",
      "section_id": "6.3.1.2.3",
      "section_title": "Type 2",
      "content": "This clause defines interactions between the CP and UP function during the following procedures:\n-\tS1-based handover, normal (clause 5.5.1.2.2 of TS 23.401 [2]).\n-\tE-UTRAN to UTRAN Iu mode Inter RAT handover (clause 5.5.2.1 of TS 23.401 [2]).\n-\tUTRAN Iu mode to E-UTRAN Inter RAT handover (clause 5.5.2.2 of TS 23.401 [2]).\n-\tE-UTRAN to GERAN A/Gb mode Inter RAT handover (clause 5.5.2.3 of TS 23.401 [2]).\n-\tGERAN A/Gb mode to E-UTRAN Inter RAT handover (clause 5.5.2.4 of TS 23.401 [2]).\nEditor's Note: Most of the above procedures involve establishment and release of indirect data forwarding tunnel at the source and the target SGW. It is FFS if this needs to be supported in the CP and UP split architecture.\nDuring the above procedures following is the nature of interactions between the CP and UP function:\n-\tThe new SGW-C selects a new SGW-U and creates an Sx session.\n-\tThe SGW-C modifies the Sx session at SGW-U to update the F-TEIDu(s) of the eNB.\n-\tThe PGW-C modifies the PGW-U to update with the F-TEIDu(s) of the new SGW-U.\n-\tThe old SGW-C releases the existing Sx session from the old SGW-U.\nFigure 6.3.1.2.3-1: Interaction between CP and UP function during procedures with SGW change (Type 2)\n1.\tProcedure as listed in this step is initiated as specified in the relevant clauses of this specification. The relevant steps of the procedure as specified in the figure above are executed.\n2.\tThe new SGW-C shall select new SGW-U as specified in clause 5.12. The new SGW-C sends an Sx Session Establishment Request to the selected SGW-U for creating an Sx session for the UE. Usage Monitoring Rules may also be included in case of home-routed roaming scenario and if the inter-operator charging is required.\n3.\tThe SGW-U allocates F-TEIDu for each and every bearer received. The new SGW-U sends an Sx Session Establishment Response to the new SGW-C confirming the successful creation of the Sx session. It includes the F-TEIDu it has allocated for each and every bearer.\n4.\tThe relevant steps of the procedure as specified in the figure above are executed.\n5.\tThe SGW-C sends an Sx Session Modification Request to the SGW-U. It shall include the F-TEIDu of the eNB.\n6.\tThe SGW-U sends an Sx Session Modification Response to the SGW-C confirming the successful modification of the Sx session.\n7.\tThe relevant steps of the procedure as specified in the figure above are executed.\n8.\tThe PGW-C sends an Sx Session Modification Request to the PGW-U. The PGW-C shall include the F-TEIDu of the new SGW-U. Additionally, based on the interaction with the PCRF, the PGW-C may also update other Sx parameters for the PDN connection.\n9.\tThe PGW-U sends an Sx Session Modification Response to the PGW-C confirming the success of the Sx session modification.\n10.\tThe relevant steps of the procedure as specified in the figure above are executed.\n11.\tThe old SGW-C sends an Sx Session Termination Request to the old SGW-U to release the Sx session.\n12.\tThe old SGW-U sends an Sx Session Termination Response to the old SGW-C confirming the release of the Sx session.\n13.\tThe relevant steps of the procedure as specified in the figure above are executed.",
      "chunk_type": "general",
      "cross_references": [
        "ts_23.401_clause_5.5.1.2.2",
        "ts_23.401_clause_5.5.2.1",
        "ts_23.401_clause_5.5.2.2",
        "ts_23.401_clause_5.5.2.3",
        "ts_23.401_clause_5.5.2.4",
        "clause_5.12",
        "figure_6.3.1.2.3-1",
        "ts_23.401"
      ]
    },
    {
      "chunk_id": "ts_23.214_6.3.1.3",
      "section_id": "6.3.1.3",
      "section_title": "Procedures with eNB F-TEIDu update",
      "content": "In this clause, interactions between the CP and UP function during the following procedures are considered:\n-\tUE triggered Service Request (clause 5.3.4.1 of TS 23.401 [2]).\n-\tConnection Resume procedure (clause 5.3.5A of TS 23.401 [2]).\n-\tE-UTRAN initiated E-RAB modification procedure (clause 5.4.7 of TS 23.401 [2]).\n-\tX2-based handover without Serving GW relocation (clause 5.5.1.1.2 of TS 23.401 [2]).\n-\tS1-based handover without Serving GW change (clause 5.5.1.2.2 of TS 23.401 [2]).\nDuring the above procedures following is the nature of interactions between the CP and UP function:\n-\tThe SGW-C modifies the Sx session at SGW-U to update the F-TEIDu(s) of the eNB.\n-\tBased on the interaction with the PCRF, the PGW-C may modify the PGW-U to update other Sx parameters.\nFigure 6.3.1.3-1: Interaction between CP and UP function during procedures with eNB F-TEIDu update\n1.\tProcedure as listed in this step is initiated as specified in the relevant clauses of this specification. The relevant steps of the procedure as specified in the figure above are executed.\n2.\tThe SGW-C sends an Sx Session Modification Request to the SGW-U. It shall include the new F-TEIDu of the eNB. Additionally, for the following procedures extra steps may apply:\n-\tUE triggered Service Request: If the buffering of the data packets in the idle mode is performed in the SGW-C and if those buffered packets are still valid (e.g. data packets for which the buffering duration hasn't expired yet), then SGW-C shall also provide those data packets to the SGW-U (as specified in clause 5.12) so that it can be sent to the eNB.\n3.\tThe SGW-U sends an Sx Session Modification Response to the SGW-C confirming the successful modification of the Sx session.\n4.\tThe relevant steps of the procedure as specified in the figure above are executed.\n5.\tBased on the interaction with the PCRF, the PGW-C may update other Sx parameters for the PDN connection. Correspondingly, the PGW-C sends an Sx Session Modification Request to the PGW-U.\n6.\tThe PGW-U sends an Sx Session Modification Response to the PGW-C confirming the success of the Sx session modification.\n7.\tThe relevant steps of the procedure as specified in the figure above are executed.",
      "chunk_type": "procedure",
      "cross_references": [
        "ts_23.401_clause_5.3.4.1",
        "ts_23.401_clause_5.3.5",
        "ts_23.401_clause_5.4.7",
        "ts_23.401_clause_5.5.1.1.2",
        "ts_23.401_clause_5.5.1.2.2",
        "clause_5.12",
        "figure_6.3.1.3-1",
        "ts_23.401"
      ]
    },
    {
      "chunk_id": "ts_23.214_6.3.1.4",
      "section_id": "6.3.1.4",
      "section_title": "Procedures with release of eNB F-TEIDu",
      "content": "This clause defines interactions between the CP and UP function during the following procedures:\n-\tConnection Suspend procedure (clause 5.3.4A of TS 23.401 [2]).\n-\tS1 release procedure (clause 5.3.5 of TS 23.401 [2]).\nDuring the above procedures following is the nature of interactions between the CP and UP function:\n-\tThe SGW-C modifies the SGW-U to release the eNB F-TEIDu. Additionally, the SGW-C configures the SGW-U so that the downlink data packets can be buffered either in the SGW-C or in the SGW-U.\nFigure 6.3.1.4-1: Interaction between CP and UP function during procedures with release of eNB F-TEIDu\n1.\tProcedure as listed in this step is initiated as specified in the relevant clauses of this specification. The relevant steps of the procedure as specified in the figure above are executed.\n2.\tThe SGW-C sends an Sx Session Modification Request to the SGW-U. It shall indicate the SGW-U to release the eNB F-TEIDu. Additionally, the SGW-C decides if the buffering of the downlink data packets shall be done in CP or the UP function, as specified in clause 5.9) and correspondingly informs the SGW-U for as follows:\n-\tIf the downlink data packets are to be buffered in the SGW-C, the SGW-C shall configure the SGW-U to forward the downlink data packets for all the bearers of the UE to the SGW-C, as specified in clause 5.6.\n-\tIf the downlink data packets are to be buffered in the SGW-U, the SGW-C shall indicate the same to SGW-U. Additionally, the following applies:\n-\tif the Paging Policy Differentiation feature (as specified in clause 4.9 of TS 23.401 [2]) is supported by the SGW-C and SGW-U and based on operator's policy if it is required to be activated for this UE, the SGW-C shall include an indication to provide the DSCP in TOS (IPv4) / TC (IPv6) value from the IP header of the first downlink data packet of each bearer.\n-\tif the PDN GW Pause Charging procedure (as specified in clause 5.3.6A of TS 23.401 [2]) is supported by the SGW-C and SGW-U and based on operator's policy if it is required to be activated for this UE, the SGW-C may provide the number/fraction of packets/bytes drop threshold value. When this threshold is reached, the SGW-U is required to provide an indication to the SGW-C.\n3.\tThe SGW-U sends an Sx Session Modification Response to the SGW-C confirming the successful modification of the Sx session.\n4.\tThe relevant steps of the procedure as specified in the figure above are executed.",
      "chunk_type": "procedure",
      "cross_references": [
        "ts_23.401_clause_5.3.4",
        "ts_23.401_clause_5.3.5",
        "clause_5.9",
        "clause_5.6",
        "ts_23.401_clause_4.9",
        "ts_23.401_clause_5.3.6",
        "figure_6.3.1.4-1",
        "ts_23.401"
      ]
    },
    {
      "chunk_id": "ts_23.214_6.3.1.5",
      "section_id": "6.3.1.5",
      "section_title": "Procedures when downlink data is buffered in the UP function",
      "content": "This clause defines interactions between the CP and UP function when then UE is in idle mode and buffering of the downlink data is performed in the UP function, during the following procedures:\n-\tNetwork Triggered Service Request (clause 5.3.4.3 of TS 23.401 [2]).\n-\tPDN GW Pause of Charging procedure (clause 5.3.6A of TS 23.401 [2]).\nDuring the above procedures following is the nature of interactions between the CP and UP function:\n-\tThe SGW-U notifies the SGW-C that the first downlink data packet was received for a bearer.\nNOTE:\tA bearer is identified in the SGW-U as a combination of PDR(s) and FAR(s).\n-\tThe SGW-U notifies the SGW-C that the drop threshold was reached.\nFigure 6.3.1.5-1: Interaction between CP and UP when downlink data is buffered in the UP function\n1.\tProcedure as listed in this step is initiated as specified in the relevant clauses of this specification. The relevant steps of the procedure as specified in the figure above are executed.\n2.\tWhen the downlink data is received, the SGW-U starts buffering it.\nOn arrival of the first downlink data packet for a bearer, the SGW-U shall send an Sx report message (first packet indication) to the SGW-C. If the Paging Policy Differentiation feature (as specified in clause 4.9 of TS 23.401 [2]) is supported by the SGW-U and if it is activated by the SGW-C for this Sx session, the SGW-U shall also include the DSCP in TOS (IPv4) / TC (IPv6) value from the IP header of the downlink data packet.\nIf the SGW-C has provided the number/fraction of packets/bytes drop threshold value during the procedure with release of eNB F-TEIDu (clause 6.3.1.4), the SGW-U shall monitor that threshold. Once the threshold is reached the SGW-U shall send an Sx report message (drop threshold reached) to the SGW-C.\n3.\tThe relevant steps of the procedure as specified in the figure above are executed.\n4.\tThe SGW-C sends an Sx report Ack message to the SGW-U. Additionally, for the following procedures the following applies:\n-\tNetwork Triggered Service Request: If DL Buffering Duration time and DL Buffering Suggested Packet Counts were received from the MME/SGSN (refer to clause 5.3.4.3, step  2 of TS 23.401 [2]) by the SGW-C then SGW-C shall include the same in the Sx report Ack message.\n5.\tThe relevant steps of the procedure as specified in the figure above are executed.",
      "chunk_type": "procedure",
      "cross_references": [
        "ts_23.401_clause_5.3.4.3",
        "ts_23.401_clause_5.3.6",
        "ts_23.401_clause_4.9",
        "clause_6.3.1.4",
        "figure_6.3.1.5-1",
        "ts_23.401"
      ]
    },
    {
      "chunk_id": "ts_23.214_6.3.1.6",
      "section_id": "6.3.1.6",
      "section_title": "Procedures with release of PDN connection",
      "content": "This clause defines interactions between the CP and UP function during the following procedures:\n-\tUE-initiated Detach procedure for E-UTRAN (clause 5.3.8.2.1 of TS 23.401 [2]).\n-\tUE-initiated Detach procedure for GERAN/UTRAN with ISR activated (clause 5.3.8.2.2 of TS 23.401 [2]).\n-\tMME-initiated Detach procedure (clause 5.3.8.3 of TS 23.401 [2]).\n-\tSGSN-initiated Detach procedure with ISR activated (clause 5.3.8.3A of TS 23.401 [2]).\n-\tHSS-initiated Detach procedure (clause 5.3.8.4 of TS 23.401 [2]).\n-\tUE or MME requested PDN disconnection (clause 5.10.3 of TS 23.401 [2]).\nDuring the above procedures following is the nature of interactions between the CP and UP function:\n-\tThe SGW-C terminates the Sx session at the SGW-U.\n-\tThe PGW-C terminates the Sx session at the PGW-U.\nFigure 6.3.1.6-1: Interaction between CP and UP function during release of PDN connection\n1.\tProcedure as listed in this step is initiated as specified in the relevant clauses of this specification. The relevant steps of the procedure as specified in the figure above are executed.\n2.\tThe SGW-C sends an Sx Session Modification Request to the SGW-U. SGW-C shall indicate SGW-U to stop counting uplink packets for the affected bearers. SGW-C shall also indicate the SGW-U to discard uplink packets received from eNodeB for the affected bearers.\n3.\tThe SGW-U sends an Sx Session Modification Response to the SGW-C.\n4.\tThe relevant steps of the procedure as specified in the figure above are executed.\n5.\tThe PGW-C sends an Sx Session Termination Request to the PGW-U.\n6.\tThe PGW-U sends an Sx Session Termination Response to the PGW-C confirming the successful termination of the Sx session. Additionally, if the usage reporting is configured by the PGW-C (as specified in clause 5.3.2) the PGW-U shall provide the usage report(s) for the PDN connection (as specified in clause 5.3.3) to the PGW-C.\n7.\tThe relevant steps of the procedure as specified in the figure above are executed.\n8.\tThe SGW-C sends an Sx Session Termination Request to the SGW-U.\n9.\tThe SGW-U sends an Sx Session Termination Response to the SGW-C confirming the successful termination of the Sx session. Additionally, if the usage reporting is configured by the SGW-C (as specified in clause 5.3.2) the SGW-U shall provide the usage report(s) for the PDN connection (as specified in clause 5.3.3) to the SGW-C.",
      "chunk_type": "procedure",
      "cross_references": [
        "ts_23.401_clause_5.3.8.2.1",
        "ts_23.401_clause_5.3.8.2.2",
        "ts_23.401_clause_5.3.8.3",
        "ts_23.401_clause_5.3.8.4",
        "ts_23.401_clause_5.10.3",
        "clause_5.3.2",
        "clause_5.3.3",
        "figure_6.3.1.6-1",
        "ts_23.401"
      ]
    },
    {
      "chunk_id": "ts_23.214_6.3.1.7",
      "section_id": "6.3.1.7",
      "section_title": "Procedures with modification of bearer",
      "content": "This clause defines interactions between the CP and UP function during the following procedures:\n-\tDedicated bearer activation (clause 5.4.1 of TS 23.401 [2]).\n-\tPDN GW initiated bearer modification with bearer QoS update (clause 5.4.2.1 of TS 23.401 [2]).\n-\tPDN GW initiated bearer modification without bearer QoS update (clause 5.4.3 of TS 23.401 [2]).\n-\tPDN GW initiated bearer deactivation (clause 5.4.4.1 of TS 23.401 [2]).\n-\tHSS Initiated Subscribed QoS Modification (clause 5.4.2.2 of TS 23.401 [2]).\n-\tMME Initiated Dedicated Bearer Deactivation (clause 5.4.4.2 of TS 23.401 [2]).\nDuring the above procedures following is the nature of interactions between the CP and UP function:\n-\tThe PGW-C modifies the Sx session at the PGW-U.\n-\tThe SGW-C modifies the Sx session at the SGW-U.\nFigure 6.3.1.7-1: Interaction between CP and UP function during modification of bearer\n1.\tProcedure as listed in this step is initiated as specified in the relevant clauses of this specification. The relevant steps of the procedure as specified in the figure above are executed.\n2.\tThe PGW-C sends an Sx Session Modification Request to the PGW-U. For \"Dedicated bearer activation\", PGW-C indicates PGW-U to allocate F-TEID for the new dedicated bearer. For \"PGW/MME initiated bearer deactivation procedure\", PGW-C shall indicate PGW-U to stop counting and stop forwarding downlink packets for the affected bearer(s).\n3.\tThe PGW-U sends an Sx Session Modification Response to the PGW-C confirming the successful modification of the Sx session.\n4.\tThe relevant steps of the procedure as specified in the figure above are executed.\n5.\tThe SGW-C may send an Sx Session Modification Request to the SGW-U. For \"Dedicated bearer activation\", SGW-C indicates SGW-U to allocate F-TEID for the new dedicated bearer.\n6.\tThe SGW-U sends an Sx Session Modification Response to the SGW-C confirming the successful modification of the Sx session.\n7.\tThe relevant steps of the procedure as specified in the figure above are executed.\n8.\tThe SGW-C sends an Sx Session Modification Request to the SGW-U. For dedicated bearer activation procedure, the SGW-C shall include the F-TEIDu of the activated bearer received from the eNodeB. For PDN GW/HSS initiated bearer modification with bearer QoS update procedure, SGW-C provides updated QoS parameters to SGW-U. For PDN GW/MME initiated bearer deactivation procedure, SGW-C shall indicate SGW-U to remove the PDR(s) for the affected bearer(s).\nIf the default bearer belonging to a PDN connection is deactivated, the SGW-C sends an Sx Session Termination Request to the SGW-U.\n9.\tThe SGW-U sends an Sx Session Modification Response or an Sx Session Termination Response to the SGW-C confirming the successful modification or termination of the Sx session.\n10.\tThe relevant steps of the procedure as specified in the figure above are executed.\n11.\tThe PGW-C sends an Sx Session Modification Request to the PGW-U. For dedicated bearer activation procedure, the PGW-C shall include the F-TEIDu of the activated bearer received from the SGW. For PDN GW/HSS initiated bearer modification with bearer QoS update procedure, PGW-C provides updates according to the changed QoS parameters and TFT (if applicable) to PGW-U. For \"PDN GW initiated bearer modification without bearer QoS update\" procedure, PGW-C provides updates according to the changed APN-AMBR and/or TFT to PGW-U. For PDN GW/MME initiated bearer deactivation procedure, PGW-C shall indicate PGW-U to remove the PDR(s) for the affected bearer(s).\nIf the default bearer belonging to a PDN connection is deactivated, the PGW-C sends an Sx Session Termination Request to the PGW-U.\n12.\tThe PGW-U sends an Sx Session Modification Response or an Sx Session Termination Response to the PGW-C confirming the successful modification or termination of the Sx session.\n13.\tThe relevant steps of the procedure as specified in the figure above are executed.",
      "chunk_type": "procedure",
      "cross_references": [
        "ts_23.401_clause_5.4.1",
        "ts_23.401_clause_5.4.2.1",
        "ts_23.401_clause_5.4.3",
        "ts_23.401_clause_5.4.4.1",
        "ts_23.401_clause_5.4.2.2",
        "ts_23.401_clause_5.4.4.2",
        "figure_6.3.1.7-1",
        "ts_23.401"
      ]
    },
    {
      "chunk_id": "ts_23.214_6.3.2.1",
      "section_id": "6.3.2.1",
      "section_title": "IP-CAN session establishment",
      "content": "This clause defines interactions between the CP and UP function during the following procedures:\n-\tIP-CAN session establishment (clause 7.2 of TS 23.203 [3])\nDuring the above procedures following is the nature of interactions between the CP and UP function:\n-\tThe new TDF-C selects a new TDF-U and creates Sx session.\n-\tThe TDF-C modifies the TDF-U to update Sx parameters.\nFigure 6.3.2.1-1: Interaction between CP and UP function with IP-CAN session establishment\n1.\tProcedure as listed in this step is initiated as specified in the relevant clauses of this specification. The relevant steps of the procedure as specified in the figure above are executed.\n2.\tFor the solicited application reporting, the PCRF requests the TDF to establish the relevant session towards PCRF and provides ADC Rules to the TDF. The TDF-C selects a new TDF-U as specified in clause 5.12 and sends an Sx Session Establishment Request to the TDF-U to establish the Sx session.\n3.\tThe TDF-U sends an Sx Session Establishment Response to the TDF-C confirming the successful creation of the Sx session.\n4.\tThe relevant steps of the procedure as specified in the figure above are executed.",
      "chunk_type": "general",
      "cross_references": [
        "ts_23.203_clause_7.2",
        "clause_5.12",
        "figure_6.3.2.1-1",
        "ts_23.203"
      ]
    },
    {
      "chunk_id": "ts_23.214_6.3.2.2",
      "section_id": "6.3.2.2",
      "section_title": "IP-CAN session termination",
      "content": "This clause defines interactions between the CP and UP function during the following procedures:\n-\tIP-CAN session termination (clause 7.3 of TS 23.203 [3]).\nDuring the above procedures following is the nature of interactions between the CP and UP function:\n-\tThe TDF-C releases the existing Sx session from the TDF-U.\nFigure 6.3.2.2-1: Interaction between CP and UP function with IP-CAN session termination\n1.\tProcedure as listed in this step is initiated as specified in the relevant clauses of this specification. The relevant steps of the procedure as specified in the figure above are executed.\n2.\tIf there is an active Sd session between TDF and PCRF, TDF-C sends an Sx Session Termination Request to the TDF-U to release the Sx session.\n3.\tThe TDF-U sends an Sx Session Termination Response to the TDF-C confirming the release of the Sx session\n4.\tThe relevant steps of the procedure as specified in the figure above are executed.",
      "chunk_type": "general",
      "cross_references": [
        "ts_23.203_clause_7.3",
        "figure_6.3.2.2-1",
        "ts_23.203"
      ]
    },
    {
      "chunk_id": "ts_23.214_6.3.2.3",
      "section_id": "6.3.2.3",
      "section_title": "IP-CAN session modification",
      "content": "This clause defines interactions between the CP and UP function during the following procedures:\n-\tIP-CAN session modification (clause 7.4 of TS 23.203 [3]).\nDuring the above procedures following is the nature of interactions between the CP and UP function:\n-\tThe TDF-C modifies the TDF-U to update Sx parameters.\n-\tThe PGW-C modifies the PGW-U to update Sx parameters.\nFigure 6.3.2.3: Interaction between CP and UP function with IP-CAN session modification\n1.\tProcedure as listed in this step is initiated as specified in the relevant clauses of this specification. The relevant steps of the procedure as specified in the figure above are executed.\n2.\tFor the TDF solicited application reporting, and PCRF provides new ADC decisions to the TDF, TDF-C sends an Sx Session Modification Request to the TDF-U to update Sx parameters.\n3.\tThe TDF-U sends an Sx Session Modification Response to the TDF-C confirming update of Sx session.\n4.\tThe relevant steps of the procedure as specified in the figure above are executed.\n5.\tPCRF provides the updated PCC rules, and PGW-C may send an Sx Session Modification Request to the PGW-U to update Sx parameters.\n6.\tThe PGW-U sends an Sx Session Modification Response to the PGW-C confirming the update of Sx session.\n7.\tThe relevant steps of the procedure as specified in the figure above are executed.\nNOTE:\tIf PCEF determines to trigger the procedures defined in TS 23.401 [2], e.g. modify bearer request, steps 5 and 6 are combined with the Sx Session Modification in the corresponding call flows described in clause 6.3.1.7.",
      "chunk_type": "general",
      "cross_references": [
        "ts_23.203_clause_7.4",
        "clause_6.3.1.7",
        "figure_6.3.2.3",
        "ts_23.203",
        "ts_23.401"
      ]
    },
    {
      "chunk_id": "ts_23.214_6.3.2.4",
      "section_id": "6.3.2.4",
      "section_title": "Management of PFDs",
      "content": "This clause defines interactions between the CP and UP function during the following procedures:\n-\tProcedures for management of PFDs (clause 7.12 of TS 23.203 [3]).\nDuring the above procedures following is the nature of interactions between the CP and UP function:\n-\tThe PGW-C/TDF-C provision/update/remove the PFD (s) to the PGW-U/TDF-U.\nFigure 6.3.2.4-1: Interaction between CP and UP function with PFD management\n1.\tProcedure as listed in this step is initiated as specified in the relevant clauses of this specification. The relevant steps of the procedure as specified in the figure above are executed.\n2.\tWhen there's any change to the PFD (s) due to pull mode or push mode procedure, the PGW-C/TDF-C sends PFD management request to the PGW-U/TDF-U to provision/update/remove the PFD (s).\n3.\tPGW-U/TDF-U acknowledges by responding with PFD management response message.",
      "chunk_type": "general",
      "cross_references": [
        "ts_23.203_clause_7.12",
        "figure_6.3.2.4-1",
        "ts_23.203"
      ]
    },
    {
      "chunk_id": "ts_23.214_6.3.3.1",
      "section_id": "6.3.3.1",
      "section_title": "Procedures with GTP based S2b establishment",
      "content": "This clause defines interactions between the CP and UP function during the following procedures:\n-\tGTP based S2b for roaming, non-roaming and LBO (clause 7.2.4 of TS 23.402 [4]).\n-\tEmergency services over GTP based S2b (clause 7.2.5 of TS 23.402 [4]).\n-\tUE-initiated connectivity to additional PDN from Un-trusted Non-3GPP IP Access with GTP (clause 7.6.3 of TS 23.402 [4]).\nDuring the above procedures following is the nature of interactions between the CP and UP function:\n-\tThe new PGW-C selects a new PGW-U and creates an Sx session.\nFigure 6.3.3.1-1: Interaction between CP and UP function with GTP based S2b establishment\n1.\tProcedure as listed in this step is initiated as specified in the relevant clauses of this specification. The relevant steps of the procedure as specified in the figure above are executed.\n2.\tThe PGW-C shall select new PGW-U as specified in clause 5.12. The PGW-C sends an Sx Session Establishment Request to the selected PGW-U for creating an Sx session for the UE.\n3.\tThe PGW-U allocates F-TEIDu for the default bearer. The PGW-U sends an Sx Session Establishment Response to the PGW-C confirming the successful creation of the Sx session. It includes the F-TEIDu it has allocated for the default bearer.\n4.\tThe relevant steps of the procedure as specified in the figure above are executed.",
      "chunk_type": "procedure",
      "cross_references": [
        "ts_23.402_clause_7.2.4",
        "ts_23.402_clause_7.2.5",
        "ts_23.402_clause_7.6.3",
        "clause_5.12",
        "figure_6.3.3.1-1",
        "ts_23.402"
      ]
    },
    {
      "chunk_id": "ts_23.214_6.3.3.2",
      "section_id": "6.3.3.2",
      "section_title": "Procedures with GTP based S2a establishment",
      "content": "This clause defines interactions between the CP and UP function during the following procedures:\n-\tUE-Initiated Connectivity to PDN in WLAN on GTP S2a (clause 16.8.1 of TS 23.402 [4]).\n-\tWLAN on GTP S2a for roaming, LBO and non-roaming scenarios (clause 16.2.1 of TS 23.402 [4]).\nDuring the above procedures following is the nature of interactions between the CP and UP function:\n-\tThe new PGW-C selects a new PGW-U and creates an Sx session.\nFigure 6.3.3.2-1: Interaction between CP and UP function with GTP based S2a establishment\n1-2.\tProcedure as listed in this step is initiated as specified in the relevant clauses of this specification. The relevant steps of the procedure as specified in the figure above are executed.\n3.\tThe PGW-C shall select new PGW-U as specified in clause 5.12 The PGW-C sends an Sx Session Establishment Request to the selected PGW-U for creating Sx session for the UE.\n4.\tThe PGW-U allocates F-TEIDu for the default bearer. The PGW-U sends an Sx Session Establishment Response to the PGW-C confirming the successful creation of the Sx session. It includes the F-TEIDu it has allocated for the default bearer.\n5-7.\tThe HSS/AAA is also made aware of the PGW-C identity at this time. The relevant steps of the procedure as specified in the figure above are then executed.\nThe following steps are relevant only for \"WLAN on GTP S2a for roaming, LBO and non-roaming scenarios\" where TWAG using the layer 3 attach request (i.e. a DHCPv4 message) is sent by the UE as the attach trigger. These steps are executed only if steps 3-7 shown in figure 16.2.1-1 are omitted where TWAP sends the layer 2 attach trigger to the TWAG.\n8.\tThe PGW-C shall select new PGW-U as specified in clause 5.12. The PGW-C sends an Sx Session Establishment Request to the selected PGW-U for creating Sx session for the UE.\n9.\tThe PGW-U allocates F-TEIDu for the bearer. The PGW-U sends an Sx Session Establishment Response to the PGW-C confirming the successful creation of the Sx session. It includes the F-TEIDu it has allocated for the default bearer.\n10-11.\tThe relevant steps of the procedure as specified in the figure above are executed.",
      "chunk_type": "procedure",
      "cross_references": [
        "ts_23.402_clause_16.8.1",
        "ts_23.402_clause_16.2.1",
        "clause_5.12",
        "figure_6.3.3.2-1",
        "figure_16.2.1-1",
        "ts_23.402"
      ]
    },
    {
      "chunk_id": "ts_23.214_6.3.3.3",
      "section_id": "6.3.3.3",
      "section_title": "Procedures with GTP based S2b release",
      "content": "This clause defines interactions between the CP and UP function during the following procedures:\n-\tUE/ePDG-initiated detach procedure with GTP on S2b (clause 7.4.3.1 of TS 23.402 [4]).\n-\tHSS/AAA-initiated detach procedure with GTP on S2b (clause 7.4.4.1 of TS 23.402 [4]).\nDuring the above procedures following is the nature of interactions between the CP and UP function:\n-\tThe PGW-C releases the existing Sx session from the PGW-U.\nFigure 6.3.3.3-1: Interaction between CP and UP function with release of GTP based S2b\n1.\tProcedure as listed in this step is initiated as specified in the relevant clauses of this specification. The relevant steps of the procedure as specified in the figure above are executed.\n2.\tThe PGW-C sends an Sx Session Termination Request to the PGW-U to release the Sx session.\n3.\tThe PGW-U sends an Sx Session Termination Response to the PGW-C confirming the release of the Sx session.\n4.\tThe relevant steps of the procedure as specified in the figure above are executed.",
      "chunk_type": "procedure",
      "cross_references": [
        "ts_23.402_clause_7.4.3.1",
        "ts_23.402_clause_7.4.4.1",
        "figure_6.3.3.3-1",
        "ts_23.402"
      ]
    },
    {
      "chunk_id": "ts_23.214_6.3.3.4",
      "section_id": "6.3.3.4",
      "section_title": "Procedures with GTP based S2a release",
      "content": "This clause defines interactions between the CP and UP function during the following procedures:\n-\tUE/TWAN Initiated Detach and UE/TWAN requested PDN Disconnection on GTP S2a (clause 16.3.1.1 of TS 23.402 [4]).\n-\tUE/TWAN-Initiated Detach in WLAN on GTP S2a (clause 16.7.1.1 of TS 23.402 [4]).\nDuring the above procedures following is the nature of interactions between the CP and UP function:\n-\tThe PGW-C releases the existing Sx session from the PGW-U.\nFigure 6.3.3.4-1: Interaction between CP and UP function with release of GTP based S2a\n1.\tProcedure as listed in this step is initiated as specified in the relevant clauses of this specification. The relevant steps of the procedure as specified in the figure above are executed.\n2.\tThe PGW-C sends an Sx Session Termination Request to the PGW-U to release the Sx session.\n3.\tThe PGW-U sends an Sx Session Termination Response to the PGW-C confirming the release of the Sx session.\n4.\tThe relevant steps of the procedure as specified in the figure above are executed.",
      "chunk_type": "procedure",
      "cross_references": [
        "ts_23.402_clause_16.3.1.1",
        "ts_23.402_clause_16.7.1.1",
        "figure_6.3.3.4-1",
        "ts_23.402"
      ]
    },
    {
      "chunk_id": "ts_23.214_6.3.3.5",
      "section_id": "6.3.3.5",
      "section_title": "Procedures with dedicated bearer activation by PGW",
      "content": "This clause defines interactions between the CP and UP function during the following procedures:\n-\tDedicated S2b Bearer Activation Procedure with GTP on S2b (clause 7.10 of TS 23.402 [4]).\n-\tDedicated S2a Bearer Activation Procedure with GTP on S2a (clause 16.5 of TS 23.402 [4]).\nDuring the above procedures following is the nature of interactions between the CP and UP function:\n-\tThe PGW-C modifies the existing Sx session for activating new dedicated bearer.\nFigure 6.3.3.5-1: Interaction between CP and UP function with dedicated bearer activation by PGW\n1.\tProcedure as listed in this step is initiated as specified in the relevant clauses of this specification. The relevant steps of the procedure as specified in the figure above are executed.\n2.\tThe PGW-C initiates dedicated bearer activation procedure based on the PCC decision provision (QoS policy) message received from the PCRF. It uses received QoS policy to assign the EPS Bearer QoS, i.e., it assigns the values to the bearer level QoS parameters QCI, ARP, GBR and MBR. The PGW-C sends an Sx Session Modification Request to the existing PGW-U for activating new dedicated bearer for the UE.\n3.\tThe PGW-U shall allocate TEIDs for the new bearer(s). The PGW-U sends an Sx Session Modification Response to the PGW-C confirming the successful modification of the Sx session. It shall include the TEIDs it has allocated for the new bearer(s).\n4.\tThe relevant steps of the procedure as specified in the figure above are executed.",
      "chunk_type": "procedure",
      "cross_references": [
        "ts_23.402_clause_7.10",
        "ts_23.402_clause_16.5",
        "figure_6.3.3.5-1",
        "ts_23.402"
      ]
    },
    {
      "chunk_id": "ts_23.214_6.3.3.6",
      "section_id": "6.3.3.6",
      "section_title": "Procedures with bearer deactivation by PGW",
      "content": "This clause defines interactions between the CP and UP function during the following procedures:\n-\tPDN GW Initiated Bearer Deactivation with GTP on S2b (clause 7.9.2 of TS 23.402 [4]).\n-\tPDN GW Initiated Bearer Deactivation with GTP on S2a (clause 16.4.1 of TS 23.402 [4]).\nDuring the above procedures following is the nature of interactions between the CP and UP function:\n-\tThe PGW-C modifies the existing Sx session for deactivating the dedicated bearer.\nFigure 6.3.3.6-1: Interaction between CP and UP function with bearer deactivation by PGW-C\n1.\tProcedure as listed in this step is initiated as specified in the relevant clauses of this specification. The relevant steps of the procedure as specified in the figure above are executed.\n2.\tThe PGW-C initiates bearer deactivation procedure based on IP-CAN modifications encountered by the PCRF when the dynamic PCC is deployed. The PGW-C sends an Sx Session Modification Request to the existing PGW-U for deactivating the dedicated bearer for the UE.\n3.\tThe PGW-U de-allocates the TEIDs for the dedicated bearer and sends an Sx Session Modification Response to the PGW-C confirming the successful modification of the Sx session.\n4.\tThe relevant steps of the procedure as specified in the figure above are executed.",
      "chunk_type": "procedure",
      "cross_references": [
        "ts_23.402_clause_7.9.2",
        "ts_23.402_clause_16.4.1",
        "figure_6.3.3.6-1",
        "ts_23.402"
      ]
    },
    {
      "chunk_id": "ts_23.214_6.3.3.7",
      "section_id": "6.3.3.7",
      "section_title": "Procedures with bearer modification",
      "content": "This clause defines interactions between the CP and UP function during the following procedures:\n-\tS2b Bearer Modification Procedure with GTP on S2b (clause 7.11.1 of TS 23.402 [4]).\n-\tHSS Initiated Subscribed QoS Modification (clause 7.11.2 of TS 23.402 [4]).\n-\tPDN GW-initiated S2a Bearer Modification Procedure with GTP on S2a (clause 16.6.1 of TS 23.402 [4]).\n-\tHSS Initiated Subscribed QoS Modification (clause 16.6.2 of TS 23.402 [4]).\nDuring the above procedures following is the nature of interactions between the CP and UP function:\n-\tThe PGW-C modifies the existing Sx session for modification of the existing bearer.\nFigure 6.3.3.7-1: Interaction between CP and UP function with bearer modification\n1.\tProcedure as listed in this step is initiated as specified in the relevant clauses of this specification. The relevant steps of the procedure as specified in the figure above are executed.\n2.\tThe PGW-C initiates dedicated bearer modification procedure based on the PCC decision provision (QoS policy) message received from the PCRF. It uses this QoS policy to determine that a service data flow shall be aggregated to or removed from an active bearer or that the authorized QoS of a service data flow has changed. The PGW-C sends an Sx Session Modification Request to the existing PGW-U for modification of the existing bearer for the UE.\n3.\tThe PGW-U updates the Sx parameters and sends an Sx Session Modification Response to the PGW-C confirming the successful modification of the Sx session.\n4.\tThe relevant steps of the procedure as specified in the figure above are executed.",
      "chunk_type": "procedure",
      "cross_references": [
        "ts_23.402_clause_7.11.1",
        "ts_23.402_clause_7.11.2",
        "ts_23.402_clause_16.6.1",
        "ts_23.402_clause_16.6.2",
        "figure_6.3.3.7-1",
        "ts_23.402"
      ]
    },
    {
      "chunk_id": "ts_23.214_6.3.3.8",
      "section_id": "6.3.3.8",
      "section_title": "Procedures with handover from non-3GPP access",
      "content": "This clause defines interactions between the CP and UP function during the following procedures:\n-\tHandover from Trusted Non-3GPP IP Access to E-UTRAN with GTP on S2a or S2b and GTP on S5/S8 interfaces (clauses 8.2.1.1 and 16.11 of TS 23.402 [4]).\n-\tHandover from Trusted Non-3GPP IP Access to UTRAN/GERAN with GTP on S2a and GTP based S5/S8 (clauses 8.2.1.3 and 16.11 of TS 23.402 [4]).\n-\tHandover from Untrusted Non-3GPP IP Access to E-UTRAN with GTP on S2b and GTP on S5/S8 interfaces (clause 8.6.1.1 of TS 23.402 [4]).\n-\tHandover from Untrusted Non-3GPP IP Access to UTRAN/GERAN with GTP on S2b and GTP on S5/S8 interfaces (clause 8.6.1.2 of TS 23.402 [4]).\nDuring the above procedures following is the nature of interactions between the CP and UP function:\n-\tThe SGW-C selects a SGW-U and creates an Sx session.\n-\tThe SGW-C modifies the existing Sx session for modification of the bearer.\n-\tThe PGW-C selects a PGW-U and creates an Sx session.\n-\tThe PGW-C modifies the existing Sx session for modification of the bearer.\nFigure 6.3.3.8-1: Interaction between CP and UP function with handover from non-3GPP access\n1.\tProcedure as listed in this step is initiated as specified in the relevant clauses of this specification. The relevant steps of the procedure as specified in the figure above are executed.\n2.\tThe SGW-C shall select SGW-U as specified in clause 5.12 when the request with a Handover Indication information. The SGW-C sends Sx Session Establishment Request to the selected SGW-U for creating Sx session for the UE.\n3.\tThe SGW-U allocates F-TEIDu for all received bearers. The SGW-U sends Sx Session Establishment Response to the SGW-C confirming the successful creation of the Sx session. It includes the F-TEIDu it has allocated for each and every bearer.\n4.\tThe relevant steps of the procedure as specified in the figure above are executed. Since Handover Indication is included, the PGW-C may execute a PCEF-Initiated IP‑CAN Session Modification Procedure with the PCRF.\n5.\tThe PGW-C sends an Sx Session Modification Request to the PGW-U for modifying the Sx session for the UE.\n6.\tThe PGW-U allocates F-TEIDu for all received bearers. The PGW-U sends an Sx Session Modification Response to the PGW-C confirming the successful modification of the Sx session. It includes the F-TEIDu it has allocated for each and every bearer.\n7.\tThe relevant steps of the procedure as specified in the figure above are executed.\n8.\tThe SGW-C sends an Sx Session Modification Request after Radio and Access bearers are established at the SGW-C.\n9.\tThe SGW-U sends an Sx Session Modification Response to the SGW-C confirming the successful modification of the Sx session.\n10.\tThe relevant steps of the procedure as specified in the figure above are executed.\n11.\tThe PGW-C sends an Sx Session Modification Request to prompt the PGW-U to tunnel packets from non 3GPP IP access to 3GPP access system and immediately start routing packets to the SGW-U for the default and any dedicated EPS bearers established.\n12.\tThe PGW-U sends an Sx Session Modification Response to the PGW-C.\n13.\tThe relevant steps of the procedure as specified in the figure above are executed.",
      "chunk_type": "procedure",
      "cross_references": [
        "ts_23.402_clause_8.6.1.1",
        "ts_23.402_clause_8.6.1.2",
        "clause_5.12",
        "figure_6.3.3.8-1",
        "ts_23.402"
      ]
    },
    {
      "chunk_id": "ts_23.214_6.3.3.9",
      "section_id": "6.3.3.9",
      "section_title": "Procedures with handover from 3GPP access",
      "content": "This clause defines interactions between the CP and UP function during the following procedures:\n-\tHandover from 3GPP Access to Untrusted Non-3GPP IP Access with GTP on S2b (clause 8.6.2.1 of TS 23.402 [4]).\n-\tHandover in single-connection mode from 3GPP access to Trusted WLAN on GTP S2a for roaming and non-roaming scenarios (clause 16.10.1.1 of TS 23.402 [4]).\nDuring the above procedures following is the nature of interactions between the CP and UP function:\n-\tThe new PGW-C selects a new PGW-U and creates an Sx session.\nFigure 6.3.3.9-1: Interaction between CP and UP function with handover from 3GPP access\n1.\tProcedure as listed in this step is initiated as specified in the relevant clauses of this specification. The relevant steps of the procedure as specified in the figure above are executed.\n2.\tThe PGW-C allocates F-TEIDu for each and every bearer. Then the PGW-C sends an Sx Session Establishment Request to the selected PGW-U for modifying the Sx session for the UE.\n3.\tThe PGW-U allocates F-TEIDu for all received bearers. The PGW-U sends an Sx Session Establishment Response to the PGW-C confirming the successful modification of the Sx session. It includes the F-TEIDu it has allocated for each and every bearer.\n4.\tThe relevant steps of the procedure as specified in the figure above are executed.",
      "chunk_type": "procedure",
      "cross_references": [
        "ts_23.402_clause_8.6.2.1",
        "ts_23.402_clause_16.10.1.1",
        "figure_6.3.3.9-1",
        "ts_23.402"
      ]
    },
    {
      "chunk_id": "ts_23.214_6.3.4.1.1",
      "section_id": "6.3.4.1.1",
      "section_title": "Procedures with SGSN terminating S4 interface",
      "content": "This clause defines interactions between the CP and UP function during the following procedures related to the deactivation of a PDN connection:\nGroup 1:\n-\tCombined GPRS / IMSI Attach procedure:\n-\tIncluding steps specific for S4 SGSN: Combined GPRS / IMSI Attach procedure, Delete Bearer by the new SGSN, using S4, and Combined GPRS / IMSI Attach procedure, Delete Bearer by the old SGSN, using S4.\n-\tMS-Initiated Combined GPRS / IMSI Detach Procedure.\n-\tSGSN-Initiated GPRS Detach Procedure.\n-\tHLR-Initiated GPRS Detach Procedure:\n-\tIncluding steps specific for S4 SGSN: SGSN interaction during Detach Procedure when using S4.\n-\tMS Initiated Bearer Deactivation Procedure for A/Gb mode (with Teardown Ind).\n-\tMS Initiated Bearer Deactivation Procedure for Iu mode (with Teardown Ind).\n-\tSGSN-initiated Bearer Deactivation Procedure (with Teardown Ind):\n-\tIncluding steps specific for S4 SGSN: MS-and SGSN Initiated PDN connection Deactivation Procedure using S4.\nGroup 2:\n-\tGGSN-initiated PDP Context Deactivation Procedure (with Teardown Ind):\n-\tIncluding steps specific for S4 SGSN: PDN GW-initiated Bearer Deactivation Procedure using S4, part 1 and part 2.\nDuring the above procedures, following is the nature of interactions between the CP and UP function:\n-\tThe SGW-C releases the existing Sx session from SGW-U.\n-\tThe PGW-C releases the existing Sx session from PGW-U.\n-\tThe SGW-C modifies the existing Sx session for SGW-U.\n-\tThe PGW-C modifies the existing Sx session for PGW-U.\nFigure 6.3.4.1.1-1: Interaction between CP and UP function with PDN connection deactivation Group 1\n1.\tProcedure as listed in this step is initiated as specified in the relevant clauses of this specification. The relevant steps of the procedure as specified in the figure above are executed.\n2a.\tThe SGW-C sends an Sx Session Modification Request to the SGW-U to modify the Sx session. SGW-C shall request SGW-U to stop counting uplink packets for the affected bearers. SGW-C shall also request the SGW-U to discard uplink packets received from eNodeB for the affected bearers.\n2b.\tThe SGW-U sends an Sx Session Modification Response to the SGW-C confirming the modification of the Sx session.\n2c.\tThe relevant steps of the procedure as specified in the figure above are executed.\n3a.\tThe PGW-C may send an Sx Session Termination Request to the PGW-U to release the Sx session.\n3b.\tThe PGW-U sends an Sx Session Termination Response to the PGW-C confirming the release of the Sx session.\n3c.\tThe relevant steps of the procedure as specified in the figure above are executed.\n3d.\tThe SGW-C may send an Sx Session Termination Request to the SGW-U to release the Sx session.\n3e.\tThe SGW-U sends an Sx Session Termination Response to the SGW-C confirming the release of the Sx session.\n4.\tThe relevant steps of the procedure as specified in the figure above are executed.\n5a.\tThe SGW-C may send an Sx Session Modification Request to the SGW-U in detach and Bearer Deactivation procedures. SGW-C shall indicate SGW-U to stop counting uplink packets for the affected bearers. SGW-C shall also indicate the SGW-U to discard uplink packets received from eNodeB for the affected bearers.\n5b.\tThe SGW-U sends an Sx Session Modification Response to the SGW-C.\n6.\tThe relevant steps of the procedure as specified in the figure above are executed.\n7a.\tThe PGW-C may send an Sx Session Termination Request to the PGW-U to release the Sx session.\n7b.\tThe PGW-U sends an Sx Session Termination Response to the PGW-C confirming the release of the Sx session.\n8.\tThe relevant steps of the procedure as specified in the figure above are executed.\n9a.\tThe SGW-C may send an Sx Session Termination Request to the SGW-U to release the Sx session.\n9b.\tThe SGW-U sends an Sx Session Termination Response to the SGW-C confirming the release of the Sx session.\n10.\tThe relevant steps of the procedure as specified in the figure above are executed.\nFigure 6.3.4.1.1-2: Interaction between CP and UP function with PDN connection deactivation Group 2\n1.\tProcedure as listed in this step is initiated as specified in the relevant clauses of this specification. The relevant steps of the procedure as specified in the figure above are executed.\n2a.\tThe PGW-C sends an Sx Session Modification Request to the PGW-U when it initiates bearer deactivation procedure. PGW-C shall indicate PGW-U to stop counting downlink packets for the affected bearers. PGW-C shall also indicate the PGW-U to discard downlink packets received for the affected bearers.\n2b.\tThe PGW-U sends an Sx Session Modification Response to the PGW-C.\n3a.\tVoid.\n3b.\tVoid.\n4.\tThe relevant steps of the procedure as specified in the figure above are executed.\n5a.\tThe SGW-C sends an Sx Session Termination Request to the SGW-U to release the Sx session.\n5b.\tThe SGW-U sends an Sx Session Termination Response to the SGW-C confirming the release of the Sx session.\n6.\tThe relevant steps of the procedure as specified in the figure above are executed.\n7a.\tThe PGW-C sends an Sx Session Termination Request to the PGW-U to release the Sx session.\n7b.\tThe PGW-U sends an Sx Session Termination Response to the PGW-C confirming the release of the Sx session.\n8.\tThe relevant steps of the procedure as specified in the figure above are executed.",
      "chunk_type": "procedure",
      "cross_references": [
        "figure_6.3.4.1.1-1",
        "figure_6.3.4.1.1-2"
      ]
    },
    {
      "chunk_id": "ts_23.214_6.3.4.1.2",
      "section_id": "6.3.4.1.2",
      "section_title": "Procedures with SGSN terminating Gn/Gp interface",
      "content": "This clause defines interactions between the CP and UP function during the following procedures related to the deactivation of a PDN connection:\nGroup 1:\n-\tCombined GPRS / IMSI Attach procedure.\n-\tMS-Initiated Combined GPRS / IMSI Detach Procedure.\n-\tSGSN-Initiated GPRS Detach Procedure.\n-\tHLR-Initiated GPRS Detach Procedure.\n-\tMS Initiated PDP Context Deactivation Procedure for A/Gb mode (with Teardown Ind).\n-\tMS Initiated PDP Context Deactivation Procedure for Iu mode (with Teardown Ind).\n-\tSGSN-initiated PDP Context Deactivation Procedure (with Teardown Ind).\nGroup 2:\n-\tGGSN-initiated PDP Context Deactivation Procedure (with Teardown Ind).\nDuring the above procedures, following is the nature of interactions between the CP and UP function:\n-\tThe PGW-C releases the existing Sx session from PGW-U.\nFigure 6.3.4.1.2-1: Interaction between CP and UP function with PDN connection deactivation Group 1\n1.\tProcedure as listed in this step is initiated as specified in the relevant clauses of this specification. The relevant steps of the procedure as specified in the figure above are executed.\n2a.\tThe PGW-C may send an Sx Session Termination Request to the PGW-U to release the Sx session.\n2b.\tThe PGW-U sends an Sx Session Termination Response to the PGW-C confirming the release of the Sx session.\n3.\tThe relevant steps of the procedure as specified in the figure above are executed.\n4a.\tThe PGW-C may send an Sx Session Termination Request to the PGW-U to release the Sx session.\n4b.\tThe PGW-U sends an Sx Session Termination Response to the PGW-C confirming the release of the Sx session.\n5.\tThe relevant steps of the procedure as specified in the figure above are executed.\nFigure 6.3.4.1.2-2: Interaction between CP and UP function with PDN connection deactivation Group 2\n1.\tProcedure as listed in this step is initiated as specified in the relevant clauses of this specification. The relevant steps of the procedure as specified in the figure above are executed.\n2a.\tThe PGW-C sends an Sx Session Modification Request to the PGW-U when it initiates bearer deactivation procedure. PGW-C shall indicate PGW-U to stop counting downlink packets for the affected bearers. PGW-C shall also indicate the PGW-U to discard downlink packets received for the affected bearers.\n2b.\tThe PGW-U sends an Sx Session Modification Response to the PGW-C.\n3.\tThe relevant steps of the procedure as specified in the figure above are executed.\n4a.\tThe PGW-C sends an Sx Session Termination Request to the PGW-U to release the Sx session.\n4b.\tThe PGW-U sends an Sx Session Termination Response to the PGW-C confirming the release of the Sx session.\n5.\tThe relevant steps of the procedure as specified in the figure above are executed.",
      "chunk_type": "procedure",
      "cross_references": [
        "figure_6.3.4.1.2-1",
        "figure_6.3.4.1.2-2"
      ]
    },
    {
      "chunk_id": "ts_23.214_6.3.4.2.1",
      "section_id": "6.3.4.2.1",
      "section_title": "Procedures with SGSN terminating S4 interface",
      "content": "This clause defines interactions between the CP and UP function during the following procedures related to the modification of a PDN connection.\nGroup 1 Procedures for Location Management, Handover, Service Request and Inter-System Change:\n-\tInter SGSN Routeing Area Update Procedure:\n-\tIncluding steps specific for S4 SGSN: Inter SGSN Routeing Area Update and Combined Inter SGSN RA / LA Update using S4.\n-\tCombined RA / LA Update in the Case of Inter SGSN RA Update Procedure:\n-\tIncluding steps specific for S4 SGSN: Inter SGSN Routeing Area Update and Combined Inter SGSN RA / LA Update using S4.\n-\tIu mode RA Update Procedure:\n-\tIncluding steps specific for S4 SGSN: Routeing Area Update Procedure using S4.\n-\tSRNS Relocation Procedure.\n-\tCombined Hard Handover and SRNS Relocation Procedure.\n-\tCombined Cell / URA Update and SRNS Relocation Procedure:\n-\tIncluding steps specific for S4 SGSN: Serving RNS Relocation Procedure, Combined Hard Handover and SRNS Relocation Procedure, and Combined Cell / URA Update and SRNS Relocation Procedure Using S4.\n-\tEnhanced Serving RNS Relocation:\n-\tIncluding steps specific for S4 SGSN: Enhanced Serving RNS Relocation Procedure using S4.\n-\tMS Initiated Service Request Procedure.\n-\tNetwork Initiated Service Request Procedure:\n-\tIncluding steps specific for S4 SGSN: UE Initiated Service Request Procedure Using S4.\n-\tIu mode to A/Gb mode Intra SGSN Change:\n-\tIncluding steps specific for S4 SGSN: Iu mode to A/Gb mode Intra SGSN Change using S4.\n-\tA/Gb mode to Iu mode Intra SGSN Change:\n-\tIncluding steps specific for S4 SGSN: A/Gb mode to Iu mode Intra-SGSN Change using S4.\n-\tIu mode to A/Gb mode Inter-SGSN Change:\n-\tIncluding steps specific for S4 SGSN: Iu mode to A/Gb mode Inter-SGSN Change using S4.\n-\tA/Gb mode to Iu mode Inter SGSN Change:\n-\tIncluding steps specific for S4 SGSN: A/Gb mode to Iu mode Inter-SGSN Change using S4.\n-\tGPRS Paging Procedure (A/Gb mode):\n-\tS4 specific handling in Paging response for GPRS Downlink Transfer with no established user plane on S4.\nGroup 2 UE/SGSN initiated PDN connection modification:\n-\tSecondary PDP Context Activation Procedure for A/Gb mode.\n-\tSecondary PDP Context Activation Procedure for Iu mode:\n-\tIncluding steps specific for S4 SGSN: Secondary PDP Context Activation Procedure, PDP Creation part, using S4.\n-\tMS-Initiated PDP Context Modification Procedure, A/Gb mode.\n-\tMS-Initiated PDP Context Modification Procedure, Iu mode.\n-\tSGSN-Initiated PDP Context Modification Procedure, A/Gb mode.\n-\tSGSN-Initiated PDP Context Modification Procedure, Iu mode:\n-\tIncluding steps specific for S4 SGSN: Request part of SGSN-Initiated EPS Bearer Modification Procedure using S4, and Update part of SGSN-Initiated EPS Bearer Modification Procedure using S4.\n-\tMS Initiated PDP Context Deactivation Procedure for A/Gb mode (without Teardown Ind).\n-\tMS Initiated PDP Context Deactivation Procedure for Iu mode (without Teardown Ind).\n-\tSGSN-initiated PDP Context Deactivation Procedure (without Teardown Ind):\n-\tSteps specific for S4 SGSN: MS-and SGSN Initiated Bearer Deactivation Procedure.\nGroup 3 PGW initiated PDN connection modification:\n-\tNetwork Requested Secondary PDP Context Activation Procedure using S4.\n-\tGGSN-Initiated PDP Context Modification Procedure:\n-\tIncluding steps specific for S4 SGSN: PGW-Initiated Bearer Modification Procedure, A/Gb mode.\n-\tGGSN-Initiated PDP Context Modification Procedure:\n-\tIncluding steps specific for S4 SGSN: PGW-Initiated Bearer Modification Procedure, Iu mode.\n-\tGGSN-initiated PDP Context Deactivation Procedure (without Teardown Ind):\n-\tIncluding steps specific for S4 SGSN: PGW-initiated Bearer Deactivation Procedure.\nDuring the above procedures, following is the nature of interactions between the CP and UP function:\n-\tThe SGW-C informs the SGW-U to modify the Sx session.\n-\tThe PGW-C informs the PGW-U to modify the Sx session.\nFigure 6.3.4.2.1-1: Interaction between CP and UP function with PDN connection modification, Group 1\n1.\tProcedure as listed in this step is initiated as specified in the relevant clauses of this specification. The relevant steps of the procedure as specified in the figure above are executed.\n2a.\tThe SGW-C may send an Sx Session Modification Request to the SGW-U to update the Sx session.\n2b.\tThe SGW-U sends an Sx Session Modification Response to the SGW-C confirming the update the Sx session.\n2c.\tThe relevant steps of the procedure as specified in the figure above are executed.\n3a.\tThe PGW-C may send an Sx Session Modification Request to the PGW-U to update the Sx session.\n3b.\tThe PGW-U sends an Sx Session Modification Response to the PGW-C confirming the update the Sx session.\n4.\tThe relevant steps of the procedure as specified in the figure above are executed.\nNOTE 1:\tStep 2a/2b happens when SGW-C receives request message from S4 SGSN, and step 3a/3b happens when PGW-C receives request message from SGW-C.\nFigure 6.3.4.2.1-2: Interaction between CP and UP function with PDN connection modification, Group 2\n1.\tProcedure as listed in this step is initiated as specified in the relevant clauses of this specification. The relevant steps of the procedure as specified in the figure above are executed.\n2a.\tThe PGW-C may send an Sx Session Modification Request to the PGW-U to update the Sx session. For \"Secondary PDP Context Activation Procedure\", PGW-C may request PGW-U to allocate F-TEID for the dedicated bearer. For \"MS- or SGSN- Initiated PDP Context Deactivation Procedure\", PGW-C shall request PGW-U to stop counting and stop forwarding packets for the affected bearers.\n2b.\tThe PGW-U sends an Sx Session Modification Response to the PGW-C confirming the update the Sx session.\n3. The relevant steps of the procedure as specified in the figure above are executed.\n4a.\tThe SGW-C may send an Sx Session Modification Request to the SGW-U to update the Sx session. For \"Secondary PDP Context Activation Procedure\", SGW-C requests SGW-U to allocate F-TEID for the dedicate bearer. For \"MS- or SGSN Initiated PDP Context Deactivation Procedure\", SGW-C shall request SGW-U to stop counting and stop forwarding packets for the affected bearers.\n4b.\tThe SGW-U sends an Sx Session Modification Response to the SGW-C confirming the update the Sx session.\n5.\tThe relevant steps of the procedure as specified in the figure above are executed.\n6a.\tThe SGW-C may send an Sx Session Modification Request to the SGW-U to update the Sx session. For \"Secondary PDP Context Activation Procedure\", the SGW-C shall include the F-TEIDu of the activated bearer received from the S4 SGSN or RNC. For \"MS- or SGSN- initiated PDP Context Modification\" with bearer QoS update procedure, SGW-C provides updated QoS parameters to SGW-U. For \"MS- or SGSN Initiated PDP Context Deactivation Procedure\", SGW-C shall request SGW-U to remove the PDR for the affected bearers.\n6b.\tThe SGW-U sends an Sx Session Modification Response to the SGW-C confirming the update the Sx session.\n7.\tThe relevant steps of the procedure as specified in the figure above are executed.\n8a.\tThe PGW-C may send an Sx Session Modification Request to the PGW-U to update the Sx session. For \"Secondary PDP Context Activation Procedure\", the PGW-C shall include the F-TEIDu of the activated bearer received from the SGW. For \"MS- or SGSN- Initiated PDP Context Deactivation Procedure, the PGW-C shall request PGW-U to remove the PDR for the affected bearers.\n8b.\tThe PGW-U sends an Sx Session Modification Response to the PGW-C confirming the update the Sx session.\nNOTE 2:\tStep 2a/2b happens before PGW-C sends request message to SGW-C, and step 8a/8b happens when PGW-C receives response message from SGW-C.\nNOTE 3:\tStep 4a/4b happens when SGW-C receives request message from PGW-C, and step 6a/6b happens when SGW-C receives response message from S4 SGSN.\nFigure 6.3.4.2.1-3: Interaction between CP and UP function with PDN connection modification, Group 3\n1.\tProcedure as listed in this step is initiated as specified in the relevant clauses of this specification. The relevant steps of the procedure as specified in the figure above are executed.\n2a.\tThe PGW-C may send an Sx Session Modification Request to the PGW-U to update the Sx session. For \"Network Requested Secondary PDP Context Activation Procedure\", PGW-C may request PGW-U to allocate F-TEID for the dedicated bearer. For \"GGSN Initiated PDP Context Deactivation Procedure\", PGW-C shall request PGW-U to stop counting and stop forwarding packets for the affected bearers.\n2b.\tThe PGW-U sends an Sx Session Modification Response to the PGW-C confirming the update the Sx session.\n3a.\tThe SGW-C may send an Sx Session Modification Request to the SGW-U to update the Sx session. For \"Network Requested Secondary PDP Context Activation Procedure\", SGW-C requests SGW-U to allocate F-TEID for the dedicated bearer. For \"GGSN Initiated PDP Context Deactivation Procedure\", SGW-C shall request SGW-U to stop counting and stop forwarding packets for the affected bearers.\n3b.\tThe SGW-U sends an Sx Session Modification Response to the SGW-C confirming the update the Sx session.\n4.\tThe relevant steps of the procedure as specified in the figure above are executed.\n5a.\tThe SGW-C may send an Sx Session Modification Request to the SGW-U to update the Sx session. For \"Network Requested Secondary PDP Context Activation Procedure\", the SGW-C shall include the F-TEIDu of the activated bearer received from the S4 SGSN or RNC. For \"GGSN initiated PDP Context Modification\" with bearer QoS update, SGW-C provides updated QoS parameters to SGW-U. For \"GGSN Initiated PDP Context Deactivation Procedure\", SGW-C shall request SGW-U to remove the PDR for the affected bearers.\n5b.\tThe SGW-U sends an Sx Session Modification Response to the SGW-C confirming the update the Sx session.\n6.\tThe relevant steps of the procedure as specified in the figure above are executed.\n7a.\tThe PGW-C may send an Sx Session Modification Request to the PGW-U to update the Sx session. For \"Network Requested Secondary PDP Context Activation Procedure\", the PGW-C shall include the F-TEIDu of the activated bearer received from the SGW. For \"GGSN initiated PDP Context Modification\" with bearer QoS update, PGW-C provides updated QoS parameters to PGW-U. For \"GGSN Initiated PDP Context Deactivation Procedure, the PGW-C shall request PGW-U to remove the PDR for the affected bearers.\n7b.\tThe PGW-U sends an Sx Session Modification Response to the PGW-C confirming the update the Sx session.\nNOTE 4:\tStep 2a/2b happens before PGW-C sends request message to SGW-C, and step 7a/7b happens when PGW-C receives response message from SGW-C.\nNOTE 5:\tStep 3a/3b happens when SGW-C receives request message from PGW-C, and step 5a/5b happens when SGW-C receives response message from S4 SGSN.",
      "chunk_type": "procedure",
      "cross_references": [
        "figure_6.3.4.2.1-1",
        "figure_6.3.4.2.1-2",
        "figure_6.3.4.2.1-3"
      ]
    },
    {
      "chunk_id": "ts_23.214_6.3.4.2.2",
      "section_id": "6.3.4.2.2",
      "section_title": "Procedures with SGSN terminating Gn/Gp interface",
      "content": "This clause defines interactions between the CP and UP function during the following procedures related to the modification of a PDN connection.\nGroup 1 Procedures for Location Management, Handover, Service Request and Inter-System Change:\n-\tInter SGSN Routeing Area Update Procedure.\n-\tCombined RA / LA Update in the Case of Inter SGSN RA Update Procedure.\n-\tIu mode RA Update Procedure.\n-\tSRNS Relocation Procedure.\n-\tCombined Hard Handover and SRNS Relocation Procedure.\n-\tCombined Cell / URA Update and SRNS Relocation Procedure.\n-\tEnhanced Serving RNS Relocation.\n-\tMS Initiated Service Request Procedure.\n-\tNetwork Initiated Service Request Procedure.\n-\tIu mode to A/Gb mode Intra SGSN Change.\n-\tA/Gb mode to Iu mode Intra SGSN Change.\n-\tIu mode to A/Gb mode Inter-SGSN Change.\n-\tA/Gb mode to Iu mode Inter SGSN Change.\n-\tGPRS Paging Procedure (A/Gb mode).\nGroup 2 UE/SGSN initiated PDN connection modification:\n-\tSecondary PDP Context Activation Procedure for A/Gb mode.\n-\tSecondary PDP Context Activation Procedure for Iu mode.\n-\tSGSN-Initiated PDP Context Modification Procedure, A/Gb mode.\n-\tSGSN-Initiated PDP Context Modification Procedure, Iu mode.\n-\tMS-Initiated PDP Context Modification Procedure, A/Gb mode.\n-\tMS-Initiated PDP Context Modification Procedure, Iu mode.\n-\tMS Initiated PDP Context Deactivation Procedure for A/Gb mode (without Teardown Ind).\n-\tMS Initiated PDP Context Deactivation Procedure for Iu mode (without Teardown Ind).\n-\tSGSN-initiated PDP Context Deactivation Procedure (without Teardown Ind).\nGroup 3 PGW initiated PDN connection modification:\n-\tNetwork Requested Secondary PDP Context Activation Procedure using Gn\n-\tGGSN-Initiated PDP Context Modification Procedure for A/Gb mode\n-\tGGSN-Initiated PDP Context Modification Procedure for Iu mode\n-\tGGSN-initiated PDP Context Deactivation Procedure\nDuring the above procedures, following is the nature of interactions between the CP and UP function:\n-\tThe PGW-C informs the PGW-U to modify the Sx session.\nFigure 6.3.4.2.2-1: Interaction between CP and UP function with PDN connection modification, Group 1\n1.\tProcedure as listed in this step is initiated as specified in the relevant clauses of this specification. The relevant steps of the procedure as specified in the figure above are executed.\n2a.\tThe PGW-C may send an Sx Session Modification Request to the PGW-U to update the Sx session.\n2b.\tThe PGW-U sends an Sx Session Modification Response to the PGW-C confirming the update the Sx session.\n3.\tThe relevant steps of the procedure as specified in the figure above are executed.\nNOTE 1:\tStep 2a/2b happens when PGW-C receives request message from GnSGSN.\nFigure 6.3.4.2.2-2: Interaction between CP and UP function with PDN connection modification, Group 2\n1.\tProcedure as listed in this step is initiated as specified in the relevant clauses of this specification. The relevant steps of the procedure as specified in the figure above are executed.\n2a.\tThe PGW-C may send an Sx Session Modification Request to the PGW-U to update the Sx session. For \"Secondary PDP Context Activation Procedure\", PGW-C requests PGW-U to allocate F-TEID for the dedicated bearer. For \"MS- and SGSN- Initiated PDP Context Deactivation Procedure\", the PGW-C shall request PGW-U to remove the PDR for the affected bearers.\n2b.\tThe PGW-U sends an Sx Session Modification Response to the PGW-C confirming the update the Sx session.\n3.\tThe relevant steps of the procedure as specified in the figure above are executed.\n4a.\tThe PGW-C may send an Sx Session Modification Request to the PGW-U to update the Sx session.\n4b.\tThe PGW-U sends an Sx Session Modification Response to the PGW-C confirming the update the Sx session.\n5.\tThe relevant steps of the procedure as specified in the figure above are executed.\nNOTE 2:\tStep 2a/2b and step 4a/4b happen when PGW-C receives request message from GnSGSN.\nFigure 6.3.4.2.2-3: Interaction between CP and UP function with PDN connection modification, Group 3\n1.\tProcedure as listed in this step is initiated as specified in the relevant clauses of this specification. The relevant steps of the procedure as specified in the figure above are executed.\n2a.\tThe PGW-C may send an Sx Session Modification Request to the PGW-U to update the Sx session. For \"GGSN Initiated PDP Context Deactivation Procedure\", PGW-C shall request PGW-U to stop counting and stop forwarding packets for the affected bearers.\n2b.\tThe PGW-U sends an Sx Session Modification Response to the PGW-C confirming the update the Sx session.\n3.\tThe relevant steps of the procedure as specified in the figure above are executed.\n4a.\tThe PGW-C may send an Sx Session Modification Request to the PGW-U to update the Sx session. For \"Network Requested Secondary PDP Context Activation Procedure\", the PGW-C shall include the F-TEIDu of the activated bearer received from the GnSGSN. For \"GGSN Initiated PDP Context Deactivation Procedure, the PGW-C shall request PGW-U to remove the PDR for the affected bearers.\n4b.\tThe PGW-U sends an Sx Session Modification Response to the PGW-C confirming the update the Sx session.\n5.\tThe relevant steps of the procedure as specified in the figure above are executed.\nNOTE 3:\tStep 2a/2b happens when PGW-C sends request message to GnSGSN, and step 4a/4b happens when PGW-C receives response message from GnSGSN for GGSN initiated PDP Context Modification/Deactivation Procedure, or request message for Network Requested Secondary PDP Context Activation.",
      "chunk_type": "procedure",
      "cross_references": [
        "figure_6.3.4.2.2-1",
        "figure_6.3.4.2.2-2",
        "figure_6.3.4.2.2-3"
      ]
    },
    {
      "chunk_id": "ts_23.214_6.3.4.3",
      "section_id": "6.3.4.3",
      "section_title": "Procedures with PDN connection establishment",
      "content": "This clause defines interactions between the CP and UP function during the following procedures related to the establishment of a PDN connection:\n-\tIPv6 Stateless Address Autoconfiguration Procedure.\n-\tPDP Context Activation Procedure for A/Gb mode.\n-\tPDP Context Activation Procedure for Iu mode.\nDuring the procedures involving S4 listed above, following is the nature of interactions between the CP and UP function:\n-\tThe SGW-C informs the SGW-U to create the Sx session.\n-\tThe PGW-C informs the PGW-U to create the Sx session.\n-\tThe SGW-C informs the SGW-U to modify the Sx session.\n-\tThe PGW-C informs the PGW-U to modify the Sx session.\nFigure 6.3.4.3-1: Interaction between CP and UP function with PDN connection establishment\n1.\tProcedure as listed in this step is initiated as specified in the relevant clauses of this specification. The relevant steps of the procedure as specified in the figure above are executed. Steps in Figure 64a are specific for S4 SGSN.\nFor the case that Gn/Gp SGSN interconnects with PGW-C, steps 2a/2b or 5a/5b are skipped.\n2a.\tThe SGW-C sends an Sx Session Establishment Request to the SGW-U to create the Sx session.\n2b.\tThe SGW-U sends an Sx Session Modification Response to the SGW-C confirming the Sx session creation.\n3a.\tThe PGW-C sends an Sx Session Establishment Request to the PGW-U to create the Sx session.\n3b.\tThe PGW-U sends an Sx Session Establishment Response to the PGW-C confirming the Sx session creation.\n4.\tThe relevant steps of the procedure as specified in the figure above are executed. Steps in Figure 64b are specific for S4 SGSN.\n5a.\tThe SGW-C may send an Sx Session Modification Request to the SGW-U to update the Sx session.\n5b.\tThe SGW-U sends an Sx Session Modification Response to the SGW-C confirming the Sx session update.\n6a.\tThe PGW-C may send an Sx Session Modification Request to the PGW-U to update the Sx session.\n6b.\tThe PGW-U sends an Sx Session Modification Response to the PGW-C confirming the Sx session update.\n7.\tThe relevant steps of the procedure as specified in the figure above are executed.\nNOTE 1:\tFor the case that SGSN interconnects with SGW via S4 reference point, steps 2a/2b or 5a/5b happens when SGW-C receives request message from SGSN, and steps 3a/3b or 6a/6b happens when PGW-C receives request message from SGW.\nNOTE 2:\tFor the case that Gn/Gp SGSN interconnects with PGW-C, steps 3a/3b or 6a/6b happens when PGW-C receives request message from Gn/Gp SGSN.",
      "chunk_type": "procedure",
      "cross_references": [
        "figure_6.3.4.3-1",
        "figure_64"
      ]
    },
    {
      "chunk_id": "ts_23.214_6.4.1",
      "section_id": "6.4.1",
      "section_title": "General",
      "content": "The Sx reporting procedure is used by the UP function of SGW, PGW or TDF to report events to the CP function.\nThe following Sx reporting procedures exist: Sx session level reporting and Sx node level reporting. Both are initiated by the CP function.",
      "chunk_type": "definition",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.214_6.4.2",
      "section_id": "6.4.2",
      "section_title": "Sx Session Level Reporting Procedure",
      "content": "This procedure is used by the UP function to report events related to an Sx session for an individual PDN connection IP-CAN session, TDF session or TDF in unsolicited reporting mode. The triggers for event reporting were configured on the UP function during Sx session management procedures by the CP function (excluding the Sx session termination procedure).\nFigure 6.4.2-1: Sx Session Level Reporting procedure\n1.\tThe UP function detects that an event has to be reported. The reporting triggers involve the following cases:\n(1)\tUsage report (by SGW-U, PGW-U and TDF-U).\nUsage information shall be collected in the UP function and reported to the CP function as defined in clause 5.3 and clause 7.4.\n(2)\tStart of traffic detection (by PGW-U and TDF-U).\nWhen traffic detection is requested by PGW-C/TDF-C, and the start of traffic is detected for a PDR, the PGW-U/TDF-U shall report the start of traffic detection to the PGW-C/TDF-C and indicate the PDR rule ID.\n(3)\tStop of traffic detection (by PGW-U and TDF-U).\nWhen traffic detection is requested by PGW-C/TDF-C, and the end of traffic is detected for a PDR, the PGW-U/TDF-U shall report the stop of traffic detection to the PGW-C/TDF-C and indicate the PDR rule ID.\n(4)\tDetection of 1st Downlink Data for Idle-Mode UE (by SGW-U)\nWhen SGW-U receives the downlink packet but no S1-bearer for transmission and the buffering is performed by SGW-U, it shall report the detection of 1st downlink data to SGW-C, for the purpose of paging the UE. SGW-U shall also report the DSCP of the packet when instructed by SGW-C (e.g. in case the Paging Policy Differentiation function as described in TS 23.401 [2] is enabled at the SGW-C).\n2.\tThe UP function sends an Sx report message (Session ID, list of [Reporting trigger, Measurement information]) to the CP function.\nThe Reporting trigger parameter contains the name of the event which triggered the report and the Measurement information parameter contains the actual information the CP function requested to be informed about.\n3.\tThe CP function identifies the Sx session context based on the received Session ID and applies the reported information for the corresponding PDN connection IP-CAN session, TDF session or TDF in unsolicited reporting mode. The CP function responds with an Sx report ACK message.",
      "chunk_type": "procedure",
      "cross_references": [
        "clause_5.3",
        "clause_7.4",
        "figure_6.4.2-1",
        "ts_23.401"
      ]
    },
    {
      "chunk_id": "ts_23.214_6.5.1",
      "section_id": "6.5.1",
      "section_title": "General",
      "content": "Sx management procedures are used by the CP function to manage the UP function independent of any Sx session.\nNOTE:\tThe terminology defined in TS 29.244 [12] is used for the procedures and messages related to the Sx management procedures.\nEditor's note:\tMore procedures may be added after stage 3 finalize the work on Sx management procedures.",
      "chunk_type": "definition",
      "cross_references": [
        "ts_29.244"
      ]
    },
    {
      "chunk_id": "ts_23.214_6.5.2",
      "section_id": "6.5.2",
      "section_title": "Sx PFD management Procedure",
      "content": "The Sx PFD management procedure is used by the PGW-C or TDF-C to provision or remove all PFD(s) belonging to an Application ID in the UP function as described in clause 5.11.4. PFD sets belonging to different Application IDs can be managed with the same PFD management request message.\nThe Sx PFD management procedure is a node level procedure, i.e. independent of any Sx session.\nFigure 6.5.2-1: Sx PFD Management Procedure\n1.\tThe CP function is triggered to provision or remove the PFD set belonging to an Application ID as described in clause 5.11.4.\n2.\tThe CP function sends a PFD management request message to the UP function (containing the parameters described in clause 7.9.1) to provision/remove the PFD set corresponding to the Application ID.\n3.\tThe UP function acknowledges by responding with a PFD management response message.",
      "chunk_type": "procedure",
      "cross_references": [
        "clause_5.11.4",
        "clause_7.9.1",
        "figure_6.5.2-1"
      ]
    },
    {
      "chunk_id": "ts_23.214_6.5.3",
      "section_id": "6.5.3",
      "section_title": "Sx Association Setup Procedure",
      "content": "The Sx Association Setup procedure is used to setup an association between the CP function and the UP function which enables the CP function to subsequently interact with the UP function, e.g. to establish Sx Sessions.\nThe setup of an Sx association may be initiated by the CP function or the UP function as described in clause 6.2.6 of TS 29.244 [12]. The CP function and the UP function shall support the Sx association setup initiated by the CP function. The CP function and the UP function may additionally support the Sx association setup initiated by the UP function.\nThe CP function should only establish an Sx association with a UP function that supports F-TEID allocation at the UP function.",
      "chunk_type": "procedure",
      "cross_references": [
        "ts_29.244_clause_6.2.6",
        "ts_29.244"
      ]
    },
    {
      "chunk_id": "ts_23.214_6.5.4",
      "section_id": "6.5.4",
      "section_title": "Sx Association Update Procedure",
      "content": "The Sx Association Update procedure is used to modify an existing Sx association between the CP function and the UP function. It may be initiated by the UP function or by the CP function, as described in clause 6.2.7 of TS 29.244 [12].",
      "chunk_type": "procedure",
      "cross_references": [
        "ts_29.244_clause_6.2.7",
        "ts_29.244"
      ]
    },
    {
      "chunk_id": "ts_23.214_6.5.5",
      "section_id": "6.5.5",
      "section_title": "Sx Association Release Procedure",
      "content": "The Sx Association Release procedure is used to terminate the Sx association between the CP function and the UP function due to e.g. OAM reasons. The Sx Association Release procedure can be only initiated by the CP function, as described in clause 6.2.8 of TS 29.244 [12].",
      "chunk_type": "procedure",
      "cross_references": [
        "ts_29.244_clause_6.2.8",
        "ts_29.244"
      ]
    },
    {
      "chunk_id": "ts_23.214_7.1",
      "section_id": "7.1",
      "section_title": "Parameters for Sx session management",
      "content": "These parameters are used to control the functionality of the UP function related to an individual PDN connection, IP-CAN session, TDF session or TDF in unsolicited reporting mode as well as to inform about events occurring at the UP function. As the functionality of the respective UP functions differs, most parameters are specific to one or two of the reference points Sxa (between SGW-C and SGW-U), Sxb (PGW-C and PGW-U) and Sxc (TDF-C and TDF-U).\nThe Sx session management procedures however will use the relevant parameters in the same way for all Sx reference points: the Sx session establishment procedure as well as the Sx session modification procedure provide the control parameters to the UP function, the Sx session termination procedure removes all control parameters related to an Sx session and the Sx session level reporting procedure informs the CP function about events related to the Sx session that are detected by the UP function.\nThe parameters over Sx provided from CP function to UP function are grouped into session related parameters and four different rules, one \"detection\" rule and three different \"enforcement\" rules:\n-\tPacket Detection Rule (PDR), with information describing what packets should receive a certain treatment (e.g. forwarding and other types of enforcement).\n-\tForwarding Action Rule (FAR), contains information on whether forwarding, dropping or buffering is to be applied to a packet.\n-\tUsage Reporting Rule (URR), contains information that defines a certain measurement and how it shall be reported.\n-\tQoS Enforcement Rule (QER), contains information related to QoS enforcement of traffic.\nThe UP function provides parameters over Sx to the CP function sending a Usage Report.",
      "chunk_type": "parameter",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.214_7.2",
      "section_id": "7.2",
      "section_title": "Session context",
      "content": "The session context comprises the session related parameters and all PDRs, URRs, QERs and FARs with the same Session ID.\nThe following table describes the session related parameters provided over Sx.\nTable 7.2-1: Session related parameters\nAttribute\nDescription\nComment\nApplicability\nSGW\nPDN GW\nTDF\nSession ID\nUniquely identifies a session.\nThis session corresponds to a PDN connection for SGW, a PDN connection and an IP-CAN session for PGW, TDF session for TDF or a TDF in unsolicited reporting mode.\nX\nX\nX",
      "chunk_type": "general",
      "cross_references": [
        "table_7.2-1"
      ]
    },
    {
      "chunk_id": "ts_23.214_7.3",
      "section_id": "7.3",
      "section_title": "Packet Detection Rule",
      "content": "The following table describes the Packet Detection Rule (PDR) containing information required to classify a packet arriving at the UP function. There is at least one PDR per direction, e.g. UL direction or DL direction.\nTable 7.3-1: Attributes within Packet Detection Rule\nAttribute\nDescription\nComment\nApplicability\nSGW\nPDN GW\nTDF\nSession ID\nIdentifies the session associated to this PDR\nX\nX\nX\nRule ID\nUnique identifier to identify this information.\nX\nX\nX\nPrecedence\nDetermines the order, in which the detection information of all rules is applied\nX\nX\nPacket detection information\nSource interface\nContains the values \"access side\", \"core side\", \"CP function\" or \"SGi-LAN\".\nIdentifies whether the rule applies to incoming packets from the access side (i.e. up-link), the core side (i.e. down-link), the CP function (the packet from CP function) or the SGi-LAN side (the packet has experienced SGi-LAN Service Functions).\nX\nX\nX\nUE IP address\nOne IPv4 address and/or one IPv6 prefix with prefix length\nCombination of UE IP address (together with Network instance, if necessary), F-TEID, SDF filters, application ID for traffic detection:\nSGW UL: Local F-TEID\nSGW DL: Local F-TEID\nPGW UL: Local F-TEID + UE IP address + SDF/applicat.ID\nPGW DL: UE IP address + SDF/application ID\nTDF UL (solicited mode): UE IP address + SDF/application ID\nTDF DL (solicited mode): UE IP address + SDF/application ID\nTDF UL/DL (unsolicited mode): application ID\nX\nX\nNetwork instance\nIdentifies the Network instance associated with the incoming packet. (NOTE 1).\nX\nX\nX\nLocal F-TEID\nX\nX\nList of SDF Filter(s)\nX\nX\nApplication ID\nX\nX\nOuter header removal\nInstructs the UP function to remove one or more outer header(s) (e.g. IP+UDP+GTP) from the incoming packet.\nAny extension header shall be stored for this packet.\nX\nX\nForwarding Action Rule ID\nThe Forwarding Action Rule ID identifies a forwarding action that has to be applied.\nX\nX\nX\nList of Usage Reporting Rule ID(s)\nEvery Usage Reporting Rule ID identifies a measurement action that has to be applied.\nX\nX\nX\nList of QoS Enforcement Rule ID(s)\nEvery QoS Enforcement Rule ID identifies a QoS enforcement action that has to be applied.\nX\nX\nX\nNOTE 1:\tThe Network instance is needed e.g. in the following cases:\n-\tPGW/TDF-U supports multiple APN with overlapping IP addresses;\n-\tPGW-U is connected to SGWs in different IP domains;\n-\tSGW-U is connected to PGWs in different IP domains;\n-\tSGW-U is connected to eNodeBs in different IP domains.",
      "chunk_type": "general",
      "cross_references": [
        "table_7.3-1"
      ]
    },
    {
      "chunk_id": "ts_23.214_7.4",
      "section_id": "7.4",
      "section_title": "Usage Reporting Rule",
      "content": "The following table describes the Usage Reporting Rule (URR) that defines how a packet shall be accounted as well as when and how to report the measurements.\nTable 7.4-1: Attributes within Usage Reporting Rule\nAttribute\nDescription\nComment\nApplicability\nSGW\nPDN GW\nTDF\nSession ID\nIdentifies the session associated to this URR\nX\nX\nX\nRule ID\nUnique identifier to identify this information.\nX\nX\nX\nReporting triggers\nOne or multiple of the events can be activated for the generation and reporting of the usage report.\nApplicable events include:\nStart/stop of traffic detection with/without application instance identifier and deduced SDF filter reporting; Deletion of last PDR for a URR; Periodic measurement threshold reached; Volume/Time/Event measurement threshold reached; Immediate report requested; Measurement of incoming UL traffic; Measurement of discarded DL traffic.\nX\nX\nX\nPeriodic measurement threshold\nDefines the point in time for sending a periodic report for this URR key (e.g. timeofday)\nThis allows generation of periodic usage report for e.g. offline charging.\nIt can also be used for realizing the Monitoring time of the usage monitoring feature.\nIt can also be used for realizing the Quota-Idle-Timeout, i.e. to enable the CP function to check whether any traffic has passed during this time.\nX\nX\nX\nVolume measurement threshold\nValue in terms of uplink and/or downlink and/or total byte-count when the measurement report is to be generated.\nX\nX\nX\nTime measurement threshold\nValue in terms of the time duration (e.g. in seconds) when the measurement report is to be generated.\nX\nX\nX\nEvent measurement threshold\nNumber of events (identified according to a locally configured policy) after which the measurement report is to be generated.\nX\nX\nInactivity detection time\nDefines the period of time after which the time measurement shall stop, if no packets are received.\nTimer corresponding to this duration is restarted at the end of each transmitted packet.\nX\nX\nEvent based reporting\nPoints to a locally configured policy which is identifies event(s) trigger for generating usage report.\nX\nX\nLinked URR ID\nPoints to one or more other URR ID.\nThis enables the generation of a combined Usage Report for this and other URRs by triggering their reporting. See clause 5.2.2.4, TS 29.244 [12].\nX\nX\nMeasurement method\nIndicates the method for measuring the network resources usage, i.e. the data volume, duration, combined volume/duration, or event.\nX\nX\nX\nMeasurement information\nIndicates specific conditions to be applied for measurements.\nIt is used to request:\n-\tmeasurement before QoS enforcement, and/or\n-\tto pause or set to active a measurement as for the Pause of charging, and/or\n-\tto request reduced reporting for application start/stop events.\nX\nX\nX",
      "chunk_type": "requirement",
      "cross_references": [
        "ts_29.244_clause_5.2.2.4",
        "table_7.4-1",
        "ts_29.244"
      ]
    },
    {
      "chunk_id": "ts_23.214_7.5",
      "section_id": "7.5",
      "section_title": "Forwarding Action Rule",
      "content": "The following table describes the Forwarding Action Rule (FAR) that defines how a packet shall be forwarded, including packet encapsulation/decapsulation and forwarding destination.\nTable 7.5-1: Attributes within Forwarding Action Rule\nAttribute\nDescription\nComment\nApplicability\nSGW\nPDN GW\nTDF\nSession ID\nIdentifies the session associated to this FAR\nX\nX\nX\nRule ID\nUnique identifier to identify this information.\nX\nX\nX\nNetwork instance\nIdentifies the Network instance associated with the outgoing packet. (NOTE 1).\nX\nX\nX\nDestination interface\nContains the values \"access side\", \"core side\", \"CP function\", or \"SGi-LAN\".\nIdentifies the interface for outgoing packets towards the access side (i.e. down-link), the core side (i.e. up-link), the CP function side (i.e. towards CP function) or the SGi-LAN side (i.e. towards SGi-LAN).\nX\nX\nX\nOuter header creation\nInstructs the UP function to add an outer header (IP+UDP+GTP) to the outgoing packet\nContains the F-TEIDu of peer entity (e.g. eNB, SGW, PGW, CP function).\nAny extension header stored for this packet shall be added.\nX\nX\nSend end marker packet(s)\nInstructs the UP function to construct end marker packet(s) and send them out as described in clause 5.8.1.\nThis parameter should be sent together with the \"out header creation\" parameter of the new F-TEID-u.\nX\nX\nTransport level marking\nTransport level packet marking in the uplink and downlink, e.g. setting the DiffServ Code Point.\nX\nX\nForwarding policy\nReference to a preconfigured traffic forwarding treatment for FMSS or http redirection (NOTE 2)\nContains TSP ID or Redirect Destination and values for the forwarding behaviour (always, after measurement report (for termination action \"redirect\"))\nX\nX\nContainer for header enrichment\nContains information to be used by the UP function for header enrichment\nOnly relevant for the uplink direction\nX\nX\nBuffer Control Information\nInstructs the UP function on how to perform buffering\nSee clause 5.2.4 in TS 29.244 [12].\nX\nDelay Downlink Packet Notification Information\nD parameter\nSee clause 5.9.3\nX\nExtended buffering Information\nDL Data Buffer Expiration Time\nSee clause 5.9.3\nX\nDL Suggested Packet Count\nSee clause 5.9.3\nNOTE 1:\tNeeded e.g. in case:\n-\tPGW/TDF-U supports multiple APN with overlapping IP addresses;\n-\tPGW-U is connected to SGWs in different IP domains;\n-\tSGW-U is connected to PGWs in different IP domains;\n-\tSGW UP-U is connected to eNodeBs in different IP domains.\nNOTE 2:\tThe TSP ID action is enforced before the Outer header creation actions.",
      "chunk_type": "requirement",
      "cross_references": [
        "clause_5.8.1",
        "ts_29.244_clause_5.2.4",
        "clause_5.9.3",
        "table_7.5-1",
        "ts_29.244"
      ]
    },
    {
      "chunk_id": "ts_23.214_7.6",
      "section_id": "7.6",
      "section_title": "QoS Enforcement Rule",
      "content": "The following table describes the QoS Enforcement Rule (QER) that defines how a packet shall be treated in terms of bit rate limitation and packet marking for QoS purposes. All Packet Detection Rules that refer to the same QER share the same QoS resources, e.g. MBR.\nTable 7.6-1: Attributes within QoS Enforcement Rule\nAttribute\nDescription\nComment\nApplicability\nSGW\nPDN GW\nTDF\nSession ID\nIdentifies the session associated to this QER\nX\nX\nX\nRule ID\nUnique identifier to identify this information.\nX\nX\nX\nQoS Enforcement Rule correlation ID\nAn identity allowing the UP function to correlate multiple Sessions for the same UE and APN.\nIs used to correlate QoS Enforcement Rules for APN-AMBR enforcement\nX\nGate status UL/DL\nInstructs the UP function to let the flow pass or to block the flow\nValues are: open, close, close after measurement report (for termination action \"discard\")\nX\nX\nMaximum bitrate\nThe uplink/downlink maximum bitrate to be enforced for the packets.\nThis field may e.g. contain any one of:\n- APN-AMBR (for a QER that is referenced by all relevant Packet Detection Rules of all PDN Connections to an APN)\n- TDF session MBR (for a QER that is referenced by all Packet Detection Rules of a TDF Session)- bearer MBR (for a QER that is referenced by all Packet Detection Rules of a bearer)\n- SDF MBR (for a QER that is referenced by the uplink/downlink Packet Detection Rule of a SDF)\nX\nX\nGuaranteed bitrate\nThe uplink/downlink guaranteed bitrate authorized for the packets.\nThis field contains:\n- bearer GBR (for a QER that is referenced by all Packet Detection Rules of a bearer)\nX\nX\nDown-link flow level marking\nFlow level packet marking in the downlink.\nFor PGW, this is for controlling the SCI marking in the GTP extension header (for service indication towards GERAN as described in TS 23.060 [5]).\nFor TDF, this is for controlling the DSCP marking for application indication.\nX\nX\nPacket rate\nNumber of packets per time interval to be enforced.\nThis field contains any one of:\n- downlink packet rate for Serving PLMN Rate Control (the QER is referenced by all PDRs of the UE belonging to PDN connections using CIoT EPS Optimizations as described in TS 23.401 [2])\n- uplink/downlink packet rate for APN Rate Control (the QER is referenced by all PDRs of the UE belonging to PDN connections to the same APN using CIoT EPS Optimizations as described in TS 23.401 [2]).\nX",
      "chunk_type": "requirement",
      "cross_references": [
        "table_7.6-1",
        "ts_23.060",
        "ts_23.401"
      ]
    },
    {
      "chunk_id": "ts_23.214_7.7",
      "section_id": "7.7",
      "section_title": "Usage Report generated by UP function",
      "content": "The UP function sends the usage report to inform the CP function about the measurement of an active URR or about the detection of application traffic of an active Packet Detection Rule. For each URR, the usage report may be generated repeatedly, i.e. as long as any one of the valid event triggers applies. A final usage report is sent for a URR when it is no longer active, i.e. either the URR is removed or all the references to this URR in any of the Packet Detection Rules belonging to the Sx session.\nFollowing attributes can be included in the usage report:\nTable 7.7-1: Attributes within Usage Report\nAttribute\nDescription\nComment\nApplicability\nSGW\nPDN GW\nTDF\nSession ID\nUniquely identifies a session.\nThis corresponds to a PDN connection for SGW and PGW or a TDF session for TDF\nX\nX\nX\nRule ID\nUniquely identifies the Packet Detection Rule or Usage Reporting Rule within a session which triggered the report\nPacket Detection Rule is only indicated when Reporting trigger is Detection of 1st DL packet on bearer (SGW) or Start/stop of traffic detection (PGW/TDF).\nUsage Reporting Rule is indicated for all other Reporting triggers.\nX\nX\nX\nReporting trigger\nIdentifies the trigger for the usage report.\nApplicable values are:\nDetection of 1st DL packet on bearer (only for SGW); Start/stop of traffic detection with/without application instance identifier and deduced SDF filter reporting (only for PGW and TDF); Deletion of last PDR for a URR; Periodic measurement threshold reached; Volume/Time/Event measurement threshold reached; Immediate report requested; Measurement of incoming UL traffic (only for PGW); Measurement of discarded DL traffic (only for SGW).\nX\nX\nX\nStart time\nProvides the timestamp, in terms of absolute time, when the collection of the information provided within Usage-Information is started.\nNot sent when Reporting trigger is Start/stop of traffic detection\nX\nX\nX\nEnd time\nProvides the timestamp, in terms of absolute time, when the information provided within Usage-Information is generated.\nNot sent when Reporting trigger is Start/stop of traffic detection\nX\nX\nX\nMeasurement information\nDefines the measured volume/time/events for this URR.\nContains DSCP of received packet when Reporting trigger is Detection of 1st DL packet on bearer (as described in TS 23.401 [2])\nContains application instance identifier and deduced SDF filter when Reporting trigger is Start/stop of traffic detection with application instance identifier and deduced SDF filter reporting (including deduced UE IP address for TDF in unsolicited mode)\nNot sent when Reporting trigger is Start/stop of traffic detection without application instance identifier and deduced SDF filter reporting\nX\nX\nX",
      "chunk_type": "general",
      "cross_references": [
        "table_7.7-1",
        "ts_23.401"
      ]
    },
    {
      "chunk_id": "ts_23.214_7.8.1",
      "section_id": "7.8.1",
      "section_title": "General",
      "content": "This clause describes how the CP function provides information over Sx to realize forwarding, reporting etc on different aggregation levels.",
      "chunk_type": "definition",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.214_7.8.2",
      "section_id": "7.8.2",
      "section_title": "PDN connection and TDF session level context",
      "content": "The PDN connection or TDF session level context is realized over Sx by generating a Usage Reporting Rule and a QoS Enforcement Rule.\nTo apply PDN Connection or TDF session level reporting and MBR enforcement, the CP function provides over Sx:\n-\tA URR that describes the reporting requirement for the PDN Connection or TDF session.\n-\tA QER that describes the QoS enforcement actions that apply, i.e. a QER with APN-AMBR value (in case of PGW) or a QER with TDF session MBR (in case of TDF).\nFor session level reporting, the CP function includes references to the URR (i.e. URR Rule ID) in each Packet Detection Rule activated for the PDN Connection or TDF session. In case of PDN Connection or TDF session level usage monitoring where some SDF(s) are excluded, the CP function only includes a reference to the URR in those Packet Detection Rules that shall be included in the report.\nFor APN-AMBR policing, the CP function includes references (Rule ID) to the QER containing the APN-AMBR value in each Packet Detection Rule for non GBR traffic activated for the PDN Connection. The CP function shall apply the same QER for all Packet Detection Rules for non GBR traffic associated with any of the active PDN Connections of the same APN.\nFor TDF session MBR policing, the CP function includes references (Rule ID) to the QER containing the TDF session MBR value in each Packet Detection Rule activated for the TDF session.",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.214_7.8.3",
      "section_id": "7.8.3",
      "section_title": "Bearer related context",
      "content": "The bearer context is realized over Sx by generating one or two Forwarding Action Rules, a Usage Reporting Rule and a QoS Enforcement Rule that correspond to the bearer. In particular, the CP function may provide to the UP function for each active bearer:\n-\tA Usage Reporting Rule that describes the reporting requirement for the bearer, including reporting events, measurement type etc for the bearer reports.\n-\tA QoS Enforcement Rule that describe the QoS enforcement actions that apply to the bearer, including the bearer MBR.\n-\tForwarding Action Rules describe the forwarding behaviour for the bearer. One Forwarding Action Rule is required for the downlink direction (in case of PGW or SGW) and one for the uplink direction (in case of SGW).\nNOTE:\tThe CP function maintains the association between the EPS Bearer ID and the rules on Sx corresponding to bearer level enforcement and reports. There is no need to provide a Bearer ID to the UP function.\nThe CP function associates, based on the bearer binding decisions, every Packet Detection Rule that is activated for a bearer with the URR, QER and FARs applicable for the this bearer by including references (Rule IDs) in the PDR:\n-\tFor bearer level reporting, the CP function includes a reference (Rule ID) to the URR for the bearer.\n-\tFor bearer level policing, the CP function includes a reference (Rule ID) to the QER for the bearer.\n-\tFor forwarding of packets over a bearer (GTP-U encapsulation), the CP function includes a reference (Rule ID) to the FAR the bearer. This is done per direction (UL and DL).",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.214_7.8.4",
      "section_id": "7.8.4",
      "section_title": "Measurement key related context",
      "content": "The CP function provides a Usage Reporting Rule for each usage report that needs to be provided by the UP function. The CP function maintains a mapping between the Charging Key and/or Monitoring Key applicable for a SDF and the Measurement Key of the URR provided over Sx. For example, the CP function may provide one URR for each Charging Key and one URR for each Monitoring Key or may decide to provide a single URR for a Charging Key and a Monitoring Key in case there is complete overlap in the measurement requirements. Other mappings are also possible as determined by the CP function and is not limited by the standard as long as the reporting requirements from the CP function towards the OFCS/OCS and PCRF are fulfilled.\nTo associate traffic covered by a Packet Detection Rule with one or more measurement keys on Sx, the CP function includes in the Packet Detection Rule a reference to each URR (Rule ID) that is applicable for the traffic covered by the PDR.",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.214_7.9.1",
      "section_id": "7.9.1",
      "section_title": "Parameters for PFD management",
      "content": "The PGW-C/TDF-C can manage PFD sets in the applicable PGW-U/TDF-U independent of the Sx session. The management (provision or remove) of multiple PFD sets belonging to different Application IDs can be done with the same PFD management request message.\nTable 7.9-1: Attributes within PFD management request message\nAttribute\nDescription\nComment\nApplicability\nSGW\nPDN GW\nTDF\nPFD(s)\nExtension to the application detection filter\nThe provisioning of PFD(s) for an Application ID results in the removal of all PFD(s) stored in the PGW-U/TDF-U for this Application ID and the usage of all newly provided PFD(s) for this Application ID\nX\nX\nApplication ID\nApplication identifier which the PFD(s) is associated with\nThe provisioning of an Application ID without PFD(s) results in the removal of all stored PFD(s) corresponding to this Application ID\nX\nX\nAnnex A (informative):Change history\nChange history\nDate\nMeeting\nTDoc\nCR\nRev\nCat\nSubject/Comment\nNew version\n2016-09\nSP-73\nSP-160665\n-\n-\n-\nMCC Editorial update for presentation to TSG SA#73 for information and approval\n1.0.0\n2016-09\nSP-73\n-\n-\n-\n-\nMCC Editorial update for publication after TSG SA#73 approval\n14.0.0\n2016-12\nSP-74\nSP-160815\n0002\n2\nF\nCorrections to User Plane selection function\n14.1.0\n2016-12\nSP-74\nSP-160815\n0003\n5\nF\nCorrections to buffering in the user plane\n14.1.0\n2016-12\nSP-74\nSP-160815\n0004\n8\nF\nSx parameter corrections\n14.1.0\n2016-12\nSP-74\nSP-160815\n0005\n4\nB\nSDCI support\n14.1.0\n2016-12\nSP-74\nSP-160815\n0006\n3\nF\nUpdate to PCC/ADC related functions\n14.1.0\n2016-12\nSP-74\nSP-160815\n0007\n2\nF\nUpdate to UP Selection Section\n14.1.0\n2016-12\nSP-74\nSP-160815\n0008\n2\nF\nText updates for TS 23.401 call flows\n14.1.0\n2016-12\nSP-74\nSP-160815\n0009\n2\nF\nText updates for TS 23.402 call flows\n14.1.0\n2016-12\nSP-74\nSP-160815\n0010\n2\nB\nBuffering and F-TEIDu Allocation\n14.1.0\n2016-12\nSP-74\nSP-160815\n0012\n3\nF\nSupport of PGW Pause of Charging\n14.1.0\n2016-12\nSP-74\nSP-160815\n0013\n3\nF\nSx Session Level Reporting Procedure update\n14.1.0\n2016-12\nSP-74\nSP-160815\n0014\n3\nF\nTDF-U selection in case of unsolicited reporting\n14.1.0\n2016-12\nSP-74\nSP-160815\n0017\n4\nF\nCorrections of Sx parameters\n14.1.0\n2016-12\nSP-74\nSP-160815\n0019\n-\nF\nParameter alignment and corrections for traffic detection clause\n14.1.0\n2016-12\nSP-74\nSP-160815\n0020\n2\nF\nParameter alignment and corrections for forwarding section\n14.1.0\n2016-12\nSP-74\nSP-160815\n0021\n2\nF\nAlignment of function split clause\n14.1.0\n2016-12\nSP-74\nSP-160815\n0022\n3\nF\nClarification on the SGW-C partitions for a given UE\n14.1.0\n2017-03\nSP-75\nSP-170046\n0026\n2\nF\nCorrection to enforcement of dynamic PCC/ADC rule\n14.2.0\n2017-03\nSP-75\nSP-170046\n0027\n2\nF\nCorrections to Sx parameters\n14.2.0\n2017-03\nSP-75\nSP-170046\n0028\n4\nF\nSession management procedure for TDF in unsolicited mode\n14.2.0\n2017-03\nSP-75\nSP-170052\n0029\n1\nC\nTS 23.214 support for transport level packet marking\n14.2.0\n2017-03\nSP-75\nSP-170046\n0032\n1\nF\nUpdates Procedures in TS 23.060.\n14.2.0\n2017-06\nSP-76\nSP-170366\n0033\n1\nF\nClean up and stage 3 alignment\n14.3.0\n2017-06\nSP-76\nSP-170366\n0034\n2\nF\nCorrections and clean up for 23.401 related message flows\n14.3.0\n2017-06\nSP-76\nSP-170366\n0035\n1\nF\nAddition of Sx node level procedures\n14.3.0\n2017-06\nSP-76\nSP-170366\n0036\n-\nF\nClarification on pre-defined PCC rules\n14.3.0\n2017-06\nSP-76\nSP-170366\n0038\n-\nF\nCorrections and clean up for 23.203 related message flows\n14.3.0\n2017-06\nSP-76\nSP-170366\n0039\n1\nF\nCorrections and clean up for 23.060 related message flows\n14.3.0\n2017-06\nSP-76\nSP-170366\n0040\n-\nF\nCorrections and clean up for 23.402 related message flows\n14.3.0\n2017-09\nSP-77\nSP-170717\n0041\n2\nF\nSx PDN Instance\n14.4.0\n2017-09\nSP-77\nSP-170717\n0042\n2\nF\nUpdate on activation of predefined PCC/ADC rules\n14.4.0\n2017-09\nSP-77\nSP-170717\n0043\n-\nF\nDescription on Sx-u tunnel\n14.4.0\n2017-09\nSP-77\nSP-170717\n0044\n1\nF\nCorrections on PFD management\n14.4.0\n2017-09\nSP-77\nSP-170717\n0045\n-\nF\nCorrelation of Sx Session and UE Context\n14.4.0\n2017-09\nSP-77\nSP-170717\n0046\n2\nF\nUpdate of the Procedures Specified in TS 23.401.\n14.4.0\n2017-09\nSP-77\nSP-170717\n0048\n3\nF\nClarification of Procedures Specified in TS 23.060.\n14.4.0\n2017-09\nSP-77\nSP-170728\n0047\n2\nB\nEnable SGW-C & PGW-C selection of UPF to take UE's NR capabilities into account\n15.0.0\n2017-12\nSP-78\nSP-170913\n0050\n1\nA\nInterface between MME and SGW-U for IoT data transmission\n15.1.0\n2017-12\nSP-78\nSP-170913\n0052\n2\nA\nRemoval of PMIP-based procedures specified\n15.1.0\n2017-12\nSP-78\nSP-170920\n0055\n1\nF\nCorrecting the condition for selection of SGW-U for NR as secondary RAT\n15.1.0\n2017-12\nSP-78\nSP-170940\n0057\n2\nA\nUpdate of the Procedures Specified in TS 23.060.\n15.1.0\n2018-03\nSP-79\nSP-180086\n0060\n1\nA\nUpdate of the Procedures Specified in TS 23.060.\n15.2.0\n2018-03\nSP-79\nSP-180086\n0062\n-\nA\nUpdate to Procedures Specified in TS 23.401\n15.2.0\n2018-03\nSP-79\nSP-180086\n0064\n1\nA\nCorrection of SDF Filter Description in PDR Table\n15.2.0\n2018-06\nSP-80\nSP-180472\n0066\n1\nA\nUpdate of Sx parameter tables\n15.3.0\n2018-09\nSP-81\nSP-180711\n0068\n2\nA\nApplication detection report when the PFDs are removed\n15.4.0\n2018-12\nSP-82\nSP-181081\n0070\n1\nA\nAddition of reference to SA WG5 OAM specification\n15.5.0\n2019-06\nSP-84\nSP-190406\n0071\n1\nF\nCorrections for the activation of usage reporting in the UP function\n16.0.0\n2019-06\nSP-84\nSP-190406\n0072\n-\nF\nClarifications for 23.401 procedures\n16.0.0\n2020-07\nSP-88E\nSP-200429\n0073\n-\nF\nClarification on the F-TEIDu allocation and release\n16.1.0\n2020-07\nSP-88E\nSP-200429\n0074\n1\nF\nClarification of TEID allocation by gateway user plane\n16.1.0\n2020-09\nSP-89E\nSP-200686\n0075\n1\nF\nCorrections to CUPS Session/Bearer deactivation procedures\n16.2.0\n2021-06\nSP-92E\nSP-210346\n0076\n1\nB\nSupport for L2TP on SGi\n17.0.0\n2024-03\n-\n-\n-\n-\n-\nUpdate to Rel-18 version (MCC)\n18.0.0",
      "chunk_type": "parameter",
      "cross_references": [
        "clause_14.1.0",
        "table_7.9-1",
        "table_15.2.0",
        "ts_23.401",
        "ts_23.402",
        "ts_23.214",
        "ts_23.060"
      ]
    }
  ]
}