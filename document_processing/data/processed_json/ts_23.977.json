{
  "metadata": {
    "specification_id": "ts_23.977",
    "version": "Unknown",
    "title": "3GPP TS 23.977",
    "file_path": "/content/drive/MyDrive/RAG_thesis/data/23_series/23977-i00/23977-i00.docx"
  },
  "export_info": {
    "export_date": "2025-07-26T09:21:17.354401",
    "total_chunks": 47
  },
  "chunks": [
    {
      "chunk_id": "ts_23.977_1",
      "section_id": "1",
      "section_title": "Scope",
      "content": "The objective of this technical report is to identify the full set of requirements for bandwidth and resource savings and improved speech quality, with specific consideration to networks supporting A/Gb mode and the bearer independent circuit-switched core network (BICN). The different architectural solutions to meet these requirements will be assessed.\nConsideration shall be made to existing architectures and solutions to provide harmony between 2G nodes, UMTS nodes and external networks (PSTN/ISDN). Backward compatibility to existing solutions and ease of network introduction/upgrade shall be given high importance.",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.977_2",
      "section_id": "2",
      "section_title": "References",
      "content": "The following documents contain provisions which, through reference in this text, constitute provisions of the present document.\n-\tReferences are either specific (identified by date of publication, edition number, version number, etc.) or non‑specific.\n-\tFor a specific reference, subsequent revisions do not apply.\n-\tFor a non-specific reference, the latest version applies. In the case of a reference to a 3GPP document (including a GSM document), a non-specific reference implicitly refers to the latest version of that document in the same Release as the present document.\n[1]\t3GPP TS 23.002: \"Network architecture\".\n[2]\t3GPP TS 23.153: \"Out of band transcoder control; Stage 2\".\n[3]\t3GPP TS 23.053: \"Tandem Free Operation (TFO); Service description; Stage 2\".\n[4]\t3GPP TS 28.062: \"Inband Tandem Free Operation (TFO) of speech codecs; Service description; Stage 3\".\n[5]\t3GPP TS 26.103: \"Speech codec list for GSM and UMTS\".\n[6]\t3GPP TR 26.975: \"Performance Characterization of the AMR Speech Codec\".\n[7]\t3GPP TR 26.976: \"Performance characterization of the Adaptive Multi-Rate Wideband (AMR-WB) speech codec\".\n[8]\t3GPP TS 26.102: \"Mandatory speech codec; Adaptive Multi-Rate (AMR) speech codec; Interface to Iu, Uu and Nb\".\n[9]\tVoid.\n[10]\t3GPP TS 48.060: \"In-band control of remote transcoders and rate adaptors for full rate traffic channels\".\n[11]\t3GPP TS 48.061: \"In band control of remote transcoders and rate adaptors for half rate traffic channels\".\n[12]\t3GPP TS 52.021: \"Network Management (NM) procedures and messages on the A-bis interface\".\n[13]\t3GPP TS 29.163: \"Interworking between the IP Multimedia (IM) Core Network (CN) subsystem and Circuit Switched (CS) networks\".\n[14]\tITU-T Recommendation Q.1912.5: \"BICC SIP Interworking\".\n[15]\t3GPP TR 21.905: \"Vocabulary for 3GPP Specifications\".\n[16]\t3GPP TS 29.007: \"General requirements on interworking between the Public Land Mobile Network (PLMN) and the Integrated Services Digital Network (ISDN) or Public Switched Telephone Network (PSTN)\".\n[17]\t3GPP TS 48.008: \"Mobile Switching Centre - Base Station System (MSC-BSS) interface; Layer 3 specification\".\n[18]\t3GPP TS 26.101: \"Mandatory speech codec speech processing functions; Adaptive Multi-Rate (AMR) speech codec frame structure\".",
      "chunk_type": "general",
      "cross_references": [
        "ts_23.002",
        "ts_23.153",
        "ts_23.053",
        "ts_28.062",
        "ts_26.103",
        "ts_26.975",
        "ts_26.976",
        "ts_26.102",
        "ts_48.060",
        "ts_48.061",
        "ts_52.021",
        "ts_29.163",
        "ts_21.905",
        "ts_29.007",
        "ts_48.008",
        "ts_26.101"
      ]
    },
    {
      "chunk_id": "ts_23.977_3.1",
      "section_id": "3.1",
      "section_title": "Definitions",
      "content": "For the purposes of the present document, the definitions in TR 21.905 [15] apply as well as the following terms and definitions.\nBearer Independent Core Network : This term refers to a core network (CN) comprised of MSC Server, CS-MGW and GMSC Server nodes to support MSC and GMSC functionality, as defined in TS 23.002 [1].\nCodec Configuration : The Codec Configuration of a codes type ,like AMR, includes mainly the Active Codec Set, the setting of the OM flag and DTX parameters, etc.\nMIPS: Mega (Million) Instructions Per Second. This is a measure for the required DSP capacity. It is here in this context related to the \"ETSI-DSP\" as defined in 3GPP SA4 for the complexity characterisation of the 3GPP Speech Codec algorithms.",
      "chunk_type": "definition",
      "cross_references": [
        "ts_21.905",
        "ts_23.002"
      ]
    },
    {
      "chunk_id": "ts_23.977_3.2",
      "section_id": "3.2",
      "section_title": "Symbols",
      "content": "For the purposes of the present document, the following symbols apply:\nAter\tthe reference point internal to the BSC functional entity, between the transcoders and the rest of the BSC functions.\nAbis\tinterface between the BTS and the BSC",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.977_3.3",
      "section_id": "3.3",
      "section_title": "Abbreviations",
      "content": "For the purposes of the present document, the abbreviations in TR 21.905 [15] apply as well as the following abbreviations:\nBICN\tBearer Independent Core Network\nBICC\tBearer Independent Call Control\nDSP\tDigital Signal Processor\nDC\tDecoding\nMSC-S\tMSC Server\nOoBTC\tOut of Band Transcoder Control\nPT\tTFO Protocol Termination\nR\tReframing\nTC\tTranscoding\nUP\tUser Plane Termination",
      "chunk_type": "general",
      "cross_references": [
        "ts_21.905"
      ]
    },
    {
      "chunk_id": "ts_23.977_4.1",
      "section_id": "4.1",
      "section_title": "GSM network architecture before Release 4",
      "content": "Figure 4.1-1: GSM Network Architecture before release 4\nIn GSM networks according to releases before release 4 the MSCs are interconnected on the user plane by TDM links (real or virtual) with 64 kb/s for speech traffic. The only speech codec type known between MSCs is G.711 'PCM'. There are typically several Points-of-Interconnect to the underlying PSTN, with 64kb/s for the speech traffic in PCM.The MSCs control and interconnect the BSCs via the A-Interface (user plane and control plane), but they have no direct influence on the Codec Type selected by the BSC on the GSM radio access. The MSC can make a suggestion on the Codec Type, but the BSC decides finally. The MSCs have no means at all to signal the Codec Configuration to the BSCs or between MSCs. This is a drawback.\nThe transcoders belong logically to the GSM_BSS. Speech is transported on the Ater interface in compressed form using the same codec type and configuration as on the radio interface.\nTandem Free Operation (TFO) is defined on PCM links for all GSM Codec Types. TFO allows by inband signalling to 'tunnel' the compressed speech through the TDM core network. TFO provides the possibility to bypass and omit the encoding functions, saves DSP resources, improves the speech quality in mobile-mobile calls, allows new speech services like wideband speech, but does not provide transmission cost saving.",
      "chunk_type": "general",
      "cross_references": [
        "figure_4.1-1"
      ]
    },
    {
      "chunk_id": "ts_23.977_4.2",
      "section_id": "4.2",
      "section_title": "UMTS network architecture in Release 99",
      "content": "Figure 4.2-1: UMTS network architecture in Release 99\nIn UMTS networks according to release 99 the MSCs are interconnected on the user plane by TDM links (real or virtual) with 64 kb/s for speech traffic. The only speech codec type known between MSCs is G.711 'PCM'. There are typically several Points-of-Interconnect to the underlying PSTN, with 64kb/s for the speech traffic in PCM.\nThe MSCs control and interconnect the RNCs via the Iu-Interface (user plane and control plane).\nThe MSC selects and commands the Codec Type on the UTRAN radio access and makes a suggestion on the Codec Configuration, but the RNC can select a sub-configuration.\nThe Transcoders are located on central places physically and logically 'inside' the mobile core network as integral parts of the MSCs. They are controlled by the MSCs via internal interfaces. But also the RNC controls the transcoder via the Iu interface (Iu_Init). Speech is transported on the Iu-interface in compressed form using the same codec type and configuration as on the radio interface.\nThe MSCs have no means at all to signal the Codec Configuration between MSCs. This is a drawback.\nTandem Free Operation (TFO) is defined on PCM links for all UMTS Codec Types (there is only UMTS_AMR and UMTS_AMR2). TFO allows by inband signalling to 'tunnel' the compressed speech through the TDM core network. TFO provides the possibility to bypass and omit the encoding functions, saves DSP resources, improves the speech quality in mobile-mobile calls, allows new speech services like wideband speech, but does not provide transmission cost saving. It is possible to have a combined GSM/UMTS core network with MSCs supporting both the Iu interface towards RNCs and the A-interface towards BSCs.",
      "chunk_type": "general",
      "cross_references": [
        "figure_4.2-1"
      ]
    },
    {
      "chunk_id": "ts_23.977_4.3",
      "section_id": "4.3",
      "section_title": "Packet transport network between MGWs in an A/Iu mode BICN",
      "content": "NOTE:\tSince we consider only speech telephony services in this TR the Gb interface has no relevance.\nFigure 4.3-1: Bearer Independent Core Network with A- and Iu-interfaces from Release 4 onwards\nThe mobile Core Network from release 4 onwards has a layered architecture with BICC and OoBTC/TrFO on the Nc/Nb interface or TFO on the Nb interface and provides the means to transport speech in compressed form on the Nb interface.\nThe MSC-Ss know, negotiate and select the speech Codec Types and Configurations on the Iu interfaces. The MSC-Ss also know, negotiate and select speech Codec Types and Configurations on the Nb Interface.\n-\tThis may lead to Transcoder free operation (TrFO) with compressed speech at the Nb interface.\n-\tIf the MSC-Ss determine G.711 as the codec used between the MGWs, then the MGWs may afterwards establish TFO at the Nb interface. In this case the transcoders in the MGWs know and negotiate the speech codec configuration on the Nb interface, and they inform the MSC-Server of this configuration indicating that TFO is possible. If the transcoder is in the BSCs, the BSCs know and select the speech codec type and configuration on the A-ter interface to enable TFO operation on the A interface.\nThe RNC accepts the commanded Codec Type and Configuration.\nThe MSC-Ss suggest also the speech Codec Type to be used on the Ater interface, but the BSC has the final decision and determines the initial Codec Type and Configuration for the GSM radio interface and the Ater interface. The MSC-Ss cannot communicate the preferred Codec Configuration to the BSCs in a direct way. The MSC-Ss can discover the Codec Type and Configuration from the BSCs via the TFO procedures at the corresponding MGW. The MSC-Ss can then direct interworking procedures between TFO on an A interface or other TDM link and either OoBTC or TFO associated with an Nb interface to optimally allocate the speech transcoder functions.\nThe MGWs host the transcoding and interworking between compressed speech on Nb or Iu and the legacy 'PCM' with or without TFO on A and TDM interfaces. Points-of-Interconnect to the PSTN are typically provided at every MGW. MGWs may be geographically distributed to minimise the length of the speech path inside the PSTN.\nBandwidth efficient transmission is always provided on the Ater- and on the Iu-interfaces, where the Iu allows a slightly higher efficiency in DTX due to its packet based transport structure (ATM or IP).\nThe bandwidth efficiency on the Nb-Interface depends on the selected Codec Type. It can be as on Iu (when TrFO is used) or it can be 64kb/s for G.711.In the latter case, the bandwidth efficiency on the Nb-interface is always 64kb/s for PCM, even when a compressed Codec Type has been selected by using TFO. This is a drawback.\nOoBTC may lead to a Transcoder free Operation (TrFO) with high bandwidth efficiency on all user planes for UE-to-UE calls. For UE-to-PSTN calls at least the major part of the speech path can be realised in compressed form (TrFO-link, Transcoder at the Edge of the CN).\nFor any call transiting the Nb interface, both OoBTC and TFO procedures may apply. Harmonization procedures between OoBTC and TFO provide the necessary interworking, achieving the same speech quality benefits provided separately by either TrFO or TFO. OoBTC and TFO for MS-to-UE and MS-to-MS calls that traverse a packet transport network over Nb may lead to a combination of TrFO/TFO and TFO operation on the Nb and A interface / TDM portions of the speech path, respectively, with high bandwidth efficiency on all but the A interface and TDM portions of the speech path, except when TFO is used over Nb interface. OoBTC and TFO for MS-to-PSTN calls that traverse a packet transport network over Nb may also provide for high bandwidth efficiency on any Ater, Iu and Nb portions of the speech path, except when TFO is used over Nb interface.",
      "chunk_type": "general",
      "cross_references": [
        "figure_4.3-1"
      ]
    },
    {
      "chunk_id": "ts_23.977_4.4",
      "section_id": "4.4",
      "section_title": "TDM transit network between A/Iu mode PLMNs",
      "content": "Figure 4.4-1: TDM Transit network between PLMNs from Release 4 onwards\nThis architecture shows two mobile Core Networks (BICNs) of Release 4 or 5 in layered architecture, with BICC and OoBTC on the Nc interface or TFO on the Nb interface and speech in compressed form on the Nb interface, connected by a legacy ISUP signalling and TDM with 64kb/s for speech (G.711). All features as explained above for one BICN are of course valid inside each BICN and are not further reprinted here in all details.\nTFO on the TDM interface between the BICNs (here between MGW A2 and MGW B2) can be used to exchange the compressed speech parameters between both BICNs. By that, end-to-end transcoding free operation is possible in any combination of mobile-to-mobile calls, provided that no In-Path_Equipment prevents the establishment of TFO on these links. Also \"Transcoder at the edge\" can be provided in any combination of mobile-to-PSTN calls, regardless whether the Point-of-Interconnect to the PSTN is inside the BICN where the mobile is connected, or in the other BICN. Cost efficient transmission is possible within each BICN, but of course not (directly) on the TDM link between the BICNs, except when TFO is used on Nb interface. The resulting speech quality should be identical to the one achievable within one BICN. In all call scenarios the optimal speech quality can be achieved.\nWithin each BICN, for TrFO, the MSC-Ss know, negotiate and select the speech Codec Types and Configurations on the Nb and Iu interfaces and suggest also the speech Codec Type to be used on the Ater interface.\n-\tThis may lead to Transcoder free operation (TrFO) with compressed speech at the Nb interface.\n-\tIf the MSC-Ss determine G.711 as the codec used between the MGWs, then the MGWs may afterwards establish TFO at the Nb interface. In this case the transcoders in the MGWs know and negotiate the speech codec configuration on the Nb interface, and they inform the MSC-Server of this configuration indicating that TFO is possible. If the transcoder is in the BSCs, the BSCs know and select the speech codec type and configuration on the A-ter interface to enable TFO operation on the A interface.\nFor TrFO, the MSC-Ss of one BICN cannot negotiate Speech Codec Type/Configuration directly with the MSC-Ss of the other BICN due to the ISUP connection between them. OoBTC-signalling therefore ends at the border MGWs (here MGW A2 and MGW B2). TFO inband signalling connects both BICNs and provides OoBTC-compatible means to exchange the Codec Lists and to identify the optimal Codec Type and Configuration. In this way a complete end-to-end Codec List negotiation is achieved.\nThe main difference between OoBTC- and TFO-signalling is, that one is performed before call setup and the other immediately after call setup. As both Core Networks could select different, incompatible Codec Types/Configurations that TFO cannot in all cases establish immediately. The Codec Mismatch situation and the Optimal Codec Type/Configuration gets known to both BICNs by TFO signalling and then it might be required that one or both BICNs perform an In-Call-Modification of the Codec Type/Configuration to achieve end-to-end transcoding free transport.\nIt may be noted here for completeness that also \"inside\" the ISUP/TDM connection between the shown BICNs another BICN may be \"hidden\" with TFO capability to the external world. This hidden BICN could have the same OoBTC and Codec Types/Configurations and by that support high bandwidth efficiency on long trunks without any loss of speech quality.",
      "chunk_type": "general",
      "cross_references": [
        "figure_4.4-1"
      ]
    },
    {
      "chunk_id": "ts_23.977_4.5",
      "section_id": "4.5",
      "section_title": "Packet transport transit network between PLMNs",
      "content": "Figure 4.5-1: Packet transport transit network between PLMNs of REL5\nThis architecture shows two mobile Core Networks (BICNs) of Release 4 or 5 in layered architecture, with BICC and OoBTC on the Nc interface and speech in compressed form on the Nb interface. They are connected by a packet network, using the signalling and user plane protocols, which are used with the BICNs. All features as explained above for one BICN are of course valid inside each BICN and are not further reprinted here in all details. Indeed, in this scenario all features apply across network borders: OoBTC and TrFO can take place all along the path in the core networks, resulting in compressed speech with high bandwidth efficiency on all user planes for UE-to-UE calls even across PLMN borders.\nThe description above indicates that the user plane protocols are used inter- PLMN. The user plane interconnecting the two BICNs may alternately use standard IETF framing protocols when configured over IP transport. TS 29.007 [16] currently does not describe the use of BICC inter-PLMN.\nIn the transit network where other protocols than BICC with OoBTC are used (e.g. ISUP), then in some cases OoBTC and TrFO can not apply across network borders and bandwidth efficiency can not be achieved across PLMN borders. To achieve such efficiency would require a mechanism which did not rely on BICC and provided compressed speech still.\nFigure 4.5-2: Packet transport transit network between PLMNs of REL5, using SIP between PLMNs.\nThe PLMNs may alternately be interconnected using SIP rather than BICC in the signalling plane, see Figure 4.5.2. The user plane interconnecting the two BICNs uses standard IETF framing protocols when configured over IP transport. In this case SIP-to-BICC interworking procedures apply at the border MSCs. See ITU‑T Recommendation Q.1912.5 [14], which accommodates the 3GPP SIP profile through its profile A for SIP. ITU-T Recommendation Q.1912.5 [14] can be used with TS 29.163 [13] to enable interworking of OoBTC through the intermediate SIP network. However, TS 29.007 [16] currently does not define the use of SIP inter-PLMN.\nSupport for EFR and Half Rate in SDP does not exist. It has not been validated if all current Supplementary Services are supported by the BICC-SIP interworking. Furthermore, the BICC-SIP interworking may have impact to the supported in-call modifications. Further study would be needed to address these issues to ensure BICC-SIP interworking without degradation of the CS call services.",
      "chunk_type": "general",
      "cross_references": [
        "figure_4.5-1",
        "figure_4.5-2",
        "figure_4.5.2",
        "ts_29.007",
        "ts_29.163"
      ]
    },
    {
      "chunk_id": "ts_23.977_5",
      "section_id": "5",
      "section_title": "Call Scenarios to be studied",
      "content": "The following call scenarios are those of interest for BARS functionality for the network scenarios detailed in clause 4. For each scenario the resources used in the MGWs and TRAUs and the bandwidths in use are described. They are also quantified in relation to each other in terms of Mega Instructions Per Second (MIPS, see definitions). These scenarios apply to initial bearer establishment as well as bearer renegotiation as needed for call forwarding, handover and other situations involving bearer reconfiguration.\nResource utilisation in MGWs and TRAUs comprises the following aspects:\na)\tTFO Protocol Termination (PT). TFO requires the use of TFO-protocol handlers for the inband signalling. This is typically implemented in a DSP, collocated with the Transcoder function. TFO-Protocol Termination requires a small processing power, mainly during the initial search for the first TFO message (≤ 1MIPS, for simplicity and to be on the save side counted with 1 MIPS).\nb)\tRe-framing (R). Depending on the scenario, it is necessary to reframe \"the same bits of information\", for example at transition from TDM (TFO-Frames) to packet (Iu- or Nb-Frames) or vice versa. Reframing is also necessary where transcoding takes place. Reframing requires a comparably tiny processing power (<< 1 MIPS, this is neglected when it appears together with PT or TC or DC).\nc)\tTranscoding (TC) and Decoding (DC). Transcoding (Encoding and Decoding) is needed to change from AMR (or EFR or AMR-WB…) to G.711 and vice-versa. Only Decoding is needed to restore the PCM signal towards TDM networks at the end of a TrFO link. Transcoding is by far the dominating function in terms of DSP power. The EFR and AMR are characterised with about 15 MIPS, the AMR-WB with about 30 MIPS. In all cases the Encoder is taking the \"lions-share\" of about 80%, the Decoder only about 20%. For the illustrations below the AMR is assumed (12 MIPS + 3 MIPS) as example.\nd)\tUser Plane Termination (UP). Termination of the Iu/Nb User Plane Protocol. Also this function requires a comparably tiny processing power (<< 1 MIPS, this is neglected when it appears together with PT or TC or DC).\nThe figures indicate the resources needed in the MGWs in various scenarios for the case where TFO is used (green) and the case where TrFO is used (blue). In addition to the resource utilisation also the bandwidth used is shown:\n13 kbit/s:\n64 kbit/s:",
      "chunk_type": "general",
      "cross_references": [
        "clause_4"
      ]
    },
    {
      "chunk_id": "ts_23.977_5.1.1",
      "section_id": "5.1.1",
      "section_title": "BSC to RNC call via BICN",
      "content": "UE A in the coverage area of a BSC connected via A interface to a MGW, calls UE B which is in the coverage area of a RNC connected via Iu interface to a different MGW. The call between the MGW's is carried via the Nb interface connecting them.\nFigure 5.1.1-1: BSC to RNC call via BICN\nHarmonized OoBTC/TFO procedures allow for the interworking of TFO procedures on the A interface and OoBTC/TrFO procedures on the Nc/Nb interface to provide for improved voice quality by removing unnecessary transcoding from the voice path, and high bandwidth efficiency on all portions of the speech path except the A interface between Transcoder A and MGW A in the figure.\n1.\tMSC-S A and MSC-S B use OoBTC to minimize transmission bandwidth and the allocation of codecs on the speech path between MGW A and RNC B, using preferred BSC A Codec Configuration.\n2.\tBSC A and MSC-S A enable TFO in transcoder A and transcoder A'.\n3.\tIf TFO is supported but codec mismatch occurs then MSC-S A discovers the Codec Configuration at BSC A via MGW A using the TFO package on the Mc interface, it initiates TrFO/TFO codec negotiation harmonization if necessary, using OoBTC and/or TFO codec modification procedures.\n4.\tWhen codec negotiation completes successfully, the Ater, Nb and Iu interfaces all carry compressed speech with high bandwidth efficiency. Transcoders A and A' remain in the speech path to perform necessary TFO protocol tasks and decoding but do not perform transcoding. Transcoder B' is not in the speech path.\nAlternatively, when OoBTC is not available, the MSC-Ss route a 64kbit/s PCM path between the BSC/TRAU and the MGWs. MGW B inserts a transcoder B'. MGW A is configured with PCM on both terminations and does not perform TFO-Protocol handling. TFO is enabled in transcoders A and B'.\n1.\tWhen TFO-Negotiation between transcoder A and transcoder B' completes successfully, compressed speech is carried in all portions of the speech path. Transcoders A and B' remain in the speech path to perform necessary TFO protocol tasks and decoding, but do not perform transcoding.\nThe bandwidth and resource usage is analogous to clause 5.1.3 below.",
      "chunk_type": "general",
      "cross_references": [
        "clause_5.1.3",
        "figure_5.1.1-1"
      ]
    },
    {
      "chunk_id": "ts_23.977_5.1.2",
      "section_id": "5.1.2",
      "section_title": "BSC to BSC call via BICN",
      "content": "UE A in the coverage area of a BSC connected via A interface to a MGW, calls UE B which is in the coverage area of a BSC connected via A interface to a different MGW. The call between the MGW's is carried via the Nb interface connecting them.\nFigure 5.1.2-1: BSC to BSC call via BICN\nHarmonized OoBTC/TFO procedures allow for the interworking of TFO procedures on the A interfaces and OoBTC/TrFO procedures on the Nc/Nb interface to provide for improved voice quality by removing unnecessary transcoding from the voice path, and high bandwidth efficiency on all portions of the speech path except the A interface between Transcoder A and MGW A and the A interface between MGW B and Transcoder B in the figure.\n1.\tMSC-S A and MSC-S B use OoBTC to establish compressed speech over Nb between MGW A and MGW B.\n2.\tIf TFO is supported but codec mismatch occurs then the MSC-Ss discover the Codec Configurations at the BSCs via the MGWs using the TFO package on the Mc interface, they initiate TrFO/TFO codec negotiation harmonization, using OoBTC and/or TFO codec modification procedures.\n3.\tWhen codec negotiation completes successfully, the Nb interface carries compressed speech with high bandwidth efficiency. Transcoders A, A', B' and B remain in the speech path to perform necessary TFO protocol tasks and decoding but do not perform transcoding.\nAlternatively, when OoBTC is not available, the MSC-Ss route a 64kbit/s PCM path between the BSC/TRAUs, transparently through the MGWs. Both MGWs are configured with PCM on both terminations and do not perform TFO-Protocol handling. TFO is enabled in transcoders A and B.\n1.\tWhen TFO-Negotiation between transcoder A and transcoder B completes successfully, compressed speech is carried in all portions of the speech path. Transcoders A and B remain in the speech path to perform necessary TFO protocol tasks and decoding, but do not perform transcoding.\nFigure 5.1.2-2 shows the bandwidth and resources used in case TFO or TFO-TrFO-TFO are applied. The MIPS values characterize the DSP usage in the steady state, i.e. when TFO is in OPERATION, for AMR. The values in brackets show the DSP usage before TFO is established. Please note that in the upper branch the MGWs are not necessarily aware that TFO is embedded in the G.711 bit stream:\nNote:\tThe MIPS values in brackets() indicate the DSP-resource usage in the short TFO-setup phase, when TC is used.\nFigure 5.1.2-2: Bandwidth and resource usage for BSC to BSC call via BICN",
      "chunk_type": "general",
      "cross_references": [
        "figure_5.1.2-1",
        "figure_5.1.2-2"
      ]
    },
    {
      "chunk_id": "ts_23.977_5.1.3",
      "section_id": "5.1.3",
      "section_title": "RNC to BSC call via BICN",
      "content": "UE A in the coverage area of an RNC connected via Iu interface to a MGW, calls UE B which is in the coverage area of a BSC connected via A interface to a different MGW. The call between the MGWs is carried via the Nb interface connecting them.\nFigure 5.1.3-1: RNC to BSC call via BICN\nHarmonized OoBTC/TFO procedures allow for the interworking of OoBTC/TrFO procedures on the Nc/Nb interface and TFO procedures on the A interfaces to provide for improved voice quality by removing unnecessary transcoding from the voice path, and high bandwidth efficiency on all portions of the speech path except the A interface between MGW B and Transcoder B in the figure.\n1.\tMSC-S A and MSC-S B use OoBTC to minimize transmission bandwidth and the allocation of codecs on the speech path between RNC A and MGW B, using assumed information about the BSC B Codec Configuration.\n2.\tIf TFO is supported but codec mismatch occurs then MSC-S B discovers the Codec Configuration at BSC B via MGW B using the TFO package on the Mc interface, it initiates TrFO/TFO codec negotiation harmonization if necessary, using OoBTC and/or TFO codec modification procedures.\n3.\tMSC-S B establishes TFO operation between MGW B and Transcoder B.\n4.\tWhen codec negotiation completes successfully, the Ater, Nb and Iu interfaces all carry compressed speech with high bandwidth efficiency. Transcoder A' is not in the speech path. Transcoders B' and B remain in the speech path to perform necessary TFO protocol tasks and decoding but do not perform transcoding.\nAlternatively, when OoBTC is not available, the MSC-Ss route a 64kbit/s PCM path between the BSC/TRAU B and the MGWs. MGW A inserts a transcoder A'. MGW B is configured with PCM on both terminations and does not perform TFO-Protocol handling. TFO is enabled in transcoders A' and B.\n2.\tWhen TFO-Negotiation between transcoder A' and transcoder B completes successfully, compressed speech is carried in all portions of the speech path. Transcoders A' and B remain in the speech path to perform necessary TFO protocol tasks and decoding, but do not perform transcoding.\nFigure 5.1.3-2 shows the bandwidth and resources used in case TFO or TFO-TrFO are applied:\nFigure 5.1.3-2: Bandwidth and resource usage for RNC to BSC call via BICN\nNote: the MIPS values in brackets() indicate the DSP-resource usage in the short TFO-setup phase, when TC is used",
      "chunk_type": "general",
      "cross_references": [
        "figure_5.1.3-1",
        "figure_5.1.3-2"
      ]
    },
    {
      "chunk_id": "ts_23.977_5.1.4",
      "section_id": "5.1.4",
      "section_title": "RNC to RNC call via BICN",
      "content": "UE A in the coverage area of an RNC connected via Iu interface to a MGW, calls UE B, which is in the coverage area of an RNC connected via Iu interface to a different MGW. The call between the MGWs is carried via the Nb interface connecting them.\nFigure 5.1.4-1: RNC to RNC call via BICN\nOoBTC procedures associated with the Nb interface provide for improved voice quality by removing unnecessary transcoding from the voice path, and high bandwidth efficiency on all portions of the speech path in the figure.\n1.\tMSC-S A and MSC-S B use OoBTC to minimize transmission bandwidth and the allocation of codecs on the speech path between RNC A and RNC B.\n2.\tWhen codec negotiation completes successfully, the Nb and Iu interfaces all carry compressed speech with high bandwidth efficiency. Neither Transcoder A' nor Transcoder B' remains in the speech path.\nAlternatively, when OoBTC is not available, both MGWs insert transcoders (A' and B'), the MSC-Ss route a 64kbit/s PCM path between the MGWs and enable TFO.\n3.\tWhen TFO-Negotiation completes successfully, compressed speech is carried in all portions of the speech path. Transcoders A' and B' remain in the speech path to perform necessary TFO protocol tasks and decoding, but do not perform transcoding.\nFigure 5.1.4-2 shows the bandwidth and resources used in case TFO or TrFO are applied:\nFigure 5.1.4-2: Bandwidth and resource usage for RNC to RNC call via BICN\nNote:\tthe MIPS values in brackets() indicate the DSP-resource usage in the short TFO-setup phase, when TC is used",
      "chunk_type": "general",
      "cross_references": [
        "figure_5.1.4-1",
        "figure_5.1.4-2"
      ]
    },
    {
      "chunk_id": "ts_23.977_5.2.1",
      "section_id": "5.2.1",
      "section_title": "BSC to PSTN call via BICN",
      "content": "UE A in the coverage area of a BSC connected via A interface to a MGW, calls PSTN phone B, which is in a switch connected via a TDM interface to a different MGW. The call between the MGW's is carried via the Nb interface connecting them.\nFigure 5.2.1-1: BSC to PSTN call via BICN\nHarmonized OoBTC/TFO procedures allow for the interworking of TFO procedures on the A interface and OoBTC/TrFO procedures on the Nc/Nb interface to provide for high bandwidth efficiency on all portions of the speech path except the A interface between Transcoder A and MGW A and the TDM path to the PSTN in the figure.\n1.\tMSC-S A and MSC-S B use OoBTC to establish compressed speech over Nb between MGW A and MGW B.\n2.\tIf TFO is supported on the A interface but codec mismatch occurs then MSC-S A discovers the Codec Configuration at BSC A via MGW A using the TFO package on the Mc interface, it initiates TrFO/TFO codec negotiation harmonization, using OoBTC and/or TFO codec modification procedures.\n3.\tWhen codec negotiation completes successfully, the Nb interface carries compressed speech with high bandwidth efficiency. Transcoders A and A' remain in the speech path to perform necessary TFO protocol tasks and decoding but do not perform transcoding. Transcoder B' performs the necessary transcoding to PCM.\n4.\tOften it is not obvious, whether the call terminates in the PSTN or via TDM in another BICN with TFO capability. Transcoder B' is therefore enabled to perform TFO-Negotiation, but this is not successful (in this example) and will terminate after about 5 seconds.\nAlternatively, when OoBTC is not available, the MSC-Ss route a 64kbit/s PCM path between the BSC/TRAU A and the PSTN, through the MGWs and enable TFO. Both MGWs are configured with PCM on both terminations and will therefore not perform TFO-protocol handling.\n1.\tTFO-Negotiation in transcoder A will start, but will not be successful (the PSTN does not answer) and so will terminate after about 5 seconds. TRAU A will continue to transcode. The MGWs are both transparent and are not aware that TFO was attempted.\nFigure 5.2.1-2 shows the bandwidth and resources used in case TFO-PCM or TFO-TrFO are applied:\nNOTE:\tThe MIPS values in brackets() indicate the DSP-resource usage in the short TFO-setup phase, when TC is used.\nFigure 5.2.1-2: Bandwidth and resource usage for BSC to PSTN call via BICN",
      "chunk_type": "general",
      "cross_references": [
        "figure_5.2.1-1",
        "figure_5.2.1-2"
      ]
    },
    {
      "chunk_id": "ts_23.977_5.2.2",
      "section_id": "5.2.2",
      "section_title": "RNC to PSTN call via BICN",
      "content": "UE A in the coverage area of an RNC connected via Iu interface to a MGW, calls PSTN phone B, which is in a switch connected via a TDM interface to a different MGW. The call between the MGW's is carried via the Nb interface connecting them.\nFigure 5.2.2-1: RNC to PSTN call via BICN\n1.\tOoBTC/TrFO procedures associated with the Nc/Nb interface provide for high bandwidth efficiency on all portions of the speech path except the TDM path to the PSTN in the figure. MSC-S A and MSC-S B use OoBTC to minimize transmission bandwidth and the allocation of codecs on the speech path between RNC A and PSTN B.\n2.\tWhen codec negotiation completes successfully, the Nb and Iu interfaces carry compressed speech with high bandwidth efficiency. Transcoder A' is not in the speech path. Transcoder B' performs the necessary transcoding to PCM.\n3.\tOften it is not obvious, whether the call terminates in the PSTN or via TDM in another BICN with TFO capability. Transcoder B' is therefore enabled to perform TFO-Negotiation, but this is not successful (in this example) and will terminate after about 5 seconds.\nAlternatively, when OoBTC is not available, the MSC-Ss route a 64kbit/s PCM path between the MGWs and the PSTN, MGW A inserts a transcoder A' and TFO is enabled. MGW B is configured with PCM on both terminations and will therefore not perform TFO-protocol handling.\n1.\tTFO-Negotiation in transcoder A' will start, but will not be successful (the PSTN does not answer) and so will terminate after about 5 seconds. Transcoder A' will continue to transcode. MGW B is transparent and is not aware that TFO was attempted\nFigure 5.2.2-2 shows the bandwidth and resources used in case G.711 or TrFO are applied:\nNOTE:\tThe MIPS values in brackets() indicate the DSP-resource usage in the short TFO-setup phase, when TC is used.\nFigure 5.2-2: Bandwidth and resource usage for RNCC to PSTN call via BICN",
      "chunk_type": "general",
      "cross_references": [
        "figure_5.2.2-1",
        "figure_5.2.2-2",
        "figure_5.2-2"
      ]
    },
    {
      "chunk_id": "ts_23.977_5.3.1",
      "section_id": "5.3.1",
      "section_title": "BSC (HPLMN) to BSC (VPLMN) call",
      "content": "UE A in the coverage area of a BSC connected via A interface to a MGW in the HPLMN, calls UE B which is roaming in the coverage area of a BSC connected via A interface to a MGW on the VPLMN. The call from the HPLMN MGW's is carried via TDM circuits to a Gateway MGW in the UE B's HPLMN and further on to a Gateway MGW in the VPLMN, which then routes the call to the destination MGW (the one connected to the BSC) over the Nb interface.\nThe bandwidth and resource usage are analogous to clause 5.2.1 for the HPLMN A and VPLMN. The MGW in HPLMN B does not need to perform Protocol Termination, Transcoding, Re-framing, or User Plane Termination.\nNote: TFO is not applicable in this scenario if the TDM links between networks use DCMEs.",
      "chunk_type": "general",
      "cross_references": [
        "clause_5.2.1"
      ]
    },
    {
      "chunk_id": "ts_23.977_5.3.2",
      "section_id": "5.3.2",
      "section_title": "BSC (HPLMN) to RNC (VPLMN) call",
      "content": "UE A in the coverage area of a BSC connected via A interface to a MGW in the HPLMN, calls UE B which is roaming in the coverage area of a RNC connected via Iu interface to a MGW on the VPLMN. The call from the HPLMN MGW's is carried via TDM circuits to a Gateway MGW in the UE B's HPLMN and further on to a Gateway MGW in the VPLMN, which then routes the call to the destination MGW (the one connected to the RNC) over the Nb interface.\nThe bandwidth and resource usage are analogous to clause 5.2.1 for the HPLMN A and to clause 5.2.2 for the VPLMN. The MGW in HPLMN B does not need to perform Protocol Termination, Transcoding, Re-framing, or User Plane Termination.\nNOTE:\tTFO is not applicable in this scenario if the TDM links between networks use DCMEs.",
      "chunk_type": "general",
      "cross_references": [
        "clause_5.2.1",
        "clause_5.2.2"
      ]
    },
    {
      "chunk_id": "ts_23.977_5.3.3",
      "section_id": "5.3.3",
      "section_title": "RNC (HPLMN) to BSC (VPLMN) call",
      "content": "UE A in the coverage area of a RNC connected via Iu interface to a MGW in the HPLMN, calls UE B which is roaming in the coverage area of a BSC connected via A interface to a MGW on the VPLMN. The call from the HPLMN MGW's is carried via TDM circuits to a Gateway MGW in the UE B's HPLMN and further on to a Gateway MGW in the VPLMN, which then routes the call to the destination MGW (the one connected to the BSC) over the Nb interface.\nThe bandwidth and resource usage are analogous to clause 5.2.2 for the HPLMN A and to clause 5.2.1 for the VPLMN. The MGW in HPLMN B does not need to perform Protocol Termination, Transcoding, Re-framing, or User Plane Termination.\nNOTE:\tTFO is not applicable in this scenario if the TDM links between networks use DCMEs.",
      "chunk_type": "general",
      "cross_references": [
        "clause_5.2.2",
        "clause_5.2.1"
      ]
    },
    {
      "chunk_id": "ts_23.977_5.3.4",
      "section_id": "5.3.4",
      "section_title": "RNC (HPLMN) to RNC (VPLMN) call",
      "content": "UE A in the coverage area of a RNC connected via Iu interface to a MGW in the HPLMN, calls UE B which is roaming in the coverage area of a RNC connected via Iu interface to a MGW on the VPLMN The call from the HPLMN MGW's is carried via TDM circuits to a Gateway MGW in the UE B's HPLMN and further on to a Gateway MGW in the VPLMN, which then routes the call to the destination MGW (the one connected to the RNC) over the Nb interface.\nThe bandwidth and resource usage are analogous to clause 5.2.2 for the HPLMN A and for the VPLMN. The MGW in HPLMN B does not need to perform Protocol Termination, Transcoding, Re-framing, or User Plane Termination.\nNOTE:\tTFO is not applicable in this scenario if the TDM links between networks use DCMEs.",
      "chunk_type": "general",
      "cross_references": [
        "clause_5.2.2"
      ]
    },
    {
      "chunk_id": "ts_23.977_5.4",
      "section_id": "5.4",
      "section_title": "CS domain to IMS interworking scenario",
      "content": "Figure 5.4-1: CS Domain to IMS Interworking Scenario\nFigure 5.4-1 depicts a scenario in which a PLMN interworks with an IMS for call delivery in either direction, see also TS 29.163 [13]. A MGCF in the IMS provides a BICN-compatible Nc BICC signalling interface for the PLMN and the Nb is terminated on the IM-MGW. Interworking specifications enable the OoBTC procedures in the BICN to interoperate with the SIP/SDP offer/answer procedures in the IMS to provide for optimal voice quality by removing any unnecessary transcoding from the voice path, and high bandwidth efficiency on all portions of the speech path between RNC A and UE B.\nIMS to CS interworking is being covered by CN3 in TS 29.163 [13]. It is concluded that CN3 are covering the support of OoBTC and it is expected this will be completed by close of Release 6.",
      "chunk_type": "general",
      "cross_references": [
        "figure_5.4-1",
        "ts_29.163"
      ]
    },
    {
      "chunk_id": "ts_23.977_5.5.1",
      "section_id": "5.5.1",
      "section_title": "BSC to BSC call via BICN with Intra GERAN handover AMR-AMR",
      "content": "Stable call Situation long before the Handover:UE A in the coverage area of a BSC connected via A interface to a MGW, called UE B, which is in the coverage area of a BSC connected via A interface to a different MGW. The call between the MGWs is carried via the Nb interface connecting them. Both BSCs selected the FR_AMR Codec Type with Codec Configuration set 12 (10.2 6.7 5.9 4.75). The call is established using also FR_AMR (or UMTS_AMR_2) on the Nb interface. TFO-TrFO-TFO interworking applies and end-to-end transcoding free operation is achieved. See Figure 5.1.2-1 \"BSC to BSC call via BICN\".\nBoth GSM terminals (UEs) and the GSM base stations (BTSs) monitor their receiving-link quality/capacity and issue regular \"Codec Mode Requests\" (CMRs) every 40ms on the radio-, Abis- and Ater-interfaces to adapt the net bit rate (the codec mode) to the actual radio link capacity. The GSM TRAUs potentially modify these CMRs, but most of the time just send them along inside the TFO_Frames on the A-interfaces. The MGw, when receiving these regular Codec Mode Requests, investigate, whether there was a change in the requested bit rate and only if a change occurred, they issue Rate Control Requests (RC_Req) on the Nb-Interface. These Rate Control Requests are acknowledged by the distant MGw (RC_Ack) and from then on the distant MGw sends the new, updated CMR to the connected GSM_BSS via TFO_Frames. In this way end-to-end Rate Control is achieved, providing the best possible voice quality under the given radio conditions.\nSituation just before Handover:One of the radio interfaces decides that another cell and also another Codec Type has to be used, e.g. for capacity reasons an inter BTS handover has to be performed and the new Codec Type after handover will be HR_AMR with Codec Configuration set 10 (7.4 6.7 5.9 4.75).\nThe BSC allocates a new radio channel and a new TRAU device (in this example) and prepares the Handover-Handler. Here we assume that the Handover Handler consists just of a Y-distribution of the downlink PCM signal from the A-Interface to both TRAUs (old and new) and a hard switch (either-or) between both TRAU output PCM streams towards the A-Interface.\nThe Handover has still not occurred, but the new BTS and the new TRAU are already interconnected via Abis/Ater and initialised and synchronised to each other. Therefore the new downlink radio channel is already actively sending coded speech, but the mobile station still receives and sends from/to the old BTS. No interruption of the speech path has occurred so far. The TFO-Protocol is still running between old TRAU and distant TFO-Partner (in this case the MGw). The new TRAU gets TFO_Frames in downlink and starts to send TFO_Frames in uplink, but so far these contain only frames with classifications \"No_Data\" or \"Speech_Bad\", because the new BTS does not receive useful data yet. The uplink TFO_Frames from the new TRAU are anyway ignored by the Handover Handler.\nOptionally the BSC has informed the old BTS (and indirectly or directly the old TRAU) that an handover is expected (Pre-Handover Notification). In this case the old TRAU steers the Rate Control down to the lowest or second lowest mode of the Configuration. This is done in both directions (uplink and downlink) to ensure that the error robustness just before and after handover is maximized, due to the fact that the link quality of new radio channel is still not precisely known. The new TRAU anyway starts to send in lowest or second lowest mode, until the new BTS allows higher rates.If this optional Pre-Handover Notification is not implemented, then there could be a jump in bit rate at handover time. But typically we can assume that the old radio channel is at its performance limits and the rates are anyhow already quite low.\nNow, finally, the UE gets the command to perform the handover. That means: the UE starts receiving and sending from /to the new BTS. The UE starts in uplink also in lowest or second lowest mode.\nSituation just after Handover:Suddenly the old BTS does not get any useful data in uplink, although it still sends speech in downlink. So the old BTS produces TRAU_Frames on Abis/Ater with classification \"No_Data\" or \"Speech_Bad\" and the old TRAU relays these further on to the distant TFO_Partner. The distant UE gets bad speech frames and performs error concealment as usual. Some lost speech frames are often not perceived as such (depends on the speech signal itself).\nNow the new BTS gets the uplink speech and after a short while (40ms) it starts to send TRAU_Frames in uplink with classification \"Speech_Good\". The new TRAU passes these on to the Handover Handler, which – in our example – still discards them, until the new BTS informed the BSC about successful handover and the Handover Handler is commanded to take the new TRAU output.\nIn the uplink direction the distant TFO_Partner gets for a short while \"Speech_Bad\" Frames, until the new TFO_Frames are through-connected. The TFO_Protocol itself is, however, only very shortly disturbed, just in the switching instant, typically two TFO_Frames are destroyed, but both TFO_Partners re-synchronise quickly.\nIn the downlink direction the UE always received useful data, either from the old or from the new BTS. But typically two frames are lost due to the break in the interleaving scheme.\nNow – after some 100ms – the estimates on the new radio channel capacities in uplink and downlink are better and better and the UE and the new BTS start to ramp up the bit rate (Codec Mode) to the appropriate level. It should be expected that the radio channel after handover is substantially better than before, so the rate will be quickly up to optimum.\nBut what is now the maximally allowed rate? Remember: we have FR_AMR on the distant side and HR_AMR now after handover on the local side (where the handover occurred). The new TRAU knows its own Configuration and just does never allow higher rates than 7.4. But 7.4 is not supported by the other configuration! The highest common mode is indeed 6.7. How do the TRAUs know this? Well, meanwhile the new BTS and the distant TFO_Partner have exchanged their full configuration (Codec Type and Configuration, alternative Code List) and the new TRAU has just read and copied that as well.\nConclusion: Handovers in a TFO-TrFO-TFO connection between FR_AMR and HR_AMR (and all combinations of these two) work very smart without noticeable interruptions of the transcoding free operation or the speech path, with reasonably well organised rate control during the handover process. The resource saving in TRAUs and MGWs and the bandwidth saving on the Nb interface remain intact all the time. Prerequisite: the AMR Configurations on both sides and inside the BICN are compatible!",
      "chunk_type": "general",
      "cross_references": [
        "figure_5.1.2-1"
      ]
    },
    {
      "chunk_id": "ts_23.977_5.5.2",
      "section_id": "5.5.2",
      "section_title": "BSC to BSC call via BICN with Intra GERAN handover to AMR - EFR",
      "content": "Stable call Situation long before the Handover:UE A in the coverage area of a BSC connected via A interface to a MGW, called UE B, which is in the coverage area of a BSC connected via A interface to a different MGW. The call between the MGW's is carried via the Nb interface connecting them. Both BSCs selected the FR_AMR Codec Type with Codec Configuration set 12 (10.2 6.7 5.9 4.75). The call is established using also FR_AMR on the Nb interface. TFO-TrFO-TFO interworking applies and end-to-end transcoding free operation is achieved. See Figure 5.1.2-1 \"BSC to BSC call via BICN\".\nThis is so far exactly as described in the scenario 5.5.1 before. We have now the following constellation:\nFR_AMR            – TFO –        FR_AMR        – TFO –             FR_AMRUE1 - GERAN1  –          –           BICN            –          – GERAN2 – UE2.\nThe Selected Codec Type is FR_AMR. The Available Codec List may contain (FR_AMR, EFR and PCM).\nNOTE:\tThe example works very similar, when EFR is not already here included.\nBoth MSC-S prefer the FR_AMR on the radio legs and within the BICN against any other existing narrowband GERAN Codec Type (such as FR, HR, EFR) and therefore do not offer them to their MGWs for TFO-Negotiation. The TFO-Codec-Lists as sent out by both MGWs to both GERANs contain therefore the FR_AMR as \"Local Used Codec\" and as the only alternative Codec Type available. This does, however, not exclude that GERAN may select another Codec Type for radio resource or other reasons later in the call.\nNOTE 1:\t\"Local Used Codec\" and \"Distant Used Codec\" are terms used in the TFO Standard.\nNOTE 2:\tThis claim \"FR_AMR(multi-mode) on GERAN is always better than EFR or any other narrowband GERAN Codec Type, even if transcoding is required\" can be derived from the TFO Decision rules in TS 28.062 [4].\nSituation just before Handover:One of the radio interfaces (in this example on the \"A\" side) decides that another cell and also another Codec Type has to be used, e.g. for TRAU resource reasons an inter BTS handover has to be performed and the new Codec Type after handover will be EFR.\nBSC A allocates a new radio channel and a new TRAU A2 device (in this example) and prepares the Handover-Handler.The new BTS A2 and new TRAU A2 synchronise to each other and the new TRAU A2 gets TFO_Frames from the distant TFO_Partner via MGW A. It immediately discovers that a Codec Type Mismatch is given and does not enter the TFO Mode, but stays in PCM mode. The received PCM+TFO stream in downlink has some underlying slight white noise, but is well intelligible. Still the old speech path is intact and is working in TFO (TRAU A – MGW A).\nSituation just after Handover:When the Handover Handler finally connects the new TRAU A' (with EFR) to MGW A (with FR_AMR) the Codec Type mismatch forces MGW A to fall back to PCM on the A-Interface. The Nb-Interface remains in FR_AMR, because the TC A' in MGW A starts immediately to ramp up the AMR Encoder. Only a few speech frames are disturbed in both directions. The main effect is most likely the jump in speech path delay by about 40ms in both directions.\nThis results now in the following constellation:\nEFR                   – PCM –        FR_AMR        – TFO –             FR_AMRUE1 - GERAN1  –          –           BICN            –          – GERAN2 – UE2.\nConclusion: Handovers in a TFO-TrFO-TFO connection between AMR (any type) and EFR (or any other non-compatible codec type) forces the local TFO-connection to fall back to PCM and forces the connected MGw to use additional Encoding. The speech path is only marginally interrupted, but the speech path delay increases and the voice quality decreases due to the additional transcoding. The DSP-usage increases substantially. The bandwidth saving on Nb is unaffected.\nProblem: What does MSC-S A do, when it is notified by MGW A about the new TFO-Codec-List, the Codec Mismatch situation between BICN and this radio leg and the local TFO decision of the \"Optimal Codec Type\"?\nA)\tShould it issue a codec modification on BICN to EFR? This would result in a less favourable constellation within the BICN (AMR is better and in average needs less bandwidth than EFR), with the transcoding just shifted to the other MGW B and with identical speech quality. This codec modification would also require additional signalling, speech path interruption and DSP resource handling and this should be avoided at this stage. In the worst case the other MSC-S B could reject the codec modification, because it wants to keep the better constellation on Nb, and so the already undertaken codec modification steps would need to be reverted.\nB)\tMSC-S A issues therefore a mid-call codec negotiation with the Codec List (EFR, FR_AMR, PCM), where the EFR on the first place in the list indicates that this is the \"Local Used Codec\" Type in use on the radio interface. The distant MSC-S B, when receiving this Codec List, decides to continue with FR_AMR in the BICN. No codec modification is performed at this stage, which is good, because it avoids further speech path distortions and unnecessary signalling. The distant MSC-S B returns FR_AMR as the Selected Codec and the Available Codec List (FR_AMR, EFR, PCM).\nIf MSC-S A would have sent the full \"Available Codec List\" to its MGW A and this would have offered it in the TFO-Negotiation, then the TFO decision rules would have identified the EFR as the \"Optimal Codec Type\" and this would have been notified to MSC-S A. The TFO Standard then mandates that MSC-S A \"shall\" change the Codec Type on Nb. For that reason it is assumed that MSC-S A has not offered EFR as alternative in the TFO-Negotiation, but indicated only the better choice: FR_AMR. But this is not specified in TS 23.153 [2].\nAlternatively it could be made optional, whether or not the BICN has to follow the TFO Standard to perform a codec modification in BICN to the TFO-selected \"Optimal Codec Type\". It seems reasonable to give the BICN this freedom, since it has the overall better \"global\" overview compared to the local TFO decision. The BICN could then always offer the full \"Available Codec List\" on the TFO interfaces without the risk of being forced to obey the suboptimal TFO decision.\nConclusion: The codec negotiation of the OoBTC Codec List seems to be necessary (should be \"mandatory\" and not only \"optional\") to inform the distant side about the changes on the local radio interface. The first Codec Type offered in the OoBTC Codec List for re-negotiation should be interpreted as the new one used on the radio interface. This should not necessarily mean that it has to be selected for the BICN. Not every change of codec type on one radio interface should lead to a change in the BICN. The local TFO selection of the \"Optimal Codec Type\" should not be binding for the BICN. Some additional text in TS 23.153 [2] and potentially also in TS 28.062 [4] may be helpful to clarify this.",
      "chunk_type": "general",
      "cross_references": [
        "figure_5.1.2-1",
        "ts_28.062",
        "ts_23.153"
      ]
    },
    {
      "chunk_id": "ts_23.977_5.5.3",
      "section_id": "5.5.3",
      "section_title": "BSC to BSC call via BICN: second Handover to EFR – AMR – EFR",
      "content": "Let's assume the same call scenario, where the previous clause ended.\nNow the second (\"B\") radio interface performs a handover, also from FR_AMR to EFR. Again the same effects: the second A-Interface also falls out of TFO and back into PCM and a second transcoding stage is added.\nThe speech quality degrades further, the speech path delay increases and the DSP resource usage is on its worst. We have now:\nEFR                   – PCM –        FR_AMR        – PCM –                     EFRUE1 - GERAN1  –          –            BICN           –          –  GERAN2 – UE2.\nNow also the second MSC-S B issues a mid-call codec-negotiation with the Codec List (EFR, FR_AMR, PCM). The distant MSC-S A, when receiving this Codec List, decides that it is now time to change to EFR in the BICN, because now the same Codec Type can be used both on the local radio interface and in the CN. Codec modification within BICN is carried out, which is good, because it bring the whole path back into a constellation where end-to-end transcoding free operation is possible:\nEFR                   – PCM –            EFR             – PCM –                    EFRUE1 - GERAN1  –          –           BICN            –          – GERAN2 – UE2.\nNow EFR is the Selected Codec and the Available Codec List is (EFR, FR_AMR, PCM).\nBut still PCM is used on the A-interfaces.\nProblem: It seems reasonable that the MGWs offer this EFR Codec Type immediately now in their TFO-Negotiations. But this is not specified in TS 23.153 [2]. Instead the MSC-S have to inform their MGWs by sending now the TFO_Package with the TFO-Codec-List to be used on the TFO Interface, otherwise the TFO with EFR could not establish.\nNow, after a short while, TFO Establishment results in:\nEFR                   – TFO –            EFR             – TFO –                    EFRUE1 - GERAN1  –          –           BICN            –          – GERAN2 – UE2.\nProblem: TS 23.153 [2] does also not specify what the TFO-Codec-List should be in that situation.Alternative 1: again only the Selected Codec Type (EFR) is included.Alternative 2: besides the Selected Codec Type (EFR) also the Alternative Codec Types, here FR_AMR, are included.This has an influence on the potentially following handovers.",
      "chunk_type": "general",
      "cross_references": [
        "ts_23.153"
      ]
    },
    {
      "chunk_id": "ts_23.977_5.5.4",
      "section_id": "5.5.4",
      "section_title": "BSC to BSC call via BICN: third handover to AMR – EFR – EFR",
      "content": "A further subsequent handover on one radio leg (here the \"A\" one) with a change back to FR_AMR would again result in a re-negotiation. MSC-S A should again use the Codec List (FR_AMR, EFR, PCM) to indicate that now FR_AMR is the \"Local Used Codec\" Type.\nIssue 1:\tTS 23.153 [2] does not specify what the distant MSC-S B shall do in this case, but leaves it open.\nThe distant MSC-S B, when receiving the re-negotiation Codec List can either decide to modify the Selected Codec Type in the BICN to FR_AMR, because this is the \"Distant Used Codec\" Type and provides a better constellation within the BICN. Or it can decide to keep the Selected Codec Type, which saves signalling capacity and minimises speech path interruptions. The resulting overall speech quality will be in both cases the same. So far this is not dramatic.\nIssue 2:\tIf MSC-S A has offered FR_AMR as alternative in the TFO-Codec-List (see previous clause), then the TFO Standard mandates that the Codec Type within the BICN shall be modified, because the local TFO decision identified FR_AMR as \"Optimal Codec Type\". If, however, the distant MSC-S B has kept the EFR, then the mid-call codec negotiation has to be followed by a codec modification, forced by MSC-S A. This is possible, but of course the necessary signalling for re-negotiation and subsequent codec modification seems to be a waste of signalling resources. In the worst case MSC-S B could reject also this codec modification.\nAfter a forth handover, where both radio legs are back to FR_AMR (or both back to EFR), the re-negotiation would clearly result again in end-to-end transcoding free operation.\nConclusion: Some clarifications in TS 23.153 [2] would be helpful to avoid different interpretations and implementations of the many options. Inter-vendor interoperability would most likely improve, resulting in lower signalling loads and less speech path disturbances.",
      "chunk_type": "general",
      "cross_references": [
        "ts_23.153"
      ]
    },
    {
      "chunk_id": "ts_23.977_5.5.5",
      "section_id": "5.5.5",
      "section_title": "RNC to RNC call via BICN with inter-system handover",
      "content": "Let's assume the call is established ideally transcoding free between two RNCs with UMTS_AMR_2 in Codec Configuration set 14 (12.2 7.95 5.9 4.75). The call provides optimal narrowband speech quality with lowest DSP usage at minimal bandwidth within the BICN: very good.\nLet's introduce a short notation \"UMTS_AMR_2(14)\" to define codec type and configuration (in brackets).\nFor this scenario the call looks then like:\nUMTS_AMR_2(14) - UMTS_AMR_2(14) - UMTS_AMR_2(14).UE1 - UTRAN1       -            BICN            -  UTRAN2 – UE2\nThe \"Selected Codec Type\" is UMTS_AMR_2(14), of course. The \"Available Codec List\", as negotiated at call setup, contains exactly this codec type as well (plus PCM), because UE and UTRAN do not support anything else (in this example). Good, so far.\nNOTE:\tWe assume that the MGWs in the BICN support all UTRAN and GERAN Codec types, but that does not matter here. The current TrFO standard defines that only codecs that are supported in UE plus radio leg plus MGW can be included in the codec negotiation. And this is only UMTS_AMR_2(14), plus PCM.\nNow one radio leg performs an inter-system handover to GERAN and the new Codec Type here is FR_AMR with Codec Configuration set 12 (10.2 6.7 5.9 4.75): FR_AMR(12). TFO between the new TRAU and the MGW is tested, but not established due to incompatible codec configurations. The TRAU transcodes FR_AMR to PCM; the MGW transcodes PCM to UMTS_AMR_2.\nNow the call looks like:\nFR_AMR(12)     – PCM – UMTS_AMR_2(14) - UMTS_AMR_2(14).UE1 - GERAN1  -            -           BICN            -  UTRAN2 – UE2\nThis results in a waste of DSP resources in TRAU A and MGWA and an audible loss in speech quality. The bandwidth on the Nb interface is still minimal.\nProblem 1: Why was in GERAN not FR_AMR with Codec Configuration set 14 selected? Well, set 12 is the default, standardised set for the FR_AMR; it provides overall the best compromise for GERAN, considering interoperability with HR_AMR, which cannot use 12.2 and not 7.95.And: how should the MSC-S tell the BSC, which configuration to use? The signalling between MSC and BSC does only carry the codec type, but not the configuration.\nConclusion 1: The AMR configurations on UTRAN and GERAN should be harmonised (see clause 7.1), then this problem would never occur. The alternative, to include the codec configuration on the MSC-BSC signalling link could require extensive changes to the BSSMAP protocol with potential problems in some BSS architectures with TRAU pools.\nProblem 2: What is now the \"Selected Codec Type\"? What is in the \"Available Codec List\"?Should the MSC-S restart \"Mid-call Codec Negotiation\"? What would be the result?\nWell, according to the present TrFO standard MSC-S A can only include FR_AMR(12) in the OoBTC Codec List (plus EFR, plus PCM).\nIf MSC-S B only offers UMTS_AMR_2(14), both are not compatible and the result could be: PCM in the BICN:\nFR_AMR(12)      – PCM  –           PCM – UMTS_AMR_2(14)UE1 - GERAN1  – –           BICN          –  UTRAN2 – UE2.\nThe speech quality would be identical to the one described above, but the bandwidth in the BICN is now 64kbit/s; the DSP usage is identical, although now in another MGW. This is not at all a reasonable result, or?\nAlternatively, MSC-B could select a codec different from the codec that is used on the radio interface B, in this case FR_AMR(12). Thus, if MSC-A initiates a mid-call codec negotiation, the result would be.\nFR_AMR(12)      – TFO  –           FR_AMR(12)    – PCM – UMTS_AMR_2(14)UE1 - GERAN1  – –           BICN                 – – UTRAN2 – UE2.\nwith transcoding  FR_AMR(12) – UMTS_AMR_2(14) in MGW-B and FR_AMR compressed speech in the BICN.\nConclusion 2: The OoBTC standard does not describe the MSC-S behaviour in this case. The description of the Codec List handling could be improved.",
      "chunk_type": "general",
      "cross_references": [
        "clause_7.1"
      ]
    },
    {
      "chunk_id": "ts_23.977_5.5.6",
      "section_id": "5.5.6",
      "section_title": "BSC to RNC call via BICN with second intersystem handover",
      "content": "Let's continue with the call scenario of the previous clause: FR_AMR(12) – PCM – UMTS_AMR_2(14) - UMTS_AMR_2(14). No codec re-negotiation was performed, otherwise – see above – we could have PCM in the BICN.\nNow also the second radio leg performs an inter-system handover from UTRAN to GERAN and to FR_AMR(12).The second MSC-S may follow the same principle as the first one, again the two approaches above exist.\nIf it also does not start codec re-negotiation, then the call looks like\nFR_AMR(12)      –  PCM – UMTS_AMR_2(14) –  PCM –       FR_AMR(12)UE1 - GERAN1  – –             BICN           – –  GERAN2 – UE2.\nWe get a remarkable loss in quality, and a substantial DSP load, although we can easily see how the solution should be: FR_AMR(12) - FR_AMR(12) - FR_AMR(12), or FR_AMR(12) - UMTS_AMR_2(12) - FR_AMR(12), which is equivalent in these cases.\nAlternatively, with codec-renegotiation the result is\nFR_AMR(12)      – TFO  –           FR_AMR(12)   – TFO – FR_AMR(12)UE1 - GERAN1  – –           BICN                – – GERAN2 – UE2,\nwhich is optimal in all respects.\nConclusion: The OoBTC standard does not describe this case optimal. The Codec List handling could be improved.\nNOTE:\tWith the proposed Harmonisation of AMR Configurations in place: all call combinations with AMR in GERAN and UTRAN and BICN would always be compatible. No transcoding, no mid-call codec negotiation and no codec modifications would be necessary, resulting in best possible speech quality, with minimal DSP usage, minimal delay and minimal bandwidth.\nBut this result should not lead to the conclusion that the Codec List handling in OoBTC can stay as is! We have to consider the other codec types as well, especially AMR-WB and all potential future codec types.",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.977_6.1",
      "section_id": "6.1",
      "section_title": "Overall requirements",
      "content": "-\tWork between PLMNs (where agreements and intervening networks permit).\n-\tInterworking fully defined with existing 3GPP standards (e.g. TrFO, TFO)\n-\tSupport for Interworking with IMS\n-\tBackward compatible with existing GSM (R99) Radio Access networks.\n-\tBackward compatible with existing terminals\n-\tDoes not require implementation of non-standard interfaces on the Media Gateway (e.g. Ater).\n-\tSupport for Local Lawful Intercept requirements\n-\tProvide service and bearer separation for the development of standardised and non-standardised services.\nNOTE:\tAnnex A gives a detailed description of an example for migrating a service to TrFO.",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.977_6.2.1",
      "section_id": "6.2.1",
      "section_title": "Support of codec types in TFO and TrFO on various interfaces",
      "content": "The following table is extracted from TS 26.103 [5] (Codec List in GSM and UMTS) and then modified to include the interfaces: Abis/Ater, A (TFO), Iu, Nb (TrFO), Nc and Mc (OoBTC). This table now gives the overview to which extend which codec type is supported.\nOnly the GSM_FR, GSM_HR and GSM_EFR are not fully supported: the framing on Nb is not specified.\nTable 6.1.1-1: Support of codec types in TFO and TrFO\nTDMA EFR\nUMTSAMR 2\nUMTS AMR\n(GSM)HR AMR\n(GSM)FR AMR\nGSM EFR\nGSM HR\nGSM FR\nGERANGMSK\nAbis/Ater\nno\nno\nno\nyes\nyes\nyes\nyes\nyes\nGERAN8PSK\nno\nno\nno\nno\nno\nno\nno\nno\nUTRANIu\nyesno\nyes\nyes\nno\nno\nyesno\nno\nno\nTFO\nno\nyes\nyes\nyes\nyes\nyes\nyes\nyes\nTrFO (Nb)\nno\nyes\nyes\nyes\nyes\nno*\nno\nno\nOoBTC(Nc, Mc)\nno\nyes\nyes\nyes\nyes\nyes\nyes\nyes\nOHRAMR-WB\nOFRAMR-WB\nOHRAMR\nUMTSAMR-WB\nFRAMR-WB\nPDC EFR\nGERANGMSK\nAbis/Ater\nno\nno\nno\nno\nyes\nno\nGERAN8PSK\nyes\nyes\nyes\nno\nno\nno\nUTRANIu\nno\nno\nno\nyes\nno\nyesno\nTFO\nyes\nyes\nyes\nyes\nyes\nno\nTrFO (Nb)\nyes\nyes\nyes\nyes\nyes\nno\nOoBTC(Nc, Mc)\nno\nyes\nyes\nyes\nyes\nyes\nno\n* only the SID-Framing on Nb is missing for the GSM_EFR.",
      "chunk_type": "general",
      "cross_references": [
        "table_6.1.1-1",
        "ts_26.103"
      ]
    },
    {
      "chunk_id": "ts_23.977_7",
      "section_id": "7",
      "section_title": "Requirements and architectural solutions for Resource Savings",
      "content": "-\tReduce the total number of transcoding equipment in a A/Gb mode network using R4 core network architecture. This is very important for growing A/Gb mode networks.\nClauses 4 and 5 include detailed comparisons of the resource savings possible with TrFO and TFO solutions.",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.977_7.1",
      "section_id": "7.1",
      "section_title": "AMR-NB configurations",
      "content": "The AMR Codec algorithm comprises eight modes. More than hundred combinations of 1, 2, 3 or 4 modes out of 8 are possible, not all are reasonable, only a few are necessary for most applications. TS 28.062 [4] lists the 15 \"preferred\" AMR Configurations.\nWithout further agreements the likelihood is small, that two independent radio legs would chose the same or compatible configurations. With an additional TrFO link in between, which selects the configuration potentially also independently, the situation does by no means improve.\nThe TFO-Decision Rules, as formulated in TS 28.062 [4], define preferred configurations for HR_AMR and for FR_AMR. With these AMR Configurations it is guaranteed that any combination on both radio access sides and the core network in between does (nearly) always lead to the optimal communication quality under the given restrictions. The Maximum Rate Control Algorithm, integrated into the TFO Handlers, do automatically restrict the rates to the common ones, in case the configurations are different.\nThe UTRAN groups preferred a different AMR-NB configuration for UTRAN.\nWith this GSM-GSM calls and UTRAN-UTRAN calls would work fine in TFO/TrFO, but GSM-UTRAN calls require at least one unnecessary transcoding, in practise it would mean two transcoders are inserted:\nAMR (config-GSM) – PCM – AMR (config-UTRAN).The OoBTC at call setup can not easily decide, which configuration to use inside the CN on the TrFO-link.\nThe specified mechanisms to resolve the situation could use an in-call-modification immediately after call setup, when the overall call scenario is known after the TFO Negotiation. But also this can only work, if UTRAN is accepting to be modified to the preferred GSM configurations. So this is not really a nice solution, it costs a substantial amount of additional signalling and speech path disruptions during the (unnecessary) modification. Every handover could jeopardise the configuration again.\nGiven the importance of GSM-to-UTRAN calls and the expected handovers between GSM and UTRAN in many dual-mode networks this is hardly acceptable.\nConclusion:It is proposed that the 3GPP standardisation groups cooperate to decide upon a common configuration for AMR, to include it into the specifications and to give it a dominant importance. This configuration would be preferred for systems supporting TFO and/or TrFO.",
      "chunk_type": "general",
      "cross_references": [
        "ts_28.062"
      ]
    },
    {
      "chunk_id": "ts_23.977_7.2",
      "section_id": "7.2",
      "section_title": "AMR-WB configurations",
      "content": "For the AMR-WB Codec Types one basic, mandatory configuration with the three lowest modes (AMR-WB 6.60 + 8.85 + 12.65 kbit/s) is mandatory for all radio access technologies that offer AMR-WB capability. One of two optional modes may be added: either 15.85 or 23.85 kbit/s. This is described in clause 5.4.0 of TS 26.103 [5]\nWith these three different AMR-WB Configurations it is guaranteed that any combination on both radio access sides and the core network in between does (nearly) always lead to the optimal communication quality under the given restrictions. The Maximum Rate Control Algorithms, integrated into the TFO Handlers, do automatically restrict the rates to the common ones, in case the configurations are different. For a pure TrFO connection the Rate Control algorithm should be identical, but it is - so far - not described anywhere.\nConclusion:The configurations for AMR-WB are well suited and no change is necessary",
      "chunk_type": "general",
      "cross_references": [
        "ts_26.103_clause_5.4.0",
        "ts_26.103"
      ]
    },
    {
      "chunk_id": "ts_23.977_8.1",
      "section_id": "8.1",
      "section_title": "Background",
      "content": "The 3GPP architecture must support bandwidth usage efficiency on the most highly utilized user plane interfaces in the system. Candidates for optimisation include:\n-\tThe path between RNC and MGW. This is the Iu interface and is already optimised.\n-\tThe path between MGWs within a BICN. When this path uses a packet network, it is the Nb interface and is optimised for TrFO.\n-\tThe path between BSC and MGW. This is a combination of the Ater and A interfaces via the TRAU. The Ater interface is already optimised but the A interface uses 64 kbps facilities on a TDM interface. In this form, the A interface is not a candidate for bandwidth optimisation, but is consistent with TFO.\n-\tThe path between MGWs in different PLMNs. This interface is typically TDM and may be consistent with TFO if no DCMEs or other non-TFO IPE (e.g. echo cancellers) are in the path. If a packet transport network is available between the PLMNs, then OoBTC may be applicable.\nOther clauses describe how harmonized OoBTC and TFO procedures enable some combination of TrFO, TFO and transcoding at the edge in various scenarios involving media flow on these paths. The A and TDM interfaces do not yet support the same degree of bandwidth usage efficiency as the Ater, Iu and Nb interfaces.\nIf a path between MGWs within a BICN does not already use TrFO over an Nb interface, it can be optimised by doing so. The path between MGWs may used TFO. The path between PLMNs may also support either TFO or TrFO. If a path between BSC and MGW is significantly comprised of an A interface, no standard method exists for realizing higher bandwidth usage efficiency on this portion of the path. The next clause includes discussion of two alternative architectures to address this issue.",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.977_8.2",
      "section_id": "8.2",
      "section_title": "Requirements",
      "content": "-\tReduce bandwidth requirements for A/Gb mode traffic in the packet transport network between Media Gateways across Nb interface.\n-\tEnact transcoding at the edge of the network for calls to PSTN or other incompatible networks.",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.977_8.3.1",
      "section_id": "8.3.1",
      "section_title": "A-ter interface to the MGW",
      "content": "NOTE:\tIssues related to the signalling aspects have not been studied in this TR.\nFigure 8.3.1-1: BSC to MGW path before and after adding ater interface to MGW\nFigure 8.3.1-1 depicts the BSC to MGW path as it would appear if an Ater interface is standardized for the MGW, and the TRAU function is performed within the MGW. This corresponds to the functional distribution RNC and MGW across the Iu interface. The advantage of this configuration is that all scenarios described herein using Nb packet transport between MGWs can support end-to-end OoBTC procedures for TrFO or transcoder at the edge since there is no need to perform TFO on any interface. Harmonized OoBTC/TFO procedures support all other scenarios described herein that include this configuration option for the BSC to MGW path, may include Nb packet transport between some MGWs in the path, and include at least one TDM interface between some pair of MGWs in the path, e.g., between PLMNs. But in the case there is TC at the edge of the network with TDM transit network to another TrFO network then TFO on this transit network will improve speech quality.",
      "chunk_type": "general",
      "cross_references": [
        "figure_8.3.1-1"
      ]
    },
    {
      "chunk_id": "ts_23.977_8.3.2",
      "section_id": "8.3.2",
      "section_title": "MGW collocated with TRAU",
      "content": "Figure 8.3.2-1: Options for BSC to MGW path after collocating MGW with TRAU\nFigure 8.3.2-1 depicts two options for how the BSC to MGW path would appear if either the TRAU is moved to be collocated with (in physical proximity to) the MGW, or a new MGW is introduced and collocated with the TRAU. Either approach shortens the portion of the BSC to MGW path comprising an A interface to a negligible portion of the overall path. Harmonized OoBTC/TFO procedures support all scenarios described herein that includes either of these configuration options for the BSC to MGW path.",
      "chunk_type": "general",
      "cross_references": [
        "figure_8.3.2-1"
      ]
    },
    {
      "chunk_id": "ts_23.977_9.1",
      "section_id": "9.1",
      "section_title": "Requirements",
      "content": "It is proposed that the TR investigates the requirements for speech quality enhancement features\nThe general requirement to ensure maximum speech quality that TrFO and TFO attempt to meet is to prevent unnecessary transcoding on mobile-to-mobile and mobile to fixed network. TSG SA WG4 has studied the degradation to speech quality for mobile to mobile calls with tandeming of speech codecs, and the following is a summary of conclusions from the reports TR 26.975 [6] and TR 26.976 [7].\nClause 7 of TR 26.975 [6] shows that tandeming tests were conducted by SA4 in the past and they showed that the degradation in single tandeming compared to TFO between EFR and AMR12.2 is not significant to the user. To quote: \"Tandeming with the clean speech error free 12.2 and 10.2 modes of AMR do not significantly degrade the single encoding performances of any of the AMR codec (modes) or existing GSM codecs.\" Transcoding between FR and AMR, however, does introduce degradation.",
      "chunk_type": "general",
      "cross_references": [
        "ts_26.975_clause_7",
        "ts_26.975",
        "ts_26.976"
      ]
    },
    {
      "chunk_id": "ts_23.977_9.2.1",
      "section_id": "9.2.1",
      "section_title": "Mobile to mobile calls scenarios: 5.1.1 and 5.1.3",
      "content": "For mobile to mobile calls between a BSC and an RNC within a PLMN, the call scenarios in clause 5 show that the existing architecture can employ TFO on the A interface supporting AMR-WB / AMR / EFR / FR / HR, and compressed speech (TrFO) on the Iu interface supporting AMR-WB / AMR. If compatible codecs are available, then the network need not perform any transcoding. OoBTC can be used within the BICN and TrFO be established between the MGWs, thus achieving optimal bandwidth saving with optimal voice quality. If compatible codecs are not available, a single transcoding point at the MGW then exists between GSM on one side and UTRAN on the other and, therefore, the requirement to prevent unnecessary transcoding in order to not perceptibly degrade the speech quality is fulfilled. Again the BICN can operate in TrFO to achieve optimal bandwidth savings.\nFor BSC to BSC calls via a BICN, the network should not need to perform any transcoding when the mobiles share at least one common codec. In some cases, e.g. if only one side supports AMR in multi-mode configuration and the other side supports only single-mode codecs (FR / HR / EFR), it needs to be considered whether to perform a single transcoding in order to gain optimal voice quality. In such cases, the radio error robustness of the AMR may be more important than the TFO connection of a single-mode codec. For details see TS 28.062 [4], clause F.3.\nWhether a transcoding-free link can be established through the BICN (for BSC - BSC or BSC – RNC calls) depends on the codec types used for TFO. If at least one side supports AMR, or AMR-WB or EFR, then optimal bandwidth saving and optimal voice quality can be achieved. Otherwise a 64kbps transparent PCM channel with TFO has to be established through the BICN for optimal voice quality. The reason is that up to 3GPP REL5 no Nb framing is specified for FR and HR. Also, though Nb (and Iu) framing for EFR is supported according to TS 26.103 [5], the specification in TS 26.102 [8] does not seem complete.",
      "chunk_type": "general",
      "cross_references": [
        "clause_5",
        "ts_28.062",
        "ts_26.103",
        "ts_26.102"
      ]
    },
    {
      "chunk_id": "ts_23.977_9.2.2",
      "section_id": "9.2.2",
      "section_title": "Mobile to PSTN calls: scenarios 5.2.x",
      "content": "For GSM/UMTS mobile to PSTN calls, the existing solutions allow for a single, necessary, transcoding point within the MGW at the edge of the BICN, close to the point of interconnect.",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.977_9.3",
      "section_id": "9.3",
      "section_title": "Summary",
      "content": "Architectural solutions exist for the common interworking scenarios of mobile to mobile/PTSN calls, which avoid or minimise degradation of speech quality. Optimal Voice Quality together with Optimal Bandwidth Saving is possible for AMR, AMR-WB and EFR. For EFR the Nb (and Iu) framing does not seem completely specified and for FR and HR the optimal bandwidth saving would need the Nb framing for these codec types to be specified. A useful output of this TR would be for these (or at least EFR) be standardised for Nb framing in order for a more optimal voice quality to be accomplished.",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.977_10.1",
      "section_id": "10.1",
      "section_title": "Background and requirements",
      "content": "The GSM and UMTS systems will co-exist for many years. Most dual-mode operators have currently significantly less UMTS spectrum than they have GSM spectrum, so, these operators have to optimise their utilisation of the combined spectrum pool. Other operators may just have GSM spectrum or just UMTS spectrum.\nOne potential operational strategy is that dual mode mobiles may be camped on 3G cells (e.g. to help provide access to fast PS data services), but occasionally (or always) be handed over to 2G for voice calls. However, until the RNC has gathered GSM neighbour cell measurements, the voice call must be handled by the 3G cell and a transcoder is needed in the MGW. Following the handover to 2G, the 2G TRAU will be connected in tandem with the 3G MGW.\nHence the introduction of a new speech codec (particularly one that is best suited for mobile to mobile calls, like AMR-WB) requires support for that codec in both 2G and 3G coverage areas.\nNOTE:\tOver GSM's 12 years, 4 new speech coders have been developed (HR, EFR, AMR, AMR-WB). The development of additional codecs in the future probably depends on the uptake of AMR-WB. With the current architectures for GSM and UMTS this requires both TRAUs in the 2G BSS and Transcoders in 3G MSCs (non-layered architecture) and/or Media GateWays (layered architecture) to be developed and installed.\nThis has at least the following disadvantages, e.g.:\na)\tincreased development cost;\nb)\tincreased deployment costs, since the total transcoding capacity is split into TRAU and MGW pools;\nc)\tnew speech codecs are difficult to use until the slowest of MGW and TRAU development is finished;\nd)\tif/when GSM is decommissioned, TRAUs in the BSS will probably have to be discarded;\ne)\tThe requirement for extra DSP power within the TRAUs in the BSS may require other parts of the BSS to have to be replaced.\nHence it is interesting to consider how a graceful migration of transcoding functionality from BSS to MGW could be achieved and what the potential migration strategies and costs could look like.",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.977_10.2.1.1",
      "section_id": "10.2.1.1",
      "section_title": "Description / concept",
      "content": "If new transcoders are only implemented on the MGW, then the MGW will need to be able to be connected to GSM BTSes (via the BSC). Given that there is a very large installed base of GSM base stations but only a limited installed base of MGWs, it seems more logical that the MGW adapts itself to handle the existing interface to the BTS rather than the other way round.\nOn the user plane, this A-bis/A-ter interface is defined in TS 48.060 [10] and TS 48.061 [11]. Given that multi-vendor interoperability is required for TFO, and the TFO standard (TS 28.062 [4]) is closely related to TS 48.060 [10]/TS 48.061 [11], it seems reasonable to assume that TS 48.060 [10]/TS 48.061 [11] might be made into open standards.\nMany BSS vendors support TRAUs located at the MSC site but with control from the BSS. This control plane, comprising e.g. the selection of the codec type, the allocation of TRAU resources, the handover handling, the fault handling, is currently vendor specific. For O+M purposes remote TRAUs are generally controlled from the BSC. However, if the transcoding would be located within the MGW, then the MGW O+M is used for this task.\nFor the A interface control plane, the MSC already controls the allocation of the circuit on the user plane.",
      "chunk_type": "general",
      "cross_references": [
        "ts_48.060",
        "ts_48.061",
        "ts_28.062"
      ]
    },
    {
      "chunk_id": "ts_23.977_10.2.1.2",
      "section_id": "10.2.1.2",
      "section_title": "Difficulties with this concept",
      "content": "a)\tThis approach would introduces legacy design constraints into the MGW and may restrict future development of the MGW.\nb)\tThe complexity of the MGW and the necessary know-how concentration would increase substantially.\nc)\tNeither GSM-only nor UMTS-only operators would have a gain of that additional functionality and complexity.\nd)\tThe MGW would need to support the functionality described in TS 48.060 [10] and TS 48.061 [11]. This includes support for the TRAU frame structure and for the frame alignment protocol, which is currently running between TRAU and BTS, and provides e.g. procedures for frame synchronisation and time alignment between TRAU and BTS. At least one vendor indicates that there are obvious errors still in TS 48.060 [10], explicitly in the Time Alignment clause. They have not been corrected so far and the only reasonable explanation for that is: every vendor found his own solution to the problem and did not consider it worth the effort to correct the TS 48.060 [10]. A complete standardisation of the Abis/Ater user plane would very likely require a compromise there and an adaptation of existing GSM base stations.\nNOTE 1:\tIt is FFS as to whether this error was corrected during the development of modern codec types, like AMR and AMR-WB.\nNOTE 2:\tFor codecs such as AMR-WB, TFO (or similar) needs to be used in the core network, and, while in TFO mode, the Time Alignment functionality is not required.\ne)\tDevelopment effort in the DSP-kernel software might not be saved, because this can be reused also in the existing concept in TRAU and MGW. But extra development on the MGW would be needed for the Input/Output-Interfaces and the Framing protocols. So the saving in development costs would not be as big as originally hoped. Considering that GSM-only operators will exist as well, the development costs would rather increase, because the existing GSM architecture will have to be maintained in parallel.\nf)\tThe introduction of a new Codec Type in GSM requires in any case the upgrade of MSCs, BSCs, BTSs and the signalling interfaces between them. No development costs can be saved here.\ng)\tThe Operation and Maintenance functions of the BSS need modification (whether new O+M functionality is needed in the BSS, or, whether existing BSS functionality only needs to be disabled is FFS and the impact will be implementation dependent).\nh)\tIt should also be noted that the A interface uses 64 kbit/s channels, while TS 48.060 [10]/TS 48.061 [11] use different data rates, e.g. 16 kbit/s and sometimes 8 and/or 32 kbit/s. The mapping between these two is currently defined BSS internally. For CS data calls with higher bit rates, allocation of up to four 16 kbit/s traffic channels needs to be considered.\ni)\tFor the Mc interface between MSC-Server and MGW protocol extensions would be required.\nj)\tIt is for further study whether the MGW would need to support some of the O+M procedures described in TS 48.060 [10]/TS 48.061 [11] and/or TS 52.021 [12]. However, with the TRAUs in the BSS, the BSS should check that the TRAU is working correctly before it is connected to the BTS. If the TRAU is moved to the MGW, then this check should be performed by the MGW and the need for the BSS to signal O+M commands to the TRAU is unclear, in any case it would be different than today.\nk)\tFor CS data calls the TRAU provides rate adaptation, as described in clause 6.7 of TS 48.060 [10] and clause 6.7 of TS 48.061 [11]. The impact on the MGW in case of Ater to the MGW needs some further study.\nl)\tsome internal handovers may have to be performed as external \"intra BSS\" handovers, because the location of the transcoder may change from the TRAU into the MGW or vice versa. This causes typically higher signalling load and longer speech path interruptions.\nm)\tThe BSC performs Codec Type and radio resource selection based on its knowledge on the dynamically changing radio situation. This results in the selection of a half rate or full rate radio channel, and, legacy BTSs may further restrict the choice of codec. This may require reallocation of transcoding resources in the MGW or TRAU. This could be achieved by slightly modifying the \"switch circuit pool\" functionality already specified on the A interface.\nn)\tCurrent MGWs have no need to support the basic GSM HR and FR codecs.",
      "chunk_type": "general",
      "cross_references": [
        "ts_48.060_clause_6.7",
        "ts_48.061_clause_6.7",
        "ts_48.060",
        "ts_48.061",
        "ts_52.021"
      ]
    },
    {
      "chunk_id": "ts_23.977_10.2.1.3",
      "section_id": "10.2.1.3",
      "section_title": "Migration aspects",
      "content": "A large number of existing UEs and base station transceivers support only the early GSM codecs FR, HR. On the other hand, according to TS 26.103 [5], only EFR, AMR and WB-AMR are defined for Iu mode. This implies that MGWs according to 3GPP REL-4 and REL-5 specifications are not mandated to support the legacy codecs FR and HR - and given that all Iu mode UEs support AMR, there is so far little motivation to support EFR.\nNote: EFR is nearly identical to one of the AMR codec modes, and, FR and HR are much less computationally intensive than AMR. Nevertheless the development and verification effort is in a first order approximation similar for all codec types.\nMigration from the existing architecture to the \"Ater to the MGW\" architecture would thus require one of the following three options:\n1.\tTerminate the support for HR and FR codecs. This would contradict the desire to use the existing installed base stations including their transceivers - and it will take time until all UEs in the field support at least EFR!The feasibility of this is uncertain.\n2.\tImplement the legacy codecs and related procedures (e.g. TFO) in the MGW. This is possible, but: is it desirable to spend the implementation effort to implement legacy technology? Indeed, disadvantage a) described in clause 10.1 would remain. It is FFS what is the implementation effort to implement legacy codecs in the MGW, however, it should be noted that current mobile devices are capable of implementing FR, HR, EFR and AMR.\n3.\tSupport transcoding in the TRAU for legacy codecs and transcoding in the MGW for new codecs at the same time in the same network at both sides of the same A/Ater interface configuration. This seems rather complex and seems to contradict the desire for resource savings. From a technical perspective, at least the following issues would require attention:\n-\tChange of codec during a call, where one codec is supported in the TRAU and the other in the MGW;\n-\tChange between voice and CS data during a call;\n-\tHandover scenarios.\nThe MGW would need to support A and Ater user planes. Note that there would still be duplicated implementation effort (disadvantage a) in clause 10.1) in case transcoding related enhancements were introduced in future releases, which are not restricted to a specific voice codec, for example voice quality enhancements (VQE).\nWhile it is assumed that introduction of a new codec to both UMTS and GSM systems will be easier, once the \"Ater to the MGW architecture\" is in place, the first new codec requires the implementation of the new architecture; thus the deployment of this codec might be delayed rather than accelerated.",
      "chunk_type": "general",
      "cross_references": [
        "clause_10.1",
        "ts_26.103"
      ]
    },
    {
      "chunk_id": "ts_23.977_10.2.1.4",
      "section_id": "10.2.1.4",
      "section_title": "Sample message flow",
      "content": "A sample message flow for a mobile terminating call with Ater interface going to the MGW is shown below.\nNOTE:\tSome details of this message flow are still for further study.\nFigure 10.2.1.4-1: Message flow for a mobile terminating call with A-ter interface going to the MGW\n1\tThe call is routed to the terminating MSC; the Codec List is included\n2\tThe MSC establishes the GSM radio link with the mobile and sends the SETUP message.\n3\ta)\tThe mobile indicates what codecs it supports in the CALL CONFIRMED message.\nb)\tThe MSC determines that it wants to use a \"new\" codec that is supported only by the MGW, but not supported by the TRAUs in the BSS\nc)\tThe MSC selects a sub-set of the codecs (including now only the \"new\" ones supported by the MGW), allocates the Circuit ID code, and sends an \"establish 16 kbit/s bearer for A-ter\" message to the MGW.Comments: extra signalling is needed if 8kbit/s or 32k sub-multiplexing of TDM lines is needed. Use of 16 kbit/s on the A-ter may require extra bandwidth on the BSC-MSC interface.\n4\tThe MGW selects transcoding resources, possibly further restricting the sub-set offered by the MSC and associates them with the TDM sub channel indicated by the MSC on the interface to the BSS.\n5\tThe MSC copies the CIC and codec information into the Ater interface Assignment Request message. A new IE is added to this message to indicate that the MSC has allocated a TC in the core network and hence that the BSS shall not perform transcoding.\n6\ta)\tThe BSC accepts the speech codec type (including all necessary parameters like codec configuration an sub-multiplexing scheme) provided by the MSC and selects the radio channel that the BTS will use.\nb)\tWith the general A-bis architecture, the selection of the radio channel also identifies the A-bis user plane channel that will be used.\nc)\tThe BSC through connects the A-bis user plane channel to the 16 (8, 32) kbps Ater circuit to the MGW, identified by the CIC provided by the MSC.\nd)\tThe BSC commands the BTS to activate the radio channel and to start transmission/reception on the A-bis user plane.\ne)\tIf at step (a) the BSC knows that the BTS cannot support the channel coding for the codec indicated by the MSC, or, for other reasons the assignment fails, then the BSCS sends an ASSIGNMENT FAILURE with the cause \"switch circuit pool\" and the \"circuit pool list\" information element. The MSC uses this information to adjust its choice of codec. (see 48.008 [17] clause 3.1.1.2).\n7\tThe BTS sends TRAU frames directly to the TC inside the MGW. These TRAU frames carry information on the selected codec type and other details. The MGW responds with TRAU frames and obeys the procedures, e.g. time alignment etc.",
      "chunk_type": "procedure",
      "cross_references": [
        "clause_3.1.1.2",
        "figure_10.2.1.4-1"
      ]
    },
    {
      "chunk_id": "ts_23.977_11",
      "section_id": "11",
      "section_title": "Conclusions",
      "content": "The extended set of scenarios provided in this Technical Report has enabled a detailed examination of the requirements identified within the report. These scenarios have gone beyond the existing basic set of scenarios provided in the current stage 2 documents e.g. TS 23.153 [2]. Some scenarios, e.g. intra UTRAN handover or call forwarding, have not been documented because no further insights were expected to have come from this.\nThis Technical Report has also identified that architectural solutions exist for all of the investigated interworking scenarios for 2G and 3G access for mobile-to-mobile and mobile-to-PSTN calls, which\n-\tmaximise the perceived speech quality;\n-\tminimise the core network bandwidth;\n-\tminimise the usage of signal processing devices in the path.\nThe study briefly addressed the interworking of CS speech with IMS (see clause 5.4) and triggered the related work ongoing in CN3 in the context of TS 29.163 [13]\nThis study has also identified that there are a few issues that could benefit from further standardisation work. These include:\n-\tDifferent AMR-NB configurations are preferred for GERAN and UTRAN. A common AMR-NB configuration would improve the situation for GERAN-UTRAN calls (see clause 7.1). Changes would be necessary in TS 26.103 [5] and TS 28.062 [4] and some dependent specifications (e.g. TS 23.153 [2]).\n-\tThe standardisation of additional codec framing for EFR over the Nb interface would be of benefit for the GERAN-GERAN calls (see clause 9.3). Changes would be necessary in TS 26.101 [18] and TS 26.102 [8].\n-\tSome clarifications in the OoBTC could improve inter-vendor interoperability and minimize signalling load (see clause 5.5). Changes would be necessary in TS 23.153 [2].\n-\tIt could be made optional for the MSC-S in OoBTC to follow the local TFO decision on the \"Optimal Codec Type\" (see clause 5.5.2). Changes would be necessary in TS 23.153 [2] and TS 28.062 [4].\n-\tFurther clarifications on Inter-PLMN signalling could be provided to include in addition to TFO/PCM also BICC and potentially SIP. No problems are expected with using BICC between CS-PLMNs (see clauses 4.4 and 4.5). The gain of using SIP for the interconnection of CS-PLMNs has not been studied in its entirety within this TR (see clause 4.5).\nSA2 recommends that interested companies bring the identified issues forward in the relevant working groups.\nAnnex A:Example for migrating a service to TrFO\nA.1\tService description\nAs an example for a non-standardised service, a \"personal ring back tone (PRBT) service\" is considered, where the B-party can choose the ringing tone that the A-party will hear, e.g. a song. A media server inserts media (e.g. the song) towards the calling A-party, as long as the B-party is alerted.\nA.2\tRealization\nA.2.1\tOverview\nIn clause 2.2 it is described how the service might be realised in the following network scenarios:\n1.\tA network according to R99 specifications.\n2.\tA network with packet transport, BICC and TrFO/OoBTC with integrated MSC.\n3.\tA network with packet transport, BICC and separation of MSC in MSCS and MGW without TrFO/OoBTC.\n4.\tA network with packet transport, BICC, TrFO/OoBTC and separation of MSC in MSCS and MGW.\nThe analysis of all four scenarios allows distinguishing the TrFO/OoBTC specific impact from the impact arising from the separation of call control and bearer. It also illustrates two different migration paths for introduction of TrFO/OoBTC and Rel-4 architecture: 1🡪 2🡪4 and 1🡪3🡪4.\nNOTE:\tThe descriptions are not intended as a complete service description as this is and should remain a non-standardised service. Thus only the aspects relating to TrFO introduction and the understanding of the underlying assumptions are detailed.\nA.2.2\tHigh level description\nOnce the B party GMSC queries the HLR, it receives an indication that the B-party has subscribed to the PRBT service. Thus, after applying the usual call handling, the B-party GMSC sets-up a connection with a media server, where the ringing tone is stored. The media server inserts the ringing tone. Once the B-party answers the call, the media server is disconnected.\nIn all what follows, we assume a mobile-to-mobile call within a network, where the VMSC of the A-party has GMSC functionality. The entities involved in the service are shown in figure A.1.\nFigure A.1: Functional entities involved in the Service\nThe GMSC B plays a key role in the service. Therefore in the following VMSC A = GMSC B will often be referred to as MSC for simplicity.\nA.2.3\tMessage flow for a Release 99 network\nFigure A.2 shows a possible message flow for a R99 network. TDM transport with G.711 in the core network is assumed. Moreover, it is assumed that TDM transport and G.711 are used between media server and GMSC, and that AMR is used between UE A and VMSC A in Iu mode.\nFigure A.2: Message flow in a R99 network\n1.\tThe MSC receives the initial SETUP message from the UE. It recognises that this is a mobile terminating call and interrogates the HLR. The MSC receives the roaming number and an indication that the B-party has subscribed to the PRBT service.\n2.\tThe MSC sends an IAM message to the VMSC B. It applies the usual handling for Iu mode and inserts a transcoder, as it will use G.711 encoded media towards the VMSC of the B-party, but use AMR on the Iu interface towards the UE.\n3.\tThe MSC sends a RAB assignment request towards the RNC.\n4.\tAt the Iu interface the Iu bearer is established and the user plane is initialised.\n5.\tThe MSC receives the RAB assignment response.\n6.\tThe MSC sends a Continuity message indicating a successful continuity check.\n7.\tThe MSC receives the acknowledgement for the IAM.\n8.\tThe MSC sends an IAM towards the media server, where the ringing tone is stored.\n9.\tThe MSC receives the acknowledgement from the media server.\n10.\tThe MSC informs the A-party that the B-party is alerted and in-band information is available.\nThe media server inserts the ringing tone and the MSC forwards it towards the A-party. The A-party listens to the nice ringing tone selected by the B-party. At some point in time the B-party accepts the call and the message sequence continues.\n11.\tThe MSC receives the answer message from the VMSC B.\n12.\tThe MSC sends a CONNECT message towards UE A.\n13.\tThe MSC releases the connection with the media server.\n14.\tThe media server confirms the release message and stops sending media.\nA.2.4\tMessage flow with BICC and TrFO\nIn this clause it is assumed that the network has been migrated to support packet transport and BICC with TrFO according to Rel-4 specifications with an integrated MSC. In particular, call and bearer control are now separated. However it is assumed that the media server is still the same, and is still connected via ISUP and using TDM transport with G.711.The message flow might now look as shown in figure A.3. Here and in the following forward bearer establishment is considered.\nFigure A.3: Message flow with BICC and TrFO in a Rel-4 network\nCompared to the flow for a release 99 architecture in figure A.2, there are the following changes:\n-\tThe IAM message 2 contains codec information.\n-\tAs AMR is expected at both Iu and Nb interfaces, at this point there is no need to insert a transcoder.\n-\tThe IAM message 2 triggers an additional bearer and codec information message, which contains the necessary information for forward bearer establishment and also codec information in response to the codec information in the IAM.\n-\tNb bearer establishment takes place.\n-\tThe Iu/Nb user plane can be established \"through the MSC\".\n-\tOnce the IAM message 8 is sent to the media server, a transcoder is inserted. Again, this is part of usual call handling: insertion of the transcoder is triggered because the MSC is configured in such a way that it knows that the link to the media server is a TDM link with G.711 encoding (as for other links, e.g. towards the PSTN).\n-\tThe transcoder can be removed once the connection to the media server is released. Codec modification is not necessary.\nWe conclude that the only added \"service specific\" actions are the insertion of the transcoder and its removal. Both are triggered by the link information configured in the MSC. Service and bearer separation is possible without added complexity for this example service.\nA.2.5\tMessage flow with split architecture without TrFO\nThis clause describes an alternative intermediary scenario. It is assumed that the network has been migrated to support packet transport and BICC with the split in call control and bearer according to Rel-4 specifications, but yet without support of TrFO. Thus the MSC is split to MSCS and MGW. However it is assumed that the media server is still the same integrated box, which is connected via ISUP and using TDM transport with G.711.The message flow might now look as shown in figure A.4.\nFigure A.4: Message flow with split architecture without TrFO\nCompared to the flow for a release 99 architecture in figure A.2, there are the following changes:\n-\tThe functionality of the MSC is now distributed to MSC-Server and MGW. In particular, the transcoder is now located in the MGW.\n-\tH.248 based interactions take place at the Mc interface between MSC-Serve and MGW, some of which contain the necessary codec information.\n-\tNb bearer establishment takes place.\n-\tThe Nb user plane is established. As different codecs are used at Iu and Nb, the user planes are established independently.\nWe conclude that service and bearer separation is possible without added complexity for this example service.\nA.2.6\tMessage flow with split architecture and TrFO\nThis clause describes the scenario where network supports all possibilities of the Release 4 architecture, i.e. it is assumed that the network supports packet transport and BICC with the split in call control and bearer according to Rel-4 specifications as well as TrFO/OoBTC. As in the previous clause the MSC is split to MSCS and MGW. However it is assumed that the media server is still the same integrated box, which is connected via ISUP and using TDM transport with G.711.The message flow might now look as shown in figure A.5.\nFigure A.5 Message flow with split architecture and TrFO\nThe flow A.5 can be considered as a combination of the flows A.3 and A.4 in the previous two clauses\nCompared to the message flow A.3,\n-\tThe functionality of the MSC is now distributed to MSC-Server and MGW. In particular, the transcoder is now located in the MGW.\n-\tH.248 based interactions take place at the Mc interface between MSC-Serve and MGW, some of which contain the necessary codec information.\nCompared to the message flow A.4,\n-\tThe IAM message 2 contains codec information.\n-\tAs AMR is expected at both Iu and Nb interfaces, at this point there is no need to insert a transcoder between the two.\n-\tAs there is codec information in the IAM, codec information is sent together with the bearer information in the response.\n-\tThe Iu/Nb user plane can be established \"through the MSC\".\n-\tOnce the IAM message 8 is sent to the media server, the MGW is informed in the ADDreq message that G.711 will be used on this link. Therefore the MGW inserts a transcoder. Again, this is part of usual call handling.\n-\tThe transcoder can be removed once the connection to the media server is released. Codec modification is not necessary.\nA.3\tSummary and conclusions\nIn summary, each time a connection request is sent out, there is a need to consider whether insertion or removal of a transcoder is required. The decision depends on the codecs used on the link and the link which will be connected to it. For this purpose link properties are configured, and the results of a codec negotiation are taken into account.\nFor this example service three points in the call flow have been identified, where a transcoder may be added or removed depending on the scenario and configuration: after the initial IAM to the VMSC, after the IAM to the media server and after the release of the connection to the media server. With the split architecture, these points become the establishment and removal of the connections. Now, if the same example service is considered for various scenarios, then the call flows look analogous. In each case the decision for transcoder insertion or removal depends on the scenario. This also holds for scenarios not considered in the previous clauses e.g. for access via A interface instead of Iu (with obvious differences and adjustments), or e.g. for a scenario where the A-party VMSC is different from the B-party GMSC.\nIn the same way similar example services would have their dedicated points for transcoder insertion at establishment and release of links and the same logic would apply.\nWe conclude that service and bearer separation is possible without added complexity for this example service and similar services.\nAnnex B:Change history\nChange history\nDate\nTSG #\nTSG Doc.\nCR\nRev\nCat\nSubject/Comment\nOld\nNew\n2004-06\nSP-24\nSP-040445\n-\n-\n-\nPresented for approval\n1.4.0\n2.0.0\n2004-06\nSP-24\nSP-040445\n-\n-\n-\nRaised to v.6.0.0 after approval at SA#24\n2.0.0\n6.0.0\n2004-09\nSP-25\nSP-040529\n0001\n-\n-\nEditorials TR 23.977\n6.0.0\n6.1.0\n2007-06\n-\n-\n-\n-\n-\nUpdate to Rel-7 version (MCC)\n6.1.0\n7.0.0\n2008-06\nSP-42\n-\n-\n-\n-\nUpdate to Rel-8 version (MCC)\n7.0.0\n8.0.0\n2009-12\nSP-46\n-\n-\n-\n-\nUpdate to Rel-9 version (MCC)\n8.0.0\n9.0.0\n2011-03\nSP-51\n-\n-\n-\n-\nUpdate to Rel-10 version (MCC)\n9.0.0\n10.0.0\n2012-09\n-\n-\n-\n-\n-\nUpdate to Rel-11 version (MCC)\n10.0.0\n11.0.0\n2014-09\nSP-65\n-\n-\n-\n-\nUpdate to Rel-12 version (MCC)\n11.0.0\n12.0.0\n2015-12\n-\n-\n-\n-\n-\nUpdate to Rel-13 version (MCC)\n12.0.0\n13.0.0\n2017-03\n-\n-\n-\n-\n-\nUpdate to Rel-14 version (MCC)\n13.0.0\n14.0.0\n2018-06\nSP-80\n-\n-\n-\n-\nUpdate to Rel-15 version (MCC)\n14.0.0\n15.0.0\n2020-07\nSP-88E\n-\n-\n-\n-\nUpdate to Rel-16 version (MCC)\n15.0.0\n16.0.0\n2022-03\nSP-95E\n-\n-\n-\n-\nUpdate to Rel-17 version (MCC)\n16.0.0\n17.0.0\n2024-03\n-\n-\n-\n-\n-\nUpdate to Rel-18 version (MCC)\n17.0.0\n18.0.0",
      "chunk_type": "general",
      "cross_references": [
        "clause_5.4",
        "clause_7.1",
        "clause_9.3",
        "clause_5.5",
        "clause_5.5.2",
        "clause_4.5",
        "clause_2.2",
        "ts_23.153",
        "ts_29.163",
        "ts_26.103",
        "ts_28.062",
        "ts_26.101",
        "ts_26.102",
        "ts_23.977"
      ]
    }
  ]
}