{
  "metadata": {
    "specification_id": "ts_29.010",
    "version": "18.0.0",
    "title": "3GPP TS 29.010",
    "file_path": "/content/drive/MyDrive/RAG_thesis/data/29_series/29010-i00/29010-i00.docx"
  },
  "export_info": {
    "export_date": "2025-07-26T09:13:48.317711",
    "total_chunks": 131
  },
  "chunks": [
    {
      "chunk_id": "ts_29.010_1",
      "section_id": "1",
      "section_title": "Scope",
      "content": "The scope of the present document is:\ni)\tto provide a detailed specification for the interworking between information elements contained in layer 3 messages sent on the MS-MSC interface (Call Control and Mobility Management parts of 3GPP TS 24.008 [4]) and parameters contained in MAP services sent over the MSC-VLR interface (3GPP TS 29.002 [9]) where the MSC acts as a transparent relay of information;\nii)\tto provide a detailed specification for the interworking between information elements contained in BSSMAP\tmessages sent on the BSC-MSC interface (3GPP TS 48.008 [12]) and parameters contained in MAP services sent\tover the\tMSC-VLR interface (3GPP TS 29.002 [9]) where the MSC acts as a transparent relay of information;\niii)\tto provide a detailed specification for the interworking between information elements contained in BSSMAP\tmessages (3GPP TS 48.008 [12]) and RANAP ((3GPP TS 25.413 [7]);\niv)\tto provide a detailed specification for the interworking as in i) and ii) above when the MSC also processes the information;\nv)\tto provide a detailed specification for the interworking between information elements contained in layer 3 messages sent on the MS-SGSN interface (GPRS mobility part of 3GPP TS 24.008 [4]) and parameters contained in MAP services sent over the SGSN-HLR interface (3GPP TS 29.002 [9]);\nvi)\tto provide a detailed specification for the interworking between information elements contained in RANAP messages sent on the SGSN-RNC interface (3GPP TS 25.413 [7]) and parameters contained in S1AP messages sent on the MME-eNodeB interface (3GPP TS 36.413 [21]);\nvii)\tto provide a detailed specification for the interworking between information elements contained in BSSMAP\tmessages (3GPP TS 48.008 [12]) or RANAP messages (3GPP TS 25.413 [7]) during SRVCC handovers.\nInterworking for supplementary services is given in 3GPP TS 29.011 [11]. Interworking for the short message service is given in 3GPP TS 23.040 [3] and 3GPP TS 24.011. Interworking between the call control signalling of 3GPP TS 24.008 [4] and the PSTN/ISDN is given in GSM 09.03 [13], 3GPP TS 29.007 [10] and 3GPP TS 49.008 [14] [14]. Interworking between the 'A' and 'E' interfaces for inter-MSC handover signalling is given in 3GPP TS 29.007 [10] and 3GPP TS 49.008 [14] [14].",
      "chunk_type": "general",
      "cross_references": [
        "ts_24.008",
        "ts_29.002",
        "ts_48.008",
        "ts_25.413",
        "ts_36.413",
        "ts_29.011",
        "ts_23.040",
        "ts_24.011",
        "ts_29.007",
        "ts_49.008"
      ]
    },
    {
      "chunk_id": "ts_29.010_1.1",
      "section_id": "1.1",
      "section_title": "References",
      "content": "The following documents contain provisions which, through reference in this text, constitute provisions of the present document.\n-\tReferences are either specific (identified by date of publication, edition number, version number, etc.) or non‑specific.\n-\tFor a specific reference, subsequent revisions do not apply.\n-\tFor a non-specific reference, the latest version applies.  In the case of a reference to a 3GPP document (including a GSM document), a non-specific reference implicitly refers to the latest version of that document in the same Release as the present document.\n[1]\t3GPP TS 21.905: \"3G Vocabulary\".\n[2]\t3GPP TS 23.009: \"Handover procedures\".\n[3]\t3GPP TS 23.040: \"Technical realization of the Short Message Service (SMS) Point to Point (PP)\".\n[4]\t3GPP TS 24.008: \"Mobile Radio Interface Layer 3 specification; Core Network Protocols-Stage 3\".\n[5]\t3GPP TS 24.010: \"Mobile radio interface layer 3  Supplementary services specification - General aspects\".\n[6]\t3GPP TSº24.011: \"Point-to-Point (PP) Short Message Service (SMS) support on mobile radio interface\".\n[7]\t3GPP TS 25.413: \"Iu interface RANAP signalling\".\n[8]\t3GPP TS 27.001: \" General on Terminal Adaptation Functions (TAF) for Mobile Stations (MS)\".\n[9]\t3GPP TS 29.002: \"Mobile Application Part (MAP) specification\".\n[10]\t3GPP TS 29.007: \"General requirements on interworking between the Public Land Mobile Network (PLMN) and the Integrated Services Digital Network (ISDN) or Public Switched Telephone Network (PSTN)\".\n[11]\t3GPP TS 29.011: \"Digital cellular telecommunications system (Phase 2+); Signalling interworking for supplementary services\".\n[12]\t3GPP TS 48.008: \" Mobile Switching Centre ‑ Base Station System (MSC - BSS) interface  Layer 3 specification\".\n[13]\tGSM 09.03: \"Digital cellular telecommunications system (Phase 2+); Signalling requirements on interworking between the Integrated Services Digital Network (ISDN) or Public Switched Telephone Network (PSTN) and the Public Land Mobile Network (PLMN)\".\n[14]\t3GPP TS 49.008 [14]: \"Digital cellular telecommunications system (Phase 2+); Application of the Base Station System Application Part (BSSAP) on the E-interface\".\n[15]\t3GPP TS 29.108:  \"Application of the Radio Access Network Application Part (RANAP) on the E-interface\"\n[16]\t3GPP TS 23.271:  \"Functional stage 2 description of LCS\"\n[17]\t3GPP TS 43.051:  \"Technical Specification Group GSM/EDGE; Radio Access Network; Overall description - Stage 2\".\n[18]\t3GPP TS 23.012: \"Location management procedures\".\n[19]\tVoid.\n[20]\t3GPP TS 24.301: \"Non-Access-Stratum (NAS) protocol for Evolved Packet System (EPS)\".\n[21]\t3GPP TS 36.413: \"Evolved Universal Terrestrial Radio Access Network E-UTRAN); S1 Application Protocol (S1AP)\".\n[22]\t3GPP TS 23.401: \" General Packet Radio Service (GPRS) enhancements for Evolved Universal Terrestrial Radio Access Network (E-UTRAN) access \".\n[23]\t3GPP TS 29.060: \"GPRS Tunnelling Protocol (GTP) across the Gn and Gp interface\".\n[24]\t3GPP TS 48.018: \" Base Station System (BSS) -Serving GPRS Support Node (SGSN); BSS GPRS Protocol (BSSGP)\".\n[25]\t3GPP TS 29.280: \"3GPP EPS Sv interface (MME to MSC) for SRVCC\".\n[26]\t3GPP TS 38.413: \"NG-RAN; NG Application Protocol (NGAP)\".",
      "chunk_type": "general",
      "cross_references": [
        "ts_21.905",
        "ts_23.009",
        "ts_23.040",
        "ts_24.008",
        "ts_24.010",
        "ts_25.413",
        "ts_27.001",
        "ts_29.002",
        "ts_29.007",
        "ts_29.011",
        "ts_48.008",
        "ts_49.008",
        "ts_29.108",
        "ts_23.271",
        "ts_43.051",
        "ts_23.012",
        "ts_24.301",
        "ts_36.413",
        "ts_23.401",
        "ts_29.060",
        "ts_48.018",
        "ts_29.280",
        "ts_38.413"
      ]
    },
    {
      "chunk_id": "ts_29.010_1.2",
      "section_id": "1.2",
      "section_title": "Abbreviations",
      "content": "Abbreviations used in the present document are listed in 3GPP TS 21.905 [1].",
      "chunk_type": "general",
      "cross_references": [
        "ts_21.905"
      ]
    },
    {
      "chunk_id": "ts_29.010_1.3",
      "section_id": "1.3",
      "section_title": "Definitions",
      "content": "The following terms are used in this Technical Specification:\nA/Gb mode: mode of operation of the MS when connected to the Core Network via GERAN and the A and/or Gb interfaces. Throughout this specification the term GSM refers to GERAN A/Gb mode.\nIu mode: mode of operation of the MS when connected to the Core Network via GERAN or UTRAN and the Iu interface. Throughout this specification the term UMTS refers to UTRAN or GERAN Iu mode.",
      "chunk_type": "definition",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.010_2.1",
      "section_id": "2.1",
      "section_title": "Transparent procedures",
      "content": "The following MSC procedures require transparent mapping of access protocol information elements into MAP parameters and vice versa (see 3GPP TS 29.002 [9] for definitions and the use of the procedures):\n-\tlocation update;\n-\tforward new TMSI;\n-\tprovide IMSI;\n-\tobtain IMEI;\n-\tcheck IMEI;\n-\tauthenticate;\n-\ttrace subscriber activity.",
      "chunk_type": "procedure",
      "cross_references": [
        "ts_29.002"
      ]
    },
    {
      "chunk_id": "ts_29.010_2.2",
      "section_id": "2.2",
      "section_title": "Non-transparent procedures",
      "content": "Procedures in this class require processing in the MSC and information element mapping. These procedures include those related to:\n-\toutgoing call set-up;\n-\tincoming call set-up;\n-\thandover;\n-\tcipher mode setting;\n-\tlocation services.",
      "chunk_type": "procedure",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.010_3.1",
      "section_id": "3.1",
      "section_title": "General",
      "content": "When the MSC receives a forward message from the BSS (possibly forwarded transparently from the MS), it will invoke the desired MAP service and establish a cross reference between the BSSAP procedure and the MAP procedure in order to return the result of the operation to the BSS (which may forward it transparently to the MS. The cross reference is deleted when the MSC terminates the MAP procedure.\nPositive or negative results of the MAP procedure are returned in the appropriate BSSAP message.\nThe parameters of the forward BSSAP message are mapped by a one-to-one mapping into the parameters of the MAP service. However, in some cases parameters received on the radio path may be suppressed at the MSC because they are related to another protocol entity, e.g. information related to RR-management may be included in MM-management messages. Similarly, parameters received in the (positive) MAP service response are mapped one-to-one into parameters of the corresponding backward BSSAP message.\nA negative outcome, as carried in various MAP services (MAP specific service response, MAP_U_ABORT, MAP_P_ABORT, MAP_NOTICE and premature MAP_CLOSE, see 3GPP TS 29.002 [9] for definitions) is mapped into a cause value in the required backward BSSAP message. In this case several negative results of MAP may be mapped into the same BSSAP cause value, i.e. without discrimination between these negative results.\nNOTE:\tFor O & M purposes, the MAP procedure entity in the MSC may require a more detailed overview of negative results than the MS.\nThese principles are illustrated in figure 1.\n24.008 (48.008)                              MAP service\nforward message                                request\n------------>                                ----------->\n+-----------+                                +---------+\n|information|                                |parameter|\n|  element  |                                |         |\n+-----------+           one-to-one           +---------+\n+----->-------------------------------->----+\nmapping\nMAP service\npositive ack                                  response\n<------------                               <-----------\n+-----------+                                +---------+\n|information|                                |parameter|\n|  element  |                                |         |\n+-----------+           one-to-one           +---------+\n+-----<--------------------------------<----+\nmapping\nnegative\nnegative cause                                response\n<------------                               <-----------\n+-----------+                                +---------+\n|   cause   |                                |  cause  |\n+-----------+    one-to-one or many-to-one   +---------+\n+-----<--------------------------------<----+\nmapping\nFigure 1: Illustration of mapping principles in the MSC\nFor each of the transparent operations listed in clause 2.1, the following format is used to show the mapping.\n----------------------------------------------------------------\n| 24.008 or 48.008                29.002          |Notes\n--------┼-------------------------------------------------┼-----\nForward | MS/BSS to MSC                 MSC to VLR        |\nmessage |   message name              MAP service request |\n| information element 1  <--->  parameter 1       |\n| information element 2  <--->  parameter 2       |\n--------┼-------------------------------------------------┼-----\nPositive| MSC to MS/BSS                  VLR to MSC       |\nresult  |   message name               positive response  |\n| information element 1  <--->  parameter 1       |\n| information element 2  <--->  parameter 2       |\n--------┼-------------------------------------------------┼-----\nNegative| MSC to MS/BSS                  VLR to MSC       |\nresult  |   message name               negative response  |\n|     cause 1            <--->     cause 1        |\n|     cause 2            <--->     cause 2        |\n|     cause 3            <--->  MAP_U/P_ABORT     |\n|     cause 3            <--->   MAP_NOTICE       |\n|     cause 3            <--->    MAP_CLOSE       |\n--------┴-------------------------------------------------┴-----\nEquivalent mapping principles apply for operations invoked by the VLR towards the BSS/MS. However, negative results are generally not received from the BSS/MS but are generated in the MSC. Therefore, for such operations the interworking for negative results is not normally shown.",
      "chunk_type": "definition",
      "cross_references": [
        "clause_2.1",
        "figure_1",
        "ts_29.002"
      ]
    },
    {
      "chunk_id": "ts_29.010_3.2",
      "section_id": "3.2",
      "section_title": "Routeing area updating",
      "content": "---------------------------------------------------------------\n|       24.008                  29.002           |Notes\n--------┼------------------------------------------------┼-----\nForward | GMM (ROUTEING AREA        MAP_UPDATE_GPRS    _ |\nmessage |     UPDATE REQUEST)         LOCATION request   |\n|                                                |\n|     MS classmark 1               -             |\n|     MS classmark 4               -             |\n|     GPRS Ciphering               -             |\n|       key seq number                           |\n|     Mobile station               IMSI          |\n|       identity                                 |\n|     Old routeing area            -             |\n|       identification                           |\n--------┼------------------------------------------------┼-----\nPositive| GMM (ROUTEING AREA        MAP_UPDATE_GPRS      |\nresults |     UPDATE ACCEPT)          LOCATION response  |\n|                                                |\n|    Routeing area                 -             |\n|       identification                           |\n|    Mobile station                -             |  1\n|       identity                                 |\n| C  Mobile station                -             |\t2\n| C  Reject: IMSI unknown          -             |  3\n|            in HLR                              |\n| C  Reject: MSC temporarily       -             |  4\n|            not reacheable                      |\n--------┼------------------------------------------------┼-----\nNegative| GMM (ROUTEING AREA        MAP_UPDATE_GPRS      |\nresults |     UPDATE REJECT)          LOCATION response  |\n|                                                |\n|   Network failure               -             |  5\n|    GPRS services             Unknown HLR       |\n|       not allowed in                           |\n|       this PLMN                                |\n|    GPRS services          Unknown subscriber   |  6\n|       not allowed       (no GPRS subscription) |\n|    GPRS services and      Unknown subscriber   |  7\n|       non GPRS services    (IMSI unknown)      |\n|       not allowed                              |\n| C  GPRS services          Unknown subscriber   |  8\n|       not allowed       (no GPRS subscription) |\n| C  GPRS services and      Unknown subscriber   |  9\n|       non-GPRS services    (IMSI unknown)      |\n|       not allowed                              |\n|    MS identity cannot            -             |  10\n|       be derived by                            |\n|       the network                              |\n|                           Roaming not allowed: |\n|    GPRS services not         PLMN not allowed  |\n│       allowed in this                          │\n│       PLMN                                     │\n|    LA not allowed                -             |  14\n|    Roaming not allowed           -             |\n|       in this LA                               |\n|    No Suitable cells in            -           |  11\n|        location area                           |\n|    GPRS services not         Operator          |\n|       allowed in this        determined barring|\n│       PLMN                                     │\n|    GPRS services not             -             |  12\n|    allowed in this                             |\n|        PLMN                                    |\n| C  GPRS services not             -             |  12\n|    allowed in this                             |\n|        PLMN                                    |\n|                          Additional roaming    |\n|                            not allowed:        |\t13\n|   No Suitable cells in     Supported RAT Types |\n|        location area           not allowed     |\n|    Illegal MS                    -             |\n|    Illegal ME                    -             |\n|    Network failure        System Failure       |\n|    Network failure        Unexpected data value|\n|    Network failure        MAP_U/P_ABORT        |\n|    Network failure        MAP_NOTICE           |\n|    Network failure        MAP_CLOSE            |\n--------┴------------------------------------------------┴-----\nNOTE 1:\tThe mobile station identity is inserted by the SGSN if the SGSN wants to deallocate or re-allocate a P-TMSI. If the SGSN wants to deallocate the P-TMSI it shall include the IMSI. If the SGSN wants to re-allocate the P-TMSI it shall include the new P-TMSI. If a P-TMSI is included, the MS shall respond with a ROUTEING AREA UPDATE COMPLETE message.\nNOTE 2:\tThe mobile station identity is inserted by the SGSN if it is received in a BSSAP+ LOCATION UPDATE ACCEPT message from the VLR. If a TMSI is included, the MS shall respond with a ROUTEING AREA UPDATE COMPLETE message. Only used in the Combined Routeing and Location Area procedure.\nNOTE 3:\tThis reject cause is inserted on the positive response by the SGSN if the SGSN receives a BSSAP+ LOCATION UPDATE REJECT message from the VLR indicating in the reject cause IMSI unknown in HLR. Only used in the Combined Routeing and Location Area procedure.\nNOTE 4:\tThis reject cause is inserted on the positive response by the SGSN if the SGSN does not receive any response from the VLR to a previous BSSAP+ LOCATION UPDATE REQUEST message. Only used in the Combined Routeing and Location Area procedure.\nNOTE 5:\tThe Unknown RA error is only generated as a result of incorrect information being inserted by the BSS.\nNOTE 6:\tThe HLR shall send Unknown subscriber with diagnostic value No GPRS subscription if the HLR indicates that there is an error in the type of subscription (i.e. SGSN requests service for a non-GPRS only subscriber). The HLR may also send this error in the MAP SEND AUTHENTICATION INFO RESPONSE message.\nNOTE 7:\tThe HLR shall send Unknown subscriber with diagnostic value IMSI unknown if the HLR indicates that the IMSI provided by the SGSN is unknown.\nNOTE 8:\tThe HLR shall send Unknown subscriber with diagnostic value No GPRS subscription if the HLR indicates that there is an error in the type of subscription (i.e. SGSN requests service for a non-GPRS only subscriber). Used in the Combined Routeing and Location Area procedure. The HLR may also send this error in the MAP SEND AUTHENTICATION INFO RESPONSE message.\nNOTE 9:\tThis reject cause is inserted if the SGSN receives a MAP GPRS UPDATE LOCATION negative response message indicating IMSI unknown. Used in the Combined Routeing and Location Area procedure.\nNOTE 10:\tThis reject cause is inserted if the SGSN does not receive any response from the old SGSN to a previous SGSN CONTEXT REQUEST message.\nNOTE 11: The \"No Suitable cells in location area\" error is generated when the MS has access to only part of the PLMN e.g. due to Administrative Restriction of  Subscribers' Access, but where there may also be suitable location areas available. The MS retries on another location area. The recommended cause due to Administrative Restriction of Subscriber\"s Access is \"No Suitable Cells in Location Area\", but cause \"Roaming Not Allowed in this LA\" may also be used, based on operator configuration.\nNOTE 12:\tThis reject cause is inserted if the SGSN receives in MAP INSERT SUBSCRIBER DATA message an indication of Roaming restricted in SGSN due to unsupported feature.\nNOTE 13:\tOther reject causes than \"no Suitable cells in location area\" can be used (e.g. \"Roaming not allowed in this location area\").\nNOTE 14:\tThe cause \"LA not allowed\" shall be sent only if the HLR indicates that due to subscription to a \"regionally restricted service\" the MS is not allowed to operate in the location area.",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.010_3.3",
      "section_id": "3.3",
      "section_title": "Authentication",
      "content": "The message flow for the authentication procedure is shown in figure 2.\nMS                        MSC                                VLR\nMAP_AUTHENTICATE request\nAUTHENTICATION REQUEST    <----------------------------------\n<-----------------------\nAUTHENTICATION RESPONSE\n----------------------->        MAP_AUTHENTICATE response\n---------------------------------->\nor\nMAP_U/P_ABORT\n---------------------------------->\nFigure 2: Authentication operation\nThe MSC can only act on a MAP_AUTHENTICATE request if an RR connection exists with the MS. If such a connection does not exist, the MSC shall terminate the MAP procedure with a MAP_U_ABORT. The same applies if the MS does not respond to an AUTHENTICATION REQUEST message.\n---------------------------------------------------------------\n|  24.008                  29.002                |Notes\n--------┼------------------------------------------------┼-----\nForward | AUTHENTICATION REQUEST   MAP_AUTHENTICATE      |\nmessage |                             request            |\n|                                                |\n| RAND                     RAND                  |\n|                                                |\n| Ciphering key seq        CKSN                  |\n| number                                         |\n--------┼------------------------------------------------┼-----\nBackward| AUTHENTICATION REQUEST   MAP_AUTHENTICATE      |\nresult  |                             response           |\n|                                                |\n| SRES                     SRES                  |\n--------┴------------------------------------------------┴-----\nIf the SRES parameter does not match the value stored in the VLR, then the ongoing MAP procedure shall be terminated with a cause 'illegal subscriber'. This shall cause the MSC to send an AUTHENTICATION REJECT message.",
      "chunk_type": "general",
      "cross_references": [
        "figure_2"
      ]
    },
    {
      "chunk_id": "ts_29.010_3.4",
      "section_id": "3.4",
      "section_title": "Retrieval of the IMSI from the MS",
      "content": "The VLR may request open identification of an MS with a MAP_PROVIDE_IMSI request.\nThe mapping of information elements is as follows:\n---------------------------------------------------------------\n|  24.008                  29.002                |Notes\n--------┼------------------------------------------------┼-----\nForward | IDENTITY REQUEST         MAP_PROVIDE_IMSI      |\nmessage |                             request            |\n|     Identity type                              |\n|     set to: IMSI                               |  1\n--------┼------------------------------------------------┼-----\nBackward| IDENTITY RESPONSE        MAP_PROVIDE_IMSI      |\nresult  | Mobile Identity (IMSI)      response           |\n--------┴------------------------------------------------┴-----\nNOTE 1:\tThe INVOKE does not carry any parameters. The identity type is inferred from the invoke name.\nThe MSC shall return a MAP_PROVIDE_IMSI response with user error \"absent subscriber\" if:\n-\tthere is no RR connection with the MS when the MAP service request is received;\n-\tthere is no response from the MS.",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.010_3.5",
      "section_id": "3.5",
      "section_title": "Reallocation of TMSI",
      "content": "This operation is invoked by the VLR. The MAP_FORWARD_NEW_TMSI request contains the new TMSI which is forwarded to the MS in the TMSI REALLOCATION COMMAND. When the MS acknowledges the receipt of the new TMSI, the MSC will return a MAP_FORWARD_NEW_TMSI response to the VLR.\nIf there is no radio connection to the MS when the MSC receives the MAP service request, the MSC shall ignore the message.\n---------------------------------------------------------------\n|  24.008                  29.002                |Notes\n--------┼------------------------------------------------┼-----\nForward | TMSI REALLOCATION     MAP_FORWARD_NEW_TMSI     |\nmessage |    COMMAND               request               |\n|                                                |\n| Mobile identity       TMSI                     |\n|                                                |\n| Location area                                  |\n| identification               -                 |\n--------┼------------------------------------------------┼-----\nBackward| TMSI REALLOCATION     MAP_FORWARD_NEW_TMSI     |\nresult  |  COMPLETE                response              |\n--------┴------------------------------------------------┴-----",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.010_3.6",
      "section_id": "3.6",
      "section_title": "Retrieval of the IMEI from the MS",
      "content": "The VLR may use the MAP_OBTAIN_IMEI service to request the MS to supply its IMEI , or may use the MAP_CHECK_IMEI service to request the MSC to check the MS's IMEI. For either MAP service the BSSAP signalling is the same.\nThe mapping of information elements is as follows:\n---------------------------------------------------------------\n|  24.008                  29.002                |Notes\n--------┼------------------------------------------------┼-----\nForward |                      (MAP_CHECK_IMEI request   |\nmessage | IDENTITY REQUEST     (   or                    |\n|                      (MAP_OBTAIN_IMEI request  |\n|    Identity type                               |\n|    set to: IMEI                                |  1\n--------┼------------------------------------------------┼-----\nBackward|                      (MAP_CHECK_IMEI response  |\nresult  | IDENTITY RESPONSE    (   or                    |\n|                      (MAP_OBTAIN_IMEI response |\n|                                                |\n| Mobile Identity          IMEI                  |  2\n|    (IMEI)                                      |\n--------┴------------------------------------------------┴-----\nNOTE 1:\tThe MAP service request does not carry any parameters. The identity type is inferred from the service name.\nNOTE 2:\tIf the MAP_CHECK_IMEI service was used, the MSC also returns the equipment status to the VLR in the MAP_CHECK_IMEI response, after a successful dialogue with the EIR using the IMEI received from the MS.\nThe MSC shall terminate the MAP dialogue with the VLR using a MAP_U_ABORT if:\n-\tthere is no RR connection with the MS when the MAP service request is received;\n-\tthere is no response from the MS.\nNOTE:\tThe MSC can also obtain the IMEI from a phase 2 MS by including appropriate information in the BSSMAP Cipher Mode Command.",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.010_3.7",
      "section_id": "3.7",
      "section_title": "Tracing subscriber activity",
      "content": "The VLR may request the MSC and/or BSS to record data about the current transaction with an MS.\n---------------------------------------------------------------\n|  48.008                  29.002                |Notes\n--------┼------------------------------------------------┼-----\nForward | MSC INVOKE TRACE      MAP_TRACE_SUBSCRIBER_    |\nmessage |                          ACTIVITY request      |\n|                                                |\n| Trace type               Trace type            |\n| TriggerId                    -                 |\n| Trace reference          Trace reference       |\n| TransactionId                -                 |\n| Mobile identity(IMSI)    IMSI                  |  1\n| Mobile identity(IMEI)    IMEI                  |  1\n| OMCId                    OMCId                 |\n--------┼------------------------------------------------┼-----\nBackward| none                  none                     |\nresult  |                                                |\n--------┴------------------------------------------------┴-----\nNOTE 1:\tThe VLR may provide either an IMSI or IMEI, but not both.",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.010_3.8",
      "section_id": "3.8",
      "section_title": "Location update",
      "content": "---------------------------------------------------------------\n|         24.008                  29.002         |Notes\n--------┼------------------------------------------------┼-----\nForward | MM (LOCATION UPDATING     MAP_UPDATE_LOCATION_ |\nmessage |  REQUEST)                        request       |\n|                                                |\n|    Location area id                -           |\n|    Mobile identity          IMSI               |\n|    Mobile station                              |\n|       classmark 1                  -           |\n|    Mobile station                              |\n|       classmark 2                  -           |\n|    Ciphering key                   -           |\n|      seq number                                |\n|    Location update                 -           |\n|      type                                      |\n--------┼------------------------------------------------┼-----\nPositive| MM (LOCATION              MAP_UPDATE_LOCATION  |\nresults | UPDATING ACCEPT)                 response      |\n|                                                |\n|    Location area identity          -           |\n|    Mobile identity                 -           |\n|    Follow on proceed               -           |\n--------┼------------------------------------------------┼-----\nNegative| MM (LOCATION              MAP_UPDATE_LOCATION  |\nresults | UPDATING REJECT)                 response      |\n|                                                |\n|    IMSI unknown in HLR    Unknown subscriber   |\t1\n|                           Roaming not allowed: |\n|    PLMN not allowed          PLMN not allowed  |\n|    LA not allowed                  -           |\t3\n|    Roaming not                     -           |\n|    allowed in this LA                          |\n|    No Suitable cells in            -           |\n|        location area                           |\n|    PLMN not allowed          Operator          |\n|                              determined barring|\n|                          Additional roaming    |\n|                            not allowed:        |\n|   No Suitable cells in     Supported RAT Types |\t2\n|        location area           not allowed     |\n|    Illegal MS                      -           |\n|    Illegal ME                      -           |\n|    Network failure        System Failure       |\n|    Network failure        Unexpected data value|\n|    Network failure        Data Missing         |\n|    Network failure        MAP_U/P_ABORT        |\n|    Network failure        MAP_NOTICE           |\n|    Network failure        MAP_CLOSE            |\n--------┴------------------------------------------------┴-----\nNOTE 1\tThe HLR shall also send this error if there is an error in the type of subscription (i.e. VLR requests service for a GPRS only subscriber).\nNOTE 2:\tOther reject causes than \"no Suitable cells in location area\" can be used (e.g. \"Roaming not allowed in this location area\").\nNOTE 3\tThe VLR shall return the cause \"LA not allowed\" only if the HLR indicates that due to subscription to a \"regionally restricted service\" the MS is not allowed to operate in the location area.\nIf the VLR finds out that the access is denied due to Administrative Restriction of Subscribers\" Access based on subscription info received from HLR, VLR will send negative response to the MSC. The MSC will map the received cause using following mapping table:\n---------------------------------------------------------------\n|         24.008                                 |Notes\n--------┼------------------------------------------------┼-----\nNegative| MM (LOCATION                  UPDATE_LOCATION  |\t1\nresults | UPDATING REJECT)               AREA response   |\n|                                                |\n|    PLMN not allowed          PLMN not allowed  |\n|    Roaming not               National Roaming  |\n|    allowed in this LA        not allowed       |\n|    No Suitable cells in      RAT not allowed   |\n|        location area                           |\nNOTE 1\tThe UPDATE LOCATION AREA response refers to the internal interface used between VLR and MSC (see 3GPP TS 23.012 [18]).",
      "chunk_type": "general",
      "cross_references": [
        "ts_23.012"
      ]
    },
    {
      "chunk_id": "ts_29.010_4.1",
      "section_id": "4.1",
      "section_title": "General",
      "content": "For interworking other than the mapping of information fields, see 3GPP TS 49.008 [14] [14].",
      "chunk_type": "definition",
      "cross_references": [
        "ts_49.008"
      ]
    },
    {
      "chunk_id": "ts_29.010_4.2",
      "section_id": "4.2",
      "section_title": "Outgoing call set-up (MS originating call)",
      "content": "Figure 3 shows those elements of a call set-up sequence which require interworking between BSSAP and MAP. BSSAP messages which do not require interworking with MAP are not shown.\nMS                        MSC                                VLR\nCM SERVICE REQUEST\n----------------------->   MAP_PROCESS_ACCESS_REQUEST request\n---------------------------------->\n+--------------------------+\n|         Possibly         |\n| identification procedure/|\n| authentication procedure |\n+--------------------------+\nMAP_SET_CIPHERING_MODE request\n<----------------------------------\n(Note 1)\nMAP_PROCESS_ACCESS_REQUEST response\nCM SERVICE ACCEPT      <---------------------------------\n<-----------------------         positive result (Note 1)\n(Note 2)\nCIPHER MODE COMMAND\n<-----------------------\n(Note 2)\nCIPHER MODE COMPLETE\n----------------------->\nMAP_FORWARD_NEW_TMSI request\nTMSI REALLOCATION COMMAND  <----------------------------------\n<-----------------------                 (Note 3)\nTMSI REALLOCATION COMPLETE\n----------------------->      MAP_FORWARD_NEW_TMSI response\n---------------------------------->\nMAP_PROCESS_ACCESS_REQUEST response\nCM SERVICE REJECT      <---------------------------------\n<-----------------------     negative result, MAP_U/P_ABORT,\n(Note 4)                  MAP_NOTICE, MAP_CLOSE\nSETUP (Note 5)\n----------------------->     MAP_SEND_INFO_FOR_OUTGOING_CALL\n---------------------------------->\nrequest\nMAP_COMPLETE_CALL request\nCALL PROCEEDING       <----------------------------------\n<-----------------------\nMAP_SEND_INFO_FOR_OUTGOING_CALL\nRELEASE COMPLETE       <----------------------------------\n<-----------------------        response, MAP_U/P_ABORT,\n(Note 6)                 MAP_NOTICE, MAP_CLOSE\nFigure 3: Part of outgoing call set-up sequence\nNOTE 1:\tIf the MSC received a MAP_SET_CIPHERING_MODE request, it stores it until it receives the MAP_PROCESS_ACCESS_ REQUEST response.\nNOTE 2:\tCM SERVICE ACCEPT is sent only if the ciphering procedure is not invoked.\nNOTE 3:\tTMSI reallocation need not be sequenced with other messages, but should be sent after ciphering.\nNOTE 4:\tCM SERVICE REJECT is sent as a result of a user error parameter in the MAP_PROCESS_ACCESS_REQUEST response, or termination of the MAP dialogue.\nNOTE 5:\tThe SETUP message is sent after the MS has either received a CM SERVICE ACCEPT or sent a CIPHER MODE COMPLETE.\nNOTE 6:\tRELEASE COMPLETE is sent as a result of a user error parameter in the MAP_SEND_INFO_FOR_OUTGOING_CALL response, or termination of the MAP dialogue.\nThe procedure can be considered in two parts: the handling of the CM SERVICE REQUEST and the handling of the SETUP request.\nThe procedure is initiated by the MS sending a CM SERVICE REQUEST message. The MSC will forward the service request to the VLR in the MAP_PROCESS_ACCESS_REQUEST request. The VLR may then invoke other operations, e.g. authentication and identification. These operations are defined in clauses 3.4 and 3.5.\nIf there is a positive outcome for the CM SERVICE REQUEST procedure, the VLR always sends a MAP_PROCESS_ACCESS_REQUEST response. If the request is for a first MM-connection and ciphering is required, the MAP_PROCESS_ACCESS_REQUEST response is preceded by a MAP_SET_CIPHERING_MODE request. In this case the MSC sends a CIPHER MODE COMMAND towards the MS. The interworking for cipher mode setting is described in clause 4.4. If the request is for an additional MM-connection or for a first MM-connection where ciphering is not required, then the positive MAP_PROCESS_ACCESS_ REQUEST response causes the MSC to send a CM SERVICE ACCEPT message to the MS. After cipher mode setting has been completed or the CM SERVICE ACCEPT message has been returned, the MS will send the SETUP (or EMERGENCY SETUP) message and information retrieval takes place as shown.\nA negative outcome for the MAP_PROCESS_ACCESS_REQUEST procedure can be signalled by a MAP_PROCESS_ACCESS_REQUEST response containing a user error parameter, or by terminating the MAP dialogue between the MSC and the VLR.\nA positive outcome for the call setup procedure is indicated by a MAP_COMPLETE_CALL request from the VLR to the MSC, which causes the MSC to send a CALL PROCEEDING message towards the MS.\nA negative outcome for the call setup procedure can be signalled by a MAP_SEND_INFO_FOR_INCOMING_CALL response or by terminating the dialogue between the MSC and the VLR.\nInformation element mapping is required between the messages:\n-\tCM SERVICE REQUEST to MAP_PROCESS_ACCESS_REQUEST request;\n-\tSETUP to MAP_SEND_INFO_FOR_OUTGOING CALL request;\n-\tMAP_SEND_INFO_FOR_OUTGOING_CALL response, MAP_U/P_ABORT, MAP_NOTICE or premature MAP_CLOSE to RELEASE COMPLETE or CM SERVICE REJECT.\nThe information contained in the MAP_COMPLETE_CALL request is not transmitted on the radio interface but is used in the MSC for connecting the call.\nThe conversion of information elements is as follows:\n---------------------------------------------------------------\n|  48.008/24.008           29.002                |Notes\n--------┼------------------------------------------------┼-----\nForward | COMPLETE LAYER 3 INFO   MAP_PROCESS_ACCESS_    |\n| (CM SERVICE REQUEST)       REQUEST request     |\n|                                                |\n|    CM Service type      CM Service type        |  1\n|    Ciphering key        CKSN                   |\n|       sequence number                          |\n|    Mobile identity      TMSI or IMSI or IMEI   |\n|    Mobile station                              |\n|       Classmark 2             -                |\n|                                                |\n| Cell identifier         Current LA Id          |  4\n| Chosen channel                -                |\n|         -               Access Connection      |\n|                            Status              |  3\n--------┼------------------------------------------------┼-----\nPositive| DTAP(CM SERVICE ACCEPT) MAP_PROCESS_ACCESS_    |\nresult  |                            REQUEST response    |  2\n--------┼------------------------------------------------┼-----\nNegative| DTAP(CM SERVICE REJECT) MAP_PROCESS_ACCESS_    |\nresult  |                            REQUEST response    |\n|                                                |\n|    IMSI unknown in VLR     Unidentified        |\n|                               Subscriber       |\n[       |    Requested service     ???????               |\n|       option not                               |\n|       subscribed                               |]\n|    Illegal ME              Illegal equipment   |\n|    Network failure         System failure      |\n|    Network failure      MAP_U/P_ABORT\n|    Network failure      MAP_NOTICE             |\n|    Network failure      MAP_CLOSE              |\n--------┼------------------------------------------------┼-----\n| DTAP(AUTHENTICATION     MAP_PROCESS_ACCESS_    |\n|    REJECT)                 REQUEST response    |\n|                                                |\n|                            Illegal subscriber  |\n--------┴------------------------------------------------┴-----\nNOTE 1:\tIndicates, in this case, a mobile originating call establishment or an emergency call establishment.\nNOTE 2:\tThe CM SERVICE ACCEPT is sent when the ciphering procedure is not invoked.\nNOTE 3:\tIndicates whether or not an RR-connection exists and whether or not ciphering has been started.\nNOTE 4:\tThe Current LA Id parameter is derived by the MSC from the Cell identifier information element.\n---------------------------------------------------------------\n|  24.008                  29.002                |Notes\n--------┼------------------------------------------------┼-----\nForward | SETUP                   MAP_SEND_INFO_FOR_     |\nmessage |                         OUTGOING_CALL request  |\n|                                                |\n| BC repeat indicator              -             |\n| Bearer capability 1              -             |  3\n| Bearer capability 2              -             |  3\n| Calling party subaddress         -             |\n| Called party BCD number     Called Number      |\n| Called party subaddress          -             |\n| LLC repeat indicator             -             |\n| Low layer compatibility I        -             |\n| Low layer compatibility II       -             |\n| HLC repeat indicator             -             |\n| High layer compatibility i       -             |\n| High layer compatibility ii      -             |\n|      -                      Bearer service     |  3\n|      -                      Teleservice        |  3\n| Facility                         -             |  1\n|      -                      CUG index          |  4\n|      -                      Suppress pref CUG  |  4\n|      -                      Suppress CUG OA    |  4\n| User-user                        -             |\n| SS version                       -             |\n| CLIRO flag                       -             |\n--------┼------------------------------------------------┼-----\nPositive|                                                |\nresult  |                                                |  2\n--------┼------------------------------------------------┼-----\nNegative| RELEASE COMPLETE         MAP_SEND_INFO_FOR_    |\nresult  |                          OUTGOING_CALL response|\n|                                                |\n| 3GPP TS 24.010           Call Barred           |\n|                             Barring Service    |\n|                                Active          |\n| Operator determined      Call Barred           |\n|    barring                  Operator Determined|\n|                                Barring         |\n| Network out of order     Data Missing          |\n| Network out of order     Unexpected Data Value |\n| Network out of order     System Failure        |\n| Bearer capability        Bearer service not    |\n|    not authorized           provisioned        |\n| Bearer capability        Teleservice not       |\n|    not authorized           provisioned        |\n| [User not member of CUG] CUG reject            |\n|                                                |\n| Network out of order     MAP_U/P_ABORT         |\n| Network out of order     MAP_NOTICE            |\n| Network out of order     MAP_CLOSE             |\n--------┴------------------------------------------------┴-----\nNOTE 1:\tIf the Facility IE contains CUG information, the CUG information is transferred to the VLR in the MAP_SEND_INFO_FOR_OUTGOING_CALL service; any other information contained in a Facility IE is transferred to the VLR in a MAP Supplementary Services related service.\nNOTE 2:\tThe call setup parameters retrieved from the VLR are not sent to the MS. The parameters are carried in the MAP_COMPLETE_CALL service.\nNOTE 3:\tThe bearer capabilities can be used to derive the bearer/tele service.\nNOTE 4:\tCUG information is derived from the contents of the Facility IE.",
      "chunk_type": "general",
      "cross_references": [
        "clause_4.4",
        "figure_3",
        "ts_24.010"
      ]
    },
    {
      "chunk_id": "ts_29.010_4.3",
      "section_id": "4.3",
      "section_title": "Incoming call set-up (MS terminating call)",
      "content": "Figure 4 shows those elements of the procedure which require interworking between MAP and 3GPP TS 24.008 [4] procedures.\nMS                        MSC                                VLR\n+--------------------------+\n|       Info retrieval     |\n+--------------------------+\nMAP_PAGE request or\nPAGE REQUEST         <----------------------------------\n<-----------------------         MAP_SEARCH_FOR_MS request\n(Note 1)\nPAGING RESPONSE\n----------------------->   MAP_SEARCH_FOR_MS response (Note 2)\n---------------------------------->\nMAP_PROCESS_ACCESS_REQUEST request\n---------------------------------->\n+--------------------------+\n|         Possibly         |\n| authentication procedure |\n+--------------------------+\nMAP_SET_CIPHERING_MODE request\n<----------------------------------\n(Note 3)\nMAP_PROCESS_ACCESS_REQUEST response\nCIPHER MODE COMMAND     <---------------------------------\n<-----------------------         positive result (Note 4)\n(Note 3)\nCIPHER MODE COMPLETE\n----------------------->\nMAP_FORWARD_NEW_TMSI request\nTMSI REALLOCATION COMMAND  <----------------------------------\n<-----------------------                 (Note 5)\nTMSI REALLOCATION COMPLETE\n----------------------->      MAP_FORWARD_NEW_TMSI response\n---------------------------------->\nMAP_COMPLETE_CALL request\nSETUP            <----------------------------------\n<-----------------------\nMAP_SEND_INFO_FOR_INCOMING_CALL\nRELEASE COMPLETE       <---------------------------------\n<-----------------------        response negative result,\n(Note 6)           MAP_U/P_ABORT,MAP_NOTICE, MAP_CLOSE\nFigure 4: Incoming call set-up\nNOTE 1:\tIf an MM connection already exists, the PAGE REQUEST is not sent. If the call can be accepted, the MSC sends a MAP_PROCESS_ACCESS_REQUEST request in response to the MAP_PAGE request. If the call cannot be accepted the MSC sends a MAP_PAGE response containing the error 'busy subscriber'.\nNOTE 2:\tSent only if MAP_SEARCH_FOR_MS was used.\nNOTE 3:\tNeeded only if a ciphered MM-connection does not exist already.\nNOTE 4:\tIf the MSC received a MAP_SET_CIPHERING_MODE request, it stores it until it receives the MAP_PROCESS_ACCESS_ REQUEST response.\nNOTE 5:\tTMSI reallocation need not be sequenced with other messages, but should be sent after ciphering.\nNOTE 6:\tRELEASE COMPLETE is sent as a result of a user error parameter in the MAP_SEND_INFO_FOR_OUTGOING_CALL response, or termination of the MAP dialogue.\nThe paging procedure is controlled by the VLR. It may be followed by authentication (clause 3.4), ciphering (clause 4.4) and reallocation of TMSI(clause 3.6). The SETUP message is sent when the MAP_COMPLETE_CALL request is received.\nNormally there is no interworking between the MAP_COMPLETE_CALL request and the SETUP message. However, the MAP_COMPLETE_CALL request may contain a bearer service indication which will be used to establish the bearer capabilities at the MSC. The interworking between the MAP_PAGE request or MAP_SEARCH_FOR_MS request and the BSSMAP PAGING REQUEST message is as follows:\n---------------------------------------------------------------\n|  48.008/24.008            29.002               |Notes\n--------┼------------------------------------------------┼-----\nForward | PAGING REQUEST       MAP_PAGE request or       |\nmessage |                      MAP_SEARCH_FOR_MS request |\n|                                                |\n| IMSI                    IMSI                   |\n| TMSI                    TMSI                   |\t1\n| Cell identifier         Stored LA Id           |\n|       list                                     |\n--------┼------------------------------------------------┼-----\nBackward| COMPLETE LAYER 3 INFO    MAP_PROCESS_ACCESS_   |\nmessage | (PAGING RESPONSE)           REQUEST request    |\n|                                                |\n|          -                  CM service type    |\t2\n|    Ciphering key            CKSN               |\n|       sequence number                          |\n|    Mobile identity          TMSI or IMSI       |\n|    Mobile station                              |\n|       classmark 2                  -           |\n| Cell Identifier             Current LA Id      |\t3\n|          -                  Access connection  |\n|                                status          |\n| Chosen channel                     -           |\n--------┴------------------------------------------------┴-----\nNOTE 1:\tIf TMSI is included, the TMSI is used as the mobile identity in the 3GPP TS 24.008 [4] PAGE REQUEST message, otherwise the IMSI is used as the mobile identity.\nNOTE 2:\tIn this case the MAP CM service type is set to 'mobile terminating call'.\nNOTE 3:\tThe Target LA Id parameter is derived by the MSC from the Cell identifier information element.",
      "chunk_type": "general",
      "cross_references": [
        "clause_3.4",
        "clause_4.4",
        "clause_3.6",
        "figure_4",
        "ts_24.008"
      ]
    },
    {
      "chunk_id": "ts_29.010_4.4",
      "section_id": "4.4",
      "section_title": "Cipher mode setting",
      "content": "The interworking is as follows:\n---------------------------------------------------------------\n|  48.008                 29.002                 |Notes\n--------┼------------------------------------------------┼-----\nForward | CIPHER MODE COMMAND    MAP_SET_CIPHERING_MODE  |\n|                           request              |\n|                                                |\n| Cipher mode setting       Ciphering mode       |\n| Encryption information    Kc                   |\t1\n--------┼------------------------------------------------┼-----\nPositive| CIPHER MODE COMPLETE   None                    |\nresult  |                                                |\n--------┼------------------------------------------------┼-----\nNegative| CIPHER MODE REJECT     None                    |\nresult  |                                                |\n--------┴------------------------------------------------┴-----\nNOTE 1:\tThe key Kc is passed through the BSS to the BTS, but is not passed to the MS.",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.010_4.5",
      "section_id": "4.5",
      "section_title": "Inter-MSC Handover",
      "content": "The general principles of the handover procedures are given in 3GPP TS 23.009 [2]. 3GPP TS 29.010 gives the necessary information for interworking between the 3GPP TS 48.008 [12] handover protocol and the 3GPP TS 29.002 [9] MAP protocol.\nThe following principle shall apply when new parameters need to be added for transfer on the E-interface:\n1-\tThe parameters shall be added to be carried in the AN-APDU when they need to be forwarded to the target radio access network and the encapsulated protocol is the same as the protocol used at the interface between the target MSC and the target radio access network.\n2.\tThe parameters shall be added to be carried in a MAP message\n-\twhen they need to be forwarded to the target radio access network and the encapsulated protocol is different from the protocol used at the interface between the target MSC and the target radio access network;\n-\twhen they are required by the target MSC, but not to be forwarded to the target radio access network; or\n-\twhen they are required by the target MSC for subsequent procedures\nand they cannot be derived from the message encapsulated in the AN-APDU.",
      "chunk_type": "general",
      "cross_references": [
        "ts_23.009",
        "ts_29.010",
        "ts_48.008",
        "ts_29.002"
      ]
    },
    {
      "chunk_id": "ts_29.010_4.5.1",
      "section_id": "4.5.1",
      "section_title": "Basic Inter-MSC Handover",
      "content": "When a Mobile Station is handed over between two MSCs, the establishment of a connection between them (described in 3GPP TS 23.009 [2]) requires interworking between A-Interface and E-Interface.\nThe signalling at initiation, execution, completion of the Basic Inter-MSC handover procedure is shown in figures 5 to 10 with both possible positive or negative outcomes.\nAdditionally figures 5b and 5c show the possible interworking when trace related messages are transparently transferred on the E-Interface at Basic Inter-MSC Handover initiation.\nBSS-A         MSC-A                     MSC-B\n|               |                         |\n|HANDOVER       |                         |\n|-------------->|MAP PREPARE HANDOVER     |\n|REQUIRED       |------------------------>| +----------------+\n|               |request                  | |Possible Alloc. |\n|               |                         | |of a handover   |\n|               |                         | |no. in the VLR-B|\n|               |                         | +----------------+\n|               |                         |\n|               |                         |                BSS-B\n|               |                         |                   |\n|               |                         |HANDOVER REQUEST   |\n|               |                         |------------------>|\nFigure 5a: Signalling for Basic Inter-MSC Handover initiation (no trace related messages transferred)\nBSS-A         MSC-A                     MSC-B\n|BSC INVOKE TRACE                         |\n|-------------->|                         |\n|               |                         |\n|HANDOVER       |                         |\n|-------------->|MAP PREPARE HANDOVER     |\n|REQUIRED       |------------------------>| +----------------+\n|               |request(*)               | |Possible Alloc. |\n|               |                         | |of a handover   |\n|               |                         | |no. in the VLR-B|\n|               |                         | +----------------+\n|               |                         |\n|               |                         |                BSS-B\n|               |                         |                   |\n|               |                         |HANDOVER REQUEST   |\n|               |                         |------------------>|\n|               |                         |                   |\n|               |                         |BSC INVOKE TRACE   |\n|               |                         |---------------->(**)\nFigure 5b: Signalling for Basic Inter-MSC Handover initiation (BSC invoke trace message transferred)\n(*):\tIn that case, HANDOVER REQUEST and BSC INVOKE TRACE messages are included within the AN-APDU parameter.\n(**):\tBSC INVOKE TRACE is forwarded to BSS-B if supported by MSC-B.\nBSS-A         MSC-A                     MSC-B\n|             (*)                         |\n|HANDOVER       |                         |\n|-------------->|MAP PREPARE HANDOVER     |\n|REQUIRED       |------------------------>| +----------------+\n|               |request(**)              | |Possible Alloc. |\n|               |                         | |of a handover   |\n|               |                         | |no. in the VLR-B|\n|               |                         | +----------------+\n|               |                         |\n|               |                         |                BSS-B\n|               |                         |                   |\n|               |                         |HANDOVER REQUEST   |\n|               |                         |------------------>|\n|               |                         |                   |\n|               |                         |MSC INVOKE TRACE   |\n|               |                         |--------------->(***)\nFigure 5c: Signalling for Basic Inter-MSC Handover initiation (MSC invoke trace message transferred)\n(*):\tTracing invocation has been received from VLR.\n(**):\tIn that case, HANDOVER REQUEST and MSC INVOKE TRACE messages are included within the AN-APDU parameter.\n(***):\tMSC INVOKE TRACE is forwarded to BSS-B if supported by MSC-B.\nPossible Positive outcomes:\na)\tsuccessful radio resources allocation and handover number allocation (if performed):\nBSS-A         MSC-A                     MSC-B              BSS-B\n|               |                         |                   |\n|               |                         |HANDOVER REQUEST   |\n|               |                         |<------------------|\n|               |                         |ACKNOWLEDGE        |\n|               | MAP PREPARE HANDOVER    |                   |\n|               |<------------------------|                   |\n|               | response                |                   |\n|               |                         |                   |\n|HANDOVER COMMAND                         |                   |\n|<--------------|                         |                   |\nb)\tradio resources allocation queued and successful handover number allocation (if performed). Later successful radio resources allocation indication:\nBSS-A         MSC-A                     MSC-B              BSS-B\n|               |                         |                   |\n|               |                         |QUEUING INDICATION |\n|               |                         |<------------------|\n|               |MAP PREPARE HANDOVER     |                   |\n|               |<------------------------|                   |\n|               | response                |                   |\n|               |                         |HANDOVER REQUEST   |\n|               |                         |<------------------|\n|               |                         |ACKNOWLEDGE        |\n|               |MAP PROCESS ACCESS       |                   |\n|               |<------------------------|                   |\nHANDOVER COMMAND| SIGNALLING request      |                   |\n|<--------------|                         |                   |\n|               |                         |                   |\nFigure 6: Signalling for Basic Inter-MSC Handover execution (Positive outcomes)\nPossible Negative outcomes:\nc)\tuser error detected, or handover number allocation unsuccessful (if performed), or component rejection or dialogue abortion performed by MSC-B:\nBSS-A         MSC-A                     MSC-B              BSS-B\n|               |                         |                   |\n|               |MAP PREPARE HANDOVER response                |\n|               |negative result, MAP CLOSE                   |\n|               |<------------------------|                   |\n|               |MAP U/P-ABORT            |                   |\n|HANDOVER REQUIRED                        |                   |\n|<--------------|                         |                   |\n|REJECT (Note 1)|                         |                   |\n|               |                         |                   |\nd)\tradio resources allocation failure:\nBSS-A         MSC-A                     MSC-B              BSS-B\n|               |                         |                   |\n|               |                         |HANDOVER FAILURE   |\n|               |                         |<------------------|\n|               |MAP PREPARE HANDOVER     |                   |\n|               |<------------------------|                   |\n|               | response                |                   |\n|HANDOVER REQUIRED                        |                   |\n|<--------------|                         |                   |\n|REJECT (Note 1)|                         |                   |\n|               |                         |                   |\ne)\tradio resources allocation queued and successful handover number allocation (if performed). Later unsuccessful radio resources allocation:\nBSS-A         MSC-A                     MSC-B              BSS-B\n|               |                         |                   |\n|               |                         |QUEUING INDICATION |\n|               |                         |<------------------|\n|               |MAP PREPARE HANDOVER     |                   |\n|               |<------------------------|                   |\n|               | response                |                   |\n|               |                         |                   |\n|               |                         |HANDOVER FAILURE   |\n|               |                         |<------------------|\n|               |MAP PROCESS ACCESS       |                   |\n|               |<------------------------|                   |\n|               | SIGNALLING request      |                   |\n|HANDOVER REQUIRED                        |                   |\n|<--------------|                         |                   |\n|REJECT (Note 1)|                         |                   |\nf)\tunsuccessful handover execution (Reversion to the old channel):\nBSS-A         MSC-A                     MSC-B              BSS-B\n|               |                         |                   |\n|HANDOVER       |                         |                   |\n|-------------->|                         |                   |\n|FAILURE        |                         |                   |\n|               |MAP U -ABORT             |                   |\n|               |------------------------>|                   |\n|               |                         |CLEAR COMMAND      |\n|               |                         |------------------>|\n|               |                         |                   |\nFigure 7: Signalling for Basic Inter-MSC Handover execution (Negative outcomes)\nNOTE:\tPossible rejection of the handover because of the negative outcome of MAP or BSSMAP procedure.\nBSS-A         MSC-A                     MSC-B              BSS-B\n|               |                         |                   |\n|               |                         |HANDOVER COMPLETE  |\n|               |                         |<------------------|\n|               |MAP SEND END SIGNAL request                  |\n|               |<------------------------|                   |\n|CLEAR sCOMMAND |                         |                   |\n|<--------------|                         |                   |\n|               |                         |                   |\nFigure 8: Signalling for Basic Inter-MSC Handover completion\nPositive outcome\nBSS-A         MSC-A                     MSC-B              BSS-B\n|               |                         |                   |\n|               |MAP SEND END SIGNAL      |                   |\n|               |------------------------>|                   |\n|               | response                |CLEAR COMMAND      |\n|               |                         |------------------>|\n|               |                         | (Note 1)          |\nFigure 9: Signalling for Basic Inter-MSC Handover completion (Positive outcome)\nNegative outcome\nBSS-A         MSC-A                     MSC-B              BSS-B\n|               |                         |                   |\n|               | MAP U/P -ABORT          |                   |\n|               |------------------------>|                   |\n|               |                         |CLEAR COMMAND      |\n|               |                         |------------------>|\n|               |                         |                   |\nFigure 10: Signalling for Basic Inter-MSC Handover completion (Negative outcome)\nNOTE:\tFrom interworking between MAP and BSSMAP point of view.\nThe handover procedure is normally triggered by BSS-A by sending a HANDOVER REQUIRED message on A‑Interface to MSC-A. The invocation of the Basic Inter-MSC handover procedure is performed and controlled by MSC-A. The sending of the MAP Prepare-Handover request to MSC-B is triggered in MSC-A upon receipt of the HANDOVER REQUIRED message. For compatibility reason, the cell identity of the cell where the call is to be handed over in MSC-B area, provided in the HANDOVER REQUIRED message, is mapped into targetCellId MAP parameter and the HANDOVER REQUEST message is encapsulated in the AN-APDU MAP parameter of the Prepare-Handover MAP request. MSC-B can invoke another operation towards the VLR-B (allocation of the handover number described in 3GPP TS 29.002 [9]).\nAdditionally, if tracing activity has been invoked, the trace related messages can be transferred on the E-Interface encapsulated in the AN-APDU MAP parameter of the Prepare-Handover Request. If transferred, one complete trace related message at a time shall be included in the AN-APDU MAP parameter after the HANDOVER REQUEST message.\nThe interworking between Prepare Handover and HANDOVER REQUIRED is as follows:\n----------------------------------------------------------------\n|   48.008                         29.002         |Notes\n--------┼-------------------------------------------------┼-----\nForward | HANDOVER REQUIRED   MAP PREPARE HANDOVER request|\nmessage |                                                 |\n|                            -ho-NumberNotRequired|\t1\n|  BSSMAP information        -targetCellId        |\n|         elements           -AN-APDU(            |\t2\n|                            HANDOVER REQUEST,    |\n|                            BSC INVOKE TRACE     |\t3\n|                         or MSC INVOKE TRACE)    |\n--------┼-------------------------------------------------┼-----\nPositive|                    MAP PREPARE HANDOVER response|\nresult  |                                                 |\t4\n|                             -handover number    |\n|                             -AN-APDU(           |\n|                              QUEUING INDICATION |\n|                              or HANDOVER REQUEST|\n|                              ACKNOWLEDGE or     |\n|                              HANDOVER FAILURE)  |\n--------┼-------------------------------------------------┼-----\nNegative| HANDOVER REQUIRED REJECT    MAP PREPARE HANDOVER|\t5\nresult  |                                                 |\n| equipment failure            System Failure     |\n| equipment failure            No Handover Number |\n|                                 available       |\n| equipment failure            UnexpectedDataValue|\n| equipment failure            Data Missing       |\n|                                                 |\n| equipment failure            MAP CLOSE          |\n| equipment failure            MAP U/P -ABORT     |\n|                                                 |\nNOTE 1:\tThe ho-NumberNotRequired parameter is included by MSC-A, when MSC-A decides not to use any circuit connection with MSC-B. No handover number shall be present in the positive result. Any negative response from MSC-B shall not be due to handover number allocation problem.\nNOTE 2:\tThe process performed on the BSSMAP information elements received in the HANDOVER REQUIRED message is described in the GSM Recommendation 48.008.\nNOTE 3:\tThe process performed on the BSSMAP information elements received in the MSC or BSC INVOKE TRACE message is described in clause 4.5.6.6.\nNOTE 4:\tThe response to the Prepare-Handover request can include in its AN-APDU parameter, identifying the GSM-08.06 protocol, either a BSSMAP QUEUING INDICATION, or a BSSMAP HANDOVER REQUEST ACKNOWLEDGE or a BSSMAP HANDOVER FAILURE.\nIn the first case, MSC-A shall wait for the radio resources allocation response from MSC-B, transmitted to MSC-A as described in clause 4.5.4.\nIn the second case, the positive result triggers in MSC-A the sending on A-Interface of the HANDOVER COMMAND.\nIn the third case, the positive result triggers in MSC-A one of the following:\n-\tanother handover attempt is initiated by MSC-A;\n-\toptionally the sending of the HANDOVER REQUIRED REJECT.\n(The possible sending of the HANDOVER REQUIRED REJECT message upon receipt of the HANDOVER FAILURE is out of the scope of 3GPP TS 29.010 and lies in 3GPP TS 48.008 [12]).\nNOTE 5:\tThe possible sending of the HANDOVER REQUIRED REJECT message is described in 3GPP TS 48.008 [12].\nThe interworking between Send End Signal and HANDOVER COMPLETE in MSC-B is as follows:\n----------------------------------------------------------------\n|   48.008                         29.002         |Notes\n--------┼-------------------------------------------------┼-----\nForward | HANDOVER COMPLETE   MAP SEND END SIGNAL request |\nmessage |                                                 |\n|                               -AN-APDU(         |\n|                               HANDOVER COMPLETE)|\n|                                                 |\n--------┼-------------------------------------------------┼-----\nPositive| CLEAR COMMAND       MAP SEND END SIGNAL response|\nresult  |  -Call Control release                          |\t1\n--------┼-------------------------------------------------┼-----\nNegative| CLEAR COMMAND                                   |\nresult  |  -Call Control release        MAP CLOSE         |\t2\n|  -Call Control release        MAP U/P -ABORT    |\n|                                                 |\nNOTE 1:\tThe positive empty result triggers the clearing of the Radio Resources on the A-Interface and the release of the SCCP connection between MSC-B and BSS-B. If a circuit connection is used between MSC-A and MSC-B, the 'Call Control release' clearing cause shall only be given to BSS-B when MSC-B has received a clearing indication on its circuit connection with MSC-A.\nNOTE 2:\tThe abortion of the dialogue or the rejection of the component triggers in MSC-B the clearing of its circuit connection with MSC-A, if any, of the Radio Resources on the A-Interface and the release of the SCCP connection between MSC-B and BSS-B.\nThe interworking between Send End Signal and CLEAR COMMAND in MSC-A is as follows:\n----------------------------------------------------------------\n|   29.002                         48.008         |Notes\n--------┼-------------------------------------------------┼-----\nForward | MAP SEND END SIGNAL          CLEAR COMMAND      |\nmessage | response                                        |\n|          -AN-APDU(           - Handover         |\n|          HANDOVER COMPLETE)        Successful   |\n--------┼-------------------------------------------------┼-----\nPositive|                                                 |\nresult  |                                                 |\n--------┼-------------------------------------------------┼-----\nNegative|                                                 |\nresult  |                                                 |\nThe interworking between HANDOVER FAILURE in case of reversion to old channel of the MS and User Abort in MSC-A is as follows:\n----------------------------------------------------------------\n|   48.008                         29.002         |Notes\n--------┼-------------------------------------------------┼-----\nForward | HANDOVER FAILURE                MAP U -ABORT    |\nmessage |                                                 |\n|  - Reversion to old                             |\n|    channel                                      |\n--------┼-------------------------------------------------┼-----\nPositive|                                                 |\nresult  |                                                 |\n--------┼-------------------------------------------------┼-----\nNegative|                                                 |\nresult  |                                                 |",
      "chunk_type": "general",
      "cross_references": [
        "clause_4.5.6.6",
        "clause_4.5.4",
        "figure_5",
        "figure_6",
        "figure_7",
        "figure_8",
        "figure_9",
        "figure_10",
        "ts_23.009",
        "ts_29.002",
        "ts_29.010",
        "ts_48.008"
      ]
    },
    {
      "chunk_id": "ts_29.010_4.5.2",
      "section_id": "4.5.2",
      "section_title": "Subsequent Inter-MSC Handover back to MSC-A",
      "content": "When a Mobile Station is being handed over back to MSC-A, the procedure (described in 3GPP TS 23.009 [2]) requires interworking between A-Interface and E-Interface.\nThe signalling at initiation, execution and completion of the Subsequent Inter-MSC handover procedure is shown in figures 11 to 15.\nBSS-A         MSC-B                     MSC-A\n|               |                         |\n|HANDOVER       |                         |\n|-------------->|MAP PREPARE SUBSEQUENT   |\n|REQUIRED       |------------------------>|\n|               |HANDOVER request         |\n|               |                         |                BSS-B\n|               |                         |                   |\n|               |                         |HANDOVER REQUEST   |\n|               |                         |------------------>|\nFigure 11: Signalling for Subsequent Inter-MSC Handover back to MSC-A initiation\nPossible Positive outcomes:\na)\tsuccessful radio resources allocation:\nBSS-A         MSC-B                     MSC-A              BSS-B\n|               |                         |                   |\n|               |                         |HANDOVER REQUEST   |\n|               |                         |<------------------|\n|               |                         |ACKNOWLEDGE        |\n|               | MAP PREPARE SUBSEQUENT  |                   |\n|               |<------------------------|                   |\n|               | HANDOVER response       |                   |\n|HANDOVER COMMAND                         |                   |\n|<--------------|                         |                   |\nb)\tradio resources allocation queued. Later successful radio resources allocation indication:\nBSS-A         MSC-B                     MSC-A              BSS-B\n|               |                         |QUEUING INDICATION |\n|               |                         |<------------------|\n|               | MAP PREPARE SUBSEQUENT  |                   |\n|               |<------------------------|                   |\n|               | HANDOVER response       |                   |\n|               |                         |HANDOVER REQUEST   |\n|               |                         |<------------------|\n|               |                         |ACKNOWLEDGE        |\n|               | MAP FORWARD ACCESS      |                   |\n|               |<------------------------|                   |\n|               | SIGNALLING request      |                   |\n|HANDOVER COMMAND                         |                   |\n|<--------------|                         |                   |\nFigure 12: Signalling for Subsequent Inter-MSC Handover back to MSC-A execution (Positive outcome)\nPossible Negative outcomes:\nc)\tuser error detected, or component rejection or dialogue abortion performed by MSC-A:\nBSS-A         MSC-B                     MSC-A              BSS-B\n|               |MAP PREPARE SUBSEQUENT HANDOVER              |\n|               |<------------------------|                   |\n|HANDOVER REQUIRED  response negative result                  |\n|<--------------|                         |                   |\n|REJECT (Note 1)|                         |                   |\n|               |                         |                   |\nd)\tcomponent rejection or dialogue abortion performed by MSC-A:\nBSS-A         MSC-B                     MSC-A              BSS-B\n|               |MAP CLOSE, MAP U/P ABORT |                   |\n|               |<------------------------|                   |\n|CLEAR COMMAND  |                         |                   |\n|<--------------|                         |                   |\n|               |                         |                   |\ne)\tradio resources allocation failure:\nBSS-A         MSC-B                     MSC-A              BSS-B\n|               |                         | HANDOVER FAILURE  |\n|               |                         |<------------------|\n|               |MAP PREPARE SUBSEQUENT   |                   |\n|               |<------------------------|                   |\n|HANDOVER REQUIRED   HANDOVER response    |                   |\n|<--------------|                         |                   |\n|REJECT (Note 1)|                         |                   |\nf)\tradio resources allocation queued. Later unsuccessful radio resources allocation:\nBSS-A         MSC-B                     MSC-A              BSS-B\n|               |                         |QUEUING INDICATION |\n|               |                         |<------------------|\n|               | MAP PREPARE SUBSEQUENT  |                   |\n|               |<------------------------|                   |\n|               |    HANDOVER response    |                   |\n|               |                         |HANDOVER FAILURE   |\n|               |                         |<------------------|\n|               | MAP FORWARD ACCESS      |                   |\n|               |<------------------------|                   |\n|HANDOVER REQUIRED   SIGNALLING request   |                   |\n|<--------------|                         |                   |\n|REJECT (Note 1)|                         |                   |\nFigure 13: Signalling for Subsequent Inter-MSC Handover back to MSC-A execution(Negative outcome)\nNOTE 1:\tPossible rejection of the handover because of the negative outcome of MAP or BSSMAP procedure.\nBSS-B         MSC-A                     MSC-B              BSS-A\n|               |                         |                   |\n|HANDOVER       |                         |                   |\n|-------------->|MAP SEND END SIGNAL      |                   |\n|COMPLETE       |------------------------>|                   |\n|               | response                |                   |\n|               |                         |CLEAR COMMAND      |\n|               |                         |------------------>|\nFigure 14: Signalling for Subsequent Inter-MSC Handover back to MSC-A completion(Successful completion of the procedure)\nNOTE:\tPositive outcome case shown in figure 9.\nBSS-B         MSC-A                     MSC-B              BSS-A\n|               |                         |                   |\n|HANDOVER       |                         |                   |\n|-------------->|MAP SEND END SIGNAL      |                   |\n|COMPLETE       |------------------------>|                   |\n|               | response                |                   |\n|               |                         |                   |\n|               |MAP U/P -ABORT           |                   |\n|               |<------------------------|                   |\n|               |                         |CLEAR COMMAND      |\n|               |                         |------------------>|\n|               |                         |(Note 1)           |\nFigure 15: Signalling for Subsequent Inter-MSC Handover back to MSC-A completion (Unsuccessful completion of the procedure)\nNOTE 1:\tAbnormal end of the procedure which triggers the clearing of all resources in MSC-B.\nThe interworking between Prepare Subsequent Handover and HANDOVER REQUIRED is as follows:\n----------------------------------------------------------------\n|   48.008                         29.002         |Notes\n--------┼-------------------------------------------------┼-----\nForward |HANDOVER REQUIRED MAP PREPARE SUBSEQUENT HANDOVER|\nmessage |                              request            |  1\n|                                                 |\n|                              -target MSC number |\n| BSSMAP information           -targetCellId      |\n|        elements              -AN-APDU(          |\n|                               HANDOVER REQUEST) |\n--------┼-------------------------------------------------┼-----\nPositive|HANDOVER REQUIRED MAP PREPARE SUBSEQUENT HANDOVER|\nresult  |                             response            |  2\n|                             -AN-APDU(           |\n|                              QUEUING INDICATION |\n|                              or HANDOVER REQUEST|\n|                              ACKNOWLEDGE or     |\n|                              HANDOVER FAILURE)  |\n--------┼-------------------------------------------------┼-----\nNegative| HANDOVER REQUIRED REJECT  MAP PREPARE SUBSEQUENT|  3\nresult  |                           HANDOVER response     |\n| equipment failure            Unknown MSC        |\n| equipment failure            Subsequent Handover|\n|                                         Failure |\n| equipment failure            UnexpectedDataValue|\n| equipment failure            Data Missing       |\n|                                                 |\n| CLEAR COMMAND                                   |\n|                                                 |\n| equipment failure            MAP CLOSE          |\n| equipment failure            MAP U/P -ABORT     |\n|                                                 |\nNOTE 1:\tThe processing performed on the BSSMAP information elements received in the HANDOVER REQUIRED message is out of the scope of the present document. The target MSC number is provided to MSC-A by MSC-B based on the information received from BSS-B.\nNOTE 2:\tThe response to the Prepare-Subsequent-Handover request can include in its AN-APDU parameter, identifying the GSM-0806 protocol, either a BSSMAP QUEUING INDICATION, or a BSSMAP HANDOVER REQUEST ACKNOWLEDGE or a BSSMAP HANDOVER FAILURE.\nIn the first case, MSC-B shall wait for the radio resources allocation response from MSC-A, transmitted to MSC-B as described in clause 4.5.4.\nIn the second case, the positive result triggers in MSC-B the sending on A‑Interface of the HANDOVER COMMAND.\nIn the third case, the positive result triggers in MSC-B one of the following:\n-\tanother handover attempt is initiated by MSC-B;\n-\toptionally the sending of the HANDOVER REQUIRED REJECT.\n(The possible sending of the HANDOVER REQUIRED REJECT message upon receipt of the HANDOVER FAILURE is out of the scope of 3GPP TS 29.010 and lies in 3GPP TS 48.008 [12]).\nNOTE 3:\tThe possible sending of the HANDOVER REQUIRED REJECT message is described in 3GPP TS 48.008 [12].\nThe interworking between Send End Signal Result and HANDOVER COMPLETE in MSC-A is as follows:\n----------------------------------------------------------------\n|   48.008                         29.002         |Notes\n--------┼-------------------------------------------------┼-----\nForward | HANDOVER COMPLETE    MAP SEND END SIGNAL        |\nmessage |                               response          |\n|                                                 |\n--------┼-------------------------------------------------┼-----\nPositive|                                                 |\nresult  |                                                 |\n--------┼-------------------------------------------------┼-----\nNegative|                                                 |\nresult  |                          MAP U/P -ABORT         |  1\n|                                                 |\nNOTE 1:\tThe abortion of the dialogue ends the handover procedure with MSC-B.",
      "chunk_type": "general",
      "cross_references": [
        "clause_4.5.4",
        "figure_11",
        "figure_12",
        "figure_13",
        "figure_14",
        "figure_9",
        "figure_15",
        "ts_23.009",
        "ts_29.010",
        "ts_48.008"
      ]
    },
    {
      "chunk_id": "ts_29.010_4.5.3",
      "section_id": "4.5.3",
      "section_title": "Subsequent Inter-MSC Handover to third MSC",
      "content": "When a Mobile Station is being handed over to a third MSC, the procedure (described in 3GPP TS 23.009 [2]) does require one specific interworking case in MSC-A (figure 20) between E-Interface from MSC-B and E-Interface from MSC-B' other than the combination of the ones described in the clause 4.5.1 and 4.5.2.\nBSS-A      MSC-B                  MSC-A            MSC-B'\n|            |                      |                |\n|HANDOVER    |                      |                |\n|----------->|MAP PREPARE SUSEQUENT |                |\n|REQUIRED    |--------------------->|                |\n|            |HANDOVER request      |MAP PREPARE     |\n|            |                      |--------------->|\n|            |                      |HANDOVER request|\n|            |                      |                |+-------+\n|            |                      |                ||Possib.|\n|            |                      |                ||Alloc. |\n|            |                      |                ||of ho. |\n|            |                      |                ||number |\n|            |                      |                || VLR-B |\n|            |                      |                |+-------+\n|            |                      |                |    BSS-B'\n|            |                      |                |         |\n|            |                      |                |HANDOVER |\n|            |                      |                |-------->|\n|            |                      |                |REQUEST  |\n|            |                      |                |\nFigure 16: Signalling for Subsequent Inter-MSC Handover to third MSC (MSC-B') initiation\nPossible Positive outcomes:\na)\tsuccessful radio resources allocation:\nBSS-A      MSC-B                  MSC-A            MSC-B'\n|            |                      |                |\n|            |                      |                |    BSS-B'\n|            |                      |                |         |\n|            |                      |                |HANDOVER |\n|            |                      |                |<--------|\n|            |                      |                |REQUEST  |\n|            |                      |                ACKNOWLEDGE\n|            |                      |                |         |\n|            |                      |MAP PREPARE HANDOVER      |\n|            |                      |<---------------|         |\n|            |MAP PREPARE SUBSEQUENT|    response    |         |\n|            |<---------------------|                |         |\n|            |HANDOVER response     |                |         |\n| HANDOVER   |                      |                |         |\n|<-----------|                      |                |         |\n| COMMAND    |                      |                |         |\n|            |                      |                |         |\nb)\tradio resources allocation queued and successful handover number allocation, if performed. Later successful radio resources allocation indication:\nBSS-A      MSC-B                  MSC-A            MSC-B'\n|            |                      |                |\n|            |                      |                |    BSS-B'\n|            |                      |                |         |\n|            |                      |                | QUEUING |\n|            |                      |                |<--------|\n|            |                      |                |INDICAT. |\n|            |                      |                |         |\n|            |                      |MAP PREPARE HANDOVER      |\n|            |                      |<---------------|         |\n|            |MAP PREPARE SUBSEQUENT|   response     |         |\n|            |<---------------------|                |         |\n|            |HANDOVER response     |                |         |\n|            |                      |                |HANDOVER |\n|            |                      |                |<--------|\n|            |                      |                |REQUEST  |\n|            |                      |                ACKNOWLEDGE\n|            |                      |                |         |\n|            |                      |MAP PROCESS ACCESS        |\n|            |                      |<---------------|         |\n|            |MAP FORWARD ACCESS    |SIGNALLING request        |\n|            |<---------------------|                |         |\n|            |SIGNALLING request    |                |         |\n| HANDOVER   |                      |                |         |\n|<-----------|                      |                |         |\n| COMMAND    |                      |                |         |\nFigure 17: Signalling for Subsequent Inter-MSC Handover to third MSC (MSC-B') execution(Positive outcome)\nPossible Negative outcomes:\nc)\tuser error detected, or component rejection or dialogue abortion performed by MSC-B':\nBSS-A      MSC-B                  MSC-A            MSC-B'\n|            |                      |                |\n|            |                      |                |    BSS-B'\n|            |                      |MAP PREPARE HANDOVER      |\n|            |                      |response negative result  |\n|            |                      |MAP CLOSE       |         |\n|            |                      |<---------------|         |\n|            |                      |MAP U/P -ABORT  |         |\n|            |MAP PREPARE SUBSEQUENT|                |         |\n|            |<---------------------|                |         |\n|            |HANDOVER response negative             |         |\n| HANDOVER   |result                |                |         |\n|<-----------|                      |                |         |\n| REQUIRED   |                      |                |         |\n| REJECT     |                      |                |         |\n| (Note 1)   |                      |                |         |\nd)\tradio resources allocation failure:\nBSS-A      MSC-B                  MSC-A            MSC-B'\n|            |                      |                |\n|            |                      |                |    BSS-B'\n|            |                      |                |         |\n|            |                      |                |HANDOVER |\n|            |                      |                |<--------|\n|            |                      |                |FAILURE  |\n|            |                      |                |         |\n|            |                      |MAP PREPARE HANDOVER      |\n|            |                      |<---------------|         |\n|            |MAP PREPARE SUBSEQUENT| response       |         |\n|            |<---------------------|                |         |\n|            |HANDOVER response     |                |         |\n| HANDOVER   |                      |                |         |\n|<-----------|                      |                |         |\n| REQUIRED   |                      |                |         |\n| REJECT     |                      |                |         |\n| (Note 1)   |                      |                |         |\ne)\tradio resources allocation queued and successful handover number allocation (if performed). Later unsuccessful radio resources allocation:\nBSS-A      MSC-B                  MSC-A            MSC-B'\n|            |                      |                |\n|            |                      |                |    BSS-B'\n|            |                      |                |         |\n|            |                      |                | QUEUING |\n|            |                      |                |<--------|\n|            |                      |                |INDICAT. |\n|            |                      |                |         |\n|            |                      |MAP PREPARE HANDOVER      |\n|            |                      |<---------------|         |\n|            |MAP PREPARE SUBSEQUENT| response       |         |\n|            |<---------------------|                |         |\n|            |HANDOVER response     |                |         |\n|            |                      |                |HANDOVER |\n|            |                      |                |<--------|\n|            |                      |                |FAILURE  |\n|            |                      |                |         |\n|            |                      |MAP PROCESS ACCESS        |\n|            |                      |<---------------|         |\n|            |                      |SIGNALLING request        |\n|            |MAP FORWARD ACCESS    |                |         |\n|            |<---------------------|                |         |\n|            |SIGNALLING request    |                |         |\n| HANDOVER   |                      |                |         |\n|<-----------|                      |                |         |\n| REQUIRED   |                      |                |         |\n| REJECT     |                      |                |         |\n| (Note 1)   |                      |                |         |\nFigure 18: Signalling for Subsequent Inter-MSC Handover to third MSC (MSC-B') execution (Negative outcome)\nNOTE 1:\tPossible rejection of the handover because of the negative outcome of MAP or BSSMAP procedure.\nPositive outcome:\nBSS-A      MSC-B                  MSC-A            MSC-B'\n|            |                      |                |\n|            |                      |                |    BSS-B'\n|            |                      |                |         |\n|            |                      |                |HANDOVER |\n|            |                      |                |<--------|\n|            |                      |                |COMPLETE |\n|            |                      |                |         |\n|            |                      |MAP SEND END SIGNAL       |\n|            |                      |<---------------|         |\n|            | MAP SEND END SIGNAL  |                |         |\n|            |<---------------------|                |         |\n|            | response             |                |         |\n| CLEAR      |                      |                |         |\n|<-----------|                      |                |         |\n| COMMAND    |                      |                |         |\nFigure 19: Signalling for Subsequent Inter-MSC Handover to third MSC (MSC-B') completion (Successful completion of the procedure)\nNegative outcome:\nBSS-A      MSC-B                  MSC-A            MSC-B'\n|            |                      |                |\n|HANDOVER    |                      |                |    BSS-B'\n|----------->|                      |                |         |\n|FAILURE     |MAP PROCESS ACCESS    |                |         |\n|            |--------------------->|                |         |\n|            |SIGNALLING request (Note 1)            |         |\n|            |                      |                |         |\n|            |                      |MAP U -ABORT    |         |\n|            |                      |--------------->|         |\n|            |                      |                |CLEAR    |\n|            |                      |                |-------->|\n|            |                      |                |COMMAND  |\n|            |                      |                |         |\nFigure 20: Signalling for Subsequent Inter-MSC Handover to third MSC (MSC-B') completion (Unsuccessful completion of the procedure)\nNOTE 1:\tSpecific interworking case detailed below.\nThe specific interworking case in MSC-A compared to the clauses 4.5.1 and 4.5.2 occurs between HANDOVER FAILURE encapsulated in a Process Access Signalling from MSC-B and the abortion of the dialogue with MSC-B' in the case of a reversion to old channel of the MS:\n----------------------------------------------------------------\n|   29.002                         29.002         |Notes\n--------┼-------------------------------------------------┼-----\nForward | MAP PROCESS-SIGNALLING                          |\nmessage |         request                                 |\n|                                                 |\n|         -AN-APDU(               MAP U -ABORT    |  1\n|         HANDOVER FAILURE)                       |\n|                                                 |\n--------┼-------------------------------------------------┼-----\nPositive|                                                 |\nresult  |                                                 |\n--------┼-------------------------------------------------┼-----\nNegative|                                                 |\nresult  |                                  MAP U/P -ABORT |  2\n|                                                 |\nNOTE 1:\tThe abortion of the dialogue triggers in MSC-B' the clearing of the circuit connection with MSC-A, if any, and of the Resources between MSC-B' and BSS-B'.The abortion of the dialogue ends the handover procedure with MSC-B'.\nNOTE 2:\tThe abortion of the dialogue ends the handover procedure with MSC-B.",
      "chunk_type": "general",
      "cross_references": [
        "clause_4.5.1",
        "figure_20",
        "figure_16",
        "figure_17",
        "figure_18",
        "figure_19",
        "ts_23.009"
      ]
    },
    {
      "chunk_id": "ts_29.010_4.5.4",
      "section_id": "4.5.4",
      "section_title": "BSSAP Messages transfer on E-Interface",
      "content": "The following mapping applies to the encapsulation performed in MSC-A.\n----------------------------------------------------------------\n|   24.008/48.008                  29.002         |Notes\n--------┼-------------------------------------------------┼-----\nForward | BSSAP messages     MAP FORWARD ACCESS SIGNALLING|\nmessage |                               request           |  1\n|                                                 |\n|                       -AN-APDU (BSSAP messages) |\n--------┼-------------------------------------------------┼-----\nPositive|                                                 |\nresult  |                                                 |  2\n--------┼-------------------------------------------------┼-----\nNegative|                                                 |\nresult  |                               MAP CLOSE         |\n|                               MAP U/P -ABORT    |\n|                                                 |\nNOTE 1:\tComplete BSSAP messages to be sent on MSC-B - BSS-B interface (BSSMAP or DTAP messages) are embedded into the AN-APDU parameter (see clause 6 of 3GPP TS 49.008 [14] [14] for the description of the set of BSSMAP messages).\nNOTE 2:\tThe Return Result does not apply. If MSC-B returns a message, this message will arrive in an Invoke: Process Access Signalling.\nThe following mapping applies to the encapsulation performed in MSC-B.\n----------------------------------------------------------------\n|   24.008/48.008                  29.002         |Notes\n--------┼-------------------------------------------------┼-----\nForward | BSSAP messages     MAP PROCESS ACCESS SIGNALLING|\nmessage |                                request          |  1\n|                                                 |\n|                       -AN-APDU (BSSAP messages)|\n--------┼-------------------------------------------------┼-----\nPositive|                                                 |\nresult  |                                                 |  2\n--------┼-------------------------------------------------┼-----\nNegative|                                                 |\nresult  |                               MAP CLOSE         |\n| CLEAR COMMAND                                   |\n|                                                 |\n| equipment failure             MAP U/P -ABORT    |  3\n|                                                 |\nNOTE 1:\tComplete BSSAP messages to be sent to MSC-A (BSSMAP or DTAP messages) are embedded into the AN-APDU parameter (see 3GPP TS 49.008 [14] for the description of the set of BSSMAP messages).\nNOTE 2:\tThe Return Result does not apply. If MSC-A returns a message, this message will arrive in an Invoke: Forward Access Signalling.\nNOTE 3:\tThe abortion of the dialogue triggers the clearing of the circuit connection with MSC-A, if any, of the Radio Resources on the A-Interface and the release of the SCCP connection between MSC-B and BSS-B. The clearing of the Radio Resources (the clearing indication received from BSS-B is transmitted to MSC‑A) or the loss of the SCCP connection between MSC-B and BSS-B, triggers in MSC-B the abortion of the dialogue on the E-Interface and the clearing of the circuit connection with MSC-A, if any.",
      "chunk_type": "general",
      "cross_references": [
        "ts_49.008_clause_6",
        "ts_49.008"
      ]
    },
    {
      "chunk_id": "ts_29.010_4.5.5",
      "section_id": "4.5.5",
      "section_title": "Processing in MSC-B, and information transfer on E-interface",
      "content": "The following parameters require processing (e.g. to store the parameter, to internally generate the parameter) in MSC‑B. The relevant BSSMAP procedures are mentioned to ease the comprehension, their detailed description is the scope of 3GPP TS 48.008 [12]. Each BSSMAP message listed in 3GPP TS 49.008 [14] being transferred on E-interface shall use the mechanisms given in clause 4.5.4 and is described in 3GPP TS 48.008 [12].\nFor intra-MSC-B handover/relocation and security interworking , after inter-MSC handover from GSM to GSM, the 3G_MSC-B needs additional information to be able to perform security mode and integrity protection procedures. These RANAP informations are transferred between MSC-A and 3G-MSC-B in MAP messages, defined in 3GPP TS 29.002 [9].\nFor subsequent handover/relocation, after inter-MSC handover from GSM to GSM, the 3G_MSC-B needs additional information to be able to perform service handover procedures. The relevant information is transferred between MSC-A and 3G-MSC-B in MAP messages, defined in 3GPP TS 29.002 [9].\nFor subsequent handover/relocation, after inter-MSC handover from GSM to GSM, the 3G_MSC-B needs additional information to be able to forward access rights information in the context of Shared Network to the RAN. The relevant information is transferred between MSC-A and 3G-MSC-B in MAP messages, defined in 3GPP TS 29.002 [9].\nFor intra-MSC-B handover after inter MSC handover, MSC-B needs additional information to be able to perform regional subscription checks and CSG subscription checks. The relevant information is transferred between MSC-A and MSC-B in MAP messages, defined in 3GPP TS 29.002 [9].",
      "chunk_type": "procedure",
      "cross_references": [
        "clause_4.5.4",
        "ts_48.008",
        "ts_49.008",
        "ts_29.002"
      ]
    },
    {
      "chunk_id": "ts_29.010_4.5.5.1",
      "section_id": "4.5.5.1",
      "section_title": "Encryption Information",
      "content": "A sequence of possible encryption algorithms can be sent to a BSS in Cipher Mode Command or Handover Request. The BSS chooses one of the listed algorithms and reports this back to the MSC in Cipher Mode Complete or Handover Request Acknowledge respectively.\nMSC-B shall remove algorithms not allowed by MSC-B from the list of algorithms received from MSC-A before forwarding it to the BSS. The modified list of algorithms, the ciphering key and the chosen algorithm shall be stored by MSC-B, and the chosen value sent to MSC-A.\nTransfer of Information:\nIf ciphering has not been performed before Inter-MSC Handover, this will be controlled by MSC-A after the completion of Inter-MSC Handover.\nCiphering control towards MSC-B:\nIf Ciphering has been performed before Inter-MSC Handover:\n-\tin the Handover Request BSSMAP message (information included).\nThe Handover Request Acknowledge should in this case contain the indication of the chosen algorithm.\nIf Ciphering has NOT been performed before Inter-MSC Handover:\n-\tin the Cipher Mode Command procedure between MSC-A and MSC-B.\nIf the encryption algorithm is changed at an intra-BSS handover in BSS-B this must be reported to MSC-A in:\n-\tthe BSSMAP Handover Performed procedure.\nIf the encryption algorithm is changed at an intra-MSC handover in MSC-B this must be reported to MSC-A in:\n-\tthe BSSMAP Handover Performed procedure which shall be initiated by MSC-B on reception from BSS-B of the Handover Complete message (the information being previously received in the Handover Request Acknowledge message).\nNote also that the chosen encryption value may be contained in the BSSMAP Assignment Complete message. This may happen if the encryption value changes e.g. at a second assignment during a call (e.g. from TCH to SDCCH).",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.010_4.5.5.2",
      "section_id": "4.5.5.2",
      "section_title": "Channel Type",
      "content": "Assignment Request and Handover Request (BSSMAP) may give the BSS a choice, in the same way as the Encryption Algorithm above. Depending on the Channel Type Info, the chosen channel may have impact on subsequent handovers, internal in MSC-B and inter-MSC controlled by MSC-A. Some values in channel Type Info indicate that if a particular channel once has been chosen, the same type must be used for the rest of the call.\nThe Channel Type, and the characteristics of the chosen channel shall be stored by MSC-B, and the Chosen Channel and/or Speech Version information elements transferred to MSC-A.\nTransfer of Information:\nIndependently of the type of resource (Signalling only (e.g. SDCCH) or TCH) assigned to the MS, the Channel Type Information is transferred to MSC-B in:\n-\tthe Handover Request BSSMAP message, and the Chosen Channel and/or Speech Version should be reported back to MSC-A in the Handover Request Acknowledge.\nIf a new type of resource is to be assigned after Inter-MSC Handover, this can be made with:\n-\tthe BSSMAP Assignment procedure between MSC-A and MSC-B (Chosen Channel and/or Speech Version in Assignment Complete).\nIf the Channel Type (the chosen channel and/or chosen speech version) is changed at an intra-BSS handover in BSS-B this must be reported to MSC-A in:\n-\tthe BSSMAP Handover Performed procedure.\nIf the Channel Type (the chosen channel or chosen speech version) is changed at an intra-MSC handover in MSC-B this must be reported to MSC-A in:\n-\tthe BSSMAP Handover Performed procedure which shall be initiated by MSC-B on reception from BSS-B of the Handover Complete message (the information being previously received in the Handover Request Acknowledge message).",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.010_4.5.5.3",
      "section_id": "4.5.5.3",
      "section_title": "Classmark",
      "content": "This information shall be stored by MSC-B and might be received either from MSC-A, or from the MS when the MS initiates a Classmark Update.\nTransfer of Information due to Classmark received from MSC-A:\nThis information shall be stored by MSC-B and is received:\n-\tin the Handover Request BSSMAP message.\nIf a new type of resource is to be assigned after Inter-MSC Handover, Classmark Information MAY be included:\n-\tin the BSSMAP Assignment procedure.\nTransfer of Information, due to \"Classmark Signalling Procedures\".\nThis information shall be stored by MSC-B and can be received:\n-\tDue to a classmark update, either requested from MSC-A (Classmark Request, Classmark Update), or an MS-Initiated Classmark Update.\nThis can be carried out either with:\n-\tthe BSSMAP Classmark procedure(s).\nApart from these cases there is the \"odd\" case where a Classmark Update can be received during an Inter-MSC Handover by MSC-B, i.e. before the MS has moved to the new channel controlled by MSC-B. This can be made with transparent transfer of BSSMAP Classmark Update.",
      "chunk_type": "requirement",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.010_4.5.5.4",
      "section_id": "4.5.5.4",
      "section_title": "Downlink DTX-Flag",
      "content": "The parameter shall be stored by MSC-B to be used at internal Handover in MSC-B.\nTransfer of Information:\nReceived by MSC-B from MSC-A in either:\nIf the MS has already been assigned to a TCH for speech before the Inter-MSC Handover, the DTX-flag should be sent in:\n-\tthe Handover Request BSSMAP message;\n(if the type of resource is not TCH for speech, the DTX-flag shall not be included).\nIf a new assignment to a TCH for speech after an Inter-MSC Handover is to be performed, this can be made with:\n-\tthe BSSMAP Assignment procedure.",
      "chunk_type": "requirement",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.010_4.5.5.5",
      "section_id": "4.5.5.5",
      "section_title": "Priority",
      "content": "The parameter shall be stored by MSC-B and is received according to below:\nTransfer of Information:\nReceived by MSC-B from MSC-A in:\n-\tthe Handover Request BSSMAP message.\nIf a change is needed after an Inter-MSC Handover with:\n-\tthe BSSMAP Assignment procedure.",
      "chunk_type": "requirement",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.010_4.5.5.6",
      "section_id": "4.5.5.6",
      "section_title": "MSC/BSC-Invoke Trace Information Elements",
      "content": "The process to be performed by MSC-B on the information elements of the MSC or BSC Invoke Trace BSSMAP messages is left for further study.",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.010_4.5.5.7",
      "section_id": "4.5.5.7",
      "section_title": "LSA Identifier List",
      "content": "The parameter shall be stored by MSC-B and is received according to below:\nTransfer of Information:\nReceived by MSC-B from MSC-A in:\n-\tthe Handover Request BSSMAP message.\nIf a change is needed after an Inter-MSC Handover with:\n-\tthe LSA Information BSSMAP message.",
      "chunk_type": "parameter",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.010_4.5.5.8",
      "section_id": "4.5.5.8",
      "section_title": "Selected UMTS Algorithm",
      "content": "After inter-MSC handover, the 3G_MSC-B can perform intra-MSC GSM to UMTS handover. A sequence of possible encryption and integrity protection algorithms, received from the 3G_MSC-A, can be sent to an RNS in Relocation Request or  in Security Mode Command in case of  cipher mode setting after intra.MSC-B handover from GSM to UMTS. The RNS chooses one of the listed algorithms and reports this back to the 3G_MSC in Relocation Request Acknowledge or  Security Mode Complete respectively. The MSC-B provides the Selected UMTS algorithm information to the MSC-A. The Selected UMTS algorithms IE in the MAP Process Access Signalling Request message refers to the Chosen Integrity Protection Algorithm and Chosen Encryption Algorithm, defined in  RANAP specification 3GPP TS 25.413 [7]\nThe selected algorithm shall be stored by 3G_MSC-B, and sent to 3G_MSC-A.\nTransfer of Information:\n-\tIf ciphering has not been performed before Inter-MSC Handover, this will be controlled by 3G_MSC-A after the completion of Inter-MSC Handover and possibly after intra-MSC-B handover from  GSM to UMTS. In both cases Selected UMTS algorithm information is received by 3G_MSC-A from 3G_MSC-B in:\n-\tThe Process Access Signalling Request MAP message.",
      "chunk_type": "general",
      "cross_references": [
        "ts_25.413"
      ]
    },
    {
      "chunk_id": "ts_29.010_4.5.5.9",
      "section_id": "4.5.5.9",
      "section_title": "Allowed UMTS Algorithms",
      "content": "In case of GSM-subscriber, the Integrity Protection Information and UMTS Encryption Information are not transferred to the MSC-B during inter-MSC handover. Allowed UMTS algorithms is UMTS information that is required in RANAP Relocation Request and RANAP Security Mode Command, and shall be provided by 3G_MSC-A. 3G_MSC-B needs this information in case of an intra-MSC GSM to UMTS handover  and in subsequent security mode setting, after an inter-MSC handover. Therefore 3G_MSC-A must provide this information in case of an inter-MSC GSM to GSM handover. The Allowed UMTS algorithms IE in the MAP Prepare Handover and in the MAP Forward Access Signalling Request messages refers to the  Permitted Integrity Protection Algorithms in Integrity Protection  Information and Permitted Encryption Algorithms in Encryption Information, defined in  RANAP specification 3GPP TS 25.413 [7].\nAllowed UMTS algorithms shall be stored by 3G_MSC-B.\nTransfer of information:\nIf ciphering has not been performed before Inter-MSC Handover, this will be controlled by 3G_MSC-A after the completion of Inter-MSC Handover.\nCiphering control towards 3G_MSC-B:\nIf Ciphering has been performed before Inter-MSC Handover:\n-\tThe Prepare Handover Request MAP message.\nIf Ciphering has NOT been performed before Inter-MSC Handover:\n-\tThe Forward Access Signalling Request MAP message.",
      "chunk_type": "general",
      "cross_references": [
        "ts_25.413"
      ]
    },
    {
      "chunk_id": "ts_29.010_4.5.5.10",
      "section_id": "4.5.5.10",
      "section_title": "BSSMAP Service Handover",
      "content": "This information shall be stored by 3G_MSC-B and sent to a BSS in Handover Request, when 3G_MSC-B performs handover to GSM.\nTransfer of information:\n-\tThe BSSMAP Service Handover information is transferred to 3G_MSC-B in:\n-\tthe Handover Request BSSMAP message.\nIf a new assignment of a TCH after an inter-MSC handover is to be performed, the BSSMAP Service Handover information is transferred to 3G_MSC-B in:\n-\tthe BSSMAP Assignment procedure.",
      "chunk_type": "requirement",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.010_4.5.5.11",
      "section_id": "4.5.5.11",
      "section_title": "RANAP Service Handover",
      "content": "This information shall be stored by 3G_MSC-B and sent to an RNS in Relocation Request, when 3G_MSC-B performs relocation or handover to UMTS.\nTransfer of information:\n-\tThe RANAP Service Handover information is transferred to 3G_MSC-B in:\n-\tthe Prepare Handover Request MAP message.\nIf a new assignment of a Radio Access Bearer after an inter-MSC handover is to be performed, the information is transferred to 3G_MSC-B in:\n-\tthe Forward Access Signalling Request MAP message\nand sent by 3G_MSC-B to the RNS in RAB Assignment Request.",
      "chunk_type": "requirement",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.010_4.5.5.12",
      "section_id": "4.5.5.12",
      "section_title": "SNA Access Information",
      "content": "This information shall be stored by 3G_MSC-B and sent to an RNS in the Relocation Request message when 3G_MSC-B performs handover to UMTS.\nTransfer of information:\n-\tThe SNA Access Information is transferred to 3G_MSC-B in:\n-\tthe Handover Request BSSMAP message.",
      "chunk_type": "requirement",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.010_4.5.5.13",
      "section_id": "4.5.5.13",
      "section_title": "UESBI",
      "content": "This information shall be stored by 3G_MSC-B and sent to an RNS in Relocation Request, when 3G_MSC-B performs relocation or handover to UMTS.\nTransfer of information:\nThe UESBI information is transferred to 3G_MSC-B in:\n-\tthe Prepare Handover Request MAP message.",
      "chunk_type": "requirement",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.010_4.5.5.14",
      "section_id": "4.5.5.14",
      "section_title": "Alternative Channel Type",
      "content": "This information shall be stored by 3G_MSC-B and from this information 3G_MSC-B shall generate Alternative RAB Parameters Value IE sent to an RNS in Relocation Request, when 3G_MSC-B performs relocation or handover to UMTS.\nTransfer of information:\n-\tThe Alternative Channel Type information is transferred to 3G_MSC-B in:\n-\tthe Prepare Handover Request MAP message.\nIf a new assignment of a Radio Access Bearer after an inter-MSC handover is to be performed, the information is transferred to 3G_MSC-B in:\n-\tthe Forward Access Signalling Request MAP message.",
      "chunk_type": "requirement",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.010_4.5.5.15",
      "section_id": "4.5.5.15",
      "section_title": "Trace parameters",
      "content": "This information shall be stored by 3G_MSC-B and 3G_MSC-B shall use this information for trace activation for MSC-S, MGW, RNC or BSC.\nTransfer of information:\n-\tThe Trace Parameter List information for MSC-S, MGW and RNC tracing is transferred to 3G_MSC-B in:\n-\tthe Prepare Handover Request MAP message.\n-\tThe Trace Reference and Trace Type information for BSC tracing is transferred to 3G_MSC-B in:\n-\tthe MSC Invoke Trace BSSMAP message.",
      "chunk_type": "parameter",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.010_4.5.6",
      "section_id": "4.5.6",
      "section_title": "Overview of the Technical Specifications GSM interworking for the Inter-MSC Handover",
      "content": "╔══════════════════════════════════════════════════════════════════════════════════════════════════╗\n║ PSTN/ISDN                                                                                        ║\n║               ▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒                                 ║\n║               ▒       +---------------+                        ▒                                 ║\n║ ==============▒====== | ============= | ===============        ▒                                 ║\n║ PLMN          ▒       |               |                        ▒                                 ║\n║               ▒       V               V                        ▒                                 ║\n║ ▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒                                                ▒                                 ║\n║ ▒  BSS-A MSC-A MSC-B BSS-B       ▒     MS                          ║\n║ ▒                                                              ▒                                 ║\n║ ▒                 +-------+                                    ▒ +-------+                       ║\n║ ▒                 |  C M  |                24.008 (Note)       ▒ |  C M  |                       ║\n║ ▒                 +-------|<------------------------------------>+-------|                       ║\n║ ▒ ░░░░░░░░░░░░░░░ |  M M  | ░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░▒  |  M M  |                       ║\n║ ▒ ░+------+48.008 +-------|48.008+-------+ 48.008 +-------+  ░▒  +-------|                       ║\n║ ▒ ░| R R  |<----->|  R R  |<=====>|  R R  |<----->|  R R  |  ░▒  |  R R  |                       ║\n║ ▒ ░+------+       +-------+ (Note)+-------+       +-------+  ░▒  +-------+                       ║\n║ ▒ ░                Λ   Λ             Λ   Λ                   ░▒                                  ║\n║ ▒ ░                |   |    29.010   |   |                   ░▒  Note: Subset of 48.008           ║\n║ ▒ ░                |   V             V   |                   ░▒        procedures as described   ║\n║ ▒ ░                |+-----+ 29.002+-----+|                   ░▒        in the TS 3GPP TS 48.008.      ║\n║ ▒ ░                ||MAP/E|<----->|MAP/E||                   ░▒                                  ║\n║ ▒ ░                |+-----+       +-----+|             23.009░▒                                  ║\n║ ▒ ░░░░░░░░░░░░░░░░ | ░░░░░░░░░░░░░░░░░░░ | ░░░░░░░░░░░░░░░░░░░▒  Remark: The A-bis interface and ║\n║ ▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒ V ▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒ V ▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒          the link layer          ║\n║                   +-----------------------+                               protocols being out of ║\n║                   |       T C A P         |                               the scope of this      ║\n║                   +-----------------------+                               Specification are not  ║\n║    +------------------------------------------------------+               shown here.            ║\n║    |                      S C C P                         |                                      ║\n║    +------------------------------------------------------+                                      ║\n║    +------------------------------------------------------+                                      ║\n║    |                        M T P                         |                                      ║\n║    +------------------------------------------------------+                                      ║\n╚══════════════════════════════════════════════════════════════════════════════════════════════════╝",
      "chunk_type": "definition",
      "cross_references": [
        "ts_48.008"
      ]
    },
    {
      "chunk_id": "ts_29.010_4.6",
      "section_id": "4.6",
      "section_title": "Inter-MSC Handover (UMTS to GSM)",
      "content": "The general principles of the handover procedures are given in 3GPP TS 23.009 [2]. 3GPP TS 29.010 gives the necessary information for interworking between the 3GPP TS 25.413 [7] RANAP protocol, GSM handover procedures and the 3GPP TS 29.002 [9] MAP protocol. The RANAP protocol is used between the RNS and the 3G-MSC.\nThe following three principles apply for the Inter-MSC handover UMTS to GSM:\nThe BSSMAP parameters required for Inter-MSC handover UMTS to GSM are generated as in GSM.\nReceived BSSMAP parameters, e.g. cause code or Handover command, are mapped to the appropriate RANAP parameters, e.g. cause code transparent container to source RNS.\nWhen new parameters need to be added for transfer on the E-interface, the principles stated in the beginning of clause 4.5 shall be followed.",
      "chunk_type": "general",
      "cross_references": [
        "clause_4.5",
        "ts_23.009",
        "ts_29.010",
        "ts_25.413",
        "ts_29.002"
      ]
    },
    {
      "chunk_id": "ts_29.010_4.6.1",
      "section_id": "4.6.1",
      "section_title": "Basic Inter-MSC Handover",
      "content": "When a Mobile Station is handed over between two MSCs, the establishment of a connection between them (described in 3GPP TS 23.009 [2]) requires interworking between A-Interface and E-Interface.\nThe signalling at initiation, execution, completion of the Basic Inter-MSC handover procedure is shown in figures 21 to 26 with both possible positive or negative outcomes.\nAdditionally figure 21b shows the possible interworking when the trace related message is transparently transferred on the E-Interface at Basic Inter-MSC Handover initiation.\nRNS-A         3G-MSC-A                   MSC-B\n|               |                         |\n|RELOCATION     |                         |\n|-------------->|MAP PREPARE HANDOVER     |\n|REQUIRED       |------------------------>| +----------------+\n|               |request                  | |Possible Alloc. |\n|               |                         | |of a handover   |\n|               |                         | |no. in the VLR-B|\n|               |                         | +----------------+\n|               |                         |\n|               |                         |                BSS-B\n|               |                         |                   |\n|               |                         |HANDOVER REQUEST   |\n|               |                         |------------------>|\nFigure 21a: Signalling for Basic Inter-MSC Handover initiation (no trace related messages transferred)\nRNS-A         3G-MSC-A                   MSC-B\n|             (*)                         |\n|RELOCATION     |                         |\n|-------------->|MAP PREPARE HANDOVER     |\n|REQUIRED       |------------------------>| +----------------+\n|               |request(**)              | |Possible Alloc. |\n|               |                         | |of a handover   |\n|               |                         | |no. in the VLR-B|\n|               |                         | +----------------+\n|               |                         |\n|               |                         |                BSS-B\n|               |                         |                   |\n|               |                         |HANDOVER REQUEST   |\n|               |                         |------------------>|\n|               |                         |                   |\n|               |                         |MSC INVOKE TRACE   |\n|               |                         |--------------->(***)\nFigure 21b: Signalling for Basic Inter-MSC Handover initiation (MSC invoke trace message transferred)\n(*):\tTracing invocation has been received from VLR.\n(**):\tIn that case, HANDOVER REQUEST and MSC INVOKE TRACE messages are included within the AN-APDU parameter.\n(***):\tMSC INVOKE TRACE is forwarded to BSS-B if supported by MSC-B.\nPossible Positive outcomes:\na)\tsuccessful radio resources allocation and handover number allocation (if performed):\nRNS-A         3G-MSC-A                   MSC-B              BSS-B\n|               |                         |                   |\n|               |                         |HANDOVER REQUEST   |\n|               |                         |<------------------|\n|               |                         |ACKNOWLEDGE        |\n|               | MAP PREPARE HANDOVER    |                   |\n|               |<------------------------|                   |\n|               | response                |                   |\n|               |                         |                   |\n|RELOCATION COMMAND                       |                   |\n|<--------------|                         |                   |\nb)\tradio resources allocation queued and successful handover number allocation (if performed). Later successful radio resources allocation indication:\nRNS-A         3G-MSC-A                   MSC-B              BSS-B\n|               |                         |                   |\n|               |                         |QUEUING INDICATION |\n|               |                         |<------------------|\n|               |MAP PREPARE HANDOVER     |                   |\n|               |<------------------------|                   |\n|               | response                |                   |\n|               |                         |HANDOVER REQUEST   |\n|               |                         |<------------------|\n|               |                         |ACKNOWLEDGE        |\n|               |MAP PROCESS ACCESS       |                   |\n|               |<------------------------|\n| RELOCATION COMMAND   SIGNALLING request |                   |\n|<--------------|                         |                   |\n|               |                         |                   |\nFigure 22: Signalling for Basic Inter-MSC Handover execution (Positive outcomes)\nPossible Negative outcomes:\nc)\tuser error detected, or handover number allocation unsuccessful (if performed), or component rejection or dialogue abortion performed by MSC-B:\nRNS-A         3G-MSC-A                   MSC-B              BSS-B\n|               |                         |                   |\n|               |MAP PREPARE HANDOVER response                |\n|               |negative result, MAP CLOSE                   |\n|               |<------------------------|                   |\n|               |MAP U/P-ABORT            |                   |\n|               |                         |                   |\n|RELOCATION PREPARATION                   |                   |\n|<--------------|                         |                   |\n|FAILURE(Note 1)|                         |                   |\n|               |                         |                   |\nd)\tradio resources allocation failure:\nRNS-A        3G-MSC-A                    MSC-B              BSS-B\n|               |                         |                   |\n|               |                         |HANDOVER FAILURE   |\n|               |                         |<------------------|\n|               |MAP PREPARE HANDOVER     |                   |\n|               |<------------------------|                   |\n|               | response                |                   |\n|               |                         |                   |\n|RELOCATION PREPARATION                   |                   |\n|<--------------|                         |                   |\n|FAILURE(Note 1)|                         |                   |\n|               |                         |                   |\ne)\tradio resources allocation queued and successful handover number allocation (if performed). Later unsuccessful radio resources allocation:\nRNS-A         3G-MSC-A                   MSC-B              BSS-B\n|               |                         |                   |\n|               |                         |QUEUING INDICATION |\n|               |                         |<------------------|\n|               |MAP PREPARE HANDOVER     |                   |\n|               |<------------------------|                   |\n|               | response                |                   |\n|               |                         |                   |\n|               |                         |HANDOVER FAILURE   |\n|               |                         |<------------------|\n|               |MAP PROCESS ACCESS       |                   |\n|               |<------------------------|                   |\n|               | SIGNALLING request      |                   |\n|               |                         |                   |\n|RELOCATION PREPARATION                   |                   |\n|<--------------|                         |                   |\n|FAILURE(Note 1)|                         |                   |\nf)\tunsuccessful handover execution (Reversion to the old radio resources):\nRNS-A         3G-MSC-A                   MSC-B              BSS-B\n|               |                         |                   |\n|RELOCATION     |                         |                   |\n|-------------->|                         |                   |\n|CANCEL         |                         |                   |\n|               |MAP U -ABORT             |                   |\n|               |------------------------>|                   |\n|               |                         |CLEAR COMMAND      |\n|               |                         |------------------>|\n|RELOCATION     |                         |                   |\n|<--------------|                         |                   |\n|CANCEL ACK     |                         |                   |\nFigure 23: Signalling for Basic Inter-MSC Handover execution (Negative outcomes)\nNOTE 1:\tPossible rejection of the handover because of the negative outcome of MAP or RANAP procedure.\nRNS-A         3G-MSC-A                    MSC-B              BSS-B\n|               |                         |                   |\n|               |                         |HANDOVER COMPLETE  |\n|               |                         |<------------------|\n|               |MAP SEND END SIGNAL request                  |\n|               |<------------------------|                   |\n|IU RELEASE COMMAND                       |                   |\n|<--------------|                         |                   |\n|               |                         |                   |\nFigure 24: Signalling for Basic Inter-MSC Handover completion\nPositive outcome:\nRNS-A         3G-MSC-A                   MSC-B              BSS-B\n|               |                         |                   |\n|               |MAP SEND END SIGNAL      |                   |\n|               |------------------------>|                   |\n|               | response                |CLEAR COMMAND      |\n|               |                         |------------------>|\n|               |                         | (Note 2)          |\nFigure 25: Signalling for Basic Inter-MSC Handover completion (Positive outcome)\nNegative outcome:\nRNS-A         3G-MSC-A                    MSC-B              BSS-B\n|               |                         |                   |\n|               | MAP U/P -ABORT          |                   |\n|               |------------------------>|                   |\n|               |                         |CLEAR COMMAND      |\n|               |                         |------------------>|\n|               |                         |                   |\nFigure 26: Signalling for Basic Inter-MSC Handover completion (Negative outcome)\nNOTE 2:\tFrom interworking between MAP and BSSMAP point of view, when the call is released.\nThe handover procedure is normally triggered by RNS-A by sending a RELOCATION REQUIRED message on Iu-Interface to 3G-MSC-A. The invocation of the Basic Inter-MSC handover procedure is performed and controlled by 3G-MSC-A. The sending of the MAP Prepare-Handover request to MSC-B is triggered in 3G-MSC-A upon receipt of the RELOCATION REQUIRED message. For compatibility reason, the cell identity of the cell where the call is to be handed over in MSC-B area, provided in the RELOCATION REQUIRED message, is mapped into targetCellId MAP parameter and the HANDOVER REQUEST message is encapsulated in the AN-APDU MAP parameter of the Prepare‑Handover MAP request. MSC-B can invoke another operation towards the VLR-B (allocation of the handover number described in 3GPP TS 29.002 [9]).\nAdditionally, if tracing activity has been invoked, the trace related message can be transferred on the E-Interface encapsulated in the AN-APDU MAP parameter of the Prepare-Handover Request. If transferred, one complete trace related message at a time shall be included in the AN-APDU MAP parameter after the HANDOVER REQUEST message.\nThe interworking between Prepare Handover and RELOCATION REQUIRED is as follows:\n----------------------------------------------------------------\n|   25.413                         29.002         |Notes\n--------┼-------------------------------------------------┼-----\nForward | RELOCATION REQUIRED MAP PREPARE HANDOVER request|\nmessage |                                                 |\n|                            -ho-NumberNotRequired|   1\n|  RANAP information        -targetCellId         |\n|         elements           -AN-APDU(            |   2\n|                            HANDOVER REQUEST,    |\n|                                                 |\n| MSC INVOKE TRACE)                               |\n--------┼-------------------------------------------------┼-----\nPositive| RELOCATION CMD     MAP PREPARE HANDOVER response|\nresult  |                                                 |   3\n|                             -handover number    |\n|                             -AN-APDU(           |\n|                              QUEUING INDICATION |\n|                              or HANDOVER REQUEST|\n|                              ACKNOWLEDGE)       |\n|                                                 |\n--------┼-------------------------------------------------┼-----\nNegative| RELOCATION PREP FAILURE     MAP PREPARE HANDOVER|   4\nresult  |                                                 |\n| Relocation failure in            System Failure |\n| target RNC/CN or target system                  |\n|\"                             No Handover Number |\n|                                 available       |\n|\"                             UnexpectedDataValue|\n|\"                             Data Missing       |\n|                                                 |\n|\"                             MAP CLOSE          |\n|\"                             MAP U/P -ABORT     |\n|                                                 |\nNOTE 1:\tThe BSSMAP information elements are already stored in 3G-MSC.\nThe ho-NumberNotRequired parameter is included by 3G-MSC-A, when 3G-MSC-A decides not to use any circuit connection with MSC-B. No handover number shall be present in the positive result. Any negative response from MSC-B shall not be due to handover number allocation problem.\nNOTE 2:\tThe process performed on the RANAP information elements received in the RELOCATION REQUIRED message is described in the 3GPP TS 25.413 [7].\nNOTE 3:\tThe response to the Prepare-Handover request can include in its AN-APDU parameter, identifying the 3GPP TS 48.006 protocol, either a BSSMAP QUEUING INDICATION, or a BSSMAP HANDOVER REQUEST ACKNOWLEDGE.\nIn the first case, 3G-MSC-A shall wait for the radio resources allocation response from MSC-B, transmitted to 3G-MSC-A as described in clause 4.5.4.\nIn the second case, the positive result triggers in 3G-MSC-A the sending on Iu-Interface of the RELOCATION CMD.\nIn the third case, the positive result triggers in 3G-MSC-A.\nNOTE 4:\tThe possible sending of the RELOCATION PREP FAILURE message is described in the 3G 25.413.\n(The possible sending of the RELOCATION PREP FAILURE message upon receipt of the HANDOVER FAILURE is out of the scope of the 3GPP TS 29.010 and lies in the 3GPP TS 25.413 [7]).\nThe interworking between Send End Signal and HANDOVER COMPLETE in MSC-B is as follows:\n----------------------------------------------------------------\n|   48.008                          29.002         |Notes\n--------┼-------------------------------------------------┼-----\nForward | HANDOVER COMPLETE   MAP SEND END SIGNAL request |\nmessage |                                                 |\n|                               -AN-APDU(         |\n|                               HANDOVER COMPLETE)|\n|                                                 |\n--------┼-------------------------------------------------┼-----\nPositive| CLEAR COMMAND       MAP SEND END SIGNAL response|\nresult  |  -Call Control release                          |  1\n--------┼-------------------------------------------------┼-----\nNegative| CLEAR COMMAND                                   |\nresult  |  -Call Control release        MAP CLOSE         |  2\n|  -Call Control release        MAP U/P -ABORT    |\n|                                                 |\nNOTE 1:\tThe positive empty result triggers the clearing of the Radio Resources on the A-Interface and the release of the SCCP connection between MSC-B and BSS-B. If a circuit connection is used between 3G_MSC-A and MSC-B, the 'Call Control release' clearing cause shall only be given to BSS-B when MSC-B has received a clearing indication on its circuit connection with 3G_MSC-A.\nNOTE 2:\tThe abortion of the dialogue or the rejection of the component triggers in MSC-B the clearing of its circuit connection with 3G_MSC-A, if any, of the Radio Resources on the A-Interface and the release of the SCCP connection between MSC-B and BSS-B.\nThe interworking between Send End Signal and  IU RELEASE COMMAND in 3G_MSC-A is as follows:\n----------------------------------------------------------------\n|   29.002                          25.413        |Notes\n--------┼-------------------------------------------------┼-----\nForward | MAP SEND END SIGNAL          IU RELEASE COMMAND |\nmessage | response                                        |\n|          -AN-APDU(HANDOVER COMPLETE)            |\n|                         Successful Relocation   |\n--------┼-------------------------------------------------┼-----\nPositive|                                                 |\nresult  |                                                 |\n--------┼-------------------------------------------------┼-----\nNegative|                                                 |\nresult  |                                                 |\nThe interworking between RELOCATION CANCEL in case of reversion to old channel of the UE and User Abort in 3G-MSC-A is as follows:\n----------------------------------------------------------------\n|   25.413                         29.002         |Notes\n--------┼-------------------------------------------------┼-----\nForward | RELOCATION CANCEL               MAP U -ABORT    |\nmessage |                                                 |\n|  -Relocation cancelled                          |\n--------┼-------------------------------------------------┼-----\nPositive| RELOCATION CANCEL ACKNOWLEDGEMENT               |\nresult  |                                                 |\n--------┼-------------------------------------------------┼-----\nNegative|                                                 |\nresult  |                                                 |",
      "chunk_type": "general",
      "cross_references": [
        "clause_4.5.4",
        "figure_21",
        "figure_22",
        "figure_23",
        "figure_24",
        "figure_25",
        "figure_26",
        "ts_23.009",
        "ts_29.002",
        "ts_25.413",
        "ts_48.006",
        "ts_29.010"
      ]
    },
    {
      "chunk_id": "ts_29.010_4.6.2",
      "section_id": "4.6.2",
      "section_title": "Subsequent Inter-MSC Handover from  3G-MSC-B back to MSC-A",
      "content": "When a Mobile Station is being handed over back to MSC-A, the procedure (described in TS 23.009) requires interworking between A-Interface, Iu-interface and E-Interface.\nThe signalling at initiation, execution and completion of the Subsequent Inter-MSC handover procedure is shown in figures 27 to 31.\nRNS-A         3G-MSC-B                   MSC-A\n|               |                         |\n|RELOCATION     |                         |\n|-------------->|MAP PREPARE SUBSEQUENT   |\n|REQUIRED       |------------------------>|\n|               |HANDOVER request         |\n|               |                         |                BSS-B\n|               |                         |                   |\n|               |                         |HANDOVER REQUEST   |\n|               |                         |------------------>|\nFigure 27: Signalling for Subsequent Inter-MSC Handover back to MSC-A initiation\nPossible Positive outcomes:\na)\tsuccessful radio resources allocation:\nRNS-A          3G-MSC-B                  MSC-A              BSS-B\n|               |                         |                   |\n|               |                         |HANDOVER REQUEST   |\n|               |                         |<------------------|\n|               |                         |ACKNOWLEDGE        |\n|               | MAP PREPARE SUBSEQUENT  |                   |\n|               |<------------------------|                   |\n|               | HANDOVER response       |                   |\n|RELOCATION CMD |                         |                   |\n|<--------------|                         |                   |\nb)\tradio resources allocation queued. Later successful radio resources allocation indication:\nRNS-A         3G-MSC-B                   MSC-A              BSS-B\n|               |                         |QUEUING INDICATION |\n|               |                         |<------------------|\n|               | MAP PREPARE SUBSEQUENT  |                   |\n|               |<------------------------|                   |\n|               | HANDOVER response       |                   |\n|               |                         |HANDOVER REQUEST   |\n|               |                         |<------------------|\n|               |                         |ACKNOWLEDGE        |\n|               | MAP FORWARD ACCESS      |                   |\n|               |<------------------------|                   |\n|               | SIGNALLING request      |                   |\n|RELOCATION CMD |                         |                   |\n|<--------------|                         |                   |\nFigure 28: Signalling for Subsequent Inter-MSC Handover back to MSC-A execution (Positive outcome)\nPossible Negative outcomes:\nc)\tuser error detected, or component rejection or dialogue abortion performed by MSC-A:\nRNS-A         3G-MSC-B                  MSC-A              BSS-B\n|               |MAP PREPARE SUBSEQUENT HANDOVER              |\n|               |<------------------------|                   |\n|RELOCATION PREP| response negative result|                   |\n|<--------------|                         |                   |\n|FAILURE(Note 1)|                         |                   |\n|               |                         |                   |\nd)\tcomponent rejection or dialogue abortion performed by MSC-A:\nRNS-A         3G-MSC-B                  MSC-A              BSS-B\n|               |MAP CLOSE, MAP U/P ABORT |                   |\n|               |<------------------------|                   |\n|IU RELEASE     |                         |                   |\n|<--------------|                         |                   |\n|   COMMAND     |                         |                   |\ne)\tradio resources allocation failure:\nRNS-A         3G-MSC-B                  MSC-A              BSS-B\n|               |                         | HANDOVER FAILURE  |\n|               |                         |<------------------|\n|               |MAP PREPARE SUBSEQUENT   |                   |\n|               |<------------------------|                   |\n|RELOCATION PREP|    HANDOVER response    |                   |\n|<--------------|                         |                   |\n|FAILURE(Note 1)|                         |                   |\nf)\tradio resources allocation queued. Later unsuccessful radio resources allocation:\nRNS-A         3G-MSC-B                  MSC-A              BSS-B\n|               |                         |QUEUING INDICATION |\n|               |                         |<------------------|\n|               | MAP PREPARE SUBSEQUENT  |                   |\n|               |<------------------------|                   |\n|               |    HANDOVER response    |                   |\n|               |                         |HANDOVER FAILURE   |\n|               |                         |<------------------|\n|               | MAP FORWARD ACCESS      |                   |\n|               |<------------------------|                   |\n|RELOCATION PREP|    SIGNALLING request   |                   |\n|<--------------|                         |                   |\n|FAILURE(Note 1)|                         |                   |\nFigure 29: Signalling for Subsequent Inter-MSC Handover back to MSC-A execution(Negative outcome)\nNOTE 1:\tPossible rejection of the handover because of the negative outcome of MAP or BSSMAP procedure.\nBSS-B         MSC-A                   3G-MSC-B            RNS-A\n|               |                         |                   |\n|HANDOVER       |                         |                   |\n|-------------->|MAP SEND END SIGNAL      |                   |\n|COMPLETE       |------------------------>|                   |\n|               | response                |                   |\n|               |                         |Iu RELEASE COMMAND |\n|               |                         |------------------>|\nFigure 30: Signalling for Subsequent Inter-MSC Handover back to MSC-A completion(Successful completion of the procedure)\nNOTE:\tPositive outcome case shown in figure 9.\nBSS-B         MSC-A                   3G-MSC-B             RNS-A\n|               |                         |                   |\n|HANDOVER       |                         |                   |\n|-------------->|MAP SEND END SIGNAL      |                   |\n|COMPLETE       |------------------------>|                   |\n|               | response                |                   |\n|               |                         |                   |\n|               |MAP U/P -ABORT           |                   |\n|               |<------------------------|                   |\n|               |                         |Iu RELEASE COMMAND |\n|               |                         |------------------>|\n|               |                         |(Note 1)           |\nFigure 31: Signalling for Subsequent Inter-MSC Handover back to MSC-A completion (Unsuccessful completion of the procedure)\nNOTE 1:\tAbnormal end of the procedure which triggers the clearing of all resources in 3G-MSC-B.\nThe interworking between Prepare Subsequent Handover and RELOCATION REQUIRED is as follows:\n----------------------------------------------------------------\n|   25.413                         29.002         |Notes\n--------┼-------------------------------------------------┼-----\nForward |REL. REQUIRED     MAP PREPARE SUBSEQUENT HANDOVER|\nmessage |                              request            |\n|                                                 |\n|                              -target MSC number |\n|                              -targetCellId      |\n|                              -AN-APDU(          |\n|                               HANDOVER REQUEST) |\n|                                                 |\n|                                                 |\n| RANAP information            BSSMAP information |\n|        elements:                elements:       |\n|                                                 |\n| MS Classmark 2                CM2               |\n| Source Id                     Cell Id (serving) |\n| Target Id                     Cell Id (target)  |\n| Cause                         Cause             |1\n| MS Classmark 3                CM3               |\n|                                                 |\n|                           info stored/generated |\n|                           in/by 3G-MSC-B:       |\n|                               Message Type      |\n|                               Channel Type      |\n|                               Speech version    |\n|                               Priority          |\n|                               Interference Band |\n|                               to be used        |\n|                                                 |\n--------┼-------------------------------------------------┼-----\nPositive|RELOCATION CMD.   MAP PREPARE SUBSEQUENT HANDOVER|\nresult  |                             response            |  2\n|                             -AN-APDU(           |\n|                              QUEUING INDICATION |\n|                              or HANDOVER REQUEST|\n|                              ACKNOWLEDGE or     |\n|                              HANDOVER FAILURE)  |\n|                                                 |\n| RANAP information            BSSMAP information |\n|        elements:                elements:       |\n| L3 information               L3 information     |\n|                                                 |\n|                                                 |\n|                                                 |\n--------┼-------------------------------------------------┼-----\nNegative| REL. PREP. FAILURE        MAP PREPARE SUBSEQUENT|  3\nresult  |                           HANDOVER response     |\n| Relocation Failure in Target CN/RNC or Target System Unknown MSC                                               |\n| Relocation Failure in Target CN/RNC or Target System Subsequent Handover                                       |\n|                                         Failure |\n| Relocation Failure in Target CN/RNC or Target System\n|                                                 |\nUnexpectedDataValue                                       |\n| Relocation Failure in Target CN/RNC or Target System Data Missing                                              |\n|                                                 |\n| Iu RELEASE COMMAND                              |\n|                                                 |\n| Relocation Cancelled MAP CLOSE                  |\n| Relocation Cancelled MAP U/P -ABORT             |\n|                                                 |\nNOTE 1:\tThe mapping of cause code values between BSSMAP and RANAP is FFS.\nNOTE 2:\tThe response to the Prepare-Subsequent-Handover request can include in its AN-APDU parameter, identifying the 3GPP TS 48.006 protocol, a BSSMAP QUEUING INDICATION, or a BSSMAP HANDOVER REQUEST ACKNOWLEDGE or a BSSMAP HANDOVER FAILURE.\nIn the first case, 3G-MSC-B shall wait for the radio resources allocation response from MSC-A, transmitted to 3G-MSC-B as described in clause 4.5.4.\nIn the second case, the positive result triggers in 3GMSC-B the sending on Iu‑Interface of the RELOCATION COMMAND.\nIn the third case, the positive result triggers in 3G-MSC-B the sending of the RELOCATION PREPARATION FAILURE.\nNOTE 3:\tThe possible sending of the RELOCATION PREPARATION FAILURE message is described in  3GPP TS 25.413 [7].\nThe interworking between Send End Signal Result and HANDOVER COMPLETE in MSC-A is as follows:\n----------------------------------------------------------------\n|   48.008                          29.002        |Notes\n--------┼-------------------------------------------------┼-----\nForward | HANDOVER COMPLETE    MAP SEND END SIGNAL        |\nmessage |                               response          |\n|                                                 |\n--------┼-------------------------------------------------┼-----\nPositive|                                                 |\nresult  |                                                 |\n--------┼-------------------------------------------------┼-----\nNegative|                                                 |\nresult  |                          MAP U/P -ABORT         |  1\n|                                                 |\nNOTE:\tThe abortion of the dialogue ends the handover procedure with 3G-MSC-B.",
      "chunk_type": "general",
      "cross_references": [
        "clause_4.5.4",
        "figure_27",
        "figure_28",
        "figure_29",
        "figure_30",
        "figure_9",
        "figure_31",
        "ts_23.009",
        "ts_48.006",
        "ts_25.413"
      ]
    },
    {
      "chunk_id": "ts_29.010_4.6.3",
      "section_id": "4.6.3",
      "section_title": "Subsequent Inter-MSC Handover to third MSC",
      "content": "When a Mobile Station is being handed over to a third MSC, the procedure (described in 3GPP TS 23.009 [2]) does require one specific interworking case in MSC-A between E-Interface from 3G-MSC-B and E-Interface from MSC-B' other than the combination of the ones described in clauses 4.6.1 and 4.6.2.\nRNS-A      3G-MSC-B               MSC-A            MSC-B'\n|            |                      |                |\n|RELOCATION  |                      |                |\n|----------->|MAP PREPARE SUBSEQUENT|                |\n|REQUIRED    |--------------------->|                |\n|            |HANDOVER request      |MAP PREPARE     |\n|            |                      |--------------->|\n|            |                      |HANDOVER request|\n|            |                      |                |+-------+\n|            |                      |                ||Possib.|\n|            |                      |                ||Alloc. |\n|            |                      |                ||of ho. |\n|            |                      |                ||number |\n|            |                      |                || VLR-B |\n|            |                      |                |+-------+\n|            |                      |                |    BSS-B'\n|            |                      |                |         |\n|            |                      |                |HANDOVER |\n|            |                      |                |-------->|\n|            |                      |                |REQUEST  |\n|            |                      |                |\nFigure 32: Signalling for Subsequent Inter-MSC Handover to third MSC (MSC-B') initiation\nPossible Positive outcomes:\na)\tsuccessful radio resources allocation:\nRNS-A    3G-MSC-B                 MSC-A            MSC-B'\n|            |                      |                |\n|            |                      |                |    BSS-B'\n|            |                      |                |         |\n|            |                      |                |HANDOVER |\n|            |                      |                |<--------|\n|            |                      |                |REQUEST  |\n|            |                      |                ACKNOWLEDGE\n|            |                      |                |         |\n|            |                      |MAP PREPARE HANDOVER      |\n|            |                      |<---------------|         |\n|            |MAP PREPARE SUBSEQUENT|    response    |         |\n|            |<---------------------|                |         |\n|            |HANDOVER response     |                |         |\n| RELOCATION |                      |                |         |\n|<-----------|                      |                |         |\n| COMMAND    |                      |                |         |\n|            |                      |                |         |\nb)\tradio resources allocation queued and successful handover number allocation, if performed. Later successful radio resources allocation indication:\nRNS-A    3G-MSC-B                 MSC-A            MSC-B'\n|            |                      |                |\n|            |                      |                |    BSS-B'\n|            |                      |                |         |\n|            |                      |                | QUEUING |\n|            |                      |                |<--------|\n|            |                      |                |INDICAT. |\n|            |                      |                |         |\n|            |                      |MAP PREPARE HANDOVER      |\n|            |                      |<---------------|         |\n|            |MAP PREPARE SUBSEQUENT|   response     |         |\n|            |<---------------------|                |         |\n|            |HANDOVER response     |                |         |\n|            |                      |                |HANDOVER |\n|            |                      |                |<--------|\n|            |                      |                |REQUEST  |\n|            |                      |                ACKNOWLEDGE\n|            |                      |                |         |\n|            |                      |MAP PROCESS ACCESS        |\n|            |                      |<---------------|         |\n|            |MAP FORWARD ACCESS    |SIGNALLING request        |\n|            |<---------------------|                |         |\n|            |SIGNALLING request    |                |         |\n| RELOCATION |                      |                |         |\n|<-----------|                      |                |         |\n| COMMAND    |                      |                |         |\nFigure 33: Signalling for Subsequent Inter-MSC Handover to third MSC (MSC-B') execution(Positive outcome)\nPossible Negative outcomes:\nc)\tuser error detected, or component rejection or dialogue abortion performed by MSC-B':\nRNS-A      3G-MSC-B               MSC-A            MSC-B'\n|            |                      |                |\n|            |                      |                |    BSS-B'\n|            |                      |MAP PREPARE HANDOVER      |\n|            |                      |response negative result  |\n|            |                      |MAP CLOSE       |         |\n|            |                      |<---------------|         |\n|            |                      |MAP U/P -ABORT  |         |\n|            |MAP PREPARE SUBSEQUENT|                |         |\n|            |<---------------------|                |         |\n|            |HANDOVER response negative             |         |\n| RELOCATION |result                |                |         |\n|<-----------|                      |                |         |\n| PREPARATION|                      |                |         |\n| FAILURE    |                      |                |         |\n| (Note 1)   |                      |                |         |\nd)\tradio resources allocation failure:\nRNS-A      3G-MSC-B               MSC-A            MSC-B'\n|            |                      |                |\n|            |                      |                |    BSS-B'\n|            |                      |                |         |\n|            |                      |                |HANDOVER |\n|            |                      |                |<--------|\n|            |                      |                |FAILURE  |\n|            |                      |                |         |\n|            |                      |MAP PREPARE HANDOVER      |\n|            |                      |<---------------|         |\n|            |MAP PREPARE SUBSEQUENT| response       |         |\n|            |<---------------------|                |         |\n|            |HANDOVER response     |                |         |\n| RELOCATION |                      |                |         |\n|<-----------|                      |                |         |\n| PREPARATION|                      |                |         |\n| FAILURE    |                      |                |         |\n| (Note 1)   |                      |                |         |\ne)\tradio resources allocation queued and successful handover number allocation (if performed). Later unsuccessful radio resources allocation:\nRNS-A      3G-MSC-B               MSC-A            MSC-B'\n|            |                      |                |\n|            |                      |                |    BSS-B'\n|            |                      |                |         |\n|            |                      |                | QUEUING |\n|            |                      |                |<--------|\n|            |                      |                |INDICAT. |\n|            |                      |                |         |\n|            |                      |MAP PREPARE HANDOVER      |\n|            |                      |<---------------|         |\n|            |MAP PREPARE SUBSEQUENT| response       |         |\n|            |<---------------------|                |         |\n|            |HANDOVER response     |                |         |\n|            |                      |                |HANDOVER |\n|            |                      |                |<--------|\n|            |                      |                |FAILURE  |\n|            |                      |                |         |\n|            |                      |MAP PROCESS ACCESS        |\n|            |                      |<---------------|         |\n|            |                      |SIGNALLING request        |\n|            |MAP FORWARD ACCESS    |                |         |\n|            |<---------------------|                |         |\n|            |SIGNALLING request    |                |         |\n| RELOCATION |                      |                |         |\n|<-----------|                      |                |         |\n| PREPARATION|                      |                |         |\n| FAILURE    |                      |                |         |\n| (Note 1)   |                      |                |         |\nFigure 34: Signalling for Subsequent Inter-MSC Handover to third MSC (MSC-B') execution (Negative outcome)\nNOTE 1:\tPossible rejection of the handover because of the negative outcome of MAP or BSSMAP procedure.\nPositive outcome:\nRNS-A    3G-MSC-B                 MSC-A            MSC-B'\n|            |                      |                |\n|            |                      |                |    BSS-B'\n|            |                      |                |         |\n|            |                      |                |HANDOVER |\n|            |                      |                |<--------|\n|            |                      |                |COMPLETE |\n|            |                      |                |         |\n|            |                      |MAP SEND END SIGNAL       |\n|            |                      |<---------------|         |\n|            | MAP SEND END SIGNAL  |                |         |\n|            |<---------------------|                |         |\n|            | response             |                |         |\n| IU-RELEASE |                      |                |         |\n|<-----------|                      |                |         |\n| COMMAND    |                      |                |         |\nFigure 35: Signalling for Subsequent Inter-MSC Handover to third MSC (MSC-B') completion (Successful completion of the procedure)\nNegative outcome:\nRNS-A      3G-MSC-B               MSC-A            MSC-B'\n|            |                      |                |\n|RELOCATION  |                      |                |    BSS-B'\n|----------->|                      |                |         |\n|CANCEL      |MAP PROCESS ACCESS    |                |         |\n|            |--------------------->|                |         |\n|            |SIGNALLING request (Note 1)            |         |\n|            |                      |                |         |\n|            |                      |MAP U -ABORT    |         |\n|            |                      |--------------->|         |\n|            |                      |                |CLEAR    |\n|            |                      |                |-------->|\n|            |                      |                |COMMAND  |\n|RELOCATION  |                      |                |         |\n|<-----------|                      |                |         |\n|CANCEL ACK  |                      |                |         |\n|            |                      |                |         |\n|            |                      |                |         |\n|            |                      |                |         |\n|            |                      |                |         |\nFigure 36: Signalling for Subsequent Inter-MSC Handover to third MSC (MSC-B') completion (Unsuccessful completion of the procedure)\nNOTE 1:\tSpecific interworking case detailed below.\nThe specific interworking case in MSC-A compared to the clauses 4.5.1 and 4.5.2 occurs between HANDOVER FAILURE encapsulated in a Process Access Signalling from 3G-MSC-B and the abortion of the dialogue with MSC-B' in the case of a reversion to old channel of the MS:\n----------------------------------------------------------------\n|   29.002                          29.002        |Notes\n--------┼-------------------------------------------------┼-----\nForward | MAP PROCESS-SIGNALLING                          |\nmessage |         request                                 |\n|                                                 |\n|         -AN-APDU(               MAP U -ABORT    |  1\n|         HANDOVER FAILURE)                       |\n|                                                 |\n--------┼-------------------------------------------------┼-----\nPositive|                                                 |\nresult  |                                                 |\n--------┼-------------------------------------------------┼-----\nNegative|                                                 |\nresult  |                                  MAP U/P -ABORT |  2\n|                                                 |\nNOTE 1:\tThe abortion of the dialogue triggers in MSC-B' the clearing of the circuit connection with MSC-A, if any, and of the Resources between MSC-B' and BSS-B'.The abortion of the dialogue ends the handover procedure with MSC-B'.\nNOTE 2:\tThe abortion of the dialogue ends the handover procedure with 3G-MSC-B.",
      "chunk_type": "general",
      "cross_references": [
        "figure_32",
        "figure_33",
        "figure_34",
        "figure_35",
        "figure_36",
        "ts_23.009"
      ]
    },
    {
      "chunk_id": "ts_29.010_4.6.4",
      "section_id": "4.6.4",
      "section_title": "BSSAP Messages transfer on E-Interface",
      "content": "The handling is described in clause 4.5.4.",
      "chunk_type": "general",
      "cross_references": [
        "clause_4.5.4"
      ]
    },
    {
      "chunk_id": "ts_29.010_4.6.5",
      "section_id": "4.6.5",
      "section_title": "Processing in MSC-B, and information transfer on E-interface",
      "content": "The handling is described in clause 4.5.5.",
      "chunk_type": "procedure",
      "cross_references": [
        "clause_4.5.5"
      ]
    },
    {
      "chunk_id": "ts_29.010_4.6.6",
      "section_id": "4.6.6",
      "section_title": "Cause Code Mapping",
      "content": "When a Mobile Station is handed over between UMTS and GSM, a mapping of the cause codes used in the RANAP and the BSSMAP protocols is needed. The mapping described here is applicable to the BSSMAP protocol even when used inside MAP in the E-interface.\nThe mapping between the cause codes received in RANAP Relocation Required and the cause codes sent in BSSMAP Handover Request is as follows:\n----------------------------------------------------------------\n25.413                         48.008             |Notes\n-------------------------------------------------------┼--------\nRELOCATION REQUIRED            HANDOVER REQUEST        |\n|\n-Time critical relocation      -'uplink quality'      |\n-Resource optimisation         -Traffic               |\nrelocation                                           |\n-Relocation desirable for      -Better cell           |\nradio reasons                                        |\n-Directed retry                -Directed retry        |\n-Reduce Load in                -Reduce Load in        |\nserving cell                   serving cell          |\n-Any other value               -Better cell           |\nThe mapping between the cause codes received in RANAP Relocation Cancel and the cause codes sent in BSSMAP Clear Command is as follows:\n----------------------------------------------------------------\n25.413                         48.008             |Notes\n-------------------------------------------------------┼--------\nRELOCATION CANCEL              CLEAR COMMAND           |\n|\n-Trelocprepexpiry              -Radio interface       |\nfailure, reversion to |\nold channel           |\n-Interaction with other        -Radio interface       |\nprocedure                      failure, reversion to |\nold channel           |\n-Any other value               -Radio interface       |\nfailure, reversion to |\nold channel           |\nThe mapping between the cause codes received in BSSMAP Handover Failure and the cause codes sent in RANAP Relocation Preparation Failure is as follows:\n----------------------------------------------------------------\n48.008                         25.413             |Notes\n-------------------------------------------------------┼--------\nHANDOVER FAILURE               RELOCATION PREP. FAILURE|\n|\n-Ciphering algorithm not       -Requested ciphering   |\nsupported                      and/or integrity      |\nprotection is not     |\nsupported             |\n-Circuit pool mismatch                                |\t1\n-Equipment failure             -Relocation failure in |\nTarget CN/RNC or      |\ntarget system         |\n-Invalid message contents      -Abstract Syntax Error |\n-No radio resource available   -No Radio Resources    |\nAvailable in Target   |\nCell                  |\n-O and M intervention          -O and M intervention  |\n-Radio interface failure,                             |\t2\nreversion to old channel                             |\n-Radio interface message       -Relocation failure in |\nfailure                        Target CN/RNC or      |\ntarget system         |\n-Requested speech version      -Relocation failure in |\nunavailable                    Target CN/RNC or      |\ntarget system         |\n-Requested terrestrial         -Relocation failure in |\nresource unavailable           Target CN/RNC or      |\ntarget system         |\n-Requested transcoding/rate    -Relocation failure in |\nadaption unavailable           Target CN/RNC or      |\ntarget system         |\n-Switch circuit pool                                  |\t1\n-Terrestrial circuit already   -Relocation failure in |\nallocated                      Target CN/RNC or      |\ntarget system         |\n-Traffic load in the target    -Traffic load in the   |\ncell higher than in the       -target cell higher    |\nsource cell                    than in the source    |\ncell                  |\n-Any other value               -Relocation failure in |\nTarget CN/RNC or      |\ntarget system         |\nNOTE 1: Cause code not used at inter-system handover.\nNOTE 2: Cause code not applicable to this traffic case.\nThe mapping between the cause codes received in BSSMAP Clear Request and the cause codes sent in RANAP Iu Release Request is as follows:\n----------------------------------------------------------------\n48.008                         25.413             |Notes\n-------------------------------------------------------┼--------\nCLEAR REQUEST                  IU RELEASE REQUEST      |\n|\n-Radio interface message       -Relocation failure in |\nfailure                        Target CN/RNC or      |\ntarget system         |\n-O and M intervention          -O and M intervention  |\n-Equipment failure             -Relocation failure in |\nTarget CN/RNC or      |\ntarget system         |\n-Joined group call channel     -Unspecified failure   |\n-Protocol failure between BSS  -Message not compatible|\nand MSC                        with receiver state   |\n-Preemption                    -RAB pre-empted        |\n-Access restricted due         -Access restricted due |\nto shared networks             to shared networks    |\n-Any other value               -Relocation failure in |\nTarget CN/RNC or      |\ntarget system         |",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.010_4.7",
      "section_id": "4.7",
      "section_title": "Inter-MSC Handover (GSM to UMTS)",
      "content": "The general principles of the handover procedures are given in 3GPP TS 23.009 [2]. 3GPP TS 29.010 gives the necessary information for interworking between the 3GPP TS 25.413 [7] RANAP protocol, GSM handover procedures and the 3GPP TS 29.002 [9] MAP protocol. The RANAP protocol is used between the RNS and the 3G_MSC.\nThe following four principles apply for the Inter-MSC handover GSM to UMTS:\nThe BSSMAP parameters required for Inter-MSC handover GSM to UMTS are generated as in GSM.\nReceived RANAP parameters, e.g. cause code or transparent container, are mapped to the appropriate BSSMAP parameters, e.g. cause code or Handover command.\nThe RANAP parameters required for Inter-MSC handover GSM to UMTS are generated from received or stored GSM parameters.\nWhen new parameters need to be added for transfer on the E-interface, the principles stated in the beginning of clause 4.5 shall be followed.",
      "chunk_type": "general",
      "cross_references": [
        "clause_4.5",
        "ts_23.009",
        "ts_29.010",
        "ts_25.413",
        "ts_29.002"
      ]
    },
    {
      "chunk_id": "ts_29.010_4.7.1",
      "section_id": "4.7.1",
      "section_title": "Basic Inter-MSC Handover",
      "content": "When a Mobile Station is handed over between two MSCs, the establishment of a connection between them (described in 3GPP TS 23.009 [2]) requires interworking between A-Interface, Iu-Interface and E-Interface.\nThe signalling at initiation, execution and completion of the Basic Inter-MSC handover procedure is shown in figures 37 to 42 with both possible positive or negative outcomes.\nAdditionally figure 37b shows the possible interworking when the trace related message is transparently transferred on the E-Interface at Basic Inter-MSC Handover initiation.\nBSS-A         MSC-A                   3G-MSC-B\n|               |                         |\n|HANDOVER       |                         |\n|-------------->|MAP PREPARE HANDOVER     |\n|REQUIRED       |------------------------>| +----------------+\n|               |request                  | |Possible Alloc. |\n|               |                         | |of a handover   |\n|               |                         | |no. in the VLR-B|\n|               |                         | +----------------+\n|               |                         |\n|               |                         |                RNS-B\n|               |                         |                   |\n|               |                         |RELOCATION REQUEST |\n|               |                         |------------------>|\nFigure 37a: Signalling for Basic Inter-MSC Handover initiation (no trace related messages transferred)\nBSS-A         MSC-A                   3G-MSC-B\n|             (*)                         |\n|HANDOVER       |                         |\n|-------------->|MAP PREPARE HANDOVER     |\n|REQUIRED       |------------------------>| +----------------+\n|               |request  (**)            | |Possible Alloc. |\n|               |                         | |of a handover   |\n|               |                         | |no. in the VLR-B|\n|               |                         | +----------------+\n|               |                         |\n|               |                         |                RNS-B\n|               |                         |                   |\n|               |                         |RELOCATION REQUEST |\n|               |                         |------------------>|\n|               |                         |                   |\n|               |                         |CN INVOKE TRACE    |\n|               |                         |--------------->(***)\nFigure 37b: Signalling for Basic Inter-MSC Handover initiation (CN invoke trace message transferred)\n(*):\tTracing invocation has been received from VLR.\n(**):\tIn that case, HANDOVER REQUEST and MSC INVOKE TRACE messages are included within the AN-apdu parameter.\n(***):\tCN INVOKE TRACE is forwarded to RNS-B if supported by 3G_MSC-B.\nPossible Positive outcomes: successful radio resources allocation and handover number allocation (if performed):\nBSS-A         MSC-A                   3G-MSC-B              RNS-B\n|               |                         |                   |\n|               |                         |RELOCATION REQUEST |\n|               |                         |<------------------|\n|               |                         |ACKNOWLEDGE        |\n|               |                         |LOCATION REPORTING |\n|               |                         |------------------>|\n|               |                         |CONTROL            |\n|               | MAP PREPARE HANDOVER    |                   |\n|               |<------------------------|                   |\n|               | response                |                   |\n|               |                         |                   |\n|HANDOVER COMMAND                         |                   |\n|<--------------|                         |                   |\nFigure 38: Signalling for Basic Inter-MSC Handover execution (Positive outcome)\nPossible Negative outcomes:\na)\tuser error detected, or handover number allocation unsuccessful (if performed), or component rejection or dialogue abortion performed by 3G_MSC-B:\nBSS-A         MSC-A                   3G-MSC-B              RNS-B\n|               |                         |                   |\n|               |MAP PREPARE HANDOVER response                |\n|               |negative result, MAP CLOSE                   |\n|               |<------------------------|                   |\n|               |MAP U/P-ABORT            |                   |\n|               |                         |                   |\n|HANDOVER REQUIRED                        |                   |\n|<--------------|                         |                   |\n|REJECT (Note 1)|                         |                   |\n|               |                         |                   |\nb)\tradio resources allocation failure:\nBSS-A         MSC-A                   3G-MSC-B              RNS-B\n|               |                         |                   |\n|               |                         |RELOCATION FAILURE |\n|               |                         |<------------------|\n|               |MAP PREPARE HANDOVER     |                   |\n|               |<------------------------|                   |\n|               | response                |                   |\n|               |                         |                   |\n|HANDOVER REQUIRED                        |                   |\n|<--------------|                         |                   |\n|REJECT (Note 1)|                         |                   |\n|               |                         |                   |\nc)\tunsuccessful handover execution (Reversion to the old radio resources):\nBSS-A         MSC-A                   3G-MSC-B              RNS-B\n|               |                         |                   |\n|HANDOVER       |                         |                   |\n|-------------->|                         |                   |\n|FAILURE        |                         |                   |\n|               |MAP U -ABORT             |                   |\n|               |------------------------>|                   |\n|               |                         |IU RELEASE COMMAND |\n|               |                         |------------------>|\nFigure 39: Signalling for Basic Inter-MSC Handover execution (Negative outcomes)\nNOTE 1:\tPossible rejection of the handover because of the negative outcome of MAP or RANAP procedure.\nBSS-A         MSC-A                   3G-MSC-B              RNS-B\n|               |                         |                   |\n|               |                         |RELOCATION COMPLETE|\n|               |                         |<------------------|\n|               |MAP SEND END SIGNAL request                  |\n|               |<------------------------|                   |\n|CLEAR COMMAND  |                         |                   |\n|<--------------|                         |                   |\n|               |                         |                   |\nFigure 40: Signalling for Basic Inter-MSC Handover completion\nPositive outcome:\nBSS-A         MSC-A                   3G-MSC-B              RNS-B\n|               |                         |                   |\n|               |MAP SEND END SIGNAL      |                   |\n|               |------------------------>|                   |\n|               | response                |IU RELEASE COMMAND |\n|               |                         |------------------>|\n|               |                         | (Note 2)          |\nFigure 41: Signalling for Basic Inter-MSC Handover completion (Positive outcome)\nNegative outcome:\nBSS-A         MSC-A                   3G-MSC-B              RNS-B\n|               |                         |                   |\n|               | MAP U/P -ABORT          |                   |\n|               |------------------------>|                   |\n|               |                         |IU RELEASE COMMAND |\n|               |                         |------------------>|\n|               |                         |                   |\nFigure 42: Signalling for Basic Inter-MSC Handover completion (Negative outcome)\nNOTE 2:\tFrom interworking between MAP and RANAP point of view, when the call is released.\nBSS-A         MSC-A                   3G-MSC-B              RNS-B\n|               |                         |                   |\n|               |                         |LOCATION REPORT    |\n|               |                         |<------------------|\n|               |MAP PROCESS ACCESS       |                   |\n|               |<------------------------|                   |\n|               |SIGNALLING               |                   |\nFigure 42a: Signalling for updating of anchor MSC after change of location in RNS\nThe handover procedure is normally triggered by BSS-A by sending a HANDOVER REQUIRED message on A‑Interface to MSC-A. The invocation of the Basic Inter-MSC handover procedure is performed and controlled by MSC-A. The sending of the MAP Prepare-Handover request to 3G_MSC-B is triggered in MSC-A upon receipt of the HANDOVER REQUIRED message. The identity of the target RNC where the call is to be handed over in 3G_MSC-B area, provided in the HANDOVER REQUIRED message in the information element Cell Identifier List (Preferred), is mapped to the target RNC Id MAP parameter and the HANDOVER REQUEST message is encapsulated in the an-APDU MAP parameter of the Prepare‑Handover MAP request. 3G_MSC-B can invoke another operation towards the VLR-B (allocation of the handover number described in 3GPP TS 29.002 [9]).\nAdditionally, if tracing activity has been invoked, the trace related message can be transferred on the E-Interface encapsulated in the an-APDU MAP parameter of the Prepare-Handover Request. If transferred, one complete trace related message at a time shall be included in the an-APDU MAP parameter after the HANDOVER REQUEST message. Note: UMTS supports only CN initiated tracing.\nThe interworking between Prepare Handover and HANDOVER REQUIRED is as follows:\n----------------------------------------------------------------\n|   48.008                          29.002         |Notes\n--------┼-------------------------------------------------┼-----\nForward | HANDOVER REQUIRED   MAP PREPARE HANDOVER request|\nmessage |                                                 |\n|                            -ho-NumberNotRequired|\t1\n|  BSSMAP information        -target RNC Id       |\n|         elements           -IMSI                |\n|                            -Integrity protection|\t2\n|                                info             |\n|                            -Encryption info     |\n|                            -an-APDU(            |\t3\n|                            HANDOVER REQUEST,    |\n|                            MSC INVOKE TRACE)    |\t4\n|  GERAN classmark           -GERAN classmark     |\t7\n--------┼-------------------------------------------------┼-----\nPositive|                    MAP PREPARE HANDOVER response|\nresult  |                                                 |\t5\n|                             -handover number    |\n|                             -an-APDU(           |\n|                              HANDOVER REQUEST   |\n|                              ACKNOWLEDGE or     |\n|                              HANDOVER FAILURE)  |\n--------┼-------------------------------------------------┼-----\nNegative| HANDOVER REQUIRED REJECT    MAP PREPARE HANDOVER| 6\nresult  |                                                 |\n| equipment failure            System Failure     |\n| equipment failure            No Handover Number |\n|                                 available       |\n| equipment failure            UnexpectedDataValue|\n| equipment failure            Data Missing       |\n|                                                 |\n| equipment failure            MAP CLOSE          |\n| equipment failure            MAP U/P -ABORT     |\n|                                                 |\nNOTE 1:\tThe ho-NumberNotRequired parameter is included by MSC-A, when MSC-A decides not to use any circuit connection with 3G_MSC-B. No handover number shall be present in the positive result. Any negative response from 3G_MSC-B shall not be due to handover number allocation problem.\nNOTE 2:\tIntegrity protection information, encryption information and IMSI parameters are included by MSC-A, only when the MSC-A uses 29.002 as per release 99. These IEs are not included if the MSC-A is R98 or earlier.\nNOTE 3:\tNOTE 3:\tThe process performed on the BSSMAP information elements received in the HANDOVER REQUIRED message is described in the 3GPP TS 48.008 [12].\nNOTE 4:\tThe process performed on the BSSMAP information elements received in the MSC INVOKE TRACE message is described in clause 4.5.5.6.\nNOTE 5:\tThe response to the Prepare-Handover request can include in its an-APDU parameter, identifying the 3GPP TS 48.006 protocol, either a BSSMAP HANDOVER REQUEST ACKNOWLEDGE or a BSSMAP HANDOVER FAILURE.\nIn the first case, the positive result triggers in MSC-A the sending on A-Interface of the HANDOVER COMMAND.\nIn the second case, the positive result triggers in MSC-A optionally the sending of the HANDOVER REQUIRED REJECT.\n(The possible sending of the HANDOVER REQUIRED REJECT message upon receipt of the HANDOVER FAILURE is out of the scope of 3GPP TS 29.010 and lies in 3GPP TS 48.008 [12]).\nNOTE 6:\tThe possible sending of the HANDOVER REQUIRED REJECT message is described in 3GPP TS 48.008 [12].\nNOTE 7:\tIf the GERAN Classmark was not received with the HANDOVER REQUIRED message initiating the handover, MSC-A shall include any previously received GERAN Classmark. See 3GPP TS 43.051 [17].\nThe interworking between Prepare Handover and RELOCATION REQUEST in 3G_MSC-B is as follows:\n----------------------------------------------------------------\n|   29.002                         25.413         |Notes\n--------┼-------------------------------------------------┼-----\nForward | MAP PREPARE HANDOVER    RELOCATION REQUEST      |\nmessage | request                                         |\n| -ho-NumberNotRequired                           |\n| -target RNC Id                                  |\n| -IMSI                                           |\n| -Integrity protection info                      |\t1\n| -Encryption info                                |\n| -RANAP service handover                         |\n| -UESBI                                          |\n| -an-APDU(                                       |\n| HANDOVER REQUEST,                               |\n| MSC INVOKE TRACE)                               |\n|                                                 |\n| BSSMAP information      RANAP information       |\n|      elements:              elements:           |\n|                                                 |\n|   Channel Type            RAB parameters        |\n|   Cause                   Cause                 |\n|   sRNC to tRNC container  sRNC to tRNC container|\n|   SNA Access Information  SNA Access Information|\t3\n|                                                 |\n|                         info stored/generated   |\n|                         in/by 3G_MSC-B:         |\n|                           CN domain indicator   |\n|                                                 |\n--------┼-------------------------------------------------┼-----\nPositive| MAP PREPARE HANDOVER    RELOCATION REQUEST ACK  |\nresult  | response                                        |\n| -an-APDU(                                       |\n|  HANDOVER REQUEST ACK)                          |\n|                                                 |\n| BSSMAP information      RANAP information       |\n|      elements:              elements:           |\n|                                                 |\n|   Layer 3 info            tRNC to sRNC container|\n|                                                 |\n--------┼-------------------------------------------------┼-----\nNegative| MAP PREPARE HANDOVER    RELOCATION FAILURE      |\nresult  | response                                        |\n| -an-APDU(                                       |\n|  HANDOVER FAILURE)                              |\n| BSSMAP information      RANAP information       |\n|      elements:              elements:           |\n|                                                 |\n|   GERAN classmark         GERAN classmark       |\t2\n|                                                 |\nNOTE 1:\tIntegrity protection information, encryption information, IMSI and RANAP service handover parameters are included by MSC-A only when the MSC-A uses 29.002 as per release 99. These IEs are not included if the MSC-A is R98 or earlier.\nNOTE 2:\tIf a handover to GERAN Iu-mode failed, the target RNS may include a GERAN classmark in the RELOCATION FAILURE message. See 3GPP TS 43.051 [17].\nNOTE 3:\tSNA Access Information parameter is included by MSC-A only when the MSC-A uses 29.002 as per release 5. This IE is not included if the MSC-A is release 4 or earlier.\nThe interworking between Send End Signal and RELOCATION COMPLETE in 3G_MSC-B is as follows:\n----------------------------------------------------------------\n|   25.413                         29.002         |Notes\n--------┼-------------------------------------------------┼-----\nForward | RELOCATION COMPLETE MAP SEND END SIGNAL request |\nmessage |                                                 |\n|                               -an-APDU(         |\n|                               HANDOVER COMPLETE)|\n|                                                 |\n--------┼-------------------------------------------------┼-----\nPositive| IU RELEASE COMMAND  MAP SEND END SIGNAL response|\nresult  |  -Normal release                                |\t1\n--------┼-------------------------------------------------┼-----\nNegative| IU RELEASE COMMAND                              |\nresult  |  -Normal release                    MAP CLOSE   |\t2\n|  -Normal release                  MAP U/P -ABORT|\n|                                                 |\nNOTE 1:\tThe positive empty result triggers the clearing of the Radio Resources on the Iu-Interface and the release of the SCCP connection between 3G_MSC-B and RNS-B. If a circuit connection is used between MSC-A and 3G_MSC-B, the 'Normal release' clearing cause shall only be given to RNS-B when 3G_MSC-B has received a clearing indication on its circuit connection with MSC-A.\nNOTE 2:\tThe abortion of the dialogue or the rejection of the component triggers in 3G_MSC-B the clearing of its circuit connection with MSC-A, if any, of the Radio Resources on the Iu-Interface and the release of the SCCP connection between 3G_MSC-B and RNS-B.\nThe interworking between Send End Signal and CLEAR COMMAND in MSC-A is as follows:\n----------------------------------------------------------------\n|   29.002                        48.008          |Notes\n--------┼-------------------------------------------------┼-----\nForward | MAP SEND END SIGNAL          CLEAR COMMAND      |\nmessage | request                                         |\n|          -an-APDU(              - Handover      |\n|          HANDOVER COMPLETE)        Successful   |\n--------┼-------------------------------------------------┼-----\nPositive|                                                 |\nresult  |                                                 |\n--------┼-------------------------------------------------┼-----\nNegative|                                                 |\nresult  |                                                 |\nThe interworking between HANDOVER FAILURE in case of reversion to old channel of the MS and User Abort in MSC-A is as follows:\n----------------------------------------------------------------\n|   48.008                          29.002        |Notes\n--------┼-------------------------------------------------┼-----\nForward | HANDOVER FAILURE                MAP U -ABORT    |\nmessage |                                                 |\n|  - Reversion to old                             |\n|    channel                                      |\n--------┼-------------------------------------------------┼-----\nPositive|                                                 |\nresult  |                                                 |\n--------┼-------------------------------------------------┼-----\nNegative|                                                 |\nresult  |                                                 |",
      "chunk_type": "general",
      "cross_references": [
        "clause_4.5.5.6",
        "figure_37",
        "figure_38",
        "figure_39",
        "figure_40",
        "figure_41",
        "figure_42",
        "ts_23.009",
        "ts_29.002",
        "ts_48.008",
        "ts_48.006",
        "ts_29.010",
        "ts_43.051"
      ]
    },
    {
      "chunk_id": "ts_29.010_4.7.2",
      "section_id": "4.7.2",
      "section_title": "Subsequent Inter-MSC Handover from MSC-B back to 3G_MSC-A",
      "content": "When a Mobile Station is being handed over back to 3G_MSC-A, the procedure (described in 3GPP TS 23.009 [2]) requires interworking between A-Interface, Iu-Interface and E-Interface.\nThe signalling at initiation, execution and completion of the Subsequent Inter-MSC handover procedure is shown in figures 43 to 47.\nBSS-A         MSC-B                     3G-MSC-A\n|               |                         |\n|HANDOVER       |                         |\n|-------------->|MAP PREPARE SUBSEQUENT   |\n|REQUIRED       |------------------------>|\n|               |HANDOVER request         |\n|               |                         |                RNS-B\n|               |                         |                   |\n|               |                         |RELOCATION REQUEST |\n|               |                         |------------------>|\nFigure 43: Signalling for Subsequent Inter-MSC Handover back to 3G_MSC-A initiation\nPossible Positive outcomes: successful radio resources allocation:\nBSS-A         MSC-B                     3G-MSC-A           RNS-B\n|               |                         |                   |\n|               |                         |RELOCATION REQUEST |\n|               |                         |<------------------|\n|               |                         |ACKNOWLEDGE        |\n|               | MAP PREPARE SUBSEQUENT  |                   |\n|               |<------------------------|                   |\n|               | HANDOVER response       |                   |\n|HANDOVER COMMAND                         |                   |\n|<--------------|                         |                   |\nFigure 44: Signalling for Subsequent Inter-MSC Handover back to 3G_MSC-A execution (Positive outcome)\nPossible Negative outcomes:\na)\tuser error detected, or component rejection or dialogue abortion performed by 3G_MSC-A:\nBSS-A         MSC-B                     3G-MSC-A           RNS-B\n|               |MAP PREPARE SUBSEQUENT HANDOVER              |\n|               |<------------------------|                   |\n|HANDOVER REQUIRED  response negative result                  |\n|<--------------|                         |                   |\n|REJECT (Note 1)|                         |                   |\n|               |                         |                   |\nb)\tcomponent rejection or dialogue abortion performed by 3G_MSC-A:\nBSS-A         MSC-B                     3G-MSC-A           RNS-B\n|               |MAP CLOSE, MAP U/P ABORT |                   |\n|               |<------------------------|                   |\n|CLEAR COMMAND  |                         |                   |\n|<--------------|                         |                   |\n|               |                         |                   |\nc)\tradio resources allocation failure:\nBSS-A         MSC-B                     3G-MSC-A           RNS-B\n|               |                         | RELOCATION FAILURE|\n|               |                         |<------------------|\n|               |MAP PREPARE SUBSEQUENT   |                   |\n|               |<------------------------|                   |\n|HANDOVER REQUIRED   HANDOVER response    |                   |\n|<--------------|                         |                   |\n|REJECT (Note 1)|                         |                   |\nd)\tunsuccessful relocation execution (reversion to the old radio resources):\nBSS-A          MSC-B                  3G-MSC-A             RNS-B\n|HANDOVER       |                         |                   |\n|-------------->|                         |                   |\n|FAILURE        |MAP PROCESS ACCESS       |                   |\n|               |------------------------>|                   |\n|               |   SIGNALLING request    |IU RELEASE COMMAND |\n|               |                         |------------------>|\n|               |                         |                   |\nFigure 45: Signalling for Subsequent Inter-MSC Handover back to 3G_MSC-A execution(Negative outcome)\nNOTE 1:\tPossible rejection of the handover because of the negative outcome of MAP or BSSMAP procedure.\nRNS-B         3G-MSC-A                  MSC-B              BSS-A\n|               |                         |                   |\n|RELOCATION     |                         |                   |\n|-------------->|MAP SEND END SIGNAL      |                   |\n|COMPLETE       |------------------------>|                   |\n|               | response                |                   |\n|               |                         |CLEAR COMMAND      |\n|               |                         |------------------>|\nFigure 46: Signalling for Subsequent Inter-MSC Handover back to 3G_MSC-A completion(Successful completion of the procedure)\nNOTE:\tPositive outcome case shown in figure 41.\nRNS-B         3G-MSC-A                  MSC-B              BSS-A\n|               |                         |                   |\n|               |MAP U/P -ABORT           |                   |\n|               |<------------------------|                   |\n|               |                         |CLEAR COMMAND      |\n|               |                         |------------------>|\n|               |                         |(Note 1)           |\nFigure 47: Signalling for Subsequent Inter-MSC Handover back to 3G_MSC-A completion (Unsuccessful completion of the procedure)\nNOTE 1:\tAbnormal end of the procedure that triggers the clearing of all resources in MSC-B.\nThe interworking between Prepare Subsequent Handover and HANDOVER REQUIRED is as follows:\n----------------------------------------------------------------\n|   48.008                          29.002        |Notes\n--------┼-------------------------------------------------┼-----\nForward |HANDOVER REQUIRED MAP PREPARE SUBSEQUENT HANDOVER|\nmessage |                              request            |  1\n|                                                 |\n|                              -target MSC number |\n| BSSMAP information           -target RNC Id     |\n|        elements              -an-APDU(          |\n|                               HANDOVER REQUEST) |\n| GERAN classmark              -GERAN classmark   |\t4\n--------┼-------------------------------------------------┼-----\nPositive|HANDOVER REQUIRED MAP PREPARE SUBSEQUENT HANDOVER|\nresult  |                             response            |  2\n|                             -an-APDU(           |\n|                              HANDOVER REQUEST   |\n|                              ACKNOWLEDGE or     |\n|                              HANDOVER FAILURE)  |\n--------┼-------------------------------------------------┼-----\nNegative| HANDOVER REQUIRED REJECT  MAP PREPARE SUBSEQUENT|  3\nresult  |                           HANDOVER response     |\n| equipment failure            Unknown MSC        |\n| equipment failure            Subsequent Handover|\n|                                         Failure |\n| equipment failure            UnexpectedDataValue|\n| equipment failure            Data Missing       |\n|                                                 |\n| CLEAR COMMAND                                   |\n|                                                 |\n| equipment failure            MAP CLOSE          |\n| equipment failure            MAP U/P -ABORT     |\n|                                                 |\nNOTE 1:\tThe processing performed on the BSSMAP information elements received in the HANDOVER REQUIRED message is out of the scope of the present document. The target MSC number is provided to 3G_MSC-A by MSC-B based on the information received from RNS-B.\nNOTE 2:\tThe response to the Prepare-Subsequent-Handover request can include in its an-APDU parameter, identifying the 3GPP TS 48.006 protocol, either a BSSMAP HANDOVER REQUEST ACKNOWLEDGE or a BSSMAP HANDOVER FAILURE.\nIn the first case, the positive result triggers in MSC-B the sending on A‑Interface of the HANDOVER COMMAND.\nIn the second case, the positive result triggers in MSC-B optionally the sending of the HANDOVER REQUIRED REJECT.\n(The possible sending of the HANDOVER REQUIRED REJECT message upon receipt of the HANDOVER FAILURE is out of the scope of 3GPP TS 29.010 and lies in 3GPP TS 48.008 [12]).\nNOTE 3:\tThe possible sending of the HANDOVER REQUIRED REJECT message is described in 3GPP TS 48.008 [12].\nNOTE 4:\tIf the GERAN Classmark was not received with the HANDOVER REQUIRED message initiating the handover, MSC-B shall include any previously received GERAN Classmark. See 3GPP TS 43.051 [17].\nThe interworking between Prepare Subsequent Handover and RELOCATION REQUEST in 3G_MSC-A is as follows:\n----------------------------------------------------------------\n|   29.002                         25.413         |Notes\n--------┼-------------------------------------------------┼-----\nForward | MAP PREPARE SUB HANDOVER   RELOCATION REQUEST   |\nmessage | request                                         |\n| -ho-NumberNotRequired                           |\n| -target RNC ID                                  |\n| -an-APDU(                                       |\n| HANDOVER REQUEST,                               |\n| MSC INVOKE TRACE)                               |\n|                                                 |\n| BSSMAP information      RANAP information       |\n|      elements:              elements:           |\n|                                                 |\n|   Cause                   Cause                 |\n|   sRNC to tRNC container  sRNC to tRNC container|\n|                                                 |\n|                         info stored/generated   |\n|                         in/by 3G_MSC-A:         |\n|                           CN domain indicator   |\n|                           RAB parameters        |\n|                           Permanent NAS UE id   |\n|                           Encryption info       |\n|                           Integrity protection  |\n|                                 info            |\n|                                                 |\n--------┼-------------------------------------------------┼-----\nPositive| MAP PREPARE SUB HANDOVER  RELOCATION REQUEST ACK|\nresult  | response                                        |\n| -an-APDU(                                       |\n|  HANDOVER REQUEST ACK)                          |\n|                                                 |\n| BSSMAP information      RANAP information       |\n|      elements:              elements:           |\n|                                                 |\n|   Layer 3 info            tRNC to sRNC container|\n|                                                 |\n--------┼-------------------------------------------------┼-----\nNegative| MAP SUB PREPARE HANDOVER  RELOCATION FAILURE    |\nresult  | response                                        |\n| -an-APDU(                                       |\n|  HANDOVER FAILURE)                              |\n|                                                 |\n|                                                 |\n| BSSMAP information      RANAP information       |\n|      elements:              elements:           |\n|                                                 |\n|   GERAN classmark         GERAN classmark       |\t1\n|                                                 |\nNOTE 1:\tIf a handover to GERAN Iu-mode failed, the target RNS may include a GERAN classmark in the RELOCATION FAILURE message. See 3GPP TS 43.051 [17].\nThe interworking between HANDOVER FAILURE and MAP Process Signalling  Request in 3G_MSC-B is as follows:\n----------------------------------------------------------------\n|   48.008                         29.002         |Notes\n--------┼-------------------------------------------------┼-----\nForward | HANDOVER FAILURE         MAP PROCESS-SIGNALLING |\nmessage |                                   request       |\n|                          -an-APDU(              |\n|                           HANDOVER FAILURE)     |\n|                                                 |\n--------┼-------------------------------------------------┼-----\nPositive|                                                 |\nresult  |                                                 |\n--------┼-------------------------------------------------┼-----\nNegative|                                                 |\nresult  |                                                 |\n|                                                 |\nThe interworking between Send End Signal Response and RELOCATION COMPLETE in 3G_MSC-A is as follows:\n----------------------------------------------------------------\n|   25.413                         29.002         |Notes\n--------┼-------------------------------------------------┼-----\nForward | RELOCATION COMPLETE  MAP SEND END SIGNAL        |\nmessage |                               response          |\n|                                                 |\n--------┼-------------------------------------------------┼-----\nPositive|                                                 |\nresult  |                                                 |\n--------┼-------------------------------------------------┼-----\nNegative|                                                 |\nresult  |                          MAP U/P -ABORT         |\t1\n|                                                 |\nNOTE 1:\tThe abortion of the dialogue ends the handover procedure with MSC-B.",
      "chunk_type": "general",
      "cross_references": [
        "figure_43",
        "figure_44",
        "figure_45",
        "figure_46",
        "figure_41",
        "figure_47",
        "ts_23.009",
        "ts_48.006",
        "ts_29.010",
        "ts_48.008",
        "ts_43.051"
      ]
    },
    {
      "chunk_id": "ts_29.010_4.7.3",
      "section_id": "4.7.3",
      "section_title": "Subsequent Inter-MSC Handover to third MSC",
      "content": "When a Mobile Station is being handed over to a third MSC, the procedure (described in 3GPP TS 23.009 [2]) does require one specific interworking case in MSC-A (figure 49) between E-Interface from MSC-B and E-Interface from 3G_MSC‑B' other than the combination of the ones described in the clause 4.5.1 and 4.7.2.\nBSS-A      MSC-B                  MSC-A           3G-MSC-B'\n|            |                      |                |\n|HANDOVER    |                      |                |\n|----------->|MAP PREPARE SUBSEQUENT|                |\n|REQUIRED    |--------------------->|                |\n|            |HANDOVER request      |MAP PREPARE     |\n|            |                      |--------------->|\n|            |                      |HANDOVER request|\n|            |                      |                |+-------+\n|            |                      |                ||Possib.|\n|            |                      |                ||Alloc. |\n|            |                      |                ||of ho. |\n|            |                      |                ||number |\n|            |                      |                || VLR-B |\n|            |                      |                |+-------+\n|            |                      |                |    RNS-B'\n|            |                      |                |         |\n|            |                      |                |RELOCATION\n|            |                      |                |-------->|\n|            |                      |                |REQUEST  |\n|            |                      |                |\nFigure 45: Signalling for Subsequent Inter-MSC Handover to third MSC (3G_MSC-B') initiation\nPossible Positive outcomes: successful radio resources allocation:\nBSS-A      MSC-B                  MSC-A           3G-MSC-B'\n|            |                      |                |\n|            |                      |                |    RNS-B'\n|            |                      |                |         |\n|            |                      |                |RELOCATION\n|            |                      |                |<--------|\n|            |                      |                |REQUEST  |\n|            |                      |                ACKNOWLEDGE\n|            |                      |                |         |\n|            |                      |                |LOCATION |\n|            |                      |                |-------->|\n|            |                      |                |REPORTING|\n|            |                      |                |CONTROL  |\n|            |                      |                |         |\n|            |                      |MAP PREPARE HANDOVER      |\n|            |                      |<---------------|         |\n|            |MAP PREPARE SUBSEQUENT|    response    |         |\n|            |<---------------------|                |         |\n|            |HANDOVER response     |                |         |\n| HANDOVER   |                      |                |         |\n|<-----------|                      |                |         |\n| COMMAND    |                      |                |         |\n|            |                      |                |         |\nFigure 46: Signalling for Subsequent Inter-MSC Handover to third MSC (3G_MSC-B') execution(Positive outcome)\nPossible Negative outcomes:\na)\tuser error detected, or component rejection or dialogue abortion performed by MSC-B':\nBSS-A      MSC-B                  MSC-A           3G-MSC-B'\n|            |                      |                |\n|            |                      |                |    RNS-B'\n|            |                      |MAP PREPARE HANDOVER      |\n|            |                      |response negative result  |\n|            |                      |MAP CLOSE       |         |\n|            |                      |<---------------|         |\n|            |                      |MAP U/P -ABORT  |         |\n|            |MAP PREPARE SUBSEQUENT|                |         |\n|            |<---------------------|                |         |\n|            |HANDOVER response negative             |         |\n| HANDOVER   |result                |                |         |\n|<-----------|                      |                |         |\n| REQUIRED   |                      |                |         |\n| REJECT     |                      |                |         |\n| (Note 1)   |                      |                |         |\nb)\tradio resources allocation failure:\nBSS-A      MSC-B                  MSC-A           3G-MSC-B'\n|            |                      |                |\n|            |                      |                |    RNS-B'\n|            |                      |                |         |\n|            |                      |                |RELOCATION\n|            |                      |                |<--------|\n|            |                      |                |FAILURE  |\n|            |                      |                |         |\n|            |                      |MAP PREPARE HANDOVER      |\n|            |                      |<---------------|         |\n|            |MAP PREPARE SUBSEQUENT| response       |         |\n|            |<---------------------|                |         |\n|            |HANDOVER response     |                |         |\n| HANDOVER   |                      |                |         |\n|<-----------|                      |                |         |\n| REQUIRED   |                      |                |         |\n| REJECT     |                      |                |         |\n| (Note 1)   |                      |                |         |\nFigure 47: Signalling for Subsequent Inter-MSC Handover to third MSC (3G_MSC-B') execution (Negative outcome)\nNOTE 1:\tPossible rejection of the handover because of the negative outcome of MAP or BSSMAP procedure.\nPositive outcome:\nBSS-A      MSC-B                  MSC-A           3G-MSC-B'\n|            |                      |                |\n|            |                      |                |    RNS-B'\n|            |                      |                |         |\n|            |                      |                |RELOCATION\n|            |                      |                |<--------|\n|            |                      |                |COMPLETE |\n|            |                      |                |         |\n|            |                      |MAP SEND END SIGNAL       |\n|            |                      |<---------------|         |\n|            | MAP SEND END SIGNAL  |request         |         |\n|            |<---------------------|                |         |\n|            | response             |                |         |\n| CLEAR      |                      |                |         |\n|<-----------|                      |                |         |\n| COMMAND    |                      |                |         |\nFigure 48: Signalling for Subsequent Inter-MSC Handover to third MSC (3G_MSC-B') completion (Successful completion of the procedure)\nNegative outcome:\nBSS-A      MSC-B                  MSC-A           3G-MSC-B'\n|            |                      |                |\n|HANDOVER    |                      |                |    RNS-B'\n|----------->|                      |                |         |\n|FAILURE     |MAP PROCESS ACCESS    |                |         |\n|            |--------------------->|                |         |\n|            |SIGNALLING request (Note 1)            |         |\n|            |                      |                |         |\n|            |                      |MAP U -ABORT    |         |\n|            |                      |--------------->|         |\n|            |                      |                |IU RELEASE\n|            |                      |                |-------->|\n|            |                      |                |COMMAND  |\n|            |                      |                |         |\nFigure 49: Signalling for Subsequent Inter-MSC Handover to third MSC (3G_MSC-B') completion (Unsuccessful completion of the procedure)\nNOTE:\tSpecific interworking case detailed below.\nBSS-A         MSC-A                   3G-MSC-B'             RNS-B'\n|               |                         |                   |\n|               |                         |LOCATION REPORT    |\n|               |                         |<------------------|\n|               |MAP PROCESS ACCESS       |                   |\n|               |<------------------------|                   |\n|               |SIGNALLING               |                   |\nFigure 49a: Signalling for updating of anchor MSC after change of location in RNS\nThe specific interworking case in MSC-A compared to the clauses 4.5.1 and 4.7.2 occurs between HANDOVER FAILURE encapsulated in a Process Access Signalling from MSC-B and the abortion of the dialogue with 3G_MSC-B' in the case of a reversion to old channel of the MS:\n----------------------------------------------------------------\n|   29.002                         29.002         |Notes\n--------┼-------------------------------------------------┼-----\nForward | MAP PROCESS-SIGNALLING                          |\nmessage |         request                                 |\n|                                                 |\n|         -an-APDU(                MAP U -ABORT   |\t1\n|         HANDOVER FAILURE)                       |\n|                                                 |\n--------┼-------------------------------------------------┼-----\nPositive|                                                 |\nresult  |                                                 |\n--------┼-------------------------------------------------┼-----\nNegative|                                                 |\nresult  |                                  MAP U/P -ABORT |\t2\n|                                                 |\nNOTE 1:\tThe abortion of the dialogue triggers in 3G_MSC-B' the clearing of the circuit connection with MSC-A, if any, and of the Resources between 3G_MSC-B' and RNS-B'. The abortion of the dialogue ends the handover procedure with 3G_MSC-B'.\nNOTE 2:\tThe abortion of the dialogue ends the handover procedure with MSC-B.",
      "chunk_type": "general",
      "cross_references": [
        "clause_4.5.1",
        "figure_49",
        "figure_45",
        "figure_46",
        "figure_47",
        "figure_48",
        "ts_23.009"
      ]
    },
    {
      "chunk_id": "ts_29.010_4.7.4",
      "section_id": "4.7.4",
      "section_title": "BSSAP Messages transfer on E-Interface",
      "content": "The handling is described in clause 4.5.4, additional cases are described in this clause.",
      "chunk_type": "general",
      "cross_references": [
        "clause_4.5.4"
      ]
    },
    {
      "chunk_id": "ts_29.010_4.7.4.1",
      "section_id": "4.7.4.1",
      "section_title": "Assignment",
      "content": "The interworking between the BSSMAP assignment messages in MAP and the RANAP RAB assignment messages is as follows:\n----------------------------------------------------------------\n|    29.002                        25.413         |Notes\n--------┼-------------------------------------------------┼-----\nForward | MAP PREPARE HANDOVER          RAB ASSIGNMENT REQ|\nmessage |         request                                 |\n|         -RANAP service        Service handover  |\n|          handover                               |\n|         -an-APDU(                               |\n|         ASSIGNMENT REQUEST)                     |\n|                                                 |\n| BSSMAP information            RANAP information |\n|      elements:                    elements:     |\n|                                                 |\n| Channel Type                  RAB parameters    |\n|                                                 |\n--------┼-------------------------------------------------┼-----\nPositive| MAP PREPARE HANDOVER                            |\nresult  |         request                                 |\n|         -an-APDU(                               |\n|         ASSIGNMENT COMPLETE   RAB ASSIGNMENT    |\n|                                  RESPONSE       |\n|         or                     (positive result)|\n|         ASSIGNMENT FAILURE)   RAB ASSIGNMENT    |\n|                                  RESPONSE       |\n|                                (negative result)|\n|                                                 |\n| BSSMAP information            RANAP information |\n|      elements:                    elements:     |\n|                                                 |\n| Cause                         Cause             |\t1\n|                                                 |\n--------┼-------------------------------------------------┼-----\nNegative|                                                 |\nresult  |                               MAP U/P –ABORT    |\n|                                                 |\nNOTE 1: For the mapping between the cause codes see clause 4.7.6.",
      "chunk_type": "general",
      "cross_references": [
        "clause_4.7.6"
      ]
    },
    {
      "chunk_id": "ts_29.010_4.7.4.2",
      "section_id": "4.7.4.2",
      "section_title": "Cipher Mode Control",
      "content": "The interworking between the BSSMAP cipher mode messages in MAP and the RANAP security mode messages is as follows:\n----------------------------------------------------------------\n|    29.002                        25.413         |Notes\n--------┼-------------------------------------------------┼-----\nForward | MAP FORWARD ACCESS SIGN.      SECURITY MODE CMD |\nmessage |         request                                 |\n|         -an-APDU(                               |\n|         CIPHER MODE CMD)                        |\n|                                                 |\n| BSSMAP information            RANAP information |\n|      elements:                    elements:     |\n|                                                 |\n| Encryption information        Integrity         |\n|                                  protection info|\n|                               Encryption info   |\n|                                                 |\n--------┼-------------------------------------------------┼-----\nPositive| MAP PROCESS ACCESS SIGN.                        |\nresult  |         request                                 |\n|         -an-APDU(                               |\n|         CIPHER MODE COMPLETE  SECURITY MODE     |\n|         or                       COMPLETE       |\n|         CIPHER MODE REJECT)   SECURITY MODE     |\n|                                  REJECT         |\n|                                                 |\n| BSSMAP information            RANAP information |\n|      elements:                    elements:     |\n|                                                 |\n| Encryption information        Integrity         |\n|                                  protection info|\n|                               Encryption info   |\n| Cause                         Cause             |\t1\n|                                                 |\n--------┼-------------------------------------------------┼-----\nNegative|                                                 |\nresult  |                               MAP U/P –ABORT    |\n|                                                 |\nNOTE 1: For the mapping between the cause codes see clause 4.7.6.",
      "chunk_type": "general",
      "cross_references": [
        "clause_4.7.6"
      ]
    },
    {
      "chunk_id": "ts_29.010_4.7.4.3",
      "section_id": "4.7.4.3",
      "section_title": "Location Reporting Control",
      "content": "The interworking between the RANAP location report message and the BSSMAP handover performed message in MAP is as follows:\n----------------------------------------------------------------\n|   25.413                         29.002         |Notes\n--------┼-------------------------------------------------┼-----\nForward | LOCATION REPORT     MAP PROC. ACC. SIGNALLING   |\nmessage |                                                 |\n|                              -an-APDU(          |\n|                              HANDOVER PERFORMED)|\n|                                                 |\n| RANAP information            BSSMAP information |\n|      elements:                    elements:     |\n|                                                 |\n| Area identity (SAI)          Cell identifier    |\n| Cause                        Cause              |\n|                                                 |\n--------┼-------------------------------------------------┼-----\nPositive|                                                 |\nresult  |                                                 |\n--------┼-------------------------------------------------┼-----\nNegative|                                                 |\nresult  |                                                 |",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.010_4.7.5",
      "section_id": "4.7.5",
      "section_title": "Processing in 3G_MSC-B, and information transfer on E-interface",
      "content": "The following parameters require processing (e.g. to store the parameter, to internally generate the parameter) in MSC‑B. The relevant BSSMAP procedures are mentioned to ease the comprehension, their detailed description is the scope of 3GPP TS 48.008 [12]. Each BSSMAP message listed in 3GPP TS 49.008 [14] being transferred on E-interface shall use the mechanisms given in clause 4.5.4 and is described in 3GPP TS 48.008 [12].",
      "chunk_type": "procedure",
      "cross_references": [
        "clause_4.5.4",
        "ts_48.008",
        "ts_49.008"
      ]
    },
    {
      "chunk_id": "ts_29.010_4.7.5.1",
      "section_id": "4.7.5.1",
      "section_title": "Encryption Information",
      "content": "3G_MSC-B shall remove algorithms not allowed by 3G_MSC-B from the list of GSM algorithms received from MSC-A. The modified list of algorithms, the ciphering key and the chosen algorithm shall be stored by 3G_MSC-B and used for generating the UMTS parameters Encryption Information and Integrity Protection Information if they are not received in MAP Prepare Handover Request (the generation of the UMTS parameters from the GSM parameters is described in TS 33.102).\nTransfer of Information:\nIf ciphering has not been performed before Inter-MSC Handover, this will be controlled by MSC-A after the completion of Inter-MSC Handover.\nCiphering control towards 3G_MSC-B:\nIf Ciphering has been performed before Inter-MSC Handover:\n-\tin the Handover Request BSSMAP message (information included).\nThe Handover Request Acknowledge should in this case NOT contain the indication of the chosen algorithm.\nIf Ciphering has NOT been performed before Inter-MSC Handover:\n-\tin the Cipher Mode Command procedure between MSC-A and 3G_MSC-B.",
      "chunk_type": "requirement",
      "cross_references": [
        "ts_33.102"
      ]
    },
    {
      "chunk_id": "ts_29.010_4.7.5.2",
      "section_id": "4.7.5.2",
      "section_title": "Channel Type",
      "content": "The Channel Type shall be stored by 3G_MSC-B and used for generating RAB parameters.\nTransfer of Information:\nIndependently of the type of resource (Signalling only or traffic channel) assigned to the MS, the Channel Type Information is transferred to 3G_MSC-B in:\n-\tthe Handover Request BSSMAP message.\nChosen Channel and/or Speech Version shall NOT be reported back to MSC-A in the Handover Request Acknowledge\nIf a new type of resource is to be assigned after Inter-MSC Handover, this can be made with:\n-\tthe BSSMAP Assignment procedure between MSC-A and 3G_MSC-B.",
      "chunk_type": "requirement",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.010_4.7.5.3",
      "section_id": "4.7.5.3",
      "section_title": "Classmark",
      "content": "This information shall be stored by 3G_MSC-B and might be received from MSC-A.\nTransfer of Information due to Classmark received from MSC-A:\nThis information shall be stored by 3G_MSC-B and is received:\n-\tin the Handover Request BSSMAP message.\nIf a new type of resource is to be assigned after Inter-MSC Handover, Classmark Information MAY be included:\n-\tin the BSSMAP Assignment procedure.",
      "chunk_type": "requirement",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.010_4.7.5.4",
      "section_id": "4.7.5.4",
      "section_title": "Priority",
      "content": "The parameter shall be stored by 3G_MSC-B and used for generating RAB parameters. It is received as detailed below:\nTransfer of Information:\nReceived by 3G_MSC-B from MSC-A in:\n-\tthe Handover Request BSSMAP message.\nIf a change is needed after an Inter-MSC Handover with:\n-\tthe BSSMAP Assignment procedure.",
      "chunk_type": "requirement",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.010_4.7.5.5",
      "section_id": "4.7.5.5",
      "section_title": "MSC-Invoke Trace Information Elements",
      "content": "The process to be performed by 3G_MSC-B on the information elements of the MSC Invoke Trace BSSMAP messages is left for further study.\nNote that MSC-A does not forward BSC Invoke Trace in case of GSM to UMTS handover.",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.010_4.7.5.6",
      "section_id": "4.7.5.6",
      "section_title": "Selected UMTS Algorithm",
      "content": "A sequence of possible encryption and integrity protection algorithms, received from the 3G_MSC-A, can be sent to an RNS in Relocation Request or  in Security Mode Command in case of  cipher mode setting after inter-MSC handover from GSM to UMTS. The RNS chooses one of the listed algorithms and reports this back to the 3G_MSC in Relocation Request Acknowledge or  Security Mode Complete respectively. The MSC-B provides the Selected UMTS algorithm information to the MSC-A. The Selected UMTS algorithms IE in the MAP Process Access Signalling Request and MAP Prepare Handover Response messages refers to the Chosen Integrity Protection Algorithm and Chosen Encryption Algorithm, defined in  RANAP specification 3GPP TS 25.413 [7]\nThe selected algorithm shall be stored by 3G_MSC-B, and sent to 3G_MSC-A.\nTransfer of Information:\nIf ciphering has not been performed before Inter-MSC Handover, this will be controlled by 3G_MSC-A after the completion of Inter-MSC Handover.\nIf Ciphering has been performed before Inter-MSC Handover, Selected UMTS algorithm information is received by 3G_MSC-A from 3G_MSC-B in:\n-\tThe Prepare Handover Response MAP message.\nIf Ciphering has NOT been performed before Inter-MSC Handover, Selected UMTS algorithm information is received by 3G_MSC-A from 3G_MSC-B in:\n-\tThe Process Access Signalling Request MAP message.",
      "chunk_type": "general",
      "cross_references": [
        "ts_25.413"
      ]
    },
    {
      "chunk_id": "ts_29.010_4.7.5.7",
      "section_id": "4.7.5.7",
      "section_title": "Allowed UMTS Algorithms",
      "content": "In case of GSM-subscriber, the Integrity Protection Information and UMTS Encryption Information are not transferred to the MSC-B during inter-MSC handover from GSM to UMTS. Allowed UMTS algorithms is UMTS information that is required in RANAP Relocation Request and RANAP Security Mode Command, and shall be provided by 3G_MSC-A. 3G_MSC-B needs this information in case of an inter-MSC GSM to UMTS handover  and in subsequent security mode setting, after an inter-MSC GSM to UMTS handover. Therefore 3G_MSC-A must provide this information in case of an inter-MSC GSM to UMTS handover. The Allowed UMTS algorithms IE in the MAP Prepare Handover and in the MAP Forward Access Signalling Request messages refers to the  Permitted Integrity Protection Algorithms in Integrity Protection  Information and Permitted Encryption Algorithms in Encryption Information, defined in  RANAP specification 3GPP TS 25.413 [7].\nAllowed UMTS algorithms shall be stored by 3G_MSC-B.\nTransfer of information:\nIf ciphering has not been performed before Inter-MSC Handover, this will be controlled by 3G_MSC-A after the completion of Inter-MSC Handover.\nCiphering control towards 3G_MSC-B:\nIf Ciphering has been performed before Inter-MSC Handover:\n-\tThe Prepare Handover Request MAP message.\nIf Ciphering has NOT been performed before Inter-MSC Handover:\n-\tThe Forward Access Signalling Request MAP message.",
      "chunk_type": "general",
      "cross_references": [
        "ts_25.413"
      ]
    },
    {
      "chunk_id": "ts_29.010_4.7.5.8",
      "section_id": "4.7.5.8",
      "section_title": "BSSMAP Service Handover",
      "content": "This information shall be stored by 3G_MSC-B and sent to a BSS in Handover Request, when 3G_MSC-B performs handover to GSM.\nTransfer of information:\nThe BSSMAP Service Handover information is transferred to 3G_MSC-B in:\n-\tthe Handover Request BSSMAP message.\nIf a new assignment of a TCH after an inter-MSC handover is to be performed, the BSSMAP Service Handover information is transferred to 3G_MSC-B in:\n-\tthe BSSMAP Assignment procedure.",
      "chunk_type": "requirement",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.010_4.7.5.9",
      "section_id": "4.7.5.9",
      "section_title": "RANAP Service Handover",
      "content": "This information shall be stored by 3G_MSC-B and sent to an RNS in Relocation Request during the basic inter-MSC handover or when 3G_MSC-B performs a subsequent relocation or handover to UMTS.\nTransfer of information:\nThe RANAP Service Handover information is transferred to 3G_MSC-B in:\n-\tthe Prepare Handover Request MAP message.\nIf a new assignment of a Radio Access Bearer after an inter-MSC handover is to be performed, the information is transferred to 3G_MSC-B in:\n-\tthe Forward Access Signalling Request MAP message\nand sent by 3G_MSC-B to the RNS in RAB Assignment Request.",
      "chunk_type": "requirement",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.010_4.7.5.10",
      "section_id": "4.7.5.10",
      "section_title": "GERAN Classmark",
      "content": "The GERAN Classmark shall be stored by 3G_MSC-B and can be received from MSC-A, from the serving BSS or serving RNS, or from the target RNS. The GERAN Classmark shall be used together with other parameters, e.g. the Channel Type, for selecting a service and for generating RAB parameters for handover to GERAN Iu-mode, subsequent relocation or handover to GERAN Iu-mode, and RAB (re-)assignment when the MS is in GERAN Iu-mode.\nTransfer of Information due to GERAN Classmark received from MSC-A:\nReceived by 3G_MSC-B in:\n-\tthe Prepare Handover Request MAP message.\nTransfer of Information due to GERAN Classmark received from the serving BSS or serving RNS:\nReceived by 3G_MSC-B in:\n-\tthe Handover Required BSSMAP message;\n-\tthe Initial UE RANAP message; or\n-\tthe RAB Assignment Response RANAP message.\nTransfer of Information due to GERAN Classmark received from the target RNS:\nReceived by 3G_MSC-B in:\nt-\the Relocation Failure RANAP message.",
      "chunk_type": "requirement",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.010_4.7.5.11",
      "section_id": "4.7.5.11",
      "section_title": "SNA Access Information",
      "content": "This information shall be stored by 3G_MSC-B and sent to an RNS in the Relocation Request message when 3G_MSC-B performs handover to UMTS.\nTransfer of information:\nThe SNA Access Information is transferred to 3G_MSC-B in:\n-\tthe Handover Request BSSMAP message.",
      "chunk_type": "requirement",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.010_4.7.5.12",
      "section_id": "4.7.5.12",
      "section_title": "UESBI",
      "content": "This information shall be stored by 3G_MSC-B and sent to an RNS in Relocation Request during the basic inter-MSC handover or when 3G_MSC-B performs a subsequent relocation or handover to UMTS.\nTransfer of information:\nThe UESBI information is transferred to 3G_MSC-B in:\n-\tthe Prepare Handover Request MAP message.",
      "chunk_type": "requirement",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.010_4.7.5.13",
      "section_id": "4.7.5.13",
      "section_title": "Alternative Channel Type",
      "content": "This information shall be stored by 3G_MSC-B and from this information 3G_MSC-B shall generate Alternative RAB Parameters Value IE sent to an RNS in Relocation Request, when 3G_MSC-B performs relocation or handover to UMTS.\nTransfer of information:\nThe Alternative Channel Type information is transferred to 3G_MSC-B in:\n-\tthe Prepare Handover Request MAP message.\nIf a new assignment of a Radio Access Bearer after an inter-MSC handover is to be performed, the information is transferred to 3G_MSC-B in:\n-\tthe Forward Access Signalling Request MAP message.",
      "chunk_type": "requirement",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.010_4.7.5.14",
      "section_id": "4.7.5.14",
      "section_title": "Trace parameters",
      "content": "This information shall be stored by 3G_MSC-B and 3G_MSC-B shall use this information for trace activation for MSC-S, MGW, RNC or BSC.\nTransfer of information:\nThe Trace Parameter List information for MSC-S, MGW and RNC tracing is transferred to 3G_MSC-B in:\n-\tthe Prepare Handover Request MAP message.\nThe Trace Reference and Trace Type information for BSC tracing is transferred to 3G_MSC-B in:\n-\tthe MSC Invoke Trace BSSMAP message.",
      "chunk_type": "parameter",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.010_4.7.6",
      "section_id": "4.7.6",
      "section_title": "Cause Code Mapping",
      "content": "When a Mobile Station is handed over between GSM and UMTS, a mapping of the cause codes used in the BSSMAP and the RANAP protocols is needed. The mapping  described here is applicable to the BSSMAP protocol even when used inside MAP in the E-interface.\nThe mapping between the cause codes received in BSSMAP Handover Required and the cause codes sent in RANAP Relocation Request is as follows:\n----------------------------------------------------------------\n48.008                         25.413             |Notes\n-------------------------------------------------------┼--------\nHANDOVER REQUIRED              RELOCATION REQUEST      |\n|\n-Better Cell                   -Relocation Desirable  |\nfor Radio Reasons     |\n|\n-Directed retry                -Directed retry        |\n-Distance                      -Time critical reloc.  |\n-Downlink quality              -Time critical reloc.  |\n-Downlink strength             -Time critical reloc.  |\n-O and M intervention          -O and M intervention  |\n-Preemption                    -RAB pre-empted        |\n-Response to MSC invocation    -Network Optimisation  |\n-Switch circuit pool                                  |\t1\n-Traffic                       -Resource Optimisation |\nRelocation            |\n-Uplink quality                -Time critical reloc.  |\n-Uplink strength               -Time critical reloc.  |\n-Reduce Load in                -Reduce Load in        |\nserving cell                   serving cell          |\n-Any other value               -Relocation Desirable  |\nFor Radio Reasons     |\nNOTE 1: Cause code not used at inter-system handover.\nThe mapping between the cause codes received in BSSMAP Handover Request and the cause codes sent in RANAP Relocation Request is as follows (the mapping is only used for the MAP-E interface):\n----------------------------------------------------------------\n48.008                         25.413             |Notes\n-------------------------------------------------------┼--------\nHANDOVER REQUEST               RELOCATION REQUEST      |\n|\n-Better Cell                   -Relocation Desirable  |\nfor Radio Reasons     |\n|\n-Directed retry                - Directed retry       |\n-Distance                      -Time critical reloc.  |\n-Downlink quality              -Time critical reloc.  |\n-Downlink strength             -Time critical reloc.  |\n-O and M intervention          -O and M intervention  |\n-Preemption                    -RAB pre-empted        |\n-Response to MSC invocation    -Network Optimisation  |\n-Switch circuit pool                                  |\t1\n-Traffic                       -Resource Optimisation |\nRelocation            |\n-Uplink quality                -Time critical reloc.  |\n-Uplink strength               -Time critical reloc.  |\n-Reduce Load in                -Reduce Load in        |\nserving cell                   serving cell          |\n-Any other value               -Relocation Desirable  |\nFor Radio Reasons     |\nNOTE 1: Cause code not used at inter-system handover.\nThe mapping between the cause codes received in BSSMAP Handover Failure and the cause codes sent in RANAP Iu Release Command is as follows:\n----------------------------------------------------------------\n48.008                         25.413             |Notes\n-------------------------------------------------------┼--------\nHANDOVER FAILURE               IU RELEASE COMMAND      |\n|\n-Ciphering algorithm not                              |\t2\nsupported                                            |\n-Circuit pool mismatch                                |\t1\n-Equipment failure             -Relocation cancelled  |\n-Invalid message contents      -Abstract Syntax Error |\n-No radio resource available                          |\t2\n-O and M intervention          -O and M intervention  |\n-Radio interface failure,      -Relocation cancelled  |\nreversion to old channel                             |\n-Radio interface message       -Relocation cancelled  |\nfailure                                              |\n-Requested speech version                             |\t2\nunavailable                                          |\n-Requested terrestrial                                |\t2\nresource unavailable                                 |\n-Requested transcoding/rate                           |\t2\nadaption unavailable                                 |\n-Switch circuit pool                                  |\t1\n-Terrestrial circuit already   -Relocation cancelled  |\nallocated                                            |\n-Any other value               -Relocation cancelled  |\nNOTE 1: Cause code not used at inter-system handover.\nNOTE 2: Cause code not applicable to this traffic case.\nThe mapping between the cause codes received in RANAP Relocation Failure and the cause codes sent in BSSMAP Handover Failure is as follows (this mapping is only used for the MAP-E interface):\n----------------------------------------------------------------\n25.413                         48.008             |Notes\n-------------------------------------------------------┼--------\nRELOCATION FAILURE             HANDOVER FAILURE        |\n|\n-GERAN Iu-mode failure          -GERAN Iu-mode failure |\n-Traffic load in the target     -Traffic load in the   |\ncell higher than in the         target cell higher    |\nsource cell                     than in the source    |\ncell                  |\n-Any other value                -No radio resource     |\navailable             |\nThe mapping between the cause codes received in RANAP Relocation Failure and the cause codes sent in BSSMAP Handover Required Reject is as follows:\n----------------------------------------------------------------\n25.413                         48.008             |Notes\n-------------------------------------------------------┼--------\nRELOCATION FAILURE     HANDOVER REQUIRED REJECT        |\n|\n-GERAN Iu-mode failure          -GERAN Iu-mode failure |\n-Incoming Relocation            -Incoming Relocation   |\nNot Supported Due To            Not Supported Due To  |\nPUESBINE Feature                PUESBINE Feature      |\n-Traffic load in the target     -Traffic load in the   |\ncell higher than in the         target cell higher    |\nsource cell                     than in the source    |\ncell                  |\n-Any other value                -No radio resource     |\navailable             |\nThe mapping between the RANAP and the BSSMAP assignment messages is used in the MAP-E interface. RANAP RAB Assignment Response with successful result is mapped to BSSMAP Assignment Complete; RANAP RAB Assignment Response with unsuccessful result is mapped to BSSMAP Assignment Failure. The mapping between the cause codes received in RANAP RAB Assignment Response and the cause codes sent in BSSMAP Assignment Failure is as follows (this mapping is only used for the MAP-E interface):\n----------------------------------------------------------------\n25.413                         48.008             |Notes\n-------------------------------------------------------┼--------\nRAB ASSIGNMENT RESPONSE        ASSIGNMENT FAILURE      |\n|\n-Requested traffic class not   –No radio resource      |\navailable                      available              |\n-Invalid RAB parameters value  –Invalid msg. contents  |\n-Requested max bit rate not    –No radio resource      |\navailable                      available              |\n-Requested max bit rate for DL –No radio resource      |\nnot available                  available              |\n-Requested max bit rate for UL –No radio resource      |\nnot available                  available              |\n-Requested guaranteed bit rate –No radio resource      |\nnot available                  available              |\n-Requested guaranteed bit rate –No radio resource      |\nfor DL not available           available              |\n-Requested guaranteed bit rate –No radio resource      |\nfor UL not available           available              |\n-Requested transfer delay not  –No radio resource      |\nachievable                     available              |\n-Invalid RAB param. combination–Invalid msg. contents  |\n-Condition violation for SDU   –Invalid msg. contents  |\nparameters                                            |\n-Condition violation for       –Invalid msg. contents  |\ntraffic handling priority                             |\n-Condition violation for       –Invalid msg. contents  |\nguaranteed bit rate                                   |\n-User plane not supported      –No radio resource      |\navailable              |\n-Iu UP failure                 –Equipment failure      |\n-Tqueuing expiry               –Radio interface message|\nfailure                |\n-Invalid RAB id                –Invalid msg. contents  |\n-Request superseeded           –No radio resource      |\navailable              |\n-Relocation triggered          -Relocation triggered   |\n-GERAN Iu-mode failure         -GERAN Iu-mode failure  |\n-Any other value               –Radio interface message|\nfailure                |\nThe mapping between the cause codes received in RANAP Security Mode Reject and the cause codes sent in BSSMAP Cipher Mode Reject is as follows (this mapping is only used for the MAP-E interface):\n----------------------------------------------------------------\n25.413                         48.008             |Notes\n-------------------------------------------------------┼--------\nSECURITY MODE REJECT           CIPHER MODE REJECT      |\n|\n-Requested ciphering and/or    –Ciphering algorithm    |\nintegrity protection           not supported          |\nalgorithms not supported                              |\n-Failure in the radio          –Radio interface message|\ninterface procedure            failure                |\n-Change of ciphering and/or    -Invalid msg. contents  |\nintegrity protection is                               |\nnot supported                                         |\n-Relocation triggered          -Relocation triggered   |\n-Any other value               –Radio interface message|\nfailure                |\nThe mapping between the cause codes received in RANAP Location Report and the cause codes sent in BSSMAP Handover Performed is as follows (this mapping is only used for the MAP-E interface):\n----------------------------------------------------------------\n25.413                         48.008             |Notes\n-------------------------------------------------------┼--------\nLOCATION REPORT                HANDOVER PERFORMED      |\n|\n-User restriction start ind.   –O&M intervention       |\n-User restriction start ind.   –O&M intervention       |\n-Requested report type not                             |\t1\nsupported                                             |\n-Any other value               -Better cell            |\nNOTE 1: In this case, no Handover Performed is sent.\nThe mapping between the cause codes received in RANAP Iu Release Request and the cause codes sent in BSSMAP Clear Request is as follows:\n----------------------------------------------------------------\n25.413                         48.008             |Notes\n-------------------------------------------------------┼--------\nIU RELEASE REQUEST             CLEAR REQUEST           |\n|\n-O and M intervention          -O and M intervention  |\n-Unspecified failure           -Equipment failure     |\n-Repeated integrity checking   -Invalid message       |\nfailure                        contents              |\n-Release due to UE generated   -Call control          |\nsignalling connection release                        |\n-Radio connection with UE lost –Radio interface       |\nfailure               |\n-Access restricted due         -Access restricted due |\nto shared networks             to shared networks    |\n-Any other value               -No radio resource     |\navailable             |",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.010_4.8",
      "section_id": "4.8",
      "section_title": "Inter-MSC Relocation",
      "content": "The general principles of the relocation procedures are given in Technical Specification TS 23.009. TS 29.010 gives the necessary information for interworking between the TS 25.413 relocation protocol and the TS 29.002 MAP protocol.\nFor intra UMTS handovers, RANAP is carried over the MAP-E interface instead of BSSAP. Please refer to 3GPP TS 29.108 [15].\nWhen new parameters need to be added for transfer on the E-interface, the principles stated in the beginning of clause 4.5 shall be followed.",
      "chunk_type": "general",
      "cross_references": [
        "clause_4.5",
        "ts_23.009",
        "ts_29.010",
        "ts_25.413",
        "ts_29.002",
        "ts_29.108"
      ]
    },
    {
      "chunk_id": "ts_29.010_4.8.1",
      "section_id": "4.8.1",
      "section_title": "Basic Inter-MSC Relocation",
      "content": "When a Mobile Station is relocated between two MSCs, the establishment of a connection between them (described in TS 23.009) requires interworking between Iu-Interface and E-Interface.\nThe signalling at initiation, execution and completion of the Basic Inter-MSC relocation procedure is shown in figures 50 to 54 with both possible positive or negative outcomes.\nAdditionally figure 50b shows the possible interworking when trace related messages are transparently transferred on the E-Interface at Basic Inter-MSC Relocation initiation.\nRNS-A        3G-MSC-A                  3G-MSC-B\n|               |                         |\n|RELOCATION     |                         |\n|-------------->|MAP PREPARE HANDOVER     |\n|REQUIRED       |------------------------>| +----------------+\n|               |request                  | |Possible Alloc. |\n|               |                         | |of a relocation|\n|               |                         | |no. in the VLR-B|\n|               |                         | +----------------+\n|               |                         |\n|               |                         |                RNS-B\n|               |                         |                   |\n|               |                         |RELOCATION REQUEST |\n|               |                         |------------------>|\nFigure 50a: Signalling for Basic Inter-MSC Relocation initiation (no trace related messages transferred)\nRNS-A        3G-MSC-A                  3G-MSC-B\n|             (*)                         |\n|RELOCATION     |                         |\n|-------------->|MAP PREPARE HANDOVER     |\n|REQUIRED       |------------------------>| +----------------+\n|               |request  (**)            | |Possible Alloc. |\n|               |                         | |of a relocation |\n|               |                         | |no. in the VLR-B|\n|               |                         | +----------------+\n|               |                         |\n|               |                         |                RNS-B\n|               |                         |                   |\n|               |                         |RELOCATION REQUEST |\n|               |                         |------------------>|\n|               |                         |                   |\n|               |                         |CN INVOKE TRACE    |\n|               |                         |--------------->(***)\nFigure 50b: Signalling for Basic Inter-MSC Relocation initiation (CN invoke trace message transferred)\n(*):\tTracing invocation has been received from VLR.\n(**):\tIn that case, RELOCATION REQUEST and CN INVOKE TRACE messages are included within the AN-apdu parameter.\n(***):\tCN INVOKE TRACE is forwarded to RNS-B if supported by 3G_MSC-B.\nPossible Positive outcomes: successful radio resources allocation and relocation numbers allocation (if performed):\nRNS-A       3G-MSC-A                   3G-MSC-B            RNS-B\n|               |                         |                   |\n|               |                         |RELOCATION REQUEST |\n|               |                         |<------------------|\n|               |                         |ACKNOWLEDGE        |\n|               | MAP PREPARE HANDOVER    |                   |\n|               |<------------------------|                   |\n|               | response                |                   |\n|               |                         |                   |\n|RELOCATION COMMAND                       |                   |\n|<--------------|                         |                   |\nPossible Negative outcomes:\na)\tuser error detected, or relocation numbers allocation unsuccessful (if performed), or component rejection or dialogue abortion performed by 3G_MSC-B:\nRNS-A       3G-MSC-A                   3G-MSC-B            RNS-B\n|               |                         |                   |\n|               |MAP PREPARE HANDOVER response                |\n|               |negative result, MAP CLOSE                   |\n|               |<------------------------|                   |\n|               |MAP U/P-ABORT            |                   |\n|RELOCATION PREPARATION                   |                   |\n|<--------------|                         |                   |\n|FAILURE        |       MAP CLOSE         |                   |\n|               |------------------------>|                   |\n|               |                         |                   |\nb)\tradio resources allocation failure:\nRNS-A       3G-MSC-A                   3G-MSC-B            RNS-B\n|               |                         |                   |\n|               |                         |RELOCATION FAILURE |\n|               |                         |<------------------|\n|               |MAP PREPARE HANDOVER     |                   |\n|               |<------------------------|                   |\n|               | response                |                   |\n|RELOCATION PREPARATION                   |                   |\n|<--------------|                         |                   |\n|FAILURE        |                         |                   |\n|               |                         |                   |\nc)\tradio resources allocation partial failure (3G_MSC-A decides to reject the relocation):\nRNS-A       3G-MSC-A                   3G-MSC-B            RNS-B\n|               |                         |                   |\n|               |                         |RELOCATION REQUEST |\n|               |                         |<------------------|\n|               |MAP PREPARE HANDOVER     |      ACK          |\n|               |<------------------------|                   |\n|               | response                |                   |\n|RELOCATION PREPARATION                   |                   |\n|<--------------|                         |                   |\n|FAILURE        |                         |                   |\n|               |                         |                   |\nd)\tunsuccessful relocation execution (relocation cancelled):\nRNS-A       3G-MSC-A                   3G-MSC-B            RNS-B\n|               |                         |                   |\n|RELOCATION     |                         |                   |\n|-------------->|                         |                   |\n|CANCEL         |                         |                   |\n|               |MAP U -ABORT             |                   |\n|               |------------------------>|                   |\n|               |                         |IU RELEASE COMMAND |\n|RELOCATION     |                         |------------------>|\n|<--------------|                         |                   |\n|CANCEL ACK     |                         |                   |\n|               |                         |                   |\nFigure 51: Signalling for Basic Inter-MSC Relocation execution (Negative outcomes)\nRNS-A       3G-MSC-A                   3G-MSC-B            RNS-B\n|               |                         |                   |\n|               |                         |RELOCATION COMPLETE|\n|               |                         |<------------------|\n|               |MAP SEND END SIGNAL request                  |\n|               |<------------------------|                   |\n|IU RELEASE COMMAND                       |                   |\n|<--------------|                         |                   |\n|               |                         |                   |\nFigure 52: Signalling for Basic Inter-MSC Relocation completion\nPositive outcome\nRNS-A       3G-MSC-A                   3G-MSC-B            RNS-B\n|               |                         |                   |\n|               |MAP SEND END SIGNAL      |                   |\n|               |------------------------>|                   |\n|               | response                |IU RELEASE COMMAND |\n|               |                         |------------------>|\n|               |                         | (Note 1)          |\nFigure 53: Signalling for Basic Inter-MSC Relocation completion (Positive outcome)\nNOTE:\tFrom interworking between MAP and RANAP point of view.\nNegative outcome:\nRNS-A       3G-MSC-A                   3G-MSC-B            RNS-B\n|               |                         |                   |\n|               | MAP U/P -ABORT          |                   |\n|               |------------------------>|                   |\n|               |                         |IU RELEASE COMMAND |\n|               |                         |------------------>|\n|               |                         |                   |\nFigure 54: Signalling for Basic Inter-MSC Relocation completion (Negative outcome)\nThe relocation procedure is normally triggered by RNS-A by sending a RELOCATION REQUIRED message on Iu-Interface to 3G_MSC-A. The invocation of the Basic Inter-MSC relocation procedure is performed and controlled by 3G_MSC-A. The sending of the MAP Prepare-Handover request to 3G_MSC-B is triggered in 3G_MSC-A upon receipt of the RELOCATION REQUIRED message. The identity of the target RNC where the call is to be handed over in 3G_MSC-B area, provided in the RELOCATION REQUIRED message, is mapped to the target RNC Id MAP parameter and the RELOCATION REQUEST message is encapsulated in the an-APDU MAP parameter of the Prepare-Handover MAP request. 3G_MSC-B can invoke another operation towards the VLR-B (allocation of the relocation numbers described in 3GPP TS 29.002 [9]).\nAdditionally, if tracing activity has been invoked, the trace related messages can be transferred on the E-Interface encapsulated in the an-APDU MAP parameter of the Prepare-Handover Request. If transferred, one complete trace related message at a time shall be included in the an-APDU MAP parameter after the RELOCATION REQUEST message.\nThe interworking between Prepare Handover and RELOCATION REQUIRED is as follows:\n----------------------------------------------------------------\n|   25.413                         29.002         |Notes\n--------┼-------------------------------------------------┼-----\nForward | RELOCATION REQUIRED MAP PREPARE HANDOVER request|\nmessage |                                                 |\n|                            -ho-NumberNotRequired|   1\n|                            -target RNC Id       |\n|  RANAP information         -Radio Resource Info |\n|         elements           -an-APDU(            |\n|                            RELOCATION REQUEST,  |   2\n|                            CN INVOKE TRACE)     |\n|   GERAN classmark          -GERAN classmark     |\t4\n--------┼-------------------------------------------------┼-----\nPositive|      MAP PREPARE HANDOVER response              |\nresult  |                                                 |   3\n|                             -relocation numbers |\n|                             -an-APDU(           |\n| RELOCATION COMMAND           RELOCATION REQUEST |\n|                              ACKNOWLEDGE        |\n|                              or                 |\n| RELOCATION PREP FAILURE      RELOCATION FAILURE)|\n|                                                 |\n--------┼-------------------------------------------------┼-----\nNegative| RELOCATION PREP FAILURE     MAP PREPARE HANDOVER|\nresult  |                                                 |\n| Unspecified failure          System Failure     |\n| Unspecified failure          No Handover Number |\n|                                 available       |\n| Unspecified failure          UnexpectedDataValue|\n| Unspecified failure          Data Missing       |\n|                                                 |\n| Unspecified failure          MAP CLOSE          |\n| Unspecified failure          MAP U/P -ABORT     |\n|                                                 |\nNOTE 1:\tThe RANAP information elements are already stored in 3G_MSC.\nThe ho-NumberNotRequired parameter is included by 3G_MSC-A, when 3G_MSC-A decides not to use any circuit connection with 3G_MSC-B. No relocation numbers shall be present in the positive result. Any negative response from 3G_MSC-B shall not be due to relocation number allocation problem.\nNOTE 2:\tThe process performed on the RANAP information elements received in the RELOCATION REQUIRED message is described in the 3GPP TS 25.413 [7].\nNOTE 3:\tThe response to the Prepare-Handover request can include in its an-APDU parameter, identifying the 3GPP TS 25.413 [7] protocol, either a RANAP RELOCATION REQUEST ACKNOWLEDGE or a RANAP RELOCATION FAILURE.\nIn the first case, the positive result triggers in 3G_MSC-A the sending on Iu-Interface of the RELOCATION CMD.\nIn the second case, the positive result triggers in 3G_MSC-A the sending of the RELOCATION PREP FAILURE.\nNOTE 4:\tIf the GERAN Classmark was not received with the RELOCATION REQUIRED message initiating the relocation, 3G_MSC-A shall include any previously received GERAN Classmark. See 3GPP TS 43.051 [17].\nThe interworking between Send End Signal and RELOCATION COMPLETE in 3G_MSC-B is as follows:\n----------------------------------------------------------------\n|   25.413                         29.002         |Notes\n--------┼-------------------------------------------------┼-----\nForward | RELOCATION COMPLETE MAP SEND END SIGNAL request |\nmessage |                                                 |\n|                               -an-APDU(         |\n|                               RELOCATION COMPL) |\n|                                                 |\n--------┼-------------------------------------------------┼-----\nPositive| IU RELEASE COMMAND  MAP SEND END SIGNAL response|\nresult  |  -Normal release                                |  1\n--------┼-------------------------------------------------┼-----\nNegative| IU RELEASE COMMAND                              |\nresult  |  -Normal release              MAP CLOSE         |  2\n|  -Normal release              MAP U/P -ABORT    |\n|                                                 |\nNOTE 1:\tThe positive empty result triggers the clearing of the Radio Resources on the Iu-Interface and the release of the SCCP connection between 3G_MSC-B and RNS-B. If a circuit connection is used between 3G_MSC-A and 3G_MSC-B, the 'Normal release' clearing cause shall only be given to RNS-B when 3G_MSC-B has received a clearing indication on its circuit connection with 3G_MSC-A.\nNOTE 2:\tThe abortion of the dialogue or the rejection of the component triggers in 3G_MSC-B the clearing of its circuit connection with 3G_MSC-A, if any, of the Radio Resources on the Iu-Interface and the release of the SCCP connection between 3G_MSC-B and RNS-B.\nThe interworking between Send End Signal and IU RELEASE COMMAND in 3G_MSC-A is as follows:\n----------------------------------------------------------------\n|   29.002                          25.413        |Notes\n--------┼-------------------------------------------------┼-----\nForward | MAP SEND END SIGNAL          IU RELEASE COMMAND |\nmessage | request                                         |\n|          -an-APDU(            - Successful      |\n|          RELOCATION COMPLETE)      Relocation   |\n--------┼-------------------------------------------------┼-----\nPositive|                                                 |\nresult  |                                                 |\n--------┼-------------------------------------------------┼-----\nNegative|                                                 |\nresult  |                                                 |\nThe interworking between RELOCATION CANCEL in case of relocation cancelled and User Abort in 3G-MSC-A is as follows:\n----------------------------------------------------------------\n|   25.413                         29.002         |Notes\n--------┼-------------------------------------------------┼-----\nForward | RELOCATION CANCEL               MAP U -ABORT    |\nmessage |                                                 |\n|  - Relocation                                   |\n|    cancelled                                    |\n--------┼-------------------------------------------------┼-----\nPositive| RELOCATION CANCEL ACKNOWLEDGEMENT               |\nresult  |                                                 |\n--------┼-------------------------------------------------┼-----\nNegative|                                                 |\nresult  |                                                 |",
      "chunk_type": "general",
      "cross_references": [
        "figure_50",
        "figure_51",
        "figure_52",
        "figure_53",
        "figure_54",
        "ts_23.009",
        "ts_29.002",
        "ts_25.413",
        "ts_43.051"
      ]
    },
    {
      "chunk_id": "ts_29.010_4.8.2",
      "section_id": "4.8.2",
      "section_title": "Subsequent Inter-MSC Relocation back to 3G_MSC-A",
      "content": "When a Mobile Station is being relocated back to 3G_MSC-A, the procedure (described in TS 23.009) requires interworking between Iu-Interface and E-Interface.\nThe signalling at initiation, execution and completion of the Subsequent Inter-MSC relocation procedure is shown in figures 55 to 59.\nRNS-A        3G-MSC-B                  3G-MSC-A\n|               |                         |\n|RELOCATION     |                         |\n|-------------->|MAP PREPARE SUBSEQUENT   |\n|REQUIRED       |------------------------>|\n|               |HANDOVER request         |\n|               |                         |                RNS-B\n|               |                         |                   |\n|               |                         |RELOCATION REQUEST |\n|               |                         |------------------>|\nFigure 55: Signalling for Subsequent Inter-MSC Relocation back to 3G_MSC-A initiation\nPossible Positive outcomes: successful radio resources allocation:\nRNS-A       3G-MSC-B                  3G-MSC-A             RNS-B\n|               |                         |                   |\n|               |                         |RELOCATION REQUEST |\n|               |                         |<------------------|\n|               |                         |ACKNOWLEDGE        |\n|               | MAP PREPARE SUBSEQUENT  |                   |\n|               |<------------------------|                   |\n|               | HANDOVER response       |                   |\n|RELOCATION COMMAND                       |                   |\n|<--------------|                         |                   |\nFigure 56: Signalling for Subsequent Inter-MSC Relocation back to 3G_MSC-A execution (Positive outcome)\nPossible Negative outcomes:\na)\tuser error detected, or component rejection or dialogue abortion performed by 3G_MSC-A:\nRNS-A       3G-MSC-B                  3G-MSC-A             RNS-B\n|               |MAP PREPARE SUBSEQUENT HANDOVER              |\n|               |<------------------------|                   |\n|RELOCATION PREP|   response negative result                  |\n|<--------------|                         |                   |\n|FAILURE (Note 1)                         |                   |\n|               |                         |                   |\nb)\tcomponent rejection or dialogue abortion performed by 3G_MSC-A:\nRNS-A       3G-MSC-B                  3G-MSC-A             RNS-B\n|               |MAP CLOSE, MAP U/P ABORT |                   |\n|               |<------------------------|                   |\n|IU RELEASE COMMAND                       |                   |\n|<--------------|                         |                   |\n|               |                         |                   |\nc)\tradio resources allocation failure:\nRNS-A       3G-MSC-B                  3G-MSC-A             RNS-B\n|               |                         | RELOCATION FAILURE|\n|               |                         |<------------------|\n|               |MAP PREPARE SUBSEQUENT   |                   |\n|               |<------------------------|                   |\n|RELOCATION PREP|    HANDOVER response    |                   |\n|<--------------|                         |                   |\n|FAILURE        |                         |                   |\nd)\tradio resources allocation partial failure (3G_MSC-A decides to reject the relocation):\nRNS-A       3G-MSC-B                  3G-MSC-A             RNS-B\n|               |                         | RELOCATION REQUEST|\n|               |                         |<------------------|\n|               |MAP PREPARE SUBSEQUENT   |     ACK           |\n|               |<------------------------|                   |\n|RELOCATION PREP|    HANDOVER response    |                   |\n|<--------------|                         |                   |\n|FAILURE        |                         |                   |\ne)\tunsuccessful relocation execution (relocation cancelled):\nRNS-A       3G-MSC-B                  3G-MSC-A             RNS-B\n|RELOCATION     |                         |                   |\n|-------------->|                         |                   |\n|CANCEL         |MAP PROCESS ACCESS       |                   |\n|               |------------------------>|                   |\n|               |   SIGNALLING request    |IU RELEASE COMMAND |\n|               |                         |------------------>|\n|               |                         |IU RELEASE COMPLETE|\n|               |                         |<------------------|\n|               |MAP FORWARD ACCESS       |                   |\n|               |<------------------------|                   |\n| RELOCATION    |   SIGNALLING request    |                   |\n|<--------------|                         |                   |\n|CANCEL ACK     |                         |                   |\nFigure 57: Signalling for Subsequent Inter-MSC Relocation back to 3G_MSC-A execution(Negative outcome)\nRNS-A       3G-MSC-B                  3G-MSC-A             RNS-B\n|               |                         |                   |\n|               |                         |RELOCATION         |\n|               |MAP SEND END SIGNAL      |<------------------|\n|               |<------------------------|COMPLETE           |\n|               | response                |                   |\n|IU RELEASE CMD |                         |                   |\n|<--------------|                         |                   |\nFigure 58: Signalling for Subsequent Inter-MSC Relocation back to 3G_MSC-A completion(Successful completion of the procedure)\nNOTE:\tPositive outcome case shown in figure 53.\nRNS-A       3G-MSC-B                  3G-MSC-A             RNS-B\n|               |                         |                   |\n|               |MAP U/P -ABORT           |                   |\n|               |<------------------------|                   |\n|               |                         |IU RELEASE COMMAND |\n|               |                         |------------------>|\n|               |                         |(Note 1)           |\nFigure 59: Signalling for Subsequent Inter-MSC Relocation back to 3G_MSC-A completion (Unsuccessful completion of the procedure)\nNOTE:\tAbnormal end of the procedure that triggers the clearing of all resources in 3G_MSC-B.\nThe interworking between Prepare Subsequent Handover and RELOCATION REQUIRED is as follows:\n----------------------------------------------------------------\n|   25.413                         29.002         |Notes\n--------┼-------------------------------------------------┼-----\nForward |REL. REQUIRED     MAP PREPARE SUBSEQUENT HANDOVER|\nmessage |                              request            |\n|                                                 |\n|                              -target MSC number |\n|                              -target RNC Id     |\n| RANAP information            -an-APDU(          |\t1\n|        elements               RELOCATION REQ)   |\n|                                                 |\n|  GERAN classmark             -GERAN classmark   |\t3\n|                                                 |\n--------┼-------------------------------------------------┼-----\nPositive|                  MAP PREPARE SUBSEQUENT HANDOVER|\nresult  |                             response            |  2\n|                             -an-APDU(           |\n|RELOCATION CMD.               RELOCATION REQUEST |\n|                              ACKNOWLEDGE        |\n|                              or                 |\n|RELOCATION PREP FAILURE       RELOCATION FAILURE)|\n|                                                 |\n--------┼-------------------------------------------------┼-----\nNegative| REL. PREP. FAILURE        MAP PREPARE SUBSEQUENT|\nresult  |                           HANDOVER response     |\n| Unspecified failure          Unknown MSC        |\n| Unspecified failure          Subsequent Handover|\n|                                         Failure |\n| Unspecified failure          UnexpectedDataValue|\n| Unspecified failure          Data Missing       |\n|                                                 |\n| Iu RELEASE COMMAND           MAP CLOSE          |\n|                              MAP U/P –ABORT     |\n| Unspecified failure                             |\n| Unspecified failure                             |\n|                                                 |\nNOTE 1:\tThe processing performed on the RANAP information elements received in the RELOCATION REQUIRED message is out of the scope of the present document. The target MSC number is provided to 3G_MSC-A by 3G_MSB-B based on the information received from RNS-B.\nNOTE 2:\tThe response to the Prepare-Subsequent-Handover request can include in its an-APDU parameter, identifying the 3GPP TS 25.413 [7] protocol, a RANAP RELOCATION REQUEST ACKNOWLEDGE or a RANAP RELOCATION FAILURE.\nNOTE 3:\tIf the GERAN Classmark was not received with the RELOCATION REQUIRED message initiating the relocation, MSC-B shall include any previously received GERAN Classmark. See 3GPP TS 43.051 [17].\nIn the first case, the positive result triggers in 3G_MSC-B the sending on Iu‑Interface of the RELOCATION COMMAND.\nIn the second case, the positive result triggers in 3G_MSC-B the sending of the RELOCATION PREPARATION FAILURE.\nThe interworking between RELOCATION CANCEL and MAP Process Signalling  Request in 3G_MSC-A is as follows:\n----------------------------------------------------------------\n|   29.002                         25.413         |Notes\n--------┼-------------------------------------------------┼-----\nForward | MAP PROCESS-SIGNALLING       IU RELEASE COMMAND |\nmessage |         request                                 |\n| -an-APDU(                                       |\n|  RELOCATION CANCEL)                             |\n|                                                 |\n--------┼-------------------------------------------------┼-----\nPositive| MAP FORWARD-SIGNALLING       IU RELEASE COMPLETE|\nresult  |         request                                 |\n| -an-APDU(                                       |\n|  RELOCATION CANCEL ACK)                         |\n|                                                 |\n--------┼-------------------------------------------------┼-----\nNegative|                                                 |\nresult  |                                                 |\n|                                                 |\nThe interworking between RELOCATION CANCEL and MAP Process Signalling  Request in 3G_MSC-B is as follows:\n----------------------------------------------------------------\n|   25.413                         29.002         |Notes\n--------┼-------------------------------------------------┼-----\nForward | RELOCATION CANCEL        MAP PROCESS-SIGNALLING |\nmessage |                                   request       |\n|                          -an-APDU(              |\n|                           RELOCATION CANCEL)    |\n|                                                 |\n--------┼-------------------------------------------------┼-----\nPositive| RELOCATION CANCEL ACK    MAP FORWARD-SIGNALLING |\nresult  |                                   request       |\n|                          -an-APDU(              |\n|                           RELOCATION CANCEL ACK)|\n|                                                 |\n--------┼-------------------------------------------------┼-----\nNegative|                                                 |\nresult  |                                                 |\n|                                                 |\nThe interworking between Send End Signal Result and RELOCATION COMPLETE in 3G_MSC-A is as follows:\n----------------------------------------------------------------\n|   25.413                         29.002         |Notes\n--------┼-------------------------------------------------┼-----\nForward | RELOCATION COMPLETE  MAP SEND END SIGNAL        |\nmessage |                               response          |\n|                                                 |\n--------┼-------------------------------------------------┼-----\nPositive|                                                 |\nresult  |                                                 |\n--------┼-------------------------------------------------┼-----\nNegative|                                                 |\nresult  |                          MAP U/P -ABORT         |  1\nNOTE:\tThe abortion of the dialogue ends the relocation procedure with 3G_MSC-B.",
      "chunk_type": "general",
      "cross_references": [
        "figure_55",
        "figure_56",
        "figure_57",
        "figure_58",
        "figure_53",
        "figure_59",
        "ts_23.009",
        "ts_25.413",
        "ts_43.051"
      ]
    },
    {
      "chunk_id": "ts_29.010_4.8.3",
      "section_id": "4.8.3",
      "section_title": "Subsequent Inter-MSC Relocation to third MSC",
      "content": "When a Mobile Station is being relocated to a third MSC, the procedure (described in 3GPP TS 23.009 [2]) does require one specific interworking case in 3G_MSC-A (figure 64) between E-Interface from 3G_MSC-B and E-Interface from 3G_MSC-B' other than the combination of the ones described in the clause 4.8.1 and 4.8.2.\nRNS-A     3G-MSC-B               3G-MSC-A         3G-MSC-B'\n|            |                      |                |\n|RELOCATION  |                      |                |\n|----------->|MAP PREPARE SUBSEQUENT|                |\n|REQUIRED    |--------------------->|                |\n|            |HANDOVER request      |MAP PREPARE     |\n|            |                      |--------------->|\n|            |                      |HANDOVER request|\n|            |                      |                |+-------+\n|            |                      |                ||Possib.|\n|            |                      |                ||Alloc. |\n|            |                      |                ||of relo|\n|            |                      |                ||number |\n|            |                      |                || VLR-B |\n|            |                      |                |+-------+\n|            |                      |                |    RNS-B'\n|            |                      |                |         |\n|            |                      |                |RELOCATION\n|            |                      |                |-------->|\n|            |                      |                |REQUEST  |\n|            |                      |                |         |\nFigure 60: Signalling for Subsequent Inter-MSC Relocation to third MSC (3G_MSC-B') initiation\nPossible Positive outcomes: successful radio resources allocation:\nRNS-A     3G-MSC-B               3G-MSC-A         3G-MSC-B'\n|            |                      |                |\n|            |                      |                |    RNS-B'\n|            |                      |                |         |\n|            |                      |                |RELOCATION\n|            |                      |                |<--------|\n|            |                      |                |REQUEST  |\n|            |                      |                ACKNOWLEDGE\n|            |                      |                |         |\n|            |                      |MAP PREPARE HANDOVER      |\n|            |                      |<---------------|         |\n|            |MAP PREPARE SUBSEQUENT|    response    |         |\n|            |<---------------------|                |         |\n|            |HANDOVER response     |                |         |\n| RELOCATION |                      |                |         |\n|<-----------|                      |                |         |\n| COMMAND    |                      |                |         |\n|            |                      |                |         |\nFigure 61: Signalling for Subsequent Inter-MSC Relocation to third MSC (3G_MSC-B') execution(Positive outcome)\nPossible Negative outcomes:\na)\tuser error detected, or component rejection or dialogue abortion performed by 3G_MSC-B':\nRNS-A     3G-MSC-B               3G-MSC-A         3G-MSC-B'\n|            |                      |                |\n|            |                      |                |    RNS-B'\n|            |                      |MAP PREPARE HANDOVER      |\n|            |                      |response negative result  |\n|            |                      |MAP CLOSE       |         |\n|            |                      |<---------------|         |\n|            |                      |MAP U/P -ABORT  |         |\n|            |MAP PREPARE SUBSEQUENT|                |         |\n|            |<---------------------|                |         |\n|            |HANDOVER response negative             |         |\n| RELOCATION |result                |                |         |\n|<-----------|                      |                |         |\n| PREPARATION|                      |                |         |\n| FAILURE    |                      |                |         |\n|            |                      |                |         |\nb)\tradio resources allocation failure:\nRNS-A     3G-MSC-B               3G-MSC-A         3G-MSC-B'\n|            |                      |                |\n|            |                      |                |    RNS-B'\n|            |                      |                |         |\n|            |                      |                |RELOCATION\n|            |                      |                |<--------|\n|            |                      |                |FAILURE  |\n|            |                      |                |         |\n|            |                      |MAP PREPARE HANDOVER      |\n|            |                      |<---------------|         |\n|            |MAP PREPARE SUBSEQUENT| response       |         |\n|            |<---------------------|                |         |\n|            |HANDOVER response     |                |         |\n| RELOCATION |                      |                |         |\n|<-----------|                      |                |         |\n| PREPARATION|                      |                |         |\n| FAILURE    |                      |                |         |\n|            |                      |                |         |\nc)\tradio resources allocation partial failure (3G_MSC-A decides to reject the relocation):\nRNS-A     3G-MSC-B               3G-MSC-A         3G-MSC-B'\n|            |                      |                |\n|            |                      |                |    RNS-B'\n|            |                      |                |         |\n|            |                      |                |RELOCATION\n|            |                      |                |<--------|\n|            |                      |                |REQ ACK  |\n|            |                      |                |         |\n|            |                      |MAP PREPARE HANDOVER      |\n|            |                      |<---------------|         |\n|            |MAP PREPARE SUBSEQUENT| response       |         |\n|            |<---------------------|                |         |\n|            |HANDOVER response     |                |         |\n| RELOCATION |                      |                |         |\n|<-----------|                      |                |         |\n| PREPARATION|                      |                |         |\n| FAILURE    |                      |                |         |\n|            |                      |                |         |\nFigure 62: Signalling for Subsequent Inter-MSC Relocation to third MSC (3G_MSC-B') execution (Negative outcome)\nPositive outcome:\nRNS-A     3G-MSC-B               3G-MSC-A         3G-MSC-B'\n|            |                      |                |\n|            |                      |                |    RNS-B'\n|            |                      |                |         |\n|            |                      |                |RELOCATION\n|            |                      |                |<--------|\n|            |                      |                |COMPLETE |\n|            |                      |                |         |\n|            |                      |MAP SEND END SIGNAL       |\n|            |                      |<---------------|         |\n|            | MAP SEND END SIGNAL  |request         |         |\n|            |<---------------------|                |         |\n|            | response             |                |         |\n| IU RELEASE |                      |                |         |\n|<-----------|                      |                |         |\n| COMMAND    |                      |                |         |\nFigure 63: Signalling for Subsequent Inter-MSC Relocation to third MSC (3G_MSC-B') completion (Successful completion of the procedure)\nNegative outcome:\nRNS-A     3G-MSC-B               3G-MSC-A         3G-MSC-B'\n|            |                      |                |\n|RELOCATION  |                      |                |    RNS-B'\n|----------->|                      |                |         |\n|CANCEL      |MAP PROCESS ACCESS    |                |         |\n|            |--------------------->|                |         |\n|            |SIGNALLING request (Note 1)            |         |\n|            |                      |                |         |\n|            |                      |MAP U -ABORT    |         |\n|            |                      |--------------->|         |\n|            |MAP FORWARD ACCESS    |                |IU RELEASE\n|            |<---------------------|                |-------->|\n|RELOCATION  | SIGNALLING request   |                |COMMAND  |\n|<-----------|                      |                |         |\n|CANCEL ACK  |                      |                |         |\n|            |                      |                |         |\nFigure 64: Signalling for Subsequent Inter-MSC Relocation to third MSC (3G_MSC-B') completion (Unsuccessful completion of the procedure)\nNOTE:\tSpecific interworking case detailed below.\nThe specific interworking case in 3G_MSC-A compared to the clauses 4.8.1 and 4.8.2 occurs between RELOCATION FAILURE encapsulated in a Process Access Signalling from 3G_MSC-B and the abortion of the dialogue with 3G_MSC-B' in the case of relocation cancelled:\n----------------------------------------------------------------\n|   29.002                         29.002         |Notes\n--------┼-------------------------------------------------┼-----\nForward | MAP PROCESS-SIGNALLING                          |\nmessage |         request                                 |\n|                                                 |\n|         -an-APDU(                MAP U -ABORT   |  1\n|         RELOCATION CANCEL)                      |\n|                                                 |\n--------┼-------------------------------------------------┼-----\nPositive| MAP FORWARD-SIGNALLING                          |\nresult  |         request                                 |\n|         -an-APDU(                               |\n|         RELOCATION CANCEL ACK)                  |\n--------┼-------------------------------------------------┼-----\nNegative|                                                 |\nresult  |                                  MAP U/P -ABORT |  2\n|                                                 |\nNOTE 1:\tThe abortion of the dialogue triggers in 3G_MSC-B' the clearing of the circuit connection with 3G_MSC-A, if any, and of the Resources between 3G_MSC-B' and RNS-B'. The abortion of the dialogue ends the relocation procedure with 3G_MSC-B'.\nNOTE 2:\tThe abortion of the dialogue ends the relocation procedure with 3G_MSC-B.",
      "chunk_type": "general",
      "cross_references": [
        "clause_4.8.1",
        "figure_64",
        "figure_60",
        "figure_61",
        "figure_62",
        "figure_63",
        "ts_23.009"
      ]
    },
    {
      "chunk_id": "ts_29.010_4.8.4",
      "section_id": "4.8.4",
      "section_title": "RANAP Messages transfer on E-Interface",
      "content": "The following mapping applies to the encapsulation performed in 3G_MSC-A.\n----------------------------------------------------------------\n|   25.413                        29.002          |Notes\n--------┼-------------------------------------------------┼-----\nForward | RANAP messages     MAP FORWARD ACCESS SIGNALLING|\nmessage |                               request           |  1\n|                                                 |\n|                       -an-APDU (RANAP messages) |\n--------┼-------------------------------------------------┼-----\nPositive|                                                 |\nresult  |                                                 |  2\n--------┼-------------------------------------------------┼-----\nNegative|                                                 |\nresult  |                               MAP CLOSE         |\n|                               MAP U/P -ABORT    |\n|                                                 |\nNOTE 1:\tComplete RANAP messages to be sent on 3G_MSC-B - RNS-B interface are embedded into the an-APDU parameter.\nNOTE 2:\tThe Return Result does not apply. If 3G_MSC-B returns a message, this message will arrive in an Invoke: Process Access Signalling.\nThe following mapping applies to the encapsulation performed in 3G_MSC-B.\n----------------------------------------------------------------\n|   25.413                        29.002          |Notes\n--------┼-------------------------------------------------┼-----\nForward | RANAP messages     MAP PROCESS ACCESS SIGNALLING|\nmessage |                                request          |  1\n|                                                 |\n|                       -an-APDU (RANAP messages) |\n--------┼-------------------------------------------------┼-----\nPositive|                                                 |\nresult  |                                                 |  2\n--------┼-------------------------------------------------┼-----\nNegative|                                                 |\nresult  |                               MAP CLOSE         |\n| IU RELEASE COMMAND                              |\n|                                                 |\n| Unspecified failure           MAP U/P -ABORT    |  3\n|                                                 |\nNOTE 1:\tComplete RANAP messages to be sent to 3G_MSC-A are embedded into the an-APDU parameter.\nNOTE 2:\tThe Return Result does not apply. If 3G_MSC-A returns a message, this message will arrive in an Invoke: Forward Access Signalling.\nNOTE 3:\tThe abortion of the dialogue triggers the clearing of the circuit connection with 3G_MSC-A, if any, of the Radio Resources on the Iu-Interface and the release of the SCCP connection between 3G_MSC-B and RNS-B. The clearing of the Radio Resources (the clearing indication received from RNS-B is transmitted to 3G_MSC-A) or the loss of the SCCP connection between 3G_MSC-B and RNS-B, triggers in 3G_MSC-B the abortion of the dialogue on the E-Interface and the clearing of the circuit connection with 3G_MSC-A, if any.",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.010_4.8.5",
      "section_id": "4.8.5",
      "section_title": "Processing in 3G_MSC-B, and information transfer on E-interface",
      "content": "The following parameters require processing (e.g. to store the parameter, to internally generate the parameter) in 3G_MSC-B. The relevant RANAP procedures are mentioned to ease the comprehension, their detailed description is the scope of the TS 25.413. Each RANAP message being transferred on E-interface shall use the mechanisms given in clause 4.8.4 and is described in TS 25.413.",
      "chunk_type": "procedure",
      "cross_references": [
        "ts_25.413_clause_4.8.4",
        "ts_25.413"
      ]
    },
    {
      "chunk_id": "ts_29.010_4.8.5.1",
      "section_id": "4.8.5.1",
      "section_title": "Integrity Protection Information",
      "content": "A sequence of possible integrity protection algorithms can be sent to an RNS in Security Mode Command or Relocation Request. The RNS chooses one of the listed algorithms and reports this back to the 3G_MSC in Security Mode Complete or Relocation Request Acknowledge respectively.\n3G_MSC-B shall remove algorithms not allowed by 3G_MSC-B from the list of algorithms received from 3G_MSC-A before forwarding it to the RNS. The modified list of algorithms, the integrity protection key and the chosen algorithm shall be stored by 3G_MSC-B.\nTransfer of Information:\nIf integrity protection has not been performed before Inter-MSC Relocation, this will be controlled by 3G_MSC-A after the completion of Inter-MSC Relocation.\nIntegrity protection control towards 3G_MSC-B:\nIf Integrity protection has been performed before Inter-MSC Relocation:\n-\tin the Relocation Request RANAP message (information included).\nThe Relocation Request Acknowledge should in this case contain the indication of the chosen algorithm.\nIf Integrity protection has NOT been performed before Inter-MSC Relocation:\n-\tin the Security Mode Command procedure between 3G_MSC-A and 3G_MSC-B.",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.010_4.8.5.2",
      "section_id": "4.8.5.2",
      "section_title": "Encryption Information",
      "content": "A sequence of possible encryption algorithms can be sent to an RNS in Security Mode Command or Relocation Request. The RNS chooses one of the listed algorithms and reports this back to the 3G_MSC in Security Mode Complete or Relocation Request Acknowledge respectively.\n3G_MSC-B shall remove algorithms not allowed by MSC-B from the list of algorithms received from 3G_MSC-A before forwarding it to the RNS. The modified list of algorithms, the ciphering key and the chosen algorithm shall be stored by 3G_MSC-B, and the chosen value sent to 3G_MSC-A.\nTransfer of Information:\nIf ciphering has not been performed before Inter-MSC Relocation, this will be controlled by 3G_MSC-A after the completion of Inter-MSC Relocation.\nCiphering control towards 3G_MSC-B:\nIf Ciphering has been performed before Inter-MSC Relocation:\n-\tin the Relocation Request RANAP message (information included).\nThe Relocation Request Acknowledge should in this case contain the indication of the chosen algorithm.\nIf Ciphering has NOT been performed before Inter-MSC Relocation:\n-\tin the Security Mode Command procedure between 3G_MSC-A and 3G_MSC-B.",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.010_4.8.5.3",
      "section_id": "4.8.5.3",
      "section_title": "RAB Parameters",
      "content": "The parameters shall be stored by 3G_MSC-B to be used at internal Relocation in 3G_MSC-B.\nTransfer of information:\nReceived by 3G_MSC-B from 3G_MSC-A in:\n-\tThe Relocation Request RANAP message.\nIf a new type of resource is to be assigned after Inter-MSC Relocation, this can be made with:\n-\tThe RAB Assignment Request RANAP message.",
      "chunk_type": "parameter",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.010_4.8.5.4",
      "section_id": "4.8.5.4",
      "section_title": "Channel Type",
      "content": "Channel Type is GSM information that is required in BSSMAP Handover Request and BSSMAP Assignment Request, and it shall be provided by 3G_MSC-A. 3G_MSC-B needs this information in case of an intra-MSC UMTS to GSM handover after an inter-MSC relocation and subsequent assignment procedures. The Channel Type derived from the Bearer Capability that is available in 3G_MSC-A. This mapping is described in 3GPP TS 27.001 [8]. Therefore 3G_MSC-A must provide this information in case of an inter-MSC relocation. The Radio Resource Information IE in the MAP Prepare Handover message refers to the Channel Type GSM information.\nChannel Type shall be stored by 3G_MSC-B.\nTransfer of information:\nReceived by 3G_MSC-B from 3G_MSC-A in:\n-\tThe Prepare Handover Request MAP message.\n-\tThe Forward Access Signalling Request message.",
      "chunk_type": "requirement",
      "cross_references": [
        "ts_27.001"
      ]
    },
    {
      "chunk_id": "ts_29.010_4.8.5.5",
      "section_id": "4.8.5.5",
      "section_title": "Selected GSM Algorithm",
      "content": "After inter-MSC relocation, the 3G_MSC-B can perform intra-MSC UMTS to GSM handover. A sequence of possible encryption algorithms, received from the 3G_MSC-A, can be sent to an BSS in Handover Request or  in Cipher Mode Command in case of  cipher mode setting after intra.MSC-B handover from UMTS to GSM. The BSS chooses one of the listed algorithms and reports this back to the 3G_MSC in Handover Request Acknowledge or Cipher Mode Complete respectively. The MSC-B provides the Selected GSM algorithm information to the MSC-A. The Selected GSM algorithms IE in the MAP Process Access Signalling Request message refers to the Algorithm identifier octet in the Chosen Encryption Algorithm GSM information.\nThe chosen algorithm shall be stored by 3G_MSC-B, and sent to 3G_MSC-A.\nTransfer of Information:\nIf ciphering has not been performed before Inter-MSC Relocation, this will be controlled by 3G_MSC-A after the completion of Inter-MSC Relocation.\nIf Ciphering has been performed before Inter-MSC Relocation, Selected GSM algorithm information is received by 3G_MSC-A from 3G_MSC-B in:\n-\tThe Handover Performed BSSMAP message.\nIf Ciphering has NOT been performed before Intra-MSC-B handover from UMTS to GSM after Inter-MSC Relocation, Selected GSM algorithm information is received by 3G_MSC-A from 3G_MSC-B in:\n-\tThe Process Access Signalling Request MAP message.",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.010_4.8.5.6",
      "section_id": "4.8.5.6",
      "section_title": "Allowed GSM Algorithms",
      "content": "Allowed GSM algorithms is GSM information that is required in BSSMAP Handover Request and BSSMAP Cipher Mode Command, and shall be provided by 3G_MSC-A. 3G_MSC-B needs this information in case of an intra-MSC UMTS to GSM handover and in subsequent ciphering mode setting, after an inter-MSC relocation. Therefore 3G_MSC-A must provide this information in case of an inter-MSC relocation. The Allowed GSM algorithms IE in the MAP Prepare Handover and in the MAP Forward Access Signalling Request messages refers to the Algorithm identifier octet in the Permitted Algorithms GSM information.\nAllowed GSM algorithms shall be stored by 3G_MSC-B.\nTransfer of information:\nIf ciphering has not been performed before Inter-MSC Relocation, this will be controlled by 3G_MSC-A after the completion of Inter-MSC Relocation.\nCiphering control towards 3G_MSC-B:\nIf Ciphering has been performed before Inter-MSC Relocation:\n-\tThe Prepare Handover Request MAP message.\nIf Ciphering has NOT been performed before Inter-MSC Relocation:\n-\tThe Forward Access Signalling Request MAP message.",
      "chunk_type": "requirement",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.010_4.8.5.7",
      "section_id": "4.8.5.7",
      "section_title": "Chosen Channel",
      "content": "BSSMAP Assignment Request may give the BSS some freedom in the selection of radio resource (for instance channel rate selection, speech version selection etc.). Chosen Channel and/or Speech Version is reported back to 3G_MSC-B in BSSMAP Assignment Complete. The Chosen Radio Resource Information IE in the MAP Prepare Handover Response and Process Access Signalling Request messages refers to the Chosen Channel and/or Speech Version GSM information.\nThe Channel Type and the characteristics of the chosen channel shall be stored by 3G_MSC-B, and the Chosen Channel and/or Speech Version information elements shall be transferred to MSC-A or 3G_MSC-A.\nTransfer of information:\nReceived by MSC-A or 3G_MSC-A from 3G_MSC-B in:\n-\tThe Prepare Handover Response MAP message\n-\tThe Process Access Signalling request MAP message",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.010_4.8.5.8",
      "section_id": "4.8.5.8",
      "section_title": "BSSMAP Service Handover",
      "content": "This information shall be stored by 3G_MSC-B and sent to a BSS in Handover Request, when 3G_MSC-B performs handover to GSM.\nTransfer of information:\nThe BSSMAP Service Handover information is transferred to 3G_MSC-B in:\n-\tthe Prepare Handover Request MAP message.\nIf a new assignment of a TCH after an inter-MSC relocation is to be performed, the BSSMAP Service Handover information is transferred to 3G_MSC-B in:\n-\tthe Forward Access Signalling Request MAP message\nand sent by 3G_MSC-B to the BSS in the Assignment Request BSSMAP message.",
      "chunk_type": "requirement",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.010_4.8.5.9",
      "section_id": "4.8.5.9",
      "section_title": "RANAP Service Handover",
      "content": "This information shall be stored by 3G_MSC-B and sent to an RNS in Relocation Request during the basic inter-MSC relocation or when 3G_MSC-B performs a subsequent intra-MSC relocation or handover to UMTS.\nTransfer of information:\nThe RANAP Service Handover information is transferred to 3G_MSC-B in:\n-\tthe Relocation Request RANAP message.\nIf a new assignment of a Radio Access Bearer after an inter-MSC relocation is to be performed, the information is transferred to 3G_MSC-B in:\n-\tthe RANAP RAB Assignment procedure.",
      "chunk_type": "requirement",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.010_4.8.5.10",
      "section_id": "4.8.5.10",
      "section_title": "GERAN Classmark",
      "content": "The GERAN Classmark shall be stored by 3G_MSC-B and can be received from MSC-A, from the serving BSS or serving RNS, or from the target RNS. The GERAN Classmark shall be used together with other parameters, e.g. the Channel Type, for selecting a service and for generating RAB parameters for relocation to GERAN Iu-mode, subsequent relocation or handover to GERAN Iu-mode, and RAB (re-)assignment when the MS is in GERAN Iu-mode.\nTransfer of Information due to GERAN Classmark received from MSC-A:\nReceived by 3G_MSC-B in:\n-\tthe Prepare Handover Request MAP message.\nTransfer of Information due to GERAN Classmark received from the serving RNS:\nReceived by 3G_MSC-B in:\n-\tthe Handover Required BSSMAP message;\n-\tthe Relocation Required RANAP message;\n-\tthe Initial UE RANAP message; or\n-\tthe RAB Assignment Response RANAP message.\nTransfer of Information due to GERAN Classmark received from the target RNS:\nReceived by 3G_MSC-B in:\n-\tthe Relocation Failure RANAP message.",
      "chunk_type": "requirement",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.010_4.8.5.11",
      "section_id": "4.8.5.11",
      "section_title": "SNA Access Information",
      "content": "This information shall be stored by 3G_MSC-B and sent to an RNS in the Relocation Request message when 3G_MSC-B performs handover to UMTS.\nTransfer of information:\nThe SNA Access Information is transferred to 3G_MSC-B in:\n-\tthe Relocation Request RANAP message encapsulated in the Prepare Handover request MAP message.",
      "chunk_type": "requirement",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.010_4.8.5.12",
      "section_id": "4.8.5.12",
      "section_title": "UESBI",
      "content": "This information shall be stored by 3G_MSC-B and sent to an RNS in Relocation Request during the basic inter-MSC relocation or when 3G_MSC-B performs a subsequent intra-MSC relocation or handover to UMTS.\nTransfer of information:\nThe UESBI information is transferred to 3G_MSC-B in:\n-\tthe Relocation Request RANAP message.",
      "chunk_type": "requirement",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.010_4.8.5.13",
      "section_id": "4.8.5.13",
      "section_title": "Alternative RAB Parameters Value",
      "content": "This information shall be stored by 3G_MSC-B and sent to an RNS in Relocation Request during the basic inter-MSC relocation or when 3G_MSC-B performs a subsequent intra-MSC relocation or handover to UMTS.\nTransfer of information:\nThe Alternative RAB Parameters Value information is transferred to 3G_MSC-B in:\n-\tthe Relocation Request RANAP message.\nIf an assignment of a Radio Access Bearer after an inter-MSC relocation is to be performed, the information is transferred to 3G_MSC-B in:\n-\tthe RAB Assignment Request RANAP message.",
      "chunk_type": "parameter",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.010_4.8.5.14",
      "section_id": "4.8.5.14",
      "section_title": "Trace parameters",
      "content": "This information shall be stored by 3G_MSC-B and 3G_MSC-B shall use this information for trace activation for MSC-S, MGW, RNC or BSC.\nTransfer of information:\nThe Trace Parameter List information for MSC-S, MGW and BSC tracing is transferred to 3G_MSC-B in:\n-\tthe Prepare Handover Request MAP message.\nThe Trace Propagation Parameter information for RNC tracing is transferred to 3G_MSC-B in:\n-\tthe CN Invoke Trace RANAP message.",
      "chunk_type": "parameter",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.010_4.8.6",
      "section_id": "4.8.6",
      "section_title": "Overview of the Technical Specifications 3GPP interworking for the Inter-MSC Relocation",
      "content": "╔══════════════════════════════════════════════════════════════════════════════════════════════════╗\n║ PSTN/ISDN                                                                                        ║\n║               ▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒                                 ║\n║               ▒       +---------------+                        ▒                                 ║\n║ ==============▒====== | ============= | ===============        ▒                                 ║\n║ UMTS          ▒       |               |                        ▒                                 ║\n║               ▒       V               V                        ▒                                 ║\n║ ▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒                                                ▒                                 ║\n║ ▒  RNS-A 3G-MSC-A 3G-MSC-B RNS-B       ▒     MS                          ║\n║ ▒                                                              ▒                                 ║\n║ ▒                 +-------+                                    ▒ +-------+                       ║\n║ ▒                 |  C M  |                24.008              ▒ |  C M  |                       ║\n║ ▒                 +-------|<------------------------------------>+-------|                       ║\n║ ▒ ░░░░░░░░░░░░░░░ |  M M  | ░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░▒  |  M M  |                       ║\n║ ▒ ░+------+25.413 +-------| 25.413+-------+ 25.413+-------+  ░▒  +-------|                       ║\n║ ▒ ░| R R  |<----->|  R R  |<=====>|  R R  |<----->|  R R  |  ░▒  |  R R  |                       ║\n║ ▒ ░+------+       +-------+       +-------+       +-------+  ░▒  +-------+                       ║\n║ ▒ ░                Λ   Λ             Λ   Λ                   ░▒                                  ║\n║ ▒ ░                |   |    29.010   |   |                   ░▒                                  ║\n║ ▒ ░                |   V             V   |                   ░▒                                  ║\n║ ▒ ░                |+-----+ 29.002+-----+|                   ░▒                                  ║\n║ ▒ ░                ||MAP/E|<----->|MAP/E||                   ░▒                                  ║\n║ ▒ ░                |+-----+       +-----+|             23.009░▒                                  ║\n║ ▒ ░░░░░░░░░░░░░░░░ | ░░░░░░░░░░░░░░░░░░░ | ░░░░░░░░░░░░░░░░░░░▒  Remark: The RRC interface and   ║\n║ ▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒ V ▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒ V ▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒          the link layer          ║\n║                   +-----------------------+                              protocols being out of  ║\n║                   |       T C A P         |                              the scope of this       ║\n║                   +-----------------------+                              Specification are not   ║\n║    +------------------------------------------------------+              shown here.             ║\n║    |                      S C C P                         |                                      ║\n║    +------------------------------------------------------+                                      ║\n║    +------------------------------------------------------+                                      ║\n║    |                        M T P                         |                                      ║\n║    +------------------------------------------------------+                                      ║\n╚══════════════════════════════════════════════════════════════════════════════════════════════════╝",
      "chunk_type": "definition",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.010_4.9",
      "section_id": "4.9",
      "section_title": "Location Services",
      "content": "The general principles of the location services procedures are given in Technical Specification 3GPP TS 23.271 [16].\n3GPP TS 29.010 gives the necessary information for interworking between the 3GPP TS 25.413 [7] RANAP protocol and the 3GPP TS 48.008 [12] BSSMAP protocol. The interworking is necessary for positioning requests issued after a completed GSM to UMTS inter system handover. BSSMAP messages carried by MAP over the E-interface must be mapped by the non-anchor 3G-MSC into the corresponding RANAP messages to be sent over the Iu-interface and vice versa.  For Inter-MSC GSM to GSM Handover and Inter-MSC UMTS to UMTS SRNS Relocation no mapping between the 3GPP TS 25.413 [7] RANAP protocol and the 3GPP TS 48.008 [12] BSSMAP protocol is necessary, but only the interworking with the MAP protocol over the E-interface needs to be described.",
      "chunk_type": "general",
      "cross_references": [
        "ts_23.271",
        "ts_29.010",
        "ts_25.413",
        "ts_48.008"
      ]
    },
    {
      "chunk_id": "ts_29.010_4.9.1.1",
      "section_id": "4.9.1.1",
      "section_title": "Inter-MSC Handover (GSM to GSM)",
      "content": "After a successful Inter-MSC handover, any positioning request received by the anchor MSC via the MAP message Provide Subscriber Location triggers the BSSMAP procedure Location Acquisition described in 3GPP TS 48.008 [12]. For handover this procedure is executed according to GSM 3GPP TS 49.008 [14] with the anchor MSC playing the role of the MSC and the non anchor MSC playing the role of the BSS.\nThe needed BSSMAP signalling is sent over the E-interface encapsulated in the MAP messages Process Access Signalling and Forward Access Signalling.\nAt the non anchor MSC the BSSMAP messages received  from the anchor MSC are forwarded to the BSS, and the BSSMAP messages received from the BSS are sent over the E-interface to the anchor MSC.\nThe signalling for a completed Location Acquisition procedure is shown in figures 65a.\nGMLC           MSC-A                   MSC-B\n|               |                         |\n|MAP PROVIDE    |                         |\n|SUBSCRIBER     |                         |\n|LOCATION       |                         |\n|-------------->|MAP FORWARD ACCESS       |\n|               |    SIGNALLING           |\n|               |------------------------>|\n|               |  -an-APDU(              |\n|               |  PERFORM LOCATION       |\n|               |            REQUEST)     |\n|               |                         |\n|               |                         |                 BSS-B\n|               |                         |                   |      |               |                         |                   |\n|               |                         |------------------>|\n|               |                         |                   |\n|               |                         |  PERFORM LOCATION |\n|               |                         |          REQUEST  |\n|               |                         |                   |\n|               |                         |                   |\n|               |                         |         +-----------+\n|               |                         |         |Positioning|\n|               |                         |         |    is     |\n|               |                         |         | performed |\n|               |                         |         +-----------+\n|               |                         |                   |\n|               |                         |                   |       |               |                         |                   |\n|               |                         |<------------------|\n|               |                         |\n|               |                         | PERFORM LOCATION\n|               |                         |          RESPONSE\n|               |                         |\n|               |    MAP PROCESS ACCESS   |\n|               |    SIGNALLING           |\n|               |<------------------------|\n|               |  -an-APDU(              |\n|               |  PERFORM LOCATION       |\n|               |            RESPONSE)    |\n|MAP PROVIDE    |                         |\n|SUBSCRIBER     |                         |\n|LOCATION res   |                         |\n|<--------------|                         |\n|               |                         |\nFigure 65a: Signalling for a completed Location Acquisition procedure\nAfter the inter-MSC handover, the MSC-B can perform intra-MSC GSM to UMTS handover. Any positioning request received by the anchor MSC after completion of the intra-MSC GSM to UMTS handover is handled as for Inter-MSC Handover GSM to UMTS (see clause 4.9.1.2).",
      "chunk_type": "general",
      "cross_references": [
        "clause_4.9.1.2",
        "figure_65",
        "ts_48.008",
        "ts_49.008"
      ]
    },
    {
      "chunk_id": "ts_29.010_4.9.1.2",
      "section_id": "4.9.1.2",
      "section_title": "Inter-MSC Handover (GSM to UMTS)",
      "content": "After a successful Inter-MSC GSM to UMTS inter system handover, any positioning request received by the anchor MSC via the MAP message Provide Subscriber Location triggers the BSSMAP procedure Location Acquisition described in 3GPP TS 48.008 [12]. For handover this procedure is executed according to 3GPP TS 49.008 [14] with the anchor MSC playing the role of the MSC and the non anchor 3G MSC playing the role of the BSS.\nThe needed BSSMAP signalling is sent over the E-interface encapsulated in the MAP messages Process Access Signalling and Forward Access Signalling.\nAt the non anchor 3G MSC the BSSMAP messages received from the anchor MSC are mapped into the corresponding RANAP messages to be sent to the RNS, and the received RANAP messages are mapped into the corresponding BSSMAP messages to be sent over the E-interface to the anchor MSC.\nThe signalling for a completed Location Acquisition procedure is shown in figures 65b.\nGMLC         MSC-A                   3G-MSC-B\n|               |                         |\n|MAP PROVIDE    |                         |\n|SUBSCRIBER     |                         |\n|LOCATION       |                         |\n|-------------->|MAP FORWARD ACCESS       |\n|               |    SIGNALLING           |\n|               |------------------------>|\n|               |  -an-APDU(              |\n|               |  PERFORM LOCATION       |\n|               |            REQUEST)     |\n|               |                         |\n|               |                         |                RNS-B\n|               |                         |                   |\n|               |                         |LOCATION REPORTING |\n|               |                         |  CONTROL          |\n|               |                         |------------------>|\n|               |                         |                   |\n|               |                         |         +-----------+\n|               |                         |         |Positioning|\n|               |                         |         |    is     |\n|               |                         |         | performed |\n|               |                         |         +-----------+\n|               |                         |                   |\n|               |                         |LOCATION REPORT    |\n|               |                         |<------------------|\n|               |MAP PROCESS ACCESS       |\n|               |    SIGNALLING           |\n|               |<------------------------|\n|               |  -an-APDU(              |\n|               |  PERFORM LOCATION       |\n|               |            RESPONSE)    |\n|MAP PROVIDE    |                         |\n|SUBSCRIBER     |                         |\n|LOCATION res   |                         |\n|<--------------|                         |\n|               |                         |\nFigure 65b: Signalling for a completed Location Acquisition procedure\nThe interworking between the BSSMAP location aquisition messages in MAP and the RANAP location reporting messages is as follows:\n----------------------------------------------------------------\n|   29.002                         25.413         |Notes\n--------┼-------------------------------------------------┼-----\nForward | MAP FORWARD ACCESS SIG.    LOCATION REPORTING   |\nmessage |     request                  CONTROL            |\n|                                                 |\n| -an-APDU(                                       |\n| PERFORM LOCATION REQUEST)                       |\n|                                                 |\n| BSSMAP information      RANAP information       |\n|      elements:              elements:           |\n|                                                 |\n|   Location Type           Request Type          |  1\n|    >Current Geographic     >Event = Direct      |\n|        Location            >Report Area =       |\n|                                Geo. Coord.      |\n|                                                 |\n|   Cell Identifier         ----                  |\n|   Classmark Inf. Type3    ----                  |\n|   LCS Client Type         ----                  |\n|   Chosen Channel          ----                  |\n|   LCS Priority            ----                  |\n|   LCS QoS                 Request Type          |\n|    >Horizontal Accuracy    >Accuracy Code       |\n|                                                 |\n|   GPS Assistance Data     ----                  |\n|   APDU                    ----                  |\n|                                                 |\n--------┼-------------------------------------------------┼-----\nResult  | MAP PROCESS ACCESS SIG.   LOCATION REPORT       |\n|     request                                     |\n| -an-APDU(                                       |\n| PERFORM LOCATION RESPONSE)                      |\n|                                                 |\n| BSSMAP information      RANAP information       |\n|      elements:              elements:           |\n|                                                 |\n|                                                 |\n|   Location Estimate       Area Identity         |\n|                            >Geographical Area   |\n|   Positioning Data        ----                  |\n|   Deciphering Keys        ----                  |\n|   LCS Cause               Cause                 |\n|   ----                    Request Type          |\n|                                                 |\n|                                                 |\nNOTE 1:\tAll other Location Type possibilities are not supported by UMTS positioning\nAfter the inter-MSC GSM to UMTS handover, the 3G MSC-B can perform intra-MSC UMTS to GSM handover. Any positioning request received by the anchor MSC after completion of the intra-MSC UMTS to GSM handover is handled as for Inter-MSC Handover GSM to GSM (see clause 4.9.1.1).",
      "chunk_type": "general",
      "cross_references": [
        "clause_4.9.1.1",
        "figure_65",
        "ts_48.008",
        "ts_49.008"
      ]
    },
    {
      "chunk_id": "ts_29.010_4.9.1.3",
      "section_id": "4.9.1.3",
      "section_title": "Inter-MSC Handover (UMTS to GSM)",
      "content": "After a successful Inter-MSC UMTS to GSM inter system handover, any positioning request received by the anchor 3G-MSC via the MAP message Provide Subscriber Location triggers the BSSMAP procedure Location Acquisition described in 3GPP TS 48.008 [12]. For handover this procedure is executed according to 3GPP TS 49.008 [14] with the anchor 3G-MSC playing the role of the 3G-MSC and the non anchor MSC playing the role of the BSS.\nThe needed BSSMAP signalling is sent over the E-interface encapsulated in the MAP messages Process Access Signalling and Forward Access Signalling.\nAt the non anchor MSC the BSSMAP messages received  from the anchor 3G-MSC are forwarded to the BSS, and the BSSMAP messages received from the BSS are sent over the E-interface to the anchor 3G-MSC.\nThe signalling for a completed Location Acquisition procedure is shown in figures 65c.\nGMLC         3G-MSC-A                   MSC-B\n|               |                         |\n|MAP PROVIDE    |                         |\n|SUBSCRIBER     |                         |\n|LOCATION       |                         |\n|-------------->|MAP FORWARD ACCESS       |\n|               |    SIGNALLING           |\n|               |------------------------>|\n|               |  -an-APDU(              |\n|               |  PERFORM LOCATION       |\n|               |            REQUEST)     |\n|               |                         |\n|               |                         |                 BSS-B\n|               |                         |                   |     |               |                         |                   |\n|               |                         |------------------>|\n|               |                         |                   |\n|               |                         |  PERFORM LOCATION |\n|               |                         |          REQUEST  |\n|               |                         |                   |\n|               |                         |                   |\n|               |                         |         +-----------+\n|               |                         |         |Positioning|\n|               |                         |         |    is     |\n|               |                         |         | performed |\n|               |                         |         +-----------+\n|               |                         |                   |\n|               |                         |                   |       |               |                         |                   |\n|               |                         |<------------------|\n|               |                         |\n|               |                         | PERFORM LOCATION\n|               |                         |          RESPONSE\n|               |                         |\n|               |    MAP PROCESS ACCESS   |\n|               |    SIGNALLING           |\n|               |<------------------------|\n|               |  -an-APDU(              |\n|               |  PERFORM LOCATION       |\n|               |            RESPONSE)    |\n|MAP PROVIDE    |                         |\n|SUBSCRIBER     |                         |\n|LOCATION res   |                         |\n|<--------------|                         |\n|               |                         |\nFigure 65c: Signalling for a completed Location Acquisition procedure\nAfter the inter-MSC UMTS to GSM handover, the 3G MSC-B can perform intra-MSC GSM to UMTS handover. Any positioning request received by the anchor 3G MSC after completion of the intra-MSC GSM to UMTS handover is handled as for Inter-MSC Handover GSM to UMTS (see clause 4.9.1.2).",
      "chunk_type": "general",
      "cross_references": [
        "clause_4.9.1.2",
        "figure_65",
        "ts_48.008",
        "ts_49.008"
      ]
    },
    {
      "chunk_id": "ts_29.010_4.9.1.4",
      "section_id": "4.9.1.4",
      "section_title": "Inter-MSC SRNS Relocation",
      "content": "After a successful Inter-MSC SRNS Relocation, any positioning request received by the anchor 3G-MSC via the MAP message Provide Subscriber Location triggers the RANAP procedure Location Reporting Control described in TS 25.413. For handover this procedure is executed according to 23.009 with the anchor 3G-MSC playing the role of the 3G-MSC and the non anchor 3G-MSC playing the role of the RNS.\nThe needed RANAP signalling is sent over the E-interface encapsulated in the MAP messages Process Access Signalling and Forward Access Signalling.\nAt the non anchor 3G-MSC the RANAP messages received from the anchor 3G-MSC are forwarded to the RNS, and the RANAPmessages received from the RNS are sent over the E-interface to the anchor 3G-MSC.\nThe signalling for a completed Location Acquisition procedure is shown in figures 65d.\nGMLC         3G-MSC-A                  3G-MSC-B\n|               |                         |\n|MAP PROVIDE    |                         |\n|SUBSCRIBER     |                         |\n|LOCATION       |                         |\n|-------------->|MAP FORWARD ACCESS       |\n|               |    SIGNALLING           |\n|               |------------------------>|\n|               |  -an-APDU(              |\n|               |  LOCATION REPORTING     |\n|               |            CONTROL)     |\n|               |                         |\n|               |                         |                 RNS-B\n|               |                         |                   |      |               |                         |                   |\n|               |                         |------------------>|\n|               |                         |                   |\n|               |                         |LOCATION REPORTING |\n|               |                         |  CONTROL          |\n|               |                         |                   |\n|               |                         |                   |\n|               |                         |         +-----------+\n|               |                         |         |Positioning|\n|               |                         |         |    is     |\n|               |                         |         | performed |\n|               |                         |         +-----------+\n|               |                         |                   |\n|               |                         |                   |       |               |                         |                   |\n|               |                         |<------------------|\n|               |                         |\n|               |                         |LOCATION REPORT\n|               |                         |\n|               |                         |\n|               |    MAP PROCESS ACCESS   |\n|               |    SIGNALLING           |\n|               |<------------------------|\n|               |  -an-APDU(              |\n|               |  LOCATION REPORT)       |\n|               |                         |\n|MAP PROVIDE    |                         |\n|SUBSCRIBER     |                         |\n|LOCATION res   |                         |\n|<--------------|                         |\n|               |                         |\nFigure 65d: Signalling for a completed Location Acquisition procedure\nAfter the inter-MSC SRNS Relocation, the 3G MSC-B can perform intra-MSC UMTS to GSM handover. Any positioning request received by the anchor 3G MSC after completion of the intra-MSC UMTS to GSM requires that at the non anchor 3G MSC the received RANAP messages are mapped into the corresponding BSSMAP messages to be sent to the BSS, and the received BSSMAP messages are mapped into the corresponding RANAP messages to be sent over the E-interface to the anchor 3G-MSC.\nThe signalling for a completed Location Acquisition procedure is shown in figures 65e.\nGMLC         3G-MSC-A                  3G-MSC-B\n|               |                         |\n|MAP PROVIDE    |                         |\n|SUBSCRIBER     |                         |\n|LOCATION       |                         |\n|-------------->|MAP FORWARD ACCESS       |\n|               |    SIGNALLING           |\n|               |------------------------>|\n|               |  -an-APDU(              |\n|               |  LOCATION REPORTING     |\n|               |            CONTROL)     |\n|               |                         |\n|               |                         |                 BSS-B\n|               |                         |                   |      |               |                         |                   |\n|               |                         |------------------>|\n|               |                         |                   |\n|               |                         |PERFORM LOCATION   |\n|               |                         |  REQUEST          |\n|               |                         |                   |\n|               |                         |                   |\n|               |                         |         +-----------+\n|               |                         |         |Positioning|\n|               |                         |         |    is     |\n|               |                         |         | performed |\n|               |                         |         +-----------+\n|               |                         |                   |\n|               |                         |                   |       |               |                         |                   |\n|               |                         |<------------------|\n|               |                         |\n|               |                         |PERFORM LOCATION\n|               |                         |   RESPONSE\n|               |                         |\n|               |    MAP PROCESS ACCESS   |\n|               |    SIGNALLING           |\n|               |<------------------------|\n|               |  -an-APDU(              |\n|               |  LOCATION REPORT)       |\n|               |                         |\n|MAP PROVIDE    |                         |\n|SUBSCRIBER     |                         |\n|LOCATION res   |                         |\n|<--------------|                         |\n|               |                         |\nFigure 65e: Signalling for a completed Location Acquisition procedure\nthe interworking between the RANAP messages encapsulated in MAP and the BSSMAP messages is as follows:\n----------------------------------------------------------------\n|   29.002                         48.008          |Notes\n--------┼-------------------------------------------------┼-----\nForward | MAP FORWARD ACCESS SIG.    PERFORM LOCATION     |\nmessage |     request                  REQUEST            |\n|                                                 |\n| -an-APDU(                                       |\n| LOCATION REPORTING CONTROL)                     |\n|                                                 |\n| RANAP information       BSSMAP information      |\n|      elements:              elements:           |\n|                                                 |\n|   Request Type           Location Type          |\n|     >Event = Direct        >Current Geographic  |\n|     >Report Area =          Location            |\n|         Geo. Coord.                             |\n|                                                 |\n|   Request Type           LCS QoS                |\n|     >Accuracy Code         >Horizontal Accuracy |\n|                                                 |\n--------┼-------------------------------------------------┼-----\nResult  | MAP PROCESS ACCESS SIG.   PERFORM LOCATION      |\n|     request                 RESPONSE            |\n| -an-APDU(                                       |\n| LOCATION REPORT)                                |\n|                                                 |\n| RANAP information        BSSMAP information     |\n|      elements:                elements:         |\n|                                                 |\n|   Area Identity           Location Estimate     |\n|     >Geographical Area                          |\n|                                                 |\n|   Cause                   LCS Cause             |\n|   Request Type            ----                  |\n|                                                 |",
      "chunk_type": "general",
      "cross_references": [
        "figure_65",
        "ts_25.413"
      ]
    },
    {
      "chunk_id": "ts_29.010_4.9.2.1",
      "section_id": "4.9.2.1",
      "section_title": "Inter-MSC Handover (GSM to GSM)",
      "content": "When a mobile station is handed over from GSM to GSM, no mapping of cause codes is required.  The MSC shall use the cause codes specified in 3GPP TS 48.008 [12].\nAfter the inter-MSC handover, the MSC-B can perform intra-MSC GSM to UMTS handover. A mapping of the cause codes used in the RANAP and the BSSMAP protocols is needed after completion of the intra-MSC GSM to UMTS handover and is the same as for Inter-MSC Handover GSM to UMTS (see clause 4.9.2.2)..",
      "chunk_type": "requirement",
      "cross_references": [
        "clause_4.9.2.2",
        "ts_48.008"
      ]
    },
    {
      "chunk_id": "ts_29.010_4.9.2.2",
      "section_id": "4.9.2.2",
      "section_title": "Inter-MSC Handover (GSM to UMTS)",
      "content": "When a Mobile Station is handed over between GSM and UMTS, a mapping of the cause codes used in the RANAP and the BSSMAP protocols is needed. The mapping described here is applicable to the BSSMAP protocol even when used inside MAP in the E-interface.\nThe mapping between the cause codes received in RANAP Location Report and the LCS cause codes sent in BSSMAP Perform Location Response is as follows:\n----------------------------------------------------------------\n25.413                         48.008              |Notes\n-------------------------------------------------------┼--------\nLOCATION REPORT              PERFORM LOCATION RESPONSE |\n|\n- Requested Report Type      - Position method failure|\nnot Supported                                     |\n- Requested Information      - Position method failure|\nnot Available                                     |\n- all other cause codes      - System Failure         |\nAfter the inter-MSC GSM to UMTS handover, the 3G MSC-B can perform intra-MSC UMTS to GSM handover. No mapping of cause codes is required after completion of the intra-MSC UMTS to GSM handover as for Inter-MSC Handover GSM to GSM (see clause 4.9.2.1).",
      "chunk_type": "general",
      "cross_references": [
        "clause_4.9.2.1"
      ]
    },
    {
      "chunk_id": "ts_29.010_4.9.2.3",
      "section_id": "4.9.2.3",
      "section_title": "Inter-MSC Handover (UMTS to GSM)",
      "content": "When a mobile station is handed over from UMTS to GSM, no mapping of cause codes is required.  The 3G-MSC shall use the cause codes specified in 3GPP TS 48.008 [12].\nAfter the inter-MSC UMTS to GSM handover, the 3G MSC-B can perform intra-MSC GSM to UMTS handover. A mapping of the cause codes used in the RANAP and the BSSMAP protocols is needed after completion of the intra-MSC GSM to UMTS handover and is the same as for Inter-MSC Handover GSM to UMTS (see clause 4.9.2.2)...",
      "chunk_type": "requirement",
      "cross_references": [
        "clause_4.9.2.2",
        "ts_48.008"
      ]
    },
    {
      "chunk_id": "ts_29.010_4.9.2.4",
      "section_id": "4.9.2.4",
      "section_title": "Inter-MSC SRNS Relocation",
      "content": "When a mobile station is handed over from UMTS to UMTS, no mapping of cause codes is required.   Both 3G-MSCs shall use the cause codes specified in TS 25.413.\nAfter the inter-MSC SRNS Relocation, the 3G MSC-B can perform intra-MSC UMTS to GSM handover. A mapping of the cause codes used in the RANAP and the BSSMAP protocols is needed after completion of the intra-MSC UMTS to GSM handover.\nThe mapping between the cause codes received in BSSMAP Perform Location Response and the LCS cause codes sent in RANAP Location Report is as follows:\n----------------------------------------------------------------\n48.008                         25.413              |Notes\n-------------------------------------------------------┼--------\nPERFORM LOCATION RESPONSE    LOCATION REPORT           |\n|\n- Position method failure    - Requested Report Type  |\nnot Supported        |\n- System Failure             - Unspecified Failure    |\n- Protocol Error             - Unspecified Failure    |\n- Data missing               - Unspecified Failure    |\nin position request                               |\n- Unexpected data value      - Unspecified Failure    |\nin position request                               |\n- Target MS Unreachable      - Unspecified Failure    |\n- Location request aborted   - Unspecified Failure    |\n- Facility not supported     - Requested Report Type  |\nnot Supported        |\n- Inter-BSC Handover Ongoing - Unspecified Failure    |\n- Intra-BSC                  - Unspecified Failure    |\nHandover Complete                                 |\n- Congestion                 - Unspecified Failure    |\n- Unspecified                - Unspecified Failure    |",
      "chunk_type": "requirement",
      "cross_references": [
        "ts_25.413"
      ]
    },
    {
      "chunk_id": "ts_29.010_4.9.3.1",
      "section_id": "4.9.3.1",
      "section_title": "Inter-MSC Handover (GSM to GSM)",
      "content": "When for any reason the on going location acquisition procedure needs to be aborted, the anchor MSC sends the BSSMAP message Perform Location Abort over the E-interface.\nFigure 66a shows the signalling for an aborted Location Acquisition procedure.\nGMLC           MSC-A                    MSC-B\n|               |                         |\n|MAP PROVIDE    |                         |\n|SUBSCRIBER     |                         |\n|LOCATION       |                         |\n|-------------->|MAP FORWARD ACCESS       |\n|               |    SIGNALLING           |\n|               |------------------------>|\n|               |  -an-APDU(              |\n|               |  PERFORM LOCATION       |\n|               |            REQUEST)     |\n|               |                         |\n|               |                         |                  BSS-B\n|               |                         |                     |\n|               |                         |                     |\n|               |                         |                     |\n|               |                         |-------------------->|\n|               |                         |                     |\n|               |                         |    PERFORM LOCATION |\n|               |                         |             REQUEST)|\n|               |                         |                     |\n|               |                         |                     |\n|               |MAP FORWARD ACCESS       |                     |\n|               |    SIGNALLING           |                     |\n|               |------------------------>|                     |\n|               |  -an-APDU(              |                     |\n|               |  PERFORM LOCATION ABORT)|                     |\n|               |                         |                     |\n|               |                         |                     |\n|               |                         |                     |\n|               |                         |                     |\n|               |                         |-------------------->|\n|               |                         |                     |\n|               |                         |    PERFORM LOCATION |\n|               |                         |             ABORT   |     |               |                         |                     |\n|               |                         |<--------------------|            |               |                         |                     |\n|               |                         |    PERFORM LOCATION |\n|               |                         |          RESPONSE   |                |               |                         |                     |\n|               |                         |                     |\n|               |                         |                     |\n|               |MAP PROCESS ACCESS       |                     |\n|               |    SIGNALLING           |                     |\n|               |<------------------------|                     |\n|               |  -an-APDU(              |                     |\n|               |  PERFORM LOCATION       |                     |\n|               |             RESPONSE)   |                     |\nFigure 66a: Signalling for an aborted Location Acquisition procedure\nAfter the inter-MSC handover, the MSC-B can perform intra-MSC GSM to UMTS handover. A positioning request that needs to be aborted by the anchor MSC after completion of the intra-MSC GSM to UMTS handover is handled as for Inter-MSC Handover GSM to UMTS (see clause 4.9.3.2).",
      "chunk_type": "general",
      "cross_references": [
        "clause_4.9.3.2",
        "figure_66"
      ]
    },
    {
      "chunk_id": "ts_29.010_4.9.3.2",
      "section_id": "4.9.3.2",
      "section_title": "Inter-MSC Handover (GSM to UMTS)",
      "content": "When for any reason the on going location acquisition procedure needs to be aborted, the anchor MSC sends the BSSMAP message Perform Location Abort over the E-interface.\nFigure 66b shows the signalling for an aborted Location Acquisition procedure.\nGMLC         MSC-A                   3G-MSC-B\n|               |                         |\n|MAP PROVIDE    |                         |\n|SUBSCRIBER     |                         |\n|LOCATION       |                         |\n|-------------->|MAP FORWARD ACCESS       |\n|               |    SIGNALLING           |\n|               |------------------------>|\n|               |  -an-APDU(              |\n|               |  PERFORM LOCATION       |\n|               |            REQUEST)     |\n|               |                         |\n|               |                         |                RNS-B\n|               |                         |                   |\n|               |                         |LOCATION REPORTING |\n|               |                         |  CONTROL          |\n|               |                         |------------------>|\n|               |                         |                   |\n|               |                         |                   |\n|               |MAP FORWARD ACCESS       |                   |\n|               |    SIGNALLING           |                   |\n|               |------------------------>|                   |\n|               |  -an-APDU(              |                   |\n|               |  PERFORM LOCATION ABORT)|                   |\n|               |                         |                   |\n|               |                         |                   |\n|               |                         |LOCATION REPORTING |\n|               |                         |  CONTROL          |\n|               |                         |------------------>|\n|               |                         |                   |\n|               |                         |                   |\n|               |                         |LOCATION REPORT    |\n|               |                         |                   |\n|               |                         |<------------------|\n|               |                         |                   |\n|               |                         |                   |\n|               |                         |                   |\n|               |MAP PROCESS ACCESS       |                   |\n|               |    SIGNALLING           |                   |\n|               |<------------------------|                   |\n|               |  -an-APDU(              |                   |\n|               |  PERFORM LOCATION       |                   |\n|               |             RESPONSE)   |                   |\nFigure 66b: Signalling for an aborted Location Acquisition procedure\nThe interworking between the BSSMAP location aquisition messages in MAP and the RANAP location reporting messages is as follows:\n----------------------------------------------------------------\n|   29.002                         25.413         |Notes\n--------┼-------------------------------------------------┼-----\nForward | MAP FORWARD ACCESS SIG.    LOCATION REPORTING   |\nmessage |     request                  CONTROL            |\n|                                                 |\n| -an-APDU(                                       |\n| PERFORM LOCATION ABORT)                         |\n|                                                 |\n| BSSMAP information      RANAP information       |\n|      elements:              elements:           |\n|                                                 |\n|   LCS Cause               Request Type          |\n|                            >Event = Stop        |\n|                            >Report Area =       |\n|                                Geo. Coord.      |\n|                                                 |\n|                                                 |\n--------┼-------------------------------------------------┼-----\nResult  | MAP PROCESS ACCESS SIG.     LOCATION REPORT     |\n|     request                                     | 1\n| -an-APDU(                                       |\n| PERFORM LOCATION RESPONSE)                      |\n|                                                 |\n| BSSMAP information      RANAP information       |\n|      elements:              elements:           |\n|                                                 |\n|   ----                                          |\n|   LCS Cause               Cause                 |\n|   ----                                          |\n|                                                 |\nNOTE 1:\tPERFORM LOCATION RESPONSE with LCS cause shall be generated by 3G-MSC-B.\nAfter the inter-MSC GSM to UMTS handover, the 3G MSC-B can perform intra-MSC UMTS to GSM handover. A positioning request that needs to be aborted by the anchor MSC after completion of the intra-MSC UMTS to GSM handover is handled as for Inter-MSC Handover GSM to GSM (see clause 4.9.3.1).",
      "chunk_type": "general",
      "cross_references": [
        "clause_4.9.3.1",
        "figure_66"
      ]
    },
    {
      "chunk_id": "ts_29.010_4.9.3.3",
      "section_id": "4.9.3.3",
      "section_title": "Inter-MSC Handover (UMTS to GSM)",
      "content": "When for any reason the on going location acquisition procedure needs to be aborted, the anchor 3G-MSC sends the BSSMAP message Perform Location Abort over the E-interface.\nFigure 66c shows the signalling for an aborted Location Acquisition procedure.\nGMLC         3G-MSC-A                   MSC-B\n|               |                         |\n|MAP PROVIDE    |                         |\n|SUBSCRIBER     |                         |\n|LOCATION       |                         |\n|-------------->|MAP FORWARD ACCESS       |\n|               |    SIGNALLING           |\n|               |------------------------>|\n|               |  -an-APDU(              |\n|               |  PERFORM LOCATION       |\n|               |            REQUEST)     |\n|               |                         |\n|               |                         |                  BSS-B\n|               |                         |                     |\n|               |                         |                     |\n|               |                         |                     |\n|               |                         |-------------------->|\n|               |                         |                     |\n|               |                         |    PERFORM LOCATION |\n|               |                         |             REQUEST)|\n|               |                         |                     |\n|               |                         |                     |\n|               |MAP FORWARD ACCESS       |                     |\n|               |    SIGNALLING           |                     |\n|               |------------------------>|                     |\n|               |  -an-APDU(              |                     |\n|               |  PERFORM LOCATION ABORT)|                     |\n|               |                         |                     |\n|               |                         |                     |\n|               |                         |                     |\n|               |                         |                     |\n|               |                         |-------------------->|\n|               |                         |                     |\n|               |                         |    PERFORM LOCATION |\n|               |                         |             ABORT   |\n|               |                         |                     |\n|               |                         |<--------------------|\n|               |                         |    PERFORM LOCATION |\n|               |                         |          RESPONSE   |     |               |                         |                     |\n|               |MAP PROCESS ACCESS       |                     |\n|               |    SIGNALLING           |                     |\n|               |<------------------------|                     |\n|               |  -an-APDU(              |                     |\n|               |  PERFORM LOCATION       |                     |\n|               |             RESPONSE)   |                     |\nFigure 66c: Signalling for an aborted Location Acquisition procedure\nAfter the inter-MSC UMTS to GSM handover, the 3G MSC-B can perform intra-MSC GSM to UMTS handover. A positioning request that needs to be aborted by the anchor 3G MSC after completion of the intra-MSC GSM to UMTS handover is handled as for Inter-MSC Handover GSM to UMTS (see clause 4.9.3.2)..",
      "chunk_type": "general",
      "cross_references": [
        "clause_4.9.3.2",
        "figure_66"
      ]
    },
    {
      "chunk_id": "ts_29.010_4.9.3.4",
      "section_id": "4.9.3.4",
      "section_title": "Inter-MSC SRNS Relocation",
      "content": "When for any reason the on going location acquisition procedure needs to be aborted, the anchor 3G-MSC sends the RANAP message Location Reporting Control over the E-interface.\nFigure 66d shows the signalling for an aborted Location Acquisition procedure.\nGMLC         3G-MSC-A                  3G-MSC-B\n|               |                         |\n|MAP PROVIDE    |                         |\n|SUBSCRIBER     |                         |\n|LOCATION       |                         |\n|-------------->|MAP FORWARD ACCESS       |\n|               |    SIGNALLING           |\n|               |------------------------>|\n|               |  -an-APDU(              |\n|               |  LOCATION REPORTING     |\n|               |            CONTROL)     |\n|               |                         |\n|               |                         |                  RNS-B\n|               |                         |                     |\n|               |                         |                     |\n|               |                         |                     |\n|               |                         |-------------------->|\n|               |                         |                     |\n|               |                         | LOCATION REPORTING  |\n|               |                         |   CONTROL           |\n|               |                         |                     |\n|               |                         |                     |\n|               |MAP FORWARD ACCESS       |                     |\n|               |    SIGNALLING           |                     |\n|               |------------------------>|                     |\n|               |  -an-APDU(              |                     |\n|               |  LOCATION REPORTING     |                     |\n|               |    CONTROL = STOP)      |                     |\n|               |                         |                     |\n|               |                         |                     |\n|               |                         |                     |\n|               |                         |-------------------->|\n|               |                         |                     |\n|               |                         | LOCATION REPORTING  |\n|               |                         |  CONTROL =          |     |               |                         |         STOP DIRECT |\n|               |                         |                     |\n|               |                         |<--------------------|\n|               |                         |                     |\n|               |                         | LOCATION REPORT     |\n|               |                         |                     |\n|               |MAP PROCESS ACCESS       |                     |\n|               |    SIGNALLING           |                     |\n|               |<------------------------|                     |\n|               |  -an-APDU(              |                     |\n|               |  LOCATION REPORT)       |                     |\n|               |                         |                     |\nFigure 66d: Signalling for an aborted Location Acquisition procedure\nAfter the inter-MSC SRNS Relocation, the 3G MSC-B can perform intra-MSC UMTS to GSM handover. A positioning request that needs to be aborted by the anchor 3G MSC after completion of the intra-MSC UMTS to GSM requires that at the non anchor 3G MSC the received RANAP messages are mapped into the corresponding BSSMAP messages to be sent to the BSS, and the received BSSMAP messages are mapped into the corresponding RANAP messages to be sent over the E-interface to the anchor 3G-MSC.\nThe signalling for a completed Location Acquisition procedure is shown in figures 65e.\nGMLC         3G-MSC-A                  3G-MSC-B\n|               |                         |\n|MAP PROVIDE    |                         |\n|SUBSCRIBER     |                         |\n|LOCATION       |                         |\n|-------------->|MAP FORWARD ACCESS       |\n|               |    SIGNALLING           |\n|               |------------------------>|\n|               |  -an-APDU(              |\n|               |  LOCATION REPORTING     |\n|               |            CONTROL)     |\n|               |                         |\n|               |                         |                 BSS-B\n|               |                         |                   |      |               |                         |                   |\n|               |                         |------------------>|\n|               |                         |                   |\n|               |                         |PERFORM LOCATION   |\n|               |                         |  ABORT            |\n|               |                         |                   |\n|               |                         |                   |\n|               |                         |                   |\n|               |                         |<------------------|\n|               |                         |                   |\n|               |                         |PERFORM LOCATION   |\n|               |                         |   RESPONSE        |\n|               |                         |\n|               |    MAP PROCESS ACCESS   |\n|               |    SIGNALLING           |\n|               |<------------------------|\n|               |  -an-APDU(              |\n|               |  LOCATION REPORT)       |\n|               |                         |\n|MAP PROVIDE    |                         |\n|SUBSCRIBER     |                         |\n|LOCATION res   |                         |\n|<--------------|                         |\n|               |                         |\nFigure 65e: Signalling for an aborted Location Acquisition procedure\nthe interworking between the RANAP messages encapsulated in MAP and the BSSMAP messages is as follows:\n----------------------------------------------------------------\n|   29.002                         48.008         |Notes\n--------┼-------------------------------------------------┼-----\nForward | MAP FORWARD ACCESS SIG.    PERFORM LOCATION     |\nmessage |     request                  ABORT              |\n|                                                 |\n| -an-APDU(                                       |\n| LOCATION REPORTING CONTROL)                     |\n|                                                 |\n| RANAP information       BSSMAP information      |\n|      elements:              elements:           |\n|                                                 |\n|  Request Type             LCS Cause             |\n|    >Event = Stop Direct     > Location request  |\n|    >Report Area =             aborted           |\n|         Geo. Coord.                             |\n|                                                 |\n--------┼-------------------------------------------------┼-----\nResult  | MAP PROCESS ACCESS SIG.   PERFORM LOCATION      |\n|     request                 RESPONSE            |\n| -an-APDU(                                       |\n| LOCATION REPORT)                                |\n|                                                 |\n| RANAP information      BSSMAP information       |\n|      elements:              elements:           |\n|                                                 |\n|   Cause                 LCS Cause               |\n|     >Unspecified           > Location request   |\n|        Failure               aborted            |\n|                                                 |",
      "chunk_type": "general",
      "cross_references": [
        "figure_66",
        "figure_65"
      ]
    },
    {
      "chunk_id": "ts_29.010_4.9.4.1",
      "section_id": "4.9.4.1",
      "section_title": "Inter-MSC Handover (GSM to GSM)",
      "content": "After a successful Inter-MSC handover, any request of Assistance Data or De-ciphering keys received by the non anchor MSC via the DTAP message LCS-MOLR is forwarded to the anchor MSC by encapsulating the DTAP message into the MAP messages Process Access Signalling. The anchor MSC triggers the BSSMAP procedure Location Acquisition described in 3G TS 48.008. For handover this procedure is executed according to 3G TS 49.008 with the anchor MSC playing the role of the MSC and the non anchor MSC playing the role of the BSS.\nThe needed BSSMAP signalling is sent over the E-interface encapsulated in the MAP messages Process Access Signalling and Forward Access Signalling.\nAt the non anchor MSC the BSSMAP messages received from the anchor MSC are forwarded to the BSS, and the BSSMAP messages received from the BSS are sent over the E-interface to the anchor MSC.\nOnce the BSSMAP procedure has been completed, the anchor MSC sends the DTAP message LCS-MOLR Response encapsulated in the MAP message Forward Access Signalling to the non anchor MSC, which relays it to the MS.\nThe signalling for a completed request of Assistance Data or De-ciphering Keys is shown in figures 67a.\nMSC-A               MSC-B                                    MS\n|                     |                                       |\n|                     |                                       |\n|                     |                                       |\n|                     |     LCS-MOLR                          |\n|                     |<--------------------------------------|\n|                     |                                       |\n|                     |                                       |\n|MAP PROCESS ACCESS   |                                       |\n|    SIGNALLING       |                                       |\n|<--------------------|                                       |\n| -an-APDU(LCS-MOLR)  |                                       |\n|                     |                                       |\n|                     |                                       |\n|MAP FORWARD ACCESS   |                                       |\n|    SIGNALLING       |                                       |\n|-------------------->|                                       |\n| -an-APDU(           |                                       |\n| PERFORM LOCATION    |                                       |\n|   REQUEST)          |                BSS-B                  |\n|                     |                                       |\n|                     |                  |                    |\n|                     |----------------->|                    |\n|                     |                  |                    |\n|                     | PERFORM LOCATION |                    |\n|                     |          REQUEST |                    |\n|                     |                  |                    |\n|                     |                +------------------------+\n|                     |                | If Assistance Data were|\n|                     |                | requested then         |\n|                     |                | Delivery of Assistance |\n|                     |                | Data to MS             |\n|                     |                +------------------------+\n|                     |                  |                    |\n|                     |<-----------------|                    |\n|                     |                  |                    |\n|                     | PERFORM LOCATION |                    |\n|                     |         RESPONSE |                    |\n|                     |                  |                    |\n|                     |                  |                    |\n|                     |                  |                    |\n|MAP PROCESS ACCESS   |                  |                    |\n|    SIGNALLING       |                  |                    |\n|<--------------------|                  |                    |\n|  -an-APDU(          |                  |                    |\n|  PERFORM LOCATION   |                  |                    |\n|    RESPONSE)        |                  |                    |\n|                     |                  |                    |\n|                     |                  |                    |\n|MAP FORWARD ACCESS   |                  |                    |\n|    SIGNALLING       |                 -+-                   |\n|-------------------->|                                       |\n| -an-APDU(           |                                       |\n| LCS-MOLR Response)  |                                       |\n|                     |                                       |\n|                     |     LCS-MOLR Response                 |\n|                     |-------------------------------------->|\n|                     |                                       |\nFigure 67a: Signalling for the request of Assistance Data or De-ciphering Keys\nAfter the inter-MSC handover, the MSC-B can perform intra-MSC GSM to UMTS handover. Any request for Assistance Data or De-ciphering keys received after completion of the intra-MSC GSM to UMTS handover is handled as for Inter-MSC Handover GSM to UMTS (see clause 4.9.4.2).",
      "chunk_type": "general",
      "cross_references": [
        "clause_4.9.4.2",
        "figure_67",
        "ts_48.008",
        "ts_49.008"
      ]
    },
    {
      "chunk_id": "ts_29.010_4.9.4.2",
      "section_id": "4.9.4.2",
      "section_title": "Inter-MSC Handover (GSM to UMTS)",
      "content": "After a successful Inter-MSC GSM to UMTS inter system handover, any request of Assistance Data or De-ciphering keys received by the non-anchor 3G MSC via the DTAP message LCS-MOLR is forwarded to the anchor MSC by encapsulating the DTAP message into the MAP messages Process Access Signalling. The anchor MSC triggers the BSSMAP procedure Location Acquisition described in 3G TS 48.008. For handover this procedure is executed according to 3G TS 49.008 with the anchor MSC playing the role of the MSC and the non anchor 3G MSC playing the role of the BSS.\nThe needed BSSMAP signalling is sent over the E-interface encapsulated in the MAP messages Process Access Signalling and Forward Access Signalling.\nAt the non-anchor 3G MSC the received BSSMAP messages are mapped into the corresponding RANAP messages to be sent to the RNS, and the received RANAP messages are mapped into the corresponding BSSMAP messages to be sent over the E-interface to the anchor MSC.\nOnce the BSSMAP procedure has been completed, the anchor MSC sends the DTAP message LCS-MOLR Response encapsulated in the MAP message Forward Access Signalling to the non anchor 3G MSC, which relays it to the UE.\nThe signalling for a completed request of Assistance Data or De-ciphering Keys is shown in figures 67b.\nMSC-A              3G MSC-B                                  UE\n|                     |                                       |\n|                     |                                       |\n|                     |                                       |\n|                     |     LCS-MOLR                          |\n|                     |<--------------------------------------|\n|                     |                                       |\n|                     |                                       |\n|MAP PROCESS ACCESS   |                                       |\n|    SIGNALLING       |                                       |\n|<--------------------|                                       |\n| -an-APDU(LCS-MOLR)  |                                       |\n|                     |                                       |\n|                     |                                       |\n|MAP FORWARD ACCESS   |                                       |\n|    SIGNALLING       |                                       |\n|-------------------->|                                       |\n| -an-APDU(           |                                       |\n| PERFORM LOCATION    |                                       |\n|   REQUEST)          |                RNS-B                  |\n|                     |                                       |\n|                     |                  |                    |\n|                     |----------------->|                    |\n|                     |                  |                    |\n|                     |LOCATION RELATED  |                    |\n|                     |  DATA REQUEST    |                    |\n|                     |                  |                    |\n|                     |                +------------------------+\n|                     |                | If Assistance Data were|\n|                     |                | requested then         |\n|                     |                | Delivery of Assistance |\n|                     |                | Data to UE             |\n|                     |                +------------------------+\n|                     |                  |                    |\n|                     |<-----------------|                    |\n|                     |                  |                    |\n|                     |LOCATION RELATED  |                    |\n|                     |  DATA RESPONSE   |                    |\n|                     |                  |                    |\n|                     |                  |                    |\n|                     |                  |                    |\n|MAP PROCESS ACCESS   |                  |                    |\n|    SIGNALLING       |                  |                    |\n|<--------------------|                  |                    |\n|  -an-APDU(          |                  |                    |\n|  PERFORM LOCATION   |                  |                    |\n|    RESPONSE)        |                  |                    |\n|                     |                  |                    |\n|                     |                  |                    |\n|MAP FORWARD ACCESS   |                  |                    |\n|    SIGNALLING       |                 -+-                   |\n|-------------------->|                                       |\n| -an-APDU(           |                                       |\n| LCS-MOLR Response)  |                                       |\n|                     |                                       |\n|                     |     LCS-MOLR Response                 |\n|                     |-------------------------------------->|\n|                     |                                       |\nFigure 67b: Signalling for the request of Assistance Data or De-ciphering Keys\nWhen the UE requires the delivery of Assistance Data for the GPS Assisted positioning method, the interworking between the BSSMAP messages encapsulated in MAP and the RANAP messages is as follows:\n-----------------------------------------------------------------\n|   29.002                         25.413          |Notes\n--------┼--------------------------------------------------┼-----\nForward | MAP FORWARD ACCESS SIG.    LOCATION RELATED      |\nmessage |     request                  DATA REQUEST        |\n|                                                  |\n| -an-APDU(                                        |\n| PERFORM LOCATION REQUEST)                        |\n|                                                  |\n| BSSMAP information      RANAP information        |\n|      elements:              elements:            |\n|                                                  |\n|   Location Type.          Requested Location     |\n|     Location.Information    Related Data Type    |\n|    > location assistance   >Dedicated Assistance |\n|      info for target MS     Data for Assisted GPS|\n|   Location Type.                                 |\n|     Positioning Method                           | 1\n|    > Assisted GPS                                |\n|                                                  |\n|                                                  |\n|   GPS Assistance Data     Requested GPS          |\n|                             Assistance Data      |\n|                                                  |\n--------┼--------------------------------------------------┼-----\nResult  | MAP PROCESS ACCESS SIG.   LOCATION RELATED       |\n|     request                  DATA RESPONSE       |\n| -an-APDU(                                        |\n| PERFORM LOCATION RESPONSE)                       |\n|                                                  |\n| BSSMAP information      RANAP information        |\t2\n|      elements:              elements:            |\n|                                                  |\n|                                                  |\n|                                                  |\n|                                                  |\nNOTE 1:\tAll other Positioning Method possibilities are not supported by UMTS when Location Information is \"location assistance information  for the target MS\".\nNOTE 2:\tThe absence of the Cause IE in the RANAP message Location Related Data Response is an indication that the requested assistance data has been successfully delivered to the UE..\nIf  the UE requires the delivery of Assistance Data for an UMTS specific method, then the anchor MSC cannot forward the request to the non anchor 3G MSC, and replies with the error \"System\"to the LCS-MOLR message.\nIf the anchor MSC sends a request for assistance data for a GSM specific method in BSSMAP Perform Location Request encapsulated in MAP Forward Access Signalling, then the non anchor 3G MSC replies immediately by generating and encapsulating BSSMAP Perform Location Response with Cause \"System Failure\" in MAP Process Access Signalling. This traffic case can happen if an LCS-MOLR had been received in the anchor MSC before the initiation of the handover procedure.\nWhen the UE requires the delivery of De-ciphering Keys for the GPS Assisted positioning method, the interworking between the BSSMAP messages encapsulated in MAP and the RANAP messages is as follows:\n-----------------------------------------------------------------\n|   29.002                         25.413          |Notes\n--------┼--------------------------------------------------┼-----\nForward | MAP FORWARD ACCESS SIG.    LOCATION RELATED      |\nmessage |     request                  DATA REQUEST        |\n|                                                  |\n| -an-APDU(                                        |\n| PERFORM LOCATION REQUEST)                        |\n|                                                  |\n| BSSMAP information      RANAP information        |\n|      elements:              elements:            |\n|                                                  |\n|   Location Type.          Requested Location     |\n|     Location.Information    Related Data Type    |\n|    > deciphering keys      > Deciphering Keys    |\n|      for broadcast           for Assisted GPS    |\n|      assistance data                             |\n|      for the target MS                           |\n|   Location Type.                                 |\n|     Positioning Method                           | 1\n|    > Assisted GPS                                |\n|                                                  |\n|                                                  |\n--------┼--------------------------------------------------┼-----\nResult  | MAP PROCESS ACCESS SIG.   LOCATION RELATED       |\n|     request                  DATA RESPONSE       |\n| -an-APDU(                                        |\n| PERFORM LOCATION RESPONSE)                       |\n|                                                  |\n| BSSMAP information      RANAP information        |\n|      elements:              elements:            |\n|                                                  |\n| Deciphering Keys          Broadcast Assistance   |\n|                             Data Deciphering Keys|\n|                                                  |\n|                                                  |\n|                                                  |\nNOTE 1:\tAll other Positioning Method possibilities are not supported by UMTS when Location Information is \"deciphering keys for broadcast assistance data for the target MS\".\nIf  the UE requires the delivery of De-ciphering Keys for an UMTS specific method, then the anchor MSC cannot forward the request to the non anchor 3G MSC, and replies with the error \"System\"to the LCS-MOLR message.\nIf the anchor MSC sends a request for De-ciphering Keys for a GSM specific method in BSSMAP Perform Location Request encapsulated in MAP Forward Access Signalling, then the non anchor 3G MSC replies immediately by generating and encapsulating BSSMAP Perform Location Response with Cause \"System Failure\" in MAP Process Access Signalling. This traffic case can happen if an LCS-MOLR had been received in the anchor MSC before the initiation of the handover procedure.\nAfter the inter-MSC GSM to UMTS handover, the 3G MSC-B can perform intra-MSC UMTS to GSM handover. Any request for Assistance Data or De-ciphering keys received after completion of the intra-MSC UMTS to GSM handover is handled as for Inter-MSC Handover GSM to GSM (see clause 4.9.4.1).",
      "chunk_type": "general",
      "cross_references": [
        "clause_4.9.4.1",
        "figure_67",
        "ts_48.008",
        "ts_49.008"
      ]
    },
    {
      "chunk_id": "ts_29.010_4.9.4.3",
      "section_id": "4.9.4.3",
      "section_title": "Inter-MSC Handover (UMTS to GSM)",
      "content": "After a successful Inter-MSC UMTS to GSM inter system handover, any request of Assistance Data or De-ciphering keys received by the non-anchor MSC via the DTAP message LCS-MOLR is forwarded to the anchor 3G MSC by encapsulating the DTAP message into the MAP messages Process Access Signalling. The anchor 3G MSC triggers the BSSMAP procedure Location Acquisition described in 3G TS 48.008. For handover this procedure is executed according to 3G TS 49.008 with the anchor 3G MSC playing the role of the MSC and the non-anchor MSC playing the role of the BSS.\nThe needed BSSMAP signalling is sent over the E-interface encapsulated in the MAP messages Process Access Signalling and Forward Access Signalling.\nAt the non-anchor MSC the BSSMAP messages received from the anchor 3G MSC are forwarded to the BSS, and the BSSMAP messages received from the BSS are sent over the E-interface to the anchor 3G MSC.\nOnce the BSSMAP procedure has been completed, the anchor 3G MSC sends the DTAP message LCS-MOLR Response encapsulated in the MAP message Forward Access Signalling to the non-anchor MSC, which relays it to the UE.\nThe signalling for a completed request of Assistance Data or De-ciphering Keys is shown in figures 67c.\n3G MSC-A            MSC-B                                    MS\n|                     |                                       |\n|                     |                                       |\n|                     |                                       |\n|                     |     LCS-MOLR                          |\n|                     |<--------------------------------------|\n|                     |                                       |\n|                     |                                       |\n|MAP PROCESS ACCESS   |                                       |\n|    SIGNALLING       |                                       |\n|<--------------------|                                       |\n| -an-APDU(LCS-MOLR)  |                                       |\n|                     |                                       |\n|                     |                                       |\n|MAP FORWARD ACCESS   |                                       |\n|    SIGNALLING       |                                       |\n|-------------------->|                                       |\n| -an-APDU(           |                                       |\n| PERFORM LOCATION    |                                       |\n|   REQUEST)          |                BSS-B                  |\n|                     |                                       |\n|                     |                  |                    |\n|                     |----------------->|                    |\n|                     |                  |                    |\n|                     | PERFORM LOCATION |                    |\n|                     |          REQUEST |                    |\n|                     |                  |                    |\n|                     |                +------------------------+\n|                     |                | If Assistance Data were|\n|                     |                | requested then         |\n|                     |                | Delivery of Assistance |\n|                     |                | Data to MS             |\n|                     |                +------------------------+\n|                     |                  |                    |\n|                     |<-----------------|                    |\n|                     |                  |                    |\n|                     | PERFORM LOCATION |                    |\n|                     |         RESPONSE |                    |\n|                     |                  |                    |\n|                     |                  |                    |\n|                     |                  |                    |\n|MAP PROCESS ACCESS   |                  |                    |\n|    SIGNALLING       |                  |                    |\n|<--------------------|                  |                    |\n|  -an-APDU(          |                  |                    |\n|  PERFORM LOCATION   |                  |                    |\n|    RESPONSE)        |                  |                    |\n|                     |                  |                    |\n|                     |                  |                    |\n|MAP FORWARD ACCESS   |                  |                    |\n|    SIGNALLING       |                 -+-                   |\n|-------------------->|                                       |\n| -an-APDU(           |                                       |\n| LCS-MOLR Response)  |                                       |\n|                     |                                       |\n|                     |     LCS-MOLR Response                 |\n|                     |-------------------------------------->|\n|                     |                                       |\nFigure 67c: Signalling for the request of Assistance Data or De-ciphering Keys\nAfter the inter-MSC UMTS to GSM handover, the 3G MSC-B can perform intra-MSC GSM to UMTS handover. Any request for Assistance Data or De-ciphering keys received after completion of the intra-MSC GSM to UMTS handover is handled as for Inter-MSC Handover GSM to UMTS (see clause 4.9.4.2)..",
      "chunk_type": "general",
      "cross_references": [
        "clause_4.9.4.2",
        "figure_67",
        "ts_48.008",
        "ts_49.008"
      ]
    },
    {
      "chunk_id": "ts_29.010_4.9.4.4",
      "section_id": "4.9.4.4",
      "section_title": "Inter-MSC SRNS Relocation",
      "content": "After a successful Inter-MSC SRNS Relocation , any request of Assistance Data or De-ciphering keys received by the non anchor 3G MSC via the DTAP message LCS-MOLR is forwarded to the anchor 3G MSC by encapsulating the DTAP message into the MAP messages Process Access Signalling. The anchor 3G MSC triggers the RANAP procedure Location Related Data described in TS 25.413. For handover this procedure is executed according to 23.009 with the anchor 3G-MSC playing the role of the 3G-MSC and the non anchor 3G-MSC playing the role of the RNS.\nThe needed RANAP signalling is sent over the E-interface encapsulated in the MAP messages Process Access Signalling and Forward Access Signalling.\nAt the non anchor 3G MSC the RANAP messages received from the anchor 3G MSC are forwarded to the RNS, and the RANAP messages received from the RNS are sent over the E-interface to the anchor 3G MSC.\nOnce the RANAP procedure has been completed, the anchor 3G MSC sends the DTAP message LCS-MOLR Response encapsulated in the MAP message Forward Access Signalling to the non anchor 3G MSC, which relays it to the UE.\nThe signalling for a completed request of Assistance Data or De-ciphering Keys is shown in figures 67d.\n3G MSC-A          3G MSC-B                                    UE\n|                     |                                       |\n|                     |                                       |\n|                     |                                       |\n|                     |     LCS-MOLR                          |\n|                     |<--------------------------------------|\n|                     |                                       |\n|                     |                                       |\n|MAP PROCESS ACCESS   |                                       |\n|    SIGNALLING       |                                       |\n|<--------------------|                                       |\n| -an-APDU(LCS-MOLR)  |                                       |\n|                     |                                       |\n|                     |                                       |\n|MAP FORWARD ACCESS   |                                       |\n|    SIGNALLING       |                                       |\n|-------------------->|                                       |\n| -an-APDU(           |                                       |\n| LOCATION RELATED    |                                       |\n|   DATA REQUEST)     |                RNS-B                  |\n|                     |                                       |\n|                     |                  |                    |\n|                     |----------------->|                    |\n|                     |                  |                    |\n|                     | LOCATION RELATED |                    |\n|                     |   DATA REQUEST   |                    |\n|                     |                  |                    |\n|                     |                +------------------------+\n|                     |                | If Assistance Data were|\n|                     |                | requested then         |\n|                     |                | Delivery of Assistance |\n|                     |                | Data to UE             |\n|                     |                +------------------------+\n|                     |                  |                    |\n|                     |<-----------------|                    |\n|                     |                  |                    |\n|                     | LOCATION RELATED |                    |\n|                     |   DATA RESPONSE  |                    |\n|                     |                  |                    |\n|                     |                  |                    |\n|                     |                  |                    |\n|MAP PROCESS ACCESS   |                  |                    |\n|    SIGNALLING       |                  |                    |\n|<--------------------|                  |                    |\n| -an-APDU(           |                  |                    |\n| LOCATION RELATED    |                  |                    |\n|   DATA RESPONSE)    |                  |                    |\n|                     |                  |                    |\n|                     |                  |                    |\n|MAP FORWARD ACCESS   |                  |                    |\n|    SIGNALLING       |                 -+-                   |\n|-------------------->|                                       |\n| -an-APDU(           |                                       |\n| LCS-MOLR Response)  |                                       |\n|                     |                                       |\n|                     |     LCS-MOLR Response                 |\n|                     |-------------------------------------->|\n|                     |                                       |\nFigure 67d: Signalling for the request of Assistance Data or De-ciphering Keys\nAfter the inter-MSC SRNS Relocation, the 3G MSC-B can perform intra-MSC UMTS to GSM handover. Any request for Assistance Data or De-ciphering keys received after completion of the intra-MSC UMTS to GSM requires that at the non anchor 3G MSC the received RANAP messages are mapped into the corresponding BSSMAP messages to be sent to the BSS, and the received BSSMAP messages are mapped into the corresponding RANAP messages to be sent over the E-interface to the anchor 3G-MSC.  The signalling for a completed request of Assistance Data or De-ciphering Keys in this traffic case is shown in figures 67e.\n3G MSC-A          3G MSC-B                                    UE\n|                     |                                       |\n|                     |                                       |\n|                     |                                       |\n|                     |     LCS-MOLR                          |\n|                     |<--------------------------------------|\n|                     |                                       |\n|                     |                                       |\n|MAP PROCESS ACCESS   |                                       |\n|    SIGNALLING       |                                       |\n|<--------------------|                                       |\n| -an-APDU(LCS-MOLR)  |                                       |\n|                     |                                       |\n|                     |                                       |\n|MAP FORWARD ACCESS   |                                       |\n|    SIGNALLING       |                                       |\n|-------------------->|                                       |\n| -an-APDU(           |                                       |\n| LOCATION RELATED    |                                       |\n|   DATA REQUEST)     |                BSS-B                  |\n|                     |                                       |\n|                     |                  |                    |\n|                     |----------------->|                    |\n|                     |                  |                    |\n|                     | PERFORM LOCATION |                    |\n|                     |   REQUEST        |                    |\n|                     |                  |                    |\n|                     |                +------------------------+\n|                     |                | If Assistance Data were|\n|                     |                | requested then         |\n|                     |                | Delivery of Assistance |\n|                     |                | Data to MS             |\n|                     |                +------------------------+\n|                     |                  |                    |\n|                     |<-----------------|                    |\n|                     |                  |                    |\n|                     | PERFORM LOCATION |                    |\n|                     |   RESPONSE       |                    |\n|                     |                  |                    |\n|                     |                  |                    |\n|                     |                  |                    |\n|MAP PROCESS ACCESS   |                  |                    |\n|    SIGNALLING       |                  |                    |\n|<--------------------|                  |                    |\n| -an-APDU(           |                  |                    |\n| LOCATION RELATED    |                  |                    |\n|   DATA RESPONSE)    |                  |                    |\n|                     |                  |                    |\n|                     |                  |                    |\n|MAP FORWARD ACCESS   |                  |                    |\n|    SIGNALLING       |                 -+-                   |\n|-------------------->|                                       |\n| -an-APDU(           |                                       |\n| LCS-MOLR Response)  |                                       |\n|                     |                                       |\n|                     |     LCS-MOLR Response                 |\n|                     |-------------------------------------->|\n|                     |                                       |\nFigure 67e: Signalling for the request of Assistance Data or De-ciphering Keys\nWhen the UE requires the delivery of Assistance Data for the GPS Assisted positioning method, the interworking between the RANAP messages encapsulated in MAP and the BSSMAP messages is as follows:\n-----------------------------------------------------------------\n|   29.002                         48.008          |Notes\n--------┼--------------------------------------------------┼-----\nForward | MAP FORWARD ACCESS SIG.    PERFORM LOCATION      |\nmessage |     request                  REQUEST             |\n|                                                  |\n| -an-APDU(                                        |\n| LOCATION RELATED                                 |\n|   DATA REQUEST)                                  |\n|                                                  |\n| RANAP information       BSSMAP information       |\n|      elements:              elements:            |\n|                                                  |\n|   Requested Location      Location Type.         |\n|     Related Data Type       Location Information |\n|    > Dedicated Assistance  > location assistance | 1\n|      Data for Assisted       info for target MS  |\n|      GPS                  Location Type.         |\n|                             Positioning Method   |\n|                            > Assisted GPS        |\n|                                                  |\n|   Requested GPS           GPS Assistance Data    |\n|     Assistance Data                              |\n|                                                  |\n|                                                  |\n--------┼--------------------------------------------------┼-----\nResult  | MAP PROCESS ACCESS SIG.   PERFORM LOCATION       |\n|     request                  RESPONSE            |\n| -an-APDU(                                        |\n| LOCATION RELATED                                 |\n|   DATA RESPONSE)                                 |\n|                                                  |\n| RANAP information       BSSMAP information       |\t2\n|      elements:              elements:            |\n|                                                  |\n|                                                  |\n|                                                  |\n|                                                  |\nNOTE 1:\tAll other Positioning Method possibilities are not supported by GSM when Location Information is \"deciphering keys for broadcast assistance data for the target MS\".\nNOTE 2:\tThe absence of the Cause IE in the BSSMAP message Perform Location Response is an indicatioin that the requested assistance data has been successfully delivered to the UE..\nIf  the UE requires the delivery of Assistance Data for a GSM specific method, then the anchor 3G-MSC cannot forward the request to the non anchor 3G MSC, and replies with the error \"System\"to the LCS-MOLR message.\nIf the anchor 3G MSC sends a request for Assistance Data for an UMTS specific method in RANAP Location Related Data Request encapsulated in MAP Forward Access Signalling, then the non anchor 3G MSC replies immediately by generating and encapsulating RANAP Location Related Data Failure with Cause \"Unspecified Failure\" in MAP Process Access Signalling. This traffic case can happen if an LCS-MOLR had been received in the anchor MSC before the initiation of the intra-MSC handover procedure.\nWhen the UE requires the delivery of De-ciphering Keys for the GPS Assisted positioning method, the interworking between the RANAP messages encapsulated in MAP and the BSSMAP messages is as follows:\n-----------------------------------------------------------------\n|   29.002                         48.008          |Notes\n--------┼--------------------------------------------------┼-----\nForward | MAP FORWARD ACCESS SIG.    PERFORM LOCATION      |\nmessage |     request                  REQUEST             |\n|                                                  |\n| -an-APDU(                                        |\n| LOCATION RELATED                                 |\n|   DATA REQUEST)                                  |\n|                                                  |\n| RANAP information       BSSMAP information       |\n|      elements:              elements:            |\n|                                                  |\n|   Requested Location      Location Type.         |\n|     Related Data Type       Location Information |\n|    > Deciphering Keys      > deciphering keys    | 1\n|      for Assisted GPS        for broadcast       |\n|                              assistance data     |\n|                              for the target MS   |\n|                           Location Type.         |\n|                             Positioning Method   |\n|                            > Assisted GPS        |\n|                                                  |\n|                                                  |\n--------┼--------------------------------------------------┼-----\nResult  | MAP PROCESS ACCESS SIG.   PERFORM LOCATION       |\n|     request                  RESPONSE            |\n| -an-APDU(                                        |\n| LOCATION RELATED                                 |\n|   DATA RESPONSE)                                 |\n|                                                  |\n| RANAP information       BSSMAP information       |\n|      elements:              elements:            |\n|                                                  |\n| Broadcast Assistance      Deciphering Keys       |\n|   Data Deciphering Keys                          |\n|                                                  |\n|                                                  |\n|                                                  |\nNOTE 1:\tAll other Positioning Method possibilities are not supported by GSM when Location Information is \"deciphering keys for broadcast assistance data for the target MS\".\nIf  the UE requires the delivery of De-ciphering Keys for a GSM specific method, then the anchor 3G-MSC cannot forward the request to the non anchor 3G MSC, and replies with the error \"System\"to the LCS-MOLR message.\nIf the anchor 3G MSC sends a request for De-ciphering Keys for an UMTS specific method in RANAP Location Related Data Request encapsulated in MAP Forward Access Signalling, then the non anchor 3G MSC replies immediately by generating and encapsulating RANAP Location Related Data Failure with Cause \"Unspecified Failure\" in MAP Process Access Signalling. This traffic case can happen if an LCS-MOLR had been received in the anchor MSC before the initiation of the intra-MSC handover procedure.",
      "chunk_type": "general",
      "cross_references": [
        "figure_67",
        "ts_25.413"
      ]
    },
    {
      "chunk_id": "ts_29.010_4.9.5.1",
      "section_id": "4.9.5.1",
      "section_title": "Inter-MSC Handover (GSM to GSM)",
      "content": "After a successful Inter-MSC handover, any request of Assistance Data or De-ciphering keys received by the non anchor MSC via the DTAP message LCS-MOLR is handled as described in clause 4.9.4.1.\nIf the request fails, either because the BSS-B cannot return the requested De-ciphering Keys to the anchor MSC or cannot deliver the required Assistance Data to the MS, the signalling is the same as for the successful case and is shown in figure 67a.\nAfter the inter-MSC handover, the MSC-B can perform intra-MSC GSM to UMTS handover. Any request for Assistance Data or De-ciphering keys received after completion of the intra-MSC GSM to UMTS handover is handled as for Inter-MSC Handover GSM to UMTS (see clause 4.9.4.2).\nIf the request fails the signalling is the same as for the failure case for Inter-MSC Handover GSM to UMTS (see clause 4.9.5.2)",
      "chunk_type": "general",
      "cross_references": [
        "clause_4.9.4.1",
        "clause_4.9.4.2",
        "clause_4.9.5.2",
        "figure_67"
      ]
    },
    {
      "chunk_id": "ts_29.010_4.9.5.2",
      "section_id": "4.9.5.2",
      "section_title": "Inter-MSC Handover (GSM to UMTS)",
      "content": "After a successful Inter-MSC GSM to UMTS handover, any request of Assistance Data or De-ciphering keys received by the non anchor 3G MSC via the DTAP message LCS-MOLR is handled as described in clause 4.9.4.2.\nIf the request fails, either because BSS-B cannot return the requested De-ciphering Keys to the anchor MSC or because BSS‑B cannot deliver the required Assistance Data to the MS, the signalling is as shown in figure 68a.\nMSC-A              3G MSC-B                                  UE\n|                     |                                       |\n|                     |                                       |\n|                     |                                       |\n|                     |     LCS-MOLR                          |\n|                     |<--------------------------------------|\n|                     |                                       |\n|                     |                                       |\n|MAP PROCESS ACCESS   |                                       |\n|    SIGNALLING       |                                       |\n|<--------------------|                                       |\n| -an-APDU(LCS-MOLR)  |                                       |\n|                     |                                       |\n|                     |                                       |\n|MAP FORWARD ACCESS   |                                       |\n|    SIGNALLING       |                                       |\n|-------------------->|                                       |\n| -an-APDU(           |                                       |\n| PERFORM LOCATION    |                                       |\n|   REQUEST)          |                RNS-B                  |\n|                     |                                       |\n|                     |                  |                    |\n|                     |----------------->|                    |\n|                     |                  |                    |\n|                     |LOCATION RELATED  |                    |\n|                     |  DATA REQUEST    |                    |\n|                     |                  |                    |\n|                     |                +------------------------+\n|                     |                | If Assistance Data were|\n|                     |                | requested then         |\n|                     |                | Delivery of Assistance |\n|                     |                | Data to UE             |\n|                     |                +------------------------+\n|                     |                  |                    |\n|                     |<-----------------|                    |\n|                     |                  |                    |\n|                     |LOCATION RELATED  |                    |\n|                     |  DATA FAILURE    |                    |\n|                     |                  |                    |\n|                     |                  |                    |\n|                     |                  |                    |\n|MAP PROCESS ACCESS   |                  |                    |\n|    SIGNALLING       |                  |                    |\n|<--------------------|                  |                    |\n|  -an-APDU(          |                  |                    |\n|  PERFORM LOCATION   |                  |                    |\n|    RESPONSE)        |                  |                    |\n|                     |                  |                    |\n|                     |                  |                    |\n|MAP FORWARD ACCESS   |                  |                    |\n|    SIGNALLING       |                 -+-                   |\n|-------------------->|                                       |\n| -an-APDU(           |                                       |\n| LCS-MOLR Response)  |                                       |\n|                     |                                       |\n|                     |     LCS-MOLR Response                 |\n|                     |-------------------------------------->|\n|                     |                                       |\nFigure 68a: Signalling for a failed request of Assistance Data or De-ciphering Keys\nWhen the delivery to the UE of Assistance Data for the GPS Assisted positioning method fails, the interworking between the BSSMAP messages encapsulated in MAP and the RANAP messages is as follows:\n-----------------------------------------------------------------\n|   29.002                         25.413          |Notes\n--------┼--------------------------------------------------┼-----\nForward |                                                  |\nmessage | \"For the forward messages please refer to the    |\n|  corresponding table in clause 4.9.4.2\"         |\n|                                                  |\n|                                                  |\n--------┼--------------------------------------------------┼-----\nResult  | MAP PROCESS ACCESS SIG.   LOCATION RELATED       |\n|     request                  DATA FAILURE        |\n| -an-APDU(                                        |\n| PERFORM LOCATION RESPONSE)                       |\n|                                                  |\n| BSSMAP information      RANAP information        |\n|      elements:              elements:            |\n|                                                  |\n|   LCS Cause              Cause                   |\n|     > System Failure       > Dedicated Assistance|\n|                              Data Not Available  |\n|                                                  |\n|                                                  |\nWhen the RNS-B cannot satisfy the request for De-ciphering Keys, the interworking between the BSSMAP messages encapsulated in MAP and the RANAP messages is as follows:\n-----------------------------------------------------------------\n|   29.002                         25.413          |Notes\n--------┼--------------------------------------------------┼-----\nForward |                                                  |\nmessage | \"For the forward messages please refer to the    |\n|  corresponding table in clause 4.9.4.2\"         |\n|                                                  |\n|                                                  |\n--------┼--------------------------------------------------┼-----\nResult  | MAP PROCESS ACCESS SIG.   LOCATION RELATED       |\n|     request                  DATA FAILURE        |\n| -an-APDU(                                        |\n| PERFORM LOCATION RESPONSE)                       |\n|                                                  |\n| BSSMAP information      RANAP information        |\n|      elements:              elements:            |\n|                                                  |\n|   LCS Cause              Cause                   |\n|     > System Failure       > Deciphering Keys    |\n|                              Not Available       |\n|                                                  |\nAfter the inter-MSC GSM to UMTS handover, the 3G MSC-B can perform intra-MSC UMTS to GSM handover. Any request for Assistance Data or De-ciphering keys received after completion of the intra-MSC UMTS to GSM handover is handled as for Inter-MSC Handover GSM to GSM (see clause 4.9.4.1).\nIf the request fails the signalling is the same as for the failure case for Inter-MSC Handover GSM to GSM (see clause 4.9.5.1)",
      "chunk_type": "general",
      "cross_references": [
        "clause_4.9.4.2",
        "clause_4.9.4.1",
        "clause_4.9.5.1",
        "figure_68"
      ]
    },
    {
      "chunk_id": "ts_29.010_4.9.5.3",
      "section_id": "4.9.5.3",
      "section_title": "Inter-MSC Handover (UMTS to GSM)",
      "content": "After a successful Inter-MSC UMTS to GSM handover, any request of Assistance Data or De-ciphering keys received by the non anchor MSC via the DTAP message LCS-MOLR is handled as described in clause 4.9.4.3.\nIf the request fails, either because the BSS-B cannot return the requested De-ciphering Keys to the anchor 3G MSC or BSS‑B cannot deliver the required Assistance Data to the MS, the signalling is the same as for the successful case and is shown in figure 67c.\nAfter the inter-MSC UMTS to GSM handover, the 3G MSC-B can perform intra-MSC GSM to UMTS handover. Any request for Assistance Data or De-ciphering keys received after completion of the intra-MSC GSM to UMTS handover is handled as for Inter-MSC Handover GSM to UMTS (see clause 4.9.4.2)..\nIf the request fails the signalling is the same as for the failure case for Inter-MSC Handover GSM to UMTS (see clause 4.9.5.2)",
      "chunk_type": "general",
      "cross_references": [
        "clause_4.9.4.3",
        "clause_4.9.4.2",
        "clause_4.9.5.2",
        "figure_67"
      ]
    },
    {
      "chunk_id": "ts_29.010_4.9.5.4",
      "section_id": "4.9.5.4",
      "section_title": "Inter-MSC SRNS Relocation",
      "content": "After a successful Inter-MSC SRNS Relocation , any request of Assistance Data or De-ciphering keys received by the non anchor 3G MSC via the DTAP message LCS-MOLR is handled as described in clause 4.9.4.4.\nIf the request fails, either because the RNS-B cannot return the requested De-ciphering Keys to the anchor 3G MSC or RNS‑B cannot deliver the required Assistance Data to the MS, the signalling is shown in figure 68b.\n3G MSC-A          3G MSC-B                                    UE\n|                     |                                       |\n|                     |                                       |\n|                     |                                       |\n|                     |     LCS-MOLR                          |\n|                     |<--------------------------------------|\n|                     |                                       |\n|                     |                                       |\n|MAP PROCESS ACCESS   |                                       |\n|    SIGNALLING       |                                       |\n|<--------------------|                                       |\n| -an-APDU(LCS-MOLR)  |                                       |\n|                     |                                       |\n|                     |                                       |\n|MAP FORWARD ACCESS   |                                       |\n|    SIGNALLING       |                                       |\n|-------------------->|                                       |\n| -an-APDU(           |                                       |\n| LOCATION RELATED    |                                       |\n|   DATA REQUEST)     |                RNS-B                  |\n|                     |                                       |\n|                     |                  |                    |\n|                     |----------------->|                    |\n|                     |                  |                    |\n|                     | LOCATION RELATED |                    |\n|                     |   DATA REQUEST   |                    |\n|                     |                  |                    |\n|                     |                +------------------------+\n|                     |                | If Assistance Data were|\n|                     |                | requested then         |\n|                     |                | Delivery of Assistance |\n|                     |                | Data to UE             |\n|                     |                +------------------------+\n|                     |                  |                    |\n|                     |<-----------------|                    |\n|                     |                  |                    |\n|                     | LOCATION RELATED |                    |\n|                     |   DATA FAILURE   |                    |\n|                     |                  |                    |\n|                     |                  |                    |\n|                     |                  |                    |\n|MAP PROCESS ACCESS   |                  |                    |\n|    SIGNALLING       |                  |                    |\n|<--------------------|                  |                    |\n| -an-APDU(           |                  |                    |\n| LOCATION RELATED    |                  |                    |\n|   DATA FAILURE)     |                  |                    |\n|                     |                  |                    |\n|                     |                  |                    |\n|MAP FORWARD ACCESS   |                  |                    |\n|    SIGNALLING       |                 -+-                   |\n|-------------------->|                                       |\n| -an-APDU(           |                                       |\n| LCS-MOLR Response)  |                                       |\n|                     |                                       |\n|                     |     LCS-MOLR Response                 |\n|                     |-------------------------------------->|\n|                     |                                       |\nFigure 68b: Signalling for the request of Assistance Data or De-ciphering Keys\nAfter the inter-MSC SRNS Relocation, the 3G MSC-B can perform intra-MSC UMTS to GSM handover. Any request for Assistance Data or De-ciphering keys received after completion of the intra-MSC UMTS to GSM requires that at the non anchor 3G MSC the received RANAP messages are mapped into the corresponding BSSMAP messages to be sent to the BSS, and the received BSSMAP messages are mapped into the corresponding RANAP messages to be sent over the E-interface to the anchor 3G-MSC.\nIf the request fails, either because the BSS-B cannot return the requested De-ciphering Keys to the anchor 3G MSC or BSS‑B cannot deliver the required Assistance Data to the MS, the signalling is as shown in figure 68c.\n3G MSC-A          3G MSC-B                                    UE\n|                     |                                       |\n|                     |                                       |\n|                     |                                       |\n|                     |     LCS-MOLR                          |\n|                     |<--------------------------------------|\n|                     |                                       |\n|                     |                                       |\n|MAP PROCESS ACCESS   |                                       |\n|    SIGNALLING       |                                       |\n|<--------------------|                                       |\n| -an-APDU(LCS-MOLR)  |                                       |\n|                     |                                       |\n|                     |                                       |\n|MAP FORWARD ACCESS   |                                       |\n|    SIGNALLING       |                                       |\n|-------------------->|                                       |\n| -an-APDU(           |                                       |\n| LOCATION RELATED    |                                       |\n|   DATA REQUEST)     |                BSS-B                  |\n|                     |                                       |\n|                     |                  |                    |\n|                     |----------------->|                    |\n|                     |                  |                    |\n|                     | PERFORM LOCATION |                    |\n|                     |   REQUEST        |                    |\n|                     |                  |                    |\n|                     |                +------------------------+\n|                     |                | If Assistance Data were|\n|                     |                | requested then         |\n|                     |                | Delivery of Assistance |\n|                     |                | Data to MS             |\n|                     |                +------------------------+\n|                     |                  |                    |\n|                     |<-----------------|                    |\n|                     |                  |                    |\n|                     | PERFORM LOCATION |                    |\n|                     |   RESPONSE       |                    |\n|                     |                  |                    |\n|                     |                  |                    |\n|                     |                  |                    |\n|MAP PROCESS ACCESS   |                  |                    |\n|    SIGNALLING       |                  |                    |\n|<--------------------|                  |                    |\n| -an-APDU(           |                  |                    |\n| LOCATION RELATED    |                  |                    |\n|   DATA FAILURE)     |                  |                    |\n|                     |                  |                    |\n|                     |                  |                    |\n|MAP FORWARD ACCESS   |                  |                    |\n|    SIGNALLING       |                 -+-                   |\n|-------------------->|                                       |\n| -an-APDU(           |                                       |\n| LCS-MOLR Response)  |                                       |\n|                     |                                       |\n|                     |     LCS-MOLR Response                 |\n|                     |-------------------------------------->|\n|                     |                                       |\nFigure 68c: Signalling for the request of Assistance Data or De-ciphering Keys\nAfter the inter-MSC SRNS Relocation, the 3G MSC-B can perform intra-MSC UMTS to GSM handover. Any request for Assistance Data or De-ciphering keys received after completion of the intra-MSC UMTS to GSM requires that at the non anchor 3G MSC the received RANAP messages are mapped into the corresponding BSSMAP messages to be sent to the BSS, and the received BSSMAP messages are mapped into the corresponding RANAP messages to be sent over the E-interface to the anchor 3G-MSC.\nWhen the UE requires the delivery of Assistance Data for the GPS Assisted positioning method, the interworking between the RANAP messages encapsulated in MAP and the BSSMAP messages is as follows:\n-----------------------------------------------------------------\n|   29.002                         48.008          |Notes\n--------┼--------------------------------------------------┼-----\nForward |                                                  |\nmessage | \"For the forward messages please refer to the    |\n|  corresponding table in clause 4.9.4.4\"         |\n|                                                  |\n|                                                  |\n--------┼--------------------------------------------------┼-----\nResult  | MAP PROCESS ACCESS SIG.   PERFORM LOCATION       |\n|     request                  RESPONSE            |\n| -an-APDU(                                        |\n| LOCATION RELATED                                 |\n|   DATA FAILURE)                                  |\n|                                                  |\n| RANAP information       BSSMAP information       |\n|      elements:              elements:            |\n|                                                  |\n| Cause                     LCS Cause              |\n|   > Dedicated Assistance    > <any value>        |\n|     Data Not Available                           |\n|                                                  |\nWhen the UE requires the delivery of De-ciphering Keys for the GPS Assisted positioning method, the interworking between the RANAP messages encapsulated in MAP and the BSSMAP messages is as follows:\n-----------------------------------------------------------------\n|   29.002                         48.008          |Notes\n--------┼--------------------------------------------------┼-----\nForward |                                                  |\nmessage | \"For the forward messages please refer to the    |\n|  corresponding table in clause 4.9.4.4\"         |\n|                                                  |\n--------┼--------------------------------------------------┼-----\nResult  | MAP PROCESS ACCESS SIG.   PERFORM LOCATION       |\n|     request                  RESPONSE            |\n| -an-APDU(                                        |\n| LOCATION RELATED                                 |\n|   DATA FAILURE)                                  |\n|                                                  |\n| RANAP information       BSSMAP information       |\n|      elements:              elements:            |\n|                                                  |\n| Cause                     LCS Cause              |\n|   > Deciphering Keys        > <any value>        |\n|     Not Available                                |",
      "chunk_type": "general",
      "cross_references": [
        "clause_4.9.4.4",
        "figure_68"
      ]
    },
    {
      "chunk_id": "ts_29.010_4.9.6.1",
      "section_id": "4.9.6.1",
      "section_title": "Inter-MSC Handover (GSM to GSM)",
      "content": "After a successful Inter-MSC handover, any request of Assistance Data or De-ciphering keys received by the non anchor MSC via the DTAP message LCS-MOLR is handled as described in clause 4.9.4.1.\nIf the request is aborted by the anchor MSC the signalling is as shown in figure 69a.\nMSC-A               MSC-B                                    MS\n|                     |                                       |\n|                     |                                       |\n|                     |                                       |\n|                     |     LCS-MOLR                          |\n|                     |<--------------------------------------|\n|                     |                                       |\n|                     |                                       |\n|MAP PROCESS ACCESS   |                                       |\n|    SIGNALLING       |                                       |\n|<--------------------|                                       |\n| -an-APDU(LCS-MOLR)  |                                       |\n|                     |                                       |\n|                     |                                       |\n|MAP FORWARD ACCESS   |                                       |\n|    SIGNALLING       |                                       |\n|-------------------->|                                       |\n| -an-APDU(           |                                       |\n| PERFORM LOCATION    |                                       |\n|   REQUEST)          |                BSS-B                  |\n|                     |                                       |\n|                     |                  |                    |\n|                     |----------------->|                    |\n|                     |                  |                    |\n|                     | PERFORM LOCATION |                    |\n|                     |          REQUEST |                    |\n|                     |                  |                    |\n|MAP FORWARD ACCESS   |                  |                    |\n|    SIGNALLING       |                  |                    |\n|-------------------->|                  |                    |\n| -an-APDU(           |                  |                    |\n| PERFORM LOCATION    |                  |                    |\n|   ABORT)            |                  |                    |\n|                     |----------------->|                    |\n|                     |                  |                    |\n|                     | PERFORM LOCATION |                    |\n|                     |          ABORT   |                    |\n|                     |                  |                    |\n|                     |<-----------------|                    |\n|                     |                  |                    |\n|                     | PERFORM LOCATION |                    |\n|                     |         RESPONSE |                    |\n|                     |                  |                    |\n|                     |                  |                    |\n|                     |                  |                    |\n|MAP PROCESS ACCESS   |                  |                    |\n|    SIGNALLING       |                  |                    |\n|<--------------------|                  |                    |\n|  -an-APDU(          |                  |                    |\n|  PERFORM LOCATION   |                  |                    |\n|    RESPONSE)        |                  |                    |\n|                     |                  |                    |\n|                     |                  |                    |\n|MAP FORWARD ACCESS   |                  |                    |\n|    SIGNALLING       |                 -+-                   |\n|-------------------->|                                       |\n| -an-APDU(           |                                       |\n| LCS-MOLR Response)  |                                       |\n|                     |                                       |\n|                     |     LCS-MOLR Response                 |\n|                     |-------------------------------------->|\n|                     |                                       |\nFigure 69a: Signalling for the abortion of a request for Assistance Data or De-ciphering Keys\nAfter the inter-MSC handover, the MSC-B can perform intra-MSC GSM to UMTS handover. Any request for Assistance Data or De-ciphering keys received after completion of the intra-MSC GSM to UMTS handover is handled as for Inter-MSC Handover GSM to UMTS (see clause 4.9.4.2).\nIf the request is aborted the signalling is the same as for the abortion case for Inter-MSC Handover GSM to UMTS (see clause 4.9.6.2)",
      "chunk_type": "general",
      "cross_references": [
        "clause_4.9.4.1",
        "clause_4.9.4.2",
        "clause_4.9.6.2",
        "figure_69"
      ]
    },
    {
      "chunk_id": "ts_29.010_4.9.6.2",
      "section_id": "4.9.6.2",
      "section_title": "Inter-MSC Handover (GSM to UMTS)",
      "content": "After a successful Inter-MSC GSM to UMTS handover, any request of Assistance Data or De-ciphering keys received by the non anchor MSC via the DTAP message LCS-MOLR is handled as described in clause 4.9.4.1.\nIf the request is aborted by the anchor MSC the signalling is as shown in figure 69b.\nMSC-A              3G MSC-B                                  UE\n|                     |                                       |\n|                     |                                       |\n|                     |                                       |\n|                     |     LCS-MOLR                          |\n|                     |<--------------------------------------|\n|                     |                                       |\n|                     |                                       |\n|MAP PROCESS ACCESS   |                                       |\n|    SIGNALLING       |                                       |\n|<--------------------|                                       |\n| -an-APDU(LCS-MOLR)  |                                       |\n|                     |                                       |\n|                     |                                       |\n|MAP FORWARD ACCESS   |                                       |\n|    SIGNALLING       |                                       |\n|-------------------->|                                       |\n| -an-APDU(           |                                       |\n| PERFORM LOCATION    |                                       |\n|   REQUEST)          |                RNS-B                  |\n|                     |                                       |\n|                     |                  |                    |\n|                     |----------------->|                    |\n|                     |                  |                    |\n|                     |LOCATION RELATED  |                    |\n|                     |  DATA REQUEST    |                    |\n|                     |                  |                    |\n|                     |                  |                    |\n|MAP FORWARD ACCESS   |                  |                    |\n|    SIGNALLING       |                  |                    |\n|-------------------->|                  |                    |\n| -an-APDU(           |                  |                    |\n| PERFORM LOCATION    |                  |                    |\n|   ABORT)            |                  |                    |\n|                     |                  |                    |\n|                     |                  |                    |\n|MAP PROCESS ACCESS   |                  |                    |\n|    SIGNALLING       |                  |                    |\n|<--------------------|                  |                    |\n|  -an-APDU(          |                  |                    |\n|  PERFORM LOCATION   |                  |                    |\n|    RESPONSE)        |                  |                    |\n|                     |                  |                    |\n|                     |                  |                    |\n|MAP FORWARD ACCESS   |                  |                    |\n|    SIGNALLING       |                 -+-                   |\n|-------------------->|                                       |\n| -an-APDU(           |                                       |\n| LCS-MOLR Response)  |                                       |\n|                     |                                       |\n|                     |     LCS-MOLR Response                 |\n|                     |-------------------------------------->|\n|                     |                                       |\nFigure 69b: Signalling for the abortion of the request for Assistance Data or De-ciphering Keys\nThere\"s no  interworking between the BSSMAP Perform Location Abort and any RANAP message since it is not possible to abort a request for Assistance Data or De-ciphering Keys with  RANAP. The BSSMAP message Perform Location Response is generated by the non-anchor 3G MSC.\nAfter the inter-MSC GSM to UMTS handover, the 3G MSC-B can perform intra-MSC UMTS to GSM handover. Any request for Assistance Data or De-ciphering keys received after completion of the intra-MSC UMTS to GSM handover is handled as for Inter-MSC Handover GSM to GSM (see clause 4.9.4.1).\nIf the request is aborted the signalling is the same as for the abortion case for Inter-MSC Handover GSM to GSM (see clause 4.9.6.1)",
      "chunk_type": "general",
      "cross_references": [
        "clause_4.9.4.1",
        "clause_4.9.6.1",
        "figure_69"
      ]
    },
    {
      "chunk_id": "ts_29.010_4.9.6.3",
      "section_id": "4.9.6.3",
      "section_title": "Inter-MSC Handover (UMTS to GSM)",
      "content": "After a successful Inter-MSC UMTS to GSM handover, any request of Assistance Data or De-ciphering keys received by the non anchor MSC via the DTAP message LCS-MOLR is handled as described in clause 4.9.4.3.\nIf the request is aborted by the anchor 3G MSC the signalling is the same as for the abortion for Inter-MSC GSM to GSM handover abd is shown in figure 69a.\nAfter the inter-MSC UMTS to GSM handover, the 3G MSC-B can perform intra-MSC GSM to UMTS handover. Any request for Assistance Data or De-ciphering keys received after completion of the intra-MSC GSM to UMTS handover is handled as for Inter-MSC Handover GSM to UMTS (see clause 4.9.4.2)..\nIf the request is aborted the signalling is the same as for the abortion case for Inter-MSC Handover GSM to UMTS (see clause 4.9.6.2)",
      "chunk_type": "general",
      "cross_references": [
        "clause_4.9.4.3",
        "clause_4.9.4.2",
        "clause_4.9.6.2",
        "figure_69"
      ]
    },
    {
      "chunk_id": "ts_29.010_4.9.6.4",
      "section_id": "4.9.6.4",
      "section_title": "Inter-MSC SRNS Relocation",
      "content": "After a successful Inter-MSC SRNS Relocation , any request of Assistance Data or De-ciphering keys received by the non anchor 3G MSC via the DTAP message LCS-MOLR is handled as described in clause 4.9.4.4.\nThe request cannot be aborted by the 3G anchor MSC since RANAP does not support abortion of a request for Assistance Data or De-Ciphering Keys.",
      "chunk_type": "general",
      "cross_references": [
        "clause_4.9.4.4"
      ]
    },
    {
      "chunk_id": "ts_29.010_4.10.1",
      "section_id": "4.10.1",
      "section_title": "General",
      "content": "The general principles of the SRVCC handover procedures are specified in 3GPP TS 23.009 [2]. This clause provides a detailed specification for the interworking performed by the MSC Server enhanced for SRVCC. It defines in particular the encoding of RANAP and BSSMAP cause values to avoid different encodings in different implementations.",
      "chunk_type": "definition",
      "cross_references": [
        "ts_23.009"
      ]
    },
    {
      "chunk_id": "ts_29.010_4.10.2",
      "section_id": "4.10.2",
      "section_title": "SRVCC Handover from UTRAN (HSPA) to GERAN",
      "content": "Encoding of the cause code sent in BSSMAP Handover Request:\nWhen it receives the SRVCC PS to CS Request message from the SGSN (see 3GPP TS 29.280 [25]), the MSC Server enhanced for SRVCC shall set the BSSMAP Cause to the value 'Uplink quality' in the Handover Request message.",
      "chunk_type": "requirement",
      "cross_references": [
        "ts_29.280"
      ]
    },
    {
      "chunk_id": "ts_29.010_4.10.3",
      "section_id": "4.10.3",
      "section_title": "SRVCC Handover from UTRAN (HSPA) to UTRAN",
      "content": "Encoding of the cause code sent in RANAP Relocation Request:\nWhen it receives the SRVCC PS to CS Request message from the SGSN (see 3GPP TS 29.280 [25]), the MSC Server enhanced for SRVCC shall set the RANAP Cause to the value 'Time critical Relocation ' in the Relocation Request message.",
      "chunk_type": "requirement",
      "cross_references": [
        "ts_29.280"
      ]
    },
    {
      "chunk_id": "ts_29.010_4.10.4",
      "section_id": "4.10.4",
      "section_title": "SRVCC Handover from E-UTRAN to GERAN",
      "content": "Encoding of the cause code sent in BSSMAP Handover Request:\nWhen it receives the SRVCC PS to CS Request message from the MME (see 3GPP TS 29.280 [25]), the MSC Server enhanced for SRVCC shall set the BSSMAP Cause to the value 'Uplink quality' in the Handover Request message.",
      "chunk_type": "requirement",
      "cross_references": [
        "ts_29.280"
      ]
    },
    {
      "chunk_id": "ts_29.010_4.10.5",
      "section_id": "4.10.5",
      "section_title": "SRVCC Handover from E-UTRAN to UTRAN",
      "content": "Encoding of the cause code sent in RANAP Relocation Request:\nWhen it receives the SRVCC PS to CS Request message from the MME (see 3GPP TS 29.280 [25]), the MSC Server enhanced for SRVCC shall set the RANAP Cause to the value 'Time critical Relocation ' in the Relocation Request message.",
      "chunk_type": "requirement",
      "cross_references": [
        "ts_29.280"
      ]
    },
    {
      "chunk_id": "ts_29.010_5.1",
      "section_id": "5.1",
      "section_title": "General",
      "content": "This clause provides a detailed specification for the interworking performed by the MME.",
      "chunk_type": "definition",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.010_5.3",
      "section_id": "5.3",
      "section_title": "Interworking between RANAP protocol messages and S1AP protocol messages",
      "content": "This clause defines a mapping of RANAP and S1AP cause values used in connection with inter RAT Handover to avoid different mappings in different implementations.\nInter RAT Handover from UTRAN to LTE:\nTable 5.3.1 defines a cause value mapping performed by the MME when the MME receives the Forward Relocation Request message from the S4-SGSN.\nTable 5.3.1: Cause value mapping from RANAP Cause to S1AP Cause\n25.413 [7]\n36.413 [21]\nRELOCATION REQUIRED (RANAP Cause)\nHANDOVER REQUEST (S1AP Cause)\nGroup\nValue\nGroup\nValue\nRadio Network Layer Cause\nTime critical Relocation\nRadio Network Layer Cause\nTime critical handover\nRadio Network Layer Cause\nResource Optimisation Relocation\nRadio Network Layer Cause\nResource optimisation handover\nRadio Network Layer Cause\nReduce Load in Serving Cell\nRadio Network Layer Cause\nReduce load in serving cell\nAny other value\nRadio Network Layer Cause\nHandover Desirable for Radio Reasons\nFor inter RAT handover from UTRAN served by Gn/Gp-SGSN to LTE, the MME maps the RANAP cause in the GTPv1 Forward Relocation Request message to an S1AP cause as per Table 5.3.1.  The MME sends this S1AP cause in the S1AP Handover Request message to the eNodeB.\nFor inter RAT handover from UTRAN served by Gn/Gp-SGSN to LTE, if the handover fails in the LTE access, the MME maps the S1AP cause in the S1AP Handover Failure message to a RANAP cause by using the mapping in Table 6.2.1. The MME uses the RANAP cause in the GTPv1 Forward Relocation Response message to the Gn/Gp-SGSN.\nInter RAT Handover from LTE to UTRAN:\nThe table 5.3.2 defines a cause value mapping performed by the MME when the MME receives the Forward Relocation Response message from the S4-SGSN. This mapping is only needed if the inter RAT Handover failed in UTRAN.\nTable 5.3.2: Cause value mapping from RANAP Cause to S1AP Cause for failure case\n25.413 [7]\n36.413 [21]\nRELOCATION FAILURE (RANAP Cause)\nHANDOVER PREPARATION FAILURE (S1AP Cause)\nGroup\nValue\nGroup\nValue\nRadio Network Layer Cause\nNo Radio Resources Available in Target Cell\nRadio Network Layer Cause\nNo Radio Resources Available in Target Cell\nRadio Network Layer Cause\nRequested Ciphering and/or Integrity Protection algorithms not supported\nRadio Network Layer Cause\nEncryption and/or integrity protection algorithms not supported\nRadio Network Layer Cause\nTraffic Load In The Target Cell Higher Than In The Source Cell\nRadio Network Layer Cause\nNo Radio Resources Available in Target Cell\nMiscellaneous Cause\nO&M Intervention\nMiscellaneous Cause\nO&M Intervention\nAny other value\nRadio Network Layer Cause\nHandover Failure In Target EPC/eNB Or Target System\nFor inter RAT handover from LTE to UTRAN served by Gn/Gp-SGSN, the MME maps the S1AP cause in S1AP Handover Required message to a RANAP cause by using the mapping in Table 6.2.2. The MME uses this RANAP cause in the GTPv1 Forward Relocation Request message to the Gn/Gp-SGSN.\nFor inter RAT handover from LTE to UTRAN served by Gn/Gp-SGSN, if the handover fails in the UTRAN access, the MME maps the RANAP cause received in the GTPv1 Forward Relocation Response message to an S1AP cause as per Table 5.3.2. The MME sends this S1AP cause in the S1AP Handover Preparation Failure message to the eNodeB.",
      "chunk_type": "general",
      "cross_references": [
        "table_5.3.1",
        "table_6.2.1",
        "table_5.3.2",
        "table_6.2.2"
      ]
    },
    {
      "chunk_id": "ts_29.010_5.4",
      "section_id": "5.4",
      "section_title": "Interworking between BSSGP protocol messages and S1AP protocol messages",
      "content": "This clause defines a mapping of BSSGP and S1AP cause values used in connection with inter RAT Handover to avoid different mappings in different implementations.\nInter RAT Handover from GERAN to LTE:\nTable 5.4.1 defines a cause value mapping performed by the MME when the MME receives the GTPv2 Forward Relocation Request message from the S4-SGSN or the GTPv1 Forward Relocation Request message from Gn/Gp-SGSN (as per Annex D of 3GPP TS 23.401[22]).\nNOTE1:\tThe mapping in Table 5.4.1 has been derived based on Table 15.1 in 3GPP TS 29.060 [23] and Table 5.3.1 in this specification.\nTable 5.4.1: Cause value mapping from BSSGP Cause to S1AP Cause\n48.018 [24]\n36.413 [21]\nPS HANDOVER REQUIRED (BSSGP Cause)\nHANDOVER REQUEST (S1AP Cause)\nValue\nGroup\nValue\nUplink quality\nRadio Network Layer Cause\nTime critical handover\nUplink strength\nRadio Network Layer Cause\nTime critical handover\nDownlink quality\nRadio Network Layer Cause\nTime critical handover\nDownlink strength\nRadio Network Layer Cause\nTime critical handover\nDistance\nRadio Network Layer Cause\nTime critical handover\nTraffic\nRadio Network Layer Cause\nResource optimisation handover\nCell traffic congestion\nRadio Network Layer Cause\nReduce load in serving cell\nAny other value\nRadio Network Layer Cause\nHandover Desirable for Radio Reasons\nFor inter RAT handover from GERAN served by Gn/Gp-SGSN to LTE, if the handover fails in the LTE access, the MME maps the S1AP cause in S1AP Handover Failure message to a RANAP cause by using the mapping in Table 6.2.1. The MME uses the RANAP cause in the GTPv1 Forward Relocation Response message to the Gn/Gp-SGSN. The Gn-Gp/SGSN maps the RANAP cause to a BSSGP cause as per Table 15.2 in 3GPP TS 29.060 [23] and sends this BSSGP cause in the BSSGP PS Handover Required Nack message.\nInter RAT Handover from LTE to GERAN:\nTable 5.4.2 defines a cause value mapping performed by the MME when the MME receives the GTPv2 Forward Relocation Response message from the S4-SGSN or the GTPv1Forward Relocation Response message from the Gn/Gp-SGSN (as per Annex D of 3GPP TS 23.401[22]). This mapping is only needed if the inter RAT Handover failed in GERAN.\nNOTE2:\tThe mapping in Table 5.4.2 has been derived based on Table 15.4 in 3GPP TS 29.060 [23] and Table 5.3.2 in this specification.\nTable 5.4.2: Cause value mapping from BSSGP Cause to S1AP Cause for failure case\n48.018 [24]\n36.413 [21]\nPS HANDOVER REQUEST NACK\n(BSSGP Cause)\nHANDOVER PREPARATION FAILURE\n(S1AP Cause)\nValue\nGroup\nValue\nCell traffic congestion\nRadio Network Layer Cause\nNo Radio Resources Available in Target Cell\nO&M intervention\nMiscellaneous Cause\nO&M Intervention\nAny other value\nRadio Network Layer Cause\nHandover Failure In Target EPC/eNB Or Target System\nFor inter RAT handover from LTE to GERAN served by Gn/Gp-SGSN, the MME maps the S1AP cause in S1AP Handover Required message to a RANAP cause by using the mapping in Table 6.2.2. The MME uses the RANAP cause in the GTPv1 Forward Relocation Request message to the Gn/Gp-SGSN. The Gn-Gp/SGSN maps the RANAP cause to a BSSGP cause as per Table 15.3 in 3GPP TS 29.060 [23] and sends this BSSGP cause in the BSSGP PS Handover Request message.",
      "chunk_type": "general",
      "cross_references": [
        "table_5.4.1",
        "ts_29.060_table_15.1",
        "ts_29.060_table_5.3.1",
        "table_6.2.1",
        "ts_29.060_table_15.2",
        "table_5.4.2",
        "ts_29.060_table_15.4",
        "ts_29.060_table_5.3.2",
        "table_6.2.2",
        "ts_29.060_table_15.3",
        "ts_23.401",
        "ts_29.060"
      ]
    },
    {
      "chunk_id": "ts_29.010_6.1",
      "section_id": "6.1",
      "section_title": "General",
      "content": "This clause provides a detailed specification for the interworking performed by the S4-SGSN.",
      "chunk_type": "definition",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.010_6.2",
      "section_id": "6.2",
      "section_title": "Interworking between RANAP protocol messages and S1AP protocol messages",
      "content": "This clause defines a mapping of RANAP and S1AP cause values used in connection with inter RAT Handover to avoid different mappings in different implementations.\nInter RAT Handover from UTRAN to LTE:\nThe table 6.2.1 defines a cause value mapping performed by the S4-SGSN when the S4-SGSN receives the Forward Relocation Response message from the MME. This mapping is only needed if the inter RAT Handover failed in LTE.\nTable 6.2.1: Cause value mapping from S1AP Cause to RANAP Cause for failure case\n36.413 [21]\n25.413 [7]\nHANDOVER FAILURE (S1AP Cause)\nRELOCATION PREPARATION FAILURE (RANAP Cause)\nGroup\nValue\nGroup\nValue\nRadio Network Layer Cause\nNo Radio Resources Available in Target Cell\nRadio Network Layer Cause\nNo Radio Resources Available in Target Cell\nRadio Network Layer Cause\nEncryption and/or integrity protection algorithms not supported\nRadio Network Layer Cause\nRequested Ciphering and/or Integrity Protection algorithms not supported\nMiscellaneous Cause\nO&M Intervention\nMiscellaneous Cause\nO&M Intervention\nAny other value\nRadio Network Layer Cause\nRelocation Failure in Target CN/RNC or Target System\nInter RAT Handover from LTE to UTRAN:\nTable 6.2.2 defines a cause value mapping performed by the S4-SGSN when the S4-SGSN receives the Forward Relocation Request message from the MME.\nTable 6.2.2: Cause value mapping from S1AP Cause to RANAP Cause\n36.413 [21]\n25.413 [7]\nHANDOVER REQUIRED (S1AP Cause)\nRELOCATION REQUEST (RANAP Cause)\nRadio Network Layer Cause\nHandover Desirable for Radio Reasons\nRadio Network Layer Cause\nRelocation Desirable for Radio Reasons\nRadio Network Layer Cause\nTime Critical Handover\nRadio Network Layer Cause\nTime critical Relocation\nRadio Network Layer Cause\nReduce Load in Serving Cell\nRadio Network Layer Cause\nReduce Load in Serving Cell\nRadio Network Layer Cause\nCS Fallback Triggered\nRadio Network Layer Cause\nCS Fallback triggered\nAny other value\nRadio Network Layer Cause\nResource Optimized Relocation",
      "chunk_type": "general",
      "cross_references": [
        "table_6.2.1",
        "table_6.2.2"
      ]
    },
    {
      "chunk_id": "ts_29.010_6.3",
      "section_id": "6.3",
      "section_title": "Interworking between BSSGP protocol messages and S1AP protocol messages",
      "content": "This clause defines a mapping of BSSGP and S1AP cause values used in connection with inter RAT Handover to avoid different mappings in different implementations.\nInter RAT Handover from GERAN to LTE:\nTable 6.3.1 defines a cause value mapping performed by the S4-SGSN when the S4-SGSN receives the GTPv2 Forward Relocation Response message from the MME.\nNOTE1:\tThe mapping in Table 6.3.1 has been derived based on Table 6.2.1 in this specification and Table 15.2 in 3GPP TS 29.060 [23].\nTable 6.3.1: Cause value mapping from S1AP Cause to BSSGP Cause for failure case\n36.413 [21]\n48.018 [24]\nHANDOVER FAILURE (S1AP Cause)\nPS HANDOVER REQUIRED NACK (BSSGP Cause)\nGroup\nValue\nValue\nRadio Network Layer Cause\nNo Radio Resources Available in Target Cell\nCell traffic congestion\nRadio Network Layer Cause\nEncryption and/or integrity protection algorithms not supported\nRequested ciphering and/or integrity protection algorithms not supported\nMiscellaneous Cause\nO&M Intervention\nO&M Intervention\nAny other value\nRelocation failure in target system\nInter RAT Handover from LTE to GERAN:\nTable 6.3.2 defines a cause value mapping performed by the S4-SGSN when the S4-SGSN receives the GTPv2 Forward Relocation Request message from the MME.\nNOTE2:\tThe mapping in Table 6.3.2 has been derived based on Table 6.2.2 in this specification and Table 15.3 in 3GPP TS 29.060 [23].\nTable 6.3.2: Cause value mapping from S1AP Cause to BSSGP Cause\n36.413 [21]\n48.018 [24]\nHANDOVER REQUIRED (S1AP Cause)\nPS HANDOVER REQUEST (BSSGP Cause)\nGroup\nValue\nValue\nRadio Network Layer Cause\nHandover Desirable for Radio Reasons\nBetter cell\nRadio Network Layer Cause\nTime Critical Handover\nTime critical relocation\nRadio Network Layer Cause\nReduce Load in Serving Cell\nCell traffic congestion\nAny other value\nTraffic",
      "chunk_type": "general",
      "cross_references": [
        "table_6.3.1",
        "table_6.2.1",
        "ts_29.060_table_15.2",
        "ts_29.060_table_6.3.1",
        "table_6.3.2",
        "table_6.2.2",
        "ts_29.060_table_15.3",
        "ts_29.060_table_6.3.2",
        "ts_29.060"
      ]
    },
    {
      "chunk_id": "ts_29.010_6.4",
      "section_id": "6.4",
      "section_title": "Interworking between BSSGP protocol messages and RANAP protocol messages",
      "content": "For the mapping of BSSGP and RANAP cause values used in connection with inter RAT Handover between GERAN and UTRAN, the mapping tables in clause 15 in 3GPP TS 29.060 [23] applies.  The mapping is performed by the target S4-SGSN.",
      "chunk_type": "general",
      "cross_references": [
        "ts_29.060_clause_15",
        "ts_29.060"
      ]
    },
    {
      "chunk_id": "ts_29.010_7.1",
      "section_id": "7.1",
      "section_title": "General",
      "content": "This clause provides a detailed specification for the interworking performed by the AMF.",
      "chunk_type": "definition",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.010_7.2",
      "section_id": "7.2",
      "section_title": "Interworking between S1AP protocol messages and NGAP protocol messages",
      "content": "This clause defines a mapping of S1AP and NGAP cause values used in connection with inter RAT Handover to avoid different mappings in different implementations.\nInter RAT Handover from LTE to NG-RAN:\nTable 7.2.1 defines a cause value mapping performed by the AMF when the AMF receives the Forward Relocation Request message from the MME.\nTable 7.2.1: Cause value mapping from S1AP Cause to NGAP Cause\n36.413 [21]\n38.413 [26]\nHANDOVER REQUIRED (S1AP Cause)\nHANDOVER REQUEST (NGAP Cause)\nGroup\nValue\nGroup\nValue\nRadio Network Layer Cause\nTime critical Handover\nRadio Network Layer Cause\nTime critical handover\nRadio Network Layer Cause\nResource Optimisation Handover\nRadio Network Layer Cause\nResource optimisation handover\nRadio Network Layer Cause\nReduce Load in Serving Cell\nRadio Network Layer Cause\nReduce load in serving cell\nAny other value\nRadio Network Layer Cause\nHandover Desirable for Radio Reasons\nFor inter RAT handover from LTE served by MME to NG-RAN, the AMF maps the S1AP cause in the GTPv2 Forward Relocation Request message to an NGAP cause as per Table 7.2.1. The AMF sends this NGAP cause in the NGAP Handover Request message to the NG-RAN.\nThe table 7.2.2 defines a cause value mapping performed by the AMF when the AMF receives the NGAP Handover Failure message from the NG-RAN. This mapping is only needed if the inter RAT Handover failed in NG-RAN.\nTable 7.2.2: Cause value mapping from NGAP Cause to S1AP Cause for failure case\n38.413 [26]\n36.413 [21]\nHANDOVER FAILURE (NGAP Cause)\nHANDOVER PREPARATION FAILURE (S1AP Cause)\nGroup\nValue\nGroup\nValue\nRadio Network Layer Cause\nNo Radio Resources Available in Target Cell\nRadio Network Layer Cause\nNo Radio Resources Available in Target Cell\nRadio Network Layer Cause\nEncryption and/or integrity protection algorithms not supported\nRadio Network Layer Cause\nEncryption and/or integrity protection algorithms not supported\nRadio Network Layer Cause\nInsufficient UE Capabilities\nRadio Network Layer Cause\nInsufficient UE Capabilities\nMiscellaneous Cause\nO&M Intervention\nMiscellaneous Cause\nO&M Intervention\nAny other value\nRadio Network Layer Cause\nHandover Failure In Target EPC/eNB Or Target System\nFor inter RAT handover from LTE served by MME to NG-RAN, if the handover fails in the NG-RAN access, the AMF maps the NGAP cause in the NGAP Handover Failure message to a S1AP cause by using the mapping in Table 7.2.2. The AMF uses the S1AP cause in the GTPv2 Forward Relocation Response message to the MME.\nInter RAT Handover from NG-RAN to LTE:\nThe table 7.2.3 defines a cause value mapping performed by the AMF when the AMF receives the HANDOVER REQUIRED from the NG-RAN.\nTable 7.2.3: Cause value mapping from NGAP Cause to S1AP Cause\n38.413 [26]\n36.413 [21]\nHANDOVER REQUIRED (NGAP Cause)\nHANDOVER REQUEST (S1AP Cause)\nRadio Network Layer Cause\nHandover Desirable for Radio Reasons\nRadio Network Layer Cause\nHandover Desirable for Radio Reasons\nRadio Network Layer Cause\nTime Critical Handover\nRadio Network Layer Cause\nTime critical Handover\nRadio Network Layer Cause\nReduce Load in Serving Cell\nRadio Network Layer Cause\nReduce Load in Serving Cell\nAny other value\nRadio Network Layer Cause\nResource Optimized Relocation\nFor inter RAT handover from NG-RAN to LTE served by MME, the AMF maps the NGAP cause in NGAP Handover Required message to a S1AP cause by using the mapping in Table 7.2.3. The AMF uses this S1AP cause in the GTPv2 Forward Relocation Request message to the MME.\nTable 7.2.4 defines a cause value mapping performed by the AMF when the AMF receives the Forward Relocation Response message from the MME. This mapping is only needed if the inter RAT Handover failed in LTE.\nTable 7.2.4: Cause value mapping from S1AP Cause to NGAP Cause for failure case\n36.413 [21]\n38.413 [26]\nHANDOVER FAILURE (S1AP Cause)\nHANDOVER PREPARATION FAILURE (NGAP Cause)\nGroup\nValue\nGroup\nValue\nRadio Network Layer Cause\nNo Radio Resources Available in Target Cell\nRadio Network Layer Cause\nNo Radio Resources Available in Target Cell\nRadio Network Layer Cause\nEncryption and/or integrity protection algorithms not supported\nRadio Network Layer Cause\nEncryption and/or integrity protection algorithms not supported\nRadio Network Layer Cause\nNo Radio Resources Available in Target Cell\nRadio Network Layer Cause\nNo Radio Resources Available in Target Cell\nRadio Network Layer Cause\nInsufficient UE Capabilities\nRadio Network Layer Cause\nInsufficient UE Capabilities\nMiscellaneous Cause\nO&M Intervention\nMiscellaneous Cause\nO&M Intervention\nAny other value\nRadio Network Layer Cause\nHandover failure in target 5GC/ NG-RAN node or target system\nFor inter RAT handover from NG-RAN to LTE served by MME, if the handover fails in the LTE access, the AMF maps the S1AP cause received in the GTPv2 Forward Relocation Response message to an NGAP cause as per Table 7.2.4. The AMF sends this NGAP cause in the NGAP Handover Preparation Failure message to the NG-RAN.\nAnnex A (informative):Change history\nChange history\nDate\nMeeting\nTDoc\nCR\nRev\nCat\nSubject/Comment\nNew version\nSept 1999\nSept 1999\nTransferred to 3GPP CN\nCN#04\nCN#04\nApproved by mail exploder at CN#04\n3.0.0\nCN#06\nCN#06\n001\nUMTS / GSM Interworking\n3.1.0\nCN#06\nCN#06\n002\nAddition of LSA Information message\n3.1.0\nCN#07\nCN#07\n003r1\nUMTS / GSM Interworking\n3.2.0\nCN#07\nCN#07\n004r1\nGSM / UMTS Interworking\n3.2.0\nCN#07\nCN#07\n005\nUMTS/UMTS Handover\n3.2.0\nCN#09\nCN#09\n006r1\nClarification of use of Radio Resource Information\n3.3.0\nCN#09\nCN#09\n007r1\nCorrections and updates to align with current R99 specs\n3.3.0\nCN#10\nCN#10\n008\nGSM to 3G Handover: Location Reporting in 3G_MSC-B\n3.4.0\nCN#10\nCN#10\n009\nGSM to 3G Handover: Chosen IEs in Handover Request Ack\n3.4.0\nCN#10\nCN#10\n010\nGSM to 3G Handover: MAP parameter Target Cell ID\n3.4.0\nCN#10\nCN#10\n011r1\nGSM/UMTS Interworking: Mapping of cause codes\n3.4.0\nCN#11\nCN#11\n012\nGSM to UMTS handover: addition of MAP parameter Target RNC ID\n3.5.0\nCN#11\nCN#11\n013\nInter MSC relocation: addition of MAP parameter Target RNC ID\n3.5.0\nCN#11\nCN#11\n014\nRoaming restrictions for GPRS service\n3.5.0\nCN#11\nCN#11\n015\nAlignment of cause mapping for 08.08 and 25.413 (Directed Retry)\n3.5.0\nCN#11\nCN#11\n016\nUMTS to GSM Directed Retry cause code mapping\n3.5.0\nCN#11\nCN#11\n017\nMapping of unknown HLR error to access interface cause code\n3.5.0\nCN#11\nCN#11\nVersion increased from R99 to Rel-4\n4.0.0\nCN#12\nCN#12\n020r1\nAddition of selected UMTS algorithm indication to the handover procedures\n4.1.0\nCN#12\nCN#12\n022r1\nAddition of selected GSM algorithm indication to the handover procedures\n4.1.0\nCN#12\nCN#12\n024r1\nAddition of allowed UMTS algorithms indication to the handover procedures\n4.1.0\nCN#12\nCN#12\n026r1\nAddition of allowed GSM algorithms indication to the handover procedures\n4.1.0\nCN#12\nCN#12\n028r1\nAddition of GSM channel type and GSM chosen channel indications to handover procedures\n4.1.0\nCN#12\nCN#12\n030\nPartial Roaming – restriction by Location area\n4.1.0\nCN#12\nCN#12\n031\nMapping between RANAP and BSSMAP for Location Services\n4.1.0\nCN#12\nCN#12\n034r1\nMapping between RANAP and BSSMAP for Location Services\n4.1.0\nCN#14\nCN#14\n036r2\nLCS/HO Location Reporting – GSM to GSM, UMTS to GSM and UMTS to UMTS\n4.2.0\nCN#14\nCN#14\n040\nGlobal replace of BSS-APDU with AN-APDU\n4.2.0\nCN#14\nCN#14\n047\nRemoval of deleted MAP operations\n4.2.0\nCN#16\nCN#16\n048r1\nLCS: Mapping BSSMAP-RANAP for request of assistance data on E interface\n4.3.0\nCN#16\nCN#16\n051r1\nLCS: clarification of mapping for Location Acquisition\n4.3.0\nCN#16\nCN#16\n052\nCheck of NAM and Requesting Node Type on receipt of SendAuthenticationInfo\n4.3.0\nCN#16\nCN#16\n054r1\nAddition of Service Handover parameters to MAP Handover messages\n4.3.0\nCN#16\nCN#16\nVersion 5.0.0 created after CN#16.\n5.0.0\nCN#17\nCN#17\n060\nIntroduction of GERAN Iu-mode\n5.1.0\nCN#17\nCN#17\n069r2\nAddition of an error mapping table for MAP Update Location operation\n5.1.0\nCN#17\nCN#17\n075\nSupport for Shared Network in connected mode (using encapsulated BSSAP transport of SNA access information)\n5.1.0\nCN#18\nCN#18\n073r1\nLCS: Adding missing parameter mapping to assistance data request procedure after inter-MSC SRNS Relocation\n5.2.0\nCN#18\nCN#18\n077\nCorrection on the use of \"User Failure\" error for LCS-MOLR operation\n5.2.0\nCN#18\nCN#18\n078\nInterworking between security mode procedure and relocation\n5.2.0\nCN#18\nCN#18\n084r3\nCorrection to the Service Handover parameters\n5.2.0\nCN#20\nCN#20\n088\nCorrection of LCS cause mapping between RANAP and BSSMAP\n5.3.0\nCN#20\nCN#20\n089r1\nHandling of UE-specific behaviour data in the relay MSC\n5.3.0\nCN#20\nCN#20\n090\nHandling of UE-specific behaviour data in the relay MSC\n5.3.0\nJuly 2003\nJuly 2003\nImplemented CR 29.010-090 removed\n5.3.1\nCN#21\nCN#21\n091\nAddition of Early UE specific cause code mapping\n5.4.0\nCN#21\nCN#21\n092r2\nInformation transfer at MAP-E interface during inter MSC handover/relocation\n6.0.0\nCN#22\nCN#22\n095\nWrong message appears in message flow\n6.1.0\nCN#23\nCN#23\n100r1\nCorrection of inter system handover cause mapping\n6.2.0\nCN#23\nCN#23\n101r1\nInclude administrative restriction subscription parameter\n6.2.0\nCN#23\nCN#23\n103r2\nChange to cause code mappings\n6.2.0\nCN#24\nCN#24\n106r3\nRemoving of non-existing error indications from Location update mappings\n6.3.0\nCN#24\nCN#24\n107\nAddition of cause code mapping for BSSAP Clear Request and RANAP Iu Release Request\n6.3.0\nCN#25\nCN#25\n108r2\nAddition of cause code mapping to the routing area update procedure\n6.4.0\nCN#25\nCN#25\n110\nAddition of cause code mapping for inter-system handover\n6.4.0\nCN#27\nCN#27\n112\nCorrection of partly implemented CR108\n6.5.0\nCT#28\nCT#28\n111r2\nFull RANAP support of network initiated SCUDIF\n6.6.0\nCT#29\nCT#29\n115\nCorrection of cause code mapping for the routing area update procedure\n6.7.0\nCT#31\nCT#31\n0118\nAddition of UMTS Trace parameters to handover procedure\n6.8.0\nCT#31\nCT#31\n0117r2\nAddition of new cause \"Additional roaming not allowed \" in RAU and LAU\n7.0.0\nCT#32\nCT#32\n0119r2\nUse of cause #12 in VPLMNs\n7.1.0\nCT#32\nCT#32\n0121\nAlignment of Cause Mapping\n7.1.0\nCT#42\nCT#42\nUpgraded unchanged from Rel-7\n8.0.0\nCT#46\nCT#46\n124r2\nAddition of missing cause code mapping for EPC\n8.1.0\nCT#46\nCT#46\n0125r1\nRANAP Cause and S1AP Cause mapping\n9.0.0\nCT#48\nCT#48\n0126r1\nRemoval of MME mapping between Diameter error codes and NAS CC's\n9.1.0\nCT#50\nCT#50\n0128r1\nMissing BSSGP/RANAP/S1AP Cause Code mapping for IRAT Handover\n9.2.0\nCT#50\nCT#50\n0130r1\nWrong Reference for BSSMAP messages\n10.0.0\nCT#52\nCT#52\n0132r2\nBSSMAP/RANAP/S1AP Cause Code mapping for SRVCC Handover\n10.1.0\nCT#53\nCT#53\n0134\nAlgorithm list handling in MSC-B\n10.2.0\nJan 2012\nJan 2012\nEditorial corrections in clause 5 and 6.\n10.2.1\nCT#56\nCT#56\n0135\nRegional Subscription and CSG Information Propagation\n11.0.0\nCT#63\nCT#63\n0136r2\nError mapping for \"Data Missing\"\n11.1.0\n2014-09\n-\nUpdate to Rel-12 version (MCC)\n12.0.0\n2015-12\n0139\nMapping of the S1AP cause 'CS Fallback Triggered'\n13.0.0\n2017-03\nCT#75\n-\nUpdate to Rel-14 version (MCC)\n14.0.0\n2018-06\nCT#80\n-\nUpdate to Rel-15 version (MCC)\n15.0.0\n2018-12\nCT#82\nCP-183237\n0140\n2\nF\nS1AP Cause and NGAP Cause mapping in the AMF\n15.1.0\n2020-07\nCT#88e\n-\n-\n-\n-\nUpdate to Rel-16 version (MCC)\n16.0.0\n2021-12\nCT#94e\nCP-213140\n0141\n-\nF\nMapping of NGAP and S1AP Insufficient UE Capabilities Cause value\n16.1.0\n2022-04\n-\n-\n-\n-\n-\nUpdate to Rel-17 version (MCC)\n17.0.0\n2024-03\n-\n-\n-\n-\n-\nUpdate to Rel-18 version (MCC)\n18.0.0",
      "chunk_type": "general",
      "cross_references": [
        "clause_5",
        "table_7.2.1",
        "table_7.2.2",
        "table_7.2.3",
        "table_7.2.4",
        "ts_4.2"
      ]
    }
  ]
}