{
  "metadata": {
    "specification_id": "ts_29.292",
    "version": "18.1.0",
    "title": "3GPP TS 29.292",
    "file_path": "/content/drive/MyDrive/RAG_thesis/data/29_series/29292-i10/29292-i10.docx"
  },
  "export_info": {
    "export_date": "2025-07-26T09:04:47.555349",
    "total_chunks": 165
  },
  "chunks": [
    {
      "chunk_id": "ts_29.292_1",
      "section_id": "1",
      "section_title": "Scope",
      "content": "IMS Centralized Services (ICS) enable the delivery of IM CN subsystem based multimedia telephony and supplementary services as defined in 3GPP TS 24.173 [4] to users regardless of the attached access network type; e.g. CS domain access or IP-CAN.\nThe present document specifies the principles of interworking between the IM CN subsystem and CS domain in order to enable ICS for UEs using CS domain access.\nThe present document addresses the area of registration procedures interworking between the CS domain and IM CN subsystem.\nThe present document addresses the areas of control and user plane interworking between the IM CN subsystem and CS domain through an MSC Server enhanced for ICS and CS-MGW respectively. This includes the signalling procedures between the MSC Server and CS-MGW. For the specification of control plane interworking, present document defines the protocol interworking between the 3GPP profile of SIP as described in 3GPP TS 24.229 [2] and NAS signalling as described in 3GPP TS 24.008 [3] required for the support of IM CN subsystem based multimedia telephony and supplementary services.\nThe present document addresses the area of supplementary service configuration interworking between the CS domain and IM CN subsystem.\nThe present document is applicable to the MSC Server and CS-MGW.",
      "chunk_type": "general",
      "cross_references": [
        "ts_24.173",
        "ts_24.229",
        "ts_24.008"
      ]
    },
    {
      "chunk_id": "ts_29.292_2",
      "section_id": "2",
      "section_title": "References",
      "content": "The following documents contain provisions which, through reference in this text, constitute provisions of the present document.\n-\tReferences are either specific (identified by date of publication, edition number, version number, etc.) or non‑specific.\n-\tFor a specific reference, subsequent revisions do not apply.\n-\tFor a non-specific reference, the latest version applies. In the case of a reference to a 3GPP document (including a GSM document), a non-specific reference implicitly refers to the latest version of that document in the same Release as the present document.\n[1]\t3GPP TR 21.905: \"Vocabulary for 3GPP Specifications\".\n[2]\t3GPP TS 24.229: \"IP Multimedia Call Control Protocol based on SIP and SDP\".\n[3]\t3GPP TS 24.008: \"Mobile radio interface layer 3 specification; Core Network protocols; Stage 3\".\n[4]\t3GPP TS 24.173: \"IMS multimedia telephony communication service and supplementary services; Stage 3\".\n[5]\t3GPP TS 23.292: \"IP Multimedia Subsystem (IMS) Centralized Services; Stage 2\".\n[6]\t3GPP TS 23.002: \"Network Architecture\".\n[7]\t3GPP TS 24.292: \"IP Multimedia (IM) Core Network (CN) subsystem Centralized Services (ICS); Stage 3\".\n[8]\t3GPP TS 23.018: \"Basic call handling; Technical realization\".\n[9]\t3GPP TS 22.003: \"Circuit Teleservices supported by a Public Land Mobile Network (PLMN)\".\n[10]\t3GPP TS 23.003: \"Numbering, addressing and identification\".\n[11]\t3GPP TS 29.232: \"Media Gateway Controller (MGC) – Media Gateway (MGW) interface; Stage 3\".\n[12]\t3GPP TS 24.081: \"Line Identification Supplementary Services – Stage 3\".\n[13]\tVoid\n[14]\t3GPP TS 24.608: \"Terminating Identification Presentation (TIP) and Terminating Identification Restriction (TIR) using IP Multimedia (IM) Core Network (CN) subsystem; Protocol specification\".\n[15]\t3GPP TS 25.414: \"UTRAN Iu interface data transport and transport signalling\".\n[16]\t3GPP TS 25.415: \"UTRAN Iu interface user plane protocols\".\n[17]\t3GPP TS 25.411: \"UTRAN Iu interface layer 1\".\n[18]\t3GPP TS 29.414: \"Core network Nb data transport and transport signalling\".\n[19]\t3GPP TS 48.004: \"Base Station System – Mobile-services Switching Centre (BSS – MSC) interface; Layer 1 specification\".\n[20]\t3GPP TS 29.002: \"Mobile Application Part (MAP) specification\".\n[21]\tVoid.\n[22]\t3GPP TS 26.226: \"CTM Cellular Text telephony Modem, General description\".\n[23]\t3GPP TS 24.604: \"Communication Diversion (CDIV) using IP Multimedia (IM) Core Network (CN) subsystem; Protocol specification\".\n[24]\t3GPP TS 24.082: \"Call Forwarding (CF) supplementary services; Stage 3\".\n[25]\t3GPP TS 24.072: \"Call Deflection (CD) Supplementary Service; Stage 3\".\n[26]\t3GPP TS 24.083: \"Call Waiting (CS) and Call Hold (HOLD) supplementary services; Stage 3\".\n[27]\t3GPP TS 24.610: \"Communication HOLD (HOLD) using IP Multimedia (IM) Core Network (CN) subsystem; Protocol specification\".\n[28]\t3GPP TS 26.114: \"IP Multimedia Subsystem (IMS); Multimedia Telephony; Media handling and interaction\".\n[29]\t3GPP TS 24.080: \"Mobile radio interface layer 3 supplementary services specification; Formats and coding\".\n[30]\t3GPP TS 24.088: \"Call Barring (CB) Supplementary Service – Stage 3\".\n[31]\t3GPP TS 24.611: \"Anonymous Communication Rejection (ACR) and Communication Barring (CB); using IP Multimedia (IM) Core Network (CN) subsystem; Protocol specification\".\n[32]\t3GPP TS 24.091: \"Explicit Call Transfer (ECT) supplementary service; Stage 3\".\n[33]\t3GPP TS 24.629: \"Explicit Communication Transfer (ECT) using IP Multimedia (IM) Core Network (CN) subsystem; Protocol specification\".\n[34]\t3GPP TS 24.084: \"Multi Party (MPTY) supplementary service – Stage 3\".\n[35]\t3GPP TS 24.605: \"Conference (CONF) using IP Multimedia (IM) Core Network (CN) subsystem; Protocol specification\".\n[36]\t3GPP TS 24.147: \"Conferencing using the IP Multimedia (IM) Core Network (CN) subsystem; Stage 3\".\n[37]\t3GPP TS 23.009: \"Handover procedures\".\n[38]\t3GPP TS 48.103: \"Base Station System – Media GateWay (BSS-MGW) interface; User Plane transport mechanism\".\n[39]\t3GPP TS 23.205: \"Bearer Independent switched core network; Stage 2\".\n[40]\t3GPP TS 23.231: \"SIP-I based circuit-switched core network; Stage 2\".\n[41]\t3GPP TS 24.010: \"Mobile radio interface layer 3 Supplementary services specification; General aspects\".\n[42]\t3GPP TS 24.623: \"Extensible Markup Language (XML) Configuration Access Protocol (XCAP) over the Ut interface for Manipulating Supplementary Services\".\n[43]\t3GPP TS 24.607: \"Originating Identification Presentation (OIP) and Originating Identification Restriction (OIR) using IP Multimedia (IM) Core Network (CN) subsystem; Protocol specification\".\n[44]\t3GPP TS 24.615: \"Communication Waiting (CW) using IP Multimedia (IM) Core Network (CN) subsystem; Protocol specification\".\n[45]\tIETF RFC 3326: \"The Reason Header Field for the Session Initiation Protocol (SIP)\".\n[46]\t3GPP TS 29.163: \"Interworking between the IP Multimedia (IM) Core Network (CN) subsystem and Circuit Switched (CS) networks\".\n[47]\tIETF RFC 5009: \"Private Header (P-Header) Extension to the Session Initiation Protocol (SIP) for Authorization of Early Media\".\n[48]\tIETF RFC 3168: \"The Addition of Explicit Congestion Notification (ECN) to IP\".\n[49]\tIETF RFC 6679: \"Explicit Congestion Notification (ECN) for RTP over UDP\".\n[50]\tIETF RFC 3959: \"The Early Session Disposition Type for the Session Initiation Protocol (SIP)\".\n[51]\t3GPP TS 24.182: \"IP Multimedia Subsystem (IMS) Customized Alerting Tones (CAT); Protocol specification\".\n[52]\t3GPP TS 24.642: \"Completion of Communications to Busy Subscriber (CCBS) and Completion of Communications by No Reply (CCNR) using IP Multimedia (IM) Core Network (CN) subsystem\".\n[53]\t3GPP TS 24.093: \"Completion of Calls to Busy Subscriber (CCBS); Stage 3\".\n[54]\t3GPP TS 22.153: \"Multimedia Priority Service\".\n[55]\tIETF RFC 4458: \"Session Initiation Protocol (SIP) URIs for Applications such as Voicemail and Interactive Voice Response (IVR)\".\n[56]\t3GPP TS 32.260: \"Telecommunication management; Charging management; IP Multimedia Subsystem (IMS) charging\".\n[57]\tIETF RFC 3262: \"Reliability of provisional responses in Session Initiation Protocol (SIP)\".\n[58]\tIETF RFC 3312: \"Integration of Resource Management and Session Initiation Protocol (SIP)\".\n[59]\tIETF RFC 4032: \"Update to the Session Initiation Protocol (SIP) Preconditions Framework\".\n[60]\tVoid.\n[61]\t3GPP TS 26.441: \"Codec for Enhanced Voice Services (EVS); General Overview\".\n[62]\t3GPP TS 26.445: \"Codec for Enhanced Voice Services (EVS); Detailed Algorithmic Description\".\n[63]\tIETF RFC 5939:\"Session Description Protocol (SDP) Capability Negotiation\".\n[64]\t3GPP TS 23.333:\" Multimedia Resource Function Controller (MRFC) - Multimedia Resource Function Processor (MRFP) Mp interface: Procedures Descriptions\".\n[65]\tIETF RFC 8197: \"A SIP Response Code for Unwanted Calls\".\n[66]\tIETF RFC 8224: \"Authenticated Identity Management in the Session Initiation Protocol (SIP)\".\n[67]\tITU-T Recommendation Q.850 (05/1998) including Amendment 1 (07/2001): \"Usage of cause and location in the Digital Subscriber Signalling System No. 1 and the Signalling System No. 7 ISDN User Part\".\n[68]\tIETF RFC 8606: \"ISDN User Part (ISUP) Cause Location Parameter for the SIP Reason Header Field\".\n[69]\tIETF RFC 8445: \"Interactive Connectivity Establishment (ICE): A Protocol for Network Address Translator (NAT) Traversal\".\n[70]\tIETF RFC 8839: \"Session Description Protocol (SDP) Offer/Answer Procedures for Interactive Connectivity Establishment (ICE)\".\n[71]\t3GPP TS 26.250: \"Codec for Immersive Voice and Audio Services; General overview\".\n[72]\t3GPP TS 26.253: \"Codec for Immersive Voice and Audio Services; Detailed Algorithmic Description incl. RTP payload format and SDP parameter definitions\".",
      "chunk_type": "general",
      "cross_references": [
        "ts_21.905",
        "ts_24.229",
        "ts_24.008",
        "ts_24.173",
        "ts_23.292",
        "ts_23.002",
        "ts_24.292",
        "ts_23.018",
        "ts_22.003",
        "ts_23.003",
        "ts_29.232",
        "ts_24.081",
        "ts_24.608",
        "ts_25.414",
        "ts_25.415",
        "ts_25.411",
        "ts_29.414",
        "ts_48.004",
        "ts_29.002",
        "ts_26.226",
        "ts_24.604",
        "ts_24.082",
        "ts_24.072",
        "ts_24.083",
        "ts_24.610",
        "ts_26.114",
        "ts_24.080",
        "ts_24.088",
        "ts_24.611",
        "ts_24.091",
        "ts_24.629",
        "ts_24.084",
        "ts_24.605",
        "ts_24.147",
        "ts_23.009",
        "ts_48.103",
        "ts_23.205",
        "ts_23.231",
        "ts_24.010",
        "ts_24.623",
        "ts_24.607",
        "ts_24.615",
        "ts_29.163",
        "ts_24.182",
        "ts_24.642",
        "ts_24.093",
        "ts_22.153",
        "ts_32.260",
        "ts_26.441",
        "ts_26.445",
        "ts_23.333",
        "ts_26.250",
        "ts_26.253"
      ]
    },
    {
      "chunk_id": "ts_29.292_3.1",
      "section_id": "3.1",
      "section_title": "Definitions",
      "content": "For the purposes of the present document, the terms and definitions given in 3GPP TR 21.905 [1] and the following apply. A term defined in the present document takes precedence over the definition of the same term, if any, in 3GPP TR 21.905 [1].\nICE lite: The lite implementation of the Interactive Connectivity Establishment (ICE) specified in IETF RFC 8445 [69].\nFull ICE: The full implementation of the Interactive Connectivity Establishment (ICE) specified in IETF RFC 8445 [69].\nNAS signalling: layer 3 signalling carried over CS domain access between the UE and MSC Server as defined in 3GPP TS 24.008 [3].\nFor the purposes of the present document, the following terms and definitions given in 3GPP TS 24.629 [33] apply:\ntransferee\ntransferor\ntransfer target",
      "chunk_type": "definition",
      "cross_references": [
        "ts_21.905",
        "ts_24.008",
        "ts_24.629"
      ]
    },
    {
      "chunk_id": "ts_29.292_3.2",
      "section_id": "3.2",
      "section_title": "Abbreviations",
      "content": "For the purposes of the present document, the abbreviations given in 3GPP TR 21.905 [1] and the following apply. An abbreviation defined in the present document takes precedence over the definition of the same abbreviation, if any, in 3GPP TR 21.905 [1].\n3PCC\t3rd Party Call Control\nACR\tAnonymous Communication Rejection\nBAIC\tBarring of All Incoming Calls\nBAOC\tBarring of All Outgoing Calls\nBIC-Roam\tBarring of Incoming Calls when Roaming outside the home PLMN country\nBOIC\tBarring of Outgoing International Calls\nBOIC-exHC\tBarring of Outgoing International Calls except those directed to the Home PLMN Country\nCB\tCommunication Barring\nCCBS\tCompletion of Communication to Busy Subscriber\nCCNL\tCompletion of Communications on Not Logged-in\nCCNR\tCompletion of Communications on No Reply\nCD\tCommunication Deflection\nCDIV\tCommunication DIVersion\nCFNL\tCommunication Forwarding on Not Logged-in\nCFNR\tCommunication Forwarding No Reply\nCFNRc\tCommunication Forwarding on subscriber Not Reachable\nCFU\tCommunication Forwarding Unconditional\nCONF\tCONFerence\nCS\tCircuit Switched\nCS-MGW\tCircuit Switched Media Gateway\nECN\tExplicit Congestion Notification\nECT\tExplicit Communication Transfer\nEVS\tEnhanced Voice Services\nGRUU\tGlobally Routable User Agent URI\nHOLD\tcommunication HOLD\nICB\tIncoming Communication Barring\nICE\tInteractive Connectivity Establishment\nICS\tIM CN subsystem Centralized Services\nIMS-MGW\tIP Multimedia Subsystem-Media Gateway Function\nIuFP\tIu Framing Protocol\nIVAS\tImmersive Voice and Audio Services\nMboIP\tMb over IP\nMRFP\tMedia Resource Function Processor\nMPS\tMultimedia Priority Service\nNAS\tNon Access Stratum\nOCB\tOutgoing Communication Barring\nOIP\tOriginating Identification Presentation\nOIR\tOriginating Identification Restriction\nRTCP\tRTP Control Protocol\nSDPCapNeg\tSDP Capability Negotiation\nTDM\tTime Division Multiplex\nTIP\tTerminating Identification Presentation\nTIR\tTerminating Identification Restriction",
      "chunk_type": "general",
      "cross_references": [
        "ts_21.905"
      ]
    },
    {
      "chunk_id": "ts_29.292_4.1",
      "section_id": "4.1",
      "section_title": "Interworking reference model",
      "content": "Figure 4.1.1 details the reference model required to support interworking between the 3GPP IM CN subsystem and CS domain access for IM basic voice calls and supplementary services.\nNOTE 1:\tThe logical split of the signalling and bearer path between the CS access network and MSC Server enhanced for ICS is as shown; however, the signalling and bearer may be directly connected to the MGW.\nNOTE 2:\tThe CS-MGW may be connected via the Mb reference point to various network entities, such as a UE (via a GTP tunnel to a GGSN), an MRFP, or an IMS-MGW, or a remote CS-MGW.\nFigure 4.1.1: MSC Server – IM CN subsystem interworking reference model",
      "chunk_type": "general",
      "cross_references": [
        "figure_4.1.1"
      ]
    },
    {
      "chunk_id": "ts_29.292_4.2",
      "section_id": "4.2",
      "section_title": "Interworking reference points and interfaces",
      "content": "The reference points and network interfaces shown in figure 4.1.1 are as described:\nA reference point: The A reference point is defined in 3GPP TS 23.002 [6].\nIuCS reference point: The IuCS reference point is defined in 3GPP TS 23.002 [6].\nI2 reference point: The call control protocol specified in this document for use on the I2 reference point (i.e. between MSC Server enhanced for ICS and CSCF) is based on Mw reference point as defined in 3GPP TS 23.002 [6] and the 3GPP profile of SIP as defined in accordance with 3GPP TS 24.229 [2].\nMc reference point: The Mc reference point is defined in 3GPP TS 23.002 [6].\nMb reference point: The Mb reference point is defined 3GPP TS 23.002 [6].",
      "chunk_type": "general",
      "cross_references": [
        "figure_4.1.1",
        "ts_23.002",
        "ts_24.229"
      ]
    },
    {
      "chunk_id": "ts_29.292_4.3.1",
      "section_id": "4.3.1",
      "section_title": "MSC Server enhanced for ICS",
      "content": "This is the component which provides the interworking between CS domain access and IM CN subsystem control planes, and it shall support the functions as defined in accordance with 3GPP TS 23.002 [6].\nFor brevity, where the term \"MSC Server\" is used in the rest of the specification, this shall be understood as \"MSC Server enhanced for ICS\".",
      "chunk_type": "requirement",
      "cross_references": [
        "ts_23.002"
      ]
    },
    {
      "chunk_id": "ts_29.292_4.3.2",
      "section_id": "4.3.2",
      "section_title": "Circuit Switched Media Gateway Function (CS-MGW)",
      "content": "This is the component which provides the interworking between CS domain access and IM CN subsystem user planes, and it shall support the functions as defined in accordance with 3GPP TS 23.002 [6].",
      "chunk_type": "requirement",
      "cross_references": [
        "ts_23.002"
      ]
    },
    {
      "chunk_id": "ts_29.292_4.4",
      "section_id": "4.4",
      "section_title": "Control plane interworking",
      "content": "Within the IM CN subsystem, the 3GPP profile of SIP defined in 3GPP TS 24.229 [2] is used for session control.\nOver CS domain access, NAS signalling is used for call origination, call termination and supplementary services.\nTherefore, in order to provide the required interworking to enable ICS for UE using CS domain access, the control plane protocols shall be interworked within the MSC Server.",
      "chunk_type": "general",
      "cross_references": [
        "ts_24.229"
      ]
    },
    {
      "chunk_id": "ts_29.292_4.5",
      "section_id": "4.5",
      "section_title": "User plane interworking",
      "content": "Within the IM CN subsystem, framing protocols such as RTP are used to transport media packets to and from IM CN subsystem entities such as the UE, MRFP or IMS-MGW.\nCS domain access uses circuit switched bearer channels like TDM circuits (e.g. 64kbits PCM), ATM/AAL2 circuits or IP bearers using the IuFP framing protocol or RTP to carry voice frames.\nTherefore, in order to provide the required interworking to enable ICS for a UE using CS domain access, the user plane protocols shall be interworked within the CS-MGW, under the control of the MSC Server.",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.292_5.1",
      "section_id": "5.1",
      "section_title": "General",
      "content": "The following subclauses define the procedures and signalling interworking performed by the MSC Server to enable ICS for UEs attached to the CS domain. The interworking between NAS signalling and the Session Initiation Protocol (SIP) with its associated Session Description Protocol (SDP) is specified.\nThe capabilities of SIP and SDP that are interworked with NAS signalling are defined in 3GPP TS 24.229 [2].\nTable 5.1.1 lists the service interworking within the scope of the present document.\nTable 5.1.1: Interworking between NAS signalling and SIP/SDP\nTelephony or Supplementary Service\nTS11 non-emergency speech calls\nOriginating Identification Presentation (OIP)\nOriginating Identification Restriction (OIR)\nTerminating Identification presentation (TIP)\nTerminating Identification restriction (TIR)\nCommunication Hold and Resume\nCommunication Waiting\nCommunication Barring\nCommunication Diversion\nExplicit Communication Transfer\nConferencing\nCommunication Completion to Busy Subscriber (CCBS)\nCommunication Completion on No Reply (CCNR)\nCommunication Completion on Not Logged-in (CCNL)",
      "chunk_type": "definition",
      "cross_references": [
        "ts_24.229_table_5.1.1",
        "table_5.1.1",
        "ts_24.229"
      ]
    },
    {
      "chunk_id": "ts_29.292_5.2.1",
      "section_id": "5.2.1",
      "section_title": "Initial registration",
      "content": "Upon successful completion of the location updating procedure as specified in 3GPP TS 24.008 [3], an MSC Server supporting the ICS Indicator parameter as specified in 3GPP TS 29.002 [20] shall determine whether to perform initial IMS registration on behalf of the UE.\nThe relevant location update case, when an initial registration is needed to the IM CN subsystem is a location update to new MSC/VLR service area (the MSC/VLR was not the previous serving network element).\nIn accordance with 3GPP TS 23.292 [5], clause 7.2.1.1, the MSC Server may perform an initial IMS registration. The optional flag referred to in clause 7.2.1.1 of 3GPP TS 23.292 [5] is implemented as the ICS Indicator parameter in 3GPP TS 29.002 [20].\nWhen performing initial IMS registration, the MSC Server shall send a REGISTER request on behalf of the UE as described in 3GPP TS 24.292 [7].",
      "chunk_type": "requirement",
      "cross_references": [
        "ts_23.292_clause_7.2.1.1",
        "ts_24.008",
        "ts_29.002",
        "ts_23.292",
        "ts_24.292"
      ]
    },
    {
      "chunk_id": "ts_29.292_5.2.2",
      "section_id": "5.2.2",
      "section_title": "Reregistration",
      "content": "The MSC Server shall initiate reregistration for a previously registered Public User Identity as described in 3GPP TS 24.292 [7] if that subscriber is still registered in the MSC Server via CS domain access.",
      "chunk_type": "requirement",
      "cross_references": [
        "ts_24.292"
      ]
    },
    {
      "chunk_id": "ts_29.292_5.2.3",
      "section_id": "5.2.3",
      "section_title": "MSC Server initiated deregistration",
      "content": "The MSC Server shall send a REGISTER request for deregistration on behalf of the UE as described in 3GPP TS 24.292 [7] upon receipt of any indication that the subscriber is no longer registered in this MSC Server.\nPrior to sending a REGISTER request for deregistration, the MSC Server shall release all IMS dialogs related to the Public User Identity that is going to be deregistered or to one of the implicitly registered Public User Identities.",
      "chunk_type": "requirement",
      "cross_references": [
        "ts_24.292"
      ]
    },
    {
      "chunk_id": "ts_29.292_5.3.1",
      "section_id": "5.3.1",
      "section_title": "General",
      "content": "The mobile originating call shall be established in accordance with 3GPP TS 23.018 [8] and 3GPP TS 24.008 [3]. The IM CN subsystem originating session shall be established in accordance with 3GPP TS 24.292 [7] and 3GPP TS 24.229 [2]. The following subclauses describe the additional requirements for interworking between NAS signalling and SIP.\nThe following subclauses also assume the originating call is received from a subscriber with an active IM CN subsystem registration via the MSC Server performing the interworking.",
      "chunk_type": "definition",
      "cross_references": [
        "ts_23.018",
        "ts_24.008",
        "ts_24.292",
        "ts_24.229"
      ]
    },
    {
      "chunk_id": "ts_29.292_5.3.2",
      "section_id": "5.3.2",
      "section_title": "Receipt of a setup message",
      "content": "Upon receipt of a setup message (a SETUP message or an EMERGENCY SETUP message), the MSC Server shall determine whether the originating call shall be directed to the IM CN subsystem.\nThe originating call shall be directed to the IM CN subsystem if all of the following conditions are met:\n-\tthe setup message is a SETUP message and is determined by the MSC Server not to be an emergency call, and\n-\tthe bearer capability 1 information element indicates teleservice 11 as described in 3GPP TS 22.003 [9], and\n-\tthe CTM text telephony indication in the bearer capability 1 information element is set to \"CTM text telephony is not supported\", and\n-\tthe bearer capability 2 information element is not present.\nOtherwise the originating call shall be handled by the MSC Server without interworking to the IM CN subsystem.",
      "chunk_type": "requirement",
      "cross_references": [
        "ts_22.003"
      ]
    },
    {
      "chunk_id": "ts_29.292_5.3.3.1",
      "section_id": "5.3.3.1",
      "section_title": "General",
      "content": "Upon determining that an incoming SETUP message shall be interworked to the IM CN subsystem, the MSC Server shall generate an INVITE request as further detailed in the subclauses below.",
      "chunk_type": "definition",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.292_5.3.3.2",
      "section_id": "5.3.3.2",
      "section_title": "Coding of INVITE",
      "content": "The INVITE request shall be coded as described in 3GPP TS 24.292 [7] with the following SETUP message interworking applied:\n-\tThe called party BCD number information element in the SETUP message is used to derive the Request URI of the INVITE request as follows:\n1.\tif the type of number field is set to \"international number\", then the number digit fields, prefixed with a \"+\", shall be used to build a tel URI or a SIP URI with \"user=phone\"; or\n2.\tif the type of number field is set to \"national number\", according to local policy:\na)\tif the called party BCD number is considered as if the mobile station sent a \"geo-local number\" then the MSC Server shall, as an operator option, either:\n-\tconvert the number to international format by prefixing the number digits with \"+CC\" (where CC is the country code of the network in which the MSC Server is located) and use this to build a tel URI or a SIP URI with \"user=phone\"; or\n-\tuse the number digit fields to build a tel URI or a SIP URI with \"user=phone\". The phone-context parameter shall include the home network domain name defined for IMS centralized services in 3GPP TS 23.003 [10]. The phone-context which includes the home network domain name of the calling party is prefixed by the \"geo-local\" string according to 3GPP TS 24.229 [2].\nb)\tif the called party BCD number is considered as if the mobile station sent a \"home-local number\", then the MSC Server shall, as an operator option, either:\n-\tconvert the number to international format by prefixing the number digits with \"+CC\" (where CC is the country code of the home network of the calling party) and use this to build a tel URI or a SIP URI with \"user=phone\"; or\n-\tuse the number digit fields to build a tel URI or a SIP URI with \"user=phone\". The phone-context parameter shall include the home network domain name defined for IMS centralized services in 3GPP TS 23.003 [10].\nNOTE 1:\tWhen the calling party is not in roaming situation, the current physical location of the user is identical to the home network of the user; by default, the called party BCD number information element received in the SETUP message should be considered as a \"geo-local number\".\n3.\tif the type of number field is set to \"unknown\", then the MSC Server shall build a SIP URI with \"user=phone\" or a tel URI, including the received digits as an unprocessed dial string to the IM CN subsystem, using one of the formats for UEs without dial string processing capabilities, as defined in 3GPP TS 24.229 [2], clause 5.1.2A.1.3;\nNOTE 2:\tThis sets the requirement that the dialling plan is designed so it enables the IM CN subsystem to differentiate local numbers from other numbers; refer to clause 5.1.2A.1.3.\n-\tif the CLIR invocation information element is present in the SETUP message, the From header shall be set to an Anonymous User Identity as defined in 3GPP TS 23.003 [10] and the MSC Server shall include a Privacy header with priv-value set to \"id\";\n-\tif the CLIR suppression information element is present in the SETUP message, the MSC Server shall include a Privacy header with priv-value set to \"none\";\n-\tif the CLIR invocation information element and CLIR suppression information element are not present in the SETUP message, the MSC Server shall not include a Privacy header;\n-\tthe P-Asserted-Identity header shall be set to the default public identity received during registration procedures;\n-\tthe Contact header shall be set to:\n-\tthe public GRUU received at registration as specified in 3GPP TS 24.229 [2]; or\n-\tif the CLIR suppression information element is present in the SETUP message to the temporary GRUU received at registration as specified in 3GPP TS 24.229 [2].\nWhen a SIP URI is used for the Request URI, the host portion of the SIP URI shall be set to the home network domain name defined for IMS centralized services in 3GPP TS 23.003 [10].\nIf the MSC server supports the P-Early-Media header as a network option, then it shall include the header in each outgoing SIP INVITE request.\nThe MSC Server shall include a P-Charging-Vector header field in the initial INVITE request with an \"icid-value\" header field parameter as specified in 3GPP TS 32.260 [56].\nUnless local configuration indicates that the network is serving users not supporting SIP preconditions, the MSC server shall include in a Supported header field of the initial INVITE request:\n1)\ta \"100rel\" option tag as defined in IETF RFC 3262 [57] to indicate the support for reliable provisional responses; and\n2)\ta \"precondition\" option tag as defined in IETF RFC 3312 [58] to indicate the support for the SIP preconditions mechanism.",
      "chunk_type": "requirement",
      "cross_references": [
        "ts_24.229_clause_5.1.2",
        "clause_5.1.2",
        "ts_24.292",
        "ts_23.003",
        "ts_24.229",
        "ts_32.260"
      ]
    },
    {
      "chunk_id": "ts_29.292_5.3.3.3",
      "section_id": "5.3.3.3",
      "section_title": "Coding of the SDP offer",
      "content": "The MSC Server shall determine the speech codecs supported by the UE as specified in 3GPP TS 24.008 [3] and use this information when constructing a codec list for the SDP offer. The MSC Server may also add speech codecs. The added speech codecs are based on configuration data in the MSC Server.\nIf the MSC Server indicated the support for the SIP preconditions mechanism as described in clause 5.3.3.2 and\n-\tthe access bearer establishment has been initiated prior to the sending of the INVITE request (e.g. no speech codec or one speech codec is indicated from the originating UE) the MSC Server shall indicate that preconditions have been met in the initial SDP offer using the segmented status type, as defined in IETF RFC 3312 [58] and IETF RFC 4032 [59], as well as the strength-tag value \"mandatory\" for the local segment and the strength-tag value \"optional\" for the remote segment. The MSC Server may indicate in the bearer establishment procedure to the UE the speech codec the UE shall use; or\n-\tthe access side bearer establishment has not been performed prior to sending the INVITE request,\na)\tthe MSC Server shall indicate that preconditions have not been met in the SDP offer using the segmented status type, as defined in IETF RFC 3312 [58] and IETF RFC 4032 [59], as well as the strength-tag value \"mandatory\" for the local segment and the strength-tag value \"optional\" for the remote segment; and.\nb)\tonce access side bearer establishment has been performed, the MSC Server shall indicate that preconditions have been met in a new SDP offer in a subsequent UPDATE or PRACK request.",
      "chunk_type": "requirement",
      "cross_references": [
        "clause_5.3.3.2",
        "ts_24.008"
      ]
    },
    {
      "chunk_id": "ts_29.292_5.3.3.4",
      "section_id": "5.3.3.4",
      "section_title": "Actions on the SDP answer",
      "content": "At the receipt of the SDP answer the MSC Server shall analyse the received speech codecs:\n-\tIf the received speech codecs in the SDP answer do not include any of the speech codecs provided by the UE in the SETUP message or the SDP answer only include the default speech codec the MSC Server shall instruct the CS-MGW to perform transcoding and indicate in the bearer establishment procedure to the UE the speech codec the UE shall use. Which of the codecs used is based on local policy;\n-\tif only one speech codec is received in the SDP answer, the MSC Server shall select that speech codec and may indicate the speech codec in the bearer establishment procedure to the UE;\n-\tif more than one speech codec is received in the SDP answer the MSC Server shall select one codec based on local configuration and may indicate the speech codec in the bearer establishment procedure to the UE; and send a new SDP offer which shall indicate the speech codec that the MSC Server has selected.\nFor UTRAN and GERAN Iu-mode, the NAS Synchronisation Indicator information element shall be used to inform the UE of the selected codec as specified in 3GPP TS 24.008 [3].",
      "chunk_type": "requirement",
      "cross_references": [
        "ts_24.008"
      ]
    },
    {
      "chunk_id": "ts_29.292_5.3.4",
      "section_id": "5.3.4",
      "section_title": "Sending of ALERTING",
      "content": "The MSC Server shall send an ALERTING message towards the UE upon receiving the first 180 Ringing response.\n5.3.4a\tSending of PROGRESS\nOnce all the following conditions have been met:\n1)\tthe MSC server supports the P-Early-Media header field, and received the first SIP 181 (Call is being forwarded) response, or 182 (Queued) response, or 183 (Session Progress) response, or a SIP UPDATE request that includes a P-Early-Media header field authorizing backward early media;\n2)\tSDP preconditions are not used, or applicable SDP preconditions have been met;\n3)\tthe MSC server did not receive a SIP 180 (Ringing) response; and\n4)\ta PROGRESS message has not been sent before;\nthen the MSC server shall send a PROGRESS message.\n5.3.4b\tThrough-Connecting early media from IMS\nIf a SIP 18x response or a SIP UPDATE request is received by the MSC server, once all the following conditions have been met:\n1)\tthe MSC server supports the P-Early-Media header field, and the response or request includes a P-Early-Media header field authorizing backward early media; and\n2)\tSDP preconditions are not used, or applicable SDP preconditions have been met;\nthen the MSC server shall instruct the CS-MGW to through-connect as described in clause 7.1.5 for early media from the IMS side unless the CS-MGW has already been through-connected.\nNOTE:\tAn MSC server supporting the early session model CAT supplementary service applies additional procedure described in clause 5.6.9.",
      "chunk_type": "requirement",
      "cross_references": [
        "clause_7.1.5",
        "clause_5.6.9"
      ]
    },
    {
      "chunk_id": "ts_29.292_5.3.5",
      "section_id": "5.3.5",
      "section_title": "Applying ringback tone",
      "content": "The MSC Server shall instruct the CS-MGW to apply ringback tone towards the UE in the following conditions:\n-\ta 180 Ringing response is received and either:\n-\tthe MSC Server does not support the P-Early-Media header as a network option; or\n-\tthe MSC Server supports the P-Early-Media header as a network option and according to IETF RFC 5009 [47] backward early media is not authorized (the most recently received P-Early-Media header does not authorize backward early media or the P-Early-Media header has not yet been received).",
      "chunk_type": "requirement",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.292_5.3.6",
      "section_id": "5.3.6",
      "section_title": "Receipt of 200 OK (INVITE)",
      "content": "Upon receipt of the first 200 OK (INVITE) response, the MSC Server shall:\n-\tinstruct the CS-MGW to stop ringback if ringback was previously applied; and\n-\tinstruct the CS-MGW to through-connect the bearer in both directions; and\n-\tsend a CONNECT message towards the UE as described in 3GPP TS 24.008 [3].\nInterworking applied for the TIP service is described in clause 5.6.2.1.\nThe MSC Server shall not progress any further early dialogs to established dialogs. Therefore, upon receipt of a subsequent 200 OK final response to the initial INVITE request (e.g. due to forking), the MSC Server shall:\n-\tacknowledge the response with an ACK request; and\n-\tsend a BYE request to this dialog in order to terminate it.",
      "chunk_type": "requirement",
      "cross_references": [
        "clause_5.6.2.1",
        "ts_24.008"
      ]
    },
    {
      "chunk_id": "ts_29.292_5.3.7",
      "section_id": "5.3.7",
      "section_title": "Receipt of status-codes 3xx",
      "content": "Upon receipt of a 3xx response to the initial INVITE, the default behaviour of the MSC Server shall be to release the call with a cause code value of 127 (Interworking unspecified).\nNOTE:\tThe MSC Server may also decide to redirect the call toward the URI in the Contact header field of the 3xx response, as an operator option. Such handling is outside the scope of the present document.",
      "chunk_type": "requirement",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.292_5.3.8",
      "section_id": "5.3.8",
      "section_title": "Receipt of SIP status-codes 4xx, 5xx or 6xx",
      "content": "If the MSC Server receives a 4xx, 5xx or 6xx SIP response to the initial SIP INVITE request and the MSC Server has not sent a SIP CANCEL request, the MSC Server shall initiate call clearing procedures by sending a CC DISCONNECT message towards the UE as described in 3GPP TS 24.008 [3] with the following interworking applied:\n1)\tIf one or more Reason header fields are included in the 4xx, 5xx or 6xx SIP response, then the cause value of each Reason header field shall be mapped to a cause information element in the CC DISCONNECT message as follows:\na)\tif the Reason header field contains a Q.850 cause value, the numeric \"cause\" parameter value shall be mapped to the cause value octet of the cause information element in the CC DISCONNECT message according to table 5.3.8.2. The MSC Server shall set:\n-\tthe coding standard to \"Standard defined for the GSM PLMNs\"; and\n-\tthe location as follows:\nI)\tto \"network beyond interworking point\"; or\nII)\tif, as a network option, the MSC Server supports the location header field parameter as described in IETF RFC 8606 [68], the MSC Server shall derive the value of the location from the location parameter in the SIP Reason header field according to table 5.3.8.3;\nb)\tif the Reason header field contains a SIP status-code, the coding of the cause information element in the CC DISCONNECT message shall be as follows:\n-\tset the coding standard to \"Standard defined for the GSM PLMNs\";\n-\tset the location to \"network beyond interworking point\"; and\n-\tderive the cause value from the SIP status-code received in the Reason header field according to table5.3.8.1. The 4xx, 5xx, and 6xx SIP responses that are not covered in this table shall be interworked to a cause value of 127 (Interworking, unspecified); and\nc)\tif no Reason header field is included in the 4xx, 5xx or 6xx SIP response, the coding of the cause information element in the CC DISCONNECT message is derived from the SIP status-code of the SIP response according to table 5.3.8.1, where the following information elements shall be set to:\n-\tcoding standard to \"Standard defined for the GSM PLMNs\"; and\n-\tlocation to \"network beyond interworking point\".\nTable 5.3.8.1: Mapping the 4xx/5xx/6xx status-code to the cause information element\nSIP status-code\nCause value\n400 Bad Request\n127 (Interworking, unspecified)\n401 Unauthorized\n127 (Interworking, unspecified)\n402 Payment Required\n127 (Interworking, unspecified)\n403 Forbidden\n79 (Service or option not implemented, unspecified)\n404 Not Found\n1 (Unassigned (unallocated) number)\n405 Method Not Allowed\n127 (Interworking, unspecified)\n406 Not Acceptable\n127 (Interworking, unspecified)\n407 Proxy authentication required\n127 (Interworking, unspecified)\n408 Request Timeout\n102 (Recovery on timer expiry)\n410 Gone\n22 (Number changed)\n413 Request Entity too long\n127 (Interworking, unspecified)\n414 Request-URI too long\n127 (Interworking, unspecified)\n415 Unsupported Media type\n127 (Interworking, unspecified)\n416 Unsupported URI scheme\n127 (Interworking, unspecified)\n417 Unknown Resource-Priority\n79 (Service or option not implemented, unspecified)\n420 Bad Extension\n127 (Interworking, unspecified)\n421 Extension required\n127 (Interworking, unspecified)\n422 Session Interval Too Small\n31 (Normal, unspecified)\n423 Interval Too Brief\n127 (Interworking, unspecified)\n424 Bad Location Information\n127 (Interworking, unspecified)\n428 Use Identity Header (NOTE 2)\n127 (Interworking, unspecified)\n433 Anonymity Disallowed\n24 (Call rejected due to feature at the destination)\n436 Bad Identity Info (NOTE 2)\n127 (Interworking, unspecified)\n437 Unsupported Credential (NOTE 2)\n127 (Interworking, unspecified)\n438 Invalid Identity Header (NOTE 2)\n127 (Interworking, unspecified)\n436 Bad Identity Info (NOTE 2)\n127 (Interworking, unspecified)\n480 Temporarily Unavailable\n41 (Temporary Failure)\n481 Call/Transaction does not exist\n127 (Interworking, unspecified)\n482 Loop detected\n127 (Interworking, unspecified)\n483 Too many hops\n127 (Interworking, unspecified)\n484 Address Incomplete\n28 (Invalid number format (incomplete number))\n485 Ambiguous\n127 (Interworking, unspecified)\n486 Busy Here\n17 (User busy)\n487 Request terminated\n127 (Interworking, unspecified)\n488 Not acceptable here\n127 (Interworking, unspecified)\n493 Undecipherable\n127 (Interworking, unspecified)\n500 Server Internal error\n127 (Interworking, unspecified)\n501 Not implemented\n79 (Service or option not implemented, unspecified)\n502 Bad Gateway\n127 (Interworking, unspecified)\n503 Service Unavailable\n127 (Interworking, unspecified)\n504 Server timeout\n102 (Recovery on timer expiry)\n505 Version not supported\n127 (Interworking, unspecified)\n513 Message too large\n127 (Interworking, unspecified)\n580 Precondition failure\n127 (Interworking, unspecified)\n600 Busy Everywhere\n17 (User busy)\n603 Decline\n21 (Call rejected)\n604 Does not exist anywhere\n1 (Unassigned (unallocated) number)\n606 Not acceptable\n127 (Interworking, unspecified)\n607 Unwanted (NOTE)\n21 (Call rejected)\nNOTE 1:\tThe \"607 Unwanted\" SIP status code is defined in IETF RFC 8197 [65].\nNOTE 2:\tThe 428, 436, 437 and 438 SIP response codes are defined in IETF RFC 8224 [66].\nIf the MSC Server supports restoration procedures, the MSC Server shall in addition to the procedures in this clause perform the procedures in clause 5.3.10.\nTable 5.3.8.2: Mapping of \"cause\" parameter for protocol \"Q.850\" to the cause information element\nReason header field with protocol value \"Q.850\"\nCause information element\n\"cause\" parameter value\nCause value\n1 (Unallocated (unassigned) number)\n1 (Unallocated (unassigned) number)\n3 (No route to destination)\n3 (No route to destination)\n8 (Pre-emption)\n25 (Pre-emption)\n16 (Normal call clearing)\n16 (Normal call clearing)\n17 (User busy)\n17 (User busy)\n18 (No user responding)\n18 (No user responding)\n19 (No answer from user (user alerted))\n19 (User alerting, no answer)\n21 (Call rejected)\n21 (Call rejected)\n22 (Number changed)\n22 (Number changed)\n24 (Call rejected due to feature at the destination)\n24 (Call rejected due to feature at the destination)\n26 (Non-selected user clearing)\n26 (Non selected user clearing)\n27 (Destination out of order)\n27 (Destination out of order)\n28 (Invalid number format (address incomplete))\n28 (Invalid number format (incomplete number))\n29 (Facility rejected)\n29 (Facility rejected)\n31 (Normal, unspecified)\n(class default) (NOTE 1, NOTE 2)\n31 (Normal, unspecified)\n34 (No circuit/channel available)\n34 (No circuit/channel available)\n38 (Network out of order)\n38 (Network out of order)\n41 (Temporary failure)\n41 (Temporary failure)\n42 (Switching equipment congestion)\n42 (Switching equipment congestion)\n43 (Access information discarded)\n43 (Access information discarded)\n44 (Requested circuit/channel not available)\n44 (requested circuit/channel not available)\n47 (Resource unavailable, unspecified)\n(class default) (NOTE 3)\n47 (Resource unavailable, unspecified)\n50 (Requested facility not subscribed)\n50 (Requested facility not subscribed)\n55 (Incoming calls barred within CUG)\n55 (Incoming calls barred within the CUG)\n57 (Bearer capability not authorised)\n57 (Bearer capability not authorised)\n58 (Bearer capability not presently available)\n58 (Bearer capability not presently available)\n63 (Service option not available, unspecified)(class default) (NOTE 4)\n63 (Service option not available, unspecified)\n65 (Bearer capability not implemented)\n65 (Bearer capability not implemented)\n69 (Requested facility not implemented)\n69 (Requested facility not implemented)\n70 (Only restricted digital information capability is available)\n70 (Only restricted digital information capability is available)\n79 (Service or option not implemented, unspecified)\n(class default) (NOTE 5)\n79 (Service or option not implemented, unspecified)\n87 (User not member of CUG)\n87 (User not member of CUG)\n88 (Incompatible destination)\n88 (Incompatible destination)\n91 (Invalid transit network selection)\n91 (Invalid transit network selection)\n95 (Invalid message, unspecified)(class default) (NOTE 6)\n95 (Semantically incorrect message)\n97 (Message type non-existent or not implemented)\n97 (Message type non-existent or not implemented)\n98 (Message not compatible with call state or message type non-existent or not implemented)\n98 (Message type not compatible with protocol state)\n99 (Information element/parameter non-existent or not implemented)\n99 (Information element non-existent or not implemented)\n102 (Recovery on timer expiry)\n102 (Recovery on timer expiry)\n111 (Protocol error, unspecified)(class default) (NOTE 7)\n111 (Protocol error, unspecified)\n127 (Interworking, unspecified)(class default) (NOTE 8)\n127 (Interworking, unspecified)\nNOTE 1:\tClass 0 and class 1 have the same default value.\nNOTE 2:\tAll other values in the range 0 to 31 not appearing in table shall be treated as cause 31.\nNOTE 3:\tAll other values in the range 32 to 47 not appearing in table shall be treated as cause 47.\nNOTE 4:\tAll other values in the range 48 to 63 not appearing in table shall be treated as cause 63.\nNOTE 5:\tAll other values in the range 64 to 79 not appearing in table shall be treated as cause 79.\nNOTE 6:\tAll other values in the range 80 to 95 not appearing in table shall be treated as cause 95.\nNOTE 7:\tAll other values in the range 96 to 111 not appearing in table shall be treated as cause 111.\nNOTE 8:\tAll other values in the range 112 to 127 not appearing in table shall be treated as cause 127.\nNOTE 9:\tThere are values which are specified in ITU-T Recommendation Q.850 [67] but not included in the present table. The reasons for not including them are:\n-\tthe corresponding value is not specified in 3GPP TS 24.008 [3]; or\n-\tthe value is specified in 3GPP TS 24.008 [3] but not applicable to be sent to the user (for example value 6 \"Channel unacceptable\").\nTable 5.3.8.3: Mapping of SIP Reason header field location parameter to location parameter of Cause information element\nReason header field with protocol value \"Q.850\"\nCause information element\n\"location\" parameter value\n\"Location\" parameter value\nU\nuser\nLPN\nprivate network serving the local user\nLN\npublic network serving the local user\nTN\ntransit network\nRLN\npublic network serving the remote user\nRPN\nprivate network serving the remote user\nLOC-6\nnetwork beyond interworking point\nINTL\ninternational network\nLOC-8\nnetwork beyond interworking point\nLOC-9\nnetwork beyond interworking point\nBI\nnetwork beyond interworking point\nLOC-11\nnetwork beyond interworking point\nLOC-12\nnetwork beyond interworking point\nLOC-13\nnetwork beyond interworking point\nLOC-14\nnetwork beyond interworking point\nLOC-15\nnetwork beyond interworking point",
      "chunk_type": "requirement",
      "cross_references": [
        "clause_5.3.10",
        "table_5.3.8.2",
        "table_5.3.8.3",
        "table_5.3.8.1",
        "table_127",
        "ts_24.008"
      ]
    },
    {
      "chunk_id": "ts_29.292_5.3.9",
      "section_id": "5.3.9",
      "section_title": "Receipt of DISCONNECT",
      "content": "If the MSC Server receives a DISCONNECT message from the UE prior to receiving a final response to the initial INVITE, the MSC Server shall send a CANCEL request. If a 200 OK response to the initial INVITE is received after sending the CANCEL request, the MSC Server shall send a BYE request to the IM CN subsystem to terminate the session.\nIf the DISCONNECT message contains one or more cause information elements, the first cause information element shall be mapped to a Reason header field in the CANCEL or BYE request as follows:\n-\tset the protocol field to \"Q.850\"; and\n-\tset the numeric \"cause\" parameter value to the cause value field of the cause information element according to table 5.4.8.1.2.\nNOTE:\tThe inclusion of reason-text in the Reason header is implementation specific.\nIf, as a network option, the MSC Server supports the location header field parameter as described in IETF RFC 8606 [68], the MSC Server shall map the location parameter of the cause information element to the location parameter in the SIP Reason header field according to table 5.4.8.1.3.",
      "chunk_type": "requirement",
      "cross_references": [
        "table_5.4.8.1.2",
        "table_5.4.8.1.3"
      ]
    },
    {
      "chunk_id": "ts_29.292_5.3.10",
      "section_id": "5.3.10",
      "section_title": "Restoration procedures",
      "content": "If the MSC Server receives a SIP 504 (Server Time-out) response and all the following conditions are fulfilled:\n1)\tthere is no re-registration ongoing;\n2)\ta P-Asserted-Identity header field set to a value equal to an URI:\n-\tfrom the Service-Route header field value received during registration; or\n-\tfrom the Path header field value received during registration; and\n3)\tthe SIP response contains a Content-Type header field set to \"application/3gpp-ims+xml\" as defined in 3GPP TS 24.229 [2] clause 7.6; and\n4)\tthe SIP response includes an IM CN subsystem XML body as specified in 3GPP TS 24.229 [2] clause 7.6 with the <ims-3gpp> element, including a version attribute, with the <alternative-service> child element:\n-\twith the <type> child element set to \"restoration\" (see 3GPP TS 24.229 [2] table 7.6.2); and\n-\twith the <action> child element set to \"initial-registration\" (see 3GPP TS 24.229 [2] table 7.6.3);\nthen the MSC Server shall initiate restoration procedures by performing an initial registration as specified in clause 5.2.1.\nIf the MSC Server is unsuccessful to send an initial SIP INVITE request to the next hop determined by one of the following:\n-\tthere is no response to the SIP INVITE request by the MSC Server; or\n-\tby unspecified means available to the MSC Server;\nand if there is no re-registration ongoing then the MSC Server may initiate restoration procedures by performing an initial registration as specified in clause 5.2.1.\nNOTE:\tIf there is an ongoing re-registration and the conditions in this clause for initiating an initial registration were fulfilled the MSC Server regards this user as not registered and waits until a successful registration before sending any more INVITE request for this user. Meanwhile the MSC Server can fall back to the procedures for non ICS UE attached to a legacy MSC for call establishment as described in 3GPP TS 23.292 [5].",
      "chunk_type": "procedure",
      "cross_references": [
        "ts_24.229_clause_7.6",
        "clause_5.2.1",
        "ts_24.229_table_7.6.2",
        "ts_24.229_table_7.6.3",
        "ts_24.229",
        "ts_23.292"
      ]
    },
    {
      "chunk_id": "ts_29.292_5.3.11",
      "section_id": "5.3.11",
      "section_title": "Autonomous clearing initiated by the MSC Server",
      "content": "If the MSC Server determines due to internal procedures that the call shall be released, call release shall be in accordance with 3GPP TS 24.008 [3] clause 5.4.4 with the additional interworking defined here.\nThe MSC Server shall send a SIP‑CANCEL request as specified in 3GPP TS 24.229 [2] to the IM CN subsystem. The MSC Server shall include a Reason header field in the request populated as follows:\n-\tthe protocol field set to \"Q.850\"; and\n-\ta \"cause\" header field parameter aligned with the value used in the cause information element of the call clearing message towards the UE.\nNOTE:\tThe inclusion of reason-text in the Reason header is implementation specific.",
      "chunk_type": "requirement",
      "cross_references": [
        "ts_24.008_clause_5.4.4",
        "ts_24.008",
        "ts_24.229"
      ]
    },
    {
      "chunk_id": "ts_29.292_5.4.1",
      "section_id": "5.4.1",
      "section_title": "General",
      "content": "The IM CN susbsystem terminating session shall be established in accordance with 3GPP TS 24.292 [7] and 3GPP TS 24.229 [2]. The mobile terminating call shall be established at the visited MSC Server in accordance with 3GPP TS 23.018 [8] and 3GPP TS 24.008 [3]. The following subclauses describe the additional requirements for interworking between SIP and NAS signalling.",
      "chunk_type": "definition",
      "cross_references": [
        "ts_24.292",
        "ts_24.229",
        "ts_23.018",
        "ts_24.008"
      ]
    },
    {
      "chunk_id": "ts_29.292_5.4.2",
      "section_id": "5.4.2",
      "section_title": "Receipt of initial INVITE",
      "content": "Upon receipt of an initial INVITE request, the MSC Server shall validate the INVITE request and SDP offer, if present, as described in 3GPP TS 24.292 [7].\nAfter validating the INVITE request, the terminating party shall be validated as follows:\na)\tthe MSC Server shall identify the terminating subscriber using the P-Called-Party-ID header or Request-URI from the INVITE request and use this to retrieve the VLR data;\nb)\tif the VLR data cannot be retrieved, the MSC Server shall send a 500 (Server Internal Error) response to the INVITE request and shall include the Reason header field with the protocol header field parameter set to \"Q.850\" and the cause header field parameter set to \"20;\nNOTE 1:\tThe inclusion of the text header field parameter set to \"Subscriber absent\" in the Reason header field is implementation specific.\nc)\tif the VLR data can be retrieved, the following check shall be performed:\n-\tif the IMSI is detached, the MSC Server shall send a 480 (Temporarily unavailable) response to the INVITE request.\nUpon successful validation of the terminating party, the MSC Server shall initiate the establishment of a MM connection as specified in 3GPP TS 24.008 [3]. If a MM connection cannot be established (e.g. no PAGE RESPONSE message is received), the MSC Server shall send a 408 (Request Timeout) response to the INVITE request.\nIf the initial INVITE request includes a MIME body (part) according to clause 4.4.1 of 3GPP TS 24.615 [44] with the \"communication-waiting-indication\" element contained in the \"ims-cw\" root element according to 3GPP TS 24.615 [44], and if the MSC Server determines that the incoming call can be presented to the subscriber as described in 3GPP TS 24.083 [26], then clause 5.6.4.1 applies.\nNOTE 2:\tClause 5.6.8.3.1.4 contains additional applicable procedures executed upon receipt of an initial INVITE request if the MSC Server is as conference participant.\nThe MSC Server shall store the \"icid-value\" header field parameter received in the P-Charging-Vector header field.\nIf the received INVITE request:\na)\tdoes not contain a \"precondition\" option-tag in a Supported header field or in a Require header field, the MSC Server shall not make use of the SIP precondition mechanism; or\nb)\tcontains the \"precondition\" option-tag in the Supported header field or in the Require header field and local configuration indicates support of the SIP precondition mechanism, the MSC Server shall make use of the SIP precondition mechanism and shall include the Require header field with the \"precondition\" option-tag in any corresponding response containing the SDP body, which the MSC Server sends towards to the originating end point. When the MSC Server sends a 183 (Session Progress) response with an SDP answer, the MSC Server shall only request confirmation for the result of the resource reservation (as defined in as defined in IETF RFC 3312 [59]) at the originating end point if an SDP offer has been received indicating that there are any remaining unfulfilled preconditions at the originating end point.\nIf the MSC Server rejects the received INVITE request, then depending on operator policy, the MSC Server may insert in a SIP failure response a Response-Source header field with an \"fe\" header field parameter constructed with the URN namespace \"urn:3gpp:fe\", the \"fe-id\" part of the URN set to \"msc-server\" and the \"role\" header field parameter set to \"msc-server-ics\" in accordance with subclause 7.2.17 of 3GPP TS 24.229 [2].",
      "chunk_type": "requirement",
      "cross_references": [
        "ts_24.615_clause_4.4.1",
        "ts_24.083_clause_5.6.4.1",
        "clause_5.6.8.3.1.4",
        "ts_24.229_clause_7.2.17",
        "ts_24.292",
        "ts_24.008",
        "ts_24.615",
        "ts_24.083",
        "ts_24.229"
      ]
    },
    {
      "chunk_id": "ts_29.292_5.4.3",
      "section_id": "5.4.3",
      "section_title": "Sending of SETUP",
      "content": "After successful MM connection establishment, the MSC Server shall send a SETUP message as described in 3GPP TS 24.008 [3] with the following INVITE request interworking applied:\n-\tthe MSC Server may include a bearer capability 1 information element set to indicate teleservice 11 as described in 3GPP TS 22.003 [9];\n-\tthe MSC Server shall not include a bearer capability 2 information element; and\n-\tthe MSC Server shall build the calling party number BCD information element according to the tables 5.4.3.1 or 5.4.3.2 below.\nFigure 5.4.3.1: Mapping of INVITE message (with From and/or P-Asserted-Identity) to SETUP message (informative)\nThe default mapping is based on table 5.4.3.1.\nAs a network option, the mapping described in table 5.4.3.2 can be applied to create the calling party number BCD information element in the SETUP message based on the From header field in the following cases:\n-\twhen the received P-Asserted-Identity header field and the From header field contain URIs with an E.164 number format and the Privacy header field does not contain values \"id\", \"header\" or \"user\"; or\n-\twhen the P-Asserted-Identity header field is absent or not in the E.164 number format and the received From header field contains the URI with an E.164 number format and the Privacy header field does not contain values \"id\", \"header\" or \"user\".\nTable 5.4.3.1: Setting of the calling party BCD number information element in SETUP message from P-Asserted-Identity\nSIP Component\nValue\nCalling party\nBCD number information element\nValue\nP-Asserted-Identity header field (NOTE 1, NOTE 2)\nand\nPrivacy header field\nE.164 number\nand\nPriv-value≠ \"id\" or  \"header\"\nDigits\ndigits contained in tel URI or SIP URI\nType of number\n\"national number\" or \"international number\"\nNumbering Plan Identification\n\"ISDN/telephony numbering plan\"\nPresentation Indicator\n\"presentation allowed\"\nScreening indicator\n\"Network provided\"\n(NOTE 5)\nP-Asserted-Identity header field present or not and Privacy header field is present\npriv-value= \"id\" or  \"header\"\nDigits\ndo not include any number digits fields\nType of number\n\"unknown\"\nNumbering Plan Identification\n\"unknown\"\nPresentation Indicator\n\"presentation restricted\"\nScreening indicator\n\"Network provided\"\n(NOTE 5)\nP-Asserted-Identity header field\nand\nPrivacy header field\nAbsent or other than E.164 number\nand\nPriv-value≠ \"id\" or  \"header\"\nDigits\ndo not include any number digits fields except for NOTE 3 and NOTE 4 case\nType of number\n\"unknown\"\nNumbering Plan Identification\n\"unknown\"\nPresentation Indicator\n\"presentation allowed\"\nScreening indicator\n\"Network provided\"\n(NOTE 5)\nPrivacy header field\npriv-value\nPresentation Indicator\n\"Presentation Indicator\"\npriv-value\n\"header\"\nPresentation Indicator\nPresentation restricted\n\"user\"\nPresentation Indicator\nPresentation allowed\n\"none\"\nPresentation Indicator\nPresentation allowed\n\"id\"\nPresentation Indicator\nPresentation restricted\nNOTE 1:\tIt is possible that a P-Asserted-Identity header field includes both a tel URI and a SIP or SIPS URI. In this case, either the tel URI or the SIP URI with user=\"phone\" and a specific host portion, as selected by operator policy, may be used.\nNOTE 2:\tThe number mapping does not include any digits contained in the phone-context parameter.\nNOTE 3:\tIf a display-name is present in the P-Asserted-Identity header and if the MSC Server supports the network option of mapping display name to calling name identity, the MSC Server may use the P-Asserted-Identity header to build a facility information element with a name indicator parameter set to the display name.\nNOTE 4:\tInterworking of display name received in conjunction with a tel URI or SIP URI to calling name presentation using CNAP is subject to local regulatory requirements on calling line identity and whether the originating network of the call is trusted to provide an authentic identity.\nNOTE 5:\tAs a network option, the MSC Server may support \"Calling number verification using signature verification and attestation information\" feature defined in 3GPP TS 24.229 [2]. If the MSC Server received a \"verstat\" tel URI parameter (defined in 3GPP TS 24.229 [2] clause 7.2A.20) in the P-Asserted-Identity header field the MSC Server may map the \"verstat\" tel URI parameter to the Screening Indicator field as follows:- the value \"No-TN-Validation\" to the value \"User-provided, not screened\";- the value \"TN-Validation-Passed\" to the value \"User-provided, verified and passed\"; and- the value \"TN-Validation-Failed\" to the value \"User-provided, verified and failed\".\nTable 5.4.3.2: Setting of the calling party BCD number information element in SETUP message from From header field\nSIP Component\nValue\nCalling party BCD number information element\nValue\nFrom header field (NOTE 1, NOTE 2)\nand\nPrivacy header field\nE.164 number\nand\nPriv-value≠ \"user\"\nDigits\ndigits contained in tel URI or SIP URI\nType of number\n\"national number\" or \"international number\"\nNumbering Plan Identification\n\"ISDN/telephony numbering plan\"\nPresentation Indicator\n\"presentation allowed\"\nScreening indicator\n\"User-provided, not screened\"\n(NOTE 5)\nFrom header field\nand\nPrivacy header field\nother than E.164 number\nand\nPriv-value≠ \"user\"\nDigits\ndo not include any number digits fields except for NOTE 3 and NOTE 4 case\nType of number\n\"unknown\"\nNumbering Plan Identification\n\"unknown\"\nPresentation Indicator\n\"presentation allowed\"\nScreening indicator\n\"User-provided, not screened\"\n(NOTE 5)\nPrivacy header field\npriv-value\nPresentation Indicator\n\"Presentation Indicator\"\npriv-value\n\"header\"\nPresentation Indicator\nPresentation allowed\n\"user\"\nPresentation Indicator\nPresentation restricted\n\"none\"\nPresentation Indicator\nPresentation allowed\n\"id\"\nPresentation Indicator\nPresentation allowed\nNOTE 1:\tIt is possible that a From header field includes both a tel URI and a SIP or SIPS URI. In this case, either the tel URI or the SIP URI with user=\"phone\" and a specific host portion, as selected by operator policy, may be used.\nNOTE 2:\tThe number mapping does not include any digits contained in the phone-context parameter.\nNOTE 3:\tIf a display-name is present in the From header and if the MSC Server supports the network option of mapping display name to calling name identity, the MSC Server may use the From header to build a facility information element with a name indicator parameter set to the display name.\nNOTE 4:\tInterworking of display name received in conjunction with a tel URI or SIP URI to calling name presentation using CNAP is subject to local regulatory requirements on calling line identity and whether the originating network of the call is trusted to provide an authentic identity.\nNOTE 5:\tAs a network option, the MSC Server may support \"Calling number verification using signature verification and attestation information\" feature defined in 3GPP TS 24.229 [2]. If the MSC Server received a \"verstat\" tel URI parameter (defined in 3GPP TS 24.229 [2] clause 7.2A.20) in the From header field the MSC Server may map the \"verstat\" tel URI parameter to the Screening Indicator field as follows:- the value \"No-TN-Validation\" to the value \"User-provided, not screened\";- the value \"TN-Validation-Passed\" to the value \"User-provided, verified and passed\"; and- the value \"TN-Validation-Failed\" to the value \"User-provided, verified and failed\".",
      "chunk_type": "requirement",
      "cross_references": [
        "ts_24.229_clause_7.2",
        "table_5.4.3.1",
        "table_5.4.3.2",
        "figure_5.4.3.1",
        "ts_24.008",
        "ts_22.003",
        "ts_24.229"
      ]
    },
    {
      "chunk_id": "ts_29.292_5.4.4",
      "section_id": "5.4.4",
      "section_title": "Receipt of CALL CONFIRMED",
      "content": "Upon receipt of a CALL CONFIRMED message:\n-\tif a bearer capabilities 1 information element is present and indicates a teleservice other than 11 as described in 3GPP TS 22.003 [9], the MSC Server shall initiate call clearing procedures using a cause value of 58 (bearer capability not presently available);\n-\tif a bearer capabilities 1 information element is present and includes a CTM text telephony indication set to \"CTM text telephony is supported\", the default behaviour of the MSC Server shall be to continue with call setup but not to provide user plane interworking between CTM and real-time-text at the CS-MGW.\nNOTE:\tConversion between CTM as described in 3GPP TS 26.226 [22] and real-time-text as described in 3GPP TS 26.114 [28] may be provided as an implementation option if the SDP offer included the payload type for real-time-text. Such conversion is outside the scope of the present document.",
      "chunk_type": "requirement",
      "cross_references": [
        "ts_22.003",
        "ts_26.226",
        "ts_26.114"
      ]
    },
    {
      "chunk_id": "ts_29.292_5.4.5.1",
      "section_id": "5.4.5.1",
      "section_title": "Network side bearer establishment",
      "content": "If the initial INVITE request contained an SDP offer, the MSC Server should use the codecs received in the SDP offer and determine the codecs supported by the UE as specified in 3GPP TS 24.008 [3] to select and return a single codec in the SDP answer.\nThe MSC Server shall reject all non-audio media descriptions from the SDP offer in the SDP answer.\nThe SDP answer shall be returned in the first reliable response.\nIf the initial INVITE request did not contain an SDP offer, the MSC Server should determine the codecs supported by the UE as specified in 3GPP TS 24.008 [3] and use this information when constructing a codec list for the SDP offer and send the SDP offer in the first reliable response to the INVITE request.",
      "chunk_type": "general",
      "cross_references": [
        "ts_24.008"
      ]
    },
    {
      "chunk_id": "ts_29.292_5.4.5.2",
      "section_id": "5.4.5.2",
      "section_title": "Access bearer assignment",
      "content": "The MSC Server shall initiate access bearer assignment only after the following conditions are satisfied:\n-\tthe incoming side RTP connection point has been successfully reserved and configured in the CS-MGW; and\n-\teither:\n-\tpreconditions were not requested in the SDP of the initial INVITE request; or\n-\tan SDP offer has been received indicating that remote preconditions have been met.\nFor UTRAN and GERAN Iu-mode, the NAS Synchronisation Indicator information element shall be used to inform the UE of the selected codec as specified in 3GPP TS 24.008 [3].",
      "chunk_type": "requirement",
      "cross_references": [
        "ts_24.008"
      ]
    },
    {
      "chunk_id": "ts_29.292_5.4.5.3",
      "section_id": "5.4.5.3",
      "section_title": "Transcoding",
      "content": "The CS-MGW may include a speech transcoder based upon the speech coding information provided to each bearer termination.",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.292_5.4.6",
      "section_id": "5.4.6",
      "section_title": "Receipt of ALERTING",
      "content": "Upon receipt of the ALERTING message from the UE, the MSC Server shall send a 180 Ringing response.\nNOTE:\tStarting timer T301 (or a corresponding internal alerting supervision timing function) as specified in 3GPP TS 24.008 [3] at the MSC Server is an implementation option. The default value for T301 in 3GPP TS 24.008 [3] is longer than the range specified for the IM CN subsystem's no reply timer specified in 3GPP TS 24.604 [23], which should allow the IM CN subsystem to properly control CFNA. However, if T301 is started and expires prior to the no reply timer in the IM CN subsystem, the non-2xx response returned to the IM CN subsystem will prevent invocation of the CFNA service.",
      "chunk_type": "requirement",
      "cross_references": [
        "ts_24.008",
        "ts_24.604"
      ]
    },
    {
      "chunk_id": "ts_29.292_5.4.7",
      "section_id": "5.4.7",
      "section_title": "Applying early media",
      "content": "The MSC Server may instruct the CS-MGW to apply ringback tone or an announcement towards the IM CN subsystem in the following condition:\n-\tthe MSC Server supports the P-Early-Media header as a network option; and\n-\tthe P-Early-Media header was received in the initial INVITE request.\nIf these conditions are met and the MSC Server chooses to apply early media, the following actions are taken:\n-\tprior to applying an announcement, the MSC Server shall include in the 183 Session Progress response a P-Early-Media header authorizing backward early media;\n-\tprior to applying ringback tone, the MSC Server shall include in the 180 Ringing response a P-Early-Media header authorizing backward early media.",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.292_5.4.8.1",
      "section_id": "5.4.8.1",
      "section_title": "Receipt of RELEASE COMPLETE or DISCONNECT",
      "content": "If the MSC Server receives a RELEASE COMPLETE or DISCONNECT message from the UE during call establishment, the MSC Server shall send a status-code 4xx, 5xx or 6xx response to the initial INVITE. The status-code sent shall be determined by examining the first cause information element received in the RELEASE COMPLETE or DISCONNECT message and applying the mapping specified in table 5.4.8.1.1.\nTable 5.4.8.1.1: Mapping the cause information element to the 4xx/5xx/6xx status-code\nCause value\nSIP status-code\n1 (Unassigned (unallocated) number\n404 Not Found\n3 (No route to destination)\n500 Server Internal Error\n6 (Channel unacceptable)\n500 Server Internal Error\n8 (Operator determined barring)\n603 Decline\n16 (Normal call clearing)\n480 Temporarily Unavailable\n17 (User busy)\n486 Busy Here\n18 (No user responding)\n480 Temporarily Unavailable\n19 (User alerting, no answer)\n480 Temporarily Unavailable\n21 (Call rejected)\n603 Decline\n22 (Number changed)\n410 Gone\n25 (Pre-emption)\n480 Temporarily Unavailable\n26 (Non selected user clearing)\n480 Temporarily Unavailable\n27 (Destination out of order)\n502 Bad Gateway\n28 (Invalid number format (incomplete number)\n484 Address Incomplete\n29 (Facility rejected)\n501 Not Implemented\n30 (Response to STATUS ENQUIRY)\n500 Server Internal Error\n31 (Normal, unspecified)\n480 Temporarily Unavailable\n34 (No circuit/channel available)\n480 Temporarily Unavailable\n38 (Network out of order)\n500 Server Internal Error\n41 (Temporary failure)\n500 Server Internal Error\n42 (Switching equipment congestion)\n500 Server Internal Error\n43 (Access information discarded)\n500 Server Internal Error\n44 (Requested circuit/channel not available)\n500 Server Internal Error\n47 (Resources unavailable, unspecified)\n500 Server Internal Error\n49 (Quality of service unavailable)\n500 Server Internal Error\n50 (Requested facility not subscribed)\n500 Server Internal Error\n55 (Incoming calls barred within the CUG)\n603 Decline\n57 (Bearer capability not authorized)\n500 Server Internal Error\n58 (Bearer capability not presently available)\n500 Server Internal Error\n63 (Service or option not available, unspecified)\n501 Not Implemented\n65 (Bearer service not implemented)\n500 Server Internal Error\n68 (ACM equal to or greater than ACMmax)\n500 Server Internal Error\n69 (Requested facility not implemented)\n501 Not Implemented\n70 (Only restricted digital information bearer capability is available)\n501 Not Implemented\n79 (Service or option not implemented, unspecified)\n501 Not Implemented\n81 (Invalid transaction identifier value)\n500 Server Internal Error\n87 (User not member of CUG)\n403 Forbidden\n88 (Incompatible destination)\n500 Server Internal Error\n91 (Invalid transit network selection)\n404 Not Found\n95 (Semantically incorrect message)\n500 Server Internal Error\n96 (Invalid mandatory information)\n500 Server Internal Error\n97 (Message type non-existent or not implemented)\n501 Not Implemented\n98 (Message type not compatible with protocol state)\n501 Not Implemented\n99 (Information element non-existent or not implemented)\n501 Not Implemented\n100 (Conditional IE error)\n500 Server Internal Error\n101 (Message not compatible with protocol state)\n500 Server Internal Error\n102 (Recovery on timer expiry)\n504 Server timeout\n111 (Protocol error, unspecified)\n500 Server Internal Error\n127 (Interworking, unspecified)\n480 Temporarily Unavailable\nNOTE 1:\tAlternative mappings are allowed per operator policy.\nThe first cause information element included in the RELEASE COMPLETE or DISCONNECT message shall be mapped to a Reason header field in the SIP final response sent as a result of this clause as follows:\n-\tset the protocol field to \"Q.850\"; and\n-\tset the numeric \"cause\" parameter value to the cause value field of the cause information element according to table 5.4.8.1.2.\nNOTE 2:\tThe inclusion of reason-text in the Reason header is implementation specific.\nIf, as a network option, the MSC Server supports the location header field parameter as described in IETF RFC 8606 [68], the MSC Server shall map the location parameter of the cause information element to the location parameter in the SIP Reason header field according to table 5.4.8.1.3.\nTable 5.4.8.1.2: Mapping of cause information element to \"cause\" parameter for protocol \"Q.850\"\nCause information element\nReason header field with protocol value \"Q.850\"\nCause value\n\"cause\" parameter value\n1 (Unallocated (unassigned) number)\n1 (Unallocated (unassigned) number)\n3 (No route to destination)\n3 (No route to destination)\n6 (Channel unacceptable)\n6 (Channel unacceptable)\n16 (Normal call clearing)\n16 (Normal call clearing)\n17 (User busy)\n17 (User busy)\n18 (No user responding)\n18 (No user responding)\n19 (User alerting, no answer)\n19 (No answer from user (user alerted))\n21 (Call rejected)\n21 (Call rejected)\n22 (Number changed)\n22 (Number changed)\n24 (Call rejected due to feature at the destination)\n24 (Call rejected due to feature at the destination)\n25 (Pre-emption)\n8 (Preemption)\n26 (Non selected user clearing)\n26 (Non-selected user clearing)\n27 (Destination out of order)\n27 (Destination out of order)\n28 (Invalid number format (incomplete number))\n28 (Invalid number format (address incomplete))\n29 (Facility rejected)\n29 (Facility rejected)\n30 (Response to STATUS ENQUIRY)\n30 (Response to STATUS ENQUIRY)\n31 (Normal, unspecified) (NOTE 1)\n31 (Normal, unspecified)\n34 (No circuit/channel available)\n34 (No circuit/channel available)\n38 (Network out of order)\n38 (Network out of order)\n41 (Temporary failure)\n41 (Temporary failure)\n42 (Switching equipment congestion)\n42 (Switching equipment congestion)\n43 (Access information discarded)\n43 (Access information discarded)\n44 (requested circuit/channel not available)\n44 (Requested circuit/channel not available)\n47 (Resource unavailable, unspecified) (NOTE 2)\n47 (Resource unavailable, unspecified)\n49 (Quality of service unavailable)\n49 (Quality of service not available)\n50 (Requested facility not subscribed)\n50 (Requested facility not subscribed)\n55 (Incoming calls barred within the CUG)\n55 (Incoming calls barred within CUG)\n57 (Bearer capability not authorised)\n57 (Bearer capability not authorised)\n58 (Bearer capability not presently available)\n58 (Bearer capability not presently available)\n63 (Service option not available, unspecified) (NOTE 3)\n63 (Service option not available, unspecified\n65 (Bearer capability not implemented)\n65 (Bearer capability not implemented)\n69 (Requested facility not implemented)\n69 (Requested facility not implemented)\n70 (Only restricted digital information capability is available)\n70 (Only restricted digital information capability is available)\n79 (Service or option not implemented, unspecified) (NOTE 4)\n79 (Service or option not implemented, unspecified)\n81 (Invalid transaction identifier value)\n81 (Invalid call reference value)\n87 (User not member of CUG)\n87 (User not member of CUG)\n88 (Incompatible destination)\n88 (Incompatible destination)\n91 (Invalid transit network selection)\n91 (Invalid transit network selection)\n95 (Semantically incorrect message) (NOTE 5)\n95 (Invalid message, unspecified)\n97 (Message type non-existent or not implemented)\n97 (Message type non-existent or not implemented)\n98 (Message type not compatible with protocol state)\n98 (Message not compatible with call state or message type non-existent or not implemented)\n99 (Information element non-existent or not implemented)\n99 (Information element/parameter non-existent or not implemented)\n101 (Message not compatible with protocol state)\n101 (Message not compatible with call state)\n102 (Recovery on timer expiry)\n102 (Recovery on timer expiry)\n111 (Protocol error, unspecified) (NOTE 6)\n111 (Protocol error, unspecified)\n127 (Interworking, unspecified) (NOTE 7)\n127 (Interworking, unspecified)\nNOTE 1:\tAll other values in the range 0 to 31 not appearing in table shall be treated as cause 31.\nNOTE 2:\tAll other values in the range 32 to 47 not appearing in table shall be treated as cause 47.\nNOTE 3:\tAll other values in the range 48 to 63 not appearing in table shall be treated as cause 63.\nNOTE 4:\tAll other values in the range 64 to 79 not appearing in table shall be treated as cause 79.\nNOTE 5:\tAll other values in the range 80 to 95 not appearing in table shall be treated as cause 95.\nNOTE 6:\tAll other values in the range 96 to 111 not appearing in table shall be treated as cause 111.\nNOTE 7:\tAll other values in the range 112 to 127 not appearing in table shall be treated as cause 127.\nTable 5.4.8.1.3: Mapping of location parameter of Cause information element to SIP Reason header field location parameter\nCause information element\nReason header field with protocol value \"Q.850\"\n\"Location\" parameter value\n\"location\" parameter value\nuser\nU\nprivate network serving the local user\nLPN\npublic network serving the local user\nLN\ntransit network\nTN\npublic network serving the remote user\nRLN\nprivate network serving the remote user\nRPN\ninternational network\nINTL\nnetwork beyond interworking point\nBI",
      "chunk_type": "requirement",
      "cross_references": [
        "table_5.4.8.1.1",
        "table_5.4.8.1.2",
        "table_5.4.8.1.3"
      ]
    },
    {
      "chunk_id": "ts_29.292_5.4.8.2",
      "section_id": "5.4.8.2",
      "section_title": "Receipt of CANCEL or BYE",
      "content": "If the MSC Server receives a CANCEL or BYE request, the MSC Server shall initiate call clearing procedures by sending a DISCONNECT message towards the UE as described in 3GPP TS 24.008 [3] with the following interworking applied:\n-\tif one or more Reason header fields are included in the CANCEL or BYE request, then the cause value of each Reason header field shall be mapped to a cause information element in the DISCONNECT message as follows:\na)\tif the Reason header field contains the protocol header field parameter set to \"Q.850\", or \"SIP\" with a cause header field parameter value other than \"200\", the cause information element shall be built as described in clause 5.3.8; and\nb)\tif the Reason header field contains the protocol header field parameter set to \"SIP\", the cause header field parameter set to \"200\" as specified in IETF RFC 3326 [45], the cause information element shall be set to cause value 13 (call completed elsewhere).\n-\tif no Reason header field is included in the CANCEL or BYE request, a cause value set to 31 (normal, unspecified), coding standard set to \"Standard defined for the GSM PLMNs\" and location set to \"network beyond interworking point\" shall be used in the cause information element in the DISCONNECT message.",
      "chunk_type": "requirement",
      "cross_references": [
        "clause_5.3.8",
        "ts_24.008"
      ]
    },
    {
      "chunk_id": "ts_29.292_5.4.9",
      "section_id": "5.4.9",
      "section_title": "Receipt of CONNECT",
      "content": "Upon receipt of the CONNECT message from the UE, the MSC Server shall send a 200 OK response to the initial INVITE.\nInterworking applied for the TIR services is described in clause 5.6.2.2.",
      "chunk_type": "requirement",
      "cross_references": [
        "clause_5.6.2.2"
      ]
    },
    {
      "chunk_id": "ts_29.292_5.4.10",
      "section_id": "5.4.10",
      "section_title": "Call failure procedures",
      "content": "The MSC Server shall handle call failures (e.g. timer expiration) during mobile terminating call establishment in accordance with 3GPP TS 24.008 [3]. The cause value used towards the calling user as specified in 3GPP TS 24.008 [3] shall be mapped to a final response to the INVITE request as specified in clause 5.4.8.1.",
      "chunk_type": "procedure",
      "cross_references": [
        "clause_5.4.8.1",
        "ts_24.008"
      ]
    },
    {
      "chunk_id": "ts_29.292_5.4.11",
      "section_id": "5.4.11",
      "section_title": "Autonomous clearing initiated by the MSC Server",
      "content": "If the MSC Server determines due to internal procedures that the call shall be released, call release shall be in accordance with 3GPP TS 24.008 [3] clause 5.4.4 with the additional interworking defined here.\nNOTE 1:\tIf a SIP 200 (OK) response has been sent but the SIP ACK request is not yet received, the procedure in clause 5.5.4 is used instead.\nDepending on the reason for the clearing, the MSC Server shall send a SIP 4xx or 5xx response as specified in 3GPP TS 24.229 [2] to the IM CN subsystem. The MSC Server shall include a Reason header field populated as follows:\n-\tthe protocol field set to \"Q.850\"; and\n-\ta \"cause\" header field parameter aligned with the value used in the cause information element of the call clearing message towards the UE.\nNOTE 2:\tThe inclusion of reason-text in the Reason header is implementation specific.",
      "chunk_type": "requirement",
      "cross_references": [
        "ts_24.008_clause_5.4.4",
        "clause_5.5.4",
        "ts_24.008",
        "ts_24.229"
      ]
    },
    {
      "chunk_id": "ts_29.292_5.5.1",
      "section_id": "5.5.1",
      "section_title": "General",
      "content": "The following subclauses define the procedure and signalling interworking performed by the MSC Server for call clearing of an established call. This interworking is independent of the direction of original call establishment.\nCall clearing during call setup is described in subclauses 5.3.7, 5.3.8, 5.3.9, 5.4.8.1 and 5.4.10.",
      "chunk_type": "definition",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.292_5.5.2",
      "section_id": "5.5.2",
      "section_title": "Clearing initiated by the mobile",
      "content": "MSC Server handling of call clearing initiated by the mobile shall be in accordance with 3GPP TS 24.008 [3] with the additional interworking defined here.\nUpon receipt of a DISCONNECT message, the MSC Server shall send a BYE request as specified in 3GPP TS 24.229 [2] to the IM CN subsystem. The first cause information element in the DISCONNECT message shall be included in a Reason header field in the BYE request as follows:\n-\tset the protocol value to \"Q.850\"; and\n-\tset the numeric \"cause\" parameter value to the cause value field of the cause information element according to table 5.4.8.1.2.\nNOTE:\tThe inclusion of the \"text\" header field parameter in the Reason header field is implementation specific.\nIf, as a network option, the MSC Server supports the location header field parameter as described in IETF RFC 8606 [68], the MSC Server shall map the location parameter of the cause information element to the location parameter in the SIP Reason header field according to table 5.4.8.1.3.",
      "chunk_type": "requirement",
      "cross_references": [
        "table_5.4.8.1.2",
        "table_5.4.8.1.3",
        "ts_24.008",
        "ts_24.229"
      ]
    },
    {
      "chunk_id": "ts_29.292_5.5.3",
      "section_id": "5.5.3",
      "section_title": "Clearing initiated by the IM CN subsystem",
      "content": "Upon receipt of a BYE request, the MSC Server shall send a DISCONNECT message towards the mobile. If one or more Reason header fields is included in the BYE request, each Reason header field shall be mapped to a cause information element in the DISCONNECT message according to clause 5.3.8.\nIf no Reason header is present, a cause information element value of 16 (Normal call clearing) shall be used.",
      "chunk_type": "requirement",
      "cross_references": [
        "clause_5.3.8"
      ]
    },
    {
      "chunk_id": "ts_29.292_5.5.4",
      "section_id": "5.5.4",
      "section_title": "Autonomous clearing initiated by the MSC Server",
      "content": "If the MSC Server determines due to internal procedures that the call shall be released, call release shall be in accordance with 3GPP TS 24.008 [3] with the additional interworking defined here.\nThe MSC Server shall send a BYE request to the IM CN subsystem. The MSC Server shall align according to table 5.4.8.1.2 the value used in the cause information element in the DISCONNECT message with the value used in the \"cause\" parameter for the \"Q.850\" protocol field in the Reason header of the BYE request.",
      "chunk_type": "requirement",
      "cross_references": [
        "table_5.4.8.1.2",
        "ts_24.008"
      ]
    },
    {
      "chunk_id": "ts_29.292_5.6.1",
      "section_id": "5.6.1",
      "section_title": "Originating identification presentation/restriction (OIP/OIR)",
      "content": "The interworking required for OIP is defined in clause 5.4.3.\nThe interworking required for OIR is defined in clause 5.3.3.2.",
      "chunk_type": "general",
      "cross_references": [
        "clause_5.4.3",
        "clause_5.3.3.2"
      ]
    },
    {
      "chunk_id": "ts_29.292_5.6.2.1",
      "section_id": "5.6.2.1",
      "section_title": "Terminating identification presentation (TIP)",
      "content": "When interworking a SIP 200 OK (INVITE) response to a CONNECT message as described in clause 5.3.6, a MSC Server which supports the normal operation of the connected number supplementary service as described in 3GPP TS 24.081 [12] shall apply the following interworking for the TIP supplementary service:\n-\tif a P-Asserted-Identity header containing a tel URI or a SIP URI with \"user=phone\" is present, the MSC Server shall use this header to build a connected number information element as follows:\n-\tif the tel URI or number within the userinfo part of the SIP URI is in international format, set the type of number to \"international number\", otherwise set the type of number to \"national number\"; and\n-\tset the number plan identification to \"ISDN/telephony numbering plan\"; and\n-\tset the presentation indicator to \"presentation allowed\"; and\n-\tset the screening indicator to \"network provided\"; and\n-\tset the number digits fields to the telephone number contained in the tel URI or the userinfo part of the SIP URI; or\nNOTE 1:\tIf the P-Asserted-Identity header contains both a tel URI and a SIP URI with \"user=phone\", the URI used for mapping is implementation specific.\nNOTE 2:\tThe number mapping does not include any digits contained in the phone-context parameter.\n-\tif a P-Asserted-Identity header is present but does not contain a tel URI or a SIP URI with \"user=phone\", the MSC Server shall build a connected number information element as follows:\n-\tset the type of number to \"unknown\"; and\n-\tset the number plan identification to \"unknown\"; and\n-\tset the presentation indicator to \"number not available due to interworking\"; and\n-\tset the screening indicator to \"network provided\"; and\n-\tdo not include any number digits fields; or\n-\tif no P-Asserted-Identity header is present but a Privacy header with priv-value set to \"id\" is present, the MSC Server shall build a connected number information element as follows:\n-\tset the type of number to \"unknown\"; and\n-\tset the number plan identification to \"unknown\"; and\n-\tset the presentation indicator to \"presentation restricted\"; and\n-\tset the screening indicator to \"network provided\"; and\n-\tdo not include any number digits fields; or\n-\tif neither a P-Asserted-Identity header nor a Privacy header field with a priv-value set to \"id\" is present, then no connected number information element shall be included.",
      "chunk_type": "general",
      "cross_references": [
        "clause_5.3.6",
        "ts_24.081"
      ]
    },
    {
      "chunk_id": "ts_29.292_5.6.2.2",
      "section_id": "5.6.2.2",
      "section_title": "Terminating identification restriction (TIR)",
      "content": "The MSC Server shall not include a Privacy header in any response to an INVITE request.\nNOTE:\t3GPP TS 24.081 [12] does not provide a mechanism for a terminator to temporarily override default settings for this service. The inclusion of a Privacy header could lead to the AS serving the terminating user to mistakenly assume that a default setting is being temporarily overridden by the terminating user. Omitting the Privacy header allows the AS supporting the terminating user to perform the appropriate actions for the TIR service in \"permanent mode\" as specified in 3GPP TS 24.608 [14].",
      "chunk_type": "requirement",
      "cross_references": [
        "ts_24.081",
        "ts_24.608"
      ]
    },
    {
      "chunk_id": "ts_29.292_5.6.3.1.1",
      "section_id": "5.6.3.1.1",
      "section_title": "Hold",
      "content": "When the MSC Server receives a HOLD message as specified in 3GPP TS 24.083 [26] and the media on the IM CN subsystem side of the CS-MGW is \"sendonly\" or \"inactive\", no interworking is required and the MSC Server shall send a HOLD ACKNOWLEDGE message to the UE as specified in 3GPP TS 24.083 [26]. If the media on the IM CN subsystem side is \"recvonly\" or \"sendrecv\", the MSC Server shall send an UPDATE or re-INVITE request containing an SDP offer configured as follows:\n-\tmark the media as \"sendonly\" or \"inactive\" as described in 3GPP TS 24.610 [27]; and\n-\tif RTCP is disabled for this media stream, include RR and RS bandwidth modifiers with values greater than zero to enable RTCP as described in 3GPP TS 26.114 [28] clause 7.3.1.\nUpon receipt of the SDP answer in a 200 OK response to the UPDATE or re-INVITE request, the MSC Server shall send a HOLD ACKNOWLEDGE message to the UE as specified in 3GPP TS 24.083 [26].\nIf the SDP offer is rejected or a non-200 response is received to the UPDATE or re-INVITE request, the MSC Server shall send a HOLD REJECT message to the UE as specified in 3GPP TS 24.083 [26] with cause parameter set to \"Facility rejected\".",
      "chunk_type": "general",
      "cross_references": [
        "ts_26.114_clause_7.3.1",
        "ts_24.083",
        "ts_24.610",
        "ts_26.114"
      ]
    },
    {
      "chunk_id": "ts_29.292_5.6.3.1.2",
      "section_id": "5.6.3.1.2",
      "section_title": "Resume",
      "content": "When the MSC Server receives a RETRIEVE message as specified in 3GPP TS 24.083 [26] and the media on the IM CN subsystem side of the CS-MGW is \"recvonly\" or \"sendrecv\", no interworking is required and the MSC Server shall send a RETRIEVE ACKNOWLEDGE message to the UE as specified in 3GPP TS 24.083 [26]. If the media on the IM CN subsystem side is \"sendonly\" or \"inactive\", the MSC Server shall send an UPDATE or re-INVITE request containing an SDP offer with media marked as \"recvonly\" or \"sendrecv\" as described in 3GPP TS 24.610 [27]. The MSC Server may include RR and RS bandwidth modifiers set to zero in the SDP offer to disable RTCP.\nUpon receipt of the SDP answer in a 200 OK response to the UPDATE or re-INVITE request, the MSC Server shall send a RETRIEVE ACKNOWLEDGE message to the UE as specified in 3GPP TS 24.083 [26].\nIf the SDP offer is rejected or a non-200 response is received to the UPDATE or re-INVITE request, the MSC Server shall send a RETRIEVE REJECT message to the UE as specified in 3GPP TS 24.083 [26] with cause parameter set to \"Facility rejected\".",
      "chunk_type": "general",
      "cross_references": [
        "ts_24.083",
        "ts_24.610"
      ]
    },
    {
      "chunk_id": "ts_29.292_5.6.3.2.1",
      "section_id": "5.6.3.2.1",
      "section_title": "Hold",
      "content": "The IM CN subsystem makes a hold request by sending an UPDATE or re-INVITE request with an \"inactive\" or \"sendonly\" SDP attribute, depending on the current state of the session. Upon receipt of a hold request from the IM CN subsystem, the MSC Server shall perform the following interworking:\n-\tif the MSC Server received a non-zero SS screening indicator as defined in 3GPP TS 24.080 [29] from the UE, the MSC Server shall send a FACILITY message indicating the call has been placed on hold as specified in 3GPP TS 24.083 [26];\n-\tif the MSC Server did not receive a non-zero SS screening indicator from the UE, the MSC Server shall not send any message to the UE.",
      "chunk_type": "general",
      "cross_references": [
        "ts_24.080",
        "ts_24.083"
      ]
    },
    {
      "chunk_id": "ts_29.292_5.6.3.2.2",
      "section_id": "5.6.3.2.2",
      "section_title": "Resume",
      "content": "The IM CN subsystem requests to resume a session by sending an UPDATE or re-INVITE request with an \"recvonly\" or \"sendrecv\" SDP attribute, depending on the current state of the session. Upon receipt of a resume request from the IM CN subsystem, the MSC Server shall perform the following interworking:\n-\tif the MSC Server received a non-zero SS screening indicator as defined in 3GPP TS 24.080 [29] from the UE, the MSC Server shall send a FACILITY message indicating the call has been retrieved as specified in 3GPP TS 24.083 [26];\n-\tif the MSC Server did not receive a non-zero SS screening indicator from the UE, the MSC Server shall not send any message to the UE.",
      "chunk_type": "general",
      "cross_references": [
        "ts_24.080",
        "ts_24.083"
      ]
    },
    {
      "chunk_id": "ts_29.292_5.6.4.1",
      "section_id": "5.6.4.1",
      "section_title": "Receipt of initial INVITE",
      "content": "NOTE:\tClause 5.4.2 contains general applicable procedures executed upon receipt of an initial INVITE request.\nIf the initial INVITE request includes:\n-\ta MIME body (part) according to clause 4.4.1 of 3GPP TS 24.615 [44] with the \"communication-waiting-indication\" element contained in the \"ims-cw\" root element according to 3GPP TS 24.615 [44]; or\n-\tdoes not contain a Replaces header field corresponding to a established dialog and the target of the INVITE request is engaged in the established SIP dialog;\nthen, upon interworking the initial INVITE request to a SETUP message as described in clause 5.4.3, the MSC Server shall apply the following additional interworking:\n-\tthe MSC Server shall include a Signal information element with value 7 (call waiting tone on); and\n-\tif the INVITE request includes a MIME body (part) according to clause 4.4.1 of 3GPP TS 24.615 [44] with the \"communication-waiting-indication\" element contained in the \"ims-cw\" root element according to 3GPP TS 24.615 [44]:\n-\tthe MSC Server shall store an indication that this session includes a CW AS; and\n-\tthe MSC Server may start timer TUE-CW as described in 3GPP TS 24.615 [44].\nIf the CALL CONFIRMED message received by the MSC Server during mobile terminating call setup contains a Cause information element set to a value of 17 (User busy), then upon interworking the subsequent ALERTING message to a 180 Ringing response as described in clause 5.4.6, the MSC Server shall apply the following additional interworking:\n-\tthe MSC Server shall insert an Alert-Info header set to \"urn:alert:service:call-waiting\" as described in 3GPP TS 24.615 [44] into the 180 Ringing response.",
      "chunk_type": "general",
      "cross_references": [
        "clause_5.4.2",
        "ts_24.615_clause_4.4.1",
        "clause_5.4.3",
        "clause_5.4.6",
        "ts_24.615"
      ]
    },
    {
      "chunk_id": "ts_29.292_5.6.4.2",
      "section_id": "5.6.4.2",
      "section_title": "Accepting the waiting call",
      "content": "If the subscriber chooses to accept the waiting call and put the existing call on hold, the MSC Server shall:\n-\tupon receipt of the HOLD message for the existing call, apply the interworking specified in clause 5.6.3.1.1; and\n-\tupon receipt of the CONNECT message for the waiting call, stop timer TUE-CW if it was started and apply the interworking specified in clause 5.4.9.\nIf the subscriber chooses to accept the waiting call and release the existing call, the MSC Server shall:\n-\tupon receipt of the DISCONNECT message for the existing call, apply the interworking specified in clause 5.5.2; and\n-\tupon receipt of the CONNECT message for the waiting call, stop timer TUE-CW if it was started and apply the interworking specified in clause 5.4.9.",
      "chunk_type": "requirement",
      "cross_references": [
        "clause_5.6.3.1.1",
        "clause_5.4.9",
        "clause_5.5.2"
      ]
    },
    {
      "chunk_id": "ts_29.292_5.6.4.3",
      "section_id": "5.6.4.3",
      "section_title": "Rejecting the waiting call",
      "content": "If the MSC Server receives a first clearing message from the UE during call establishment, the cause value used towards the calling user as specified in 3GPP TS 24.008 [3] shall be mapped to a final response to the INVITE request as specified in clause 5.4.8.1, except for cause codes:\n-\t19 (User alerting, no answer) and 18 (No user responding). A first clearing message from the UE during call establishment with cause code 19 (User alerting, no answer) or 18 (No user responding) shall be mapped to the 480 (Temporarily unavailable) final response including a Reason header field (see RFC 3326 [45]) with the protocol set to \"Q.850\" and the cause set to \"19\" or \"18\", respectively;\n-\t63 (Service or option not available, unspecified) and 69 (Requested facility not implemented):\n-\tif the MSC Server stored an indication that the session includes a CW AS, a first clearing message from the UE during call establishment with cause code 63 (Service or option not available, unspecified) or 69 (Requested facility not implemented) used towards the calling user as specified in 3GPP TS 24.008 [3] shall be mapped to the 415 (Unsupported Media Type) final response; or\n-\tif the MSC Server did not store an indication that the session includes a CW AS, the cause codes 63 (Service or option not available, unspecified) and 69 (Requested facility not implemented) used towards the calling user as specified in 3GPP TS 24.008 [3] shall be mapped to a final response to the INVITE request as specified in clause 5.4.8.1.\nDepending on operator policy, the MSC Server may insert in a SIP failure response a Response-Source header field with an \"fe\" header field parameter constructed with the URN namespace \"urn:3gpp:fe\", the \"fe-id\" part of the URN set to \"msc-server\" and the \"role\" header field parameter set to \"msc-server-ics\" in accordance with subclause 7.2.17 of 3GPP TS 24.229 [2].\nThe MSC Server shall stop timer TUE-CW if it was started.",
      "chunk_type": "requirement",
      "cross_references": [
        "clause_5.4.8.1",
        "ts_24.229_clause_7.2.17",
        "ts_24.008",
        "ts_24.229"
      ]
    },
    {
      "chunk_id": "ts_29.292_5.6.4.4",
      "section_id": "5.6.4.4",
      "section_title": "Communication release during waiting condition",
      "content": "Upon receipt of a BYE or CANCEL request for the waiting call, the MSC Server shall stop timer TUE-CW if it was started, and:\n-\tif the BYE or CANCEL request includes a Reason header field (see RFC 3326 [45]) with the protocol set to \"SIP\" and the cause set to \"408\" then the MSC Server shall send a first clearing message according to clause 5.4.8.2, with the following addition:\n-\tthe Cause information element shall be set to cause 102 \"recovery on timer expiry\"; or\n-\tthe MSC Server shall act in accordance with clause 5.4.8.2.",
      "chunk_type": "requirement",
      "cross_references": [
        "clause_5.4.8.2"
      ]
    },
    {
      "chunk_id": "ts_29.292_5.6.4.5",
      "section_id": "5.6.4.5",
      "section_title": "CW condition timeout",
      "content": "If timer TUE-CW was started and expires, the MSC Server shall:\n-\tsend a DISCONNECT message as described in 3GPP TS 24.008 [3], towards the UE for the waiting call, including the Cause information element, where the cause values is set to 102 \"recovery on timer expiry\", the coding standard set to \"Standard defined for the GSM PLMNs\" and location set to \"network beyond interworking point\";\n-\tif the MSC Server stored an indication that the session includes a CW AS, send a 480 (Temporarily unavailable) final response, including a Reason header field set to cause 19, according to 3GPP TS 24.615 [44] in response to the initial INVITE request, and depending on operator policy, the MSC Server may insert a Response-Source header field with an \"fe\" header field parameter constructed with the URN namespace \"urn:3gpp:fe\", the \"fe-id\" part of the URN set to \"msc-server\" and the \"role\" header field parameter set to \"msc-server-ics\" in accordance with subclause 7.2.17 of 3GPP TS 24.229 [2];\n;\n-\tif the MSC Server did not store an indication that the session includes a CW AS, the MSC Server shall act in accordance with clause 5.4.10.\nNOTE:\tStarting timer T2 or (optionally) T3 (or corresponding internal alerting supervision timing functions) as specified in 3GPP TS 24.083 [26] is an implementation option. Corresponding timers have been defined in 3GPP TS 24.615 [44] and 3GPP TS 24.604 [23]. If timers T2 or optionally T3 are started and expire, any resulting SIP responses that are not a 480 (Temporarily unavailable) final response, including a Reason header field set to cause 19, can interact with CW and (optionally) CDIV.",
      "chunk_type": "requirement",
      "cross_references": [
        "ts_24.229_clause_7.2.17",
        "clause_5.4.10",
        "ts_24.008",
        "ts_24.615",
        "ts_24.229",
        "ts_24.083",
        "ts_24.604"
      ]
    },
    {
      "chunk_id": "ts_29.292_5.6.4.6",
      "section_id": "5.6.4.6",
      "section_title": "Notification to originator",
      "content": "For originating calls interworked to the IM CN subsystem as described in clause 5.3, if the MSC Server receives a 180 Ringing response with a Alert-Info header field set to \"urn:alert:service:call-waiting\" according to 3GPP TS 24.615 [44], the MSC Server shall, according to 3GPP TS 24.083 [26], send if possible, the ALERTING message as the carrier message for the Call Waiting notification. Otherwise the MSC Server shall send a FACILITY message as the carrier message for the Call Waiting notification as specified in 3GPP TS 24.083 [26].",
      "chunk_type": "general",
      "cross_references": [
        "clause_5.3",
        "ts_24.615",
        "ts_24.083"
      ]
    },
    {
      "chunk_id": "ts_29.292_5.6.5",
      "section_id": "5.6.5",
      "section_title": "Communication Barring (CB)",
      "content": "When interworking a 4xx, 5xx or 6xx response to the initial INVITE request to a DISCONNECT message as described in clause 5.3.8, the MSC Server shall apply the following additional interworking for the CB services described in 3GPP TS 24.611 [31]:\n-\tif a 433 Anonymity Disallowed response is received, the MSC Server shall include in the DISCONNECT a NotifySS operation containing an SS-Code set to the common code for incoming barring services and an SS-Status set to indicate the service is active and operative as specified in 3GPP TS 24.088 [30];\n-\tif a 603 Decline response is received, the MSC Server shall include in the DISCONNECT a NotifySS operation containing an SS-Code set to the common code for all barring services and an SS-Status set to indicate the service is active and operative as specified in 3GPP TS 24.088 [30].\nNOTE:\tThe common SS code is used as 3GPP TS 24.611 [31] specifies the use of a 603 Decline response for both the OCB and ICB services.",
      "chunk_type": "requirement",
      "cross_references": [
        "clause_5.3.8",
        "ts_24.611",
        "ts_24.088"
      ]
    },
    {
      "chunk_id": "ts_29.292_5.6.6.1",
      "section_id": "5.6.6.1",
      "section_title": "General",
      "content": "The following subclauses describe the MSC Server interworking behaviour related to the Communication Diversion (CDIV) services defined in 3GPP TS 24.604 [23].",
      "chunk_type": "definition",
      "cross_references": [
        "ts_24.604"
      ]
    },
    {
      "chunk_id": "ts_29.292_5.6.6.2.1",
      "section_id": "5.6.6.2.1",
      "section_title": "Communication Forwarding Unconditional (CFU)",
      "content": "Invocation of CFU is handled by the IM CN subsystem as described in 3GPP TS 24.604 [23] and requires no interworking at the MSC Server.",
      "chunk_type": "general",
      "cross_references": [
        "ts_24.604"
      ]
    },
    {
      "chunk_id": "ts_29.292_5.6.6.2.2",
      "section_id": "5.6.6.2.2",
      "section_title": "Communication Forwarding Busy (CFB)",
      "content": "For network determined user busy, invocation of CFB is handled by the IM CN subsystem as described in 3GPP TS 24.604 [23] and requires interworking at the MSC Server.\nFor user determined user busy during mobile terminating call establishment as described in clause 5.4, if the MSC Server receives a DISCONNECT, RELEASE or RELEASE COMPLETE message from the UE with a cause information element set to \"User Busy\", the MSC Server shall perform the interworking described in clause 5.4.8.1.",
      "chunk_type": "general",
      "cross_references": [
        "clause_5.4",
        "clause_5.4.8.1",
        "ts_24.604"
      ]
    },
    {
      "chunk_id": "ts_29.292_5.6.6.2.3",
      "section_id": "5.6.6.2.3",
      "section_title": "Communication Forwarding No Reply (CFNR)",
      "content": "Invocation of CFNR is handled by the IM CN subsystem as described in 3GPP TS 24.604 [23] and requires no interworking at the MSC Server.",
      "chunk_type": "general",
      "cross_references": [
        "ts_24.604"
      ]
    },
    {
      "chunk_id": "ts_29.292_5.6.6.2.4",
      "section_id": "5.6.6.2.4",
      "section_title": "Communication Forwarding on Not Logged-In (CFNL)",
      "content": "Invocation of CFNL is handled by the IM CN subsystem as described in 3GPP TS 24.604 [23] and requires no interworking at the MSC Server.",
      "chunk_type": "general",
      "cross_references": [
        "ts_24.604"
      ]
    },
    {
      "chunk_id": "ts_29.292_5.6.6.2.5",
      "section_id": "5.6.6.2.5",
      "section_title": "Communication Deflection (CD)",
      "content": "During mobile terminating call establishment as described in clause 5.4, if the MSC Server receives a DISCONNECT message from the UE with a facility information element containing a call deflection request as specified in 3GPP TS 24.072 [25], the MSC Server shall send a 302 (Moved Temporarily) response to the initial INVITE with the following interworking applied:\n-\tthe DeflectedToNumber parameter in the facility information element received in the DISCONNECT message is used to derive a Contact header as follows:\n-\tif the nature of address indicator is set to \"international number\", then the address digits in the DeflectedToNumber parameter, prefixed with a \"+\", shall be used to build a tel URI or a SIP URI with \"user=phone\"; or\n-\tif the nature of address indicator is not set to \"international number\", then the MSC Server shall either:\n-\tconvert the address digits in the DeflectedToNumber parameter to international format by prefixing the number digits with \"+CC\" and use this to build a tel URI or a SIP URI with \"user=phone\"; or\nNOTE 1:\tCC is the country code of the network in which the MSC Server is located.\n-\tuse the address digits in the DeflectedToNumber parameter to build a tel URI or a SIP URI with \"user=phone\". The phone-context parameter shall include the home network domain name defined for IMS centralized services in 3GPP TS 23.003 [10]. For geo-local numbers, the home domain name shall be prefixed by the \"geo-local\" string according to 3GPP TS 24.229 [2].\nNOTE 2:\tThe manner in which the MSC Server distinguishes between geo-local and home-local numbers is implementation specific.\nDepending on operator policy, the MSC Server may insert in a 302 (Moved Temporarily) response a Response-Source header field with an \"fe\" header field parameter constructed with the URN namespace \"urn:3gpp:fe\", the \"fe-id\" part of the URN set to \"msc-server\" and the \"role\" header field parameter set to \"msc-server-ics\" in accordance with subclause 7.2.17 of 3GPP TS 24.229 [2].",
      "chunk_type": "general",
      "cross_references": [
        "clause_5.4",
        "ts_24.229_clause_7.2.17",
        "ts_24.072",
        "ts_23.003",
        "ts_24.229"
      ]
    },
    {
      "chunk_id": "ts_29.292_5.6.6.2.6",
      "section_id": "5.6.6.2.6",
      "section_title": "Communication Forwarding on Subscriber Not Reachable (CFNRc)",
      "content": "Clause 5.4.2 describes a number of scenarios where the MSC Server determines the terminating user is not reachable prior to sending the SETUP message and returns the appropriate response to the INVITE request to allow CFNRc to be initiated in the IM CN subsystem. If the MSC Server determines the terminating user is not reachable prior to sending the SETUP message for any other scenario not described in clause 5.4.2, the MSC Server shall send a 500 Server Internal Error response to the initial INVITE request and depending on operator policy, the MSC Server may insert in the 500 (Server Internal Error) response a Response-Source header field with an \"fe\" header field parameter constructed with the URN namespace \"urn:3gpp:fe\", the \"fe-id\" part of the URN set to \"msc-server\" and the \"role\" header field parameter set to \"msc-server-ics\" in accordance with subclause 7.2.17 of 3GPP TS 24.229 [2].",
      "chunk_type": "general",
      "cross_references": [
        "clause_5.4.2",
        "ts_24.229_clause_7.2.17",
        "ts_24.229"
      ]
    },
    {
      "chunk_id": "ts_29.292_5.6.6.3.2",
      "section_id": "5.6.6.3.2",
      "section_title": "Notification to an originating user on CS access",
      "content": "For originating calls interworked to the IM CN subsystem as described in clause 5.3, if communication diversion occurs for a served user with the subscription option \"Originating user receives notification that his communication has been diverted (forwarded or deflected)\" as described in 3GPP TS 24.604 [23], the following interworking shall be applied upon receipt of a 181 (Call Is Being Forwarded) response:\n-\tif a History-Info header field is present and any history entry contains a \"cause\" SIP URI parameter, as defined in IETF RFC 4458 [55] set to a value listed in table 5.6.6.3.2.1, the MSC Server shall send a FACILITY message containing a NotifySS operation indicating the call has been forwarded. The NotifySS operation shall contain an SS-Code as specified in 3GPP TS 24.082 [24] and 3GPP TS 24.072 [25] mapped from the value of the last \"cause\" SIP URI parameter according to table 5.6.6.3.2.1;\nTable 5.6.6.3.2.1: Mapping the History-Info cause value to SS-Code\nCause value\nSS-Code\n302\nCFU\n404\nCommon SS-Code for all forwarding SS\n408\nCFNRy\n480\nCD\n486\nCFB\n487\nCD\n503\nCFNRc\nNOTE:\tPer 3GPP TS 24.604 [23] the History-Info header field can also be received in a SIP 180 (Ringing) or SIP 200 (OK) response to the initial SIP INVITE request. No interworking is performed in these scenarios as 3GPP TS 24.082 [24] does not allow this information to be presented to the subscriber in a manner consistent with 3GPP TS 24.604 [23].",
      "chunk_type": "general",
      "cross_references": [
        "clause_5.3",
        "table_5.6.6.3.2.1",
        "ts_24.604",
        "ts_24.082",
        "ts_24.072"
      ]
    },
    {
      "chunk_id": "ts_29.292_5.6.6.3.3",
      "section_id": "5.6.6.3.3",
      "section_title": "Notification to a terminating user on CS access",
      "content": "When interworking a SIP INVITE request to a SETUP message as described in clause 5.4.3, the MSC Server shall apply the following interworking to provide notification of CDIV if a History-Info header field is present in the INVITE request:\n-\tif any history entry in the History-Info header field contains a \"cause\" SIP URI parameter, as defined in IETF RFC 4458 [55], set to a value listed in table 5.6.6.3.2.1, the MSC Server shall send a FACILITY information element containing a NotifySS operation indicating the call has been forwarded. The NotifySS operation shall contain an SS-Code as specified in 3GPP TS 24.082 [24] and 3GPP TS 24.072 [25] mapped from the value of the last \"cause\" SIP URI parameter according to table 5.6.6.3.2.1.\n-\tif\na)\tthe SIP INVITE request does not contain a Privacy header field with any of the privacy values \"header\", \"session\" or \"history\"; and\nb)\tthe history entry in the History-Info header field preceding the last history entry in History-Info header field containing a \"cause\" SIP URI parameter defined in IETF RFC 4458 [55] set to a value listed in table 5.6.6.3.2.1 does not contain an escaped privacy header with a value of \"history\",\n-\tthen the following additional interworking shall be applied:\n-\tif the hi-targeted-to-uri within the history entry preceding the last history entry containing a \"cause\" SIP URI parameter contains a tel URI or a SIP URI with \"user=phone\", the MSC Server shall include a redirecting party BCD number information element set as follows:\n-\tif the tel URI or telephone number within the SIP URI is in international format, set the type of number to \"international number\", otherwise set the type of number to \"national number\";\n-\tset the number plan identification to \"ISDN/telephony numbering plan\";\n-\tset the presentation indicator to \"presentation allowed\";\n-\tset the screening indicator to \"network provided\"; and\n-\tset the number digits fields to the telephone number contained in the tel URI or SIP URI;\nNOTE:\tThe number mapping does not include any digits contained in the phone-context parameter.\n-\totherwise,\n-\tthe MSC Server shall build a redirecting party BCD number information element as follows:\n-\tset the type of number to \"unknown\";\n-\tset the number plan identification to \"unknown\";\n-\tset the presentation indicator to \"number not available due to interworking\"; and\n-\tset the screening indicator to \"network provided\".",
      "chunk_type": "requirement",
      "cross_references": [
        "clause_5.4.3",
        "table_5.6.6.3.2.1",
        "ts_24.082",
        "ts_24.072"
      ]
    },
    {
      "chunk_id": "ts_29.292_5.6.7.1",
      "section_id": "5.6.7.1",
      "section_title": "General",
      "content": "The following subclauses describe the MSC Server interworking behaviour related to the ECT service defined in 3GPP TS 24.629 [33] and a UE using CS access domain signalling specified in 3GPP TS 24.091 [32].",
      "chunk_type": "definition",
      "cross_references": [
        "ts_24.629",
        "ts_24.091"
      ]
    },
    {
      "chunk_id": "ts_29.292_5.6.7.2",
      "section_id": "5.6.7.2",
      "section_title": "MSC Server as transferor on behalf of UE",
      "content": "When the MSC Server receives a FACILITY message containing an ECT request from a UE with one answered call in a held state and another call in an answered and active or alerting state as specified in 3GPP TS 24.091 [32], the MSC Server shall build and send a REFER request as specified for a transferor UE in 3GPP TS 24.629 [33].\nWhen the MSC Server receives a NOTIFY request on the REFER dialog, interworking shall be applied based upon the SIP response status-code contained in the \"message/sipfrag\" message body as follows:\n-\tif status-code 100 Trying is received, no interworking is applied;\n-\tif status-code 200 OK is received, the MSC Server shall send a FACILITY message indicating transfer success to the UE as specified in 3GPP TS 24.091 [32]. The MSC Server shall then initiate clearing of the two calls towards the UE as specified in 3GPP TS 24.091 [32] and initiate clearing of the IM CN subsystem session with the transferee as specified in clause 5.5.4.\n-\tif status-code 503 is received, the MSC Server shall send a FACILITY message with a return error parameter set to \"SystemFailure\" and leave the two calls from the UE in the conditions they were in prior to the ECT request;\n-\tif any other status-code is received, the MSC Server shall send a FACILITY message with a return error parameter set to \"IllegalSS-Operation\" and leave the two calls from the UE in the conditions they were in prior to the ECT request.",
      "chunk_type": "general",
      "cross_references": [
        "clause_5.5.4",
        "ts_24.091",
        "ts_24.629"
      ]
    },
    {
      "chunk_id": "ts_29.292_5.6.7.3.1",
      "section_id": "5.6.7.3.1",
      "section_title": "Actions without 3PCC",
      "content": "NOTE 1:\tCS domain access signalling as specified in 3GPP TS 24.091 [32] does not provide a mechanism to present the transfer request to the transferee for authorization of the transfer. Automatic acceptance and execution of the REFER request by the MSC Server can therefore pose a security risk or have unwanted charging consequences. Acceptance of REFER requests is therefore subject to operator policy, which is outside the scope of the present document.\nWhen the MSC Server receives a REFER request in the context of a call transfer scenario as described in 3GPP TS 24.629 [33] clause 4.5.2.4.1.2.2, the MSC Server may perform the actions specified for a transferee UE in 3GPP TS 24.629 [33].\nIf the MSC Server does not support accepting REFER requests on behalf of the UE per operator policy, then the MSC Server shall return a 403 (Forbidden) response and depending on operator policy, the MSC Server may insert in the 403 (Forbidden) response a Response-Source header field with an \"fe\" header field parameter constructed with the URN namespace \"urn:3gpp:fe\", the \"fe-id\" part of the URN set to \"msc-server\" and the \"role\" header field parameter set to \"msc-server-ics\" in accordance with subclause 7.2.17 of 3GPP TS 24.229 [2].\nIf the MSC Server received a non-zero SS screening indicator from the UE as defined in 3GPP TS 24.080 [29], then upon sending the NOTIFY request indicating that the transfer is complete, the MSC Server may send a FACILITY message to the UE as specified in 3GPP TS 24.091 [32]. The MSC Server may include an Rdn parameter set to indicate that the remote party number is not available due to interworking.\nNOTE 2:\tThe remote party number, as indicated in the Refer-To header sent by the transferor, is not available to the MSC Server as it is replaced by the transferor AS as specified in 3GPP TS 24.629 [33].\nNOTE 3:\tDepending on the conferencing implementation in the IM CN subsystem (e.g. the manner in which users are invited to a conference), the MSC Server might not be able to distinguish between REFER requests for the ECT service and REFER requests for the conferencing service. In such cases, the MSC Server will not know which SS operation to indicate in the FACILITY message. Handling of this scenario is implementation specific.",
      "chunk_type": "general",
      "cross_references": [
        "ts_24.629_clause_4.5.2.4.1.2.2",
        "ts_24.229_clause_7.2.17",
        "ts_24.091",
        "ts_24.629",
        "ts_24.229",
        "ts_24.080"
      ]
    },
    {
      "chunk_id": "ts_29.292_5.6.7.3.2",
      "section_id": "5.6.7.3.2",
      "section_title": "Actions with 3PCC",
      "content": "When 3PCC is used for ECT as specified in 3GPP TS 24.629 [33], no special interworking is required at the MSC Server.",
      "chunk_type": "general",
      "cross_references": [
        "ts_24.629"
      ]
    },
    {
      "chunk_id": "ts_29.292_5.6.7.4",
      "section_id": "5.6.7.4",
      "section_title": "MSC Server as transfer target on behalf of UE",
      "content": "When the MSC Server receives an INVITE request which does not replace an existing session (e.g. blind ECT), the MSC Server shall follow the interworking procedures specified in clause 5.4.\nWhen the MSC Server receives an INVITE request which replaces an existing session, the MSC Server shall perform the actions specified for a transfer target UE in 3GPP TS 24.629 [33]. If the MSC Server received a non-zero SS screening indicator as defined in 3GPP TS 24.080 [29], then upon successful session establishment with the transferee the MSC Server shall send a FACILITY message to the UE as specified in 3GPP TS 24.091 [32] with the following interworking applied:\n-\tif a Privacy header with priv-value set to \"id\" is present, the MSC Server may include an Rdn parameter in the FACILITY message set to indicate presentation restricted as specified in 3GPP TS 24.080 [29];\n-\tif a Privacy header with a priv-value set to \"id\" is not present in the INVITE request, then:\n-\tif a P-Asserted-Identity header containing a tel URI or a SIP URI with \"user=phone\" is present in the INVITE, the MSC Server may include an Rdn parameter in the FACILITY message with a value set to the telephone number contained in this URI;\n-\tif a P-Asserted-Identity header is present but does not contain a tel URI or a SIP URI with \"user=phone\", the MSC Server may include an Rdn parameter in the FACILITY message set to indicate the number is not available due to interworking as specified in 3GPP TS 24.080 [29].",
      "chunk_type": "requirement",
      "cross_references": [
        "clause_5.4",
        "ts_24.629",
        "ts_24.080",
        "ts_24.091"
      ]
    },
    {
      "chunk_id": "ts_29.292_5.6.8.1",
      "section_id": "5.6.8.1",
      "section_title": "General",
      "content": "IM CN subsystem CONF functionality at a MSC Server is specified in 3GPP TS 24.292 [7]. The following subclauses describe the MSC Server interworking behaviour related to the CONF service defined in 3GPP TS 24.605 [35] and a UE using CS access domain signalling specified in 3GPP TS 24.084 [34].",
      "chunk_type": "definition",
      "cross_references": [
        "ts_24.292",
        "ts_24.605",
        "ts_24.084"
      ]
    },
    {
      "chunk_id": "ts_29.292_5.6.8.2.1",
      "section_id": "5.6.8.2.1",
      "section_title": "Conference creation",
      "content": "When the MSC Server receives a BuildMPTY request from a UE with one active call and one held call as described in 3GPP TS 24.084 [34], the MSC Server shall initiate conference creation and invite the remote parties to the conference as described in 3GPP TS 24.292 [7].\nNOTE:\tConference creation and inviting users to the conference are two distinct actions in the IM CN subsystem. However, in CS access signalling a single message creates the conference and adds the existing calls to the conference.\nAfter receiving NOTIFY requests indicating both remote parties have successfully transferred to the conference, the MSC Server shall send a FACILITY message indicating BuildMPTY success as specified in 3GPP TS 24.084 [34].\nIf a non-200 final response to the INVITE request which attempts to create the conference is received, the MSC Server shall send a FACILITY message with a return error parameter set to \"SystemFailure\" and leave the two calls from the UE in the conditions they were in prior to the conference creation request.",
      "chunk_type": "requirement",
      "cross_references": [
        "ts_24.084",
        "ts_24.292"
      ]
    },
    {
      "chunk_id": "ts_29.292_5.6.8.2.2",
      "section_id": "5.6.8.2.2",
      "section_title": "Putting the conference on hold",
      "content": "When the MSC Server receives a HoldMPTY request from a UE with an active conference, the MSC Server shall send an UPDATE or re-INVITE request containing a new SDP offer as described in clause 5.6.3.1.1.\nUpon receipt of the SDP answer in a 200 OK response to the UPDATE or re-INVITE request, the MSC Server shall send a FACILITY message indicating success as specified in 3GPP TS 24.084 [34].\nIf the SDP offer is rejected or a non-200 response is received to the UPDATE or re-INVITE request, the MSC Server shall send a FACILITY message as specified in 3GPP TS 24.084 [34] with a return error parameter set to \"SystemFailure\".",
      "chunk_type": "requirement",
      "cross_references": [
        "clause_5.6.3.1.1",
        "ts_24.084"
      ]
    },
    {
      "chunk_id": "ts_29.292_5.6.8.2.3",
      "section_id": "5.6.8.2.3",
      "section_title": "Resuming a held conference",
      "content": "When the MSC Server receives a RetrieveMPTY request from a UE with a conference on hold, the MSC Server shall send an UPDATE or re-INVITE request containing a new SDP offer as described in clause 5.6.3.1.2.\nUpon receipt of the SDP answer in a 200 OK response to the UPDATE or re-INVITE request, the MSC Server shall send a FACILITY message indicating success as specified in 3GPP TS 24.084 [34].\nIf the SDP offer is rejected or a non-200 response is received to the UPDATE or re-INVITE request, the MSC Server shall send a FACILITY message with a return error parameter set to \"SystemFailure\".",
      "chunk_type": "requirement",
      "cross_references": [
        "clause_5.6.3.1.2",
        "ts_24.084"
      ]
    },
    {
      "chunk_id": "ts_29.292_5.6.8.2.4",
      "section_id": "5.6.8.2.4",
      "section_title": "Adding a party to the conference",
      "content": "When the MSC Server receives a BuildMPTY from a UE with a conference on hold and separate active or waiting call as described in 3GPP TS 24.084 [34], the MSC Server shall:\n-\tinvite the remote party to the conference as described in 3GPP TS 24.292 [7]; and\n-\tsend an UPDATE or re-INVITE request to resume the held conference as described in clause 5.6.3.1.2.",
      "chunk_type": "requirement",
      "cross_references": [
        "clause_5.6.3.1.2",
        "ts_24.084",
        "ts_24.292"
      ]
    },
    {
      "chunk_id": "ts_29.292_5.6.8.2.5",
      "section_id": "5.6.8.2.5",
      "section_title": "Terminating the conference or disconnecting a party from the conference",
      "content": "When the MSC Server receives a DISCONNECT message from a UE with an established conference, with a transaction identifier corresponding to a specific remote party, the MSC Server shall start a conference termination specific timer. While the timer is running, MSC Server shall collect potential further DISCONNECT messages from the UE, with valid transaction identifiers, corresponding to other remote parties. These additional DISCONNECT messages shall not trigger starting a new timer and shall not restart the timer.\nNOTE 1: The value for the conference termination timer is implementation specific. The timer has to be long enough to allow that the UE encodes and transmits all the DISCONNECT messages to the MSC Server but it should be kept short so that the DISCONNECT messages used for disconnecting a single conference participant are not delayed too long. A value around 1 sec is seen as satisfactory.\nWhen the timer expires, MSC Server shall examine, whether it has received a DISCONNECT message corresponding to all remote parties that have been participants of the established conference and depending on that shall act as follows:\n-\tIf a DISCONNECT messages has been received for each participant, the MSC Server shall send a BYE request to the conference-URI.\nNOTE 2:\tA complete set of DISCONNECT messages is interpreted as request to terminate the established conference. The BYE request will lead to a termination of the conference by the conference focus, after removal all the participants, as described in 3GPP TS 24.147 [36], clause 5.3.2.7.\n-\tOtherwise, the MSC Server shall generate a separate REFER request for each DISCONNECT message to remove the corresponding party/parties from the conference as specified in 3GPP TS 24.147 [36] clause 5.3.1.6.3, with the Refer-To header of the REFER request set to the address of the conference participant being removed and also containing a \"method\" URI parameter set to \"BYE\". If the address of the conference participant being removed is a tel URI, the MSC server shall convert the tel URI to a SIP URI and shall set the host portion of the SIP URI to the home network domain name defined for IMS centralized services in 3GPP TS 23.003 [10].\nNOTE 3:\tThe MSC Server thus treats the DISCONNECT message(s) received before timer expiry as the user’s request for disconnecting the party/parties belonging to the received transaction identity/identities.",
      "chunk_type": "requirement",
      "cross_references": [
        "ts_24.147_clause_5.3.2.7",
        "ts_24.147_clause_5.3.1.6.3",
        "ts_24.147",
        "ts_23.003"
      ]
    },
    {
      "chunk_id": "ts_29.292_5.6.8.2.6",
      "section_id": "5.6.8.2.6",
      "section_title": "Receipt of a SplitMPTY message",
      "content": "When the MSC Server receives a SplitMPTY request from the UE, the MSC Server shall send a FACILITY message with a return error parameter set to \"ss-NotAvailable\".",
      "chunk_type": "requirement",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.292_5.6.8.2.7",
      "section_id": "5.6.8.2.7",
      "section_title": "Remote party disconnects from the conference",
      "content": "When the MSC Server receives a SIP NOTIFY request from a conference focus indicating that a specific remote party has disconnected from the conference, the MSC Server shall send a CC DISCONNECT message to the UE, with a transaction identifier corresponding to the specific remote party.",
      "chunk_type": "requirement",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.292_5.6.8.3.1.1",
      "section_id": "5.6.8.3.1.1",
      "section_title": "General",
      "content": "The methods by which the MSC Server, on behalf of the UE, can be invited to a conference are described in 3GPP TS 24.605 [35] clause 4.5.2.1.2 and 3GPP TS 24.147 [36] clause 5.3.1.5.",
      "chunk_type": "definition",
      "cross_references": [
        "ts_24.605_clause_4.5.2.1.2",
        "ts_24.147_clause_5.3.1.5",
        "ts_24.605",
        "ts_24.147"
      ]
    },
    {
      "chunk_id": "ts_29.292_5.6.8.3.1.2",
      "section_id": "5.6.8.3.1.2",
      "section_title": "Receipt of REFER within a dialog",
      "content": "Upon receipt of a REFER request within a dialog, the MSC Server shall act as a transferee on behalf of the UE as specified in clause 5.6.7.3.1.\nNOTE 1:\tIf the Refer-To header of the REFER request contains a conference URI, this will result in the user joining a conference.\nNOTE 2:\tCS domain access signalling as specified in 3GPP TS 24.091 [32] does not provide a mechanism to present the transfer request to the transferee for authorization of the transfer. Automatic acceptance and execution of the REFER request by the MSC Server can therefore pose a security risk or have unwanted charging consequences. Acceptance of REFER requests is therefore subject to operator policy, which is outside the scope of the present document.",
      "chunk_type": "requirement",
      "cross_references": [
        "clause_5.6.7.3.1",
        "ts_24.091"
      ]
    },
    {
      "chunk_id": "ts_29.292_5.6.8.3.1.3",
      "section_id": "5.6.8.3.1.3",
      "section_title": "Receipt of REFER outside a dialog",
      "content": "If the MSC Server does not support accepting REFER requests on behalf of the UE per operator policy, then the MSC Server shall return a 403 Forbidden response.\nSupport for the MSC Server, on behalf of a UE, joining a conference in this manner requires that the MSC Server shall:\n-\tinitiate a terminating call leg toward the UE in accordance with 3GPP TS 24.008 [3]; and\nNOTE:\tIf the user is involved in a call, then the call waiting procedures described in 3GPP TS 24.008 [3] and 3GPP TS 24.083 [26] apply.\n-\tinitiate an originating call toward the URI identified in the Refer-To header (e.g. the conference URI); and\n-\tcombine these two call legs into a single call.\nSupport for this method of joining a conference may be provided as an implementation option but is outside the scope of the present document.",
      "chunk_type": "requirement",
      "cross_references": [
        "ts_24.008",
        "ts_24.083"
      ]
    },
    {
      "chunk_id": "ts_29.292_5.6.8.3.1.4",
      "section_id": "5.6.8.3.1.4",
      "section_title": "Receipt of INVITE",
      "content": "NOTE:\tClause 5.4.2 contains general applicable procedures executed upon receipt of an initial INVITE request.\nIf an INVITE request is received, the MSC Server shall act as follows:\n-\tif the user is idle, the MSC Server shall act according to the mobile terminating call set up procedures specified in clause 5.4;\n-\tif the user is engaged in an established SIP dialog and the INVITE request contains a Replaces header field corresponding to the established dialog, the MSC Server act as a transfer target on behalf of the UE as specified in clause 5.6.7.4; or\n-\tif the user is engaged in an established SIP dialog and the INVITE request does not contain a Replaces header field corresponding to the established dialog, the MSC Server shall follow the communication waiting procedures described in clause 5.6.4.1.",
      "chunk_type": "requirement",
      "cross_references": [
        "clause_5.4.2",
        "clause_5.4",
        "clause_5.6.7.4",
        "clause_5.6.4.1"
      ]
    },
    {
      "chunk_id": "ts_29.292_5.6.8.3.2",
      "section_id": "5.6.8.3.2",
      "section_title": "Notification of conference invocation",
      "content": "If the MSC Server received a non-zero SS screening indicator from the UE as defined in 3GPP TS 24.080 [29], then upon joining a conference on behalf of a UE, the MSC Server may send a FACILITY message to the UE indicating a multiparty call has been invoked as specified in 3GPP TS 24.084 [34].\nNOTE:\tIf the MSC Server was invited to the conference via reception of a REFER request as specified in 3GPP TS 24.147 [36] clause 5.3.1.5.2, the MSC Server is not able to distinguish between REFER requests for the conferencing service and REFER requests for the ECT service. In such cases, the MSC Server will not know which SS operation to indicate in the FACILITY message. Handling of this scenario is implementation specific.",
      "chunk_type": "general",
      "cross_references": [
        "ts_24.147_clause_5.3.1.5.2",
        "ts_24.080",
        "ts_24.084",
        "ts_24.147"
      ]
    },
    {
      "chunk_id": "ts_29.292_5.6.9.1",
      "section_id": "5.6.9.1",
      "section_title": "General",
      "content": "The following subclauses describe the MSC Server interworking behaviour related to the Customized Alerting Tones (CAT) services defined in 3GPP TS 24.182 [51].\nBased on operator options, one of three different models described in 3GPP TS 24.182 [51] is used in an IM CN subsystem to provide the CAT service. The CAT interworking procedures at the MSC server differ between these models and are described seperately for each model in the subsequent sub-clauses. Support of the interworking procedures for each of those models is optional.\nNo special interworking procedures for the CAT service when MSC server receive a terminating request from IMS network are required.",
      "chunk_type": "definition",
      "cross_references": [
        "ts_24.182"
      ]
    },
    {
      "chunk_id": "ts_29.292_5.6.9.2.1",
      "section_id": "5.6.9.2.1",
      "section_title": "Originating request",
      "content": "If the MSC server supports early-sesssion as a network option, upon receiving an incoming SETUP message, before the MSC server sending the generated SIP INVITE request as described in clause 5.3.3, it shall include the option tag \"early-session\", as defined in IETF RFC 3959 [50], in Supported header field.\nAfter receiving the first SIP 18x response including an early-session SDP, the MSC server shall send the ALERTING message as described in 3GPP TS 24.008 [3], then the MSC server shall follow the same procedure as described for MGCF in 3GPP TS 29.163 [46] clause 7.5.13 to negotiate with IMS side for early-session and normal session establishment.",
      "chunk_type": "general",
      "cross_references": [
        "clause_5.3.3",
        "ts_29.163_clause_7.5.13",
        "ts_24.008",
        "ts_29.163"
      ]
    },
    {
      "chunk_id": "ts_29.292_5.6.9.3",
      "section_id": "5.6.9.3",
      "section_title": "Forking model",
      "content": "Interworking at MSC server follows the basic call interworking procedures. Support of the P-Early-Media header field and related procedures as described in clause 5.3.4a and clause 5.3.4b are required in addition.",
      "chunk_type": "general",
      "cross_references": [
        "clause_5.3.4"
      ]
    },
    {
      "chunk_id": "ts_29.292_5.6.9.4",
      "section_id": "5.6.9.4",
      "section_title": "Gateway model",
      "content": "Interworking at MSC server follows the basic call interworking procedures. Support of the P-Early-Media header field and related procedures as described in clause 5.3.4a and clause 5.3.4b are required in addition.",
      "chunk_type": "general",
      "cross_references": [
        "clause_5.3.4"
      ]
    },
    {
      "chunk_id": "ts_29.292_5.6.10.1",
      "section_id": "5.6.10.1",
      "section_title": "General",
      "content": "The following subclauses describe the MSC Server interworking behaviour related to the Communication Completion services defined in 3GPP TS 24.642 [52] and a UE using CS access domain signalling specified in 3GPP TS 24.093 [53].",
      "chunk_type": "definition",
      "cross_references": [
        "ts_24.642",
        "ts_24.093"
      ]
    },
    {
      "chunk_id": "ts_29.292_5.6.10.2",
      "section_id": "5.6.10.2",
      "section_title": "Communication Completion Terminated at Served User",
      "content": "When the Served User is the terminating user, no special interworking is required at the MSC Server.",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.292_5.6.10.3.1",
      "section_id": "5.6.10.3.1",
      "section_title": "Actions without 3PCC",
      "content": "When the MSC Server receives a CC Recall as a REFER request as described in 3GPP TS 24.642 [52] clause 4.5.4.2.3.1, the MSC Server may assign a CCBS Index to this recall if not already done, and may perform the CC Recall procedures as specified by 3GPP TS 24.093 [53]. When the SETUP message is received, normal call handling continues.\nIf the MSC Server does not support accepting REFER requests on behalf of the UE per operator policy, then the MSC Server shall return a 403 Forbidden response.",
      "chunk_type": "general",
      "cross_references": [
        "ts_24.642_clause_4.5.4.2.3.1",
        "ts_24.642",
        "ts_24.093"
      ]
    },
    {
      "chunk_id": "ts_29.292_5.6.10.3.2",
      "section_id": "5.6.10.3.2",
      "section_title": "Actions with 3PCC",
      "content": "When 3PCC is used for CCBS/CCNL/CCNR as specified in 3GPP TS 24.642 [52], no special interworking is required at the MSC Server.",
      "chunk_type": "general",
      "cross_references": [
        "ts_24.642"
      ]
    },
    {
      "chunk_id": "ts_29.292_5.7.1",
      "section_id": "5.7.1",
      "section_title": "General",
      "content": "The MSC Server may support the interworking between call independent supplementary service signalling described in 3GPP TS 24.010 [41] and the XCAP application usage for manipulating supplementary services data described in 3GPP TS 24.623 [42]. This MSC Server may support this interworking for any subset of the supplementary services within the scope of the present document. This interworking shall only be performed for the TS11 service code. If the MSC Server interworks a supplementary service invoke operation received via NAS signalling to the IM CN subsystem, the MSC Server shall not also transfer the received information to the VLR as described in 3GPP TS 29.002 [20]. This interworking is defined in the following subclauses.\nNOTE:\tThis interworking is subject to the limitations inherited by the NAS signalling procedures defined for each supplementary service. For example, if no NAS signalling procedure is defined for registration, erasure, activation, deactivation or interrogation of a particular supplementary service that is being controlled by the IM CN subsystem, then no interworking procedure is defined.",
      "chunk_type": "definition",
      "cross_references": [
        "ts_24.010",
        "ts_24.623",
        "ts_29.002"
      ]
    },
    {
      "chunk_id": "ts_29.292_5.7.2",
      "section_id": "5.7.2",
      "section_title": "Receipt of REGISTER message",
      "content": "Upon receipt of a REGISTER message for a supplementary service whose interworking is within the scope of the present document, the MSC Server shall generate the appropriate HTTP request according to table 5.7.2.1 if supplementary service configuration interworking for that supplementary service is supported by the MSC Server.\nTable 5.7.2.1: Mapping REGISTER / FACILITY to HTTP request\nInvoke operation in the REGISTER message\nHTTP request\nRegisterSS\nPUT\nActivateSS\nPUT\nDeactivateSS\nPUT\nInterrogateSS\nGET\nEraseSS\nPUT\nNOTE:\tNot all invoke operations are valid for all supplementary services. Interworking definitions for each supplementary service are only provided for invoke operations explicitly defined for each supplementary service.\nThe interworking of message contents for each supplementary service is described in clause 5.7.4.",
      "chunk_type": "requirement",
      "cross_references": [
        "clause_5.7.4",
        "table_5.7.2.1"
      ]
    },
    {
      "chunk_id": "ts_29.292_5.7.3",
      "section_id": "5.7.3",
      "section_title": "Receipt of HTTP response",
      "content": "Upon receipt of an HTTP response to a previously sent HTTP request as described in clause 5.7.2, the MSC Server shall terminate the appropriate service interaction by sending a RELEASE COMPLETE message. The interworking of message contents for each supplementary service is described in clause 5.7.4.",
      "chunk_type": "requirement",
      "cross_references": [
        "clause_5.7.2",
        "clause_5.7.4"
      ]
    },
    {
      "chunk_id": "ts_29.292_5.7.4.1.1",
      "section_id": "5.7.4.1.1",
      "section_title": "Registration/erasure",
      "content": "The OIP/OIR services require no registration. Erasure is not applicable.",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.292_5.7.4.1.2",
      "section_id": "5.7.4.1.2",
      "section_title": "Activation/deactivation",
      "content": "The OIP/OIR services are activated at provisioning and deactivated at withdrawal and therefore require no interworking at the MSC Server.",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.292_5.7.4.1.3",
      "section_id": "5.7.4.1.3",
      "section_title": "Interrogation",
      "content": "If the MSC Sever supports supplementary service configuration interworking for the OIP/OIR services, the interworking procedures in this clause shall be applied.\nWhen the MSC Server receives a REGISTER message with an InterrogateSS invoke operation for the CLIP or CLIR supplementary service code as described in 3GPP TS 24.081 [12], the MSC Server shall generate and send an HTTP GET request to fetch the instance of the Originating Identity document as specified in 3GPP TS 24.623 [42].\nUpon receiving a response to the HTTP GET request, the MSC Server shall apply the following interworking:\n-\tIf a 200 OK response is received which includes an Originating Identity document as defined in 3GPP TS 24.607 [43], the MSC Server shall send a RELEASE COMPLETE message as follows:\n-\tIf the Originating Identity document indicates the interrogated service (CLIP/OIP or CLIR/OIR) is active, the MSC Server shall indicate an SS-Status of provisioned and active; or\n-\tIf the Originating Identity document indicates the interrogated service (CLIP/OIP or CLIR/OIR) service is not active, the MSC Server shall indicate an SS-Status of provisioned but not active;\n-\tIf the CLIR/OIR service was interrogated, then the following additional interworking shall be applied:\n-\tIf there is a \"default-behaviour\" attribute included and set to \"presentation-restricted\" in the Originating Identity document, the MSC Server shall set the CLI Restriction Option parameter to indicate Temporary (Default Restricted);\n-\tIf there is a \"default-behaviour\" attribute included and set to \"presentation-not-restricted\" in the Originating Identity document the MSC Server shall set the CLI Restriction Option parameter to Temporary (Default Allowed);\n-\tIf a non 200 OK response is received or if a 200 OK response is received which does not include an Originating Identity document, the MSC Server shall send a RELEASE COMPLETE message with an implementation-specific error code.",
      "chunk_type": "requirement",
      "cross_references": [
        "ts_24.081",
        "ts_24.623",
        "ts_24.607"
      ]
    },
    {
      "chunk_id": "ts_29.292_5.7.4.2.1",
      "section_id": "5.7.4.2.1",
      "section_title": "Registration/erasure",
      "content": "The TIP/TIR services require no registration. Erasure is not applicable.",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.292_5.7.4.2.2",
      "section_id": "5.7.4.2.2",
      "section_title": "Activation/deactivation",
      "content": "The TIP/TIR services are activated at provisioning and deactivated at withdrawal and therefore require no interworking at the MSC Server.",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.292_5.7.4.2.3",
      "section_id": "5.7.4.2.3",
      "section_title": "Interrogation",
      "content": "If the MSC Sever supports supplementary service configuration interworking for the TIP/TIR services, the interworking procedures in this clause shall be applied.\nWhen the MSC Server receives a REGISTER message with an InterrogateSS invoke operation for the COLP or COLR supplementary service code as described in 3GPP TS 24.081 [12], the MSC Server shall generate an HTTP GET request to fetch the instance of the Terminating Identity document as specified in 3GPP TS 24.623 [42].\nUpon receiving a response to the HTTP GET request, the MSC Server shall apply the following interworking:\n-\tIf a 200 OK response is received which includes a Terminating Identity document as defined in 3GPP TS 24.608 [14], the MSC Server shall send a RELEASE COMPLETE message as follows:\n-\tIf the Terminating Identity document indicates the interrogated service (COLP/TIP or COLR/TIR) is active, the MSC Server shall indicate an SS-Status of provisioned and active; or\n-\tIf the Terminating Identity document indicates the interrogated service (COLP/TIP or COLR/TIR) service is not active, the MSC Server shall indicate an SS-Status of provisioned but not active;\nNOTE:\tCS signalling defined in 3GPP TS 24.081 [12] does not allow for the temporary mode status of the COLR service to be sent to the UE.\n-\tIf a non 200 OK response is received or if a 200 OK response is received which does not include a Terminating Identity document, the MSC Server shall send a RELEASE COMPLETE message with an implementation-specific error code.",
      "chunk_type": "requirement",
      "cross_references": [
        "ts_24.081",
        "ts_24.623",
        "ts_24.608"
      ]
    },
    {
      "chunk_id": "ts_29.292_5.7.4.3",
      "section_id": "5.7.4.3",
      "section_title": "Communication Hold (HOLD)",
      "content": "Configuration of the HOLD service involves no signalling and therefore requires no interworking at the MSC Server.",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.292_5.7.4.4.1",
      "section_id": "5.7.4.4.1",
      "section_title": "Registration/erasure",
      "content": "The CW service requires no registration. Erasure is not applicable.",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.292_5.7.4.4.2",
      "section_id": "5.7.4.4.2",
      "section_title": "Activation/deactivation",
      "content": "If the MSC Sever supports supplementary service configuration interworking for the CW service, the interworking procedures in this clause shall be applied.\nWhen the MSC Server receives a REGISTER message with an ActivateSS or DeactivateSS invoke operation for the CW supplementary service code as described in 3GPP TS 24.083 [26], the MSC Server shall include an instance of the call waiting document described in 3GPP TS 24.615 [44] in the HTTP PUT request as follows:\n-\tIf the invoke operation is ActivateSS, the MSC Server shall set the \"active\" attribute to \"true\";\n-\tIf the invoke operation is DeactivateSS, the MSC Server shall set the \"active\" attribute to \"false\".",
      "chunk_type": "requirement",
      "cross_references": [
        "ts_24.083",
        "ts_24.615"
      ]
    },
    {
      "chunk_id": "ts_29.292_5.7.4.4.3",
      "section_id": "5.7.4.4.3",
      "section_title": "Interrogation",
      "content": "If the MSC Sever supports supplementary service configuration interworking for the CW service, the interworking procedures in this clause shall be applied.\nWhen the MSC Server receives a REGISTER message with an InterrogateSS invoke operation for the CW supplementary service code as described in 3GPP TS 24.083 [26], the MSC Server shall generate and send an HTTP GET request to fetch the instance of the call waiting document as specified in 3GPP TS 24.623 [42].\nWhen a response to the HTTP GET request is received, the MSC Server shall apply the following interworking:\n-\tIf a 200 OK is received which includes a call waiting document as defined in 3GPP TS 24.615 [44], the MSC Server shall send a RELEASE COMPLETE message as follows:\n-\tIf the call waiting document includes an \"active\" attribute set to \"true\", the MSC Server shall indicate an SS-Status of provisioned and active;\n-\tIf the call waiting document includes an \"active\" attribute set to \"false\", the MSC Server shall indicate an SS-Status of provisioned but not active;\n-\tIf a non 200 OK response is received or if a 200 OK response is received which does not include a call waiting document, the MSC Server shall send a RELEASE COMPLETE message with an implementation-specific error code.",
      "chunk_type": "requirement",
      "cross_references": [
        "ts_24.083",
        "ts_24.623",
        "ts_24.615"
      ]
    },
    {
      "chunk_id": "ts_29.292_5.7.4.5.1",
      "section_id": "5.7.4.5.1",
      "section_title": "Registration/erasure",
      "content": "If the user has the subscription option \"control of barring services\" set to \"by subscriber using a password\" a password is registered at provisioning time and the UE can change the registered password at any later time using the procedures in this subclause.\nWhen the MSC Server receives a REGISTER message with an invoke component of the operation \"register password\" as specified in 3GPP TS 24.010 [41], the MSC Server enhanced for ICS first sends a FACILITY message towards the UE with an invoke component of the operation \"get password\". After receiving a FACILITY message from the UE with a return result component including a password, the MSC Server enhanced for ICS shall use this password to perform a password check procedureby sending an HTTP POST request towards the XCAP server as specified in 3GPP TS 24.623 [42].\nUpon receiving an HTTP 200 (OK) response to the password check request as above, the MSC Server enhanced for ICS requests the new password from the UE as specified in 3GPP TS 24.010 [41] by sending a FACILITY message towards the UE with an invoke component of the operation \"get password\". When the UE returns the password the MSC Server enhanced for ICS requests the new password again. After receiving the password again, the MSC Server enhanced for ICS compares the two passwords, and if they are equal, registers the new password by performing the password change procedure as specified in 3GPP TS 24.623 [42].\nUpon receiving the HTTP 200 (OK) response to the password change request as above, the MSC Server enhanced for ICS sends a Release Complete with the return result component of the operation \"register password\" as specified in 3GPP TS 24.010 [41].\nError responses towards the UE are sent as specified in 3GPP TS 24.010 [41].\nErasure of the CB service is not specified for NAS signalling in 3GPP TS 24.088 [30], therefore interworking procedures for service erasure are not applicable.",
      "chunk_type": "general",
      "cross_references": [
        "ts_24.010",
        "ts_24.623",
        "ts_24.088"
      ]
    },
    {
      "chunk_id": "ts_29.292_5.7.4.5.2",
      "section_id": "5.7.4.5.2",
      "section_title": "Activation/deactivation",
      "content": "When the MSC Server receives a REGISTER message with an ActivateSS or DeactivateSS invoke operation for any call barring supplementary service code as described in 3GPP TS 24.088 [30], the MSC Server shall perform the password procedure as specified in 3GPP TS 24.088 [30]. and store the received password for later mapping to the password portion of the SIP URI in the XCAP user identity as specified in 3GPP TS 24.623 [42]. The MSC Server shall then perform an interrogation as specified in 3GPP TS 24.611 [31] of either the <incoming-communication-barring> element or the <outgoing-communication-barring> element depending on whether the received supplementary service code indicated an incoming or an outgoing barring service.\nTo perform the interrogation the MSC Server populates the HTTP GET request as specified in 3GPP TS 24.623 [42]. If the result of the interrogation is that the user is not provisioned with the service indicated in the received REGISTER message, the MSC Server sends an appropriate error response.\nIf the result of the interrogation is that the user is provisioned with the supplementary service indicated in the REGISTER request, and the activation status is different than the desired status, the MSC Server sends an HTTP PUT request as specified in 3GPP TS 24.623 [42] including the following rule:\n1)\tIf the invoke operation is ActivateSS, the MSC Server shall set the \"active\" attribute to \"true\":\na)\tIf the supplementary service code is BAOC the MSC Server shall include an <outgoing-communication-barring> element including barring rule where the condition element is empty or no condition element is included, and not include the <rule-deactivated> elemenent, as defined in 3GPP TS 24.611 [31].\nb)\tIf the supplementary service code is BOIC the MSC Server shall include an <outgoing-communication-barring> element including a barring rule for the international condition, and not include the <rule-deactivated> element, as defined in 3GPP TS 24.611 [31].\nc)\tIf the supplementary service code is BOIC-exHC excluding home the MSC Server shall include an <outgoing-communication-barring> element including a barring rule for the international-exHC condition, and not include the <rule-deactivated> element, as defined in 3GPP TS 24.611 [31].\nd)\tIf the supplementary service code is BAIC the MSC Server shall include an <incoming-communication-barring> element including a barring rule where the condition element is empty or no condition element is included, and not include the <rule-deactivated> element, as defined in 3GPP TS 24.611 [31].\ne)\tIf the supplementary service code is BIC-Roam the MSC Server shall include an <incoming-communication-barring> element including a barring rule for the roaming condition, and not include the <rule-deactivated> element, as defined in 3GPP TS 24.611 [31].\n2)\tIf the invoke operation is DeactivateSS:\na)\tIf the supplementary service code is BAOC the MSC Server shall include an <outgoing-communication-barring> element including barring rule where the condition element is empty or no condition element is included, as defined in 3GPP TS 24.611 [31]. In addition, the MSC server shall in the condition element add a <rule-deactivated> element.\nb)\tIf the supplementary service code is BOIC the MSC Server shall include an <outgoing-communication-barring> element including a barring rule for the international condition, as defined in 3GPP TS 24.611 [31]. In addition, the MSC server shall in the condition element add a <rule-deactivated> element.\nc)\tIf the supplementary service code is BOIC-exHC excluding home the MSC Server shall include an <outgoing-communication-barring> element including a barring rule for the international-exHC condition, as defined in 3GPP TS 24.611 [31]. In addition, the MSC server shall in the condition element add a <rule-deactivated> element.\nd)\tIf the supplementary service code is BAIC the MSC Server shall include an <incoming-communication-barring> element including a barring rule where the condition element is empty or no condition element is included, as defined in 3GPP TS 24.611 [31]. In addition, the MSC server shall in the condition element add a <rule-deactivated> element.\ne)\tIf the supplementary service code is BIC-Roam the MSC Server shall include an <incoming-communication-barring> element including a barring rule for the roaming condition, as defined in 3GPP TS 24.611 [31]. In addition, the MSC server shall in the condition element add a <rule-deactivated> element.",
      "chunk_type": "general",
      "cross_references": [
        "ts_24.088",
        "ts_24.623",
        "ts_24.611"
      ]
    },
    {
      "chunk_id": "ts_29.292_5.7.4.5.3",
      "section_id": "5.7.4.5.3",
      "section_title": "Interrogation",
      "content": "If the MSC Server supports supplementary service configuration interworking for the CB service, the interworking procedures in this clause shall be applied.\nWhen the MSC Server receives a REGISTER message with an InterrogateSS invoke operation for the BAOC, BAIC, BOIC, BOIC-exHC or BIC-Roam supplementary service code as described in 3GPP TS 24.088 [30], the MSC Server shall generate and send an HTTP GET request to fetch the instance of the Communication Barring document as specified in 3GPP TS 24.623 [42].\nWhen a response to the HTTP GET request is received, the MSC Server shall apply the following interworking:\n1)\tIf an HTTP 200 (OK) response is received which includes a Communication Barring document as defined in 3GPP TS 24.611 [31], the MSC Server shall send a RELEASE COMPLETE message as follows:\n-\tIf the Communication Barring document indicates the call barring service being interrogated is active, the MSC Server shall include a BasicServiceCode set to the TS11 service code;\n-\tIf the Communication Barring document indicates the call barring service being interrogated is not active, the MSC Server shall include an SS-Status of deactivated;\n2)\tIf an HTTP non 200 (OK) response is received or if an HTTP 200 OK response is received which does not include a Communication Barring document, the MSC Server shall send a RELEASE COMPLETE message with an implementation-specific error code.",
      "chunk_type": "requirement",
      "cross_references": [
        "ts_24.088",
        "ts_24.623",
        "ts_24.611"
      ]
    },
    {
      "chunk_id": "ts_29.292_5.7.4.6.1",
      "section_id": "5.7.4.6.1",
      "section_title": "Registration",
      "content": "If the MSC Server supports supplementary service configuration interworking for the CDIV service, the interworking procedures in this clause shall be applied.\nWhen the MSC Server receives a REGISTER message with a RegisterSS invoke operation for a supplementary service code listed below, the MSC Server shall include Communication Diversion document as described in 3GPP TS 24.604 [23] in the HTTP PUT request as follows:\n-\tThe MSC Server shall set the active attribute to \"true\";\n-\tIf the supplementary service code is CFU as described in 3GPP TS 24.082 [24], the MSC Server shall include a forwarding rule where the condition element is empty or no condition element is included, as defined in 3GPP TS 24.604 [23];;\n-\tIf the supplementary service code is CFB as described in 3GPP TS 24.082 [24], the MSC Server shall include a forwarding rule for the busy condition defined in 3GPP TS 24.604 [23];\n-\tIf the supplementary service code is CFNRy as described in 3GPP TS 24.082 [24], the MSC Server shall include a forwarding rule for the no-answer condition defined in 3GPP TS 24.604 [23];\n-\tIf the supplementary service code is CFNRc as described in 3GPP TS 24.082 [24], the MSC Server shall include a forwarding rule for the not-reachable condition defined in 3GPP TS 24.604 [23];\n-\tThe MSC Server shall include a \"target\" element set to the TEL URI representation of the ForwardedToNumber parameter received in the REGISTER message. The TEL URI shall be constructed as described in clause 5.3.3.2.\nNOTE:\tThe Communication Diversion document described in 3GPP TS 24.604 [23] defines XML elements which have no functional equivalent in the service configuration signalling defined in 3GPP TS 24.082 [24]. The inclusion of these elements and the values assigned to them is subject to operator policy.\nThe MSC Server shall store a copy of the Communication Diversion document until the HTTP PUT response is received and processed.\nWhen a response to the HTTP PUT request is received, the MSC Server shall apply the following interworking:\n-\tIf a 200 OK is received, the MSC Server shall send a RELEASE COMPLETE message as follows:\n-\tThe MSC Server shall indicate an SS-Status of provisioned and active;\n-\tThe MSC Server shall set the ForwardedToNumber parameter to the \"target\" element in the stored Communication Diversion document.\n-\tIf a non 200 OK response is received or if a 200 OK response is received which does not include a Communication Diversion document, the MSC Server shall send a RELEASE COMPLETE message with an implementation-specific error code.\n5.7.4.6.1a\tErasure\nIf the MSC Server supports supplementary service configuration interworking for the CDIV service, the interworking procedures in this clause shall be applied.\nWhen the MSC Server receives a REGISTER message with an EraseSS invoke operation for a supplementary service listed below, the MSC Server shall first fetch the instance of the Communication Diversion document as described in clause 5.7.4.6.3. If the MSC Server is unable to fetch the Communication Diversion document, the MSC Server shall send a RELEASE COMPLETE message with an implementation-specific error code.\nThe MSC Server shall then include the Communication Diversion document as described in 3GPP TS 24.604 [23] in an HTTP PUT request, modified as follows:\n-\tIf the supplementary service code is CFU, the MSC Server shall remove the forwarding rule with an empty condition element or no condition element included, if present;\n-\tIf the supplementary service code is CFB, the MSC Server shall remove the forwarding rule for the busy condition defined in 3GPP TS 24.604 [23], if present;\n-\tIf the supplementary service code is CFNRy, the MSC Server shall remove the forwarding rule for the no-answer condition defined in 3GPP TS 24.604 [23], if present;\n-\tIf the supplementary service code is CFNRc, the MSC Server shall remove the forwarding rule for the not-reachable condition defined in 3GPP TS 24.604 [23], if present;\n-\tIf the supplementary service code is \"all forwarding SS\", the MSC Server shall remove all forwarding rules described above.\nWhen a response to the HTTP PUT request is received, the MSC Server shall apply the following interworking:\n-\tIf a 200 OK is received, the MSC Server shall send a RELEASE COMPLETE message as follows:\n-\tIf an SS-Status parameter is required as specified in 3GPP TS 24.082 [24] clause 1.3.1, the MSC Server shall indicate an SS-Status of not active;\n-\tIf a non 200 OK response is received or if a 200 OK response is received which does not include a Communication Diversion document, the MSC Server shall send a RELEASE COMPLETE message with an implementation-specific error code.",
      "chunk_type": "requirement",
      "cross_references": [
        "clause_5.3.3.2",
        "clause_5.7.4.6.3",
        "ts_24.082_clause_1.3.1",
        "ts_24.604",
        "ts_24.082"
      ]
    },
    {
      "chunk_id": "ts_29.292_5.7.4.6.2",
      "section_id": "5.7.4.6.2",
      "section_title": "Activation/deactivation",
      "content": "If the MSC Sever supports supplementary service configuration interworking for the CDIV service, the interworking procedures in this clause shall be applied.\nWhen the MSC Server receives a REGISTER message with an ActivateSS or DeactivateSS invoke operation for the CFU, CFB, CFNRy or CFNRc supplementary service code as described in 3GPP TS 24.082 [24], the MSC Server shall include a Communication Diversion document as described in 3GPP TS 24.604 [23] in the HTTP PUT request as follows:\n-\tIf the invoke operation is ActivateSS, the MSC Server shall set the \"active\" attribute to \"true\";\n-\tIf the invoke operation is DeactivateSS, the MSC Server shall set the \"active\" attribute to \"false\";\n-\tIf the supplementary service code is CFU as described in 3GPP TS 24.082 [24], the MSC Server shall include a forwarding rule with an empty condition element or no condition element included;\n-\tIf the supplementary service code is CFB as described in 3GPP TS 24.082 [24], the MSC Server shall include a forwarding rule for the busy condition defined in 3GPP TS 24.604 [23];\n-\tIf the supplementary service code is CFNRy as described in 3GPP TS 24.082 [24], the MSC Server shall include a forwarding rule for the no-answer condition defined in 3GPP TS 24.604 [23];\n-\tIf the supplementary service code is CFNRc as described in 3GPP TS 24.082 [24], the MSC Server shall include a forwarding rule for the not-reachable condition defined in 3GPP TS 24.604 [23];\nNOTE:\tThe Communication Diversion document described in 3GPP TS 24.604 [23] defines XML elements which have no functional equivalent in the service configuration signalling defined in 3GPP TS 24.082 [24]. The inclusion of these elements and the values assigned to them is subject to operator policy.\nThe MSC Server shall store a copy of the Communication Diversion document until the HTTP PUT response is received and processed.\nWhen a response to the HTTP PUT request is received, the MSC Server shall apply the following interworking:\n-\tIf a 200 OK is received, the MSC Server shall send a RELEASE COMPLETE message as follows:\n-\tIf the \"active\" attribute in the stored Communication Diversion document is set to \"true\", the MSC Server shall indicate an SS-Status of provisioned and active;\n-\tIf the \"active\" attribute in the stored Communication Diversion document is set to \"false\", the MSC Server shall indicate an SS-Status of provisioned but not active;\n-\tIf a non 200 OK response is received or if a 200 OK response is received which does not include a Communication Diversion document, the MSC Server shall send a RELEASE COMPLETE message with an implementation-specific error code.",
      "chunk_type": "requirement",
      "cross_references": [
        "ts_24.082",
        "ts_24.604"
      ]
    },
    {
      "chunk_id": "ts_29.292_5.7.4.6.3",
      "section_id": "5.7.4.6.3",
      "section_title": "Interrogation",
      "content": "If the MSC Sever supports supplementary service configuration interworking for the CDIV service, the interworking procedures in this clause shall be applied.\nWhen the MSC Server receives a REGISTER message with an InterrogateSS invoke operation for the CFU, CFB, CFNRy or CFNRc supplementary service code as described in 3GPP TS 24.082 [24], the MSC Server shall generate and send an HTTP GET request to fetch the instance of the Communication Diversion document as specified in 3GPP TS 24.604 [23].\nWhen a response to the HTTP GET request is received, the MSC Server shall apply the following interworking:\n-\tIf a 200 OK is received which includes a Communication Diversion document as defined in 3GPP TS 24.604 [23], the MSC Server shall send a RELEASE COMPLETE message as follows:\n-\tIf the Communication Diversion document indicates the call forwarding service being interrogated is active, the MSC Server shall indicate an SS-Status of provisioned and active;\n-\tIf the Communication Diversion document indicates the call forwarding service being interrogated is not active, the MSC Server shall indicate an SS-Status of provisioned but not active;\n-\tIf the Communication Diversion document contains a \"target\" attribute containing a TEL URI, the MSC Server shall set the ForwardedToNumber parameter to the TEL URI.\n-\tIf a non 200 OK response is received or if a 200 OK response is received which does not include a Communication Diversion document, the MSC Server shall send a RELEASE COMPLETE message with an implementation-specific error code.",
      "chunk_type": "requirement",
      "cross_references": [
        "ts_24.082",
        "ts_24.604"
      ]
    },
    {
      "chunk_id": "ts_29.292_5.7.4.7",
      "section_id": "5.7.4.7",
      "section_title": "Explicit Communication Transfer (ECT)",
      "content": "Configuration of the ECT service involves no signalling and therefore requires no interworking at the MSC Server.",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.292_5.7.4.8",
      "section_id": "5.7.4.8",
      "section_title": "Conference (CONF)",
      "content": "Configuration of the CONF service involves no signalling and therefore requires no interworking at the MSC Server.",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.292_5.7.4.9.1",
      "section_id": "5.7.4.9.1",
      "section_title": "Activation/deactivation",
      "content": "Activation in the IMS network as specified in 3GPP TS 24.642 [52] is performed using announcement procedures and inband interaction and no special interworking is needed.\nIf the MSC Server supports interworking of deactivating all outstanding CCBS requests, the MSC Server shall upon receipt of a REGISTER message with a Deactivate all CCBS Requests Invoke operation revoke all outstanding CCBS requests using the methods in 3GPP TS 24.642 [52].\nIf the MSC receives a REGISTER message with a Deactivate specific CCBS Request the MSC Server shall if no interworking is supported respond with a RELEASE COMPLETE message with an implementation specific error code.",
      "chunk_type": "general",
      "cross_references": [
        "ts_24.642"
      ]
    },
    {
      "chunk_id": "ts_29.292_5.7.4.9.2",
      "section_id": "5.7.4.9.2",
      "section_title": "Interrogation",
      "content": "If the MSC Sever supports supplementary service configuration interworking for the CCBS service, the interworking procedures in this clause shall be applied.\nWhen the MSC Server receives a REGISTER message with an InterrogateSS invoke operation for the CCBS supplementary service code as described in 3GPP TS 24.093 [53], the MSC Server shall generate and send an HTTP GET request to fetch the instance of the Communication Completion document as specified in 3GPP TS 24.642 [52].\nWhen an HTTP 200 OK response is received which includes a Communication Completion document as defined in 3GPP TS 24.642 [52], the MSC Server shall:\n1)\tif the Communication Completion document indicates the call forwarding service being interrogated is active generate an HTTP GET request to fetch an instance of the Communication Completion Request Records document as defined in 3GPP TS 24.642 [52]; when a response to the HTTP GET request is received the MSC server shall:\na)\tif an HTTP 200 OK is received which includes a Communication Completion Request Records document as defined in 3GPP TS 24.642 [52] where there is one or more instances of the \"cc-entry\" element, assign to each of these elements a CCBS Index and send a RELEASE COMPLETE message indicating an SS-Status of provisioned and include the list of outstanding CCBS requests; and\nb)\tif an HTTP non 200 OK response is received or if there are no instances of the \"cc-entry\" element, send a RELEASE COMPLETE message indicating an SS-status set to \"provisioned\", but there are no outstanding requests; and\n2)\tif the Communication Completion document indicates the communication completion service being interrogated is not active, send a RELEASE COMPLETE message indicating an SS-Status of not provisioned.\nWhen an HTTP non 200 OK response is received or if an HTTP 200 OK response is received which does not include a Communication Completion document, the MSC Server shall send a RELEASE COMPLETE message with an implementation-specific error code.",
      "chunk_type": "requirement",
      "cross_references": [
        "ts_24.093",
        "ts_24.642"
      ]
    },
    {
      "chunk_id": "ts_29.292_5.8.1",
      "section_id": "5.8.1",
      "section_title": "Intra-MSC Handover/Relocation",
      "content": "The MSC Server applies the procedures specified in 3GPP TS 23.009 [37] for Intra-MSC handover/relocation in the CS domain. After the handover/relocation is completed, the MSC Server shall process the interworking between the NAS signalling with the SIP signalling as specified in sub-clauses 5.3 through 5.6.",
      "chunk_type": "requirement",
      "cross_references": [
        "ts_23.009"
      ]
    },
    {
      "chunk_id": "ts_29.292_5.8.2",
      "section_id": "5.8.2",
      "section_title": "Inter-MSC Handover/Relocation",
      "content": "The MSC Server applies the procedures specified in 3GPP TS 23.009 [37] for Inter-MSC handover/relocation in the CS domain. After the handover/relocation is completed, the anchor MSC Server shall process the interworking between the NAS signalling with the SIP signalling as specified in sub-clauses 5.3 through 5.6. The NAS signalling contained in the MAP messages is passed between the anchored MSC Server and the target MSC Server through the E interface as specified in 3GPP TS 29.002 [20].",
      "chunk_type": "requirement",
      "cross_references": [
        "ts_23.009",
        "ts_29.002"
      ]
    },
    {
      "chunk_id": "ts_29.292_6.1",
      "section_id": "6.1",
      "section_title": "General",
      "content": "The following subclauses define the interworking performed by the CS-MGW between the IM CN subsystem and CS domain access. The interworking between the Mb reference point and the user plane portions of the IuCS and A reference points is specified.",
      "chunk_type": "definition",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.292_6.2.1",
      "section_id": "6.2.1",
      "section_title": "Interworking with transcoding",
      "content": "Figure 6.2.1.1 shows the user plane protocol stacks for the IuCS and IM CN subsystem interworking when transcoding is required.\nFigure 6.2.1.1: IuCS to Mb protocol stack (transcoding)\nIuFP is defined is defined in 3GPP TS 25.415 [16]. IuCS layer 2 and layer 3 are defined in 3GPP TS 25.414 [15]. The IuCS layer 1 is defined in 3GPP TS 25.411 [17].",
      "chunk_type": "general",
      "cross_references": [
        "figure_6.2.1.1",
        "ts_25.415",
        "ts_25.414",
        "ts_25.411"
      ]
    },
    {
      "chunk_id": "ts_29.292_6.2.2",
      "section_id": "6.2.2",
      "section_title": "Transcoder-less interworking",
      "content": "Figure 6.2.2.1 shows the user plane protocol stacks for the interworking when the same codec configuration is used on the IuCS and Mb reference points and transcoding is not required.\nFigure 6.2.2.1: IuCS to Mb protocol stack (no transcoding)\nIf no transcoder is inserted, the CS-MGW shall interwork procedures between the IuCS and Mb reference points as specified in 3GPP TS 29.414 [18] clause 7.4.",
      "chunk_type": "general",
      "cross_references": [
        "ts_29.414_clause_7.4",
        "figure_6.2.2.1",
        "ts_29.414"
      ]
    },
    {
      "chunk_id": "ts_29.292_6.3.1",
      "section_id": "6.3.1",
      "section_title": "Interworking with transcoding",
      "content": "Figure 6.3.1.1 shows the user plane protocol stacks for the TDM-based A and Mb reference point interworking when transcoding is required.\nFigure 6.3.1.1: TDM-based A to Mb protocol stack (transcoding)\nLayer 1 for the TDM-based A-interface is defined in 3GPP TS 48.004 [19].",
      "chunk_type": "general",
      "cross_references": [
        "figure_6.3.1.1",
        "ts_48.004"
      ]
    },
    {
      "chunk_id": "ts_29.292_6.3.2",
      "section_id": "6.3.2",
      "section_title": "Transcoder-less interworking",
      "content": "Figure 6.3.2.1 shows the user plane protocol stacks for the interworking when the same codec is used on the TDM-based A and Mb reference points and transcoding is not required.\nFigure 6.3.2.1: TDM-based A to Mb protocol stack (no transcoding)",
      "chunk_type": "general",
      "cross_references": [
        "figure_6.3.2.1"
      ]
    },
    {
      "chunk_id": "ts_29.292_6.4.1",
      "section_id": "6.4.1",
      "section_title": "Interworking with transcoding",
      "content": "Figure 6.4.1.1 shows the user plane protocol stacks for the IP-based A and Mb reference point interworking when transcoding is required.\nFigure 6.4.1.1: IP-based A to Mb protocol stack (transcoding)\nThe IP-based A-interface user plane transport is defined in 3GPP TS 48.103 [38].",
      "chunk_type": "general",
      "cross_references": [
        "figure_6.4.1.1",
        "ts_48.103"
      ]
    },
    {
      "chunk_id": "ts_29.292_6.4.2",
      "section_id": "6.4.2",
      "section_title": "Transcoder-less interworking",
      "content": "Figure 6.4.2.1 shows the user plane protocol stacks for the interworking when the same codec is used on the IP-based A and Mb reference points and transcoding is not required.\nFigure 6.4.2.1: IP-based A to Mb protocol stack (no transcoding)\nThe IP-based A-interface user plane transport is defined in 3GPP TS 48.103 [38].",
      "chunk_type": "general",
      "cross_references": [
        "figure_6.4.2.1",
        "ts_48.103"
      ]
    },
    {
      "chunk_id": "ts_29.292_7.1.1",
      "section_id": "7.1.1",
      "section_title": "CS-MGW selection",
      "content": "The MSC Server shall select a CS-MGW for the bearer connection before it performs the access bearer assignment or the network side connection point reservation.",
      "chunk_type": "requirement",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.292_7.1.2.1",
      "section_id": "7.1.2.1",
      "section_title": "General",
      "content": "The MSC Server shall either select bearer characteristics or request the CS-MGW to select and provide the bearer characteristics for the network side session before sending the INVITE request. The MSC Server shall use the Reserve RTP Connection Point procedure as defined in 3GPP TS 23.205 [39] and in 3GPP TS 29.232 [11], with additional information elements as specified in the present subclause.\nWithin this procedure, the MSC Server shall indicate the received speech codecs from the UE and the MSC Server may indicate some configured speech codec(s) to the CS-MGW and request a local IP address and UDP port from the CS-MGW and the MSC Server may also indicate that the IP interface type is for MboIP as defined in 3GPP TS 23.205 [39] and in 3GPP TS 29.232 [11], with additional information elements as specified in the present subclause. The local IP address and UDP port are used by the CS-MGW to receive user plane data.\nThe CS-MGW shall reply to the MSC Server with the selected local speech codec(s) and the selected local IP address and UDP port(s).\nAfter the succeeding node has provided the SDP answer, the MSC Server uses the Configure RTP Resources procedure as defined in 3GPP TS 29.232 [11] to request the CS-MGW to configure the bearer.",
      "chunk_type": "definition",
      "cross_references": [
        "ts_23.205",
        "ts_29.232"
      ]
    },
    {
      "chunk_id": "ts_29.292_7.1.2.2",
      "section_id": "7.1.2.2",
      "section_title": "Additions to Reserve RTP Connection Point Procedure",
      "content": "This procedure is used to reserve an RTP bearer termination. The Reserve RTP Connection Point procedure defined in in 3GPP TS 23.205 [39] shall be applied with additional information elements as defined in table 7.1.2.2.1.\nTable 7.1.2.2.1: Additions to Reserve RTP Connection Point Procedure\nProcedure\nInitiated\nInformation element name\nInformation element required\nInformation element description\nReserve RTP Connection Point\n(G)MSC-Server\nPriority information\nO\nThis information element requests the CS-MGW to apply priority treatment for the terminations and bearer connections in the specified context.\nECN Enable\nO\nThis information element requests the CS-MGW to apply ECN procedures.\nECN Initiation Method\nC\nThis information element specifies the ECN Initiation method and requests the CS-MGW to perform IP header settings as an ECN endpoint. It may be included only if ECN is enabled.\nNotify ECN Failure Event\nC\nThis information element requests a notification if an ECN failure occurs. It may only be supplied if ECN is enabled.\nICE password request\nO\nThis information element is present if MSC Server requests an ICE password.\nICE Ufrag request\nO\nThis information element is present if MSC Server requests an ICE ufrag.\nICE host candidate request\nO\nThis information element is present if MSC Server requests an ICE host candidate.\nICE pacing request\nO\nThis information element is present if MSC Server requests a pacing value for connectivity checks (Ta timer value). It is only applicable for full ICE.\nSTUN server request\nO\nThis information element is present if MSC Server requests the CS-MGW to answer STUN connectivity checks for ICE.\nSDPCapNeg configuration\nO\nThis information element provides SDPCapNeg configuration(s) using as \"a=acap\", \"a=tcap\", \"a=pcfg\" and \"a=acfg\" SDP attributes.\nReserve RTP Connection Point\nAck\nMGW\nICE password\nC\nThis information element shall be present only if it was contained in the request. It indicates the ICE password assigned by the CS-MGW.\nICE Ufrag\nC\nThis information element shall be present only if it was contained in the request. It indicates the ICE Ufrag assigned by the CS-MGW.\nICE host candidate\nC\nThis information element shall be present only if it was contained in the request. It indicates the ICE host candidate assigned by the CS-MGW.\nICE pacing\nC\nThis information element shall be present only if it was contained in the request. It indicates a desired pacing value for connectivity checks (Ta timer value).\nICE lite indication\nC\nThis information element shall be present only if an ICE host candidate request was contained in the request, and the CS-MGW supports ICE lite, but not full ICE. It indicates that the CS-MGW only supports ICE lite.\nSDPCapNeg configuration\nC\nThis information element shall be present only if it was contained in the request. It provides SDPCapNeg configuration(s) using as \"a=acap\", \"a=tcap\", \"a=pcfg\" and \"a=acfg\" SDP attributes.",
      "chunk_type": "procedure",
      "cross_references": [
        "table_7.1.2.2.1",
        "ts_23.205"
      ]
    },
    {
      "chunk_id": "ts_29.292_7.1.2.3",
      "section_id": "7.1.2.3",
      "section_title": "Additions to Configure RTP Connection Point Procedure",
      "content": "This procedure is used to configure or reconfigure an RTP bearer termination. The Configure RTP Connection Point procedure defined in 3GPP TS 23.205 [39] shall be applied with additional information elements as defined in table 7.1.2.3.1.\nTable 7.1.2.3.1: Additions to Configure RTP Connection Point Procedure\nProcedure\nInitiated\nInformation element name\nInformation element required\nInformation element description\nConfigure RTP Connection Point\n(G)MSC-Server\nAllowed RTCP APP message types\nO\nThis information element is present if MSC server allows the MGW to send RTCP APP packets of the indicated types defined in TS 26.114 [28]. The MGW shall not send other RTCP APP packets. If the parameter is not supplied, the MGW shall not send any RTCP APP packets.\nECN Enable\nO\nThis information element requests the CS-MGW to apply ECN procedures.\nECN Initiation Method\nC\nThis information element specifies the ECN Initiation method and requests the CS-MGW to perform IP header settings as an ECN endpoint. It may be included only if ECN is enabled.\nNotify ECN Failure Event\nC\nThis information element requests a notification if an ECN failure occurs. It may only be supplied if ECN is enabled.\nICE Connectivity Check\nC\nThis information element requests the CS-MGW to perform ICE connectivity check as defined by IETF RFC 8445 [69]. It is only applicable for full ICE.\nNotify ICE Connectivity Check Result\nC\nThis information element requests a notification of ICE connectivity check result. It is only applicable for full ICE.\nNotify New Peer Reflexive Candidate\nC\nThis information element requests a notification of new peer reflexive candidate was discovered during a connectivity check. It is only applicable for full ICE.\nAdditional ICE Connectivity Check\nC\nThis information element requests the CS-MGW to perform additional ICE connectivity check as defined by IETF RFC 8445 [69]. It is only applicable for full ICE.\nICE received candidate\nO\nThis information element is present if MSC Server indicates a received candidate for ICE.\nICE received password\nO\nThis information element is present if MSC Server indicates a received password for ICE.\nICE received pacing\nO\nThis information element is present if MSC Server indicates a received pacing value for connectivity checks (Ta timer value). It is only applicable for full ICE.\nSDPCapNeg configuration\nO\nThis information element provides SDPCapNeg configuration(s) using as \"a=acap\", \"a=tcap\", \"a=pcfg\" and \"a=acfg\" SDP attributes.\nConfigure RTP Connection Point\nAck\nMGW",
      "chunk_type": "procedure",
      "cross_references": [
        "table_7.1.2.3.1",
        "ts_23.205",
        "ts_26.114"
      ]
    },
    {
      "chunk_id": "ts_29.292_7.1.3.1",
      "section_id": "7.1.3.1",
      "section_title": "General",
      "content": "The way the MSC Server media gateway interaction is carried out depends on the characteristics of the access bearer network.",
      "chunk_type": "definition",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.292_7.1.3.2",
      "section_id": "7.1.3.2",
      "section_title": "Iu interface on IP",
      "content": "The MSC Server and the CS-MGW shall act in accordance with clause 6.1.3 in 3GPP TS 23.205 [39] and apply the coding in accordance with 3GPP TS 29.232 [11].",
      "chunk_type": "requirement",
      "cross_references": [
        "ts_23.205_clause_6.1.3",
        "ts_23.205",
        "ts_29.232"
      ]
    },
    {
      "chunk_id": "ts_29.292_7.1.3.3",
      "section_id": "7.1.3.3",
      "section_title": "A interface over IP",
      "content": "The MSC Server and the CS-MGW shall act in accordance with clause 6.1.5 in 3GPP TS 23.205 [39] and apply the coding in accordance with 3GPP TS 29.232 [11].",
      "chunk_type": "requirement",
      "cross_references": [
        "ts_23.205_clause_6.1.5",
        "ts_23.205",
        "ts_29.232"
      ]
    },
    {
      "chunk_id": "ts_29.292_7.1.3.4",
      "section_id": "7.1.3.4",
      "section_title": "A interface over TDM",
      "content": "The MSC Server and the CS-MGW shall act in accordance with clause 6.1.1.4 in 3GPP TS 23.205 [39] and apply the coding in accordance with 3GPP TS 29.232 [11].",
      "chunk_type": "requirement",
      "cross_references": [
        "ts_23.205_clause_6.1.1.4",
        "ts_23.205",
        "ts_29.232"
      ]
    },
    {
      "chunk_id": "ts_29.292_7.1.3.5",
      "section_id": "7.1.3.5",
      "section_title": "Iu over UTRAN and GERAN",
      "content": "The MSC Server and the CS-MGW shall act in accordance with clause 6.1.1.4 in 3GPP TS 23.205 [39] and apply the coding in accordance with 3GPP TS 29.232 [11].",
      "chunk_type": "requirement",
      "cross_references": [
        "ts_23.205_clause_6.1.1.4",
        "ts_23.205",
        "ts_29.232"
      ]
    },
    {
      "chunk_id": "ts_29.292_7.1.4",
      "section_id": "7.1.4",
      "section_title": "Apply ringing tone",
      "content": "If the condition as defined in clause 5.3.5 is fulfilled the MSC Server shall instruct the CS-MGW to send ringing tone towards the calling party. In this case the MSC Server shall use the Send Tone procedure in accordance with 3GPP TS 23.205 [39] and 3GPP TS 29.232 [11].\nIf the MSC Server wishes to stop sending the ringing tone e.g. due to the receipt of a 200 OK response to the INVITE request the MSC Server shall apply the Stop Tone procedure as defined in 3GPP TS 23.205 [39] and 3GPP TS 29.232 [11].",
      "chunk_type": "requirement",
      "cross_references": [
        "clause_5.3.5",
        "ts_23.205",
        "ts_29.232"
      ]
    },
    {
      "chunk_id": "ts_29.292_7.1.5",
      "section_id": "7.1.5",
      "section_title": "Through connection",
      "content": "If the MSC Server wants to configure the CS-MGW so that the bearer will be through-connected in the backward direction the MSC Server shall:\n-\tuse Change Through-Connection procedure as defined in 3GPP TS 29.232 [11] during any one of the Prepare Bearer and Reserve Circuit procedures as defined in 3GPP TS 29.232 [11]; or\n-\tuse Configure the RTP Connection Point procedure as defined in 3GPP TS 29.232 [11] during Prepare IP bearer procedure as defined in 3GPP TS 29.232 [11].\nIf the MSC Server wants to configure the CS-MGW so that the bearer will be both-way through connected the MSC Server shall use Change Through-Connection procedure as defined in 3GPP TS 29.232 [11].\n7.1.5a\tHandling of Forking\nThe procedures described in subclauses 7.1.1 to 7.1.6 shall be applied with the addition that the MSC Server and the CS-MGW shall act in accordance with subclauses 9.2.3.4.1 to 9.2.3.4.4 in 3GPP TS 29.163 [46].\nNOTE:\tFor the references to 3GPP TS 29.163 [46], the O-MGCF and I-MGCF in 3GPP TS 29.163 [46] is to be understood as MSC Server, the IM-MGW is to be understood as CS-MGW, and the Configure IMS Resources procedure is to be understood as Configure RTP Resources procedure.",
      "chunk_type": "requirement",
      "cross_references": [
        "ts_29.232",
        "ts_29.163"
      ]
    },
    {
      "chunk_id": "ts_29.292_7.1.6",
      "section_id": "7.1.6",
      "section_title": "Failure handling in MSC server",
      "content": "If any procedure between the MSC Server and the CS-MGW has not completed successfully or the MSC Server receives a Bearer Released procedure from the CS-MGW the procedure in accordance with clause 6.1.1.12 of 3GPP TS 23.231 [40] and 3GPP TS 29.232 [11] shall be applied.",
      "chunk_type": "general",
      "cross_references": [
        "ts_23.231_clause_6.1.1.12",
        "ts_23.231",
        "ts_29.232"
      ]
    },
    {
      "chunk_id": "ts_29.292_7.2.1",
      "section_id": "7.2.1",
      "section_title": "CS-MGW selection",
      "content": "The MSC Server shall select an CS-MGW for the bearer connection before it performs the network side bearer establishment or the access bearer assignment. The selection of the CS-MGW does not take place before the call proceeding has been received by the MSC Server.",
      "chunk_type": "requirement",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.292_7.2.2.1",
      "section_id": "7.2.2.1",
      "section_title": "General",
      "content": "The MSC Server shall request the CS-MGW to prepare for the network side session establishment using the Reserve and Configure RTP Connection Point procedure as specified in 3GPP TS 23.205 [39] and 3GPP TS 29.232 [11], with additional information elements as specified in the present subclause. Within this procedure, the MSC Server shall indicate the received speech codecs from the remote UE and request a local IP address and UDP port from the CS-MGW and the MSC Server may also indicate that the IP interface type is for MboIP as defined in 3GPP TS 29.232 [11]. The local IP address and UDP ports are used by the CS-MGW to receive user plane data. The MSC Server shall include the local IP address and UDP port number in the SDP answer for the selected codec.",
      "chunk_type": "definition",
      "cross_references": [
        "ts_23.205",
        "ts_29.232"
      ]
    },
    {
      "chunk_id": "ts_29.292_7.2.2.2",
      "section_id": "7.2.2.2",
      "section_title": "Additions to Reserve and Configure RTP Connection Point",
      "content": "This procedure is used to reserve and configure an RTP bearer termination. The Reserve and Configure RTP Connection Point procedure defined in 3GPP TS 23.205 [39] shall be applied with additional information elements as defined in table 7.2.2.2.1.\nTable 7.2.2.2.1: Additions to Reserve and Configure RTP Connection Point Procedure\nProcedure\nInitiated\nInformation element name\nInformation element required\nInformation element description\nReserve and Configure RTP Connection Point\n(G)MSC-Server\nAllowed RTCP APP message types\nO\nThis information element is present if MSC server allows the MGW to send RTCP APP packets of the indicated types defined in TS 26.114 [28]. The MGW shall not send other RTCP APP packets. If the parameter is not supplied, the MGW shall not send any RTCP APP packets.\nPriority information\nO\nThis information element requests the CS-MGW to apply priority treatment for the terminations and bearer connections in the specified context.\nECN Enable\nO\nThis information element requests the CS-MGW to apply ECN procedures and IP header settings as an ECN endpoint.\nECN Initiation Method\nC\nThis information element specifies the ECN Initiation method and requests the CS-MGW to perform IP header settings as an ECN endpoint. It may be included only if ECN is enabled.\nNotify ECN Failure Event\nC\nThis information element requests a notification if an ECN failure occurs. It may only be supplied if ECN is enabled.\nSTUN server request\nO\nThis information element is present if MSC Server requests the CS-MGW to answer STUN connectivity checks for ICE.\nICE Connectivity Check\nC\nThis information element requests the CS-MGW to perform ICE connectivity check as defined by IETF RFC 8445 [69]. It is only applicable for full ICE.\nNotify ICE Connectivity Check Result\nC\nThis information element requests a notification of ICE connectivity check result. It is only applicable for full ICE.\nNotify New Peer Reflexive Candidate\nC\nThis information element requests a notification of new peer reflexive candidate was discovered during a connectivity check. It is only applicable for full ICE.\nICE password request\nO\nThis information element is present if MSC Server requests an ICE password.\nICE Ufrag request\nO\nThis information element is present if MSC Server requests an ICE ufrag.\nICE host candidate request\nO\nThis information element is present if MSC Server requests an ICE host candidate.\nICE pacing request\nO\nThis information element is present if MSC Server requests a pacing value for connectivity checks (Ta timer value). It is only applicable for full ICE.\nICE received candidate\nO\nThis information element is present if MSC Server indicates a received candidate for ICE.\nICE received password\nO\nThis information element is present if MSC Server indicates a received password for ICE.\nICE received Ufrag\nO\nThis information element is present if MSC Server indicates a received Ufrag for ICE.\nICE received pacing\nO\nThis information element is present if MSC Server indicates a received pacing value for connectivity checks (Ta timer value). It is only applicable for full ICE.\nSDPCapNeg configuration\nO\nThis information element provides SDPCapNeg configuration(s) using as \"a=acap\", \"a=tcap\", \"a=pcfg\" and \"a=acfg\" SDP attributes.\nReserve and Configure RTP Connection Point\nAck\nMGW\nICE password\nC\nThis information element shall be present only if it was contained in the request. It indicates the ICE password assigned by the CS-MGW.\nICE Ufrag\nC\nThis information element shall be present only if it was contained in the request. It indicates the ICE Ufrag assigned by the CS-MGW.\nICE host candidate\nC\nThis information element shall be present only if it was contained in the request. It indicates the ICE host candidate assigned by the CS-MGW.\nICE pacing\nC\nThis information element shall be present only if it was contained in the request. It indicates a desired pacing value for connectivity checks (Ta timer value).\nICE lite indication\nC\nThis information element shall be present only if an ICE host candidate request was contained in the request, and the CS-MGW supports ICE lite, but not full ICE. It indicates that the CS-MGW only supports ICE lite.\nSDPCapNeg configuration\nC\nThis information element shall be present only if it was contained in the request. It provides SDPCapNeg configuration(s) using as \"a=acap\", \"a=tcap\", \"a=pcfg\" and \"a=acfg\" SDP attributes.",
      "chunk_type": "requirement",
      "cross_references": [
        "table_7.2.2.2.1",
        "ts_23.205",
        "ts_26.114"
      ]
    },
    {
      "chunk_id": "ts_29.292_7.2.3.1",
      "section_id": "7.2.3.1",
      "section_title": "General",
      "content": "The way the MSC Server-CS-MGW interaction is carried out depends on the characteristics of the access bearer network.",
      "chunk_type": "definition",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.292_7.2.3.2",
      "section_id": "7.2.3.2",
      "section_title": "Iu interface on IP",
      "content": "The MSC Server and the CS-MGW shall act in accordance with clause 6.2.3 in 3GPP TS 23.205 [39] and apply the coding in accordance with 3GPP TS 29.232 [11].",
      "chunk_type": "requirement",
      "cross_references": [
        "ts_23.205_clause_6.2.3",
        "ts_23.205",
        "ts_29.232"
      ]
    },
    {
      "chunk_id": "ts_29.292_7.2.3.3",
      "section_id": "7.2.3.3",
      "section_title": "A interface over IP",
      "content": "The MSC Server and the CS-MGW shall act in accordance with clause 6.2.4 in 3GPP TS 23.205 [39] and apply the coding in accordance with 3GPP TS 29.232 [11].",
      "chunk_type": "requirement",
      "cross_references": [
        "ts_23.205_clause_6.2.4",
        "ts_23.205",
        "ts_29.232"
      ]
    },
    {
      "chunk_id": "ts_29.292_7.2.3.4",
      "section_id": "7.2.3.4",
      "section_title": "A interface over TDM",
      "content": "The MSC Server and the CS-MGW shall act in accordance with clause 6.2.2.2.4 in 3GPP TS 23.205 [39] and apply the coding in accordance with 3GPP TS 29.232 [11].",
      "chunk_type": "requirement",
      "cross_references": [
        "ts_23.205_clause_6.2.2.2.4",
        "ts_23.205",
        "ts_29.232"
      ]
    },
    {
      "chunk_id": "ts_29.292_7.2.3.5",
      "section_id": "7.2.3.5",
      "section_title": "Iu over UTRAN and GERAN",
      "content": "The MSC Server and the CS-MGW shall act in accordance with clause 6.2.2.2.4 in 3GPP TS 23.205 [39] and apply the coding in accordance with 3GPP TS 29.232 [11].",
      "chunk_type": "requirement",
      "cross_references": [
        "ts_23.205_clause_6.2.2.2.4",
        "ts_23.205",
        "ts_29.232"
      ]
    },
    {
      "chunk_id": "ts_29.292_7.2.4",
      "section_id": "7.2.4",
      "section_title": "Apply ringing tone",
      "content": "If the condition as defined in clause 5.4.7 is fulfilled the MSC Server shall instruct the CS-MGW to send ringing tone towards the calling party. In this case the MSC Server shall use the Send Tone procedure in accordance with 3GPP TS 23.205 [39] and 3GPP TS 29.232 [11].\nIf the MSC Server wishes to stop sending the ringing tone, e.g. due to receipt of the CONNECT message, the MSC Server shall apply the Stop Tone procedure as defined in 3GPP TS 23.205 [39] and 3GPP TS 29.232 [11].",
      "chunk_type": "requirement",
      "cross_references": [
        "clause_5.4.7",
        "ts_23.205",
        "ts_29.232"
      ]
    },
    {
      "chunk_id": "ts_29.292_7.2.5",
      "section_id": "7.2.5",
      "section_title": "Through connection",
      "content": "If the MSC Server wants to configure the CS-MGW so that the bearer will not be through-connected the MSC Server shall:\n-\tuse Change Through-Connection procedure as defined in 3GPP TS 29.232 [11] during any one of the Prepare Bearer and Reserve Circuit procedures as defined in 3GPP TS 29.232 [11]; or\n-\tuse Configure the RTP Connection Point procedure as defined in 3GPP TS 29.232 [11]during Prepare IP bearer procedure as defined in 3GPP TS 29.232 [11].\nIf the MSC Server wants to configure the CS-MGW so that the bearer will be both-way through connected the MSC Server shall use the Change Through-Connection procedure as defined in 3GPP TS 29.232 [11].",
      "chunk_type": "requirement",
      "cross_references": [
        "ts_29.232"
      ]
    },
    {
      "chunk_id": "ts_29.292_7.2.6",
      "section_id": "7.2.6",
      "section_title": "Announcement",
      "content": "If the MSC Server wants to provide an announcement, e.g. when the condition in clause 5.4.7 is fulfilled, the MSC Server shall instruct the CS-MGW to send an announcement. In this case the MSC Server shall use the Play Announcement procedure in accordance with 3GPP TS 23.205 [39] and 3GPP TS 29.232 [11].\nIf the MSC Server wishes to stop the sending of an announcement the MSC Server shall apply the Stop Announcement procedure as defined in 3GPP TS 23.205 [39] and 3GPP TS 29.232 [11].",
      "chunk_type": "requirement",
      "cross_references": [
        "clause_5.4.7",
        "ts_23.205",
        "ts_29.232"
      ]
    },
    {
      "chunk_id": "ts_29.292_7.2.7",
      "section_id": "7.2.7",
      "section_title": "Failure handling in the MSC server",
      "content": "If any procedure between the MSC Server and the CS-MGW has not completed successfully or the MSC Server receives a Bearer Released procedure from the CS-MGW the procedure in accordance with clause 6.2.1.3.13 of 3GPP TS 23.231 [40] and 3GPP TS 29.232 [11] shall be applied.\n7.2A\tNotification Procedures\n7.2A.1\tGeneral information\nThis subclause contains procedures common to mobile originated and mobile terminated calls which are not defined in 3GPP TS 23.205 [39] but are applicabe to the MSC Server enhanced for ICS and the CS-MGW.\n7.2A.2\tECN Failure Indication\nThis procedure is used to report ECN related errors (see 3GPP TS 29.163 [46] clause 9.2.11.1c).\nTable 7.2A.2.1: Procedures between MSC Server and CS-MGW: ECN Failure Indication\nProcedure\nInitiated\nInformation element name\nInformation element required\nInformation element description\nECN Failure Indication\nCS-MGW\nContext\nM\nThis information element indicates the context for the bearer termination.\nBearer Termination\nM\nThis information element indicates the bearer termination for which the ECN failure is reported.\nECN Failure Indication\nM\nThis IE indicates an ECN failure event.\nECN Failure Indication Ack\nMSC Server\nContext\nM\nThis information element indicates the context where the command was executed.\nBearer Termination\nM\nThis information element indicates the bearer termination where the command was executed.\n7.2A.3\tICE Connectivity Check Result Notification\nThis procedure is used to report ICE connectivity check result for Full ICE.\nTable 7.2A.3.1: Procedures between MSC Server and CS-MGW: ICE Connectivity Check Result Notification\nProcedure\nInitiated\nInformation element name\nInformation element required\nInformation element description\nICE Connectivity Check Result Notification\nCS-MGW\nContext\nM\nThis information element indicates the context for the bearer termination.\nBearer Termination\nM\nThis information element indicates the bearer termination for which the ICE Connectivity Check Result is reported.\nICE Connectivity Check Result\nM\nThis information element indicates an ICE Connectivity Check Result event.\nICE Connectivity Check Result Notification Ack\nMSC Server\nContext\nM\nThis information element indicates the context where the command was executed.\nBearer Termination\nM\nThis information element indicates the bearer termination where the command was executed.\n7.2A.4\tICE New Peer Reflexive Candidate Notification\nThis procedure is used to report ICE new peer reflexive candidate for Full ICE.\nTable 7.2A.4.1: Procedures between MSC Server and CS-MGW: ICE New Peer Reflexive Candidate Notification\nProcedure\nInitiated\nInformation element name\nInformation element required\nInformation element description\nICE New Peer Reflexive Candidate Notification\nCS-MGW\nContext\nM\nThis information element indicates the context for the bearer termination.\nBearer Termination\nM\nThis information element indicates the bearer termination for which the ICE New Peer Reflexive Candidate is reported\nICE New Peer Reflexive Candidate\nM\nThis information element indicates an ICE New Peer Reflexive Candidate event.\nICE New Peer Reflexive Candidate Notification Ack\nMSC Server\nContext\nM\nThis information element indicates the context where the command was executed.\nBearer Termination\nM\nThis information element indicates the bearer termination where the command was executed.",
      "chunk_type": "general",
      "cross_references": [
        "ts_23.231_clause_6.2.1.3.13",
        "ts_29.163_clause_9.2.11.1",
        "table_7.2",
        "ts_23.231",
        "ts_29.232",
        "ts_23.205",
        "ts_29.163"
      ]
    },
    {
      "chunk_id": "ts_29.292_7.3.1.1",
      "section_id": "7.3.1.1",
      "section_title": "Access bearer clearing",
      "content": "Once the call clearing and the release of the associated radio resources have been completed, the MSC Server releases any CS-MGW allocated resources for the access side. If any resources were seized in the CS-MGW, the MSC Server uses the Release Termination procedure as specified in 3GPP TS 29.232 [11] to request the CS-MGW to remove the access side bearer termination.",
      "chunk_type": "general",
      "cross_references": [
        "ts_29.232"
      ]
    },
    {
      "chunk_id": "ts_29.292_7.3.1.2",
      "section_id": "7.3.1.2",
      "section_title": "Network side clearing",
      "content": "If the MSC Server requires to release resources due to the receipt of a BYE or CANCEL request or a response including a failure indication from the network the MSC Server shall act in accordance with clause 7.2.6 in 3GPP TS 23.231 [40] and 3GPP TS 29.232 [11].",
      "chunk_type": "requirement",
      "cross_references": [
        "ts_23.231_clause_7.2.6",
        "ts_23.231",
        "ts_29.232"
      ]
    },
    {
      "chunk_id": "ts_29.292_7.3.2.1",
      "section_id": "7.3.2.1",
      "section_title": "Access bearer clearing",
      "content": "Once the call clearing and the release of the associated radio resources have been completed, the MSC Server releases any CS-MGW allocated resources for the access side. If any resources were seized in the CS-MGW, the MSC Server uses the Release Termination procedure as specified in 3GPP TS 29.232 [11] to request the CS-MGW to remove the access side bearer termination.",
      "chunk_type": "general",
      "cross_references": [
        "ts_29.232"
      ]
    },
    {
      "chunk_id": "ts_29.292_7.3.2.2",
      "section_id": "7.3.2.2",
      "section_title": "Network side clearing",
      "content": "If the MSC Server requires to release resources due to the receipt of a BYE or CANCEL request or a response including a failure indication from the originating or terminating UE the MSC Server shall act in accordance with clause 7.2.6 in 3GPP TS 23.231 [40] and 3GPP TS 29.232 [11].",
      "chunk_type": "requirement",
      "cross_references": [
        "ts_23.231_clause_7.2.6",
        "ts_23.231",
        "ts_29.232"
      ]
    },
    {
      "chunk_id": "ts_29.292_7.3.3.1",
      "section_id": "7.3.3.1",
      "section_title": "Bearer released received on the access side",
      "content": "After the MSC Server has received the Bearer Released procedure from the CS-MGW on the access side, the MSC Server shall release the access resources as described in 3GPP TS 24.008 [3]. If the call is already established towards the network side, call clearing to the network side is performed as described in clause 5.5.3.",
      "chunk_type": "requirement",
      "cross_references": [
        "clause_5.5.3",
        "ts_24.008"
      ]
    },
    {
      "chunk_id": "ts_29.292_7.3.3.2",
      "section_id": "7.3.3.2",
      "section_title": "Bearer released received on the network side",
      "content": "After the MSC Server has received the Bearer Released procedure from the CS-MGW on the network side, the MSC Server shall clear the call to the network side as described in clause 5.5.3 and clear the call to the UE as described in 3GPP TS 24.008 [3].",
      "chunk_type": "requirement",
      "cross_references": [
        "clause_5.5.3",
        "ts_24.008"
      ]
    },
    {
      "chunk_id": "ts_29.292_7.4",
      "section_id": "7.4",
      "section_title": "Call independent procedures",
      "content": "The MSC Server and the CS-MGW are involved in a number of procedures which are not related to the setting up and clearing of calls. The MSC Server and the CS-MGW shall comply with the requirements stated in the different subclauses 10.1 - 10.10 of 3GPP TS 23.205 [39] and subclauses 10.12 - 10.16 of 3GPP TS 23.205 [39].",
      "chunk_type": "procedure",
      "cross_references": [
        "ts_23.205"
      ]
    },
    {
      "chunk_id": "ts_29.292_7.5",
      "section_id": "7.5",
      "section_title": "Explicit Congestion Notification",
      "content": "An MSC Server and a CS-MGW may support Multimedia Telephony using Explicit Congestion Notification (see IETF RFC 3168 [48], IETF RFC 6679 [49], and 3GPP TS 26.114 [28]), and may then act as an ECN endpoint to enable ECN with a local ECN-capable terminal within a local network that properly handles ECN-marked packets.\nThe ECN procedures described in 3GPP TS 29.163 [46], clause 9.2.11, for MGCF and IM-MGW are then applicable for MSC Server and the CS-MGW.",
      "chunk_type": "general",
      "cross_references": [
        "ts_29.163_clause_9.2.11",
        "ts_26.114",
        "ts_29.163"
      ]
    },
    {
      "chunk_id": "ts_29.292_7.6",
      "section_id": "7.6",
      "section_title": "Multimedia Priority Service (MPS) Support",
      "content": "The Multimedia Priority Service (MPS) is specified in 3GPP TS 22.153 [54]. An MSC Server and a CS-MGW may support the priority treatment of a call/session identified as an MPS call/session.\nThe MPS procedures described in 3GPP TS 29.163 [46], clause 9.4, for MGCF and IM-MGW are then applicable for MSC Server and the CS-MGW.",
      "chunk_type": "general",
      "cross_references": [
        "ts_29.163_clause_9.4",
        "ts_22.153",
        "ts_29.163"
      ]
    },
    {
      "chunk_id": "ts_29.292_7.7",
      "section_id": "7.7",
      "section_title": "Interactive Connectivity Establishment",
      "content": "An MSC Server and a CS-MGW may support ICE functionality as specified in IETF RFC 8445 [69] and IETF RFC 8839 [70], and 3GPP TS 24.229 [2].\nSupport of full ICE functionality is optional, but if ICE is supported, the MSC Server and the CS-MGW shall at least support ICE lite as specified in IETF RFC 8445 [69].\nThe requirements as described in clause 9.2.12 of 3GPP TS 29.163 [46] for MGCF and IM-MGW, apply to the MSC Server and the CS-MGW when the ICE procedures are supported.",
      "chunk_type": "general",
      "cross_references": [
        "ts_29.163_clause_9.2.12",
        "ts_24.229",
        "ts_29.163"
      ]
    },
    {
      "chunk_id": "ts_29.292_7.8.1",
      "section_id": "7.8.1",
      "section_title": "Handling of common codec parameters",
      "content": "The requirements as described in clause 9.2.13.1 of 3GPP TS 29.163 [46] for the MGCF and the IM-MGW, apply to the MSC Server and the CS-MGW.",
      "chunk_type": "parameter",
      "cross_references": [
        "ts_29.163_clause_9.2.13.1",
        "ts_29.163"
      ]
    },
    {
      "chunk_id": "ts_29.292_7.8.2",
      "section_id": "7.8.2",
      "section_title": "EVS speech codec",
      "content": "The Enhanced Voice Services (EVS) speech codec is defined in 3GPP TS 26.441 [61]. Its RTP payload type is defined in 3GPP TS 26.445 [62], and procedures for its usage as IMS Multimedia Telephony speech codec are defined in 3GPP TS 26.114 [28].\nThe MSC Server and the CS-MGW may support transcoding to and from the EVS speech codec. If they do so, the requirements as described in clause 9.2.13.2 of 3GPP TS 29.163 [46] for the MGCF and the IM-MGW, apply to the MSC Server and the CS-MGW.",
      "chunk_type": "general",
      "cross_references": [
        "ts_29.163_clause_9.2.13.2",
        "ts_26.441",
        "ts_26.445",
        "ts_26.114",
        "ts_29.163"
      ]
    },
    {
      "chunk_id": "ts_29.292_7.8.3",
      "section_id": "7.8.3",
      "section_title": "IVAS speech codec",
      "content": "The Immersive Voice and Audio Service (IVAS) speech and audio codec is defined in 3GPP TS 26.250 [71]. Its RTP payload type is defined in 3GPP TS 26.253 [72], and procedures for its usage as IMS Multimedia Telephony speech codec are defined in 3GPP TS 26.114 [28].\nThe MSC Server and the CS-MGW may support transcoding to and from the IVAS speech and audio codec. If they do so, the requirements as described in clause 9.2.13.4 of 3GPP TS 29.163 [46] for the MGCF and the IM-MGW, apply to the MSC Server and the CS-MGW.",
      "chunk_type": "general",
      "cross_references": [
        "ts_29.163_clause_9.2.13.4",
        "ts_26.250",
        "ts_26.253",
        "ts_26.114",
        "ts_29.163"
      ]
    },
    {
      "chunk_id": "ts_29.292_7.9",
      "section_id": "7.9",
      "section_title": "SDP Capability Negotiation (SDPCapNeg)",
      "content": "The SDP Capability Negotiation (SDPCapNeg) as specified in IETF RFC 5939 [63] is adopted as an optional functionality to negotiate capabilities and their associated configurations according to 3GPP TS 24.229 [2].\nThe SDPCapNeg requirements and procedures described in subclause 5.2.23 of 3GPP TS 23.333 [64] for MRFC and MRFP are then applicable for MSC Server and the CS-MGW.\nAnnex A (informative):Change history\nChange history\nDate\nTSG #\nTSG Doc.\nCR\nRev\nSubject/Comment\nOld\nNew\n06/2013\nCT#60\nCP-130343\n0073\n3\nHandling of dialed digits home-local number\n11.6.0\n12.0.0\n06/2013\nCT#60\nCP-130343\n0078\n2\nIdentity mapping correction\n11.6.0\n12.0.0\n06/2013\nCT#60\nCP-130343\n0083\n1\nMapping between cause IE and SIP status code when timer expires\n11.6.0\n12.0.0\n06/2013\nCT#60\nCP-130343\n0084\n1\nMapping between cause values and SIP status code related to not implemented features/services\n11.6.0\n12.0.0\n06/2013\nCT#60\nCP-130343\n0085\n1\nMapping of CUG specific cause values\n11.6.0\n12.0.0\n06/2013\nCT#60\nCP-130343\n0086\n1\nMapping of cause value 8 \"operator determined barring\"\n11.6.0\n12.0.0\n09/2013\nCT#61\nCP-130558\n0088\nIdentity mapping correction\n12.0.0\n12.1.0\n06/2014\nCT#64\nCP-140353\n0095\n-\nConference creation\n12.1.0\n12.2.0\n06/2014\nCT#64\nCP-140354\n0100\n-\nRemoval of CDIVN\n12.1.0\n12.2.0\n06/2014\nCT#64\nCP-140385\n0089\n1\nSupport of SIP precondition mechanism by MSC server\n12.1.0\n12.2.0\n06/2014\nTSG#64\nCP-140396\n0090\n2\nICE support for MSC Server enhanced for ICS\n12.1.0\n12.2.0\n09/2014\nCT-65\nCP-140542\n0101\n-\nICE: reference correction\n12.2.0\n12.3.0\n09/2014\nCT-65\nCP-140554\n0102\n3\nSending of PROGRESS during aSRVCC\n12.2.0\n12.3.0\n12/2014\nCT-66\nCP-140912\n0103\n2\nUpdate of protocol stacks and associated text for IuCS to Mb interworking\n12.3.0\n12.4.0\n12/2014\nCT-66\nCP-140919\n0104\n3\nSending of PROGRESS upon SIP UPDATE message\n12.3.0\n12.4.0\n12/2014\nCT-66\nCP-140933\n0105\n3\nAdding support for EVS codec\n12.3.0\n12.4.0\n06/2015\nCT-68\nCP-150337\n0111\n2\nCorrecting rules condition for CFU service\n12.4.0\n12.5.0\n06/2015\nCT-68\nCP-150364\n0112\n2\nNotify UE remote party state after SRVCC\n12.5.0\n13.0.0\n09/2015\nCT-69\nCP-150484\n0113\n1\nClarifying clearing initiated by the mobile\n13.0.0\n13.1.0\n09/2015\nCT-69\nCP-150484\n0114\n1\nAutonomous clearing initiated by the MSC Server\n13.0.0\n13.1.0\n09/2015\nCT-69\nCP-150463\n0120\n-\nMissing 4xx final responses\n13.0.0\n13.1.0\n09/2015\nCT-69\nCP-150463\n0126\n2\nMapping to/from Q.850 cause codes\n13.0.0\n13.1.0\n12/2015\nCT-70\nCP-150667\n0127\n5\nStage 2 Mc supporting of SDP capability negotiation\n13.1.0\n13.2.0\n12/2015\nCT-70\nCP-150660\n0128\n1\nRemoving a conference participant\n13.1.0\n13.2.0\nChange history\nDate\nMeeting\nTDoc\nCR\nRev\nCat\nSubject/Comment\nNew version\n2016-03\nCT#71\nCP-160105\n0130\n1\nF\nRemoval of references to TS 26.235\n13.3.0\n2017-03\nCT#75\nCP-170085\n0131\nB\nReception of 666 (Unwanted) response\n14.0.0\n2017-06\nCT#76\nCP-171131\n0132\n1\nF\nMapping of additional 4xx response codes for SPECTRE\n14.1.0\n2017-06\nCT#76\nCP-171129\n0133\n3\nB\nICS: Interworking procedures of password\n14.1.0\n2017-06\nCT#76\nCP-171134\n0134\n2\nF\nMapping SIP Reason header field cause “Call completed elsewhere” to a cause information element in the DISCONNECT message\n14.1.0\n2017-06\nCT#76\nCP-171131\n0135\n1\nF\nReference update: draft-ietf-sipcore-status-unwanted\n14.1.0\n2017-06\nCT#76\nCP-171134\n0136\n1\nF\nCompletion of \"Reserve RTP Connection Point\", \"Reserve and Configure RTP Connection Point\" and \"Configure RTP Connection Point\" procedures.\n14.1.0\n2017-06\nCT#76\nCP-171129\n0137\n2\nB\nRegistration of password for ICS\n14.1.0\n2017-06\nCT#76\nCP-171134\n0138\nF\nResponse-Source header field handling completion\n14.1.0\n2017-09\nCT#77\nCP-172049\n0139\nF\nReference update from draft-ietf-sipcore-status-unwanted-06 to RFC 8197\n14.2.0\n2017-12\nCT#78\nCP-172049\n0140\nF\nInterworking of cause location parameter\n14.3.0\n2017-12\nCT#78\nCP-173104\n0141\nF\nCall rejection when IMSI is detached\n15.0.0\n2017-12\nCT#78\nCP-173104\n0142\n1\nB\nCall rejection when VLR data cannot be retrieved\n15.0.0\n2018-03\nCT#79\nCP-180044\n0144\nA\nReference update: RFC 8224\n15.1.0\n2018-03\nCT#79\nCP-180042\n0146\nA\nReference Update for the ISUP location parameter\n15.1.0\n2018-03\nCT#79\nCP-180042\n0148\nA\nCorrection of incorrect reference numbering\n15.1.0\n2018-09\nCT#81\nCP-182018\n0152\nA\nScreening indicator values\n15.2.0\n2018-09\nCT#81\nCP-182017\n0153\nF\nMapping of calling identity number verification status\n15.2.0\n2018-09\nCT#81\nCP-182024\n0155\nA\nReference Update for the ISUP Q.850 location parameter\n15.2.0\n2019-03\nCT#83\nCP-190126\n0157\n2\nA\nReference Update for the ISUP Cause Location Parameter Draft\n15.3.0\n2019-06\nCT#84\nCP-191094\n0159\nA\nReference Update for the ISUP Cause Location Parameter Draft\n15.4.0\n2019-09\nCT#85\nCP-192166\n0161\n1\nA\nReference Update RFC8606\n15.5.0\n2020-07\nSA#88e\n-\n-\n-\nUpdate to Rel-16 version (MCC)\n16.0.0\n2022-03\nCT#95e\nCP-220209\n0162\nC\nUpdate of IETF references for ICE\n17.0.0\n2024-03\nSA#103\n-\n-\n-\n-\nUpdate to Rel-18 version (MCC)\n18.0.0\n2024-06\nCT#104\nCP-241120\n0163\nB\nAdding support for IVAS codec\n18.1.0",
      "chunk_type": "general",
      "cross_references": [
        "ts_23.333_clause_5.2.23",
        "ts_24.229",
        "ts_23.333",
        "ts_26.235"
      ]
    }
  ]
}