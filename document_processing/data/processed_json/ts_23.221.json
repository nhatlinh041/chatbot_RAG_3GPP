{
  "metadata": {
    "specification_id": "ts_23.221",
    "version": "18.0.0",
    "title": "3GPP TS 23.221",
    "file_path": "/content/drive/MyDrive/RAG_thesis/data/23_series/23221-i00/23221-i00.docx"
  },
  "export_info": {
    "export_date": "2025-07-26T09:39:21.088078",
    "total_chunks": 69
  },
  "chunks": [
    {
      "chunk_id": "ts_23.221_1",
      "section_id": "1",
      "section_title": "Scope",
      "content": "This document covers the architectural requirements for 3GPP systems based on UTRAN, E-UTRAN and Iu mode GERAN. In particular it details the high level requirements for the Circuit Switched (CS) Domain and the stage 2 procedures that span more than one domain/subsystem. The reference model to which these procedures apply can be found within TS 23.002 [1]. In addition, A mode to Iu mode handover for CS services is addressed. Detailed architectural requirements within the subsystems are contained within the remainder of the 23 series of specifications e.g. the requirements for the Packet Switched (PS) domain are contained within TS 23.060 [2], TS 23.401 [27] and the requirements for the Bearer Independent CS Core Network are contained in TS 23.205[14].",
      "chunk_type": "general",
      "cross_references": [
        "ts_23.002",
        "ts_23.060",
        "ts_23.401",
        "ts_23.205"
      ]
    },
    {
      "chunk_id": "ts_23.221_2",
      "section_id": "2",
      "section_title": "References",
      "content": "The following documents contain provisions which, through reference in this text, constitute provisions of the present document.\n-\tReferences are either specific (identified by date of publication, edition number, version number, etc.) or non‑specific.\n-\tFor a specific reference, subsequent revisions do not apply.\n-\tFor a non-specific reference, the latest version applies. In the case of a reference to a 3GPP document (including a GSM document), a non-specific reference implicitly refers to the latest version of that document in the same Release as the present document.\n[1]\t3GPP TS 23.002: \"Network Architecture\".\n[2]\t3GPP TS 23.060: \"General Packet Radio Service (GPRS) Service description; Stage 2\".\n[3]\t3GPP TS 23.012: \"Location management procedures\".\n[5]\t3GPP TS 25.331: \"Radio Resource Control (RRC) Protocol Specification\".\n[6]\t3GPP TS 25.301: \"Radio interface protocol architecture\".\n[7]\t3GPP TS 25.303: \"UE functions and inter-layer procedures in connected mode\".\n[8]\t3GPP TR 21.905: \"3G Vocabulary\".\n[9]\t3GPP TS 25.413: \"UTRAN Iu interface RANAP signalling\".\n[10]\t3GPP TS 25.410: \"UTRAN Iu Interface: General Aspects and Principles\".\n[11]\t3GPP TS 23.228: \"IP Multimedia Subsystem – Stage 2\".\n[12]\t3GPP TS 43.051: \"GERAN Overall Description\".\n[13]\t3GPP TS 23.153: \"Out of Band Transcoder Control - Stage 2\".\n[14]\t3GPP TS 23.205: \"Bearer Independent CS Core Network – Stage 2\".\n[15]\t3GPP TR 25.931: \"UTRAN Functions, examples on signalling procedures\".\n[16]\tRFC 2766: \"Network Address Translation - Protocol Translation (NAT-PT)\", G. Tsirtsis, P. Srisuresh. February 2000.\n[17]\tRFC 2893: \"Transition Mechanisms for IPv6 Hosts and Routers\", R. Gilligan, E. Nordmark, August 2000.\n[17a]\tRFC 4941: \"Privacy Extensions for Stateless Address Autoconfiguration in IPv6\", T. Narten, R. Daves, S. Krishnan, September 2007.\n[18]\t3GPP TS 25.401: \"UTRAN Overall Description\".\n[19]\t3GPP TS 25.304: \"UE Procedures in Idle Mode and Procedures for Cell Reselection in Connected Mode\".\n[20]\t3GPP TS 45.008: \"Radio subsystem link control\".\n[21]\tRFC3316: \"IPv6 for Some Second and Third Generation Cellular Hosts\", June 2002.\n[22]\t3GPP TS 24.007: \"Digital cellular telecommunications system (Phase 2+); Mobile radio interface signalling layer 3 General aspects\".\n[23]\t3GPP TS 24.229: \"IP Multimedia Call Control Protocol based on SIP and SDP\".\n[24]\t3GPP TS 23.008: \"Organisation of subscriber data\".\n[25]\t3GPP TS 24.008: \"Mobile radio interface Layer 3 specification; Core network protocols; Stage 3\".\n[26]\t3GPP TR 23.981: \"Interworking aspects and migration scenarios for IPv4 based IMS implementations\".\n[27]\t3GPP TS 23.401: \"General Packet Radio Service (GPRS) enhancements for Evolved Universal Terrestrial Radio Access Network (E-UTRAN) access\".\n[28]\t3GPP TS 36.300: \"Evolved Universal Terrestrial Radio Access (E-UTRA) and Evolved Universal Terrestrial Radio Access (E-UTRAN); Overall description; Stage 2\".\n[29]\t3GPP TS 36.331: \"Evolved Universal Terrestrial Radio Access (E-UTRA); Radio Resource Control (RRC); Protocol specification\".\n[30]\t3GPP TS 23.272: \"Circuit Switched Fallback in Evolved Packet System; Stage 2\".\n[31]\t3GPP TS 23.292: \"IP Multimedia Subsystem (IMS) Centralized Services\".\n[32]\t3GPP TS 23.237: \"IP Multimedia Subsystem (IMS) Service Continuity\".\n[33]\t3GPP TS 23.167: \"IP Multimedia Subsystem (IMS) emergency sessions\".\n[34]\t3GPP TS 24.301: \"Non-Access-Stratum (NAS) protocol for Evolved Packet System (EPS); Stage 3\".\n[35]\t3GPP TS 23.216: \"Single Radio Voice Call Continuity (SRVCC); Stage 2\".\n[36]\t3GPP TR 23.975: \"IPv6 Migration Guidelines\".\n[37]\t3GPP TS 29.061: \"Interworking between the Public Land Mobile Network (PLMN) supporting packet based services and Packet Data Networks (PDN)\".\n[38]\t3GPP TS 23.682: \"Architecture Enhancements to facilitate communications with Packet Data Networks and Applications\".\n[39]\t3GPP TS 22.011: \"Service accessibility\".\n[40]\t3GPP TS 22.101: \"3rd Generation Partnership Project; Technical Specification Group Services and Systems Aspects; Service aspects; Service principles\".",
      "chunk_type": "general",
      "cross_references": [
        "ts_23.002",
        "ts_23.060",
        "ts_23.012",
        "ts_25.331",
        "ts_25.301",
        "ts_25.303",
        "ts_21.905",
        "ts_25.413",
        "ts_25.410",
        "ts_23.228",
        "ts_43.051",
        "ts_23.153",
        "ts_23.205",
        "ts_25.931",
        "ts_25.401",
        "ts_25.304",
        "ts_45.008",
        "ts_24.007",
        "ts_24.229",
        "ts_23.008",
        "ts_24.008",
        "ts_23.981",
        "ts_23.401",
        "ts_36.300",
        "ts_36.331",
        "ts_23.272",
        "ts_23.292",
        "ts_23.237",
        "ts_23.167",
        "ts_24.301",
        "ts_23.216",
        "ts_23.975",
        "ts_29.061",
        "ts_23.682",
        "ts_22.011",
        "ts_22.101"
      ]
    },
    {
      "chunk_id": "ts_23.221_3.1",
      "section_id": "3.1",
      "section_title": "Definitions",
      "content": "For the purposes of the present document, the terms defined in TR 21.905 [8] apply, in addition, the following terms apply:\n3GPP PS Data Off Exempt Services: For PDN Connection or PDU Session of type IP, up to two sets of operator services (i.e. the exempt services enumerated in clause 10.2 of TS 22.011 [39], including the signalling used to enable such services) that are allowed even if the 3GPP PS Data Off status set to active in the UE by the user. One set is used when UE is in HPLMN, the other set is used when UE is roaming in VPLMN. For PDN connection of type non-IP or Ethernet, or PDU Session of type Ethernet or Unstructured, no 3GPP Data Off Exempt Service is defined.\nIn Iu mode: see TR 21.905 [8].\nIn A/Gb mode: see TR 21.905 [8].\nRAN: within this document, the term RAN (Radio Access Network) is used to refer to UTRAN and/or GERAN in Iu mode and/or E-UTRAN.\nRestricted local operator services: communication services provided by an operator that involve either automated or human assistance (e.g. credit card billing, directory assistance, customer care) for which successful authentication is not necessary.\nFor the purposes of the present document, the following terms and definitions given in TS 22.011 [39] apply:\n3GPP PS Data Off:\tSee TS 22.011 [39].",
      "chunk_type": "definition",
      "cross_references": [
        "ts_22.011_clause_10.2",
        "ts_21.905",
        "ts_22.011"
      ]
    },
    {
      "chunk_id": "ts_23.221_3.2",
      "section_id": "3.2",
      "section_title": "Symbols",
      "content": "For the purposes of the present document, the following symbols apply:",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.221_3.3",
      "section_id": "3.3",
      "section_title": "Abbreviations",
      "content": "For the purposes of the present document, the following abbreviations apply:\nATM\tAsynchronous Transfer Mode\nCM\tConnection Management\nCN\tCore Network\nCS\tCircuit Switched\nCSCF\tCall/Session Control Function\nCSFB\tCircuit Switched Fallback\nCS-MGW\tCircuit Switched Media Gateway\nDHCP\tDynamic Host Configuration Protocol\nEPS\tEvolved Packet System\nE-UTRAN\tEvolved UMTS Terrestrial Radio Access Network\nGERAN\tGSM/EDGE Radio Access Network\nGGSN\tGateway GPRS Support Node\nGPRS\tGeneral Packet Radio Service\nGTP\tGPRS Tunnelling Protocol\nHLR\tHome Location Register\nIM\tIP Multimedia\nIMS\tIP Multimedia Subsystem\nIMSI\tInternational Mobile Subscriber Identity\nIP\tInternet Protocol\nIPSec\tIP Security protocol\nLA\tLocation Area\nLAC\tLocation Area Code\nLAN\tLocal Area Network\nLLC\tLogical Link Control\nLM\tLocation Management\nMAP\tMobile Application Part\nMGCF\tMedia Gateway Control Function\nMGW\tMedia Gateway\nMM\tMobility Management\nMME\tMobility Management Entity\nMRF\tMedia Resource Function\nMSC\tMobile Switching Centre\nNAT\tNetwork Address Translator\nNGN\tNext Generation Networks\nOoBTC\tOut of Band Transcoder Control\nP-GW\tPDN Gateway\nPDA\tPersonal Digital Assistant\nPDP\tPacket Data Protocol\nPLMN\tPublic Land Mobile Network\nPS\tPacket Switched\nRA\tRouting Area\nRAC\tRouting Area Code\nRAI\tRouting Area Identifier\nRAN\tRadio Access Network\nRANAP\tRadio Access Network Application Part\nRLC\tRadio Link Control\nRLOS\tRestricted Local Operator Services\nRNC\tRadio Network Controller\nRNTI\tRadio Network Temporary Identifier\nRRC\tRadio Resource Control\nS-GW\tServing Gateway\nSGSN\tServing GPRS Support Node\nSGW\tSignalling gateway\nSIP\tSession Initiation Protocol\nSRNS\tServing Radio Network Subsystem\nSS7\tSignalling System No. 7\nSTM\tSynchronous Transfer Mode\nSRNS\tServing Radio Network Subsystem\nTCP\tTransmission Control Protocol\nTMSI\tTemporary Mobile Station Identifier\nTrFO\tTranscoder Free Operation\nUDP\tUser Datagram Protocol\nUE\tUser Equipment\nUMTS\tUniversal Mobile Telecommunications System\nURA\tUTRAN Registration Area\nUTRAN\tUMTS Terrestrial Radio Access Network\nVHE\tVirtual Home Environment\nVLR\tVisited Location Register",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.221_4.1",
      "section_id": "4.1",
      "section_title": "Allowed network and terminal configurations",
      "content": "A 3GPP network is divided into a radio AN and a CN, which are connected via an open interface over the Iu or S1 or A/Gb reference point(s). The A/Gb mode is not further described in this specification. Furthermore, the core network is from a functional point of view divided into a PS Domain, IM Subsystem and a CS Domain (see TS 23.002 [1]). Any deployment of the IM subsystem requires a PS domain.\nThe following network configurations shall be allowed:\na)\tnetworks which provide the functionality of CS Domain and PS Domain (and optionally IM Subsystem);\nb)\tnetworks which only provide the functionality of the CS Domain (only with GERAN or UTRAN access);\nc)\tnetworks which only provide the functionality of the PS Domain (and optionally IM Subsystem).\nThe following terminal configurations shall be allowed:\na)\tterminals which are able to access both to the CS Domain and PS Domain (and optionally IM Subsystem);\nb)\tterminals which are only able to access to the PS Domain (and optionally IM Subsystem);\nc)\tterminals which are only able to access to the CS Domain.\nIt shall be noted that a terminal which is only able to access to e.g. the PS Domain supports only mobility management, protocols etc. of that domain. The different configurations given above shall not prevent CS-type services from being delivered over the PS domain.",
      "chunk_type": "general",
      "cross_references": [
        "ts_23.002"
      ]
    },
    {
      "chunk_id": "ts_23.221_4.2.1",
      "section_id": "4.2.1",
      "section_title": "Iu mode to Iu mode handover for circuit switched services",
      "content": "For Iu mode to Iu mode Inter-MSC Hand-Over / SRNS relocation the MAP E interface transporting RANAP messages shall be used. Alternatively, in the case of intra-PLMN handover, the GSM to UMTS inter-system handover or SRNS relocation between two MSC-areas may be executed as intra-MSC inter-system handover or SRNS relocation respectively. In such a case this will be performed by utilising a direct SCCP connection between the target RNC located in the target MSC-area and the MSC server already involved in the call.\nFor handover of circuit-switched services involving the change of CN equipment (only CS-MGW or CS-MGW and MSC-server) the anchor principle shall be applied.\n-\tThe first MSC Server involved in a call will become the Anchor MSC Server for this call during and after handover, and will remain in the call until the call is released. Every subsequent handover (Intra and Inter) will be controlled by this MSC Server.\n-\tThe first CS-MGW involved in a call will become the Anchor CS-MGW for this call during and after handover , and will remain in the call until the call is released. The Nc interface is anchored in the CS-MGW, the correlation between CS-MGW to PSTN and the CS-MGW to RAN remain fixed until the call is released.",
      "chunk_type": "requirement",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.221_4.2.2",
      "section_id": "4.2.2",
      "section_title": "A mode to Iu mode handover for CS services",
      "content": "For A mode to Iu mode inter-system Inter-MSC Hand-Over (GSM to UMTS) the MAP E interface transporting BSSMAP messages shall be used. As a network option, in the case of intra-PLMN inter-system handover from A mode to Iu mode, the handover between two MSC-areas may be executed as:\n-\tintra-MSC handover, if the serving BSS is connected to the Anchor MSC; or\n-\tsubsequent intra-MSC handover or subsequent inter-MSC handover back to the Anchor MSC Server, if the serving BSS is connected to an MSC-B. The decision between these two alternatives is implementation and network configuration dependent.\nThe procedure will be performed by utilising a direct SCCP connection between the target RNC located in the target MSC-area and the Anchor MSC or MSC-B, respectively.",
      "chunk_type": "requirement",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.221_4.2.3",
      "section_id": "4.2.3",
      "section_title": "General principles for use of CS-MGW resources",
      "content": "The following principles for use of CS-MGW resources apply:\n1.\tit shall not be necessary to have the CS-MGW co-located with the MSC Server;\n2.\tthe CS-MGW resources need not be associated with any particular MSC Server (see note 1);\n3.\tit shall be possible for any MSC Server to request resources of any CS-MGW in the network (see note 1);\n4.\tit shall be possible for an RNC to connect to the CS-MGW indicated by the MSC server;\nNote 1:\tFor points 2 and 3 above, issues related to O&M procedures such as where notification of restart of a CS-MGW should be sent to, need to be considered. Extensions to H.248 may be required.\nThe specification of the Bearer Independent CS CN which uses the CS-MGW is in TS 23.205 [14].",
      "chunk_type": "definition",
      "cross_references": [
        "ts_23.205"
      ]
    },
    {
      "chunk_id": "ts_23.221_4.2.4",
      "section_id": "4.2.4",
      "section_title": "Transcoder location",
      "content": "The transcoders are located in the core network. They may be located in the CS-MGW at the border to the RAN (i.e. the CS-MGW at the Iu interface) or at the CS-MGW at the edge of the core network (e.g. at the edge towards the PSTN/ISDN), TS 23.153 [13].",
      "chunk_type": "general",
      "cross_references": [
        "ts_23.153"
      ]
    },
    {
      "chunk_id": "ts_23.221_4.3",
      "section_id": "4.3",
      "section_title": "Packet Switched (PS) core network domain",
      "content": "The requirements for the GPRS PS domain are in TS 23.060 [2] and for the EPS PS domain in TS 23.401 [27].",
      "chunk_type": "general",
      "cross_references": [
        "ts_23.060",
        "ts_23.401"
      ]
    },
    {
      "chunk_id": "ts_23.221_4.4",
      "section_id": "4.4",
      "section_title": "IP Multimedia subsystem (IMS)",
      "content": "The requirements for the IMS are in TS 23.228 [11].",
      "chunk_type": "general",
      "cross_references": [
        "ts_23.228"
      ]
    },
    {
      "chunk_id": "ts_23.221_4.5",
      "section_id": "4.5",
      "section_title": "Cross Core Network Domain Requirements",
      "content": "The specifications shall support the option of IP transport for the MAP and CAP based interfaces",
      "chunk_type": "requirement",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.221_4.6",
      "section_id": "4.6",
      "section_title": "UTRAN",
      "content": "The requirements for the UTRAN are in the 3GPP 25-series of specifications. An overview can be found in TS 25.401 [18].",
      "chunk_type": "general",
      "cross_references": [
        "ts_25.401"
      ]
    },
    {
      "chunk_id": "ts_23.221_4.7",
      "section_id": "4.7",
      "section_title": "GERAN",
      "content": "The requirements for the GERAN are in TS 43.051 [12]",
      "chunk_type": "general",
      "cross_references": [
        "ts_43.051"
      ]
    },
    {
      "chunk_id": "ts_23.221_4.8",
      "section_id": "4.8",
      "section_title": "E-UTRAN",
      "content": "The requirements for the E-UTRAN are in the 3GPP 36-series of specifications. An overview can be found in TS 36.300 [28].",
      "chunk_type": "general",
      "cross_references": [
        "ts_36.300"
      ]
    },
    {
      "chunk_id": "ts_23.221_4.9",
      "section_id": "4.9",
      "section_title": "Access to Restricted Local Operator Services",
      "content": "Service requirements of Restricted Local Operator Services are defined in TS 22.101 [40].\nProcedures and requirements for EPS functions to support Restricted Local Operator Services are defined in TS 23.401 [27] and for IMS functions are defined in TS 23.228 [11].\nAdditional architectural requirements are the following:\n-\tAccess to Restricted Local Operator Services is supported for both non-IMS and IMS services.\n-\tWhen Restricted Local Operator Services are accessed via IMS:\n1)\tThere is no requirement of any specific support for location over and above what is defined in TS 23.228 [11] already;\n2)\tThere is no requirement of any specific support regarding call back to the user that has initiated the session.\n-\tOnly UE-originated RLOS requests are supported and there is no support for mobile terminated services.\n-\tHandover between 3GPP and non-3GPP accesses are not supported for UEs attached for RLOS.\n-\tThe use of Restricted Local Operator Services does not impact the ability of serving PLMN to support Lawful Interception.",
      "chunk_type": "general",
      "cross_references": [
        "ts_22.101",
        "ts_23.401",
        "ts_23.228"
      ]
    },
    {
      "chunk_id": "ts_23.221_5.1",
      "section_id": "5.1",
      "section_title": "IP version issues",
      "content": "The EPS/UMTS/GSM architecture shall support IPv4 / IPv6 based on the statements below.\n-\tIP transport between network elements of the IP Connectivity services (between RNC, SGSN, GGSN, eNodeB, MME, S-GW, and P-GW) and IP transport for the CS Domain: both IPv4 and IPv6 are options for IP Connectivity.\n-\tFor UEs used for Machine-Type Communications (MTC) IPv6 addressing as described in TS 23.401 [27] and TS 23.060 [2] should be the primary mechanism for IP addressing. IPv4 based addressing is considered a transition solution and is deprecated for MTC used over 3GPP accesses.\nFor implementation guidelines related to transition and other aspects of IPv4 address usage see Annex B.\n-\tIM CN subsystem elements (UE to CSCF and the other elements e.g. MRF):\n-\tThe architecture should make optimum use of IPv6.\n-\t3GPP specifications design the IM CN subsystem elements and interfaces to support both IPv4 and IPv6. In the case the UE supports IPv4, the guidelines and recommendations in TR 23.981 [26] should be followed.\n-\tThe UE may support IPv4 only, IPv6 only or both for the connection to the IM CN subsystem. In the case the UE supports IPv4, the guidelines and recommendations in TR 23.981 [26] should be followed.\n-\tAccording to the procedures defined in TS 23.060 [2] and/or TS 23.401 [27], when a UE is assigned an IPv6 prefix, it can change the global IPv6 address it is currently using via the mechanism defined in RFC 4941 [17a], or similar means.\n-\tAccess to existing data services (Intranet, Internet,…):\n-\tThe UE can access IPv4 and IPv6 based services.",
      "chunk_type": "requirement",
      "cross_references": [
        "ts_23.401",
        "ts_23.060",
        "ts_23.981"
      ]
    },
    {
      "chunk_id": "ts_23.221_5.2",
      "section_id": "5.2",
      "section_title": "Interoperability between IPv4 and IPv6 networks",
      "content": "Since the UE can access both IPv4 and IPv6 based services, situations may arise where interworking is needed to interoperate with IPv4 and IPv6 networks. This clause describes three different interworking scenarios: UE is IPv4 and IPv6 capable, IPv6 only UE, and IPv6 UE connected via IPv4 network to an IPv6 device. These scenarios are examples of IPv6 and IPv4 interworking. The scenarios presented below only considered cases of a Transition Gateway (TrGW) for generic services and specialist services may require additional functionally at the application level.\nIn addition to the following clauses, Annex B describes additional guidelines for interoperability if such function is required (e.g. IMS, MTC).",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.221_5.2.1",
      "section_id": "5.2.1",
      "section_title": "IPv4/IPv6 Mobile connecting to IPv4 and IPv6 networks",
      "content": "An installation where the UE has both IPv4 and IPv6 stacks is shown in Figure 5-1. As depicted, the terminal connects to the IPv4 device directly using an IPv4 PDP or EPS Bearer Context. Hence, the UE appears to be a standard IPv4 node to the external IPv4 network. This scenario does not need any specific transition support from the network. However, it requires both versions of IP at the UE. The GGSN/P-GW in this scenario may be different for the IPv6 and the IPv4 connections unless IPv4/v6 PDP or EPS Bearer Contexts are used. With GGSN/P-GW is meant either a GGSN or a P-GW.\nFigure 5-1: UE with IPv4 and IPv6 capability connecting to IPv4 and IPv6 networks",
      "chunk_type": "general",
      "cross_references": [
        "figure_5-1"
      ]
    },
    {
      "chunk_id": "ts_23.221_5.2.2",
      "section_id": "5.2.2",
      "section_title": "IPv6 only Mobile connecting to IPv4 network",
      "content": "Figure 5-2: IPv6 only mobile connecting to IPv4 data services\nFigure 5-2 shows an IPv6 only terminal connected to an IPv4 device. The UE us using an IPv6 PDP or EPS Bearer Context for access to a Transition Gateway (TrGW) that translates the IPv6 packets to IPv4 and vice versa. The TrGW may be implemented as a Network Address Translation – Protocol Translation (NAT-PT) [16] to convert IPv6 traffic coming from the UE to IPv4 traffic and vice versa.\nNAT-PT is a combination of NAT-like address translation and IP header conversion as described in [16]. NAT-PT uses a pool of IPv4 addresses for assignment to IPv6 nodes on a dynamic basis as sessions are initiated across v4-v6 boundaries. NAT-PT binds addresses in the v6 network with addresses in the v4 network to provide transparent routing of packets traversing address realms. This requires no changes to end nodes and IP packet routing is completely transparent to them. It does, however, require NAT-PT to track the sessions it supports and mandates that inbound and outbound packets pertaining to a session traverse the same NAT-PT device.",
      "chunk_type": "general",
      "cross_references": [
        "figure_5-2"
      ]
    },
    {
      "chunk_id": "ts_23.221_5.2.3",
      "section_id": "5.2.3",
      "section_title": "IPv6 Mobile connected to an IPv6 Device via an IPv4 network",
      "content": "Figure 5-3: IPv6 mobile connected to an IPv6 device via an IPv4 network\nFigure 5-3 shows a case where an IPv4 network lies between two IPv6 domains. The IPv6 domains can be interconnected using IETF standard mechanisms such as automatic or configured tunnelling of IPv6 over IPv4 [17].",
      "chunk_type": "general",
      "cross_references": [
        "figure_5-3"
      ]
    },
    {
      "chunk_id": "ts_23.221_5.3",
      "section_id": "5.3",
      "section_title": "Address management",
      "content": "A 3GPP network may be implemented as a number of logically separate IP networks which contain different parts of the overall system. Each of these elements is referred to as an \"IP Addressing Domain\". Within an \"IP Addressing Domain\" it is required that the nodes within the domain are part of a consistent non-overlapping IP-address space. It is also required that IP packets may be routed from any node in the domain to any other node in the domain using conventional IP routing. In a real implementation an IP Addressing Domain may be a physically separate IP network or an IP VPN.\nIP Addressing Domains may be interconnected at various points. At these points of interconnect gateways, firewalls or NATs may be present. It is not guaranteed that IP packets from one IP Addressing Domain can be directly routed to any interconnected IP Addressing Domain. Rather inter-Domain traffic may be handled via firewalls or tunnels. This implies that different IP Addressing Domains can have different (and possibly overlapping) address spaces.\nFigure 5-4 below shows an example of the IP Addressing Domains involved in PS-domain and IP-subsystem services.\nFigure 5-4: IP Addressing Domains Involved In PS-Domain and IM Services\nThough 3GPP networks can use different IP Addressing Domains as shown above, it is possible that several different IP Addressing Domains fall under a common co-operative management regime. In this case the different IP Addressing Domains may be implemented as a single administrative domain at the operator's discretion, thus using a common IP-address space.\nA UE accessing services in either an IM subsystem, the Internet, or an external Intranet, or a combination of these service domains within the same IP network, requires an IP address that is part of the target network's IP Addressing Domain. For each of these IP networks, the IP address is linked to a specific PDP or EPS Bearer context, or set of PDP or EPS Bearer contexts sharing this IP address via a single APN.\nWhen the UE establishes the PDP or EPS Bearer context to access an IP network, it may use an existing PDP or EPS Bearer context if it has an active context with a compatible IP addressing domain and quality of service profile.",
      "chunk_type": "general",
      "cross_references": [
        "figure_5-4"
      ]
    },
    {
      "chunk_id": "ts_23.221_5.4",
      "section_id": "5.4",
      "section_title": "IP addressing and routing for access to IM-subsystem services",
      "content": "This clause deals with a UE accessing IM CN subsystem services via EPS or GPRS.\nA UE accessing IM CN Subsystem services requires an IP address that is logically part of the IM CN subsystem IP Addressing Domain. This is established using an appropriate PDP or EPS Bearer context. It is possible to connect to a P‑GW/GGSN either in the VPLMN or the HPLMN. For routing efficiency this context may benefit from being connected through a P‑GW/GGSN in the visited network. The connection between the UE and the IM CN subsystem (where the P‑GW/GGSN is either in the Home or the Visited network) is shown below:\nFigure 5-5: UE Accessing IM Subsystem Services with P-GW/GGSN in the Visited network via Visited Network IM subsystem\nFigure 5-5a.1: UE Accessing IM Subsystem Services with P-GW/GGSN in the Visited network\nFigure 5-5a: UE Accessing IM CN subsystem Services with P-GW/GGSN in the Home network\nThe ability of the User plane and the Control Plane for a single IMS session being able to pass through different P‑GWs/GGSNs is not defined in this release.",
      "chunk_type": "general",
      "cross_references": [
        "figure_5-5"
      ]
    },
    {
      "chunk_id": "ts_23.221_5.5",
      "section_id": "5.5",
      "section_title": "Simultaneous access to multiple services",
      "content": "A UE can have multiple services active simultaneously. When the services are part of different IP addressing domains, separate EPS Bearer or PDP contexts and IP addresses are required. The UE shall support multiple IP addresses when simultaneous EPS Bearer or PDP contexts are activated that require separate IP addresses for different addressing domains.\nFigure 5-6 shows an example of a connection between a UE and an Internet/Intranet service that is not available in the Visited Network with a simultaneous connection to the Visited Network's IM Subsystem. In this example, there may be two IPv6 addresses allocated, or one IPv4 address allocated for internet/Intranet access and oneIPv6 address for IM subsystem access.\nFigure 5-6: UE Accessing Home Internet/Intranet Services and Visited Network IM CN Subsystem Services",
      "chunk_type": "requirement",
      "cross_references": [
        "figure_5-6"
      ]
    },
    {
      "chunk_id": "ts_23.221_5.6",
      "section_id": "5.6",
      "section_title": "UE support of IPv6",
      "content": "The set of IPv6 functionality a 3GPP UE will require is dependent on the services (IMS, Packet Streaming etc.) it will use.\nAs a minimum, a 3GPP UE shall comply with the Basic IP group of specifications as defined in RFC 3316 [21]. This IPv6 functionality is sufficient to provide compatibility towards IPv6 entities external to 3GPP. The 3GPP UE should support RFC 4941 [17a] and it should use RFC 4941 when choosing an interface identifier to generate the full IPv6 address for the initial generation process.\nA 3GPP UE shall follow the recommendations for the IP Security set of functions in RFC 3316 [21] when a specific service requires such functions.\nAccording to the procedures defined in TS 23.060 [2] and in TS 23.401 [27], when a UE is assigned an IPv6 prefix, it can change the global IPv6 address it is currently using via the mechanism defined in RFC 4941 [17a], or similar means, without updating the PS domain. Any application that requires full IP address knowledge shall provide a mechanism to get the latest IPv6 address when the IPv6 address in the UE has been changed. An example of such means is defined in TS 23.228 [11].\nNOTE 1:\tRFC 3316 [21] does not make any recommendations on preferred transition and interoperability mechanisms between IPv4 and IPv6.\nNOTE 2:\tAn application may inhibit the use of RFC 4941 mechanisms for privacy but the mechanism to do this is not specified.",
      "chunk_type": "requirement",
      "cross_references": [
        "ts_23.060",
        "ts_23.401",
        "ts_23.228"
      ]
    },
    {
      "chunk_id": "ts_23.221_5.7",
      "section_id": "5.7",
      "section_title": "IP addressing and routing for server/application",
      "content": "This clause deals with IP addressing for the UEs for communication between UEs and specific servers/applications (e.g. for servers/applications for MTC).\nFigure 5.7-1: UE accessing server/application outside of the PLMN\nUEs accessing services in either the Internet, or an external Intranet, or a combination of these service domains within the same IP network, require IP addresses that are routable between the P-GW/GGSN and the Server/Application. The mechanism for IP addressing scheme used for GPRS and EPS is described in TS 29.061 [37].",
      "chunk_type": "general",
      "cross_references": [
        "figure_5.7-1",
        "ts_29.061"
      ]
    },
    {
      "chunk_id": "ts_23.221_6.1",
      "section_id": "6.1",
      "section_title": "Introduction",
      "content": "From a Mobility Management point of view, the CN encompasses two domains, a CS domain and a PS domain. The UTRAN and the GERAN can be connected either to both these CN domains or to one of the CN domains. The E-UTRAN connects with the PS domain only.\nA single RRC connection (between RAN and UE) shall carry all user plane and signalling flows to/from a UE. This is regardless of where in the CN they originate/terminate.\nThe 3GPP specifications for UTRAN and GSM in Iu mode shall support compatibility with GSM networks in A/Gb mode from the point of view of roaming and handover. The 3GPP specifications for EPS support compatibility with GSM networks and with UMTS from the point of view of roaming and handover. For the LM/MM functionality point of view this implies among other things the following:\na)\tIMSI shall be used as the common user identity in the two CN domains;\nb)\tcommon MAP signalling is applied to networks supporting either Iu or A/Gb mode or both.\nc)\tradio network parameters and radio resource management should be isolated in the RAN.\nThe LM/MM techniques used should minimise radio resource usage of the RAN.",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.221_6.2.1",
      "section_id": "6.2.1",
      "section_title": "Non-combined procedures",
      "content": "From a LM/MM point of view, the CN consists of two domains, a CS domain and a PS domain or one of these domains.\nEach domain has its own service state machine. An UE, that is supporting both CS services and PS services, has a CS service state machine and a PS service state machine. The two peers of the service state machine are working independently to each other, although associated to the same UE. The UE-CN signalling aims to keep the peer entities synchronised.\nAs an introduction, figure 6.1 gives an overview of the UE registration and connection principles for the CN consisting of two separate PS and CS service nodes.\nFigure 6.1: Overview of the UE registration and connection principles\nThe CN consists of both a CS domain with MSC/VLR, 3G_MSC/VLR, as the main serving node and an PS domain with SGSN/GGSN, 3G_SGSN, 3G GGSN, MME, S-GW and P-GW as the main serving nodes.\nThe main PS service states are PS-DETACHED, PS-IDLE and PS-CONNECTED. The main CS service states are CS‑DETACHED, CS-IDLE and CS-CONNECTED. For the respective domain there are specific related MM system information controlling the MM functionality of the UE.\nWhen the UE is attached to PS it may be registered with SGSN and MME in parallel.\nThe aim of the RAN is to offer one unified set of radio bearers which can be used for bursty packet traffic and for traditional telephony traffic. Therefore, only one logical control channel structure is used for all kind of traffic. The radio resource handling is RAN internal functionality and the CN does not define the type of radio resource allocated.\nThe UTRAN and the E-UTRAN Radio Resource Control (RRC) has two modes, RRC Connected mode and RRC Idle mode. The RRC mode describes which identity is used to identify the UE. In RRC Idle mode the UE is identified by a CN associated identity. In RRC Connected mode the UE is assigned a Radio Network Temporary Identity to be used as UE identity on common transport channels. When the UE is allocated dedicated UTRAN transport channels, it uses the inherent addressing provided by these transport channels.\nIn PS-CONNECTED state the UE is in RRC Connected mode. In CS-CONNECTED state the UE is in RRC Connected mode.\nFor the mobility functionality, different area concepts are used. Tracking Areas (TAs), Location Areas (LAs) and Routing Areas (RAs) are used in the CN. UTRAN Registration Areas and Cell Areas are used in the Iu based RAN. LAs are related to CS services. TAs and RAs are related to PS services.\nWhen \"Intra Domain Connection of RAN Nodes to Multiple CN Nodes\" is not used, one LA is handled by one CN node. With \"Intra Domain Connection of RAN Nodes to Multiple CN Nodes\" one LA may be handled by multiple CN nodes. For an UE that is registered in a LA, this implies that the UE is registered in the specific CN node handling this specific LA.\nWhen \"Intra Domain Connection of RAN Nodes to Multiple CN Nodes\" is not used, one RA is handled by one CN node. With \"Intra Domain Connection of RAN Nodes to Multiple CN Nodes\" one RA may be handled by multiple CN nodes. One TA may be handled by multiple CN nodes. For an UE that is registered in a TA or RA, this implies that the UE is registered in the specific CN node handling this specific TA or RA.\nLA is used by the 3G_MSC/VLR for paging the UE. RA is used by the SGSN for paging the UE. TA is used by the MME for paging the UE. UTRAN Registration Areas and Cell Areas are only visible in the UTRAN and used in RRC-Connected mode. The relations between LA, TA and RA are described in clause 4.3.2.\nIn RRC Idle mode it is the broadcast MM system information (e.g. information about the present LA, present TA or present RA) that determines when the UE initiates a location registration procedure towards the CN. An UE crossing an LA border, in state CS-IDLE and RRC Idle mode, shall initiate LA update towards the MSC. An UE crossing an RA border, in state PS-IDLE and RRC Idle mode, shall initiate RA update towards the SGSN. An UE crossing a TA border to a TA that is not registered with the MME, in state ECM Idle or ECM Connected, shall initiate TA update towards the MME.\nIn UTRAN RRC Connected mode, the UE receives the MM system information on the established RRC connection. (i.e. the broadcast MM system information is not used by the UE in the UTRAN RRC connected mode). In E-UTRAN RRC Connected mode, the UE receives the broadcast MM system information and uses it. An UE receiving information indicating a new LA, in state CS-IDLE and RRC Connected mode, shall initiate LA update towards the MSC. An UE receiving information indicating a new RA, in state PS-IDLE and RRC Connected mode, shall initiate RA update towards the SGSN. An UE receiving information indicating a new TA that is not registered with the MME shall initiate TA update towards the MME. An UE in state CS-CONNECTED and RRC Connected mode, shall not initiate LA update towards the CN.\nIn CS-DETACHED mode the UE shall not initiate any LA update and this independent of the RRC mode. In PS-DETACHED mode the UE shall not initiate any TA or RA updates and this independent of the RRC mode.\nIn addition to normal location registration when changing registration area, the UE may (network options) perform CS periodic registration when in CS-IDLE state and PS periodic registration when in PS-IDLE state. The respective periodic registration may be on/off on LA respective TA or RA level.\nOn the MM level, IMSI and CS related TMSI are used as UE identities in the CS domain, and IMSI and PS related TMSI are used as UE identities in the PS domain. The IMSI is the common UE identity for the two CN domains (CS and PS).\nA signalling connection between the UE and the CN refers to a logical connection consisting of an RRC connection between UE and RAN and an Iu or S1 signalling connection between the RAN and the CN node. The CS domain related signalling between RAN and CN applies to UTRAN only. The CS domain related signalling and PS domain related signalling uses one common RRC connection and two Iu signalling connections (\"two RANAP instances\"), i.e. one Iu signalling connection for the CS domain and one Iu signalling connection for the PS domain.",
      "chunk_type": "procedure",
      "cross_references": [
        "clause_4.3.2",
        "figure_6.1"
      ]
    },
    {
      "chunk_id": "ts_23.221_6.2.2",
      "section_id": "6.2.2",
      "section_title": "Use of combined procedures",
      "content": "The use of separated PS and CS mobility mechanisms within the UE and within the CN can lead to non-optimal usage of the radio resource (for example a UE in PS idle and CS idle state would perform both LA updates (for the CS mechanism) and TA or RA updates (for PS mechanisms)).\nTo offer flexibility in the provision of MM , combined mechanisms can be used for LM purposes as well as for attach/detach status purposes.\nA UE can perform combined update mechanisms. A CN should allow combined update operations (operator option). UEs should support the use of both combined and separate mechanisms.\nNOTE:\tThe support of this feature by all UEs will also ease evolution of MM in the future.\nThe RAN does not co-ordinate MM procedures that are logically between the CN and the MS. This includes: LM, authentication, temporary identity management and equipment identity check.",
      "chunk_type": "procedure",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.221_6.3.1",
      "section_id": "6.3.1",
      "section_title": "Introduction",
      "content": "For the mobility functionality five different area concepts are used. LA and RA in the CN as well as UTRAN Registration Area, GERAN Registration Area and Cell areas in the RAN.",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.221_6.3.2",
      "section_id": "6.3.2",
      "section_title": "Location areas",
      "content": "For CS services, the CN uses LA. LA is used e.g. at CN initiated paging related to CS services. A CS service related temporary identity, CS –TMSI, may be allocated to the UE. This temporary identity is then unique within a LA.",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.221_6.3.3",
      "section_id": "6.3.3",
      "section_title": "Tracking and Routing areas",
      "content": "For PS services, the CN uses TA or RA. TA or RA is used e.g. at CN initiated paging related to PS services. A PS service related temporary identity, P-TMSI or S-TMSI, may be allocated to the UE. The P-TMSI is then unique within an RA. The S-TMSI is then unique within one or multiple TAs.\n6.3.3a\tSupport of Iu and A/Gb mode of operation in GERAN Cells\n6.3.3a.1\tOverview\nA GERAN capable cell may belong to the same LA/RA for both modes of operation (figure 6.2a). In the case of a combined CN node supporting both Iu and A/Gb mode MSs, a single LA/RA identity for MSs in either mode shall be broadcasted in the cell since the same LAI and RAI will be used in both modes of operation.\nFigure 6.2a: Combined Iu/A/Gb Cell with Combined CN nodes\nIt is also possible for GERAN capable cell to support both A/Gb and Iu mode of operation without any restriction on combined CN nodes (figure 6.2b). In order to support this GERAN capable cells need to support the possibility to broadcast both LA/RA identities for MSs in Iu mode and for MSs in A/Gb mode. The existing LAI/RAI will be used for mobiles operating in A/Gb mode while the LAI/RAI for Iu mode will be used for mobiles operating in Iu mode. The reason for this is that the LA and RA cannot in this case overlap the both CNs.\nFigure 6.2b: Combined A/Gb/Iu Cell\n6.3.3a.2\tInterface selection in GERAN Cells\nThe MS shall be able to derive the mode supported in cell from the information broadcasted.\nThe support of different modes of operation in the MS shall be indicated in the MS Classmark and/or the MS Radio Access Capabilities.\n6.3.3a.2.1\tBasic principles for MS controlled Cell/Mode selection/re-selection\nThe procedures for MS controlled cell selection/re-selection are done according to UMTS/GSM principles and procedures outlined in TS 25.304 [19] and TS 45.008 [20]. This means that a GERAN cell will be selected regardless which mode it supports. The cell selection is based on radio criteria and not service.\nIf a GERAN cell is selected and it is both Iu and A/Gb capable, an Iu and A/Gb capable mobile station shall select Iu mode of operation by default.\nNOTE:\tThe above text outlines the default mechanism of mode of operation selection and does not prohibit the introduction of a more flexible solution, which avoids unnecessary mode of operation changes, at a later stage\n6.3.3a.2.2\tBasic principles for network controlled Mode selection/re-selection\nThe procedures for network-controlled cell selection/re-selection are done according to UMTS/GSM principles. When a cell/mode change is ordered by the network, the mode of operation to apply will be indicated by the network.",
      "chunk_type": "general",
      "cross_references": [
        "figure_6.2",
        "ts_25.304",
        "ts_45.008"
      ]
    },
    {
      "chunk_id": "ts_23.221_6.3.4",
      "section_id": "6.3.4",
      "section_title": "RAN internal areas",
      "content": "RAN internal areas are used by the UTRAN when the terminal is in RRC-Connected mode (see clause 6.7). The areas are used at e.g. RAN initiated paging. RAN internal area updating is a radio network procedure and the RAN internal area structure should not be visible outside the RAN. In RRC connected mode, the UE position is known on cell level or on URA/GRA level. RNTI is used as a temporary UE identifier used within the RAN and allocated at RRC connection establishment.",
      "chunk_type": "general",
      "cross_references": [
        "clause_6.7"
      ]
    },
    {
      "chunk_id": "ts_23.221_6.3.5",
      "section_id": "6.3.5",
      "section_title": "Relationship between the different areas",
      "content": "The following area relations exist (see figure 6.3):\n-\tthere need not be any relation between URA/GRA and LA respectively between URA/GRA and RA. The URA concept is defined in TS 25.331 [5] and the GRA concept is defined in TS 43.051 [12];\n-\tone RA consists of a number of cells belonging to RNCs that are connected to the same CN node;\n-\tone LA consists of a number of cells belonging to RNCs that are connected to the same CN node;\n-\tone TA consists of a number of cells belonging to eNodeBs that are connected to the same CN node;\n-\tone RA is handled by only one CN serving node, i.e. one combined MSC+SGSN or one 3G_SGSN, unless \"Intra Domain Connection of RAN Nodes to Multiple CN Nodes\" is used;\n-\tone LA is handled by only one CN serving node, i.e. one combined MSC + SGSN or one 3G_MSC/VLR, unless \"Intra Domain Connection of RAN Nodes to Multiple CN Nodes\" is used.\nThere is no relation between TAs and LA/RAs. However, related configurations may be useful for certain services, e.g. for CS Fallback.\nThe GSM defined relations between LA and RA applies i.e. the following relations between LA and RA are possible:\n-\tRA and LA is equal;\n-\tone RA is a subset of one, and only one, LA, meaning that a RA do not span more than one LA.\nThe mapping between one LA and RNCs is handled within the MSC/VLR owning this LA. The mapping between one RA and RNCs is handled within the SGSN owning this RA. The mapping between LA and cells respective between RA and cells is handled within RNC.\nFigure 6.3: Relationship between different areas\n6.3.5a\tRestriction of subscribers' access\nOperators shall be able to restrict their subscriber's access between E-UTRAN, GERAN and UTRAN radio access, via administrative procedures based on subscription information.\nIn order for the restriction to apply, the network cells shall be organized so that each LA and RA contains either UTRAN or GERAN cells only. TAs apply to E-UTRAN only. Based on the subscription information and the LA/RA/TA information available in the VLR/SGSN/MME, subscriber's access may be rejected during LA/RA/TA update procedure.\nNOTE:\tIn order for this feature to work, both serving and home network operators need to have configured the feature.\nFigure 6.3a: Example scenario between different areas for restriction\nThe HSS/HLR shall provide the MSC/MSC server/VLR, SGSN and MME with the following information about the subscriber's GERAN and UTRAN access restriction set by the operator determined e.g. by subscription scenario and roaming scenario, as specified in TS 23.008 [24]:\n-\tGERAN not allowed.\n-\tUTRAN not allowed.\nIn addition, the HSS/HLR shall provide SGSN and MME with the following information about the subscriber's E-UTRAN access restriction set by the operator determined e.g. by subscription scenario and roaming scenario, as specified in TS 23.008 [24]:\n-\tWB-E-UTRAN not allowed.\n-\tNB-IoT not allowed.\nIf roaming restriction to specific RATs needs to be enforced by the VPLMN, the SGSN and MME may be configured with a list of HPLMN IDs that are not allowed to access that RAT.\nThe UE shall be notified of the access restriction using the existing procedures for rejection of Location Update, Routing Area Update, Tracking Area Update and Attachment, as defined in TS 24.008 [25] and TS 24.301 [34] and the existing cause values for these procedures.",
      "chunk_type": "general",
      "cross_references": [
        "figure_6.3",
        "ts_25.331",
        "ts_43.051",
        "ts_23.008",
        "ts_24.008",
        "ts_24.301"
      ]
    },
    {
      "chunk_id": "ts_23.221_6.3.6",
      "section_id": "6.3.6",
      "section_title": "Hierarchical tracking concept",
      "content": "This concept applies to UTRAN access only. A packet UE (in RRC connected mode) is tracked at the cell level by RNC during an active connection.\nA packet UE (in RRC connected mode) is tracked at the URA level by RNC when no data are actively transfer, and the probability of data transfer is quite high.\nA packet UE (in PS-Idle state) is tracked at the RA level by SGSN when no data is actively transferred and the probability of data transfer is quite low. The network operator can optimise paging and updating load by controlling the size of the different areas and the probability of data transfer (controlled by the RRC_connection_release timer). For example, one operator can decide that URA/GRA are small, and that RRC connection are released after a relatively short time of inactivity, so that most attached packet UE are tracked in the RA level (optimum for packet UE mainly using client-server type of service).\nAnother operator can decide that URA/GRA are large, and that RRC connection are released only if RRC connection is lost, so that most attached packet UE are tracked at the URA level.\nThe procedure for the releasing of the RRC connection can be found in TS 23.060 [2] under the Iu release procedure. The URA update procedures can be found in TS 25.331 [5] and GRA update procedures can be found in TS 43.051 [12].",
      "chunk_type": "general",
      "cross_references": [
        "ts_23.060",
        "ts_25.331",
        "ts_43.051"
      ]
    },
    {
      "chunk_id": "ts_23.221_6.4",
      "section_id": "6.4",
      "section_title": "Relationship between MM and SM states for an UE",
      "content": "When a UE is attached to PS service, it may have, but need not have, some EPS Bearer/PDP context established with GERAN or UTRAN Access. With E-UTRAN access a PS attached UE has at least one EPS Bearer context established.\nIf the UE has no EPS Bearer/PDP context established (SM-Inactive), no radio access bearer are established for PS service. The UE is in RRC connected mode, only if the state is CS-CONNECTED state or PS-CONNECTED state (i.e. only a PS signalling connection is established).\nIf the UE has at least one EPS Bearer/PDP context established (SM-Active), the UE can be in PS-CONNECTED state or in PS-IDLE state.\nNOTE:\tThe EPS Bearer/PDP context status is not modified by the release of the RRC connection, except if the release of the connection is due to an RRC failure which do not permit to maintain the negotiated QoS (e.g. a real time connection).",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.221_6.5",
      "section_id": "6.5",
      "section_title": "Requirement in case of temporarily loss of coverage of packet UE",
      "content": "A packet attached UE using non-real time bearer shall not lose its EPS Bearer/PDP context in case of temporarily loss of coverage. Within the network, it shall be possible to use timers to detect when a UE has been out of coverage for a long period of time and, dependent upon operator policy, to then remove unused EPS Bearer/PDP context(s).",
      "chunk_type": "requirement",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.221_6.6",
      "section_id": "6.6",
      "section_title": "MM functionality in different UE service states",
      "content": "CS service states and related MM functionality:\n-\tCS-DETACHED: The UE is not reachable by the network for CS services. The UE does not initiate LA updates at LA changes and no periodic CS service updates;\n-\tCS-IDLE: The UE is reachable by paging for CS services. The UE initiates LA updates at LA changes. The UE may initiate periodic CS service updates and this depends on the CS periodic update state of the present LA;\n-\tCS-CONNECTED: The UE has a signalling connection for CS services established between the UE and the CN. The UE does not initiate LA update (even not when the present LA changes) and no periodic CS service updates.\nPS service states and related MM functionality:\n-\tPS-DETACHED: The UE is not reachable by the network for PS services. The UE does not initiate TA/RA updates at TA/RA changes and no periodic PS service updates;\n-\tPS-IDLE: The UE is reachable by paging for PS services. The UE initiates TA/RA updates at TA/RA changes. The UE may initiate periodic PS service updates and this depends on the PS periodic update state of the present TA/RA;\n-\tPS-CONNECTED: The UE has a signalling connection for PS services established between the UE and the CN. The UE initiates TA/RA update when RAI in MM system information changes. No periodic PS service updates.\nThere can also be a NULL state. In the UE, this state corresponds to power off or possibly a \"no SIM\" condition. In the CN, the NULL state correspond to CS-DETACHED and PS-DETACHED.\nFor each state transition there can be several events that triggers the transition. Some of them are described below.\nNOTE:\tSome of these can coincide, e.g. moving from CS-IDLE to CS-DETACHED and moving from PS-IDLE to PS‑DETACHED.\nMoving from CS-IDLE to CS-CONNECTED:\nThe state transition from CS-IDLE to CS-CONNECTED is performed when a signalling connection is established between UE and CN for CS services. In GSM this state transition is triggered by the message CM_SERVICE_REQUEST or PAGE_RESPONSE.\nMoving from CS-CONNECTED to CS-IDLE:\nThe state transition from CS-CONNECTED to CS-IDLE is performed when the signalling connection for CS services is released, e.g. at call release and no other CS service is ongoing. A radio link failure can also trigger this state transition.\nMoving from CS-IDLE to CS-DETACHED:\nThe transition from CS-IDLE to CS-DETACHED can be triggered by some action from the user of the UE but an expiring timer in the network could also trigger it. The UE is marked as CS_DETACHED in the CN and then as a consequence no CS service establishment is possible.\nMoving from PS-IDLE to PS-CONNECTED:\nThe state transition from PS-IDLE to PS-CONNECTED is performed when a signalling connection is established between UE and CN for PS services.\nMoving from PS-CONNECTED to PS-IDLE:\nThe state transition from PS-CONNECTED to PS-IDLE is performed when the signalling connection for PS services is released, e.g. at release of a PS service, no other PS service is ongoing and at release of the RRC connection in case of very low level of activity. A radio link failure can also trigger this state transition.\nMoving from PS-IDLE to PS-DETACHED:\nThe transition from PS-IDLE to PS-DETACHED can be triggered by some action from the user of the UE but an expiring timer in the network could also trigger it. The UE is marked as PS_DETACHED in the CN and then as a consequence no PS service establishment is possible.",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.221_6.7",
      "section_id": "6.7",
      "section_title": "The RRC state machine",
      "content": "The UTRAN RRC state machine is a description model of how the UE and the RAN co-operate regarding RRC functionality. The RRC state describes the state of the UE in the RAN. Here follows a brief description of the UTRAN RRC state machine, for more information see TS 25.301 [6] and TS 25.303 [7]. The E-UTRAN RRC state machine is described in TS 36.331 [29].\nNOTE:\tRRC idle mode and RRC connected mode refer to the UE idle mode and UE connected mode respectively in TS 25.301 [6] and TS 25.303 [7].\nThe RRC state machine exists as peer entities, one in the UE and one in RAN. Apart from transient situations and error cases they are synchronised. Figure 6.4 illustrates the main modes/states of the RRC state machine.\nFigure 6.4: RRC modes, main RRC states and main mode/state transitions\nRRC-Idle_mode:\nIn the Idle mode there is no connection established between UE and RAN. There is no signalling between RAN and the UE except for system information that is sent from RAN down link on a Broadcast channel to the UE. The UE can also receive paging messages with a CN identity on the PCH. There is no information on the UE stored in RAN in this state.\nRRC-Connected_mode:\nIn the Connected mode the main states are Cell Connected state and URA connected state. In this mode there is one RNC that is acting as Serving RNC (SRNC), and an RRC connection is established between the UE and this SRNC.\n-\tWhen the UE position is known on cell level, the UE is in the cell connected state. When in cell connected state, the RRC connection mobility is handled by handover procedures.\n-\tWhen the UE position is known on URA level, the UE is in the URA connected state. The URA contains a set of cells. URA updating procedures provides the mobility functionality in this state. In URA connected state no dedicated radio resources are used.",
      "chunk_type": "general",
      "cross_references": [
        "figure_6.4",
        "ts_25.301",
        "ts_25.303",
        "ts_36.331"
      ]
    },
    {
      "chunk_id": "ts_23.221_6.8",
      "section_id": "6.8",
      "section_title": "Relationship between CS and PS service states and RRC state for an UE",
      "content": "This clause describes the relationship for the UTRAN. In E-UTRAN the RRC operates for PS services only despite some extensions for supporting the provision of CS services via GERAN/UTRAN.\nDuring non-transient conditions the following relations are valid between service states and RRC modes for an UE:\n-\twhen in either CS-CONNECTED state or PS-CONNECTED state, or in both CS-CONNECTED state and PS-CONNECTED state, then the UE is in RRC connected mode;\n-\twhen in neither CS-CONNECTED state nor PS-CONNECTED state, then the UE is in RRC idle mode.\nFigure 6.5 and figure 6.6 illustrate two examples on the relations between the UTRAN RRC states and CS/PS service states.\nFigure 6.5: UE in CS-CONNECTED state and PS-IDLE state\nFigure 6.6: UE in CS-IDLE state and PS-DETACHED state",
      "chunk_type": "general",
      "cross_references": [
        "figure_6.5",
        "figure_6.6"
      ]
    },
    {
      "chunk_id": "ts_23.221_6.9.1",
      "section_id": "6.9.1",
      "section_title": "Introduction",
      "content": "Service registration (attach) in the respective CN domain is done initially (after UE being detached due to e.g. power off). When a registration area is changed a location update is performed. In addition, periodic registration can be performed. Here follows descriptions of when the respective CN registration area is changed.\nNOTE:\tIt is not here defined which different registration procedures that are needed.",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.221_6.9.2",
      "section_id": "6.9.2",
      "section_title": "Location area update",
      "content": "LA update is initiated by the UE to inform the CS domain of the CN that the UE has entered a new LA. In case the new LA is in an area served by another CN node, the LA update also triggers the registration of the subscriber in the new CN node and a location update for CS services towards the HLR/HSS.\nLA update is only initiated by the UE when the UE is in state CS-IDLE, and this independently of the PS state. If the UE is CS-IDLE but RRC connected, which means that the UE is in PS-CONNECTED state, LA update is initiated by the UE when it receives information indicating a new LA.",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.221_6.9.3",
      "section_id": "6.9.3",
      "section_title": "Tracking and Routing area update",
      "content": "TA/RA update is initiated by the UE to inform the PS domain of the CN that the UE has entered a new TA/RA. In case the new TA/RA is in an area served by another CN node, the TA/RA update also triggers the registration of the subscriber in the new CN node and a location update for PS services towards the HSS.\nTA/RA update is initiated by the UE when the UE is in state PS-IDLE, and this independently of the CS state. If the UE is PS-IDLE but UTRAN RRC connected, which means that the UE is in CS-CONNECTED state, RA update is initiated by the UE when it receives information indicating a new RA.\nWhen the UE is in PS-CONNECTED state the UE initiates TA/RA update when TAI/RAI in MM system information changes.",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.221_6.9.4",
      "section_id": "6.9.4",
      "section_title": "Combined updates",
      "content": "The GSM radio interface combined procedures and their support via the Gs interface is the starting point for the support of combined updates. With E-UTRAN access combined update procedures may be used by MME and MSC.",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.221_6.10",
      "section_id": "6.10",
      "section_title": "Paging initiated by CN",
      "content": "A CN node requests paging only for UE in CS-IDLE state or PS IDLE state. Paging from a CN node is done independent of the service state of the UE in the other CN domain type.\nCS and PS paging is co-ordinated within the UTRAN. Details on how the co-ordination is achieved and the parameters to be provided by the CN are specified in TS 25.413 [9]. The procedures required between the UTRAN and UE are in TS 25.331 [5].",
      "chunk_type": "general",
      "cross_references": [
        "ts_25.413",
        "ts_25.331"
      ]
    },
    {
      "chunk_id": "ts_23.221_6.11",
      "section_id": "6.11",
      "section_title": "Signalling connection establishment",
      "content": "A signalling connection between the UE and a CN node refers here to a logical connection consisting of an RRC connection between UE and the RAN and an S1 or Iu signalling connection between the RAN and the CN node. The signalling connection is used for transfer of higher layer (MM, CM) information between the UE and the CN node.\nAt a service request to one of the CN domain types and when no such connection exists towards the applicable CN domain type, the UE shall request establishment of a new signalling connection.\nIf no RRC connection exists, this is established in conjunction with (before) the transfer of the signalling establishment request. At the RRC connection establishment, an UE context is built up in the SRNC.\nIf an RRC connection is already established, the UE shall send the signalling establishment request using that RRC connection.\nAt reception of the signalling establishment request, the RAN will establish an S1 or Iu connection towards the CN node indicated by the CN service domain type received from UE.\n6.11a\tCS Domain Signalling Requirements (in particular relating to handover)\nCorrect operation of the Call Control, Mobility Management and Call Independent Supplementary Service protocols requires that downlink messages from the MSC shall be delivered in the correct order and shall not be lost, duplicated or delivered in error.\nThe RAN and Iu/A interfaces shall provide this functionality in all cases except for when the Iu/A interface SCCP connection is being changed, e.g. at SRNS relocation or inter-BSC (external) handover.\nWhen the SCCP connection is being changed, the MSC shall buffer downlink CC, MM and CISS messages. Specifically, the MSC shall buffer messages from these protocols after transmission of a (BSSMAP) Handover Command or RANAP-Relocation Command message and until receipt of a Handover Complete, Relocation Complete, Handover Failure or Relocation Cancel message.\nIn the uplink, the UE is responsible for delivering the CS domain messages across the radio interface. Once the message has been received by part of the network, it is the network's responsibility to deliver the message to the MSC. This can result in duplicate message delivery to the CN. The RAN shall ensure that the protocol used between UE and RAN permits any duplicate messages that are delivered to the CN, to be correctly discarded by N(SD) mechanism specified in TS 24.007 [22] for the uplink CC, MM and CISS messages.",
      "chunk_type": "general",
      "cross_references": [
        "ts_24.007"
      ]
    },
    {
      "chunk_id": "ts_23.221_6.12",
      "section_id": "6.12",
      "section_title": "Relations between SRNS relocation and location registration",
      "content": "This clause clarifies the need for separate handling of MM registration area (LA and RA) information in RRC idle mode respective in RRC connected mode. The following example illustrates relations between SRNC relocation, registration area (LA/RA) change and LA/RA updates. As shown in the example, this is equally applicable for a combined MSC + SGSN as well as the 3G-MSC/VLR and 3G-SGSN.\nNOTE 1:\tThe example is based on the assumptions that one RNC can set up Iu connections to only one 3G_MSC/VLR (or combined MSC+SGSN) and only one 3G_SGSN (or combined MSC+ SGSN), and that the CN node is configured to only send page to the RNC(s) that is controlling cells within the relevant LA/RA.\nPreconditions (see figure 6.7):\n-\tLA1 is handled by 3G_MSC/VLR1 and LA2 is handled by 3G_MSC/VLR2 ;\n-\tRA1 is handled by 3G_SGSN1 and RA2 is handled by 3G_SGSN2 ;\n-\tUE is registered in LA1 in 3G_MSC/VLR1 and in RA1 in 3G_SGSN1;\n-\tthe UE is in PS-CONNECTED state and a signalling connection exists between UE and 3G_SGSN1;\n-\tthe UE is in CS-IDLE state and no signalling connection exists between UE and 3G_MSC/VLR1;\n-\tRNC1 is acting as SRNC and RNC2 is acting as DRNC;\n-\tUE is in RRC cell connected state and with dedicated channels established to cells within both RNC1 and RNC2. UE does not listening to the PCH;\n-\tthe registration area information sent to the UE indicates LA1 and RA1.\nThe UE can always (at least in normal working states) identify the present available registration area (LA respective RA) associated with the respective CN domain. The determination of the present area differs depending on the state of the UE. For UE in RRC idle mode (UE with no ongoing communication with the network) it is the cell selection mechanism in the UE that is used. For UE in RRC connected mode it is the RAN that determines the area (although a change can implicit be initiated by the UE).\nFigure 6.7: Illustration of the preconditions in the described example\nIn figure 6.7 MSC stands for 3G_MSC/VLR and SGSN for 3G_SGSN.\nThe UE moves now further towards the right, leaving the coverage area of cells controlled by RNC1, and resulting in that the UE has dedicated channel(s) established to cell(s) within only RNC2. This can result in the following sequence of events:\n-\tthe SRNC (RNC1) can decide to perform an SRNC relocation resulting in that the RNC2 becomes SRNC. In this example, the change of SRNC also implies a change of SGSN with an update of the UE location registration for the PS domain;\n-\tafter this SRNC relocation or combined with this procedure, the MM registration area information sent to the UE is changed and indicates now LA2 and RA2;\nNOTE 2:\tThe MM registration area information need not be sent for every SRNS relocation, nor does it preclude MM registration area information being sent in other occasions.\n-\tthe UE initiates a LA update, which results in a registration change from LA1 in 3G_MSC/VLR1 to LA2 in 3G_MSC/VLR2 and results in changed MM registration information.\nNOTE 3:\tThe area information can not be changed to indicate LA2 unless SRNC relocation has been performed, because the LA update signalling is sent from the UE, by using the established RRC connection to SRNC, and then to the 3G_MSC/VLR to which the SRNC belongs.",
      "chunk_type": "general",
      "cross_references": [
        "figure_6.7"
      ]
    },
    {
      "chunk_id": "ts_23.221_6.13",
      "section_id": "6.13",
      "section_title": "Requirements on identifiers for UMTS and GSM",
      "content": "1a)\tThe format of the UMTS Location Area Identifier and UMTS TMSI shall not prevent a dual mode GSM-UMTS mobile which was last location updated over the GSM radio interface (i.e. has a GSM LAI and GSM TMSI), from performing a location update (or other signalling) over the UMTS radio interface to a UMTS MSC.\n1b)\tThe format of the UMTS Location Area Identifier and UMTS TMSI shall not prevent a dual mode GSM-UMTS mobile which was last location updated over the UMTS radio interface (i.e. has a UMTS LAI and UMTS TMSI), from performing a location update (or other signalling) over the GSM radio interface to a GSM MSC.\n1c)\tThe format of the UMTS Routing Area Identifier and UMTS P-TMSI shall not prevent a dual mode GSM‑UMTS mobile which was last routing area updated over the GSM radio interface (i.e. has a GSM RAI and GSM P-TMSI), from performing a routing area update (or other signalling) over the UMTS radio interface to a UMTS SGSN.\n1d)\tThe format of the UMTS Routing Area Identifier and UMTS P-TMSI shall not prevent a dual mode GSM‑UMTS mobile which was last routing area updated over the UMTS radio interface (i.e. has a UMTS RAI and UMTS P-TMSI), from performing a routing area update (or other signalling) over the GSM radio interface to a GSM SGSN.\n2)\tThe standard shall support means by which an operator can configure GSM and UMTS cells to be members of the same registration area (i.e. the mobile can receive paging from whichever cell it is camped on and does not need to location update (or routing update) just because the mobile has changed from a UMTS to a GSM cell).\n3a)\tThe standard shall support means by which an operator can allocate GSM and UMTS LAIs which enable GSM MSCs to be able to contact UMTS MSCs and vice versa.\n3b)\tThe standard shall support means by which an operator can allocate GSM and UMTS RAIs which enable GSM SGSNs to be able to contact UMTS SGSNs and vice versa.\n4)\tThe standard shall support means by which an operator can ensure that the IMSI does not need to be sent over the radio interface when the mobile station moves from a GSM cell to a UMTS cell (and vice-versa).\n5)\tThe standard shall support means by which an operator can ensure that the IMSI does not need to be sent over the radio interface when a USIM is moved from a UMTS mobile station to a GSM mobile station (and vice‑versa).\n6)\tThe standard need not support means by which an operator can ensure that the IMSI is not sent over the radio interface when a GSM SIM is moved from a GSM mobile station to a UMTS mobile station (and vice-versa).",
      "chunk_type": "parameter",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.221_6.14",
      "section_id": "6.14",
      "section_title": "Use of MM system information",
      "content": "In each cell the network broadcasts MM system information on the broadcast channel. . The \"current MM system information\" is used by the MM functionality in the UE respecting the rules for the UE service state of the respective MM state machine, see clause 6.6. The \"current MM system information\" is identified as follows:\n-\tIn RRC idle mode, when the UE camps on one cell, it receives all MM system information valid for this cell on the broadcast channel of the cell. The received MM system information is then the \"current MM system information\";\n-\tIn UTRAN RRC connected mode, the SRNS shall control the current MM system information valid for the UE. e.g. at SRNS relocation, the new SRNS may send applicable MM system information to the UE. The established RRC connection shall be used for transferring any new MM system information to the UE. The UE shall use any new MM system information received from the SRNC on the established RRC connection as the \"current MM system information\";\nNOTE:\tThe MM system information need not necessarily be sent for every SRNSs relocation, nor does it prelude MM system information being sent on other occasions.\n-\tIn E-UTRAN RRC connected mode, the UE receives all MM system information valid for this cell on the broadcast channel of the cell. The received MM system information is then the \"current MM system information\";\n-\tAt the RRC connection establishment, the UE uses the broadcasted MM system information of the cell where the establishment is made as the \"current MM system information\";\n-\tWhen the UE leaves the RRC connected mode and enters RRC idle mode, the UE uses the broadcasted MM system information of the chosen cell, which is determined by the UE idle mode cell selection/re-selection process that is then performed, as the \"current MM system information\".",
      "chunk_type": "general",
      "cross_references": [
        "clause_6.6"
      ]
    },
    {
      "chunk_id": "ts_23.221_6.15.1",
      "section_id": "6.15.1",
      "section_title": "Idle mode procedures",
      "content": "The signalling procedures shown in the following clauses do not represent the complete set of possibilities, nor do they mandate this kind of operation. This document specifies a set of elementary procedures for each interface, which can be combined in different ways in an implementation. Therefore these sequences are merely examples of a typical implementation. By default the combined procedures as defined in TS 23.060 [2] or TS 23.272 [30] are also applicable when using Gs or SGs.\nThe list of parameters should be regarded as examples of possible information carried by the messages and not as a complete list.",
      "chunk_type": "procedure",
      "cross_references": [
        "ts_23.060",
        "ts_23.272"
      ]
    },
    {
      "chunk_id": "ts_23.221_6.15.1.1",
      "section_id": "6.15.1.1",
      "section_title": "Location Area update",
      "content": "Figure 6.8 shows location registration when changing LA including change of 3G-MSC/VLR and when the UE is in MM idle state towards the 3G_MSC/VLR.\nThe illustrated transfer of MM signalling to/from the UE uses an established RRC connection. This RRC connection can have been established beforehand due to ongoing interwork between UE and 3G-SGSN or be established only for this location registration procedure towards the 3G_MSC/VLR.\nFor each indicated MM message sent in this case to/from UE, the CN discriminator indicates 3G_MSC/VLR.\nFigure 6.8: Interface information transfer for location update when changing VLR area\n1\tThe RRC connection is established, if not already done. The UE sends the initial message LA Update Request (old TMSI, old LAI, etc.) to the new 3G_MSC/VLR. The old TMSI and LAI are those that were assigned to the UE. The SRNS transfers the message to the 3G_MSC/VLR\nNOTE:\tThe sending of this message to 3G_MSC/VLR also implies establishment of a signalling connection between SRNS and 3G_MSC/VLR for the concerned UE.\nThe RAN shall add the RAC and the LAC of the cell where the message was received before passing the message to the MSC.\n2.\tThe new 3G_MSC/VLR sends an Send Identification Request (old TMSI) to the old 3G_MSC/VLR to get the IMSI for the UE. (The old LAI received from UE is used to derive the old 3G_MSC/VLR identity/address.) The old 3G_MSC/VLR responds with Send Identification Ack. (IMSI and Authentication triplets).\n3.\tSecurity functions may be executed.\n4.\tThe new 3G_MSC/VLR inform the HLR of the change of 3G_MSC/VLR by sending Update Location (IMSI, MSC address, VLR number) to the HLR.\n5.\tThe HLR cancels the context in the old 3G_MSC/VLR by sending Cancel Location (IMSI). The old 3G_MSC/VLR removes the context and acknowledges with Cancel Location Ack.\n6.\tThe HLR sends Insert Subscriber Data (IMSI, subscription data) to the new 3G_MSC/VLR. The new 3G_MSC/VLR acknowledges with Insert Subscriber Data Ack.\n7.\tThe HLR acknowledges the Update Location by sending Update Location Ack. to the new 3G_MSC/VLR.\n8.\tThe new 3G_MSC/VLR validates the UE presence in the new LA. If due to regional, national or international restrictions the UE is not allowed to attach in the LA or subscription checking fails, then the new 3G_MSC/VLR rejects the LA update with an appropriate cause. If all checks are successful, then the new 3G_MSC/VLR responds to the UE with LA Update Accept (new TMSI, new LAI).\n9.\tThe UE acknowledges the new TMSI with a TMSI reallocation Complete. (TMSI can optionally be reallocated with the TMSI reallocation procedure).\n10.\tWhen the location registration procedure is finished, the 3G_MSC/VLR can release the signalling connection towards the SRNS for the concerned UE. The SRNS shall then release the RRC connection if there is no signalling connection between 3G_SGSN and SRNS for the UE.",
      "chunk_type": "general",
      "cross_references": [
        "figure_6.8"
      ]
    },
    {
      "chunk_id": "ts_23.221_6.15.1.2",
      "section_id": "6.15.1.2",
      "section_title": "Routing Area Update",
      "content": "The routing area update procedure is detailed in TS 23.060 [2].\n6.15.1.2A\tTracking Area Update\nThe tracking area update procedure is detailed in TS 23.401 [27].",
      "chunk_type": "general",
      "cross_references": [
        "ts_23.060",
        "ts_23.401"
      ]
    },
    {
      "chunk_id": "ts_23.221_6.15.1.3",
      "section_id": "6.15.1.3",
      "section_title": "Periodic registration towards both CN nodes without use of Gs or SGs",
      "content": "Periodic registration for the CS domain is specified in TS 23.012 [3]. Periodic registration for the PS domain is covered in TS 23.060 [2] and in TS 23.401 [27].",
      "chunk_type": "general",
      "cross_references": [
        "ts_23.012",
        "ts_23.060",
        "ts_23.401"
      ]
    },
    {
      "chunk_id": "ts_23.221_6.15.1.4",
      "section_id": "6.15.1.4",
      "section_title": "Periodic registration with use of Gs or SGs",
      "content": "Periodic registration for the PS domain with use of Gs or SGs is covered in TS 23.060 [2] or in TS 23.272 [30]. Only TA/RA Updates are required from the UE to the SGSN or MME.",
      "chunk_type": "general",
      "cross_references": [
        "ts_23.060",
        "ts_23.272"
      ]
    },
    {
      "chunk_id": "ts_23.221_6.15.1.5",
      "section_id": "6.15.1.5",
      "section_title": "UE initiated combined detach procedure when using Gs or SGs",
      "content": "UE initiated Combined Detach Procedure when using Gs or SGs is specified in TS 23.060 [2] or in TS 23.272 [30]. The UE indicates which form of detach is required, i.e., PS Detach only, CS Detach only or combined Detach.",
      "chunk_type": "procedure",
      "cross_references": [
        "ts_23.060",
        "ts_23.272"
      ]
    },
    {
      "chunk_id": "ts_23.221_6.15.1.6",
      "section_id": "6.15.1.6",
      "section_title": "Forbidden LA/RA",
      "content": "The CN (SGSN and MSC/VLR) shall not send the COMMON Id message with SNA information to the UTRAN when the attach request, LA update, or RA update are rejected.",
      "chunk_type": "requirement",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.221_6.15.2",
      "section_id": "6.15.2",
      "section_title": "SRNS Relocation",
      "content": "SRNS relocation is UTRAN related functionality covered in TS 25.413 [9] and TS 23.060 [2].\nNOTE:\tExamples of RAN signalling are given in TR 25.931 [15].",
      "chunk_type": "general",
      "cross_references": [
        "ts_25.413",
        "ts_23.060",
        "ts_25.931"
      ]
    },
    {
      "chunk_id": "ts_23.221_6.16",
      "section_id": "6.16",
      "section_title": "RAN coordination",
      "content": "This applies to UTRAN only. The RAN coordinates the resource allocation of an UE attached to both PS and CS services. The UTRAN shall reject or downgrade a connection which cannot be granted, see TS 23.060 [2]. The cause might be congestion on the radio interface, or the existence of other connections between this UE and the other CN.\nThe RAN uses the IMSI to identify a UE. The IMSI is transferred from the CN to the RAN with the common ID procedure. When an Iu connection is established, the CN shall perform the RANAP common ID procedure toward RAN as soon as the UE is identified (IMSI). The IMSI is only stored in the RAN for the duration of the RRC Connection.\nThere are two functions that are co-ordinated.\n1)\tPaging coordination is described in 5.9.1 of TS 25.410 [10]; and\n2)\tRelocation coordination that is described in 8.7.5 in TS 25.413 [9].",
      "chunk_type": "requirement",
      "cross_references": [
        "ts_23.060",
        "ts_25.410",
        "ts_25.413"
      ]
    },
    {
      "chunk_id": "ts_23.221_7.1",
      "section_id": "7.1",
      "section_title": "General Aspects",
      "content": "The following technical requirements are applied to support multimedia in GSM/UMTS.\n1)\tGSM/UMTS shall enable the provisioning of multimedia services and multivendor interworking between UE and network.\n2)\tHandover and roaming to and from GSM shall be supported provided GSM is capable of supporting the ongoing media service.\n3)\tFor multimedia services the standardized multimedia protocol shall be run transparently via a PDP-context or a CS connection established using GSM SM/CC . This allows transparent hand-over and roaming between GSM and UMTS provided that GSM supports the QoS requirements.\n4)\tSIP from the IETF shall be the multimedia call control supported over the PS domain, where the network functional entities for multimedia support are within the PLMN.\nNOTE:\tOther multimedia protocols can be supported e.g. H.323 transparently over the PS domain . In these cases, the multimedia functional entities shall be outside of the PLMN. Support of terminating calls for these protocols are outside the scope of these specifications.\n5)\tH.324M shall be supported within the CS domain.\nFigure 7.1 illustrates the realisation of the multimedia service based on requirement 3. 'Multimedia Protocol' indicates the functionality either inside the communicating user's terminal or a server (e.g. SIP server). It is essentially a control function both for user plane and control plane for the multimedia communication.\nFigure 7.1: Support of multimedia making use of GSM SM/CC",
      "chunk_type": "definition",
      "cross_references": [
        "figure_7.1"
      ]
    },
    {
      "chunk_id": "ts_23.221_7.2.1",
      "section_id": "7.2.1",
      "section_title": "Introduction",
      "content": "It is an operator's decision whether mobile terminated calls from the PSTN/CS domain are routed first to the CS domain, or to the IM subsystem. Both options may co-exist within one operator's network.\nThe ability to select whether the CS domain or the IMS will provide the services is termed the Service Domain Selection (SDS) (see clause 7.2.2) and whether the CS domain or the IMS/IP‑CAN is used to communicate call termination from the network and the UE is termed access domain selection (ADS) (see clauses 7.2a and 7.2b).\nNOTE:\tFor a user subscribed to IMS Centralized Services as defined in TS 23.292 [31], the SDS routing procedure will always result in the call being routed to IMS.",
      "chunk_type": "general",
      "cross_references": [
        "clause_7.2.2",
        "ts_23.292"
      ]
    },
    {
      "chunk_id": "ts_23.221_7.2.2",
      "section_id": "7.2.2",
      "section_title": "Calls directed to the CS domain",
      "content": "When the mobile terminated call set-up arrives at a G-MSC server or G-MSC, then that call may be subject to service domain selection to determine whether the terminating call is to be delivered to the CS domain or the IMS is used to provide the services for the user. The G-MSC Server or G-MSC interrogates the HSS for routing information. The HSS decides on the way the call shall be treated next (e.g. IM CN subsystem, CS domain (e.g. the subscriber is roaming in a legacy network), service platform involvement). According to the decision, the HSS returns information that will make the G-MSC progress the call towards an MGCF (for onward handling in the IMS), a VMSC or to provide further processing (e.g. invoke CAMEL G-MSC processing).\nSDS may take into account for terminating calls whether the user is roaming or not, user preferences, service subscription and operator policy. In addition, for a mobile terminated call set-up towards a non IMS Centralized Services user (see TS 23.292 [31]), SDS may also take the following factors (but not limited to) into account for the selection decision:\n-\tThe state of the UE in the circuit switched domain. The state information includes: Detached, Attached;\n-\tThe state of the UE in the IMS. The state information includes: Registered, Unregistered;\n-\tThe access network capabilities, including the information available in the HSS on whether IMS voice over PS Session is supported (as specified in TS 23.060 [2] and TS 23.401 [27]);\n-\tThe UE capabilities (e.g. SRVCC capability as defined in TS 23.216 [35]).\nNOTE:\tA non IMS Centralized Services user receiving services from either the CS domain or IMS depending on the above factors might experience issues with service consistency.",
      "chunk_type": "general",
      "cross_references": [
        "ts_23.292",
        "ts_23.060",
        "ts_23.401",
        "ts_23.216"
      ]
    },
    {
      "chunk_id": "ts_23.221_7.2.3",
      "section_id": "7.2.3",
      "section_title": "Calls directed to the IMS",
      "content": "When the mobile terminated call set-up arrives at a MGCF, then the MGCF passes the session to an I‑CSCF which interrogates the HSS for routing information. The HSS returns information that will enable the I‑CSCF to progress the call towards an S‑CSCF. From the S‑CSCF the session may be re-directed to the CS domain or may continue in the IMS upon instruction from the access domain selection functionality (see clause 7.2b).\n7.2a\tDomain selection for UE originating sessions / calls\nFor UE originating calls, the UE performs access domain selection. The UE shall be able to take following factors into account for access domain selection decision:\n-\tThe state of the UE in the circuit switched domain. This state information shall be included: Detached, Attached.\n-\tThe state of the UE in the IMS. The state information shall include: Registered, Unregistered.\n-\tThe domain used by an existing session / call for the same service (see the clause 7.2d).\n-\tUser preferences and any available operator policy.\n-\tThe \"IMS voice over PS session supported indication\" as defined in TS 23.060 [2] and TS 23.401 [27].\n-\tWhether the UE is expected to behave in a \"Voice centric\" or \"Data Centric\" way.\n-\tUE capability of supporting IMS PS voice.\n-\tIndications the network may have provided to the UE in combined EPS/IMSI attach/TAU, e.g. \"SMS-only\" indication or \"CSFB Not Preferred\" indication as defined in TS 23.272 [30].\n-\tWhether 3GPP PS Data Off is active or not and whether IMS voice is included in 3GPP PS Data Off Exempt Services or not.\nThe service domain selection functionality will decide whether the call is serviced in the CS domain or the IMS. Service domain selection functionality may take into account for originating calls whether the user is roaming or not, user preferences, service subscription and operator policy. If the UE is configured for Voice over IMS, the service domain selection functionality should take the \"IMS voice over PS session supported indication\" into account and should only initiate IMS voice calls (with the voice bearer in the PS domain) using the RAT where the \"IMS voice over PS session supported indication\" applies and indicates support. The \"IMS voice over PS session supported indication\" applies to E-UTRAN when received in E-UTRAN, and applies to UTRAN when either received in GERAN or UTRAN.\nNOTE 1:\tWhen a UE, which obtains voice and/or SMS services using an EPS/IMSI registration via E-UTRAN, selects a non-3GPP access network and it can neither remain EPS/IMSI registered via E-UTRAN nor obtain voice and/or SMS services using the non-3GPP access network, then the UE attempts to select also GERAN/UTRAN and performs IMSI registration to obtain voice and/or SMS services.\nTo allow for appropriate domain selection for originating voice calls, a CSFB and/or IMS/CS-voice capable UE is set to behave as \"Voice centric\" or \"Data centric\" in E-UTRAN:\n-\tA UE set to \"Voice centric\" shall always try to ensure that Voice service is possible. A CSFB and an IMS/CS-voice capable UE set to \"Voice centric\" unable to obtain voice service in E-UTRAN (e.g. CSFB and IMS voice are not supported or the configured preferences on how to handle voice services prevent usage of any available voice services or 3GPP PS Data Off activated and IMS voice is not included in 3GPP PS Data Off Exempt Services), shall disable the E-UTRAN capability, which results in re-selecting GERAN or UTRAN. The E-UTRAN capability is re-enabled by the UE under the conditions described in TS 24.301 [34]. A voice centric CSFB capable UE that receives \"CSFB Not Preferred\" or \"SMS-only\" indication as a result of combined EPS/IMSI attach or combined TA/LA Update procedures and unable to obtain voice services over IMS shall disable the E-UTRAN capability, which results in re-selecting GERAN or UTRAN.\n-\tA UE set to \"Data centric\" does not disable the E-UTRAN capability if voice services cannot be obtained. Upon receiving combined EPS/IMSI attach accept or combined TA/LA Update accept with \"SMS-only\" indication, a data centric UE stays in the current RAT and is not allowed to use CSFB. Upon receiving combined EPS/IMSI attach accept or combined TA/LA Update accept with \"CSFB Not Preferred\" indication, a data centric UE stays in the current RAT and is allowed to use CSFB.\nAs specified in TS 23.401 [27] and TS 23.060 [2], a CSFB and/or IMS capable UE indicates in Attach/RAU/TAU Request whether it is set to \"Voice centric\" or \"Data centric\" and it indicates its configured preferences on how the UE is supposed to handle voice services in E-UTRAN. Depending on operator's configuration, this information can be used by the network to choose the RFSP Index in use, see clause 4.3.6 in TS 23.401 [27] and clause 5.3.5 in TS 23.060 [2] for examples of how RFSP Index can be used for selective idle mode camping.\nTo allow for appropriate domain selection for originating voice calls, the following applies for a CSFB and IMS capable UE in E-UTRAN:\n-\tIt should be possible to provision UEs with the following HPLMN operator preferences on how a UE that is both CSFB and IMS capable is supposed to handle voice services (See Annex A for examples on UE behaviour for each configuration):\n-\tCS Voice only: the UE will use only the CS domain (possibly using IMS signalling, see TS 23.292 [31]) to originate voice calls and it will not attempt to initiate voice sessions over IMS using a PS bearer. The UE attempts combined EPS/IMSI attach or combined TA/LA Update procedures. If combined EPS/IMSI attach or combined TA/LA Update fail to register the IMSI in the CS domain or succeed with an \"SMS-only\" indication or succeed with a \"CSFB Not Preferred\" indication, the UE behaves as described for \"voice centric\" or \"data centric\" according to its setting.\n-\tCS Voice preferred, IMS PS Voice as secondary: if CS voice is available the UE will use the CS domain (possibly using IMS signalling, see TS 23.292 [31]) to originate and terminate voice calls. The UE attempts combined EPS/IMSI attach or combined TA/LA Update procedures (as defined in TS 23.272 [30]). If combined EPS/IMSI attach or combined TA/LA Update procedures fail to register the IMSI in the CS domain or succeed with an \"SMS-only\" indication or succeed with a \"CSFB Not Preferred\" indication, the UE attempts to use voice over IMS to originate voice calls. If the UE fails to use IMS for voice e.g. due to \"IMS voice over PS session supported indication\" indicates voice is not supported, the UE behaves as described for \"voice centric\" or \"data centric\" according to its setting.\n-\tIMS PS Voice preferred, CS Voice as secondary: if IMS voice is available the UE will use IMS to originate and terminate voice sessions. The UE may attempt combined EPS/IMSI attach with or without \"SMS only\", combined TA/LA Update with or without \"SMS only\" or EPS attach/TAU procedures. If the UE fails to use IMS for voice, e.g. due to \"IMS voice over PS session supported indication\" indicates voice is not supported (in Attach accept or subsequent TAU accept), then the UE uses the CS domain (as defined in TS 23.272 [30]), possibly using IMS signalling (see TS 23.292 [31]). If not already performed, the UE attempts combined TA/LA Update procedures. If the combined TA/LA Update procedures fail to register the IMSI in the CS domain or succeed with an \"SMS-only\" indication or succeed with a \"CSFB Not Preferred\" indication and the UE has failed to use IMS for voice, the UE behaves as described for \"voice centric\" or \"data centric\" according to its setting.\nNOTE 2:\tWhether to perform combined EPS/IMSI attach/combined TA/LA Update or EPS attach/TAU for the case of \"IMS PS Voice preferred\" is to be evaluated in each release of the specifications.\n-\tIMS PS Voice only: the UE will use IMS to originate voice sessions and will not attempt CS Voice. The UE may attempt combined EPS/IMSI attach with \"SMS only\", combined TA/LA Update with \"SMS only\" or EPS attach/TAU. If the UE fails to use IMS for voice, e.g. due to \"IMS voice over PS session supported indication\" indicates voice is not supported on E‑UTRAN, the UE behaves as described for \"voice centric\" or \"data centric\" according to its setting.\nTo allow for appropriate domain selection for originating voice calls, the following CS/IMS voice preference setting applies for a CS and IMS capable UE in UTRAN:\n-\tIt should be possible to provision UEs with the following HPLMN operator preferences on how a CS/IMS enabled UE is supposed to handle voice services:\n-\tCS Voice only: the UE will not attempt to initiate voice sessions over IMS using a PS bearer. This does not preclude the use of IMS signalling to control a CS bearer (see TS 23.292 [31]);\n-\tCS Voice preferred, IMS PS Voice as secondary: the UE will try to use the CS domain (possibly using IMS signalling, see TS 23.292 [31]) to originate voice calls;\n-\tIMS PS Voice preferred, CS Voice as secondary: the UE will try to use IMS to originate voice sessions. If the UE fails to use IMS for voice e.g. due to \"IMS voice over PS session supported indication\" indicates voice is not supported (in Attach accept or subsequent RAU accept), then the UE will use the CS domain to originate voice calls, possibly using IMS signalling (see TS 23.292 [31]).\nNOTE 3:\tThe above CS/IMS voice preference setting for UTRAN is only applicable for the selection of domain for the voice media i.e. the existing mobility procedure is not changed due to these settings.\nIn limited service state, a UE should always camp on a RAT which is likely to support emergency calls.\nThe TS 23.167 [33] describes when an emergency call is to be initiated in the CS domain or using IMS. When the CS domain is to be used the following applies:\n-\tA CSFB/IMS enabled UE which is registered in the CS domain, e.g. using CSFB procedures or using above-mentioned selection principles, shall initiate emergency call attempts in the CS domain by using available CS domain procedures.\n-\tA CS Voice capable UE which is not registered in the CS domain shall initiate emergency calls in the CS domain by autonomously switching to a RAT which supports the CS domain (e.g. GERAN or UTRAN).\n7.2b\tAccess Domain Selection for terminating sessions\nTerminating Access Domain Selection (T-ADS) selects CS access and/or one or more PS access network(s) to be used to deliver a terminating session to the UE.\nT-ADS functionality for call termination is performed in the terminating network, and can optionally be assisted by the UE procedures.\nNOTE:\tIn case the service in the incoming request can only be supported by PS domain (e.g. file transfer, image share), PS domain is selected regardless of other criteria.\nFor IMS Service Centralization and Continuity enabled networks, T-ADS is a functionality located in the IMS. The UE enhanced for IMS Service Centralization and Continuity is able to assist the T-ADS.\nFor IMS Service Centralization and Continuity users, T-ADS is performed as specified in TS 23.292 [31] and TS 23.237 [32].\nIf the UE assisted T-ADS is used, then prior to responding to a session request requesting one or more media (i.e. bi-directional speech media) bearers in the PS domain, the UE shall determine, based on the PS domain's access network capabilities including the information whether IMS voice over PS Session is supported (as specified in TS 23.060 [2] and TS 23.401 [27]) (if indicated), user preferences and operator policy, whether the media bearers can be accepted on the PS domain. If the media bearers cannot be accepted, then the UE shall perform SDS.\nFor terminating sessions:\n-\tT-ADS is always performed after the terminating services.\nThe T-ADS may take the following factors (but not limited to) into account for the selection decision:\n-\tThe service requested (e.g. voice call, file transfer, image share, etc.) in the incoming session.\n-\tThe state of the UE in the circuit switched domain. This state information shall be included: Detached, Attached.\n-\tThe state of the UE in the IMS. The state information shall include: Registered, Unregistered.\n-\tThe UE capabilities.\n-\tThe time of the most recent IMS registration or re-registration via WLAN access.\n-\tThe time when 3GPP access network had the most recent radio contact with the UE.\n-\tThe access network capabilities including the information whether IMS voice over PS Session is supported (as specified in TS 23.060 [2] and TS 23.401 [27]) by the 3GPP access network that had the most recent radio contact with the UE.\n-\tThe media components included in the incoming session.\n-\tUser preferences and operator policy.\n-\tUE 3GPP PS Data Off status (active/inactive).\n-\tConfiguration related to the list of applicable 3GPP PS Data Off Exempt Services.\nThe T-ADS shall take into account the domains / access types used by an existing session.\n7.2c\tDomain Selection for UE originating SMS\nTo allow for appropriate domain selection for SMS delivery, the following applies for an IMS capable UE which supports SMS over IP networks:\n-\tIt should be possible to provision UEs with the following HPLMN operator preferences on how an IMS enabled UE is supposed to handle SMS services:\n-\tSMS is not to be invoked over IP networks: the UE does not attempt to deliver SMS over IP networks. The UE attempts to deliver SMS over NAS signalling.\n-\tSMS is preferred to be invoked over IP networks: the UE attempts to deliver SMS over IP networks. If delivery of SMS over IP networks is not available, the UE attempts to deliver SMS over NAS signalling.\n-\tThe UE shall not attempt to deliver SMS over IP networks over 3GPP access, if 3GPP PS Data Off as defined in TS 22.011 [39] is activated and SMS over IP is not in the list of 3GPP PS Data Off Exempt Services.\n7.2d\tDomain selection decisions during ongoing sessions\nOngoing IMS voice sessions are not impacted by a change of the IMS voice over PS session indicator (i.e. the UE performs a TAU or Combined TA/LA update in ECM-CONNECTED mode and receives IMS voice over PS session indicator indicating that IMS voice over PS sessions are not supported).\nIf the UE has an ongoing IMS voice over PS session, then regardless of the value of the IMS voice over PS session indicator, the UE shall originate new calls in the same access domain as the ongoing IMS voice over PS session until the release of the ongoing IMS voice over PS session.\n7.2e\tSelection of method for UE originating USSD requests\nTo allow for selection of appropriate method for UE originating USSD request delivery, the following applies for a UE when the UE supports both the USSD using IMS and the USSD using CS domain.\nThe UE shall first attempt USSD requests in the domain used for originating voice sessions. If an attempt to deliver the USSD request using IMS fails due to missing network support and the UE is registered in the CS domain, the UE shall attempt to deliver the USSD request using the CS domain.\nTo handle the case when the UE can use IMS for originating voice call but the network does not support USSD request using IMS, the UE may be provisioned with the following HPLMN operator preferences to instruct the UE to invoke USSD requests via the CS domain even when the UE can use IMS for originating voice calls:\n-\tUSSD requests are to be invoked via the CS domain: the UE shall not attempt to deliver the USSD request using IMS even when the UE would use IMS for originating voice calls.\nThe UE shall not attempt to deliver USSD using IMS over 3GPP access, if 3GPP PS Data Off as defined in TS 22.011 [39] is activated and USSD over IMS is not in the list of 3GPP PS Data Off Exempt Services.",
      "chunk_type": "general",
      "cross_references": [
        "clause_7.2",
        "ts_23.401_clause_4.3.6",
        "ts_23.401_clause_5.3.5",
        "ts_23.060",
        "ts_23.401",
        "ts_23.272",
        "ts_24.301",
        "ts_23.292",
        "ts_23.167",
        "ts_23.237",
        "ts_22.011"
      ]
    },
    {
      "chunk_id": "ts_23.221_7.3",
      "section_id": "7.3",
      "section_title": "Routing sessions from the IMS to the CS Domain",
      "content": "If the IMS Service Centralization and Continuity is not used and if a subscriber is subscribed to both the CS domain and the IMS, then there may arise the need to route sessions that arrived in the IMS to the CS domain using a number related to the subscriber's MS-ISDN. All sessions which are forwarded from the IMS to the CS domain shall enter the CS domain through a G-MSC or G-MSC Server. The G-MSC or G-MSC Server will handle the session as a mobile terminating call.\nIf the IMS Service Centralization and Continuity is used, the routing of the session from IMS to CS shall be done according to TS 23.292 [31].",
      "chunk_type": "general",
      "cross_references": [
        "ts_23.292"
      ]
    },
    {
      "chunk_id": "ts_23.221_8.1",
      "section_id": "8.1",
      "section_title": "Context activation and registration",
      "content": "The IP address is allocated to UE either by GPRS specific signalling when a PDP context is activated using the PDP Context Activation Procedure, or some other means e.g. by DHCP. The UE shall use IP addresses assigned to it for, but not limited to, the following:\n-\tthe exchange of application level signalling (e.g., registration, CC) with the S‑CSCF from the access network currently used,\n-\tapplication level registration to IM CN subsystem as an address used to reach the UE\n-\tan address used to reach the UE for multimedia sessions.\nThe P‑CSCF is located either in the Home network or in the Visited Network.\nIn the following flow, a description of the order in which the registration procedure is executed and how the IP address is allocated is shown. Figure 8.1 shows the procedures performed during the GPRS and application level registration.\nFigure 8.1: Registration\nThe following steps are performed:\n1.\tthe bearer level registration is performed (e.g. when the terminal is switched on or upon explicit indication from the user).\n2.\tthe PDP context activation is done. The UE has two options:\n-\tactivate a PDP context using the PDP Context Activation Procedure and obtain a new IP address (e.g. if the UE does not have any existing PDP context active or desires to use a different IP address)\n-\tactivate an additional PDP context using the Secondary PDP Context Activation Procedure and re-using the IP address of the linked already active PDP contexts.\n3.\tUE performs the P‑CSCF discovery procedure, where the UE discovers a P‑CSCF, TS 23.228 [11].\nThere can be time gaps between these procedures and the following one. For instance, the UE may perform PDP context activation and the P‑CSCF discovery, but not the application level registration. The UE may use the activated PDP context for other types of signalling, e.g. for P‑CSCF discovery.\n4.\tUE performs application level registration by providing the IP address obtained at step 2 to the P‑CSCF selected at step 3. The IP address used for signalling purposes is allocated in association with PDP context activation and not on an incoming call basis.\nThe discovered P‑CSCF forwards the registration on to the UE's home network where a S‑CSCF, TS 23.228 [11] is assigned and the registration takes place. This registration associates the P‑CSCF with the UE.\nFrom the S‑CSCF point of view, the P‑CSCF is where the UE is reachable for mobile-terminated session control signalling and any other type of mobile terminated IMS signalling.\nWhether the procedures are activated individually by the UE or some of them are performed automatically depends on implementation of the terminal and on the UE's configuration. For instance, the multimedia application in the UE could start the application level registration and steps 2-4 would have to be executed in response to support the operation initiated by the application. Interaction with the UE may happen during these steps.",
      "chunk_type": "requirement",
      "cross_references": [
        "figure_8.1",
        "ts_23.228"
      ]
    },
    {
      "chunk_id": "ts_23.221_8.2.1",
      "section_id": "8.2.1",
      "section_title": "Registration concepts for a subscriber roaming into CS domain",
      "content": "Figure 8.2 shows the registration concept for a subscriber, who access IM services in the home network, roaming into a CS domain.\nFigure 8.2: A roaming model for registration in a CS domain\nNOTE:\tThe above figure shows one configuration where the Signalling Gateway (SGW) is needed. Other configurations are possible as well (see TS 23.002 [1]).\nThe detailed message sequence chart for a subscriber roaming into a CS domain and accessing an IM application is shown in figure 8.3.\nFigure 8.3: Message sequence for roaming into a CS domain\n1.\tThe UE initiates the Location Update procedure with the MSC/VLR of the visited network. The LU message contains the IMSI of the subscriber.\n2.\tThe authentication is performed as per the existing 3GPP specifications for the CS domain.\n3.\tThe MSC/VLR initiates the MAP Location Update procedure towards the HSS of the user via SGW. The HSS stores the VLR address etc. The message contains IMSI and other parameters as defined in the 3GPP specifications for the CS domain. The SGW performs SS7 transport to/from IP conversion.\n4.\tThe HSS provides the subscriber data for the roaming user to VLR by sending MAP Insert Subscriber Data message via SGW. The message contains IMSI and other necessary parameters as defined in the 3GPP specification for both Iu and A/Gb mode. The message is passed through the SGW transparently while the SS7 to/from IP conversion is performed in SGW.\n5.\tThe serving VLR then acknowledges the receipt of the subscriber data to the HSS via SGW.\n6.\tThe HSS acknowledges the completion of location updating procedure to the MSC/VLR via SGW.\n7.\tThe MSC/VLR acknowledges the completion of location updating procedure to the UE.\n8.\tThe HSS sends the MAP Cancel Location message to the old MSC/VLR (optional procedure).\n9.\tLocation cancellation is acknowledged to the HSS by the old MSC/VLR.\nNOTE 1:\tThe steps 8 and 9 above assume that the UE was previously registered to a CS domain .\nNOTE 2:\tThe MAP messages between the MSC/VLR and HSS are passed transparently via SGW. The SGW does not interpret the MAP messages in anyway, but performs only the lower level conversion between SS7 and IP. This is in accordance with the TS 23.002 [1] for SGW.",
      "chunk_type": "general",
      "cross_references": [
        "figure_8.2",
        "figure_8.3",
        "ts_23.002"
      ]
    },
    {
      "chunk_id": "ts_23.221_8.3.1",
      "section_id": "8.3.1",
      "section_title": "GPRS/EPS considerations for UE recognized IMS Emergency Sessions",
      "content": "Requirements for GPRS and EPS functions for support of IMS emergency services are defined in TS 23.060 [2], TS 23.401 [27] and in TS 23.167 [33].",
      "chunk_type": "general",
      "cross_references": [
        "ts_23.060",
        "ts_23.401",
        "ts_23.167"
      ]
    },
    {
      "chunk_id": "ts_23.221_8.3.2",
      "section_id": "8.3.2",
      "section_title": "Emergency Calls in absence of UICC for GPRS/EPS Access",
      "content": "Requirements for GPRS and EPS functions for support of IMS emergency services are defined in TS 23.060 [2], TS 23.401 [27] and in TS 23.167 [33].",
      "chunk_type": "general",
      "cross_references": [
        "ts_23.060",
        "ts_23.401",
        "ts_23.167"
      ]
    },
    {
      "chunk_id": "ts_23.221_9",
      "section_id": "9",
      "section_title": "Efficient use of radio resource",
      "content": "This clause captures the technical requirements to ensure efficient use of the radio resource in the UMTS access network. The radio resource is considered to be a scarce resource and therefore every opportunity shall be taken to optimize its use.\nFor UTRAN it shall be possible to re-apply PS domain pre-release 5 mechanisms for efficient use of radio resource.\nAdditional requirements for efficient use of the radio spectrum for release 5 SIP signalling include the following:\n-\tUMTS shall support mechanisms to optimize transport of SIP signalling packets over the radio interface, typically by compressing the SIP signalling messages and by compressing the IP and transport layer protocol headers that carry these SIP messages.\n-\tThe chosen solution(s) shall be extensible to facilitate the incorporation of new and improved compression algorithms in a backward compatible way as they become available.\n-\tThe chosen solution(s) should work in roaming scenarios.\n-\tApplication specific compression shall minimize impacts on existing UMTS release e.g. it could be defined between the UE and associated application server, e.g. at the SIP Client and at the first SIP Proxy.\nSupport of SIP signalling compression is mandatory in the UE and P‑CSCF for IMS. The actual usage of compression is optional but highly preferable and is subject to operator policies. See TS 24.229 [23] for more details.\nAnnex A (informative):Guidance for CSFB and IMS enabled UE implementations in E-UTRAN\nA.1\tGeneral\nThis annex provides some examples on how the CSFB and IMS capable UE which supports E‑UTRAN can make use of the following indications/settings prior to accessing E-UTRAN:\n-\t\"CS Voice only\", \"IMS PS Voice only\", \"prefer CS Voice with IMS PS Voice as secondary\", or \"prefer IMS PS Voice with CS Voice as secondary\", and\n-\t\"Voice centric\" or \"Data centric\".\nA.2\tIMS PS Voice preferred\nA.2.1\tEPS Attach\nThe following figure A.2.1-1illustrates the UE behaviour when performing non-combined EPS/IMSI attach, with the setting of: \"prefer IMS PS Voice with CS Voice as secondary\".\nFigure A.2.1-1: UE behaviour for IMS PS Voice preferred with CS Voice as secondary, non combined EPS/IMSI attach\nA.2.2\tCombined EPS/IMSI attach\nThe following figure A.2.2-1 illustrates the UE behaviour when performing combined EPS/IMSI attach, with the setting of: \"prefer IMS PS Voice with CS Voice as secondary\".\nFigure A.2.2-1: UE behaviour for IMS PS Voice preferred with CS Voice as secondary, combined EPS/IMSI attach\nA.3\tCS Voice preferred\nThe following figure A.2.1-1illustrates the UE behaviour with the setting of: \"prefer CS Voice with IMS PS Voice as secondary\".\nFigure A.3-1: UE behaviour for CS Voice preferred with IMS PS Voice as secondary\nA.4\tIMS PS Voice only\nThe following figure A.4.1-1illustrates the UE behaviour with the setting of: \"IMS PS Voice only\".\nFigure A.4-1: UE behaviour for IMS PS Voice only\nA.5\tCS Voice only\nThe following figure A.5.1-1illustrates the UE behaviour with the setting of: \"CS Voice only\".\nFigure A.5-1: UE behaviour for CS Voice only\nAnnex B (informative):Guidance related to IPv4 address usage\nB.1\tGeneral\n3GPP has investigated and documented various aspects of interworking as well as transition mechanisms related to IPv6 address usage and coexistence with IPv4 environment. These guidelines are as well applicable for usage in environment like MTC as deemed appropriate.\n-\tFor general guidelines towards IPv6 migration aspects, TR 23.975 [36], \"IPv6 migration Guidelines\" should be followed as appropriate.\n-\tFor Session based applications similar to IMS, TR 23.981 [26], \"Interworking aspects and migration scenarios for IPv4-based IP Multimedia Subsystem (IMS) implementations\" may be used as appropriate. The report describes baseline guidelines and in conjunction with TS 23.228 [11] provides comprehensive details for coexistence/transition/migration for IPv6 and IPv4 addressing in 3GPP networks for IMS.\nB.2\tInterworking aspects\nB.2.1\tInterworking scenario: UE assigned private IPv4 address\nWhen IPv4 addressing is used, the UE, for example in case of MTC, is normally assigned a private IPv4 address due to the limitation of the public IPv4 address space. In case of MTC, the MTC Server may reside in the same private IPv4 address space as the UE, or the MTC Server may reside in public IPv4 address space. In the first case, the UE used for MTC and the MTC Server are in the same routable address space. In the latter case, the UE used for MTC and the MTC Server are located in different private IP address spaces.\nFigure B.2.1-1: Application Server (e.g. MTC) in a public or private address space and UE in private address space\nB.2.2\tUse of Device triggering\nFor indirect and hybrid model, use of device triggering as described in TS 23.682 [38] may be used to handle NAT traversal in situations where the Server (e.g. MTC Server) or Application is attempting to communicate with UEs in a private IP address space. In addition device triggering may be used to get the device to initiate the communication with the Server or Application.\nNOTE:\tThe above mechanism can be applied to any application (e.g. MTC) which is able to use device triggering.\nB.2.3\tSpecific APN use\nFor indirect and direct model (as described in TS 23.682 [38]), use of separate explicit Access Point Names (APN), and IPv4 address allocation performed following procedures as described in 3GPP specifications in TS 23.401 [27] and TS 23.060 [2] and TS 29.061 [37] resolves private IPv4 address usage issues.\nFigure B.2.3-1: Example IP address assignment when the Server is owned by the MNO or by Application Provider using specific APNs\nIn case of MTC, the Server is either deployed by the PLMN operator or by an application provider who owns an MTC Server and uses a specific APN assigned by the PLMN. In both cases a tunnelling mechanism is used between the GGSN/P-GW and the PDN of the Server to allow carrying the IP packets enabling assignment of private IP addresses to the UE used for MTC. The tunnelling allows for connecting the PLMN with the Server(s) using public IP networks. Furthermore that tunnelling allows for setting up private network with multiple GGSNs/P-GWs and multiple Servers where every GGSN, P-GW or the Server can be deployed at a different location. By using a separate APN per application (provider) the Servers from different applications can use the same overlapping private IP addresses as needed without the need for the network to implement a NAT function as the UE used for MTC and servers used for MTC belonging to one application share the same private IP address space.\nNOTE:\tThe above mechanism can be applied to other applications using same scenario as described in Figure B.2.3-1.\nAnnex C (informative):Change history\nChange history\nDate\nMeeting\nTDoc\nCR\nRev\nCat\nSubject/Comment\nNew version\n2011/03\nSA#51\nSP-110075\n0122\n2\nF\nRestricting IPv6 interface identifier generation to protect usage patterns\n10.0.0\n2011/12\nSA#54\nSP-110737\n0134\n2\nB\nUpdate of Domain Selection\n10.1.0\n2011/12\nSA#54\nSP-110742\n0132\n7\nB\nNormative documentation for SIMTC and IP addressing\n11.0.0\n2011/12\nSA#54\nSP-110748\n0133\n1\nC\nClarification on T-ADS behaviour\n11.0.0\n2012/12\nSA#58\nSP-120710\n0146\n-\nA\nRestriction of Inter RAT handover/release with redirection to E-UTRAN\n11.1.0\n2012/12\nSA#58\nSP-120726\n0149\n1\nF\nClarification on SDS to ensure that the service can be performed correctly.\n11.1.0\n2013/06\nSA#60\nSP-130223\n0148\n6\nF\nEnabling CS services when UE gets IMSI detached\n11.2.0\n2014/06\nSA#64\nSP-140251\n0159\n3\nA\nKeeping ongoing IMS voice calls when IMSvoPS indication changes\n11.3.0\n2014/06\nSA#64\nSP-140377\n0157\n2\nF\nUSSD method selection\n12.0.0\n2014/06\nSA#64\nSP-140274\n0163\n2\nB\nClarification on roaming subscription corresponding to specific RAT for 23.221\n13.0.0\n2016/09\nSA#73\nSP-160642\n0168\n7\nB\nT-ADS factors to support WLAN access\n14.0.0\n2016/12\nSA#74\nSP-160826\n0170\n3\nB\nT-ADS consideration for 3GPP Data Off status for MMTel Audio and MMTel Video services during access selection\n14.1.0\n2016/12\nSA#74\nSP-160826\n0172\n2\nB\nMobile originated sessions domain selection and PS Data Off\n14.1.0\n2017/09\nSA#77\nSP-170729\n0174\n1\nC\nUpdate for 3GPP PS DATA OFF Phase 2\n15.0.0\n2018-12\nSA#82\nSP-181080\n0181\n-\nA\nMissing Data Off requirement for non-IP PDN connection\n15.1.0\n2018-12\nSA#82\nSP-181096\n0179\n1\nF\nSubscription based access restriction for NB-IoT\n16.0.0\n2019-03\nSA#83\nSP-190163\n0182\n2\nB\nIntroduction of PARLOS\n16.1.0\n2019-06\nSA#84\nSP-190406\n0183\n-\nC\nEthernet type PDN connection in EPS and Data Off\n16.2.0\n2022-03\nSA#95E\n-\n-\n-\n-\nUpdate to Rel-17 version (MCC)\n17.0.0\n2024-03\n-\n-\n-\n-\n-\nUpdate to Rel-18 version (MCC)\n18.0.0",
      "chunk_type": "general",
      "cross_references": [
        "ts_24.229",
        "ts_23.975",
        "ts_23.981",
        "ts_23.228",
        "ts_23.682",
        "ts_23.401",
        "ts_23.060",
        "ts_29.061"
      ]
    }
  ]
}