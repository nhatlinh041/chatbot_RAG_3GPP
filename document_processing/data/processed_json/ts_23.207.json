{
  "metadata": {
    "specification_id": "ts_23.207",
    "version": "18.0.0",
    "title": "3GPP TS 23.207",
    "file_path": "/content/drive/MyDrive/RAG_thesis/data/23_series/23207-i00/23207-i00.docx"
  },
  "export_info": {
    "export_date": "2025-07-26T09:37:50.878923",
    "total_chunks": 30
  },
  "chunks": [
    {
      "chunk_id": "ts_23.207_1",
      "section_id": "1",
      "section_title": "Scope",
      "content": "The present document provides the framework for end-to-end Quality of Service involving GPRS and complements TS 23.107 [3] which describes the framework for Quality of Service within UMTS. The end-to-end QoS architecture is provided in Figure 1. The document describes the interaction between the TE/MT Local Bearer Service, the GPRS Bearer Service, and the External Bearer Service, and how these together provide Quality of Service for the End-to-End Service. The document also describes IP level mechanisms necessary in providing end-to-end Quality of Service involving GPRS networks, including possible interaction between the IP level and the GPRS level, as well as the application level and the IP level.\nThis document covers different architectural aspects of the end-to-end Quality of Service concept and architecture with varying level of detail. In general, other specifications shall be referred to for further details; these other specifications enable the reader to acquire the full understanding of the end-to-end Quality of Service concept and architecture. In particular, the stage 2 specification for the PCC architecture is specified in TS 23.203 [21]. The present document does not contain any requirements for the PCC architecture.\nIn contrast to the TS 23.107 [3], the present document is only applicable to GPRS packet switched access services, and includes aspects of interworking to the IM subsystem as well as PSTN and other networks. The document does not cover the circuit switched access services.\nFigure 1: End-to-End QoS Architecture",
      "chunk_type": "general",
      "cross_references": [
        "figure_1",
        "ts_23.107",
        "ts_23.203"
      ]
    },
    {
      "chunk_id": "ts_23.207_2",
      "section_id": "2",
      "section_title": "References",
      "content": "The following documents contain provisions which, through reference in this text, constitute provisions of the present document.\n-\tReferences are either specific (identified by date of publication, edition number, version number, etc.) or non‑specific.\n-\tFor a specific reference, subsequent revisions do not apply.\n-\tFor a non-specific reference, the latest version applies. In the case of a reference to a 3GPP document (including a GSM document), a non-specific reference implicitly refers to the latest version of that document in the same Release as the present document.\n[1]\t3GPP TS 22.228: \"Service requirements for the Internet Protocol (IP) multimedia core network subsystem (IMS); Stage 1\".\n[2]\t3GPP TS 23.002: \"Network Architecture\".\n[3]\t3GPP TS 23.107: \"QoS Concept and Architecture\".\n[4]\t3GPP TS 23.228: \"IP Multimedia (IM) Subsystem – stage 2\".\n[4a]\tVoid.\n[4b]\tVoid.\n[4c]\tVoid.\n[5]\t3GPP TR 21.905: \"Vocabulary for 3GPP Specifications\".\n[6]\tRFC 2475: \"An Architecture for Differentiated Services (DiffServ)\".\n[7]\tRFC 2753: \"A Framework for Policy-based Admission Control \".\n[8]\tRFC 2748: \"Common Open Policy Service protocol (COPS)\".\n[9]\tRFC 2205: \"Resource ReSerVation Protocol (RSVP)\".\n[10]\tRFC 2209: \"Resource ReSerVation Protocol (RSVP) Message Processing Rules\".\n[11]\tRFC 2210: \"The use of RSVP with IETF integrated Services\".\n[12]\tRFC 1633: \"Integrated Services in the Internet Architecture: an Overview\".\n[13]\tRFC 3261: \"SIP: Session Initiation Protocol\".\n[14]\tRFC 2327: \"Session Description Protocol\".\n[15]\tRFC 2998: \"A Framework For Integrated Services Operation Over DiffServ Networks\".\n[16]\tRFC 2750: \"RSVP Extensions for Policy Control\".\n[17]\tRFC 2474: \"Definition of the Differentiated Services Field (DS Field) in the IPv4 and IPv6 Headers\".\n[18]\tVoid.\n[19]\t3GPP TS 23.060: \"General Packet Radio Service (GPRS) Service description; Stage 2\".\n[20]\t3GPP TS 23.221: \"Architecture requirements\".\n[21]\t3GPP TS 23.203: \"Policy and Charging Control Architecture\".\n[22]\t3GPP TS 29.212: \"Policy and Charging Control (PCC); Reference points\".\n[23]\t3GPP TS 29.213: \"Policy and Charging Control signalling flows and QoS parameter mapping\".\n[24]\t3GPP TS 29.214: \"Policy and Charging Control over Rx reference point\".\n[25]\t3GPP TS 29.208: \"End-to-end Quality of Service (QoS) signalling flows\".",
      "chunk_type": "general",
      "cross_references": [
        "ts_22.228",
        "ts_23.002",
        "ts_23.107",
        "ts_23.228",
        "ts_21.905",
        "ts_23.060",
        "ts_23.221",
        "ts_23.203",
        "ts_29.212",
        "ts_29.213",
        "ts_29.214",
        "ts_29.208"
      ]
    },
    {
      "chunk_id": "ts_23.207_3.1",
      "section_id": "3.1",
      "section_title": "Definitions",
      "content": "RSVP: Resource ReSerVation Protocol: The RSVP protocol, RFC 2205 [9], is used by a host to request specific qualities of service from the network for particular application data streams or flows. The network responds by explicitly admitting or rejecting RSVP requests.\nDiffServ: DiffServ networks classify packets into one of a small number of aggregated flows or \"classes\", based on the DiffServ codepoint (DSCP) in the packet's IP header. This is known as behaviour aggregate (BA) classification (RFC 2475 [6]). At each DiffServ router, packets are subjected to a \"per-hop behaviour\" (PHB), which is invoked by the DSCP (RFC 2474 [17]).\nIntServ: The integrated services architecture RFC 1633 [12] defined a set of extensions to the traditional best effort model of the Internet with the goal of allowing end-to-end QOS to be provided to applications. One of the key components of the architecture is a set of service definitions; the current set of services consists of the controlled load and guaranteed services. The architecture assumes that some explicit setup mechanism is used to convey information to routers so that they can provide requested services to flows that require them. While RSVP is the most widely known example of such a setup mechanism, the IntServ architecture is designed to accommodate other mechanisms.\nApplication Function: The Application Function (AF) is an element offering applications that require the control of IP bearer resources . The AF is capable of communicating with the PCRF to transfer dynamic QoS-related service information. One example of an AF is the P-CSCF of the IM CN subsystem.\nAF session: An AF session is established by an application level signalling protocol offered by the AF that requires a session set-up with explicit session description before the use of the service. One example of an AF session is an IMS session.\nAF session signalling: AF session signalling is used to control the AF session. One example of AF session signalling is SIP/SDP.\nPolicy control: The process whereby the Policy and Charging Rules Function (PCRF) indicates to the Policy and Charging Enforcement Function (PCEF) how to control the IP-CAN bearer. Policy control includes QoS control and/or gating control.",
      "chunk_type": "definition",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.207_3.2",
      "section_id": "3.2",
      "section_title": "Abbreviations",
      "content": "For the purpose of the present document, the following abbreviations apply:\nAF\tApplication Function\nAPN\tAccess Point Name (*)\nDiffServ\tDifferentiated Services\nDSCP\tDiffServ Code Point\nGERAN\tGSM/EDGE Radio Access Network (*)\nGGSN\tGateway GPRS Support Node (*)\nHTTP\tHypertext Transfer Protocol (*)\nIMS\tIP Multimedia Subsystem\nIntServ\tIntegrated Services\nLAN\tLocal Area Network\nLDP\tLabel Distribution Protocol\nMPLS\tMultiprotocol Label Switching Architecture\nPCC\tPolicy and Charging Control\nPCEF\tPolicy and Charging Enforcement Function\nPHB\tPer Hop Behaviour\nPCRF\tPolicy and Charging Rules Function\nRNC\tRadio Network Controller (*)\nSDP\tSession Description Protocol\nSIP\tSession Initiation Protocol (*)\nSNMP\tSimple Network Management Protocol (*)\nTFT\tTraffic Flow Template (*)\n*\tThis abbreviation is covered in TR 21.905 [5], version 4.2.0.",
      "chunk_type": "general",
      "cross_references": [
        "ts_21.905"
      ]
    },
    {
      "chunk_id": "ts_23.207_4.1",
      "section_id": "4.1",
      "section_title": "End-to-End QoS Negotiation Requirements",
      "content": "-\tThe UMTS QoS negotiation mechanisms used for providing end-to-end QoS shall be backward compatible with UMTS Release 1999.\n-\tThe UMTS QoS negotiation mechanisms used for providing end-to-end QoS shall not make any assumptions about the situation in external networks which are not within the scope of 3GPP specifications.\n-\tThe UMTS QoS negotiation mechanisms used for providing end-to-end QoS shall not make any assumptions about application layer signalling protocols.\n-\tNo changes to non-UMTS specific QoS negotiation mechanisms.\n-\tThe UMTS QoS negotiation mechanisms used for providing end-to-end QoS shall not make any assumptions about applications which may be used on terminal equipment attached to mobile terminals.\n-\tUnnecessary signalling complexity and processing complexity in the network elements as well as the mobile terminal shall be avoided.\n-\tUnnecessary signalling traffic due to end-to-end QoS negotiation shall be avoided.\n-\tMethods for user authentication as well as billing and charging mechanisms related to the end-to-end QoS negotiation shall be kept as simple as possible.\n-\tMinimum changes to network architecture and mechanisms due to introduction of end-to-end QoS negotiation.\n-\tIt shall be possible for an application on the external device to request end-to-end QoS.",
      "chunk_type": "requirement",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.207_4.2",
      "section_id": "4.2",
      "section_title": "QoS Policy Requirements",
      "content": "-\tThe UMTS policy mechanisms described in TS 23.060 [19] shall be used for control of the UMTS bearers.\n-\tInteraction between UMTS bearer services and IP bearer services shall only occur at the translation function in the UE and GGSN.",
      "chunk_type": "requirement",
      "cross_references": [
        "ts_23.060"
      ]
    },
    {
      "chunk_id": "ts_23.207_5.1",
      "section_id": "5.1",
      "section_title": "QoS Management Functions in the Network",
      "content": "To provide IP QoS end-to-end, it is necessary to manage the QoS within each domain. An IP BS Manager is used to control the external IP bearer service. Due to the different techniques used within the IP network, this communicates to the UMTS BS manager through the Translation function.\nAt PDP context setup the user shall have access to one of the following alternatives:\n-\tBasic GPRS IP connectivity service: The bearer is established according to the user's subscription, local operator's IP bearer resource based policy, local operator's admission control function and GPRS roaming agreements. In this case, IP bearer resource based local policy decisions may be applied to the bearer.\n-\tEnhanced GPRS based services: The bearer is used to support an enhanced application-layer service, such as IM. In this case, policy control decisions (e.g., authorization and policy based control) are also applied to the bearer.\nTo enable coordination between events in the application layer and resource management in the IP bearer layer, a logical element, the Policy and Charging Rules Function (PCRF), is used as a logical policy decision element. It is also possible to implement a policy decision element internal to the IP BS Manager in the GGSN. The IP policy architecture does not mandate the policy decision point to be external to the GGSN.\nWhenever resources not owned or controlled by the UMTS network are required to provide QoS, it is necessary to interwork with the external network that controls those resources. Interworking may be realised in a number of ways, including:\n-\tsignalling along the flow path (e.g. RSVP, LDP).\n-\tpacket marking or labelling along the flow path (e.g. DiffServ, MPLS)\n-\tinteraction between Policy Control and/or Resource Management elements.\n-\tService Level Agreements enforced by the border routers between networks.\nFor the policy control the following should apply:\n-\tThe IP policy framework employed in UMTS should, as far as possible, conform to IETF \"Internet Standards\". The IETF policy framework may be used for policy decision, authorization, and control of the IP level functionality, at both user and network level.\n-\tThere should be separation between the scope and roles of the UMTS policy mechanisms and the IP policy framework. This is to facilitate separate evolution of these functions.",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.207_5.1.1.1",
      "section_id": "5.1.1.1",
      "section_title": "QoS management functions for end-to-end IP QoS in UMTS Network",
      "content": "NOTE:\tThe end-to-end QoS management functions do not cover the cases of a circuit switched service, or an IP service interworking with an ATM service at the gateway node.\nIP BS Manager uses standard IP mechanisms to manage the IP bearer services. These mechanisms may be different from mechanisms used within the UMTS, and may have different parameters controlling the service. When implemented, the IP BS Manager may include the support of DiffServ Edge Function and the RSVP function. The Translation/mapping function provides the inter-working between the mechanisms and parameters used within the UMTS bearer service and those used within the IP bearer service, and interacts with the IP BS Manager. In the GGSN, the IP QoS parameters are mapped into UMTS QoS parameters, where needed. In the UE, the QoS requirements determined from the application layer (e.g., SDP) are mapped to either the PDP context parameters or IP layer parameters (e.g., RSVP).\nIf an IP BS Manager exists both in the UE and the Gateway node, it is possible that these IP BS Managers communicate directly with each other by using relevant signalling protocols.\nThe required options in the table define the minimum functionality that shall be supported by the equipment in order to allow multiple network operators to provide interworking between their networks for end-to-end QoS. Use of the optional functions listed below, other mechanisms which are not listed (e.g. over-provisioning), or combinations of these mechanisms are not precluded from use between operators.\nThe IP BS Managers in the UE and GGSN provide the set of capabilities for the IP bearer level as shown in table 1. Provision of the IP BS Manager is optional in the UE, and required in the GGSN.\nTable 1: IP BS Manager capability in the UE and GGSN\nCapability\nUE\nGGSN\nDiffServ Edge Function\nOptional\nRequired\nRSVP/IntServ\nOptional\nOptional\nIP Policy Enforcement Point\nOptional\nRequired (*)\n(*)\tAlthough the capability of IP policy enforcement is required within the GGSN, the control of IP policy through the GGSN is a network operator choice.\nFigure 2 shows the scenario for control of an IP service using IP BS Managers in both possible locations in the UE and Gateway node. The figure also indicates the optional communication path between the IP BS Managers in the UE and the Gateway node.\nPolicy and Charging Rules Function (PCRF) encompasses policy control decision and flow based charging control functionalities. The PCRF provides network control regarding the service data flow detection, gating, and QoS towards the GGSN. The PCRF makes policy control decisions, and communicates these decisions to the IP BS Manager in the GGSN, which is the Policy and Charging Enforcement Point (PCEF).\nThe interface between the PCRF and the Application Function (AF) is the Rx interface, and is included in the Reference Architecture depicted in TS 23.002 [2].\nThe interface between the PCRF and GGSN is specified within 3GPP, named Gx interface, and is included in the Reference Architecture depicted in TS 23.002 [2]. The interface between the PCRF and GGSN supports the transfer of information and policy decisions between the policy decision point and the IP BS Manager in the GGSN.\nThe PCRF makes policy decisions based on input obtained from the AF as well as from other sources, e.g. operator configuration. The PCRF maps the policy set-up information received from the AF via the Rx interface into IP QoS parameters. The PCRF is in the same domain as the GGSN. The AF may either be in the same network as the PCRF or may be in a different network. In the particular case of IMS, the AF is the P-CSCF which is in the same network as the GGSN, as specified in TS 23.221 [20].\nApplication Function (AF) offers services that require the control of IP bearer resources. The AF maps QoS-related application level parameters (e.g. SDP) into policy set-up information, and sends this information to the PCRF via the Rx interface.",
      "chunk_type": "general",
      "cross_references": [
        "table_1",
        "figure_2",
        "ts_23.002",
        "ts_23.221"
      ]
    },
    {
      "chunk_id": "ts_23.207_5.1.1.3",
      "section_id": "5.1.1.3",
      "section_title": "Interaction to External Networks",
      "content": "Within the UMTS network, there is resource management performed by various nodes in the admission control decision. The resources considered here are under the direct control of the UMTS network.\nIn IP Networks, it is also necessary to perform resource management to ensure that resources required for a service are available. Where the resources for the IP Bearer Service to be managed are not owned by the UMTS network, the resource management of those resources would be performed through an interaction between the UMTS network and that external network.\nIn addition, where the UMTS network is also using external IP network resources as part of the UMTS bearer service (for example for the backbone bearer service), it may also be necessary to interwork with that network.\nThe GGSN shall support DiffServ edge functionality. There are a number of other mechanisms provided to support interoperator interworking, some of which are given below.\nNOTE:\tThis list is not exhaustive. Other options are possible.\n-\tSignalling along the flow path: In this scenario, resource requirements are explicitly requested and either granted or rejected through the exchange of signalling messages between network elements along the path of the IP packet flow. Signalling may be performed on a per-flow basis (e.g. using end to end RSVP) or it may be performed for an aggregate set of flows. In the latter case, it is expected that signalling exchanges would only be required when there are changes required in the resources allocated to an aggregate set of flows.\n-\tInteraction between network management entities: In this scenario, resource requirements need to be explicitly negotiated and provisioned through network management entities. The results of this exchange are then enforced in the border nodes separating DiffServ administrative domains.\n-\tService Level Agreements enforced by the border routers between networks: In this scenario, resources are allocated along the path based on agreements between the network operators. The border routers along the path flow are provisioned with the characteristics of the aggregated traffic that is allowed to flow between systems.",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.207_5.1.1.4",
      "section_id": "5.1.1.4",
      "section_title": "Translation/mapping function in the GGSN and the UE",
      "content": "Translation/mapping function interacts with the IP BS Manager and with the UMTS BS Manager in the GGSN and in the UE. It provides interworking between the mechanisms and parameters used within the UMTS bearer service and those used within the IP bearer service.\nFor policy control, the translation/mapping function in the GGSN maps IP bearer based policy information into UMTS bearer based policy information. This mapping is used by the GGSN for policy control over the UMTS network.",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.207_5.1.2.1",
      "section_id": "5.1.2.1",
      "section_title": "QoS management functions for end-to-end IP QoS",
      "content": "The QoS management functions for controlling the external IP bearer services and how they relate to the UMTS bearer service QoS management functions are shown in Figure 2.\nFigure 2:\tQoS management functions for UMTS bearer service in the control plane and QoS management functions for end-to-end IP QoS\nNOTE 1:\tThe dimmed boxes in Figure 2 are clarified in TS 23.107 [3].\nNOTE 2:\tThe UE is only shown as a combined element, but it may also consist of a split TE/MT. Standardization of the interface and operation within a split UE is outside the scope of this TS.",
      "chunk_type": "general",
      "cross_references": [
        "figure_2",
        "ts_23.107_figure_2",
        "ts_23.107"
      ]
    },
    {
      "chunk_id": "ts_23.207_5.2",
      "section_id": "5.2",
      "section_title": "Capabilities of Functional Elements",
      "content": "This clause provides functional descriptions of capabilities in GGSN, UE, PCRF, and AF.",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.207_5.2.1",
      "section_id": "5.2.1",
      "section_title": "GGSN",
      "content": "This clause provides functional descriptions of capabilities in GGSN. The capabilities are part of IP BS Manager (see 5.1.1.1) or corresponding user plane functions. Determination of exactly which functions are required to support interoperator and multi-vendor aspects are not addressed in this clause.\nThe DiffServ Edge Function shall be compliant to the IETF specifications for Differentiated Services (RFC 2475 [6]). The IETF Differentiated Services architecture will be used to provide QoS for the external bearer service.\nParameters for the DiffServ Edge Function (i.e. classifiers, meters, packet handling actions) may be statically configured on the GGSN, derived from PDP Context parameters and/or derived from RSVP signalling.\nDiffServ functions configured on the basis of PDP Context parameters consist of marking user packets. The DSCP to be used is derived from the PDP Context parameters according to statically configured rules.\nStatically configured DiffServ functions may include classifiers, meters, markers, droppers and shapers acting on uplink traffic.\nPolicy and Charging Enforcement Function (PCEF) controls the user plane quality of service that is provided including policy-based admission control that is applied to the bearer and gating control. Policy decisions are either pushed to or requested by the GGSN via the Gx interface.\nPolicy-based admission control ensures that the resources that can be used by a particular set of IP flows are within the \"authorized resources\" specified via the Gx interface. The authorized resources provide an upper bound on the resources that can be reserved or allocated for the set of IP flows.\nThe authorized resources are expressed as a maximum authorized bandwidth and QoS class. The QoS class identifies a bearer service (which has a set of bearer service characteristics associated with it). The PCRF generates a maximum authorized QoS class for the set of IP flows. This information is mapped by the translation/mapping function in the GGSN to give the authorized resources for UMTS bearer admission control.\nIn the user plane, policy enforcement for an individual or a set of IP flows is defined in terms of a \"gate\" implemented in the GGSN. A gate is part of the policy enforcement functionality and is controlled by the PCRF through Gx interface signalling. A gate consists of a packet classifier, and a gate status (open/closed). When a gate is open, the packets matching the packet classifier are accepted, and are thus subject to the DiffServ edge treatment in uplink direction or forwarded in their corresponding PDP context in downlink direction. When a gate is closed, all of the packets matching the packet classifier are dropped.",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.207_5.2.2",
      "section_id": "5.2.2",
      "section_title": "UE",
      "content": "This clause provides functional descriptions of capabilities in UE. The capabilities are part of IP BS Manager (see 5.1.1.1) or corresponding user plane functions. Determination of exactly which functions are required to support interoperator and multi-vendor aspects are not addressed in this clause.\nDiffServ Edge Function acts as a DiffServ (DS) boundary for the traffic from applications running on the UE. As specified in RFC 2475 [6], DS boundary node must be able to apply the appropriate PHB to packets based on the DS code point. In addition, DS boundary nodes may be required to perform traffic conditioning functions. When GGSN DiffServ marking is used, the DiffServ edge function in the UE is not needed.\nRSVP/IntServ Function provides the capability for the UE to request end-to-end QoS using RSVP messages as defined in IETF standards. RSVP messages may also be used by the network to inform the DSCP to be used by the UE. RSVP messages shall include the authorization token and flow identifier(s) in a policy data object if the authorization token is available in the UE. RSVP may be used to trigger PDP context activation/modification. The inter-working between MT and TE is FFS.",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.207_5.2.3",
      "section_id": "5.2.3",
      "section_title": "Void",
      "content": "5.2.3a\tPCRF\nThis clause provides high level functional descriptions of PCRF capabilities. The PCRF makes policy decisions, e.g. based on policy set-up information obtained from the AF via the Rx interface.\n-\tThe PCRF checks that if the policy set-up information received from the AF is consistent with operator policies defined in the PCRF.\n-\tThe PCRF authorizes QoS resources (bandwidth, etc.) for the AF session. The PCRF uses the policy set-up information received from the AF to calculate the proper authorization. The authorization includes the limits on QoS for the set of IP flows and restrictions on individual IP flows (e.g. destination address and port).\n-\tThe PCRF decides if new QoS authorization (bandwidth, etc.) is needed due to a mid-call media or codec change. The PCRF re-authorizes QoS resources when the resources requested by the UE for a flow exceeds previous authorization, or a new flow is added, or when elements of the packet classifier(s) for authorized flows change.\n-\tThe PCRF provides the policy decision information to the GGSN via the Gx interface.\n-\tThe PCRF provides gating control decisions controlling the gate for the authorized media stream.\n-\tAt AF session release, the PCRF revokes the QoS resource authorization for the AF session.\nFor further details, see TS 23.203 [21].",
      "chunk_type": "general",
      "cross_references": [
        "ts_23.203"
      ]
    },
    {
      "chunk_id": "ts_23.207_5.2.4",
      "section_id": "5.2.4",
      "section_title": "Application Function (AF)",
      "content": "The Application Function (AF) is an element offering applications that require the control of IP bearer resources (e.g. UMTS PS domain/GPRS domain resources). One example of an Application Function is the P-CSCF in the IMS architecture.\nPolicy control related functions\n-\tThe AF uses the Rx interface to exchange service based policy set-up information with the PCRF. This applies both during session establishment, as well as upon a mid-session modification affecting the media (e.g. addition of a new media in mid-session).\n-\tThe AF may give instructions to the PCRF defining how the PCRF shall interact with the PCEF for certain events related to policy control. The AF is able to give instructions to the PCRF to act on its own, i.e. based on the service information currently available, for the following events:\n-\tThe authorization of QoS resources for the AF session;\n-\tThe gate control (i.e. whether there is a common gate handling per AF session or an individual gate handling per AF session component required);\n-\tThe forwarding of transmission resource level events.\nFor further details, see TS 23.203 [21].",
      "chunk_type": "general",
      "cross_references": [
        "ts_23.203"
      ]
    },
    {
      "chunk_id": "ts_23.207_5.3",
      "section_id": "5.3",
      "section_title": "Void",
      "content": "5.3a\tVoid\n5.3b\tGx reference point (PCRF – GGSN)\nThe Gx interface is the interface between the PCRF and the GGSN. The Gx interface allows policy control and QoS information to be \"pushed\" to or requested by the GGSN from the PCRF. The Gx interface provides information to support the policy enforcement functions in the GGSN:\n-\tControl of \"gating\" function in GGSN;\n-\tUMTS bearer authorization.\nFor further details, see TS 23.203 [21].\n5.3c\tRx reference point (AF - PCRF)\nThe Rx interface is the interface between the AF and the PCRF. The Rx interface is used for policy set-up information exchange and event reporting.\nThe Rx interface allows service based QoS information needed for QoS authorization to be exchanged between the AF and the PCRF. This information is used by the PCRF for policy control decisions.\nOne PCRF is able to serve more than one AF and one given AF may interact with a number of PCRFs. On a per-AF-session basis, the AF interacts with only a single PCRF.\nFor further details, see TS 23.203 [21].",
      "chunk_type": "general",
      "cross_references": [
        "ts_23.203"
      ]
    },
    {
      "chunk_id": "ts_23.207_5.4",
      "section_id": "5.4",
      "section_title": "QoS Parameters",
      "content": "See stage 3 specification TS 29.212 [22].",
      "chunk_type": "parameter",
      "cross_references": [
        "ts_29.212"
      ]
    },
    {
      "chunk_id": "ts_23.207_5.5",
      "section_id": "5.5",
      "section_title": "QoS Parameter Mapping",
      "content": "See stage 3 specification TS 29.213 [23].",
      "chunk_type": "parameter",
      "cross_references": [
        "ts_29.213"
      ]
    },
    {
      "chunk_id": "ts_23.207_6.1",
      "section_id": "6.1",
      "section_title": "QoS Procedures in Functional Elements",
      "content": "This clause describes the main procedures that are used for the end-to-end QoS management. These procedures are described in text description for each involved network elements. The procedures described in this document are meant to provide a high level description for further Stage 3 work and are not intended to be exhaustive.",
      "chunk_type": "procedure",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.207_6.1.1",
      "section_id": "6.1.1",
      "section_title": "Procedures in the GGSN",
      "content": "The QoS procedures in the GGSN are triggered by the QoS signalling messages from the UE or unsolicited provisioning of PCC rules from the PCRF. The exact QoS procedures in the GGSN depend on the GGSN and UE QoS capabilities. The GGSN is required to support DiffServ edge function. Other QoS capabilities that may be supported at the GGSN are RSVP functions and policy enforcement functions.\nFor UEs that do not support RSVP, the GGSN may use the PDP context level information to configure the DiffServ edge functionality and provide internetworking between PDP context and backbone IP network. The authorization token is included in the PDP context activation/modification messages.\nFor UEs that support RSVP, the GGSN may also support RSVP and use RSVP rather than the PDP context to control the QoS through the backbone IP network. The authorization token may be included in the RSVP signalling and the PDP context activation/modification messages. Alternatively, the RSVP messages may pass transparently through the GGSN.\nFor details on PCC functionality in GGSN, see TS 23.203 [21].",
      "chunk_type": "procedure",
      "cross_references": [
        "ts_23.203"
      ]
    },
    {
      "chunk_id": "ts_23.207_6.1.2",
      "section_id": "6.1.2",
      "section_title": "Procedures in the UE",
      "content": "The QoS procedures in the UE are triggered by the application layer (e.g., SIP/SDP) QoS requirements or initiated by the network. The exact QoS procedures in the UE depend on the UE QoS capabilities.\nFor UEs that support only UMTS QoS mechanism, the network or the application QoS requirements will trigger a PDP Context Activation procedure with the corresponding UMTS QoS parameters. For UEs that support both IP (e.g., IP BS Manager) and UMTS QoS mechanism, the application QoS requirements are mapped down to the IP layer QoS parameters. The IP layer parameters are further mapped down to the PDP context parameters in the UE. For UEs that support RSVP, the application QoS requirements are mapped down to create an RSVP session. The UE shall establish a PDP context suitable for support of the RSVP session.\nAt the AF session release, the UE shall release all QoS resources allocated for the AF session.\nFor details on PCC functionality in the UE, see TS 23.203 [21].",
      "chunk_type": "procedure",
      "cross_references": [
        "ts_23.203"
      ]
    },
    {
      "chunk_id": "ts_23.207_6.1.3",
      "section_id": "6.1.3",
      "section_title": "Void",
      "content": "6.1.3a\tProcedures in the PCRF\nThe QoS procedures at the PCRF are triggered by the IP-CAN session establishment as reported from a PCEF and, for an active IP-CAN session, IP-CAN session modification or service information from an AF.\nWhen the PCRF receives service information from the AF, the PCRF authorizes the QoS resources or rejects the service information received from the AF. If the PCRF rejects the authorization request, the PCRF may indicate in the response to the AF the service information that could be accepted by the PCRF.\nAs part of the authorization, the PCRF shall perform the mapping from the service information conveyed over the Rx interface to the Authorized QoS sent over the Gx interface.\nThe authorized QoS is either pushed to or requested by the GGSN via the Gx interface.\nThe PCRF makes a final decision to enable the allocated QoS resource for the authorized IP flows. This may be triggered by an instruction from the AF. QoS resources may also be enabled at the time they are authorized by the PCRF.\nWhen the AF receives updated session description information, the AF may send an update for service information to the PCRF. The PCRF decides if a new QoS authorization is needed and updates the authorization for the session accordingly. If the PCRF does not accept the service information received from the AF, the PCRF rejects the update for service information. The PCRF may indicate in the response to the AF the service information that could be accepted by the PCRF.\nThe PCRF revokes the resource authorization based on request from the AF.\nFor details on the PCC functionality in the PCRF, see TS 23.203 [21].",
      "chunk_type": "general",
      "cross_references": [
        "ts_23.203"
      ]
    },
    {
      "chunk_id": "ts_23.207_6.1.4",
      "section_id": "6.1.4",
      "section_title": "Procedures in the AF",
      "content": "The AF communicates with the PCRF to transfer dynamic session information, required for PCRF decisions as well as to receive information and notifications about IP transmission resource level events.\nThe AF contacts the PCRF when it receives an AF session signalling message initiating a new AF session:\n-\tThe AF contacts the PCRF that is responsible for the UE.\nNOTE:\tThere is one PCRF responsible for the IP-CAN session of the UE.\tThis implies that for all AF sessions to and from the same UE with the same UE IP address, the AF(s) interacts with the same PCRF. This also implies that if different AF sessions of a user are controlled by different AFs, then all these AFs will interact with the same PCRF. Hence, the bearer authorization of the PDP Context(s) carrying the media of these AF sessions will be performed by the same PCRF.\n-\tThe AF generates the information (e.g. service information) conveyed over the Rx interface from the application specific media description (e.g. SDP media description).\n-\tThe PCRF uses the service information for the QoS policy set up for the AF session. During an AF session change, the AF sends an update for service information to the PCRF based on the new session description information exchanged within AF session signalling.\nThe AF orders the PCRF to enable or disable a media to pass through the access network. The AF may instruct the PCRF to either wait for an explicit command or enable the media as part of the authorization of the QoS for the media. The AF may use an explicit command to disable the media e.g. when a media component of an AF session is put on hold.\nAt AF session release, the AF revokes any granted resource authorization.\nFor details on the PCC functionality in the AF, see TS 23.203 [21].",
      "chunk_type": "procedure",
      "cross_references": [
        "ts_23.203"
      ]
    },
    {
      "chunk_id": "ts_23.207_6.2",
      "section_id": "6.2",
      "section_title": "IP Bearer Level / Application Level Binding Mechanism",
      "content": "See TS 23.203 [21].",
      "chunk_type": "general",
      "cross_references": [
        "ts_23.203"
      ]
    },
    {
      "chunk_id": "ts_23.207_6.3",
      "section_id": "6.3",
      "section_title": "Session Flow: QoS Interaction Procedures",
      "content": "This clause highlights possible additions to the GPRS bearer establishment procedures specified in TS 23.060 [19] for support of Policy and Charging Control (PCC). These additional procedures are utilized to provide Policy and Charging Control for session-based services, e.g. for IMS as described in clause 5 of TS 23.228 [4].\nFor IMS where PCC is not used, the related procedures defined in TS 23.228 [4] are not applied.\nDetailed specification of the additional procedures are given in TS 23.203 [21].\nIt shall be possible according to operator choice to use solely the GPRS bearer establishment procedures specified in TS 23.060 [19] without these additions.",
      "chunk_type": "procedure",
      "cross_references": [
        "ts_23.228_clause_5",
        "ts_23.060",
        "ts_23.228",
        "ts_23.203"
      ]
    },
    {
      "chunk_id": "ts_23.207_6.3.2.2",
      "section_id": "6.3.2.2",
      "section_title": "Resource Reservation with IP QoS signalling",
      "content": "Editor's note:\tThere is still ongoing work in IETF on new IP QoS signalling techniques, hence it is not possible to include flows using those new techniques into this version of the specification. Procedures describing resource reservation with end-to-end RSVP are described in Annex X.",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.207_6.3.2.3",
      "section_id": "6.3.2.3",
      "section_title": "Resource Reservation with IP QoS reservation signalling and Service-based Local Policy",
      "content": "Editor's note:\tThere is still ongoing work in IETF on new IP QoS signalling techniques, hence it is not possible to include flows using those new techniques into this version of the specification. Procedures describing resource reservation with end-to-end RSVP and Service-based Local Policy are described in Annex X.",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.207_6.3.6",
      "section_id": "6.3.6",
      "section_title": "Void",
      "content": "6.3.6a\tVoid",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.207_6.4",
      "section_id": "6.4",
      "section_title": "PDP Context Used for Application Level Signalling Transport",
      "content": "To establish a PDP context for application level signalling, the UE shall be able to include a signalling flag in PDP context activation procedure. This indicates to the network the intention of using the PDP context for application level signalling. The only defined application level signalling flag in this release is the IM CN subsystem signalling flag. However, the network may also support other mechanisms that cater for identifying application level signalling flows within a PDP context, as described in TS 23.228 [4] clause 4.2.6.\nTo establish a PDP context for application level signalling with prioritised handling over the radio interface, the UE shall be able to set the Signalling Indication in the QoS IE in the PDP context activation procedure. The Signalling indication in the QoS IE indicates to the radio and core networks the requirement for enhanced handling over the radio interface, once it has been negotiated with the networks.\nA request for a general purpose PDP context having the \"signalling indication\" within the QoS IE may be accepted or downgraded according to operator policy configured at the GGSN using the usual QoS negotiation mechanisms described in TS 23.060 [19].\nIn the case of IMS, the IM CN Signalling Flag in the PCO IE is used to reference rules and restrictions on the PDP context used for application level signalling, as described in TS 23.228 [4] clause 4.2.6.\nThe IM CN Signalling Flag and the Signalling indication in the QoS profile detailed in TS 23.107 [3] may be used independently of each other.\nBased on operator policy the \"Signalling Indication\" in the QoS IE may be allowed only if the \"IM CN Subsystem Signalling\" flag is present in the PCO IE.\nAnnex A (informative):QoS Conceptual Models\nA.1\tIntroduction\nThere are many different end-to-end scenarios that may occur from a UE connected to a UTMS network. The following examples depict how end-to-end QoS will be delivered for a number of scenarios that are considered to be significant.\nNOTE:\tFurther consideration of scenarios 2 and 3 is not needed for Stage 3 work in the Release 5 timeframe. The normative aspects of scenarios 2 and 3 are considered to be already covered by scenario 1.\nIn all the scenarios presented below, the network architecture is as shown in Figure A.1 below.\nFigure A.1: Network Architecture for QoS Conceptual Models\nNOTES:\n-\tAlthough the backbone IP network is shown as a single domain, it may consist of a number of separate domains.\n-\tThe structure of the Local UE is not specified. It includes cases from a simple host, to a gateway to a network such as a LAN. If the UE is acting as a gateway, it is responsible for providing the IP BS Management towards the extended network.\n-\tThe remote side is shown as a simple host. Other more complex cases on the remote side such as a private LAN with over-provisioning, or possibly LAN priority marking, and DiffServ and/or RSVP capable routing elements is not depicted. It is envisaged however that interworking between the QoS mechanisms in a more complex remote user side could also be performed with some similarities to the mechanisms shown at the local side.\nThe reference point shown at the UE is at the interface to the UE. Within the UE, the QoS control could be derived from any of the mechanisms that occur across that reference point, or it could use a different mechanism internally.\nAlthough the scenarios currently identified are mainly using DiffServ in the backbone IP network (RSVP is indicated as an alternative in scenario 4), it is not mandated that DiffServ must be used in the backbone IP network. Other mechanisms, for example, over-provisioning and aggregated RSVP may be used.\nA.2\tScenarios\nThese scenarios give examples of concatenating QoS mechanisms in different parts of the network which together can deliver an end-to-end QoS. These scenarios are not intended to describe the details of the interworking between the QoS mechanisms.\nThe different scenarios involve cases with and without service based local policy. Each scenario describes the applicable cases, possibly by referencing another scenario. In some scenarios, only one of the cases may be valid (e.g. scenario 5). Where both cases are covered, they may be described together identifying the optionality, or separately for clarity of the individual cases.\nThe optional authorisation token is associated with the cases involving service based local policy, and is applicable for IM services. It is an operator decision whether or not to support service based local policy for IM services. If service based local policy is not supported, or not applicable (i.e. not IM service), then the optional authorisation token and application server at the P-CSCF are not used.\nIM services not using service based local policy will typically follow scenarios 1 to 4. IM services using service based local policy will typically follow scenarios 3 to 5.\nNOTE:\tScenario 5 is reserved for the IP multimedia services involving, e.g., SIP signalling , IP policy control, and subscription checking.\nA.2.1\tScenario 1\nThe UE does not provide an IP BS Manager. The end-to-end IP QoS bearer service towards the remote terminal is controlled from the GGSN.\nThe scenario assumes that the GGSN supports DiffServ edge functions, and the backbone IP network is DiffServ enabled.\nNOTE:\tThe UE may always include an authorisation token in establishment of the PDP context. Inclusion of the authorisation token in scenario 1 changes the QoS mechanisms to be the same as those described in scenario 5. Therefore, please refer to scenario 5 if the authorisation token is included.\nThe application layer (e.g. SIP/SDP) between the end hosts identifies the QoS requirements. The QoS requirements determined from the application layer (e.g. TS 23.228 [4] describes interworking from SIP/SDP to QoS requirements) are mapped down to PDP context parameters in the UE.\nIn this scenario, the control of the QoS over the UMTS access network (from the UE to the GGSN) may be performed either from the terminal using the PDP context signalling, or from the SGSN by subscription data.\nThe IP QoS for the downlink direction is controlled by the remote terminal up to the GGSN. The GGSN will apply receiver control DiffServ edge functions and can reclassify the data (remarking the DiffServ Code Point (DSCP)). This may affect the QoS applied to the data over the UMTS access (the TFT may use the DSCP to identify the data to be allocated to the PDP context).\nThe end-to-end QoS is provided by a local mechanism in the UE, the PDP context over the UMTS access network, DiffServ through the backbone IP network, and DiffServ in the remote access network in the scenario shown in the figure below. The GGSN provides the interworking between the PDP context and the DiffServ function. However, the interworking may use information about the PDP context which is established, or be controlled from static profiles, or dynamically through other means such as proprietary HTTP based mechanisms. The UE is expected to be responsible for the control of the PDP context, but this may instead be controlled from the SGSN by subscription.\nFigure A.2: Local UE does not provide IP BS Manager\nNotes:\n-\tThe solid horizontal lines indicate the mechanism that is providing QoS for the flow of data in the direction indicated.\n-\tThe dashed horizontal lines indicate where QoS control information is passed that is not directly controlling the QoS in that link/domain.\n-\tThe arrows on the horizontal lines indicate nodes that receive information about QoS from that mechanism, even if that mechanism is not used to control the QoS over that link/domain.\n-\tThe solid vertical lines indicate interworking between the different mechanisms.\n-\tIn the figure, the term RAP refers to the Remote Access Point, and RUE is the Remote UE.\nNo solid vertical line is shown from DiffServ to PDP flow on the downlink at the GGSN. The TFT determines the QoS applicable over the UMTS access. However, the configuration of the TFT may use the DiffServ to select the PDP context to be applied, so there may be interworking between DiffServ and the PDP Flow via the TFT filters.\nA.2.2\tScenario 2\nThe UE performs an IP BS function which enables end-to-end QoS without IP layer signalling towards the IP BS function in the GGSN, or the remote terminal.\nThe scenario assumes that the UE and GGSN support DiffServ edge functions, and that the backbone IP network is DiffServ enabled.\nNOTE:\tThe UE may always include an authorisation token in establishment of the PDP context. Inclusion of the authorisation token in scenario 2 changes the QoS mechanisms to be the same as those described in scenario 5. Therefore, please refer to scenario 5 if the authorisation token is included.\nThe application layer (e.g. SIP/SDP) between the end hosts identifies the QoS needs. The QoS requirements from application layer (e.g. TS 23.228 [4] describes interworking from SIP/SDP to QoS requirements) are mapped down to the IP layer. The IP layer service requirements are further mapped down to the PDP context parameters in the UE.\nIn this scenario, the control of the QoS over the UMTS access network (from the UE to the GGSN) may be performed either from the terminal using the PDP context signalling. Alternatively, subscription data accessed by the SGSN may override the QoS requested via signalling from the UE (according to the procedures specified in TS 23.060 [19]).\nIn this scenario, the terminal supports DiffServ to control the IP QoS through the backbone IP network.\nThe IP QoS for the downlink direction is controlled by the remote terminal up to the GGSN. The PDP context controls the QoS between the GGSN and the UE. The UE may apply DiffServ edge functions to provide the DiffServ receiver control. Otherwise, the DiffServ marking from the GGSN will determine the IP QoS applicable at the UE.\nThe end-to-end QoS is provided by a local mechanism in the UE, the PDP context over the UMTS access network, DiffServ through the backbone IP network, and DiffServ in the remote access network in the scenario shown in the figure below. The UE provides control of the DiffServ, and therefore determines the appropriate interworking between the PDP context and DiffServ.\nThe GGSN DiffServ edge function may overwrite the DSCP received from the UE, possibly using information regarding the PDP context which is signalled between the UMTS BS managers and provided through the translation/mapping function to the IP BS Manager.\nNote that DiffServ control at the Remote Host is shown in this example. However, other mechanisms may be used at the remote end, as demonstrated in the other scenarios.\nFigure A.3: Local UE supports DiffServ\nA.2.3\tScenario 3\nThe UE performs an IP BS function which enables end-to-end QoS using IP layer signalling towards the remote end. There is no IP layer signalling between the IP BS Managers in the UE and the GGSN. However, the GGSN may make use of information regarding the PDP context which is signalled between the UMTS BS managers and provided through the translation/mapping function.\nThis scenario assumes that the UE and GGSN support DiffServ edge functions, and that the backbone IP network is DiffServ enabled. In addition, the UE supports RSVP signalling which interworks within the UE to control the DiffServ.\nThe application layer (e.g. SIP/SDP) between the end hosts identifies the QoS requirements. The QoS requirements from application layer (e.g. TS 23.228 [4] describes interworking from SIP/SDP to QoS requirements) are mapped down to create an RSVP session. The UE shall establish the PDP context suitable for support of the RSVP session. The authorisation token from the application layer when included shall be mapped to the PDP context parameters, and may also be mapped to the RSVP signalling.\nIn this scenario, the control of the QoS over the UMTS access network (from the UE to the GGSN) may be performed either from the terminal using the PDP context signalling. Alternatively, subscription data accessed by the SGSN may override the QoS requested via signalling from the UE (according to the procedures specified in TS 23.060 [19]).\nIn this scenario, the terminal supports signalling via the RSVP protocol to control the QoS at the local and remote accesses, and DiffServ to control the IP QoS through the backbone IP network. The RSVP signalling protocol may be used for different services. It is expected that only RSVP using the Integrated Services (IntServ) semantics would be supported, although in the future, new service definitions and semantics may be introduced. The entities that are supporting the RSVP signalling should act according to the IETF specifications for IntServ and IntServ/DiffServ interwork.\nThe QoS for the wireless access is provided by the PDP context. The UE may control the wireless QoS through signalling for the PDP context. The characteristics for the PDP context may be derived from the RSVP signalling information, or may use other information.\nQoS for the IP layer is performed at two levels. The end-to-end QoS is controlled by the RSVP signalling. Although RSVP signalling can be used end-to-end in the QoS model, it is not necessarily supported by all intermediate nodes. Instead, DiffServ is used to provide the QoS throughout the backbone IP network.\nAt the UE, the data is also classified for DiffServ. Intermediate QoS domains may apply QoS according to either the RSVP signalling information or DiffServ mechanisms. In this scenario, the UE is providing interworking between the RSVP and DiffServ domains. The GGSN may override the DiffServ setting from the UE. This GGSN may use information regarding the PDP context in order to select the appropriate DiffServ setting to apply, as shown in the figure below.\nThe end-to-end QoS is provided by a local mechanism in the UE, the PDP context over the UMTS access network, DiffServ through the backbone IP network, and DiffServ in the remote access network in the scenario shown in the figure below. The RSVP signalling may control the QoS at both the local and remote accesses. This function may be used to determine the characteristics for the PDP context, so the UE may perform the interwork between the RSVP signalling and PDP context.\nThe UE provides control of the DiffServ (although this may be overwritten by the GGSN), and in effect, determines the appropriate interworking between the PDP context and DiffServ.\nFigure A.4: Local UE supports RSVP signalling with IntServ semantics, and DiffServ;without service based policy\nThe GGSN provides the interworking between the PDP context and the DiffServ function. The application layer signalling may be processed in the local network at an application server such as the P-CSCF in the case of SIP signalling. Interworking between the GGSN and the application layer is shown as a vertical line where applicable. This interworking is for policy control and is between the GGSN and the PDF policy function co-located in the P-CSCF, as shown in the figure below.\nFigure A.5: Local UE supports RSVP signalling with IntServ semantics, and DiffServ;where service based policy is applied\nA.2.4\tScenario 4\nThe UE performs an IP BS function which enables end-to-end QoS using IP layer signalling towards the remote end. However, the UE relies on this end-to-end communication being utilised by at least the access point (GGSN) in order to provide the end-to-end QoS.\nThis scenario assumes that the UE and GGSN support RSVP signalling which may control the QoS directly, or interwork with DiffServ. The backbone IP network is RSVP and/or DiffServ enabled.\nThe application layer (e.g. SIP/SDP) between the end hosts identifies the QoS requirements. The QoS requirements from application layer (e.g. TS 23.228 [4] describes interworking from SIP/SDP to QoS requirements) are mapped down to create an RSVP session. The UE shall establish the PDP context suitable for support of the RSVP session. The authorisation token from the application layer shall be mapped to the PDP context parameters, and may also be mapped to the RSVP signalling.\nIn this scenario, the terminal supports signalling via the RSVP protocol to control the QoS across the end-to-end path. The GGSN also supports the RSVP signalling, and uses this information rather than the PDP context to control the QoS through the backbone IP network. The control of the QoS through the core is expected to be supported through interworking with DiffServ at the GGSN, although it may optionally be supported by per flow resource reservation. The RSVP signalling protocol may be used for different services. It is only expected that only RSVP using the Integrated Services (IntServ) semantics would be supported, although in the future, new service definitions and semantics may be introduced. The entities that are supporting the RSVP signalling may fully support the specifications for IntServ and IntServ/DiffServ interwork. If not, they are expected to set the break bit.\nIn this scenario, the control of the QoS over the UMTS access network (from the UE to the GGSN) may be performed either from the terminal using the PDP context signalling. Alternatively, subscription data accessed by the SGSN may override the QoS requested via signalling from the UE (according to the procedures specified in TS 23.060 [19]).\nQoS for the IP layer is performed at two levels. The end-to-end QoS is controlled by the RSVP signalling. Although RSVP signalling occurs end-to-end in the QoS model, it is not necessarily supported by all intermediate nodes. DiffServ is used to provide the QoS throughout the backbone IP network, although optionally each node may support RSVP signalling and allocation of resources per flow. An authorisation token may be included in the RSVP signalling and the PDP context establishment/modification. The GGSN may authorise the RSVP session and configure the Diffserv classifier functionality.\nThe GGSN supports the RSVP signalling and acts as the interworking point between RSVP and DiffServ. Intermediate QoS domains may apply QoS according to either the RSVP or DiffServ mechanisms.\nThe end-to-end QoS is provided by a local mechanism in the UE, the PDP context over the UMTS access network, DiffServ through the backbone IP network, and RSVP in the remote access network in the scenario shown in the figure below. The RSVP signalling may control the QoS at the local access. This function may be used to determine the characteristics for the PDP context, so the UE may perform the interwork between RSVP and the PDP context.\nFigure A.6: Local UE supports RSVP signalling using IntServ Semantics\nA.2.5\tScenario 5\nThe UE performs an IP BS function which enables end-to-end QoS without IP layer signalling and negotiation towards the IP BS function in the GGSN, or the remote host. The P-CSCF provides the authorization token to the UE during the SIP session setup process, and the UE provides the authorization token to the GGSN in the PDP context activation/modification message. The GGSN uses the authorization token to obtain a policy decision from the P-CSCF(PDF). This is done via the standardized interface between the PDF and GGSN. Even if the interface is an open interface where all information elements are standardized, the actual usage of the information is operator specific.\nThe scenario assumes that the GGSN support DiffServ edge functions, and that the backbone IP network is DiffServ enabled.\nThe application layer (e.g. SIP/SDP) between the end hosts identifies the QoS needs. The QoS requirements from application layer (e.g. TS 23.228 [4] describes interworking from SIP/SDP to QoS requirements) are mapped down to the IP layer and further down to the PDP context parameters in the UE. The authorisation token from the application layer is included in the PDP context parameters by the UE.\nIn this scenario, the control of the QoS over the UMTS access network (from the UE to the GGSN) may be performed from the terminal using the PDP context signalling. Alternatively, subscription data accessed by the SGSN may override the QoS requested via signalling from the UE (according to the procedures specified in TS 23.060 [19]).\nThe QoS for the downlink direction is controlled by the remote host from the remote network to the GGSN. The PDP context controls the UMTS level QoS between the GGSN and the UE. The QoS in the uplink direction is controlled by the PDP context up to the GGSN. The GGSN configures the DiffServ Edge function to interwork with the backbone IP network and control the IP QoS bearer service towards the remote -host.\nThe end-to-end QoS is provided by a local mechanism in the UE, the PDP context over the UMTS access network, DiffServ through the backbone IP network, and DiffServ in the remote access network. Note that DiffServ control at the Remote Host is shown in this example. However, other mechanisms may be used at the remote end, as demonstrated in the other scenarios.\nFigure A.7: Local UE provides authorization token in PDP context activation/modification message and GGSN provides interworking with DiffServ\nAnnex B (informative):(void)\nAnnex C (informative):Sample Mapping of SDP Descriptions Into QoS Authorization\nThe QoS requirement for a session depends on the media and codec information for the session. Initial session establishment in the IM Subsystem must determine a common codec (or set of common codecs for multimedia sessions) that will be used for the session. This is done through an end-to-end message exchange to determine the complete set of common codecs, and then the session initiator makes the decision as to the initial set of codecs for the media flows.\nThe session initiator includes an SDP in the SIP INVITE message that lists every codec that the originator is willing to support for this session. When the message arrives at the destination endpoint, it responds with the subset that it is also willing to support for the session by selectively accept or decline those media types in the original list. When multiple media codecs are listed, the caller and called party's media fields must be aligned—that is, there must be the same number, and they must be listed in the same order. QoS authorization is performed for this common subset. The P-CSCF(PDF) shall use the SDP contained in the SIP signalling to calculate the proper authorization. The authorization shall include limits on IP resources, and restrictions on IP packet flows, and may include restrictions on IP destinations. These restrictions are expressed as a data rate and QoS class for the combined set of IP flows, and a set of filter specs.\nThe QoS authorization for a session shall include an Authorization-Token, which shall be assigned by the P-CSCF(PDF). The Authorization-Token shall contain information that identifies the P-CSCF(PDF) that generated the token. Each authorized session may include several flow authorizations. Each flow authorization may include an authorization for one or more flows. The authorization shall contain the following information:\n-\tFilter Specs (IP flow 5-tuples that identify the set of flows)\n-\tData rate and QoS class that describes the authorized resource for the set of flows\n-\tThe IP flow 5-tuples includes Source Address, Source Port, Destination Address, Destination Port and Protocol ID. Note that some fields may be wildcarded.\nA typical SDP description consists of a session-level description (details that apply to the whole session and all media flows) and the several media-level descriptions (details that apply to a single media flow). The four critical components for mapping an SDP description into a QoS authorization are the media announcements (\"m=\"), the connection data (\"c=\"), the attributes (\"a=\") and the bandwidth (\"b=\").\nThe media announcements field contains information about the type of media session, and is of the form:\nm=<media> <port> <transport> <fmt list>\nThe attributes field contains attributes of the preceding media session, and is of the form:\na=<attribute><value>\nThe connection data field contains information about the media connection, and is of the form:\nc=<network type> <address type> <connection address>\nThe optional bandwidth field contains information about the bandwidth required, and is of the form:\nb=<modifier>:<bandwidth-value>\nAn example SDP description from the session originator in the SIP INVITE message:\nv=0\no=hshieh 2890844526 2890842807 IN IP4 saturn.attws.com\ns=-\nc=IN IP4 192.141.10.188\nt=0 0\nb=AS:64\nm=audio 29170 RTP/AVP 3 96 97\na=rtpmap:96 G726-32/8000\na=rtpmap:97 AMR\na=fmtp:97 mode-set=0,2,5,7; maxframes=2\nm=video 51372 RTP/AVP 34\na=fmtp 34 SQCIF=2/MaxBitRate=500/SAC AP\nm=application 32416 udp text_chat\nThe called party answers the call and returns the following SDP description in the SIP 183 message:\nv=0\no=johndoe 2890844526 2890842807 IN IP4 uranus.solar.com\ns=-\nc=IN IP4 204.142.180.111\nt=0 0\nb=AS:64\nm=audio 31160 RTP/AVP 3 97\na=rtpmap:97 AMR\na=fmtp:97 mode-set=0,2,5,7; maxframes=2\na=recvonly\nm=video 61000 RTP/AVP 31\na=fmtp 34 SQCIF=2/MaxBitRate=500/SAC AP\nm=application 33020 udp text_chat\na=sendonly\nUpon receiving the above SDP, the originator's P-CSCF will authorize QoS resource for the originator UE with the following media flows:\nA uplink audio flow:\nThe following IP 5-tuples identify the flow:\nSrcAddress\nSrcPort\nDestAddress\nDestPort\nProtocolID\n192.141.10.188\n*\n204.142.180.111\n31160\n17\nSince the conversational audio is very sensitive to delay, the maximum QoS class corresponding to conversational traffic class would be set. The b parameter is used to determine the maximum authorised data rate.\nAn uplink video flow:\nThe following IP 5-tuples identify the flow:\nSrcAddress\nSrcPort\nDestAddress\nDestPort\nProtocolID\n192.141.10.188\n*\n204.142.180.111\n61000\n17\nThe video flow may be assigned a maximum QoS class corresponding to streaming traffic class. The b parameter is used to determine the data rate.\nA downlink video flow:\nThe following IP 5-tuples identify the flow:\nSrcAddress\nSrcPort\nDestAddress\nDestPort\nProtocolID\n204.142.180.111\n*\n192.141.10.188\n51372\n17\nThe video flow may be assigned a maximum QoS class corresponding to streaming traffic class. The b parameter is used to determine the maximum authorised data rate.\nA downlink udp flow:\nThe following IP 5-tuples identify the flow:\nSrcAddress\nSrcPort\nDestAddress\nDestPort\nProtocolID\n204.142.180.111\n*\n192.141.10.188\n32416\n17\nThe udp application flow may be assigned a maximum QoS class corresponding to interactive. The b parameter is used to determine the data rate.\nNOTE:\tThe sample mappings in this clause are for illustration purpose only. The actual mapping of media codec to QoS resource requirement is specified in TS 29.208 [25].\nAnnex D (informative):Resource reservation and end-to-end RSVP\nD.1\tResource reservation with end-to-end RSVP\nFor this case, RSVP is added to the GPRS bearer establishment procedures specified in TS 23.060 [19], with no Service-based local policy.\nNOTE 1:\tThe diagrams in this clause depict one possible signalling sequence, however, the alternative signalling sequences below are possible:\n-\tto trigger the Create PDP Context Request message after the PATH message.\n-\tto trigger the Create PDP Context Request message after the RESV message.\n-\tto trigger only one PDP context after all RSVP exchanges have completed.\nNOTE 2:\tThe diagrams in this clause depict the case when the GGSN is not RSVP aware, however, the alternative of GGSN being RSVP aware is also possible.\nThe following figure is applicable to the Mobile Originating (MO) side.\nFigure D.1: MO Resource Reservation with End-to-End RSVP\nNOTE 3:\tThere is no timing relationship between the set of flows for the uplink (above the line) and the downlink (below the line).\n1)\tThe UE sends an Activate (Secondary) PDP Context message to the SGSN with the UMTS QoS parameters.\n2)\tThe SGSN sends the corresponding Create PDP Context message to the GGSN.\n3)\tThe GGSN authorizes the PDP context activation request according to the local operator's IP bearer resource based policy, the local operator's admission control function and the GPRS roaming agreements and sends a Create PDP Context Response message back to the SGSN.\n4)\tRAB setup is done by the RAB Assignment procedure.\n5)\tThe SGSN sends an Activate (Secondary) PDP Context Accept message to UE.\n6)\tUE sends an RSVP PATH message to the next hop, through the GGSN. The GGSN does not process the RSVP PATH message. Alternatively, the GGSN may process the RSVP PATH message and forward it to the next hop.\n7)\tThe UE receives the RSVP RESV message in the downlink direction, through the GGSN. The GGSN does not process the RSVP RESV message. Alternatively, the GGSN may process the RSVP RESV message and forward it to the UE.\n8)\tThe UE sends a RSVP RESV-CONF message to the next hop. The use of the RESV-CONF message is optional.\n9)\tThe UE receives a RSVP PATH message in the downlink direction, through the GGSN. The GGSN does not process the RSVP PATH message. Alternatively, the GGSN may process the incoming RSVP PATH message and forward it to the UE.\n10)\tThe UE may send a Modify PDP Context message to the SGSN with the necessary modification to UMTS QoS parameters according to the received RSVP PATH message.\n11)\tThe SGSN sends the corresponding Update PDP Context Request message to the GGSN.\n12)\tThe GGSN authorizes the PDP context modification according to the local operator's IP bearer resource based policy, the local operator's admission control function and the GPRS roaming agreements and sends an Update PDP Context Response message back to the SGSN.\n13)\tThe radio access bearer modification may be performed by the RAB Assignment procedure.\n14)\tThe SGSN sends a Modify PDP Context Accept message to UE.\n15)\tUE sends the RSVP RESV message to the next hop, through the GGSN. The GGSN does not process the RSVP RESV message. Alternatively, the GGSN may process the RSVP RESV message and forward it to the next hop.\n16)\tThe UE receives the RSVP RESV-CONF message in the downlink direction. The use of the RESV-CONF message is optional.\nThe following figure is applicable to the Mobile Terminating (MT) side. As the flow is the mirror of the Mobile Originating (MO) side, the step-by-step description is omitted.\nFigure D.2: MT Resource Reservation with End-to-End RSVP\nNOTE 4:\tThere is no timing relationship between the set of flows for the uplink (above the line) and the downlink (below the line).\nD.2\tResource Reservation with End-to-End RSVP and Service-based Local Policy\nFor this case, Service-based Local Policy and RSVP are added to the GPRS bearer establishment procedures specified in TS 23.060 [19].\nNOTE 1:\tThe diagrams in this clause depict one possible signalling sequence, however, the alternative signalling sequences below are possible:\n-\tto trigger the Create PDP Context Request message after the PATH message.\n-\tto trigger the Create PDP Context Request message after the RESV message.\n-\tto trigger only one PDP context after all RSVP exchanges have completed.\nNOTE 2:\tThe diagrams in this clause depict the case when the GGSN is RSVP aware, however, the alternative of GGSN not being RSVP aware is also possible.\nThis clause provides the flows for bearer establishment, resource reservation and policy control with RSVP.\nThe following figure is applicable to the Mobile Originating (MO) side.\nFigure D.3: MO Resource Reservation with End-to-End RSVP and Service-based Local Policy\nNOTE 3:\tThere is no timing relationship between the set of flows for the uplink (above the line) and the downlink (below the line).\n1)\tThe UE sends an Activate (Secondary) PDP Context message to the SGSN with the UMTS QoS parameters. The UE includes the Binding Information in the Activate PDP Context message.\n2)\tThe SGSN sends the corresponding Create PDP Context message to the GGSN.\n3)\tThe GGSN sends a COPS REQ message with the Binding Information to the PDF in order to obtain relevant policy information.\n4)\tThe PDF sends a COPS DEC message back to the GGSN.\n5)\tThe GGSN sends a COPS RPT message back to the PDF.\n6)\tThe GGSN maps IP flow based policy information into PDP context based policy information and uses the PDP context based policy information to accept the PDP activation request, and sends a Create PDP Context Response message back to SGSN. The GGSN may cache the policy information.\n7)\tRAB setup is done by the RAB Assignment procedure.\n8)\tThe SGSN sends an Activate (Secondary) PDP Context Accept message to UE.\n9)\tUE sends a RSVP PATH message to GGSN. The UE includes the Binding Information.\nNOTE 4:\tIf the decision was previously cached locally at the GGSN, it may not be necessary to query the PDF again. Otherwise the GGSN may have to query the PDF.\n10)\tThe GGSN uses the policy information to accept the RSVP PATH message, and forwards the RSVP PATH message to the next hop.\n11)\tThe GGSN receives the RSVP RESV message in the downlink direction.\nNOTE 5:\tIf the decision was previously cached locally at the GGSN, it may not be necessary to query the PDF again. Otherwise the GGSN may have to query the PDF.\n12)\tThe GGSN uses the policy information to accept the RSVP RESV message, and forwards the RSVP RESV message to the UE.\n13)\tThe UE sends a RSVP RESV-CONF message to the next hop. The use of the RESV-CONF message is optional.\n14)\tThe GGSN receives a RSVP PATH message in the downlink direction.\n15)\tThe GGSN forwards the RSVP PATH message to the UE.\n16)\tThe UE may send a Modify PDP Context message to the SGSN with the necessary modification to UMTS QoS parameters according to the received RSVP PATH message. The UE includes the Binding Information in the Modify PDP Context message.\n17)\tThe SGSN sends the corresponding Update PDP Context message to the GGSN.\nNOTE 6:\tIf the decision was previously cached locally at the GGSN, it may not be necessary to query the PDF again. Otherwise the GGSN may have to query the PDF.\n18)\tThe GGSN uses the policy information to accept the PDP modification request, and sends a Update PDP Context Response message back to SGSN.\n19)\tThe radio access bearer modification may be performed by the RAB Assignment procedure.\n20)\tThe SGSN sends a Modify PDP Context Accept message to UE.\nNOTE 7:\tSteps 16 to 20 are optional if the existing PDP context already satisfies the QoS requirements.\n21)\tThe UE sends a RSVP RESV message to the GGSN. The UE includes the Binding Information in the RSVP RESV message.\nNOTE 8:\tIf the decision was previously cached locally at the GGSN, it may not be necessary to query the PDF again. Otherwise the GGSN may have to query the PDF.\n22)\tThe GGSN uses the policy information to accept the RSVP RESV message, and forwards the RSVP RESV message to the next hop.\n23)\tThe UE receives the RSVP RESV-CONF message in the downlink direction. The use of the RESV-CONF message is optional.\nThe following figure is applicable to the Mobile Terminating (MT) side. As the flow is the mirror of the Mobile Originating (MO) side, the step-by-step description is omitted.\nFigure D.4: MT Resource Reservation with End-to-End RSVP and Service-based Local Policy\nNOTE 9:\tThere is no timing relationship between the set of flows for the uplink (above the line) and the downlink (below the line).\nAnnex E (informative):Change history\nChange history\nDate\nTSG #\nTSG Doc.\nCR\nRev\nCat\nSubject/Comment\nOld\nNew\n2003-09\nSP-21\nSP-030378\n0060\n1\nB\nFunctional additions for the Gq interface\n5.8.0\n6.0.0\n2003-12\nSP-22\nSP-030656\n0061\n3\nB\nProcedures in the AF\n6.0.0\n6.1.0\n2003-12\nSP-22\nSP-030656\n0062\n1\nB\nInformation exchanged via Gq interface\n6.0.0\n6.1.0\n2003-12\nSP-22\nSP-030656\n0063\n1\nB\nProcedures in the PDF\n6.0.0\n6.1.0\n2003-12\nSP-22\nSP-030656\n0064\n-\nD\nEditorial corrections to TS 23.207\n6.0.0\n6.1.0\n2004-01\nSP-22\nSP-030656\n0065\n2\nB\nGq-related updates to the signalling flows\n6.0.0\n6.1.0\n2004-01\nSP-22\nSP-030656\n0066\n3\nB\nRequirements for IM CN Subsystem signalling flag\n6.0.0\n6.1.0\n2004-01\nSP-22\nSP-030656\n0067\n-\nF\nDefinition of the Application Function\n6.0.0\n6.1.0\n2004-03\nSP-23\nSP-040035\n0074\n1\nB\nUpdate of Authorization on Gq\n6.1.1\n6.2.0\n2004-03\nSP-23\nSP-040035\n0068\n1\nB\nMapping amendment to PDF procedures\n6.1.1\n6.2.0\n2004-03\nSP-23\nSP-040035\n0069\n2\nB\nMapping amendment to AF procedures\n6.1.1\n6.2.0\n2004-03\nSP-23\nSP-040035\n0073\n1\nB\nSBLP implications of bundling different IMS sessions to the same PDP Context\n6.1.1\n6.2.0\n2004-03\nSP-23\nSP-040035\n0075\n1\nB\nService information\n6.1.1\n6.2.0\n2004-06\nSP-24\nSP-040317\n0077\n3\nB\nAuthorisation Reject Procedure by the PDF\n6.2.0\n6.3.0\n2004-06\nSP-24\nSP-040317\n0079\n1\nF\nAF capabilities\n6.2.0\n6.3.0\n2004-06\nSP-24\nSP-040317\n0080\n2\nB\nGeneral corrections\n6.2.0\n6.3.0\n2004-06\nSP-24\nSP-040317\n0081\n1\nF\nIntra-domain Gq for IMS\n6.2.0\n6.3.0\n2004-06\nSP-24\nSP-040317\n0083\n-\nB\nCondition for update authorization procedure\n6.2.0\n6.3.0\n2004-09\nSP-25\nSP-040521\n0084\n1\nF\nSBLP and non-realtime PDP Contexts\n6.3.0\n6.4.0\n2004-09\nSP-25\nSP-040521\n0085\n-\nF\nGeneration of multiple tokens\n6.3.0\n6.4.0\n2005-06\nSP-28\nSP-050337\n0087\n-\nF\nUpdate of binding information handling\n6.4.0\n6.5.0\n2005-09\nSP-29\nSP-050337\n0088\n1\nA\nCorrection of reference to non-existent/obsolete document\n6.5.0\n6.6.0\n2007-06\nSP-36\nSP-070392\n0092\n5\nB\nRel-7 version of TS 23.207 main body\n6.6.0\n7.0.0\n2008-12\nSP-42\n-\n-\n-\n-\nUpdate to Rel-8 version (MCC)\n7.0.0\n8.0.0\n2009-12\nSP-46\n-\n-\n-\n-\nUpdate to Rel-9 version (MCC)\n8.0.0\n9.0.0\n2011-03\nSP-51\n-\n-\n-\n-\nUpdate to Rel-10 version (MCC)\n9.0.0\n10.0.0\n2012-09\nSP-57\nSP-120627\n0093\n1\nF\nReference list correction to align with the corrected TS 29.212 title\n10.0.0\n11.0.0\n2014-09\nSP-65\n-\n-\n-\n-\nUpdate to Rel-12 version (MCC)\n11.0.0\n12.0.0\n2015-12\n-\n-\n-\n-\n-\nUpdate to Rel-13 version (MCC)\n12.0.0\n13.0.0\n2017-03\n-\n-\n-\n-\n-\nUpdate to Rel-14 version (MCC)\n13.0.0\n14.0.0\n2018-06\nSP-80\n-\n-\n-\n-\nUpdate to Rel-15 version (MCC)\n14.0.0\n15.0.0\n2020-07\nSP-88E\n-\n-\n-\n-\nUpdate to Rel-16 version (MCC)\n15.0.0\n16.0.0\n2022-03\nSP-95E\n-\n-\n-\n-\nUpdate to Rel-17 version (MCC)\n16.0.0\n17.0.0\n2024-03\n-\n-\n-\n-\n-\nUpdate to Rel-18 version (MCC)\n17.0.0\n18.0.0",
      "chunk_type": "requirement",
      "cross_references": [
        "ts_23.228_clause_4.2.6",
        "ts_23.228",
        "ts_23.060",
        "ts_23.107",
        "ts_29.208",
        "ts_23.207",
        "ts_6.3",
        "ts_29.212"
      ]
    }
  ]
}