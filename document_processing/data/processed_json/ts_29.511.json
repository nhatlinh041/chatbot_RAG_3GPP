{
  "metadata": {
    "specification_id": "ts_29.511",
    "version": "18.3.0",
    "title": "3GPP TS 29.511",
    "file_path": "/content/drive/MyDrive/RAG_thesis/data/29_series/29511-i30/29511-i30.docx"
  },
  "export_info": {
    "export_date": "2025-07-26T09:03:48.749087",
    "total_chunks": 32
  },
  "chunks": [
    {
      "chunk_id": "ts_29.511_1",
      "section_id": "1",
      "section_title": "Scope",
      "content": "The present document describes the stage 3 protocol and data model for the N5g-eir Service Based Interface between the 5G-EIR and its consumers over which the service to check the equipment identity as described in 3GPP TS 23.501 [2] is performed. It provides the stage 3 protocol definitions and message flows, and specifies the API for each service offered by the 5G-EIR.\nThe 5G System stage 2 architecture and procedures are specified in 3GPP TS 23.501 [2] and 3GPP TS 23.502 [3].\nThe Technical Realization of the Service Based Architecture and the Principles and Guidelines for Services Definition are specified in 3GPP TS 29.500 [4] and 3GPP TS 29.501 [5].",
      "chunk_type": "general",
      "cross_references": [
        "ts_23.501",
        "ts_23.502",
        "ts_29.500",
        "ts_29.501"
      ]
    },
    {
      "chunk_id": "ts_29.511_2",
      "section_id": "2",
      "section_title": "References",
      "content": "The following documents contain provisions which, through reference in this text, constitute provisions of the present document.\n-\tReferences are either specific (identified by date of publication, edition number, version number, etc.) or non‑specific.\n-\tFor a specific reference, subsequent revisions do not apply.\n-\tFor a non-specific reference, the latest version applies. In the case of a reference to a 3GPP document (including a GSM document), a non-specific reference implicitly refers to the latest version of that document in the same Release as the present document.\n[1]\t3GPP TR 21.905: \"Vocabulary for 3GPP Specifications\".\n[2]\t3GPP TS 23.501: \"System Architecture for the 5G System; Stage 2\".\n[3]\t3GPP TS 23.502: \"Procedures for the 5G System; Stage 2\".\n[4]\t3GPP TS 29.500: \"5G System; Technical Realization of Service Based Architecture; Stage 3\".\n[5]\t3GPP TS 29.501: \"5G System; Principles and Guidelines for Services Definition; Stage 3\".\n[6]\t3GPP TS 29.571: \"5G System; Common Data Types for Service Based Interfaces; Stage 3\".\n[7]\tIETF RFC 9113: \"HTTP/2\".\n[8]\tOpenAPI Initiative, \"OpenAPI Specification Version 3.0.0\", https://spec.openapis.org/oas/v3.0.0.[9]\tIETF RFC 8259: \"The JavaScript Object Notation (JSON) Data Interchange Format\".\n[10]\tIETF RFC 9457: \"Problem Details for HTTP APIs\".\n[11]\t3GPP TS 33.501: \"Security Architecture and Procedures for 5G System\".\n[12]\tIETF RFC 6749: \"The OAuth 2.0 Authorization Framework\".\n[13]\t3GPP TS 29.510: \"5G System; Network Function Repository Services; Stage 3\".\n[14]\t3GPP TR 21.900: \"Technical Specification Group working methods\".\n[15]\t3GPP TS 29.524: \"5G System; Cause codes mapping between 5GC interfaces; Stage 3\".",
      "chunk_type": "general",
      "cross_references": [
        "ts_21.905",
        "ts_23.501",
        "ts_23.502",
        "ts_29.500",
        "ts_29.501",
        "ts_29.571",
        "ts_33.501",
        "ts_29.510",
        "ts_21.900",
        "ts_29.524"
      ]
    },
    {
      "chunk_id": "ts_29.511_3.1",
      "section_id": "3.1",
      "section_title": "Definitions",
      "content": "For the purposes of the present document, the terms and definitions given in 3GPP TR 21.905 [1] and the following apply. A term defined in the present document takes precedence over the definition of the same term, if any, in 3GPP TR 21.905 [1].\nN5g-eir:\tService-based interface exhibited by 5G-EIR",
      "chunk_type": "definition",
      "cross_references": [
        "ts_21.905"
      ]
    },
    {
      "chunk_id": "ts_29.511_3.2",
      "section_id": "3.2",
      "section_title": "Abbreviations",
      "content": "For the purposes of the present document, the abbreviations given in 3GPP TR 21.905 [1] and the following apply. An abbreviation defined in the present document takes precedence over the definition of the same abbreviation, if any, in 3GPP TR 21.905 [1].\n5G-EIR\t5G-Equipment Identity Register\nEIR\tEquipment Identity Register\nPEI\tPermanent Equipment Identifier",
      "chunk_type": "general",
      "cross_references": [
        "ts_21.905"
      ]
    },
    {
      "chunk_id": "ts_29.511_4.1",
      "section_id": "4.1",
      "section_title": "Introduction",
      "content": "N5g-eir is a Service-based interface exhibited by 5G-EIR (5G-Equipment Identity Register) which is an optional network function that supports the following functionality:\n-\tCheck the status of Equipment's identity (e.g. to check that it has not been prohibited listed).\nThe reference point N17 (see Fig 4-1 below) shows the interaction between the 5G-Equipment Identity Register 5G-EIR and the AMF (Access and Mobility Management Function) enabling the check of the status of the mobile equipment identity.\nFigure 4-1: Reference Model – N5g-eir\nDuring any procedure establishing a signalling connection with the UE the network may optionally perform an ME identity check with 5G-EIR via the N5g-eir_Equipment Identity Check Service exhibited by 5G-EIR.",
      "chunk_type": "general",
      "cross_references": [
        "figure_4-1"
      ]
    },
    {
      "chunk_id": "ts_29.511_5.1",
      "section_id": "5.1",
      "section_title": "Introduction",
      "content": "The following NF service is offered by the N5g-eir to check the ME whether it is prohibited listed or not:\n-\tN5g-eir_EquipmentIdentityCheck\nTable 5.1-1: NF Services provided by 5G-EIR\nService Name\nDescription\nConsumer\nN5g-eir_EquipmentIdentityCheck\nThis service offered by the 5G-EIR allows the consumer to check the Permanent Equipment Identifier (PEI) and check whether the PEI is in the prohibited list or not.\nAMF\nThe N5g-eir_Equipment Identity Check service is specified in 3GPP TS 23.502 [3], clause 4.2.2.2.2\nTable 5.1-2 summarizes the corresponding APIs defined for this specification.\nTable 5.1-2: API Descriptions\nService Name\nClause\nDescription\nOpenAPI Specification File\napiName\nAnnex\nN5g-eir_EquipmentIdentityCheck\n6.1\n5G-EIR Equipment Identity Check Service\nTS29511_N5g-eir_EquipmentIdentityCheck.yaml\nn5g-eir-eic\nA.2\nThe N5g-eir_Equipment Identity Check service is specified in 3GPP TS 23.502 [3], clause 4.2.2.2.2",
      "chunk_type": "general",
      "cross_references": [
        "ts_23.502_clause_4.2.2.2.2",
        "table_5.1-1",
        "table_5.1-2",
        "ts_23.502"
      ]
    },
    {
      "chunk_id": "ts_29.511_5.2.1",
      "section_id": "5.2.1",
      "section_title": "Service Description",
      "content": "The N5g-eir_Equipment Identity Check service is provided by the 5G-EIR to check the Permanent Equipment Identifier (PEI) whether it is in the prohibited list or not. The service can be consumed by AMF which initiates ME identity check by invoking the N5g-eirEquipmentIdentityCheckGet service operation (see clause 5.2.4.2. of 3GPP TS 23.502 [3]).\nDuring the initial registration the Permanent Equipment Identifier is obtained from the UE. The AMF operator may check the PEI with an EIR.",
      "chunk_type": "general",
      "cross_references": [
        "ts_23.502_clause_5.2.4.2",
        "ts_23.502"
      ]
    },
    {
      "chunk_id": "ts_29.511_5.2.2.2.1",
      "section_id": "5.2.2.2.1",
      "section_title": "General",
      "content": "The CheckEquipmentIdentity operation shall be used to check the PEI and determine whether the subscriber is allowed to use the equipment, in the following procedures:\n-\tME Identity check procedure (see clause 4.7 of 3GPP TS 23.502 [3]);",
      "chunk_type": "definition",
      "cross_references": [
        "ts_23.502_clause_4.7",
        "ts_23.502"
      ]
    },
    {
      "chunk_id": "ts_29.511_5.2.2.2.2",
      "section_id": "5.2.2.2.2",
      "section_title": "Procedure using CheckEquipmentIdentity Operation",
      "content": "The NF Service Consumer (e.g. AMF) shall check the PEI by using the HTTP GET method as shown in Figure 5.2.2.2.2-1.\nFigure 5.2.2.2.2-1: PEI status check by the NF Service Consumer\n1.\tThe NF Service Consumer (e.g. AMF) sends a GET request to the resource representing the PEI equipment Status. It shall include the PEI as a query parameter and, optionally, the SUPI and/or GPSI may also be included.\n2a.\tOn success, \"200 OK\" with the message body containing the equipment status of the PEI.\n2b.\tIf the PEI is not known, \"404 Not Found\" with the message body containing a ProblemDetails object, with the \"details\" attribute set to \"ERROR_EQUIPMENT_UNKNOWN\". When receiving the response from the 5G-EIR, the NF Service Consumer (e.g. AMF) shall check the equipment Status and the detailed problem. Dependent upon the result, the NF Service Consume will decide its subsequent actions (e.g. sending a Registration Reject if the 5G-EIR indicates that the PEI is unknown or prohibited listed).\nThe definition of the equipment-status resource is specified in clause 6.1.3.",
      "chunk_type": "procedure",
      "cross_references": [
        "clause_6.1.3",
        "figure_5.2.2.2.2-1"
      ]
    },
    {
      "chunk_id": "ts_29.511_6.1.1",
      "section_id": "6.1.1",
      "section_title": "API URI",
      "content": "The N5g-eir_EquipmentIdentityCheck Service shall use the N5g-eir_EquipmentIdentityCheck API.\nThe API URI of the N5g-eir_EquipmentIdentityCheck API shall be:\n{apiRoot}/<apiName>/<apiVersion>\nThe request URI used in HTTP request from the NF service consumer towards the NF service producer shall have the structure defined in subclause 4.4.1 of 3GPP TS 29.501 [5], i.e.:\n{apiRoot}/<apiName>/<apiVersion>/<apiSpecificResourceUriPart>\nwith the following components:\n-\tThe {apiRoot} shall be set as described in 3GPP TS 29.501 [5].\n-\tThe <apiName> shall be \"n5g-eir-eic\".\n-\tThe <apiVersion> shall be \"v1\".\n-\tThe <apiSpecificResourceUriPart> shall be set as described in subclause 6.1.3.",
      "chunk_type": "requirement",
      "cross_references": [
        "ts_29.501_clause_4.4.1",
        "clause_6.1.3",
        "ts_29.501"
      ]
    },
    {
      "chunk_id": "ts_29.511_6.1.2.1",
      "section_id": "6.1.2.1",
      "section_title": "General",
      "content": "HTTP/2, as defined in IETF RFC 9113 [7], shall be used as specified in clause 5 of 3GPP TS 29.500 [4].\nHTTP/2 shall be transported as specified in clause 5.3 of 3GPP TS 29.500 [4].\nHTTP messages and bodies for the N5g-eir_EquipmentIdentityCheck Service shall comply with the OpenAPI [8] specification contained in Annex A.",
      "chunk_type": "definition",
      "cross_references": [
        "ts_29.500_clause_5",
        "ts_29.500_clause_5.3",
        "ts_29.500"
      ]
    },
    {
      "chunk_id": "ts_29.511_6.1.2.2.1",
      "section_id": "6.1.2.2.1",
      "section_title": "General",
      "content": "The usage of HTTP standard headers shall be supported as specified in clause 5.2.2 of 3GPP TS 29.500 [4].",
      "chunk_type": "definition",
      "cross_references": [
        "ts_29.500_clause_5.2.2",
        "ts_29.500"
      ]
    },
    {
      "chunk_id": "ts_29.511_6.1.2.2.2",
      "section_id": "6.1.2.2.2",
      "section_title": "Content type",
      "content": "The following content types shall be supported:\n-\tJSON, as defined in IETF RFC 8259 [9]. The use of the JSON format shall be signalled by the content type \"application/json\". See also clause 5.4 of 3GPP TS 29.500 [4].\n-\tThe Problem Details JSON Object (IETF RFC 9457 [10]. The use of the Problem Details JSON object in a HTTP response body shall be signalled by the content type \"application/problem+json\".",
      "chunk_type": "requirement",
      "cross_references": [
        "ts_29.500_clause_5.4",
        "ts_29.500"
      ]
    },
    {
      "chunk_id": "ts_29.511_6.1.2.3.1",
      "section_id": "6.1.2.3.1",
      "section_title": "General",
      "content": "In this release of this specification, no custom headers specific to the N5g-eir_EquipmentIdentityCheck Service are defined. For 3GPP specific HTTP custom headers used across all service based interfaces, see clause 5.2.3 of 3GPP TS 29.500 [4].",
      "chunk_type": "definition",
      "cross_references": [
        "ts_29.500_clause_5.2.3",
        "ts_29.500"
      ]
    },
    {
      "chunk_id": "ts_29.511_6.1.3.1",
      "section_id": "6.1.3.1",
      "section_title": "Overview",
      "content": "Figure 6.1.3.1-1: Resource URI structure of the n5g-eir-eic API\nTable 6.1.3.1-1 provides an overview of the resources and applicable HTTP methods.\nTable 6.1.3.1-1: Resources and methods overview\nResource name\nResource URI\nHTTP method or custom operation\nDescription\nequipmentStatus\n/equipment-status\nGET\nRetrieve the equipment status of the PEI",
      "chunk_type": "definition",
      "cross_references": [
        "table_6.1.3.1-1",
        "figure_6.1.3.1-1"
      ]
    },
    {
      "chunk_id": "ts_29.511_6.1.3.2.1",
      "section_id": "6.1.3.2.1",
      "section_title": "Description",
      "content": "This resource represents the equipmentStatus for a PEI.",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.511_6.1.3.2.2",
      "section_id": "6.1.3.2.2",
      "section_title": "Resource Definition",
      "content": "Resource URI: {apiRoot}/n5g-eir-eic/<apiVersion>/equipment-status\nThis resource shall support the resource URI variables defined in table 6.1.3.2.2-1.\nTable 6.1.3.2.2-1: Resource URI variables for this resource\nName\nData type\nDefinition\napiRoot\nstring\nSee clause 6.1.1",
      "chunk_type": "definition",
      "cross_references": [
        "clause_6.1.1",
        "table_6.1.3.2.2-1"
      ]
    },
    {
      "chunk_id": "ts_29.511_6.1.3.2.3.1",
      "section_id": "6.1.3.2.3.1",
      "section_title": "GET",
      "content": "This method shall support the URI query parameters specified in table 6.1.3.2.3.1-1.\nTable 6.1.3.2.3.1-1: URI query parameters supported by the GET method on this resource\nName\nData type\nP\nCardinality\nDescription\npei\nPei\nM\n1\nThe PEI of the UE shall be included for equipment identify checking\nsupi\nSupi\nO\n0..1\nThe SUPI of the UE\ngpsi\nGpsi\nO\n0..1\nThe GPSI of the UE\nsupported-features\nSupportedFeatures\nC\n0..1\nThis IE shall be present if at least one feature defined in clause 6.1.6 is supported.\nThis method shall support the request data structures specified in table 6.1.3.2.3.1-2 and the response data structures and response codes specified in table 6.1.3.2.3.1-3.\nTable 6.1.3.2.3.1-2: Data structures supported by the GET Request Body on this resource\nData type\nP\nCardinality\nDescription\nn/a\nTable 6.1.3.2.3.1-3: Data structures supported by the GET Response Body on this resource\nData type\nP\nCardinality\nResponse\ncodes\nDescription\nEirResponseData\nM\n1\n200 OK\nUpon success, a response body containing the Equipment Status shall be returned\nRedirectResponse\nO\n0..1\n307 Temporary Redirect\nTemporary redirection. The response shall include a Location header field containing a different URI, or the same URI if this is a redirection triggered by an SCP to the same target resource via another SCP. In the former case, the URI shall be an alternative URI of the resource located on an alternative service instance within the same 5G-EIR or 5G-EIR (service) set. (NOTE 2)\nRedirectResponse\nO\n0..1\n308 Permanent Redirect\nPermanent redirection. The response shall include a Location header field containing a different URI, or the same URI if this is a redirection triggered by an SCP to the same target resource via another SCP. In the former case, the URI shall be an alternative URI of the resource located on an alternative service instance within the same 5G-EIR or 5G-EIR (service) set. (NOTE 2)\nProblemDetails\nO\n0..1\n404 Not Found\nThe equipment identify checking has failed.\nThe \"cause\" attribute may be used to indicate one of the following application errors:\n- ERROR_EQUIPMENT_UNKNOWN\nSee table 6.1.5.3-1 for the description of this error.\nNOTE :\tThe mandatory HTTP error status codes for the GET method listed in Table 5.2.7.1-1 of 3GPP TS 29.500 [4] other than those specified in the table above also apply, with a ProblemDetails data type when needed (see clause 5.2.7 of 3GPP TS 29.500 [4]).\nNOTE 2:\tRedirectResponses may be inserted by an SCP, see clause 6.10.9.1 of 3GPP TS 29.500 [4].\nTable 6.1.3.2.3.1-4: Headers supported by the 307 Response Code on this resource\nName\nData type\nP\nCardinality\nDescription\nLocation\nstring\nM\n1\nAn alternative URI of the resource located on an alternative service instance within the same 5G-EIR or 5G-EIR (service) set.\nOr the same URI, if a request is redirected to the same target resource via a different SCP.\n3gpp-Sbi-Target-Nf-Id\nstring\nO\n0..1\nIdentifier of the target NF (service) instance ID towards which the request is redirected\nTable 6.1.3.2.3.1-5: Headers supported by the 308 Response Code on this resource\nName\nData type\nP\nCardinality\nDescription\nLocation\nstring\nM\n1\nAn alternative URI of the resource located on an alternative service instance within the same 5G-EIR or 5G-EIR (service) set.\nOr the same URI, if a request is redirected to the same target resource via a different SCP.\n3gpp-Sbi-Target-Nf-Id\nstring\nO\n0..1\nIdentifier of the target NF (service) instance ID towards which the request is redirected",
      "chunk_type": "requirement",
      "cross_references": [
        "clause_6.1.6",
        "ts_29.500_clause_5.2.7",
        "ts_29.500_clause_6.10.9.1",
        "table_6.1.3.2.3.1-1",
        "table_6.1.3.2.3.1-2",
        "table_6.1.3.2.3.1-3",
        "table_6.1.5.3-1",
        "ts_29.500_table_5.2.7.1-1",
        "ts_29.500_table_6.1.3.2.3.1-4",
        "table_6.1.3.2.3.1-5",
        "ts_29.500"
      ]
    },
    {
      "chunk_id": "ts_29.511_6.1.4.1",
      "section_id": "6.1.4.1",
      "section_title": "General",
      "content": "This clause specifies the application data model supported by the API.\nTable 6.1.4.1-1 specifies the data types defined for the n5g-eir-eic service based interface protocol.\nTable 6.1.4.1-1: n5g-eir-eic specific Data Types\nData type\nClause defined\nDescription\nEirResponseData\n6.1.4.2.2\nEquipmentStatus\n6.1.4.3.3\nEquipment status of the PEI, this data type is string.\nTable 6.1.6.1-2 specifies data types re-used by the N<NF> service based interface protocol from other specifications, including a reference to their respective specifications and when needed, a short description of their use within the N<NF> service based interface.\nTable 6.1.4.1-2: 5g-eir-eic  re-used Data Types\nData type\nReference\nComments\nPei\n3GPP TS 29.571[6]\nData type representing the PEI of the UE.\nSupi\n3GPP TS 29.571 [6]\nData type representing the SUPI of the subscriber.\npattern: See pattern of type Supi in 3GPP TS 29.571 [6]\nProblemDetails\n3GPP TS 29.571 [6]\nCommon data type for error responses\nGpsi\n3GPP TS 29.571 [6]\nData type representing the GPSI of the subscriber.\nSupportedFeatures\n3GPP TS 29.571 [6]\nSupported Features\nRedirectResponse\n3GPP TS 29.571 [6]\nResponse body of the redirect response message.",
      "chunk_type": "definition",
      "cross_references": [
        "table_6.1.4.1-1",
        "table_6.1.6.1-2",
        "table_6.1.4.1-2",
        "ts_29.571"
      ]
    },
    {
      "chunk_id": "ts_29.511_6.1.4.2.1",
      "section_id": "6.1.4.2.1",
      "section_title": "Introduction",
      "content": "This clause defines the structures to be used in resource representations.",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.511_6.1.4.2.2",
      "section_id": "6.1.4.2.2",
      "section_title": "Type: EirResponseData",
      "content": "Table 6.1.4.2.2-1: Definition of type EirResponseData\nAttribute name\nData type\nP\nCardinality\nDescription\nstatus\nEquipmentStatus\nM\n1\nStatus of the UE",
      "chunk_type": "general",
      "cross_references": [
        "table_6.1.4.2.2-1"
      ]
    },
    {
      "chunk_id": "ts_29.511_6.1.4.3.1",
      "section_id": "6.1.4.3.1",
      "section_title": "Introduction",
      "content": "This clause defines simple data types and enumerations that can be referenced from data structures defined in the previous clauses.",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.511_6.1.4.3.2",
      "section_id": "6.1.4.3.2",
      "section_title": "Simple data types",
      "content": "The simple data types defined in table 6.1.4.3.2-1 shall be supported.\nTable 6.1.4.3.2-1: Simple data types\nType Name\nType Definition\nDescription\n<one simple data type, e.g. boolean, integer, null, number, string>",
      "chunk_type": "requirement",
      "cross_references": [
        "table_6.1.4.3.2-1"
      ]
    },
    {
      "chunk_id": "ts_29.511_6.1.4.3.3",
      "section_id": "6.1.4.3.3",
      "section_title": "Enumeration: EquipmentStatus",
      "content": "Table 6.1.4.3.3-1: Enumeration EquipmentStatus\nEnumeration value\nDescription\n\"WHITELISTED\"\nIndicates the PEI is permitted whitelisted\n\"BLACKLISTED\"\nIndicates the PEI is prohibited listed\n\"GREYLISTED\"\nIndicates the PEI is tracking listed",
      "chunk_type": "general",
      "cross_references": [
        "table_6.1.4.3.3-1"
      ]
    },
    {
      "chunk_id": "ts_29.511_6.1.5.1",
      "section_id": "6.1.5.1",
      "section_title": "General",
      "content": "HTTP error handling shall be supported as specified in clause 5.2.4 of 3GPP TS 29.500 [4].\nThe Cause codes mapping performed by AMF between the following HTTP responses returned by the EIR services to the AMF and the 5GMM related values is specified in clause 4.5.2 of 3GPP TS 29.524 [15].",
      "chunk_type": "definition",
      "cross_references": [
        "ts_29.500_clause_5.2.4",
        "ts_29.524_clause_4.5.2",
        "ts_29.500",
        "ts_29.524"
      ]
    },
    {
      "chunk_id": "ts_29.511_6.1.5.2",
      "section_id": "6.1.5.2",
      "section_title": "Protocol Errors",
      "content": "Protocol Error Handling shall be supported as specified in clause 5.2.7 of 3GPP TS 29.500 [4].",
      "chunk_type": "requirement",
      "cross_references": [
        "ts_29.500_clause_5.2.7",
        "ts_29.500"
      ]
    },
    {
      "chunk_id": "ts_29.511_6.1.5.3",
      "section_id": "6.1.5.3",
      "section_title": "Application Errors",
      "content": "The common application errors defined in the Table 5.2.7.2-1 in 3GPP TS 29.500 [4] may also be used for the N5g-eir_EquipmentIdentityCheck service, and the following application errors listed in Table 6.1.5.3-1 are specific for the N5g-eir_EquipmentIdentityCheck service.\nTable 6.1.5.3-1: Application errors\nApplication Error\nHTTP status code\nDescription\nERROR_EQUIPMENT_UNKNOWN\n404 Not Found\nIndicate the mobile equipment is not known in the EIR.",
      "chunk_type": "general",
      "cross_references": [
        "ts_29.500_table_5.2.7.2-1",
        "table_6.1.5.3-1",
        "ts_29.500"
      ]
    },
    {
      "chunk_id": "ts_29.511_6.1.6",
      "section_id": "6.1.6",
      "section_title": "Feature Negotiation",
      "content": "The features in table 6.1.6-1 are defined for the N5g-eir_EquipmentIdentityCheck API. They shall be negotiated using the extensibility mechanism defined in clause 6.6 of 3GPP TS 29.500 [4].\nTable 6.1.6-1: Supported Features\nFeature number\nFeature Name\nM/O\nDescription\n1\nES3XX\nM\nExtended Support of HTTP 307/308 redirection\nAn NF Service Consumer (e.g. AMF) that supports this feature shall support handling of HTTP 307/308 redirection for any service operation of the EquipmentIdentityCheck service. An NF Service Consumer that does not support this feature does only support HTTP redirection as specified for 3GPP Release 15.",
      "chunk_type": "requirement",
      "cross_references": [
        "ts_29.500_clause_6.6",
        "table_6.1.6-1",
        "ts_29.500_table_6.1.6-1",
        "ts_29.500"
      ]
    },
    {
      "chunk_id": "ts_29.511_6.1.7.1",
      "section_id": "6.1.7.1",
      "section_title": "General",
      "content": "The security mechanisms for service based interfaces are specified in clause 13 of 3GPP TS 33.501 [11] and in clause 6.7.3 of 3GPP TS 29.500 [4]. The access to the N5g-eir_EquipmentIdentityCheck API may be authorized by means of the OAuth2 protocol (see IETF RFC 6749 [12]), based on local configuration, using the \"Client Credentials\" authorization grant, where the NRF (see 3GPP TS 29.510 [13]) plays the role of the authorization server.\nThe N5g-eir_EquipmentIdentityCheck API defines scopes for OAuth2 authorization as specified in 3GPP TS 33.501 [11]; it defines a single scope consisting on the name of the service (i.e., \"n5g-eir-eic\"), and it does not define any additional scopes at resource or operation level.\nSecurity Protection Edge Proxy (SEPP), as specified in 3GPP TS 33.501 [11], shall be used between service based interfaces across PLMNs. The NFs in a PLMN shall use the SEPP as a HTTP/2 proxy for the HTTP/2 messages that carry \":authority\" pseudo header with a uri-host formatted as specified in clause 6.1.4.3 of 3GPP TS 29.500 [4]",
      "chunk_type": "definition",
      "cross_references": [
        "ts_33.501_clause_13",
        "ts_33.501_clause_6.7.3",
        "ts_29.500_clause_6.1.4.3",
        "ts_29.500_clause_6.7.3",
        "ts_33.501",
        "ts_29.500",
        "ts_29.510"
      ]
    },
    {
      "chunk_id": "ts_29.511_6.1.7.2",
      "section_id": "6.1.7.2",
      "section_title": "Transport Layer Security Protection of Messages",
      "content": "As specified in clause 13.1 of 3GPP TS 33.501 [11], TLS shall be used for the security protection of messages at the transport layer for the N5g-eir service based interface if network security is not provided by other means.\nThe protocol stack for the N5g-eir service based interface is shown on Figure 6.1.7.2-1.\nFigure 6.1.7.2-1: SBI Protocol Stack\nThe N5g-eir service based interface uses HTTP/2 protocol (see clause 5.2) with JSON (see clause 5.4) as the application layer serialization protocol. For the security protection at the transport layer, 5G-EIR NF shall support TLS and TLS shall be used within a PLMN if network security is not provided by other means, as specified in 3GPP TS 33.501 [11].",
      "chunk_type": "requirement",
      "cross_references": [
        "ts_33.501_clause_13.1",
        "clause_5.2",
        "clause_5.4",
        "figure_6.1.7.2-1",
        "ts_33.501"
      ]
    },
    {
      "chunk_id": "ts_29.511_6.1.7.3",
      "section_id": "6.1.7.3",
      "section_title": "Authorization of 5G-EIR NF Service Access",
      "content": "As specified in clause 13.4.1 of 3GPP TS 33.501 [11] OAuth 2.0 (see IETF RFC 6749 [12]) may be used for authorization of N5g-eir_EquipmentIdentityCheck service access. The 5G-EIR NF and the NRF (as defined in 3GPP TS 29.510 [13]) shall support the OAuth 2.0 authorization framework with \"Client Credentials\" grant type as specified in clause 4.4 of IETF RFC 6749 [12]. The NRF shall act as the Authorization Server providing the access tokens to the NF service consumers to access the service provided by the 5G-EIR. If the 5G-EIR NF receives an OAuth 2.0 authorization token in the \"Authorization\" HTTP request header field, the N5g-eir_EquipmentIdentityCheck service shall validate the access token, its expiry and its access scope before allowing access to the requested resource, as specified in clause 7 of IETF RFC 6749 [12].",
      "chunk_type": "general",
      "cross_references": [
        "ts_33.501_clause_13.4.1",
        "clause_4.4",
        "clause_7",
        "ts_33.501",
        "ts_29.510"
      ]
    },
    {
      "chunk_id": "ts_29.511_6.1.8",
      "section_id": "6.1.8",
      "section_title": "HTTP redirection",
      "content": "An HTTP request may be redirected to a different 5G-EIR service instance, within the same 5G-EIR or a different 5G-EIR of an 5G-EIR set, e.g. when an 5G-EIR service instance is part of an 5G-EIR (service) set or when using indirect communications (see 3GPP TS 29.500 [4]). See also the ES3XX feature in clause 6.1.6.\nAn SCP that reselects a different 5G-EIR producer instance will return the NF Instance ID of the new 5G-EIR producer instance in the 3gpp-Sbi-Producer-Id header, as specified in clause 6.10.3.4 of 3GPP TS 29.500 [4].\nIf an 5G-EIR within an 5G-EIR set redirects a service request to a different 5G-EIR of the set using an 307 Temporary Redirect or 308 Permanent Redirect status code, the identity of the new 5G-EIR towards which the service request is redirected shall be indicated in the 3gpp-Sbi-Target-Nf-Id header of the 307 Temporary Redirect or 308 Permanent Redirect response as specified in clause 6.10.9.1 of 3GPP TS 29.500 [4].\nAnnex A (normative):OpenAPI specification\nA.1\tGeneral\nThis Annex specifies the formal definition of the N5g-eir_EquipmentIdentityCheck Service API. It consists of an OpenAPI 3.0.0 specification, in YAML format.\nThis Annex takes precedence when being discrepant to other parts of the specification with respect to the encoding of information elements and methods within the API(s).\nNOTE :\tThe semantics and procedures, as well as conditions, e.g. for the applicability and allowed combinations of attributes or values, not expressed in the OpenAPI definitions but defined in other parts of the specification also apply.\nInformative copies of the OpenAPI specification files contained in this 3GPP Technical Specification are available on a Git-based repository that uses the GitLab software version control system (see 3GPP TS 29.501 [5] clause 5.3.1 and 3GPP TR 21.900 [14] clause 5B).\nA.2\tN5g-eir_EquipmentIdentityCheck Service API\nopenapi: 3.0.0\ninfo:\nversion: '1.3.0'\ntitle: '5G-EIR Equipment Identity Check'\ndescription: |\n5G-EIR Equipment Identity Check Service.\n© 2024, 3GPP Organizational Partners (ARIB, ATIS, CCSA, ETSI, TSDSI, TTA, TTC).\nAll rights reserved.\nexternalDocs:\ndescription: 3GPP TS 29.511 V18.3.0; 5G System; Equipment Identity Register Services; Stage 3\nurl: 'https://www.3gpp.org/ftp/Specs/archive/29_series/29.511/'\nservers:\n- url: '{apiRoot}/n5g-eir-eic/v1'\nvariables:\napiRoot:\ndefault: https://example.com\ndescription: apiRoot as defined in clause 4.4 of 3GPP TS 29.501\nsecurity:\n- {}\n- oAuth2ClientCredentials:\n- n5g-eir-eic\npaths:\n/equipment-status:\nget:\nsummary: Retrieves the status of the UE\noperationId: GetEquipmentStatus\ntags:\n- Equipment Status (Document)\nparameters:\n- name: pei\nin: query\ndescription: PEI of the UE\nrequired: true\nschema:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/Pei'\n- name: supi\nin: query\ndescription: SUPI of the UE\nrequired: false\nschema:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/Supi'\n- name: gpsi\nin: query\ndescription: GPSI of the UE\nrequired: false\nschema:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/Gpsi'\n- name: supported-features\nin: query\ndescription: supported features of the NF consumer\nschema:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/SupportedFeatures'\nresponses:\n'200':\ndescription: Expected response to a valid request\ncontent:\napplication/json:\nschema:\n$ref: '#/components/schemas/EirResponseData'\n'307':\n$ref: 'TS29571_CommonData.yaml#/components/responses/307'\n'308':\n$ref: 'TS29571_CommonData.yaml#/components/responses/308'\n'400':\n$ref: 'TS29571_CommonData.yaml#/components/responses/400'\n'401':\n$ref: 'TS29571_CommonData.yaml#/components/responses/401'\n'403':\n$ref: 'TS29571_CommonData.yaml#/components/responses/403'\n'404':\ndescription: PEI Not Found\ncontent:\napplication/problem+json:\nschema:\n$ref: 'TS29571_CommonData.yaml#/components/schemas/ProblemDetails'\n'406':\n$ref: 'TS29571_CommonData.yaml#/components/responses/406'\n'414':\n$ref: 'TS29571_CommonData.yaml#/components/responses/414'\n'429':\n$ref: 'TS29571_CommonData.yaml#/components/responses/429'\n'500':\n$ref: 'TS29571_CommonData.yaml#/components/responses/500'\n'502':\n$ref: 'TS29571_CommonData.yaml#/components/responses/502'\n'503':\n$ref: 'TS29571_CommonData.yaml#/components/responses/503'\ndefault:\ndescription: Unexpected error\ncomponents:\nsecuritySchemes:\noAuth2ClientCredentials:\ntype: oauth2\nflows:\nclientCredentials:\ntokenUrl: '{nrfApiRoot}/oauth2/token'\nscopes:\nn5g-eir-eic: Access to the N5g-eir_EquipmentIdentityCheck API\nschemas:\nEirResponseData:\ndescription: Represents equipment status data provided in an EIR response message.\ntype: object\nrequired:\n- status\nproperties:\nstatus:\n$ref: '#/components/schemas/EquipmentStatus'\nEquipmentStatus:\ndescription: Represents equipment status of the PEI. This data type is a string.\ntype: string\nenum:\n- WHITELISTED  # PERMITTED\n- BLACKLISTED  # PROHIBITED\n- GREYLISTED   # TRACKING\nAnnex B (informative):Change history\nChange history\nDate\nMeeting\nTDoc\nCR\nRev\nCat\nSubject/Comment\nNew version\n2017-10\nCT4#80\nC4-175323\nInitial Draft.\n0.1.0\n2017-10\nCT4#80\nC4-175396\nAt CT4#80 approved pCRs C4-175323, C4-175324, C4-175325, C4-175326 incorporated.\n0.2.0\n2017-12\nCT4#81\nC4-176439\nAt CT4#81 approved pCRs C4-176428, C4-176429 incorporated\n0.3.0\n2018-03\nCT4#83\nC4-182436\nAt CT4#83 approved pCRs C4-182368, C4-182369, C4-182384 incorporated.\n0.4.0\n2018-03\nCT#79\nCP-180032\nPresented for information\n1.0.0\n2018-05\nCT4#85\nC4-184627\nAt CT4#85 approved pCRs C4-184475, C4-184476, C4-184628 incorporated.\n1.1.0\n2018-06\nCT#80\nCP-181106\nPresented for approval\n2.0.0\n2018-06\nCT#80\nApproved in CT#80.\n15.0.0\n2018-09\nCT#81\nCP-182061\n0001\n-\nF\nError Handling\n15.1.0\n2018-09\nCT#81\nCP-182061\n0002\n-\nF\nDescription of Structured data types\n15.1.0\n2018-09\nCT#81\nCP-182061\n0003\n-\nF\nUpdate of Resource Figure\n15.1.0\n2018-09\nCT#81\nCP-182061\n0004\n-\nF\nAPI Version Number Update\n15.1.0\n2018-12\nCT#82\nCP-183178\n0005\n2\nF\n5G-EIR OpenAPI Updates\n15.2.0\n2018-12\nCT#82\nCP-183019\n0007\n-\nF\nAPIRoot Clarification\n15.2.0\n2018-12\nCT#82\nCP-183019\n0008\n-\nF\nCommon Status codes\n15.2.0\n2018-12\nCT#82\nCP-183019\n0009\n1\nF\nAPI Version Update\n15.2.0\n2018-12\nCT#82\nCP-183198\n00010\n1\nF\nCorrection of \"externalDocs\" for N5g-eir_EquipmentIdentityCheck Service\n15.2.0\n2019-03\nCT#83\nCP-190024\n0012\n1\nF\nGPSI\n15.3.0\n2019-03\nCT#83\nCP-190024\n0014\n1\nF\nReuse of data types in EIR OpenAPI\n15.3.0\n2019-03\nCT#83\nCP-190024\n0015\n-\nF\nAPI Version Update\n15.3.0\n2019-06\nCT#84\nCP-191035\n0017\n2\nF\nStorage of OpenAPI specification files\n15.4.0\n2019-06\nCT#84\nCP-191035\n0018\n-\nF\nCopyright Note in YAML file\n15.4.0\n2019-06\nCT#84\nCP-191035\n0019\n-\nF\nWrong formatting in OpenAPI annex\n15.4.0\n2019-06\nCT#84\nCP-191035\n0020\n-\nF\n3GPP TS 29.511 API version update\n15.4.0\n2019-11\nCT#84\nCP-193036\n0022\n1\nF\nAdd reference to TS 29.524\n16.0.0\n2019-12\nCT#84\nCP-193121\n0024\n-\nF\nExternalDocs field and API version change in the OpenAPI\n16.0.0\n2020-03\nCT#87e\nCP-200039\n0025\n2\nF\nAdd Corresponding API descriptions in clause 5.1\n16.1.0\n2020-03\nCT#87e\nCP-200039\n0028\n2\nD\nEditorial corrections\n16.1.0\n2020-03\nCT#87e\nCP-200020\n0029\n1\nB\nOptionality of ProblemDetails\n16.1.0\n2020-03\nCT#87e\nCP-200035\n0030\n-\nB\nSUPI pattern\n16.1.0\n2020-04\nCT#88e\nCP-201064\n0032\n1\nF\nDatatype column in Resource URI variables Table\n16.2.0\n2020-06\nCT#88e\nCP-201034\n0033\n-\nB\nStorage of YAML files\n16.2.0\n2020-06\nCT#88e\nCP-201332\n0034\n1\nF\nAPI Version and ExternalDoc Version Update\n16.2.0\n2020-12\nCT#90e\nCP-203035\n0036\n-\nF\nStorage of YAML files in 3GPP Forge\n16.3.0\n2021-03\nCT#91e\nCP-210037\n0038\nF\nHTTP 3xx redirection\n16.4.0\n2021-03\nCT#91e\nCP-210054\n0041\nF\n29.511 Rel-16 API version and External doc update\n16.4.0\n2021-03\nCT#91e\nCP-210026\n0037\nD\nUse of inclusive terminology\n17.0.0\n2021-03\nCT#91e\nCP-210034\n0039\nF\nOpenAPI Reference\n17.0.0\n2021-03\nCT#91e\nCP-210029\n0040\nF\n29.511 Rel-17 API version and External doc update\n17.0.0\n2021-06\nCT#91e\nCP-211028\n0042\nF\nbackward compatible correction\n17.1.0\n2021-06\nCT#92e\nCP-211059\n0044\n2\nF\nbackward compatible correction\n17.1.0\n2021-06\nCT#92e\nCP-211050\n0045\n-\nF\n29.511 Rel-17 API version and External doc update\n17.1.0\n2021-09\nCT#93e\nCP-212060\n0048\nA\n3xx description correction for SCP\n17.2.0\n2022-06\nCT#96\nCP-221027\n0051\nF\nCorrection of typos in description fields\n17.3.0\n2022-06\nCT#96\nCP-221304\n0053\nF\n29.511 Rel17 API version and External doc update\n17.3.0\n2022-12\nCT#98e\nCP-223027\n0055\n1\nF\nMissing Mandatory Status Codes in OpenAPI\n18.0.0\n2022-12\nCT#98e\nCP-223033\n0056\nF\n29.511 Rel18 API version and External doc update\n18.0.0\n2023-09\nCT#101\nCP-232058\n0057\n1\nF\nMajor API version\n18.1.0\n2023-12\nCT#102\nCP-233028\n0058\nF\nUpdate and replace obsoleted HTTP RFCs\n18.2.0\n2023-12\nCT#102\nCP-233031\n0059\nF\nReplacing obsoleted HTTP RFC 7807 with 9457\n18.2.0\n2024-06\nCT#104\nCP-242034\n0060\nF\nCorrection of feature negotiation description\n18.3.0\n2024-06\nCT#104\nCP-242551\n0061\nF\n29.511 Rel18 API version and External doc update\n18.3.0",
      "chunk_type": "general",
      "cross_references": [
        "clause_6.1.6",
        "ts_29.500_clause_6.10.3.4",
        "ts_29.500_clause_6.10.9.1",
        "ts_29.501_clause_5.3.1",
        "ts_21.900_clause_5",
        "ts_29.501_clause_4.4",
        "clause_5.1",
        "table_16.2.0",
        "figure_15.1.0",
        "ts_29.500",
        "ts_29.501",
        "ts_21.900",
        "ts_29.511",
        "ts_29.524"
      ]
    }
  ]
}