{
  "metadata": {
    "specification_id": "ts_23.973",
    "version": "Unknown",
    "title": "3GPP TS 23.973",
    "file_path": "/content/drive/MyDrive/RAG_thesis/data/23_series/23973-i00/23973-i00.docx"
  },
  "export_info": {
    "export_date": "2025-07-26T09:21:08.253724",
    "total_chunks": 35
  },
  "chunks": [
    {
      "chunk_id": "ts_23.973_2",
      "section_id": "2",
      "section_title": "References",
      "content": "The following documents contain provisions which, through reference in this text, constitute provisions of the present document.\n-\tReferences are either specific (identified by date of publication, edition number, version number, etc.) or non‑specific.\n-\tFor a specific reference, subsequent revisions do not apply.\n-\tFor a non-specific reference, the latest version applies. In the case of a reference to a 3GPP document (including a GSM document), a non-specific reference implicitly refers to the latest version of that document in the same Release as the present document.\n[1]\t3GPP TR 21.905: \"Vocabulary for 3GPP Specifications\".\n[2]\t3GPP TS 23.502: \"Procedures for the 5G System\".\n[3]\t3GPP TS 23.335: \"User Data Convergence (UDC); Technical realization and information flows; Stage 2\".\n[4]\t3GPP TS 29.335: \"User Data Convergence (UDC); User data repository access protocol over the Ud interface; Stage 3\".\n[5]\t3GPP TS 23.002: \"Network architecture\".\n[6]\t3GPP TS 23.501: \"System Architecture for the 5G System\".\n[7]\t3GPP TS 23.228: \"IP Multimedia Subsystem\".\n[8]\t3GPP TS 23.380: \"IMS Restoration Procedures\".\n[9]\t3GPP TS 29.505: \"5G System; Usage of the Unified Data Repository services for Subscription Data\".\n[10]\t3GPP TS 29.228: \"IP Multimedia (IM) Subsystem Cx and Dx Interfaces; Signalling flows and message contents\".\n[11]\t3GPP TS 29.328: \"IP Multimedia (IM) Subsystem Sh interface; Signalling flows and message contents\".\n[12]\t3GPP TS 33.501: \"Security architecture and procedures for 5G System\".\n[13]\t3GPP TS 33.401: \"System Architecture Evolution (SAE) - Security architecture\".\n[14]\t3GPP TS 23.794: \"Study on Enhanced IMS to 5GC Integration\".\n[15]\t3GPP TS 23.060: \"General Packet Radio Service (GPRS); Service description; Stage 2\".\n[16]\t3GPP TS 23.401: \"General Packet Radio Service (GPRS) enhancements for Evolved Universal Terrestrial Radio Access Network (E-UTRAN) access\".\n[17]\t3GPP TS 24.229: \"IP multimedia call control protocol based on Session Initiation Protocol (SIP) and Session Description Protocol (SDP); Stage 3\".\n[18]\t3GPP TS 29.214: \"Policy and charging control over Rx reference point\".\n[19]\t3GPP TS 23.632: \"User data interworking, coexistence and migration; Stage 2\".\n[20]\t3GPP TS 29.563: \"5G System (5GS); Home Subscriber Server (HSS) services for interworking with Unified Data Management (UDM); Stage 3\".\n[21]\t3GPP TS 23.040: \"Technical realization of the Short Message Service (SMS)\".\n[22]\t3GPP TS 23.204: \"Support of SMS over generic 3GPP IP access; Stage 2\".\n[23]\t3GPP TS 29.272: \"Mobility Management Entity (MME) and Serving GPRS Support Node (SGSN) related interfaces based on Diameter protocol\".",
      "chunk_type": "general",
      "cross_references": [
        "ts_21.905",
        "ts_23.502",
        "ts_23.335",
        "ts_29.335",
        "ts_23.002",
        "ts_23.501",
        "ts_23.228",
        "ts_23.380",
        "ts_29.505",
        "ts_29.228",
        "ts_29.328",
        "ts_33.501",
        "ts_33.401",
        "ts_23.794",
        "ts_23.060",
        "ts_23.401",
        "ts_24.229",
        "ts_29.214",
        "ts_23.632",
        "ts_29.563",
        "ts_23.040",
        "ts_23.204",
        "ts_29.272"
      ]
    },
    {
      "chunk_id": "ts_23.973_3.1",
      "section_id": "3.1",
      "section_title": "Definitions",
      "content": "For the purposes of the present document, the terms and definitions given in TR 21.905 [1] and the following apply. A term defined in the present document takes precedence over the definition of the same term, if any, in TR 21.905 [1].\n5G Repository: Repository hosting subscription data for 5G UEs.\n5GS UDR: term used to identify the Unified Data Repository defined in TS 23.501 [6] (clause 4.2.5).\nEPS UDR: term used to identify the User Data Repository defined in TS 23.335 [3] (clause 4.2.3).",
      "chunk_type": "definition",
      "cross_references": [
        "ts_23.501_clause_4.2.5",
        "ts_23.335_clause_4.2.3",
        "ts_21.905",
        "ts_23.501",
        "ts_23.335"
      ]
    },
    {
      "chunk_id": "ts_23.973_3.2",
      "section_id": "3.2",
      "section_title": "Abbreviations",
      "content": "For the purposes of the present document, the abbreviations given in TR 21.905 [1] and the following apply. An abbreviation defined in the present document takes precedence over the definition of the same abbreviation, if any, in TR 21.905 [1].\n5GC\t5G Core\n5GS\t5G System\n5GS UDR\t5G Unified Data Repository\nHSS FE\tHome Subscriber Server Front End\nEPS\tEnhanced Packet core System\nEPS UDR\tEPS User Data Repository\nE-UTRAN\tEvolved Universal mobile telecommunications system Terrestrial Radio Access Network\nUDM\tUnified Data Management",
      "chunk_type": "general",
      "cross_references": [
        "ts_21.905"
      ]
    },
    {
      "chunk_id": "ts_23.973_4.1",
      "section_id": "4.1",
      "section_title": "Architectural Assumptions",
      "content": "The 5GS data storage architecture defined in TS 23.501 [6], for structured data, is used as the baseline network architecture.\nThe User Data Convergence concept specified in TS 23.335 [3], is used for reference to EPS/legacy system architecture for data storage, when layered architecture is deployed (i.e. application front-end decoupled from data repository using the standard interface Ud defined in TS 29.335 [4]).\nThe Home Subscriber Server (HSS) architecture specified in clause 4.1.1 of TS 23.002 [5], is used for reference to EPS/legacy system architecture for data storage, when non-layered HSS architecture is deployed (i.e. monolithic deployment where user data are stored within the entity itself (or in an external entity via non-standard interfaces)).",
      "chunk_type": "general",
      "cross_references": [
        "ts_23.002_clause_4.1.1",
        "ts_23.501",
        "ts_23.335",
        "ts_29.335",
        "ts_23.002"
      ]
    },
    {
      "chunk_id": "ts_23.973_4.2",
      "section_id": "4.2",
      "section_title": "Architectural Principles",
      "content": "In the UDC concept used for reference, HSS FE and EPS UDR defined in TS 23.335 [3] are assumed to interact for any data required by the study: no standardization will be considered for the interface between HSS FE and EPS UDR.",
      "chunk_type": "general",
      "cross_references": [
        "ts_23.335"
      ]
    },
    {
      "chunk_id": "ts_23.973_5",
      "section_id": "5",
      "section_title": "Deployment Scenarios",
      "content": "This document supports the following deployment scenarios:\nScenario 1: the HSS FE and` UDM are separately deployed and the user data of 5GC, EPC, CS and IMS domains are also stored separately in different repositories (i.e. EPS UDR storing user data for EPC, CS and IMS domains, and 5GC UDR storing user data for 5GS domain). It is assumed that the HSS is deployed using the UDC architecture in TS 23.335 [3].\nScenario 2: a common repository (acting as EPS UDR and 5GS UDR) is shared between separate HSS and UDM, in which both the user data for 5GC, EPC, CS and IMS domains are stored. It is also assumed that the HSS is deployed using the UDC architecture in TS 23.335 [3].",
      "chunk_type": "general",
      "cross_references": [
        "ts_23.335"
      ]
    },
    {
      "chunk_id": "ts_23.973_6.1.1",
      "section_id": "6.1.1",
      "section_title": "Introduction",
      "content": "This solution applies to deployment scenario 1 and 2.\nThis solution proposes a new Service Based Interface between UDM and HSS.",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.973_6.1.2",
      "section_id": "6.1.2",
      "section_title": "High-level Description",
      "content": "This contribution proposes a service based interface between HSS and UDM. The architecture for this solution is outlined in the following figure:\nFigure 6.1.2-1: Architecture for Direct UDM-HSS Interworking with independent UDRs\nFigure 6.1.2-2: Architecture for Direct UDM-HSS Interworking with a common repository\nA new reference point between UDM and HSS within the combined HSS/UDM (i.e. Nxx as depicted in Figures 6.1.2-1 and 6.1.2-2) is proposed. The new interface for interworking between HSS and UDM is proposed to be based on SBI principles.\nNOTE:\tThe UDM and the HSS may be deployed in a stand-alone manner and could be from different vendors.",
      "chunk_type": "general",
      "cross_references": [
        "figure_6.1.2-1",
        "figure_6.1.2-2"
      ]
    },
    {
      "chunk_id": "ts_23.973_6.1.3",
      "section_id": "6.1.3",
      "section_title": "Services and Illustrated Procedures",
      "content": "The Procedures and protocols for the Nxx interface are documented in TS 23.632 [19] and TS 29.563 [20] respectively.\nEditor's note:\tThe correct references need to be added when available. Nxx name may also need update.",
      "chunk_type": "procedure",
      "cross_references": [
        "ts_23.632",
        "ts_29.563"
      ]
    },
    {
      "chunk_id": "ts_23.973_6.1.4",
      "section_id": "6.1.4",
      "section_title": "Impacts on existing services and interfaces",
      "content": "Following impacts are identified:\na)\tImpacts in HSS:\nNew SBA service as documented in TS 23.632 [19] and TS 29.563 [20] respectively.\nThis SBA service has to follow registration/discovery/selection procedures (by means of interaction with NRF or by configuration) as defined for Rel‑15 or its evolution/adaptation to Rel‑16.\nNo impacts to existing interfaces or procedures.\nb)\tImpacts in UDM\nNew SBA service as documented in documented in TS 23.632 [19] and TS 29.563 [20] respectively.",
      "chunk_type": "general",
      "cross_references": [
        "ts_23.632",
        "ts_29.563"
      ]
    },
    {
      "chunk_id": "ts_23.973_6.1.5",
      "section_id": "6.1.5",
      "section_title": "Evaluation",
      "content": "This solution identifies an approach that can work for both layered and not layered architectures of HSS.\nIn addition, it supports all the procedures that have been defined on EPS and 5GS without any impact on any other interface than the one between HSS and UDM this solution defines.",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.973_6.2.1",
      "section_id": "6.2.1",
      "section_title": "Introduction",
      "content": "This solution applies to deployment scenario 1 and 2.\nThe assumption of this solution is that 5GS UDR and EPS UDR are separate, between which there is no interface for direct interactions. The EPS and IMS profiles are stored in EPS UDR and the 5GS profile is stored in 5GS UDR.\nUDM and HSS FE interacts to retrieve or update the required user data for the following procedures:\n-\tAuthentication procedure, i.e. initial attach/registration.\n-\tNetwork Provided Location Information (NPLI).\n-\tProcedure on IP address continuity of interworking without N26 from 5GS to EPS.\n-\tT-ADS query for IMS voice.\n-\tIMS related procedures related to Cx/Dx and Sh interfaces.\n-\tSMS over NAS.\nTo avoid the impact on legacy HSS, the interactions for retrieving or updating user data are initiated by UDM through reusing existing HSS supported protocol and procedures, i.e. this solution only requires UDM to retrieve or update user data stored in EPS UDR via HSS FE. The interface between HSS FE and EPS UDR is also not impacted.",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.973_6.2.2.1",
      "section_id": "6.2.2.1",
      "section_title": "Authentication and Registration",
      "content": "A new interface, Shu, between UDM and HSS FE is introduced, by which UDM initiates interactions with HSS FE to retrieve or update user data stored in EPS UDR. Shu is a Point-to-Point reference point.\nUDM is the only access point both to 5GC and EPC.\nFigure 6.2.2.1.1: Solution architecture\nIn some 5G deployment, when a 4G subscriber is updated to 5G subscriber, the 4G subscription profile keeps stored in EPS UDR while the new 5G subscription data is provisioned in 5GS UDR. In this case it is assumed that the authentication data is only stored in EPS UDR and is reused by 5GS authentication.\nFor new 5G subscriber, all the subscription data is stored in 5GS UDR. Therefore, the solution described in this clause does not apply.\nIn this scenario, when a UE with 5GS subscription registers on 5GS, the UDM needs to interact with HSS FE to retrieve authentication vector(s) generated in EPS UDR.\nNOTE 1:\tThe UDM is a combo node which simultaneously supports UDM and HSS FE functionality.\nNOTE 2:\tThe authentication vector(s) can be authentication vector(s) for SGSN, which is 5 tuple vector that UDM can convert it into 5GC authentication vector(s) by implementation to avoid impact on HSS.\nIn the case of single registration in 5G, in order to cancel the registration in the other RAT, the UDM supports to perform a fake 4G registration in the HSS, as shown in Figure 6.2.3.1-2. This trigger the HSS to cancel the 4G registration. When the UE moves back to 4G, the HSS sends cancel location to UDM which trigger the UDM to deregister the UE in 5G.",
      "chunk_type": "general",
      "cross_references": [
        "figure_6.2.2.1.1",
        "figure_6.2.3.1-2"
      ]
    },
    {
      "chunk_id": "ts_23.973_6.2.2.2",
      "section_id": "6.2.2.2",
      "section_title": "IP address continuity of interworking without N26 from 5GS to EPS",
      "content": "Shu interface defined in clause 6.2.2.1 is reused.\nUDM is the only access point both to 5GC and EPC.\nFigure 6.2.2.2-1: Solution architecture\nWhen a UE initially registers in 5GC, the FQDN for the S5/S8 interface of the PGW-C+SMF is registered into UDM via Nudm as specified in clause 4.11.2 of TS 23.502 [2].\nWhen UE attaches in EPS due to interworking without N26, the procedure specified in clause 4.11.2 of TS 23.502 [2] applies. When MME sends Update Location Request to UDM, after forwarding the request to HSS FE, UDM needs to retrieve the stored PGW-C+SMF FQDN and add it into the Update Location Ack message returned from HSS FE.\nThe MME use PGW-C+SMF FQDN received from the Update Location Ack message to determine the address of PGW-C+SMF.",
      "chunk_type": "general",
      "cross_references": [
        "clause_6.2.2.1",
        "ts_23.502_clause_4.11.2",
        "figure_6.2.2.2-1",
        "ts_23.502"
      ]
    },
    {
      "chunk_id": "ts_23.973_6.2.2.3",
      "section_id": "6.2.2.3",
      "section_title": "T-ADS for IMS voice",
      "content": "Shu interface defined in clause 6.2.2.1 is reused.\nUDM is the only access point both to 5GC, EPC and IMS, i.e. UDM supports S6a and Sh interfaces along with Nudm.\nFigure 6.2.2.3-1: Solution architecture\nSCC AS initiates T-ADS query towards UDM via Sh interface as specified in TS 29.328 [11].\nTo handle T-ADS query, the UDM queries T-ADS information towards HSS FE to get T-ADS information related to EPS and UMTS. HSS FE may query MME and SGSN to get information as specified in TS 23.401 [16] and TS 23.060 [15].\nAfter receiving response of T-ADS query from HSS FE, UDM responds T-ADS query to SCC AS based on the T-ADS information received from HSS FE and T-ADS information in UDM. UDM may query AMF to get necessary information as specified in TS 23.501 [6].",
      "chunk_type": "general",
      "cross_references": [
        "clause_6.2.2.1",
        "figure_6.2.2.3-1",
        "ts_29.328",
        "ts_23.401",
        "ts_23.060",
        "ts_23.501"
      ]
    },
    {
      "chunk_id": "ts_23.973_6.2.2.4",
      "section_id": "6.2.2.4",
      "section_title": "Supporting IMS related procedures",
      "content": "Shu interface defined in clause 6.2.2.1 is reused.\nUDM, which is a combo node supporting UDM and HSS functionalities, is the only access point both to 5GC, EPC and IMS.\nFigure 6.2.2.4-1: Solution architecture\nSince IMS profile is stored in EPS UDR, the UDM needs to forward all the requests received from IMS via Cx/Dx or Sh interfaces to HSS FE to handle, and further forwards all the responses from HSS FE to IMS.\nFor some scenarios that HSS FE and EPS UDR may generate requests to IMS, the UDM needs to forward all the requests received from HSS FE to IMS via Cx/Dx or Sh interfaces to handle, and further forwards all the responses from IMS to HSS FE.",
      "chunk_type": "procedure",
      "cross_references": [
        "clause_6.2.2.1",
        "figure_6.2.2.4-1"
      ]
    },
    {
      "chunk_id": "ts_23.973_6.2.2.5",
      "section_id": "6.2.2.5",
      "section_title": "SMS over NAS",
      "content": "Shu interface defined in clause 6.2.2.1 is reused.\nUDM is the only access point both to SMSF, SMS router and SMSC/SM GMSC.\nFigure 6.2.2.5-1: Solution architecture",
      "chunk_type": "general",
      "cross_references": [
        "clause_6.2.2.1",
        "figure_6.2.2.5-1"
      ]
    },
    {
      "chunk_id": "ts_23.973_6.2.3.1",
      "section_id": "6.2.3.1",
      "section_title": "Authentication and Registration",
      "content": "The procedure of the interaction between UDM and HSS FE for Authentication vector(s) Retrieval is shown in Figure 6.2.3.1-1.\nFigure 6.2.3.1-1: Authentication vectors Retrieval Procedure between UDM and HSS FE\n1a.\tWhen the UE attaches from EPS, MME sends Authentication-Information-Request to UDM to get authentication information for the UE. The MME message is sent to UDM by DRA routing (i.e. based on IMSI range).\n1b.\tWhen the UE registers from 5GS, AMF invokes Nausf_UEAuthentication_authenticate service operation to AUSF to get authentication information for the UE.\n1b'. AUSF invokes Nudm_UEAuthentication_Get service operation.\n2.\tWhen UDM receives Nudm_UEAuthentication_Get, it determines to generate and send S6a Authentication-Information-Request message to HSS-FE based on local configuration, to retrieve UTRAN authentication vectors, if the authentication information is stored in EPS UDR due to operator's deployment.\n3.\tHSS FE interacts with EPS UDR to retrieve requested type of authentication information of the UE via legacy UDC architecture.\n4.\tHSS FE returns Authentication-Information-Answer with E-UTRAN authentication vectors or UTRAN authentication vectors to UDM.\n5.\tif MAP_SEND_AUTHENTICATION_INFO response is received, UDM converts CS or PS authentication vectors to 5GS authentication vectors.\n5a.\tUDM forwards Authentication-Information-Answer with E-UTRAN authentication vectors to MME.\n5b'.\tIf UTRAN authentication vectors are received, UDM generates the respond to Nudm_UEAuthentication_Get service operation invocation with 5GS authentication vectors converted from UTRAN authentication vectors, and sends the respond to AUSF.\n5b.\tAUSF response the AMF invoked Nausf_UEAuthentication_authenticate service.\nNOTE:\tHow UDM converts authentication vector is implementation specific.\nThe procedure of the interaction between UDM and HSS FE for single Registration is shown in Figure 6.2.3.1-1.\nFigure 6.2.3.1-2: Single Registration Procedure between UDM and HSS FE\n1.\tThe UE is registered in 5G. The AMF perform UE registration in UDM. The AMF indicates whether it requires single registration or dual registration.\n2.\tIf the AMF requires single registration then the following steps are performed. Otherwise the procedure stops.\n3.\tThe UDM selects the HSS FE based on the SUPI and sends Update Location Request to HSS FE. In this message a dedicated MME Identity is included. This dedicated MME Identity is pointing to the UDM. From HSS FE point of view, the UDM is now acted as a MME. This message also includes an indication to indicate single registration and an indication to indicate the skip of subscription data so the HSS FE will not send the UE 4G subscription data.\n4.\tThe HSS FE stores the dedicated MME Identity into EPS UDR via Ud interface.\n5.\tThe HSS FE sends Update Location Response to UDM.\n6.\tIf the UE has been registered in an old MME, the HSS FE sends Cancel Location Request towards this old MME. This message will be routed to MME directly based on the old MME Identity.\n7.\tThe old MME deregisters the UE and sends Cancel Location Response to the HSS FE.\n8.\tAfter the UE reselects 4G and performs Tracking Area Update procedure in 4G, the new MME sends Update Location Request towards the HSS FE. As the UDM is the only access point both to 5GC and EPC, this message is sent to UDM and the UDM relays this message to HSS FE.\n9.\tThe HSS stores the new MME information into EPS UDR via Ud interface.\n10.\tThe HSS sends Update Location Response to new MME via UDM including the UE 4G subscription.\n11.\tBecause the UE has been registered in 5G and a dedicated MME Identity pointing to the UDM is stored in the EPS UDR, the EPS UDR triggers the HSS FE to send Cancel Location Request towards the UDM. This message will be routed to UDM based on the dedicated MME Identity.\n12.\tUDM sends Cancel Location Response to HSS FE.\n13.\tUpon receiving Cancel Location Request from HSS FE targeting to deregister the UE in 5G, the UDM initiated Deregistration procedure to deregister the UE in 5G.",
      "chunk_type": "general",
      "cross_references": [
        "figure_6.2.3.1-1",
        "figure_6.2.3.1-2"
      ]
    },
    {
      "chunk_id": "ts_23.973_6.2.3.2",
      "section_id": "6.2.3.2",
      "section_title": "IP address continuity of interworking without N26 from 5GS to EPS",
      "content": "The procedure of the interaction between UDM and HSS FE is shown in Figure 6.2.3.2-1.\nFigure 6.2.3.2-1: IP continuity procedure for interworking without N26 from 5GS to EPS\n0.\tPGW-C+SMF registers its FQDN in UDM during registration procedure. UDM stores the FQDN in 5GS UDR.\n1.\tWhen the UE attaches in EPS due to interworking without N26 from 5GS to EPS, during the procedure, MME sends Update Location Request to UDM.\n2.\tUDM forwards Update Location Request to HSS FE for further handling.\n3.\tHSS FE interacts with EPS UDR to handle Update Location Request.\n4.\tHSS FE returns Update Location Ack to UDM.\n5.\tafter receiving Update Location Ack, UDM retrieve PGW-C+SMF FQDN from 5GS UDR.\n6.\tUDM generates a new Update Location Ack to add PGW-C+SMF FQDN into the message and forwards the message to MME.\nNOTE:\tThe other signalling interactions not related to the solution are not present in this figure for simplification.",
      "chunk_type": "general",
      "cross_references": [
        "figure_6.2.3.2-1"
      ]
    },
    {
      "chunk_id": "ts_23.973_6.2.3.3",
      "section_id": "6.2.3.3",
      "section_title": "T-ADS for IMS voice",
      "content": "The procedure of the interaction between UDM and HSS FE is shown in Figure 6.2.3.3-1.\nFigure 6.2.3.3-1: T-ADS Procedure between UDM and HSS FE\n1.\tSCC AS initiates T-ADS query towards UDM by sending a User-Data-Request message via Sh interface.\n2.\tUDM forwards this User-Data-Request message to get T-ADS information related to EPS and UMTS.\n3.\tHSS FE may query MME to get more T-ADS information as specified in TS 23.401 [16].\n4.\tHSS FE may query SGSN to get more T-ADS information as specified in TS 23.060 [15].\n5.\tHSS FE returns T-ADS information based on the information it derives by sending a User-Data-Answer message.\n6.\tafter receiving T-ADS information from HSS FE, UDM may query AMF for more T-ADS information as specified in TS 23.501 [6].\n7.\tUDM determines T-ADS result based on T-ADS information received from HSS FE and AMF and responds to SCC AS with the T-ADS information by sending a User-Data-Answer message.\nNOTE:\tThe other signalling interactions not related to the solution are not present in this figure for simplification.\nFor the single registration case the following message flow in figure 6.2.3.3-2 applies:\nFigure 6.2.3.3-2: T-ADS Procedure with Single registration and UE is 5GS registered\nIn Figure 6.2.3.3-2 it is clear that due to the fake registration concept, the HSS is the entity that is in charge of taking T-ADS decisions, and not the UDM, even when the UE is registered in the 5GS with the UDM.",
      "chunk_type": "general",
      "cross_references": [
        "figure_6.2.3.3-1",
        "figure_6.2.3.3-2",
        "ts_23.401",
        "ts_23.060",
        "ts_23.501"
      ]
    },
    {
      "chunk_id": "ts_23.973_6.2.3.4",
      "section_id": "6.2.3.4",
      "section_title": "Supporting IMS related procedures",
      "content": "The procedure of the interaction between UDM and HSS FE is shown in Figure 6.2.3.4-1.\nFigure 6.2.3.4-1: IMS procedures between UDM and HSS FE\n1a or 1b.\tUDM receives Cx/Dx requests or Sh requests from IMS.\n2.\tUDM identifies these requests are for IMS procedures, and forwards the requests to HSS FE.\n3.\tHSS FE interacts with EPS UDR to handle the requests.\n4.\tHSS FE sends responses to the requests to UDM.\n5a or 5b.\tUDM forwards the received responses to IMS accordingly.\n6.\tEPS UDR and HSS FE may generates requests to IMS, e.g. PNR to IMS AS or RTR to S-CSCF.\n7.\tHSS FE sends the requests to UDM.\n8a or 8b.\tUDM forwards the requests to IMS accordingly.\n9a or 9b.\tIMS sends responses to the requests to UDM.\n10.\tUDM forwards the responses to HSS FE.\nNOTE:\tThe other signalling interactions not related to the solution are not present in this figure for simplification.",
      "chunk_type": "procedure",
      "cross_references": [
        "figure_6.2.3.4-1"
      ]
    },
    {
      "chunk_id": "ts_23.973_6.2.3.5",
      "section_id": "6.2.3.5",
      "section_title": "SMSF address storage and retrieval",
      "content": "The procedure of the interaction between UDM and HSS FE is shown in Figure 6.2.3.5-1.\nFigure 6.2.3.5-1: SMSF address storage and retrieval between UDM and HSS FE\n1.\tSMSF invokes Nudm_UECM_Registration service operation to register its address in UDM.\n2.\tUDM interacts with 5GS UDR to store the SMSF address.\n3.\tWhen SMS-SC or SMS GMSC initiates MT SMS delivery procedure, SMS-SC or SMS GMSC send MAP request i.e. Send Routing Information for SM request, to UDM.\n4.\tUDM interacts with 5GS UDR to retrieve stored SMSF address.\n5.\tUDM responds with SMSF address.",
      "chunk_type": "general",
      "cross_references": [
        "figure_6.2.3.5-1"
      ]
    },
    {
      "chunk_id": "ts_23.973_6.2.3.6",
      "section_id": "6.2.3.6",
      "section_title": "MT SMS domain selection",
      "content": "The procedure of the interaction between UDM and HSS FE for MT SMS domain selection is shown in Figure 6.2.3.6-1.\nFigure 6.2.3.6-1: MT SMS domain selection\n1.\tSMS SC/SMS-GMSC sends MAP Send Routing Info for SM request to UDM to query routing address for MT SMS.\n2.\tUDM retrieves SMSF address from 5GS UDR as specified in clause 6.2.3.5.\n3.\tUDM forwards MAP Send Routing Info for SM request to HSS FE to query more routing addresses for MT SMS.\n4.\tHSS FE retrieves SMS routing addresses stored in EPS UDR.\n5.\tHSS FE sends Send Routing Info for SM response with all addresses currently available, e.g. IP-SM-GW/ SMS Router address, MME address and MSC address.\n6.\tBased on configured policy, UDM selects the SMS routing address to be used for SMS SC/SMS-GMSC, e.g. IP-SM-GW/SMS Router address, and returns the address to SMS SC/SMS-GMSC.\n7.\tSMS SC/SMS-GMSC forwards SMS message to IP-SM-GW/SMS Router.\n8.\tIP-SM-GW/SMS Router fails to deliver the SMS message to the UE via IMS.\n9.\tIP-SM-GW/SMS Router may query UDM again to get other address for SMS delivery retry.\n10.\tBased on configured policy, UDM returns other available SMS routing address to IP-SM-GW/SMS Router.\n11.\tIP-SM-GW/SMS Router retries message delivery to the received address.",
      "chunk_type": "general",
      "cross_references": [
        "clause_6.2.3.5",
        "figure_6.2.3.6-1"
      ]
    },
    {
      "chunk_id": "ts_23.973_6.2.3.7",
      "section_id": "6.2.3.7",
      "section_title": "Messages-Waiting-Data handling",
      "content": "In this solution, the Messages-Waiting-Data as specified in TS 23.040 [21] are stored in HSS.\nWhen SMS related entities, e.g. SMS SC/SMS-GMSC or IP-SM-GW, send corresponding requests to create or modify the Messages-Waiting-Data as specified in TS 23.040 [21] and TS 23.204 [22], the UDM forwards the requests with no change to HSS FE. The HSS FE interacts with EPS UDR to complete the handling of the Messages-Waiting-Data. The HSS FE sends responses to the UDM, which forwards the responses to the corresponding entities.\nWhen the HSS detects or is informed that the MS/UE is reachable or is available again, the HSS clears corresponding flags and alerts SMS SC/SMS-GMSC as specified in TS 23.040 [21]. The UDM forwards the messages in these procedures.\nWhen the UDM receives UE reachability notification, addition to the procedures defined in TS 23.502 [2], the UDM acts as a MME and generates request to HSS HE to notify the reachability of the UE as specified in TS 29.272 [23].",
      "chunk_type": "general",
      "cross_references": [
        "ts_23.040",
        "ts_23.204",
        "ts_23.502",
        "ts_29.272"
      ]
    },
    {
      "chunk_id": "ts_23.973_6.2.4.1",
      "section_id": "6.2.4.1",
      "section_title": "Authentication impacts",
      "content": "UDM supports:\n-\tgenerating Diameter S6a Authentication-Information-Request message based on Nudm_UEAuthentication_Get service operation;\n-\tforwarding Diameter S6a Authentication-Information-Request message to HSS-FE and Authentication-Information-Answer message with authentication vectors to MME;\n-\tconverting UTRAN authentication vector into 5GS authentication vector;\n-\tgenerating the respond to Nudm_UEAuthentication_Get service operation invocation with 5GS authentication vectors, and sends the respond to AMF;\n-\tgenerating and sending Location Update Request message to perform fake 4G registration in HSS FE when the UE is registered in 5G;\n-\tde-registering the UE in 5G when it receives Cancel Location request with dedicated MME Identity from the HSS FE.\nHSS FE: No impact.\n5GS UDR: No impact.\nEPS UDR: No impact.",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.973_6.2.4.2",
      "section_id": "6.2.4.2",
      "section_title": "IP address continuity impacts",
      "content": "UDM supports:\n-\tforwarding Diameter S6a Update Location Request message to HSS FE;\n-\tretrieving PGW-C+SMF FQDN from 5GS UDR after receiving Update Location Ack from HSS FE;\n-\tgenerating new Update Location Ack to add PGW-C+SMF FQDN into the message and forwarding the message to MME.\nHSS FE: No impact.\n5GS UDR: No impact.\nEPS UDR: No impact.",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.973_6.2.4.3",
      "section_id": "6.2.4.3",
      "section_title": "T-ADS for voice impacts",
      "content": "UDM supports:\n-\tforwarding User-Data-Answer message to HSS FE;\n-\tdetermine T-ADS result based on T-ADS information received from HSS FE and AMF.\nHSS FE: No impact.\n5GS UDR: No impact.\nEPS UDR: No impact.",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.973_6.2.4.4",
      "section_id": "6.2.4.4",
      "section_title": "Supporting IMS related procedures",
      "content": "UDM supports:\n-\tforwarding requests for IMS procedures received from IMS to HSS FE and further forwarding responses from HSS FE to IMS;\n-\tforwarding requests for IMS procedures received from HSS FE to IMS and further forwarding responses from IMS to HSS FE.\nHSS FE: No impact.\n5GS UDR: No impact.\nEPS UDR: No impact.",
      "chunk_type": "procedure",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.973_6.2.5",
      "section_id": "6.2.5",
      "section_title": "Evaluation",
      "content": "This solution has no impact on entities other than UDM.\nThe Solution does not provide the possibility to deploy a pure UDM without HSS functionality.\nThe EPS and 5GS UDRs both need to keep up to date registration status for the UE, i.e. the EPS UDR has to know the registration status of the UE also when the UE is in the 5GS (due to the fake registration concept). This means that there is duplication of registration data in EPS and 5GS UDR, which is adding load and storage requirement to the system\nDue to the fake registration concept, the T-ADS master node is always the legacy HSS, not the UDM, even when the UE is 5GS registered. So, the functional allocation between 5GS and EPS specific entities is blurred for as long as there are combined 4G/5G subscribers.\nImplementation to convert UTRAN authentication vectors to 5GS authentication vectors is needed.\nNOTE:\tThe above implementation should be evaluated by SA WG3.",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.973_6.3.1",
      "section_id": "6.3.1",
      "section_title": "Introduction",
      "content": "This solution applies to deployment scenario 1 and 2.\nThis solution proposes a deployment and coexistence alternative which avoids the need of specification of interworking procedures between UDM and the existing HSS.",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.973_6.3.2",
      "section_id": "6.3.2",
      "section_title": "High-level Description",
      "content": "This solution proposes an alternative for coexistence between UDM and HSS based on:\n-\tDeploying HSS and UDM in a single network entity, referred as Combined HSS/UDM, supporting interfaces and procedures specified for 5GC, EPC and IMS.\n-\tUDM and HSS deployed in the Combined network entity may interact with a 5GS UDR that stores 4G/IMS/5G subscription data for 5G enabled users (when using a common repository). The 5GS UDR may also store 2G/3G subscription profiles for 5G enabled users in case coexistence with 2G/3G networks is required. Alternatively, the Combined HSS/UDM may also use separate repositories for subscription data of 5G enabled users.\n-\tThe functions of the Combined HSS/UDM are provided by a single network entity, so that the interactions between HSS and UDM within the Combined entity are performed internally and therefore it is not required to define such interworking.\n-\tThe existing HSS and EPS UDR keep serving only 4G users. The existing EPS UDR may also store 2G/3G subscription profiles for non 5G enabled users in case coexistence with 2G/3G networks is required.\n-\tA routing solution routes Diameter EPC/IMS requests to either the Combined HSS/UDM for 5G enabled users or the existing HSS for 4G only users. This kind of solution can be achieved e.g. by using a network entity that provides SLF/DRA functionality and/or by local configuration in network entities interacting with HSS (e.g. configuring IMSI ranges in MME), and other alternatives may be possible. The routing solution includes redundancy mechanisms to prevent single point of failure issues.\n-\tConsidering that HLR is an integral part of the HSS, both within the existing HSS and the HSS within the Combined HSS/UDM, the routing solution is also required to route MAP requests to either the Combined HSS/UDM for 5G enabled users or the existing HSS for non 5G enabled users. This enables the coexistence of 2G/3G domain in both HSS platforms including the support for MAP based SMS use cases.\n-\tThere is no need of interworking between UDM and existing HSS out of the Combined network entity.\n-\tThe different options regarding deployment of subscription data repository are described below, gathering the considerations described previously.\n-\tOption 1: A common repository is used for the Combined HSS/UDM. Subscription data of new 5G enabled users is directly provisioned in 5GS UDR. Subscription data of existing 4G users that becomes 5G enabled is relocated from existing EPS UDR to 5GS UDR. When and how the subscription data relocation is performed depends on the overall migration plan and the procedure designed for that purpose, and it is out of scope of the description of this solution.\nThis option may be considered the most appropriate for a multivendor deployment, while providing centralization of subscription data, allowing consolidation of user profiles for a given user in a single repository. This consolidation simplifies provisioning process, providing a single point of provisioning and ensuring data consistency.\nIt minimizes deployment impacts, providing a flexible network evolution to 5G while users become 5G enabled through subscription relocation according to plans and speed chosen by the operator.\nAdditionally, this option may be considered to follow a smooth evolution of the subscription data repository used for 5G enabled users to a cloud native deployment.\nFigures 6.3.1-1 and 6.3.1-2 show the network architecture using a common repository for the Combined HSS/UDM:\nFigure 6.3.1-1: Coexistence of existing HSS and Combined HSS/UDM with common repository used by the Combined entity\nFigure 6.1.1-2: Coexistence of existing HSS and Combined HSS/UDM with common repository used by the Combined entity – Including MAP access\n-\tOption 2: Separate repositories are deployed for subscription data of 5G enabled users accessed by the Combined HSS/UDM. In this case, provisioning and/or subscription relocation to EPS UDR used by the Combined HSS/UDM is also needed.\nThis option allows multivendor deployment for 5G enabled users and legacy users, as well as keeping open the way for the evolution of the subscription data repository used for 5G enabled users to a cloud native deployment. However, subscription data centralization is not achieved, and deployment, management and provisioning of subscription repositories becomes not optimal and complex.\nFigures 6.3.1-3, and 6.3.1-4 show the network architecture using separate repositories for the Combined HSS/UDM:\nFigure 6.3.1-3: Coexistence of existing HSS and Combined HSS/UDM with separate repositories deployed for the Combined entity\nFigure 6.3.1-4: Coexistence of existing HSS and Combined HSS/UDM with separate repositories deployed for the Combined entity - Including MAP access\n-\tOption 3: Separate repositories are used and the existing EPS UDR keeps storing 4G/IMS subscription data for 5G enabled users as well as 4G only users, as shown in figures 6.3.1-5, and figure 6.3.1-6. Subscription relocation is not required in this option.\nBoth the existing HSS and the HSS within the Combined entity interact with the EPS UDR using the same proprietary Ud interface, implying that a multivendor deployment will require integration of the non-standard Ud interface with the HSS in the Combined HSS/UDM.\nThis option does not allow centralization of user profiles for a given user in a single repository, making provisioning more complex as multiple subscription repositories are required to be populated for the same user.\nIt enables evolution of subscription repository to cloud native technology only for the 5G profiles. EPC and IMS profiles are assumed to be kept in the existing EPS UDR using legacy repository technology.\nFigure 6.3.1-5: Coexistence of existing HSS and Combined HSS/UDM with separate repositories using existing EPS UDR for 4G/IMS subscription data\nFigure 6.3.1-6: Coexistence of existing HSS and Combined HSS/UDM with separate repositories using existing EPS UDR for 4G/IMS subscription data - Including MAP access\n-\tOption 4: Another option is to deploy a single repository to store subscription data for all domains used by the Combined HSS/UDM and the existing HSS, as depicted in figures 6.3.1-7, and 6.3.1-8. This option may not require subscription relocation either.\nThis alternative allows user profiles centralization, although in a multivendor deployment it will require integration of the non-standard Ud interface with the HSS in the Combined HSS/UDM.\nFigure 6.3.1-7: Coexistence of existing HSS and Combined HSS/UDM using a common repository\nFigure 6.3.1-8: Coexistence of existing HSS and Combined HSS/UDM using a common repository - Including MAP access",
      "chunk_type": "general",
      "cross_references": [
        "figure_6.3.1-1",
        "figure_6.1.1-2",
        "figure_6.3.1-3",
        "figure_6.3.1-4",
        "figure_6.3.1-6",
        "figure_6.3.1-5",
        "figure_6.3.1-7",
        "figure_6.3.1-8"
      ]
    },
    {
      "chunk_id": "ts_23.973_6.3.3",
      "section_id": "6.3.3",
      "section_title": "Services and Illustrated Procedures",
      "content": "The interactions between UDM and HSS within the Combined network entity are internal, so it is not required to define such interworking.",
      "chunk_type": "procedure",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.973_6.3.4",
      "section_id": "6.3.4",
      "section_title": "Impacts on existing services and interfaces",
      "content": "This solution has no impact on existing services and interfaces.",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.973_6.3.5",
      "section_id": "6.3.5",
      "section_title": "Evaluation",
      "content": "Solution 3 proposes a coexistence scenario where a Combined HSS/UDM network entity serving 5G enabled users can coexist without interaction with any existing HSS supporting EPC and IMS for 4G only users. Since there is no interaction needed between UDM and the existing HSS out of the Combined entity, this solution does not require any standardization effort. Additionally, this solution avoids any impact on existing nodes (HSS, EPS UDR), services, protocols and interfaces. Some options require migration of subscriber data.\nFor IMS and EPC services, the solution requires the use of a routing solution which can be based on standard functions (e.g. DRA/SLF) and it is normally deployed in the operator's network for different purposes.\nIn case of coexistence with 2G/3G networks (including support for MAP based SMS use cases) is required, the routing solution is also required to route MAP requests to either the Combined HSS/UDM for 5G enabled users or the existing HSS for non 5G enabled users.\nImpacts are limited to provisioning/configuration updates for the routing function to route Diameter EPC/IMS requests and/or MAP requests to either the Combined HSS/UDM for 5G enabled users or the existing HSS for non 5G enabled users.\nThis solution offers different UDR deployment alternatives, from which option 1 as described previously is considered the option providing the most future proof benefits in terms of centralization/consolidation of subscription data for 5G enabled users, management of subscription data, multivendor support and network evolution.\nHowever, an operator may find among the different alternatives proposed the option that fits better its network evolution plans, based on the current deployment and evaluation of the aspects the operator considers as most relevant.",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.973_7",
      "section_id": "7",
      "section_title": "Conclusions",
      "content": "It is concluded that normative work, as specified in the present document and TS 29.563 [20], proceeds based on solution defined in clause 6.1 as normative optional feature, both stage 2 and stage 3 for deployments in which upgrading legacy systems to service based architectures is a feasible/acceptable option for the network operator.\nSolutions defined in clauses 6.2 and 6.3 are concluded as implementation/deployment options with no need of normative work for scenarios where migration of subscription data or upgrades of legacy systems are not possible/feasible.\nAnnex A:Change history\nChange history\nDate\nMeeting\nTDoc\nCR\nRev\nCat\nSubject/Comment\nNew version\n2019-05\nSP#84\nSP-190466\nGenerated from v0.2.0 for plenary approval\n1.0.0\n2019-08\nSP#84\n-\n-\n-\n-\nMCC Editorial update for publication after TSG SA approval\n16.0.0\n2019-09\nSP#85\nSP-190623\n0001\n-\nF\nTR 23.973 clean up\n16.1.0\n2022-03\nSP#95E\n-\n-\n-\n-\nUpdate to Rel-17 version (MCC)\n17.0.0\n2024-03\n-\n-\n-\n-\n-\nUpdate to Rel-18 version (MCC)\n18.0.0",
      "chunk_type": "general",
      "cross_references": [
        "clause_6.1",
        "ts_29.563",
        "ts_23.973"
      ]
    }
  ]
}