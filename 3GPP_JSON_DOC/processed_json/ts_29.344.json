{
  "metadata": {
    "specification_id": "ts_29.344",
    "version": "18.0.0",
    "title": "3GPP TS 29.344",
    "file_path": "/content/drive/MyDrive/RAG_thesis/data/29_series/29344-i00/29344-i00.docx"
  },
  "export_info": {
    "export_date": "2025-07-26T09:03:24.083923",
    "total_chunks": 64
  },
  "chunks": [
    {
      "chunk_id": "ts_29.344_1",
      "section_id": "1",
      "section_title": "Scope",
      "content": "The present document describes the Diameter-based PC4a interface between the Proximity-based Services (ProSe) Function and the Home Subscriber Server (HSS) defined for ProSe.\nThis specification defines the Diameter application for PC4a reference point between the ProSe Function and the HSS.The interactions between the ProSe Function and the HSS are specified.\nThe stage 2 description for Proximity-based Services (ProSe) features in EPS is specified in 3GPP TS 23.303 [2].",
      "chunk_type": "general",
      "cross_references": [
        "ts_23.303"
      ]
    },
    {
      "chunk_id": "ts_29.344_2",
      "section_id": "2",
      "section_title": "References",
      "content": "The following documents contain provisions which, through reference in this text, constitute provisions of the present document.\n-\tReferences are either specific (identified by date of publication, edition number, version number, etc.) or non‑specific.\n-\tFor a specific reference, subsequent revisions do not apply.\n-\tFor a non-specific reference, the latest version applies. In the case of a reference to a 3GPP document (including a GSM document), a non-specific reference implicitly refers to the latest version of that document in the same Release as the present document.\n[1]\t3GPP TR 21.905: \"Vocabulary for 3GPP Specifications\".\n[2]\t3GPP TS 23.303: \"Proximity based services; Stage 2\".\n[3]\tVoid.\n[4]\t3GPP TS 33.210: \"3G Security; Network Domain Security; IP Network Layer Security\".\n[5]\tIETF RFC 4960: \"Stream Control Transmission Protocol\".\n[6]\t3GPP TS 29.229: \"Cx and Dx interfaces based on the Diameter protocol\".\n[7]\t3GPP TS 23.003: \"Numbering, addressing and identification\".\n[8]\tIETF RFC 5234: \"Augmented BNF for Syntax Specifications: ABNF\".\n[9]\t3GPP TS 29.228: \"IP multimedia (IM) Subsystem Cx and Dx Interfaces; Signalling flows and Message Elements\".\n[10]\t3GPP TS 29.272: \"Evolved Packet System; MME and SGSN Related Interfaces Based on Diameter Protocol\".\n[11]\t3GPP TS 23.007: \"Restoration procedures\".\n[12]\t3GPP TS 29.329: \"Sh Interface based on the Diameter protocol\".\n[13]\tvoid\n[14]\t3GPP TS 29.173: \"Location Services (LCS); Diameter-based SLh interface for Control Plane LCS\".\n[15]\tIETF RFC 7683: \"Diameter Overload Indication Conveyance\".\n[16]\t3GPP TS 24.334: \"Proximity-services (ProSe) User Equipment (UE) to ProSe function protocol aspects; Stage 3\".\n[17]\t3GPP TS 24.333: \"Proximity-services (ProSe) Management Objects (MO); Stage 3\".\n[18]\t3GPP TS 29.061: \"Interworking between the Public Land Mobile Network (PLMN) supporting packet based services and Packet Data Networks (PDN)\".\n[19]\t3GPP TS 32.251: \"Telecommunication management; Charging management; Packet Switched (PS) domain charging\".\n[20]\t3GPP TS 32.298: \"Charging Management; CDR parameter description\".\n[21]\tIETF RFC 7944: \"Diameter Routing Message Priority\".\n[22]\tIETF RFC 8583: \"Diameter Load Information Conveyance\".\n[23]\tIETF RFC 6733: \"Diameter Base Protocol\".",
      "chunk_type": "general",
      "cross_references": [
        "ts_21.905",
        "ts_23.303",
        "ts_33.210",
        "ts_29.229",
        "ts_23.003",
        "ts_29.228",
        "ts_29.272",
        "ts_23.007",
        "ts_29.329",
        "ts_29.173",
        "ts_24.334",
        "ts_24.333",
        "ts_29.061",
        "ts_32.251",
        "ts_32.298"
      ]
    },
    {
      "chunk_id": "ts_29.344_3.1",
      "section_id": "3.1",
      "section_title": "Definitions",
      "content": "For the purposes of the present document, the terms and definitions given in TR 21.905 [1] and the following apply. A term defined in the present document takes precedence over the definition of the same term, if any, in TR 21.905 [1].",
      "chunk_type": "definition",
      "cross_references": [
        "ts_21.905"
      ]
    },
    {
      "chunk_id": "ts_29.344_3.2",
      "section_id": "3.2",
      "section_title": "Abbreviations",
      "content": "For the purposes of the present document, the abbreviations given in 3GPP TR 21.905 [1] and the following apply. An abbreviation defined in the present document takes precedence over the definition of the same abbreviation, if any, in 3GPP TR 21.905 [1].\nDRMP\tDiameter Routing Message Priority\nDSCP\tDifferentiated Services Code Point\nProSe\tProximity-based Services",
      "chunk_type": "general",
      "cross_references": [
        "ts_21.905"
      ]
    },
    {
      "chunk_id": "ts_29.344_4.1",
      "section_id": "4.1",
      "section_title": "Introduction",
      "content": "The PC4a reference point between the ProSe Function and the HSS is defined in the 3GPP TS 23.303 [2].\nThis document describes the PC4a interface related procedures, message parameters and protocol specifications.\nThe PC4a interface allows the ProSe Function to retrieve ProSe related subscription data in order to authorise access from the UE for ProSe.",
      "chunk_type": "general",
      "cross_references": [
        "ts_23.303"
      ]
    },
    {
      "chunk_id": "ts_29.344_5.1",
      "section_id": "5.1",
      "section_title": "Introduction",
      "content": "This clause describes the Diameter-based PC4a interface related procedures and information elements exchanged between the ProSe Function and the HSS.\nIn the tables that describe the Information Elements transported by each Diameter command, each Information Element is marked as (M) Mandatory, (C) Conditional or (O) Optional in the \"Cat.\" column. For the correct handling of the Information Element according to the category type, see the description detailed in clause 6 of the 3GPP TS 29.228 [9].",
      "chunk_type": "general",
      "cross_references": [
        "ts_29.228_clause_6",
        "ts_29.228"
      ]
    },
    {
      "chunk_id": "ts_29.344_5.2.1",
      "section_id": "5.2.1",
      "section_title": "General",
      "content": "This procedure shall be used between the ProSe Function and the HSS for authorization of the UE for ProSe. The procedure shall be invoked by the ProSe Function and is used:\n-\tto request ProSe related subscription data.\nThis procedure is mapped to the commands ProSe-Subscriber-Information-Request/Answer (PIR/PIA) in the Diameter application specified in clause 6. Tables 5.2.1-1 and 5.2.1-2 detail the involved information elements.\nTable 5.2.1-1: ProSe Subscriber Information Retrieval Request\nInformation Element Name\nMapping to Diameter AVP\nCat.\nDescription\nIMSI\nUser-Name (See IETF RFC 6733 [23])\nM\nThis information element shall contain the user IMSI, formatted according to 3GPP TS 23.003 [7], clause 2.2.\nSupported Features\n(See 3GPP TS 29.229 [6])\nSupported-Features\nO\nIf present, this information element shall contain the list of features supported by the origin host.\nTable 5.2.1-2: ProSe Subscriber Information Retrieval Answer\nInformation Element Name\nMapping to Diameter AVP\nCat.\nDescription\nResult(See 6)\nResult-Code / Experimental-Result\nM\nThis IE shall contain the result of the operation.\nThe Result-Code AVP shall be used to indicate success / errors as defined in the Diameter base protocol (see IETF RFC 6733 [23]).\nThe Experimental-Result AVP shall be used for PC4a errors. This is a grouped AVP which shall contain the 3GPP Vendor ID in the Vendor-Id AVP, and the error code in the Experimental-Result-Code AVP.\nThe following errors are applicable:\n- User Unknown\n- Unknown ProSe Subscription\n- ProSe Not Allowed\nProSe Subscription Data\n(See 6.3.2)\nProSe-Subscription-Data\nC\nThis information element shall contain the ProSe Subscription Data that gives the user permission to use ProSe.\nMSISDN\n(See 3GPP TS 29.329 [12])\nMSISDN\nC\nThis information element shall contain the user MSISDN, formatted according to 3GPP TS 29.329 [12]. It shall be present if available.\nVisited PLMN Id\n(See 3GPP TS 29.272 [10])\nVisited-PLMN-Id\nC\nThis IE shall contain the MCC and the MNC of the PLMN where the UE is registered, see 3GPP TS 23.003 [7].\nIt shall be present if the UE is roaming in a PLMN different from the Home PLMN.\nSupported Features\n(See 3GPP TS 29.229 [6])\nSupported-Features\nO\nIf present, this information element shall contain the list of features supported by the origin host.\nReset-IDs\n(See 3GPP TS 29.272 [10])\nReset-ID\nO\nThe Reset-ID uniquely identifies a fallible resource in the HSS's realm on which the user (IMSI) depends. In the event of a restart of the fallible resource a Reset message containing the Reset-ID will exactly identify the impacted subscribers.",
      "chunk_type": "definition",
      "cross_references": [
        "clause_6",
        "ts_23.003_clause_2.2",
        "table_5.2.1-1",
        "table_5.2.1-2",
        "ts_23.003",
        "ts_29.229",
        "ts_29.329",
        "ts_29.272"
      ]
    },
    {
      "chunk_id": "ts_29.344_5.2.2",
      "section_id": "5.2.2",
      "section_title": "Detailed Behaviour of the ProSe Function",
      "content": "The ProSe Function shall make use of this procedure to request ProSe related subscription data.\nIf the ProSe Function retrieved the ProSe related subscription data, the ProSe Function shall perform the authorisation for ProSe as described in the 3GPP TS 23.303 [2].",
      "chunk_type": "requirement",
      "cross_references": [
        "ts_23.303"
      ]
    },
    {
      "chunk_id": "ts_29.344_5.2.3",
      "section_id": "5.2.3",
      "section_title": "Detailed Behaviour of the HSS",
      "content": "When receiving a ProSe Subscriber Information Retrieval Request the HSS shall check if the IMSI for whom data is requested exists in the HSS. If not, an Experimental-Result of DIAMETER_ERROR_USER_UNKNOWN shall be returned.\nIf the IMSI exists but there is not any ProSe subscription data for the IMSI, the HSS shall return an Experimental-Result of DIAMETER_ERROR_UNKNOWN_PROSE_SUBSCRIPTION.\nIf the UE is not allowed to use ProSe in the visited PLMN, the HSS shall return an Experimental-Result of DIAMETER_ERROR_PROSE_NOT_ALLOWED. Otherwise, the HSS shall return a Result-Code of DIAMETER_SUCCESS and shall store ProSe Function identity (the ProSe Function identity is received within the Origin-Host AVP) and download the ProSe subscription data to the ProSe Function. The HSS shall provide the Visited PLMN ID of where the UE is registered if the UE is roaming in a PLMN different from the Home PLMN.",
      "chunk_type": "requirement",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.344_5.3.1",
      "section_id": "5.3.1",
      "section_title": "General",
      "content": "The Update ProSe Subscriber Data procedure shall be used between the ProSe Function and the HSS to update the subscriber related data downloaded by means of the ProSe Subscriber Information Retrieval operation (see clause 5.2) and stored in the ProSe Function.\nIt shall be used to update subscriber related data in the ProSe Function due to administrative changes of the user data in the HSS, i.e. if the user was given a subscription and the subscription has changed. It shall be used at least to perform the following:\n-\tupdate of all of ProSe subscription data of the subscriber,\n-\tupdate of a subset of the ProSe subscription data of the subscriber,\n-\tdeletion of the ProSe subscription data of the subscriber.\nThe procedure will also be triggered when the VPLMN has changed.\nThis procedure is mapped to the commands Update-ProSe-Subscriber-Data-Request/Answer (UPR/UPA) in the Diameter application specified in clause 6.\nTable 5.3.1-1 specifies the involved information elements for the request.\nTable 5.3.1-2 specifies the involved information elements for the answer.\nTable 5.3.1-1: Update ProSe Subscriber Data Request\nInformation element name\nMapping to Diameter AVP\nCat.\nDescription\nIMSI\nUser-Name (See IETF RFC 6733 [23])\nM\nThis information element shall contain the user IMSI, formatted according to 3GPP TS 23.003 [7], clause 2.2.\nSupported Features\n(See 3GPP TS 29.229 [6])\nSupported-Features\nO\nIf present, this information element shall contain the list of features supported by the origin host.\nProSe Subscription Data\n(See 6.3.2)\nProSe-Subscription-Data\nC\nThis information element shall contain the ProSe Subscription Data that gives the user permission to use ProSe.\nVisited PLMN Id\n(See 3GPP TS 29.272 [10])\nVisited-PLMN-Id\nC\nThis IE shall contain the MCC and the MNC of the PLMN where the UE is registered, see 3GPP TS 23.003 [7].\nIt shall be present if the UE is roaming in a PLMN different from the Home PLMN.\nUPR Flags\nUPR-Flags\nM\nThis Information Element shall contain a bit mask. See clause 6.3.6 for the meaning of the bits.\nReset-IDs\n(See 3GPP TS 29.272 [10])\nReset-ID\nO\nThe Reset-ID uniquely identifies a fallible resource in the HSS's realm on which the user (IMSI) depends. In the event of a restart of the fallible resource a Reset message containing the Reset-ID will exactly identify the impacted subscribers.\nTable 5.3.1-2: Update ProSe Subscriber Data Answer\nInformation element name\nMapping to Diameter AVP\nCat.\nDescription\nSupported Features\n(See 3GPP TS 29.229 [6])\nSupported-Features\nO\nIf present, this information element shall contain the list of features supported by the origin host.\nResult\n(See 6.4)\nResult-Code / Experimental-Result\nM\nThis IE shall contain the result of the operation.\nThe Result-Code AVP shall be used to indicate success / errors as defined in the Diameter base protocol (see IETF RFC 6733 [23]).\nThe Experimental-Result AVP shall be used for PC4a errors. This is a grouped AVP which shall contain the 3GPP Vendor ID in the Vendor-Id AVP, and the error code in the Experimental-Result-Code AVP.\nThe following errors are applicable in this case:\n- User Unknown\n- Unknown ProSe Subscription",
      "chunk_type": "definition",
      "cross_references": [
        "clause_5.2",
        "clause_6",
        "ts_23.003_clause_2.2",
        "clause_6.3.6",
        "table_5.3.1-1",
        "table_5.3.1-2",
        "ts_23.003",
        "ts_29.229",
        "ts_29.272"
      ]
    },
    {
      "chunk_id": "ts_29.344_5.3.2",
      "section_id": "5.3.2",
      "section_title": "Detailed behaviour of the ProSe Function",
      "content": "When receiving a Update ProSe Subscriber Data request, the ProSe Function shall check whether the IMSI is known.\nIf it is not known, a result code of DIAMETER_ERROR_USER_UNKNOWN shall be returned.\nIf it is known, the ProSe Function shall update the corresponding data according to the indication as sent in the request, and acknowledge the Update ProSe Subscriber Data message by returning an Update ProSe Subscriber Data Answer. If the UPR-Flags indicates that the ProSe subscription data is to be deleted, the ProSe Function shall delete the associated ProSe UE context if it has been stored before.\nIf the update of the subscription data succeeds in the ProSe Function, the Result-Code shall be set to DIAMETER_SUCCESS.\nIf the ProSe Function cannot fulfil the received request for other reasons, e.g. due to a database error, it shall set the Result-Code to DIAMETER_UNABLE_TO_COMPLY. In this case, the ProSe Function shall mark the subscription record \"Subscriber data to be restored in the HSS\".",
      "chunk_type": "requirement",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.344_5.3.3",
      "section_id": "5.3.3",
      "section_title": "Detailed behaviour of the HSS",
      "content": "The HSS shall make use of this procedure to update the relevant subscriber related data in the the ProSe Function to replace a specific part of the user data stored in the ProSe Function with the data sent.\nIf the ProSe related subscription data is updated or revoked, the HSS sends the updated ProSe subscription data to the ProSe Function. The HSS shall include the UPR-Flags to indicate which part of the data is updated. If all of the ProSe subscription data is to be removed, the HSS shall set the \"Removal of all ProSe Subscription Data\" bit of the UPR-Flags, and the HSS shall delete the ProSe Function Identity if it is stored for this subscriber.",
      "chunk_type": "requirement",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.344_5.4.1",
      "section_id": "5.4.1",
      "section_title": "General",
      "content": "This procedure shall be used between the ProSe Function and the HSS when the HSS needs to be notified about:\n-\trevocation of authorization for ProSe direct service on one PLMN.\n-\tremoval of the subscription data from the ProSe Function either by an MMI interaction or automatically.\nThis procedure is mapped to the commands ProSe-Notify-Request/Answer (PNR/PNA) in the Diameter application specified in clause 6. Tables 5.4.1-1 and 5.4.1-2 detail the involved information elements.\nTable 5.4.1-1: ProSe Notify Request\nInformation Element Name\nMapping to Diameter AVP\nCat.\nDescription\nIMSI\nUser-Name (See IETF RFC 6733 [23])\nC\nThis information element shall contain the user IMSI, formatted according to 3GPP TS 23.003 [7], clause 2.2.\nIt shall be present if the revocation is for a specific UE.\nSupported Features\n(See 3GPP TS 29.229 [6])\nSupported-Features\nO\nIf present, this information element shall contain the list of features supported by the origin host.\nPLMN ID (see 3GPP TS 29.272 [10])\nVisited-PLMN-Id\nC\nThis information element shall contain the MCC and the MNC of the PLMN where the UE's authorization for ProSe direct service is revoked, see 3GPP TS 23.003 [7].\nIt shall be present if the ProSe Function revokes the authorization for ProSe direct service in a specific PLMN.\nPNR Flags (see 6.3.7)\nPNR-Flags\nC\nThis Information Element shall contain a bit mask. See 6.3.7 for the meaning of the bits.\nTable 5.4.1-2: ProSe Notify Answer\nInformation Element Name\nMapping to Diameter AVP\nCat.\nDescription\nResult(See 6)\nResult-Code / Experimental-Result\nM\nThis IE shall contain the result of the operation.\nThe Result-Code AVP shall be used to indicate success / errors as defined in the Diameter base protocol (see IETF RFC 6733 [23]).\nThe Experimental-Result AVP shall be used for PC4a errors. This is a grouped AVP which shall contain the 3GPP Vendor ID in the Vendor-Id AVP, and the error code in the Experimental-Result-Code AVP.\nThe following errors are applicable:\n- User Unknown\n- Unknown ProSe Subscription\nSupported Features\n(See 3GPP TS 29.229 [6])\nSupported-Features\nO\nIf present, this information element shall contain the list of features supported by the origin host.",
      "chunk_type": "definition",
      "cross_references": [
        "clause_6",
        "ts_23.003_clause_2.2",
        "table_5.4.1-1",
        "table_5.4.1-2",
        "ts_23.003",
        "ts_29.229",
        "ts_29.272"
      ]
    },
    {
      "chunk_id": "ts_29.344_5.4.2",
      "section_id": "5.4.2",
      "section_title": "Detailed Behaviour of the ProSe Function",
      "content": "The ProSe Function shall make use of this procedure to revoke authorization for ProSe direct service.\nThe ProSe Function shall make use of this procedure to inform the HSS when the subscription data is deleted from the ProSe Function database due to MMI interaction or automatically.\nThe ProSe Function shall send the updated ProSe Permission and the PLMN ID for which the ProSe Permission is to be updated. If the revocation is for a single UE in the indicated PLMN, the ProSe Function shall include IMSI in the request.",
      "chunk_type": "requirement",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.344_5.4.3",
      "section_id": "5.4.3",
      "section_title": "Detailed Behaviour of the HSS",
      "content": "When receiving a ProSe Notify Request the HSS shall check if the IMSI, if present in the message, exists in the HSS. If not, an Experimental-Result of DIAMETER_ERROR_USER_UNKNOWN shall be returned.\nIf the IMSI exists but there is not any ProSe subscription data for the IMSI and the PLMN ID as indicated by the Visited-PLMN-Id AVP in the request, the HSS shall return an Experimental-Result of DIAMETER_ERROR_UNKNOWN_PROSE_SUBSCRIPTION.\nIf the PNR-Flags indicates revocation of authorization for ProSe direct service, and\n-\tif the IMSI exists and there is ProSe subscription data for the IMSI and the PLMN ID as indicated by the Visited-PLMN-Id AVP in the request, the HSS shall revoke ProSe direct service as indicated by the PNR Flags received in the request on that PLMN for the user and update the ProSe Subscription data accordingly. The HSS shall set the result code to DIAMETER_SUCCESS.\n-\tif IMSI is not present in the message, the HSS shall check if there are any users subscribed to ProSe subscription for the PLMN as indicated by the Visited-PLMN-Id AVP in the request, and if yes, revoke ProSe direct service as indicated by the PNR Flags received in the request on that PLMN for all the impacted users and update their ProSe Subscription data accordingly. The HSS shall set the result code to DIAMETER_SUCCESS.\nIf the PNR Flags indicates the subscription data is deleted from the ProSe Function, the HSS shall remove the ProSe Function Identity for the subscriber and set the result code to DIAMETER_SUCCESS.\nFor any other reasons if the HSS cannot fulfil the received request, e.g. due to a database error, it shall set the result code to DIAMETER_UNABLE_TO_COMPLY.",
      "chunk_type": "requirement",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.344_5.5.1",
      "section_id": "5.5.1",
      "section_title": "General",
      "content": "The Reset Procedure shall be used by the HSS, after a restart, to indicate to the ProSe Function that a failure has occurred.\nThe Reset Procedure may also be used by the HSS as part of operation and maintenance actions e.g. to allow planned HSS outage without service interruption.\nThis procedure is mapped to the commands Reset-Request/Answer (RSR/RSA) in the Diameter application specified in clause 6.\nTable 5.5.1-1 specifies the involved information elements for the request.\nTable 5.5.1-2 specifies the involved information elements for the answer.\nTable 5.5.1-1: Reset Request\nInformation element name\nMapping to Diameter AVP\nCat.\nDescription\nUser Id List\n(See 3GPP TS 29.272 [10])\nUser-Id\nO\nThis IE shall contain a list of ProSe User-Ids where a ProSe User-Id comprises the leading digits of an IMSI (i.e. MCC, MNC, leading digits of MSIN) and it shall identify the set of subscribers whose IMSIs begin with the User-Id. The HSS may include this information element if the occurred failure is limited to subscribers identified by one or more User-Ids.\nSupported Features\n(See 3GPP TS 29.229 [6])\nSupported-Features\nO\nIf present, this information element shall contain the list of features supported by the origin host.\nReset-IDs\n(See 3GPP TS 29.272 [10])\nReset-ID\nO\nIf present, this information element identifies together with the HSS's realm the set of impacted subscribers.\nTable 5.5.1-2: Reset Answer\nInformation element name\nMapping to Diameter AVP\nCat.\nDescription\nSupported Features\n(See 3GPP TS 29.229 [6])\nSupported-Features\nO\nIf present, this information element shall contain the list of features supported by the origin host.\nResult\n(See 6.4)\nResult-Code / Experimental-Result\nM\nThis IE shall contain the result of the operation.\nThe Result-Code AVP shall be used to indicate success / errors as defined in the Diameter base protocol (see IETF RFC 6733 [23]).\nThe Experimental-Result AVP shall be used for PC4a errors. This is a grouped AVP which shall contain the 3GPP Vendor ID in the Vendor-Id AVP, and the error code in the Experimental-Result-Code AVP.\nThere are no Experimental-Result codes applicable for this command.",
      "chunk_type": "definition",
      "cross_references": [
        "clause_6",
        "table_5.5.1-1",
        "table_5.5.1-2",
        "ts_29.272",
        "ts_29.229"
      ]
    },
    {
      "chunk_id": "ts_29.344_5.5.2",
      "section_id": "5.5.2",
      "section_title": "Detailed behaviour of the ProSe Function",
      "content": "When receiving a Reset message the ProSe Function shall mark all impacted subscriber records \"Subscriber DataConfirmed in HSS\" as \"Not Confirmed\", as defined in 3GPP TS 23.007 [11]. If the Reset-IDs IE is supported and received, the ProSe Function shall make use of the Reset-IDs (together with the HSS's realm) in order to determine which subscriber records are impacted (i.e. check whether at least one received Reset-ID is associated with the subscriber, and the HSS's realm identity received in the Origin-Realm AVP matches the value stored after successful ProSe-Subscriber-Information retrieval); otherwise the ProSe Function shall make use of the HSS Identity received in the Origin-Host AVP (by comparing it with the value stored after successful ProSe-Subscriber-Information retrieval) and may make use of the received User-Id-List (if any) in order to determine which subscriber records are impacted.",
      "chunk_type": "requirement",
      "cross_references": [
        "ts_23.007"
      ]
    },
    {
      "chunk_id": "ts_29.344_5.5.3",
      "section_id": "5.5.3",
      "section_title": "Detailed behaviour of the HSS",
      "content": "The HSS shall make use of this procedure in order to indicate to all relevant ProSe Functions that the HSS has restarted and may have lost the current ProSe Function Identity of some of its subscribers who may be currently roaming in the ProSe Function Area and that the HSS, therefore, cannot send an Update ProSe Subscriber Data messages when needed.\nIf the Reset-ID feature is not supported by the ProSe Function and the HSS, the HSS may include a list of User Ids identifying a subset of subscribers served by the HSS, if the occurred failure is limited to those subscribers.\nIf the Reset-ID feature is supported by the ProSe Function, the HSS optionally may include one (or several) Reset-ID AVPs identifying e.g. failed hardware components if the occured failure is limited to those subscribers associated with e.g. the identified failed hardware components.",
      "chunk_type": "requirement",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.344_5.6.1",
      "section_id": "5.6.1",
      "section_title": "General",
      "content": "This procedure shall be used between the ProSe Function and the HSS for retrieving the initial location information of the UE for EPC-levelProSe discovery. The procedure shall be invoked by the ProSe Function and is used:\n-\tto request the initial location information of the UE.\nThis procedure is mapped to the commands ProSe-Initial-Location-Information-Request/Answer (PLR/PLA) in the Diameter application specified in clause 6.\nTable 5.4.1/1 specifies the involved information elements for the request.\nTable 5.4.1/2 specifies the involved information elements for the answer.\nTable 5.6.1/1: ProSe Initial Location Information Request\nInformation Element Name\nMapping to Diameter AVP\nCat.\nDescription\nIMSI\nUser-Name (See ETF RFC 6733 [23])\nM\nThis information element shall contain the user IMSI, formatted according to 3GPP TS 23.003 [7], clause 2.2.\nSupported Features\n(See 3GPP TS 29.229 [6])\nSupported-Features\nO\nIf present, this information element shall contain the list of features supported by the origin host.\nTable 5.6.1/2: ProSe Initial Location Information Answer\nInformation Element Name\nMapping to Diameter AVP\nCat.\nDescription\nResult(See 6)\nResult-Code / Experimental-Result\nM\nThis IE shall contain the result of the operation.\nThe Result-Code AVP shall be used to indicate success / errors as defined in the Diameter base protocol (see IETF RFC 6733 [23]).\nThe Experimental-Result AVP shall be used for PC4a errors. This is a grouped AVP which shall contain the 3GPP Vendor ID in the Vendor-Id AVP, and the error code in the Experimental-Result-Code AVP.\nThe following errors are applicable:\n- User Unknown\n- UE Location Unknown\nProSe Initial Location Information\n(See 6.3.9)\nProSe-Initial-Location-Information\nC\nThis information element shall contain the location information of the UE.\nVisited PLMN Id\n(See 3GPP TS 29.272 [10])\nVisited-PLMN-Id\nC\nThis IE shall contain the MCC and the MNC of the PLMN where the UE is registered, see 3GPP TS 23.003 [7].\nIt shall be present if the UE is roaming in a PLMN different from the Home PLMN.\nSupported Features\n(See 3GPP TS 29.229 [6])\nSupported-Features\nO\nIf present, this information element shall contain the list of features supported by the origin host.",
      "chunk_type": "definition",
      "cross_references": [
        "clause_6",
        "ts_23.003_clause_2.2",
        "table_5.4.1",
        "table_5.6.1",
        "ts_23.003",
        "ts_29.229",
        "ts_29.272"
      ]
    },
    {
      "chunk_id": "ts_29.344_5.6.2",
      "section_id": "5.6.2",
      "section_title": "Detailed Behaviour of the ProSe Function",
      "content": "To request the initial location information of the targeted UE, the ProSe Function shall include the corresponding IMSI in the user profile of the targeted user in ProSe Initial Location Information Request.\nNOTE:\tThe user profile for the targeted user is stored in the ProSe Function according to clause 7.2.2.3 of 3GPP TS 24.334 [16].",
      "chunk_type": "requirement",
      "cross_references": [
        "ts_24.334_clause_7.2.2.3",
        "ts_24.334"
      ]
    },
    {
      "chunk_id": "ts_29.344_5.6.3",
      "section_id": "5.6.3",
      "section_title": "Detailed Behaviour of the HSS",
      "content": "When receiving a ProSe Initial Location Information Request the HSS shall check whether the IMSI is known.\nIf it is not known, a result code of DIAMETER_ERROR_USER_UNKNOWN shall be returned.\nIf it is known and the MME is not the serving node currently registered in HSS for the UE, the HSS shall return an Experimental-Result of DIAMETER_ERROR_UE_LOCATION_UNKNOWN. If it is known and the MME is the serving node currently registered in HSS for the UE, the HSS shall return a Result-Code of DIAMETER_SUCCESS and provide the location information of the UE to the ProSe Function. The HSS shall provide the Visited PLMN ID of where the UE is registered if the UE is roaming in a PLMN different from the Home PLMN.\nNOTE:\tWhen requesting the UE location via S6a, the HSS does not set the \"Current Location Request\" bit in the IDR-Flags in the Insert Subscriber Data Request message.",
      "chunk_type": "requirement",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.344_6.1.1",
      "section_id": "6.1.1",
      "section_title": "Use of Diameter Base Protocol",
      "content": "The Diameter base protocol as specified in IETF RFC 6733 [23] shall apply except as modified by the defined support of the methods and the defined support of the commands and AVPs, result and error codes as specified in this specification. Unless otherwise specified, the procedures (including error handling and unrecognised information handling) shall be used unmodified.",
      "chunk_type": "requirement",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.344_6.1.2",
      "section_id": "6.1.2",
      "section_title": "Securing Diameter Messages",
      "content": "For secure transport of Diameter messages, see 3GPP TS 33.210 [4]",
      "chunk_type": "general",
      "cross_references": [
        "ts_33.210"
      ]
    },
    {
      "chunk_id": "ts_29.344_6.1.3",
      "section_id": "6.1.3",
      "section_title": "Accounting Functionality",
      "content": "Accounting functionality (Accounting Session State Machine, related command codes and AVPs) shall not be used on the PC4a interface.",
      "chunk_type": "requirement",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.344_6.1.4",
      "section_id": "6.1.4",
      "section_title": "Use of Sessions",
      "content": "Between the ProSe Function and the HSS, Diameter sessions shall be implicitly terminated. An implicitly terminated session is one for which the server does not maintain state information. The client shall not send any re-authorization or session termination requests to the server.\nThe Diameter base protocol specified in IETF RFC 6733 [23] includes the Auth-Session-State AVP as the mechanism for the implementation of implicitly terminated sessions.\nThe client (server) shall include in its requests (responses) the Auth-Session-State AVP set to the value NO_STATE_MAINTAINED (1), as described in IETF RFC 6733 [23]. As a consequence, the server shall not maintain any state information about this session and the client shall not send any session termination request. Neither the Authorization-Lifetime AVP nor the Session-Timeout AVP shall be present in requests or responses.",
      "chunk_type": "requirement",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.344_6.1.5",
      "section_id": "6.1.5",
      "section_title": "Transport Protocol",
      "content": "Diameter messages over the PC4a interface shall make use of SCTP, see IETF RFC 4960 [5].",
      "chunk_type": "requirement",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.344_6.1.6",
      "section_id": "6.1.6",
      "section_title": "Routing Considerations",
      "content": "This clause specifies the use of the Diameter routing AVPs Destination-Realm and Destination-Host.\nThe PC4a reference point is defined as an intra-operator interface, and both the ProSe Function and the HSS are located in the home PLMN of the UE that requests ProSe. If the ProSe Function knows the address/name of the HSS for a certain user, both the Destination-Realm and Destination-Host AVPs shall be present in the request. Otherwise, the Destination-Realm AVP shall be present and the command shall be routed to the next Diameter node. Consequently, the Destination-Host AVP is declared as optional in the ABNF for all requests initiated by the ProSe Function.\nThe HSS obtains the Destination-Host AVP to use in requests towards the ProSe Function, from the Origin-Host AVP received in previous requests from the ProSe Function. Consequently, the Destination-Host AVP is declared as mandatory in the ABNF for all requests initiated by the HSS.\nIf the Vendor-Specific-Application-ID AVP is received in any of the commands, it shall be ignored by the receiving node, and it shall not be used for routing purposes.",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.344_6.1.7",
      "section_id": "6.1.7",
      "section_title": "Advertising Application Support",
      "content": "The ProSe Function and the HSS shall advertise support of the Diameter PC4a Application by including the value of the application identifier in the Auth-Application-Id AVP within the Vendor-Specific-Application-Id grouped AVP of the Capabilities-Exchange-Request and Capabilities-Exchange-Answer commands.\nThe vendor identifier value of 3GPP (10415) shall be included in the Supported-Vendor-Id AVP of the Capabilities-Exchange-Request and Capabilities-Exchange-Answer commands, and in the Vendor-Id AVP within the Vendor-Specific-Application-Id grouped AVP of the Capabilities-Exchange-Request and Capabilities-Exchange-Answer commands.\nThe Vendor-Id AVP included in Capabilities-Exchange-Request and Capabilities-Exchange-Answer commands that is not included in the Vendor-Specific-Application-Id AVPs as described above shall indicate the manufacturer of the Diameter node as per IETF RFC 6733 [23].",
      "chunk_type": "requirement",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.344_6.1.8",
      "section_id": "6.1.8",
      "section_title": "Diameter Application Identifier",
      "content": "The PC4a interface protocol shall be defined as an IETF vendor specific Diameter application, where the vendor is 3GPP. The vendor identifier assigned by IANA to 3GPP (http://www.iana.org/assignments/enterprise-numbers) is 10415.\nThe Diameter application identifier assigned to the PC4a interface application is 16777336 (allocated by IANA).",
      "chunk_type": "parameter",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.344_6.1.9",
      "section_id": "6.1.9",
      "section_title": "Use of the Supported-Features AVP",
      "content": "When new functionality is introduced on the PC4a interface, it should be defined as optional. If backwards incompatible changes cannot be avoided, the new functionality shall be introduced as a new feature and support advertised with the Supported-Features AVP. The usage of the Supported-Features AVP on the PC4a interface is consistent with the procedures for the dynamic discovery of supported features as defined in clause 7.2 of 3GPP TS 29.229 [6].\nWhen extending the application by adding new AVPs for a feature, the new AVPs shall have the M bit cleared and the AVP shall not be defined mandatory in the command ABNF.\nAs defined in 3GPP TS 29.229 [6], the Supported-Features AVP is of type grouped and contains the Vendor-Id, Feature-List-ID and Feature-List AVPs. On the all reference points as specified in this specification, the Supported-Features AVP is used to identify features that have been defined by 3GPP and hence, for features defined in this document, the Vendor-Id AVP shall contain the vendor ID of 3GPP (10415). If there are multiple feature lists defined for the reference point, the Feature-List-ID AVP shall differentiate those lists from one another.",
      "chunk_type": "requirement",
      "cross_references": [
        "ts_29.229_clause_7.2",
        "ts_29.229"
      ]
    },
    {
      "chunk_id": "ts_29.344_6.2.1",
      "section_id": "6.2.1",
      "section_title": "Introduction",
      "content": "This clause defines the Command code values and related ABNF for each command described in this specification.",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.344_6.2.2",
      "section_id": "6.2.2",
      "section_title": "Command-Code Values",
      "content": "This clause defines Command-Code values for the PC4a interface application as allocated by IANA.\nEvery command is defined by means of the ABNF syntax IETF RFC 5234 [8], according to the Command Code Format (CCF) specification defined in IETF RFC 6733 [23]. In the case, the definition and use of an AVP is not specified in this document, the guidelines in IETF RFC 6733 [23] shall apply.\nThe Vendor-Specific-Application-Id AVP shall not be included in any command sent by Diameter nodes supporting applications defined in this specification. If the Vendor-Specific-Application-Id AVP is received in any of the commands defined in this specification, it shall be ignored by the receiving node.\nNOTE:\tThe Vendor-Specific-Application-Id is included as an optional AVP in all Command Code Format specifications defined in this specification in order to overcome potential interoperability issues with intermediate Diameter agents non-compliant with the IETF RFC 6733 [23].\nThe following Command Codes are defined in this specification:\nTable 6.2.2-1: Command-Code values for PC4a\nCommand-Name\nAbbreviation\nCode\nClause\nProSe-Subscriber-Information-Request\nPIR\n8388664\n6.2.3\nProSe-Subscriber-Information-Answer\nPIA\n8388664\n6.2.4\nUpdate-ProSe-Subscriber-Data-Request\nUPR\n8388665\n6.2.5\nUpdate-ProSe-Subscriber-Data-Answer\nUPA\n8388665\n6.2.6\nProSe-Notify-Request\nPNR\n8388666\n6.2.7\nProSe-Notify-Answer\nPNA\n8388666\n6.2.8\nReset-Request\nRSR\n322\n6.2.9\nReset-Answer\nRSA\n322\n6.2.10\nProSe-Initial-Location-Information-Request\nPSR\n8388713\n6.2.11\nProSe-Initial-Location-Information-Answer\nPSA\n8388713\n6.2.12\nFor these commands, the Application-ID field shall be set to 16777336 (application identifier of the PC4a interface application, allocated by IANA).",
      "chunk_type": "general",
      "cross_references": [
        "table_6.2.2-1"
      ]
    },
    {
      "chunk_id": "ts_29.344_6.2.3",
      "section_id": "6.2.3",
      "section_title": "ProSe-Subscriber-Information-Request (PIR) Command",
      "content": "The ProSe-Subscriber-Information-Request (PIR) command, indicated by the Command-Code field set to 8388664 and the \"R\" bit set in the Command Flags field, is sent from the ProSe Function to the HSS.\nMessage Format\n< ProSe-Subscriber-Information-Request > ::=\t< Diameter Header: 8388664, REQ, PXY, 16777336 >\n< Session-Id >\n[ DRMP ]\n[ Vendor-Specific-Application-Id ]\n{ Auth-Session-State }\n{ Origin-Host }\n{ Origin-Realm }\n[ Destination-Host ]\n{ Destination-Realm }\n{ User-Name }\n*[ Supported-Features ]\n[ OC-Supported-Features ]\n*[ AVP ]\n*[ Proxy-Info ]\n*[ Route-Record ]",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.344_6.2.4",
      "section_id": "6.2.4",
      "section_title": "ProSe-Subscriber-Information-Answer (PIA) Command",
      "content": "The ProSe-Subscriber-Information-Answer (PIA) command, indicated by the Command-Code field set to 8388664 and the \"R\" bit cleared in the Command Flags field, is sent from the HSS to the ProSe Function.\nMessage Format\n< ProSe-Subscriber-Information-Answer > ::=\t< Diameter Header: 8388664, PXY, 16777336 >\n< Session-Id >\n[ DRMP ]\n[ Vendor-Specific-Application-Id ]\n[ Result-Code ]\n[ Experimental-Result ]\n{ Auth-Session-State }\n{ Origin-Host }\n{ Origin-Realm }\n[ ProSe-Subscription-Data ]\n[ MSISDN ]\n[ Visited-PLMN-Id ]\n*[ Supported-Features ]\n[ OC-Supported-Features ]\n[ OC-OLR ]\n*[ Load ]\n*[ AVP ]\n*[ Reset-ID ]\n[ Failed-AVP ]\n*[ Proxy-Info ]\n*[ Route-Record ]",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.344_6.2.5",
      "section_id": "6.2.5",
      "section_title": "Update-ProSe-Subscriber-Data-Request (UPR) Command",
      "content": "The Update-ProSe Subscriber Data-Request (UPR) command, indicated by the Command-Code field set to 8388665 and the 'R' bit set in the Command Flags field, is sent from the HSS to the ProSe Function.\nMessage Format when used over the PC4a application:\n< Update-ProSe-Subscriber-Data-Request > ::=\t< Diameter Header: 8388665, REQ, PXY, 16777336 >\n< Session-Id >\n[ DRMP ]\n[ Vendor-Specific-Application-Id ]\n{ Auth-Session-State }\n{ Origin-Host }\n{ Origin-Realm }\n{ Destination-Host }\n{ Destination-Realm }\n{ User-Name }\n*[ Supported-Features ]\n[ ProSe Subscription-Data ]\n[ Visited-PLMN-Id ]\n{ UPR-Flags }\n*[ Reset-ID ]\n*[ AVP ]\n*[ Proxy-Info ]\n*[ Route-Record ]",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.344_6.2.6",
      "section_id": "6.2.6",
      "section_title": "Update-ProSe-Subscriber-Data-Answer (UPA) Command",
      "content": "The Update-ProSe Subscriber Data-Answer (UPA) command, indicated by the Command-Code field set to 8388665 and the 'R' bit cleared in the Command Flags field, is sent from the ProSe Function to the HSS.\nMessage Format when used over the PC4a application:\n< Update-ProSe-Subscriber-Data-Answer> ::=\t< Diameter Header: 8388665, PXY, 16777336 >\n< Session-Id >\n[ DRMP ]\n[ Vendor-Specific-Application-Id ]\n*[ Supported-Features ]\n[ Result-Code ]\n[ Experimental-Result ]\n{ Auth-Session-State }\n{ Origin-Host }\n{ Origin-Realm }\n*[ AVP ]\n[ Failed-AVP ]\n*[ Proxy-Info ]\n*[ Route-Record ]",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.344_6.2.7",
      "section_id": "6.2.7",
      "section_title": "ProSe-Notify-Request (PNR) Command",
      "content": "The ProSe-Notify-Request (PNR) command, indicated by the Command-Code field set to 8388666 and the \"R\" bit set in the Command Flags field, is sent from the ProSe Function to the HSS.\nMessage Format\n< ProSe-Notify-Request > ::=\t< Diameter Header: 8388666, REQ, PXY, 16777336 >\n< Session-Id >\n[ DRMP ]\n[ Vendor-Specific-Application-Id ]\n{ Auth-Session-State }\n{ Origin-Host }\n{ Origin-Realm }\n[ Destination-Host ]\n{ Destination-Realm }\n[ User-Name ]\n[ ProSe-Permission ]\n[ Visited-PLMN-Id ]\n[ PNR-Flags ]\n*[ Supported-Features ]\n[ OC-Supported-Features ]\n*[ AVP ]\n*[ Proxy-Info ]\n*[ Route-Record ]",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.344_6.2.8",
      "section_id": "6.2.8",
      "section_title": "ProSe-Notify-Answer (PNA) Command",
      "content": "The ProSe-Notify-Answer (PNA) command, indicated by the Command-Code field set to 8388666 and the \"R\" bit cleared in the Command Flags field, is sent from the HSS to the ProSe Function.\nMessage Format\n< ProSe-Notify-Answer > ::=\t< Diameter Header: 8388666, PXY, 16777336 >\n< Session-Id >\n[ DRMP ]\n[ Vendor-Specific-Application-Id ]\n[ Result-Code ]\n[ Experimental-Result ]\n{ Auth-Session-State }\n{ Origin-Host }\n{ Origin-Realm }\n*[ Supported-Features ]\n[ OC-Supported-Features ]\n[ OC-OLR ]\n*[ Load ]\n*[ AVP ]\n[ Failed-AVP ]\n*[ Proxy-Info ]\n*[ Route-Record ]",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.344_6.2.9",
      "section_id": "6.2.9",
      "section_title": "Reset-Request (RSR) Command",
      "content": "The Reset-Request (RSR) command, indicated by the Command-Code field set to 322 and the 'R' bit set in the Command Flags field, is sent from HSS to the ProSe Function.\nMessage Format when used over the PC4a application:\n< Reset-Request> ::=\t< Diameter Header: 322, REQ, PXY, 16777336 >\n< Session-Id >\n[ DRMP ]\n[ Vendor-Specific-Application-Id ]\n{ Origin-Host }\n{ Origin-Realm }\n{ Destination-Host }\n{ Destination-Realm }\n*[ Supported-Features ]\n*[ User-Id ]\n*[ Reset-ID ]\n*[ AVP ]\n*[ Proxy-Info ]\n*[ Route-Record ]",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.344_6.2.10",
      "section_id": "6.2.10",
      "section_title": "Reset-Answer (RSA) Command",
      "content": "The Reset-Answer (RSA) command, indicated by the Command-Code field set to 322 and the 'R' bit cleared in the Command Flags field, is sent from ProSe Function to HSS.\nMessage Format when used over the PC4a application:\n< Reset-Answer> ::=\t< Diameter Header: 322, PXY, 16777336 >\n< Session-Id >\n[ DRMP ]\n[ Vendor-Specific-Application-Id ]\n*[ Supported-Features ]\n[ Result-Code ]\n[ Experimental-Result ]\n{ Auth-Session-State }\n{ Origin-Host }\n{ Origin-Realm }\n*[ AVP ]\n[ Failed-AVP ]\n*[ Proxy-Info ]\n*[ Route-Record ]",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.344_6.2.11",
      "section_id": "6.2.11",
      "section_title": "ProSe-Initial-Location-Information-Request (PSR) Command",
      "content": "The ProSe-Initial-Location-Information-Request (PSR) command, indicated by the Command-Code field set to 8388713 and the \"R\" bit set in the Command Flags field, is sent from the ProSe Function to the HSS.\nMessage Format\n< ProSe-Subscriber-Information-Request > ::=\t< Diameter Header: 8388713, REQ, PXY, 16777336 >\n< Session-Id >\n[ DRMP ]\n[ Vendor-Specific-Application-Id ]\n{ Auth-Session-State }\n{ Origin-Host }\n{ Origin-Realm }\n[ Destination-Host ]\n{ Destination-Realm }\n{ User-Name }\n*[ Supported-Features ]\n*[ AVP ]\n*[ Proxy-Info ]\n*[ Route-Record ]",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.344_6.2.12",
      "section_id": "6.2.12",
      "section_title": "ProSe-Initial-Location-Information-Answer (PSA) Command",
      "content": "The ProSe-Initial-Location-Information-Answer (PSA) command, indicated by the Command-Code field set to 8388713 and the \"R\" bit cleared in the Command Flags field, is sent from the HSS to the ProSe Function.\nMessage Format\n< ProSe-Subscriber-Information-Answer > ::=\t< Diameter Header: 8388713, PXY, 16777336 >\n< Session-Id >\n[ DRMP ]\n[ Vendor-Specific-Application-Id ]\n[ Result-Code ]\n[ Experimental-Result ]\n{ Auth-Session-State }\n{ Origin-Host }\n{ Origin-Realm }\n[ ProSe-Initial-Location-Information ]\n[ Visited-PLMN-Id ]\n*[ Supported-Features ]\n*[ AVP ]\n[ Failed-AVP ]\n*[ Proxy-Info ]\n*[ Route-Record ]",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.344_6.3.1",
      "section_id": "6.3.1",
      "section_title": "General",
      "content": "The following table specifies the Diameter AVPs defined for the PC4a interface protocol, their AVP Code values, types, possible flag values and whether or not the AVP may be encrypted. The Vendor-ID header of all AVPs defined in this specification shall be set to 3GPP (10415).\nTable 6.3.1-1: PC4a specific Diameter AVPs\nAVP Flag rules\nAttribute Name\nAVP Code\nClause defined\nValue Type\nMust\nMay\nShould not\nMust not\nMay Encr.\nProSe-Subscription-Data\n3701\n6.3.2\nGrouped\nM,V\nNo\nProSe-Permission\n3702\n6.3.3\nUnsigned32\nM,V\nNo\nProSe-Allowed-PLMN\n3703\n6.3.4\nGrouped\nM,V\nNo\nProSe-Direct-Allowed\n3704\n6.3.5\nUnsigned32\nM,V\nNo\nUPR-Flags\n3705\n6.3.6\nUnsigned32\nM,V\nNo\nPNR-Flags\n3706\n6.3.7\nUnsigned32\nM,V\nNo\nProSe-Initial-Location-Information\n3707\n6.3.9\nGrouped\nM,V\nNo\nNOTE 1:\tThe AVP header bit denoted as \"M\", indicates whether support of the AVP is required. The AVP header bit denoted as \"V\", indicates whether the optional Vendor-ID field is present in the AVP header. For further details, see IETF RFC 6733 [23].\nNOTE 2:\tIf the M-bit is set for an AVP and the receiver does not understand the AVP, it shall return a rejection. If the M-bit is not set for an AVP, the receiver shall not return a rejection, whether or not it understands the AVP. If the receiver understands the AVP but the M-bit value does not match with the definition in this table, the receiver shall ignore the M-bit.\nThe following table specifies the Diameter AVPs re-used by the PC4a interface protocol from existing Diameter Applications, including a reference to their respective specifications and when needed, a short description of their use within PC4a.\nAny other AVPs from existing Diameter Applications, except for the AVPs from Diameter Base Protocol, do not need to be supported. The AVPs from Diameter Base Protocol are not included in table 6.3.1-2, but they may be re-used for the PC4a protocol.\nTable 6.3.1-2: PC4a re-used Diameter AVPs\nAttribute Name\nReference\nComments\nM-bit\nVisited-PLMN-Id\n3GPP TS 29.272 [10]\nSupported-Features\n3GPP TS 29.229 [6]\nFeature-List-ID\n3GPP TS 29.229 [6]\nFeature-List\n3GPP TS 29.229 [6]\nUser-Id\n3GPP TS 29.272 [10]\nSee clause 6.3.8\nReset-ID\n3GPP TS 29.272 [10]\nMSISDN\n3GPP TS 29.329 [12]\nMME-Name\n3GPP TS 29.173 [14]\nSee clause 6.3.10\nE-UTRAN-Cell-Global-Identity\n3GPP TS 29.272 [10]\nTracking-Area-Identity\n3GPP TS 29.272 [10]\nAge-Of-Location-Information\n3GPP TS 29.272 [10]\n3GPP-Charging-Characteristics\n3GPP TS 29.061 [18]\nSee 3GPP TS 32.251 [19] Annex A and 3GPP TS 32.298 [20] clause 5.1.2.2.7. This attribute holds the ProSe-related Charging Characteristics for a ProSe subscriber.\nMust set\nOC-Supported-Features\nIETF RFC 7683 [15]\nSee clause 6.3.11\nMust set\nOC-OLR\nIETF RFC 7683 [15]\nSee clause 6.3.12\nMust set\nDRMP\nIETF RFC 7944 [21]\nsee clause 6.3.14\nMust not set\nLoad\nIETF RFC 8583 [22]\nSee clause 6.3.15\nMust not set\nNOTE 1:\tThe M-bit settings for re-used AVPs override those of the defining specifications that are referenced. Values include: \"Must set\", \"Must not set\". If the M-bit setting is blank, then the defining specification applies.\nNOTE 2:\tIf the M-bit is set for an AVP and the receiver does not understand the AVP, it shall return a rejection. If the M-bit is not set for an AVP, the receiver shall not return a rejection, whether or not it understands the AVP. If the receiver understands the AVP but the M-bit value does not match with the definition in this table, the receiver shall ignore the M-bit.",
      "chunk_type": "definition",
      "cross_references": [
        "ts_29.229_clause_6.3.8",
        "ts_29.329_clause_6.3.10",
        "ts_32.251_clause_5.1.2.2.7",
        "clause_6.3.11",
        "clause_6.3.12",
        "clause_6.3.14",
        "clause_6.3.15",
        "table_6.3.1-1",
        "table_6.3.1-2",
        "ts_29.272",
        "ts_29.229",
        "ts_29.329",
        "ts_29.173",
        "ts_29.061",
        "ts_32.251",
        "ts_32.298"
      ]
    },
    {
      "chunk_id": "ts_29.344_6.3.2",
      "section_id": "6.3.2",
      "section_title": "ProSe-Subscription-Data",
      "content": "The ProSe-Subscription-Data AVP is of type Group. It shall contain the ProSe related subscription data.\nAVP format\nProSe-Subscription-Data ::= <AVP header: 3701 10415>\n{ ProSe-Permission }\n*[ ProSe-Allowed-PLMN ]\n[ 3GPP-Charging-Characteristics ]\n*[AVP]",
      "chunk_type": "requirement",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.344_6.3.3",
      "section_id": "6.3.3",
      "section_title": "ProSe-Permission",
      "content": "The ProSe-Permission AVP is of type Unsigned32 and it shall contain a bit mask that indicates the permissions for ProSe subscribed by the user. The meaning of the bits shall be as defined in table 6.3.3/1:\nTable 6.3.3-1: ProSe-Permission\nBit\nName\nDescription\n0\nProSe Direct Discovery\nThis bit, when set, indicates that the user is allowed to use ProSe Direct Discovery.\n1\nEPC-level ProSe Discovery\nThis bit, when set, indicates that the user is allowed to use EPC-level ProSe Discovery.\n2\nEPC support WLAN Direct Discovery and Communication\nThis bit, when set, indicates that the user is allowed to use EPC support WLAN Direct Discovery and Communication.\n3\none-to-many ProSe Direct Communication\nThis bit, when set, indicates that the user is allowed to use one-to-many ProSe Direct Communication.\n4\none-to-one ProSe Direct Communication\nThis bit, when set, indicates that the user is allowed to use one-to-one ProSe Direct Communication.\n5\nUE-to-Network Relay\nThis bit, when set, indicates that the user is allowed to act as a UE-to-Network relay.\n6\nRemote-UE-access\nThis bit, when set, indicates that the user is allowed to act as a Remote-UE.\n7\nRestricted ProSe Direct Discovery\nThis bit, when set, indicates that the user is allowed to use restricted ProSe Direct Discovery.\nNOTE:\tBits not defined in this table shall be cleared by the HSS and discarded by the receiving ProSe Function.",
      "chunk_type": "requirement",
      "cross_references": [
        "table_6.3.3",
        "table_6.3.3-1"
      ]
    },
    {
      "chunk_id": "ts_29.344_6.3.4",
      "section_id": "6.3.4",
      "section_title": "ProSe-Allowed-PLMN",
      "content": "The ProSe-Allowed-PLMN AVP is of type Group. It shall contain the PLMN where the UE is authorised to announce or monitor or both for ProSe Discovery or to use ProSe direct communication.\nAVP format\nProSe-Allowed-PLMN ::= <AVP header: 3703 10415>\n[ Visited-PLMN-Id ]\n[ Authorized-Discovery-Range ]\n[ ProSe-Direct-Allowed ]\n*[AVP]\nThe Authorized-Discovery-Range Information Element should only be present if the Visited-PLMN-Id is the PLMN-Id of the HPLMN; otherwise it should be absent.",
      "chunk_type": "requirement",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.344_6.3.5",
      "section_id": "6.3.5",
      "section_title": "ProSe-Direct-Allowed",
      "content": "The ProSe-Direct-Allowed AVP is of type Unsigned32 and it shall contain a bit mask that indicates the services the UE is authorised to use for ProSe Direct functionalities in a specific PLMN. The meaning of the bits shall be as defined in table 6.3.5-1:\nTable 6.3.5-1: ProSe-Direct-Allowed\nBit\nName\nDescription\n0\nAnnounce\nThis bit, when set, indicates that the user is allowed to announce in the corresponding PLMN for open ProSe Discovery.\n1\nMonitor\nThis bit, when set, indicates that the user is allowed to monitor in the corresponding PLMN for open ProSe Discovery.\n2\nCommunication\nThis bit, when set, indicates that the user is allowed for ProSe direct one to many communication in the corresponding PLMN.\n3\nOne-to-one Communication\nThis bit, when set, indicates that the user is allowed to perform one-to-one ProSe Direct Communication.\n4\nDiscoverer\nThis bit, when set, indicates that the user is allowed to perform discoverer operation in the corresponding PLMN for ProSe Discovery Model B.\n5\nDiscoveree\nThis bit, when set, indicates that the user is allowed to perform discoveree operation in the corresponding PLMN for ProSe Discovery Model B.\n6\nRestricted-announce\nThis bit, when set, indicates that the user is allowed to announce in the corresponding PLMN for restricted ProSe Discovery.\n7\nRestricted-monitoring\nThis bit, when set, indicates that the user is allowed to monitor in the corresponding PLMN for restricted ProSe Discovery.\n8\nApplication-controlled extension\nThis bit, when set, indicates that the user is allowed to announce or monitor with application-controlled extension in the corresponding PLMN for restricted ProSe Discovery\n9\nOn-demand announcing\nThis bit, when set, indicates that the user is allowed to perform on-demand announcing in the corresponding PLMN for restricted ProSe Discovery\nNOTE:\tBits not defined in this table shall be cleared by the HSS and discarded by the receiving ProSe Function.",
      "chunk_type": "requirement",
      "cross_references": [
        "table_6.3.5-1"
      ]
    },
    {
      "chunk_id": "ts_29.344_6.3.6",
      "section_id": "6.3.6",
      "section_title": "UPR-Flags",
      "content": "The UPR-Flags AVP is of type Unsigned32 and it shall contain a bit mask. The meaning of the bits is defined in table 6.3.6-1:\nTable 6.3.6-1: UPR-Flags\nBit\nName\nDescription\n0\nUpdate\nThis bit, when set, indicates that the ProSe subscriber related data are updated.\n1\nRemoval\nThis bit, when set, indicates that all of the ProSe subscriber related data are removed.\n2\nReset-ID Update\nThis bit, when set, indicates that the complete list on Reset-IDs is updated.\n3\nReset-ID Removal\nThis bit, when set, indicates that the complete list on Reset-IDs is removed.\nNOTE:\tBits not defined in this table shall be cleared by the sending HSS and discarded by the receiving ProSe Function.",
      "chunk_type": "requirement",
      "cross_references": [
        "table_6.3.6-1"
      ]
    },
    {
      "chunk_id": "ts_29.344_6.3.7",
      "section_id": "6.3.7",
      "section_title": "PNR-Flags",
      "content": "The PNR-Flags AVP is of type Unsigned32 and it shall contain a bit mask. The meaning of the bits shall be as defined in table 6.3.7-1:\nTable 6.3.7-1: PNR-Flags\nbit\nname\nDescription\n0\nDirect Discovery Revoked\nThis bit, when set, shall indicate to the HSS that the authorization for ProSe direct discovery is to be revoked on the indicated PLMN.\n1\nDirect Communication Revoked\nThis bit, when set, shall indicate to the HSS that the authorization for ProSe direct communication is to be revoked on the indicated PLMN.\n2\nPurged UE\nThis bit, when set, shall indicate to the HSS that the subscriber's data has been deleted from the ProSe Function.\nNOTE 1:\tBits not defined in this table shall be cleared by the sending ProSe Function and discarded by the receiving HSS.\nNOTE 2:\tIf Purged UE bit is set, all other bits in this table shall be cleared by the sending ProSe Function and discarded by the receiving HSS.",
      "chunk_type": "requirement",
      "cross_references": [
        "table_6.3.7-1"
      ]
    },
    {
      "chunk_id": "ts_29.344_6.3.8",
      "section_id": "6.3.8",
      "section_title": "Feature-List AVP for the PC4a application",
      "content": "The syntax of this AVP is defined in 3GPP TS 29.229 [6].\nFor the PC4a application, the meaning of the bits shall be as defined in table 6.3.8/1 for the Feature-List-ID 1.\nTable 6.3.8/1: Features of Feature-List-ID 1 used in PC4a\nFeature bit\nFeature\nM/O\nDescription\n0\nReset-IDs\nO\nSupport of Reset-IDs\nThis feature is applicable to the PIR/PIA and UPR/UPA and RSR/RSA command pairs over the PC4a interface.\nIf the ProSe Function indicates in the PIR command that it does not support Reset-IDs, the HSS shall not include Reset-ID AVPs in RSR commands sent to that Prose Function.\nFeature bit: The order number of the bit within the Supported-Features AVP, e.g. \"1\".\nFeature: A short name that can be used to refer to the bit and to the feature, e.g. \"ODB-HPLMN-APN\".\nM/O: Defines if the implementation of the feature is mandatory (\"M\") or optional (\"O\").\nDescription: A clear textual description of the feature.\nFeatures that are not indicated in the Supported-Features AVPs within a given application message shall not be used to construct that message.",
      "chunk_type": "requirement",
      "cross_references": [
        "table_6.3.8",
        "ts_29.229"
      ]
    },
    {
      "chunk_id": "ts_29.344_6.3.9",
      "section_id": "6.3.9",
      "section_title": "ProSe-Initial-Location-Information",
      "content": "The ProSe-Initial-Location-Information AVP is of type Grouped. This AVP shall contain the location information of the UE.\nAVP format\nProSe-Initial-Location-Information ::= <AVP header: 3707 10415>\n[MME-Name]\n[E-UTRAN-Cell-Global-Identity]\n[Tracking-Area-Identity]\n[Age-Of-Location-Information]\n*[AVP]",
      "chunk_type": "requirement",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.344_6.3.10",
      "section_id": "6.3.10",
      "section_title": "MME-Name",
      "content": "The MME-Name AVP is of type DiameterIdentity. This AVP shall contain the Diameter identity of the serving MME and is specified in 3GPP TS 29.173 [14] clause 6.4.4.",
      "chunk_type": "requirement",
      "cross_references": [
        "ts_29.173_clause_6.4.4",
        "ts_29.173"
      ]
    },
    {
      "chunk_id": "ts_29.344_6.3.11",
      "section_id": "6.3.11",
      "section_title": "OC-Supported-Features",
      "content": "The OC-Supported-Features AVP is of type Grouped and it is defined in IETF RFC 7683 [15]. This AVP is used to support Diameter overload control mechanism, see Annex A for more information.",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.344_6.3.12",
      "section_id": "6.3.12",
      "section_title": "OC-OLR",
      "content": "The OC-OLR AVP is of type Grouped and it is defined in IETF RFC 7683 [15]. This AVP is used to support Diameter overload control mechanism, see Annex A for more information.",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.344_6.3.13",
      "section_id": "6.3.13",
      "section_title": "Authorized-Discovery-Range",
      "content": "The Authorized-Discovery-Range AVP is of type Unsigned32 and it shall contain a value that indicates the authorised announcing range (short/medium/long) at which the UE is allowed to announce in the given PLMN according to the defined announcing authorisation policy for this UE. Refer to 3GPP TS 24.334 [16] for the policy handling and to 3GPP TS 24.333 [17] for the possible values of the range.",
      "chunk_type": "requirement",
      "cross_references": [
        "ts_24.334",
        "ts_24.333"
      ]
    },
    {
      "chunk_id": "ts_29.344_6.3.14",
      "section_id": "6.3.14",
      "section_title": "DRMP",
      "content": "The DRMP AVP is of type Enumerated and it is defined in IETF RFC 7944 [21]. This AVP allows the HSS and the ProSe Function to indicate the relative priority of Diameter messages over the PC4a interface. The DRMP AVP may be used to set the DSCP marking for transport of the associated Diameter message.",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.344_6.3.15",
      "section_id": "6.3.15",
      "section_title": "Load",
      "content": "The Load AVP is of type Grouped and it is defined in IETF RFC 8583 [22]. This AVP is used to support Diameter load control mechanism, see Annex D for more information.",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.344_6.4.1",
      "section_id": "6.4.1",
      "section_title": "General",
      "content": "This clause defines result code values that shall be supported by all Diameter implementations that conform to this specification.",
      "chunk_type": "definition",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.344_6.4.2",
      "section_id": "6.4.2",
      "section_title": "Success",
      "content": "Result codes that fall within the Success category shall be used to inform a peer that a request has been successfully completed. The Result-Code AVP values defined in Diameter base protocol specified in IETF RFC 6733 [23] shall be applied.",
      "chunk_type": "requirement",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.344_6.4.3.1",
      "section_id": "6.4.3.1",
      "section_title": "General",
      "content": "Errors that fall within the Permanent Failures category shall be used to inform the peer that the request has failed, and should not be attempted again. The Result-Code AVP values defined in Diameter base protocol specified in IETF RFC 6733 [23] shall be applied. When one of the result codes defined here is included in a response, it shall be inside an Experimental-Result AVP and the Result-Code AVP shall be absent.",
      "chunk_type": "definition",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.344_6.4.3.2",
      "section_id": "6.4.3.2",
      "section_title": "DIAMETER_ERROR_USER_UNKNOWN (5001)",
      "content": "This result code shall be sent by the HSS to indicate that the user identified by the IMSI is unknown. This error code is defined in 3GPP TS 29.229 [6].",
      "chunk_type": "requirement",
      "cross_references": [
        "ts_29.229"
      ]
    },
    {
      "chunk_id": "ts_29.344_6.4.3.3",
      "section_id": "6.4.3.3",
      "section_title": "DIAMETER_ERROR_UNKNOWN_PROSE_SUBSCRIPTION (5610)",
      "content": "This result code shall be sent by the HSS to indicate that no ProSe subscription is associated with the IMSI.",
      "chunk_type": "requirement",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.344_6.4.3.4",
      "section_id": "6.4.3.4",
      "section_title": "DIAMETER_ERROR_ PROSE_NOT_ALLOWED (5611)",
      "content": "This result code shall be sent by the HSS to indicate that ProSe is not allowed to be used in the specific PLMN where the UE is registered.",
      "chunk_type": "requirement",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.344_6.4.3.5",
      "section_id": "6.4.3.5",
      "section_title": "DIAMETER_ERROR_ UE_LOCATION_UNKNOWN (5612)",
      "content": "This result code shall be sent by the HSS to indicate that the initial location of the UE is unknown.\nAnnex A (normative):Diameter overload control mechanism\nA.1\tGeneral\nDiameter overload control mechanism is an optional feature.\nIETF RFC 7683 [15] specifies a Diameter overload control mechanism which includes the definition and the transfer of related AVPs between Diameter nodes.\nIt is recommended to make use of IETF RFC 7683 [15] on the PC4a interface where, when applied, the ProSe Function shall behave as reacting nodes and the HSS as a reporting node.\nA.2\tHSS behaviour\nThe HSS requests traffic reduction from the ProSe Function when it is in an overload situation, including OC-OLR AVP in answer commands as described in IETF RFC 7683 [15].\nThe HSS identifies that it is in an overload situation by implementation specific means. For example, the HSS may take into account the traffic over the PC4a interface or other interfaces, the level of usage of internal resources (CPU, memory), the access to external resources, etc.\nThe HSS determines the specific contents of OC-OLR AVP in overload reports and the HSS decides when to send OC-OLR AVPs by implementation specific means.\nA.3\tProSe Function behaviour\nThe ProSe Function applies required traffic reduction received in answer commands to subsequent applicable requests, as per IETF RFC 7683 [15].\nThe ProSe Function achieves requested traffic reduction by implementation specific means. For example, the ProSe Funtion may implement message throttling with prioritization or a message retaining mechanism for operations that can be postponed.As a result of the need to throttle traffic, the ProSe Function may reject Registration Request, Discovery Request, Proximity Requests initiated by UEs. The possible related error messages used over PC3 are described in the 3GPP TS 24.334 [16].\nAnnex B (Informative):Diameter overload node behaviour\nB.1\tMessage prioritization\nThis clause describes possible behaviours of the ProSe Function regarding message prioritisation in an informative purpose.\nThe ProSe Function may take the following into account when making throttling decisions:\n-\tIdentification of the procedures that can be deferred (e.g. Proximity Requests), so to avoid to drop non deferrable procedures;\n-\tPrioritisation of certain types of request (e.g. between ProSe-Subscriber-Information-Request (PIR) and ProSe-Notify-Request (PNR)) according to the context of their use, in particular:\n-\tHigher prioritisation for commands that are related to a registered user for a service, so to avoid the interruption of the registered service for the user.\nAnnex C (normative):Diameter message priority mechanism\nC.1\tGeneral\nIETF RFC 7944 [21] specifies a Diameter routing message priority mechanism that allows Diameter nodes to indicate the relative priority of Diameter messages. With this information, other Diameter nodes may leverage the relative priority of Diameter messages into routing, resource allocation, set the DSCP marking for transport of the associated Diameter message, and also abatement decisions when overload control is applied.\nC.2\tPC4a interface\nC.2.1\tGeneral\nThe Diameter message priority mechanism is an optional feature.\nIt is recommended to make use of IETF RFC 7944 [21] over the PC4a interface of an operator network when the overload control defined in Annex A is applied on this PC4a interface.\nC.2.2\tHSS and ProSe Function behaviour\nWhen the HSS or the ProSe Function support the Diameter message priority mechanism over the PC4a interface, the HSS or the ProSe Function shall comply with IETF RFC 7944 [21].\nThe HSS or the ProSe Function sending a request shall determine the required priority according to its policies. When priority is required, the HSS or the ProSe Function shall include the DRMP AVP indicating the required priority level in the request it sends, and shall prioritise the request according to the required priority level.\nWhen the HSS or the ProSe Function receive the corresponding response, it shall prioritise the received response according to the priority level received within the DRMP AVP if present in the response, otherwise according to the priority level of the corresponding request.\nWhen the HSS or the ProSe Function receives a request, it shall handle the request according to the received DRMP AVP priority level. For the response, the HSS or the ProSe Function may modify the priority level received in the DRMP AVP according to its policies and shall handle the response according to the required priority level. If the required priority level is different from the priority level received in the request, the HSS or the ProSe Function shall include the DRMP AVP in the response.\nThe HSS and the ProSe Function decisions for a required priority and for the priority level value are implementation specific.\nIf:\n-\tthe HSS and the ProSe Function supports using the Diameter message priority mechanism for DSCP marking purposes,\n-\tthe transport network utilizes DSCP marking, and\n-\tmessage-dependant DSCP marking is possible for the protocol stack transporting Diameter,\nthen the HSS and the ProSe Function shall set the DSCP marking for transport of the request or response according to the required priority level.\nDiameter requests related to high priority traffic shall contain a DRMP AVP with a high priority of which the level value is operator dependent.\nAnnex D (normative):Diameter load control mechanism\nD.1\tGeneral\nDiameter load control mechanism is an optional feature.\nIETF RFC 8583 [22] specifies a Diameter load control mechanism which includes the definition and the transfer of related AVPs between Diameter nodes.\nIt is recommended to make use of IETF draft-ieft-dime-load-03 [22] on the PC4a interface where, when applied, the ProSe Function shall behave as reacting node and the HSS as a reporting node.\nD.2\tHSS behaviour\nThe HSS may report its current load by including a Load AVP of type HOST in answer commands as described in IETF RFC 8583 [22].\nThe HSS calculates its current load by implementation specific means. For example, the HSS may take into account the traffic over the PC4a interface or other interfaces, the level of usage of internal resources (e.g. CPU, memory), the access to external resources, etc.\nThe HSS determines when to send Load AVPs of type HOST by implementation specific means.\nD.3\tProSe Function behaviour\nWhen performing next hop Diameter Agent selection for requests that are routed based on realm, the ProSe Function may take into account load values from Load AVPs of type PEER received from candidate next hop Diameter nodes, as per IETF RFC 8583 [22].\nAnnex E (informative):Change history\nChange history\nDate\nMeeting\nTDoc\nCR\nRev\nCat\nSubject/Comment\nNew version\n2014-04\nCT4#64bis\nImplementation of C4-140706, C4-140707\n0.1.0\n2014-05\nCT4#65\nC4-141169\nImplementation of C4-140917, C4-141072, C4-141159, C4-141077\n0.2.0\n2014-07\nCT4#66\nC4-141668\nImplementation of C4-141504, C4-141507, C4-141510, C4-141636\n0.3.0\n2014-09\nCT#65\nCP-140497\nPresented for information and approval\n1.0.0\n2014-09\nCT#65\nApproved at CT#65\n12.0.0\n2014-12\nCT#66\nCP-140778\n0004\n1\nPurge Procedure\n12.1.0\nCP-140778\n0005\n2\nMSISDN over PC4a\nCP-140778\n0006\n2\nReset-ID\nCP-140778\n0007\n3\nProSe Initial Location Information Retrieval\nCP-140778\n0008\n2\nUpdate of AVP naming\nCP-140778\n0009\n2\nDiameter Overload Control over PC4a\nCP-140778\n0010\n2\nCodes Assignment for PC4a\n2015-03\nCT#67\nCP-150028\n0011\n1\nCorrection of references\n12.2.0\nCP-150028\n0012\n2\nIntroduction of Authorized Discovery Range Indication for announcing UE\n2015-06\nCT#68\nCP-150257\n0013\n6\nCorrection and Clean-up on PC4a\n12.3.0\nCP-150257\n0015\n4\nAddition of Charging Characteristics in ProSe Subscriber data for PC4a\n2015-12\nCT#70\nCP-150759\n0017\n1\nReference to DOIC updated with IETF RFC 7683\n12.4.0\n2015-12\nCT#70\nCP-150760\n0016\n3\nEnhancements to subscription data\n13.0.0\n2016-03\nCT#71\nCP-160023\n0018\n1\nDiameter message priority over PC4a\n13.1.0\n2016-12\nCT#74\nCP-160664\n0020\n-\nCorrection to change IETF drmp draft version to official RFC 7944\n13.2.0\n2016-12\nCT#74\nCP-160681\n0019\n1\nLoad Control\n14.0.0\n2017-03\nCT#75\nCP-170048\n0021\n-\nUpdate of reference for the Diameter base protocol\n14.1.0\n2017-03\nCT#75\nCP-170048\n0022\n1\nHandling of the Vendor-Specific-Application-Id AVP\n14.1.0\n2017-03\nCT#75\nCP-170048\n0023\n1\nCardinality of the Failed-AVP AVP in answer\n14.1.0\n2017-06\nCT#76\nCP-171018\n0025\n1\nSupport for signaling transport level packet marking\n14.2.0\n2017-09\nCT#77\nCP-172013\n0027\n-\nCorrection of DRMP Procedures\n14.3.0\n2018-06\nCT#80\nUpdate to Rel-15 version (MCC)\n15.0.0\n2019-09\nCT#85\nCP192094\n0029\n1\ndraft-ietf-dime-load published as RFC 8583\n15.1.0\n2020-06\nCT#88e\nUpdate to Rel-16 version (MCC)\n16.0.0\n2022-04\n-\n-\n-\n-\n-\nUpdate to Rel-17 version (MCC)\n17.0.0\n2024-03\n-\n-\n-\n-\n-\nUpdate to Rel-18 version (MCC)\n18.0.0",
      "chunk_type": "requirement",
      "cross_references": [
        "ts_24.334"
      ]
    }
  ]
}