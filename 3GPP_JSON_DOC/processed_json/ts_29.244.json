{
  "metadata": {
    "specification_id": "ts_29.244",
    "version": "18.9.0",
    "title": "3GPP TS 29.244",
    "file_path": "/content/drive/MyDrive/RAG_thesis/data/29_series/29244-i90/29244-i90.docx"
  },
  "export_info": {
    "export_date": "2025-07-26T09:18:15.489848",
    "total_chunks": 589
  },
  "chunks": [
    {
      "chunk_id": "ts_29.244_1",
      "section_id": "1",
      "section_title": "Scope",
      "content": "The present document specifies the Packet Forwarding Control Protocol (PFCP) used on the interface between the control plane and the user plane function.\nPFCP shall be used over:\n-\tthe Sxa, Sxb, Sxc and the combined Sxa/Sxb reference points specified in 3GPP TS 23.214 [2].\n-\tthe Sxa' and Sxb' reference points specified in 3GPP TS 33.107 [20]. In the rest of this specification, no difference is made between Sxa and Sxa', or between Sxb and Sxb'. The Sxa' and Sxb' reference points reuse the protocol specified for the Sxa and Sxb reference points, but comply in addition with the security requirements specified in clause 8 of 3GPP 33.107 [20].\n-\tthe N4 interface specified in 3GPP TS 23.501 [28] and 3GPP TS 23.502 [29].\n-\tthe N4mb interface specified in 3GPP TS 23.247 [72].\nIn this specification the term CP function applies to control plane nodes such as SGW-C, PGW-C, TDF-C, SMF and MB-SMF.\nIn this specification the term UP function applies to user plane nodes such as SGW-U, PGW-U, TDF-U, UPF and MB-UPF.\nThe prefix PFCP in message and procedure names is used to indicate that messages and procedures are common and used on Sx, N4 and N4mb reference points. A PFCP session refers to both Sx and/or N4 sessions, or to an N4mb session. A PFCP association is established between a CP function and a UP function, i.e., for EPC, between an SGW-C/PGW-C/TDF-C and an SGW-U/PGW-U/TDF-U, and for 5GC, between an SMF and a UPF or between an MB-SMF and MB-UPF.\nIn the related stage 2 specifications the prefix Sx, N4 and N4mb is used for these common procedures realised by PFCP.\nClauses or paragraphs that only apply to EPC or 5GC are indicated by the label \"for EPC\" or \"for 5GC\".",
      "chunk_type": "requirement",
      "cross_references": [
        "clause_8",
        "ts_23.214",
        "ts_33.107",
        "ts_23.501",
        "ts_23.502",
        "ts_23.247"
      ]
    },
    {
      "chunk_id": "ts_29.244_2",
      "section_id": "2",
      "section_title": "References",
      "content": "The following documents contain provisions which, through reference in this text, constitute provisions of the present document.\n-\tReferences are either specific (identified by date of publication, edition number, version number, etc.) or non‑specific.\n-\tFor a specific reference, subsequent revisions do not apply.\n-\tFor a non-specific reference, the latest version applies. In the case of a reference to a 3GPP document (including a GSM document), a non-specific reference implicitly refers to the latest version of that document in the same Release as the present document.\n[1]\t3GPP TR 21.905: \"Vocabulary for 3GPP Specifications\".\n[2]\t3GPP TS 23.214: \"Architecture enhancements for control and user plane separation of EPC nodes; Stage 2\".\n[3]\t3GPP TS 29.281: \"General Packet Radio System (GPRS) Tunnelling Protocol User Plane (GTPv1-U)\".\n[4]\tIETF RFC 768: \"User Datagram Protocol\".\n[5]\tIETF RFC 791: \"Internet Protocol\".\n[6]\tIETF RFC 2460: \"Internet Protocol, Version 6 (IPv6) Specification\".\n[7]\t3GPP TS 23.203: \"Policy and charging control architecture; Stage 2\".\n[8]\t3GPP TS 29.212: \"Policy and Charging Control (PCC); Reference points\".\n[9]\t3GPP TS 29.274: \"3GPP Evolved Packet System. Evolved GPRS Tunnelling Protocol for EPS (GTPv2)\".\n[10]\t3GPP TS 36.413: \"Evolved Universal Terrestrial Radio Access Network (E-UTRAN); S1 Application Protocol (S1AP)\".\n[11]\t3GPP TS 29.213: \"Policy and Charging Control signalling flows and Quality of Service (QoS) parameter mapping\".\n[12]\tIETF RFC 5905: \"Network Time Protocol Version 4: Protocol and Algorithms Specification\".\n[13]\tIETF RFC 2474: \"Definition of the Differentiated Services Field (DS Field) in the IPv4 and IPv6 Headers\".\n[14]\t3GPP TS 23.401: \"General Packet Radio Service (GPRS) enhancements for Evolved Universal Terrestrial Radio Access Network (E-UTRAN) access\".\n[15]\t3GPP TS 22.153: \"Multimedia Priority Service\".\n[16]\tIETF RFC 4006: \"Diameter Credit Control Application\".\n[17]\t3GPP TS 32.251: \"Telecommunication management; Charging management; Packet Switched (PS) domain charging\".\n[18]\t3GPP TS 32.299: \"Telecommunication management; Charging management; Diameter charging application\".\n[19]\t3GPP TS 23.060: \"General Packet Radio Service (GPRS); Service description; Stage 2\".\n[20]\t3GPP TS 33.107: \"3G security; Lawful interception architecture and functions\".\n[21]\t3GPP TS 29.251: \"Gw and Gwn reference points for sponsored data connectivity\".\n[22]\tIETF RFC 2474, \"Definition of the Differentiated Services Field (DS Field) in the IPv4 and IPv6 Headers\".\n[23]\tIETF RFC 7230: \"Hypertext Transfer Protocol (HTTP/1.1): Message Syntax and Routing\".\n[24]\t3GPP TS 23.007: \"Restoration procedures\".\n[25]\t3GPP TS 29.303: \"Domain Name System Procedures; Stage 3\"\n[26]\tIETF RFC 5905: \"Network Time Protocol Version 4: Protocol and Algorithms Specification\".\n[27]\tIETF RFC 1035: \"Domain Names - Implementation and Specification\".\n[28]\t3GPP TS 23.501:\"System Architecture for the 5G System\"\n[29]\t3GPP TS 23.502:\"Procedures for the 5G System\"\n[30]\tIEEE 802.1Q: \"Virtual Bridged Local Area Networks\"\n[31]\tIEEE 802.3: \"IEEE Standard for Ethernet\"\n[32]\tIETF RFC 826: \"An Ethernet Address Resolution Protocol or Converting Network Protocol Addresses\".\n[33]\tIETF RFC 4861: \"Neighbor Discovery for IP version 6 (IPv6)\". .\n[34]\t3GPP TS 38.415: \"NG-RAN; PDU Session User Plane Protocol\".\n[35]\t3GPP TS 32.422: \"Telecommunication management; Subscriber and equipment trace; Trace control and configuration management\".\n[36]\tIETF RFC 4282: \"The Network Access Identifier\".\n[37]\tIETF RFC 2865: \"Remote Authentication Dial In User Service (RADIUS)\".\n[38]\tIETF RFC 3162: \"RADIUS and IPv6\".\n[39]\t3GPP TS 29.061: \"Interworking between the Public Land Mobile Network (PLMN) supporting packet based services and Packet Data Networks (PDN)\".\n[40]\t3GPP TS 23.527: \"5G System; Restoration procedures\".\n[41]\t3GPP TS 29.512: \"5G System; Session Management Policy Control Service; Stage 3\".\n[42]\t3GPP TS 38.300: \"NR; NR and NG-RAN Overall Description; Stage 2\".\n[43]\t3GPP TS 29.510: \"5G System; Network Function Repository Services; Stage 3\".\n[44]\t3GPP TS 23.503:\"Policy and Charging Control Framework for the 5G System\".\n[45]\t3GPP TS 32.255: \"Telecommunication management; Charging management; 5G data connectivity domain charging; Stage 2\".\n[46]\t3GPP TS 29.512: \"Session Management Policy Control Service, Stage 3\".\n[47]\t3GPP TS 33.127: \"Security; Lawful Interception (LI) architecture and functions\".\n[48]\t3GPP TS 23.003: \"Numbering, addressing and identification\".\n[49]\t3GPP TS 29.561: \"5G System; Interworking between 5G Network and external Data Networks; Stage 3\".\n[50]\t3GPP TS 29.502: \"5G System, Session Management Services; Stage 3\".\n[51]\tVoid\n[52]\tIETF RFC 2236: \"Internet Group Management Protocol, Version 2\".\n[53]\tIETF RFC 3376: \"Internet Group Management Protocol, Version 3\".\n[54]\tIETF RFC 4604: \"Using Internet Group Management Protocol Version 3 (IGMPv3) and Multicast Listener Discovery Protocol Version 2 (MLDv2) for Source-Specific Multicast\".\n[55]\tIETF RFC 2710: \"Multicast Listener Discovery (MLD) for IPv6\".\n[56]\tVoid\n[57]\t3GPP TS 23.316: \"Wireless and wireline convergence access support for the 5G System (5GS)\".\n[58]\tIEEE Std 802.1AS-2020: \"IEEE Standard for Local and metropolitan area networks--Timing and Synchronization for Time-Sensitive Applications\".\n[59]\t3GPP TS 24.193: \"Access Traffic Steering, Switching and Splitting; Stage 3\".\n[60]\tIETF RFC 8803: \"0-RTT TCP Convert Protocol\".\n[61]\t3GPP TS 29.571: \"5G System; Common Data Types for Service Based Interfaces; Stage 3\".\n[62]\tIETF RFC 8684: \"TCP Extensions for Multipath Operation with Multiple Addresses\".\n[63]\t3GPP TS 24.539: \"5G System (5GS); Network to TSN translator (TT) protocol aspects; Stage 3\".\n[64]\t3GPP TS 33.501: \"Security architecture and procedures for 5G system\".\n[65]\t3GPP TS 24.250: \"Protocol for Reliable Data Service; Stage 3\".\n[66]\t3GPP TS 23.682: \"Architecture enhancements to facilitate communications with packet data networks and applications\".\n[67]\tIETF RFC 2661: Layer Two Tunneling Protocol \"L2TP\"\n[68]\tIETF RFC 2868: RADIUS Attributes for Tunnel Protocol Support\n[69]\t3GPP TS 23.548: \"5G System Enhancements for Edge Computing; Stage 2\".\n[70]\tVoid\n[71]\tIETF RFC 3986: \"Uniform Resource Identifier (URI): Generic Syntax\".\n[72]\t3GPP TS 23.247:\" Architectural enhancements for 5G multicast-broadcast services; Stage 2\".\n[73]\t3GPP TS 29.564: \"5G System; User Plane Function Services; Stage 3\".\n[74]\t3GPP TS 29.500: \"5G System; Technical Realization of Service Based Architecture; Stage 3\".\n[75]\tIETF RFC 4122: \"A Universally Unique IDentifier (UUID) URN Namespace\".\n[76]\tVoid\n[77]\tVoid\n[78]\tVoid\n[79]\t3GPP TS 26.522: \"5G Real-time Media Transport Protocol Configurations\".\n[80]\t3GPP TS 29.585: \"5G System (5GS); Session Management Function (SMF) / Centralized User Configuration (CUC) to Access Network Talker Listener (AN-TL) and Core Network Talker Listener (CN-TL) protocol aspects; Stage 3\".\n[81]\tIETF RFC 9331: \"Explicit Congestion Notification (ECN) Protocol for Very Low Queuing Delay (L4S)\".\n[82]\tIETF RFC 3550: \"RTP: A Transport Protocol for Real-Time Applications\".\n[83]\tIETF RFC 3711: The Secure Real-time Transport Protocol (SRTP\"\n[84]\tIETF RFC 6184: \"RTP Payload Format for H.264 Video\"\n[85]\tIETF RFC 7798: \"RTP Payload Format for High Efficiency Video Coding (HEVC)\"\n[86]\tIETF RFC 8285: \"A General Mechanism for RTP Header Extensions\".\n[87]\t3GPP TS 32.279: \"Charging management; 5G Multicast-broadcast Services charging; Stage 2\".\n[88]\t3GPP TS 28.558: \"Management and orchestration; User Equipment (UE) level measurements for 5G system\".",
      "chunk_type": "general",
      "cross_references": [
        "ts_21.905",
        "ts_23.214",
        "ts_29.281",
        "ts_23.203",
        "ts_29.212",
        "ts_29.274",
        "ts_36.413",
        "ts_29.213",
        "ts_23.401",
        "ts_22.153",
        "ts_32.251",
        "ts_32.299",
        "ts_23.060",
        "ts_33.107",
        "ts_29.251",
        "ts_23.007",
        "ts_29.303",
        "ts_23.501",
        "ts_23.502",
        "ts_38.415",
        "ts_32.422",
        "ts_29.061",
        "ts_23.527",
        "ts_29.512",
        "ts_38.300",
        "ts_29.510",
        "ts_23.503",
        "ts_32.255",
        "ts_33.127",
        "ts_23.003",
        "ts_29.561",
        "ts_29.502",
        "ts_23.316",
        "ts_24.193",
        "ts_29.571",
        "ts_24.539",
        "ts_33.501",
        "ts_24.250",
        "ts_23.682",
        "ts_23.548",
        "ts_23.247",
        "ts_29.564",
        "ts_29.500",
        "ts_26.522",
        "ts_29.585",
        "ts_32.279",
        "ts_28.558"
      ]
    },
    {
      "chunk_id": "ts_29.244_3.1",
      "section_id": "3.1",
      "section_title": "Definitions",
      "content": "For the purposes of the present document, the terms and definitions given in 3GPP TR 21.905 [1] and the following apply. A term defined in the present document takes precedence over the definition of the same term, if any, in 3GPP TR 21.905 [1].\nAssociated PDU Session: A PDU Session associated to a multicast session that is used for 5GC Individual MBS traffic delivery method and for signalling related to a user's participation in a multicast session such as join and leave requests.\nAssociated QoS Flow: A unicast QoS Flow that belongs to the associated PDU Session and is used for 5GC Individual MBS traffic delivery method. The associated QoS Flow is mapped from a multicast QoS Flow in a multicast MBS session.\nCommon Tunnel EndPoint Identifier (C-TEID): See definition in clause 3.1 of 3GPP TS 29.281 [3]. It is used for the delivery of user plane traffic using multicast transport via a common GTP-U tunnel to NG-RAN nodes over N3mb and/or to UPFs over N19mb.\nCP function: A node with a Control Plane function (see 3GPP TS 23.214 [2]) supporting one or more PFCP entities. A Control Plane function, i.e. a Control Plane Node, is identified by the Node ID that is set to either an FQDN or an IP address.\nLow Layer Source Specific Multicast address (LLSSM): It is used to deliver user plane traffic using multicast transport to NG-RAN nodes over N3mb and/or to UPFs over N19mb. The destination multicast IP address identifies the multicast group, while the related unicast source IP address identifies the source of the multicast traffic (MB-UPF). The MB-UPF sets the outer header of the DL UP packets with the respective source IP address and destination multicast IP address.\nMatch Field: a field of the Packet Detection Information of a Packet Detection Rule against which a packet is attempted to be matched.\nMatching: comparing the set of header fields of a packet to the match fields of the Packet Detection Information of a Packet Detection Rule.\nMBS ingress address: It is used for the delivery of DL MBS UP traffic using unicast transport to the MB-UPF over N6mb or Nmb9 interface. The MBS ingress address identifies the MB-UPF's unicast IP address and port number for receiving DL data.\nMulticast transport: the delivery of user plane traffic by IP multicast transport, as opposed to IP unicast transport. Multicast transport is supported over N3mb, N19mb and N6mb interfaces, but is not supported over Nmb9.\nNode: Either a CP function or an UP function supporting one or more PFCP entities. A Node is identified by the Node ID, which is set to either an FQDN or an IP address.\nPFCP Entity: An endpoint in a CP (or UP) function supporting PFCP, that is identified by the IP address. The IP address of a PFCP entity may or may not be the IP address included in the Node ID.\nSource Specific Multicast address (SSM): It is used to deliver user plane traffic using multicast transport. The destination multicast IP address identifies the multicast group, while the related unicast source IP address identifies the source of the multicast data (e.g. AF/AS or MBSTF).\nUnicast transport: the delivery of user plane traffic by IP unicast transport, as opposed to IP multicast transport. For MBS, unicast transport is supported over N3mb, N19mb, N6mb and Nmb9 interfaces.\nUP function: A node with a User Plane function (see 3GPP TS 23.214 [2]) supporting one or more PFCP entities. A User Plane function, i.e. a User Plane Node, is identified by the Node ID that is set to either a FQDN or an IP address.",
      "chunk_type": "definition",
      "cross_references": [
        "ts_29.281_clause_3.1",
        "ts_21.905",
        "ts_29.281",
        "ts_23.214"
      ]
    },
    {
      "chunk_id": "ts_29.244_3.2",
      "section_id": "3.2",
      "section_title": "Abbreviations",
      "content": "For the purposes of the present document, the abbreviations given in 3GPP TR 21.905 [1] and the following apply. An abbreviation defined in the present document takes precedence over the definition of the same abbreviation, if any, in 3GPP TR 21.905 [1].\n5MBS\t5G Multicast-Broadcast Service\nADC\tApplication Detection and Control\nATSSS\tAccess Traffic Steering, Switching, Splitting\nATSSS-LL\tATSSS Low Layer\nBAR\tBuffering Action Rule\nBP\tBranching Point\nCN-TL\tCore Network Talker Listener function\nCP\tControl Plane\nCUC\tCentralized User Configuration\nDDDS\tDownlink Data Delivery Status notification with UPF buffering\nDDoS\tDistributed Denial of Service\nDEI\tDrop Eligible Indicator\nDetNet\tDeterministic Networking\nDNAI\tData Network Access Identifier\nDSCP\tDifferentiated Services Code Point\nDS-TT\tDevice-Side TSN Translator\nEASDF\tEdge Application Server Discovery Function\neMPS\tenhanced Multimedia Priority Service\nFAR\tForwarding Action Rule\nF-SEID\tFully Qualified SEID\nF-TEID\tFully Qualified TEID\nHR-SBO\tHome Routed Session BreakOut\nIP\tInternet Protocol\nIPUPS\tInter-PLMN User Plane Security\nIPv4\tInternet Protocol version 4\nIPv6\tInternet Protocol version 6\nI-SMF\tIntermediate SMF\nL2TP\tLayer 2 Tunneling Protocol\nL4S\tLow Latency, Low Loss and Scalable Throughput\nLAC\tL2TP Access Concentrator\nLMISF\tLI Mirror IMS State Function\nLNS\tL2TP Network Server\nMA\tMulti-Access\nMA\tMulti-Access\nMAR\tMulti-Access Rule\nMBS\tMulticast/Broadcast Service\nMB-SMF\tMulticast/Broadcast Session Management Function\nMB-UPF\tMulticast/Broadcast User Plane Function\nMBSF\tMulticast/Broadcast Service Function\nMBSTF\tMulticast/Broadcast Service Transport Function\nMPQUIC\tMulti-Path QUIC\nMPTCP\tMulti-Path TCP Protocol\nMT-EDT\tMobile Terminated Early Data Transmission\nMT-SDT\tMobile Terminated Small Data Transmission\nNPN\tNon-Public Network\nNR\tNew Radio\nNW-TT\tNetwork-side TSN Translator\nPCC\tPolicy and Charging Control\nPCP\tPriority Code Point\nPCEF\tPolicy and Charging Enforcement Function\nPCRF\tPolicy and Charging Rule Function\nPDI\tPacket Detection Information\nPDR\tPacket Detection Rule\nPFCP\tPacket Forwarding Control Protocol\nPFD\tPacket Flow Description\nPGW\tPDN Gateway\nPGW-C\tPDN Gateway Control plane function\nPGW-U\tPDN Gateway User plane function\nPIN\tPersonal IoT Network\nPLR\tPacket Loss Rate\nPMF\tPerformance Measurement Function\nPMIC\tPort Management Information Container\nPSA\tPDU Session Anchor\nPTP\tPrecision Time Protocol\nQER\tQoS Enforcement Rule\nRDS\tReliable Data Service\nRTT\tRound Trip Time\nS8HR\tS8 Home Routed\nSDF\tService Data Flow\nSEID\tSession Endpoint Identifier\nSGW\tServing Gateway\nSGW-C\tServing Gateway Control plane function\nSGW-U\tServing Gateway User plane function\nSMF\tSession Management Function\nSNPN\tStand-alone Non-Public Network\nSRR\tSession Reporting Rule\nSX3LIF\tSplit X3 LI Interworking Function\nTDF\tTraffic Detection Function\nTDF-C\tTraffic Detection Function Control plane function\nTDF-U\tTraffic Detection Function User plane function\nTL\tTalker Listener\nTMGI\tTemporary Mobile Group Identity\nTN\tTransport Network\nToS\tType of Service\nTSC\tTime Sensitive Communication\nTSCTS\tTime Sensitive Communication and Time Synchronization\nTSCTSF\tTime Sensitive Communication and Time Synchronization function\nTSN\tTime Sensitive Networking\nTSSF\tTraffic Steering Support Function\nUDP\tUser Datagram Protocol\nUL CL\tUplink Classifier\nUMIC\tUser Plane Node Management Information Container\nUP\tUser Plane\nUPF\tUser Plane Function\nURR\tUsage Reporting Rule\nVID\tVLAN Identifier",
      "chunk_type": "general",
      "cross_references": [
        "ts_21.905"
      ]
    },
    {
      "chunk_id": "ts_29.244_4.1",
      "section_id": "4.1",
      "section_title": "Introduction",
      "content": "The protocol stack for the control plane over the Sxa, Sxb, Sxc, combined Sxa/Sxb, N4 and N4mb reference points shall be as depicted in Figure 4.1-1. Clauses 4.2 and 4.3 further specify the related UDP and IP requirements.\nFigure 4.1-1: Control Plane stack over Sxa, Sxb, Sxc, combined Sxa/Sxb, N4 and N4mb\nThe protocol stack for the user plane over the Sxa, Sxb and N4reference points (see clause 5.3) shall be as depicted in Figure 4.1-2. 3GPP TS 29.281 [3] further specifies the related GTP-U, UDP and IP requirements. Both IPv4 and IPv6 shall be supported.\nFigure 4.1-2: User Plane stack over Sxa, Sxb, combined Sxa/Sxb and N4",
      "chunk_type": "requirement",
      "cross_references": [
        "clause_5.3",
        "figure_4.1-1",
        "ts_29.281_figure_4.1-2",
        "figure_4.1-2",
        "ts_29.281"
      ]
    },
    {
      "chunk_id": "ts_29.244_4.2.1",
      "section_id": "4.2.1",
      "section_title": "General",
      "content": "A User Datagram Protocol (UDP) compliant with IETF RFC 768 [4] shall be used.",
      "chunk_type": "definition",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.244_4.2.2",
      "section_id": "4.2.2",
      "section_title": "Request Message",
      "content": "The UDP Destination Port number for a Request message shall be 8805. It is the registered port number for PFCP.\nThe UDP Source Port for a Request message is a locally allocated port number at the sending entity.\nNOTE:\tThe locally allocated source port number can be reused for multiple Request messages.",
      "chunk_type": "requirement",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.244_4.2.3",
      "section_id": "4.2.3",
      "section_title": "Response Message",
      "content": "The UDP Destination Port value of a Response message shall be the value of the UDP Source Port of the corresponding Request message.\nThe UDP Source Port of a Response message shall be the value from the UDP Destination Port of the corresponding message.",
      "chunk_type": "requirement",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.244_4.3.1",
      "section_id": "4.3.1",
      "section_title": "General",
      "content": "In this clause, \"IP\" refers either to IPv4 as defined by IETF RFC 791 [5] or IPv6 as defined by IETF RFC 2460 [6]. A PFCP entity shall support both IPv4 and IPv6.",
      "chunk_type": "definition",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.244_4.3.2",
      "section_id": "4.3.2",
      "section_title": "Request Message",
      "content": "The IP Destination Address of a Request message shall be an IP address of the peer entity.\nDuring the establishment of a PFCP Session, the CP and the UP functions select and communicate to each other the IP Destination Address at which they expect to receive subsequent Request messages related to that PFCP Session. The CP and the UP functions may change this IP address subsequently during a PFCP Session Modification procedure.\nThe IP Source Address of a Request message shall be an IP address of the sending entity.",
      "chunk_type": "requirement",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.244_4.3.3",
      "section_id": "4.3.3",
      "section_title": "Response Message",
      "content": "The IP Destination Address of a Response message shall be copied from the IP Source Address of the corresponding Request message.\nThe IP Source Address of a Response message shall be copied from the IP destination address of the corresponding Request message.",
      "chunk_type": "requirement",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.244_4.4",
      "section_id": "4.4",
      "section_title": "Layer 2",
      "content": "Typically Ethernet should be used as a Layer 2 protocol, but operators may use any other technology.",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.244_4.5",
      "section_id": "4.5",
      "section_title": "Layer 1",
      "content": "Operators may use any appropriate Layer 1 technology.",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.244_5.1",
      "section_id": "5.1",
      "section_title": "Introduction",
      "content": "The architecture reference model with Control and User Plane Separation of EPC nodes is described in clause 4.2 of 3GPP TS 23.214 [2].\nThe architecture reference model with SMF and UPF of 5GC nodes is described in clause 4.2 of 3GPP TS 23.501 [28].\nThe architecture reference model with MB-SMF and MB-UPF of 5GC nodes is described in clause 6.7 of 3GPP TS 23.247 [72].\nThis clause specifies the high level principles of the PFCP protocol and describe how 3GPP functionalities are realised on the Sxa, Sxb, Sxc, N4 and N4mb reference points, e.g. Packet Forwarding, Policy and Charging Control, Lawful Interception.",
      "chunk_type": "general",
      "cross_references": [
        "ts_23.214_clause_4.2",
        "ts_23.501_clause_4.2",
        "ts_23.247_clause_6.7",
        "ts_23.214",
        "ts_23.501",
        "ts_23.247"
      ]
    },
    {
      "chunk_id": "ts_29.244_5.2.1",
      "section_id": "5.2.1",
      "section_title": "General",
      "content": "The packet forwarding scenarios supported over the Sxa, Sxb and Sxc reference points are specified in 3GPP TS 23.214 [2].\nThe packet forwarding scenarios supported over the N4 reference point are specified in 3GPP TS 23.501 [28] and 3GPP TS 23.502 [29].\nThe packet forwarding scenarios supported over the N4mb reference point are specified in 3GPP TS 23.247 [72].\nThe CP function controls the packet processing in the UP function by establishing, modifying or deleting PFCP Session contexts and by provisioning (i.e. adding, modifying or deleting) PDRs, FARs, QERs, URRs, BAR and/or MAR or by activating/deactivating pre-defined PDRs, FARs, QERs, URRs, per PFCP session context, whereby a PFCP session context may correspond:\n-\tfor EPC, to an individual PDN connection, a TDF session, or a standalone session not tied to any PDN connection or TDF session used e.g. for forwarding Radius, Diameter or DHCP signalling between the PGW-C and the PDN.\n-\tfor 5GC, to an individual PDU session, a standalone PFCP session not tied to any PDU session or an MBS session.\nEach PDR shall contain a PDI, i.e. one or more match fields against which incoming packets are matched, and may be associated to the following rules providing the set of instructions to apply to packets matching the PDI:\n-\tone or more FARs, which contains instructions related to the processing of the packets as follows:\n-\tan Apply Action parameter, which indicates whether the UP function shall:\n-\tforward, duplicate, drop or buffer the packet with or without notifying the CP function about the arrival of a DL packet;\n-\taccept or deny UE requests to join an IP multicast group;\n-\tforward, duplicate, drop or buffer the UL packet; or\n-\tforward the MBS session data to a Low Layer Source Specific Multicast (LL SSM) address (using multicast transport) and/or forward and replicate the MBS session data to multiple GTP-u peers (using unicast transport).\n-\tforwarding, buffering and/or duplicating parameters, which the UP function shall use if the Apply Action parameter requests the packets to be forwarded, buffered or duplicated respectively. These parameters may remain configured in the FAR regardless of the Apply Action parameter value, to minimize the changes to the FAR during the transitions of the UE between the idle and connected modes. The buffering parameters, when present, shall be provisioned in a BAR created at the PFCP session level and referenced by the FAR.\nNOTE 1:\tBuffering refers here to the buffering of the packet in the UP function. The UP function is instructed to forward DL packets to the CP function when applying buffering in the CP function. See clause 5.3.1.\n-\tzero, one or more QERs, which contains instructions related to the QoS enforcement of the traffic;\n-\tzero, one or more URRs, which contains instructions related to traffic measurement and reporting.\n-\tzero or one MAR, which contains instructions related to Access Traffic Steering, Switching and Splitting (ATSSS) for the downlink traffic of a Multi-Access (MA) PDU session. See clause 5.2.7.\nNOTE 2:\tA downlink PDR can be associated with two FARs for an N4 session established for an MA PDU session as an MAR contains two FARs for 3GPP and non-3GPP respectively.\nA FAR, a QER, an URR and an MAR shall only be associated to one or multiple PDRs of the same PFCP session context.\nThe QoS Enforcement Rule Correlation ID shall be assigned by the CP function to correlate QERs from multiple PFCP session contexts. For instance, the enforcement of APN-AMBR in the PGW-U shall be achieved by setting the same QoS Enforcement Rule Correlation ID to the QERs from different PFCP sessions associated with all the PDRs corresponding to the non-GBR bearers of all the UE's PDN connections to the same APN. The QERs that are associated to the same QoS Enforcement Rule Correlation ID in multiple PFCP sessions shall be provisioned, with the same QER contents, in each of these PFCP sessions. The QoS Enforcement Rule Correlation ID shall be only used to enforce the APN-AMBR when the UE is in EPC, it may be provided by the CP function over N4 to the UP function for a PDU session may move to EPC in a later stage.\nThe following principles shall apply for the provisioning of PDRs in the UP function:\n-\tEvery PDR provisioned for a PFCP session shall allow to identify the PFCP session, i.e. every PDR shall contain the information element(s) to identify the PFCP session, which is either a Traffic Endpoint Identifier (if the PDI Optimization feature is supported) or equivalent information, e.g. UE IP address, Local F-TEID, Framed-Route, in the PDI IE.\n-\tThe CP function shall not provision more than one PDR with the same match fields in the PDI (i.e. with the same set of match fields and with the same value). The CP function may provision PDRs with the same value for a subset of the match fields of the PDI but not all;\n-\tdifferent PDRs of a same PFCP session may overlap, e.g. the CP function may provision two PDRs which differ by having one match field set to a specific value in one PDR and the same match field not included in the other PDR (thus matching any possible value);\n-\tdifferent PDRs of different PFCP sessions, not including the Packet Replication and Detection Carry-On Information IE, shall not overlap, i.e. PDRs in each PFCP session shall differ by at least one different (and not wildcarded) match field in their PDI, such that any incoming user plane packet may only match PDRs of a single PFCP session;\n-\tAs an exception to the previous principle, the CP function may provision a PDR with all match fields wildcarded (i.e. all match fields omitted in the PDI) in a separate PFCP session, to control how the UP function shall process packets unmatched by any PDRs of any other PFCP session. The CP function may provision the UP function to send these packets to the CP function or to drop them. The UP function shall grant the lowest precedence to this PDR.\n-\tdifferent PDRs of different PFCP sessions, including the Packet Replication and Detection Carry-On Information IE, may overlap. The Detection Carry-On Indication indicates that the UP function shall proceed with the look-up of other PDRs of other PFCP sessions matching the packet. This is used for broadcast traffic forwarding in 5G VN Group Communication.\n-\tdifferent downlink PDRs of different PFCP sessions, with a PDI including the IP multicast IP address IE, may overlap. The UP function shall proceed with the look-up of other PDRs of other PFCP sessions matching the packet. This is used for downlink IP multicast traffic for IPTV service (see clause 5.25).\n-\tdifferent downlink PDRs of different PFCP sessions, with a PDI including the MBS Session Identifier, may overlap. The UPF shall proceed with the look-up of other PDRs of other PFCP sessions with the same MBS Session Identifier matching the packets. This is used for multicast MBS services in 5GS using 5GC Individual Traffic Delivery (see clause 5.34).\nOn receipt of a user plane packet, the UP function shall perform a lookup of the provisioned PDRs in the UP function to identify only one PDR in a PFCP session according to the following steps:\n-\tidentify first the PFCP session to which the packet corresponds; and\n-\tfind the first PDR matching the incoming packet, among all the PDRs provisioned for this PFCP session, starting with the PDRs with the highest precedence and continuing then with PDRs in decreasing order of precedence. Only the highest precedence PDR matching the packet shall be selected, i.e. the UP function shall stop the PDRs lookup once a matching PDR is found.\nA packet matches a PDR if all the match fields which are identified with different IE type in the PDI of the PDR are matching the corresponding packet header fields unless specified otherwise. If a match field is not included in the PDI, it shall be considered as matching all possible values in the header field of the packet. If the match field is present and does not include a mask, the match field shall be considered as matching the corresponding header field of the packet if it has the same value. If the match field is present and includes a mask (e.g. IP address with a prefix mask), the match field shall be considered as matching the corresponding header field of the packet if it has the same value for the bits which are set in the mask. If a match field has multiple instances, i.e. there are several IEs with the same IE type, a packet matches this match field if any instance is matching the corresponding packet header field.\nThe match fields of the PDI shall correspond to outer and/or inner packet header fields, e.g. uplink bearer binding verification in the PGW-U may be achieved by configuring a PDR with the PDI containing the local GTP-U F-TEID (for outer IP packet matching) and the SDF filters of the data flows mapped to the bearer (for inner IP packet matching).\nNOTE 3:\tA DL PDR can be provisioned with a UE IP address together with a Framed-Route or a Framed-IPv6-Rotue either in the PDI IE or in the Create Traffic Endpoint IE; in such case, the PDR is matched if the packet matches either the UE IP address or the Framed-Route (Framed-IPv6-Route).\nWhen one or more pre-defined PDR(s) are activated for a given PDR (see clause 5.19), an incoming packet matches the PDR if it matches one of activated pre-defined PDR(s).\nThe UP function should drop packets unmatched by any PDRs.\nThe packet processing flow in the UP function is illustrated in Figure 5.2.1-1.\nFigure 5.2.1-1: Packet processing flow in the UP function\nAt the deletion of a PFCP session, the UP function shall delete the PFCP session context and all the associated non-preconfigured rules.\nNOTE 4:\tDeleting a QER in one PFCP session does not result in deleting another QER in another PFCP session even when these two QERs have the same QER ID and/or are associated with the same QER Correlation ID.\nA UP Function controlled by multiple CP functions shall handle Rule IDs from the different CP functions independently from each other.\nRule ID used for PDR, FAR, BAR, QER, URR or MAR is uniquely identifying a rule of the corresponding rule type within a session.\nFor an MA-PDU session, IP addresses translation for MPTCP traffic (see Annex E.3) is independent from the handling of URR/QER/BAR, but it shall be performed before applying the FAR (e.g. before creating the outer header and forwarding the packet).\n5.2.1A\tPacket Detection Rule Handling\n5.2.1A.1\tGeneral\nWhen provisioning a PDR in the UP function, the CP function shall provide the PDI with the following information:\n-\tthe source interface of the incoming packets;\n-\ta combination of the parameters, that incoming packets are requested to match, among: Local F-TEID, Network Instance, UE IP address(es), SDF Filter(s) and/or Application ID. For 5GC, the PDI may additionally contain one or more QFI(s) to detect traffic pertaining to specific QoS flow(s), Ethernet Packet Filter(s), Ethernet PDU Session Information (see clause 5.13.1) and/or DNS Query Filter(s).\nThe requirements for provisioning an SDF filter in the PDI are specified in clauses 5.2.1A.2A and 5.2.1A.3.\nThe CP function may provision the parameters, that incoming packets are requested to match, in the UP function by:\n-\tproviding the parameters individually in each PDI of the PFCP session; or\n-\toptionally, if the PDI Optimization feature is supported by the UP function, by providing the parameters which may be common to multiple PDIs of a same PFCP session in a Traffic Endpoint IE and by referencing this Traffic Endpoint in the PDI(s) of the PFCP session. See clause 5.2.1A.2. A Traffic Endpoint may include a Local F-TEID, Network Instance, UE IP address(es) and/or Ethernet PDU Session Information (see clause 5.13.1).\nNOTE:\tA Traffic Endpoint can correspond to a GTP-u endpoint, an SGi or an N6 endpoint.\n5.2.1A.2\tPDI Optimization\nThe PDI Optimization feature should be supported by CP and UP functions complying with this release of the specification. This feature allows the CP function to optimize the signaling towards the UP function by creating the information that are common to multiple PDRs as a Traffic Endpoint with a Traffic Endpoint ID and then referring to this common information from multiple PDRs. The Traffic Endpoint ID shall be unique within a PFCP session. If MTE feature is supported, one PDI may refer to more than one Traffic Endpoints. When a PDI refers to a Traffic Endpoint, the parameters that are in the Traffic Endpoint shall not be once again provided in the PDI. The CP function may update the Traffic Endpoint at any time.\nIf a Traffic Endpoint is updated, all the PDRs that refer to this Traffic Endpoint in the UP function shall use the updated information.\nThe UP function shall allocate and store the F-TEID associated to the Traffic Endpoint. When the UP function provides the allocated F-TEID to the CP function in the PFCP Session Establishment response or PFCP Session Modification response message, the CP function shall update the Traffic Endpoint information stored in the CP function with the received F-TEID.\nThe CP function should use a Traffic Endpoint ID created in a different PFCP message only after getting the confirmation from the UP function of the Traffic Endpoint ID creation.\nIf the CP function deletes a Traffic Endpoint, the UP Function shall delete all the PDRs that refer to this Traffic Endpoint.\nNOTE 1:\tThe requirements specified in clause 5.2.2.3.1 for reporting usage reports to the CP function also apply if the deletion of the Traffic Endpoint results in deleting the last PDR associated to a URR.\nNOTE2:\tFor EPC, the Remove Traffic Endpoint IE can be used to delete a bearer for which multiple PDRs exist (with the same Traffic Endpoint ID).\n5.2.1A.2A\tProvisioning of SDF filters\nWhen provisioning an SDF Filter in a PDI, the CP function shall:\n-\tcopy the Flow Description if it is received from the PCRF (or PCF), in the corresponding PDI of a PDR regardless of whether the PDR is for matching uplink or downlink traffic;\nNOTE 1\tThe Flow Description received from the PCRF (or PCF) is set assuming downlink flows only, see clause 5.4.2 of 3GPP TS 29.212 [8]. The CP function uses the Flow-Direction AVP received from the PCRF (or PCF) to determine the actual direction and thus the source interface of the packet flows described in the Flow Description.\n-\tfor traffic from CP-function or SGi-LAN:\n-\tIf the traffic is intended to be forwarded to the UE, the CP function shall provision the Flow Description with IPFilterRule \"source\" parameters set to correspond to the CP function or SGi-LAN and the IPFilterRule \"destination\" parameters correspond to the UE;\n-\tIf the traffic is intended to be forwarded to the PDN, the CP function shall provision the Flow Description with IPFilterRule \"source\" parameters set to correspond to the CP function or SGi-LAN and the IPFilterRule \"destination\" parameters correspond to the PDN.\nThe UP function shall apply the SDF filter based on the Source Interface of the PDR as follows (see also clause 8.2.5):\n-\twhen the Source Interface is CORE, this indicates that the filter is for downlink data flow, so the UP function shall apply the Flow Description as is;\n-\twhen the Source Interface is ACCESS, this indicates that the filter is for uplink data flow, so the UP function shall swap the source and destination address/port in the Flow Description;\n-\twhen the Source Interface is CP-function or SGi-LAN, the UP function shall use the Flow Description as is.\n5.2.1A.3\tBidirectional SDF Filters\nThe CP function may provision bidirectional SDF Filters in the UP function (see clause 8.2.5), i.e. SDF Filters that may be associated to both uplink and downlink PDRs of a same PFCP/N4 session, as follows:\n-\twhen provisioning a bidirectional SDF Filter the first time for a PFCP/N4 session, the CP function shall provision the SDF filter definition together with a SDF Filter ID uniquely identifying the SDF Filter among all the SDF Filters provisioned for a given PFCP/N4 Session;\n-\tthe CP function may then provision a PDR for the same PFCP/N4 session but the opposite direction, by provisioning the SDF Filter ID in the SDF filter ID field of the PDI, without provisioning again the SDF filter definition;\n-\tthe UP function shall apply any modification of a bidirectional SDF Filter to all PDRs of the PFCP/N4 session making use of this SDF Filter;\n-\tupon deletion of a PDR making use of a bidirectional SDF Filter, the UP function shall still apply the SDF Filter for any other PDR making use of the SDF Filter.\nThe requirements specified for provisioning SDF filters in clause 5.2.1A.2A shall also apply when provisioning bidirectional SDF Filters.\n5.2.1A.4\tApplication detection with PFD\nThe detection information for a given application may be provisioned by the CP function to the UP function via PFD management procedure. See clause 6.2.5.\nThe PFDE (PFD Enhancement) feature may be optionally supported by the CP function and UP function. When the feature is supported in both the CP function and UP function, the CP function may provision a PFD Contents IE including a property (i.e. either flow description, or URL or Domain Name/Domain Name Protocol) with multiple values.\nNOTE 1:\tIt is assumed, when the PFDE feature is not supported, a PFD Contents can only include a property with one value.\nWhen the UP function attempts to detect the traffic pertaining to an application by using the application's PFDs (see clause 7.4.3.1 and 8.2.39), the UP function shall consider:\n-\tthe application is detected if the incoming traffic matches at least one PFD Contents;\n-\tone PFD Contents is matched if the incoming traffic matches every property contained in the corresponding PFD Contents IE;\n-\tthe incoming traffic matches one property (i.e. flow description, URL and Domain Name/Domain Name Protocol) if it matches at least one value of the property.\nNOTE 2:\tInterpretation of the Custom PFD Content is implementation specific.",
      "chunk_type": "definition",
      "cross_references": [
        "clause_5.3.1",
        "clause_5.2.7",
        "clause_5.25",
        "clause_5.34",
        "clause_5.19",
        "clause_5.13.1",
        "clause_5.2.1",
        "clause_5.2.2.3.1",
        "ts_29.212_clause_5.4.2",
        "clause_8.2.5",
        "clause_6.2.5",
        "clause_7.4.3.1",
        "figure_5.2.1-1",
        "ts_23.214",
        "ts_23.501",
        "ts_23.502",
        "ts_23.247",
        "ts_29.212"
      ]
    },
    {
      "chunk_id": "ts_29.244_5.2.2.1",
      "section_id": "5.2.2.1",
      "section_title": "General",
      "content": "The CP function shall provision URR(s) for a PFCP session in a PFCP Session Establishment Request or a PFCP Session Modification Request to request the UP function to:\n-\tmeasure the network resources usage in terms of traffic data volume, duration (i.e. time) and/or events, according to the provisioned Measurement Method; and\n-\tsend a usage report to the CP function, when the measurement reaches a certain threshold, periodically or when detecting a certain event, according to the provisioned Reporting Triggers or when an immediate report is requested within a PFCP Session Modification Request.\nNOTE:\tThe UP function sends a usage report without performing network resources usage measurements when being requested to detect and report the start of an SDF or application traffic.",
      "chunk_type": "definition",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.244_5.2.2.2.1",
      "section_id": "5.2.2.2.1",
      "section_title": "General",
      "content": "When provisioning a URR, the CP function shall provide the reporting trigger(s) in the Reporting Triggers IE of the URR which shall cause the UP function to generate and send a Usage Report for this URR to the CP function. When adding or removing reporting trigger(s) to or from the URR, the CP function shall provide the new complete list of applicable reporting triggers in the Reporting Triggers IE in the PFCP Session Modification Request message.\nFor the volume-based measurement method, the CP function may provision:\n-\tthe Volume Threshold IE, to request the UP function to generate a usage report when the measured traffic reaches the threshold;\n-\tthe Volume Quota IE, to request the UP function to stop forwarding packets (or only allow forwarding of some limited user plane traffic, based on operator policy in the UP function) and, if no Volume Threshold is provisioned, to also generate a usage report, when the measured traffic reaches the quota;\n-\tthe Dropped DL Traffic Threshold IE, to request the UP function to generate a usage report when the downlink traffic that is being dropped reaches the threshold; and/or\nNOTE 1:\tFor EPC, the Dropped DL Traffic Threshold can be armed in a SGW-U for triggering the PGW Pause of Charging feature (see 3GPP TS 23.401 [14]). For 5GC, the Dropped DL Traffic Threshold can be armed in a UPF for triggering the SMF Pause of Charging feature (see 3GPP TS 23.502 [29]).\n-\ta Measurement Information with the 'Measurement Before QoS Enforcement' flag set to \"1\", to request the UP function to measure the traffic usage before any enforcement, e.g. bitrate enforcement for QoS, Gate control enforcement (as specified in clause 5.4.3) or packets dropped as requested by the FAR;\n-\ta Measurement Information with the 'Measurement of Number of Packets' flag set to \"1\", to request the UP function to measure the number of packets be transferred in UL/DL/Total in addition to the measurement in octets, if the UP function supports the MNOP feature.\nFor the time-based measurement method, the CP function may provision:\n-\ta Time Threshold IE, to request the UP function to generate a usage report when the measured traffic reaches the threshold;\n-\ta Time Quota, to request the UP function to stop forwarding packets (or only allow forwarding of some limited user plane traffic, based on operator policy in the UP function) and, if no Time Threshold is provisioned, to also generate a usage report, when the measured traffic reaches the quota;\n-\ta Measurement Information with the \"Immediate Start Time Metering\" flag set to \"1\", to request the UP function to start time metering immediately at receiving the flag; otherwise, the UP function shall start time metering when the first packet is received; and/or\n-\tan Inactivity Detection Time, to request the UP function to suspend the time measurement when no packets are received during the provisioned Inactivity Detection Time. The time measurement shall then be resumed by the UP function when subsequent traffic is received. If an Inactivity Detection Time value of zero is provided, or if no Inactivity Detection Time has been provided by the CP function, the time measurement shall be performed continuously until a new non-zero Inactivity Detection Time is received or the time-based usage measurement is stopped. See Figure 5.2.2.2-1:\nFigure 5.2.2.2-1: IDT based charging\nNOTE 2:\tThe Inactivity Detection Time can be set to the Quota Consumption Timer if received. The Inactivity Detection Time is not used to control when the time metering starts.\n-\tFor EPC, a Time Quota Mechanism, including a Base Time Interval Type, which is either Continuous Time Period (CTP) or Discrete Time Period (DTP), and a Base Time Interval (BTI), to the UP function. See clause 6.5.7 in 3GPP TS 32.299 [18].\n-\tFor CTP (Continuous Time Period), the time measurement starts from the time that traffic has occurred up to the first Base Time Interval (BTI) which contains no traffic. The time measurement shall include the last Base Time Interval, i.e. the one which contained no traffic. The time measurement resumes by the UP function when subsequent traffic is received. See Figure 5.2.2.2-2:\nFigure 5.2.2.2-2: CTP based charging\n-\tFor DTP (Descrete Time Period), the time measurement starts from the time that traffic has occurred up to the Base Time Interval end. The time measurement shall be resumed by the UP function when subsequent traffic is received. See Figure 5.2.2.2-3:\nFigure 5.2.2.2-3: DTP based charging\nWhen the time-based measurement method applies, and when the Envelope Reporting is required for EPC, the CP function shall request the UP function to report the usage by setting the reporting trigger to Envelope Closure in addition to other Reporting Trigger(s), in the Reporting Triggers IE. The CP function may indicate the UP function to report for just time, time and volume, time and events, or time and volume and number of events by setting Measurement Method accordingly. The CP function may set the Reduced Application Detection Information flag in the Measurement Information of the URR, when requesting the detection of start and stop of an application solely for the purpose of envelope reporting for EPC.\nThe CP function may provision a Volume Threshold IE, a Volume Quota IE, or both (and/or respectively a Time/Event Threshold IE, a Time/Event Quota IE, or both). In such a case, the CP function may set the reporting trigger for threshold (VOLTH/TIMTH/EVETH) and/or the reporting trigger for quota (VOLQU/TIMQU/EVEQU)) in the Reporting Triggers IE.\nWhen both a Volume (or Time or Event) Threshold IE and a Volume (or Time or Event) Quota IE are provisioned and only the reporting trigger for threshold (VOLTH/TIMTH/EVETH) is set, the UP function shall send a usage report only when reaching the Volume (or Time or Event) Threshold. When subsequently reaching the Volume (or Time or Event) Quota, the UP function shall stop forwarding packets (or only allow forwarding of some limited user plane traffic, based on operator policy in the UP function) without sending a new usage report to the CP function.\nIf both a Volume (or Time or Event) Threshold IE and a Volume (or Time or Event) Quota IE are provisioned and both of the respective Threshold and Quota reporting triggers are set, the UP function shall send a usage report when reaching the Volume (or Time or Event) Threshold and also later on when subsequently reaching the Volume (or Time or Event) Quota.\nNOTE 3:\tA UP Function complying with Release 14 or Release 15 of the specification only sends one usage report when the threshold is reached, even if both reporting triggers (for the threshold and the quota) are set.\nNOTE 4:\tAfter sending a usage report on reaching a threshold, the UP function typically gets a new quota before the earlier provisioned quota exhausts. This implies that the UP function typically sends a quota report when reaching the final quota.\nNOTE 5:\tFor online charging, the Volume Threshold (or Time Threshold) can be set in a PGW-U or TDF-U to the value of the granted volume (or time) quota minus the volume (or time) quota threshold, such as to get a usage report from the UP function when the volume (or time) based credit falls below the remaining quota thresholds provided by the OCS.\nNOTE 6:\tThe Volume Quota or Time Quota can be armed in a PGW-U or TDF-U for online charging to enable the traffic to be forwarded up to an intermediate or final quotas granted by the OCS. The CP function can provision both a Volume (or Time) Threshold and a Volume (or Time) Threshold to request the UP function to:-\tsend a usage report when the consumed resources reach the volume (or time) usage threshold provided by the OCS, and-\tto stop forwarding packets (or only allow forwarding of some limited user plane traffic, based on operator policy in the UP function), without sending a second usage report, when the granted volume (or time) quota is exhausted.\nFor event based measurement method, the CP function may provision:\n-\tthe Event Threshold IE, to request the UP function to generate a usage report when the number of events reaches the event threshold;\n-\tthe Event Quota IE, to request the UP function to stop forwarding packets applicable to the event (or only allow forwarding of some limited user plane traffic, based on operator policy in the UP function) and, if no Event threshold is provisioned, to also generate a usage report, when the number of events reaches the event quota;\nNOTE 7:\tAn event is preconfigured with one or more event detection logic in the UPF. Each event detection logic is associated with an Application ID. The CP function activates the detection and reporting of an event by provisioning PDR(s) with the PDI set to an Application ID and by provisioning a URR with an event threshold or event quota reporting trigger. The CP function identifies an event reported in a Usage Report by the URR ID.\nFor all the measurement methods (i.e. volume, time or event), the CP function may also provision:\n-\ta Quota Holding Time, to request the UP function to send a usage report and to also stop forwarding packets (or only allow forwarding of some limited user plane traffic, based on operator policy in the UP function) when no packets have been received for the duration indicated in this parameter;\nNOTE 8:\tA Quota Holding Time can be armed in a PGW-U or TDF-U for online charging to request the UP function to send a Usage Report when the Quota Holding Time provided by the OCS (see 3GPP TS 32.299 [18]) expires. The UP function can be instructed in the same Usage Reporting Rule with the Report Triggers – START to generate a new Usage Report upon receiving any subsequent packets associated with this URR.\n-\ta Quota Validity Time, if the VTIME feature is supported by UP function, to request the UP function to send a usage report after the validity duration is over. After Quota validity timer expiry, if packets are received on UPF, the UPF shall stop forwarding packets or only allow forwarding of limited user plane traffic, based on operator's policy in the UP function;\nNOTE 9:\tAfter sending the usage report triggered by the QUHTI or QUVTI (i.e. the Quota Holding Time or Quota Validity Time expires), any remaining quota for the URR is discarded in the UP function.\n-\ta Monitoring Time IE and zero or more Additional Monitoring IEs, to request the UP function to measure the network resources usage before and after the monitoring time in separate counts and to re-apply the volume and/or time, and/or event thresholds at the monitoring time. The CP function may additionally provision a Subsequent Volume (or Time or Event) Threshold IE and/or a Subsequent Volume (or Time or Event) Quota IE, for a volume (or time or event) based measurement. When being provisioned with a Monitoring Time, the UP function shall:\n-\treset its usage thresholds at the monitoring time to the value provided in the Subsequent Volume (or Time or Event) Threshold IE, if provisioned in the URR, or to the remaining value of the Volume (or Time or Event) threshold used before the monitoring time (i.e. excluding the already accumulated volume or time usage);\n-\tshall indicate the usage up to the Monitoring time and usage after the Monitoring time in separate usage reports as specified in clause 5.2.2.3.1;\n-\tan Measurement Period, indicating the period to generate periodic usage reports to the CP function.\n-\tan User Plane Inactivity Timer, to request the UP function to send an usage report when no packets have been received for any of the PDRs associated to the URR for the duration indicated in this parameter.\nIf the UP function indicated support of the Quota Action feature in the UP Function Features IE, when the CP function provisions a Volume Quota or Time Quota or Event Quota in a URR, the CP function may also provision the \"FAR ID for Quota Action\" IE identifying the substitute FAR the UP function shall apply, for the traffic identified by the PDR to which the URR is associated, when exhausting any of these quotas. This FAR may require the UP function to drop the packets or buffer the packets or redirect the traffic towards a redirect destination as specified in clause 5.4.7.\nIf the UP function has indicated support of the QUASF feature as specified in clause 8.2.25, and when the CP function provisions a Volume Quota, Time Quota, or Event Quota in a URR, the CP function may also provision the Exempted Application ID for Quota Action IE or the Exempted SDF Filter for Quota Action IE, to instruct the UP function, that traffic matching the associated PDR(s) and matching the Application ID(s) or SDF Filter(s) shall be handled based on the FAR associated with the PDR as normal, even when the quota has been exhausted.\nNOTE 10:\tThe traffic forwarded after the quota has been exhausted need not to be measured.\nNOTE 11:\tA PDR can be associated with multiple URRs. If one of these URRs requires the UP function to drop the user data packets, e.g. when the Quota has been exhausted, the other URRs associated to the PDR need also to stop their measurements, except for URRs including the Measurement Information with the 'Measurement Before QoS Enforcement' flag set to \"1\".\nThe CP function may request at any time the UP function to activate or deactivate a network resources usage measurement, using the Inactive Measurement flag of the Measurement Information IE of the URR.\nNOTE 12:\tThis can be used in a PGW-U for the PGW Pause of Charging procedure (see 3GPP TS 23.401 [14]).\nWhen the NSPOC feature as specified in clause 5.30 is supported by the CP and UP function, the CP function may provision:\n-\tan Measurement Information with the 'Send Start Pause of Charging' Flag set to \"1\", to request the UP function (SGW-U or I/V-UPF) to send a Start Pause of Charging indication to the upstream GTP-U entity(s) when the Dropped DL Traffic Threshold is reached.\n-\tan Measurement Information with the 'Applicable for Start of Pause of Charging' Flag set to \"1\", to indicate the UP function to stop the usage measurement for the URR when receiving Start Pause of Charging indication from the peer downstream GTP-U entity.\nWhen the NSPOC feature is supported by the CP and UP functions, the CP function may use the \"SUMPC\" and \"RUMUC\" flags in the PFCPSMReq-Flags IE, and the \"SUMPC\" flag in the PFCPSEReq-Flags IE, to request the UP function to stop or resume the usage measurement for all URRs with the ASPOC flag set to \"1\". The CP function may set the \"CIAM\" flag in the Measurement Information IE in a Create URR or a Update URR IE to request the UP function to stop or resume the usage measurement according to the value of the Inactive Measurement flag for a specific URR with the \"ASPOC\" flag set to \"1\" if necessary. See also clause 5.30.\nThe CP function may request the UP function to measure network resources usage and generate the corresponding Usage Reports only for a number of times, by provisioning the \"Number of Reports\" IE in a URR, if the UP function supports the NORP feature (see clause 8.2.25-1). If so, the URR shall become inactive in the UP function after the requested \"Number of Reports\" have been reported.\nThe CP function may resume the measurement for an inactive URR by setting the Inactive Measurement flag of the Measurement Information IE of the URR to \"0\" in the Update URR IE in a PFCP Session Modification Request message, with or without the Number of Report IE if the URR was deactivated by setting the Inactive Measurement flag of the Measurement Information IE of the URR to from \"0\" to \"1\".\nFor any other cases, i.e. the URR becoming inactive, which is not caused by changing the Inactive Measurement flag from \"0\" to \"1\", the CP may resume the URR:\n-\tby provisioning a Number of Report IE with a (new) non-zero value (to receive the corresponding number of usage reports) or with a null length (to request UP function to perform continous measurement) when the requested Number of Reports has been reached;\n-\tby setting the CIAM flag to \"1\" and the INAM flag to \"0\" if the URR was provisioned with ASPOC bit set to \"1\" in the Update URR (for the URR) when the CP function has requested to stop usage measurement for pause of charging by setting the SUMPC flag to \"1\"; or\n-\tby associating (new) PDR(s) with the URR when the last PDR associated with the URR has been removed.\nIf the CP function wishes the UP function to perform continuous measurement for a URR which was provisioned with a Number of Reports (i.e. to no longer limit the number of reports to be generated), the CP function shall provide the Number of Reports IE in the Update URR with a null length to delete the limit on the number of reports to be generated.\nNOTE 13:\tThe Number of Reports can be provisioned in an URR regardless which Measurement Method is used.",
      "chunk_type": "definition",
      "cross_references": [
        "clause_5.4.3",
        "ts_32.299_clause_6.5.7",
        "clause_5.2.2.3.1",
        "clause_5.4.7",
        "clause_8.2.25",
        "clause_5.30",
        "figure_5.2.2.2-1",
        "figure_5.2.2.2-2",
        "figure_5.2.2.2-3",
        "ts_23.401",
        "ts_23.502",
        "ts_32.299"
      ]
    },
    {
      "chunk_id": "ts_29.244_5.2.2.2.2",
      "section_id": "5.2.2.2.2",
      "section_title": "Credit pooling (for EPC)",
      "content": "For EPC, when the Credit Pool feature is supported and the CP function (e.g. PGW-C) is instructed to handle a Credit Pool for a given Gy Session, the CP function shall create a URR for the Credit Pool, and in this URR, the CP function:\n-\tshall include one Aggregated URR ID IE per URR sharing the credit pool, including the URR ID of the URR sharing the credit pool and the associated Multiplier to measure the abstract service units the corresponding traffic consumes from the credit pool;\n-\tshall set the Time or Volume Threshold or Quota IE to the value calculated as specified in IETF RFC 4006 [16] according to the Measurement Method.\nNOTE 1:\tThe value can be calculated using the following formula:\nS = Q1*M1 + Q2*M2 + ... + Qn*Mn,where the S is the quota for the credit pool, Qn is the quota and Mn is the multiplier for each Rating Group (RG) which are provided via the Multiple Services Credit Control from the OCS.An URRn is defined for each of RG.\nNOTE 2:\tWhen the Measurement Method is set to the combined volume/duration, the Time and Volume\tThreshold or Quota are calculated independently.\n-\tmay set the Reporting Trigger to reporting upon reaching a volume or time threshold or quota;\n-\tmay set the Measurement Method to the data volume, duration (i.e. time), combined volume/duration according to the Measurement Method set in the URRs in the Credit Pool.\nNOTE 3:\tThe UP function is instructed to handle a Credit Pool when a G-S-U-Pool-Reference AVP is included within a Multiple Services Credit Control from the OCS. A Credit Pool is identified by the G-S-U-Pool-Identifier AVP. See clause 6.3.11, 6.4.3 and 6.4.4 of 3GPP TS 32.299 [18].\nIn addition, the CP function shall also include the Linked URR IE, set to the Credit Pool URR ID, in all the URRs which are sharing the credit pool (i.e. which are associated with RGs sharing the Credit Pool).",
      "chunk_type": "requirement",
      "cross_references": [
        "clause_6.3.11",
        "ts_32.299"
      ]
    },
    {
      "chunk_id": "ts_29.244_5.2.2.3.1",
      "section_id": "5.2.2.3.1",
      "section_title": "General",
      "content": "When detecting that a provisioned reporting trigger occurs, the UP function shall generate a Usage Report for the related URR and send it to the CP function by initiating the PFCP Session Report procedure.\nWhen providing usage report information for a URR in a message, the UP function shall include the UR-SEQN (Usage Report Sequence Number) identifying the order in which a Usage Report is generated for the given URR. The UR-SEQN (Usage Report Sequence Number) shall be set to \"0\" for the first Usage Report and incremented for every subsequent Usage Report generated by the UP function for the URR. The UP function shall also indicate the trigger that causes the usage report to be generated in the Usage Report Trigger IE.\nUpon generating a usage report for an URR towards the CP function, the UP function shall:\n-\treset its ongoing measurement counts for the related URR (i.e. the UP function shall report in a usage report the network resources usage measurement since the last usage report for that URR);\n-\tre-apply all the thresholds (Volume/Time/Event Threshold) provisioned for the related URR, if the usage report was triggered due to one of the thresholds being reached, i.e. upon the reporting triggers VOLTH/TIMTH/EVETH; otherwise, if the usage report was triggered for other reporting triggers, adjust the thresholds (Volume/Time/Event Threshold) respectively by subtracting the (volume/time/event) reported usage in the usage report to determine when to generate the next report for reporting triggers VOLTH/TIMTH/EVETH;\n-\twhen the quota (Volume/Time/Event Quota) is provisioned in the URR:\n-\tadjust the quota for volume/time/event respectively by subtracting the (volume/time/event) reported usage in the usage report and use it when applying quota related handling, e.g. to drop or buffer the packets, or apply FAR ID for Quota Action (if provisioned) when the quota becomes \"0\" and to generate the relevant usage report if the corresponding reporting trigger(s)(VOLQU/TIMQU/EVEQU) is set;\n-\tconsider no quota left for the URR when the usage report was triggered for the reporting triggers QUHTI and QUVTI; and\n-\tcontinue to apply the remaining provisioned parameters in the URR and perform the related network resources usage measurement(s), until getting any further instruction from the CP function.\nWhen receiving a new threshold and/or quota from the CP function for a measurement that is already ongoing in the UP function, the UP function shall consider its ongoing measurements counts for the related URR against the new threshold and/or quota to determine when to send its next usage report to the CP function or to apply quota handling, i.e. the UP function shall discard any remaining quota.\nAt receiving a quota with value set to zero, the UP function shall:\n-\thandle packets based on the FAR associated with the PDR, if the packets match the Application ID(s) or the SDF Filter(s) provisioned in the IE Exempted Application ID for Quota Action or the Exempted SDF Filter for Quota Action;\n-\tapply the FAR identified in the FAR ID for Quota Action IE if the CP function has provisioned it, otherwise the UP function shall stop forwarding packets (or only allow forwarding of some limited user plane traffic, based on operator policy in the UP function); and\n-\treport in a usage report the network resources usage measurement since the last usage report for that URR, if applicable.\nWhen the UP function receives a non-zero quota for the same URR in one subsequent PFCP Session Modification Request message, the UP function shall apply the (normal) FAR associated with the PDR (detecting the application traffic) for the buffered traffic if the FAR ID for Quota Action was set to buffer the application traffic at zero quota (either be provisioned with zero quota earlier or the quota has been exhausted).\nNOTE 1:\tThe UP function determines when to send its next usage report to the CP function by deducting from the newly provisioned threshold or quota the traffic it has forwarded since its last usage report. As an example, if the UP function has forwarded 10 Mbytes of traffic since it last usage report to the CP function and the CP function provisions a new volume threshold or quota of 100 Mbytes, the UP function sends its next usage report upon forwarding an additional 90 Mbytes traffic.\nNOTE 2:\tWhen receiving a new threshold or quota from the CP function for a measurement that is already ongoing in the UP function and if the UP function has already generated the usage report but had not sent it, the UP function can send the usage report before performing the update of the URR.\nNOTE 3:\tA URR with the quota set to 0 can be provisioned when a service data flow is not allowed to start before quota is allocated to the service. See clause 5.4.11.\nWhen reporting the network resources usage before and after a Monitoring Time, the UP function shall send two Usage Reports in the PFCP message (e.g. PFCP Session Report Request) for the same URR ID. Each Usage Report shall then include the Usage Information IE indicating whether the reported network resource usage was consumed before or after the Monitoring Time. Omission of this IE in a Usage Report indicates that no monitoring time has occurred. The UP function shall send Usage Reports soon after the occurrence of the Monitoring Time. For a URR, when multiple (Additional) Monitoring Time IEs are provisioned, or a new Monitoring Time is provisioned after the previous Monitoring Time has passed, the UP function may not be able to send the usage report with the Usage Information set to \"AFT\" for the previous Monitoring Time if there is no Reporting Trigger armed before the next Monitoring Time is reached; in such case, the UP function may send multiple usage reports with the Usage Information set to \"BEF\", together with one usage report with the Usage Information set to \"AFT\".\nNOTE 4:\tThe UP function needs to take care to smooth the signalling load towards the CP function if Usage Reports need to be generated for a large number of PFCP sessions after the occurrence of the Monitoring Time.\nFor the volume-based measurement method, the UP function shall report the traffic usage after any QoS enforcement. Additionally, if the CP function requested to measure the traffic usage before QoS enforcement, the UP function shall also report corresponding measurements, when measurements needs to be reported for the traffic usage after QoS enforcement, by sending two Usage Reports in the PFCP message (e.g. PFCP Session Report Request) for the same URR ID. Each Usage Report shall then include the Usage Information IE indicating whether the reported network resource usage corresponds to the traffic before or after QoS enforcement. Thresholds provisioned in a URR shall apply to the traffic usage after any QoS enforcement.\nFor the volume-based measurement method, the UP function shall include all the counters (Total, Uplink and Downlink) of the URR in the Volume Measurement IE in the Usage Report IE; the UP function shall also include the number of packets counted for Total, Uplink, Downlink in the Volume Measurement IE if requested by the CP function and if the UP function supports the MNOP feature.\nAn usage report triggered only due to the Dropped DL Traffic Threshold (DROTH) or Start of Traffic (START), or MAC Address Reporting (MACAR), or IP Multicast Join/Leave (IPMJL) shall not contain any measurement information, i.e. either the Volume/Duration Measurement set to zero or Volume/Duration Measurement IE is not present.\nWhen being instructed to remove a URR or the last PDR associated to a URR, the UP function shall stop its ongoing measurements for the URR and include a Usage Report in the PFCP Session Modification Response or in an additional PFCP Session Report Request if there are non-null measurements to report for the URR. When being instructed to remove the last PDR associated to a URR, the UP function shall keep the URR and reset any measurement for the URR.\nNOTE 5:\tA URR provisioned in a PFCP session can be provisioned/kept in the UP function without being associated with any PDR and the URR can be associated with a PDR in a later stage. The UP function will not remember any remaining quota and will consider the quota (if provisioned) as it was provisioned.\nWhen being instructed to deactivate a network resources usage measurement via the Inactive Measurement flag of the Measurement Information IE of the URR, the UP function shall stop measuring the network resources usage (against the volume/time/event threshold/quota) and store the current measurement counts which will be resumed when the URR is activated again. The UP function shall not generate a usage report upon the deactivation of the URR and it shall send a usage report during the period when the URR is deactivated for the following scenarios:\n-\tif the Quota Holding Time is expired and if the reporting trigger QUHTI is set;\n-\tif the Quota Validity Time is expired and if the reporting trigger QUVTI is set;\nNOTE 6:\tThe Quota Holding Time can have been started before the URR is deactivated or starts from the moment when the URR is deactivated since no quota will be consumed.\n-\tif it is the time for a periodic reporting and if the reporting trigger PERIO is set;\n-\tif it is required to send a usage report for this URR when a usage report is reported for a linked URR and if the reporting trigger LIUSA is set;\n-\tif it is required to send an immeditate report upon a query for the URR, or the URR is removed, dissociated from the last PDR;\nNOTE 7:\tMultiple usage reports can be required to be reported to the CP function when deleting a PDR that is the last one to be associated to multiple URRs.\n-\tif the User Plane Inactivity Timer is expired and if the reporting trigger UPINT is set.\nNOTE 8:\tThe User Plane Inactivity Timer can have been started before the URR is deactivated.\nThe CP function may request the UP function, in a PFCP Session Modification Request, to report its ongoing network resources measurement for one or multiple URRs of the PFCP session. In this case, the UP function shall:\n-\tgenerate usage report(s) (based on the existing definition of any URR(s) included in the PFCP Session Modification Request message before any update) for the URR(s) being queried and for any associated linked usage reports (see clause 5.2.2.4) for which there are non-null measurements to report;\n-\tinclude them in the PFCP Session Modification Response or in additional PFCP Session Report Request messages; and\n-\tproceed as specified above upon generating a usage report for a URR towards the CP function, with the following additions:\n-\tif the PFCP Session Modification Request includes the Update URR IE (for the URR being queried) with a Volume or Time Threshold, the UP function shall re-apply the threshold received in the request;\n-\totherwise, if a threshold and/or a quota had been set for the URR that is queried, since the usage report is not triggered due to the threshold being reached, the UP function shall adjust the threshold and/or quota by subtracting the time/volume reported in the usage report to determine when to generate the next report.\nNOTE 9:\tUpon reaching a threshold that was adjusted due to a URR query as specified above, the UP function re-applies then the threshold that was provisioned in the URR (i.e. not the value of the adjusted threshold).\nNOTE 10:\tThe CP function can query a URR without including a Volume or Time Threshold in the PFCP Session Modification Request e.g. when it needs to close a traffic volume/service container (see clause 5.2.3.10.3 of 3GPP TS 32.251 [17]).\nNOTE 11:\tThe CP function can query a URR including a Volume or Time Threshold in the PFCP Session Modification Request e.g. when it needs to close a CDR (see clause 5.2.3.10.3 of 3GPP TS 32.251 [17]). In such a case, the CP function can include the same threshold for the URR being queried in the Update URR IE in the PFCP Session Modification Request message to trigger the UP function to re-apply the threshold.\nNOTE 12:\tIt is up to the CP function to request the UP function to generate an immediate report (or not) as specified above when the CP function modifies a URR or any other rules of the PFCP session. As an exception, the UP function always generates an immediate report when being instructed to remove a URR.\nWhen additional usage reports need to be sent in additional PFCP Session Report Request messages, i.e. when not all usage reports can be included in the PFCP Session Modification Response message, the UP function shall indicate, in the PFCP Session Modification Response message, either:\n-\tthat more usage reports will follow, by setting the AURI flag to 1 in the Additional Usage Reports Information IE (see clause 8.2.91); or\n-\tthe total number of additional usage reports that will be sent in all the additional PFCP Session Report Request messages (i.e. that will be sent after the PFCP Session Modification/Deletion Response message), by setting this value in the Additional Usage Reports Information IE (see clause 8.2.91).\nIn the former case (i.e. if the UP function indicates in the PFCP Session Modification Response message that more usage reports will follow), the UP function shall indicate, in one of the additional PFCP Session Report Request message, the total number of additional usage reports to be sent after the PFCP Session Modification Response message, by setting this value in the Additional Usage Reports Information IE. In both cases, the UP function may set the AURI flag to 1 in every additional PFCP Session Report Request message but the last one, to indicate that more usage reports will follow.\nBesides, if the PFCP Session Modification Request included the Query URR Reference IE, usage reports sent in response to the query in the PFCP Session Modification Response and/or additional PFCP Session Report Request messages shall include the Query URR Reference IE set to the same value as received in the PFCP Session Modification Request.\nWhen the reporting trigger \"Envelope Closure\" is set in the corresponding Usage Reporting Rule, the UP function shall generate a usage report with the measurement of the time and/or volume as instructed in the Measurement Method:\n-\twhen the Inactivity Detection Time (if included) is expired;\n-\twhen detecting no usage for the first Base Time Interval if the Base Time Interval Type in the Time Quota Mechanism is set to CTP; or\n-\tat the end of each of base time interval if the Base Time Interval Type in the Time Quota Mechanism is set to DTP.\nNOTE 13:\tEvents (e.g. application detection information) are reported individually and independently from the usage report sent for envelope closure.\nWhen the UP function supports the NORP feature and if a URR is provisioned with a \"Number of Reports\" IE, the number of Usage Reports generated according to the Reporting Trigger(s) defined in the URR shall not be more than the value of \"Number of Reports\". If the UP function is requested to resume the measurement for an inactive URR, the UP function shall generate a maximum number of Usage Reports equal to the new value of the Number of Reports IE received in the Update URR if any, or equal to the value of the Number of Reports IE previously provisioned in the URR if any; if no Number of Reports IE was provisioned before, there is no limit on the number of reports to send. If the CP function provisions a \"Number of Reports\" IE together with a Monitoring Time and/or a Measurement Information where the \"Measurement Before QoS Enforcement' flag is set to \"1\" in a URR,  the UP function shall generate usage reports as required by the Monitoring Time and/or the Measurement Information where the \"Measurement Before QoS Enforcement' flag is set to \"1\" in a URR, which may lead UP function to generate more usage reports than the value of the \"Number of Reports\" IE.\nNOTE 14: \tIf the CP function expects to receive the exact number of usage reports as requested in the Number of Reports, it can abstain from provisioning a Number of Report IE together with a Monitoring Time and/or a Measurement Information where the \"Measurement Before QoS Enforcement' flag is set to \"1\" in a URR.\nAt the PFCP session termination, the UP function shall indicate to the CP function, in the PFCP Session Deletion Response, the resources that have been consumed for each URR that was provisioned in the PFCP session since the last usage report (respective to each URR). A CP function may indicate support of Additional Usage Reports in PFCP Session Deletion Request by setting the ARDR flag in the CP Function Features IE (see clause 8.2.58). When additional PFCP Session Report Request messages need to be sent:\n-\tthe UP function shall:\n-\tset the cause to \"More Usage Report to send\" in the PFCP Session Deletion Response;\n-\tinclude the Additional Usage Reports Information IE in PFCP Session Deletion Response with either the AURI flag set to \"1\" or indicating the total number of additional usage reports that will be sent in all the additional PFCP Session Report Request messages; as described above:\n-\tin the former case, the UP function shall indicate in one additional PFCP Session Report Request message the total number of additional usage reports that will be sent after the PFCP Session Deletion Response;\n-\tin both cases, the UP function may set the AURI flag to 1 in every additional PFCP Session Report Request message but the last one, to indicate that more usage reports will follow.\n-\tset the PSDBU flag to 1 in the last PFCP Session Report Request message.\n-\twhen the CP function receives a PFCP Session Deletion Response with the Cause set to \"More Usage Report to send\", the CP function shall not delete the PFCP session until it receives a PFCP Session Report Request message with the PSDBU flag set to \"1\" (that indicates this is the last report), or it has received the number of usage reports indicated in the Additional Usage Reports Information IE in PFCP Session Deletion Response, or until an implementation specific timer expires otherwise.\nAt the PFCP session termination, the UP function shall set the PURU flag to \"1\" in the PFCP Session Deletion Response if it has pending PFCP Session Report Request messages which have not been acknowledged yet. This indicates that the CP function should wait for some time before deleting the PFCP Session.\nUpon receiving the Usage Report from the UP function, the CP function may initiate PFCP Session Modification procedure as result of the communication with the PCRF or OCS, as described in clause 5.3 of 3GPP TS 23.214 [2], e.g. by:\n-\tmodifying the URR (e.g. changing the Volume/Time threshold, Volume/Time quota, disabling the usage monitoring);\n-\tcreating a new FAR (e.g. for redirect) and/or modifying the existing FAR; or\n-\tmodifying the QER (s) in the PFCP session.",
      "chunk_type": "definition",
      "cross_references": [
        "clause_5.4.11",
        "clause_5.2.2.4",
        "ts_32.251_clause_5.2.3.10.3",
        "clause_8.2.91",
        "clause_8.2.58",
        "ts_23.214_clause_5.3",
        "ts_32.251",
        "ts_23.214"
      ]
    },
    {
      "chunk_id": "ts_29.244_5.2.2.3.2",
      "section_id": "5.2.2.3.2",
      "section_title": "Credit pooling",
      "content": "When a URR is received with at least one Aggregated URRs IE included, the UP function:\n-\tshall calculate the traffic usage of the URR by applying the Multiplier(s) and aggregating the traffic usage from all URRs indicated in the Aggregated URRs IE(s), as specified in IETF RFC 4006 [16];\nNOTE 1:\tThe usage of this URR is calculated using the following formula:\nC1*M1 + C2*M2 + ... + Cn*Mn = U,where U is the usage counted by this URR, Cn is the usage counted by each aggregated URR (i.e. URR for each RG sharing the credit pool), and Mn is the multiplier for each aggregrated URR.\n-\tshall generate a report when the counted usage exceeds the threshold;\n-\tshall generate a report if the threshold is not provided, and stop packets forwarding (or only allow forwarding of some limited user plane traffic, based on operator policy in the UP function) for all Aggregated URRs when the counted usage exceeds the quota.\nNOTE 2:\tThe handling of the aggregated URR(s), e.g. generating a Usage Report upon the Reporting Trigger(s) is not impacted by handling of this URR for the Credit Pool.",
      "chunk_type": "requirement",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.244_5.2.2.3.3",
      "section_id": "5.2.2.3.3",
      "section_title": "Traffic Usage Reporting with Redundant Transmission",
      "content": "The following requirements shall apply when using Redundant Transmission on N3/N9 interfaces or Redundant Transmission at transport layer:\n-\tthe UPF shall not count redundant packets in Usage Reports (e.g. Volume Measurement), i.e. it shall count the traffic only once in Usage Reports;\n-\tthe SMF shall provide the quota for the non-redundant transmission (i.e. not counting redundant traffic).",
      "chunk_type": "requirement",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.244_5.2.2.4",
      "section_id": "5.2.2.4",
      "section_title": "Reporting of Linked Usage Reports to the CP function",
      "content": "The CP function may instruct the UP function to generate a Usage Report for a URR \"X\" when a Usage Report is generated for another URR \"Y\", by:\n-\tprovisioning the URR \"X\" with the Reporting Triggers IE set to Linked Usage Reporting; and\n-\tincluding in the URR \"X\" the Linked URR ID IE set to the URR ID of the URR \"Y\".\nNOTE 1:\tThis can be used by the CP function e.g. to request the UP function to report a Usage Report for an SDF (i.e. URR \"X\") when the UP function reports a Usage Report for a bearer (i.e. URR \"Y\").\nNOTE 2:\tThis can be used by the CP function e.g. to request the UP function to report a Usage Report for a RG (i.e. URR \"X\") when the UP function reports a Usage Report for a credit pool to which this RG pertain (i.e. URR \"Y\").\nWhen a usage report is to be generated for the URR \"Y\", regardless of the condition which triggers the report, the UP function shall also send a Usage Report for the URR \"X\" with the accumulated usage information, and the Usage Report Trigger IE set to Linked Usage Reporting.\nNOTE 3:\tThis also applies e.g. when an immediate usage report is requested for the URR \"Y\"within a PFCP session Modification Request.\nThe URR \"Y\" may be linked to more URRs than just URR \"X\".\nA RG level URR may be linked to IP-CAN bearer level URR as well as IP-CAN Session level URR to enable the CP function to generate a CDR on the different level. In such case, a URR \"X\" may link to more URRs than just URR \"Y\".",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.244_5.2.2.5",
      "section_id": "5.2.2.5",
      "section_title": "End Marker Reception Reporting",
      "content": "The CP function may request the UP function to report the End Marker reception during UE Triggered Service Request with, or without I-SMF insertion/change/removal procedures (see clauses 4.2.3.2 and 4.23.4.3 in 3GPP TS 23.502 [29]):\n-\tIf a new I-UPF is selected by the SMF to replace the old I-UPF, the SMF may provide two PDRs to the new I-UPF, e.g. PDR-1 for DL data from the PSA UPF, where the Apply Action IE in FAR-1 associated with PDR-1 is set to BUFF; and e.g. PDR-2 for receiving the buffered DL data from the old I-UPF, where the Apply Action IE in FAR-2 associated with PDR-2 is set to FORW. In this case, the SMF shall indicate to the new I-UPF to report the reception of the End Marker packet from the old I-UPF, by providing a URR related to PDR-2 with REEMR flag set to 1 in the Reporting Triggers IE, which is included in a Create URR IE within PFCP Session Establishment Request.\n-\tIf the SMF removes the old I-UPF but does not replace it with a new I-UPF, then the SMF may provide two PDRs to the PSA UPF, e.g. PDR-3 for receiving DL data across N6, where the Apply Action IE in FAR-3 associated with PDR-3 is set to BUFF; and e.g. PDR-4 for receiving the buffered DL data from the old I-UPF, where the Apply Action IE in FAR-4 associated with PDR-4 is set to FORW. The SMF shall indicate to the PSA UPF to report the reception of the End Marker packet from the old I-UPF, by providing a URR related to PDR-4 with REEMR flag set to 1 in the Reporting Triggers IE which is included in a Create URR IE within PFCP Session Modification Request.\nOnce the End Marker packet is received from the old I-UPF, the UPF (either new I-UPF or the PSA UPF) shall inform the SMF about this by sending the PFCP Session Report Request with the Usage Report IE containing the usage measurement as instructed in the URR, where EMRRE flag shall be set to 1 in a Usage Report Trigger IE and shall discard the End Marker packet(s). The SMF shall instruct the UPF to start sending the buffered DL data identified by PDR-1 or PDR-3 by sending a PFCP Session Modification Request message, where the Apply Action IE in the FAR-1/FAR-3 related to PDR-1/PDR-3 shall be changed from BUFF to FORW.",
      "chunk_type": "general",
      "cross_references": [
        "ts_23.502"
      ]
    },
    {
      "chunk_id": "ts_29.244_5.2.3.1",
      "section_id": "5.2.3.1",
      "section_title": "General",
      "content": "The CP function shall provision one and only one FAR for each PDR provisioned in a PFCP session. The FAR provides instructions to the UP function on how to process the packets matching the PDR.\nBy setting the appropriate flag(s) in the Apply Action IE in the FAR (see clause 8.2.26), the CP function may request the UP function to:\n-\tdrop the packets, by setting the DROP flag;\n-\tforward the packets, by setting the FORW flag and by provisioning the Forwarding Parameters providing instructions on how to forward the packets;\n-\tforward the MBS session data:\n-\tusing multicast transport, by setting the FSSM flag together with the MBS Multicast Parameters to forward the packets to a Low Layer source specific multicast address; and/or\n-\tusing unicast transport by setting the MBSU flag together with one or more MBS Unicast Parameters to forward and replicate the packets towards one or more GTP-U DL tunnels terminated at PSA UPF(s) and/or NG-RAN(s).\n-\tbuffer downlink or uplink packets by setting the BUFF flag and by optionally provisioning buffering parameters providing instructions on how to buffer the packets;\n-\tnotify the CP function about the arrival of a first DL packet being buffered, by setting the NOCP flag;\n-\tnotify the CP function about the first discarded DL packet for each service data flow identified by a PDR, when the CP function requests the UP function to buffer DL packets but the DL Buffering Duration or the DL Buffering Suggested Packet Count is exceeded, or when the CP function requests the UP function to drop DL packets and a packet is discarded directly, by setting the DDPN flag, if the UP function supports the DDDS feature;\n-\tnotify the CP function about first buffered DL packet for each service data flow identified by a PDR, by setting the BDPN flag, if the UP function supports the DDDS feature;\n-\tduplicate the packets, by setting the DUPL flag and by provisioning the Duplicating Parameters providing instructions on how to forward the duplicated packets;\n-\taccept or deny UE requests to join an IP multicast group (see clause 5.25), by setting the IPMA or IPMD flag;\n-\tduplicate the packets for redundant transmission (see clause 5.24.2), by setting the DFRT flag and by provisioning the Redundant Transmission Forwarding Parameters IE providing instructions on how to forward the duplicated packets for redundant transmission;\n-\teliminate duplicate packets used for redundant transmission (see clause 5.24.2), by setting the EDRT flag and by provisioning the Redundant Transmission Detection Parameters IE providing instructions on how to detect the duplicated packets for redundant transmission.\nThe CP function may request the UP function to duplicate packets that are to be dropped, forwarded or buffered.\nThe CP function may request the UP function to forward the packets and duplicate the packets for redundant transmission.\nThe CP function may request the UP function to forward the packets and eliminate duplicate packets used for redundant transmission.\nThe CP function may provision one or more FAR(s) per PFCP session. Different FARs of a same PFCP session may be provisioned with a different Apply Action flags, e.g. to enable the forwarding of downlink data packets for some PDRs while requesting to buffer downlink data packets for other PDRs.\nNOTE 1:\tThis is necessary to establish or release a partial set of radio access bearers in UTRAN.\nWhen instructed to buffer and notify the CP function about the arrival of a DL packet, the UP function shall notify the CP function, when it receives a first downlink packet for a given FAR (in EPC), or when it receives a first downlink packet for each QoS flow for a given FAR (in 5GC), by sending a PFCP Session Report Request including a Downlink Data Report IE identifying the PDR(s) for which downlink packets have been received.\nNOTE 2:\tReceipt of downlink packets on PDRs associated to different FARs can result in sending multiple PFCP Session Report Request messages for the same PFCP session.\nNOTE 3:\tReceipt of downlink packets pertaining to different QoS flows associated to the same FAR can result in sending multiple PFCP Session Report Request messages for the same PFCP session. The CP function identifies the QFI based on the PDR ID (when different PDRs are used for different QoS flows) or based on the Downlink Data Service Information IE.\nNOTE 4:\tThe end marker packet is not considered as DL data packet so that it does not trigger the UP function to notify the CP function about the arrival of a DL packet. The UP function can discard the received end marker packet(s) silently, when it is not possible to be forwarded.\nIf the UP function indicated support of Header Enrichment of UL traffic (see clause 8.2.25), the CP function may provide the UP function with header enrichment information for uplink traffic, by including one or more Header Enrichment IE(s) in the FAR. In this case, the UP function should use this information to enrich the header of the uplink traffic (e.g. HTTP header enrichment).\nNOTE 5:\tIt is not defined how to support SGi PtP tunnelling mechanisms other than based on UDP/IP encapsulation (such as PMIPv6/GRE, L2TP, GTP-C/U, see clause 4.3.17.8.3.3.3 of 3GPP TS 23.401 [14]) for Non-IP PDN connections.\nIf the UP function indicated support of PDI optimisation (see clause 8.2.25), the CP function may include in the forwarding parameters of the FAR the Linked Traffic Endpoint ID, if it is available, identifying the traffic Endpoint allocated for this PFCP session to receive the traffic in the reverse direction.\nNOTE 6:\tThis information can enable an SGW-U or PGW-U to correlate the UL and DL traffic (i.e. PDRs) sent over a same bearer.\nAssuming for instance a PFCP session provisioned in a PGW-U with:\n-\tan UL PDR 1 (for an S5/S8 bearer 1) with Source Interface \"Access\" associated to an UL Traffic Endpoint ID \"1\" (comprising the IP address, a local TEID and optionally a network instance),\n-\ta DL PDR 1 with Source Interface \"Core\", UE IP address and SDF 1,\nthe CP function sets the Linked Traffic Endpoint in the DL FAR 1 (associated to DL PDR 1) to the UL Traffic Endpoint \"1\", which allows the PGW-U to correlate the uplink and downlink PDRs for the same bearer (i.e. that UL PDR 1 associated to UL Traffic Endpoint \"1\", and DL PDR1 associated to DL FAR 1 with Linked Traffic Endpoint set to UL Traffic Endpoint \"1\", use the same S5/S8 bearer).\nNOTE 7:\tThe Linked Traffic Endpoint can possibly refer to a Traffic Endpoint in the reverse direction requested to be created in the same PFCP request.",
      "chunk_type": "definition",
      "cross_references": [
        "clause_8.2.26",
        "clause_5.25",
        "clause_5.24.2",
        "clause_8.2.25",
        "ts_23.401_clause_4.3.17.8.3.3.3",
        "ts_23.401"
      ]
    },
    {
      "chunk_id": "ts_29.244_5.2.4.1",
      "section_id": "5.2.4.1",
      "section_title": "General",
      "content": "A BAR provides instructions to control the buffering behaviour of the UP function for all the FARs of the PFCP session set with an Apply Action parameter requesting the packets to be buffered and associated to this BAR.\nThe CP function may create a BAR for a PFCP session and associate it to the FAR(s) of the PFCP session in a PFCP Session Establishment Request or a PFCP Session Modification Request to request the UP function to apply a specific buffering behaviour for packets requested to be buffered and associated to this BAR.\nThe CP function may modify the following buffering instructions provided in a BAR as follows:\n-\tthe Downlink Data Notification Delay in a PFCP Session Modification Request (for EPC); or\n-\tthe Downlink Data Notification Delay (for EPC), DL Buffering Duration with optional Extended DL Buffering Notification Policy, and/or DL Buffering Suggested Packet Count in a PFCP Session Report Response message or PFCP Session Modification Request.\nNOTE:\tThe CP function needs to provision a (possibly empty) BAR and associate it to the FARs of the PFCP session when establishing or modifying the PFCP session to be able to modify the BAR in a PFCP Session Report Response.\nIf the UP Function has indicated support of the feature UL/DL Buffering Control (UDBC), the CP function may provide the Suggested Buffering Packet Count IE in a BAR which is created during a PFCP Session Establishment procedure or a PFCP Session Modification procedure, and the CP function may modify it in a subsequent PFCP Session Modification Request, and/or a PFCP Session Report Response message. The same BAR may be associated with all the FARs in a PFCP session to indicate that all Service Data Flows in the PFCP Session share the same buffer in the UP function for the PFCP Session.\nIf the SGW-U has indicated the support of the MT-EDT feature, the CP function may provide the MT-EDT (Mobile Terminated Early Data Transmission) Control Information IE in a BAR when it is created and modified, to request the SGW-U to report the sum of DL Data Packets Size in byte when sending Downlink Data Report.\nIf the UPF has indicated the support of the MT-SDT feature, based on local policy and/or an indication from the AMF, e.g., the RAT type of REDCAP or the CN based MT handling indication (i.e. the cnBasedMt flag as specified in 3GPP TS 29.502 [50]), the SMF may provide the MD-SDT (Mobile Terminated Small Data Transmission) Control Information IE in a BAR when it is created and modified, to request the UPF to report the sum of DL Data Packets Size in byte per QoS flow when sending Downlink Data Report.\nIf the UP function supports Extended DL Buffering Notification Control (EDBNC) the UP function shall set the EDBNC feature flag in the UP function Features IE (see clause 8.2.25). If so, the CP may provide the Extended DL Buffering Notification Policy IE in addition to the Buffering Duration IE. If the EDBN bit is set to set to \"1\", the UP function shall send DL packet notifications to report the arrival of the first buffered DL packet for each QoS flow for a given FAR to the CP function for the duration indicated by the DL Buffering Duration.\nIn this release of the specification, at most one BAR may be created per PFCP session.",
      "chunk_type": "definition",
      "cross_references": [
        "clause_8.2.25",
        "ts_29.502"
      ]
    },
    {
      "chunk_id": "ts_29.244_5.2.4.2",
      "section_id": "5.2.4.2",
      "section_title": "Provisioning of Buffering Action Rule in the UP function",
      "content": "The CP function may provision the following buffering parameters in a BAR:\n-\tFor EPC, the Downlink Data Notification Delay IE, to request the UP function to delay the sending of a PFCP Session Report Request, between receiving a downlink data packet and notifying the CP function about it, if the UP function indicated support of the Downlink Data Notification Delay parameter (see clause 8.2.28);\n-\tthe DL Buffering Duration IE, to request the UP function to buffer the downlink data packet for an extended duration without sending any further notification to the CP function about the arrival of DL data packets, if the UP function indicated support of the DL Buffering Duration parameter in PFCP Session Report Response feature and/or support of the DL Buffering Duration parameter in PFCP Session Modification Request feature (see DLBD and DBDM features in clause 8.2.25);\n-\tthe DL Buffering Suggested Packet Count in PFCP Session Report Response, to request the UP function to buffer the suggested number of downlink data packets, when extended buffering of downlink data packet is required in the UP function. The DL Buffering Suggested Packet Count may also be included in PFCP Session Modification Request if the UP function indicated support of the DL Buffering Suggested Packet Count parameter in PFCP Session Modification Request feature (see DBDM feature in clause 8.2.25);\n-\tthe Suggested Buffering Packet Count IE if the UP Function has indicated support of the feature UDBC, to indicate the number of packets (including both uplink or downlink) that the CP function suggests to be buffered in the UP function, until it receives new instructions from the CP function, e.g. when the new Quota is granted.\n-\tExtended DL Buffering Notification Policy IE if the UP Function has indicated support of the feature EDBNC, to indicate with the EDBN bit set to \"1\" that the UP function when buffering downlink data packets for the duration indicated in DL Buffering Duration IE shall send notifications to the CP function about the arrival of the first buffered DL packet for each QoS flow for a given FAR.\nThe UP function shall stop applying the DL Buffering Duration and DL Buffering Suggested Packet Count parameters and shall delete these parameters from the BAR (without explicit request from the CP function) when extended buffering of downlink data packets ends in the UP function.\nNOTE:\tThe CP function will provide the DL Buffering Duration and DL Buffering Suggested Packet Count parameters again when re-invoking extended buffering of downlink data packets.\nThe UP function shall stop applying buffering when new instruction is received from the CP function. The buffered packets shall be either dropped or forwarded following the packet forwarding model specified in clause 5.2.1 and taking into consideration that the buffered Packets have been already processed earlier.",
      "chunk_type": "general",
      "cross_references": [
        "clause_8.2.28",
        "clause_8.2.25",
        "clause_5.2.1"
      ]
    },
    {
      "chunk_id": "ts_29.244_5.2.4.3",
      "section_id": "5.2.4.3",
      "section_title": "Applying DL Buffering Duration in the CP function",
      "content": "When the UP function supports being configured with extended DL data buffering for a given APN/DNN and/or S-NSSAI, as an implementation option for a CP function, if the extended buffering is requested by the AMF or MME/SGSN by provisioning an Estimated Maximum Wait time for 5GS or a DL Buffering Duration for EPS respectively, and when the CP function wishes to receive additional DL Data Notification reports if the UP function receives subsequent DL data over another QoS flow or EPS Bearer Context, the CP function may:\n-\tkeep the Extended Buffering time (derived from the Estimated Maximum Wait time for 5GS) or the DL Data Buffer Expiration Time (derived from the Buffering Duration for EPS) without provisioning the same to the UP function, and\n-\tkeep setting NOCP to \"1\" to receive any potential subsequent Downlink Data Notification from UPF.\nIf the CP function does so, upon the expiry of the Extended Buffering time or the DL Data Buffer Expiration Time and if the user plane connection is still not established (to enable the UP function to forward the buffered DL data), the CP function may request the UP function to drop the buffered data packets by setting \"DROBU\" to 1 in the PFCP Session Modification Request message, so that the UP function will start buffering any further DL data packets and send a new DL data report of the arrival of such a first DL data packet.",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.244_5.2.5.1",
      "section_id": "5.2.5.1",
      "section_title": "General",
      "content": "The CP function shall provision QER(s) for a PFCP session in a PFCP Session Establishment Request or a PFCP Session Modification Request to request the UP function to perform QoS enforcement of the user plane traffic.",
      "chunk_type": "definition",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.244_5.2.5.2",
      "section_id": "5.2.5.2",
      "section_title": "Provisioning of QoS Enforcement Rule in the UP function",
      "content": "The CP function may request the UP function to perform the following QoS enforcement actions in a QER:\n-\tGating Control, as specified in clause 5.4.3;\n-\tQoS Control, i.e. MBR, GBR or Packet Rate enforcement, as specified in clause 5.4.4;\n-\tDL flow level marking for application detection, as specified in clause 5.4.5;\n-\tSCI (Service Class Indicator) marking for service identification for improved radio utilisation for GERAN, as specified in clause 5.4.12;\n-\tfor 5GC reflective QoS for uplink traffic.",
      "chunk_type": "general",
      "cross_references": [
        "clause_5.4.3",
        "clause_5.4.4",
        "clause_5.4.5",
        "clause_5.4.12"
      ]
    },
    {
      "chunk_id": "ts_29.244_5.2.5.3",
      "section_id": "5.2.5.3",
      "section_title": "Reflective QoS (for 5GC)",
      "content": "The 5GS may support Reflective QoS functionality (see clauses 5.7.5 in 3GPP TS 23.501 [28]).\nWhen the 5GC determines to use Reflective QoS for a specific SDF, the SMF shall set the Reflective QoS Indication (RQI) bit to 1 in the QER associated to the DL PDR for this SDF in a PFCP Session Establishment Request or PFCP Session Modification Request message.\nThe SMF may also provision the UPF to perform uplink QoS flow binding verification for the specific SDF as specified in clause 5.4.2.\nWhen the 5GC determines to no longer use Reflective QoS for a specific SDF, the SMF shall request the UPF to stop applying Reflective QoS for the corresponding downlink traffic, e.g. by setting the Reflective QoS Indication (RQI) bit to 0 in the QER that is associated to the DL PDR or by dissociating the QER from the DL PDR (as appropriate) in a PFCP Session Modification Request message.\nIf the SMF had provisioned the UPF to perform uplink QoS flow binding verification for the specific SDF, after an operator configurable time, the SMF shall update the UL PDR(s) to no longer perform uplink QoS flow binding verification for the corresponding uplink traffic and QFI.",
      "chunk_type": "requirement",
      "cross_references": [
        "clause_5.4.2",
        "ts_23.501"
      ]
    },
    {
      "chunk_id": "ts_29.244_5.2.6",
      "section_id": "5.2.6",
      "section_title": "Combined SGW/PGW Architecture",
      "content": "The usage of a combined SGW/PGW remains possible in a deployment with separated control and user planes, see clause 4.2.2 of 3GPP TS 23.214 [2]. This is enabled by supporting a combined Sxa/Sxb interface with a common packet forwarding model, message and parameter structure for non-combined and combined cases.\nThe following additional requirements shall apply to a combined Sxa/Sxb interface between a combined SGW/PGW-C and a combined SGW/PGW-U:\n-\tall the functionalities specified for Sxa and Sxb shall be supported, possibly concurrently, over a combined Sxa/Sxb association;\n-\ta single PFCP session may be setup to support both the functionalities of an SGW-U and PGW-U;\n-\tthe CP function may provision PDRs, QERs, URRs, FARs (possibly with a buffering instruction) and BAR, possibly concurrently, for the same PFCP session;\n-\tthe CP function may provision concurrently parameters in a message or for the PFCP session that are applicable to Sxa and Sxb.",
      "chunk_type": "general",
      "cross_references": [
        "ts_23.214_clause_4.2.2",
        "ts_23.214"
      ]
    },
    {
      "chunk_id": "ts_29.244_5.2.7.1",
      "section_id": "5.2.7.1",
      "section_title": "General",
      "content": "The UP function (i.e. the UPF) shall support the Multi-Access Rule (MAR) if it supports the ATSSS feature (see MPTCP, ATSSS-LL and MPQUIC flags in UP Function Features, Table 8.2.25-1).\nThe CP function (i.e. the SMF) shall provision in the UP function acting as the PDU Session Anchor (PSA) and supporting the ATSSS feature, one and only one MAR for every downlink PDR corresponding to non-GBR traffic of a PFCP session that is established for a Multi-Access (MA) PDU session.\nThe CP function (i.e. the SMF) shall also provision in the UP function acting as the PDU Session Anchor (PSA) and supporting the ATSSS feature, one and only one MAR for every downlink PDR corresponding to GBR traffic of a PFCP session that is established for a Multi-Access (MA) PDU session, if the Steering Mode is \"Redundant\".\nThe MAR provides instructions to the UP function on how to forward the packets matching the PDR over 3GPP and non-3GPP accesses. See clauses 5.8.5.8 and 5.32.8 in 3GPP TS 23.501 [28]. The 3GPP access and the non-3GPP access may both be connected to the 5GC, or they may be connected to the 5GC and EPC (see clause 5.20.1).\nIn an MAR, the CP function (i.e. the SMF) shall:\n-\tinstruct the UPF which traffic steering functionality to use, i.e. either MPTCP, ATSSS-LL or MPQUIC, using the Steering Functionality IE (see clause 8.2.124);\n-\tset the Steering Mode to instruct how the packets shall be distributed across 3GPP and non-3GPP accesses, e.g. \"Active-Standby\", \"Smallest Delay\", \"Load Balancing\", \"Priority-based\" and \"Redundant\" (see clause 8.2.125);\n-\tprovision access specific forwarding action information including:\n-\ta FAR ID which control the packets forwarding either to 3GPP access or non-3GPP access;\n-\ta Weight to indicate the proportion of traffic to be forwarded by the given FAR when the Steering Mode is set to \"Load Sharing\";\n-\ta Priority to indicate at which condition the traffic is to be forwarded by the given FAR when the Steering Mode is set to \"Active-Standby\" or \"Priority-Based\";\n-\ta list of URR IDs to enable the SMF to request separate usage report for different accesses.\nNOTE 1:\tHow the SMF determines the steering functionality and steering mode is specified in clause 5.32.2 of 3GPP TS 23.501 [28].\nAs specified in clause 5.32.8 of 3GPP TS 23.501 [28], in an MAR, the CP function may:\n-\tprovision Threshold values, including a Round Trip Time (RTT) and/or a Packet Loss Rate (PLR), if the Steering Mode is Load Balancing with fixed split percentages, Priority-based, or Redundant; if the Steering Mode is Redundant, either a (maximum) RTT or a (maximum) PLR may be provided, but not both; or\n-\tprovision the Priority IE in access specific forwarding action information set to \"Primary\" or \"Secondary\" if the Steering Mode is Redundant, to indicate that an access is a primary access or a secondary access;\n-\tinclude a Steering Mode Indicator to indicate that the default steering parameters provided in the Steering Mode may be adjusted:\n-\tset autonomous load-balance flag to allow the UPF to adjust the traffic steering based on its own decisions when the Steering Mode is Load Balancing; or\n-\tset UE-assistance flag to allow the UPF to adjust the traffic steering based on the UE Assistance Data from UE when the Steering Mode is Load Balancing.\nNOTE 2:\tThe autonomous load-balance flag and the UE-assistance flag can not be set to \"1\" at the same time.\nThe CP function may set the Steering Mode \"Redundant\" only if the steering functionality is not set to \"ATSSS-LL\" and if the UP function supports the REDSM (Redundant Steering Mode) feature (see clause 8.2.25).\nThe CP function may provision one or more MAR(s) (for different PDRs) per PFCP session. Different MARs of a same PFCP session may be provisioned with a different steering functionality and/or a different steering mode. Different MARs of a same PFCP session may be associated with the same FAR(s).\nIf a UE indicates it supports MPTCP and ATSSS-LL, and if the network determines to apply both MPTCP functionality and ATSSS-LL functionality for the UE's PDU session, the CP function shall provision separate downlink PDRs for MPTCP traffic and for Non-MPTCP traffic. Correspondingly, different MARs shall be provisioned and associated with the separate downlink PDRs. The steering functionality shall be set to ATSSS-LL for the MAR associated with the downlink PDR for non MPTCP traffic.\nIf a UE indicates it supports MPQUIC and ATSSS-LL, and if the network determines to apply both MPQUIC functionality and ATSSS-LL functionality for the UE's PDU session, the CP function shall provision separated downlink PDRs for MPQUIC traffic and for Non-MPQUIC traffic. Correspondingly, different MARs shall be provisioned and associated with the separate downlink PDRs. The steering functionality shall be set to ATSSS-LL for the MAR associated with the downlink PDR for non-MPQUIC traffic.\nIf a UE indicates it supports MPTCP, MPQUIC and ATSSS-LL, and if the network determines to apply all MPTCP functionality, MPQUIC functionality and ATSSS-LL functionality for the UE's PDU session, the CP function shall provision separated downlink PDRs for MPTCP traffic, MPQUIC traffic and for non-MPQUIC and non-MPTCP traffic. Correspondingly, different MARs shall be provisionsed and associated with the separated downlink PDRs. The steering functionality shall be set to ATSSS-LL for the MAR associated with the downlink PDR for non-MPTCP traffic and non-MPQUIC traffic.\nThe UP function shall distribute the downlink traffic across the two access networks (and the two N3/N9, S5-U/S8-U or S2b-U tunnels) according to the instructions received in the MAR and feedback information received from the UE via the user plane (e.g. access network Unavailability or Availability reports for ATSSS-LL received by PMF, see 3GPP TS 24.193 [59]), as specified in clause 5.32.8 of 3GPP TS 23.501 [28].\nIf the autonomous load-balance is set in the Steering Mode Indicator, the Weight shall be treated as the default percentages, and the UPF may autonomously determine its own percentages for traffic splitting to maximize the aggregated bandwidth in the downlink direction. If the UE-assistance is set in the Steering Mode Indicator, the UE may inform the UPF on how it decided to distribute the UL traffic of the matching SDF.",
      "chunk_type": "definition",
      "cross_references": [
        "clause_5.20.1",
        "clause_8.2.124",
        "clause_8.2.125",
        "ts_23.501_clause_5.32.2",
        "ts_23.501_clause_5.32.8",
        "clause_8.2.25",
        "ts_24.193_clause_5.32.8",
        "table_8.2.25-1",
        "ts_23.501",
        "ts_24.193"
      ]
    },
    {
      "chunk_id": "ts_29.244_5.2.8.1",
      "section_id": "5.2.8.1",
      "section_title": "General",
      "content": "The CP function may provision SRR(s) for a PFCP session in a PFCP Session Establishment Request or a PFCP Session Modification Request to request the UP function to detect and report events for a PFCP session that are not related to specific PDRs of the PFCP session or that are not related to traffic usage measurement.\n-\tChange of 3GPP or non-3GPP access availability, for an MA PDU session (see clause 5.20.4.2).\n-\tPer QoS flow QoS Monitoring and Reporting, as specified in clauses 5.45 and 5.33.3.2 of 3GPP TS 23.501 [28].\n-\tPer QoS Flow Traffic Parameter Measurement Report, as specified in clause 5.8.5.11 of 3GPP TS 23.501 [28].",
      "chunk_type": "definition",
      "cross_references": [
        "clause_5.20.4.2",
        "ts_23.501_clause_5.8.5.11",
        "ts_23.501"
      ]
    },
    {
      "chunk_id": "ts_29.244_5.2.8.2.1",
      "section_id": "5.2.8.2.1",
      "section_title": "General",
      "content": "When provisioning an SRR, the CP function shall provide control information identifying the events that the UPF is requested to detect and report. If Direct Reporting of QoS monitoring events to Local NEF or AF is supported and required, the CP function shall also provide Direct Reporting Information in the SRR (see clause 5.33.5).\nThe CP function may modify an SRR in the PFCP Session Modification Request message.\nThe CP function may request the UP function to stop the detection and reporting of specific events by removing the SRR or, if the SRR is used to control different types of events, by updating the SRR with a control information IE for the events to stop with a null length. When so instructed, the UP function shall stop detecting and reporting the corresponding events.",
      "chunk_type": "definition",
      "cross_references": [
        "clause_5.33.5"
      ]
    },
    {
      "chunk_id": "ts_29.244_5.2.8.3.1",
      "section_id": "5.2.8.3.1",
      "section_title": "General",
      "content": "When detecting that a provisioned event to report occurs, the UP function shall generate a Session Report for the related SRR and send it to the CP function by initiating the PFCP Session Report procedure, unless Direct Reporting of QoS monitoring events to Local NEF or AF applies (see clause 5.33.5).\nUpon generating a session report for an SRR towards the CP function or towards the Local NEF or AF if Direct Reporting of QoS monitoring event applies, the UP function shall continue to apply all the provisioned SRR(s), until getting any further instruction from the CP function.",
      "chunk_type": "definition",
      "cross_references": [
        "clause_5.33.5"
      ]
    },
    {
      "chunk_id": "ts_29.244_5.2.9",
      "section_id": "5.2.9",
      "section_title": "Handling of Rules that cannot be activated",
      "content": "The CP function shall indicate support of the Partial Success (PSUCC) feature (see clause 8.2.58) during the PFCP association setup or update procedure, if it supports PFCP session establishment or modification with Partial Success, i.e. with the UP function partially accepting a PFCP session establishment or modification request when some rules requested to be created or modified cannot be applied, e.g. when a pre-defined rule name or pre-defined rule ID is not configured in the UP function.\nIf the CP function indicated support of the the PSUCC feature, and if this feature is also supported by the UP function, the UP function should partially accept a PFCP session establishment or modification request, if possible, even when it fails to create or modify one or more rules. In such a case, the UP function shall set the cause to \"Request partially accepted\" in the response and include the Partial Failure Information IE identifying the rules that the UP function could not activate and the cause of the failure.\nNOTE:\tPartial acceptance of a request is not possible in some cases, when the failure to activate a rule would result in a PFCP session state that is not consistent, e.g. if no PDR or FAR would end up being activated for the PFCP session. Details on the conditions when a request can be partially accepted or not are left to UP function implementation.\nUpon receipt of a PFCP session establishment or modification response indicating a partial acceptance of the request, the CP function shall consider that not all rules were successfully activated in the UP function and determine those which failed to be activated based on the Partial Failure Information IE in the response.\nIf the CP function or the UP function does not support the PSUCC feature, the UP function shall reject a PFCP session establishment or modification request if at least one rule fails to be applied.",
      "chunk_type": "requirement",
      "cross_references": [
        "clause_8.2.58"
      ]
    },
    {
      "chunk_id": "ts_29.244_5.3.1",
      "section_id": "5.3.1",
      "section_title": "General",
      "content": "Forwarding of user plane data between the CP and UP functions may take place as part of the following scenarios (see 3GPP TS 23.214 [2] for EPC and 3GPP TS 23.501 [28] for 5GC).\nTable 5.3.1-1: Data forwarding scenarios between the CP and UP functions\nScenario description\nData forwarding direction\nFor EPC applicable to\nFor 5GC applicable to\n1\nForwarding of user-plane packets between the UE and the CP function.\nUP to CP function\nCP to UP function\nPGW\nUPF to SMF\nSMF to UPF\n2\nForwarding of packets between the CP function and the external PDN (over SGi) / DN (over N6).\nUP to CP function\nCP to UP function\nPGW\nUPF to SMF\nSMF to UPF\n3\nForwarding of packets subject to buffering in the CP function.\nUP to CP function\nCP to UP function\nSGW\nUPF to SMF\nSMF to UPF\n4\nForwarding of End Marker Packets constructed by the CP function to a downstream node.\nCP to UP function\nSGW, PGW\nSMF to UPF\n5\nForwarding of user data using Control Plane CIoT 5GS Optimisation\nUP to CP function\nCP to UP function\n-\nUPF to SMF\nSMF to UPF\nUser plane packets shall be forwarded between the CP and UP functions by encapsulating the user plane packets using GTP-U encapsulation (see 3GPP TS 29.281 [3]).\nFor forwarding data from the UP function to the CP function, the CP function shall provision PDR(s) per PFCP session context, with the PDI identifying the user plane traffic to forward to the CP function and with a FAR set with the Destination Interface \"CP function side\" and set to perform GTP-U encapsulation and to forward the packets to a GTP-u F-TEID uniquely assigned in the CP function per PFCP session and PDR. The CP function shall then identify the PDN connection and the bearer to which the forwarded data belongs by the F-TEID in the header of the encapsulating GTP-U packet.\nFor forwarding data from the CP function to the UP function, the CP function shall provision one or more PDR(s) per PFCP session context, with the PDI set with the Source Interface \"CP function side\" and identifying the GTP-u F-TEID uniquely assigned in the UP function per PDR, and with a FAR set to perform GTP-U decapsulation and to forward the packets to the intended destination. URRs and QERs may also be configured.\nFor EPC PFCP session contexts may correspond to individual PDN connections, TDF sessions, or standalone sessions not tied to any PDN connection or TDF session used e.g. for forwarding RADIUS, Diameter or DHCP signalling between the PGW-C and the PDN or for forwarding End Marker packets from the PGW-C or SGW-C to a downstream SGW-U or eNodeB.\nFor 5GC PFCP session contexts may correspond to individual PDU sessions or standalone sessions not tied to any PDU sessions used e.g. for forwarding RADIUS, Diameter or DHCP signalling between the SMF and the DN or for forwarding End Marker packets from the SMF to a downstream UPF or NG-RAN.\nFor EPC the CP function may establish one Sx-u tunnel per:\n-\tbearer of PDN connection e.g. for the data forwarding scenarios 1 and 3;\n-\tUP function or PDN e.g. for the data forwarding scenario 1, 2 and 4.\nFor 5GC the CP function may establish one N4-u tunnel per:\n-\tPDU session e.g. for the data forwarding scenarios 1, 3 and 5;\n-\tUP function or DN e.g. for the data forwarding scenario 1, 2 and 4.\nRequirements for forwarding packets subject to buffering in the CP function between the UP and CP functions (scenario 3) are further specified in clause 5.3.3.\nRequirements for sending End Marker packets (scenario 4) are further specified in clause 5.3.2.\nRequirements for forwarding user data using Control Plane CIoT 5GS Optimisation between the UP and CP functions (scenario 5) are further specified in clause 5.3.5.",
      "chunk_type": "definition",
      "cross_references": [
        "clause_5.3.3",
        "clause_5.3.2",
        "clause_5.3.5",
        "ts_23.501_table_5.3.1-1",
        "ts_23.214",
        "ts_23.501",
        "ts_29.281"
      ]
    },
    {
      "chunk_id": "ts_29.244_5.3.2",
      "section_id": "5.3.2",
      "section_title": "Sending of End Marker Packets",
      "content": "The construction of End Marker packets may either be done in the CP function or UP function, based on network configuration, as specified in clause 5.8 of 3GPP TS 23.214 [2] for EPC and in clause 5.8.2.9 of 3GPP TS 23.501 [28] for 5GC. The support of End Marker packets by the UP function is optional.\nA UP function complying with this release of the specification shall support constructing End Marker packets in the UP function and shall indicate so to the CP function by setting the EMPU flag in the UP Function Features (see clause 8.2.25).\nA CP function complying with this release of the specification should request the UP function to construct End Marker packets. If so, the CP function shall request the UP function to construct and send End Marker packets by sending a Session Modification Request including FAR(s) with the new downstream F-TEID and with the SNDEM (Send End Marker Packets) flag set.\nFor End Marker packets constructed in the CP function, the CP function shall:\n-\testablish (once) one standalone PFCP session not tied to any PDN connection, per the UP function, for forwarding End Marker packets, and provision the UP function to perform one GTP-U decapsulation and to forward the resulting packets without any further change towards the destination IP address of these packets;\n-\tconstruct the GTP-U End Marker packets, with the destination IP address and TEID set according to the old F-TEID value, and with a source IP address set according to the UP function's F-TEID value (e.g. S1 or Iu SGW F-TEID or NG-u UPF F-TEID);\n-\tencapsulate the constructed GTP-U End Marker packets in GTP-U packets according to the principles specified in clause 5.3.1 for data forwarding between the CP function and the UP function, and send them towards the F-TEID assigned in the UP function for the above PFCP session, after receipt of the PFCP Session Modification Response indicating that the UP function has switched to a new F-TEID.\nUpon receipt of a PFCP Session Modification Request modifying the F-TEID in the Outer Header Creation of a FAR, the UP function shall send the Response message only after having switched to the new F-TEID.",
      "chunk_type": "general",
      "cross_references": [
        "ts_23.214_clause_5.8",
        "ts_23.214_clause_5.8.2.9",
        "clause_8.2.25",
        "clause_5.3.1",
        "ts_23.501_clause_5.8.2.9",
        "ts_23.214",
        "ts_23.501"
      ]
    },
    {
      "chunk_id": "ts_29.244_5.3.3.1",
      "section_id": "5.3.3.1",
      "section_title": "General",
      "content": "The following requirements shall apply to the data forwarding scenario 3 of Table 5.3.1-1 in addition to the requirements specified in clause 5.3.1.\nThe CP function shall establish one Sx-u tunnel per bearer of a PDN connection / one N4-u tunnel per PDU session when applying the data forwarding scenario 3.",
      "chunk_type": "definition",
      "cross_references": [
        "clause_5.3.1",
        "table_5.3.1-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_5.3.3.2",
      "section_id": "5.3.3.2",
      "section_title": "Forwarding of Packets from the UP Function to the CP Function",
      "content": "For EPC, regardless of whether the downlink traffic received by the UP function consists of T-PDUs (i.e. user data packet, see 3GPP TS 29.281 [3]) for a combined SGW/PGW-U, or G-PDUs (i.e. T-PDU plus a GTP-U header) for a SGW-U, the downlink traffic shall be forwarded from the UP function to the CP function as G-PDUs with the GTP-U header set to the IP address and TEID uniquely assigned in the CP function for the Sx-u tunnel corresponding to the bearer of the PDN connection.\nNOTE 1:\tAn SGW-U receiving G-PDUs from an S5/S8 bearer forwards the same G-PDUs towards the SGW-C but with the IP address and TEID in the GTP-U header changed to the SGW-C IP address and TEID of the corresponding Sx-u tunnel.\nFor 5GC, regardless of whether the downlink traffic received by the UP function consists of T-PDUs (i.e. user data packet, see 3GPP TS 29.281 [3]) for an PSA-UPF, or G-PDUs (i.e. T-PDU plus a GTP-U header) for an I-UPF, the downlink traffic shall be forwarded from the UP function to the CP function as G-PDUs with the GTP-U header set to the IP address and TEID uniquely assigned in the CP function for the N4-u tunnel corresponding to the PDU session of the PDN connection.\nNOTE 2:\tAn I-UPF receiving G-PDUs from an N9 GTPU tunnel forwards the same G-PDUs towards the SMF but with the IP address and TEID in the GTP-U header changed to the SMF IP address and TEID of the corresponding N4-u tunnel.\nTo forward the user plane data to be buffered in the CP function from the UP function, the CP function shall provision:\n-\tfor EPC, a PDR per bearer of the PDN connection, matching the received downlink user plane packets and for a (non-combined) SGW-U, with the field Outer Header Removal Description in the Outer Header Removal IE set to \"0\" or \"1\" for IPv4 or IPv6 respectively;\n-\tfor 5GC, a PDR per PDU session, matching the received downlink user plane packets and for an I-UPF, with the field Outer Header Removal Description in the Outer Header Removal IE set to \"0\" or \"1\" for IPv4 or IPv6 respectively;\n-\ta FAR instructing the UP function to forward the received downlink data to the CP function, with the field Outer Header Creation Description in the Outer Header Creation set to \"0\" or \"1\".\nNOTE 3:\tThe PDR can be provisioned in the UP function before applying data forwarding to the CP function.\nFor EPC, G-PDUs sent from the UP function to the CP function over the Sx-u tunnel shall include any GTP-U extension header(s):\n-\tpossibly received by the UP function over the S5/S8 bearers and stored during the Outer Header Removal;\n-\tpossibly created by the UP function as part of a QER rule.\nFor 5GC, G-PDUs sent from the UP function to the CP function over the N4-u tunnel shall include any GTP-U extension header(s):\n-\tpossibly received by the UP function over the N9 PDU sessions and stored during the Outer Header Removal;\n-\tpossibly created by the UP function as part of a QER rule.",
      "chunk_type": "general",
      "cross_references": [
        "ts_29.281"
      ]
    },
    {
      "chunk_id": "ts_29.244_5.3.3.3",
      "section_id": "5.3.3.3",
      "section_title": "Forwarding of Packets from the CP Function to the UP Function",
      "content": "Likewise, when subsequently sending the downlink traffic buffered in the CP function back to the UP function, the downlink traffic shall be forwarded:\n-\tfor EPC, over Sx-u as G-PDUs with the GTP-U header set to the IP address and TEID uniquely assigned in the UP function for the Sx-u tunnel set up for the corresponding bearer of the PDN connection;\n-\tfor 5GC, over N4-u as G-PDUs with the GTP-U header set to the IP address and TEID uniquely assigned in the UP function for the N4-u tunnel set up for the corresponding PDU session.\nG-PDUs sent over Sx-u / N4-u shall include GTP-U extension header(s) possibly received earlier from the UP function.\nTo forward the user plane data from the CP function to the UP function, the CP function shall provision:\na PDR per bearer of the PDN connection (for EPC) or per PDU session (for 5GC), with an IP address and TEID uniquely assigned in the UP function for the Sx-u / N4-u tunnel, and with the field Outer Header Removal Description in the Outer Header Removal IE set to \"0\" or \"1\";\n-\ta FAR enabling the UP function to forward the received downlink data from the CP function towards the RAN, with the field Outer Header Creation Description in the Outer Header Creation set to \"0\" or \"1\".\nG-PDUs sent from the UP function towards the RAN shall include GTP-U extension header(s) possibly received from the CP function.",
      "chunk_type": "requirement",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.244_5.3.4.1",
      "section_id": "5.3.4.1",
      "section_title": "General",
      "content": "The following requirements shall apply to the data forwarding scenario 1 and 2 of Table 5.3.1-1, when establishing one PFCP-u tunnel per UP function or PDN, in addition to the requirements specified in clause 5.3.1.",
      "chunk_type": "definition",
      "cross_references": [
        "clause_5.3.1",
        "table_5.3.1-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_5.3.4.2",
      "section_id": "5.3.4.2",
      "section_title": "Forwarding of Packets from the UP Function to the CP Function",
      "content": "Regardless of whether the traffic received by the UP function consists of T-PDUs (i.e. user data packet, see 3GPP TS 29.281 [3]) from SGi / N6 or G-PDUs (i.e. T-PDU plus a GTP-U header) from the UE, the traffic shall be forwarded from the UP function to the CP function as G-PDUs with the GTP-U header set to the IP address and TEID uniquely assigned in the CP function for the PFCP-u tunnel corresponding to the UP function or PDN.\nTo forward the user plane data to from the UP function, the CP function shall provision:\n-\tfor supporting data forwarding scenario \"1\" as specified in clause 5.3.1, an additional PDR for a PFCP session established for a PDN connection or a PDU session which requires such data forwarding, matching the received user plane packets from uplink direction. The Outer Header Removal IE shall not be present if the complete G-PDU is required to be forwarded, otherwise the Outer Header Removal IE shall be present and set to \"0\" or \"1\" for IPv4 or IPv6 respectively;\n-\tfor supporting data forwarding scenario \"2\" as specified in clause 5.3.1, a PDR matching the received user plane packets from downlink direction;\n-\ta FAR instructing the UP function to forward the received data to the CP function, with the field Outer Header Creation Description in the Outer Header Creation set to \"0\" or \"1\" for IPv4 or IPv6 respectively, and the Outer GTP-U header set to the IP address and TEID uniquely assigned in the CP function for the Sx-u tunnel.",
      "chunk_type": "general",
      "cross_references": [
        "clause_5.3.1",
        "ts_29.281"
      ]
    },
    {
      "chunk_id": "ts_29.244_5.3.4.3",
      "section_id": "5.3.4.3",
      "section_title": "Forwarding of Packets from the CP Function to the UP Function",
      "content": "When sending user plane data from the CP function, the traffic shall be forwarded over PFCP-u as:\n-\tT-PDUs encapsulated in GTP-U with the GTP-U header set to the IP address and TEID uniquely assigned in the UP function for the PFCP-u tunnel set up for the UP function or PDN or DN for traffic to be sent towards SGi or N6; or\n-\tG-PDUs encapsulated in GTP-U with the outer GTP-U header set to the IP address and TEID uniquely assigned in the UP function for the PFCP-u tunnel set up for the UP function and with the inner GTP-U header set to the F-TEID assigned by the downstreams GTP-U peer (e.g. SGW, I-UPF) to the bearer over which the data shall be sent.\nTo forward the user plane data from the CP function to the UP function, the CP function shall provision:\na PDR per UP function, with an IP address and TEID uniquely assigned in the UP function for the PFCP-u tunnel, and with the field Outer Header Removal Description in the Outer Header Removal IE set to \"0\" or \"1\";\n-\tan FAR enabling the UP function to forward the received data from the CP function.",
      "chunk_type": "requirement",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.244_5.3.5.1",
      "section_id": "5.3.5.1",
      "section_title": "General",
      "content": "The following requirements shall apply to the data forwarding scenario 5 of Table 5.3.1-1 in addition to the requirements specified in clause 5.3.1.\nThe CP function shall establish one one N4-u tunnel per PDU session when applying the data forwarding scenario 5.",
      "chunk_type": "definition",
      "cross_references": [
        "clause_5.3.1",
        "table_5.3.1-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_5.3.5.2",
      "section_id": "5.3.5.2",
      "section_title": "Forwarding of Packets from the UP Function to the CP Function",
      "content": "Regardless of whether the downlink traffic received by the UP function consists of T-PDUs (i.e. user data packet, see 3GPP TS 29.281 [3]) from N6 or G-PDUs (i.e. T-PDU plus a GTP-U header) received from N9, the downlink traffic shall be forwarded from the UP function to the CP function as G-PDUs with the GTP-U header set to the IP address and TEID uniquely assigned in the CP function for the N4-u tunnel corresponding to the PDU session.\nNOTE:\tA UPF receiving G-PDUs from N9 forwards the G-PDUs towards the SMF but with the IP address and TEID in the GTP-U header changed to the SMF IP address and TEID of the corresponding N4-u tunnel.\nTo forward the user plane data from the UP function to the CP function, the CP function shall provision:\n-\ta PDR per PDU session, matching the received downlink user plane packets, and for traffic received from N9, with the field Outer Header Removal Description in the Outer Header Removal IE set to \"0\" or \"1\" for IPv4 or IPv6 respectively;\n-\ta FAR instructing the UP function to forward the received downlink data to the CP function, with the field Outer Header Creation Description in the Outer Header Creation set to perform GTP-U/UDP/IPv4 or GTP-U/UDP/IPv6 encapsulation.\nNOTE:\tThe PDR can be provisioned in the UP function before applying data forwarding to the CP function.\nG-PDUs sent from the UP function to the CP function over the N4-u tunnel shall include any GTP-U extension header(s):\n-\tpossibly received by the UP function over the N9 interface and stored during the Outer Header Removal;\n-\tpossibly created by the UP function as part of a QER rule.",
      "chunk_type": "general",
      "cross_references": [
        "ts_29.281"
      ]
    },
    {
      "chunk_id": "ts_29.244_5.3.5.3",
      "section_id": "5.3.5.3",
      "section_title": "Forwarding of Packets from the CP Function to the UP Function",
      "content": "Likewise, when sending the uplink traffic received in the CP function to the UP function, the uplink traffic shall be forwarded over N4-u as G-PDUs with the GTP-U header set to the IP address and TEID uniquely assigned in the UP function for the N4-u tunnel set up for the corresponding PDU session.\nTo forward the user plane data from the CP function to the UP function, the CP function shall provision:\na PDR per PDU session, with an IP address and TEID uniquely assigned in the UP function for the N4-u tunnel, and with the field Outer Header Removal Description in the Outer Header Removal IE set to \"0\" or \"1\";\n-\tan FAR enabling the UP function to forward the received uplink data from the CP function.",
      "chunk_type": "requirement",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.244_5.4.1",
      "section_id": "5.4.1",
      "section_title": "General",
      "content": "This clause describe how Policy and Charging Control requirements are supported over the Sxa, Sxb, Sxc and N4 reference points.",
      "chunk_type": "definition",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.244_5.4.2",
      "section_id": "5.4.2",
      "section_title": "Service Detection and Bearer/QoS Flow Binding",
      "content": "Service detection refers to the process that identifies the packets belonging to a service data flow or application. For EPC, see clauses 6.2.2.2 and 6.8.1 of 3GPP TS 23.203 [7]. For 5GC, see clause 6.2.2.2 of 3GPP TS 23.503 [44].\nFor EPC, bearer binding is the procedure that associates service data flow(s) to an IP-CAN bearer deemed to transport the service data flow. UL bearer binding verification refers to the process of discarding uplink packets due to no matching service data flow template for the uplink direction. See clauses 6.1.1.4 and 6.2.2.2 of 3GPP TS 23.203 [7].\nFor 5GC, QoS flow binding is the procedure that associates service data flow(s) to a QoS flow deemed to transport the service data flow. UL QoS flow binding verification refers to the process of discarding uplink packets due to no matching QoS flow for the uplink direction. See clause 6.1.3.2.4 of 3GPP TS 23.503 [44] and clause 5.7.1.7 of 3GPP TS 23.501 [28].\nFor 5MBS, QoS flow binding is the procedure that associates a PCC rule to a QoS Flow within an MBS Session. See clause 6.10 in 3GPP TS 23.247 [72].\nService detection is controlled over the Sxa, Sxb, Sxc and N4 reference points by configuring Packet Detection Information in PDRs to match the intended service data flows or application.\nFor EPC, the mapping of DL traffic to bearers is achieved by configuring and associating FARs to the downlink PDRs, with FARs set to forward the packets to the appropriate downstream bearers (S5/S8 or S1/S12/S4/Iu).\nFor 5GC, the mapping of DL traffic to QoS flows is achieved by configuring QERs with QFI(s) for the QoS flow marking and associating FARs to the downlink PDRs, with FARs set to forward the packets to the appropriate downstream GTP-U tunnel (N9 or N3).\nFor EPC, uplink bearer binding verification is achieved by configuring Packet Detection Information in uplink PDRs containing the local F-TEID of the uplink bearer, the UE IP address (source IP address to match for the incoming packet), and the SDF filter(s) or the Application ID. As a result, uplink packets received on the uplink bearer but that do not match the SDF filter(s) or Application detection filter associated to the uplink PDRs are discarded.\nFor 5GC, uplink QoS flow binding verification (see clause 5.7.1.7 of 3GPP TS 23.501 [28]) is achieved by configuring Packet Detection Information in uplink PDRs containing the local F-TEID of the uplink PDU session, the UE IP address (source IP address to match for the incoming packet), the QFI of the QoS flow and the SDF filter(s) or the Application ID. As a result, uplink packets received on the uplink PDU session but that do not match the SDF filter(s) or Application detection filter and QFI associated to the uplink PDRs are discarded.\nNOTE 1:\tFor PCC Rules that contain an application identifier (i.e. that refer to an application detection filter), uplink traffic can be received on other IP-CAN bearers than the one determined by the binding mechanism. The detection of the uplink part of the service data flow can be activated in parallel on other bearers with non-GBR QCI (e.g. the default bearer) in addition to the bearer where the PCC rule is bound to. See clauses 6.1.1.1 and 6.2.2.2 of 3GPP TS 23.203 [7]. Therefore the uplink PDRs for these bearers can be provisioned with the PDI containing this service data flow and the local F-TEID of the uplink bearer.\nNOTE 2:\tTo avoid the PGW-U discarding packets due to no matching service data flow template, the operator can apply open PCC rules (with wildcarded SDF filters) to allow for the passage of packets that do not match any other candidate SDF template. Therefore an uplink PDR can be provisioned with the PDI containing only the local F-TEID of the uplink bearer.\nNOTE 3:\tUplink bearer binding does not apply to Non-IP PDN connections.\nNOTE 4:\tThe UPF can be provisioned with a PDR (with low precedence) which contains the CN tunnel info, QFI and filter information that can detect any unwanted/unauthorized traffic with this QFI so that such traffic can be dropped with or without being counted before.",
      "chunk_type": "procedure",
      "cross_references": [
        "ts_23.203_clause_6.2.2.2",
        "ts_23.503_clause_6.1.3.2.4",
        "ts_23.503_clause_5.7.1.7",
        "ts_23.247_clause_6.10",
        "ts_23.501_clause_5.7.1.7",
        "ts_23.503_clause_6.2.2.2",
        "ts_23.203",
        "ts_23.503",
        "ts_23.501",
        "ts_23.247"
      ]
    },
    {
      "chunk_id": "ts_29.244_5.4.3",
      "section_id": "5.4.3",
      "section_title": "Gating Control",
      "content": "Gating control refers to the process within the user plane function (i.e. PGW-U and TDF-U for EPC, UPF for 5GC) of enabling or disabling the forwarding of IP packets, belonging to a service data flow or detected application's traffic, to pass through to the desired endpoint (for EPC see clause 4.3.2 of 3GPP TS 23.203 [7] and for 5GC see clause 4.3.3.1 of 3GPP TS 23.503 [44]).\nThe PGW-C and TDF-C (for EPC) and the SMF (for 5GC) controls the gating in the PGW-U and TDF-U (for EPC) and in the UPF (for 5GC) by creating PDR(s) for the service data flow(s) or application's traffic to be detected, and by associating a QER, including the Gate Status IE, to the PDRs.\nThe Gate Status IE indicates whether the service data flow or detected application traffic is allowed to be forwarded (the gate is open) or shall be discarded (the gate is closed) in the uplink and/or in downlink directions.\nThe PGW-U and TDF-U (for EPC) and the UPF (for 5GC) shall identify UL and DL flows by the Source Interface IE in the PDI of the PDRs or the Destination Interface IE in the FARs. The PGW-U and TDF-U (for EPC) and the UPF (for 5GC) shall apply UL and DL gating accordingly.\nThe UP function shall discard packets matching a PDR if the PDR is associated with at least one QER provisioned with the Gate Status set to CLOSED.",
      "chunk_type": "general",
      "cross_references": [
        "ts_23.203_clause_4.3.2",
        "ts_23.203_clause_4.3.3.1",
        "ts_23.503_clause_4.3.3.1",
        "ts_23.203",
        "ts_23.503"
      ]
    },
    {
      "chunk_id": "ts_29.244_5.4.4",
      "section_id": "5.4.4",
      "section_title": "QoS Control",
      "content": "QoS control refers to the authorization and enforcement of the maximum QoS that is authorized:\n-\tfor EPC,\n-\tat the session level (APN-AMBR, TDF session UL and DL bitrates, or UL and DL Packet Rate of a PDN connection);\n-\tat the bearer level (GBR, MBR for GBR bearers);\n-\tat the service data flow (SDF) or application level.\n-\tfor 5GC,\n-\tat the session level (Session-AMBR, UL and DL Packet Rate of a PDU session or Authorized DL Session AMBR for Offloading);\n-\tat the QoS Flow level;\n-\tat the service data flow (SDF) or application level.\nSee clause 4.3.3 of 3GPP TS 23.203 [7] clause 4.5.5 of 3GPP TS 29.212 [8] and clause 4.7.7 of 3GPP TS 23.401 [14].\nThe CP function shall control the QoS enforcement in the UP function by:\n-\tcreating the necessary PDR(s) to represent the service data flow, application, QoS Flow (for 5GC), bearer or session, if not already existing;\n-\tcreating QERs for the QoS enforcement at session level, SDF/application level;\n-\tcreating QERs for the QoS enforcement of the aggregate of SDFs with the same GBR QCI;\n-\tcreating QERs for the QoS enforcement of the aggregate of SDFs with the same GBR QFI (for 5GC);\n-\tassociating the session level QER to all the PDRs defined for the session;\n-\tassociating the SDF or application QER to the PDRs associated to the SDF or application;\n-\tassociating the QER of the aggregate of SDFs to the PDRs associated to SDFs or applications that share the QER.\nThe same QER may be associated to UL and DL PDRs. The UP function shall identify the UL and DL flows by the Source Interface IE in the PDRs or the Destination Interface IE in the FARs. The UP function shall enforce the QoS for the UL or DL flows accordingly.\nThe CP function shall map the precedence of a PCC rule to the precedence of the PDRs associated to the corresponding service data flows.",
      "chunk_type": "general",
      "cross_references": [
        "ts_23.203_clause_4.3.3",
        "ts_23.203_clause_4.5.5",
        "ts_29.212_clause_4.7.7",
        "ts_29.212_clause_4.5.5",
        "ts_23.401_clause_4.7.7",
        "ts_23.203",
        "ts_29.212",
        "ts_23.401"
      ]
    },
    {
      "chunk_id": "ts_29.244_5.4.5",
      "section_id": "5.4.5",
      "section_title": "DL Flow Level Marking for Application Detection",
      "content": "DL flow level marking is performed using DL DSCP marking. DL DSCP marking for application indication refers to the process in the TDF of marking detected downlink application traffic with a DSCP value received within an installed ADC rule matching this traffic. See Annex U of 3GPP TS 23.203 [7] and clauses 4.5.2.7 and 4b.5.14 of 3GPP TS 29.212 [8].\nDL DSCP marking for application indication is controlled by the TDF-C by associating a QER, including the ToS or Traffic Class within the DL Flow Level Marking IE, to the PDR matching the DL traffic to be marked. The TDF-U performs the DL DSCP marking for the detected DL traffic and sends the marked packet to the PGW-U.\nIf a tunnelling protocol is used between the TDF-U and the PGW-U, the DSCP value for service data flow detection shall be carried in the inner IP header.\nThe TDF-C may stop the DL DSCP marking for the application during the PFCP session by removing the related QER or removing the DL Flow Level Marking IE from the related QER, the TDF-U shall then stop such function consequently.\nPolicy and charging control in the downlink direction by the PCEF for an application detected by the TDF is performed by the PGW-C configuring a PDR with a PDI containing an SDF Filter with the corresponding DSCP value.",
      "chunk_type": "procedure",
      "cross_references": [
        "ts_23.203",
        "ts_29.212"
      ]
    },
    {
      "chunk_id": "ts_29.244_5.4.6",
      "section_id": "5.4.6",
      "section_title": "Usage Monitoring",
      "content": "Usage Monitoring Control refers to the process of monitoring the user plane traffic in the PGW-U, TDF-U or UPF for the accumulated usage of network resources per:\n-\tindividual or group of service data flows;\n-\tindividual or group of applications;\n-\tPDU session, possibly excluding an individual SDF or a group of service data flow(s) (for 5GC);\n-\tIP-CAN session, possibly excluding an individual SDF or a group of service data flow(s) (for EPC); and/or\n-\tTDF session, possibly excluding an individual application or a group of application(s) (for EPC).\nFor EPC, see clauses 4.4, 6.2.2.3 and 6.6 of 3GPP TS 23.203 [7] and clauses 4.5.16, 4.5.17, 4b.5.6, 4b.5.7 of 3GPP TS 29.212 [8].\nFor 5GC, see clauses 4.3.4 and 6.2.2.3 of 3GPP TS 23.503 [44] and clauses 4.2.2.10, 4.2.3.11, 4.2.4.10, 4.2.6.2.5, 4.2.6.5.3 of 3GPP TS 29.512 [41].\nUsage Monitoring Control is supported over the Sxb, Sxc and N4 reference points by activating in the UP function the reporting of usage information towards the CP function, as specified in clauses 5.3 and 7.8.4 of 3GPP TS 23.214 [2] and in clause 5.8.2.6.2 of 3GPP TS 23.501 [28].\nThe CP function shall control the Usage Reporting in the UP function by:\n-\tcreating the necessary PDR(s) to represent the service data flow, application or session;\n-\tcreating a URR for each Monitoring key; and\n-\tassociating the URR to:\n-\tall the PDRs of the PFCP session, for usage monitoring at IP-CAN or TDF session level, possibly excluding the PDRs matching the SDFs or Applications excluded from the usage monitoring at session level; or\n-\tthe PDR(s) of the PFCP session associated to the individual or group of SDF(s) or Application(s), for usage monitoring at SDF or application level.",
      "chunk_type": "general",
      "cross_references": [
        "ts_23.214_clause_5.8.2.6.2",
        "ts_23.501_clause_5.8.2.6.2",
        "ts_23.203",
        "ts_29.212",
        "ts_23.503",
        "ts_29.512",
        "ts_23.214",
        "ts_23.501"
      ]
    },
    {
      "chunk_id": "ts_29.244_5.4.7",
      "section_id": "5.4.7",
      "section_title": "Traffic Redirection",
      "content": "Traffic Redirection refers to the process of redirecting uplink application traffic, in a PGW, TDF or UPF, towards a redirect destination, e.g. redirect some HTTP flows to a service provisioning page. For EPC, see clause 6.1.13 of 3GPP TS 23.203 [7] and clauses 4.5.2.6 and 4b.5.1.4 of 3GPP TS 29.212 [8]. For 5GC, see clause 6.1.3.12 of 3GPP TS 23.503 [44] and clause 4.2.6.2.4 of 3GPP TS 29.512 [46].\nThe redirect destination may be provided by the PCRF/PCF or be preconfigured in the CP function or in the UP function.\nFor EPC and5GC, the traffic redirection shall be enforced in the UP function. If the traffic that the UP function can support may be subject to traffic redirection, traffic redirection enforcement in the UP function shall be supported by the UP function. The UP function reports to the CP function whether it supports traffic redirection enforcement in the UP function via the UP Function Features IE (see clause 8.2.25).\nNOTE:\tA UP function that supports traffic not requiring traffic redirection does not need to support traffic redirection enforcement in the UP function. The CP function can select a UP function supporting traffic redirection enforcement in the UP function for users or services which may require traffic redirection.\nTo enforce the traffic redirection in the UP function, the CP function shall:\n-\tcreate the necessary PDR(s) to represent the traffic to be redirected, if not already existing;\n-\tcreate a FAR with:\n-\tthe Redirect Information IE including the redirect destination, if the traffic needs to be redirected towards a redirect destination provided by the CP function; a redirect destination provided by the CP function shall prevail over a redirect destination preconfigured in the UP function;\n-\tFor HTTP traffic redirection, the Redirection Address Type shall be set to \"URL\" and the CP function shall set the Destination Interface IE in the FAR to \"Access\" (to forward the HTTP response message with a status code indicating redirect). For other types of traffic redirection, the Destination Interface IE in the FAR may be set to \"Core\";\nor\n-\tthe Forwarding Policy IE including the identifier of the forwarding policy to apply, if the traffic needs to be redirected towards a redirect destination preconfigured in the UP function;\n-\tassociate the FAR to the above PDRs of the PFCP session.",
      "chunk_type": "general",
      "cross_references": [
        "ts_23.203_clause_6.1.13",
        "ts_29.212_clause_6.1.3.12",
        "ts_23.503_clause_4.2.6.2.4",
        "clause_8.2.25",
        "ts_23.503_clause_6.1.3.12",
        "ts_29.512_clause_4.2.6.2.4",
        "ts_23.203",
        "ts_29.212",
        "ts_23.503",
        "ts_29.512"
      ]
    },
    {
      "chunk_id": "ts_29.244_5.4.8",
      "section_id": "5.4.8",
      "section_title": "Traffic Steering",
      "content": "Traffic Steering refers to the process of applying a specific (S)Gi-LAN traffic steering policy in the PCEF or TDF (or TSSF), or a specific N6-LAN traffic steering policy in the UPF (PDU Session Anchor), for the purpose of steering the subscriber's traffic to appropriate operator or 3rd party service functions (e.g. NAT, antimalware, parental control, DDoS protection) in the (S)Gi-LAN or N6-LAN, per service data flows level or applications level.\nApplication Function influencing traffic routing (see clause 5.6.7 of 3GPP TS 23.501 [28]) also uses traffic steering for the purpose of steering the subscriber's traffic over N6, e.g. to a local access to a Data Network.\nApplication Function influence on Service Function Chaining (see clause 5.6.16.2 of 3GPP TS 23.501 [28]) enables an AF to request the steering of user plane traffic to a pre-configured chain of service functions on N6-LAN.\nThe UP function shall set the TRST feature flag in the UP Function Features IE if it supports Traffic Steering (see clause 8.2.25). The UP function shall additionally set the AFSFC feature flag in the UP Function Features IE if it supports Traffic Steering and support using Metadata (see clause 8.2.25).\nTraffic Steering is supported over the Sxb, Sxc and N4 reference points by instructing the UP function to apply a specific Forwarding Policy, that is locally configured in the UP function and that can be used for the uplink, the downlink or for both directions. A Forwarding Policy is identified by a Forwarding Policy Identifier. Traffic steering is alternatively supported over the N4 reference point by instructing the UP function to route packets according to N6 routing information in the FAR (e.g. providing an IP address in the Outer Header Creation).\nWhen so instructed, the UP function shall perform the necessary actions to enforce the forwarding policy referenced by the CP function, e.g. performing packet marking and routing the traffic towards the service functions within the (S)Gi-LAN or N6-LAN.\nSee 3GPP TS 23.203 [7], 3GPP TS 29.212 [8] and 3GPP TS 23.501 [28].\nThe CP function shall control Traffic Steering towards SGi-LAN, N6-LAN and/or N6 in the UP function by:\n-\tcreating the necessary PDRs to represent the service data flows or applications to be steered;\n-\tcreating a FAR with the Forwarding Policy IE including the Forwarding Policy Identifier set to the Traffic Steering Policy Identifier, or creating a FAR with a Outer Header Creation with the destination IP address; and\n-\tassociating the FAR to the above PDRs of the PFCP session.\nThe CP function shall control the processing of the traffic received from the (S)Gi-LAN or N6-LAN in the UP function as specified in the rest of this specification for traffic received from any other interface, but with PDR(s) including a PDI with the Source Interface indicating \"SGi-LAN/N6-LAN\". The UP function shall distinguish packets coming from (S)Gi-LAN/N6-LAN based on local configuration.\nNOTE:\tIn some cases, the traffic needs be steered towards service chaining functions within the N6-LAN first and then the same traffic can come back to the UPF and be further steered towards the Data Network or UE. In such scenario, as an implementation and/or deployment option, e.g. for the uplink traffic, the CP function can generate two pairs of PDRs and FARs, one is to instruct the UP function to detect the relevant uplink traffic and to steer the traffic to the N6-LAN; the other is to instruct the UP function to detect the same traffic sent back from the Service Chaining Functions and steer it to the Data Network. It is assumed in both PDRs, the same packet filters and/or application ID on packet detection is used.",
      "chunk_type": "general",
      "cross_references": [
        "ts_23.501_clause_5.6.7",
        "ts_23.501_clause_5.6.16.2",
        "clause_8.2.25",
        "ts_23.501",
        "ts_23.203",
        "ts_29.212"
      ]
    },
    {
      "chunk_id": "ts_29.244_5.4.9",
      "section_id": "5.4.9",
      "section_title": "Provisioning of Predefined PCC/ADC Rules",
      "content": "A Predefined PCC rule is preconfigured in the PCEF, e.g. a PGW (for EPC) or SMF (for 5GC). Predefined PCC rules can be activated or deactivated by the PCRF/PCF at any time. The Predefined PCC rules may be grouped allowing the PCRF/PCF to dynamically activate a set of PCC rules.\nFor EPC a predefined ADC rule is preconfigured in the TDF. In the case of solicited reporting, the Predefined ADC rules can be activated or deactivated by the PCRF at any time. Predefined ADC rules within the TDF may be grouped allowing the PCRF to dynamically activate a set of ADC rules.\nFor the definition of PCC and ADC rules see clauses 4.3.1 and 4b.3.2 of 3GPP TS 29.212 [8] and clause 5.6.2.6 of 3GPP TS 29.512 [41].\nThe CP function may enforce an activated predefined PCC or ADC rule by the PCRF/PCF in the UP function by:\n-\tdetermining the service data filters or application IDs referred by the activated predefined PCC or ADC rule(s) and the corresponding QoS and charging control information respectively;\n-\tcreating the necessary PDR(s) to identify the service data flow(s), application(s) that the predefined PCC or ADC rule refer to, if not already existing;\n-\tcreating the necessary QER for the QoS enforcement at service data flow or application level accordingly;\n-\tcreating the necessary FAR if a new FAR needs to be created as result of Bearer binding (for EPC) or QoS flow binding (for 5GC) and QoS control for forwarding the detected service data flow or application traffic, or to redirect or to apply traffic steering control if included in the predefined PCC/ADC rule;\n-\tcreating the necessary URR(s) for each monitoring key, charging key, combination of Charging Key and Service ID, or combination of Charging Key, Sponsor ID and Application Service Provider Id if included in the predefined PCC or ADC rule;\nand then:\n-\tassociating the created URR(s) to the newly created PDR(s);\n-\tassociating the existing FAR or the new FAR to the newly created PDR(s);\nOptionally, the traffic handling policies common to many PFCP sessions (i.e. predefined PDR(s) / QER(s) / FAR(s) / URR(s)) may be configured in the UP function. The CP function may activate these traffic handling policies by including the Activate Predefined Rules IE or by including predefined FAR/URR/QER ID(s) (of which the most significant bit is set to \"1\") within:\n-\tthe Create PDR IE in an PFCP Session Establishment Request; or\n-\tthe Update PDR IE in an PFCP Session Modification Request.\nIf the CP function activates the traffic handling policies by including predefined FAR/URR/QER ID(s), i.e. where bit 8 is set to \"1\", then Create/Update FAR/URR/QER IE(s) that shares the same ID shall not be present.\nIf the received Create/Update PDR IE contains both the Activate Predefined Rules IE and a predefined FAR/URR/QER ID (bit 8 set to \"1\"), it is an implementation matter how the UPF handles the message. The UPF shall either overwrite the FAR/URR/QER referenced by the Activate Predefined Rules IE with those referenced by the received FAR/URR/QER ID, or reject the message with the Cause value \"Rule creation/modification Failure\" and the Failed Rule ID IE (see clause 8.2.1).\nNOTE 1:\tThe Create/Update PDR IE can contain only dynamic FAR/URR/QER ID. Such dynamic rules provision the UPF with information that was not preconfigured, e.g. with a remote GTP-U F-TEID.\nFor traffic matching PDR(s) associated with the activated predefined rules, the UP function shall enforce the rules, e.g. for URR, the UP function shall generate Usage Report(s) and send it to the CP function and the CP function shall be able to handle the usage reports as described in clause 5.2.2.\nNOTE 2:\tThe URR IDs used in reports triggered by a predefined rule in UP function are also pre-configured at the CP function.\nThe URR ID used in the usage report may be a predefined URR ID or a URR ID dynamically provisioned by the CP function.\nFor deactivating predefined rules which have been activated in the UP function using a Predefined Rule Name, the CP function shall include the Deactivate Predefined Rules IE in the Update PDR IE in a PFCP Session Modification Request to inform the UP function to deactivate the corresponding predefined rules for the related PDR.\nFor deactivating predefined FAR(s) /URR(s) / QER(s) which have been activated in the UP function by including predefined FAR/URR/QER ID(s) in the Create PDR IE or Update PDR IE, the CP function may include Remove FAR IE(s), Remove URR IE(s) and/or Remove QER IE(s) to delete the corresponding predefined FAR/URR/QER ID in an PFCP Session Modification Request message.\nNOTE 3:\tUsing Remove FAR IE(s), Remove URR IE(s) and Remove QER IE(s) does not result in any change to predefined rules that was activated using the Activate Predefined Rules IE. Such predefined rules continue to apply if still activated for the PDR.",
      "chunk_type": "general",
      "cross_references": [
        "ts_29.212_clause_5.6.2.6",
        "clause_8.2.1",
        "clause_5.2.2",
        "ts_29.512_clause_5.6.2.6",
        "ts_29.212",
        "ts_29.512"
      ]
    },
    {
      "chunk_id": "ts_29.244_5.4.10",
      "section_id": "5.4.10",
      "section_title": "Charging",
      "content": "For EPC, the charging requirements for online and offline charging in the PS domain specified in 3GPP TS 32.251 [17] shall be preserved with a split SGW, PGW and TDF architecture.\nFor 5GC, the charging requirements for online, offline and converged charging in the 5G data connectivity domain are specified in 3GPP TS 32.255 [45] and 3GPP TS 32.279 [87].\nCharging is supported by the CP function by activating in the UP function the measurement and reporting of the accumulated usage of network resources per:\n-\tfor EPC:\n-\tIP-CAN bearer, for an SGW;\n-\tIP-CAN bearer, IP-CAN session and/or individual or group of service data flows, for a PGW;\n-\tTDF session and/or individual or group of applications, for a TDF;\n-\tfor 5GC:\n-\tPDU session and/or individual or group of service data flows, for an SMF;\n-\tQoS Flow, for an SMF;\n-\tMBS session (or location dependent part of the MBS session, for a location dependent MBS service), for an MB-SMF;\n-\tindividual or group of service data flows of an MBS session (or location dependent part of the MBS session, for a location dependent MBS service), for an MB-SMF.\nSee clauses 5.3 and 7.8.4 of 3GPP TS 23.214 [2] and clause 5.8.2.6 of 3GPP TS 23.501 [28].\nThe CP function shall control the usage measurement and reporting in the UP function by:\n-\tcreating the necessary PDR(s) to represent the service data flow, application, bearer or session, if not already existing;\n-\tcreating URR(s) for each Charging Key, combination of Charging Key and Service ID, or combination of Charging Key, Sponsor ID and Application Service Provider Id;\n-\tassociating the URR(s) to the relevant PDRs defined for the PFCP session, for usage reporting at IP-CAN bearer, IP-CAN session, TDF session, SDF or application level.\nFor online charging, or for converged charging making use of quotas, the CP function shall provision the URR with the Volume (or Time) Quota, and with the Volume (or Time) Quota if a quota threshold was received from the OCS, as specified in clause 5.2.2.2. Besides, when the OCS provides a final quota and requests to redirect the traffic towards a redirect destination when exhausing this quota, the CP function shall redirect the traffic towards a redirect destination as specified in clause 5.4.7 upon being notified that the final quota has been reached; to permit HTTP traffic redirection, the UP function should have at least one HTTP packet, e.g. the UP function may store one packet when reaching the Volume (or Time) Quota. An example call flow is depicted in Annex C.2.1.1.\nTo avoid the risk of signalling storms between the CP and UP functions at times of tariff change, the CP function may include the Monitoring Time IE and zero or more Additional Monitoring IEs in the URR and set it to the time of tariff change to request the UP function to report separately the resource usage before and after the time of tariff change (see e.g. clause 6.3.7.1 of 3GPP TS 32.299 [18]).",
      "chunk_type": "requirement",
      "cross_references": [
        "ts_23.214_clause_5.8.2.6",
        "clause_5.2.2.2",
        "clause_5.4.7",
        "ts_32.299_clause_6.3.7.1",
        "ts_23.501_clause_5.8.2.6",
        "ts_32.251",
        "ts_32.255",
        "ts_32.279",
        "ts_23.214",
        "ts_23.501",
        "ts_32.299"
      ]
    },
    {
      "chunk_id": "ts_29.244_5.4.11",
      "section_id": "5.4.11",
      "section_title": "(Un)solicited Application Reporting",
      "content": "For EPC, (un)solicited Application Reporting refers to the process of reporting the start or stop of applications by the TDF or PCEF. See 3GPP TS 23.203 [3] and 3GPP TS 29.212 [8].\nFor 5GC, solicited Application Reporting refers to the process of reporting the start or stop of applications by the SMF to the PCF. See 3GPP TS 23.503 [44] and 3GPP TS 29.512 [41]. Unsolicited application reporting is not applicable for 5GC.\nThe CP function shall instruct the UP function to detect and report applications by:\n-\tcreating the necessary PDR(s) to represent the applications to detect;\n-\tcreating a URR with the Reporting Trigger IE set to detect the start and/or stop of Traffic;\n-\tthe CP function may include a zero quota together with a FAR ID for Quota Action IE in the URR to instruct the UP function to drop or buffer the packets pertaining to the detected application traffic before the quota is granted in the subsequent PFCP Session Modification Request message. The FAR identified by the FAR ID for Quota Action shall be provisioned according to the \"sdfHandl\" instruction received from the PCF or the local policies as specified in 3GPP TS 29.512 [41].\nNOTE 1:\tThe (normal) FAR associated with the PDR detecting the application traffic is used when the URR is later on provisioned with a non-zero quota.\n-\tassociating the URR to the PDR.\nFor unsolicited application reporting, a PFCP session which is not linked to any specific TDF session may be established and the PDI in the PDR(s) does not contain any UE IP address.\nWhen detecting the start or stop of an application, the UP function shall then initiate the PFCP Session Report procedure and send a Usage Report with the Usage Report Trigger set to 'Start of Traffic' or 'Stop of Traffic'. The UP function shall also include the following information in the Usage Report:\n-\twhen reporting the start of an application:\n-\tthe Application ID;\n-\tthe Flow Information including the Flow Description and the Flow Direction, if the traffic flow information is deducible;\n-\tthe Application-Instance-Identifier, if the traffic flow information is deducible; and\n-\tif no UE IP address was provisioned in the PDI, the UE's IP address, and the Network instance when multiple PDNs with overlapping IP addresses are used in the UP function.\nNOTE 2:\tWhen the CP function instructs the UP function to perform unsolicited application reporting, the PDI in the corresponding PDR has no UE IP address.\n-\twhen reporting the stop of an application:\n-\tthe Application ID;\n-\tthe Application-Instance-Identifier, if an Application Identifier was provided when reporting the start of the application;\n-\tif no UE IP address was provisioned in the PDI, the UE's IP address, and the Network instance when multiple PDNs with overlapping IP addresses are used in the UP function.\nThe UP function shall only report the Application ID when detecting the start or stop of an application and the Reduced Application Detection Information flag is set in the Measurement Information of the URR, e.g. for envelope reporting.",
      "chunk_type": "general",
      "cross_references": [
        "ts_23.203",
        "ts_29.212",
        "ts_23.503",
        "ts_29.512"
      ]
    },
    {
      "chunk_id": "ts_29.244_5.4.12",
      "section_id": "5.4.12",
      "section_title": "Service Identification for Improved Radio Utilisation for GERAN",
      "content": "Service Identification for improved radio utilization for GERAN refers to the process in the PGW of marking DL user plane traffic with a Service Class Indicator (SCI) value. See clause 5.3.5.3 of 3GPP TS 23.060 [19].\nThis is controlled by the PGW-C by associating a QER, including the Service Class Indicator within the DL Flow Level Marking IE, to the PDR matching the DL traffic to be marked. The PGW-U performs the SCI marking for the detected DL traffic and sends the packet with the GTP-U Service Class Indicator Extension Header downstreams.\nThe PGW-C may stop the SCI marking during the PFCP session by removing the related QER or removing the DL Flow Level Marking IE from the related QER, the PGW-U shall then stop such function consequently.",
      "chunk_type": "general",
      "cross_references": [
        "ts_23.060_clause_5.3.5.3",
        "ts_23.060"
      ]
    },
    {
      "chunk_id": "ts_29.244_5.4.13",
      "section_id": "5.4.13",
      "section_title": "Transport Level Marking",
      "content": "For EPC, transport level marking is performed on a per EPS bearer basis in the SGW and PGW. Transport level marking refers to the process of marking traffic with a DSCP value based on the locally configured mapping from the QCI and optionally the ARP priority level.\nFor 5GC, transport level marking is performed on a per QoS flow basis. Transport level marking refers to the process of marking traffic at the UPF/MB-UPF with a DSCP value based on the mapping from the 5QI, the Priority Level (if explicitly signalled) and optionally the ARP priority level configured at the SMF/MB-SMF.\nTransport level marking shall be controlled by the CP function by providing the DSCP in the ToS or Traffic Class within the Transport Level Marking IE in the FAR that is associated to the PDR matching the traffic to be marked. The UP function shall perform the transport level marking for the detected traffic and sends the marked packet to the peer entity.\nThe CP function may change transport level marking by changing the Transport Level Marking IE in the related FAR.",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.244_5.4.14",
      "section_id": "5.4.14",
      "section_title": "Deferred PDR activation and deactivation",
      "content": "As specified in clause 6.3.2 of 3GPP TS 23.203 [7] and clauses 4.5.13 and 4a.5.13 of 3GPP TS 29.212 [8], Policy and charging control rule operations can be also performed in a deferred mode. To support such deferred PCC rule activation or deactivation, the CP function and UP function may optionally support the Deferred PDR activation and deactivation (DPDRA) as described below.\nIf the feature DPDRA is supported in both CP function and UP function, and when a PCC rule is provisioned in a deferred mode, i.e. with a Rule-Activation-Time and/or Rule-Deactivation-Time, the CP function shall provision the corresponding PDR using Create PDR IE or Update PDR together with an Activation Time and/or Deactivation Time to enable the PDR being activated or deactivated at requested time.\nWithout being provisioned together with an Activation Time or a Deactivation Time, a PDR shall be active immediately when it is received. When the status of a PDR is changed from active to inactive, the UP function shall keep storing the inactive PDR together with its associated FAR, URR(s) and QER(s), and then UP function shall apply the same behavior as if the PDR is deleted.\nThe CP function shall control at what time the status of a PDR rule changes using Activation Time and/or Deactivation Time as exactly as being instructed by the PCRF using a Rule-Activation-Time and/or Rule-Deactivation-Time, as specified in clause 4.5.13 of 3GPP TS 29.212 [8].\n1)\tIf only Activation Time is specified and has not yet occurred, then the UP function shall set the PDR rule inactive and make it active at that time. If Activation Time has passed, then the UP function shall immediately set the PDR rule active.\n2)\tIf only Deactivation Time is specified and has not yet occurred, then the UP function shall set the PDR rule active and make it inactive at that time. If Deactivation Time has passed, then the UP function shall immediately set the PDR rule inactive.\n3)\tIf both Activation Time and Deactivation Time are specified, and the Activation Time occurs before the Deactivation Time, and also when the PDR rule is provided before or at the time specified in the Deactivation Time, the UP function shall handle the rule as defined in 1) and then as defined in 2).\n4)\tIf both Activation Time and Deactivation Time are specified, and the Deactivation Time occurs before the Activation Time, and also when the PDR rule is provided before or at the time specified in the Activation Time, the UP function shall handle the rule as defined in 2) and then as defined in 1).\n5)\tIf both Activation Time and Deactivation Time are specified but time has already occurred for both, and the Activation Time occurs before the Deactivation Time, then the UP function shall immediately set the PDR rule inactive.\nNOTE 1:\tIf the CP function receives both Rule-Activation-Time and Rule-Deactivation-Time from the PCRF, but time has already occurred for both, and the Rule-Activation-Time occurs before the Rule-Deactivation-Time, as alternative to above, the CP function can deactivate the corresponding PDR rule by provisioning a Deactivation Time which has occurred or removing the corresponding PDR rule.\n6)\tIf both Activation Time and Deactivation Time are specified but time has passed for both, and the Deactivation Time occurs before the Activation Time, then the UP function shall immediately set the PDR rule active.\nNOTE 2:\tIf the CP function receives both Rule-Activation-Time and Rule-Deactivation-Time from the PCRF, but time has passed for both, and the Rule-Deactivation-Time occurs before the Rule-Activation-Time, as alternative to above, the CP function can activate the corresponding PDR rule by provisioning a activation Time which has occurred in the Update PDR IE, or create the corresponding PDR rule if the PDR is not provisioned yet.",
      "chunk_type": "general",
      "cross_references": [
        "ts_23.203_clause_6.3.2",
        "ts_29.212_clause_4.5.13",
        "ts_23.203",
        "ts_29.212"
      ]
    },
    {
      "chunk_id": "ts_29.244_5.4.15.1",
      "section_id": "5.4.15.1",
      "section_title": "General",
      "content": "Packet rate enforcement refers to the process of limiting the rate of uplink and/or downlink packets allowed to be sent for a PDN connection or a PDU session.\nPacket rate enforcement shall be used to support:\n-\tAPN rate control for UE's all PDN connections for a given APN in EPC, see 3GPP TS 23.401 [14] and 3GPP TS 23.502 [29]. APN rate control is enforced across N4 interface only for 5GC interworking with EPC scenario (see clause 4.3 in 3GPP TS 23.501 [28]);\n-\tSmall data rate control for a PDU session in 5GC, see 3GPP TS 23.501 [28] and 3GPP TS 23.502 [29];\n-\tServing PLMN rate control, for downlink traffic, see 3GPP TS 23.401 [14] and 3GPP TS 23.501 [28].",
      "chunk_type": "definition",
      "cross_references": [
        "ts_23.501_clause_4.3",
        "ts_23.401",
        "ts_23.502",
        "ts_23.501"
      ]
    },
    {
      "chunk_id": "ts_29.244_5.4.15.2",
      "section_id": "5.4.15.2",
      "section_title": "Packet rate enforcement over Sxb and N4 interfaces",
      "content": "The CP function may instruct the UP function to perform packet rate enforcement, during the establishment or the modification of a PFCP session, over the Sxb and N4 reference points.\nThe CP function shall control packet rate enforcement in the UP function by:\n1)\tcreating the necessary PDR(s) to represent the uplink or downlink traffic to be enforced, if not already existing;\n2)\tcreating QER(s) containing the Packet Rate IE with one or more of the following enforcement rules and information:\n-\tMaximum Uplink/Downlink Packet Rates (i.e. Number of Uplink/Downlink Packets Allowed and Time units that determine the time periods for limiting the packet rates);\n-\tAdditional Maximum Uplink/Downlink Packet Rates (i.e. Number of Additional Uplink/Downlink Packets Allowed and Time units that determine the time periods for limiting the packet rates), if additional packets are allowed to be sent beyond the maximum Uplink/Downlink Packet Rates;\nThe QER may also contain the Packet Rate Status IE to indicate remaining numbers of allowed packets until a given time.\nThe QER may also contain the QER Control Indications IE with the Rate Control Status Reporting (RCSR) flag, indicating the UP function shall report to the CP function the status of the packet rate usage when the PFCP session is released.\n3)\tassociating the QER(s) to the UL and/or DL PDRs of the traffic for which packet rate enforcement is required.\nWhen so instructed, the UP function shall proceed as follows:\n1)\tthe UP function shall count UL/DL packets within the time period (e.g. per minute, per day, etc.) and if the 'maximum allowed rate' is reached, the UP function shall discard or delay further packets.\n2)\tIf 'Additional Maximum Uplink/Downlink Packet Rates' are provided, the UPF shall consider 'maximum allowed rate' is equal to the 'number of packets per time unit' plus the 'number of additional allowed exception report packets per time unit'. Otherwise, the UPF shall consider 'maximum allowed rate' is equal to the 'number of packets per time unit'.\n3)\tIf the CP function has requested to report the rate control status, the UP function shall send to the CP function the Packet Rate Status IE, when the PFCP session is released. Otherwise, the UP function shall not send the Packet Rate Status IE to the CP function during the release of the PFCP session.\n4)\tIf the CP function provided Packet Rate Status information, then the UP function shall first enforce the rules in the Packet Rate Status IE until either the packet rate limits are reached, or the validity time expires. Only after this shall the UP function enforce the rules in the Packet Rate IE.",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.244_5.4.15.3",
      "section_id": "5.4.15.3",
      "section_title": "PGW and SMF behaviour",
      "content": "A PGW, SMF or SMF/PGW shall apply APN rate control, Small Data Rate Control and Serving PLMN rate control by instructing the UP function to perform packet rate enforcement as described in clause 5.4.15.2 with the following additions:\n-\tServing PLMN rate control:\n-\tthe Maximum Downlink Packet Rate shall be set to the DL rate permitted by the Serving PLMN rate control parameters;\n-\tthe CP function shall indicate to the UP function to not report the status of the packet rate usage.\nNOTE 1:\tServing PLMN rate control applies only to control plane PDU sessions and PDN connections. Uplink rate for Serving PLMN rate control is enforced by the MME or SMF, so it does not require support from the UP function.\n-\tSmall Data Rate Control:\n-\tthe CP function shall indicate to the UP function to report the status of the packet rate usage;\n-\tthe QER shall be associated to all the DL/UL PDRs of the PDU session;\n-\tAPN rate control:\n-\tthe CP function shall indicate to the UP function to report the status of the packet rate usage;\n-\tthe QER shall be associated to all the PDRs of all the PDN connections of the UE to the same APN, using the QER Correlation ID (see clause 5.2.1).\nIf both Serving PLMN rate control and Small Data Rate Control are applied in 5GS, or both Serving PLMN rate control and APN rate control are applied in EPS, the SMF/PGW-C may control packet rate enforcement in the UP function by provisioning:\n-\ta QER for Small Data Rate Control/APN rate control, and by associating DL/UL PDRs to the QER; or\n-\talternatively, different QERs for Serving PLMN rate control and for Small Data Rate Control/APN rate control, and by associating DL PDRs to both of the QER(s).\nAPN rate control and Small Data Rate Control are distinct functionalities that apply in EPS and 5GS respectively. For PDU sessions supporting interworking with EPC, the SMF/PGW-C shall start APN rate control (if required for the UE's PDN connections to the APN) and stop Small Data Rate Control (if this was performed for the PDU session) upon 5GS to EPS mobility, and vice-versa upon EPS to 5GS mobility, e.g. by:\n-\tupdating the information of the QER associated to the UL/DL PDRs with the packet rates and packet rate status (if available) applicable for APN rate control or Small Data Rate Control respectively, if the same QER is associated to UL/DL PDRs when the UE is in EPC and in 5GC; in this case, the SMF/PGW-C shall also request the UPF/PGW-U to report immediately the packet rate status at the time of the mobility between 5GS and EPS by including the Query Packet Rate Status IE in the PFCP Session Modification Request; or\nNOTE 2:\tRequesting the UPF/PGW-U to report immediately the packet rate status enables to retrieve the current rate status applicable to the source system before the UPF/PGW-U overwrites the QER parameters with the packet rates and packet rate status (if available) applicable to the target system.\n-\tprovisioning different QERs for APN rate control and for Small Data Rate Control, and by associating UL/DL PDRs to the appropriate QER, when the UE is in EPC or in 5GC. In this case, when releasing the PFCP session, the UP function shall include the packet rate status for every QER for which this information has been requested in the corresponding QER Control Indications IE.\nBesides, if the SMF/PGW-C set up additional PDRs in the UP function for S5/S8 tunnels for a PDU session supporting interworking with EPS, these PDRs shall not be associated to the QER used to perform Small Data Rate Control.",
      "chunk_type": "requirement",
      "cross_references": [
        "clause_5.4.15.2",
        "clause_5.2.1"
      ]
    },
    {
      "chunk_id": "ts_29.244_5.4.16.1",
      "section_id": "5.4.16.1",
      "section_title": "General",
      "content": "Support of QoS differentiation for SNPN is described in clause 5.30.2.7 and clause 5.30.2.8 of 3GPP TS 23.501 [28].\nQoS differentiation procedures as described in the following clauses are optional and may be used when:\n-\tUE access to PLMN services via SNPN;\n-\tUE access to SNPN services via PLMN.",
      "chunk_type": "definition",
      "cross_references": [
        "clause_5.30.2.7",
        "ts_23.501_clause_5.30.2.8",
        "ts_23.501"
      ]
    },
    {
      "chunk_id": "ts_29.244_5.4.16.2",
      "section_id": "5.4.16.2",
      "section_title": "Access to PLMN services via SNPN",
      "content": "The N3IWF in the PLMN uses the QoS profile and the Session-AMBR it receives from the SMF in the PLMN along with the mapping agreed in the SLA to derive a specific DSCP value for the User Plane IPsec Child SA.\nThe SMF in SNPN shall provide PDR to the UPF in SNPN, based on the mapping rules including the mapping between the DSCP markings for the IPsec child SAs on NWu and the corresponding QoS requirement of the PLMN. The PDR may include specific DSCP and N3IWF IP address to enable UPF to detect the DL traffic.\nThe SMF in SNPN may provide the QER associated to the PDR to ensure the QoS for the DL traffic if the related QoS Flow has been established in the SNPN. Otherwise, the SMF in SNPN may provide the URR associated to the PDR to request the reporting of the detected DL traffic, which may be used by the SMF in SNPN to trigger the PDU session modification procedure to establish the DL traffic related QoS Flow in SNPN. The URR may include the Reporting trigger \"Start of application\" to enable the UPF sending Usage report with the usage report trigger \"START\" to the SMF upon detection of the DL traffic with such DSCP and N3IWF IP address.\nThe SMF in SNPN may also provide DSCP within the Transport Level Marking IE in the FAR that is associated to the PDR. UPF in SNPN shall perform the DSCP re-marking for the detected traffic and sends the marked packet to the NG-RAN.",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.244_5.4.16.3",
      "section_id": "5.4.16.3",
      "section_title": "Access to SNPN services via PLMN",
      "content": "The N3IWF in the SNPN uses the QoS profile and the Session-AMBR it receives from the SMF in the SNPN along with the mapping agreed in the SLA to derive a specific DSCP value for the User Plane IPsec Child SA.\nThe SMF in PLMN shall provide PDR to the UPF in PLMN, based on the mapping rules including the mapping between the DSCP markings for the IPsec child SAs on NWu and the corresponding QoS requirement of the SNPN. The PDR may include specific DSCP and N3IWF IP address to enable UPF to detect the DL traffic.\nThe SMF in PLMN may provide the QER associated to the PDR to ensure the QoS for the DL traffic if the related QoS Flow has been established in the PLMN. Otherwise, the SMF in PLMN may provide the URR associated to the PDR to request the reporting of the detected DL traffic, which may be used by the SMF in PLMN to trigger the PDU session modification procedure to establish the DL traffic related QoS Flow in PLMN. The URR may include the Reporting trigger \"Start of application\" to enable the UPF sending Usage report with the usage report trigger \"START\" to the SMF upon detection of the DL traffic with such DSCP and N3IWF IP address.\nThe SMF in PLMN may also provide DSCP within the Transport Level Marking IE in the FAR that is associated to the PDR. UPF in PLMN shall perform the DSCP re-marking for the detected traffic and sends the marked packet to the NG-RAN.",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.244_5.4.17",
      "section_id": "5.4.17",
      "section_title": "QoS differentiation for UEs behind RG",
      "content": "Support of QoS differentiation for UEs behind RG is described in clause 4.10 and Annex B of 3GPP TS 23.316 [57].\nQoS differentiation for UEs behind RG may be supported as described in clause 5.4.16.2 for the access to PLMN services via a SNPN, with the PLMN and SNPN being replaced by the UE's 5GC and the RG's 5GC respectively.",
      "chunk_type": "general",
      "cross_references": [
        "ts_23.316_clause_4.10",
        "clause_5.4.16.2",
        "ts_23.316"
      ]
    },
    {
      "chunk_id": "ts_29.244_5.5.1",
      "section_id": "5.5.1",
      "section_title": "General",
      "content": "For EPC and 5GC, F-TEID shall be only allocated by the UP function, see clause 5.8.2.3 of 3GPP TS 23.501 [28].\nThe UP function shall set the FTUP feature flag in the UP Function Features IE (see clause 8.2.25) and the CP function shall request the UP function to allocate the F-TEID. The UP function shall reject a request to establish a new PDR with an F-TEID allocation in the CP function option, with the cause \"Invalid F-TEID allocation option\". As an exception, the UP Function shall accept the PFCP Session Establishment Request message with a PDR including an existing F-TEID to re-establish a PFCP session during a restoration procedure as specified in clause 4.3.2 of 3GPP TS 23.527 [40] and clauses 16.1A.4 and 17.1A.4 of 3GPP TS 23.007 [24].",
      "chunk_type": "definition",
      "cross_references": [
        "ts_23.501_clause_5.8.2.3",
        "clause_8.2.25",
        "ts_23.527_clause_4.3.2",
        "ts_23.501",
        "ts_23.527",
        "ts_23.007"
      ]
    },
    {
      "chunk_id": "ts_29.244_5.5.3",
      "section_id": "5.5.3",
      "section_title": "F-TEID allocation in the UP function",
      "content": "The CP function shall request the UP function to allocate the F-TEID by setting the CHOOSE flag in the Local F-TEID IE of the PDR IE (see Table 7.5.2.2-1). The Source Interface IE indicates for which interface the F-TEID is to be assigned.\nThe CP function may request the UP function to allocate the same F-TEID to several PDRs to be created within one single PFCP Session Establishment Request or PFCP Session Modification Request by:\n-\tsetting the CHOOSE flag in the Local F-TEID IE of each PDR to be created with a new F-TEID; and\n-\tsetting the CHOOSE ID field of the Local F-TEID IE, for each PDR to be created with the same F-TEID, with the same CHOOSE ID value;\nor, if the UP function indicated support of the PDI optimization (see clause 8.2.25), by:\n-\tincluding the Local F-TEID IE only in the Create Traffic Endpoint IE and by setting the CHOOSE flag in the Local F-TEID IE of this IE; and\n-\tincluding the Traffic Endpoint ID in all the PDRs to be created with the same F-TEID.\nIf the PDR(s) is created successfully, the UP function shall return the F-TEID(s) it has assigned to the PDR(s) or to the Traffic Endpoint(s) in the PFCP Session Establishment Response or PFCP Session Modification Response.\nUpon receiving a request to remove a PDR or a Traffic Endpoint, or to delete a PFCP session, the UP function shall free the F-TEID(s) that was assigned to the PDR if there is no more PDR with the same F-TEID, to the Traffic Endpoint or to the PFCP Session.\nWhen using redundant GTP-U transmission on N3/N9 interfaces (see clause 5.24.2), the CP function shall request the UP function to allocate the F-TEID for the redundant GTP-U tunnel following the same requirements as specified in this clause, using the \"Local F-TEID for Redundant Transmission\" IE instead of the \"Local F-TEID\" IE.",
      "chunk_type": "requirement",
      "cross_references": [
        "clause_8.2.25",
        "clause_5.24.2",
        "table_7.5.2.2-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_5.6.1",
      "section_id": "5.6.1",
      "section_title": "General",
      "content": "The following clauses provide details on PFCP Sessions handling.",
      "chunk_type": "definition",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.244_5.6.2",
      "section_id": "5.6.2",
      "section_title": "Session Endpoint Identifier Handling",
      "content": "The SEID uniquely identifies a PFCP session at an IP address of a PFCP entity. The F-SEID is the Fully Qualified SEID and it contains the SEID and IP address. The PFCP endpoint locally assigns the SEID value the peer PFCP side has to use when transmitting message. The SEID values are exchanged between PFCP endpoints using PFCP messages. The PFCP entity communicates to the peer PFCP entity the SEID value at which it expects to receive all subsequent control plane messages related to that PFCP session via the \"F-SEID\" IE.\nThe PFCP session related messages shall share the same F-SEID for the PFCP session. An F-SEID shall be released after the PFCP session is released.",
      "chunk_type": "parameter",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.244_5.6.3",
      "section_id": "5.6.3",
      "section_title": "Modifying the Rules of an Existing PFCP Session",
      "content": "The following principles shall apply, unless specified otherwise in the specification.\nWhen modifying an existing PFCP session, the CP function shall only provide in the PFCP Request message the requested changes compared to what was previously provisioned in the UP function for this PFCP session, i.e. the CP function shall:\n-\tinclude IEs which needs to be newly provisioned in the UP function;\n-\tinclude IEs which need to be provisioned with a modified value;\n-\tremove IEs which need to be removed from the set of parameters previously provisioned in the UP function, as further specified below.\nThe CP function shall remove IEs which needs to be removed by either:\n-\tremoving the entire Rule if no other parameter of that rule needs to remain provisioned in the UP function, e.g. by including the Remove URR IE in the PFCP Session Modification Request; or\n-\tupdating the Rule including the IEs to be removed with a null length, e.g. by including the Update URR IE in the PFCP Session Modification Request with the IE(s) to be removed with a null length. For an IE with multiple occurrences, e.g. when the description of the IE contains the text \"several IEs with the same IE type may be present\", one occurrence of such an IE with a null length shall result in removing all the IEs with the same IE type.\nThe CP function shall set a URR ID and/or QER ID with a length \"0\" in the Update PDR IE within PFCP Session Modification Request, to request the UP function to stop applying the URRs and/or QERs for this PDR.\nUpon receipt of a PFCP Request which modifies an existing PFCP session, the UP function shall add, update or remove the parameters as instructed by the CP function, as defined above, and shall keep unchanged the set of parameters previously provisioned in the UP function which are neither modified nor removed.",
      "chunk_type": "requirement",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.244_5.7.1",
      "section_id": "5.7.1",
      "section_title": "General",
      "content": "This clause specifies lawful interception with PFCP in EPC.",
      "chunk_type": "definition",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.244_5.7.2",
      "section_id": "5.7.2",
      "section_title": "Lawful Interception in EPC",
      "content": "Requirements for support of Lawful Interception with a split SGW or PGW are specified in clauses 12.9 and 20.4 of 3GPP TS 33.107 [20].\nUser plane packets shall be forwarded from the UP function to the SX3LIF (or LMISF for S8HR) by encapsulating the user plane packets using GTP-U encapsulation (see 3GPP TS 29.281 [3]).\nThe CP function shall instruct the UP function to duplicate the packets to be intercepted and to forward them to the SX3LIF (or to the LMISF for S8HR) as specified in clause 5.2.3.\nFor forwarding data from the UP function to the SX3LIF (or LMISF for S8HR), the CP function shall set the DUPL flag in the Apply Action and set the Duplicating Parameters in the FAR, associated to the PDRs of the traffic to be intercepted, with the Destination Interface \"LI Function\" and set to perform GTP-U encapsulation and to forward the packets to a GTP-u F-TEID uniquely assigned in the SX3LIF (or LMISF for S8HR) for the traffic to be intercepted. The SX3LIF (or LMISF for S8HR) shall then identify the intercepted traffic by the F-TEID in the header of the encapsulating GTP-U packet.",
      "chunk_type": "requirement",
      "cross_references": [
        "clause_5.2.3",
        "ts_33.107",
        "ts_29.281"
      ]
    },
    {
      "chunk_id": "ts_29.244_5.7.3",
      "section_id": "5.7.3",
      "section_title": "Lawful Interception in 5GC",
      "content": "Requirements for support of Lawful Interception with SMF and UPF are specified in clause 6.2.3 of 3GPP TS 33.127 [47]. The PFCP protocol is not used for Lawful Interception in 5GC.",
      "chunk_type": "general",
      "cross_references": [
        "ts_33.127_clause_6.2.3",
        "ts_33.127"
      ]
    },
    {
      "chunk_id": "ts_29.244_5.8.1",
      "section_id": "5.8.1",
      "section_title": "General",
      "content": "A PFCP Association shall be set up between the CP function and the UP function prior to establishing PFCP sessions on that UP function. Only one PFCP association shall be setup between a given pair of CP and UP functions, even if the CP and/or UP function exposes multiple IP addresses. A single PFCP association may also be setup between a SMF set and a UPF (see clause 5.22.2).\nThe CP function and the UP function shall support the PFCP Association Setup procedure initiated by the CP function (see clause 6.2.6.2). The CP function and the UP function may additionally support the PFCP Association Setup procedure initiated by the UP function (see clause 6.2.6.3).\nA CP function may have PFCP Associations set up with multiple UP functions. A UP function may have PFCP Associations set up with multiple CP functions.\nIn PFCP signaling, a CP function or a UP function shall be identified by a unique Node ID. A Node ID may be set to an FQDN or to an IP address (either IPv4 or IPv6, see clause 8.2.38). When set to an IP address, it indicates that the CP/UP function only exposes one IP address for the PFCP Association signalling. Once a PFCP association is set up between a CP function and a UP function, the same Node ID as signaled respectively by the CP function and the UP function during the PFCP association setup procedure shall be used in all subsequent PFCP node related messages (other than Heartbeat messages) until the PFCP association is released.\nNOTE 1:\tThe control of a PFCP session can be taken over by a new SMF in an SMF set as specified in clause 5.22. When using the MPAS feature (see clause 5.22.3), when a different SMF takes over the control of the PFCP session, the UP function receives the NODE ID of the new SMF that is different from the NODE ID of the SMF that was handling the PFCP session earlier.\nThe PFCP entities shall accept any new IP address allocated as part of F-SEID other than the one(s) communicated in the Node Id.\nNOTE 2:\tThe source IP address to send PFCP Association Setup request can not be used as the destination IP address when the peer sends a PFCP Association Update Request message, e.g. for a scenario when a NAT is deployed in the network.\nPrior to establishing a PFCP Association, the function responsible for establishing the PFCP Association (e.g. CP function) shall look up a peer function (e.g. UP function), e.g. using DNS procedures (see 3GPP TS 29.303 [25]), NRF procedures (see 3GPP TS 29.510 [43]) or local configuration. If the peer function is found to support multiple IP addresses (in the look up information), one of these addresses (any one) shall be used as destination IP address to send the PFCP Association Setup Request. Once the PFCP Association is established, any of the IP addresses of the peer function (found during the look-up) may then be used to send subsequent PFCP node related messages and PFCP session establishment requests for that PFCP Association.\nNOTE 3:\tThe look up information (e.g. in DNS, NRF or local configuration of the function responsible for establishing the PFCP association) needs to be configured consistently with the addressing information of the peer function. If a FQDN is configured to identify a function in DNS or NRF, then the Node ID of that function included in PFCP messages need to be set to the same FQDN. For instance, if the CP function is responsible for establishing the PFCP association, a UP function that exposes multiple IP addresses (for PFCP node related messages and PFCP session establishment requests) needs to be configured in the look up information as one (single) UP function that is associated to multiple IP addresses. The Node ID needs to be set to an SMF set FQDN when a single association is setup between an SMF set and UPF (see clause 5.22.2).\nNOTE 4:\tPFCP session related messages for sessions that are already established are sent to the IP address received in the F-SEID allocated by the peer function or to the IP address of an alternative SMF in the SMF set (see clause 5.22). The former IP address needs not be configured in the look up information. See clauses 4.3.2 and 4.3.3.",
      "chunk_type": "definition",
      "cross_references": [
        "clause_5.22.2",
        "clause_6.2.6.2",
        "clause_6.2.6.3",
        "clause_8.2.38",
        "clause_5.22",
        "clause_5.22.3",
        "ts_29.303",
        "ts_29.510"
      ]
    },
    {
      "chunk_id": "ts_29.244_5.8.2",
      "section_id": "5.8.2",
      "section_title": "Behaviour with an Established PFCP Association",
      "content": "When a PFCP Association is established with a UP function, the CP function:\n-\tshall provision node related parameters (i.e. parameters that apply to all PFCP sessions) in the UP function, if any, e.g. PFDs;\n-\tshall provision the UP function with the list of features (affecting the UP function behaviour) the CP function supports, if any, e.g. support of load and/or overload control;\n-\tshall check the responsiveness of the UP function using the Heartbeat procedure as specified in clause 6.2.2;\n-\tmay establish PFCP sessions on that UP function;\n-\tshall refrain from attempting to establish new PFCP sessions on the UP function, if the UP function has indicated it will shut down gracefully.\nWhen a PFCP Association is established with a CP function, the UP function:\n-\tshall update the CP function with the list of features it supports;\n-\tshall update the CP function with its load and/or overload control information, if load and/or overload control is supported by the CP and UP functions;\n-\tshall accept PFCP Session related messages from that CP function (unless prevented by other reasons, e.g. overload);\n-\tshall check the responsiveness of the CP function using the Heartbeat procedure as specified in clause 6.2.2;\n-\tshall indicate to the CP function if it will shut down within a graceful period and, when possible, if it fails and becomes out of service;\n-\tmay report UE IP address usage information to the CP function, if UE IP addresses are allocated by the UP function and the UE IP Address Usage Reporting feature is supported by the CP function (see clause 5.21.3.2).",
      "chunk_type": "requirement",
      "cross_references": [
        "clause_6.2.2",
        "clause_5.21.3.2"
      ]
    },
    {
      "chunk_id": "ts_29.244_5.8.3",
      "section_id": "5.8.3",
      "section_title": "Behaviour without an Established PFCP Association",
      "content": "When a PFCP Association is not established with a UP function, the CP function:\n-\tshall reject any incoming PFCP Session related messages from that UP function, with a cause indicating that no PFCP association exists with the peer entity.\nWhen a PFCP Association is not yet established with a CP function, the UP function:\n-\tshall reject any incoming PFCP Session related messages from that CP function, with a cause indicating that no PFCP association exists with the peer entity.",
      "chunk_type": "requirement",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.244_5.9",
      "section_id": "5.9",
      "section_title": "Usage of Vendor-specific IE",
      "content": "Vendor-specific IEs are defined to cover requirements and features not specified by 3GPP.\nNOTE 1:\tWhen an IE is intended to be used by more than one vendor, the definition of the IE is encouraged to be specified by 3GPP to ease implementation and interoperability.\nNOTE 2:\tThe PFCP entities can use Vendor-specific IE(s) in the PFCP message relevant to the PFCP Association Setup procedure to learn which vendor specific enhancements are supported by the peer.\nVendor-specific IE may be sent with any PFCP message. Vendor-specific IE may be added directly to a PFCP message, or by embedding it into a grouped IE.\nIn a network with Vendor specific enhancements, unrecognized vendor specific IEs shall be handled as unknown optional IEs.",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.244_5.10",
      "section_id": "5.10",
      "section_title": "Error Indication Handling",
      "content": "Upon receipt of a GTP-U Error Indication message, the UP function:\n-\tshall identify the related PFCP session for which the message is received; and\n-\tshall initiate a PFCP Session Report procedure, towards the CP function controlling this PFCP session, to send an Error Indication Report including the remote F-TEID signalled in the GTP-U Peer Address IE and the Tunnel Endpoint Identifier Data I IE of the GTP-U Error Indication (see clause 7.3.1 of 3GPP TS 29.281 [3]).\nFor EPC, upon receipt of an Error Indication Report, the CP function shall then identify the bearer for which the Error Indication Report is received using the remote F-TEID included in the report and proceed as specified in clauses 21.7 and 21.8 of 3GPP TS 23.007 [24], i.e.:\n-\tmodify the PFCP session to instruct the UP function to buffer DL packets;\n-\tmodify the PFCP session to delete the PDR and FAR, when having to delete a bearer; or\n-\tdelete the PFCP session, when having to delete the PDN connection.\nFor 5GC, upon receipt of an Error Indication Report, the SMF shall proceed as specified in clause 5.3 of 3GPP TS 23.527 [40].\n5.10A\tUser Plane Path Failure or Recovery Handling\nUpon detection of user plane path failure or recovery, the UP function shall initiate PFCP Node Report procedure, towards the CP function controlling the affected PFCP sessions, to send a User Plane Path Failure Report or a User Plane Path Recovery Report including the IP address of the remote GTP-U peer towards which a user plane path failure or recovery has been detected.\nFor EPC, upon receipt of a User Plane Path Failure Report or a User Plane Path Recovery Report, the CP function shall proceed as specified in clause 20.3 of 3GPP TS 23.007 [24].\nFor 5GC, upon receipt of a User Plane Path Failure Report or a User Plane Path Recovery Report, the SMF shall proceed as specified in clauses 5.4 of 3GPP TS 23.527 [40].",
      "chunk_type": "requirement",
      "cross_references": [
        "ts_29.281_clause_7.3.1",
        "ts_23.527_clause_5.3",
        "ts_23.007_clause_20.3",
        "ts_29.281",
        "ts_23.007",
        "ts_23.527"
      ]
    },
    {
      "chunk_id": "ts_29.244_5.11.1",
      "section_id": "5.11.1",
      "section_title": "General",
      "content": "This clause specifies the support of user plane inactivity detection and reporting.",
      "chunk_type": "definition",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.244_5.11.2",
      "section_id": "5.11.2",
      "section_title": "User plane inactivity detection and reporting per PDN connection or PDU session",
      "content": "Clause 5.4.4.1 of 3GPP TS 23.401 [14] requires the PGW to initiate the release of an inactive emergency PDN connection.\nClauses 4.3.7 and 4.3.2.2.2 of 3GPP TS 23.502 [29] require the SMF to be able to initiate the deactivation of the UP connection of an existing PDU session without user plane activity for a given inactivity period, except for the H-SMF for the home routed roaming scenario or except for an always-on PDU session as described in clause 5.6.8 of 3GPP TS 23.501 [28].\nClauses 4.3.5.7, 4.23.9.4 and 4.23.9.5 of 3GPP TS 23.502 [29] requires the SMF to be able to initiate the deactivation of the UP connection of an existing PDU session in source UL CL or source UPF (e.g. PSA2) if no active traffic over the N9 forwarding tunnel is detected and reported by the Source UL CL. Clause 4.23.9.4 of 3GPP TS 23.502 [29] also requires the SMF to release the N9 forwarding tunnel of an existing PDU session in the target UL CL/BP if no active traffic over the N9 forwarding tunnel is detected and reported by the Source UL CL.\nClause 7.2.5.3 of 3GPP TS 23.247 [72] requires the MB-SMF to be able to initiate the deactivation of an MBS session without user plane activity.\nClauses 5.15.7.4 and 5.15.15.3 of 3GPP TS 23.501 [28] require the SMF that supports network slice usage behaviour control, to be able to configure slice specific inactivity timer for the PDU session at the UPF and initiate the release of the PDU session without user plane activity for a given slice specific inactivity time, based on the User Plane Inactivity Report from the UPF. If the slice specific inactivity timer for the PDU session is updated at SMF, the SMF shall update the UPF with the new inactivity timer for the PDU session.\nNOTE:\tFor multi-access PDU session(s), the PDU session inactivity timer is independent of the access type.\nThe CP function may request the UP function to detect and report when no user plane packets are received for a PFCP session, by provisioning the User Plane Inactivity Timer IE in the PFCP Session Establishment Request or PFCP Session Modification Request. The CP function may update the User Plane Inactivity Timer in the subsequent PFCP Session Modification Request messages.\nUpon being provisioned with this IE, the UP function shall monitor the user plane activity of the PFCP session and report any user plane inactivity exceeding the duration indicated by this IE by sending a PFCP Session Report Request with the Report Type set to UPIR (User Plane Inactivity Report). When the UP function receives an updated User Plane Inactivity Timer from the CP function, the UP function shall immediately update the PDU Session inactivity timer and:\n- \tsend a User Plane Inactivity Report if the user plane inactivity has already exceeded the updated User Plane Inactivity Timer; or\n-\tuse the updated User Plane Inactivity Timer for monitoring user plane activity.\nAfter sending the User Plane Inactivity Report, the UP function shall stop monitoring the user plane activity of the PFCP session (i.e. the UPF shall behave as if the User Plane Inactivity Timer has not been provisioned), and shall then continue to process any further user plane packets as instructed by the rules provisioned for the PFCP session, until receiving any new instruction from the CP function.",
      "chunk_type": "general",
      "cross_references": [
        "ts_23.401_clause_5.4.4.1",
        "ts_23.501_clause_5.6.8",
        "ts_23.502_clause_4.23.9.4",
        "ts_23.247_clause_7.2.5.3",
        "ts_23.401",
        "ts_23.502",
        "ts_23.501",
        "ts_23.247"
      ]
    },
    {
      "chunk_id": "ts_29.244_5.11.3",
      "section_id": "5.11.3",
      "section_title": "User plane inactivity detection and reporting per PDR",
      "content": "Clause 4.23.9.5 of 3GPP TS 23.502 [29] requires the target I-SMF to be able to initiate the release of the N9 forwarding tunnel of an existing PDU session in the target UL CL/BP if no active traffic over the N9 forwarding tunnel is detected and reported by the target UL CL/BP.\nWhen both the CP function and the UP function support the UPIDP feature (see clause 8.2.25), the CP function may request the UP function to detect and report when no user plane packets are received for one or more PDRs, by provisioning a URR including the User Plane Inactivity Timer IE and by associating this URR with the PDR(s) in a PFCP Session Establishment Request or PFCP Session Modification Request.\nUpon being provisioned with this URR, the UP function shall monitor the user plane activity of all the PDR(s) associated with the URR and report user plane inactivity when no traffic has been received for any PDR(s) associated with the URR for the duration indicated in the User Plane Inactivity Timer IE by sending a PFCP Session Report Request with the Report Type set to USAR (Usage Report) and with the Usage Report Trigger IE set to UPINT (User Plane Inactivity Timer).",
      "chunk_type": "general",
      "cross_references": [
        "ts_23.502_clause_4.23.9.5",
        "clause_8.2.25",
        "ts_23.502"
      ]
    },
    {
      "chunk_id": "ts_29.244_5.12",
      "section_id": "5.12",
      "section_title": "Suspend and Resume Notification procedures",
      "content": "Upon receipt of a Suspend Notification message, the PGW-C should request the PGW-U to discard packets received for the suspended PDN connection by:\n-\tsetting the DROP flag in the Apply Action IE of the FARs of the corresponding PFCP session; or\n-\tsetting the gate fields in the Gate Status IE of QERs to the value CLOSED.\nUpon being requested to resume the PDN connection, the PGW-C should re-allow the PGW-U to forward the packets for the PDN connection (unless not permitted for other reasons) by:\n-\tsetting the FORW flag in the Apply Action IE of the FARs of the corresponding PFCP session; or\n-\tsetting the gate fields in the Gate Status IE of QERs to the value OPEN.",
      "chunk_type": "procedure",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.244_5.13.1",
      "section_id": "5.13.1",
      "section_title": "General",
      "content": "An SMF and UPF may support Ethernet PDU sessions, as specified in clause 5.6.10.2 of 3GPP TS 23.501 [28].\nA combined PGW-C/SMF and PGW-U/UPF may support Ethernet PDU sessions as specified in clause 4.3.17.8a of 3GPP TS 23.401 [14] and clause 5.6.10.2 of 3GPP TS 23.501 [28]. In this case, the PGW-C/SMF and PGW-U/UPF shall follow, respectively, the requirements specified for the SMF and UPF by this clause.\nFor a PFCP session set up for an Ethernet PDU session, the SMF shall:\n-\tinclude the PDN Type IE set to \"Ethernet\" in the PFCP Session Establishment Request;\n-\tprovision PDR(s), for uplink and/or downlink traffic, with Ethernet Packet Filter(s), based on at least any combination of:\n-\tSource/destination MAC address;\n-\tEthertype as defined in IEEE 802.3 [31];\n-\tCustomer-VLAN tag (C-TAG) and/or Service-VLAN tag (S-TAG) VID fields as defined in IEEE 802.1Q [30];\n-\tCustomer-VLAN tag (C-TAG) and/or Service-VLAN tag (S-TAG) PCP/DEI fields as defined in IEEE 802.1Q [30];\n-\tIP Packet Filter Set, in case Ethertype indicates IPv4/IPv6 payload;\n-\tEthernet PDU Session Information, only possible for a DL PDR, that identifies all (DL) Ethernet packets matching the PDU session as follows, based on the N6 Ethernet configuration in the UPF for the associated Network Instance (see clause 5.6.10.2 of 3GPP TS 23.501 [28]):\n-\tDL traffic based on the MAC address(es) and/or C-TAG and/or S-TAG used by the UE for the UL traffic, for configurations where more than one PDU Session to the same DNN (e.g. for more than one UE) corresponds to the same N6 interface;\n-\tDL traffic from the N6 interface associated to the PDU session, for configurations where there is a one-to-one relationship between a PDU Session and a N6 interface (in which case the UPF does not need to be aware of MAC addresses and/or C-TAG and/or S-TAG used by the UE in order to route down-link traffic).\nNOTE 1:\tFor instance, the SMF can provision a DL PDR with just an \"Ethernet PDU Session Information\", in a Traffic Endpoint ID or in a PDI, or Ethernet Packet Filters in a PDI, or both an \"Ethernet PDU Session Information\" in a Traffic Endpoint ID and Ethernet Packet Filters in a PDI.\nThe SMF may also request a UPF, acting as a PDU session anchor, to:\n-\tredirect Address Resolution Protocol (ARP) (see IETF RFC 826 [32]) or IPv6 Neighbour Solicitation traffic (see IETF RFC 4861 [33]) to the SMF as specified in clause 5.13.2, or to respond to ARP or IPv6 Neighbour Solicitation based on the local cache information as specified in clause 5.13.3;\n-\treport the MAC (Ethernet) addresses and possibly associated VLAN tag(s) used as source address of frames sent UL by the UE, as specified in clause 5.13.5;\n-\tupdate its list of MAC addresses and possibly associated VLAN tag(s) associated to the PDU session, during an Ethernet PDU session anchor relocation, as specified in clause 5.13.6.\nFor a PFCP session set up for an Ethernet PDU session, the UPF shall:\n-\tdetect Ethernet traffic, based on Ethernet Packet Filter(s) provisioned in PDR(s) by the SMF, and process the Ethernet traffic as instructed in the FAR, QER(s) and URR(s) associated to the PDR(s);\n-\tforward Address Resolution Protocol (see IETF RFC 826 [32]) or IPv6 Neighbour Solicitation messages (see IETF RFC 4861 [33]) to the SMF, as specified in clause 5.13.2, if so required by the SMF;\n-\trespond to Address Resolution Protocol (see IETF RFC 826 [32]) or IPv6 Neighbour Solicitation (see IETF RFC 4861 [33]) based on the local cache information, as specified in clause 5.13.3, if so required by the SMF.\nNOTE 2:\tEthernet Preamble and Start of Frame delimiter are not sent over 5GS.\nNOTE 3:\tHow the UPF/SMF builds the ARP or the IPv6 Neighbour cache is not specified in this release and is implementation specific.",
      "chunk_type": "definition",
      "cross_references": [
        "ts_23.501_clause_5.6.10.2",
        "ts_23.401_clause_4.3.17.8",
        "ts_23.401_clause_5.6.10.2",
        "clause_5.13.2",
        "clause_5.13.3",
        "clause_5.13.5",
        "clause_5.13.6",
        "ts_23.501",
        "ts_23.401"
      ]
    },
    {
      "chunk_id": "ts_29.244_5.13.2",
      "section_id": "5.13.2",
      "section_title": "Address Resolution Protocol or IPv6 Neighbour Solicitation Response by SMF",
      "content": "If the SMF requests the UPF to forward all Address Resolution Protocol (ARP) (see IETF RFC 826 [32]) or IPv6 Neighbour Solicitation (see IETF RFC 4861 [33]) traffic to the SMF to respond to the ARP or IPv6 Neighbour Solicitation based on the local cache information for Ethernet PDU sessions, the SMF shall provision a PDR in the UPF with:\n-\tan Ethernet Packet Filter containing EtherType 2054 (hexadecimal 0x0806) and associate the PDR with a FAR, for forwarding ARP traffic to the SMF; and/or\n-\ta PDI containing an application ID such that the identified application ID matches against EtherType 34525 (hexadecimal 0x86DD), IPv6 Next Header type as 58 and ICMP Field Type as 135 and associate the PDR with a FAR, for forwarding IPv6 Neighbour Solicitation traffic to the SMF.\nIn this case, the user plane packets shall be forwarded between the CP and UP functions by encapsulating the user plane packets using GTP-U encapsulation (see clause 5.3.1).\nThe SMF shall respond to ARP and/or IPv6 Neighbour Solicitation as specified in 3GPP TS 23.501 [28], clause 5.6.10.2 in this case.",
      "chunk_type": "general",
      "cross_references": [
        "clause_5.3.1",
        "ts_23.501_clause_5.6.10.2",
        "ts_23.501"
      ]
    },
    {
      "chunk_id": "ts_29.244_5.13.3",
      "section_id": "5.13.3",
      "section_title": "Address Resolution Protocol or IPv6 Neighbour Solicitation Response by UPF",
      "content": "If the SMF requests the UPF to respond to Address Resolution Protocol (ARP) (see IETF RFC 826 [32]) or IPv6 Neighbour Solicitation (see IETF RFC 4861 [33]) based on the local cache information for an Ethernet PDU session, the SMF shall provision a PDR in the UPF with:\n-\tan Ethernet Packet Filter containing EtherType 2054 (hexadecimal 0x0806) and associate the PDR with a FAR that has the ARP bit in Proxying IE of the Forwarding Parameters IE set to \"1\"; or\n-\ta PDI containing an application ID such that the identified application ID matches against EtherType 34525 (hexadecimal 0x86DD), IPv6 Next Header type as 58 and ICMP Field Type as 135 and associate the PDR with a FAR that has the INS bit in Proxying IE of the Forwarding Parameters IE set to \"1\".\nThe UPF shall respond to ARP and/or IPv6 Neighbour Solicitation as specified in 3GPP TS 23.501 [28], clause 5.6.10.2 in this case.\n5.13.3A\tProvisioning of MAC addresses and SDF filters in Ethernet Packet Filters\nThe provisioning of an SDF Filter in an Ethernet Packet Filter shall follow the requirements specified for provisioning an SDF Filter in clause 5.2.1A.2A.\nNOTE\tThe Ethernet Flow Description received from the PCF is set assuming downlink flows only, see clause 5.6.2.14 of 3GPP TS 29.512 [41]. The CP function uses the flowDirection attribute received from the PCF to determine the actual direction and thus the source interface of the ethernet packet flows described in the Ethernet Flow Description.\nLikewise, the source and destination MAC addresses information, when provisioned, shall be set as for downlink Ethernet flows. The UP function shall apply source and destination MAC addresses information based on the Source Interface of the PDR, according to the same principles as specified in clause 5.2.1A.2A, e.g. swapping the source and destination MAC addresses information if the Source Interface is ACCESS, and applying them as provisioned if the Source Interface is CORE.",
      "chunk_type": "general",
      "cross_references": [
        "ts_23.501_clause_5.6.10.2",
        "clause_5.2.1",
        "ts_29.512_clause_5.6.2.14",
        "ts_23.501",
        "ts_29.512"
      ]
    },
    {
      "chunk_id": "ts_29.244_5.13.4",
      "section_id": "5.13.4",
      "section_title": "Bidirectional Ethernet Filters",
      "content": "The CP function may provision bidirectional Ethernet Filters in the UP function (see table 7.5.2.2-3), i.e. Ethernet filters that may be associated to both uplink and downlink PDRs of a same PFCP session, as follows:\n-\twhen provisioning a bidirectional Ethernet Filter the first time for a PFCP session, the CP function shall set the BIDE (Bidirectional Ethernet Filter) flag in the Ethernet Filter Properties IE and provision the Ethernet filter definition together with a Ethernet Filter ID uniquely identifying the Ethernet Filter among all the Ethernet Filters provisioned for a given PFCP session; the source and destination MAC addresses information, in a bidirectional Ethernet filter, shall be set as for downlink Ethernet flows;\n-\tthe CP function may then provision a PDR for the same PFCP session but the opposite direction, by provisioning the Ethernet Filter ID in the Ethernet filter ID field of the PDI, without provisioning again the Ethernet Filter Properties and Ethernet filter definition.;\n-\twhen being provisioned with a bidirectional Ethernet Filter in a PDR, the UP function shall apply the Ethernet filter according to the direction of the PDR as specified in clause 5.13.3A, i.e. the UP function shall apply the Ethernet filter parameters provisioned for the Ethernet filter ID, but with swapping the source and destination MAC addresses, and the source and destination IP addresses if any, if the PDR is set for uplink Ethernet flows;\n-\tthe UP function shall apply any modification of a bidirectional Ethernet Filter to all PDRs of the PFCP session making use of this Ethernet Filter;\n-\tupon deletion of a PDR making use of a bidirectional Ethernet Filter, the UP function shall still apply the Ethernet Filter for any other PDR making use of the Ethernet Filter.\nThe requirements specified for provisioning of MAC addresses and SDF Filters in clause 5.13.A shall also apply when provisioning bidirectional Ethernet Filters.",
      "chunk_type": "general",
      "cross_references": [
        "clause_5.13.3",
        "clause_5.13",
        "table_7.5.2.2-3"
      ]
    },
    {
      "chunk_id": "ts_29.244_5.13.5",
      "section_id": "5.13.5",
      "section_title": "Reporting of UE MAC addresses to the SMF",
      "content": "In a PFCP Session Establishment Request or a PFCP Session Modification Request, the SMF may request the UPF to start or stop (in a PFCP Sesssion Modification Request only) reporting the UE MAC addresses, i.e. the different MAC (Ethernet) addresses used as source address of frames sent UL by the UE in a PDU Session, by:\n-\tcreating a URR requesting the UPF to report Ethernet traffic information (i.e. with the Reporting Trigger set to 'MAC Addresses Reporting'); and\n-\tassociating the URR to the PDR provisioned for the UL traffic of the PDU session.\nThe SMF may additionally request the UPF to detect and report when no user plane packets are received for an UE MAC address, by provisioning the Ethernet Inactivity Timer IE in the URR.\nWhen being requested to start reporting the UE MAC addresses, the UPF shall:\n-\treport immediately any UE MAC addresses (and possibly their associated VLAN tags) known to be associated to the PDU session (e.g. if the request to start monitoring of traffic is received after the PFCP session establishment and if the UPF monitors the UE MAC addresses for the routing of DL traffic);\n-\treport new UE MAC addresses (and possibly their associated VLAN tags) that are detected subsequently;\n-\treport UE MAC addresses (and possibly their associated VLAN tags) that are removed subsequently from the PDU session, based on the detection of absence of traffic during the Ethernet Inactivity Timer, if this timer is provisioned in the URR.\nNOTE:\tNumerous UE MAC addresses can be used by a same PDU session. The UP function can defer a bit the reporting of newly detected or removed UE MAC addresses to allow the reporting of multiple UE MAC addresses in a same usage report. Details are implementation specific.",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.244_5.13.6",
      "section_id": "5.13.6",
      "section_title": "Ethernet PDU session anchor relocation",
      "content": "The UPF (PSA) of an Ethernet PDU session may be relocated as specified in clause 4.3.5.8 of 3GPP TS 23.502 [29].\nA UPF that supports the Ethernet PDU session relocation procedure shall set the ETHAR bit in the UP Function Features (see clause 8.2.25).\nIf the UPF indicated support of Ethernet PDU session anchor relocation, the SMF may request the UPF to update its list of MAC addresses and possibly associated VLAN tag(s) associated to the PDU session, during an Ethernet PDU session relocation procedure, by sending a PFCP Session Modification Request with Ethernet context information including the MAC addresses (and possibly associated VLAN tag(s)) received from the old Ethernet PDU session anchor.\nUpon receipt of such information, the UPF shall consider these MAC addresses (and possibly associated VLAN tag(s)) as associated to the PDU session and the UPF may assist in the update of Ethernet forwarding tables of Ethernet switches in the DN as specified in clause 4.3.5.8 of 3GPP TS 23.502 [29].",
      "chunk_type": "requirement",
      "cross_references": [
        "ts_23.502_clause_4.3.5.8",
        "clause_8.2.25",
        "ts_23.502"
      ]
    },
    {
      "chunk_id": "ts_29.244_5.14",
      "section_id": "5.14",
      "section_title": "Support IPv6 Prefix Delegation",
      "content": "Clause 5.3.1.2.6 of 3GPP TS 23.401 [14], clause 4.6.2.3 of 3GPP TS 23.316 [57] and clause 5.8.2.2.4 of 3GPP TS 23.501 [28] specify requirements for IPv6 Prefix Delegation via DHCPv6, that allow assigning a single network prefix shorter than the default /64 prefix to a PDN connection or a PDU session.\nThe CP function shall assign, or request the UP function to assign (if the UP function indicates support of the UEIP feature, see clause 8.2.25), the network prefix shorter than the default /64 prefix by provisioning the UE IP Address IE in the UP function with:\n-\tthe IPv6D flag set to \"1\" and the IPv6 Prefix Delegation Bits field indicating the length of IPv6 Prefix for delegation (see clause 8.2.62); or\n-\tthe IP6PL flag set to \"1\" and the IPv6 Prefix Length field indicating the length of IPv6 Prefix for delegation (see clause 8.2.62), if the UP function supports the IP6PL feature (see clauses 5.21.1 and 8.2.25).\nWhen UP function is requested to perform UE IP address allocation and IPv6 prefix delegation is used, the IPv6 prefix length may be determined by the CP function or the UP function:\n-\tif it is determined by the CP function, the IPv6 Prefix Delegation Bits or IPv6 Prefix Length fields shall be set according to the desired IPv6 prefix length by the CP function;\n-\tor if the IPv6 prefix length is determined by the UP function, the CP function shall set the IPv6 Prefix Delegation Bits or IPv6 Prefix Length fields to \"0\".\nNOTE:\tThe IPv6 prefix shorter than the default /64 prefix for IPv6 Prefix Delegation can include the /64 default prefix used for IPv6 stateless autoconfiguration (in EPS and 5GS) or not (5GS). In the former case, the total IPv6 address space available for the PDU Session can be aggregated into one single IPv6 prefix and the UP function needs not support the IP6PL feature. In the latter case, the total IPv6 address space available for the PDU Session cannot be aggregated into one single IPv6 prefix; support of this latter case requires support of the IP6PL feature (see clauses 5.21.1 and 8.2.25).\nWhen assigning additional IPv6 prefixes (i.e. prefixes in addition to the default prefix) to a UE, the CP function shall provision/update the UE IP Address IE in the PDI which may be as part of a Create PDR IE or a Update PDR IE, or in the Create Traffic EndPoint IE or Update Traffic EndPoint IE to the UP function as described above.",
      "chunk_type": "general",
      "cross_references": [
        "ts_23.401_clause_5.3.1.2.6",
        "ts_23.401_clause_4.6.2.3",
        "ts_23.316_clause_5.8.2.2.4",
        "clause_8.2.25",
        "clause_8.2.62",
        "ts_23.316_clause_4.6.2.3",
        "ts_23.501_clause_5.8.2.2.4",
        "ts_23.401",
        "ts_23.316",
        "ts_23.501"
      ]
    },
    {
      "chunk_id": "ts_29.244_5.15",
      "section_id": "5.15",
      "section_title": "Signalling based Trace (De)Activation",
      "content": "The UP function shall set the TRACE feature flag in the UP Function Features IE if it supports Trace (see 3GPP TS 32.422 [35]).\nIf the UP function indicated support of Trace, the CP function may activate a trace session during a PFCP session establishment or a PFCP session modification procedure, by including the Trace Information IE in the PFCP Session Establishment Request or PFCP Session Modification Request. For Streaming based Reporting as defined in 3GPP TS 32.422 [35], the CP function may also include the Trace Collection Entity URI IE in the PFCP Session Establishment Request or PFCP Session Modification Request.\nThe CP function may deactivate an on-going trace session by including the Trace Information IE with a null length in a PFCP Session Modification Request.\nThere shall be at most one trace session activated per PFCP session at a time.\n5.15A\tUE level measurement (De)Activation\n5.15A.1\tGeneral\nA UP function that supports UE level measurements shall set the ULM flag in the UP Function Feature IE. If so, the UP function shall support being instructed to activate/deactivate UE level measurement only, as specified in clause 5.15A.2.\nIf the UP function additionally supports Signalling based Trace, the UP function shall also set the TRACE feature flag in the UP Function Feature IE as specified in clause 5.15, in which case the UP function shall support being instructed to activate/deactivate any of the following:\n-\ttrace only, as specified in clause 5.15; or\n-\tboth trace and UE level measurement, as specified in clause 5.15A.3.\n5.15A.2\tUE level measurement only (De)Activation\nIf the UP function indicated support of UE level measurement by setting the ULM feature flag in the UP Function Features IE, the CP function may activate UE level measurement only (i.e. without trace) during a PFCP session establishment or a PFCP session modification procedure, by including the Trace Information IE and UE Level Measurements Configuration IE with the following information in the PFCP Session Establishment Request or PFCP Session Modification Request:\n-\tTrace Information IE: including MCC, MNC, Trace ID, Session Trace Depth and IP Address of Trace Collection Entity. Triggering Events and List of Interfaces shall not be included, so the Length of Triggering Events and the Length of List of Interfaces shall be set to 0.\n-\tUE Level Measurements Configuration IE: including Job Type with value \"5GC UE Level Measurements only\", Measurement Types and Time Period.\nFor Streaming based Reporting as defined in 3GPP TS 32.422 [35], the CP function may also include the Trace Collection Entity URI IE in the PFCP Session Establishment Request or PFCP Session Modification Request.\nThe CP function may deactivate an on-going UE level measurement only (i.e. without trace) by including the Trace Information IE with a null length in a PFCP Session Modification Request.\nThere shall be at most one UE level measurement activated per PFCP session at a time. If the UPF does not support one or more the requested Measurement Types, the UPF shall ignore the unsupported measurement types and shall not perform UE level measurements for the unknown Measurement types.\n5.15A.3\tSignalling based Trace and UE level measurement (De)Activation\nIf the UP function indicated support of Trace by setting the TRACE feature flag and support of UE level measurement by setting the ULM feature flag in the UP Function Features IE, the CP function may activate both signaling based trace and UE level measurement during a PFCP session establishment or a PFCP session modification procedure, by including the Trace Information IE and UE Level Measurements Configuration IE in the PFCP Session Establishment Request or PFCP Session Modification Request. For Streaming based Reporting as defined in 3GPP TS 32.422 [35], the CP function may also include the Trace Collection Entity URI IE in the PFCP Session Establishment Request or PFCP Session Modification Request. The UE Level Measurements Configuration IE shall then include the Job Type with value \"Trace and 5GC UE Level Measurements\".\nThe CP function may deactivate an on-going UE level measurement and keep the on-going trace session by including the UE Level Measurements Configuration IE with a null length in a PFCP Session Modification Request.\nThe CP function may deactivate an on-going trace session and keep the on-going UE level measurement by including the Trace Information IE and UE Level Measurements Configuration IE with the following information in a PFCP Session Modification Request:\n-\tTrace Information IE: including MCC, MNC, Trace ID, Session Trace Depth and IP Address of Trace Collection Entity. Triggering Events and List of Interfaces shall not be included, so the Length of Triggering Events and the Length of List of Interfaces shall be set to 0\n-\tUE Level Measurements Configuration IE: including Job Type with value \"5GC UE Level Measurements only\", Measurement Types and Time Period.\nThe CP function may deactivate both on-going trace session and UE level measurement by including the Trace Information IE with a null length in a PFCP Session Modification Request.",
      "chunk_type": "requirement",
      "cross_references": [
        "clause_5.15",
        "ts_32.422"
      ]
    },
    {
      "chunk_id": "ts_29.244_5.16",
      "section_id": "5.16",
      "section_title": "Framed Routing",
      "content": "Framed routing allows to support an IP network behind a UE, such that a range of IP addresses or IPv6 prefixes is reachable over a single PDU session, e.g. for enterprise connectivity. Framed routes are IP routes behind the UE. The UPF advertizes relevant IP routes to receive packets destined to these destination IP addresses or IPv6 prefixes and to forward these packets over the PDU session. See clause 5.6.14 of 3GPP TS 23.501 [28], IETF RFC 2865 [37], IETF RFC 3162 [38]) and the Framed-Route, Framed-Routing and Framed-IPv6-Route AVPs specified in 3GPP TS 29.061 [39] and 3GPP TS 29.561 [49].\nFramed routing is defined only for PDN connections and PDU sessions of the IP type (IPv4, IPv6, IPv4v6).\nA UPF may indicate support of framed routing by setting the FRRT flag in the UP Function Features IE. If so, the CP function may include Framed-Route IEs, the Framed-Routing IE and Framed-IPv6-Route IEs in PDRs to describe framed routes associated to the PDU session.\nThe UP function shall:\n-\tmatch the source IP address of packets with IP Address(es) or IPv6 prefixes as indicated in the the Framed-Route IE or Framed-IPv6-Route IE if it is provisioned in a UL PDRs;\n-\tmatch the destination IP address of packets with IP Address(es) or IPv6 prefixes as indicated in the the Framed-Route IE or Framed-IPv6-Route IE if it is provisioned in a DL PDRs.",
      "chunk_type": "general",
      "cross_references": [
        "ts_23.501_clause_5.6.14",
        "ts_23.501",
        "ts_29.061",
        "ts_29.561"
      ]
    },
    {
      "chunk_id": "ts_29.244_5.17.1",
      "section_id": "5.17.1",
      "section_title": "Introduction",
      "content": "The following clauses describe the 5GS specific functionalities of a UP function.",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.244_5.17.2",
      "section_id": "5.17.2",
      "section_title": "Uplink Classifier and Branching Point",
      "content": "The Uplink Classifier and Branching Point functionalities refer to the capability of the UPF to route uplink traffic flows of the same PFCP session (PDU session) to two or more PDU Sessions Anchors, and to route the downlink traffic flows from these PDU Session Anchors on the tunnel towards the UE. They are defined in 3GPP TS 23.501 [28] and 3GPP TS 23.502 [29].\nUplink Classifier is supported for PDU sessions of type IPv4, IPv6, IPv4v6 or Ethernet. The routing of the uplink traffic flows to different PDU Session Anchors is based e.g. on the destination IP address/Prefix of the uplink packets for an IP PDU session.\nBranching Point is supported for multi-homed PDU sessions of type IPv6, i.e. PDU sessions with multiple IPv6 prefixes. The routing of the uplink traffic flows to different PDU Session Anchors is based on the source IP prefix of the uplink packets.\nThe SMF may insert an Uplink Classifier or Branching Point, during a PDU session establishment or modification, by provisioning:\n-\ttwo or more UL PDRs, with the appropriate Packet Detection Information, and with corresponding FARs to route the uplink traffic flows towards the appropriate PDU Session Anchors;\n-\ttwo or more DL PDRs, with the appropriate Packet Detection Information, and with one (or more FARs) to route the downlink traffic flows on the tunnel towards the UE.\nNOTE 1:\tThis uses the generic functionalities of the PFCP protocol described in this specification, with two or more DL PDRs (for the traffic coming from the different PDU session anchors).\nNOTE 2:\tA UPF acting as an Uplink Classifier or Branching Point can also behave as a PDU Session Anchor for the PDU session.\nThe SMF may remove an Uplink Classifier or Branching Point, during a PDU session modification, by removing the UL (or modifying the FAR associated to the UL PDR) and DL PDRs that were setup for the traffic to/from the PDU Session Anchor(s) to be removed.",
      "chunk_type": "general",
      "cross_references": [
        "ts_23.501",
        "ts_23.502"
      ]
    },
    {
      "chunk_id": "ts_29.244_5.17.3",
      "section_id": "5.17.3",
      "section_title": "Data forwarding during handovers between 5GS and EPS",
      "content": "Downlink data may be forwarded during an inter-system handover between 5GS and EPS using direct or indirect data forwarding.\nNOTE:\tUplink data is not forwarded during an inter-system handover between 5GS and EPS in this release of the specification.\nDirect data forwarding is performed directly between the source and target RAN, without the involvement of any UPF to forward the data.\nIndirect data forwarding during handovers between 5GS and EPS is supported as follows (see 3GPP TS 38.300 [42]):\n-\tFor 5G to 4G handover, the source NG-RAN node sends one or several end markers including one QFI of those QoS flows mapped to the same E-RAB and sends the end marker packets to the UPF over the PDU session tunnel. UPF removes the QFI and maps to an appropriate E-RAB tunnel towards SGW.\n-\tFor 4G to 5G handover, the source eNB forwards the received end markers in the EPS bearer tunnel to the SGW which forwards them to the UPF. The UPF adds one QFI among the QoS flows mapped to that E-RAB to the end markers and sends those end markers to the target NG-RAN node in the per PDU session tunnel.\nTo forward data (G-PDUs and End Marker packets) during a 5GS to EPS handover, the SMF shall:\n-\tprovision one PDR per E-RAB (that supports data forwarding for at least one QoS flow), with the list of QFIs that are mapped to the E-RAB;\n-\trequest the UPF to remove the GTP-U PDU Session Container extension header (including the QFI) from the data by including the GTP-U Extension Header Deletion field set to 'PDU Session Container' in the Outer Header Removal IE of the PDR(s);\n-\tassociate to each PDR a FAR to forward the data to the GTP-U tunnel of the corresponding E-RAB, i.e. with an Outer Header Creation IE containing the F-TEID of the (forwarding) SGW for the corresponding forwarding GTP-U tunnel.\nTo forward data (G-PDUs and End Marker packets) during an EPS to 5GS handover, the SMF shall:\n-\tprovision one PDR per E-RAB (that supports data forwarding for at least one QoS flow);\n-\tcreate and associate one QER with each PDR, including the QFI IE set to the QFI value of one of the QoS flows mapped to the E-RAB, to request the UPF to insert a GTP-U PDU Session Container extension header including the QFI;\n-\tcreate one FAR for each data forwarding tunnel in 5GS (i.e. per PDU session), with an Outer Header Creation IE containing the F-TEID of the target NG-RAN for the corresponding forwarding GTP-U tunnel;\n-\tassociate each PDR to the corresponding FAR (i.e. to forward the data of each E-RAB to the data forwarding tunnel of the corresponding PDU session).",
      "chunk_type": "general",
      "cross_references": [
        "ts_38.300"
      ]
    },
    {
      "chunk_id": "ts_29.244_5.18.1",
      "section_id": "5.18.1",
      "section_title": "General",
      "content": "To ensure no loss of usage reports and signalling efficiency, during a PFCP Association Release procedure, which is either initiated by CP function, or upon request from the UP function, the CP function and UP function may support the Enhanced PFCP Association Release feature (EPFAR) as described below.\nWhen both the CP function and the UP function support the EPFAR feature, and when the CP (or UP) function determines that the PFCP association is to be released, the CP (or UP) function shall send a PFCP Association Update Request message with a \"PFCP Association Release Preparation Start\" flag to inform the peer UP (or CP) function that the PFCP Association is going to be released and the final non-zero usage reports are to be collected for these PFCP sessions which will be affected by PFCP association release.\nThe CP function should stop establishing new PFCP sessions in the UP function after receiving or sending a PFCP Association Release Preparation Start indication. The CP(or UP) function shall send a PFCP Association Update Response with a successful cause value to the peer.\nThen the UP function shall initiate the PFCP Session Release procedure as specified in clause 5.18.2 by sending one or more PFCP Session Report Request messages for the PFCP sessions affected by the release of the PFCP association and that have non-zero usage reports to be reported. In the PFCP Session Report Request message, the UP function shall:\n-\tset the Usage Report Trigger to TEBUR (Termination By UP function Report) for the usage reports being reported; and\n-\tset the PSDBU (PFCP Session Deleted By the UP function) flag to \"1\" to indicate to the CP function that the PFCP Session is being deleted in the UP function and the usage reports included in the message are the final usage reports for the given PFCP Session, if this is the last PFCP Session Report Request message sent for the PFCP session.\nWhen the UP function has sent all the non-zero usage reports for the PFCP sessions affected by the release of the PFCP Association, the UP function shall send a PFCP Association Update Request with the flag URSS (non-zero Usage Reports for the affected PFCP Sessions Sent) set to \"1\" to indicate to the CP function that all non-zero usage reports for the affected PFCP sessions have been sent to the CP function and the corresponding PFCP sessions in the UP function have been locally deleted. The CP function shall then send a PFCP Association Update Response with a successful cause to the peer to indicate the PFCP Association Update Request is handled successfully.\nThe CP function shall then send a PFCP Association Release Request to release the PFCP Association as specified in clause 6.2.8.\nThe Enhanded PFCP Association Release procedure shall not be used by SMFs of an SMF set, when using the MPAS feature (Multiple PFCP Associations to the SMFs in an SMF set) defined in clause 5.22.3, unless the PFCP association being released is the last PFCP association that was established between the UPF and any SMF of the SMF set.\nNOTE:\tThe PFCP sessions are taken over by different SMFs of the SMF set, and not released, when using the MPAS feature, if there is at least another PFCP association remaining established between the UPF and any SMF of the SMF set.",
      "chunk_type": "definition",
      "cross_references": [
        "clause_5.18.2",
        "clause_6.2.8",
        "clause_5.22.3"
      ]
    },
    {
      "chunk_id": "ts_29.244_5.18.2",
      "section_id": "5.18.2",
      "section_title": "UP Function Initiated PFCP Session Release",
      "content": "When the UP function needs delete a PFCP sesssion, e.g. during the Enhanced PFCP Association Release as described in clause 5.18.1 or when it detects an error or partial failure, the UP function shall:\n-\tsend one or more PFCP Session Report Request messages for this PFCP session;\n-\tset the Report Type to \"USAR\" (Usage Report) if there is non-zero usage report for the PFCP session, or set the Report Type to \"UISR\" if there is no usage report to send (e.g. for a session without an URR provisioned or with an URR provisioned but with only null usage measurements);\n-\tset the Usage Report Trigger to \"TEBUR\" for non-zero usage report(s), if usage reports are included in the PFCP Session Report Request message(s); and\n-\tset the PSDBU flag to \"1\" to indicate to the CP function that the PFCP session is being deleted, in the last PFCP Session Report Request message sent for that PFCP session.\nNOTE:\tThe UP Function can release one or more PFCP Sessions (without tearing down the entire PFCP Association) when there is a partial failure in the UP Function.",
      "chunk_type": "requirement",
      "cross_references": [
        "clause_5.18.1"
      ]
    },
    {
      "chunk_id": "ts_29.244_5.19",
      "section_id": "5.19",
      "section_title": "Activation and Deactivation of Pre-defined PDRs",
      "content": "To reduce the signalling overhead for establishing a PFCP session (for a PDU session or a PDN connection) and improve the signalling efficiency, the CP and UP functions may support the Activation and Deactivation of a Pre-defined PDR (ADPDP) feature as described below.\nWhen both the CP function and the UP function support the ADPDP feature, the CP function may activate one or more pre-defined PDRs for a PFCP session during a PFCP Session Establishment or a PFCP Session Modification procedure. A pre-defined PDR shall be configured in the UP function before it can be activated in a PFCP session.\nA pre-defined PDR may contain all the necessary packets detection information to identify a service data flow or application traffic which may be common to many PFCP sessions, and it may be configured in the UPF associated with a pre-defined FAR, one or more pre-defined QER(s), and/or one or more pre-defined URR(s).\nAny PFCP session specific information, e.g. traffic endpoint information, may not be part of a pre-defined PDR and is provisioned before or during the activation of the pre-defined PDR.\nTo activate one or more pre-defined PDR(s), the CP function shall provide one or more Activate Predefined Rules IE(s) in a Create PDR IE in a PFCP Session Establishment Request, or in a Create PDR IE or an Update PDR IE in a PFCP Session Modification Request message, that references a pre-defined PDR configured in the UP function, with the following information in the Create PDR or Update PDR IE:\n-\tthe traffic endpoint that the traffic shall match (e.g. Local F-TEID, UE IP Address or Traffic Endpoint ID);\n-\toptionally the QFI that the traffic shall match, e.g. for a UL PDR where UL QoS flow binding verification is required (see clause 5.4.2);\n-\tthe precedence to be applied by the UP function among all PDRs of the PFCP session;\n-\toptionally, an FAR containing instructions related to the processing of the packets matching the pre-defined PDR(s); when present, the UP function shall enforce it instead of the one defined in the pre-defined PDR(s) if any;\n-\toptionally, one or more URRs to be used in addition to any URR(s) specified in the pre-defined PDR(s) (e.g. for session level Usage Monitoring);\n-\toptionally, one or more QERs to be applied in addition to any QER(s) specified in the pre-defined PDR (e.g. for APN-AMBR enforcement).\nWhen a pre-defined PDR is activated for a given PDR, an incoming packet matches the PDR if it matches the traffic endpoint, and the QFI if provisioned and one of the activated pre-defined PDR(s).\nThe CP function may update the use of pre-defined PDRs that are already activated in a PFCP session by including one or more Activate Predefined Rules IE(s) or Deactivate Predefined Rules IE(s) in a PFCP Session Modification Request and/or by updating the parameters provisioned in the PDR.\nNOTE:\tThe CP function cannot change a pre-defined PDR via PFCP session related procedure.\nThe CP function may deactivate a pre-defined PDR that is already activated in a PFCP session by including the Deactivate Predefined Rules IE in a PFCP Session Modification Request requesting to deactivate the predefined PDR(s).\nIn addition, this feature allows to define a group of pre-defined PDRs which can be activated, updated, and deactivated together. This allows the CP function to further optimize the signaling towards the UP function.\nTo activate, update, or deactivate a group of pre-defined PDRs, the CP shall follow the same procedure as for activating, updating, and deactivating a pre-defined PDR, but it shall use an Activate Predefined Rules IE that refers to a group of pre-defined PDRs.",
      "chunk_type": "general",
      "cross_references": [
        "clause_5.4.2"
      ]
    },
    {
      "chunk_id": "ts_29.244_5.20.1",
      "section_id": "5.20.1",
      "section_title": "General",
      "content": "The Access Traffic Steering, Switching and Splitting (ATSSS) feature is an optional feature that may be supported by the SMF and the UPF.\nThe (ATSSS feature enables the support of Multi-Access (MA) PDU sessions, using one 3GPP access network or one non-3GPP access network at a time, or simultaneously using one 3GPP access network and one non-3GPP access network as defined in clauses 4.2.10 and 5.32 of 3GPP TS 23.501 [28].\nA Multi-Access (MA) PDU session may support:\n-\tboth 3GPP access and non-3GPP access connected to 5GC, as specified in clause 4.22.2.1 and 4.22.2.2 of 3GPP TS 23.502 [29];\n-\t3GPP access connected to EPC and non-3GPP access connected to 5GC, as specified in clause 4.22.2.3 of 3GPP TS 23.502 [29], subject to corresponding support by the UE; or\n-\tnon-3GPP access connected to ePDG/EPC and 3GPP access connected to 5GC, as specified in clause 5.32.1 of 3GPP TS 23.501 [23] and clause 4.22.2.4 of 3GPP TS 23.502 [29], subject to corresponding support by the UE.\nNOTE:\tMulti-access connectivity using ATSSS established via EPC only is not supported. For the MA PDU session over 3GPP access in 5GC and non-3GPP access in EPS, when a UE moves from NG-RAN/5GC to E-UTRAN/EPC, the SMF+PGW-C can keep or release the MA PDU Session based on operator policy, as specified in clause 5.32.7.2 of 3GPP TS 23.501 [23].\nThe non-3GPP access network connected to 5GC may be an untrusted non-3GPP access network, a trusted non-3GPP access network or a wireline 5G access network.\nWhen establishing a PFCP session for an MA PDU session, the SMF (H-SMF for a HR PDU session) shall:\n-\tselect a PSA (UPF) supporting ATSSS (see MPTCP, MPQUIC and ATSSS-LL flags in UP Function Features, Table 8.2.25-1), i.e. ATSSS-LL, MPTCP, MPQUIC or all, and, if necessary, supporting the Redundant steering mode (see REDSM flag in UP Function Features, Table 8.2.25-1);\n-\tprovision in the PSA (UPF) one Multi-Access Rule (MAR) for every downlink PDR matching non-GBR traffic sent towards the UE. See clause 5.2.7 for the handling of a MAR for non-GBR traffic; and\n-\tprovision in the PSA (UPF) one Multi-Access Rule (MAR) for every downlink PDR matching GBR traffic sent towards the UE, if the Steering Mode is \"Redundant\". See clause 5.2.7 for the handling of a MAR for GBR traffic.\nFor ATSSS for a MA PDU session with both 3GPP access and non-3GPP access connected to 5GC, two distinct N3/N9 tunnels shall be established for each access network of the MA PDU session by:\n-\tproviding two UL PDRs to the PSA UPF in PFCP Session Establishment Request or PFCP Session Modification Request message, e.g. PDR-1 for UL data from 3GPP access and PDR-2 for UL data from non-3GPP access, to trigger the PSA UPF to allocate two N3/N9 UL CN tunnels as specified in clause 4.22.2.1 and clause 4.22.3.2 of 3GPP TS 23.502 [29];\n-\tproviding two FARs in one MAR associated to the DL PDR to the PSA UPF in PFCP Session Establishment Request or PFCP Session Modification Request message, e.g. FAR-1 for DL data forwarding to 3GPP access and FAR-2 for DL data forwarding to non-3GPP access.\nFor ATSSS for a MA PDU session with one access connected to 5GC and one access connected to EPC, distinct GTP-U tunnels shall be established for each access network of the MA PDU session, as described above for the case of ATSSS with both accesses connected to 5GC, with the following additions:\n-\tthe GTP-U tunnels shall be established over N3/N9 (for the access connected to 5GC) and S5-U/S8-U or S2b-U (for the access connected to EPC); and\n-\tseveral GTP-U tunnels may be established over S5-U/S8-U or S2b-U to manage dedicated bearers for the access connected to EPC; accordingly, more than two UL PDRs and DL FARs may be provisioned by the SMF/PGW-C in the UPF/PGW-U. The MAR associated with a given DL PDR shall refer to one DL FAR for sending the DL traffic towards the 5GC access and to one DL FAR for sending the DL traffic towards the EPS bearer to which the QoS flow is mapped. Different MARs of the MA PDU session associated with different DL PDRs may refer to the same DL FAR for DL traffic sent towards the 5GC access and to the same or different DL FARs for the DL traffic sent to the EPC access (same DL FAR for the DL traffic sent to the EPC access when the QoS flows are mapped to the same EPS bearer).",
      "chunk_type": "definition",
      "cross_references": [
        "ts_23.502_clause_4.22.2.1",
        "ts_23.502_clause_4.22.2.3",
        "ts_23.501_clause_5.32.1",
        "ts_23.501_clause_4.22.2.4",
        "ts_23.501_clause_5.32.7.2",
        "clause_5.2.7",
        "clause_4.22.2.1",
        "ts_23.502_clause_4.22.3.2",
        "table_8.2.25-1",
        "ts_23.502_clause_4.22.2.4",
        "ts_23.501",
        "ts_23.502"
      ]
    },
    {
      "chunk_id": "ts_29.244_5.20.2.1",
      "section_id": "5.20.2.1",
      "section_title": "General",
      "content": "The SMF shall instruct the UPF(PSA) to activate MPTCP steering functionality for a given MA-PDU session if MPTCP needs to be used for TCP traffic flows.\nThe UPF(PSA) shall allocate resources for MPTCP steering functionality (e.g. MPTCP Proxy address, MPTCP link-specific multipath IP addresses, etc.), and perform traffic steering, switching and splitting according to the instructions from the SMF.",
      "chunk_type": "definition",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.244_5.20.2.2",
      "section_id": "5.20.2.2",
      "section_title": "Activate MPTCP functionality and Exchange MPTCP Parameters",
      "content": "If MPTCP steering functionality is required for a Multi-Access PDU session, the SMF shall send MPTCP Control Information to the UPF in PFCP Session Establishement Request, to instruct the UPF to activate the MPTCP functionality for this PFCP session. The SMF may also request to activate the PMF functionality for this PFCP session by sending PMF Control Information to the UPF. As a result, the UPF(PSA) shall allocate necessary resources for MPTCP and PMF and return the corresponding MPTCP and PMF Parameters (e.g. MPTCP IP address and port, MPTCP link-specific multipath IP addresses, PMF IP address and port, etc.) to the SMF in PFCP Session Establishement Response. The SMF may also activate the MPQUIC functionality for this PFCP session as specified in clause 5.20.2A.2.\nThe SMF may send MPTCP Control Information and/or PMF Control Information (and/or MPQUIC Control Information if the MPQUIC functionality is also activated) to the UPF in PFCP Session Modification Request, with updated value, e.g. if the SMF receives updated ATSSS rules from the PCF.\nNOTE 1:\tSuch MPTCP Parameters received by the SMF are sent to the UE together with the ATSSS rules, as specified in 3GPP TS 24.193 [59].\nWhen provisioning an UL PDR for user plane traffic for which MPTCP is applicable, the SMF shall include an Multipath Applicable Indication IE with the MTAI flag set to \"1\" in the Create PDR IE.\nNOTE 2:\tThis indication can be used by the UPF to prepare itself for the reception of MPTCP traffic for the PDU session.",
      "chunk_type": "parameter",
      "cross_references": [
        "clause_5.20.2",
        "ts_24.193"
      ]
    },
    {
      "chunk_id": "ts_29.244_5.20.2.3",
      "section_id": "5.20.2.3",
      "section_title": "Control of Multipath TCP Connection Establishment by MPTCP Proxy",
      "content": "When MPTCP steering functionality is utilized, TCP connection establishment and data exchange between an UE and a remote host shall be proxied by the MPTCP Proxy in the UPF (PSA), using the mechanism specified in IETF RFC 8684 [62] and IETF RFC 8803 [60].\nOnce Multipath TCP connection is set up, the MPTCP Proxy shall store the MPTCP session entry which includes the following information:\n-\tMPTCP link-specific multipath IP addresses and the associated TCP ports;\n-\tUE's MA-PDU session IP address and its TCP port, if the MA-PDU session IP address is used by the MPTCP Proxy for IP translation;\n-\tthe N6 routable IP address and its TCP port, if N6 routable IP address is used by the MPTCP Proxy for IP translation;\n-\tthe remote host IP address and its TCP port.\nThe stored MPTCP session entry is used by MPTCP Proxy for subsequent IP translation when receiving uplink or downlink MPTCP traffic.\nAn UPF implementation may use N6 routable IP address instead of UE's MA-PDU session IP address for IP translation.\nNOTE:\tThe DL PDR from the SMF for MPTCP traffic carries the UE's MA-PDU session IP address. If the UPF uses a different N6 routable IP address, it is UPF implementation specific how to match DL PDRs for MPTCP traffic with downlink MPTCP traffic received with the destination address set to the N6 routable IP address.",
      "chunk_type": "requirement",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.244_5.20.2.4",
      "section_id": "5.20.2.4",
      "section_title": "Traffic Steering and IP Translation by MPTCP Proxy",
      "content": "Once traffic for which MPTCP is applicable is detected by the UPF, the UPF shall internally forward this traffic to the MPTCP Proxy for IP translation. The MPTCP Proxy shall use the stored information in MPTCP session entry to perform IP translation to the detected MPTCP IP packets, e.g. replace the source IP address+port and/or destination IP address+port accordingly.\nThe UPF may detect the uplink IP packets for which MPTCP is applicable by checking whether the UL PDR matching the user plane traffic is set with an Multipath Applicable Indication, or (UPF implementation choice) by checking whether the source or destination IP address of the user plane packets (after removing the GTP-U header) correspond to MPTCP link-specific multipath IP address(es) and the MPTCP proxy IP address.\nThe UPF may detect the downlink IP packets for which MPTCP is applicable, by checking the information in the associated MAR (e.g. checking if the steering functionality is set to MPTCP) or by checking the destination IP address.\n5.20.2A\tMPQUIC functionality\n5.20.2A.1\tGeneral\nThe SMF shall instruct the UPF(PSA) to activate MPQUIC steering functionality for a given MA-PDU session if MPQUIC needs to be used for UDP traffic flows.\nThe UPF(PSA) shall allocate resources for MPQUIC steering functionality (e.g. MPQUIC Proxy address, MPQUIC link-specific multipath IP addresses, etc.), and perform traffic steering, switching and splitting according to the instructions from the SMF.\n5.20.2A.2\tActivate MPQUIC functionality and Exchange MPQUIC Parameters\nIf MPQUIC steering functionality is required for a Multi-Access PDU session and if the UPF indicates supports of the MPQUIC feature (see clause 8.2.25), the SMF shall send MPQUIC Control information to the UPF in PFCP Session Establishment Request, to instruct the UPF to activate the MPQUIC functionality for this PFCP session. The SMF may also request to activate the PMF functionality for this PFCP session by sending PMF Control Information to the UPF. As a result, the UPF(PSA) shall allocate necessary resources for MPQUIC and PMF and return the corresponding MPQUIC Parameters (e.g. MPQUIC IP address and port, MPQUIC link-specific multipath IP address) and PMF Parameters (e.g. PMF IP address and port, etc.) to the SMF in PFCP Session Establishment Response. The SMF may also activate the MPTCP functionality for this PFCP session as specified in clause 5.20.2.2.\nThe SMF may send MPQUIC Control Information and/or PMF Control Information (and/or MPTCP Control Information if the MPTCP functionality is also activated) to the UPF in PFCP Session Modification Request, with updated value, e.g. if the SMF receives updated ATSSS rules form the PCF.\nNOTE 1: Such MPQUIC Parameters received by the SMF are sent to the UE together with the ATSSS rules, as specified in 3GPP TS 24.193 [59].\nWhen provisioning an UL PDR for user plane traffic for which MPQUIC is applicable, the SMF shall include a Multipath Application Indication IE with the MQAI flag set to \"1\" in the Create PDR IE.\nNOTE 2: This indication can be used by the UPF to prepare itself fo the reception of MPQUIC traffic for the PDU session.\n5.20.2A.3\tControl of Multipath QUIC Connection Establishment by MPQUIC Proxy\nWhen the MPQUIC steering functionality is utilized, the UDP connection establishment and data exchange between the UE and a remote host shall be proxied by the MPQUIC Proxy in the UPF(PSA), as specified in clause 5.32.6.2.2 of 3GPP TS 23.501 [28] and clause 6.1.4.1.0 of 3GPP TS 24.193 [59].\nOnce a multipath QUIC connection is set up, the MPQUIC Proxy shall store the MPQUIC session entry which includes the following information:\n-\tMPQUIC link-specific multipath IP addresses and the associated UDP ports;\n-\tUE's MA-PDU session IP address and its UDP port, if the MA-PDU session IP address is used by the MPQUIC Proxy for IP translation;\n-\tthe N6 routable IP address and its UDP port, if N6 routable IP address is used by the MPQUIC Proxy for IP translation;\n-\tthe remote host IP address and its UDP port;\n-\tthe QFI associated with the multipath QUIC connection.\nNOTE 1:\tThe UE establishes as many multipath QUIC connections with the MPQUIC Proxy in the UPF(PSA) as the number of QoS flows of the MA PDU session, and each multipath QUIC connection carries the UDP traffic mapped to a single QoS flow, as specified in clause 5.32.6.2.2 of 3GPP TS 23.501 [28] and clause 6.1.4.1.0 of 3GPP TS 24.193 [59].\nNOTE 2:\tAll the multipath QUIC connections established with the MPQUIC Proxy for the same PDU session share the same MPQUIC link-specific multipath IP addresses and associated UDP ports, and the same UE's MA-PDU session IP address and UDP port.\nThe stored MPQUIC session entry shall be used by the MPQUIC Proxy for subsequent IP translation when receiving uplink or downlink MPQUIC traffic.\nA UPF implementation may use N6 routable IP address instead of UE's MA-PDU session IP address for IP translation.\nNOTE 3:\tThe DL PDR from the SMF for MPQUIC traffic carries the UE's MA-PDU session IP address. If the UPF uses a different N6 routable IP address, it is UPF implementation specific how to match DL PDRs for the downlink MPQUIC traffic received with the destination address set to the N6 routable IP address.\n5.20.2A.4\tTraffic Steering and IP Translation by MPQUIC Proxy\nOnce traffic for which MPQUIC is applicable is detected by the UPF, the UPF shall internally forward this traffic to the MPQUIC Proxy for IP translation. The MPQUIC Proxy shall use the stored information in MPQUIC session entry to perform IP translation to the detected MPQUIC IP packets, e.g. replace the source IP address+port and/or destination IP address+port accordingly.\nThe MPQUIC Proxy shall send the DL traffic of a QoS flow using the multipath QUIC connection associated with the corresponding QoS flow.\nThe UPF may detect the uplink IP packets for which MPQUIC is applicable by checking whether the UL PDR matching the user plane traffic is set with a Multipath Applicable Indication, or (UPF implementation choice) by checking whether the source or destination IP address of the user plane packets (after removing the GTP-U header) correspond to MPQUIC link-specific multipath IP address(es) and the MPQUIC proxy IP address.\nThe UPF may detect the downlink IP packets for which MPQUIC is applicable, by checking the information in the associated MAR (e.g. checking if the steering functionality is set to MPQUIC) or by checking the destination IP address.",
      "chunk_type": "requirement",
      "cross_references": [
        "clause_8.2.25",
        "clause_5.20.2.2",
        "ts_23.501_clause_5.32.6.2.2",
        "ts_23.501_clause_6.1.4.1.0",
        "ts_24.193_clause_6.1.4.1.0",
        "ts_24.193",
        "ts_23.501"
      ]
    },
    {
      "chunk_id": "ts_29.244_5.20.3.1",
      "section_id": "5.20.3.1",
      "section_title": "Activate ATSSS-LL functionality and Exchange ATSSS-LL Parameters",
      "content": "If ATSSS-LL steering functionality is required for a Multi-Access PDU session, the SMF shall send ATSSS-LL Control Information to the UPF in PFCP Session Establishment Request, to instruct the UPF to activate the ATSSS-LL functionality for this PFCP session. The SMF may also request to activate the PMF functionality for this PFCP session by sending PMF Control Information to the UPF.\nIf PMF functionality is required to be activated for this MA PDU session, the SMF shall set the PMFI flag to 1 in the PMF Control Information IE, regardless whether per QoS flow access performance measurement is required. In addition, if the SMF determines that per QoS flow access performance measurements shall be applied for the MA PDU session, e.g. the threshold value(s) are received from PCF for the UL and/or DL traffic of the QoS flow, the SMF shall set the PQPM flag to 1 together with a list of QFI values for the QoS flows for which access performance measurements may be performed in the PMF Control Information IE.\nUpon receiving the request from the SMF with indicating ATSSS-LL Control Information IE and PMF Control Information IE, the UPF(PSA) shall allocate necessary resources for ATSSS-LL and PMF and return the corresponding ATSSS-LL and PMF Parameters (e.g. PMF IP address and port, etc) to the SMF in PFCP Session Establishment Response:\n-\tIf per access performance measurements are required, i.e. PMFI flag set to 1 in the PMF Control Information IE, the UPF(PSA) shall allocate a default pair of access specific UDP ports (i.e. for IP PDU sessions) or MAC addresses (i.e. for Ethernet PDU sessions) and report them to the SMF in the PMF Address Information IE of a PMF Parameters IE not including the QoS flow identifier IE.\n-\tIf per QoS flow access performance measurements are required, i.e. PQPM flag is set to 1 in addition and a list of QFIs are indicated in the PMF Control Information IE, the UPF(PSA) shall allocate access specific UDP ports (i.e. for IP PDU sessions) or MAC addresses (i.e. for Ethernet PDU sessions) for each QoS flow indicated in the PMF Control Information and, for each QoS flow, report them to the SMF in the PMF Address Information IE of a PMF Parameters IE including the QoS flow identifier IE set to the corresponding QFI.\nIf the SMF provisions the UPF to apply ATSSS-LL in downlink with \"Smallest Delay\" steering mode, the UE does not support PMF RTT measurements (see clause 5.32.2 of 3GPP TS 23.501 [28]) and the UPF supports RTT measurements without PMF, the SMF should instruct the UPF to not use PMF RTT measurements by setting the DRTTI flag to \"1\" in the PMF Control Information.\nNOTE 1:\tThe UPF can measure RTT without using the PMF protocol by using other means not defined by 3GPP such as using the RTT measurements of MPTCP if there is an MPTCP connection established between the UE and UPF.\nThe SMF shall not set the Steering Mode \"Redundant\" if the steering functionality is set to \"ATSSS-LL\".\nThe SMF may send ATSSS-LL Control Information and/or PMF Control Information to the UPF in PFCP Session Modification Request, with updated value, e.g. if the SMF receives updated ATSSS rules from the PCF.\nNOTE 2:\tSuch ATSSS-LL Parameters received by the SMF are sent to the UE together with the ATSSS rules, as specified in 3GPP TS 24.193 [59].",
      "chunk_type": "parameter",
      "cross_references": [
        "ts_23.501_clause_5.32.2",
        "ts_23.501",
        "ts_24.193"
      ]
    },
    {
      "chunk_id": "ts_29.244_5.20.4.1",
      "section_id": "5.20.4.1",
      "section_title": "General",
      "content": "Traffic splitting of a GBR traffic is not supported (see clause 5.32.4 of 3GPP TS 23.501 [28]).\nA DL PDR corresponding to GBR traffic of a MA PDU session using the Redundant steering mode shall be associated with a MAR, as specified in clause 5.20.1.\nNOTE 1:\tThe SMF establishes resources for the GBR traffic in both the 3GPP access and the non-3GPP access when using the Redundant steering mode and the UPF can steer and switch the traffic to these accesses as instructed in the MAR.\nDL PDRs corresponding to GBR traffic not using the Redundant steering mode shall be associated with DL FARs (i.e. no MAR).\nNOTE 2:\tThe SMF establishes resources for the GBR traffic in only one access at a time when not using the Redundant steering mode. Switching the GBR traffic from one access to another access requires the SMF to send N1/N2 messages to the UE and AN. The SMF can request the UPF to report when it cannot send DL GBR traffic over its on-going access as defined in clause 5.20.4.2",
      "chunk_type": "definition",
      "cross_references": [
        "ts_23.501_clause_5.32.4",
        "clause_5.20.1",
        "clause_5.20.4.2",
        "ts_23.501"
      ]
    },
    {
      "chunk_id": "ts_29.244_5.20.4.2",
      "section_id": "5.20.4.2",
      "section_title": "Access Availability Reporting",
      "content": "For an MA PDU session using the ATSSS Low Layer (ATSSS-LL), MPTCP or MPQUIC steering functionality, the SMF may request the UPF to report when it cannot send downlink GBR traffic over its on-going access, e.g. based on access availability and unavailability report from the UE, by provisioning an SRR with an Access Availability Control Information IE requesting the UPF to report when an access (3GPP or non-3GPP access) becomes available or unavailable.\nIf so instructed, when detecting a change in an access availability, the UPF shall send an Access Availability Report to the SMF, indicating the access type and whether the access has become available or unavailable.",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.244_5.20.5",
      "section_id": "5.20.5",
      "section_title": "Access type of an MA PDU session becoming (un)available",
      "content": "The access type of an MA PDU session may become unavailable permanently (e.g. when the UE de-registers from one access) or transiently (e.g. when the UE has lost coverage of the 3GPP access or non-3GPP access).\nWhen an access type of an MA PDU session becomes permanently unavailable, the SMF shall send a PFCP Session Modification Request with an Update MAR IE removing the Access Forwarding Information IE corresponding to the unavailable access. As a result, the UPF shall not send any more traffic on this access type.\nReversely, when a new access type becomes available for an MA PDU session, e.g. when the UE registers on another access and requests to establish user plane resources for that access, the SMF shall send a PFCP Session Modification Request with an Update MAR IE adding the Access Forwarding Information IE corresponding to the new available access type.\nWhen an access type of an MA PDU session becomes transiently unavailable, the SMF shall notify the UPF that the access type has become unavailable by sending a PFCP Session Modification Request with the Access Availability Information IE indicating so. The SMF should then also notify the UPF when the access type becomes available again.\nWhen being notified by the SMF that an access type has become transiently unavalaible, the UPF should stop sending DL traffic on this access until it receives the indication that the access becomes available again from the UE (i.e. PMF access available report) or the SMF.",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.244_5.20.6",
      "section_id": "5.20.6",
      "section_title": "PMFP message handling in UPF",
      "content": "The access performance measurement supports the following procedures, as specified in clause 5.32.5.1 of 3GPP TS 23.501 [28]:\n-\tRTT measurement procedure initiated by the UE, or the UPF;\n-\tPacket Loss Rate measurement procedure initiated by the UE, or the UPF;\n-\tAccess available/unavailable report procedure from the UE to the UPF;\n-\tUE Assistance Data provisioning procedure from the UE to the UPF.\n-\tSuspend or resume traffic duplication procedure from the UPF to UE.\nThe per QoS flow access performance measurement procedure includes the RTT measurement and the Packet Loss Rate measurement, which may be initiated by the UE or the UPF(PSA).\nPMFP messages are used by the PMF functionality in the UE and the PMF functionality in the UPF (PSA) to perform the access performance measurement procedures, as specified in 3GPP TS 24.193 [59].\nPMFP messages shall be exchanged between the UE and the UPF via the default QoS flow or a dedicated QoS flow, as specified in 3GPP TS 23.501 [28]. To support this, the UPF shall learn the QFI identifying the QoS flow on which PMFP messages from the UE are transmitted, and shall send downlink PMFP messages on that QoS flow when needed.\nOnce an uplink PMFP message is detected, the UPF shall internally forward the PMFP message to the PMF functionality in the UPF, for subsequent handling.\nThe PMF functionality in the UPF shall learn the UE's address information for PMFP from the received PMFP message, e.g. to detect the IP address and UDP port of the PMF in the UE (for IP PDU sessions) or the MAC address of the PMF in the UE (for Ethernet PDU sessions), and set the source and destination addresses of PMFP messages sent to the UE accordingly, as specified in clause 5.32.5.1A of 3GPP TS 23.501 [28].\nIf the Steering mode is set to Load-Balancing and the UE Assistance Indicator is set, when the UPF receives a PMF message with UE Assistance Data (i.e. PMF-UAD message) from the UE, the UPF may apply the split percentages in the UE Assistance Data to all DL traffic for which the SMF has enabled the UE assistance operation. Meanwhile, the UPF shall store the original split percentage (i.e. the weight included in 3GPP/Non-3GPP Access Forwarding Action Information IE in the MAR) provisioned by the SMF, and apply these when the UE assistance mode is terminated, i.e. when the UPF receives a PMF message indicating the termination of UE assistance mode (i.e. PMF-UAT message).\nWhen the steering mode is set to Redundant, the UPF may send a PMFP TDS REQUEST message to the UE to suspend traffic duplication over an access of the MA PDU session, e.g. during UPF congestion, and later if the UPF decides to resume traffic duplication for the UE, e.g. when the UPF detects that local congestion is diminished, the UPF may send a PMFP TDR REQUEST message to the UE, as specified in clause 5.32.5.63 of TS 3GPP 23.501 [28], clauses 5.4.10 and 5.4.11 of TS 3GPP 24.193 [59].",
      "chunk_type": "general",
      "cross_references": [
        "ts_23.501_clause_5.32.5.1",
        "clause_5.32.5.63",
        "ts_23.501",
        "ts_24.193"
      ]
    },
    {
      "chunk_id": "ts_29.244_5.21.1",
      "section_id": "5.21.1",
      "section_title": "General",
      "content": "Stage 2 requirements for UE IP address allocation in the EPC and 5GC are specified in clause 5.3.1 of 3GPP TS 23.401 [14], clause 5.8.2.2 of 3GPP TS 23.501 [28] and clause 4.6.2 of 3GPP TS 23.316 [57]. The following types of UE IP addresses may be assigned over N4 or Sxb:\n-\tIPv4 address;\n-\t/64 IPv6 Prefix;\n-\tIPv6 prefix other than default /64, including individual /128 IPv6 address, if the UPF indicates supports of the IP6PL feature (see clause 8.2.25), for IPv6 address allocation using DHCPv6 specified in clause 4.6.2.2 of 3GPP TS 23.316 [57];\n-\tIPv6 prefix shorter than the default /64 prefix for support of IPv6 prefix delegation as specified in clause 4.6.2.3 of 3GPP TS 23.316 [57], clause 5.8.2.2.4 of 3GPP TS 23.501 [28] and clause 5.14.\nMore than one UE IP address may be assigned to a PDU session, if the UPF indicates supports of the IP6PL feature (see clause 8.2.25), by provisioning multiple instances of the UE IP Address IE in a same PDI or Traffic Endpoint, or by provisioning multiple PDIs or Traffic Endpoints with a different UE IP Address, where the UE IP addresses may correspond e.g. to:\n-\tmultiple /128 IPv6 addresses; or\n-\tan /64 default prefix used for IPv6 stateless autoconfiguration and an IPv6 prefix shorter than the default /64 prefix for IPv6 Prefix Delegation not including the /64 IPv6 Prefix (i.e. when the total IPv6 address space available for the PDU Session cannot be aggregated into one single IPv6 prefix); the IPv6 prefix shorter than the default /64 prefix may be assigned by setting either the IPv6D flag or the IP6PL flag as specified in clause 5.14.\nA UE IPv4 address or IPv6 prefix may be allocated by the CP function or the UP function. A given IP address pool shall be controlled by a unique entity (either the SMF/PGW-C or the UPF/PGW-U or an external server).\nThe support of UE IP address/prefix allocation by the CP function is mandatory. The support of UE IP address/prefix allocation by the UP function is optional. See clause 5.8.2.2 of 3GPP TS 23.501 [28]. A UPF supporting the SSET feature (see clause 5.22.2) or the MPAS feature (see clause 5.22.3) shall support UE IP address/prefix allocation in the UP function.\nThe UP function shall set the UEIP feature flag in the UP Function Features IE if it supports UE IP address/prefix allocation in the UP function (see clause 8.2.25). If so, the CP function shall determine whether UE IP address or prefix is allocated by the CP function or the UP function based on network configuration.\nIf the SSET feature (see clause 5.22.2) or the MPAS feature (see clause 5.22.3) is supported, the SMFs in an SMF set may decide that the CP function should allocate the UE IP address or prefix. In such a case, the SMFs in the SMF set may query a DHCP or AAA server for UE IP address or prefix allocation as specified in clause 5.21.2.2.",
      "chunk_type": "definition",
      "cross_references": [
        "ts_23.401_clause_5.3.1",
        "ts_23.401_clause_5.8.2.2",
        "ts_23.501_clause_4.6.2",
        "clause_8.2.25",
        "ts_23.316_clause_4.6.2.2",
        "ts_23.316_clause_4.6.2.3",
        "ts_23.316_clause_5.8.2.2.4",
        "ts_23.501_clause_5.14",
        "clause_5.14",
        "ts_23.501_clause_5.8.2.2",
        "clause_5.22.2",
        "clause_5.22.3",
        "clause_5.21.2.2",
        "ts_23.316_clause_4.6.2",
        "ts_23.501_clause_5.8.2.2.4",
        "ts_23.401",
        "ts_23.501",
        "ts_23.316"
      ]
    },
    {
      "chunk_id": "ts_29.244_5.21.2.1",
      "section_id": "5.21.2.1",
      "section_title": "General",
      "content": "When performing UE IP address allocation in the CP function, the CP function shall assign the UE IP address/prefix and provide the assigned address/prefix to the UP function in the UE IP Address IE of the PDR IE (see Table 7.5.2.2-1) or of the Traffic Endpoint (see Table 7.5.2.7-1). The CP function shall always provide a full list of assigned address(es)/prefix(es) to the UP function in the PDI or Create/Update Traffic Endpoint IE.",
      "chunk_type": "definition",
      "cross_references": [
        "table_7.5.2.2-1",
        "table_7.5.2.7-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_5.21.2.2",
      "section_id": "5.21.2.2",
      "section_title": "UE IP Address/prefix allocation using DHCP or AAA server",
      "content": "When performing the UE IP address allocation by an SMF set, the SMFs in the SMF set may be configured to use DHCP or AAA server to allocate the UE IP address/prefix as specified in clause 10 of 3GPP TS 29.561 [49] and clauses 11 and clauses 12 of 3GPP TS 29.561 [49], with the following additions:\n-\tone (or more) DHCPv4 or DHCPv6 server or one (or more) AAA server may be deployed within the 5GC for resiliency;\n-\tdifferent SMFs of an SMF set may request, renew and release the IP address assigned to a given PDU session, e.g. when the PDU session is taken over by a different SMF during the lifetime of the PDU session.\nThe lease time assigned by the DHCP or AAA server for IP addresses may be set by the operator to a long time to minimize the need for IP address renewal. When the lease time is approaching expiry, the SMF should request the DHCP server to renew the IP address (keeping the IP address unchanged) or the SMF should initiate a AAA re-authorization to renew the IP address (keeping the IP address unchanged).\nNOTE:\tThe lease time is stored in the PDU session context (which is shared by the SMFs of the SMF set). So any SMF in the SMF set taking over the control of the PDU session can determine whether the lease time is approaching expiry.",
      "chunk_type": "general",
      "cross_references": [
        "ts_29.561_clause_10",
        "ts_29.561"
      ]
    },
    {
      "chunk_id": "ts_29.244_5.21.3.1",
      "section_id": "5.21.3.1",
      "section_title": "General",
      "content": "When performing UE IP address/prefix allocation in the UP function, the CP function shall request the UP function to allocate the UE IP address/prefix by:\n-\tsetting the CHOOSE flags (CHOOSE IPV4 and/or CHOOSE IPV6) in the UE IP Address IE of the PDR IE (see Table 7.5.2.2-1) or of the Traffic Endpoint (see Table 7.5.2.7-1); the IPv6 prefix length shall be indicated in the UE IP Address if an IPv6 prefix other than default /64 and other than for IPv6 prefix delegation (see clause 5.14) is to be assigned and the UPF indicated support of the IP6PL feature (see clause 8.2.25); and\n-\tincluding the Network Instance IE to indicate the IP address pool from which the UE IP address/prefix is to be assigned.\n-\toptionally including the UE IP address Pool Identity from which the UE IP address shall be allocated by the UP function.\nThe CP function may request the UP function to allocate the same UE IP address/prefix to several PDRs to be created (i.e. using Create PDR) within one single PFCP Session Establishment Request or PFCP Session Modification Request, or to several PDRs to be modified (i.e. using Update PDR) within one single PFCP Session Modification Request by:\n-\tsetting the CHOOSE flags (CHOOSE IPV4 and/or CHOOSE IPV6) in the UE IP Address IE of each PDR to be created with a new UE IP address/prefix or each PDR to be modified;\nor, if the UP function indicated support of the PDI optimization (see clause 8.2.25), by:\n-\tincluding the UE IP Address IE in the Create Traffic Endpoint IE or Update Traffic Endpoint IE, and by setting the CHOOSE flags (CHOOSE IPV4 and/or CHOOSE IPV6) in that UE IP Address IE; and\n-\tincluding the Traffic Endpoint ID in all the PDRs to be created with the same UE IP address or all PDRs to be modified with additional UE IP address(es).\nIf the PDR(s) is created or modified successfully or the Traffic Endpoint(s) is created or modified successfully, the UP function shall always return the full list of UE IP address/prefix in the UE IP Address IE(s) it has assigned to the PDR(s) or to the Traffic Endpoint(s) in the PFCP Session Establishment Response or PFCP Session Modification Response.\nUpon receiving a request to delete a PFCP session, to remove a Traffic Endpoint associated with the UE IP address/prefix, or to remove the last PDR associated with the UE IP address/prefix, the UP function shall release the UE IP address/prefix that was assigned to the PFCP session, to the Traffic Endpoint, or to the PDR.\nNOTE 1:\tWhen the CP function requests additional UE IP Address in the Update PDR or Update Traffic Endpoint IE, it needs not include any existing UE IP Address(es).\nIf the UP Function supports the \"Per Slice UP Resource management\" feature and if the feature is enabled in the UP Function, the UP Function shall take the S-NSSAI associated with the PFCP session into account when allocating UE IP address, together with other information present (e.g. Network Instance, UE IP address Pool Identity).",
      "chunk_type": "definition",
      "cross_references": [
        "clause_5.14",
        "clause_8.2.25",
        "table_7.5.2.2-1",
        "table_7.5.2.7-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_5.21.3.2",
      "section_id": "5.21.3.2",
      "section_title": "Reporting UE IP Address Usage to the CP function",
      "content": "The UE IP Address Usage Reporting feature (see clause 8.2.58) is an optional feature. The following requirements shall apply if UE IP addresses are allocated by the UP function and both the CP function and UP function support the UE IP Address Usage Reporting feature.\nThe UP Function should report UE IP address usage information to the CP function for network instances and/or IP address pools whose ratio of occupied (i.e. already assigned) IP addresses to the configured IP addresses in the UP Function exceeds a configurable threshold. If the UP Function supports the \"Per Slice UP Resource management\" feature and if the feature is enabled in the UP Function, the UP Function shall additionally indicate the S-NSSAI associated with the UE IP address usage information. The UP function shall do so by sending one or more PFCP Association Update Request messages to the CP function, including a UE IP Address Usage Information IE per network instance and/or IP address pool. Each UE IP Address Usage Information IE shall include a validity timer that informs the CP function for how long the UE IP address Usage Information shall be considered as valid. Each UE IP Address Usage Information shall also contain a UE IP Address Usage Sequence Number, which enables the CP function to determine the latest UE IP Address Usage Information generated by the UP function for a given network instance and/or IP address pool.\nThe UP function may update the UE IP address usage information reported to the CP function if needed, by sending subsequent PFCP Association Update Request/Response messages, including updated UE IP address Usage Information IEs with a (new) validity timer. The UP function shall increment the UE IP Address Usage Sequence Number when updating UE IP address usage information. The UP function shall also increment the UE IP Address Usage Sequence Number when the IP address usage has not changed but the validity timer needs to be renewed.\nNOTE 1:\tThe threshold value in the UP function needs to be selected in such way that it avoids frequent UE IP address usage reporting for network instances and/or UE IP address pools with low usage.\nThe CP function shall use the latest updated UE IP address Usage Information received for a given network instance and/or UE IP Address Pool. The CP function shall ignore a UE IP Address Usage Information IE received for a given network instance and/or IP address pool with a UE IP Address Usage Sequence Number smaller or equal to the UE IP Address Usage Sequence Number of an already received and stored information.\nIf the validity timer has not expired, the CP function shall keep the latest updated UE IP Address Usage Information received for a given Network Instance and/or UE IP Address Pool if it receives a PFCP Association Update Request/Response not including a UE IP Address Usage Information IE for this network instance and/or UE IP Address Pool.\nNOTE 2:\tThe UE IP Address Usage Information IE may be absent e.g. if the PFCP Association Update Request/Response is sent for other regular purposes, or if the ratio remains the same, or if the ratio has not changed enough to justify being reported again.\nThe CP function shall delete UE IP Address Usage Information if its validity period has expired.",
      "chunk_type": "requirement",
      "cross_references": [
        "clause_8.2.58"
      ]
    },
    {
      "chunk_id": "ts_29.244_5.22.1",
      "section_id": "5.22.1",
      "section_title": "General",
      "content": "A PFCP session may be controlled by different SMFs of an SMF Set using either one PFCP association per SMF Set and UPF as described in clause 5.22.2 (called SSET feature), or with each SMF of the SMF set establishing its own PFCP association with the UPF as described in clause 5.22.3 (called MPAS feature).\nA UPF complying with this version of the specification and that supports being controlled by an SMF set shall support the procedures specified in clauses 5.22.3 (i.e. MPAS feature) and may support the procedures specified in clause 5.22.2 (i.e. SSET feature).\nThe requirements specified in this clause for the UPF, SMF and SMF set shall also apply to:\n-\tcombined PGW-U/UPF, combined PGW-C/SMF and combined PGW-C/SMF Set respectively;\n-\tMB-SMF and MB-UPF, for MB-SMFs deployed in an MB-SMF set; and\n-\tcombined SMF/MB-SMF, combined UPF/MB-UPF for combined SMF/MB-SMFs Set.\nAn SMF supporting the SSET feature or the MAPS feature shall be ready to take over the control of a PFCP session from another SMF within the same SMF SET, upon receiving a request from a UPF requiring an SMF change, if possible.",
      "chunk_type": "definition",
      "cross_references": [
        "clause_5.22.2",
        "clause_5.22.3"
      ]
    },
    {
      "chunk_id": "ts_29.244_5.22.2",
      "section_id": "5.22.2",
      "section_title": "With one PFCP association per SMF Set and UPF",
      "content": "When a UPF supports that a PFCP session can be successively controlled by different SMF(s) in the same SMF set, the following applies:\n1)\tOne SMF in the SMF set shall establish one single PFCP Association with the UPF for the SMF set; the Node ID in the PFCP Association Setup Request shall be set to an FQDN representing the SMF set.The SMF shall indicate that it supports the SSET feature in the CP Function Features IE (see clause 8.2.58); this indicates to the UPF that the PFCP sessions established with this PFCP association can be successively controlled by different SMFs of an SMF set according to the procedure defined in this clause.The SMF may also indicate the IP addresses of alternative SMFs within the SMF Set and the IP addresses of alternative PFCP entities pertaining to the same SMF in the Alternative SMF IP Address IE(s) in the PFCP Association Setup Request and in the subsequent PFCP Association Update Request messages. Those Alternative SMF IP Address IE(s) with the PPE (Preferred PFCP Entity) flag set to \"1\" are alternative PFCP entities that the UPF shall select preferably when such reselection is required as specified in the following bullet 4.\nNOTE 1:\tThose Alternative SMF IP Address IE(s) with the PPE flag set to \"1\" are PFCP entities in the preferred binding entity corresponding to the binding level in the Binding Indication of the resource context created for the PDU session when binding procedures are supported in the SMF as specified in clause 6.12 of 3GPP TS 29.500 [74].\n2)\tWhen establishing a PFCP session, the SEID that the SMF assigns in the CP F-SEID of the PFCP Session Establishment Request may be unique or not within the SMF set. However the assigned CP F-SEID shall be unique within the SMF set.\nNOTE 2: The UPF does not (need to) know whether the SEID in the CP F-SEID is uniquely assigned in the SMF set or not.\n3)\tAny SMF in the SMF set may issue requests to modify or delete the PFCP session, or to update or release the PFCP association. The UPF shall allow the related PFCP request to come from any other SMF from the same SMF set.\n4)\tThe UPF shall initiate PFCP session related requests (e.g. PFCP Session Report Request) towards another PFCP entity pertaining to the same SMF or another SMF of the SMF Set, if the IP address included in the CP F-SEID assigned to the PFCP session is not responsive, or if the UPF receives a GTP-U Error Indication from the SMF over the N4-u tunnel assigned to the N4 session for data forwarding if any.The UPF shall firstly use the IP addresses included in those Alternative SMF IP Address IE(s) with the PPE flag set to \"1\" (if available) whenever possible, then it may use the IP addresses included in the Alternative SMF IP Address IE(s) without the PPE flag set to \"1\", to contact an alternative PFCP entity. Otherwise the UPF shall use the SMF set FQDN in the CP Node ID to discover alternative SMFs within the SMF Set, e.g. by querying the DNS or by performing a discovery request towards the NRF.When sending the request to another PFCP entity pertaining to the same SMF or to the new SMF, the UPF shall set the SEID field to zero in the PFCP header of the PFCP request and include the CP F-SEID assigned by the previous SMF in the request.\n5)\tWhen receiving a request from a UPF with the SEID field set to zero and CP F-SEID assigned by previous SMF, the SMF shall take over the control of the PFCP session from the previous SMF, unless it is needed to redirect the request to a different SMF (e.g. due to high load or because the corresponding session context has already been taken over by a different SMF in the same SMF set).An SMF may redirect a UPF initiated PFCP session related request to another PFCP entity pertaining to the same SMF or to a different SMF in the SMF set by rejecting the request with the cause \"Redirection Requested\" and with the IP address of the new entity to contact. When sending the redirected request to the new entity, the UPF shall set the SEID field to zero in the header of the PFCP request and include the CP F-SEID assigned by the previous SMF in the request.Alternatively, an SMF may forward the UPF request to another PFCP entity pertaining to the same SMF or to a new SMF in the SMF set; the new PFCP entity or the new SMF answers to the UPF, including the CP F-SEID IE with the IPv4 or IPv6 address of the new entity respectively and the same or a modified SEID, and optionally including the N4-u F-TEID that the UPF shall use for sending data towards the new entity.\nNOTE 3:\tThis allows to address cases where a different SMF would have been reselected in the 5GC for the PFCP session, e.g. by an AMF.\n6)\tAn SMF may also update, at any time, a PFCP session by including the CP F-SEID with the IPv4 or IPv6 address of a new SMF and/or a new SEID assigned by the new SMF in a PFCP Session Modification Request.\n7)\tThe UPF shall trigger the SMF restoration procedures for an SMF in a SMF set specified in 3GPP TS 23.527 [40] for a PFCP session that can be controlled by different SMFs of an SMF set when a heartbeat failure is detected for the IP address of the assigned CP F-SEID.\nNOTE 3:\tThese restoration procedures cause the UPF to delete the PFCP session contexts only if heartbeat procedures fail with all the IP addresses of all the SMFs in the SMF set.8)\tA UPF supporting the SSET feature shall support UE IP address/prefix allocation in the UP function (see clause 5.21).\nNOTE 4:\tThe above requirements enable all SMFs of a same SMF set to successively control a given PFCP session without causing extra signalling over the N4 interface.",
      "chunk_type": "requirement",
      "cross_references": [
        "clause_8.2.58",
        "ts_29.500_clause_6.12",
        "clause_5.21",
        "ts_29.500",
        "ts_23.527"
      ]
    },
    {
      "chunk_id": "ts_29.244_5.22.3",
      "section_id": "5.22.3",
      "section_title": "With one PFCP association per SMF and UPF",
      "content": "If multiple PFCP associations are setup between an UPF and the SMFs in an SMF set, the following applies:\n1)\tEach SMF in the SMF set shall establish its own PFCP association with the UPF and shall provide the Node ID IE set to an FQDN or IP address of the SMF and the SMF Set ID IE set to an FQDN representing the SMF set. All SMFs of an SMF set shall indicate the same SMF Set ID. Alternatively, if PFCP Association Setup is initiated by UPF as defined in clause 6.2.6.3, each SMF in the SMF set shall provide this information in PFCP Association Setup Response message.The SMF shall indicate that it supports the MPAS feature (Multiple PFCP Associations to the SMFs in an SMF set) in the CP Function Features IE (see clause 8.2.58); this indicates to the UPF that the PFCP sessions established with this PFCP association can be successively controlled by different SMFs of the same SMF set according to the procedure defined in this clause.The SMF may also provide a list of alternative IP addresses of PFCP entities pertaining to the same SMF in the Alternative SMF IP Address IE in the PFCP Association Setup Request message and in the subsequent PFCP Association Update Request messages. Those Alternative SMF IP Address IE(s) with the PPE flag set to \"1\" are alternative PFCP entities that the UPF shall select preferably when such reselection is required as specified in the following bullet 6.\nThe UPF and SMF shall identify the PFCP association by the Node ID of the SMF and UPF respectively.\nWhen an SMF is added or removed from the SMF set, this SMF shall establish or tear down its PFCP association with the UPF. When a PFCP association with a particular SMF is released (e.g. due to an SMF shutting down / scale-in of the SMF set), any PFCP sessions that were still served by this SMF shall be maintained by the SMF set and the UPF if there is at least one PFCP association remaining established between the UPF and another SMF of the SMF set. If so, the UPF shall move such PFCP sessions towards other SMF(s) of the SMF set (as described in this clause and clause 5.22.4). Otherwise, if the PFCP association being released is the last PFCP association that was established between the UPF and any SMF of the SMF set, the PFCP sessions shall be deleted as specified in clauses 5.18 and 6.2.8.\nNOTE 1:\tThe SMF(s) of the SMF set can instruct the UPF to move the PFCP sessions to different SMFs of the SMF set (preferably) before or after the PFCP association release, e.g. like defined in clause 5.22.4 and clause 31.6.4 of 3GPP TS 23.007 [24].\nWhen an SMF updates its SMF SET ID using the PFCP Association Update procedure, the UPF shall maintain the existing PFCP sessions served by this SMF and use the new SMF Set ID of the SMF if the UPF needs to later reselect a different SMF instance for these PFCP sessions (as defined in step 6).\n2)\tWhen establishing a PFCP session, the SEID that the SMF assigns in the CP F-SEID of the PFCP Session Establishment Request may be unique or not within the SMF set. However the assigned CP F-SEID shall be unique within the SMF set.\nNOTE 2:\tThe UPF does not (need to) know whether the SEID in the CP F-SEID is uniquely assigned in the SMF set or not. The SMF and the UPF identifies the PFCP session by its own CP F-SEID and UP F-SEID respectively.\n3)\tAny SMF in the SMF set may issue requests to modify or delete the PFCP session. When the SMF controlling a PFCP session changes, the SMF that takes over the control of the PFCP session shall provide its own Node ID and may provide a new CP F-SEID.\nThe UPF shall allow the PFCP session modification or deletion request to come from any other PFCP association from the same SMF set.\n4)\tAt any time, an SMF may update a PFCP session by including the CP F-SEID with the IPv4 or IPv6 address of a new SMF and/or a new SEID assigned by the new SMF in a PFCP Session Modification Request.\n5)\tWhen receiving a request from a UPF with the SEID field set to zero and CP F-SEID assigned by previous SMF, the SMF shall take over the control of the PFCP session from the previous SMF, unless it is needed to redirect the request to a different SMF in the same SMF set (e.g. due to high load or because the corresponding session context has already been taken over by a different SMF in the same SMF set).\nAn SMF may redirect a UPF initiated PFCP session related request to another PFCP entity pertaining to the same SMF or to a different SMF in the SMF set by rejecting the request with the cause \"Redirection Requested\" and with the IP address of the new entity to contact. When sending the redirected request to another PFCP entity pertaining to the same SMF or to the new SMF, the UPF shall set the SEID field to zero in the header of the PFCP request and include the CP F-SEID assigned by the previous SMF in the request.\nAlternatively, an SMF may forward the UPF request to another PFCP entity pertaining to the same SMF or another SMF in the SMF set; the new PFCP entity or the new SMF answers to the UPF, including the CP F-SEID IE with the IPv4 or IPv6 address of the new entity respectively and the same or a modified SEID, and optionally including the N4-u F-TEID that the UPF shall use for sending data towards the new entity.\nNOTE 3:\tThis allows to address cases where a different SMF would have been reselected in the 5GC for the PFCP session, e.g. by an AMF.\n6)\tThe UPF shall initiate PFCP session related requests (e.g. PFCP Session Report Request) towards another PFCP entity pertaining to the same SMF or to another SMF in the SMF set with which the UPF has established associations with the same SMF Set ID, if the IP address included in the CP F-SEID assigned to the PFCP session is not responsive, heartbeat failure towards IP address of the CP F-SEID assigned to the PFCP session, or if the UPF receives a GTP-U Error Indication from the SMF over the N4-u tunnel assigned to the N4 session for data forwarding.\nThe UPF shall firstly use the IP addresses included in those Alternative SMF IP Address IE(s) with the PPE flag set to \"1\" (if available) whenever possible, then it may use the IP addresses included in the Alternative SMF IP Address IE(s) without the PPE flag set to \"1\", to contact an alternative PFCP entity.\nWhen sending the request to the new entity, the UPF shall set the SEID field to zero in the PFCP header of the PFCP request and include the CP F-SEID assigned by the previous SMF in the request.\n7)\tThe UPF shall trigger the SMF restoration procedures for an SMF in a SMF set specified in 3GPP TS 23.527 [40] for a PFCP session that can be controlled by different SMFs of an SMF set when a heartbeat failure is detected.\nNOTE 4:\tThese restoration procedures cause the UPF to delete the PFCP session contexts only if heartbeat procedures fail with all of the SMFs in the SMF set (i.e. the SMFs with which the UPF has established associations with the same SMF Set ID).\n8)\tIf an SMF or UPF fails, the peer PFCP node that detects that error shall remove the PFCP association locally. The SMF and UPF shall then handle the PFCP sessions that were served by this PFCP association as described in step 2 for a PFCP association release.\n9)\tA UPF supporting the MPAS feature shall support UE IP address/prefix allocation in the UP function (see clause 5.21).",
      "chunk_type": "requirement",
      "cross_references": [
        "clause_6.2.6.3",
        "clause_8.2.58",
        "clause_5.22.4",
        "ts_23.007_clause_31.6.4",
        "clause_5.21",
        "ts_23.007",
        "ts_23.527"
      ]
    },
    {
      "chunk_id": "ts_29.244_5.22.4",
      "section_id": "5.22.4",
      "section_title": "Restoration of PFCP Sessions associated with an FQ-CSID, Group ID or PGW-C/SMF IP Address",
      "content": "As specified in clause 31.6 of 3GPP TS 23.007 [24] and clauses 4.6 and 4.7 of 3GPP TS 23.527[40],  for deployments with PGW-C/SMF Set, the CP function (e.g. a PGW-C or a SMF) and the UP function (a PGW-U or a UPF) may support the feature \"Restoration of PFCP Sessions associated with one or more PGW-C/SMF FQ-CSID(s), Group Id(s) or PGW-C/SMF IP address(es)\". A CP function and a UP function that supports this feature shall behave as specified in clause 5.22.2 or 5.22.3 with the following additional requirements:\n1)\tA UP function that supports this feature shall indicate so to the CP function by setting the RESPS feature bit in the UP Function Feature IE (see clause 8.2.25).\n2)\tThe PGW-C/SMF in a PGW-C/SMF Set may allocate a globally unique Group Id to a PFCP session, in the PFCP Session Establishment Request message during the PFCP session establishment procedure and may update the Group Id associated to the PFCP session in a PFCP Session Modification Request message if necessary. The UP function shall store the Group Id associated to a PFCP session. At most one Group ID may be associated to a PFCP session.\n3)\tAlternatively, if partial failure handling is supported, the PGW-C/SMF may assign an FQ-CSID to a PFCP session as specified in clause 31 of 3GPP TS 23.007 [24] and clause 4.6 of 3GPP TS 23.527 [40].\n4)\tThe PGW-C/SMF (either the PGW-C/SMF serving the PFCP sessions or another PGW-C/SMF in the same Set taking over the control of the PFCP sessions) may send a PFCP Session Set Modification Request message to the PGW-U/UPF(s), including either one or more PGW-C/SMF FQ-CSID IE(s) allocated earlier, or one or more Group Id IE(s) allocated earlier, or one or more CP (PGW-C/SMF) IP Addresses and an Alternative SMF IP Address IE, to request the PGW-U/UPF(s) to send subsequent PFCP Session Report Request messages to the same or an alternative PGW-C/SMF (as indicated in the Alternative SMF IP Address IE) for the PFCP Sessions which are associated with the PGW-C/SMF FQ-CSID(s) or the Group Id IEs, or which have their F-SEID containing the CP IP Address. The PGW-C/SMF may instruct the UP function to move sessions associated with different PGW-C/SMF FQ-CSID(s), Group Ids or CP IP Addresses, to different PGW-C/SMF addresses.\n5)\tWhen the PGW-U or UPF sends subsequent PFCP Session Report Request message to the indicated alternative PGW-C/SMF address, the PGW-U or UPF may receive either a new PGW-C/SMF FQ-CSID or a new Group Id for that PFCP session in the PFCP Session Report Response message from the new PGW-C/SMF.\nNOTE:\tThe above procedure enables a PGW-C/SMF to move groups of sessions to one or more different PGW-C/SMF instances, e.g. during a partial or complete failure in a PGW-C/SMF or when a PGW-C/SMF is shutting down (e.g. scale-in operation), in one signal PFCP message. This allows the PGW-C/SMF to control how PFCP sessions are re-distributed in the SMF set.",
      "chunk_type": "general",
      "cross_references": [
        "ts_23.007_clause_31.6",
        "clause_5.22.2",
        "clause_8.2.25",
        "ts_23.007_clause_31",
        "ts_23.007_clause_4.6",
        "ts_23.527_clause_4.6",
        "ts_23.007",
        "ts_23.527"
      ]
    },
    {
      "chunk_id": "ts_29.244_5.23.1",
      "section_id": "5.23.1",
      "section_title": "General",
      "content": "Stage 2 requirements for the support of 5G VN communication are specified in clauses 4.4.6 and 5.8.2.13 of 3GPP TS 23.501 [28].\nThe 5G VN group communication includes one to one communication and one to many communication.\nOne to one communication supports forwarding of unicast traffic between two UEs within a 5G VN, or between a UE and a device on the DN.\nOne to many communication supports forwarding of multicast traffic and broadcast traffic from one UE (or device on the DN) to many/all UEs within a 5G VN and/or devices on the DN.\n5G VN Group Communication is optional to support. The SMF may instruct the UPF to forward unicast and/or broadcast traffic as described below if the UPF has indicated support of 5G VN Group Communication (see feature GCOM in clause 8.2.25).\nThere are 3 different traffic forwarding methods, i.e. UPF local switching, N6-based forwarding and N19-based forwarding, to forward traffic within the 5G VN group.\nFor all methods, traffic forwarding within the 5G VN group is realized by using a UPF internal interface (\"5G VN Internal\") and a two-step detection and forwarding process. In the first step, the packets received from any 5G VN group member (via it's PDU Session, via N6 or via N19) are forwarded to the UPF internal interface (i.e. Destination Interface set to \"5G VN Internal\"). In the second step, PDRs installed at the UPF internal interface (i.e. Source Interface set to \"5G VN Internal\") detect the packet and forward it to the respective 5G VN group member (via it's PDU Session, via N6 or via N19). If more than one 5G VN group has to be supported, the Network Instance set to a value representing the 5G VN group is used in addition to the UPF internal interface to enable isolation of the 5G VN group communication during the packet detection and forwarding process.\nWhen N19-based forwarding is used, the SMF may correlate all the PDU sessions for the 5G VN Group members to generate the PDR and FAR corresponding to the group level N4-session for UPF as specified in clause 5.29.3 of 3GPP TS 23.501 [28].\nFor Ethernet unicast traffic on 5G VN Group Communication, the SMF may either explicitly configure DL PDR with the MAC addresses detected by the UPF on PDU Sessions supporting a 5G VN group, or rely on MAC address learning in UPF related with a 5G VN group by setting the Ethernet PDU Session Information indication in the DL PDR of the \"5G VN internal\" interface as specified in clause 5.8.2.13.0 of 3GPP TS 23.501 [28].\nTo enable IP or Ethernet type broadcast traffic forwarding of a 5G VN Group, the SMF may provide the PDRs related to the group level N4-session and each 5G VN group member' N4 Session to the UPF as specified in clause 5.8.2.13.3 of 3GPP TS 23.501 [28].\nThe details of the PDR and FAR setting over N4 for unicast traffic forwarding within a 5G VN are specified in clauses 5.8.2.13.1 and 5.8.2.13.2 of 3GPP TS 23.501 [28].\nThe details of the PDR and FAR setting over N4 for broadcast traffic forwarding within a 5G VN are specified in clause 5.8.2.13.3 of 3GPP TS 23.501 [28].\nIf a PIN has more than one PEGCs, 5G VN Group Communication may be used for the PIN as specified in clause 5.44.3 of 3GPP TS 23.501 [28]. In this case, separation of multiple PINs communication in the UPF uses different network instances as it is for 5G VN Group.\nThe UPF local switching may be applied to PIN indirect communication when there are multiple PDU sessions for a PIN from different PEGCs connecting to the same UPF. The N6-based forwarding may be applied to PIN-DN communication.",
      "chunk_type": "definition",
      "cross_references": [
        "clause_8.2.25",
        "ts_23.501_clause_5.29.3",
        "ts_23.501_clause_5.8.2.13.0",
        "ts_23.501_clause_5.8.2.13.3",
        "ts_23.501_clause_5.44.3",
        "ts_23.501"
      ]
    },
    {
      "chunk_id": "ts_29.244_5.23.2",
      "section_id": "5.23.2",
      "section_title": "5G VN group communication without N6-based forwarding",
      "content": "The 5G VN group communication may be either among the UEs within a 5G VN group and the devices on the DN, or among the UEs within a 5G VN group only. In case the 5G VN group communication is among the UEs within a 5G VN group only, the DN is excluded from the 5G VN group communication and only the traffic between the UEs within a VN group shall be handled by the UPF internal interface (\"5G VN Internal\"). In the latter case, the N6-based traffic forwarding method is not applicable.\nSo, for each PFCP session of UEs within a 5G VN group, the SMF shall provide:\n-\tdifferent PDRs/FARs to only forward the 5G VN group communication traffic to the UPF internal interface (\"5G VN Internal\") based on the IP/MAC address(es) of all the UEs in SDF filter IE or multicast/broadcast IP/MAC address(es), and to send the non-5G VN communication traffic directly to DN with a match-all Packet Filter and a Precedence set to the lowest precedence value; and\n-\tdifferent PDRs/FARs to forward 5G VN group communication traffic from UPF internal interface (\"5G VN Internal\") to the UE, and to forward the non-5G VN group communication traffic from the DN directly to the UE.\nAdditionally, if the N19-based forwarding applies, the SMF shall not configure the group-level N4 Session to forward 5G VN group communication traffic to N6.",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.244_5.24.1",
      "section_id": "5.24.1",
      "section_title": "General",
      "content": "Stage 2 requirements for the support of Ultra Reliable Low Latency Communication (URLLC) are specified in clause 5.33 of 3GPP TS 23.501 [28].\nNOTE 1:\tIn this release of specification redundant transmission on N3/N9 interfaces for URLLC is not supported for PDU Sessions involving an I-SMF. See 3GPP TS 23.501 [28] clauses 5.34, 5.33.2.2 and 3GPP TS 23.502 [29] clause 4.24.\nRedundant transmission is applied for supporting the highly reliable URLLC services, there are three different methods: dual connectivity based end to end redundant user plane paths, redundant transmission on N3/N9 interfaces or redundant transmission at transport layer.\nNOTE 2:\tDual connectivity based end to end redundant user plane paths has no impact to N4 interface.\nQoS Monitoring is applied for packet delay measurement. The packet delay between UE and PSA UPF is a combination of the uplink or downlink packet delay on Uu interface and uplink or downlink packet delay between NG-RAN and PSA UPF. The QoS Monitoring on uplink or downlink packet delay between NG-RAN and PSA UPF can be performed on different levels of granularities, i.e. per QoS Flow per UE level, or per GTP-U path level.\nSupport of the URLLC feature is an optional for the SMF and UPF, for 5GC.",
      "chunk_type": "definition",
      "cross_references": [
        "ts_23.501_clause_5.33",
        "ts_23.502_clause_4.24",
        "ts_23.501",
        "ts_23.502"
      ]
    },
    {
      "chunk_id": "ts_29.244_5.24.2.1",
      "section_id": "5.24.2.1",
      "section_title": "General",
      "content": "Stage 2 requirements for support of Redundant Transmission on N3/N9 interfaces for high reliability communication are specified in clause 5.33.2.2 of 3GPP TS 23.501 [28].\nThis requires duplicating downlink and uplink packets of QoS flows requiring redundant transmission of a PDU session via two independent N3 or N9 tunnels between the RAN and the UPF (PSA).\nThe following requirements shall apply for QoS flows requiring redundant transmission. Requirements in clause 5.2.2.3.3 shall also apply for traffic usage reporting.",
      "chunk_type": "definition",
      "cross_references": [
        "ts_23.501_clause_5.33.2.2",
        "clause_5.2.2.3.3",
        "ts_23.501"
      ]
    },
    {
      "chunk_id": "ts_29.244_5.24.2.2",
      "section_id": "5.24.2.2",
      "section_title": "GTP-U tunnel setup for redundant transmission",
      "content": "The SMF shall request the UPF (PSA) to establish two N3 or N9 tunnels for a PDU session with one or more Service Data Flows associated with QoS flow(s) requiring redundant transmission as follows:\n-\twhen provisioning an UL PDR in the UPF (PSA), the SMF shall request the UPF to assign two Local F-TEIDs for the PDR, by provisioning the PDI or the Traffic Endpoint with the Redundant Transmission Detection Parameters IE. The SMF may provide two different Network Instances for these two F-TEIDs to achieve disjoint transport layer paths;\n-\talternatively, the SMF may request the UPF to assign one Local F-TEID for the related Network Instance when creating the UL PDR, and later request the UPF to assign another Local F-TEID with the same or a different Network Instance when updating the PDR, if the redundant transmission tunnels are not established during the PDU session establishment;\n-\twhen provisioning DL FAR in the UPF (PSA) corresponding to QoS flows requiring redundant transmission, the SMF shall request the UPF to duplicate the downlink packets for redundant transmission and the SMF shall provide two F-TEIDs of remote GTP-U tunnel endpoints in the FAR, as described in clause 5.24.2.3;\n-\talternatively, the SMF may provide one remote endpoint F-TEID when creating the FAR and later provide another remote endpoint F-TEID when updating the FAR, if the redundant transmission tunnels are not established during the PDU session establishment.\nNOTE:\tTo forward downlink packets pertaining to service data flows not requiring redundant transmission, the SMF can create a separate FAR not requiring to duplicate the packets.\nThe PSA UPF shall assign the local F-TEID(s) for establishing the redundant tunnel and include the Local F-TEID(s) for Redundant Transmission IE in the PFCP Session Establishment Response or the PFCP Session Modification Response to the SMF if the Redundant Transmission Detection Parameters IE was received in the corresponding request message.\nThe SMF shall request the UPF (PSA) to remove one N3 or N9 tunnel used for redundant transmission if redundant transmission is no longer needed as follows:\n-\trequest the UPF to remove the local F-TEID for redundant transmission by updating the PDI or the Traffic Endpoint in UL PDR with a null length Redundant Transmission Detection Parameters IE;\n-\trequest the UPF to remove the F-TEID of remote GTP-U tunnel endpoint for redundant transmission by updating the\tFAR in DL PDR with a null length Redundant Transmission Forwarding Parameters IE;\n-\tset the DFRT and EDRT flags to 0 in the FAR associated to the corresponding UL and DL PDRs, to stop duplicating packets and eliminating duplicate packets.\nWhen so instructed, the PSA UPF shall remove the local F-TEID for redundant transmission and the F-TEID of remote GTP-U tunnel endpoint for redundant transmission, stop duplicating packets and stop detecting/eliminating duplicate packets accordingly.",
      "chunk_type": "requirement",
      "cross_references": [
        "clause_5.24.2.3"
      ]
    },
    {
      "chunk_id": "ts_29.244_5.24.2.3",
      "section_id": "5.24.2.3",
      "section_title": "Duplicating downlink packets for redundant transmission",
      "content": "If redundant transmission is required for a QoS flow, the SMF shall instruct the PSA UPF to replicate each downlink packet of the QoS Flow and to assign a sequence number to them by provisioning a FAR with the following information in a PFCP Session Establishment Request or PFCP Session Modification Request:\n-\tthe Redundant Transmission Forwarding Parameters IE including an Outer Header Creation IE set to the remote F-TEID of the redundant GTP-U tunnel, and if the GTP-U tunnel for redundant transmission uses a different network instance than the primary GTP-U tunnel, the Network Instance to be used for redundant transmission;\n-\tthe Apply Action IE with both the FORW and the DFRT flags set to \"1\".\nWhen so instructed, the PSA UPF shall replicate downlink packets associated to such a FAR and construct the duplicated downlink packets using the information included in the Redundant Transmission Forwarding Parameters IE and other information included in the Forwarding Parameters IE for information that is not part of the Redundant Transmission Forwarding Parameters IE. The PSA UPF shall add the same sequence number in the PDU Session Container extension header of the downlink packet and the related duplicated downlink packets as specified in 3GPP TS 38.415 [34].",
      "chunk_type": "requirement",
      "cross_references": [
        "ts_38.415"
      ]
    },
    {
      "chunk_id": "ts_29.244_5.24.2.4",
      "section_id": "5.24.2.4",
      "section_title": "Eliminating duplicated uplink packets",
      "content": "For QoS flows for which redundant transmission is required, the SMF shall also instruct the PSA UPF to eliminate the duplicated uplink packets of the QoS Flow, based on their sequence numbers in the PDU Session Container extension header by setting the EDRT flag and the FORW flag in the Apply Action IE in the FAR IE to request the UPF to eliminate the duplicated uplink packets based on the sequence number, i.e. to forward the uplink packets and to drop duplicated uplink packets. When so instructed, the PSA UPF shall forward the only one copy of the uplink packets and drop duplicate uplink packets.",
      "chunk_type": "requirement",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.244_5.24.3",
      "section_id": "5.24.3",
      "section_title": "Redundant Transmission at transport layer",
      "content": "Stage 2 requirements for support of Redundant Transmission at transport layer for high reliability communication are specified in clause 5.33.2.3 of 3GPP TS 23.501 [28].\nIf it supports the redundant transmission at transport layer, the UP function shall set the RTTL feature flag in the UP Function Features IE (see clause 8.2.25). If so, during the UE requested PDU session establishment procedure, the CP function may select the UPF that supports redundant transmission at transport layer for the PDU session.\nRequirements in clause 5.2.2.3.3 shall apply for traffic usage reporting.\nNOTE:\tHow the UPF perform the redundant transmission at transport layer is left up to UPF implementation.",
      "chunk_type": "general",
      "cross_references": [
        "ts_23.501_clause_5.33.2.3",
        "clause_8.2.25",
        "clause_5.2.2.3.3",
        "ts_23.501"
      ]
    },
    {
      "chunk_id": "ts_29.244_5.24.4.1",
      "section_id": "5.24.4.1",
      "section_title": "General",
      "content": "Stage 2 requirements for support of per QoS flow per UE QoS monitoring are specified in clause 5.33.3.2 of 3GPP TS 23.501 [28].\nThe UPF shall set the QFQM feature flag in the UP Function Features IE if it supports per QoS flow per UE QoS monitoring for packet delay (see clause 8.2.25). If so, the SMF may request the UPF to perform per QoS flow per UE QoS monitoring during a PFCP session establishment or a PFCP session modification procedure.\nThe SMF shall instruct the UPF to perform per QoS flow QoS monitoring for packet delay as specified in clause 5.24.4.2.\nThe UPF shall report the QoS monitoring result of the QoS flows to the SMF by sending QoS Monitoring Report IEs to the SMF as specified in clause 5.24.4.3, or by reporting the QoS monitoring events directly to the Local NEF or AF (see clause 5.33.5).",
      "chunk_type": "definition",
      "cross_references": [
        "ts_23.501_clause_5.33.3.2",
        "clause_8.2.25",
        "clause_5.24.4.2",
        "clause_5.24.4.3",
        "clause_5.33.5",
        "ts_23.501"
      ]
    },
    {
      "chunk_id": "ts_29.244_5.24.4.2",
      "section_id": "5.24.4.2",
      "section_title": "QoS Monitoring Control",
      "content": "The SMF shall instruct the UPF to perform per QoS flow QoS monitoring for packet delay as specified in clause 5.39.2, with the following additions:\n-\tthe Requested QoS Monitoring IE in the QoS Monitoring per QoS flow Control Information IE shall indicate a request to monitor the downlink packet delay, uplink packet delay, and/or the round-trip packet delay between the UPF (PSA) and UE;\n-\tthe Packet Delay Thresholds IE shall be present in the QoS Monitoring per QoS flow Control Information IE indicating thresholds for the downlink packet delay, uplink packet delay, and/or the round-trip packet delay to generate the QoS monitoring reports to the CP function, if the Event Triggered QoS monitoring reporting is required in the reporting frequency; and\n-\tthe Measurement Period IE shall be present in the QoS Monitoring per QoS flow Control Information IE, indicating the period to generate periodic usage reports to the SMF (if the periodic QoS monitoring reporting is required in the reporting frequency) and the period used to detect and report a QoS monitoring measurement failure (if Periodic QoS monitoring reporting or Event Triggered QoS monitoring reporting is required in the reporting frequency).",
      "chunk_type": "requirement",
      "cross_references": [
        "clause_5.39.2"
      ]
    },
    {
      "chunk_id": "ts_29.244_5.24.4.3",
      "section_id": "5.24.4.3",
      "section_title": "QoS Monitoring Reporting",
      "content": "If the UPF is requested to perform QoS Monitoring (i.e. it receives one or more QoS Monitoring per QoS flow Control Information IEs from the SMF), the UPF shall select one or more downlink payload packets pertaining to every requested QoS flow(s) whenever available or create one or more dummy downlink GTP-U packets (i.e. G-PDU messages without a T-PDU as specified in clause 5.2.2.7 of 3GPP TS 29.281 [3]) otherwise, and insert the time stamp, and set the QoS Monitoring Packet (QMP) flag to \"1\" and the corresponding QoS Flow Identifer (for the requested QoS flow) into the GTP-U PDU Session Container extension header (see 3GPP TS 38.415 [34]) of these downlink packets.\nWhen receiving the uplink packet related to the requested QoS flow(s), the UPF shall measure the packet delay(s) based on the time stamp(s) and packet delay(s) included in the GTP-U PDU Session Container extension header (see 3GPP TS 38.415 [34]) of the uplink packet, and generate a QoS monitoring report towards the SMF, if the packet delay(s) exceeds the defined Packet Delay Thresholds and Event Triggered QoS monitoring reporting is required in the reporting frequency. The UPF may send a next report only after the minimum waiting time indicated by the SMF.\nNOTE:\tThe dummy GTP-U packet(s) are not forwarded to the UE neither to the Packet Data Network, thus they are not measured for usage reporting. An Intermediate UPF between the PSA UPF and the NG-RAN forwards any received dummy GTP-U packets together with the GTP-U PDU Session Container extension header to the next GTP-U entity.\nIf the Periodic QoS monitoring reporting is required in the reporting frequency, the UPF shall generate QoS monitoring report based on the Measurement Period.\nThe UPF shall send QoS Monitoring Report IE to the SMF in PFCP Session Report Request; several QoS Monitoring Report IEs may be present to report the packet delay(s) for multiple QoS flows. The UPF shall include the delay value (Downlink, Uplink and/or Round trip) in the QoS Monitoring Measurement IE in the QoS Monitoring Report IE. See clause 5.33.5 for reporting the QoS monitoring events directly to the Local NEF or AF.\nThe UPF shall continue to apply all the provisioned SRR(s) and perform the related QoS monitoring measurement(s), until getting any further instruction from the CP function.\nWhen receiving a new threshold (Packet Delay Thresholds, Minimum Wait Time and/or Measurement Period) from the SMF for a measurement that is already ongoing in the UPF, the UPF shall consider its ongoing measurements against the new threshold to determine when to send its next QoS monitoring report to the SMF or to the Local NEF or AF (if direct reporting of QoS monitoring event applies, see clause 5.33.5).\nWhen receiving instruction from the SMF to stop the on-going QoS monitoring, the UPF shall generate a QoS monitoring report to the SMF or to the Local NEF or AF (if direct reporting of QoS monitoring event applies, see clause 5.33.5), to report the detected packet delay(s).\nIf Periodic QoS monitoring reporting or Event Triggered QoS monitoring reporting is required in the reporting frequency and no time stamp is received in uplink packet for a delay exceeding the Measurement Period (i.e. no measurement result is available in the UPF within the reporting period), the UPF shall generate a QoS monitoring report indicating a packet delay measurement failure to the SMF or to the Local NEF or AF (if direct reporting of QoS monitoring event applies, see clause 5.33.5).",
      "chunk_type": "requirement",
      "cross_references": [
        "ts_29.281_clause_5.2.2.7",
        "clause_5.33.5",
        "ts_29.281",
        "ts_38.415"
      ]
    },
    {
      "chunk_id": "ts_29.244_5.24.5.1",
      "section_id": "5.24.5.1",
      "section_title": "General",
      "content": "Stage 2 requirements for support of per GTP-U path QoS monitoring are specified in clause 5.33.3.3 of 3GPP TS 23.501 [28].\nThe UPF shall set the GPQM feature flag in the UP Function Features IE if it supports per GTP-U Path QoS monitoring (see clause 8.2.25).",
      "chunk_type": "definition",
      "cross_references": [
        "ts_23.501_clause_5.33.3.3",
        "clause_8.2.25",
        "ts_23.501"
      ]
    },
    {
      "chunk_id": "ts_29.244_5.24.5.2",
      "section_id": "5.24.5.2",
      "section_title": "GTP-U path monitoring",
      "content": "If the UPF is known to support this feature (e.g. by the UP Function Features IE), the SMF may request the UPF to measure the packet delay for transport paths towards remote GTP-U peers during a PFCP association setup or a PFCP association update procedure, by provisioning GTP-U Path QoS Control Information including:\n-\tthe identification of the GTP-U paths to be monitored, i.e.:\n-\tthe IP destination address of one or more remote GTP-U peers, and if available, the network instance used to reach each remote GTP-U peer and the DSCP value(s) to measure the packet delay; or\n-\tthe interface type(s) (i.e. N9 and/or N3) of the GTP-U paths;\n-\tthe values of the DSCP in the TOS/Traffic Class field to measure the packet delay, if available;\n-\tthe conditions and QoS parameters for the UPF to report measurements to the SMF, i.e. one or more of:\n-\timmediate report;\n-\tperiodic report, with the reporting time period; and/or\n-\tevent triggered report, when the average, minimum and/or maximum packet delay on a GTP-U path exceeds corresponding thresholds.\nIf so instructed, the UPF shall perform an estimation of the RTT for the GTP-U paths requested to be monitored, by sending Echo Request messages (with each requested DSCP value, if any) and measuring the time that elapses between the transmission of the Echo Request message and the reception of the Echo Response message. The UPF shall compute the packet delay by adding RTT/2 and the UPF internal processing time, thus the measured delay represents an estimated elapsed time for the GTP-U path (since a user plane packet entered the UPF and its reception by the next downstreams or upstreams GTP-U peer). The UPF shall send QoS reports to the SMF by including GTP-U Path QoS Report IE(s) in a PFCP Node Report Request message.\nIf the GTP-U paths to be monitored are identified by their interface types (e.g. N9 and/or N3), the UPF shall monitor all GTP-U paths of all PFCP sessions established with a FAR including a matching Destination Interface Type.\nFor event triggered reporting, the UPF shall send a first report when a reporting threshold is exceeded and a minimum waiting time shall be applied for the subsequent report for the same type of measurement (e.g. maximum packet delay) and the same remote GTP-U peer (if the threshold is exceeded after the waiting time).",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.244_5.24.5.3",
      "section_id": "5.24.5.3",
      "section_title": "QoS monitoring of a PDU session based on GTP-U path monitoring",
      "content": "The SMF may request the UPF (PSA) to monitor the Uplink, Downlink or Round-Trip delay per QoS flow per UE, as specified in clause 5.24.4.2 with the following addition:\n-\tIn the QoS Monitoring per QoS flow Control Information IE, the SMF shall indicate that QoS monitoring is performed based on GTP-U path monitoring by setting the GTPUM flag to 1 in the Requested QoS Monitoring IE.\nAdditionally, for the UPF (PSA) and for any intermediate UPF in the path of the PDU session, the SMF (or I-SMF) shall request the UPF:\n-\tto measure the one-way delay of the GTP-U path with the preceding uplink GTP-U entity; this corresponds to the N3 path for a UPF connected to the RAN, and to a N9 path for a UPF connected to an intermediate UPF;\n-\tto add this delay to the \"N3/N9 Delay Result\" field received in the GTP-U PDU Session Container extension header (see 3GPP TS 38.415 [34]) of the uplink packet; and\n-\tfor an intermediate UPF, to send the resulting value in the \"N3/N9 Delay Result\" field in the GTP-U PDU Session Container extension header (see 3GPP TS 38.415 [34]) of the uplink packet it forwards (towards the PSA).\nThe SMF shall request the above to the UPF (PSA or I-UPF) by including the Transport Delay Reporting IE in the UL PDR(s) associated to the corresponding QoS flow to be monitored. Multiple QoS flows may be monitored for a given PDU session as specified in clause 5.24.5.4.\nWhen so requested, each UPF shall, for UL GTP-U packets with the PDU Session Container extension header including the RAN Uplink and/or Downlink fields, add the delay of the GTP-U path with the preceding uplink GTP-U entity.\nNOTE:\tThe \"N3/N9 Delay Result\" field is computed by the intermediate UPF(s) and UPF (PSA). The RAN does not report the N3 path delay. The intermediate UPF connected to the RAN adds the N3 delay; the next intermediate UPF (if any) adds the N9 delay with the first intermediate UPF and the PSA adds the N9 delay of the last GTP-U path towards the PSA. If the PSA is directly connected to the RAN, the PSA measures the N3 delay.",
      "chunk_type": "general",
      "cross_references": [
        "clause_5.24.4.2",
        "clause_5.24.5.4",
        "ts_38.415"
      ]
    },
    {
      "chunk_id": "ts_29.244_5.24.5.4",
      "section_id": "5.24.5.4",
      "section_title": "QoS Monitoring Reporting",
      "content": "QoS monitoring reporting by the PSA shall be performed as specified in clause 5.24.4.3, with the following modifications.\nThe UP function shall not insert time stamps into the GTP-U PDU Session Container extension header (see 3GPP TS 38.415 [34]) of downlink packets.\nWhen receiving the uplink packet related to the requested QoS flow(s), the PSA shall measure the Uplink or Downlink delay by computing the sum of the end to end accumulated transport delay (computed as defined in clause 5.24.5.3) and the RAN UL or DL delay included in the GTP-U PDU Session Container extension header (see 3GPP TS 38.415 [34]) of the uplink packet.",
      "chunk_type": "requirement",
      "cross_references": [
        "clause_5.24.4.3",
        "clause_5.24.5.3",
        "ts_38.415"
      ]
    },
    {
      "chunk_id": "ts_29.244_5.25",
      "section_id": "5.25",
      "section_title": "Support of IPTV (for 5GC)",
      "content": "IPTV service is defined in clause 4.9.1 of of 3GPP TS 23.316 [57]. Stage 2 procedures to support IPTV service are defined in clauses 4.6 and 7.7.1 of 3GPP TS 23.316 [57].\nSupport of IPTV service is optional for the SMF and UPF. The following requirements shall apply for IPTV service if the UPF supports the IPTV feature (see clause 8.2.25).\nThis requires the UPF (PSA) to support:\n-\tterminating and managing IGMP or MLD messages received from the UE;\n-\tacting as a Multicast Router as defined in in IETF RFC 2236 [52] and IETF RFC 3376 [53];\n-\treplicating IP multicast traffic received from the N6 interface over PDU sessions having joined the corresponding IP multicast group;\n-\tnotifying the SMF when a PDU session has joined or left a multicast group, if so requested by the SMF.\nNOTE:\tIn this specification, \"IGMP\" refers to IGMPv2 and IGMPv3 and \"MLD\" refers to MLDv1 and MLDv2, unless specified otherwise.\nFor a PDU session used for IPTV service, the SMF shall provision the following rules in the UPF to control the UL IGMP/MLD traffic and the DL IP multicast traffic as follows:\n-\tfor the control of UL IGMP or MLD traffic:\n-\ta PDR that shall identify IGMPv2 (see IETF RFC 2236 [52]), IGMPv3 (see IETF RFC 4604 [54]), MLD (see IETF RFC 2710 [55]) and/or MLD2 (see IETF RFC 4604 [54]) signalling, i.e.:\n-\twith a PDI containing an SDF filter with a Flow Description identifying packets with IP Protocol number of 2, or with a pre-defined PDR matching the same, for IGMP traffic;\n-\twith a pre-defined PDR matching traffic with IPv6 Next Header type value 58 and ICMP Field Type value 131 or 143, for MLD traffic.\n-\tthis PDR may also contain IP Multicast Addressing Info IE(s) identifying (ranges of) IP multicast group(s); if no IP Multicast Addressing Info IE is included, the PDR is meant to match any IP multicast group.\n-\tan associated FAR containing the Apply Action IE with the IPMA (IP Multicast Accept) or the IPMD (IP Multicast Deny) flag set in order to request the UPF to accept or deny the UE requests to join the corresponding IP multicast group(s);\n-\tfor the control of DL IP multicast traffic\n-\ta PDR including IP Multicast Addressing Info IE(s), identifying (ranges of) IP multicast addresses (DL IP multicast flows) or indicating any IP multicast address by the A (Any) flag set to \"1\";\n-\tan associated FAR containing the Apply Action IE set to forward or buffer the packets, and in the former case with the Outer Header Creation IE set to add the remote N3 or N9 GTP-U tunnel IP address and TEID related with the PDU session;\n-\toptionally an associated QER indicating the QoS to use for the PDU session for the IP Multicast traffic that has been replicated.\nThe UPF shall add or remove the PDU session to/from the DL replication tree associated with an IP Multicast flow, when the UE request to join the IP Multicast flow is accepted or when the UE requests to leave the IP Multicast flow. When receiving downlink IP multicast traffic, the UPF shall replicate the traffic towards each PDU session that has joined the corresponding IP multicast group and that is provisioned with a DL PDR enabling the forwarding of the corresponding IP multicast traffic.\nAdditionally, the SMF may provision a URR, associated with the UL PDR controlling the IGMP or MLD traffic, with a Reporting trigger set to \"IP multicast join/leave\" to request the UPF to report to the SMF when it adds or remove the PDU session to/from the DL replication tree associated with an IP Multicast flow. Corresponding reports shall contain the Multicast IP address of the DL multicast flow and, if available, the Source specific IP address(es) of the DL IP multicast flow.",
      "chunk_type": "general",
      "cross_references": [
        "ts_23.316_clause_4.9.1",
        "clause_8.2.25",
        "ts_23.316"
      ]
    },
    {
      "chunk_id": "ts_29.244_5.26.1",
      "section_id": "5.26.1",
      "section_title": "General",
      "content": "The 5G System may support enabling Time Sensitive Communication, Time Synchronization and Deterministic Networking including the following aspect as specified in clause 4.4.8 of 3GPP TS 23.501 [28]:\na)\tIntegration of 5GS into a TSN data network (DN), i.e., as a bridge in an IEEE 802.1 Time Sensitive Networking (TSN), as illustrated in Figure 4.4.8.2-1 of 3GPP TS 23.501 [28] and further specified in clause 5.28 of 3GPP TS 23.501 [28];\nb)\tEnablers for AF requested support of Time Synchronization and/or some aspects of Time Sensitive Communication (TSCTS) as illustrated in Figure 4.4.8.3-1 of 3GPP TS 23.501 [28] and further specified in clauses 4.4.8, 5.27 and 5.28 of 3GPP TS 23.501 [28];\nc)\tIntegration as a router in a Deterministic Network as illustrated in Figure 4.4.8.4-1 of 3GPP TS 23.501 [28], and further specified in clauses 4.4.8, 5.27 and 5.28 of 3GPP TS 23.501 [28].\nNOTE:\tHow the above features are supported for PDU Sessions involving an I-SMF is not specified in this release of specification. See 3GPP TS 23.501 [28] clause 5.34 and 3GPP TS 23.502 [29] clause 4.24.\nThe related procedures between SMF and UPF defined in clauses 5.26.2, 5.26.3 and 5.26.4 to support bullet a) as described above are optional for the SMF and UPF and may apply if the UPF indicated support of the TSN feature (see clause 8.2.25).\nThe related procedures between SMF and UPF defined in clauses 5.26.2, 5.26.3 and 5.26.4 to support bullet b) as described above are optional for the SMF and UPF and may apply if the UPF indicated support of the TSCTS feature (see clause 8.2.25).\nThe related procedures between SMF and UPF defined in clauses 5.26.2, 5.26.3 to support bullet c) as described above are optional for the SMF and UPF and may apply if the UPF indicated support of the DETNET feature (see clause 8.2.25).\nFor UE-UE TSC communications, the SMF may configure the UPF to apply local switching with existing technologies as specified in clauses 5.13 for Ethernet traffic or 5.23 for 5G VN Group Communication, such as to enable the UPF to locally forward uplink stream from one PDU session as downlink stream in another PDU session.",
      "chunk_type": "definition",
      "cross_references": [
        "ts_23.501_clause_4.4.8",
        "ts_23.501_clause_5.28",
        "ts_23.501_clause_5.34",
        "ts_23.502_clause_4.24",
        "clause_8.2.25",
        "ts_23.501_figure_4.4.8.2-1",
        "ts_23.501_figure_4.4.8.3-1",
        "ts_23.501_figure_4.4.8.4-1",
        "ts_23.501",
        "ts_23.502"
      ]
    },
    {
      "chunk_id": "ts_29.244_5.26.2",
      "section_id": "5.26.2",
      "section_title": "5GS User Plane Node management",
      "content": "5GS Bridge information reporting is defined in Annex F.1 of 3GPP TS 23.502 [29]. This procedure enables the SMF to report 5GS Bridge/User Plane Node information of a PDU session established for Time Sensitive Communication (TSC) to the TSN AF or TSCTSF via the PCF.\n5GS DetNet node information reporting is specified in Annex F.5 of 3GPP TS 23.502 [29] and clause 5.28.5.2 of 3GPP TS 23.501 [28]. This procedure enables the SMF to report 5GS User Plane Node information of a PDU session established for Deterministic Networking (DetNet) to the TSCTSF via the PCF.\nIdentities of 5GS User Plane Node and UPF/NW-TT ports may be pre-configured in the UPF based on deployment. When establishing the PFCP session for the PDU session for TSC, the SMF shall provide the Network Instance IE and it may provide the APN/DNN IE and S-NSSAI IE to the UPF to enable the UPF to respond with the proper 5GS User Plane Node ID based on configuration information associated with the network instance or DNN and S-NSSAI pair. For IEEE TSN the 5GS User Plane Node IE shall contain the Bridge ID and for IETF DetNet the 5GS User Plane Node IE may contain the Router ID .\nIn order to establish a PDU Session for TSC, the SMF shall send a PFCP Session Establishment Request to the UPF to establish the corresponding PFCP session as specified in this specification. Additionally, the SMF shall request the UPF to allocate the port number for the PDU Session and provide the related 5GS User Plane Node ID by including the Create Bridge/Router Info IE with the Bridge Information Indication (BII) bit set to \"1\" (for TSN and TSCTS as described in clause 5.26.1) or with the Router Information Indication (RII) bit set to \"1\" (for DetNet), in the PFCP Session Establishment Request. If so requested, the UPF shall provide corresponding information to the SMF in the Created Bridge/Router Info IE in the PFCP Session Establishment Response message.\nNOTE 1:\tThe port number for the PDU Session corresponds to the device side port of the 5GS bridge/router. When the device supports the DS-TT functionality, the port number represents the DS-TT port number of the PDU Session.\nNOTE 2:\tThe port number for the PDU session and 5GS User Plane Node ID are not meant to be used in PDRs.\nNOTE 3:\tThe port number is encoded differently between TSN/TSCTS and DetNet (see clauses 8.2.141 and 8.2.142).",
      "chunk_type": "general",
      "cross_references": [
        "ts_23.502_clause_5.28.5.2",
        "clause_5.26.1",
        "ts_23.501_clause_5.28.5.2",
        "ts_23.502",
        "ts_23.501"
      ]
    },
    {
      "chunk_id": "ts_29.244_5.26.3.1",
      "section_id": "5.26.3.1",
      "section_title": "General",
      "content": "5GS User Plane Node and Port management information exchange is defined in clause 5.28.3 of 3GPP TS 23.501 [28] and in Annex F of 3GPP TS 23.502 [29]; this procedure enables the SMF to relay transparently user plane node and/or port related information between the TSN AF or TSCTSF and the NW-TT (and DS-TT).\nPort management information shall be transferred between the SMF and UPF in a Port Management Information Container (PMIC). If the NW-TT supports several ports, and port management information needs to be sent for several ports, a separate PMIC shall be used for each port.\nUser Plane Node management information shall be transferred between the SMF and UPF in a User Plane Node Management Information Container (UMIC).\nThe SMF and UPF may send a PMIC or a UMIC using PFCP session related procedures of any PFCP session associated with this NW-TT. The SMF may forward NW-TT related UMIC and/or PMIC(s) and/or related port number(s) to the UPF by sending a PFCP Session Modification Request to the UPF including the TSC Management Information IE. The UPF may send NW-TT related UMIC and/or PMIC(s) and/or related port number(s) to the SMF by sending a PFCP Session Modification Response or a PFCP Session Report Request including the TSC Management Information IE, if direct reporting of TSC management information event to TSN AF or TSCTSF as specified in clause 5.26.3.2 does not apply.\nThe details of the User Plane Node and Port Management Container communication between NW-TT and TSN AF or TSCTSF is defined in the 3GPP TS 24.539 [63].",
      "chunk_type": "definition",
      "cross_references": [
        "ts_23.501_clause_5.28.3",
        "clause_5.26.3.2",
        "ts_23.501",
        "ts_23.502",
        "ts_24.539"
      ]
    },
    {
      "chunk_id": "ts_29.244_5.26.3.2",
      "section_id": "5.26.3.2",
      "section_title": "Direct Reporting of TSC management information event to TSN AF or TSCTSF",
      "content": "A UPF may be instructed to report TSC management information events directly to a TSN AF or TSCTSF as specified in clause 5.28.3.1 of 3GPP TS 23.501 [28].\nA UPF that supports this feature shall set the DRTSC (Direct Reporting of TSC management information events) flag in the UP Function Feature IE (see clause 8.2.25).\nAn SMF shall instruct an UPF that supports the DRTSC feature to report user plane node and port management information in TSC management information events directly to a TSN AF or TSCTSF by including a Direct Reporting Information IE in the TSC Management Information IE in a PFCP Session Modification Request.\nNOTE:\tThe TSN AF or TSCTSF can indicate inside the Port Management Information Container or user plane node Management Information Container that is sent to the UPF that it wants to retrieve port or user plane node management information or to subscribe for notifications as specified in clauses 6.2.1 and 6.3.1 of 3GPP TS 24.539 [63].\nThe Direct Reporting Information shall include the Event Notification URI towards which the events shall be sent, and if available, the Notification Correlation ID to be included in these events.\nAn UPF that supports this feature shall send user plane node and port management information in TSC management information events directly to the TSN AF or TSCTSF, if the Direct Reporting Information IE was received in the TSC Management Information IE in a PFCP Session Modification Request. If so, the UPF shall send these events using the UPF Event Exposure service specified in 3GPP TS 29.564 [73] and using the notification URI received in the Direct Reporting Information IE, and the UPF shall not send any further user plane node and port management information in PFCP Session Report Request and PFCP Session Modification Response towards the SMF.\nIf no Direct Reporting Information IE has been received in the TSC Management Information IE in any PFCP Session Modification Request, the UPF shall send user plane node and port management information to the SMF using PFCP as specified in clause 5.26.3.1.",
      "chunk_type": "requirement",
      "cross_references": [
        "ts_23.501_clause_5.28.3.1",
        "clause_8.2.25",
        "clause_5.26.3.1",
        "ts_23.501",
        "ts_24.539",
        "ts_29.564"
      ]
    },
    {
      "chunk_id": "ts_29.244_5.26.4",
      "section_id": "5.26.4",
      "section_title": "Reporting clock drift between External and 5GS times from UPF to SMF",
      "content": "The SMF may request the UPF to measure and report the clock drift between the external time and 5GS time for one or more external time domains (see clause 5.27.2.4 of 3GPP TS 23.501 [28]), by provisioning one or more Clock Drift Control Information IE(s) in a PFCP Association Setup Request or a PFCP Association Update Request, with the following information:\n-\tTime Domain Number IE(s), identifying the working time domain(s), e.g. PTP (Precision Time Protocol) \"domainNumber\", for which clock drift needs to be measured and reported. This may be present if the Configured Time Domain IE is omitted. The SMF may omit the Time Domain Number IE in the request; if neither the Time Domain Number IE nor the Configured Time Domain IE is included, the UPF shall report the clock drift for all Time domains the UPF is connected to;\n-\tConfigured Time Domain IE with the CTDI (Configured Time Domain Indicator) flag set to \"1\", to indicate that clock drift needs to be measured and reported for the Time Domain Number configured in the NW-TT(s). This may be present if the Time Domain Number IE is omitted.\n-\tthe requested Clock Drift Information, indicating a request to report when the Time Offset Reporting Threshold is exceeded and/or when the cumulative RateRatio Reporting Thresholds is exceeded;\n-\tthe Time offset reporting threshold (i.e. the maximum time offset between the external time and 5G system time), if Time Offset Reporting is requested;\n-\tthe Cumulative rateRatio measurement threshold (i.e. related to cumulative rateRatio calculated at NW-TT)), if Cumulative RateRatio Reporting is requested.\nIf so requested, when detecting either of the clock drift offset triggers exceeding the defined threshold, the UPF shall send a PFCP Node Report Request to the SMF, including one or more Clock Drift Reports, with the corresponding Time Domain Number(s), measurement information and Network Instance (if available) and the combination of DNN and S-NSSAI (if available).\n5.26A\tSupport of TSN enabled Transport Network\n5.26A.1\tGeneral\nThe 5GS may support interworking with IEEE 802.1 TSN deployed in the transport network as specified in clause 5.28a of 3GPP TS 23.501 [28] and Annex F of 3GPP TS 23.502 [29].\nA UPF that supports the TSN Talker and Listener (TL) functionality (i.e. that implements the CN-TL) shall set the CN-TL flag in the UP Function Features IE (see clause 8.2.25).\nIf the UPF supports the CN-TL feature, the SMF/CUC may communicate with the CN-TL via a TL-Container to retrieve the capabilities of the CN-TL or to configure TSN features in the CN-TL as defined in 3GPP TS 29.585 [80] and in clause 5.28a and Annex M of 3GPP TS 23.501 [28].\nTo communicate with the CN-TL, the SMF/CUC shall include:\n-\tone TL-Container IE (encapsulating a Get Request, see 3GPP TS 29.585 [80]) in the PFCP Session Establishment Request (for the related PDU session) sent to the UPF/CN-TL; or\n-\tone or more TL-Container IE(s) (each encapsulating a Set Request for a TN stream, see 3GPP TS 29.585 [80]) in the PFCP Session Modification Request or PFCP Session Deletion Request message (for the related PDU session)sent to the UPF/CN-TL.\nThe UPF/CN-TL shall then include:\n-\tone TL-Container (encapsulating a Get Response, see 3GPP TS 29.585 [80]) in the PFCP Session Establishment Response; or\n-\tone or more TL-Container IE(s) (each encapsulating a Set Response for a TN stream, see 3GPP TS 29.585 [80]) in the PFCP Session Modification Response or PFCP Session Deletion Response message respectively.",
      "chunk_type": "general",
      "cross_references": [
        "ts_23.501_clause_5.27.2.4",
        "ts_23.501_clause_5.28",
        "clause_8.2.25",
        "ts_29.585_clause_5.28",
        "ts_23.501",
        "ts_23.502",
        "ts_29.585"
      ]
    },
    {
      "chunk_id": "ts_29.244_5.27",
      "section_id": "5.27",
      "section_title": "Inter-PLMN User Plane Security",
      "content": "Stage 2 requirements for support of the Inter-PLMN User Plane Security (IPUPS) functionality are defined in clauses 4.2.4, 5.8.2.14, 6.2.3, and 6.3.3.3 of 3GPP TS 23.501 [28], and in clauses 4.2.2 and 5.9.3.4 of 3GPP TS 33.501 [64].\nThe IPUPS functionality shall be activated for the user plane traffic received over N9 interface across PLMNs, according to operator's policy. The SMF shall provision UL/DL PDR(s) to identify the user plane traffic received at the local F-TEID in the UPF and provision UL/DL FAR(s) to forward the user plane traffic to the remote F-TEID in the GTP-U peer. User plane packets not matching any PDR shall be dropped, using mechanisms defined in this specification, see e.g. clause 5.2.1.\nDuring a PFCP Association Setup procedure, an UPF, which is configured to be used for IPUPS shall indicate this with the UPF configured for IPUPS (UUPSI) flag, as specified in clause 7.4.4.2.\nNOTE:\tAny UPF can support the IPUPS functionality. In network deployments where specific UPFs are used to provide IPUPS, UPFs configured for providing IPUPS services (i.e. reporting the UUPSI flag) are selected to provide IPUPS function.",
      "chunk_type": "general",
      "cross_references": [
        "clause_5.2.1",
        "clause_7.4.4.2",
        "ts_23.501",
        "ts_33.501"
      ]
    },
    {
      "chunk_id": "ts_29.244_5.28.1",
      "section_id": "5.28.1",
      "section_title": "General",
      "content": "Stage 2 requirements for the support of Downlink data delivery status notification with UPF buffering are specified in clause 5.8.2.19.2 of 3GPP TS 23.501 [28] and clauses 4.15.3.2.8 and 4.15.3.2.9 of 3GPP TS 23.502 [29].\nIf the UP function supports the Downlink data delivery status notification with UPF buffering, the UP function shall set the DDDS feature flag in the UP Function Features IE (see clause 8.2.25). If so, the CP function may provide the DL Buffering Duration IE and DL Buffering Suggested Packet Count IE in the related BAR to the UP function and may request the UP function:\n-\tto notify the first buffered DL packet for the traffic matching the downlink PDR by setting the BUFF flag, BDPN flag in the Apply Action IE of the FAR; and/or\n-\tto notify the first discarded DL packet for the traffic matching the downlink PDR by setting the BUFF flag and DDPN flag to \"1\" in the Apply Action IE of the FAR.\nThe UP function shall report the first buffered DL packet for each service data flow identified by a PDR, by sending a PFCP Session Report Request including a Downlink Data Report IE identifying the PDR(s) for which downlink packets have been received, if the BUFF and BDPN flags are set to \"1\" in the Apply Action for the FAR which is associated with the PDR.\nThe UP function shall report the first discarded DL packet for each service data flow identified by a PDR, if the BUFF and DDPN are set to \"1\" in the Apply Action for the FAR which is associated with the PDR and if the DL Buffering Duration or DL Buffering Suggested Packet Count is exceeded.\nThe DL Data Status IE shall be included in the Downlink Data Report IE to indicate the report is triggered by the Downlink data delivery status with UPF buffering when the first DL packet is buffered or discarded.\nNOTE 1:\tSetting the Apply Action with the BUFF together with BDPN and/or DDPN to \"1\" requires the UPF to report the first buffered or discarded DL packet for each service data flow identified by a PDR.\nNOTE 2:\tSetting the Apply Action with the BUFF and the NOCP to \"1\" and if the DL Buffering Duration is provisioned, this is to request the UP function to buffer the downlink data packet for an extended duration without sending any further notification to the CP function about the arrival of DL data packets (See clause 5.2.4.2). As an exception, if the UPF supports EDBNC feature and if the EDBN bit is set to \"1\", in this case, the UP function will send DL packet notifications to report the arrival of the first buffered DL packet for each QoS flow for a given FAR to the CP function for the duration indicated by the DL Buffering Duration. (See also clause 5.2.4.1)\nNOTE 3:\tThe CP function can request the UP function to report the first buffered DL packet by setting the BDPN flag or the NOCP flag in the Apply Action IE of the FAR. The difference is that:\n-\tIf the BDPN flag is set, the UP function reports the first buffered DL packet for each service data flow identified by a PDR associated to the FAR.\n-\tIf the NOCP flag is set, the UP function reports the first buffered DL packet for each QoS flow for a given FAR, i.e. if there are subsequent DL packets (pertaining to different service data flow identified by other PDRs but being conveyed by the same QoS flow), there is no new report sent to the CP function.\nIf the UP function supports the Downlink data delivery status notification with UPF buffering, the CP function may also request the UP function to drop the DL packets directly and send a notification for the traffic matching the downlink PDR by set the DROP flag and DDPN flag in the Apply Action IE of the FAR.\nThe UP function shall report the dropped DL packets for each service data flow identified by a PDR, by sending a PFCP Session Report Request including a Downlink Data Report IE identifying the PDR(s) for which downlink packets have been received.",
      "chunk_type": "definition",
      "cross_references": [
        "ts_23.501_clause_5.8.2.19.2",
        "clause_8.2.25",
        "clause_5.2.4.2",
        "clause_5.2.4.1",
        "ts_23.501",
        "ts_23.502"
      ]
    },
    {
      "chunk_id": "ts_29.244_5.29",
      "section_id": "5.29",
      "section_title": "Support Reliable Data Service",
      "content": "Clause 5.31.6 of 3GPP TS 23.501 [28], clause 4.3.2 of 3GPP TS 23.502 [29] and clause 4.5.14.3 of 3GPP TS 23.682 [66], specify that The Reliable Data Service (RDS) may be used between the UE and UP function when using a PDU Session of PDU Type 'Unstructured' in 5GS or using PDN Connection of PDN Type 'Non-IP' in EPS. The service is enabled or disabled based on DNN and NSSAI Configuration per SLA in 5GS or APN Configuration per SLA in EPS.\nIf the UE indicates its capability of supporting RDS in the Protocol Configuration Options (PCO) and if the UP function indicated support of the RDS feature, the CP function may request the UP fuction to apply the RDS functionality for the PDU session by sending \"Provide RDS Configuration Information\" IE within PFCP Session Establishment Request message (see clause 7.5.2.11).\nIf the UP function supports and accepts RDS, it should respond to CP function by setting RDS flag in \"RDS Configuration Information\" IE within PFCP Session Establishment Response message (see clause 7.5.3.8), and the UP function should place unstructed DL data from N6/SGi in the payload of RDS protocol and then insert it as GTP-U payload, and vice versa for UL data.\nThen the CP function should indicate to the UE, in the PCO, that the RDS shall be used if enabled in the DNN and NSSAI configuration in 5GS or APN configuration in EPS. The Reliable Data Service is enabled afterwards.\nReliable Data Service protocol is defined in 3GPP TS 24.250 [65].",
      "chunk_type": "general",
      "cross_references": [
        "ts_23.501_clause_5.31.6",
        "ts_23.501_clause_4.3.2",
        "ts_23.502_clause_4.5.14.3",
        "clause_7.5.2.11",
        "clause_7.5.3.8",
        "ts_23.502_clause_4.3.2",
        "ts_23.682_clause_4.5.14.3",
        "ts_23.501",
        "ts_23.502",
        "ts_23.682",
        "ts_24.250"
      ]
    },
    {
      "chunk_id": "ts_29.244_5.30",
      "section_id": "5.30",
      "section_title": "Notifying Start Pause of Charging",
      "content": "The requirements for PGW Pause of Charging in EPC are specified in clause 5.3.6A of 3GPP TS 23.401 [14] and the requirements for SMF Pause of Charging feature for 5GC are specified in clause 4.4.4 of 3GPP TS 23.502 [29].\nTo reduce the charging discrepancy between SGW-C and PGW-C, or between I/V-SMF and (h)SMF due to the signalling latency to notify start pause of charging, the CP function (SGW-C and PGW-C for EPC, I/V-SMF and (H-)SMF for 5GC) and UP function (SGW-U and PGW-U for EPC, I/V-UPF and PSA UPF) may support the Notify Start Pause of Charging via user plane feature (NSPOC) as described below.\nWhen both the CP function and the UP function support the NSPOC feature, and the peer CP function (PGW-C or (H-)SMF) and peer UP function (PGW-U or PSA UPF) are known to support the NSPOC feature as specified in 3GPP TS 29.274 [9] and 3GPP TS 29.502 [50], the CP function (SGW-C, or I/V-SMF) may set the SSPOC bit to \"1\" in the Measurement Information included in the URR when the Dropped DL Traffic Threshold is provisioned, to request the UP function (SGW-C, I/V-UPF) to send a Start Pause of Charging indication via one or more GTP-U Tunnel Status message to the upstream GTP-U entity(s) when the Dropped DL Traffic Threshold is reached.\nWhen both the CP function and the UP function support the NSPOC feature, the CP function (PGW-C, or (H-)SMF) may set the ASPOC bit to \"1\" in the Measurement Information included in the URR if the URR is intended for charging, to request the UP function to stop the usage measurement for the URR when receiving Start Pause of Charging indication from the peer downstream GTP-U entity, so that the UP function shall behave as if the Inactive Measurement flag had been set for the URR when it receives a Tunnel Status message with the Start Pause of Charging indication is set to \"1\" from the downstream peer GTP-U entity.\nRegardless of whether the NSPOC feature is supported and used, the procedures specified in clause 5.3.6A of 3GPP TS 23.401 [14] and clause 4.4.4 of 3GPP TS 23.502 [29] for starting and stopping Pause of Charging for EPC and 5GC respectively shall be performed, i.e. the UP function (SGW-U or I/V-UPF) shall still be instructed to generate a usage report when the Dropped DL Traffic Threshold is reached, the SGW-C or V/I-SMF shall request the PGW-C or (H-)SMF to start or stop charging, and the PGW-C or (H-)SMF shall instruct the UP function (PGW-U or PSA UPF) to inactivate or activate measurement for URR(s) applicable for charging.\nWhen the NSPOC feature is supported and used, the CP function (PGW-C or (H-)SMF) may:\n-\tset the \"SUMPC\" flag in PFCPSMReq-Flags IE to \"1\" to request the UP function to stop the usage measurement for all URRs with the \"ASPOC\" flag set to \"1\", e.g. when the CP function is informed to start Pause of Charging via control plane;\n-\tset the \"RUMUC\" flag in PFCPSMReq-Flags IE to \"1\" to request the UP function to resume the usage measurement for all URRs with the \"ASPOC\" flag set to \"1\", e.g. when the CP function is informed to stop Pause of Charging via control plane;-\tset the \"CIAM\" flag together with Inactive Measurement flag in the Measurement Information IE in the Create URR IE or Update URR IE to stop or resume the usage measurement for a specific URR with the \"ASPOC\" flag set to \"1\".\nThe UP function shall stop or resume the usage measurement for all the URRs with the \"ASPOC\" flag set to \"1\" upon receipt of a PFCP Session Establishment Request or PFCP Session Modification Request with the \"SUMPC\" or \"RUMUC\" flag set respectively, regardless the current value of the Inactive Measurement flag for a given URR.\nThe UP function shall start the usage measurement for a URR with the \"ASPOC\" flag set to \"1\" unless both the \"CIAM\" and \"INAM\" flags are set to \"1\" or unless the \"SUMPC\" flag is set to 1 in the same message, when the URR is provisioned in a Create URR IE.\nNOTE 1:\tOnly the \"SUMPC\" flag can be set in the PFCP Session Establishment Request message, e.g. during a restoration procedure for a UPF failure.\nThe UP function shall stop or resume the usage measurement for a specific URR with the \"ASPOC\" flag set to \"1\" upon receipt of a PFCP Session Modification Request including an Update URR IE with the Measurement Information IE, according to the value of the \"INAM\" flag, if the \"CIAM\" flag is set to 1.  If the \"CIAM\" flag is set to 0, the UP function shall ignore the \"INAM\" flag received in the Measurement Information for a URR with the \"ASPOC\" flag set to \"1\".\nNOTE 2:\tNotifying Start Pause of Charging via GTP-U fastens the triggering of charging pause in the PGW-U or UPF (PSA). If the GTP-U Tunnel Status messages are lost, charging is paused when receiving the corresponding instruction from the PGW-C/SMF.\nNOTE 3:\tThe UP function will forward Tunnel Status message to the upstream GTP-U entity(s) if it is not a PSA UPF or PGW-U connecting to N6 or SGi interface. If the UP function is a UL/CL or BP, it needs send or forward the Tunnel Status message to all of PSA UPFs.\nNOTE 4:\tThe UP function resumes the usage measurement for all URRs with the \"ASPOC\" flag set to \"1\" regardless if the usage measurement was stopped by the CP function using the \"SUMPC\" flag or using the Inactive Measurement flag per URR, or upon being notified by the downstream GTP-U entity using Tunnel Status message.\nNOTE 5:\tWhen the CP function uses Inactive Measurement flag to stop the usage measurement for a given URR, it can set the \"ASPOC flag\" to \"0\" if the CP function doesn't want that the usage measurement is resumed when applying \"RUMUC\".",
      "chunk_type": "general",
      "cross_references": [
        "ts_23.401_clause_5.3.6",
        "ts_23.502_clause_4.4.4",
        "ts_23.401_clause_4.4.4",
        "ts_23.401",
        "ts_23.502",
        "ts_29.274",
        "ts_29.502"
      ]
    },
    {
      "chunk_id": "ts_29.244_5.31.1",
      "section_id": "5.31.1",
      "section_title": "General",
      "content": "Stage 2 requirements for the support of Layer 2 Tunneling Protocol (L2TP) are specified in clause 5.8.2.16 of 3GPP TS 23.501 [28], clause 4.3.2.4 of 3GPP TS 23.502 [29] and clause 5.5 of 3GPP TS 23.214 [2].\nIt is optional for both the CP function and the UP function to support the L2TP feature.\nL2TP is specified in IETF RFC 2661 [67]. An L2TP Tunnel is setup between a L2TP Access Concentrator (LAC) and a L2TP Network Server (LNS) pair controlling the connection, that may contain one or more L2TP Sessions. More than one L2TP tunnel can be established between a LAC-LNS pair.\nThe UP function shall act as the LAC.\nThe CP function may request the UPF to setup an L2TP Session for a PDN connection or PDU session between the LAC and the LNS in the Data Network.\nOne L2TP tunnel between the UP Function and the L2TP server may be shared by multiple PDN connection / PDU session using the same N6/SGi network instance and L2TP parameters (e.g. LNS address). A single L2TP tunnel may be shared by multiple PDN connections / PDU sessions created by the same CP Function or by different CP Functions.",
      "chunk_type": "definition",
      "cross_references": [
        "ts_23.501_clause_5.8.2.16",
        "ts_23.501_clause_4.3.2.4",
        "ts_23.502_clause_5.5",
        "ts_23.502_clause_4.3.2.4",
        "ts_23.214_clause_5.5",
        "ts_23.501",
        "ts_23.502",
        "ts_23.214"
      ]
    },
    {
      "chunk_id": "ts_29.244_5.31.2",
      "section_id": "5.31.2",
      "section_title": "L2TP Tunnel and L2TP Session Setup",
      "content": "When both the CP function and the UP function support the L2TP feature (see clause 8.2.25), if an L2TP session is required to support the PDN connection/PDU session, the CP function shall send a PFCP Session Establishment Request message including the following L2TP related IEs, to request the UP Function to setup an L2TP session towards the LNS:\n-\tone L2TP Session Information IE to control the L2TP session setup. The L2TP Session Information may include:\n-\tthe Called Number, Calling Number and the MRU (Maximum Receive Unit in LCP/PPP, to be set as the value of the MTU received from the UE or that may be configured in the CP function);\n-\tthe L2TP Session Indications IE to indicate that the UP function shall request the LNS to allocate an IP address for the PDN session/PDN connection, to provide DNS server address(es) and/or NBNS server address(es) for the session;\n-\tthe L2TP User Authentication IE including parameters such as authentication type, Username and Password, Challenge and Challenge Response which may either be sent by the UE through PCO or be configured in the CP0.\n-\tOne or more L2TP Tunnel Information IEs to provide parameters to control the establishment of a L2TP tunnel if such information is available in the CP function, e.g. if it is received from an AAA/Radius server or locally configured in the CP function. This IE shall include LNS IPv4/IPv6 address, and it may include Tunnel Password for L2TP tunnel authentication, Tunnel Preference if multiple L2TP Tunnel Information IEs are sent, as specified in 3GPP TS 29.061 [39] and 3GPP TS 29.561 [49].\nNOTE 1:\tMultiple L2TP Tunnel Information IEs can be sent to provide the UP Function with a list of possible L2TP tunnels that can be used to establish the L2TP session. This can be used to ensure that the session is established even if a specific LNS is temporarily unavailable, or to load balance the setup of L2TP sessions over different LNS's. A given L2TP Tunnel Information IE includes Tunnel attributes, e.g. Tunnel-Server-Endpoint and Tunnel-Password, received over N6/SGi with the same Tag value (see IETF RFC 2868 [68]). See also 3GPP TS 29.061 [39] and 3GPP TS 29.561 [49].\nNOTE 2:\tIf the UE IP address is to be allocated by the UP function (or the LNS), the CP function indicates this in the UE IP Address IE in the Create PDR or Create Traffic Endpoint IE, regardless of whether the UE IP address is to be assigned by the LNS or the UPF.\nNOTE 3:\tIf the L2TP tunnel parameters are configured in the UP Function, the UP Function determines how to establish the L2TP tunnel based on its local configuration.\nNOTE 4:\tAn L2TP session cannot be modified once established as specified in IETF RFC 2661 [67].\nUpon receiving the PFCP Session Establishment Request from the CP function, the UP function shall determine whether to use an already established L2TP tunnel (if any appropriate one has already been established) or establish a new L2TP tunnel. The UP function may have already established L2TP tunnel(s), e.g. based on locally configured L2TP Tunnel Information. If an existing L2TP Tunnel is used, the UP function shall only setup a new L2TP session within the existing L2TP tunnel. Otherwise, the UP function shall perform both L2TP tunnel and L2TP session setup.\nThe UP function shall send a PFCP Session Establishment Response to the CP function, carrying the Created L2TP Session IE containing information about the established L2TP session, e.g. the used LNS Address, that may be used for statistics or diagnostics. The Cause IE in the response message may carry additional L2TP specific failure information to the CP function if the L2TP tunnel or L2TP session establishment failed.\nThe PFCP Session Establishment Response message may also include the DNS Server Address IE(s) and/or NBNS Server Address IE(s) containing the DNS server and/or NBNS Server information, if this information was requested.\nIf the UE IP address was allocated by the UP Function (or the LNS), the UP function shall provide the allocated IP address to the CP function in the UE IP Address IEs in the Created PDR IE and/or Created Traffic Endpoint IE (as specified in this specification).\nUpon receiving uplink user plane traffic pertaining to the PFCP session with a L2TP session established, the UP function shall forward the traffic via the L2TP tunnel towards the LNS server.",
      "chunk_type": "requirement",
      "cross_references": [
        "clause_8.2.25",
        "ts_29.061",
        "ts_29.561"
      ]
    },
    {
      "chunk_id": "ts_29.244_5.31.3",
      "section_id": "5.31.3",
      "section_title": "L2TP Session and L2TP Tunnel Release",
      "content": "Upon receiving a PFCP Session Deletion Request message from the CP function, the UP function shall release the corresponding L2TP session. The UP function may release the L2TP tunnel if there is no other L2TP session using the L2TP tunnel.\nNOTE 1:\tThe UPF can alternatively retain the L2TP tunnel when all L2TP sessions are terminated.\nWhen the LNS terminates a L2TP session or an L2TP tunnel, the following applies:\n-\tIf the LNS terminates an L2TP session, the UP function shall terminate the PFCP session and  report to the CP Function that the PFCP session is deleted by sending a PFCP Session Report Request message to the CP function as described in clause 5.18.2, with the Cause indicating the reason for the termination.\n-\tIf the LNS terminates an L2TP tunnel, the UP function shall terminate all the PFCP sessions using the L2TP tunnel and report to all the CP functions controlling at least one such PFCP session that the respective PFCP sessions have been deleted by sending a PFCP Session Report Request message to the CP function for each affected PFCP session, as described in clause 5.18.2, with the Cause indicating the reason for the termination.\n-\tIf the UP function detects that the connectivity with an LNS is lost, the UP function shall terminate the PFCP sessions using the L2TP tunnel(s) towards that LNS and report to the CP that all the PFCP sessions affected have been deleted by sending a PFCP Session Report Request message to the CP function for each affected PFCP session, as described in clause 5.18.2, with the Cause indicating the reason for the termination.",
      "chunk_type": "requirement",
      "cross_references": [
        "clause_5.18.2"
      ]
    },
    {
      "chunk_id": "ts_29.244_5.32.1",
      "section_id": "5.32.1",
      "section_title": "General",
      "content": "This clause specifies the support of uplink packets buffering.",
      "chunk_type": "definition",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.244_5.32.2",
      "section_id": "5.32.2",
      "section_title": "Uplink packets buffering for on-line charging",
      "content": "If the UP function indicated support of the Quota Action (QUOAC) feature in the UP Function Features IE and the FAR ID for Quota Action was set to buffer the application traffic at zero quota, the UP function shall buffer the related uplink packets if it is provisioned with zero quota earlier or the quota has been exhausted, as specified in clause 5.2.2.2.1. In addition, if the UP Function has indicated support of the feature UL/DL Buffering Control (UDBC), the UP function shall buffer the number of packets (including both uplink or downlink) based on the Suggested Buffering Packet Count IE in a BAR provided by the SMF, until it receives new instructions from the CP function, e.g. when the new Quota is granted.",
      "chunk_type": "general",
      "cross_references": [
        "clause_5.2.2.2.1"
      ]
    },
    {
      "chunk_id": "ts_29.244_5.32.3",
      "section_id": "5.32.3",
      "section_title": "Uplink packets buffering during EAS relocation",
      "content": "If the UP function supports uplink packets buffering during EAS relocation, the UP function shall set the UPBER bit in the UP Function Features (see clause 8.2.25).\nThe SMF shall request the UPF (PSA) to buffer the uplink packets related to one or more Service Data Flows sent to the new EAS by setting the BUFF flag in Apply Action IE of the related FAR. The SMF shall set the FORW flag in Apply Action IE when the EAS relocation has been performed.",
      "chunk_type": "requirement",
      "cross_references": [
        "clause_8.2.25"
      ]
    },
    {
      "chunk_id": "ts_29.244_5.33.1",
      "section_id": "5.33.1",
      "section_title": "General",
      "content": "Stage 2 requirements for support of enhancement of Edge Computing are specified in 3GPP TS 23.548 [69].",
      "chunk_type": "definition",
      "cross_references": [
        "ts_23.548"
      ]
    },
    {
      "chunk_id": "ts_29.244_5.33.2",
      "section_id": "5.33.2",
      "section_title": "Uplink packet buffering for low packet loss during EAS relocation",
      "content": "Support of uplink packets buffering for low packet loss during EAS relocation as specified in clause 6.3.5 of 3GPP TS 23.548 [69] is defined in clause 5.32.3.",
      "chunk_type": "general",
      "cross_references": [
        "ts_23.548_clause_6.3.5",
        "ts_23.548_clause_5.32.3",
        "ts_23.548"
      ]
    },
    {
      "chunk_id": "ts_29.244_5.33.3",
      "section_id": "5.33.3",
      "section_title": "Edge Relocation using EAS IP address and Port number Replacement",
      "content": "To support Edge Relocation using EAS IP address and Port number replacement as specified in clause 6.3.3 of 3GPP TS 23.548 [69], the SMF shall instruct the UPF to replace:\n-\tfor the UL traffic, the destination IP address and/or port number of the outgoing IP packet with the Target EAS IP address and/or port number, by provisioning an UL FAR with an IP Address and Port Number Replacement IE containing the Target EAS IP address and/or port number; and\n-\tfor the DL traffic, the source IP address and/or port number of the incoming packet with the Source EAS IP address and/or port number, by provisioning a DL FAR with an IP Address and Port Number Replacement IE containing the Source EAS IP address and/or port number.\nA UPF that supports replacing the source and destination IP address and Port Number of an (inner) IP packet shall set the IPREP flag in the UP Function Features IE (see clause 8.2.25) and shall replace the source or destination IP address and/or Port Number of an (inner) IP packet as instructed by the SMF.",
      "chunk_type": "requirement",
      "cross_references": [
        "ts_23.548_clause_6.3.3",
        "clause_8.2.25",
        "ts_23.548"
      ]
    },
    {
      "chunk_id": "ts_29.244_5.33.4",
      "section_id": "5.33.4",
      "section_title": "EAS Discovery procedure with Local DNS Server/Resolver",
      "content": "Clause 6.2.3.2.3 of 3GPP TS 23.548 [69] specifies two options (C and D) for scenarios where the DNS message is to be handled by a Local DNS server/resolver.\nIn Option C, the SMF shall provision UL PDR(s) on the UL CL (including e.g. the Local DNS server address) or the BP (e.g. with the source IP prefix set to the IP prefix address assigned by the Local PSA) and associated FAR(s) to route traffic destined to the L-DN including the DNS query messages to the L-PSA, as specified in clause 5.17.2.\nIn Option D, if the SMF has been configured that DNS Queries for an FQDN (range) query can be locally routed on the UL CL, the SMF shall instruct:\n-\tthe UL CL to locally route DNS queries for the FQDN (range) to the Local DNS server, by provisioning an UL PDR with one or more DNS Query Filters or with a pre-defined PDR matching the requested DNS traffic and by associating a FAR to the UL PDR to forward the traffic towards the Local PSA. A UPF supporting this option shall indicate that it supports steering DNS traffic based on the target domain of the DNS Query by setting the DNSTS flag in the UP Function Features IE (see clause 8.2.25); and\n-\tthe Local PSA to send the DNS traffic to the Local DNS server, by provisioning a UL PDR with one or more DNS Query Filters, as described above for the UL CL, and by associating a FAR to the UL PDR to forward the traffic to the Local DNS server via tunneling (with the FAR including the Outer Header Creation IE) or via IP address replacement (with the FAR including the IP Address and Port number Replacement IE containing the IP address and/or port of the Local DNS server).",
      "chunk_type": "procedure",
      "cross_references": [
        "ts_23.548_clause_6.2.3.2.3",
        "clause_5.17.2",
        "clause_8.2.25",
        "ts_23.548"
      ]
    },
    {
      "chunk_id": "ts_29.244_5.33.5",
      "section_id": "5.33.5",
      "section_title": "Direct Reporting of QoS monitoring events to Local NEF or AF",
      "content": "A UPF may be instructed to report QoS monitoring events directly to a local NEF or AF as specified in clause 6.4 of 3GPP TS 23.548 [69].\nA UPF that supports this feature shall set the DRQOS (Direct Reporting of QoS monitoring events) flag in the UP Function Feature IE (see clause 8.2.25).\nAn SMF shall instruct an UPF that supports the DRQOS feature to report Per QoS Flow Per UE QoS Monitoring events directly to a local NEF or AF by applying the requirements specified in clauses 5.24.4 or 5.24.5.3, and by additionally including a Direct Reporting Information IE in the SRR as specified in clauses 5.2.8.2 and 5.39.2.\nThe UPF shall report the QoS monitoring result of the QoS flows as specified in clauses 5.39.4, 5.24.4.3 and 5.24.5.4.",
      "chunk_type": "requirement",
      "cross_references": [
        "ts_23.548_clause_6.4",
        "clause_8.2.25",
        "ts_23.548"
      ]
    },
    {
      "chunk_id": "ts_29.244_5.33.6",
      "section_id": "5.33.6",
      "section_title": "EAS Discovery procedure with V-EASDF",
      "content": "To support EAS discovery procedure with V-EASDF using IP replacement mechanism for supporting HR-SBO as specified in clause 6.7.2.5 of 3GPP TS 23.548 [69], the SMF shall instruct:\n-\tthe UPF in VPLMN to send the DNS queries for the FQDN (range) to the V-EASDF, by provisioning an UL PDR with one or more DNS Query Filters matching the requested DNS traffic and by associating a FAR to the UL PDR to forward the traffic towards the V-EASDF via IP address replacement (with the FAR including the IP Address and Port number Replacement IE containing the Target IP address and/or port of the V-EASDF); and\n-\tthe UPF in VPLMN to replace the source IP address and/or port number of the DNS response targeting the FQDN (range), by provisioning an DL PDR with one or more DNS Response Filters matching the DNS response and by associating a FAR to the DL PDR with an IP Address and Port Number Replacement IE containing the Source DNS server of HPLMN IP address and/or port number.",
      "chunk_type": "procedure",
      "cross_references": [
        "ts_23.548_clause_6.7.2.5",
        "ts_23.548"
      ]
    },
    {
      "chunk_id": "ts_29.244_5.33.7",
      "section_id": "5.33.7",
      "section_title": "DNS traffic routing for different UEs with same private UE IP address",
      "content": "To support DNS traffic routing for different UEs with same private UE IP address for HR-SBO in VPLMN as specified in clause 6.7.2.2 of 3GPP TS 23.548 [69], the V-SMF may instruct the V-UPF (acting as Local PSA):\na)\tuse tunnelling over N6 if the V-UPF indicates support of the UN6TU feature (see clause 8.2.25). When doing so:\n-\tThe V-SMF shall provision a UL FAR (associated with the UL PDR(s) identifying the DNS traffic authorized to be locally offloaded) with an N6 Routing Information IE in the Forwarding Parameters to request the V-UPF to forward the packets into a N6 tunnel. The N6 Routing Information IE shall contain the information for the N6 tunnel. For example, when IP in IP tunneling or UDP/IP tunneling is used, the V-SMF may select a V-EASDF/V-UPF tunnel IP address and an optional port (for UDP/IP tunneling) according to the V-EASDF/V-UPF NF profile received from the NRF respectively and then shall set the V-UPF tunnel IP address and the port (for UDP/IP tunneling) as the Source IPv4/IPv6 address and Source Port Number, and the V-EASDF tunnel IP address and the port (for UDP/IP tunneling) as the Destination IPv4/IPv6 address and Destination Port Number in the N6 Routing Information.\n-\tThe V-SMF shall provision one or more DL PDRs identifying the DNS traffic received from the V-EASDF via the N6 tunnel for each PFCP session using the N6 tunnel, where the PDR(s) shall contain an N6 Routing Information IE or an Traffic Endpoint Id which refers to a Traffic Endpoint provisioned with an N6 Routing Information IE, to instruct the UPF to first match the packets using the N6 tunneling addresses and further match the packets using the UE IP address to identify the PFCP session. The V-SMF shall set the V-UPF tunnel IP address and the port (for UDP/IP tunneling) as the Destination IPv4/IPv6 address and Destination Port Number, and the V-EASDF tunnel IP address and the port (for UDP/IP tunneling) as the Source IPv4/IPv6 address and Source Port Number in the N6 Routing Information IE.\n-\tDistinct N6 tunnels shall be used for HR-SBO PDU sessions with overlapping IP addresses, i.e. for PDU sessions from different HPLMN/S-NSSAIs/DNNs using private UE IP addresses; or\nb)\tto map the UE IP address to an N6 IP address, if the V-UPF indicated its support of the UMN6IP feature (see clause 8.2.25). When doing so:\n-\tthe V-SMF shall request the V-UPF to allocate a Mapped N6 IP address by setting the CHOOSE IPV4 in the Mapped N6 IP Address IE of the DL PDR IE (see Table 7.5.2.2-1) or in the Traffic Endpoint IE (see Table 7.5.2.7-1), for DL PDRs or the DL Traffic EndPoint;\n-\tthe V-SMF may request the V-UPF to allocate the same Mapped N6 IP address to several DL PDRs (of the same PFCP session) to be created (i.e. using the Create PDR IE) within one single PFCP Session Establishment Request or PFCP Session Modification Request, or to several DL PDRs to be modified (i.e. using the Update PDR IE) within one single PFCP Session Modification Request, or to several DL PDRs containing the same DL Traffic Endpoint ID;\n-\tthe V-SMF shall provision an UL FAR (associated with the UL PDR(s) identifying the DNS traffic authorized to be locally offloaded) including an IP Address and Port Number Replacement IE with the UMN6RS bit set to \"1\" to request the V-UPF to replace the source IP address (which is the UE's private IP address) with the mapped N6 IP address that is allocated by the V-UPF;\n-\tthe V-SMF shall provision a DL FAR (associated with the DL PDR(s) containing the Mapped N6 IP address) including an IP Address and Port Number Replacement IE with the DIPV4 bit set to \"1\" to request the V-UPF to replace the destination IP address (which is the Mapped N6 IP address) with the UE's private IP address included in the Destination IPv4 Address field;\n-\tthe V-UPF shall assign a mapped N6 IP address and replace the source IP address (i.e. the UE's private IP address) in UL traffic (i.e. DNS requests sent to the V-EASDF) and replace the destination IP address in DL traffic (i.e. DNS response sent to the UE), according to the V-SMF instructions.\nNOTE 1:\tThe V-SMF does not provide the UE IP address IE in the DL PDR or Traffic Endpoint since the UE IP address is not used for DL packet matching.",
      "chunk_type": "general",
      "cross_references": [
        "ts_23.548_clause_6.7.2.2",
        "clause_8.2.25",
        "table_7.5.2.2-1",
        "table_7.5.2.7-1",
        "ts_23.548"
      ]
    },
    {
      "chunk_id": "ts_29.244_5.34.1",
      "section_id": "5.34.1",
      "section_title": "General",
      "content": "This clause specifies N4mb and N4 specific requirements to support 5G Multicast and Broadcast Service.\nStage 2 requirements for the support of 5G Multicast and Broadcast Service is specified in clause 6.7 of 3GPP TS 23.247 [72] and clause 5.8.5  of 3GPP TS 23.501 [28].",
      "chunk_type": "definition",
      "cross_references": [
        "ts_23.247_clause_6.7",
        "ts_23.247_clause_5.8.5",
        "ts_23.501_clause_5.8.5",
        "ts_23.247",
        "ts_23.501"
      ]
    },
    {
      "chunk_id": "ts_29.244_5.34.2.1",
      "section_id": "5.34.2.1",
      "section_title": "General",
      "content": "This clause specifies N4mb specific requirements to support 5G Multicast and Broadcast Service. For a location dependent MBS service (see clause 6.2.3 of 3GPP TS 23.247 [72]), the MB-SMF shall establish one PFCP session per MBS session and MBS Session Area, following the requirements specified in clause 5.34.2.2.\nNOTE:\tA Location dependent MBS service enables distribution of different content data to different MBS service areas. The same MBS Session ID is used but a different Area Session ID is used for each MBS service area.\n5.34.2.1A\tPFCP protocol extensions for N4mb\nWhen multicast transport is used for delivering user plane MBS traffic, the MB-SMF may set one or more of the following N4mb specific flags:\n-\tJMBSSM (Join MBS Session SSM) flag in the MBS Session N4mb Control Information IE in the PFCP Session Establishment Request. If set, the MB-UPF shall join the multicast tree towards the Source Specific Multicast (SSM) address information (provided by AF/AS or MBSTF for the MBS Session) indicated in the IP Multicast Addressing Info IE in the downlink PDR.\n-\tthis instructs the MB-UPF to receive MBS data using multicast transport over N6mb interface.\n-\tPLLSSM (Provide Low Layer Source Specific Multicast address) flag in the MBS Session N4mb Control Information IE in the PFCP Session Establishment Request. If set, the MB-UPF shall provide a LLSSM address and a GTP-U Common Tunnel EndPoint Identifier (C-TEID) to the MB-SMF.\n-\tthis instructs the MB-UPF to provide the MB-SMF with a Low Layer Source Specific Multicast (LLSSM) address (i.e. multicast destination address and related source unicast IP address) for the delivery of MBS data using multicast transport over N3mb and/or N19mb interfaces.\nNOTE 1:\tThe PLLSSM flag is not set in the PFCP Session Establishment Request message during the restoration procedure for an MB-UPF restart (see clause 8.2.2 in 3GPP TS 23.527 [40]) since in this procedure, the MB-SMF provides the MB-UPF with the LLSSM that was used for the MBS session before the MB-UPF restart, i.e. no new LLSSM needs to be assigned by the MB-UPF for the MBS session.\n-\tFSSM (Forward packets to lower layer SSM) flag in the Apply-Action IE of the Create FAR IE in the PFCP Session Establishment Request or in the Update FAR IE in the PFCP Session Modification Request. If set, the MB-UPF shall forward the MBS session data using the LLSSM and the C-TEID, which the MB-UPF has earlier assigned to the MBS session.\n-\tthis instructs the MB-UPF to forward MBS data using multicast transport over N3mb and/or N19mb interfaces.\nNOTE 2:\tThe FSSM flag can be included in the Create FAR IE in the PFCP Session Establishment Request during the creation of an MBS session (see clauses 7.1.1.2 and 7.1.1.3 of 3GPP TS 23.247 [72]) or during an MBS restoration procedure (see e.g. clauses 8.2.2 and 8.2.3 in 3GPP TS 23.527 [40]). The FSSM flag can also be included in the Update FAR IE in the PFCP Session Modification Request e.g. during the Activation of a Multicast MBS session procedure (see clause 5.34.2.4).\nWhen unicast transport is used for delivering user plane MBS traffic, the MB-SMF may set the following N4mb specific flag:\n-\tMBSU (Forward and replicate MBS data using Unicast transport) flag in the Apply Action IE of the Update FAR IE in the PFCP Session Modification Request or in the Create FAR IE in the PFCP Session Establishment Request. If set, the MB-UPF shall either forward, or replicate and forward the MBS Session data towards the one or more GTP-U DL tunnels terminating at the NG-RAN nodes and/or PSA UPFs. The MB-SMF provides the MB-UPF with one or more DL GTP-U F-TEIDs (i.e. IP address and tunnel endpoint identifier).\n-\tthis instructs the MB-UPF to forward MBS data using unicast transport over N3mb and/or N19mb.\nNOTE 3:\tThe MBSU flag can be included in the Update FAR IE in the PFCP Session Modification e.g. after creating the MBS session when one or more NG-RAN node(s) and/or PSA UPF(s) provides a downlink GTP-U F-TEID (see clause 5.34.2.2), or e.g during the Activation of a Multicast MBS session procedure (see clause 5.34.2.4). The MBSU flag can be included in the Create FAR IE in the PFCP Session Establishment Request during an MBS restoration procedure (see e.g. clauses 8.2.2 and 8.2.3 in 3GPP TS 23.527 [40]).",
      "chunk_type": "definition",
      "cross_references": [
        "ts_23.247_clause_6.2.3",
        "clause_5.34.2.2",
        "ts_23.527_clause_8.2.2",
        "clause_5.34.2.4",
        "ts_23.247",
        "ts_23.527"
      ]
    },
    {
      "chunk_id": "ts_29.244_5.34.2.2",
      "section_id": "5.34.2.2",
      "section_title": "Instructing the MB-UPF to forward MBS data using multicast and/or unicast transport",
      "content": "When the MB-SMF receives an MBS Session Create Request from a NEF/MBSF to configure an MBS session, the MB-SMF shall select an MB-UPF and request that MB-UPF to allocate relevant user plane resource for the MBS session, or for the MBS session and MBS Service Area for a location dependent MBS service; to do so, the MB-SMF shall send a PFCP Session Establishment Request message to the MB-UPF to setup a PFCP session for the MBS Session, or for the MBS session and MBS Service Area for a location dependent MBS service, including the following information in the PFCP Session Establishment Request message:\n-\tthe MBS Session Identifier identifying the MBS session (i.e. TMGI or SSM address);\n-\tthe Area Session ID, for a location dependent MBS service;\n-\tthe JMBSSM (Join MBS Session SSM) indication, if MBS data delivery using multicast transport is used over the N6mb interface  to request the MB-UPF to join the multicast tree (see clause 5.34.2.1A).towards the Source Specific Multicast (SSM) address information provided by AF/AS or MBSTF for the MBS Session\n-\tthe PLLSSM (Provide Low Layer Source Specific Multicast address) indication, if MBS data delivery using multicast transport is used over the N3mb and/or N19mb interface to request the MB-UPF to provide a LLSSM address  and C-TEID (see clause 5.34.2.1A). During the restoration procedure for an MB-UPF restart however the MB-SMF shall not set the PLLSSM flag (see clause 8.2.2 in 3GPP TS 23.527 [40]);\n-\tfor each MBS QoS flow:\n-\ta Create PDR IE to provision a downlink PDR with PDI or a Create Tunnel Endpoint IE containing either:\n-\ta \"Local Ingress Tunnel\" IE with the CHOOSE bit set to \"1\"to request the MB-UPF to allocate an ingress tunnel for Nmb9, or for N6mb if unicast transport is used over N6mb (the MB-UPF shall assign a single ingress tunnel address, regardless of the number of MBS QoS flows); if the Create PDR IE contains SDF Filter(s), these SDF Filter(s) shall relate to the inner IP layer within the unicast tunnel.or\n-\tan IP Multicast Addressing Info IE to request the MB-UPF to retrieve the MBS session data from the IP Multicast Address, when using multicast transport over N6mb.\n-\ta Create QER IE to provision a QER (associated with the PDR including the above PDI or Traffic EndPoint ID) instructing the MB-UPF to insert the QFI of the MBS QoS flow in user plane packets and possibly requesting the MB-UPF to apply specific QoS treatments; the IQFISN (Insert DL MBS QFI Sequence Number) flag in the Create QER IE shall be set to \"1\" to request the MB-UPF to insert the DL MBS QFI Sequence Number in the PDU session container in user plane packets;\n-\ta Create FAR IE to provision a FAR (associated with the PDR including the above PDI or Traffic EndPoint ID) with the Apply Action set to:\n-\t\"FSSM\", if multicast transport is used over N3mb or N19mb, with an MBS Multicast Parameters IE; and/or\n-\t\"MBSU\", if unicast transport is used over N3mb or N19mb and N3mb/N19mb DL F-TEIDs are already known, e.g. during an MBS restoration for MB-UPF failure with or without restart procedure, together with one or more Add MBS Unicast Parameters to instruct the MB-UPF to forward and replicate MBS Session data towards the one or more GTP-U DL tunnels terminating at the NG-RAN(s) and/or PSA UPF(s);\nOtherwise to:\n-\t\"DROP\", if only unicast transport is used over N3mb or N19mb and N3mb/N19mb DL F-TEIDs are not known yet.\nThe MBS Session Identifier, Area Session ID (for a location dependent MBS service) and the MBSN4mbReq-Flags are included in the group IE \"MBS Session N4mb Control Information\" at the PFCP message level.\nThe MB-UPF shall return the allocated ingress tunnel information in the Created PDR IE or Created Traffic Endpoint IE and provide the LLSSM address if requested.\nFor an MBS session using unicast transport over N3mb or N19mb, when one or more NG-RAN node(s) and/or PSA UPF(s) provides a downlink GTP-U F-TEID (i.e. IP address and tunnel endpoint identifier) to receive the MBS session data, the MB-SMF shall send a PFCP Session Modification Request to change the FAR by setting  the Apply Action to \"MBSU\", together with one or more Add MBS Unicast Parameters to instruct the MB-UPF to forward and replicate MBS Session data towards the one or more GTP-U DL tunnels terminating at the NG-RAN(s) and/or PSA UPF(s).\nNOTE:\tFAR with the Apply Action set to \"MBSU\" together with one or more Add MBS Unicast Parameters is \tsent within a PFCP Session Establishment Request message during the MBS restoration procedures specified in 3GPP TS 23.527 [40], see e.g. clauses 8.2.2 and 8.2.3.\nFor an MBS session using multicast transport over N3mb or N19mb, if the \"FSSM\" flag is set in the Apply Action, the MB-UPF shall forward the MBS session data using the Low Layer Source Specific Multicast address (i.e. destination IP multicast address and related source IP address) and C-TEID it allocated to the MBS session.\nBoth the \"FSSM\" and \"MBSU\" flags shall be set in the Apply Action IE if the MB-UPF is requested to forward MBS data using both multicast and unicast transport over N3mb and/or N19mb interfaces.",
      "chunk_type": "requirement",
      "cross_references": [
        "clause_5.34.2.1",
        "ts_23.527_clause_8.2.2",
        "ts_23.527"
      ]
    },
    {
      "chunk_id": "ts_29.244_5.34.2.3",
      "section_id": "5.34.2.3",
      "section_title": "Detecting and reporting user plane (in)activity of an MBS session",
      "content": "As specified in clauses 7.2.5.2 and 7.2.5.3 of 3GPP TS 23.247 [72], the MB-SMF may instruct the MB-UPF to detect and report when user plane inactivity or activity is detected for an MBS session, in order to deactive or activate the MBS session (see also clause 5.34.2.4).\nUser plane inactivity detection and reporting for an MBS session shall be supported as specified in clause 5.11.\nUser plane activity detection and reporting for an MBS session shall be supported as specified in clauses 5.2.3.1, i.e. by setting the NOCP flag in the Apply Action IE of the FAR and by the MB-UPF sending a PFCP Session Report Request including a Downlink Data Report IE identifying the PDR(s) for which downlink packets have been received.",
      "chunk_type": "general",
      "cross_references": [
        "clause_5.34.2.4",
        "clause_5.11",
        "ts_23.247"
      ]
    },
    {
      "chunk_id": "ts_29.244_5.34.2.4",
      "section_id": "5.34.2.4",
      "section_title": "Activation and Deactivation of a Multicast MBS session",
      "content": "Activation and Deactivation of a Multicast MBS session is specified in clauses 7.2.5.2 and 7.2.5.3 of 3GPP TS 23.247 [72].At deactivation of a Multicast MBS Session, e.g. triggered by receiving an user plane inactivity report from the MB-UPF, or by receiving an MBS session deactivation request from the AF, the MB-SMF shall send a PFCP Session Modification Request message to request the MB-UPF:\n-\tto stop forwarding the MBS session data and:\n-\tto report the receipt of subsequent DL MBS session data, by setting the Apply Action IE from \"FSSM and/or MBSU\" to \"BUFF and NOCP\" in the FAR of the PFCP session corresponding to the MBS session, if the activation of the MBS session is to be triggered upon receiving DL data report from the MB-UPF; or\n-\tto change the Apply Action IE from \"FSSM and/or MBSU\" to \"DROP\" or \"BUFF\" in the FAR of the PFCP session corresponding to the MBS session, if the deactivation is requested by the AF;\n-\toptionally, to delete all unicast DL N3mb F-TEIDs and all unicast DL N19mb F-TEIDs, i.e. to delete all the information earlier received in all the Add MBS Unicast Parameters IEs, by setting the \"DETEID\" flag to \"1\" in the PFCPSMReq-Flags, if the MB-SMF stores N3mb F-TEIDs and N19mb F-TEIDs and does not want to keep these F-TEIDs in the MB-UPF when the MBS session is deactivated. Otherwise, MB-UPF will keep all unicast DL N3mb F-TEIDs and all unicast DL N19mb F-TEIDs when the MBS session is deactivated.\nAt the (re)activation of a Multicast MBS Session, e.g. triggered by receiving the DL data report from the MB-UPF, or by receiving an MBS session activation request from the AF, the MB-SMF shall send a PFCP Session Modification Request message:\n-\trequesting the MB-UPF to forward the MBS session data towards NG-RANs and/or UPFs, by setting the Apply Action IE from \"BUFF\" (with or without NOCP\") or \"DROP\" to \"FSSM and/or MBSU\" in the FAR of the PFCP session;\n-\tprovisioning all unicast NG-RAN DL N3mb F-TEIDs and UPF N19mb F-TEID (which are stored and were possibly updated in the MB-SMF) in the Add MBS Unicast Parameters IEs to request the MB-UPF to forward one copy of the MBS session data to these DL tunnels when the unicast transport is used, if all the DL N3mb and N19mb F-TEIDs were deleted during the MBS session deactivation procedure; and\n-\toptionally including a User Plane Inactivity Timer IE to provision or update the user plane inactivity timer to request the MB-UPF to report user plane inactivity, if the deactivation of the MBS session is to be triggered upon user plane inactivity report from the MB-UPF.",
      "chunk_type": "general",
      "cross_references": [
        "ts_23.247"
      ]
    },
    {
      "chunk_id": "ts_29.244_5.34.2.5",
      "section_id": "5.34.2.5",
      "section_title": "MBS data usage reporting for MBS charging",
      "content": "MBS charging is an optional feature for the MB-SMF and the MB-UPF.\nWhen MBS charging is supported, the MB-SMF shall support MBS session charging. The MB-UPF shall set the MBSCH feature flag in the UP Function Features IE (see clause 8.2.25) if it supports MBS charging.\nIf the MB-SMF and the MB-UPF supports MBS charging, the MB-SMF may request the MB-UPF to measure and report the volume of MBS data transmitted for the entire MBS session (or location dependent part of the MBS session, for a location dependent MBS service) , for a broadcast or a multicast MBS session, as specified in 3GPP TS 32.279 [87].\nIf so, the MB-SMF shall provision URR(s) for the related PFCP session in the MB-UPF as defined in clause 5.4.10 with the following modifications:\n-\tno charging quotas shall be used for MBS charging over N4mb, i.e. Volume (Time/Event) Quota shall not be provisioned in a URR for MBS charging; and\n-\tOnly volume-based measurement shall be used for MBS data usage reporting over N4mb (i.e. no time nor event based measurement).\nNOTE:\tThe measured volume corresponds to the volume of MBS data received from the AF or MBSTF that is transmitted downstreams towards at least one NG-RAN or UPF. MBS data is counted only once when it is transmitted towards multiple NG-RANs and/or UPFs.\nUpon being so instructed, the MB-UPF shall measure and report the requested MBS data usage as defined in clause 5.2.2.\nThe MB-SMF may request the MB-UPF, in a PFCP Session Modification Request, to report its ongoing volume measurement for one or multiple URRs of the PFCP session, by including one or more Query URR IEs or by setting the QAURR (Query All URRs) flag, as defined in clause 5.2.2.3.1, when a chargeable event requiring to close the counts and starts new counts occurs at the MB-SMF (see Table 5.2.1.2-2 of 3GPP TS 32.279 [87]), e.g. upon the occurrence of the Connection established with NG-RAN event.",
      "chunk_type": "requirement",
      "cross_references": [
        "clause_8.2.25",
        "clause_5.4.10",
        "clause_5.2.2",
        "clause_5.2.2.3.1",
        "ts_32.279_table_5.2.1.2-2",
        "ts_32.279"
      ]
    },
    {
      "chunk_id": "ts_29.244_5.34.3.1",
      "section_id": "5.34.3.1",
      "section_title": "General",
      "content": "This clause specifies the N4 requirements for the support of multicast MBS services using 5GC Individual MBS traffic delivery. The MBS data may be delivered from the MB-UPF to the UPF using multicast or unicast transport.  It is optional for both the SMF and the UPF to support the multicast MBS service. The following requirements shall apply if the SMF and UPF support the MBSN4 feature (see clause 8.2.25).\nNOTE 1:\tThere is no impact on N4 to support broadcast MBS services in the 5GS.\nNOTE 2:\tFor an MBS session (or an MBS session towards an MBS service area for location dependent MBS), there is only one MB-SMF (set) and one MB-UPF.\nFor a given multicast MBS session, or for a given multicast MBS session and MBS Service Area for a location dependent MBS service, only a single copy of MBS Session data is delivered from the MB-UPF to the UPF. The UPF shall allocate only one N19mb downlink tunnel to receive the MBS session data for the MBS session, or for the MBS session and MBS Service Area for a location dependent MBS service, if unicast transport applies over N19mb or the UPF shall join the multicast group to receive MBS session data if multicast transport applies over N19mb.",
      "chunk_type": "definition",
      "cross_references": [
        "clause_8.2.25"
      ]
    },
    {
      "chunk_id": "ts_29.244_5.34.3.2",
      "section_id": "5.34.3.2",
      "section_title": "Instructing the UPF to forward (or stop forwarding) multicast MBS data to associated PDU sessions",
      "content": "When a PDU session needs to be associated with an MBS session (e.g. when a UE requests to join a multicast MBS session, 5GC Individual MBS traffic delivery is used and the request is accepted by the SMF), the SMF shall associate the PDU session with the multicast MBS session by sending a PFCP Session Establishment or Modification Request message to the UPF, for the PFCP session corresponding to the PDU session, with the following information:\n-\tthe MBS Session N4 Control Information IE including the MBS Session Identifier, the Area Session ID, for a location dependent MBS service and, if IP multicast transport applies over N19mb (i.e. a multicast transport address has been received from the MB-SMF):\n-\tthe Multicast Transport Information IE for the given MBS session containing the Low Layer Source Specific Multicast address, i.e. the Multicast address and the source IP address and the GTP-U Common TEID which have been allocated by the MB-UPF for the MBS session, when the SMF considers it is the first PDU session to be associated with the MBS session (or with the MBS session and Area Session ID for a location dependent MBS service) in this UPF; the SMF may provide this information even if there are already other PDU sessions associated with the MBS session (or with the MBS session and Area Session ID for a location dependent MBS service) in this UPF;\n-\tone or more new DL PDR(s) including:\n-\tthe MBS Session Identifier, the Area Session ID (for a location dependent MBS service), or a Traffic Endpoint IE which is including the MBS Session Identifier, and the Area Session ID (for a location dependent MBS service); this information shall be used by the UPF to:\n-\tdetermine whether the UPF already receives the MBS session data, or if instead it needs to allocate a new N19mb DL tunnel (when using IP unicast transport over N19mb) or send an IGMP JOIN request to join the multicast tree (when using IP multicast transport over N19mb) to receive the MBS session data; the UPF shall allocate the same N19mb DL Tunnel ID when the SMF requests the UPF to allocate a DL F-TEID for N19mb and multiple UE/PDU sessions are already associated with the MBS session (or with the MBS session and Area Session ID for a location dependent MBS service) in the UPF (e.g. PDU sessions controlled by other SMFs, or when multiple PDU sessions served by the same SMF need to be associated concurrently with the MBS session).\n-\tidentify the list of PDU sessions (served by the UPF) towards which any DL packet received for this MBS session shall be distributed;\n-\tif unicast transport is used over N19mb:\n-\ta local F-TEID to be allocated at the UPF, with the CHOOSE flag set to \"1\" in the \"Local F-TEID\" IE in the PDI IE or Create Traffic Endpoint IE, if the SMF has no \"N19mb DL F-TEID\" information available for the MBS Session, e.g. for the first PDU Session in the SMF to be associated with the MBS session (or with the MBS session and Area Session ID for a location dependent MBS service); otherwise\n-\tthe Local F-TEID set to the \"N19mb DL F-TEID\" for the MBS Session (or for the MBS session and Area Session ID for a location dependent MBS service) which is known by the SMF.\n-\tmultiple DL PDRs may be provisioned and associated with different QERs to apply different QoS treaments for different multicast QoS flows within the MBS session. For each multicast QoS flow, the SMF may instruct the UPF to modify the QFI of downlink packets of the multicast QoS flow (received from the MB-UPF) to the QFI assigned by the SMF for the Associated (unicast) QoS flow, by associating a DL PDR including the QFI of the multicast QoS flow with a QER including the QFI IE set to the QFI of the Associated QoS flow.\n-\tthe new DL PDR(s) may be associated with an (existing) Forwarding Action Rule to forward the received MBS session data to the UE via existing downlink N3/N9 tunnel, or with a new Forwarding Action Rule with the Apply Action set to \"Drop\" if the SMF wishes to maintain the MBS data reception over N19mb but suspends the delivery of the data to the UE's PDU session, e.g. when the UE is switching between 5GC Individual MBS traffic delivery and 5GC Shared MBS traffic delivery due to the UE moving back and forth between MBS non-supporting NG-RAN and MBS supporting NG-RAN.\nThe UPF shall respond with a PFCP Session Establishment or Modification Response message to the SMF, and the UPF shall include an MBS Session N4 Information IE if any of the following information needs to be reported:\n-\tthe allocated \"N19mb DL Tunnel ID\" if it was requested;\n-\tan NN19DT (New N19mb Downlink Tunnel) indication in the MBSN4Resp-Flags IE indicating if the N19mb DL F-TEID has been newly allocated by the UPF or if a N19mb DL F-TEID had already been allocated by the UPF for the MBS session (or for the MBS session and Area Session ID for a location dependent MBS service), when the \"N19mb DL Tunnel ID\" is present; this information allows the SMF to determine if it needs to report this N19mb DL Tunnel ID to the MB-SMF;\n-\tan indication \"JMTI\"(Joined N19mb Multicast Tree Indication) in the MBSN4Resp-Flags IE indicating if the UPF has joined the multicast tree from MB-UPF, if the Multicast Transport Information was included in the request message.\nNOTE:\tThe indications \"JMTI\" and \"NN19DT\" are defined to help the SMF to determine if it needs to communicate with the MB-SMF, e.g., to report the newly allocated N19mb DL TEID in order to let the MB-SMF inform the MB-UPF to send a copy of MBS Session data to the UPF. The indication \"JMTI\" indicates to the SMF that no N19mb DL TEID needs to be allocated.\nIf unicast transport is used over N19mb and if the NN19DT (New N19mb Downlink Tunnel) indication is not set in the MBSN4Resp-Flags IE within the PFCP Session Establishment or Modification Response (i.e. if the MBSN4Resp-Flags IE is present and the NN19DT indication is not set, or if the MBSN4Resp-Flags IE is absent), the SMF shall assume that the UPF had already allocated the N19mb DL TEID earlier than the PFCP Session Establishment or Modification Request.\nWhen a PDU Session should be no longer be associated with the MBS session, or with the MBS session and Area Session ID for a location dependent MBS service, (e.g. the PDU session leaves the MBS session, or when switching to 5GC Shared MBS traffic delivery), or when the MBS session to which the PDU session is associated is being deactivated, the SMF shall send a PFCP Session Modification Request message to remove the DL PDR(s) that were created to receive the MBS session data, unless the SMF decides to keep the UPF receiving MBS Session data from N19mb, in which case the PDR shall be associated with a FAR set to drop packets. In the former case, when all the DL PDR(s) that were created to receive the MBS session data have been removed, the UPF shall consider that the PFCP session (PDU session) is no longer associated with the MBS session (i.e. the UPF shall delete, from its PFCP session context, the MBS Session N4 Control Information corresponding to the MBS session).\nIn the PFCP Session Modification Response message, the UPF shall include the indication \"N19DTR\" (N19mb Downlink Tunnel Removal) in the MBSN4Resp-Flags IE indicating the N19mb DL Tunnel is to be removed if the UPF was requested to remove the DL PDRs of the MBS session for the PFCP session and this was the last PFCP session associated with the N19mb DL Tunnel in the UPF. This tells the SMF that it shall request the MB-SMF to inform the MB-UPF to stop sending MBS Session data towards this N19mb DL Tunnel.\nThe UPF shall also set the indication \"N19DTR\" (N19mb Downlink Tunnel Removal) in the MBSN4Resp-Flags IE indicating the N19mb DL Tunnel is to be removed in the PFCP Session Deletion Response message when the SMF deleted the last PFCP session who was associated with the N19mb DL Tunnel in the UPF.\nWhen the MBS session to which the PDU session is associated is being re-activated, the SMF shall send a PFCP Session Modification Request message to the UPF:\n-\tincluding the MBS Session N4 Control Information IE and re-creating the DL PDR(s) of the MBS QoS flows, following the same requirements as described above for associating the PDU session with the MBS session, if the SMF removed the DL PDR(s) that were created to receive the MBS session data when the MBS session was deactivated; or\n-\tassociating the DL PDR(s) of the MBS QoS flows with the FAR provisioned with the N3 DL F-TEID to forward packets, if the SMF decided to keep the UPF receiving MBS Session data from N19mb by associating these DL PDR(s) with a FAR set to drop packets when the MBS session was deactivated.\nDuring a restoration procedure for an MB-UPF failure without Restart (see clause 8.2.3 of 3GPP TS 23.527 []), if multicast transport is used over N19mb:\n-\tthe SMF shall instruct the UPF to use the new Low Layer Source Specific Multicast address, i.e. the Multicast address and the source IP address and the GTP-U Common TEID which have been allocated by the new MB-UPF for the MBS session, by sending a PFCP Session Modification Request message with the MBS Session N4 Control Information IE including the MBS Session Identifier, the Area Session ID (for a location dependent MBS service) and the Multicast Transport Information IE containing the new LL SSM address and GTP-U Common TEID;\n-\tupon receipt of such a request, the UPF shall send an IGMP JOIN request to join the multicast tree to receive the MBS session data from the new MB-UPF and it shall leave delivery from the previous multicast address that was in use for the MBS session. The UPF shall set the indication \"JMTI\"(Joined N19mb Multicast Tree Indication) in the MBSN4Resp-Flags IE in the PFCP Session Modification Response to indicate that the UPF has joined the multicast tree from MB-UPF.\nWhen receiving the MBS session data for a given MBS session, or for a given MBS session and Area Session ID for a location dependent MBS service, either from the N19mb DL Tunnel allocated for this MBS Session (where the packets shall be identified by N19mb DL TEID) when unicast transport is used, or from the low layer Multicast transport address (where the packets shall be identified by the low layer Multicast transport address) when multicast transport is used, the UPF shall replicate the MBS Session data to all PFCP sessions which are associated with the MBS Session, or with the MBS session and Area Session ID for a location dependent MBS service.\nThe UPF shall forward the MBS DL QFI Sequence Number in the PDU Session Container (see 3GPP TS 38.415 [34]) of MBS data packets received from the MB-UPF unmodified.",
      "chunk_type": "general",
      "cross_references": [
        "ts_23.527_clause_8.2.3",
        "ts_23.527",
        "ts_38.415"
      ]
    },
    {
      "chunk_id": "ts_29.244_5.34.3.3",
      "section_id": "5.34.3.3",
      "section_title": "Instructing a combined UPF/MBS-UPF to forward multicast MBS data to associated PDU sessions",
      "content": "The procedures and requirements to instruct a combined UPF/MB-UPF to associate a PDU session with an MBS session (or with the MBS session and Area Session ID for a location dependent MBS service) for which it serves as the MB-UPF shall be as specified in clauses 5.34.2.2 and 5.34.3.2, with the following additions:\n-\tthe combined UPF/MB-UPF may determine that the PDU session is being associated with an MBS session (or with an MBS session and Area Session ID for a location dependent MBS service) for which it serves as MB-UPF by determining whether a specific PFCP session has been established for the MBS session (or with the MBS session and Area Session ID for a location dependent MBS service), as specified in clause 5.34.2.2;\n-\tthe SMF shall instruct the combined UPF/MB-UPF to associate the PDU session with the MBS session (or with the MBS session and Area Session ID for a location dependent MBS service) as specified in clause 5.34.3.2, as if the UPF and MB-UPF were not combined; this means in particular that the DL PDR of the PFCP session of the PDU session to be associated with the MBS session (or with the MBS session and Area Session ID for a location dependent MBS service) shall not contain an N6mb / Nmb9 address or IP multicast addressing information;\nNOTE 1:\tOnly the PFCP session created for the MBS session (or for the MBS session and Area Session ID for a location dependent MBS service) as specified in clause 5.34.2.2 can contain a N6mb / Nmb9 address or IP multicast addressing information.\n-\tit is an implementation choice for such combined UPF/MB-UPF to allocate a (possibly virtual / internal) N19mb DL Tunnel ID (i.e. IP address and TEID) or to indicate to the SMF that it has joined the low layer multicast group assigned by the MB-UPF for the MBS session (or for the MBS session and Area Session ID for a location dependent MBS service), and the combined UPF/MB-UPF shall respond to the SMF accordingly, as if it is the UPF and MB-UPF were not combined;\n-\tif the combined UPF/MB-UPF returns a N19mb DL Tunnel ID with the NN19DT (New N19mb Downlink Tunnel) indication set to 1, the SMF shall request the MB-SMF to (or the combined SMF/MB-SMF shall) instruct the MB-UPF to forward and replicate MBS Session data towards the (possibly virtual / internal) N19mb DL Tunnel ID as specified in clause 5.34.2.2, as if the UPF and MB-UPF were not combined.\nNOTE 2:\tThe SMF, MB-SMF or a combined SMF/MB-SMF need not implement any additional logic when communicating with a combined UPF/MB-UPF.",
      "chunk_type": "general",
      "cross_references": [
        "clause_5.34.2.2",
        "clause_5.34.3.2"
      ]
    },
    {
      "chunk_id": "ts_29.244_5.34.3.4",
      "section_id": "5.34.3.4",
      "section_title": "MBS data usage reporting for MBS charging",
      "content": "MBS charging is an optional feature for the SMF. It does not require any specific capability from the UPF (other than supporting 5GS charging requirements for a PDU session).\nIf the SMF supports MBS charging, the SMF may request the UPF to measure and report the volume of multicast MBS data transmitted to the UE via the UE's PDU session using 5GC individual MBS traffic delivery, as specified in clause 5.1.3 of 3GPP TS 32.255 [45].\nIf so, the SMF shall provision URR(s) for the related PFCP session in the UPF, associated with the DL PDR(s) established for receiving the MBS data from the UPF, as defined in clause 5.4.10 with the following modifications:\n-\tno charging quotas shall be used for MBS charging over N4, i.e. Volume (Time/Event) Quota shall not be provisioned in a URR for MBS charging; and\n-\tOnly volume-based measurement shall be used for MBS data usage reporting over N4 (i.e. no time nor event based measurement).\nUpon being so instructed, the UPF shall measure and report the requested MBS data usage as defined in clause 5.2.2.",
      "chunk_type": "general",
      "cross_references": [
        "ts_32.255_clause_5.1.3",
        "clause_5.4.10",
        "clause_5.2.2",
        "ts_32.255"
      ]
    },
    {
      "chunk_id": "ts_29.244_5.35.1",
      "section_id": "5.35.1",
      "section_title": "General",
      "content": "A UP Function may serve PDU sessions belonging to different network slices (i.e. S-NSSAIs).\nUP resources allocation per network slice may be achieved by:\na)\tthe UP function allocating UP resources based on the Network Instance IE (and other N4 information such as PDU session type, IP Address Pool ID, ATSSS Control Information), with distinct Network Instance values being configured in the CP function and UP Function for different network slices; or\nNOTE 1:\tThe above behavior does not require support of any specific PFCP protocol extension and can be supported by UP function implementations complying with earlier releases of the specification.\nb)\tthe UP function allocating UP resources based on the Network Instance IE and S-NSSAI IE (and other N4 information such as PDU session type, IP Address Pool ID, ATSSS Control Information), if the feature \"Per Slice UP Resource Management\" is supported by the UP function and if the UP function is configured to do so by operator policy.\nA UP function that supports allocating UP resources based on the Network Instance IE and S-NSSAI IE (and other N4 information) and that is configured to do so by operator policy, shall:\n-\tindicate support of the feature \"Per Slice UP Resource Management\" in the UP Function Features IE during the PFCP association setup procedure; and\n-\tallocate resources in the UP function using the Network Instance and, if available, the S-NSSAI.\nA UP function that does not support allocating UP resources based on the Network Instance IE and S-NSSAI IE or that is not configured to do so by operator policy shall allocate UP resources based on the Network Instance IE (and other N4 information).\nIf the UP function supports the UE IP Address Usage Reporting feature (see clause 5.21.3.2), the UP function shall report the UP IP address usage as specified in clause 5.21.3.2, by reporting the UE IP address usage:\na)\tper Network Instance, if the UP function does not support allocating UP resources based on the Network Instance IE and S-NSSAI IE or it is is not configured to do so by operator policy; or\nNOTE 2:\tThis allows to report UE IP address usage per network slice when using a distinct Network Instance value per network slice.\nb)\tper Network Instance and S-NSSAI, if the UP function supports allocating UP resources based on the Network Instance IE and S-NSSAI IE and is configured to do so by operator policy. In this case, the UP Function shall report the UE IP address usage information associated with a specific S-NSSAI, as specified in clause 5.21.3.\nNOTE 3:\tIf the UP function indicates that it supports the \"Per Slice UP Resource Management\" feature and if this feature is also supported by the CP function, the CP function can instruct the UP function to allocate UP resource taking into account the network slice by including the Network Instance IE and S-NSSAI IE in the PFCP session establishment procedure. Otherwise, a separate Network Instance needs to be configured for each S-NSSAI if support of multiple slices is needed.",
      "chunk_type": "definition",
      "cross_references": [
        "clause_5.21.3.2",
        "clause_5.21.3"
      ]
    },
    {
      "chunk_id": "ts_29.244_5.36.1",
      "section_id": "5.36.1",
      "section_title": "General",
      "content": "Stage 2 requirements for Paging Policy Differentiation are specified in clause 5.4.3.2 of 3GPP TS 23.501 [28].\nFor a UE in RRC Inactive state the NG-RAN can be required to enforce specific paging policies in the case of NG-RAN paging, based on 5QI, ARP and PPI associated with an incoming DL PDU. To support this, the SMF shall instruct the UPF to detect the DSCP in the TOS (IPv4) / TC (IPv6) value in the IP header of the DL PDU and insert the corresponding PPI as described below. When Paging Policy Differentiation is enabled in the network and a PPI needs to be inserted into DL PDU, the SMF shall:\n-\tprovision a PDR for each PPI containing one or more DSCP code(s) to be matched against the DSCP in the TOS (IPv4) / TC (IPv6) value in the IP header of the DL PDUs, where these DSCP code(s) are to be mapped to the same PPI, in the PDI together with or without the service data flow detection information;\nNOTE 1:\tWhen service data flow level packet detection is not required, e.g. for an I/V-UPF, the PDR can be provisioned with one or more DSCP(s) to be matched in the PDI without any service data flow detection information.\nNOTE 2:\tWhen service data flow level packet detection is required, several PDRs with the same service data flow detection information but with different (set of) DSCP(s) (which are mapped to different PPI) need to be provisioned.\n-\tassociate the PDR with a QER with the Paging Policy Indicator set to the mapped PPI to instruct UPF to insert the corresponding PPI into the GTP-U PDU Session Container extension header of outgoing packets.",
      "chunk_type": "definition",
      "cross_references": [
        "ts_23.501_clause_5.4.3.2",
        "ts_23.501"
      ]
    },
    {
      "chunk_id": "ts_29.244_5.36.2",
      "section_id": "5.36.2",
      "section_title": "Enhanced Paging Policy Indicator Provisioning",
      "content": "To reduce the number of PDRs/QERs to be provisioned (in order to support NG-RAN paging using Paging Policy Indicator (PPI)), the SMF and the UPF may support the Enhanced Provisioning Paging Policy Indicator (EPPPI) feature as specified below.\nDuring a PFCP session establishment/modification procedure, if both the SMF and the UPF support the EPPPI feature, the SMF may include a DSCP to PPI Control Information in the PFCP Session Establishment/Modification Request message to instruct the UPF to insert a PPI in the GTP-U PDU Session Container extension header of downlink GTP-U packets encapsulating payload packets (to be sent to the UE). When the DSCP to PPI Control Information IE is present, the SMF may:\n-\tinclude one or more DSCP to PPI Mapping Information to instruct the UPF to insert the corresponding PPI for downlink GTP-U packets, where the DSCP of its payload packet is matching one of DSCP codes in the DSCP to PPI Mapping Information;\n-\tinclude one or more QFIs to instruct UPF to insert PPI only for the downlink packets received on the requested QFI(s);",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.244_5.37.1",
      "section_id": "5.37.1",
      "section_title": "General",
      "content": "The UP function may be requested by the SMF to perform Traffic Parameters Measurement per QoS flow, e.g. to enable NG-RAN to configure UE power saving management scheme for connected mode DRX as specified in clauses 5.37.8 and 5.8.5 of 3GPP TS 23.501 [28]. The following clauses specify Traffic Parameters Measurement procedure.",
      "chunk_type": "definition",
      "cross_references": [
        "ts_23.501"
      ]
    },
    {
      "chunk_id": "ts_29.244_5.37.2",
      "section_id": "5.37.2",
      "section_title": "Traffic Parameter Measurement Control",
      "content": "When requesting the UPF to perform Traffic Parameter Measurement, the SMF shall provision one or more Traffic Parameter Measurement Control Information IEs in a Session Reporting Rule to instruct the UPF to measure relevant traffic parameters for one or more QoS Flows.\nThe Traffic Parameter Measurement Control Information IEs shall include:\n-\tone or more QFI IEs indicating the QoS flow(s) for which traffic parameters are requested to be measured;\n-\teither a Measurement Period for periodic reporting or a Traffic Parameter Threshold to trigger the report;\n-\tthe Traffic Parameter Measurement Indication to indicate the traffic parameters requested to be measured.\nThe SMF may require the UPF to stop the on-going Traffic Parameter Measurement for a QoS flow by sending a PFCP Modification Request with the Remove SRR IE, or by sending a PFCP Modification Request with the Update SRR IE within which the previous Traffic Parameter Measurement Control Information IE is removed or updated by removing the corresponding QFI(s) (when there are still QFI(s) left). Upon receiving such a PFCP Modification Request message, the UPF shall stop the corresponding Traffic Parameter Measurement for the QoS flow.",
      "chunk_type": "parameter",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.244_5.37.3",
      "section_id": "5.37.3",
      "section_title": "Traffic Parameter Measurement Report",
      "content": "If the UPF is requested to perform Traffic Parameter Measurement for a QoS flow (i.e. it receives one or more Traffic Parameter Measurement Control Information IEs from the SMF), the UPF shall measure the relevant traffic parameters according to Traffic Parameter Measurement Indication and generate a Traffic Parameter Measurement Report towards the SMF as instructed, i.e., either periodically or when the measured traffic parameter is exceeding the provisioned threshold.",
      "chunk_type": "parameter",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.244_5.38.0",
      "section_id": "5.38.0",
      "section_title": "General",
      "content": "Stage 2 requirements related to the support for high data rate low latency services, eXtended Reality (XR) and interactive media services are specified in clause 5.37 of 3GPP TS 23.501 [28], which includes the following features requiring protocol enhancement to signalling interactions between the SMF and UPF over N4:\n-\tSupport of ECN marking for L4S as specified in clause 5.37.3 of 3GPP TS 23.501 [28];\n-\tSupport of Network Exposure of 5GS information, including control of reporting the congestion information, Data rate and Round trip delay measurement for QoS flow(s) as specified in clause 5.37.4 of 3GPP TS 23.501 [28];\n-\tSupport of PDU Set based QoS Handling as specified in clause 5.37.5 of 3GPP TS 23.501 [28];\n-\tSupport of N6 Jitter Measurement and End of Data Burst Indication for UE power saving in clause 5.37.8 of 3GPP TS 23.501 [28].\nIt is optional for both the SMF and the UPF to support above features, hence the SMF may trigger the procedures specified in this clause only when the UPF has indicated its support of the corresponding feature via the UP Function Features IE. (see clause 8.2.25)",
      "chunk_type": "definition",
      "cross_references": [
        "ts_23.501_clause_5.37",
        "ts_23.501_clause_5.37.3",
        "ts_23.501_clause_5.37.4",
        "ts_23.501_clause_5.37.5",
        "ts_23.501_clause_5.37.8",
        "clause_8.2.25",
        "ts_23.501"
      ]
    },
    {
      "chunk_id": "ts_29.244_5.38.1",
      "section_id": "5.38.1",
      "section_title": "Support of ECN marking for L4S",
      "content": "Stage 2 requirements for the support of ECN marking for L4S are specified in clause 5.37.3 of 3GPP TS 23.501 [28]. This exposes congestion information by marking ECN bits in the IP header of the user IP packets between the UE and the application server to trigger application layer rate adaptation.\nSupport of this feature is optional for the SMF and UPF. A UPF that supports ECN marking for L4S on behalf of and due to congestion in NG-RAN shall indicate so to the SMF by setting the EML4S flag in the UP Function Features IE (see clause 8.2.25).\nECN marking for L4S may be enabled on a per QoS flow basis in the uplink and/or downlink direction and may be used for GBR and non-GBR QoS Flows.\nNOTE 1:\tA QoS flow eligible for ECN marking can be determined statically when a PDU session is established based on configuration in SMF or PCF, or dynamically based on the detection of the L4S traffic (e.g. matching packets with ECT(1) or CE (see IETF RFC 9331 [81]) together with IP 5 tuple in the IP header) whereby SMF or PCF triggers a setup of a QoS Flow enabled for L4S, or by requests by an AF.\nNOTE 2:\tECN marking for L4S in the IP header due to congestion in NG-RAN can be supported by NG-RAN itself or can be delegated to the PSA UPF. If supported by both, it is enabled by the SMF either in the NG-RAN or in the PSA UPF, based on operator's policies. This clause describes requirements for ECN marking done in the PSA UPF.\nNOTE 3:\tIn general, any network layer node that experiences congestion and is capable of performing ECN marking for L4S in the IP header can do so to contribute to the end to end L4S support. This clause describes only the marking due to congestion in NG-RAN with ECN marking delegated to the PSA UPF. It does not prevent though any other network layer node to perform ECN marking of the user IP packets due to other congestion point in the end-to-end path.\nIf the UPF indicated support of ECN marking for L4S (i.e. the EML4S feature), the SMF may instruct the UPF to perform ECN marking for L4S for one QoS flow, in a PFCP Session Establishment Request or a PFCP Session Modification Request, by setting the ECN marking for L4S indicator in a QER associated with the UL and/or DL PDRs of this QoS flow.\nNOTE 4:\tThe PDR can use SDF filter(s) (e.g. matching packets with ECT(1) or CE (see IETF RFC 9331 [81]) together with IP 5 tuple) to steer traffic to an L4S enabled QoS Flow.\nNOTE 5:\tThe SMF also indicates to NG-RAN to report information for ECN marking (i.e. a percentage of packets to be used by the UPF for ECN marking for L4S) of the QoS Flow on UL and/or DL directions via GTP-U header extension to PSA UPF. If there is no UL packet when report for DL and/or UL needs to be provided, NG-RAN may generate an UL Dummy GTP-U Packet for such a reporting.\nUpon being instructed to perform ECN marking for L4S for a QoS flow, the UPF shall:\n-\tmonitor the UL and/or DL congestion information received from the NG-RAN in the GTP-U PDU Session Container header extension (see 3GPP TS 38.415 [34] and 3GPP TS 38.300 [42]) of GTP-U packets; and\n-\tperform ECN bits marking for L4S for the percentage of IP packets of the QoS flow in the UL and/or DL direction according to the DL/UL Congestion information.\nDuring PDU session establishment procedure, if the SMF receives the ECN Marking or Congestion Monitoring Reporting Status (in the PDU Session Resource Setup Response Transfer IE) from the NG-RAN which indicates that reporting information for ECN marking at UPF for the QoS flow is not active, then the SMF shall instruct the UPF to stop ECN marking for L4S, by setting the ECN marking for L4S indicator to \"0\" in the QER associated with the PDRs of the QoS flows for which ECN marking was enabled, in a PFCP Session Modification Request if the SMF has instructed the UPF to perform ECN marking for L4S for a QoS flow previously.\nDuring a NG-RAN Xn handover and N2 handover, if the reporting information for ECN marking at UPF has been enabled on source NG-RAN while the target NG-RAN does not support reporting information for ECN marking at UPF, then the SMF shall instruct the UPF to stop ECN marking for L4S, by setting the ECN marking for L4S indicator to \"0\" in the QER associated with the PDRs of the QoS flows for which ECN marking was enabled, in a PFCP Session Modification Request.\nUpon being instructed to stop performing ECN marking for a QoS flow, the UPF shall stop doing so.",
      "chunk_type": "general",
      "cross_references": [
        "ts_23.501_clause_5.37.3",
        "clause_8.2.25",
        "ts_23.501",
        "ts_38.415",
        "ts_38.300"
      ]
    },
    {
      "chunk_id": "ts_29.244_5.38.2",
      "section_id": "5.38.2",
      "section_title": "Support of Network Exposure of 5GS information",
      "content": "Stage 2 requirements for the support of Network Exposure of 5GS information is specified in clause 5.37.4 of 3GPP TS 23.501 [28]. The SMF may instruct the UPF to perform UL and/or DL congestion information monitoring (see clause 5.39.3.3), UL and/or DL Data rate information monitoring (see clause 5.39.3.4) and/or round trip delay monitoring (see clause 5.39.3.2).\nSpecific requirements for the Monitoring reporting on UPF are specified in clause 5.39.4.",
      "chunk_type": "general",
      "cross_references": [
        "ts_23.501_clause_5.37.4",
        "clause_5.39.3.3",
        "clause_5.39.3.4",
        "clause_5.39.3.2",
        "clause_5.39.4",
        "ts_23.501"
      ]
    },
    {
      "chunk_id": "ts_29.244_5.38.3",
      "section_id": "5.38.3",
      "section_title": "Support of PDU Set based QoS Handling",
      "content": "Stage 2 requirements for the support of PDU Set based QoS handling are specified in clause 5.37.5 of 3GPP TS 23.501 [28]. A PDU Set comprises one or more PDUs carrying the payload of one unit of information generated at the application level (e.g. frame(s) or video slice(s) etc. for eXtended Reality (XR) Services). All the PDUs of a PDU set are transmitted within the same QoS Flow.\nThis clause specifies how the SMF instructs the UPF to identify PDUs that belong to PDU sets and to perform PDU Set marking for a QoS Flow enabled with PDU Set based QoS handling, and how the SMF instructs the UPF to stop PDU sets identification and marking.\nThe support of this feature is optional for the SMF and UPF. A UPF that supports PDU Set based QoS handling shall indicate so to the SMF by setting the PDUSM flag in the UP Function Features IE (see clause 8.2.25).\nPDU Set marking at the UPF may be enabled on a per QoS flow basis in the downlink direction and may be used for GBR and non-GBR QoS Flows.\nIf the NG-RAN indicated support of PDU Set based handling in N2 SM Information and if the UPF indicated support of PDU Set marking (i.e. the PDUSM feature), the SMF may instruct the UPF to identify PDU sets and perform PDU sets marking for one QoS flow, in a PFCP Session Establishment Request or a PFCP Session Modification Request, by setting the PDU Set marking indicator to \"1\" in a QER associated with the DL PDRs of this QoS flow and by optionally providing the Protocol Description (for DL traffic) in these DL PDRs indicating the  transport protocol (e.g. RTP/SRTP), RTP header extensions that may be used for PDU Set identification, payload type and/or payload format (e.g. H.264, H.265) used by the service data flow.\nUpon the completion of a NG-RAN Xn handover and N2 handover from a NG-RAN supporting PDU set based QoS handling to a NG-RAN not supporting the same, the SMF may instruct the UPF to stop identifying PDU sets and performing PDU sets marking for each QoS flow of the UE's PDU session(s) for which PDU Set based QoS handling was enabled, by setting the PDU Set marking indicator to \"0\" in the QER associated with the DL PDRs of each QoS flow in a PFCP Session Modification Request.\nUpon the completion of a NG-RAN Xn handover and N2 handover from a NG-RAN not supporting PDU set based QoS handling to a NG-RAN supporting the same, the SMF may instruct the UPF to start identifying PDU sets and performing PDU sets marking for one or more QoS flow(s) of the UE's PDU session(s), by setting the PDU Set marking indicator to \"1\" in the QER associated with the DL PDRs of the corresponding QoS flow(s) and by optionally providing the Protocol Description (for DL traffic) used by the service data flow(s) in a PFCP Session Modification Request.\nNOTE 1:\tThe Protocol Description included in DL PDRs is not used for packets matching against the PDRs but to assist the PDU Set identification by the UPF.\nNOTE 2:\tThe SMF also provides the NG-RAN with PDU Set QoS parameters, as specified in clause 5.7.7 of 3GPP TS 23.501 [28].\nNOTE 3:\tIn this Release of specification, the PDU Set based QoS handling is supported in 5GS for UE registered in 3GPP access for single access PDU Session with IP PDU Session Type as specified in clause 5.37.5.1 of 3GPP TS 23.501 [28]. When the UE moves to an area where the PDU Set based QoS handling is not supported, the SMF instructs the UPF to stop identifying PDU sets and performing PDU sets marking for each QoS flow of the UE's PDU session(s) for which PDU Set based QoS handling was enabled. When the UE moves from an area where the PDU Set based QoS handling is not supported to an area where the PDU Set based QoS handling is supported, the SMF instructs the UPF to start identifying PDU sets and performing PDU sets marking for one or more QoS flow(s) of the UE's PDU session(s), if the PCC rule requires so.\nUpon being instructed to identify PDU sets and to perform PDU Set marking for a QoS flow, the UPF shall:\n-\tidentify the PDU sets using the Protocol Description (if available) or using implementation specific means; details of the RTP/SRTP headers, RTP header extensions and/or payloads that may be used to identify PDU Set Information are defined in 3GPP TS 26.522 [79]; and\n-\tfor each DL PDU received for the corresponding QoS flow, the UPF shall provide PDU Set information which is available to the NG RAN in the GTP-U PDU Set Information Container extension header (see clause 6.5 of 3GPP TS 38.415 [34]), including:\n-\tthe QoS Flow Identifier [QFI];\n-\tthe PDU Set Sequence Number [PSSN], which indicates the sequence number of the PDU Set to which the current PDU belongs;\n-\tthe PDU Sequence Number within the PDU Set [PSN], which indicates the sequence number of the current PDU within the PDU Set;\n-\tthe End PDU of the PDU Set indicator [EPDU], which indicates whether the current PDU is the last PDU of the PDU set;\n-\tthe PDU Set Importance [PSI], which identifies the relative importance of a PDU Set compared to other PDU Sets within the QoS Flow;\n-\tthe PDU Set Size [PSSize] in bytes, which indicates the total size of all PDUs of the PDU Set to which the current PDU belongs.\nUpon being instructed to stop identifying PDU sets and performing PDU Set marking for a QoS flow, the UPF shall stop doing so.",
      "chunk_type": "general",
      "cross_references": [
        "ts_23.501_clause_5.37.5",
        "clause_8.2.25",
        "ts_23.501_clause_5.7.7",
        "ts_23.501_clause_5.37.5.1",
        "ts_38.415_clause_6.5",
        "ts_23.501",
        "ts_26.522",
        "ts_38.415"
      ]
    },
    {
      "chunk_id": "ts_29.244_5.38.4.1",
      "section_id": "5.38.4.1",
      "section_title": "General",
      "content": "Stage 2 requirements related to N6 Jitter measurement and End of Data Burst marking are specified in clauses 5.37.8 and 5.8.5 of 3GPP TS 23.501 [28]. The N6 Jitter Information associated with the DL Periodicity (that is used by the PSA UPF to measure the N6 jitter), the UL Periodicity and the End of Data Burst indication (included in the PDU Set Information Container extension header in the GTP-U header of the last PDU of each data burst) are provided to NG-RAN as traffic assistance information enabling to configure UE power saving management scheme for connected mode DRX.\nSupport of N6 Jitter, DL Periodicity and UL Periodicity measurements and End of Data Burst marking is optional for the SMF and UPF to support. The procedures specified in this clause may apply if the UPF indicates its support of the N6JEDB feature (see clause 8.2.25).\nWhen the UPF supports the N6JEDB feature, the SMF may request the UPF to perform N6 Jitter measurement and conditionally DL and/or UL Periodicity measurements and to set the End of Data Burst indication in the last PDU of each data burst, during a PFCP session establishment or a PFCP session modification procedure.",
      "chunk_type": "definition",
      "cross_references": [
        "clause_8.2.25",
        "ts_23.501"
      ]
    },
    {
      "chunk_id": "ts_29.244_5.38.4.2",
      "section_id": "5.38.4.2",
      "section_title": "N6 Jitter and UL/DL Periodicity Measurement Control",
      "content": "When requesting the UPF to perform N6 Jitter and Periodicity Measurement, the SMF shall provision one or more Traffic Parameter Measurement Control Information IEs in a Session Reporting Rule as specified in clause 5.37.2 to instruct the UPF to measure and report N6 jitter information associated with a DL Periodicity for one or more QoS Flows in downlink direction and conditionally the DL and/or UL Periodicity.\nIn the Traffic Parameter Measurement Control Information IE(s) the SMF shall:\n-\tinclude the DL Periodicity if this information is available; and\n-\tset the Traffic Parameter Measurement Indication to request the UPF to measure and report N6 Jitter and conditionally the DL and/ or UL Periodicity if the SMF does not receive the DL and/or UL Periodicity from the PCF.",
      "chunk_type": "requirement",
      "cross_references": [
        "clause_5.37.2"
      ]
    },
    {
      "chunk_id": "ts_29.244_5.38.4.3",
      "section_id": "5.38.4.3",
      "section_title": "N6 Jitter and UL/DL Periodicity Measurement Report",
      "content": "If the UPF is requested to perform N6 Jitter and UL/DL Periodicity measurement for a QoS flow (i.e. it receives one or more Traffic Parameter Measurement Control Information IEs from the SMF), the UPF shall measure the UL/DL Periodicity (if required), N6 Jitter using the received DL Periodicity if available otherwise using the measured DL Periodicity, and generate a Traffic Parameter Measurement Report towards the SMF as specified in clause 5.37.3.",
      "chunk_type": "general",
      "cross_references": [
        "clause_5.37.3"
      ]
    },
    {
      "chunk_id": "ts_29.244_5.38.4.4",
      "section_id": "5.38.4.4",
      "section_title": "End of Data Burst Marking",
      "content": "The SMF may request the PSA UPF to detect the last PDU of each Data Burst in the application traffic and then mark the End of Data Burst (EDB) in the GTP-U PDU Set Information Container extension header of the GTP-U packet conveying that PDU, according to the PCC rule and/or the local operator policies.\nWhen doing so, the SMF shall set the EDBMI flag to \"1\" in the QER Indications IE in the QER which is for the QoS flow conveying the application traffic, to instruct the PSA UPF to mark the End of Data Burst (EDB) in the GTP-U PDU Set Information Container extension header of the GTP-U packets conveying the last PDU. Additionally, the SMF may include the Protocol Description (for DL traffic) (see clause 5.38.3) used by the service data flow in the PDR providing information to the PSA UPF on how to detect the last PDU of each Data Burst within the application traffic.\nUpon receiving such a request, the PSA UPF shall identify the last PDU of each Data Burst in the DL application traffic using the DL Protocol Description and the received transport protocol headers as defined in 3GPP TS 26.522 [79] or using implementation specific means, and it shall mark the End of Data Burst (EDB) in the GTP-U PDU Set Information Container extension header (see clause 6.5 of 3GPP TS 38.415 [34]) of the GTP-U packet conveying that PDU accordingly.",
      "chunk_type": "general",
      "cross_references": [
        "clause_5.38.3",
        "ts_38.415_clause_6.5",
        "ts_26.522",
        "ts_38.415"
      ]
    },
    {
      "chunk_id": "ts_29.244_5.39.1",
      "section_id": "5.39.1",
      "section_title": "General",
      "content": "Stage 2 requirements on QoS Monitoring are specified in clause 5.45 of 3GPP TS 23.501 [28].\nQoS monitoring comprises of measurements of QoS parameters for a QoS Flow.",
      "chunk_type": "definition",
      "cross_references": [
        "ts_23.501_clause_5.45",
        "ts_23.501"
      ]
    },
    {
      "chunk_id": "ts_29.244_5.39.2",
      "section_id": "5.39.2",
      "section_title": "QoS Monitoring Control",
      "content": "The SMF shall instruct the UPF to perform Per QoS flow QoS monitoring, during a PFCP session establishment or a PFCP session modification procedure, by provisioning a SRR with one or more QoS Monitoring per QoS flow Control Information IEs for one or more QoS flows and for one or more QoS parameters described in clause 5.39.3, if the UPF has indicated support of the corresponding features.\nThe SMF shall provision the following IEs in the QoS Monitoring per QoS flow Control Information IE:\n-\tone or more QFI IEs indicating the QoS flow(s) for which QoS monitoring is requested;\n-\tthe Requested QoS Monitoring IE indicating one or more QoS parameters to be measured;\n-\tthe Reporting Frequency IE indicating the type of the reporting as \"Event Triggered\" or \"Periodic\":\n-\tIf the Reporting Frequence indicates \"Event Triggered\", a Reporting threshold for each parameter in Requested QoS Monitoring IE and a Minimum Wait Time IE shall be provided as well. The UPF shall send a report when the measurement result matches or exceeds the indicated Reporting threshold. Subsequent reports should not be sent by the UPF during the Minimum Wait Time. If measurement results that matches or exceeds the indicated Reporting threshold are received during the Minimum Wait Time, the UPF shall send a report containing the most recent measurement result immmediately after the Minimum Wait Time is over. After that, the UPF shall continue to report a measurement result that matches or exceeds the indicated Reporting threshold.\nNOTE 1:\tAs an implementation option, the UPF can be configured to send subsequent report(s) during the Minimum waiting time, e.g. if the UPF determines that this report is considerably different from the previous report.\nNOTE 2:\tFor Event-Triggered QoS monitoring reporting, the consumer of the QoS monitoring reports can determine that the QoS parameter measurement has fallen below the reporting threshold when it stops receiving reports for a duration equal to the Minimum Wait Time.\n-\t\"Periodic\" indicates that the UPF shall send a report each time the measurement period is over.\n-\tthe Minimum Wait Time IE, to indicate the minimum waiting time between two consecutive reports, if the Event Triggered QoS monitoring reporting is required in the reporting frequency;\n-\tthe Measurement Period IE, indicating the period to generate periodic usage reports, periodic QoS monitoring reporting is required in the reporting frequency; and/or\n-\tthe Reporting Suggestion Information IE, i.e. Report urgency indicating whether the event report can be delayed (i.e. it is delay-tolerant) and if so, the Reporting time information defining the last valid reporting time for the UPF to report the detected event. The Reporting time information shall be present if the Report urgency indicates the event report is delay tolerant. Per Reporting suggestion information, the UPF may concatenate several QoS monitoring reports for the same PFCP session in one PFCP Session Report Request (for event reporting over N4) or in one UPF event notification towards the same notification endpoint identified by the notification URI and notification correlation id (for event reporting using the Nupf_Event_Exposure service).\nIf the UPF supports Direct Reporting of QoS monitoring events (i.e. the DRQOS feature, see clause 8.2.25), the SMF shall include the Direct Reporting Information IE in the SRR, including the Event Notification URI towards which the events shall be sent, and if available, the Notification Correlation ID to be included in these events, if the UPF shall send the reports to a different NF than the SMF (i.e. to the Local NEF or the AF). If the events need to be sent both directly to the local NEF or AF and to the SMF, the Direct Reporting Information IE shall also include the Reporting Flags IE with the DUPL flag set to \"1\"; if so, the UPF shall send the reports to the SMF as well. If the the Direct Reporting Information IE is not provided, the UPF shall send the reports to the SMF.\nNOTE 3:\tThe QoS measurements requested to be measured in a given SRR share the same Direct Reporting Information, including the same Event Notification URI.\nThe SMF may instruct to measure different QoS parameters of a same QoS flow in a same QoS Monitoring per QoS flow Control Information IE, or in separate QoS Monitoring per QoS flow Control Information IEs if different instructions need to be set in the QoS Monitoring per QoS flow Control Information IE for the different QoS parameters (e.g. different Reporting Frequency or Measurement Period).\nThe SMF may update the QoS parameters to be measured by an on-going Per QoS flow QoS monitoring by sending a PFCP Modification Request with the Update SRR IE with a modified QoS Monitoring per QoS flow Control Information IE adding or removing QoS parameters to be measured; the SMF shall provide the complete list of QoS Monitoring per QoS flow Control Information IEs, and the UPF shall replace any earlier list by the new received list of QoS Monitoring per QoS flow Control Information IEs. Upon receiving such a PFCP Modification Request message, the UPF shall measure the QoS parameters according to the newly received instructions from the SMF.\nThe SMF may require the UPF to stop an on-going Per QoS flow QoS monitoring by sending a PFCP Modification Request with the Remove SRR IE, or by sending a PFCP Modification Request with the Update SRR IE within which the previous QoS Monitoring per QoS flow Control IE is removed. Upon receiving such a PFCP Modification Request message, the UPF shall stop the on-going Per QoS flow QoS monitoring.",
      "chunk_type": "requirement",
      "cross_references": [
        "clause_5.39.3",
        "clause_8.2.25"
      ]
    },
    {
      "chunk_id": "ts_29.244_5.39.3.1",
      "section_id": "5.39.3.1",
      "section_title": "General",
      "content": "This clause describes the QoS parameters that may be measured (i.e. monitored) by the UPF and specific requirements for their measurement.",
      "chunk_type": "definition",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.244_5.39.3.2",
      "section_id": "5.39.3.2",
      "section_title": "Packet delay monitoring",
      "content": "QoS monitoring for packet delay allows for the measurement of UL packet delay, DL packet delay or round trip packet delay between UE and PSA UPF.\nThe SMF may instruct the UPF to perform packet delay monitoring, if the UPF indicated support of Per QoS flow per UE QoS monitoring for packet delay, i.e. support the QFQM feature (see clause 8.2.25).\nSpecific requirements for the QoS Monitoring for packet delay are specified in clauses 5.24.4 and 5.24.5.",
      "chunk_type": "general",
      "cross_references": [
        "clause_8.2.25"
      ]
    },
    {
      "chunk_id": "ts_29.244_5.39.3.3",
      "section_id": "5.39.3.3",
      "section_title": "Congestion information monitoring",
      "content": "Stage 2 requirements for the support of per QoS flow congestion information monitoring are specified in clauses 5.45.3 and 5.37.4 of 3GPP TS 23.501 [28]. QoS monitoring for congestion information allows to monitor and report the congestion information (i.e. a percentage of congestion level) of a QoS flow for the DL and/or UL directions received from the NG-RAN.\nThe UPF shall set the QMCON feature flag in the UP Function Features IE if it supports per QoS flow QoS monitoring for congestion information (see clause 8.2.25). If so, the SMF may request the UPF to perform congestion information monitoring during a PFCP session establishment or a PFCP session modification procedure.\nThe SMF shall instruct the UPF to perform per QoS flow QoS monitoring for congestion information as specified in clause 5.39.2, with the following additions:\n-\tthe Requested QoS Monitoring IE in the QoS Monitoring per QoS flow Control Information IE shall indicate a request to monitor the congestion information for DL and/or UL directions;\n-\tthe reporting frequency shall be set to \"Event Triggered QoS monitoring reporting\"; and\n-\tthe Measurement Period IE shall be absent.\nNOTE 1:\tPeriodical reporting of congestion information is not supported.\nA UPF that indicates support of both the DRQOS and QMCON feature flags shall support reporting the congestion information report directly to the target NF or to the SMF, as specified in clause 5.39.2.\nThe UPF shall send reports when the congestion information exceeds the Reporting threshold as specified for Event Triggered QoS monitoring reporting in clause 5.39.2.",
      "chunk_type": "general",
      "cross_references": [
        "clause_8.2.25",
        "clause_5.39.2",
        "ts_23.501"
      ]
    },
    {
      "chunk_id": "ts_29.244_5.39.3.4",
      "section_id": "5.39.3.4",
      "section_title": "Data rate monitoring",
      "content": "Stage 2 requirements for the support of per QoS flow data rate monitoring are specified in clauses 5.45.4 and 5.37.4 of 3GPP TS 23.501 [28]. Data rate monitoring allows to monitor and report the UL and/or DL data rate of a Non-GBR or GBR QoS flow at the UPF.\nThe UPF shall set the QMDRM feature flag in the UP Function Features IE if it supports per QoS flow data rate monitoring (see clause 8.2.25). If so, the SMF may request the UPF to perform data rate monitoring per QoS flow during a PFCP session establishment or a PFCP session modification procedure.\nThe SMF shall instruct the UPF to perform per QoS flow data rate monitoring as specified in clause 5.39.2, with the following additions:\n-\tthe Requested QoS Monitoring IE in the QoS Monitoring per QoS flow Control Information IE shall indicate a request to monitor the UL and/or DL data rate; and\n-\tthe reporting frequency may be set to \"Event Triggered QoS monitoring reporting\" or \"Periodic\" QoS monitoring report.\nA UPF that indicates support of both the DRQOS and QMDRM feature flags shall support reporting the UL and/or DL data rate information report directly to the target NF or to the SMF, as specified in clause 5.39.2.\nThe UPF shall measure the data rate over the last monitoring averaging window of the measurement period and report the average DL and/or UL throughput. The monitoring averaging window shall be set:\n-\tto the same value as the averaging window used for computing the GBR/MBR of the QoS flow (i.e. Averaging window provisioned in the QER or default averaging window configured at the UPF) for a GBR QoS flow; or\n-\tto the same value as the averaging window used for computing the Session-AMBR of the PDU Session (i.e. the Averaging Window provisioned in the QER (that is referenced by all the PDRs of the non-GBR QoS flows of a PDU session) or the default averaging window configured at the UPF) for a non-GBR QoS flow. The default value for Averaging Window for non-GBR QoS Flows is 2000ms.\nFor Event-Triggered data rate monitoring reporting, the UPF shall send reports when the UL or DL data rate exceeds the UL or DL Data Rate Reporting threshold,as specified for Event Triggered QoS monitoring reporting in clause 5.39.2.",
      "chunk_type": "general",
      "cross_references": [
        "clause_8.2.25",
        "clause_5.39.2",
        "ts_23.501"
      ]
    },
    {
      "chunk_id": "ts_29.244_5.39.4",
      "section_id": "5.39.4",
      "section_title": "QoS Monitoring Reporting",
      "content": "The UPF shall report the QoS monitoring result of the QoS flows by sending:\n-\tQoS Monitoring Report IEs to the SMF in PFCP Session Report Request. Several QoS Monitoring Report IEs may be present to report QoS measuremeents for multiple QoS flows; and/or\n-\tQoS monitoring events directly to the Local NEF or AF using the UPF Event Exposure service specified in 3GPP TS 29.564 [73]. See clause 5.33.5.\nAn UPF that supports Direct Reporting of QoS monitoring events to the Local NEF or AF shall send the Per QoS Flow Per UE QoS Monitoring events to the SMF if the SRR does not contain the Direct Reporting Information IE, or directy to the Local NEF or AF using the notification URI received in the Direct Reporting Information IE, or both if the Direct Reporting Information IE is provided with the DUPL flag set to \"1\", as specified in clause 5.39.2.\nThe UPF shall continue to apply all the provisioned SRR(s) and perform the related QoS monitoring measurement(s), until getting any further instruction from the CP function.",
      "chunk_type": "requirement",
      "cross_references": [
        "ts_29.564_clause_5.33.5",
        "clause_5.39.2",
        "ts_29.564"
      ]
    },
    {
      "chunk_id": "ts_29.244_5.40",
      "section_id": "5.40",
      "section_title": "Support of UPF event subscription via Service Based Interface (for 5GC)",
      "content": "Stage 2 requirements for support of UPF event subscription via Service Based Interface are specified in clause 5.8.2.17 of 3GPP TS 23.501 [28] and clause 5.2.26.2.3 of 3GPP TS 23.502 [29].\nSupport of UPF event subscription via Service Based Interface is optional for the UPF.\nA UPF that supports this feature shall set the UPSBIES (UPF Event Subscription via Service Based Interface) flag in the UP Function Feature IE (see clause 8.2.25).\nIf the selected PSA UPF indicated support of UPSBIES feature, the SMF should provide the DNN and S-NSSAI in PFCP Session Establishment Request or a PFCP Session Modification Request. Then, when NF service consumer subscribes to a UPF reporting related with a single UE, the DNN, S-NSSAI and IP address will uniquely identify the target of the reporting.\nNOTE:\tIf SMF does not provide DNN and S-NSSAI to UPF it could result in rejections for the Nupf_EventExposure_Subscribe service operations with application error as specified in 3GPP TS 29.564 [73], unless UPF is configured with a DNN and S-NSSAI for a specific IP address range.",
      "chunk_type": "general",
      "cross_references": [
        "ts_23.501_clause_5.8.2.17",
        "ts_23.501_clause_5.2.26.2.3",
        "clause_8.2.25",
        "ts_23.502_clause_5.2.26.2.3",
        "ts_23.501",
        "ts_23.502",
        "ts_29.564"
      ]
    },
    {
      "chunk_id": "ts_29.244_6.1",
      "section_id": "6.1",
      "section_title": "Introduction",
      "content": "The following clauses specify the procedures supported over the Sxa, Sxb and Sxc reference points.",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.244_6.2.1",
      "section_id": "6.2.1",
      "section_title": "General",
      "content": "The following clauses specify either node level or PFCP entity level procedures over the Sxa, Sxb, Sxc and N4 reference points. The behaviour of the CP function und UP function when sending and receiving a node related message is described.",
      "chunk_type": "definition",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.244_6.2.2.1",
      "section_id": "6.2.2.1",
      "section_title": "General",
      "content": "PFCP Heartbeat is a PFCP entity level procedure.\nTwo messages are specified for PFCP heartbeat procedure: Heartbeat Request and Heartbeat Response. The use of these messages is further specified in clause 19A of 3GPP TS 23.007 [24] for EPC, and in clause 4 of 3GPP TS 23.527 [40] for 5GC.",
      "chunk_type": "definition",
      "cross_references": [
        "ts_23.007_clause_19",
        "ts_23.007_clause_4",
        "ts_23.527_clause_4",
        "ts_23.007",
        "ts_23.527"
      ]
    },
    {
      "chunk_id": "ts_29.244_6.2.2.2",
      "section_id": "6.2.2.2",
      "section_title": "Heartbeat Request",
      "content": "An PFCP entity of a CP or UP function may send a Heartbeat Request to a PFCP entity of a peer node to find out if the peer PFCP entity is alive. If multiple PFCP entities pertain to the same CP or UP function, each PFCP entity may send Heartbeat Request messages towards each PFCP entity pertaining to the peer node with which a PFCP control association is established.\nNOTE 1:\tIf the UP function supports the MPAS feature and connected to an SMF set, each PFCP entity of the UP function can send heartbeat Requests towards each PFCP entity of every SMF with which a PFCP control association is established.\nNOTE 2:\tIf the UP function supports the SSET feature and connected to an SMF set, each PFCP entity of the UP function can send heartbeat Requests towards each PFCP entity pertaining to the same SMF or the SMFs in the SMF set with which a PFCP control association is established.\nA CP function or UP function shall be prepared to receive a Heartbeat Request at any time (even from unknown peers) and it shall reply with a Heartbeat Response.",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.244_6.2.2.3",
      "section_id": "6.2.2.3",
      "section_title": "Heartbeat Response",
      "content": "The message shall be sent as a response to a received Heartbeat Request.",
      "chunk_type": "requirement",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.244_6.2.3.1",
      "section_id": "6.2.3.1",
      "section_title": "General",
      "content": "Load Control is a node level procedure.\nLoad Control is an optional feature defined over the Sxa, Sxb, Sxc and N4 reference points.\nLoad control enables the UP function to send its load information to the CP function to adaptively balance the PFCP session load across the UP functions according to their effective load. The load information reflects the operating status of the resources of the UP function.\nLoad control allows for better balancing of the PFCP session load, so as to attempt to prevent overload in the first place (preventive action). Load control does not trigger overload mitigation actions even if the UP function reports a high load.\nLoad control and overload control may be supported and activated independently in the network, based on operator's policy.",
      "chunk_type": "definition",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.244_6.2.3.2",
      "section_id": "6.2.3.2",
      "section_title": "Principles",
      "content": "The UP function may signal its Load Control Information to reflect the operating status of its resources, at the node level, allowing the receiving CP function to use this information to augment the UP function selection procedures.\nThe Load Control Information is piggybacked in PFCP request or response messages such that the exchange of Load Control Information does not trigger extra signalling.\nNOTE:\tThe inclusion of Load Control Information in existing messages means that the frequency of transmission of load control information increases as the session load increases, allowing for faster feedback and thus better regulation of the load.\nThe calculation of the Load Control Information is implementation dependent and its calculation and transfer shall not add significant additional load to the node itself and to its corresponding peer nodes.",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.244_6.2.3.3.1",
      "section_id": "6.2.3.3.1",
      "section_title": "General Description",
      "content": "A PFCP message may contain one instance of the Load Control Information (LCI) IE.\nWhen providing load control information in a message for the first time or subsequently, the UP function shall always include the full set of load control information, i.e. all the node level instance of the Load Control Information, even if only a subset of the load control information has changed. The Load Control Sequence Number shall be incremented whenever the load control information is changed (see clause 6.2.3.3.2.1).\nLoad Control Information shall be linked to the Node ID (i.e. FQDN or the IP address used during the UP function selection) of the UP function providing the Information.\nThe receiver shall overwrite any stored load control information of a peer with the newly received load control information from the same peer node if the new load control information is more recent than the old information as indicated by the Load Control Sequence Number, e.g. if the receiver has stored an instance of the load control information for a peer node, it overwrites this instance with the new instance received in a message from the same peer node.\nThe receiver shall consider all the parameters received in the same instance of the LCI IE in conjunction while using this information for UP function selection.\nThe parameters are further defined in clause 6.2.3.3.2.\nLoad control information may be extended with new parameters in future versions of the specification. Any new parameter will have to be categorized as:\n-\tNon-critical optional parameters: the support of these parameters is not critical for the receiver. The receiver can successfully and correctly comprehend the load control information instance, containing one or more of these parameters, by using the other parameters and ignoring the non-critical optional parameter.\n-\tCritical optional parameters: the support of these parameters is critical for the receiver to correctly comprehend the instance of the load control information containing one or more of these parameters.\nThe sender may include one or more non-critical optional parameters within any instance of the LCI IE without having the knowledge of the receiver's capability to support the same. However, the sender shall only include one or more critical optional parameter in an instance of the LCI IE towards a receiver if the corresponding receiver is known to support those parameters. The sender may be aware of this either via signalling methods or by configuration (this will have to be defined when introducing any such new parameter in future).",
      "chunk_type": "definition",
      "cross_references": [
        "clause_6.2.3.3.2.1",
        "clause_6.2.3.3.2"
      ]
    },
    {
      "chunk_id": "ts_29.244_6.2.3.3.2",
      "section_id": "6.2.3.3.2",
      "section_title": "Parameters",
      "content": "6.2.3.3.2.1\tLoad Control Sequence Number\nThe Load Control Sequence number contains a value that indicates the sequence number associated with the LCI IE. This sequence number shall be used to differentiate any two LCI IEs generated at two different instances by the same UP function. The Load Control Sequence Number shall be supported (if load control is supported) and shall always be present in the LCI IE.\nThe UP function generating this information shall increment the Load Control Sequence Number whenever modifying some information in the Load Control Information IE. The Load Control Sequence Number shall not be incremented otherwise. The UP function may use the time, represented in an unsigned integer format, of the generation of the Load Control Information to populate the Load Control Sequence Number.\nThis parameter shall be used by the receiver of the Load Control Information IE to properly collate out-of-order load control information, e.g. due to PFCP retransmissions. This parameter shall also be used by the receiver of the LCI IE to determine whether the newly received load control information has changed compared to load control information previously received from the same node earlier.\nNOTE:\tThe PFCP sequence number cannot be used for collating out-of-order load control information as e.g. load control information may be sent in both PFCP requests and responses, using independent PFCP sequence numbering.\nIf the receiving entity has already received and stored load control information from the peer UP function, the receiving CP function shall update its load control information only if the Load Control Sequence Number received in the new load control information is higher than the stored value of the Load Control Sequence Number associated with the peer UP function. However due to roll-over of the Load Control Sequence Number or restart of the node, the Load Control Sequence Number may be reset to an appropriate base value by the peer UP function, hence the receiving entity shall be prepared to receive (and process) a Load Control Sequence Number parameter whose value is less than the previous value.\n6.2.3.3.2.2\tLoad Metric\nThe Load Metric parameter shall indicate the current load level of the originating node. The computation of the Load Metric is left to implementation. The node may consider various aspects, such as the used capacity of the UP function, the load in the node (e.g. memory/CPU usage in relationship to the total memory/CPU available, etc.).\nThe Load Metric represents the current load level of the sending node as a percentage within the range of 0 to100, where 0 means no or 0% load and 100 means maximum or 100% load reached (i.e. no further load is desirable).\nThe Load Metric shall be supported (if load control is supported). The Load Metric shall always be included in the Load Control Information.\nConsidering the processing requirement of the receiver of the Load Control Information (e.g. handling of the new information, tuning the node selection algorithm to take the new information into account), the sender should refrain from advertising every small variation (e.g. with the granularity of 1 or 2), in the Load Metric which does not result in useful improvement in node selection logic at the receiver. During the typical operating condition of the sender, a larger variation in the Load Metric, e.g. 5 or more units, should be considered as reasonable enough for advertising the new Load Control Information and thus justifying the processing requirement (to handle the new information) of the receiver.\nNOTE:\tThe range of the Load Metric, i.e. 0 to 100, does not mandate the sender to collect its own load information at every increment/decrement and hence to advertise the change of Load Metric with a granularity of 1%. Based on various implementation specific criteria, such as: the architecture, session and signalling capacity, the current load and so on, the sender is free to define its own logic and periodicity with which its own load information is collected.",
      "chunk_type": "parameter",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.244_6.2.3.3.3",
      "section_id": "6.2.3.3.3",
      "section_title": "Frequency of Inclusion",
      "content": "How often the sender includes the load control information is implementation specific. The sender shall ensure that new/updated load control information is propagated to the target CP functions within an acceptable delay, such that the purpose of the information (i.e. effective load balancing) is achieved. The sender may include the LCI IE e.g. as follows:\n-\tthe sender may include Load Control Information towards a peer only when the new/changed value has not already been provided to that peer;\n-\tthe sender may include the Load Control Information in each and every message (extended with LCI IE) towards the peer;\n-\tthe sender may include Load Control Information periodically, i.e. include the information during a first period then cease to do so during a second period.\nThe sender may also implement a combination of one or more of the above approaches. Besides, the sender may also decide to include the Load Control Information only in a subset of the applicable PFCP messages.\nThe receiver shall be prepared to receive the load control information in any of the PFCP messages extended with an LCI IE and upon such reception, shall be able act upon the received load control information.",
      "chunk_type": "requirement",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.244_6.2.4.1",
      "section_id": "6.2.4.1",
      "section_title": "General",
      "content": "Overload Control is a node level procedure.\nOverload Control is an optional feature defined over the Sxa, Sxb, Sxc and N4 reference points.\nOverload control enables a UP function becoming or being overloaded to gracefully reduce its incoming signalling load by instructing its peer CP functions to reduce sending traffic according to its available signalling capacity to successfully process the traffic. A UP function is in overload when it operates over its signalling capacity which results in diminished performance (including impacts to handling of incoming and outgoing traffic).\nOverload control aims at shedding the incoming traffic as close to the traffic source as possible generally when an overload has occurred (reactive action), so to avoid spreading the problem inside the network and to avoid using resources of intermediate nodes in the network for signalling that would anyhow be discarded by the overloaded node.\nLoad control and overload control may be supported and activated independently in the network, based on operator's policy.",
      "chunk_type": "definition",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.244_6.2.4.2",
      "section_id": "6.2.4.2",
      "section_title": "Principles",
      "content": "When a UP function determines that the offered incoming signalling traffic is growing (or is about to grow) beyond its nominal capacity, the UP function may signal its overload, at node level granularity, to its peer CP functions by including Overload Control Information in PFCP signalling which provides guidance to the receiving CP functions to decide actions which lead to signalling traffic mitigation towards the sender of the information. This helps in preventing severe overload and hence potential breakdown of the UP function.\nThe Overload Control Information is piggybacked in PFCP request or response messages such that the exchange of Overload Control Information does not trigger extra signalling.\nNOTE:\tThe inclusion of Overload Control Information in existing messages means that the frequency of transmission of overload control information increases as the signalling load increases, thus allowing for faster feedback and better regulation.\nThe calculation of the Overload Control Information is implementation dependent and its calculation and transfer shall not add significant additional load to the node itself and to its corresponding peer nodes. The calculation of Overload Control Information should not severely impact the resource utilization of the UP function, especially considering the overload situation.\nThe overload control feature should continue to allow for preferential treatment of priority users (eMPS) and emergency services.\nThe overload mitigation actions based on the reception of the overload related information received from the UP function will not be standardized.",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.244_6.2.4.3.1",
      "section_id": "6.2.4.3.1",
      "section_title": "General Description",
      "content": "A PFCP message may contain one instance of the Overload Control Information (OCI) IE.\nWhen providing overload control information in a message for the first time or subsequently, the UP function shall always include the full set of overload control information, i.e. all the node level instance of the Overload Control Information, even if only a subset of the overload control information has changed. The Overload Control Sequence Number shall be incremented whenever the Overload control information is changed (see clause 6.2.4.3.2.1).\nThe receiver shall overwrite any stored overload control information of a peer with the newly received overload control information from the same peer node if the new overload control information is more recent than the old information as indicated by the Overload Control Sequence Number, e.g. if the receiver has stored an instance of the Overload control information for a peer node, it overwrites this instance with the new instance received in a message from the same peer node.\nThe receiver shall consider all the parameters received in the same instance of the OCI IE in conjunction while applying the overload mitigation action.\nThe parameters are further defined in clause 6.2.4.3.2.\nOverload control information may be extended with new parameters in future versions of the specification. Any new parameter will have to be categorized as:\n-\tNon-critical optional parameters: the support of these parameters is not critical for the receiver. The receiver can successfully and correctly comprehend the Overload control information instance, containing one or more of these parameters, by using the other parameters and ignoring the non-critical optional parameter.\n-\tCritical optional parameters: the support of these parameters is critical for the receiver to correctly comprehend the instance of the Overload control information containing one or more of these parameters.\nThe sender may include one or more non-critical optional parameters within any instance of the OCI IE without having the knowledge of the receiver's capability to support the same. However, the sender shall only include one or more critical optional parameter in an instance of the OCI IE towards a receiver if the corresponding receiver is known to support those parameters. The sender may be aware of this either via signalling methods or by configuration (this will have to be defined when introducing any such new parameter in future).\nThe Overload Control Information shall be associated by default to the PFCP entity corresponding to the peer node's IP address of the PFCP session, over which the OCI IE is received, i.e. to the IP address received within the \"UP F-SEID\" IE.\nAlternatively, the UP function may send Overload Control Information which is associated with the Node ID of the UP function (i.e. FQDN or the IP address used during the UP function selection). In that case, the UP function shall provide an explicit indication that the OCI IE included in the message belongs to the Node ID.",
      "chunk_type": "definition",
      "cross_references": [
        "clause_6.2.4.3.2.1",
        "clause_6.2.4.3.2"
      ]
    },
    {
      "chunk_id": "ts_29.244_6.2.4.3.2",
      "section_id": "6.2.4.3.2",
      "section_title": "Parameters",
      "content": "6.2.4.3.2.1\tOverload Control Sequence Number\nThe PFCP protocol requires retransmitted messages to have the same contents as the original message. Due to PFCP retransmissions, the overload control information received by a CP function at a given time may be less recent than the overload control information already received from the same UP function. The Overload Control Sequence Number aids in sequencing the overload control information received from an overloaded UP function. The Overload Control Sequence Number contains a value that indicates the sequence number associated with the Overload Control Information IE. This sequence number shall be used to differentiate between two OCI IEs generated at two different instants, by the same UP function.\nThe Overload Control Sequence Number parameter shall be supported (when supporting the overload control feature) and shall always be present in the Overload Control Information IE.\nThe UP function generating this information shall increment the Overload Control Sequence Number whenever modifying some information in the OCI IE. The Overload Control Sequence Number shall not be incremented otherwise. The UP function may use the time, represented in an unsigned integer format, of the generation of the overload control information, to populate the Overload Control Sequence Number.\nThis parameter shall be used by the receiver of the OCI IE to properly collate out-of-order OCI IEs, e.g. due to PFCP retransmissions. This parameter shall also be used by the receiver of the OCI IE to determine whether the newly received overload control information has changed compared to the overload control information previously received from the same UP function. If the newly received overload control information has the same Overload Control Sequence Number as the previously received overload control information from the same UP function, then the receiver may simply discard the newly received overload control information whilst continuing to apply the overload abatement procedures, as per the previous value.\nNOTE 1:\tThe timer corresponding to the Period of Validity (see clause 6.2.4.3.2.2) is not restarted if the newly received overload control information has the same Overload Control Sequence Number as the previously received overload control information. If the overload condition persists and the overloaded UP function needs to extend the duration during which the overload information applies, the sender needs to provide a new overload control information with an incremented Overload Control Sequence Number (even if the parameters within the overload control information have not changed).\nNOTE 2:\tThe PFCP Sequence Number cannot be used for collating out-of-order overload information as e.g. overload control information may be sent in both PFCP requests and responses, using independent PFCP sequence numbering.\nIf the receiving CP function already received and stored overload control information, which is still valid, from the overloaded UP function, the receiving entity shall update its overload control information, only if the Overload-Sequence-Number received in the new overload control information is larger than the value of the Overload Control Sequence Number associated with the stored information. However due to roll-over of the Overload Control Sequence Number or restart of the UP function, the Overload Control Sequence Number may be reset to an appropriate base value by the peer UP function, hence the receiving entity shall be prepared to receive (and process) an Overload Control Sequence Number parameter whose value is less than the previous value.\n6.2.4.3.2.2\tPeriod of Validity\nThe Period of Validity indicates the length of time during which the overload condition specified by the OCI IE is to be considered as valid (unless overridden by subsequent new overload control information).\nAn overload condition shall be considered as valid from the time the OCI IE is received until the period of validity expires or until another OCI IE with a new set of information (identified using the Overload Control Sequence Number) is received from the same UP function (at which point the newly received overload control information shall prevail). The timer corresponding to the period of validity shall be restarted each time an OCI IE with a new set of information (identified using the Overload Control Sequence Number) is received. When this timer expires, the last received overload control information shall be considered outdated and obsolete, i.e. any associated overload condition shall be considered to have ceased.\nThe Period of Validity parameter shall be supported (when supporting overload control).\nThe Period of Validity parameter achieves the following:\n-\tit avoids the need for the overloaded UP function to include the Overload Control Information IE in every PFCP messages it signals to its peer CP functions when the overload state does not change; thus it minimizes the processing required at the overloaded UP function and its peer CP functions upon sending/receiving PFCP signalling;\n-\tit allows to reset the overload condition after some time in the peer CP functions having received an overload indication from the overloaded UP function, e.g. if no signalling traffic takes place between these PFCP entities for some time due to overload mitigation actions. This also removes the need for the overloaded UP function to remember the list of CP functions to which it has sent a non-null overload reduction metric and to which it would subsequently need to signal when the overload condition ceases, if the Period of Validity parameter was not defined.\n6.2.4.3.2.3\tOverload Reduction Metric\nThe Overload Reduction Metric shall have a value in the range of 0 to 100 (inclusive) which indicates the percentage of traffic reduction the sender of the overload control information requests the receiver to apply. An Overload Reduction Metric of \"0\" always indicates that the UP function is not in overload (that is, no overload abatement procedures need to be applied) for the indicated scope.\nConsidering the processing requirement of the receiver of the Overload Control Information, e.g. to perform overload control based on the updated Overload Reduction Metric, the sender should refrain from advertising every small variation, e.g. with the granularity of 1 or 2, in the Overload Reduction Metric which does not result in useful improvement for mitigating the overload situation. During the typical operating condition of the sender, a larger variation in the Overload Reduction Metric, e.g. 5 or more units, should be considered as reasonable enough for advertising a new Overload Reduction Metric Information and thus justifying the processing requirement (to handle the new information) of the receiver.\nNOTE:\tThe range of Overload Reduction Metric, i.e. 0 to 100, does not mandate the sender to collect its own overload information at every increment/decrement and hence to advertise the change of Overload Reduction Metric with a granularity of 1%. Based on various implementation specific criteria, such as the architecture, session and signalling capacity, the current load/overload situation and so on, the sender is free to define its own logic and periodicity with which its own overload control information is collected.\nThe computation of the exact value for this parameter is left as an implementation choice at the sending UP function.\nThe Overload Reduction Metric shall be supported (when supporting overload control) and shall always be present in the OCI IE.\nThe inclusion of the OCI IE signals an overload situation is occurring, unless the Overload Reduction Metric is set to \"0\", which signals that the overload condition has ceased. Conversely, the absence of the OCI IE in a message does not mean that the overload has abated.",
      "chunk_type": "parameter",
      "cross_references": [
        "clause_6.2.4.3.2.2"
      ]
    },
    {
      "chunk_id": "ts_29.244_6.2.4.3.3",
      "section_id": "6.2.4.3.3",
      "section_title": "Frequency of Inclusion",
      "content": "How often or when the sender includes the overload control information is implementation specific. The sender shall ensure that new/updated overload control information is propagated to the target receivers with an acceptable delay, such that the purpose of the information, (i.e. the effective overload control protection) is achieved. The following are some of the potential approaches the sender may implement for including the OCI IE:\n-\tthe sender may include OCI IE towards a receiver only when the new/changed value has not already been provided to the given receiver;\n-\tthe sender may include the OCI IE in a subset of the messages towards the receiver;\n-\tthe sender may include the OCI IE periodically, i.e. include the information during a first period then cease to do so during a second period.\nThe sender may also implement a combination of one or more of the above approaches. Besides, the sender may also include the OCI IE only in a subset of the applicable PFCP messages.\nThe receiver shall be prepared to receive the overload control information received in any of the PFCP messages extended with an OCI IE and upon such reception, shall be able act upon the received information.",
      "chunk_type": "requirement",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.244_6.2.4.4.1",
      "section_id": "6.2.4.4.1",
      "section_title": "General",
      "content": "As part of the overload mitigation, a CP function shall reduce the total number of messages, which would have been sent otherwise, towards the overloaded peer based on the information received within the Overload Control Information. This shall be achieved by discarding a fraction of the messages in proportion to the overload level of the target peer. This is called \"message throttling\".\nMessage throttling shall only apply to Request messages. Response messages should not be throttled since that would result in the retransmission of the corresponding request message by the sender.\nA CP function supporting PFCP overload control shall support and use the \"Loss\" algorithm as specified in this clause, for message throttling.",
      "chunk_type": "definition",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.244_6.2.4.4.2",
      "section_id": "6.2.4.4.2",
      "section_title": "Throttling algorithm – \"Loss\"",
      "content": "6.2.4.4.2.1\tDescription\nAn overloaded UP function shall ask its peers to reduce the number of requests they would ordinarily send by signalling Overload Control Information including the requested traffic reduction, as a percentage, within the \"Overload-Reduction-Metric\", as specified in clause 6.2.4.3.2.\nThe recipients of the \"Overload-Reduction-Metric\" shall reduce the number of requests sent by that percentage, either by redirecting them to an alternate destination if possible (e.g. the PFCP Session Establishment Request message may be redirected to an alternate UP function), or by failing the request and treating it as if it was rejected by the destination UP function.\nFor example, if a sender requests another peer to reduce the traffic it is sending by 10%, then that peer shall throttle 10% of the traffic that would have otherwise been sent to this UP function.\nThe overloaded UP function should periodically adjust the requested traffic reduction based e.g. on the traffic reduction factor that is currently in use, the current system utilization (i.e. the overload level) and the desired system utilization (i.e. the target load level), and/or the rate of the current overall received traffic.\nAnnex A.1 provides an (informative) example of a possible implementation of the \"Loss\" algorithm, amongst other possible methods.\nNOTE 1:\tThis algorithm does not guarantee that the future traffic towards the overloaded UP function will be less than the past traffic but it ensures that the total traffic sent towards the overloaded UP function is less than what would have been sent without any throttling in place. If after requesting a certain reduction in traffic, the overloaded UP function receives more traffic than in the past, whilst still in overload, leading to the worsening rather than an improvement in the overload level, then the overloaded UP function can request for more reduction in traffic. Thus, by periodically adjusting the requested traffic reduction, the overloaded node can ensure that it receives, approximately, the amount of traffic which it can handle.\nNOTE 2:\tSince the reduction is requested as a percentage, and not as an absolute amount, this algorithm achieves a good useful throughput towards the overloaded node when the traffic conditions vary at the source nodes (depending upon the events generated towards these source nodes by other entities in the network), as a potential increase of traffic from some source nodes can possibly be compensated by a potential decrease of traffic from other source nodes.",
      "chunk_type": "requirement",
      "cross_references": [
        "clause_6.2.4.3.2"
      ]
    },
    {
      "chunk_id": "ts_29.244_6.2.4.5.1",
      "section_id": "6.2.4.5.1",
      "section_title": "Description",
      "content": "When performing message throttling:\n-\tPFCP requests related to priority traffic (i.e. eMPS as described in 3GPP TS 22.153 [15]) and emergency have the highest priority. Depending on regional/national requirements and network operator policy, these PFCP requests shall be the last to be throttled, when applying traffic reduction, and the priority traffic shall be exempted from throttling due to PFCP overload control up to the point where the requested traffic reduction cannot be achieved without throttling the priority traffic;\n-\tfor other types of sessions, messages throttling should consider the relative priority of the messages so that the messages which are considered as low priority are considered for throttling before the other messages. The relative priority of the messages may be derived from the relative priority of the procedure for which the message is being sent or may be derived from the session parameters such as APN, QCI, ARP and/or Low Access Priority Indicator (LAPI).\nNOTE:\tA random throttling mechanism, i.e. discarding the messages without any special consideration, could result in an overall poor congestion mitigation mechanism and bad user experience.\nAn overloaded node may also apply these message prioritization schemes when handling incoming initial messages during an overloaded condition, as part of a self-protection mechanism.",
      "chunk_type": "general",
      "cross_references": [
        "ts_22.153"
      ]
    },
    {
      "chunk_id": "ts_29.244_6.2.4.5.2",
      "section_id": "6.2.4.5.2",
      "section_title": "Based on the Message Priority Signalled in the PFCP Message",
      "content": "Message prioritization may be performed by an overloaded node, when handling incoming messages during an overloaded condition, based on the relative PFCP message priority signalled in the PFCP header (see clause 7.2.2.3).\nA PFCP entity shall determine whether to set and use the message priority in PFCP signalling, based on operator policy. The requirements specified in this clause shall apply if message priority in PFCP signalling is used.\nA sending PFCP entity shall determine the relative message priority to signal in the message according to the principles specified in clause 6.2.4.5.1. If the message affects multiple bearers, the relative message priority should be determined considering the highest priority ARP among all the bearers.\nA PFCP entity should set the same message priority in a Response message as received in the corresponding Request message.\nFor incoming PFCP messages that do not have a message priority in the PFCP header, the receiving PFCP entity:\n-\tshall apply a default priority, if the incoming message is a Request message;\n-\tshould apply the message priority sent in the Request message, if the incoming message is a Response message.\nThis feature should be supported homogenously across the CP functions and UP functions in the network, otherwise an overloaded node will process Request messages received from the non-supporting nodes according to the default priority while Request messages received from supporting nodes will be processed according to the message priority signalled in the PFCP message.",
      "chunk_type": "general",
      "cross_references": [
        "clause_7.2.2.3",
        "clause_6.2.4.5.1"
      ]
    },
    {
      "chunk_id": "ts_29.244_6.2.5.1",
      "section_id": "6.2.5.1",
      "section_title": "General",
      "content": "PFCP PFD Management is a node level procedure.\nThe PFCP PFD Management procedure may be used by the CP function and UP function to provision PFDs (e.g. received from the PFDF as specified in clauses 5.11.4 and 6.5.2 of 3GPP TS 23.214 [2]) to the UP function, for one or more Application Identifiers.\nSupport of this procedure is optional for the CP function and the UP function. The UP function shall set the PFDM feature flag in the UP Function Features IE if it supports the PFD Management procedure (see clause 8.2.25).\nThe UP function shall store the PFDs provisioned per Application Identifier. These PFDs shall apply to all the PFCP session established in the UP function, for all the controlling CP functions, i.e. the scope of a PFD is not limited to the PFCP sessions established by the CP function which provisioned the PFD.\nNOTE:\tApplication identifiers preconfigured in the UP function, if any, need to be distinct from application identifiers provisioned via PFD management procedure.",
      "chunk_type": "definition",
      "cross_references": [
        "clause_8.2.25",
        "ts_23.214"
      ]
    },
    {
      "chunk_id": "ts_29.244_6.2.5.2",
      "section_id": "6.2.5.2",
      "section_title": "CP Function Behaviour",
      "content": "The CP function initiates the PFCP PFD Management procedure to provision PFDs in the UP function, for one or more Application Identifier(s).\nThe CP function:\n-\tshall send the PFCP PFD Management Request message, including the full set of PFD IDs and PFD contents to be provisioned in the UP function per Application Identifier.\nWhen the CP function receives a PFCP PFD Management Response with cause success, the CP function shall consider that the PFDs have been provisioned as requested.",
      "chunk_type": "requirement",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.244_6.2.5.3",
      "section_id": "6.2.5.3",
      "section_title": "UP Function Behaviour",
      "content": "When the UP function receives a PFCP PFD Management Request message, it shall:\n-\tif no Application ID's PFDs IE is present in the request (i.e. empty message):\n-\tdelete all the PFDs received and stored earlier for all Application Identifier(s) provisioned via the PFD Management Procedure;\n-\tif at least one Application ID's PFDs IE is present in the request:\n-\tdelete all the PFDs received and stored earlier for the indicated Application Identifier(s);\n-\tstore all the PFDs received in the request for the indicated Application Identifier(s);\n-\tsend a PFCP PFD Management Response with the cause \"success\", if the above operations were performed successfully;\n-\tif a PFD is removed/modified and this PFD was used to detect application traffic related to an application identifier in a PDR created/activated for a PFCP session and the UP function has reported the application start to the CP function for the application or the application instance corresponding to this PFD as defined in clause 5.4.11 ((Un)solicited Application Reporting), the UP function shall report the application stop to the CP function for the corresponding application or the corresponding application instance identifier as defined in clause 5.4.11 if the removed/modified PFD in UP results in the stop of the application or the application instance is not being able to be detected. See clause 5.11.4 of 3GPP TS 23.214 [2].\nNOTE:\tMultiple PFDs can be associated with the application identifier. When the removed/modified PFD is the last one which is used to detect traffic identified by application id, the UPF reports application stop.",
      "chunk_type": "requirement",
      "cross_references": [
        "clause_5.4.11",
        "ts_23.214_clause_5.11.4",
        "ts_23.214"
      ]
    },
    {
      "chunk_id": "ts_29.244_6.2.6.1",
      "section_id": "6.2.6.1",
      "section_title": "General",
      "content": "PFCP Association Setup is a node level procedure.\nThe PFCP Association Setup procedure shall be used to setup a PFCP association between a CP function and a UP function, to enable the CP function to use the resources of the UP function subsequently, i.e. establish PFCP Sessions.\nThe setup of a PFCP association may be initiated by the CP function (see clause 6.2.6.2) or the UP function (see clause 6.2.6.3).\nThe CP function and the UP function shall support the PFCP Association Setup initiated by the CP function. The CP function and the UP function may additionally support the PFCP Association Setup initiated by the UP function.",
      "chunk_type": "definition",
      "cross_references": [
        "clause_6.2.6.2",
        "clause_6.2.6.3"
      ]
    },
    {
      "chunk_id": "ts_29.244_6.2.6.2.1",
      "section_id": "6.2.6.2.1",
      "section_title": "CP Function Behaviour",
      "content": "The CP function shall initiate the PFCP Association Setup procedure to request to setup a PFCP association towards a UP function prior to establishing a first PFCP session on this UP function.\nThe CP function shall retrieve an IP address of the UP function to send the PFCP Association Setup Request, as specified in clause 5.8.1, and shall send a PFCP Association Setup Request to the UP function with:\n-\tthe Node ID of the CP function;\n-\tthe list of optional features the CP function supports which may affect the UP function behaviour, if any;\n-\toptionally, the PFCP Session Retention Information IE (see figure 7.4.4.1-2) to request the UP function to retain all or part of the existing PFCP sessions if a PFCP association already exists in the UP function for the same Node ID.\nThe CP function shall only initiate PFCP Session related signalling procedures toward a UP function after it receives the PFCP Association Setup Response with a successful cause from this UP function.\nThe CP function shall determine whether the UP function supports Sxa, Sxb, Sxc and/or combined Sxa/Sxb by local configuration or optionally via DNS if deployed.",
      "chunk_type": "requirement",
      "cross_references": [
        "clause_5.8.1",
        "figure_7.4.4.1-2"
      ]
    },
    {
      "chunk_id": "ts_29.244_6.2.6.2.2",
      "section_id": "6.2.6.2.2",
      "section_title": "UP Function behaviour",
      "content": "When receiving a PFCP Association Setup Request, the UP function:\n-\tif the request is accepted:\n-\tshall store the Node ID of the CP function as the identifier of the PFCP association;\n-\tshall send a PFCP Association Setup Response including:\n-\ta successful cause;\n-\tits Node ID;\n-\tinformation of all supported optional features in the UP function;\n-\toptionally one or more UE IP address Pool Information IE which contains a list of UE IP Address Pool Identities per Network Instance, S-NSSAI and IP version;\n-\toptionally the NF Instance ID of the UPF if available.\n-\tshall send a PFCP Version Not Supported Response if the PFCP header of the request indicates a PFCP protocol version that is not supported by the UP function;\n-\totherwise, shall send a PFCP Association Setup Response with an appropriate error cause if the request is rejected.\nIf the PFCP Association Setup Request contains a Node ID for which a PFCP association was already established, the UP function shall:\n-\tproceed with establishing the new PFCP association (regardless of the Recovery Timestamp received in the request), overwriting the existing association;\n-\tretain the PFCP sessions that were established with the existing PFCP association and that are requested to be retained, if the PFCP Session Retention Information IE was received in the request; otherwise, delete the PFCP sessions that were established with the existing PFCP association;\n-\tset the PSREI (PFCP Session Retained Indication) flag to \"1\" in the PFCP Association Setup Response, if the PFCP Session Retention Information IE was received in the Request and the requested PFCP sessions have been retained.\nIf the UPF is configured to be used for IPUPS, the UPF shall set the UUPSI (UPF configured for IPUPS Indication) flag to \"1\" in the PFCP Association Setup Response message.",
      "chunk_type": "requirement",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.244_6.2.6.3.1",
      "section_id": "6.2.6.3.1",
      "section_title": "UP Function Behaviour",
      "content": "The UP function initiates the PFCP Association Setup procedure to request to setup a PFCP association towards a CP function. The UP function is configured with a set of CP functions to which it shall establish a PFCP association.\nThe UP function:\n-\tshall retrieve an IP address of the CP function, e.g. based on local configuration in the UP function;\n-\tshall send the PFCP Association Setup Request including:\n-\tthe Node ID of the UP function;\n-\tinformation of all supported optional features in the UP function;\n-\toptionally one or more UE IP address Pool Information IE which contains a list of UE IP Address Pool Identities per a given Network Instance, S-NSSAI and IP version;\n-\toptionally the NF Instance ID of the UPF if available.\n-\tthe UUPSI (UPF configured for IPUPS Indication) flag set to \"1\" if the UPF is configured to be used for IPUPS.",
      "chunk_type": "requirement",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.244_6.2.6.3.2",
      "section_id": "6.2.6.3.2",
      "section_title": "CP Function Behaviour",
      "content": "When receiving a PFCP Association Setup Request, the CP function:\n-\tif the request is accepted:\n-\tshall store the Node ID of the UP function as the identifier of the PFCP association;\n-\tshall send a PFCP Association Setup Response with a successful cause, its Node ID, and information of the list of optional features the CP function supports which may affect the UP function behaviour, if any;\n-\tshall send a PFCP Version Not Supported Response if the PFCP header of the request indicates a PFCP protocol version that is not supported by the CP function;\n-\totherwise, shall send a PFCP Association Setup Response with an appropriate error cause if the request is rejected.\nThe CP function shall only initiate PFCP Session related signalling procedures toward a UP function after it has sent the PFCP Association Setup Response with a successful cause to the UP function.\nThe CP function shall determine the UP function supports Sxa, Sxb, Sxc and/or combined Sxa/Sxb by local configuration or optionally via DNS if deployed.",
      "chunk_type": "requirement",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.244_6.2.7.1",
      "section_id": "6.2.7.1",
      "section_title": "General",
      "content": "PFCP Association Update is a node level procedure.\nThe PFCP Association Update procedure shall be used to modify an existing PFCP association between the CP function and the UP function. It may be initiated by the UP function or by the CP function to update the supported features or available resources of the UP function.",
      "chunk_type": "definition",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.244_6.2.7.2.1",
      "section_id": "6.2.7.2.1",
      "section_title": "CP Function Behaviour",
      "content": "The CP function initiates the PFCP Association Update procedure to report changes to the PFCP association to the UP function, e.g. to update the supported features.\nWhen both the CP function and UP function support the EPFAR feature, the CP function may send a PFCP Association Update Request with the \"PFCP Association Release Preparation Start\" flag set to \"1\" when the CP function decides to release the PFCP association and request the UP function to report all non-zero usage reports for the PFCP session affected by the release of the PFCP association, as specified in clause 5.18.",
      "chunk_type": "general",
      "cross_references": [
        "clause_5.18"
      ]
    },
    {
      "chunk_id": "ts_29.244_6.2.7.2.2",
      "section_id": "6.2.7.2.2",
      "section_title": "UP Function Behaviour",
      "content": "When receiving a PFCP Association Update Request, the UP function:\n-\tshall update the list of optional features of the CP function, when received;\n-\tshall send a PFCP Association Update Response with an appropriate error cause if the Node ID is not known by the UP Function;\n-\tshall return a PFCP Association Update Response with a successful cause value, if the PFCP Association Update Request is handled successfully.\nWhen both the CP function and UP function support the EPFAR feature, and the CP function has set the \"PFCP Association Release Preparation\" set to \"1\" in the PFCP Association Update Request message, the UP function shall send the PFCP Association Update Response to CP function with successful cause value and then send PFCP Session Report Request messages to report non-zero usage reports (at least one message per PFCP Session) for the PFCP Sessions affected by the release of the PFCP association, as specified in clause 5.18.",
      "chunk_type": "requirement",
      "cross_references": [
        "clause_5.18"
      ]
    },
    {
      "chunk_id": "ts_29.244_6.2.7.3.1",
      "section_id": "6.2.7.3.1",
      "section_title": "UP Function Behaviour",
      "content": "The UP function initiates the PFCP Association Update procedure to report changes to the PFCP association to the CP function, e.g. change of optional features, an indication to request to release the PFCP association, change of the UE IP Address Pool Identifies configured in the UP function.\nThe UP function may send a PFCP Association Update Request to request the CP function to perform the release of the PFCP association, optionally providing a Graceful Release Period.\nWhen the Enhanced PFCP Association Release feature (EPFAR) (see clause 5.18) is supported by both the CP function and UP function, the UP function:\n-\tmay send a PFCP Association Update Request with the flag \"PFCP Association Release Preparation\" set to \"1\" when the UP function decides to release the PFCP association and thus inform the CP function that all non-zero usage reports for those PFCP session affected by the release of the PFCP association will be reported;\n-\tshall then send a PFCP Association Update Request, with the URSS flag set to \"1\" once all non-zero usage reports for all the PFCP Sessions affected by the release of PFCP Association have been sent to the CP function.\nAfter reception of the PFCP Association Update Response, the UP function shall consider that the PFCP association is still setup until receiving a PFCP Association Release Request. When the UP function requests to release the PFCP Association and sends a PFCP Association Update Request message with a Graceful Release Period or with the URSS flag set, if no PFCP Association Release Request is received before the Graceful Release Period or a configurable timer (when the URSS flag is set) expires, the UP function may locally release the association, behaving as if the PFCP Association Release Request had been received.",
      "chunk_type": "general",
      "cross_references": [
        "clause_5.18"
      ]
    },
    {
      "chunk_id": "ts_29.244_6.2.7.3.2",
      "section_id": "6.2.7.3.2",
      "section_title": "CP Function Behaviour",
      "content": "When receiving a PFCP Association Update Request, the CP function:\n-\tshall update the list of optional features of the UP function, when received;\n-\tshall send a PFCP Association Update Response with an appropriate error cause if the Node ID is not known by the CP Function;\n-\tshall return a PFCP Association Update Response with a successful cause value if the PFCP Association Update Request is handled successfully.\nIf the UP function has requested to release the PFCP association in the PFCP Association Update Request, the CP function should initiate a PFCP Association Release Request to release the PFCP association, as soon as possible if no Graceful Release Period was included in the request or before the expiry of the Graceful Release Period. The CP function should stop creating new PFCP sessions in the UP function during the Graceful Release Period. When the final usage report(s) for a PFCP Session (upon being deleted) is required, e.g. based on operator policies, the CP function should initiate a PFCP Session Deletion Procedure to collect the usage reports per PFCP Session affected by the release of PFCP Association before the Graceful Release Period is expired.\nWhen both the CP function and UP function support the EPFAR feature, and if the UP function has set the URSS flag to \"1\" in the PFCP Association Update Request message, the CP function shall send the PFCP Association Update Response with successful cause value to indicate the PFCP Association Update Request is handled successfully and then immediately initiate the PFCP Association Release Procedure, as specified in clause 5.18.\nIf the UP function has included UE IP address Pool Identity IE in the PFCP Association Update Request message, the CP function shall use it to overwrite the UE IP address Pool Identity previously received from the UP function.",
      "chunk_type": "requirement",
      "cross_references": [
        "clause_5.18"
      ]
    },
    {
      "chunk_id": "ts_29.244_6.2.8.1",
      "section_id": "6.2.8.1",
      "section_title": "General",
      "content": "PFCP Association Release is a node level procedure.\nThe PFCP Association Release procedure shall be used to terminate the PFCP association between the CP Function and the UP Function due to e.g. OAM reasons. The PFCP Association Release Request may be initiated by the CP function.\nWhen the final usage report(s) for a PFCP Session is required, e.g. based on the operator policies, the CP function should retrieve the final usage reports for the PFCP Sessions affected by the release of PFCP Association, i.e. by initiating a PFCP Session Deletion Procedure towards the UP function for every PFCP session, before it initiates PFCP Association Release Request.\nWhen using the MPAS feature (Multiple PFCP Associations to the SMFs in an SMF set) defined in clause 5.22.3, the SMF and the UPF shall not release the PFCP sessions that were served over the PFCP association being released, unless  the PFCP association being released is the last PFCP association that was established between the UPF and any SMF of the SMF set.\nNOTE:\tThe PFCP sessions are taken over by different SMFs of the SMF set, and not released, when using the MPAS feature, if there is at least another PFCP association remaining established between the UPF and any SMF of the SMF set.",
      "chunk_type": "definition",
      "cross_references": [
        "clause_5.22.3"
      ]
    },
    {
      "chunk_id": "ts_29.244_6.2.8.2",
      "section_id": "6.2.8.2",
      "section_title": "CP Function Behaviour",
      "content": "If the CP function initiates the PFCP Association Release procedure to release an existing PFCP association, the CP function:\n-\tshall delete locally all the PFCP sessions related to that PFCP association when receiving the PFCP Association Release Response with the cause value success, unless the MPAS feature (clause 5.22.3) is used and there is at least another PFCP association remaining established between the UPF and any SMF of the SMF set.",
      "chunk_type": "requirement",
      "cross_references": [
        "clause_5.22.3"
      ]
    },
    {
      "chunk_id": "ts_29.244_6.2.8.3",
      "section_id": "6.2.8.3",
      "section_title": "UP Function behaviour",
      "content": "When the UP function receives a PFCP Association Release Request, the UP function:\n-\tshall delete all the PFCP sessions related to that PFCP association locally, unless the MPAS feature (clause 5.22.3) is used and there is at least another PFCP association remaining established between the UPF and any SMF of the SMF set;\n-\tshall delete the PFCP association and any related information (e.g. Node ID of the CP function);\n-\tshall send a PFCP Association Release Response with a successful cause.\nNOTE:\tThe UP function always accepts a PFCP Association Release Request.",
      "chunk_type": "requirement",
      "cross_references": [
        "clause_5.22.3"
      ]
    },
    {
      "chunk_id": "ts_29.244_6.2.9.1",
      "section_id": "6.2.9.1",
      "section_title": "General",
      "content": "PFCP Node Report Procedure is a node level procedure.\nThe PFCP Node Report procedure shall be used by the UP function to report information to the CP function which is not related to a specific PFCP session, e.g. to report a user plane path failure affecting all the PFCP sessions towards a remote GTP-U peer.",
      "chunk_type": "definition",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.244_6.2.9.2",
      "section_id": "6.2.9.2",
      "section_title": "UP Function Behaviour",
      "content": "The UP function shall initiate the PFCP Node Report procedure to report information to the CP function. The UP function:\n-\tshall send the PFCP Node Report Request message, including the information to be reported.\nWhen the UP function receives a PFCP Node Report Response with the cause success, the UP function shall consider the information successfully delivered to the CP function.",
      "chunk_type": "requirement",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.244_6.2.9.3",
      "section_id": "6.2.9.3",
      "section_title": "CP Function behaviour",
      "content": "When the CP function receives a PFCP Node Report Request message, it shall:\n-\tprocess the information being reported as appropriate and send a PFCP Node Report Response with the cause \"success\";\n-\totherwise return an appropriate error cause value.",
      "chunk_type": "requirement",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.244_6.3.1",
      "section_id": "6.3.1",
      "section_title": "General",
      "content": "The following clauses describe the session related procedures over the Sxa, Sxb, Sxc and N4 reference points. The behaviour of the CP function and UP function when sending and receiving session related messages is described.",
      "chunk_type": "definition",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.244_6.3.2.1",
      "section_id": "6.3.2.1",
      "section_title": "General",
      "content": "The PFCP Session Establishment procedure shall be used to setup a PFCP session between CP function and UP function and configure Rules in the UP function so that the UP function can handle incoming packets.",
      "chunk_type": "definition",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.244_6.3.2.2",
      "section_id": "6.3.2.2",
      "section_title": "CP Function Behaviour",
      "content": "The CP function initiates the PFCP Session Establishment procedure to create a PFCP session for a PDN connection or a PDU session, or IP-CAN session or TDF session or for applying a certain IP packets treatment which is not associated with any PDN connection or TDF session.\nThe CP function:\n-\tshall send the PFCP Session Establishment Request message with a new PFCP F-SEID together with Rules to be created;\n-\tmay include its current Recovery Time Stamp as specified in clause 19A of TS 3GPP TS 23.007 [24].\nWhen the CP function receives a PFCP Session Establishment Response with the cause \"Request accepted (success)\", the CP function shall continue with the procedure which triggered the PFCP Session Establishment procedure. If the CP function indicated support of the PSUCC feature (see clause 8.2.58) during the PFCP association setup or update procedure, and if the cause in the response indicates \"Request partially accepted\", the CP function shall behave as specified in clause 5.2.9.",
      "chunk_type": "general",
      "cross_references": [
        "ts_23.007_clause_19",
        "clause_8.2.58",
        "clause_5.2.9",
        "ts_23.007"
      ]
    },
    {
      "chunk_id": "ts_29.244_6.3.2.3",
      "section_id": "6.3.2.3",
      "section_title": "UP Function Behaviour",
      "content": "When the UP function receives a PFCP Session Establishment Request message:\n-\tthe UP function shall store and apply the rules received in the request and send a PFCP Session Establishment Response with cause \"success\", if all rules in the PFCP Session Establishment Request are stored and applied;\n-\tOtherwise, if at least one rule failed to be stored or applied:\n-\tthe UP function shall return an appropriate error cause value with the Rule ID of the Rule causing the first error, discard all the received rules and not create any PFCP session context, if the CP function or the UP function does not support the PSUCC feature (see clause 5.2.9); or\n-\talternatively, if the CP function indicated support of the PSUCC feature (see clause 8.2.58) during the PFCP association setup or update procedure, and if this feature is also supported by the UP function, the UP function should accept the request partially, if possible, and return a response indicating a partial acceptance of the request as specified in clause 5.2.9.",
      "chunk_type": "requirement",
      "cross_references": [
        "clause_5.2.9",
        "clause_8.2.58"
      ]
    },
    {
      "chunk_id": "ts_29.244_6.3.3.1",
      "section_id": "6.3.3.1",
      "section_title": "General",
      "content": "The PFCP Session Modification procedure shall be used to modify an existing PFCP session, e.g. to configure a new rule, to modify an existing rule, to delete an existing rule.",
      "chunk_type": "definition",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.244_6.3.3.2",
      "section_id": "6.3.3.2",
      "section_title": "CP Function behaviour",
      "content": "The CP function initiates the PFCP Session Modification procedure to modify an existing PFCP session, e.g. triggered by a modification of PDN connection, PDU session, IP CAN session or TDF session.\nThe CP function shall:\n-\tinclude a complete PDI if the PDI in the existing PDR is to be updated;\n-\tremove locally the reference to a rule in the PDRs when the related Rule is deleted;\n-\tprovide all the new, updated or deleted Rules. The Updated Rules shall contain only the information which are changed, added and/or deleted.\nThe CP function shall not include multiple updates in a PFCP Modification Request message, e.g. Create PDR, Update PDR and Remove PDR, for the same rule identified by the Rule ID.\nWhen the CP function receives a PFCP Session Modification Response with the cause \"Request accepted (success)\", it shall continue with the procedure which has initiated the PFCP Session Modification procedure. If the CP function indicated support of the PSUCC feature (see clause 8.2.58) during the PFCP association setup or update procedure, and if the cause in the response indicates \"Request partially accepted\", the CP function shall behave as specified in clause 5.2.9.",
      "chunk_type": "general",
      "cross_references": [
        "clause_8.2.58",
        "clause_5.2.9"
      ]
    },
    {
      "chunk_id": "ts_29.244_6.3.3.3",
      "section_id": "6.3.3.3",
      "section_title": "UP Function Behaviour",
      "content": "When the UP function receives a PFCP Session Modification Request it shall:\n-\tsend the PFCP Session Modification Response message with a rejection cause value set to \"Session context not found\" if the F-SEID included in the PFCP Session Modification Request message is unknown;\n-\treject a modification request which would relate to a rule not existing in the UP function;\n-\tdiscard any updates on the PFCP session context included in the PFCP Session Modification Request message if the request is rejected and send a PFCP Session Modification Response with an appropriate error cause together with additional information e.g. indicating the first Rule ID of the Rule causing the error. In this case, the UP function shall continue with the existing PFCP session context for the PFCP session as if the PFCP Session Modification Request had not been received;\n-\tremove all rules identified by a Rule ID to be removed and remove the Rule ID from the PDR(s) from where they are referenced;\n-\tsend the PFCP Session Modification Response with the cause \"Request accepted (success)\", if all the requested modifications are accepted and performed successfully;\n-\tsend the PFCP Session Modification Response with the cause \"Request partially accepted\", if the CP function indicated support of the PSUCC feature (see clause 8.2.58) during the PFCP association setup or update procedure, if this feature is also supported by the UP function, and if the UP function could accept the request partially as specified in clause 5.2.9.",
      "chunk_type": "requirement",
      "cross_references": [
        "clause_8.2.58",
        "clause_5.2.9"
      ]
    },
    {
      "chunk_id": "ts_29.244_6.3.4.1",
      "section_id": "6.3.4.1",
      "section_title": "General",
      "content": "The PFCP Session Deletion procedure shall be used to delete an existing PFCP session between the CP function and the UP function.",
      "chunk_type": "definition",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.244_6.3.4.2",
      "section_id": "6.3.4.2",
      "section_title": "CP Function Behaviour",
      "content": "The CP function initiates a PFCP Session Deletion procedure towards the UP function to delete an existing PFCP session e.g. when the corresponding PDN connection or PDU session is deleted.\nThe CP shall:\n-\tsend a PFCP Session Deletion Request with the F-SEID identifying the PFCP session.\nWhen the CP function receives PFCP Session Deletion Response with cause success, the CP function shall continue with the procedure which triggers the PFCP Session Deletion procedure.",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.244_6.3.4.3",
      "section_id": "6.3.4.3",
      "section_title": "UP Function Behaviour",
      "content": "When the UP function receives a PFCP Session Deletion Request it shall:\n-\tsend the PFCP Session Deletion Response message with a rejection cause set to \"Session context not found\" if the F-SEID include in the PFCP Session Deletion Request message is unknown;\n-\tsend the PFCP Session Deletion Response message with an acceptance cause if the PFCP session and associated rules are deleted successfully, and include any pending Usage Report(s) in the message.",
      "chunk_type": "requirement",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.244_6.3.5.1",
      "section_id": "6.3.5.1",
      "section_title": "General",
      "content": "The PFCP Session Report procedure shall be used by the UP function to report information related to the PFCP session to the CP function.",
      "chunk_type": "definition",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.244_6.3.5.2",
      "section_id": "6.3.5.2",
      "section_title": "UP Function Behaviour",
      "content": "The UP function shall initiate the PFCP Session Report procedure to report information related to a PFCP session to the CP function. The UP function:\n-\tshall send the PFCP Session Report Request message, identifying the PFCP session for which the report is sent and including the information to be reported.\nIf the Enhanced PFCP Association Release feature (EPFAR) is supported by both the CP function and UP function, the UP function may send a PFCP Session Report Request message with the flag PSDBU being set to \"1\" to the CP function to report that the PFCP session is being deleted in the UP function, as specified in clause 5.18, e.g. to report remaining non-zero usage reports for all URRs in the PFCP Session before the PFCP Session is locally deleted in the UP function during an Enhanced PFCP Association Release procedure.\nWhen the UP function receives a PFCP Session Report Response with the cause success, the UP function shall consider the information to be successfully delivered to the CP function.",
      "chunk_type": "requirement",
      "cross_references": [
        "clause_5.18"
      ]
    },
    {
      "chunk_id": "ts_29.244_6.3.5.3",
      "section_id": "6.3.5.3",
      "section_title": "CP Function Behaviour",
      "content": "When the CP function receives a PFCP Session Report Request message, it shall:\n-\tsend the PFCP Session Report Response message with a rejection cause set to \"Session context not found\" if the F-SEID included in the PFCP Session Report Request message is unknown;\n-\tprocess the information being reported as appropriate and send a PFCP Session Report Response with the cause \"success\";\n-\totherwise return an appropriate error cause value.\nIf the Enhanced PFCP Association Release feature (EPFAR) is supported by both the CP function and UP function, the CP function shall consider that a PFCP Session is locally deleted in the UP function upon receiving a PFCP Session Report Request message from the UP function with the flag PSDBU being set to \"1\".",
      "chunk_type": "requirement",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.244_6.4",
      "section_id": "6.4",
      "section_title": "Reliable Delivery of PFCP Messages",
      "content": "Reliable delivery of PFCP messages is accomplished by retransmission of these messages as specified in this clause.\nA PFCP entity shall maintain, for each triplet of local IP address, local UDP port and remote peer's IP address, a sending queue with Request messages to be sent to that peer. Each message shall be sent with a Sequence Number and be held until a corresponding Response is received or until the PFCP entity ceases retransmission of that message. The Sequence Number shall be unique for each outstanding Request message sourced from the same IP/UDP endpoint. A PFCP entity may have several outstanding Requests waiting for replies.\nWhen sending a Request message, the sending PFCP entity shall start a timer T1. The sending entity shall consider that the Request message has been lost if a corresponding Response message has not been received before the T1 timer expires. If so, the sending entity shall retransmit the Request message, if the total number of retry attempts is less than N1 times. The setting of the T1 timer and N1 counter is implementation specific.\nA retransmitted PFCP message shall have the same message content, including the same PFCP header, UDP ports, source and destination IP addresses as the originally transmitted message.\nA Request and its Response message shall have the same Sequence Number value, i.e. the Sequence Number in the PFCP header of the Response message shall be copied from the respective Request message. A Request and its Response messages are matched based on the Sequence Number and the IP address and UDP port.\nNot counting retransmissions, a Request message shall be answered with a single Response message. Duplicated Response messages shall be discarded by the receiver. A received Response message not matching an outstanding Request message waiting for a reply should be discarded.\nThe PFCP entity should inform the PFCP application layer when detecting an unsuccessful transfer of a Request message to enable the controlling upper entity to take any appropriate measure.",
      "chunk_type": "requirement",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.244_6.5",
      "section_id": "6.5",
      "section_title": "PFCP messages bundling",
      "content": "PFCP messages bundling is an optional procedure that may be supported by the CP function and the UP function.\nPFCP messages bundling may be used if both the CP function and the UP function have indicated support of the corresponding feature (see clauses 8.2.25 and 8.2.58) during the PFCP Association Setup or Update procedure. If so, the following requirements shall apply.\nSeveral PFCP session related requests and/or responses messages, related to the same PFCP session or to different PFCP sessions handled by the same peer PFCP entity (i.e. with the peer's F-SEID having the same IP address, or with the same peer's IP address for PFCP Session Establishment Requests), may be bundled together in a single UDP/IP packet as specified in clause 7.2.1A, when being sent to that peer PFCP entity. PFCP messages may be bundled towards a PFCP entity of a UP function or of a CP function, independently.\nNOTE 1:\tIf the CP function bundles few PFCP session related requests in one UDP/IP packet it sends to a UP function, the UP function can return responses in separate UDP/IP packets or it can bundle some of the responses together with other PFCP session related messages.\nNOTE 2:\tBundling PFCP messages in a single UDP/IP packet enable to enhance performance and scalability (reduced CPU and memory cost thanks to reducing the number of packets to be packetized, exchanged and processed over N4).\nPFCP session related messages handled by different peer PFCP entities (i.e. with the peer's F-SEID having different IP addresses) shall not be bundled together. PFCP node related messages shall not be bundled either.\nThe procedures specified in the rest of this specification shall apply for each PFCP message that is bundled in a UDP/IP packet, as if the PFCP message was sent in its own individual UDP/IP packet, i.e. PFCP messages bundling shall not incur any change to the PFCP protocol other than what is described in this clause.\nNOTE 3:\tEach PFCP message bundled in a single UDP/IP packet has its own sequence number. Besides, if a UDP/IP packet carrying bundled PFCP messages is lost, retransmitted PFCP messages do not need to be bundled in the same manner as when sent originally.",
      "chunk_type": "general",
      "cross_references": [
        "clause_7.2.1"
      ]
    },
    {
      "chunk_id": "ts_29.244_7.1",
      "section_id": "7.1",
      "section_title": "Transmission Order and Bit Definitions",
      "content": "PFCP messages shall be transmitted in network octet order starting with octet 1 with the most significant bit sent first.\nThe most significant bit of an octet in a PFCP message is bit 8. If a field in a PFCP message spans over several octets, the most significant bit is bit 8 of the octet with the lowest number, unless specified otherwise.",
      "chunk_type": "definition",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.244_7.2.1",
      "section_id": "7.2.1",
      "section_title": "General",
      "content": "The format of a PFCP message is depicted in Figure 7.2.1-1.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to m\nPFCP message header\nm+1 to n\nZero or more Information Element(s)\nFigure 7.2.1-1: PFCP Message Format\nA PFCP message shall contain the PFCP message header and may contain subsequent information element(s) dependent on the type of message.\n7.2.1A\tPFCP messages bundled in one UDP/IP packet\nWhen applying PFCP messages bundling (see clause 6.5), PFCP messages shall be bundled in one UDP/IP packet as depicted in Figure 7.2.1A-1.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to m\nPFCP message 1 header\nm+1 to n\nZero or more Information Element(s)\nn+1 to p\nPFCP message 2 header\np+1 to q\nZero or more Information Element(s)\n…\n…\n…\n…\nr to s\nPFCP message N header\ns+1 to u\nZero or more Information Element(s)\nFigure 7.2.1A-1: PFCP messages bundled in one UDP/IP packet\nEach bundled PFCP message shall contain its PFCP message header and may contain subsequent information element(s) dependent on the type of message.\nThe FO\" (Follow On) flag in the PFCP message header of each PFCP message bundled in the UDP/IP packet, except the last PFCP message, shall be set to \"1\" to indicate that another PFCP message follows in the UDP/IP packet. See clause 7.2.2.",
      "chunk_type": "definition",
      "cross_references": [
        "clause_6.5",
        "clause_7.2.2",
        "figure_7.2.1-1",
        "figure_7.2.1"
      ]
    },
    {
      "chunk_id": "ts_29.244_7.2.2.1",
      "section_id": "7.2.2.1",
      "section_title": "General Format",
      "content": "PFCP messages use a variable length header. The message header length shall be a multiple of 4 octets. Figure 7.2.2.1-1 illustrates the format of the PFCP Header.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1\nVersion\nSpare\nSpare\nFO\nMP\nS\n2\nMessage Type\n3\nMessage Length (1st Octet)\n4\nMessage Length (2nd Octet)\nm to k(m+7)\nIf S flag is set to \"1\", then SEID shall be placed into octets 5-12. Otherwise, SEID field is not present at all.\nn to (n+2)\nSequence Number\n(n+3)\nSpare\nFigure 7.2.2.1-1: General format of PFCP Header\nWhere:\n-\tif S = 0, SEID field is not present, k = 0, m = 0 and n = 5;\n-\tif S = 1, SEID field is present, k = 1, m = 5 and n = 13.\nThe usage of the PFCP header is defined in clause 7.2.2.4.\nOctet 1 bits shall be encoded as follows:\n-\tBit 1 represents the SEID flag (T).\n-\tBit 2 represents the \"MP\" flag (see clause 7.2.2.4.1).\n-\tBit 3 represents the \"FO\" flag (see clause 7.2.2.4.1).\n-\tBit 4 to 5 are spare, the sender shall set them to \"0\" and the receiving entity shall ignore them.\n-\tBits 6-8 represent the Version field.",
      "chunk_type": "definition",
      "cross_references": [
        "clause_7.2.2.4",
        "clause_7.2.2.4.1",
        "figure_7.2.2.1-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_7.2.2.2",
      "section_id": "7.2.2.2",
      "section_title": "PFCP Header for Node Related Messages",
      "content": "The PFCP message header for the node related messages shall not contain the SEID field, but shall contain the Sequence Number field, followed by one spare octet as depicted in figure 7.2.2.2-1. The spare bits shall be set to zero by the sender and ignored by the receiver. For the Version Not Supported Response message, the Sequence Number may be set to any number and shall be ignored by the receiver.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1\nVersion\nSpare\nSpare\nFO=0\nMP=0\nS=0\n2\nMessage Type\n3\nMessage Length (1st Octet)\n4\nMessage Length (2nd Octet)\n5\nSequence Number (1st Octet)\n6\nSequence Number (2nd Octet)\n7\nSequence Number (3rd Octet)\n8\nSpare\nFigure 7.2.2.2-1: PFCP Message Header for node related messages",
      "chunk_type": "requirement",
      "cross_references": [
        "figure_7.2.2.2-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_7.2.2.3",
      "section_id": "7.2.2.3",
      "section_title": "PFCP Header for Session Related Messages",
      "content": "The PFCP message header, for session related messages, shall contain the SEID and Sequence Number fields followed by one spare octet. The PFCP header is depicted in figure 7.2.2.3-1. The spare bits shall be set to zero by the sender and ignored by the receiver.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1\nVersion\nSpare\nSpare\nFO\nMP\nS=1\n2\nMessage Type\n3\nMessage Length (1st Octet)\n4\nMessage Length (2nd Octet)\n5\nSession Endpoint Identifier (1st Octet)\n6\nSession Endpoint Identifier (2nd Octet)\n7\nSession Endpoint Identifier (3rd Octet)\n8\nSession Endpoint Identifier (4th Octet)\n9\nSession Endpoint Identifier (5th Octet)\n10\nSession Endpoint Identifier (6th Octet)\n11\nSession Endpoint Identifier (7th Octet)\n12\nSession Endpoint Identifier (8th Octet)\n13\nSequence Number (1st Octet)\n14\nSequence Number (2nd Octet)\n15\nSequence Number (3rd Octet)\n16\nMessage Priority\nSpare\nFigure 7.2.2.3-1: PFCP message Header for session related messages",
      "chunk_type": "requirement",
      "cross_references": [
        "figure_7.2.2.3-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_7.2.2.4.1",
      "section_id": "7.2.2.4.1",
      "section_title": "General",
      "content": "The format of the PFCP header is specified in clause 7.2.2.\nThe usage of the PFCP header shall be as defined below.\nThe first octet of the header shall be used is the following way:\n-\tBit 1 represents the \"S\" flag, which indicates if SEID field is present in the PFCP header or not. If the \"S\" flag is set to \"0\", then the SEID field shall not be present in the PFCP header. If the \"S\" flag is set to \"1\", then the SEID field shall immediately follow the Length field, in octets 5 to 12. Apart from the node related messages, in all PFCP messages the value of the \"S\" flag shall be set to \"1\".\n-\tBit 2 represents the \"MP\" flag. If the \"MP\" flag is set to \"1\", then bits 8 to 5 of octet 16 shall indicate the relative priority of the PFCP message. It shall be encoded as the binary value of the Message Priority and it may take any value between 0 and 15, where 0 corresponds to the highest priority and 15 the lowest priority.\n-\tBit 3 represents the \"FO\" (Follow On) flag. If the \"FO\" flag is set to \"1\", then another PFCP message follows in the UDP/IP packet (see clauses 6.5 and 7.2.1A).\n-\tBit 4 is a spare bit. The sending entity shall set it to \"0\" and the receiving entity shall ignore it.\n-\tBit 5 is a spare bit. The sending entity shall set it to \"0\" and the receiving entity shall ignore it.\n-\tBits 6 to 8, which represent the PFCP version, shall be set to decimal 1 (\"001\").\nThe usage of the fields in octets 2 - n of the header shall be as specified below.\n-\tOctet 2 represents the Message type field, which shall be set to the unique value for each type of control plane message. Message type values are specified in Table 7.3-1 \"Message types\".\n-\tOctets 3 to 4 represent the Message Length field. This field shall indicate the length of the message in octets excluding the mandatory part of the PFCP header (the first 4 octets). The SEID (if present) and the Sequence Number shall be included in the length count. The format of the Length field of information elements is specified in clause 8.2 \"Information Element Format\".\n-\tWhen S=1, Octets 5 to 12 represent the Session Endpoint Identifier (SEID) field. This field shall unambiguously identify a session endpoint in the receiving Packet Forward Control entity. The Session Endpoint Identifier is set by the sending entity in the PFCP header of all control plane messages to the SEID value provided by the corresponding receiving entity (CP or UP function). If a peer's SEID is not available the SEID field shall be present in a PFCP header, but its value shall be set to \"0\", \"Conditions for sending SEID=0 in PFCP header\".\nNOTE:\tThe SEID in the PFCP header of a message is set to the SEID value provided by the corresponding receiving entity regardless of whether the source IP address of the request message and the IP Destination Address provided by the receiving entity for subsequent request messages are the same or not.\n-\tOctets 13 to 15 represent PFCP Sequence Number field.",
      "chunk_type": "definition",
      "cross_references": [
        "clause_7.2.2",
        "clause_8.2",
        "table_7.3-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_7.2.2.4.2",
      "section_id": "7.2.2.4.2",
      "section_title": "Conditions for Sending SEID=0 in PFCP Header",
      "content": "If a peer's SEID is not available, the SEID field shall still be present in the header and its value shall be set to \"0\" in the following messages:\n-\tPFCP Session Establishment Request message on Sxa/Sxb/Sxc/N4;\n-\tIf a node receives a message for which it has no session, i.e. if SEID in the PFCP header is not known, it shall respond with \"Session context not found\" cause in the corresponding response message to the sender, the SEID used in the PFCP header in the response message shall be then set to \"0\";\n-\tIf a node receives a request message containing protocol error, e.g. Mandatory IE missing, which requires the receiver to reject the message as specified in clause 7.6, it shall reject the request message. For the response message, the node should look up the remote peer's SEID and accordingly set SEID in the PFCP header and the message cause code. As an implementation option, the node may not look up the remote peer's SEID and set the PFCP header SEID to \"0\" in the response message. However in this case, the cause value shall not be set to \"Session not found\".\n-\tWhen the UP function sends PFCP Session Report Request message over N4 towards another SMF or another PFCP entity in the SMF as specified in clause 5.22.2 and clause 5.22.3.",
      "chunk_type": "requirement",
      "cross_references": [
        "clause_7.6",
        "clause_5.22.2",
        "clause_5.22.3"
      ]
    },
    {
      "chunk_id": "ts_29.244_7.2.3.1",
      "section_id": "7.2.3.1",
      "section_title": "General",
      "content": "The format of PFCP Information Elements are defined in clause 8.2.",
      "chunk_type": "definition",
      "cross_references": [
        "clause_8.2"
      ]
    },
    {
      "chunk_id": "ts_29.244_7.2.3.2",
      "section_id": "7.2.3.2",
      "section_title": "Presence Requirements of Information Elements",
      "content": "IEs within PFCP messages shall be specified with one of the following presence requirement:\n-\tMandatory: this means that:\n- \tthe IE shall be included by the sending entity;\n-\tthe receiver diagnoses a \"Mandatory IE missing\" error when detecting that the IE is not present. If a mandatory IE is missing, then the receiver shall abort the procedure. A response including a \"Mandatory IE missing\" cause, shall include the type of the missing IE.\n-\tConditional: this means that:\n-\tthe IE shall be included by sending entity if the conditions specified are met;\n-\tthe receiver shall check the conditions as specified in the corresponding message type description, based on the parameter combination in the message and/or on the state of the receiving node, to infer if a conditional IE shall be expected. Only if a receiver has sufficient information, if a conditional IE, which is necessary for the receiving entity to complete the procedure, is missing, then the receiver shall abort the procedure. A response including a \"Conditional IE missing\" cause shall include the type of the missing IE.-\tConditional-Optional: this means that:\n-\tthe IE shall be included by a sending entity complying with the version of the specification, if the conditions specified in the relevant protocol specification are met. An entity, which is at an earlier version of the protocol and therefore is not up-to-date, cannot send this IE;\n-\tthe receiver need not check the presence of the IE in the message. If the receiver checks the presence of the Conditional-Optional IE, then the IE's absence shall not trigger any of the error handling procedures. The handling of an absence or erroneous such IEs shall be treated as Optional IEs as specified in clause 7.6.\n-\tOptional: this means that:\n-\tthe IE shall be included as a service option. Therefore, the IE may be included or not in a message. The handling of an absent optional IE, or an erroneous optional IE is specified in clause 7.6.\nFor conditional IEs, the clause describing the PFCP message explicitly defines the conditions under which the inclusion of each IE becomes mandatory or optional for that particular message. These conditions shall be defined so that the presence of a conditional IE only becomes mandatory if it is critical for the receiving entity. The definition might reference other protocol specifications for final terms used as part of the condition.\nFor grouped IEs, the presence requirement of the embedded IE shall follow the rules:\n-\tIf the grouped IE is Mandatory within a given message: the presence requirements of individual embedded IEs are as stated within the Mandatory grouped IE for the given message;\n-\tif the grouped IE is Conditional within a given message: if the embedded IE in the grouped IE is Mandatory or Conditional, this embedded IE is viewed as Conditional IE by the receiver. If the embedded IE in the grouped IE is Conditional-Optional, this embedded IE is viewed as Optional IE by the receiver. If the embedded IE in the grouped IE is Optional, this embedded IE is viewed as Optional IE by the receiver;\n-\tif the grouped IE is Conditional-Optional within a given message: if the embedded IE in the grouped IE is Mandatory or Conditional, this embedded IE is viewed as Conditional-Optional IE by the receiver. If the embedded IE in the grouped IE is Conditional-Optional, this embedded IE is viewed as Optional IE by the receiver. If the embedded IE in the grouped IE is Optional, this embedded IE is viewed as Optional IE by the receiver;\n-\tif the grouped IE is Optional within a given message: all embedded IEs in the grouped IE are viewed as Optional IEs by the receiver.\nIn all of the above cases, appropriate error handling as described in clause 7.6 shall be applied for protocol errors of the embedded IEs.\nOnly the Cause IE at message level shall be included in the response if the Cause contains a value that indicates that the request is not accepted, regardless of whether there are other mandatory or conditional IEs defined for a given response message. The following are exceptions:\n-\tthe Node ID and Offending IE shall be included as per the requirements specified for the corresponding response message;\n-\tthe Load Control Information, Overload Control Information and the Failed Rule ID IEs may be included in a PFCP session related message.\nIf the Cause IE at Grouped IE level contains a value that indicates that the Grouped IE is not handled correctly, the other IEs in this Grouped IE, other than the Cause IE, may not be included.",
      "chunk_type": "requirement",
      "cross_references": [
        "clause_7.6"
      ]
    },
    {
      "chunk_id": "ts_29.244_7.2.3.3",
      "section_id": "7.2.3.3",
      "section_title": "Grouped Information Elements",
      "content": "A Grouped IE is an IE which may contain other IEs.\nGrouped IEs have a length value in the TLV encoding, which includes the added length of all the embedded IEs. Overall coding of a grouped IE with 4 octets long IE header is defined in clause 8.2. Each IE within a grouped IE also shall also contain 4 octets long IE header.\nGrouped IEs are not marked by any flag or limited to a specific range of IE type values. The clause describing an IE in this specification shall explicitly state if it is a Grouped IE.\nNOTE:\tEach entry into each Grouped IE creates a new scope level. Exit from the grouped IE closes the scope level. The PFCP message level is the top most scope.\nIf more than one grouped IEs of the same type, but for a different purpose are sent within the same message level, these IEs shall have different IE types.\nIf more than one grouped IEs of the same type and for the same purpose are sent within the same message level, these IEs shall have exactly the same IE type to represent a list.\nAssigning the same IE type to grouped IEs which don't have the same content is not recommended, even if these grouped IEs are in different message levels.",
      "chunk_type": "general",
      "cross_references": [
        "clause_8.2"
      ]
    },
    {
      "chunk_id": "ts_29.244_7.2.3.4",
      "section_id": "7.2.3.4",
      "section_title": "Information Element Type",
      "content": "An IE in a PFCP message or Grouped IE is identified by its IE Type and described by a specific row in the corresponding tables in clause 7.\nIf several IEs with the same Type are included in a PFCP message or Grouped IE, they represent a list for the corresponding IE name.\nAn IE Type value uniquely identifies a specific IE.\nOne IE type value is specified for Vendor Specific IEs.",
      "chunk_type": "general",
      "cross_references": [
        "clause_7"
      ]
    },
    {
      "chunk_id": "ts_29.244_7.3",
      "section_id": "7.3",
      "section_title": "Message Types",
      "content": "The PFCP message types to be used over the Sxa, Sxb, Sxc, N4 and N4mb reference points are defined in Table 7.3-1.\nTable 7.3-1: Message Types\nMessage Type value (Decimal)\nMessage\nApplicability\nSxa\nSxb\nSxc\nN4\nN4mb\n0\nReserved\nPFCP Node related messages\n1\nPFCP Heartbeat Request\nX\nX\nX\nX\nX\n2\nPFCP Heartbeat Response\nX\nX\nX\nX\nX\n3\nPFCP PFD Management Request\n-\nX\nX\nX\n-\n4\nPFCP PFD Management Response\n-\nX\nX\nX\n-\n5\nPFCP Association Setup Request\nX\nX\nX\nX\nX\n6\nPFCP Association Setup Response\nX\nX\nX\nX\nX\n7\nPFCP Association Update Request\nX\nX\nX\nX\nX\n8\nPFCP Association Update Response\nX\nX\nX\nX\nX\n9\nPFCP Association Release Request\nX\nX\nX\nX\nX\n10\nPFCP Association Release Response\nX\nX\nX\nX\nX\n11\nPFCP Version Not Supported Response\nX\nX\nX\nX\nX\n12\nPFCP Node Report Request\nX\nX\nX\nX\nX\n13\nPFCP Node Report Response\nX\nX\nX\nX\nX\n14\nPFCP Session Set Deletion Request\nX\nX\n-\nX\n-\n15\nPFCP Session Set Deletion Response\nX\nX\n-\nX\n-\n16\nPFCP Session Set Modification Request\n-\nX\n-\nX\n-\n17\nPFCP Session Set Modifcation Response\n-\nX\n-\nX\n-\n18 to 49\nFor future use\nPFCP Session related messages\n50\nPFCP Session Establishment Request\nX\nX\nX\nX\nX\n51\nPFCP Session Establishment Response\nX\nX\nX\nX\nX\n52\nPFCP Session Modification Request\nX\nX\nX\nX\nX\n53\nPFCP Session Modification Response\nX\nX\nX\nX\nX\n54\nPFCP Session Deletion Request\nX\nX\nX\nX\nX\n55\nPFCP Session Deletion Response\nX\nX\nX\nX\nX\n56\nPFCP Session Report Request\nX\nX\nX\nX\nX\n57\nPFCP Session Report Response\nX\nX\nX\nX\nX\n58 to 99\nFor future use\nOther messages\n100 to 255\nFor future use",
      "chunk_type": "general",
      "cross_references": [
        "table_7.3-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_7.4.1",
      "section_id": "7.4.1",
      "section_title": "General",
      "content": "This clause specifies either node level or PFCP entity level messages used over the Sxa, Sxb, Sxc, N4 and N4mb reference points (see clause 6.2).",
      "chunk_type": "definition",
      "cross_references": [
        "clause_6.2"
      ]
    },
    {
      "chunk_id": "ts_29.244_7.4.2.1",
      "section_id": "7.4.2.1",
      "section_title": "Heartbeat Request",
      "content": "Table 7.4.2.1-1: Information Elements in Heartbeat Request\nInformation\nelements\nP\nCondition / Comment\nAppl.\nIE Type\nSxa\nSxb\nSxc\nN4\nN4mb\nRecovery Time Stamp\nM\nThis IE shall contain the time stamp when the PFCP entity was started see clause 19A of 3GPP TS 23.007 [24].\nX\nX\nX\nX\nX\nRecovery Time Stamp\nSource IP Address\nO\nThis IE may be included when a Network Address Translation device is deployed in the network. See clause 19a in 3GPP TS 23.007 [24].\nX\nX\nX\nX\nX\nSource IP Address",
      "chunk_type": "requirement",
      "cross_references": [
        "ts_23.007_clause_19",
        "table_7.4.2.1-1",
        "ts_23.007"
      ]
    },
    {
      "chunk_id": "ts_29.244_7.4.2.2",
      "section_id": "7.4.2.2",
      "section_title": "Heartbeat Response",
      "content": "Table 7.4.2.2-1: Information Elements in Heartbeat Response\nInformation\nelements\nP\nCondition / Comment\nAppl.\nIE Type\nSxa\nSxb\nSxc\nN4\nN4mb\nRecovery Time Stamp\nM\nThis IE shall contain the time stamp when the PFCP entity was started see clause 19A of 3GPP TS 23.007 [24].\nX\nX\nX\nX\nX\nRecovery Time Stamp",
      "chunk_type": "requirement",
      "cross_references": [
        "ts_23.007_clause_19",
        "table_7.4.2.2-1",
        "ts_23.007"
      ]
    },
    {
      "chunk_id": "ts_29.244_7.4.3.1",
      "section_id": "7.4.3.1",
      "section_title": "PFCP PFD Management Request",
      "content": "Table 7.4.3.1-1: Information Elements in PFCP PFD Management Request\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\nSxa\nSxb\nSxc\nN4\nN4mb\nApplication ID's PFDs\nC\nThis IE shall contain an Application Identifier and the associated PFDs to be provisioned in the UP function.\nSeveral IEs with the same IE type may be present to provision PFDs for multiple Application IDs.\nThe UP function shall delete all the PFDs received and stored earlier for all the Application IDs if this IE is absent in the message.\n-\nX\nX\nX\n-\nApplication ID's PFDs\nNode ID\nO\nWhen present, this IE shall contain the unique identifier of the sending Node.\n-\nX\nX\nX\n-\nNode ID\nTable 7.4.3.1-2: Application ID's PFDs\nOctet 1 and 2\nApplication ID's PFDs IE Type = 58 (decimal)\nOctets 3 and 4\nLength = n\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\nSxa\nSxb\nSxc\nN4\nN4mb\nApplication ID\nM\nThis IE shall identify the Application ID for which PFDs shall be provisioned in the UP function.\n-\nX\nX\nX\n-\nApplication ID\nPFD context\nC\nThis IE shall be present if the PFD needs to be provisioned in the UP function.\nWhen present, it shall describe the PFD to be provisioned in the UP function.\nSeveral IEs with the same IE type may be present to provision multiple PFDs for this Application ID.\nWhen this IE is absent, the UP function shall delete all the PFDs received and stored earlier in the UP function for this Application ID.\n-\nX\nX\nX\n-\nPFD context\nTable 7.4.3.1-3: PFD context\nOctet 1 and 2\nPFD context IE Type = 59 (decimal)\nOctets 3 and 4\nLength = n\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\nSxa\nSxb\nSxc\nN4\nN4mb\nPFD Contents\nM\nThis IE shall describe the PFD to be provisioned in the UP function. Several IEs with the same IE type may be present to provision multiple contents for this PFD. (NOTE 1)\n-\nX\nX\nX\n-\nPFD Contents\nNOTE 1\tThe CP function shall only provision a PFD Contents including a property with multiple values if the UP function supports PFDE feature. See clauses 8.2.25 and 8.2.39.",
      "chunk_type": "requirement",
      "cross_references": [
        "table_7.4.3.1-1",
        "table_7.4.3.1-2",
        "table_7.4.3.1-3"
      ]
    },
    {
      "chunk_id": "ts_29.244_7.4.3.2",
      "section_id": "7.4.3.2",
      "section_title": "PFCP PFD Management Response",
      "content": "Table 7.4.3.2-1: Information Elements in PFCP PFD Management Response\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\nSxa\nSxb\nSxc\nN4\nN4mb\nCause\nM\nThis IE shall indicate the acceptance or the rejection of the corresponding request message.\n-\nX\nX\nX\n-\nCause\nOffending IE\nC\nThis IE shall be included if the rejection is due to a conditional or mandatory IE missing or faulty.\n-\nX\nX\nX\n-\nOffending IE\nNode ID\nO\nWhen present, this IE shall contain the unique identifier of the sending Node.\n-\nX\nX\nX\n-\nNode ID",
      "chunk_type": "requirement",
      "cross_references": [
        "table_7.4.3.2-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_7.4.4.1.1",
      "section_id": "7.4.4.1.1",
      "section_title": "General",
      "content": "Table 7.4.4.1-1: Information Elements in a PFCP Association Setup Request\nInformation\nelements\nP\nCondition / Comment\nAppl.\nIE Type\nSxa\nSxb\nSxc\nN4\nN4mb\nNode ID\nM\nThis IE shall contain the unique identifier of the sending Node.\nX\nX\nX\nX\nX\nNode ID\nRecovery Time Stamp\nM\nThis IE shall contain the time stamp when the CP or UP function was started, see clause 19A of 3GPP TS 23.007 [24]. (NOTE)\nX\nX\nX\nX\nX\nRecovery Time Stamp\nUP Function Features\nC\nThis IE shall be present if the UP function sends this message and the UP function supports at least one UP feature defined in this IE.\nWhen present, this IE shall indicate the features the UP function supports.\nX\nX\nX\nX\nX\nUP Function Features\nCP Function Features\nC\nThis IE shall be present if the CP function sends this message and the CP function supports at least one CP feature defined in this IE.\nWhen present, this IE shall indicate the features the CP function supports.\nX\nX\nX\nX\nX\nCP Function Features\nAlternative SMF IP Address\nO\nThis IE may be present if the (MB-)SMF advertises the support of the SSET and/or MPAS feature in the CP Function Features IE (see clause 8.2.58).\nWhen present, this IE shall contain an IPv4 and/or IPv6 address of an alternative (MB-)SMF or an alternative PFCP entity in the same (MB-)SMF when SSET feature is used, or an alternative PFCP entity in the same (MB-)SMF when MPAS feature is used.\nSeveral IEs with the same IE type may be present to represent multiple alternative (MB-)SMF IP addresses.\n-\n-\n-\nX\nX\nAlternative SMF IP Address\nSMF Set ID\nC\nThis IE shall be present if the (MB-)SMF advertises the support of the MPAS feature in the CP Function Features IE (see clause 5.22.3).\nWhen present, this IE shall contain an FQDN representing the (MB-)SMF set to which the (MB-)SMF belongs.\n-\n-\n-\nX\nX\nSMF Set ID\nPFCP Session Retention Information\nO\nThis IE may be present to request the UP function to keep all or part of the existing PFCP sessions upon receipt of a PFCP association setup request with a Node ID for which a PFCP association was already established. See clause 6.2.6.2.1.\nX\nX\nX\nX\nX\nPFCP Session Retention Information\nUE IP address Pool Information\nO\nThis IE may be present when the UP function sends this message, if UE IP Address Pools are configured in the UP function.\nSeveral IE with the same IE type may be present to represent multiple UE IP address Pool Information.\n-\nX\n-\nX\n-\nUE IP address Pool Information\nGTP-U Path QoS Control Information\nC\nThis IE may be present, if the CP function sends this message, to request the UPF to monitor the QoS on GTP-U paths (see clause 5.24.5).\nSeveral IEs with the same IE type may be present to represent multiple GTP-U paths (with different parameters) to monitor.\n-\n-\n-\nX\n-\nGTP-U Path QoS Control Information\nClock Drift Control Information\nO\nThis IE may be present, if the CP function sends this message, to request the UPF to report clock drift between the external time and 5GS time for working domains (see clause 5.26.4).\nSeveral IEs with the same IE type may be present for multiple Time domains (with different parameters).\n-\n-\n-\nX\n-\nClock Drift Control Information\nUPF Instance ID\nO\nThis IE may be present if the UP function is a 5G UP function and if available, and if the message is sent by the UP function.\n-\n-\n-\nX\nX\nNF Instance ID\nPFCPASReq-Flags\nO\nThis IE shall be included if at least one of the flags is set to \"1\":\n-\tUUPSI (UPF configured for IPUPS): when the message is sent by a UPF, the UP function shall set this flag to \"1\" if the UPF is configured to be used for IPUPS. See clause 5.27.\n-\n-\n-\nX\n-\nPFCPASReq-Flags\nNOTE:\tA PFCP function shall ignore the Recovery Timestamp received in the PFCP Association Setup Request message.\nTable 7.4.4.1-2: PFCP Session Retention Information IE within PFCP Association Setup Request\nOctet 1 and 2\nPFCP Session Retention Information IE Type = 183 (decimal)\nOctets 3 and 4\nLength = n\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\nSxa\nSxb\nSxc\nN4\nN4mb\nCP PFCP Entity IP Address\nO\nThis IE may be present to indicate the IP address of a CP PFCP entity for which the UP function shall retain the existing PFCP sessions, upon receipt of a PFCP association setup request with a Node ID for which a PFCP association was already established. See clause 6.2.6.2.1\nSeveral IEs with the same IE type may be present to represent multiple CP PFCP entities for which PFCP sessions shall be retained.\nIf no CP PFCP Entity IP Address IE is present in the PFCP Session Retention Information IE, all existing PFCP sessions shall be kept upon receipt of a PFCP association setup request with a Node ID for which a PFCP association was already established.\nX\nX\nX\nX\nX\nCP PFCP Entity IP Address\nTable 7.4.4.1-3: UE IP address Pool Information IE within PFCP Association Setup Request\nOctet 1 and 2\nUE IP address Pool Information IE Type = 233 (decimal)\nOctets 3 and 4\nLength = n\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\nSxa\nSxb\nSxc\nN4\nN4mb\nUE IP address Pool Identity\nM\nWhen present, this IE shall contain an UE IP address Pool Identity\nSeveral IEs with the same IE type may be present to represent multiple UE IP address Pool Identities.\n-\nX\n-\nX\n-\nUE IP address Pool Identity\nNetwork Instance\nO\nThe IE may be present to indicate for which DNN/APN the UE IP Address Pool Identifies are configured.\n-\nX\n-\nX\n-\nNetwork Instance\nS-NSSAI\nO\nThe IE may be present to indicate for which S-NSSAI the UE IP Address Pool Identities are configured.\nSeveral IEs with the same IE type may be present to represent multiple S-NSSAIs.\n-\n-\n-\nX\n-\nS-NSSAI\nIP version\nO\nThe IE may be present to indicate for which IP version the UE IP Address Pool Identities are configured.\n-\n-\n-\nX\n-\nIP version",
      "chunk_type": "definition",
      "cross_references": [
        "ts_23.007_clause_19",
        "clause_8.2.58",
        "clause_5.22.3",
        "clause_6.2.6.2.1",
        "clause_5.24.5",
        "clause_5.26.4",
        "clause_5.27",
        "table_7.4.4.1-1",
        "table_7.4.4.1-2",
        "table_7.4.4.1-3",
        "ts_23.007"
      ]
    },
    {
      "chunk_id": "ts_29.244_7.4.4.1.2",
      "section_id": "7.4.4.1.2",
      "section_title": "Clock Drift Control Information IE within PFCP Association Setup Request",
      "content": "The Clock Drift Control Information grouped IE shall be encoded as shown in Table 7.4.4.1.2-1.\nTable 7.4.4.1.2-1: Clock Drift Control Information within PFCP Association Setup Request\nOctet 1 and 2\nClock Drift Control Information IE Type = 203 (decimal)\nOctets 3 and 4\nLength = n\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\nSxa\nSxb\nSxc\nN4\nN4mb\nRequested Clock Drift Information\nM\nThis IE shall indicate the requested clock drift information.\n-\n-\n-\nX\n-\nRequested Clock Drift Information\nTime Domain Number\nC\nWhen present, this IE shall identifiy the external time domain(s) for which clock drift information is requested.\nMore than one IE with this type may be included to represent multiple Time Domain Numbers.\nThis IE may be included if the Configured Time Domain IE is not included. (NOTE)\n-\n-\n-\nX\n-\nTime Domain Number\nConfigured Time Domain\nC\nWhen present with the CTDI (Configured Time Domain Indicator) flag set to \"1\", this IE indicates that the request targets the external time domain that is configured to the NW-TT(s) in the UPF.\nThis IE may be included if the Time Domain Number IE is not included. (NOTE)\n-\n-\n-\nX\n-\nConfigured Time Domain\nTime Offset Threshold\nC\nThis IE shall be present if Time Offset Reporting is requested.\nWhen present, it shall indicate the threshold to report the time offset, i.e. the offset shall be reported only when it exceeds the threshold compared to the previous report.\n-\n-\n-\nX\n-\nTime Offset Threshold\nCumulative rateRatio Threshold\nC\nThis IE shall be present if Cumulative RateRatio Reporting is requested.\nWhen present, it shall indicate the threshold to report the cumulative rateRatio, i.e. the cumative rateRatio shall be reported only when it exceeds the threshold compared to the previous report.\n-\n-\n-\nX\n-\nCumulative rateRatio Threshold\nNOTE:\tIf neither the Time Domain Number IE nor the Configured Time Domain IE is included, this indicates that the request targets all the external time domains the UPF is connected to.",
      "chunk_type": "requirement",
      "cross_references": [
        "table_7.4.4.1.2-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_7.4.4.1.3",
      "section_id": "7.4.4.1.3",
      "section_title": "GTP-U Path QoS Control Information IE within PFCP Association Setup Request",
      "content": "The GTP-U Path QoS Control Information grouped IE shall be encoded as shown in Table 7.4.4.1.3-1.\nTable 7.4.4.1.3-1: GTP-U Path QoS Control Information within PFCP Association Setup Request\nOctet 1 and 2\nGTP-U Path QoS Control Information IE Type = 239 (decimal)\nOctets 3 and 4\nLength = n\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\nSxa\nSxb\nSxc\nN4\nN4mb\nRemote GTP-U Peer\nC\nWhen present, this IE shall include the IP address of the remote GTP-U peer for which QoS information is to be reported, and the network instance used towards the remote GTP-U peer if available.\nSeveral IEs with the same IE type may be present to represent multiple remote GTP-U peers.\n(NOTE)\n-\n-\n-\nX\n-\nRemote GTP-U Peer\nGTP-U Path Interface Type\nC\nWhen present, this IE shall include the Interface Type of the GTP-U paths for which QoS information is to be reported.\n(NOTE)\n-\n-\n-\nX\n-\nGTP-U Path Interface Type\nQoS Report Trigger\nM\nThis IE shall indicate the trigger for reporting QoS information to the SMF.\n-\n-\n-\nX\n-\nQoS Report Trigger\nDSCP\nC\nThis IE shall be present, if available. When present, it shall contain the value of the DSCP in the TOS/Traffic Class field to measure the packet delay.\nSeveral IEs with the same IE type may be present to represent multiple DSCP values to use for QoS monitoring.\n-\n-\n-\nX\n-\nTransport Level Marking\nMeasurement Period\nC\nThis IE shall be present if the QoS Report Trigger indicates periodic reporting. When present, it shall contain the time period for the QoS reports towards the SMF.\n-\n-\n-\nX\n-\nMeasurement Period\nAverage Packet Delay Threshold\nC\nThis IE may be present if the QoS Report Trigger indicates reporting based on thresholds.\n-\n-\n-\nX\n-\nAverage Packet Delay\nMinimum Packet Delay Threshold\nC\nThis IE may be present if the QoS Report Trigger indicates reporting based on thresholds.\n-\n-\n-\nX\n-\nMinimum Packet Delay\nMaximum Packet Delay Threshold\nC\nThis IE may be present if the QoS Report Trigger indicates reporting based on thresholds.\n-\n-\n-\nX\n-\nMaximum Packet Delay\nMinimum Waiting Time\nC\nThis IE may be present if the QoS Report Trigger indicates reporting based on thresholds. When present, it shall contain the minimum waiting time between two consecutive reports for the same type of measurement and the same remote GTP-U peer.\n-\n-\n-\nX\n-\nTimer\nNOTE:\tAt least one Remote GTP-U Peer IE or GTP-U Path Interface Type IE shall be present.",
      "chunk_type": "requirement",
      "cross_references": [
        "table_7.4.4.1.3-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_7.4.4.2",
      "section_id": "7.4.4.2",
      "section_title": "PFCP Association Setup Response",
      "content": "Table 7.4.4.2-1: Information Elements in a PFCP Association Setup Response\nInformation\nelements\nP\nCondition / Comment\nAppl.\nIE Type\nSxa\nSxb\nSxc\nN4\nN4mb\nNode ID\nM\nThis IE shall contain the unique identifier of the sending Node.\nX\nX\nX\nX\nX\nNode ID\nCause\nM\nThis IE shall indicate the acceptance or the rejection of the corresponding request message.\nX\nX\nX\nX\nX\nCause\nRecovery Time Stamp\nM\nThis IE shall contain the time stamp when the CP or UP function was started, see clause 19A of 3GPP TS 23.007 [24]. (NOTE)\nX\nX\nX\nX\nX\nRecovery Time Stamp\nUP Function Features\nC\nThis IE shall be present if the UP function sends this message and the UP function supports at least one UP feature defined in this IE.\nWhen present, this IE shall indicate the features the UP function supports.\nX\nX\nX\nX\nX\nUP Function Features\nCP Function Features\nC\nThis IE shall be present if the CP function sends this message and the CP function supports at least one CP feature defined in this IE.\nWhen present, this IE indicates the features the CP function supports.\nX\nX\nX\nX\nX\nCP Function Features\nAlternative SMF IP Address\nO\nThis IE may be present if the (MB-)SMF advertises the support of the SSET and/or MPAS feature in the CP Function Features IE (see clause 8.2.58).\nWhen present, this IE shall contain an IPv4 and/or IPv6 address of an alternative (MB-)SMF or an alternative PFCP entity in the same (MB-)SMF when SSET feature is used, or an alternative PFCP entity in the same (MB-)SMF when MPAS feature is used.\nSeveral IEs with the same IE type may be present to represent multiple alternative (MB-)SMF IP addresses.\n-\n-\n-\nX\nX\nAlternative SMF IP Address\nSMF Set ID\nC\nThis IE shall be present if the CP function sends this message and (MB-)SMF advertises the support of the MPAS feature in the CP Function Features IE (see clause 5.22.3).\nWhen present, this IE shall contain an FQDN representing the (MB-)SMF set to which the (MB-)SMF belongs.\n-\n-\n-\nX\nX\nSMF Set ID\nPFCPASRsp-Flags\nO\nThis IE shall be included if at least one of the flags is set to \"1\":\n-\tPSREI (PFCP Session Retained Indication): the UP function shall set this flag to \"1\" if the PFCP Session Retention Information IE was received in the Request, an existing PFCP association was already established for the same Node ID and the requested PFCP sessions have been retained. See clause 6.2.6.2.2.\n-\tUUPSI (UPF configured for IPUPS): the UP function shall set this flag to \"1\" if the UPF is configured to be used for IPUPS. See clause 5.27.\nX\n-\nX\n-\nX\n-\nX\nX\nX\n-\nPFCPASRsp-Flags\nClock Drift Control Information\nC\nThis IE may be present, if the CP function sends this message, to request the UPF to report clock drift between the external time and 5GS time for external working domains (see clause 5.26.4).\nSeveral IEs with the same IE type may be present to represent multiple external time domains (with different parameters).\nSee Table 7.4.4.1.2-1.\n-\n-\n-\nX\n-\nClock Drift Control Information\nUE IP address Pool Information\nO\nThis IE may be present when the UP function sends this message, if UE IP Address Pools are configured in the UP function.\nSeveral IE with the same IE type may be present to represent multiple UE IP address Pool Information.\nThe IE shall be encoded as in Table 7.4.4.1-3.\n-\nX\n-\nX\n-\nUE IP address Pool Information\nGTP-U Path QoS Control Information\nC\nThis IE may be present, if the CP function sends this message, to request the UPF to monitor the QoS on GTP-U paths (see clause 5.24.5).\nSeveral IEs with the same IE type may be present to represent multiple GTP-U paths to monitor.\nSee Table 7.4.4.1.3-1.\n-\n-\n-\nX\n-\nGTP-U Path QoS Control Information\nUPF Instance ID\nO\nThis IE may be present if the UP function is a 5G UP function and if available, and if the message is sent by the UP function.\n-\n-\n-\nX\nX\nNF Instance ID\nNOTE:\tA PFCP function shall ignore the Recovery Timestamp received in PFCP Association Setup Response message.",
      "chunk_type": "requirement",
      "cross_references": [
        "ts_23.007_clause_19",
        "clause_8.2.58",
        "clause_5.22.3",
        "clause_6.2.6.2.2",
        "clause_5.27",
        "clause_5.26.4",
        "clause_5.24.5",
        "table_7.4.4.2-1",
        "table_7.4.4.1.2-1",
        "table_7.4.4.1-3",
        "table_7.4.4.1.3-1",
        "ts_23.007"
      ]
    },
    {
      "chunk_id": "ts_29.244_7.4.4.3",
      "section_id": "7.4.4.3",
      "section_title": "PFCP Association Update Request",
      "content": "Table 7.4.4.3-1: Information Elements in a PFCP Association Update Request\nInformation\nelements\nP\nCondition / Comment\nAppl.\nIE Type\nSxa\nSxb\nSxc\nN4\nN4mb\nNode ID\nM\nThis IE shall contain the unique identifier of the sending Node.\nX\nX\nX\nX\nX\nNode ID\nUP Function Features\nO\nIf present, this IE shall indicate the supported Features when the sending node is the UP function.\nX\nX\nX\nX\nX\nUP Function Features\nCP Function Features\nO\nIf present, this IE shall indicate the supported Features when the sending node is the CP function.\nX\nX\nX\nX\nX\nCP Function Features\nPFCP Association Release Request\nC\nThis IE shall be present if the UP function requests the CP function to release the PFCP association.\nX\nX\nX\nX\nX\nPFCP Association Release Request\nGraceful Release Period\nC\nThis IE shall be present if the UP function requests a graceful release of the PFCP association.\nX\nX\nX\nX\nX\nGraceful Release Period\nPFCPAUReq-Flags\nO\nThis IE shall be included if at least one of the flags is set to \"1\".\n-\tPARPS (PFCP Association Release Preparation Start): if both the CP function and UP function support the EPFAR feature, the CP or UP function may set this flag to \"1\" to indicate that the PFCP association is to be released and all non-zero usage reports for those PFCP Sessions affected by the release of the PFCP association shall be reported.\nX\nX\nX\nX\n-\nPFCPAUReq-Flags\nAlternative SMF IP Address\nO\nThis IE may be present if the (MB-)SMF advertises the support of the SSET and/or MPAS feature in the CP Function Features IE (see clause 8.2.58).\nWhen present, this IE shall contain an IPv4 and/or IPv6 address of an alternative (MB-)SMF or an alternative PFCP entity in the same (MB-)SMF when SSET feature is used, or an alternative PFCP entity in the same (MB-)SMF when MPAS feature is used.\nSeveral IEs with the same IE type may be present to represent multiple alternative (MB-)SMF IP addresses.\n-\n-\n-\nX\nX\nAlternative SMF IP Address\nSMF Set ID\nO\nThis IE may be present if the CP function sends this message and (MB-)SMF advertises the support of the MPAS feature in the CP Function Features IE (see clause 5.22.3), and there is a change in FQDN representing the (MB-)SMF set to which the (MB-)SMF belongs.\n-\n-\n-\nX\nX\nSMF Set ID\nClock Drift Control Information\nC\nThis IE shall be present if the Clock Drift Control Information needs to be modified (see clause 5.26.4).\nSeveral IEs with the same IE type may be present to represent TSN domains.\nWhen present, the UPF shall replace any Clock Drift control information received earlier with the new received information.\nA Clock Drift Control Information with a null length indicates that clock drift reporting shall be stopped.\nSee Table 7.4.4.1.2-1.\n-\n-\n-\nX\n-\nClock Drift Control Information\nUE IP address Pool Information\nO\nThis IE may be present when the UP function sends this message, if UE IP Address Pools are configured in the UP function.\nSeveral IE with the same IE type may be present to represent multiple UE IP address Pool Information.\nThe IE shall be encoded as in Table 7.4.4.1-3.\n-\nX\n-\nX\n-\nUE IP address Pool Information\nGTP-U Path QoS Control Information\nC\nThis IE shall be present if the GTP-U Path QoS Control Information needs to be modified (see clause 5.24.5).\nSeveral IEs with the same IE type may be present to represent multiple GTP-U paths to monitor.\nWhen present, the UPF shall replace any GTP-U path control information received earlier with the new received information.\nA GTP-U Path QoS Control Information with a null length indicates that QoS monitoring of GTP-U paths shall be stopped.\nSee Table 7.4.4.1.3-1.\n-\n-\n-\nX\n-\nGTP-U Path QoS Control Information\nUE IP Address Usage Information\nO\nThe UP function may include this IE if both UP and CP functions support the UE IP Address Usage Reporting feature.\nSee Table 7.4.4.3.1-1\nSeveral IEs with the same type may be present to represent UE IP Address Usage Information for different UE IP Address Pools and/or Network Instances.\nSee clause 5.21.3.\n-\nX\n-\nX\n-\nUE IP Address Usage Information",
      "chunk_type": "requirement",
      "cross_references": [
        "clause_8.2.58",
        "clause_5.22.3",
        "clause_5.26.4",
        "clause_5.24.5",
        "clause_5.21.3",
        "table_7.4.4.3-1",
        "table_7.4.4.1.2-1",
        "table_7.4.4.1-3",
        "table_7.4.4.1.3-1",
        "table_7.4.4.3.1-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_7.4.4.3.1",
      "section_id": "7.4.4.3.1",
      "section_title": "UE IP Address Usage Information IE within PFCP Association Update Request",
      "content": "The UE IP Address Usage Information grouped IE shall be encoded as shown in Figure 7.4.4.3.1-1.\nTable 7.4.4.3.1-1: UE IP Address Usage Information IE within PFCP Association Update Request\nOctet 1 and 2\nUE IP Address Usage Information IE Type = 267 (decimal)\nOctets 3 and 4\nLength = n\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\nSxa\nSxb\nSxc\nN4\nN4mb\nUE IP Address Usage Sequence Number\nM\nThis IE shall be used by the CP function to properly collate out-of-order UE IP Address Usage Information received for a given network instance and/or UE IP Address pool, e.g. due to PFCP retransmissions. This IE shall also be used by the receiver to determine whether the newly received UE IP Address Usage Information has changed compared to UE IP Address Usage Information previously received from the same node earlier.\n-\nX\n-\nX\n-\nSequence Number\nUE IP Address Usage Metric\nM\nThis IE shall represent the current ratio of occupied UE IP addresses in the UP function for the Network Instance indicated in the Network Instance IE, or for the Network Instance indicated in the Network Instance IE and the UE IP address Pool indicated by the UE IP Address Pool Id IE when this IE is present. The value shall be expressed as a percentage within the range of 0 to 100, where 0 means no or 0% usage and 100 means maximum or 100% usage reached (i.e. it is not desirable to receive further PFCP Session Establishment Requests).\n-\nX\n-\nX\n-\nMetric\nValidity Timer\nM\nThis IE shall represent the period of time during which the UE IP Address Usage Information shall be considered as valid.\n-\nX\n-\nX\n-\nValidity Timer\nNumber of UE IP Addresses\nM\nThis IE shall indicate the total number of UE IP addresses configured for the Network Instance or also for the IP address Pool, when this IE is present. (NOTE)\n-\nX\n-\nX\n-\nNumber of UE IP Addresses\nNetwork Instance\nM\nThis IE shall identify the associated Network instance.\n-\nX\n-\nX\n-\nNetwork Instance\nUE IP Address Pool Id\nO\nThis IE may be present if UE IP Addresses Pools are configured in the UPF.\nWhen present, this IE shall contain the identity of the associated UE IP address Pool.\n-\nX\n-\nX\n-\nUE IP address Pool Identity\nS-NSSAI\nO\nThis IE may be present if the feature \"Per slice UP resource management\" is supported by the UP Function.\nWhen present, it shall indicate the S-NSSAI for which the UE IP addresses usage information is reported.\n-\nX\n-\nX\n-\nS-NSSAI\nNOTE:\tWhen reporting the number of IPv6 UE Addresses for a specific Network Instance and/or IP address pool, the number of default /64 prefixes is reported by default, unless configured otherwise.",
      "chunk_type": "requirement",
      "cross_references": [
        "table_7.4.4.3.1-1",
        "figure_7.4.4.3.1-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_7.4.4.4",
      "section_id": "7.4.4.4",
      "section_title": "PFCP Association Update Response",
      "content": "Table 7.4.4.4-1: Information Elements in a PFCP Association Update Response\nInformation\nelements\nP\nCondition / Comment\nAppl.\nIE Type\nSxa\nSxb\nSxc\nN4\nN4mb\nNode ID\nM\nThis IE shall contain the unique identifier of the sending Node.\nX\nX\nX\nX\nX\nNode ID\nCause\nM\nThis IE shall indicate the acceptance or the rejection of the corresponding request message.\nX\nX\nX\nX\nX\nCause\nUP Function Features\nO\nIf present, this IE shall indicate the supported Features when the sending node is the UP function.\nX\nX\nX\nX\nX\nUP Function Features\nCP Function Features\nO\nIf present, this IE shall indicate the supported Features when the sending node is the CP function.\nX\nX\nX\nX\nX\nCP Function Features\nUE IP Address Usage Information\nO\nThe UP function may include if both UP and CP functions support the UE IP Address Usage Reporting feature.\nSee Table 7.4.4.3.1-1.\nSeveral IEs with the same type may be present to represent UE IP Address Usage Information for different UE IP Address Pools and/or Network Instances.\nSee clause 5.21.3.\n-\nX\n-\nX\n-\nUE IP Address Usage Information",
      "chunk_type": "requirement",
      "cross_references": [
        "clause_5.21.3",
        "table_7.4.4.4-1",
        "table_7.4.4.3.1-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_7.4.4.5",
      "section_id": "7.4.4.5",
      "section_title": "PFCP Association Release Request",
      "content": "Table 7.4.4.5-1: Information Elements in a PFCP Association Release Request\nInformation\nelements\nP\nCondition / Comment\nAppl.\nIE Type\nSxa\nSxb\nSxc\nN4\nN4mb\nNode ID\nM\nThis IE shall contain the unique identifier of the sending Node.\nX\nX\nX\nX\nX\nNode ID",
      "chunk_type": "requirement",
      "cross_references": [
        "table_7.4.4.5-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_7.4.4.6",
      "section_id": "7.4.4.6",
      "section_title": "PFCP Association Release Response",
      "content": "Table 7.4.4.6-1: Information Elements in a PFCP Association Release Response\nInformation\nelements\nP\nCondition / Comment\nAppl.\nIE Type\nSxa\nSxb\nSxc\nN4\nN4mb\nNode ID\nM\nThis IE shall contain the unique identifier of the sending Node.\nX\nX\nX\nX\nX\nNode ID\nCause\nM\nThis IE shall indicate the acceptance or the rejection of the corresponding request message.\nX\nX\nX\nX\nX\nCause",
      "chunk_type": "requirement",
      "cross_references": [
        "table_7.4.4.6-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_7.4.4.7",
      "section_id": "7.4.4.7",
      "section_title": "PFCP Version Not Supported Response",
      "content": "This message shall only contain the PFCP header. The PFCP protocol version in the PFCP header shall indicate the highest PFCP Version that the sending entity supports.\nNOTE:\tThe PFCP Version Not Supported Response message can be received by a PFCP entity when sending the very first message to a PFCP peer only supporting earlier version(s) of the protocol.",
      "chunk_type": "requirement",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.244_7.4.5.1.1",
      "section_id": "7.4.5.1.1",
      "section_title": "General",
      "content": "The PFCP Node Report Request shall be sent over the Sxa, Sxb, Sxc, N4 and N4mb interface by the UP function to report information to the CP function that is not specific to a PFCP session.\nTable 7.4.5.1.1-1: Information Elements in PFCP Node Report Request\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\nSxa\nSxb\nSxc\nN4\nN4mb\nNode ID\nM\nThis IE shall contain the unique identifier of the sending Node.\nX\nX\nX\nX\nX\nNode ID\nNode Report Type\nM\nThis IE shall indicate the type of the report.\nX\nX\nX\nX\nX\nNode Report Type\nVendor-Specific Node Report Type\nC\nThis IE shall be present if the Node Report Type IE indicates a Vendor-Specific Report. When present, this IE shall indicate the type of the Vendor-Specific Report.\nX\nX\nX\nX\nX\nVendor-Specific Node Report Type\nUser Plane Path Failure Report\nC\nThis IE shall be present if the Node Report Type indicates a User Plane Path Failure Report.\nX\nX\n-\nX\nX\nUser Plane Path Failure Report\nUser Plane Path Recovery Report\nC\nThis IE shall be present if the Node Report Type indicates a User Plane Path Recovery Report.\nX\nX\n-\nX\nX\nUser Plane Path Recovery Report\nClock Drift Report\nC\nThis IE shall be present if the Node Report Type indicates a Clock Drift Report.\nMore than one IE with this type may be included to send Clock Drift Reports for different Time Domain Numbers.\n-\n-\n-\nX\n-\nClock Drift Report\nGTP-U Path QoS Report\nC\nThis IE shall be present if the Node Report Type indicates a GTP-U Path QoS Report.\nMore than one IE with this type may be included to represent multiple remote GTP-U peers for which QoS information is reported.\n-\n-\n-\nX\n-\nGTP-U Path QoS Report\nPeer UP Restart Report\nC\nThis IE shall be present if the Node Report Type Indicates a Peer GTP-U entity has restarted as specified in clause 20.3.4a of 3GPP TS 23.007 [24] and in clause 5.5 of 3GPP TS 23.527 [40].\nX\nX\n-\nX\n-\nPeer UP Restart Report",
      "chunk_type": "definition",
      "cross_references": [
        "ts_23.007_clause_20.3.4",
        "ts_23.007_clause_5.5",
        "table_7.4.5.1.1-1",
        "ts_23.527_clause_5.5",
        "ts_23.007",
        "ts_23.527"
      ]
    },
    {
      "chunk_id": "ts_29.244_7.4.5.1.2",
      "section_id": "7.4.5.1.2",
      "section_title": "User Plane Path Failure Report IE within PFCP Node Report Request",
      "content": "Table 7.4.5.1.2-1: User Plane Path Failure Report IE within PFCP Node Report Request\nOctet 1 and 2\nUser Plane Path Failure Report IE Type = 102 (decimal)\nOctets 3 and 4\nLength = n\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\nSxa\nSxb\nSxc\nN4\nN4mb\nRemote GTP-U Peer\nM\nThis IE shall include the IP address of the remote GTP-U peer towards which a user plane path failure has been detected.\nMore than one IE with this type may be included to represent multiple remote GTP-U peers towards which a user plane path failure has been detected.\nX\nX\n-\nX\nX\nRemote GTP-U Peer",
      "chunk_type": "general",
      "cross_references": [
        "table_7.4.5.1.2-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_7.4.5.1.3",
      "section_id": "7.4.5.1.3",
      "section_title": "User Plane Path Recovery Report IE within PFCP Node Report Request",
      "content": "Table 7.4.5.1.3-1: User Plane Path Recovery Report IE within PFCP Node Report Request\nOctet 1 and 2\nUser Plane Path Recovery Report IE Type = 187 (decimal)\nOctets 3 and 4\nLength = n\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\nSxa\nSxb\nSxc\nN4\nN4mb\nRemote GTP-U Peer\nM\nThis IE shall include the IP address of the remote GTP-U peer towards which user plane path failure was reported and then the path has recovered within an operator configurable maximum path failure duration (see clause 20.3.4 in 3GPP TS 23.007 [24] and clause 5.4 in 3GPP TS 23.527 [40]).\nMore than one IE with this type may be included to represent multiple remote GTP-U peers towards which a user plane path has recovered.\nX\nX\n-\nX\nX\nRemote GTP-U Peer",
      "chunk_type": "general",
      "cross_references": [
        "ts_23.007_clause_20.3.4",
        "ts_23.007_clause_5.4",
        "table_7.4.5.1.3-1",
        "ts_23.007",
        "ts_23.527"
      ]
    },
    {
      "chunk_id": "ts_29.244_7.4.5.1.4",
      "section_id": "7.4.5.1.4",
      "section_title": "Clock Drift Report IE within PFCP Node Report Request",
      "content": "Table 7.4.5.1.4-1: Clock Drift Report IE within PFCP Node Report Request\nOctet 1 and 2\nClock Drift Report IE Type = 205 (decimal)\nOctets 3 and 4\nLength = n\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\nSxa\nSxb\nSxc\nN4\nN4mb\nTime Domain Number\nM\nThis IE shall identify the Time Domain Number for which measurements are reported.\n-\n-\n-\nX\n-\nTime Domain Number\nTime Offset Measurement\nO\nWhen present, this IE shall contain the time offset measurement.\n-\n-\n-\nX\n-\nTime Offset Measurement\nCumulative rateRatio Measurement\nO\nWhen present, this IE shall contain the cumulative rateRatio measurement.\n-\n-\n-\nX\n-\nCumulative rateRatio Measurement\nTime Stamp\nO\nWhen present, this IE shall provide the timestamp when the collection of the information in this report was generated.\n-\n-\n-\nX\n-\nTime Stamp\nNetwork Instance\nC\nThis IE shall be present, when available (NOTE).\n-\n-\n-\nX\n-\nNetwork Instance\nAPN/DNN\nC\nThis IE shall be present, when available (NOTE).\n-\n-\n-\nX\n-\nAPN/DNN\nS-NSSAI\nC\nThis IE shall be present, when available (NOTE).\n-\n-\n-\nX\n-\nS-NSSAI\nNOTE:\tThe UPF shall provide the Network Instance and DNN/S-NSSAI (if available) to the CP function, to enable SMF to associate the report with the corresponding PFCP sessions and NW-TT, when the UPF supports more than one NW-TT.",
      "chunk_type": "general",
      "cross_references": [
        "table_7.4.5.1.4-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_7.4.5.1.5",
      "section_id": "7.4.5.1.5",
      "section_title": "GTP-U Path QoS Report IE within PFCP Node Report Request",
      "content": "Table 7.4.5.1.5-1: GTP-U Path QoS Report IE within PFCP Node Report Request\nOctet 1 and 2\nGTP-U Path QoS Report IE Type = 239 (decimal)\nOctets 3 and 4\nLength = n\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\nSxa\nSxb\nSxc\nN4\nN4mb\nRemote GTP-U Peer\nM\nThis IE shall include the IP address of the remote GTP-U peer for which QoS information is reported, and the network instance used towards the remote GTP-U peer if available.\n-\n-\n-\nX\n-\nRemote GTP-U Peer\nGTP-U Path Interface Type\nC\nThis IE shall be present, if available. When present, it shall indicate the interface type of the GTP-U path towards the remote GTP-U peer.\n-\n-\n-\nX\n-\nGTP-U Path Interface Type\nQoS Report Trigger\nM\nThis IE shall indicate the trigger for this report.\n-\n-\n-\nX\n-\nQoS Report Trigger\nTime Stamp\nM\nThis shall shall provide the timestamp when the collection of the information in this report was generated.\n-\n-\n-\nX\n-\nTime Stamp\nStart Time\nC\nThis shall shall provide the timestamp when the collection of the information in this report was started.\n-\n-\n-\nX\n-\nStart Time\nQoS Information\nM\nThis IE shall contain the measured QoS information.\nMore than one IE with this type may be included to represent multiple QoS Information, e.g. for different DSCP values.\n-\n-\n-\nX\n-\nQoS Information",
      "chunk_type": "general",
      "cross_references": [
        "table_7.4.5.1.5-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_7.4.5.1.6",
      "section_id": "7.4.5.1.6",
      "section_title": "QoS Information in GTP-U Path QoS Report IE",
      "content": "Table 7.4.5.1.6-1: QoS Information in GTP-U Path QoS Report IE\nOctet 1 and 2\nQoS Information IE Type = 240 (decimal)\nOctets 3 and 4\nLength = n\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\nSxa\nSxb\nSxc\nN4\nN4mb\nAverage Packet Delay\nM\nThis IE shall indicate the average packet delay of the related GTP-U path.\n-\n-\n-\nX\n-\nAverage Packet Delay\nMinimum Packet Delay\nC\nThis IE shall indicate the minimum packet delay of the related GTP-U path, if available.\n-\n-\n-\nX\n-\nMinimum Packet Delay\nMaximum Packet Delay\nC\nThis IE shall indicate the maximum packet delay of the related GTP-U path, if available.\n-\n-\n-\nX\n-\nMaximum Packet Delay\nDSCP\nC\nThis IE shall be present, if available. When present, it shall contain the value of the DSCP in the TOS/Traffic Class field used in Echo messages to measure the packet delay.\n-\n-\n-\nX\n-\nTransport Level Marking",
      "chunk_type": "general",
      "cross_references": [
        "table_7.4.5.1.6-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_7.4.5.1.7",
      "section_id": "7.4.5.1.7",
      "section_title": "Peer UP Restart Report IE within PFCP Node Report Request",
      "content": "Table 7.4.5.1.7-1: Peer UP Restart Report IE within PFCP Node Report Request\nOctet 1 and 2\nPeer UP Restart Report Type = 315 (decimal)\nOctets 3 and 4\nLength = n\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\nSxa\nSxb\nSxc\nN4\nN4mb\nRemote GTP-U Peer\nM\nThis IE shall include the IP address of the remote GTP-U peer which has restarted.\nMore than one IE with this type may be included to represent that multiple peer GTP-U entities restart.\nX\nX\n-\nX\nX\nRemote GTP-U Peer",
      "chunk_type": "general",
      "cross_references": [
        "table_7.4.5.1.7-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_7.4.5.2.1",
      "section_id": "7.4.5.2.1",
      "section_title": "General",
      "content": "The PFCP Node Report Response shall be sent over the Sxa, Sxb; Sxc, N4 and N4mb interface by the CP function to the UP function as a reply to the PFCP Node Report Request.\nTable 7.4.5.2.1-1: Information Elements in PFCP Node Report Response\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\nSxa\nSxb\nSxc\nN4\nN4mb\nNode ID\nM\nThis IE shall contain the unique identifier of the sending Node.\nX\nX\nX\nX\nX\nNode ID\nCause\nM\nThis IE shall indicate the acceptance or the rejection of the corresponding request message.\nX\nX\nX\nX\nX\nCause\nOffending IE\nC\nThis IE shall be included if the rejection cause is due to a conditional or mandatory IE missing or faulty.\nX\nX\nX\nX\nX\nOffending IE",
      "chunk_type": "definition",
      "cross_references": [
        "table_7.4.5.2.1-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_7.4.6.1",
      "section_id": "7.4.6.1",
      "section_title": "PFCP Session Set Deletion Request",
      "content": "The PFCP Session Set Deletion Request shall be sent over the Sxa, Sxb or N4 interface by the CP function to request the UP function to delete the PFCP sessions affected by a partial failure.\nThe PFCP Session Set Deletion Request shall be also sent over the Sxa, Sxb or N4 interface by the UP function to request the CP function to delete the PFCP sessions affected by a partial failure.\nTable 7.4.6.1-1: Information Elements in a PFCP Session Set Deletion Request\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\nSxa\nSxb\nSxc\nN4\nN4mb\nNode ID\nM\nThis IE shall contain the node identity of the originating node of the message.\nX\nX\n-\nX\n-\nNode ID\nSGW-C FQ-CSID\nC\nThis IE shall be included according to the requirements in clause 23 of 3GPP TS 23.007 [24].\nX\nX\n-\n-\n-\nFQ-CSID\nPGW-C/SMF FQ-CSID\nC\nThis IE shall be included according to the requirements in clause 23 of 3GPP TS 23.007 [24] and clause 4.6 of 3GPP TS 23.527 [40].\nX\nX\n-\nX\n-\nFQ-CSID\nPGW-U/SGW-U/ UPF FQ-CSID\nC\nThis IE shall be included according to the requirements in clause 23 of 3GPP TS 23.007 [24] and clause 4.6 of 3GPP TS 23.527 [40].\nX\nX\n-\nX\n-\nFQ-CSID\nTWAN FQ-CSID\nC\nThis IE shall be included according to the requirements in clause 23 of 3GPP TS 23.007 [24].\n-\nX\n-\n-\n-\nFQ-CSID\nePDG FQ-CSID\nC\nThis IE shall be included according to the requirements in clause 23 of 3GPP TS 23.007 [24].\n-\nX\n-\n-\n-\nFQ-CSID\nMME FQ-CSID\nC\nThis IE shall be included according to the requirements in clause 23 of 3GPP TS 23.007 [24].\nX\nX\n-\n-\n-\nFQ-CSID",
      "chunk_type": "requirement",
      "cross_references": [
        "ts_23.007_clause_23",
        "ts_23.007_clause_4.6",
        "table_7.4.6.1-1",
        "ts_23.527_clause_4.6",
        "ts_23.007",
        "ts_23.527"
      ]
    },
    {
      "chunk_id": "ts_29.244_7.4.6.2",
      "section_id": "7.4.6.2",
      "section_title": "PFCP Session Set Deletion Response",
      "content": "The PFCP Session Set Deletion Response shall be sent over the Sxa, Sxb or N4 interface by the UP function or the CP function as a reply to the PFCP Session Set Deletion Request.\nTable 7.4.6.2-1: Information Elements in a PFCP Session Set Deletion Response\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\nSxa\nSxb\nSxc\nN4\nN4mb\nNode ID\nM\nThis IE shall contain the unique identifier of the sending node.\nX\nX\n-\nX\n-\nNode ID\nCause\nM\nThis IE shall indicate the acceptance or the rejection of the corresponding request message.\nX\nX\n-\nX\n-\nCause\nOffending IE\nC\nThis IE shall be included if the rejection is due to an conditional or mandatory IE missing or faulty.\nX\nX\n-\nX\n-\nOffending IE",
      "chunk_type": "requirement",
      "cross_references": [
        "table_7.4.6.2-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_7.4.7.1",
      "section_id": "7.4.7.1",
      "section_title": "PFCP Session Set Modification Request",
      "content": "The PFCP Session Set Modification Request shall be sent over the Sxb or N4 interface by the CP function to request the UP function to send any subsequent PFCP Session Report Request messages for the PFCP sessions which are identified by either FQ-CSID(s) or Group Id(s), or the CP IP Address in their F-SEIDs, towards an (alternative) SMF/PGW-C, e.g. when those PFCP sessions are affected by a partial PGW-C/SMF failure or are controlled by a PGW-C/SMF that is shutting down.\nThis procedure shall only be performed if the UP function indicated support of the RESPS feature (see clause 8.2.25).\nTable 7.4.7.1-1: Information Elements in a PFCP Session Set Modification Request\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\nSxa\nSxb\nSxc\nN4\nN4mb\nNode ID\nM\nThis IE shall contain the node identity of the originating node of the message.\n-\nX\n-\nX\n-\nNode ID\nPFCP Session Change Info\nM\nThis IE shall identify the FQ-CSID(s), Group Id(s) or CP IP address(es) of the PFCP sessions for which the PGW-U/UPF shall send subsequent PFCP Session Report Request messages to an Alternative SMF/PGW-C IP Address.\nSeveral IEs with the same IE type may be present to request the PGW-U/UPF to move PFCP sessions associated with different FQ-CSIDs, Group Ids or CP IP addresses to different PGW-C/SMFs.\n-\nX\n-\nX\n-\nPFCP Session Change Info\nTable 7.4.7.1-2: PFCP Session Change Info IE within PFCP Session Set Modification Request\nOctet 1 and 2\nPFCP Session Change Info IE Type = 290 (decimal)\nOctets 3 and 4\nLength = n\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\nSxa\nSxb\nSxc\nN4\nN4mb\nPGW-C/SMF FQ-CSID\nC\nThis IE shall identify the PGW-C/SMF FQ-CSID of the PFCP sessions for which the UPF shall send subsequent PFCP Session Report Request messages to the Alternative SMF/PGW-C IP Address.\nSee also clause 31.6 of 3GPP TS 23.007 [24] and clause 4.7 of 3GPP TS 23.527 [40].\nSeveral IEs with the same IE type may be present to represent several FQ-CSIDs of PFCP sessions that need to be moved to the same Alternative SMF/PGW-C IP Address.\n-\nX\n-\nX\n-\nFQ-CSID\nGroup Id\nC\nThis IE shall identify the Group Id of the PFCP sessions for which the UPF shall send subsequent PFCP Session Report Request messages to the Alternative SMF/PGW-C IP Address.\nSee also clause 31.6 of 3GPP TS 23.007 [24] and clause 4.7 of 3GPP TS 23.527 [40].\nSeveral IEs with the same IE type may be present to represent several Group Ids of PFCP sessions that need to be moved to the same Alternative SMF/PGW-C IP Address.\n-\nX\n-\nX\n-\nGroup-Id\nCP IP Address\nC\nThis IE shall identify the IP address in the CP F-SEID of the PFCP sessions for which the UPF shall send subsequent PFCP Session Report Request messages to the Alternative SMF/PGW-C IP Address.\nSeveral IEs with the same IE type may be present to represent several CP IP addresses of PFCP sessions that need to be moved to the same Alternative SMF/PGW-C IP Address.\n-\nX\n-\nX\n-\nCP IP Address\nAlternative SMF/PGW-C IP Address\nM\nThis IE shall include the alternative SMF/PGW-C IP Address to be used by the UP function to send subsequent PFCP Session Report Request messages for the PFCP Sessions associated with the PGW-C/SMF FQ-CSID(s), Group Id(s) or CP IP address(es).\nWhen present, this IE shall contain an IPv4 and/or IPv6 address of the same or an alternative SMF/PGW-C.\n-\nX\nX\n-\nAlternative SMF IP Address",
      "chunk_type": "requirement",
      "cross_references": [
        "clause_8.2.25",
        "ts_23.007_clause_31.6",
        "ts_23.007_clause_4.7",
        "table_7.4.7.1-1",
        "table_7.4.7.1-2",
        "ts_23.527_clause_4.7",
        "ts_23.007",
        "ts_23.527"
      ]
    },
    {
      "chunk_id": "ts_29.244_7.4.7.2",
      "section_id": "7.4.7.2",
      "section_title": "PFCP Session Set Modification Response",
      "content": "The PFCP Session Set Modification Response shall be sent over the Sxb or N4 interface by the UP function to the CP function as a reply to the PFCP Session Set Modification Request.\nTable 7.4.2.2-1: Information Elements in a PFCP Session Set Modification Response\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\nSxa\nSxb\nSxc\nN4\nN4mb\nNode ID\nM\nThis IE shall contain the unique identifier of the sending node.\n-\nX\n-\nX\n-\nNode ID\nCause\nM\nThis IE shall indicate the acceptance or the rejection of the corresponding request message.\n-\nX\n-\nX\n-\nCause\nOffending IE\nC\nThis IE shall be included if the rejection is due to a conditional or mandatory IE missing or faulty.\n-\nX\n-\nX\n-\nOffending IE",
      "chunk_type": "requirement",
      "cross_references": [
        "table_7.4.2.2-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_7.5.1",
      "section_id": "7.5.1",
      "section_title": "General",
      "content": "This clause specifies the session related messages used over the Sxa, Sxb and Sxc reference points.",
      "chunk_type": "definition",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.244_7.5.2.1",
      "section_id": "7.5.2.1",
      "section_title": "General",
      "content": "The PFCP Session Establishment Request shall be sent over the Sxa, Sxb, Sxc, N4 and N4mb interface by the CP function to establish a new PFCP session context in the UP function.\nTable 7.5.2.1-1: Information Elements in a PFCP Session Establishment Request\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\nSxa\nSxb\nSxc\nN4\nN4mb\nNode ID\nM\nThis IE shall contain the unique identifier of the sending Node.\nX\nX\nX\nX\nX\nNode ID\nCP F-SEID\nM\nThis IE shall contain the unique identifier allocated by the CP function identifying the session.\nX\nX\nX\nX\nX\nF-SEID\nCreate PDR\nM\nThis IE shall be present for at least one PDR to be associated to the PFCP session.\nSeveral IEs with the same IE type may be present to represent multiple PDRs.\nSee Table 7.5.2.2-1.\nX\nX\nX\nX\nX\nCreate PDR\nCreate FAR\nM\nThis IE shall be present for at least one FAR to be associated to the PFCP session.\nSeveral IEs with the same IE type may be present to represent multiple FARs.\nSee Table 7.5.2.3-1.\nX\nX\nX\nX\nX\nCreate FAR\nCreate URR\nC\nThis IE shall be present if a measurement action shall be applied to packets matching one or more PDR(s) of this PFCP session.\nSeveral IEs within the same IE type may be present to represent multiple URRs.\nSee Table 7.5.2.4-1.\nX\nX\nX\nX\nX\nCreate URR\nCreate QER\nC\nThis IE shall be present if a QoS enforcement or QoS marking action shall be applied to packets matching one or more PDR(s) of this PFCP session.\nSeveral IEs within the same IE type may be present to represent multiple QERs.\nSee Table 7.5.2.5-1.\n-\nX\nX\nX\nX\nCreate QER\nCreate BAR\nO\nWhen present, this IE shall contain the buffering instructions to be applied by the UP function to any FAR of this PFCP session set with the Apply Action requesting the packets to be buffered and with a BAR ID IE referring to this BAR. See table 7.5.2.6-1.\nX\n-\n-\nX\n-\nCreate BAR\nCreate Traffic Endpoint\nC\nThis IE may be present if the UP function has indicated support of PDI optimization.\nSeveral IEs within the same IE type may be present to represent multiple Traffic Endpoints.\nSee Table 7.5.2.7-1.\nX\nX\nX\nX\nX\nCreate Traffic Endpoint\nPDN Type\nC\nThis IE shall be present if the PFCP session is setup for an individual PDN connection or PDU session (see clause 5.2.1).\nWhen present, this IE shall indicate whether this is an IP or non-IP PDN connection/PDU session or, for 5GC, an Ethernet PDU session. See NOTE 3.\nX\nX\n-\nX\n-\nPDN Type\nSGW-C FQ-CSID\nC\nThis IE shall be included according to the requirements in clause 23 of 3GPP TS 23.007 [24].\nX\nX\n-\n-\n-\nFQ-CSID\nMME FQ-CSID\nC\nThis IE shall be included when received on the S11 interface or on S5/S8 interface according to the requirements in clause 23 of 3GPP TS 23.007 [24].\nX\nX\n-\n-\n-\nFQ-CSID\nPGW-C/SMF FQ-CSID\nC\nThis IE shall be included according to the requirements in clause 23 of 3GPP TS 23.007 [24] and clause 4.6 of 3GPP TS 23.527 [40].\nX\nX\n-\nX\n-\nFQ-CSID\nePDG FQ-CSID\nC\nThis IE shall be included according to the requirements in clause 23 of 3GPP TS 23.007 [24].\n-\nX\n-\n-\n-\nFQ-CSID\nTWAN FQ-CSID\nC\nThis IE shall be included according to the requirements in clause 23 of 3GPP TS 23.007 [24].\n-\nX\n-\n-\n-\nFQ-CSID\nUser Plane Inactivity Timer\nO\nThis IE may be present to request the UP function to send a User Plane Inactivity Report when no user plane packets are received for this PFCP session for a duration exceeding the User Plane Inactivity Timer.\nWhen present, it shall contain the duration of the inactivity period after which a User Plane Inactivity Report shall be generated.\n-\nX\nX\nX\nX\nUser Plane Inactivity Timer\nUser ID\nO\nThis IE may be present, based on operator policy. It shall only be sent if the UP function is in a trusted environment.\nSee NOTE 1.\nX\nX\nX\nX\n-\nUser ID\nTrace Information\nO\nWhen present, this IE shall contain the trace instructions to be applied by the UP function for this PFCP session.\nX\nX\nX\nX\n-\nTrace Information\nAPN/DNN\nO\nThis IE may be present, if related functionalities in the UP function require the APN/DNN information. See NOTE 2.\nThis IE should be sent from the V-SMF to any V-UPF acting as (local) PSA for a HR-SBO PDU session and capable of enforcing NAT on N6 traffic. When present, it shall contain the full DNN of the PDU session (with the Operator ID part identifying the HPLMN ID).\nThis IE should be sent from the SMF to the selected UPF acting as PSA if the UPF indicates to support the UPSBIES feature (see clause 8.2.25 and clause 5.40).\nX\nX\n-\nX\nX\nAPN/DNN\nCreate MAR\nC\nThis IE shall be present for a N4 session established for a MA PDU session.\nSeveral IEs with the same IE type may be present to represent multiple MARs.\nSee Table 7.5.2.8-1.\n-\n-\n-\nX\n-\nCreate MAR\nPFCPSEReq-Flags\nC\nThis IE shall be included if at least one of the flags is set to \"1\".\n-\tRESTI (Restoration Indication): this bit shall be set to \"1\" if the CP function re-establishes an existing PFCP session and the allocation of GTP-U F-TEID and/or UE IP address is performed by the UP function. (NOTE 4)\n-\tSUMPC (Stop Usage Measurement to Pause Charging): the CP function, e.g. PGW-C or (H-)SMF, shall set this flag if the usage measurement for the URRs which are applicable for charging (i.e. with the \"ASPOC\" flag set to \"1\") shall be stopped in the UP function.\n-\tHRSBOM (HR-SBO Mode): the V-SMF shall set this flag to the V-UPF acting as Local PSA in the VPLMN, if the V-SMF supports HR-SBO and if the PDU session is working in HB-SBO mode.\nX\n-\n-\nX\nX\n-\n-\n-\n-\nX\nX\nX\n-\n-\n-\nPFCPSEReq-Flags\nCreate Bridge/Router Info\nC\nThis IE shall be present to request the UPF to provide Bridge/Router information for a PFCP session established for TSN, TSCTS or DetNet.\n-\n-\n-\nX\n-\nCreate Bridge/router Info\nCreate SRR\nO\nThis IE may be present to request the UPF to detect and report events not related to specific PDRs.\nSeveral IEs within the same IE type may be present to represent multiple SRRs.\nSee Table 7.5.2.9-1.\n-\n-\n-\nX\n-\nCreate SRR\nProvide ATSSS Control Information\nC\nThis IE shall be present for N4 session establishment for a MA PDU session.\nWhen present, this IE shall contain the required ATSSS functionalities for this MA PDU session.\nSee Table 7.5.2.10-1.\n-\n-\n-\nX\n-\nProvide ATSSS Control Information\nRecovery Time Stamp\nO\nThis IE may be included to contain the time stamp when the CP function was started. (See clause 19A of 3GPP TS 23.007 [24].)\nX\nX\nX\nX\n-\nRecovery Time Stamp\nS-NSSAI\nO\nThis IE may be present, if related functionalities in the UP function require the S-NSSAI information. (NOTE 2, NOTE 5)\nWhen present, it shall indicate the S-NSSAI of the PDU session or MBS session.\nThis IE should be sent from the SMF to the selected UPF acting as PSA if the UPF indicates to support the UPSBIES feature (see clause 8.2.25 and clause 5.40).\n-\n-\n-\nX\nX\nS-NSSAI\nHPLMN S-NSSAI\nC\nThis IE should be sent from the V-SMF to any V-UPF acting as (local) PSA for a HR-SBO PDU session and capable of enforcing NAT on N6 traffic.\nWhen present, it shall contain the HPLMN S-NSSAI.\n-\n-\n-\nX\n-\nHPLMN S-NSSAI\nProvide RDS configuration information\nO\nWhen present, this IE shall contain the RDS configuration information to be applied by the UP function for this PFCP session.\n-\nX\n-\nX\n-\nProvide RDS configuration information\nRAT Type\nO\nThis IE may be present to provide the UP Function the current RAT Type for the PDN connection/PDU session to which this PFCP Session is corresponding for statistics purpose if the PFCP session is not established for a MA PDU session.\nX\nX\n-\nX\n-\nRAT Type\nL2TP Tunnel Information\nC\nThis IE shall be present if L2TP tunnel information is received from an AAA server, e.g. Radius/Diameter server or if it is configured in the CP function.\nSeveral IE with the same IE type may be present to provide L2TP Tunnel Information for alternative LNS.\n-\nX\n-\nX\n-\nL2TP Tunnel Information\nL2TP Session Information\nC\nThis IE shall be present to include the information to establish a L2TP session, if an L2TP session needs to be established for this PFCP session.\n-\nX\n-\nX\n-\nL2TP Session Information\nGroup Id\nO\nThis IE may be included by the CP function to indicate the group identifier to which the PFCP session pertains (see clause 5.22).\n-\nX\n-\nX\n-\nGroup Id\nMBS Session N4mb Control Information\nM\nThis IE shall identify the MBS session, or the MBS session and Area Session ID for a location dependent MBS service, and it may contain further control information for the MB-UPF.\n-\n-\n-\n-\nX\nMBS Session N4mb Control Information\nMBS Session N4 Control Information\nC\nThis IE shall be included if the correspond PDU session shall be associated with an MBS session, or with an MBS session and Area Session ID for a location dependent MBS service.\nSeveral IEs with the same IE type may be present to provide N4 control information for several MBS sessions, e.g., when the UE requests to join several MBS sessions.\n-\n-\n-\nX\n-\nMBS Session N4 Control Information\nDSCP to PPI Control Information\nO\nThis IE may be present if the UPF is required to insert the Paging Policy Indicator (PPI) in the GTP-U PDU Session Container extension header of outgoing GTP-U packets (encapsulating payload packets) based on the DSCP in the TOS/Traffic Class field in the IP header of payload packet and if the UPF supports the EPPPI feature as specified in clause 5.36.2.\nSeveral IEs with the same IE type may be present to provide different DSCP to PPI Control Information for different set of QFI(s).\n-\n-\n-\nX\n-\nDSCP to PPI Control Information\nTL-Container\nC\nThis IE shall be present if the SMF/CUC needs to send a TL-Container to the UPF/CN-TL.\n-\n-\n-\nX\n-\nTL-Container\nTrace Collection Entity URI\nO\nThis IE may be present if an UP function trace is activated for this PFCP session and if the Trace Information IE is included. When present, this IE shall include the Trace Reporting Consumer URI for Streaming based Reporting as defined in 3GPP TS 32.422 [35].\nIf the UP function supports Streaming based Reporting and Trace Collection Entity URI IE is present, the IP Address of Trace Collection Entity in Trace Information IE shall be ignored.\nX\nX\nX\nX\n-\nURI\nUE Level Measurements Configuration\nO\nThis IE may be present if the Trace Information IE is present.\nWhen present, this IE shall contain the 5GC UE Level Measurement configuration data to be applied by the UP function for this PFCP session (see clause 4.1.2.18 of 3GPP TS 32.422 [35]).\n-\n-\n-\nX\n-\nUE Level Measurements Configuration\nNOTE 1:\tThis can be used for troubleshooting problems in the UP function affecting a subscriber.\nNOTE 2:\tThe CP function may provide additional information (e.g. APN/DNN, S-NSSAI) to the UP function, e.g. used by the forwarding rules pre-defined in UP function (some forwarding rules are APN specific), used by the UP function for performance measurement, used by the UP function for resource management, or used by the UPF to include a proper User plane node/Bridge ID in the response message during a PFCP session establishment for a PDU session for TSC.\nNOTE 3:\tThe SGW-C may set PDN type as Non-IP for an Ethernet PDN to allow interworking with a legacy SGW-U.\nNOTE 4:\tThe UP function shall accept the CP function allocated GTP-U F-TEID and/or UE IP address in the PFCP Session Establishment Request message with the RESTI flag set to \"1\", if the requested GTP-U F-TEID and/or UE IP address are available. If the GTP-U F-TEID or UE IP address provided by the CP function is not available at the UP function, the UP function shall reject the PFCP Session Establishment Request with the cause \"PFCP session restoration failure due to requested resource not available\" (see clause 8.2.1).\nNOTE 5:\tA UPF shall support allocating resources using the Network Instance IE and the UPF may additionally support allocating resources using the Network Instance IE and S-NSSAI IE (see clause 5.35).\nTable 7.5.2.1-2: L2TP Tunnel Information IE in the PFCP Session Establishment Request message\nOctet 1 and 2\nL2TP Tunnel Information IE Type = 276 (decimal)\nOctets 3 and 4\nLength = n\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\nSxa\nSxb\nSxc\nN4\nN4mb\nLNS Address\nM\nThis IE shall be present to include the Tunnel Server Endpoint, i.e. LNS IP address.\n-\nX\n-\nX\n-\nLNS Address\nTunnel Password\nO\nThis IE may be present to include the password to be used to authenticate to a remote server.\n-\nX\n-\nX\n-\nTunnel Password\nTunnel Preference\nC\nThis IE shall be present if multiple L2TP Tunnel Information IEs are included in the message.\nIf present this IE indicates the order in which the L2TP Tunnel Information IEs shall be used when trying to establish the L2TP session.\n-\nX\n-\nX\n-\nTunnel Preference\nTable 7.5.2.1-3: L2TP Session Information IE in the PFCP Session Establishment Request message\nOctet 1 and 2\nL2TP Session Information IE Type = 277 (decimal)\nOctets 3 and 4\nLength = n\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\nSxa\nSxb\nSxc\nN4\nN4mb\nCalling Number\nO\nThis IE may be present, e.g. to include an MSISDN of the UE.\n-\nX\n-\nX\n-\nCalling Number\nCalled Number\nO\nThis IE may be present, e.g. to include an APN/DNN.\n-\nX\n-\nX\n-\nCalled Number\nMaximum Receive Unit\nO\nThis IE may be present to include Maximum Receive Unit for LCP/PPP which may be set to the value of the MTU received from the UE or may be configured in the CP function.\n-\nX\n-\nX\n-\nMaximum Receive Unit\nL2TP Session Indications\nC\nThis IE shall be present if the CP function requests the UP function to get a UE IP Address, and/or DNS server information, and/or NBNS server information from the LNS.\n-\nX\n-\nX\n-\nL2TP session Indications\nL2TP User Authentication\nO\nThis IE may be present to include the authentication information to be used during L2TP session establishment.\n-\nX\n-\nX\n-\nL2TP User Authentication\nNOTE:\tThe Tunnel Password and L2TP User Authentication IE are transferred with plain text, a Network Domain Security/IP based security mechanism may be deployed between the CP function and the UP function if required by the local policies.\nTable 7.5.2.1-4: MBS Session N4mb Control Information IE within PFCP Session Establishment Request\nOctet 1 and 2\nMBS Session N4mb Control Information IE Type = 300 (decimal)\nOctets 3 and 4\nLength = n\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\nSxa\nSxb\nSxc\nN4\nN4mb\nMBS Session Identifier\nM\n-\n-\n-\n-\nX\nMBS Session Identifier\nArea Session ID\nC\nThis IE shall be present for a location dependent MBS service. When present, it shall contain the Area Session ID, which together with the MBS Session Identifier, uniquely identify the service area part of the content data of the MBS service.\n-\n-\n-\n-\nX\nArea Session ID\nMBSN4mbReq-Flags\nC\nThis IE shall be included if at least one of the flags is set to \"1\".\n-\tPLLSSM (Provide Lower Layer SSM): the MB-SMF shall set this flag to \"1\" to request the MB-UPF to allocate a LL SSM (i.e. multicast destination address and related source IP address) and a GTP-U Common Tunnel EndPoint Identifier (C-TEID), if multicast transport is used over N3mb and/or N19mb. See clause 5.34.2.2.\n-\tJMBSSM (Join MBS Session SSM): the MB-SMF shall set this flag to \"1\" to request the MB-UPF to join the multicast tree towards the Source Specific Multicast (SSM) address information provided by AF/AS for the MBS Session, if multicast transport is used over N6mb.\n-\tMBS RESTI (MBS Restoration Indication): this bit shall be set to \"1\" if the MB-SMF re-establishes an existing PFCP session. (NOTE)\n-\n-\n-\n-\nX\nMBSN4mbReq-Flags\nMulticast Transport Information for N3mb and/or N19mb\nC\nThis IE shall be present during the restoration of a PFCP session of an MBS session after an MB-UPF restart, as defined in clause 8.2.2 of 3GPP TS 23.527 [40].\nWhen present, it shall include the low layer source specific multicast address information (i.e. multicast destination address and related source IP address) and the GTP-U Common Tunnel EndPoint Identifier (C-TEID) that the MB-SMF requests the MB-UPF to allocate for multicast transport over N3mb and/or N19mb, if possible.\n(NOTE)\n-\n-\n-\n-\nX\nMulticast Transport Information\nNOTE:\tThe MB-UPF shall accept the MB-SMF allocated N3mb/N19mb and/or the N6mb/Nmb9 address in the PFCP Session Establishment Request message with the MBS RESTI flag set to \"1\", if the requested addresses are available. If one requested address is not available at the MB-UPF, the MB-UPF shall reject the PFCP Session Establishment Request with the cause \"PFCP session restoration failure due to requested resource not available\" (see clause 8.2.1).\nTable 7.5.2.1-5: MBS Session N4 Control Information IE within PFCP Session Establishment Request\nOctet 1 and 2\nMBS Session N4 Control Information IE Type = 310 (decimal)\nOctets 3 and 4\nLength = n\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\nSxa\nSxb\nSxc\nN4\nN4mb\nMBS Session Identifier\nM\n-\n-\n-\nX\n-\nMBS Session Identifier\nArea Session ID\nC\nThis IE shall be present for a location dependent MBS service. When present, it shall contain the Area Session ID, which together with the MBS Session Identifier, uniquely identify the service area part of the content data of the MBS service.\n-\n-\n-\nX\n-\nArea Session ID\nMulticast Transport Information\nC\nThis IE shall be present to include a low layer source specific multicast address information (i.e. multicast destination address and related source IP address) and a GTP-U Common Tunnel EndPoint Identifier (C-TEID) which was allocated by the MB-UPF, if IP multicast transport is used over N19mb.\n-\n-\n-\nX\n-\nMulticast Transport Information\nTable 7.5.2.1-6: DSCP to PPI Control Information IE within PFCP Session Establishment Request\nOctet 1 and 2\nDSCP to PPI Control Information IE Type = 316 (decimal)\nOctets 3 and 4\nLength = n\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\nSxa\nSxb\nSxc\nN4\nN4mb\nDSCP to PPI Mapping Information\nM\nThis IE shall be present to instruct the UPF to insert the corresponding PPI for the downlink GTP-U packet, where the DSCP of its payload packet is matching one of DSCP codes in the DSCP to PPI Mapping Information.\nSeveral IEs with the same IE type may be present to provide different DSCP to PPI mapping information.\n-\n-\n-\nX\n-\nDSCP to PPI Mapping Information\nQFI\nO\nThis IE may be present to request the UPF to only insert PPI for those packets pertain to the requested QoS flow(s).\nSeveral IEs with the same IE type may be present to provide a list of QFIs.\n(NOTE 1)\n-\n-\n-\nX\n-\nQFI\nNOTE 1:\tThe absence of QFI(s) indicates that insertion of the corresponding PPI shall be applied for all DL packets (matching the DSCP(s) of the DSCP to PPI Mapping Information IE) pertaining to all QoS flows of the PFCP session.",
      "chunk_type": "definition",
      "cross_references": [
        "clause_5.2.1",
        "ts_23.007_clause_23",
        "ts_23.007_clause_4.6",
        "clause_8.2.25",
        "clause_5.40",
        "ts_23.007_clause_19",
        "clause_5.22",
        "clause_5.36.2",
        "ts_32.422_clause_4.1.2.18",
        "clause_8.2.1",
        "clause_5.35",
        "clause_5.34.2.2",
        "ts_23.527_clause_8.2.2",
        "table_7.5.2.1-1",
        "table_7.5.2.2-1",
        "table_7.5.2.3-1",
        "table_7.5.2.4-1",
        "table_7.5.2.5-1",
        "table_7.5.2.6-1",
        "table_7.5.2.7-1",
        "table_7.5.2.8-1",
        "table_7.5.2.9-1",
        "table_7.5.2.10-1",
        "table_7.5.2.1-2",
        "table_7.5.2.1-3",
        "table_7.5.2.1-4",
        "table_7.5.2.1-5",
        "table_7.5.2.1-6",
        "ts_23.527_clause_4.6",
        "ts_23.007",
        "ts_23.527",
        "ts_32.422"
      ]
    },
    {
      "chunk_id": "ts_29.244_7.5.2.2",
      "section_id": "7.5.2.2",
      "section_title": "Create PDR IE within PFCP Session Establishment Request",
      "content": "The Create PDR grouped IE shall be encoded as shown in Figure 7.5.2.2-1.\nTable 7.5.2.2-1: Create PDR IE within PFCP Session Establishment Request\nOctet 1 and 2\nCreate PDR IE Type = 1(decimal)\nOctets 3 and 4\nLength = n\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\nSxa\nSxb\nSxc\nN4\nN4mb\nPDR ID\nM\nThis IE shall uniquely identify the PDR among all the PDRs configured for that PFCP session.\nX\nX\nX\nX\nX\nPDR ID\nPrecedence\nM\nThis IE shall indicate the PDR's precedence to be applied by the UP function among all PDRs of the PFCP session, when looking for a PDR matching an incoming packet.\n-\nX\nX\nX\nX\nPrecedence\nPDI\nM\nThis IE shall contain the PDI against which incoming packets will be matched.\nSee Table 7.5.2.2-2.\nX\nX\nX\nX\nX\nPDI\nOuter Header Removal\nC\nThis IE shall be present if the UP function is required to remove one or more outer header(s) from the packets matching this PDR.\nX\nX\n-\nX\nX\nOuter Header Removal\nFAR ID\nC\nThis IE shall be present if the Activate Predefined Rules IE is not included or if it is included but it does not result in activating a predefined FAR, and if the MAR ID is not included. This IE may be present if the CP function activated a predefined rule name with a predefined FAR but the CP function wishes to overwrite the predefined FAR by another FAR. (NOTE 2)\nWhen present this IE shall contain the FAR ID to be associated to the PDR.\nX\nX\nX\nX\nX\nFAR ID\nURR ID\nC\nThis IE shall be present if a measurement action shall be applied to packets matching this PDR.\nWhen present, this IE shall contain the URR IDs to be associated to the PDR.\nSeveral IEs within the same IE type may be present to represent a list of URRs to be associated to the PDR.\nX\nX\nX\nX\n-\nURR ID\nQER ID\nC\nThis IE shall be present if a QoS enforcement or QoS marking action shall be applied to packets matching this PDR.\nWhen present, this IE shall contain the QER IDs to be associated to the PDR. Several IEs within the same IE type may be present to represent a list of QERs to be associated to the PDR.\n-\nX\nX\nX\nX\nQER ID\nActivate Predefined Rules\nC\nThis IE shall be present if Predefined Rule(s) shall be activated for this PDR. When present this IE shall contain one Predefined Rules name.\nSeveral IEs with the same IE type may be present to represent multiple \"Activate Predefined Rules\" names.\n-\nX\nX\nX\n-\nActivate Predefined Rules\nActivation Time\nO\nThis IE may be present if the PDR activation shall be deferred. (NOTE 1)\n-\nX\nX\nX\n-\nActivation Time\nDeactivation Time\nO\nThis IE may be present if the PDR deactivation shall be deferred. (NOTE 1)\n-\nX\nX\nX\n-\nDeactivation Time\nMAR ID\nC\nThis IE shall be present if the PDR is provisioned to match the downlink traffic of non-GBR QoS flows towards the UE for a PFCP session established for a MA PDU session.\n-\n-\n-\nX\n-\nMAR ID\nPacket Replication and Detection Carry-On Information\nC\nThis IE shall be present if the PDR is provisioned to match a broadcast packet. When present, it contains the information to instruct the UPF to replicate the packet and to carry-on the look-up of other PDRs of other PFCP sessions matching the packet (see clause 5.2.1).\n-\n-\n-\nX\n-\nPacket Replication and Detection Carry-On Information\nIP Multicast Addressing Info\nO\nThis IE may be present in an UL PDR controlling UL IGMP/MLD traffic (see 5.25).\nWhen present, it shall contain a (range of) IP multicast address(es), and optionally source specific address(es), identifying a set of IP multicast flows. See Table 7.5.2.2-4.\nSeveral IEs with the same IE type may be present to represent multiple IP multicast flows.\n-\n-\n-\nX\n-\nIP Multicast Addressing Info\nUE IP address Pool Identity\nO\nThis IE may be present if UE IP Addresses Pools are configured in the UPF.\nWhen present, this IE shall contain the identity of a UE IP address Pool configured in the UPF.\nTwo IEs with the same IE type shall be present to represent UE IPv4 Address Pool Identity and UE IPv6 Address Pool Identity if different pool identities are used for UE IPv4 address and UE IPv6 address and both an UE IPv4 and an UE IPv6 address are requested to be assigned for the PFCP session. In this case, the UE IPv4 Address Pool Identity shall be encoded before the UE IPv6 Address Pool Identity.\n-\nX\n-\nX\n-\nUE IP address Pool Identity\nMultipath Applicable Indication\nC\nThis IE shall be present if the PDR is used to detect UL user plane traffic for which MPTCP or MPQUIC is applicable.\n-\n-\n-\nX\n-\nMultipath Applicable Indication\nTransport Delay Reporting\nC\nThis IE shall be present to request the UPF to add the delay of the GTP-U path with the preceding uplink GTP-U entity to the \"N3/N9 Delay Result received in the GTP-U PDU Session Container extension header (see 3GPP TS 38.415 [34]) of the uplink packet, when monitoring the QoS of a PDU session based on GTP-U path monitoring (see clause 5.24.5.3). See Table 7.5.2.2-6.\n-\n-\n-\nX\n-\nTransport Delay Reporting\nRAT Type\nO\nThis IE may be present to provide the UP Function the current RAT Type for the UL PDR for statistics purpose if the PFCP session is established for a MA PDU session.\n-\n-\n-\nX\n-\nRAT Type\nNOTE 1:\tWhen the Activation Time and Deactivation Time are not present, the PDR shall be activated immediately at receiving the message.\nNOTE 2:\tIf a predefined FAR is or has been activated using a predefined rule name, it is UP function implementation specific whether this predefined FAR can be overwritten by a FAR ID pointing to another predefined FAR (i.e. with the most significant bit set to 1). If not, the UP function shall reject such a request if received from the CP function.\nTable 7.5.2.2-2: PDI IE within PFCP Session Establishment Request\nOctet 1 and 2\nPDI IE Type = 2 (decimal)\nOctets 3 and 4\nLength = n\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\nSxa\nSxb\nSxc\nN4\nN4mb\nSource Interface\nM\nThis IE shall identify the source interface of the incoming packet.\nX\nX\nX\nX\nX\nSource Interface\nLocal F-TEID\nO\nThis IE shall not be present if Traffic Endpoint ID is present.\nIf present, this IE shall identify the local F-TEID to match for an incoming packet.\nThe CP function shall set the CHOOSE (CH) bit to 1 if the CP function requests the UP function to assign a local F-TEID to the PDR.\nX\nX\n-\nX\n-\nF-TEID\nLocal Ingress Tunnel\nC\nThis IE shall not be present if Traffic Endpoint ID is present.\nIf present, this IE shall identify the IP address and the UDP port for a UDP/IP tunnel.\nThe CP function shall set the CHOOSE (CH) bit to 1 if the CP function requests the UP function to assign a local ingress tunnel to the PDR.\n-\n-\n-\n-\nX\nLocal Ingress Tunnel\nNetwork Instance\nO\nThis IE shall not be present if Traffic Endpoint ID is present. It shall be present if the CP function requests the UP function to allocate a UE IP address/prefix and the Traffic Endpoint ID is not present.\nIf present, this IE shall identify the Network instance to match for the incoming packet. See NOTE 1, NOTE2.\nX\nX\nX\nX\nX\nNetwork Instance\nRedundant Transmission Detection Parameters\nO\nIf present, this IE shall contain the information used for the reception of redundant uplink packets on N3/N9 interfaces.\n-\n-\n-\nX\n-\nRedundant Transmission Detection Parameters\nUE IP address\nO\nThis IE shall not be present if Traffic Endpoint ID is present.\nIf present, this IE shall identify the UE IP address as the source or destination IP address to match for the incoming packet. (NOTE 5).\nThe CP function shall set the CHOOSE IPV4 (CHV4) and/or the CHOOSE IPV6 (CHV6) bits to 1 if the UP function supports the allocation of UE IP address/ prefix and the CP function requests the UP function to assign a UE IP address/prefix to the PDR.\nThis IE may also present to identify the IP address of the CP function as the destination IP address to match for the incoming packet, e.g. Radius, Diameter or DHCP signalling packet. (NOTE 8).\nThis IE may be present for a PFCP session established in the V-UPF (local PSA) for a HR-SBO PDU session if the UPF supports the UN6TU feature (see clause 8.2.25).\nIn the 5GC, several IEs with the same IE type may be present to represent multiple UE IP addresses, if the UPF indicated support of the IP6PL feature (see clause 5.21).\n-\nX\nX\nX\n-\nUE IP address\nMapped N6 IP Address\nO\nWhen present, the V-SMF shall set the CHOOSE IPV4 (CHV4) bit to 1 if the UP function supports the UMN6IP feature and the V-SMF requests the UP function to assign a mapped N6 IP address for one or more DL PDRs as described in clause 5.33.7.\n-\n-\n-\nX\n-\nMapped N6 IP Address\nN6 Routing Information\nO\nThis IE may be present in a DL PDR when using distinct N6 tunnels from the V-EASDF to the V-UPF for differentiating HR-SBO PDU sessions with overlapping private UE IP addresses. See clause 5.33.7.\n-\n-\n-\nX\n-\nN6 Routing Information\nTraffic Endpoint ID\nC\nThis IE may be present if the UP function has indicated the support of PDI optimization.\nIf present, this IE shall uniquely identify the Traffic Endpoint for that PFCP session.\nSeveral IEs with the same IE type may be present to provision several Traffic Endpoints with different Traffic Endpoint IDs, from which the UPF may receive packets pertaining to the same service data flow, which is subject for the same FAR, QER and URR, if the UPF has indicated it supports MTE feature as specified in clause 8.2.25. See NOTE 6.\nX\nX\nX\nX\nX\nTraffic Endpoint ID\nSDF Filter\nO\nIf present, this IE shall identify the SDF filter to match for the incoming packet. Several IEs with the same IE type may be present to provision a list of SDF Filters. The full set of applicable SDF filters, if any, shall be provided during the creation or the modification of the PDI.\nSee NOTE 3.\n-\nX\nX\nX\nX\nSDF Filter\nApplication ID\nO\nIf present, this IE shall identify the Application ID to match for the incoming packet.\n-\nX\nX\nX\nX\nApplication ID\nEthernet PDU Session Information\nO\nThis IE may be present to identify all the (DL) Ethernet packets matching an Ethernet PDU session (see clause 5.13.1).\n-\n-\n-\nX\n-\nEthernet PDU Session Information\nEthernet Packet Filter\nO\nIf present, this IE shall identify the Ethernet PDU to match for the incoming packet.\nSeveral IEs with the same IE type may be present to represent a list of Ethernet Packet Filters.\nThe full set of applicable Ethernet Packet filters, if any, shall be provided during the creation or the modification of the PDI.\n-\n-\n-\nX\n-\nEthernet Packet Filter\nQFI\nO\nThis IE shall not be present if Traffic Endpoint ID is present and the QFI(s) are included in the Traffic Endpoint.\nIf present, this IE shall identify the QoS Flow Identifier to match for the incoming packet.\nSeveral IEs with the same IE type may be present to provision a list of QFIs. When present, the full set of applicable QFIs shall be provided during the creation or the modification of the PDI.\n-\n-\n-\nX\n-\nQFI\nFramed-Route\nO\nThis IE may be present for a PDR if the UPF indicated support of Framed Routing (see clauses 8.2.25 and 5.16). If present, this IE shall describe a framed route.\nSeveral IEs with the same IE type may be present to provision a list of framed routes. (NOTE 5)\n-\nX\n-\nX\n-\nFramed-Route\nFramed-Routing\nO\nThis IE may be present for a DL PDR if the UPF indicated support of Framed Routing (see clauses 8.2.25 and 5.16). If present, this IE shall describe the routing method for the UP function for the IP route related to Framed-Routes or Framed-IPv6-Routes. (NOTE 7)\n-\nX\n-\nX\n-\nFramed-Routing\nFramed-IPv6-Route\nO\nThis IE may be present for a PDR if the UPF indicated support of Framed Routing (see clauses 8.2.25 and 5.16). If present, this IE shall describe a framed IPv6 route.\nSeveral IEs with the same IE type may be present to provision a list of framed IPv6 routes. (NOTE 5)\n-\nX\n-\nX\n-\nFramed-IPv6-Route\nSource Interface Type\nC\nWhen present, this IE shall indicate the 3GPP interface type of the source interface.\nThis IE shall be present if this is a PDR for a DL data forwarding tunnel. Otherwise this IE may be present, if required by functionalities in the UP Function, e.g. for performance measurements.\nX\nX\n-\nX\nX\n3GPP Interface Type\nIP Multicast Addressing Info\nO\nThis IE may be present in a DL PDR controlling DL IP multicast traffic (see clause 5.25).\nWhen present, it shall contain a (range of) IP multicast address(es), and optionally source specific address(es), identifying a set of IP multicast flows. See Table 7.5.2.2-4.\nThis IE shall be present over N4mb, if multicast transport is used over N6mb and if Traffic Endpoint ID is not present.\nSeveral IEs with the same IE type may be present to represent multiple IP multicast flows.\n-\n-\n-\nX\nX\nIP Multicast Addressing Info\nDNS Query Filter\nO\nThis IE may be present for an UL PDR if the UPF indicated support of DNS traffic steering based on FQDN in the DNS Query message.\nIf present, this IE shall identify the DNS Query filter to match for the incoming DNS Query packets. Several IEs with the same IE type may be present to provision a list of DNS Query Filters. The full set of applicable DNS Query filters, if any, shall be provided during the creation or the modification of the PDI.\n-\n-\n-\nX\n-\nDNS Query/Response Filter\nMBS Session Identifier\nC\nThis IE shall be present when the PDR is created to receive MBS session data. (NOTE 9)\n-\n-\n-\nX\n-\nMBS Session Identifier\nArea Session ID\nC\nThis IE shall be present for a location dependent MBS service. When present, it shall contain the Area Session ID, which together with the MBS Session Identifier, uniquely identify the service area part of the content data of the MBS service. (NOTE 9)\n-\n-\n-\nX\n-\nArea Session ID\nProtocol Description\nO\nThis IE may be present to indicate the transport protocol (e.g. RTP/SRTP), transport protocol header extensions (e.g. RTP Header Extension for PDU Set Marking as defined in 3GPP TS 26.522 [79]), payload type and format (e.g. H.264, H.265) used by the packets matching this PDR when PDU Set marking and/or End of Data Burst marking applies to the QER (i.e. QoS flow) with which the PDR is associated. See Table 7.5.2.2-7.\n(NOTE 10)\n-\n-\n-\nX\n-\nProtocol Description\nDNS Response Filter\nO\nThis IE may be present for an DL PDR to support EAS discovery procedure with V-EASDF using IP replacement mechanism in HR-SBO.\nIf present, this IE shall identify the DNS Response filter to match for the incoming DNS Response packets. Several IEs with the same IE type may be present to provision a list of DNS Response Filters. The full set of applicable DNS Response filters, if any, shall be provided during the creation or the modification of the PDI.\n-\n-\n-\nX\n-\nDNS Query/Response Filter\nNOTE 1:\tThe Network Instance parameter is needed e.g. in the following cases:\n-\tPGW/TDF UP function supports multiple PDNs with overlapping IP addresses;\n-\tSGW UP function is connected to PGWs in different IP domains (S5/S8);\n-\tPGW UP function is connected to SGWs in different IP domains (S5/S8);\n-\tSGW UP function is connected to eNodeBs in different IP domains;\n-\tUPF is connected to 5G-ANs in different IP domains;\n-\tSeparation of multiple 5G VN groups communication in the UPF;\n-\tIndirect data forwarding.\nNOTE 2:\tWhen a Local F-TEID is provisioned in the PDI, the Network Instance shall relate to the IP address of the F-TEID. Otherwise, the Network Instance shall relate to the UE IP address if provisioned or the destination IP address in the SDF filter if provisioned\nNOTE 3:\tSDF Filter IE(s) shall not be present if Ethernet Packet Filter IE(s) is present.\nNOTE 4:\tWhen several SDF filter IEs are provisioned, the UP function shall consider that the packets are matched if matching any SDF filter. The same principle shall apply for Ethernet Packet Filters and QFIs.\nNOTE 5:\tIf both the UE IP Address and the Framed-Route (or Framed-IPv6-Route) are present, the packets which are considered being matching the PDR shall match at least one of them.\nNOTE 6:\tMaximum two Traffic Endpoint ID containing different Local TEIDs per PDI may be provisioned over the N4 interface for a PFCP session which is established for a PDU session subject for 5G to EPS mobility with N26 supported. Several Traffic Endpoint ID containing different UE IP Addresses may be provisioned over the N4 interface for a PFCP session if the UPF also indicated support of the IP6PL feature (see clause 5.21.1).\nNOTE 7:\tIn this release of specification, the UP function shall announce the IP route(s) for Framed-Route(s) or Framed-IPv6-Route(s) to the PDN regardless of the value of the Framed-Routing.\nNOTE 8:\tThe IP address of the CP function is needed e.g. perform Router Advertisements and match the destination IP address of the incoming packet if the Radius, Diameter or DHCP signaling packets between the SMF and the external DN is forwarded by the UPF.\nNOTE 9:\tThe Inclusion of the MBS Session Identifier, or MBS Session Identifier and Area Session ID for a location dependent MBS session, enables the UPF to allocate the same N19mb tunnel for the same MBS Session, or for the same MBS session and Area Session ID for a location dependent MBS session, when receiving multiple PFCP Session Establishment or Modification Request messages for different PFCP sessions being associated with the same MBS session, or with the same MBS session and Area Session ID for a location dependent MBS session, and also helps the UPF to identify the PFCP sessions associated with a MBS Session, or with the same MBS session and Area Session ID for a location dependent MBS session.\nNOTE 10:\tThe Protocol Description IE is not used for packets matching against the PDR but to assist PDU Set identification and/or End of Data Burst marking by the UPF.\nTable 7.5.2.2-3: Ethernet Packet Filter IE within PFCP Session Establishment Request\nOctet 1 and 2\nEthernet Packet Filter IE Type = 132 (decimal)\nOctets 3 and 4\nLength = n\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\nSxa\nSxb\nSxc\nN4\nN4mb\nEthernet Filter ID\nC\nThis shall be present if Bidirectional Ethernet filter is required. This IE shall uniquely identify an Ethernet Filter among all the Ethernet Filters provisioned for a given PFCP session.\n-\n-\n-\nX\n-\nEthernet Filter ID\nEthernet Filter Properties\nC\nThis IE shall be present when provisioning a bidirectional Ethernet Filter the first time (see clause 5.13.4).\n-\n-\n-\nX\n-\nEthernet Filter Properties\nMAC address\nO\nIf present, this IE shall identify the MAC address.\nThis IE may be present up to 16 times.\n-\n-\n-\nX\n-\nMAC address\nEthertype\nO\nIf present, this IE shall identify the Ethertype.\n-\n-\n-\nX\n-\nEthertype\nC-TAG\nO\nIf present, this IE shall identify the Customer-VLAN tag.\n-\n-\n-\nX\n-\nC-TAG\nS-TAG\nO\nIf present, this IE shall identify the Service-VLAN tag.\n-\n-\n-\nX\n-\nS-TAG\nSDF Filter\nO\nIf packet filtering is required, for Ethernet frames with Ethertype indicating IPv4 or IPv6 payload, this IE shall describe the IP Packet Filter Set.\nSeveral IEs with the same IE type may be present to represent a list of SDF filters.\n-\n-\n-\nX\n-\nSDF Filter\nTable 7.5.2.2-4: IP Multicast Addressing Info IE within PFCP Session Establishment Request\nOctet 1 and 2\nIP Multicast Addressing Info IE Type = 188 (decimal)\nOctets 3 and 4\nLength = n\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\nSxa\nSxb\nSxc\nN4\nN4mb\nIP Multicast Address\nM\nThis IE shall contain the IP multicast address(es) of the DL multicast flow(s) or indicate \"any\" IP multicast address.\nFor N4mb, the IP Multicast Address shall be set to the value of IP Multicast Address in the SSM for the MBS Session.\n-\n-\n-\nX\nX\nIP Multicast Address\nSource IP Address\nO\nWhen present, this IE shall contain the source specific IP address of the DL multicast flow.\nSeveral IEs with the same IE type may be present to represent multiple source specific addresses.\nIf this IE is not present, this indicates \"any\" source IP address.\n-\n-\n-\nX\nSource IP Address\nM\nThis IE shall be set to the value of the IP Source Address in the SSM for the MBS Session.\n-\n-\n-\n-\nX\nTable 7.5.2.2-5: Redundant Transmission Detection Parameters IE in PDI\nOctet 1 and 2\nRedundant Transmission Detection Parameters IE Type = 255 (decimal)\nOctets 3 and 4\nLength = n\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\nSxa\nSxb\nSxc\nN4\nN4mb\nLocal F-TEID for Redundant Transmission\nM\nThis IE shall identify the local F-TEID to match for an incoming packet for redundant transmission.\nThe CP function shall set the CHOOSE (CH) bit to 1 if it requests the UP function to assign a local F-TEID to the PDR.\n-\n-\n-\nX\n-\nF-TEID\nNetwork Instance for Redundant Transmission\nC\nThis IE shall be included if the Local F-TEID for Redundant Transmission uses a different network Instance than the Network Instance used for the Local F-TEID for the primary GTP-U tunnel.\n-\n-\n-\nX\n-\nNetwork Instance\nTable 7.5.2.2-6: Transport Delay Reporting IE in Create PDR IE\nOctet 1 and 2\nTransport Delay Reporting IE Type = 271 (decimal)\nOctets 3 and 4\nLength = n\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\nSxa\nSxb\nSxc\nN4\nN4mb\nPreceding UL GTP-U Peer\nM\nThis IE shall identify the preceding UL GTP-U peer.\n-\n-\n-\nX\n-\nRemote GTP-U Peer\nDSCP\nO\nIf present, this IE shall contain the DSCP to use to measure the GTP-U path delay with the preceding UL GTP-U peer.\n-\n-\n-\nX\n-\nTransport Level Marking\nTable 7.5.2.2-7: Protocol Description IE\nOctet 1 and 2\nProtocol Description IE Type = 334 (decimal)\nOctets 3 and 4\nLength = n\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\nSxa\nSxb\nSxc\nN4\nN4mb\nTransport Protocol\nO\nWhen present, it shall indicate the transport protocol used by the media flow.\n-\n-\n-\nX\n-\nMedia Transport Protocol\nRTP Header Extension Information\nC\nThis IE shall be present if RTP or SRTP is used and the RTP payload packets contains a RTP Header Extension that can be used for PDU Set identification and/or End of Data Burst marking.\nWhen present, this IE shall contain information on the RTP header extension that can be used for PDU Set identification and/or End of Data Burst marking. See Table 7.5.2.2-8.\n(NOTE 1)\n-\n-\n-\nX\n-\nRTP Header Extension Information\nRTP Payload Information\nO\nWhen present, it shall contain RTP Payload information for the RTP stream, which can be used to derive the PDU Set information and/or End of Data Burst marking. See Table 7.5.2.2-9.\nSeveral IEs with the same IE type may be present to describe multiple RTP Payload Information.\n(NOTE 1) (NOTE 2)\n-\n-\n-\nX\n-\nRTP Payload Information\nNOTE 1:\tIf the RTP Payload Information is present and contains one or more Payload Type values, the UPF may only parse the RTP packets with an RTP header containing any of these Payload Type value(s). Otherwise, if the RTP Payload Information is absent or does not contain any Payload Type value, the UPF should parse all the RTP packets of the media flow and use either the RTP Header Extension if included, or the Payload format to derive the PDU set information (see Guidelines for PDU Set identification in clauses A.1 and A.2 of 3GPP TS 26.522 [79]).\nNOTE 2:\tIn this release of the specification, only one RTP Payload Information IE may be provisioned.\nNOTE 3:\tVendor/operator specific attributes may be supported as defined in clauses 5.9 and 8.1.1.\nTable 7.5.2.2-8: RTP Header Extension Information IE\nOctet 1 and 2\nRTP Header Extension Information IE Type = 340 (decimal)\nOctets 3 and 4\nLength = n\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\nSxa\nSxb\nSxc\nN4\nN4mb\nRTP Header Extension Type\nC\nThis IE shall be present if RTP or SRTP is used and the RTP payload packets contains a RTP Header Extension that can be used for PDU Set identification and/or End of Data Burst marking.\nWhen present, it shall indicate the RTP header extension type.\n-\n-\n-\nX\n-\nRTP Header Extension Type\nRTP Header Extension ID\nC\nThis IE shall be present if the RTP Header Extension Type IE is present.\nWhen present, the RTP Header Extension ID shall be set to the Id of the RTP header extension identified by the RTP Header Extension Type IE, as defined in IETF RFC 8285 [86].\n-\n-\n-\nX\n-\nRTP Header Extension ID\nRTP Header Extension Additional Information\nO\nThis IE may be present to provide additional information on the RTP header extension.\n-\n-\n-\nX\n-\nRTP Header Extension Additional Information\nNOTE:\tVendor/operator specific attributes may be supported as defined in clauses 5.9 and 8.1.1.\nTable 7.5.2.2-9: RTP Payload Information IE\nOctet 1 and 2\nRTP Payload Information IE Type = 341 (decimal)\nOctets 3 and 4\nLength = n\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\nSxa\nSxb\nSxc\nN4\nN4mb\nRTP Payload Type\nC\nThis IE shall be present when the RTP Payload Format is present, otherwise it may be present.\nWhen present, this IE shall contain the list of Payload Type (PT) values in the RTP header of RTP packets the UPF may parse to derive the PDU Set Information.\nSeveral IEs with the same IE type may be present to describe multiple Payload Types.\n(NOTE)\n-\n-\n-\nX\n-\nRTP Payload Type\nRTP Payload Format\nO\nWhen present, it shall indicate the RTP Payload format as defined in 3GPP TS 26.522 [79].\n(NOTE)\n-\n-\n-\nX\n-\nRTP Payload Format\nNOTE:\tThe RTP Payload Type(s) shall correspond to the RTP Payload Format if the RTP Payload Format is present.",
      "chunk_type": "requirement",
      "cross_references": [
        "clause_5.2.1",
        "clause_5.24.5.3",
        "clause_8.2.25",
        "clause_5.21",
        "clause_5.33.7",
        "clause_5.13.1",
        "clause_5.25",
        "clause_5.21.1",
        "clause_5.13.4",
        "table_7.5.2.2-1",
        "table_7.5.2.2-2",
        "table_7.5.2.2-4",
        "table_7.5.2.2-6",
        "table_7.5.2.2-7",
        "table_7.5.2.2-3",
        "table_7.5.2.2-5",
        "table_7.5.2.2-8",
        "table_7.5.2.2-9",
        "figure_7.5.2.2-1",
        "ts_38.415",
        "ts_26.522"
      ]
    },
    {
      "chunk_id": "ts_29.244_7.5.2.3",
      "section_id": "7.5.2.3",
      "section_title": "Create FAR IE within PFCP Session Establishment Request",
      "content": "The Create FAR grouped IE shall be encoded as shown in Figure 7.5.2.3-1.\nTable 7.5.2.3-1: Create FAR IE within PFCP Session Establishment Request\nOctet 1 and 2\nCreate FAR IE Type = 3 (decimal)\nOctets 3 and 4\nLength = n\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\nSxa\nSxb\nSxc\nN4\nN4mb\nFAR ID\nM\nThis IE shall uniquely identify the FAR among all the FARs configured for that PFCP session.\nX\nX\nX\nX\nX\nFAR ID\nApply Action\nM\nThis IE shall indicate the action to apply to the packets, See clauses 5.2.1 and 5.2.3.\nX\nX\nX\nX\nX\nApply Action\nForwarding Parameters\nC\nThis IE shall be present when the Apply Action requests the packets to be forwarded. It may be present otherwise.\nWhen present, this IE shall contain the forwarding instructions to be applied by the UP function when the Apply Action requests the packets to be forwarded.\nSee table 7.5.2.3-2.\nX\nX\nX\nX\n-\nForwarding Parameters\nDuplicating Parameters\nC\nThis IE shall be present when the Apply Action requests the packets to be duplicated. It may be present otherwise.\nWhen present, this IE shall contain the forwarding instructions to be applied by the UP function for the traffic to be duplicated, when the Apply Action requests the packets to be duplicated.\nSeveral IEs with the same IE type may be present to represent to duplicate the packets to different destinations. See NOTE 1.\nSee table 7.5.2.3-3.\nX\nX\n-\n-\n-\nDuplicating Parameters\nBAR ID\nO\nWhen present, this IE shall contain the BAR ID of the BAR defining the buffering instructions to be applied by the UP function when the Apply Action requests the packets to be buffered.\nX\n-\n-\nX\n-\nBAR ID\nRedundant Transmission Forwarding Parameters\nC\nThis IE shall be present when the Apply Action requests the packets to be duplicated for redundant transmission and the Forwarding Parameters IE is included. It may be present otherwise.\nWhen present, this IE shall contain the forwarding instructions to be applied by the UP function for the traffic to be duplicated, when the Apply Action requests the packets to be duplicated for redundant transmission. Except for the parameters included in the Redundant Transmission Parameters IE, the duplicated packets shall apply the same parameters as those indicated in the Forwarding Parameters IE.\nSee table 7.5.2.3-4.\n-\n-\n-\n-\n-\nRedundant Transmission Forwarding Parameters\nMBS Multicast Parameters\nC\nThis IE shall be present when the Apply Action is set to \"FSSM\". This requests the MB-UPF to forward the MBS session data to a Low Layer SSM.\n-\n-\n-\n-\nX\nMBS Multicast Parameters\nAdd MBS Unicast Parameters\nC\nThis IE shall be present when the Apply Action is set to \"MBSU\". This requests the MB-UPF to forward the MBS session data to a remote GTP-U peer for unicast transport.\nSeveral IEs with the same IE type may be present to request the MB-UPF to forward the MBS session data to multiple remote GTP-U peers.\n-\n-\n-\n-\nX\nAdd MBS Unicast Parameters\nNOTE 1:\tThe same user plane packets may be required, according to operator's policy and configuration, to be duplicated to different SX3LIFs.\nTable 7.5.2.3-2: Forwarding Parameters IE in FAR\nOctet 1 and 2\nForwarding Parameters IE Type = 4 (decimal)\nOctets 3 and 4\nLength = n\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\nSxa\nSxb\nSxc\nN4\nN4mb\nDestination Interface\nM\nThis IE shall identify the destination interface of the outgoing packet.\nX\nX\nX\nX\n-\nDestination Interface\nNetwork Instance\nO\nWhen present, this IE shall identify the Network instance towards which to send the outgoing packet. See NOTE 1.\nX\nX\nX\nX\n-\nNetwork Instance\nRedirect Information\nC\nThis IE shall be present if the UP function is required to enforce traffic redirection towards a redirect destination provided by the CP function.\n-\nX\nX\nX\n-\nRedirect Information\nOuter Header Creation\nC\nThis IE shall be present if the UP function is required to add one or more outer header(s) to the outgoing packet. If present, it shall contain the F-TEID of the remote GTP-U peer when adding a GTP-U/UDP/IP header, or the Destination IP address and/or Port Number when adding a UDP/IP header or an IP header or the C-TAG/S-TAG (for 5GC). See NOTE 2.\nX\nX\n-\nX\n-\nOuter Header Creation\nTransport Level Marking\nC\nThis IE shall be present if the UP function is required to mark the IP header with the DSCP marking as defined by IETF RFC 2474 [22]. When present for EPC, it shall contain the value of the DSCP in the TOS/Traffic Class field set based on the QCI, and optionally the ARP priority level, of the associated EPS bearer, as described in clause 5.10 of 3GPP TS 23.214 [2]. When present for 5GC, it shall contain the value of the DSCP in the TOS/Traffic Class field set based on the 5QI, the Priority Level (if explicitly signalled), and optionally the ARP priority level, of the associated QoS flow, as described in clause 5.8.2.7 of 3GPP TS 23.501 [28],\nX\nX\n-\nX\n-\nTransport Level Marking\nForwarding Policy\nC\nThis IE shall be present if a specific forwarding policy is required to be applied to the packets. It shall be present if the Destination Interface IE is set to SGi-LAN / N6-LAN. It may be present if the Destination Interface is set to Core, Access, or CP-Function. See NOTE 2.\nWhen present, it shall contain an Identifier of the Forwarding Policy locally configured in the UP function.\n-\nX\nX\nX\n-\nForwarding Policy\nMetadata\nO\nThis IE may be included to provide the metadata by the AF which the UPF needs to add to traffic sent over a Service Function Chain.\nHow the UPF transforms the metadata into actual information sent with the traffic (e.g., in the encapsulation header) is based on local policies related with the Forwarding Policy and not specified.\n-\n-\n-\nX\n-\nMetadata\nHeader Enrichment\nO\nThis IE may be present if the UP function indicated support of Header Enrichment of UL traffic. When present, it shall contain information for header enrichment.\n-\nX\nX\nX\n-\nHeader Enrichment\nLinked Traffic Endpoint ID\nC\nThis IE may be present, if it is available and the UP function indicated support of the PDI optimisation feature, (see clause 8.2.25). When present, it shall identify the Traffic Endpoint ID allocated for this PFCP session to receive the traffic in the reverse direction (see clause 5.2.3.1).\nX\nX\n-\nX\n-\nTraffic Endpoint ID\nProxying\nC\nThis IE shall be present if proxying is to be performed by the UP function.\nWhen present, this IE shall contain the information that the UPF shall respond to Address Resolution Protocol and / or IPv6 Neighbour Solicitation based on the local cache information for the Ethernet PDUs.\n-\n-\n-\nX\n-\nProxying\nDestination Interface Type\nC\nWhen present, this IE shall indicate the 3GPP interface type of the destination interface.\nThis IE shall be present if the FAR is referenced by a MAR (see NOTE 3 of Table 7.5.2.5-1).\nThis IE shall also be present if this is a FAR for a DL data forwarding tunnel. Otherwise this IE may be present, if required by functionalities in the UP Function, e.g. for performance measurements.\nX\nX\n-\nX\n-\n3GPP Interface Type\nData Network Access Identifier\nC\nThis IE shall be present over N16a to link the UL FAR in an UL CL or BP towards a specific local PSA, if more than one local PSA has been inserted by an I-SMF. It may be present over N16a otherwise. This IE shall not be sent over N4.\nWhen present, it shall be set to the DNAI associated to the local PSA towards which the UL traffic shall be forwarded.\n-\n-\n-\n-\n-\nData Network Access Identifier\nIP Address and Port Number Replacement\nC\nThis IE shall be present if the UP function indicated support of replacing the source and destination IP address and Port Number of an (inner) IP packet, and if the source or destination IP address and/or port number of the (Inner) IP packet shall be modified, e.g. for Edge Relocation using EAS IP address and Port number Replacement (see clause 5.33.3) or EAS discovery procedure with V-EASDF using IP replacement mechanism for supporting HR-SBO (see clause 5.33.6).\nThis IE shall also be present if the destination IP address and/or port number of the (Inner) IP packet shall be modified, e.g. for EAS Discovery procedure with Local DNS Server/Resolver using Local DNS Server/Resolver IP address and Port number Replacement (see clause 5.33.4).\nThis IE shall also be present if the souce IP address of the (Inner) IP packet shall be modified, e.g. for UE IP address replacement to support DNS traffic routing for different UEs with same private UE IP address (see clause 5.33.7).\n(NOTE 3)\n-\n-\n-\nX\n-\nIP Address and Port Number Replacement\nN6 Routing Information\nO\nThis IE may be present in an UL FAR when using distinct N6 tunnels from the V-UPF to the V-EASDF for differentiating HR-SBO PDU sessions with overlapping private UE IP addresses. See clause 5.33.7.\n-\n-\n-\nX\n-\nN6 Routing Information\nNOTE 1:\tThe Network Instance parameter is needed e.g. in the following cases:\n-\tPGW/TDF UP function supports multiple PDNs with overlapping IP addresses;\n-\tSGW UP function is connected to PGWs in different IP domains (S5/S8);\n-\tPGW UP function is connected to SGWs in different IP domains (S5/S8);\n-\tSGW UP function is connected to eNodeBs in different IP domains;\n-\tUPF is connected to 5G-ANs in different IP domains;\n-\tSeparation of multiple 5G VN groups communication in the UPF;\n-\tIndirect data forwarding.\nNOTE 2:\tIf the Outer Header Creation and Forwarding Policy are present, the UP function shall put the user plane packets in the user plane tunnel by applying Outer Header Creation, after enforcing the required Forwarding Policy.\nNOTE 3:\tAs opposed to the Outer Header Creation IE, this IE does not result in adding any outer header to the outgoing packet.\nTable 7.5.2.3-3: Duplicating Parameters IE in FAR\nOctet 1 and 2\nDuplicating Parameters IE Type = 5 (decimal)\nOctets 3 and 4\nLength = n\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\nSxa\nSxb\nSxc\nN4\nN4mb\nDestination Interface\nM\nThis IE shall identify the destination interface of the outgoing packet.\nX\nX\n-\n-\n-\nDestination Interface\nOuter Header Creation\nC\nThis IE shall be present if the UP function is required to add one or more outer header(s) to the outgoing packet. If present, it shall contain the F-TEID of the remote GTP-U peer. See NOTE 1.\nX\nX\n-\n-\n-\nOuter Header Creation\nTransport Level marking\nC\nThis IE shall be present if the UP function is required to mark the IP header with the DSCP marking as defined by IETF RFC 2474 [22]. When present, it shall contain the value of the DSCP in the TOS/Traffic Class field.\nX\nX\n-\n-\n-\nTransport Level Marking\nForwarding Policy\nC\nThis IE shall be present if a specific forwarding policy is required to be applied to the packets. When present, it shall contain an Identifier of the Forwarding Policy locally configured in the UP function.\nX\nX\n-\n-\n-\nForwarding Policy\nNOTE 1:\tIf the Outer Header Creation and Forwarding Policy are present, the UP function shall put the user plane packets in the user plane tunnel by applying Outer Header Creation, after enforcing the required Forwarding Policy.\nTable 7.5.2.3-4: Redundant Transmission Forwarding Parameters IE in FAR\nOctet 1 and 2\nRedundant Transmission Forwarding Parameters IE Type = 270 (decimal)\nOctets 3 and 4\nLength = n\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\nSxa\nSxb\nSxc\nN4\nN4mb\nOuter Header Creation\nM\nThis IE shall be present if the UP function is required to perform the redundant transmission of the outgoing packet.\nIf present, it shall contain the F-TEID of the remote GTP-U peer for redundant transmission.\n-\n-\n-\nX\n-\nOuter Header Creation\nNetwork Instance for Redundant Transmission\nC\nThis IE shall be included if the GTP-U tunnel used for redundant transmission uses a different network Instance than the Network Instance used for the primary GTP-U tunnel.\n-\n-\n-\nX\n-\nNetwork Instance\nTable 7.5.2.3-5: MBS Multicast Parameters IE in the Create FAR IE\nOctet 1 and 2\nMBS Multicast Parameters IE Type = 301 (decimal)\nOctets 3 and 4\nLength = n\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\nSxa\nSxb\nSxc\nN4\nN4mb\nDestination Interface\nM\nThis IE shall identify the destination interface of the outgoing packet.\n-\n-\n-\n-\nX\nDestination Interface\nNetwork Instance\nO\nWhen present, this IE shall identify the Network instance towards which to send the outgoing packet.\n-\n-\n-\n-\nX\nNetwork Instance\nOuter Header Creation\nM\nThis IE shall instruct the MB-UPF to create a GTP-U header using the Low Layer SSM and the C-TEID allocated to the MBS session.\n-\n-\n-\n-\nX\nOuter Header Creation\nTransport Level marking\nC\nThis IE shall be present if the UP function is required to mark the IP header with the DSCP marking as defined by IETF RFC 2474 [22]. When present, it shall contain the value of the DSCP in the TOS/Traffic Class field.\n-\n-\n-\n-\nX\nTransport Level Marking\nDestination Interface Type\nO\nThis IE may be present to indicate the 3GPP interface type of the destination interface, if required by functionalities in the UP Function, e.g. for performance measurements.\nSeveral IEs with the same IE type may be present to represent multiple destination interface types (e.g. N3mb and N19mb).\n-\n-\n-\n-\nX\n3GPP Interface Type\nTable 7.5.2.3-6: Add MBS Unicast Parameters IE in the Create FAR IE\nOctet 1 and 2\nAdd MBS Unicast Parameters IE Type = 302 (decimal)\nOctets 3 and 4\nLength = n\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\nSxa\nSxb\nSxc\nN4\nN4mb\nDestination Interface\nM\nThis IE shall identify the destination interface of the outgoing packet.\n-\n-\n-\n-\nX\nDestination Interface\nMBS Unicast Parameters ID\nM\nThis IE shall identify the MBS Unicast Parameters IE.\n-\n-\n-\n-\nX\nMBS Unicast Parameters ID\nNetwork Instance\nO\nWhen present, this IE shall identify the Network instance towards which to send the outgoing packet.\n-\n-\n-\n-\nX\nNetwork Instance\nOuter Header Creation\nM\nThis IE shall be present to request the MB-UPF to add one outer header to the outgoing packet. It shall contain the F-TEID of the remote GTP-U peer when adding a GTP-U/UDP/IP header.\n-\n-\n-\n-\nX\nOuter Header Creation\nTransport Level marking\nC\nThis IE shall be present if the UP function is required to mark the IP header with the DSCP marking as defined by IETF RFC 2474 [22]. When present, it shall contain the value of the DSCP in the TOS/Traffic Class field.\n-\n-\n-\n-\nX\nTransport Level Marking\nDestination Interface Type\nO\nThis IE may be present to indicate the 3GPP interface type of the destination interface, if required by functionalities in the UP Function, e.g. for performance measurements.\n-\n-\n-\n-\nX\n3GPP Interface Type",
      "chunk_type": "requirement",
      "cross_references": [
        "ts_23.214_clause_5.10",
        "ts_23.501_clause_5.8.2.7",
        "clause_8.2.25",
        "clause_5.2.3.1",
        "clause_5.33.3",
        "clause_5.33.6",
        "clause_5.33.4",
        "clause_5.33.7",
        "table_7.5.2.3-1",
        "table_7.5.2.3-2",
        "table_7.5.2.3-3",
        "table_7.5.2.3-4",
        "table_7.5.2.5-1",
        "table_7.5.2.3-5",
        "table_7.5.2.3-6",
        "figure_7.5.2.3-1",
        "ts_23.214",
        "ts_23.501"
      ]
    },
    {
      "chunk_id": "ts_29.244_7.5.2.4",
      "section_id": "7.5.2.4",
      "section_title": "Create URR IE within PFCP Session Establishment Request",
      "content": "The Create URR grouped IE shall be encoded as shown in Figure 7.5.2.4-1.\nTable 7.5.2.4-1: Create URR IE within PFCP Session Establishment Request\nOctet 1 and 2\nCreate URR IE Type = 6 (decimal)\nOctets 3 and 4\nLength = n\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\nSxa\nSxb\nSxc\nN4\nN4mb\nURR ID\nM\nThis IE shall uniquely identify the URR among all the URRs configured for this PFCP session.\nX\nX\nX\nX\nX\nURR ID\nMeasurement Method\nM\nThis IE shall indicate the method for measuring the network resources usage, i.e. whether the data volume, duration (i.e. time), combined volume/duration, or event shall be measured.\nX\nX\nX\nX\nX\nMeasurement Method\nReporting Triggers\nM\nThis IE shall indicate the trigger(s) for reporting network resources usage to the CP function, e.g. periodic reporting or reporting upon reaching a threshold, or envelope closure, or when an SMF instructs an UPF to report the reception of the End Marker packet from the old I-UPF during a Service Request procedure (see clauses 4.2.3.2 and 4.23.4.3 in 3GPP TS 23.502 [29]).\nX\nX\nX\nX\nX\nReporting Triggers\nMeasurement Period\nC\nThis IE shall be present if periodic reporting is required. When present, it shall indicate the period for generating and reporting usage reports.\nX\nX\nX\nX\nX\nMeasurement Period\nVolume Threshold\nC\nThis IE shall be present if volume-based measurement is used and reporting is required upon reaching a volume threshold. When present, it shall indicate the traffic volume value after which the UP function shall report network resources usage to the CP function for this URR.\nX\nX\nX\nX\nX\nVolume Threshold\nVolume Quota\nC\nThis IE shall be present if volume-based measurement is used and the CP function needs to provision a Volume Quota in the UP function (see clause 5.2.2.2)\nWhen present, it shall indicate the Volume Quota value.\n-\nX\nX\nX\n-\nVolume Quota\nEvent Threshold\nC\nThis IE shall be present if event-based measurement is used and reporting is required upon reaching an event threshold. When present, it shall indicate the number of events after which the UP function shall report to the CP function for this URR.\n-\nX\nX\nX\n-\nEvent Threshold\nEvent Quota\nC\nThis IE shall be present if event-based measurement is used and the CP function needs to provision an Event Quota in the UP function (see clause 5.2.2.2)\nWhen present, it shall indicate the Event Quota value.\n-\nX\nX\nX\n-\nEvent Quota\nTime Threshold\nC\nThis IE shall be present if time-based measurement is used and reporting is required upon reaching a time threshold. When present, it shall indicate the time usage after which the UP function shall report network resources usage to the CP function for this URR.\nX\nX\nX\nX\n-\nTime Threshold\nTime Quota\nC\nThis IE shall be present if time-based measurement is used and the CP function needs to provision a Time Quota in the UP function (see clause 5.2.2.2)\nWhen present, it shall indicate the Time Quota value\n-\nX\nX\nX\n-\nTime Quota\nQuota Holding Time\nC\nThis IE shall be present, for a time, volume or event-based measurement, if reporting is required and packets are no longer permitted to pass on when no packets are received during a given inactivity period.\nWhen present, it shall contain the duration of the inactivity period.\n-\nX\nX\nX\n-\nQuota Holding Time\nDropped DL Traffic Threshold\nC\nThis IE shall be present if reporting is required when the DL traffic being dropped exceeds a threshold.\nWhen present, it shall contain the threshold of the DL traffic being dropped.\nX\n-\n-\nX\n-\nDropped DL Traffic Threshold\nQuota Validity Time\nC\nThis IE shall be present if reporting is required when the Quota Validity time for a given Quota is over.\n-\nX\n-\nX\n-\nQuota Validity Time\nMonitoring Time\nO\nWhen present, this IE shall contain the time at which the UP function shall re-apply the volume or time threshold.\nX\nX\nX\nX\n-\nMonitoring Time\nSubsequent Volume Threshold\nO\nThis IE may be present if the Monitoring Time IE is present and volume-based measurement is used.\nWhen present, it shall indicate the traffic volume value after which the UP function shall report network resources usage to the CP function for this URR for the period after the Monitoring Time.\nX\nX\nX\nX\n-\nSubsequent Volume Threshold\nSubsequent Time Threshold\nO\nThis IE may be present if the Monitoring Time IE is present and time-based measurement is used.\nWhen present, it shall indicate the time usage after which the UP function shall report network resources usage to the CP function for this URR for the period after the Monitoring Time.\nX\nX\nX\nX\n-\nSubsequent Time Threshold\nSubsequent Volume Quota\nO\nThis IE may be present if Monitoring Time IE is present and volume-based measurement is used (see clause 5.2.2.2).\nWhen present, it shall indicate the Volume Quota value which the UP function shall use for this URR for the period after the Monitoring Time.\n-\nX\nX\nX\n-\nSubsequent Volume Quota\nSubsequent Time Quota\nO\nThis IE may be present if Monitoring Time IE is present and time-based measurement is used (see clause 5.2.2.2)\nWhen present, it shall indicate the Time Quota value which the UP function shall use for this URR for the period after the Monitoring Time.\n-\nX\nX\nX\n-\nSubsequent Time Quota\nSubsequent Event Threshold\nO\nThis IE may be present if the Monitoring Time IE is present and event-based measurement is used.\nWhen present, it shall indicate the number of events after which the UP function shall report to the CP function for this URR for the period after the Monitoring Time.\n-\nX\nX\nX\n-\nSubsequent Event Threshold\nSubsequent Event Quota\nO\nThis IE may be present if Monitoring Time IE is present and event-based measurement is used (see clause 5.2.2.2).\nWhen present, it shall indicate the Event Quota value which the UP function shall use for this URR for the period after the Monitoring Time.\n-\nX\nX\nX\n-\nSubsequent Event Quota\nInactivity Detection Time\nC\nThis IE shall be present if time-based measurement is used and the time measurement need to be suspended when no packets are received during a given inactivity period. When present, it shall contain the duration of the inactivity period.\n-\nX\nX\nX\n-\nInactivity Detection Time\nLinked URR ID\nC\nThis IE shall be present if linked usage reporting is required. When present, this IE shall contain the linked URR ID which is related with this URR (see clause 5.2.2.4).\nSeveral IEs with the same IE type may be present to represent multiple linked URRs which are related with this URR.\n-\nX\nX\nX\nX\nLinked URR ID\nMeasurement Information\nC\nThis IE shall be included if any of the following flag is set to \"1\".\nApplicable flags are:\n-\tMeasurement Before QoS Enforcement Flag: this flag shall be set to \"1\" if the traffic usage before any QoS Enforcement is requested to be measured.\n-\tInactive Measurement Flag: this flag shall be set to \"1\" if the measurement shall be paused (inactive). The measurement shall be performed (active) if the bit is set to \"0\" or if the Measurement Information IE is not present in the Create URR IE.\n-\tReduced Application Detection Information Flag: this flag may be set to \"1\", if the Reporting Triggers request to report the start or stop of application, to request the UP function to only report the Application ID in the Application Detection Information, e.g. for envelope reporting.\n-\tImmediate Start Time Metering Flag: this flag may be set to \"1\" if time-based measurement is used and the UP function is requested to start the time metering immediately at receiving the flag. .\n-\tMeasurement of Number of Packets Flag: this flag may be set to \"1\" when the Volume-based measurement applies, to request the UP function to report the number of packets in UL/DL/Total in addition to the measurement in octet.\n-\tSend Start Pause of Charging Flag: this flag may be set to \"1\" by the CP function if the UP Function is requested to send a Start Pause of Charging indication to the upstream GTP-U entity(s) when the Dropped DL Traffic Threshold is reached.\n-\tApplicable for Start of Pause of Charging Flag: this flag may be set to \"1\" if the URR is applicable for Start of Pause of Charging, so that the UP function shall stop the usage measurement for the URR when receiving Start Pause of Charging indication from the peer downstream GTP-U entity.\n-\tControl of Inactive Measurement Flag: the flag shall be set to \"1\" if the CP function requests the UP function to stop or resume the usage measurement for the URR with the \"ASPOC\" flag set to \"1\" according to the value of Inactive Measurement Flag.\n-\n-\n-\n-\nX\nX\n-\n-\nX\nX\nX\nX\nX\n-\nX\nX\nX\n-\n-\nX\nX\n-\n-\n-\nX\nX\nX\nX\nX\nX\nX\nX\n-\n-\n-\n-\n-\n-\n-\n-\nMeasurement Information\nTime Quota Mechanism\nC\nThis IE shall be present if time-based measurement based on CTP or DTP is used.\n-\nX\n-\n-\n-\nTime Quota Mechanism\nAggregated URRs\nC\nThis IE shall be included if the URR is used to support a Credit Pool.\nSeveral IEs with the same IE type may be present to provide multiple aggregated URRs.\n-\nX\n-\n-\n-\nAggregated URRs\nFAR ID for Quota Action\nC\nThis IE may be present if the Volume Quota IE and/or the Time Quota IE and/or Event Quota IE is provisioned in the URR and the UP Function indicated support of the Quota Action feature.\nWhen present, it shall contain the identifier of the substitute FAR the UP function shall apply, for the traffic associated to this URR, when exhausting any of these quotas. See NOTE 1, NOTE 3.\n-\nX\nX\nX\n-\nFAR ID\nEthernet Inactivity Timer\nC\nThis IE shall be present if Ethernet traffic reporting is used and the SMF requests the UP function to also report inactive UE MAC addresses.\nWhen present, it shall contain the duration of the Ethernet inactivity period.\n-\n-\n-\nX\n-\nAdditional Monitoring Time\nO\nWhen present, this IE shall contain the time at which the UP function shall re-apply the volume or time or event threshold/quota provisioned in the IE.\nSeveral IEs with the same IE type may be present to provide multiple Monitoring Times.\nX\nX\nX\nX\n-\nAdditional Monitoring Time\nNumber of Reports\nO\nThis IE may be present if the UP function supports the NORP feature. When present, it shall indicate the number of usage reports to be generated by the URR. See also clauses 5.2.2.2.1 and 5.2.2.3.1. See NOTE 2.\nX\nX\nX\nX\n-\nNumber of Reports\nExempted Application ID for Quota Action\nO\nThis IE may be present if the Volume Quota IE and/or the Time Quota IE and/or Event Quota IE is provisioned in the URR and the UP Function has indicated support of the QUASF feature as specified in clause 8.2.25.\nWhen present, it shall contain an Application ID matching packets that shall be exempted from applying the FAR ID for Quota Action when the quota has been exhausted.\nSeveral IEs with the same IE type may be present to provide multiple Application IDs.\nSee NOTE 4.\n-\nX\nX\nX\n-\nApplication ID\nExempted SDF Filter for Quota Action\nO\nThis IE may be present if the Volume Quota IE and/or the Time Quota IE and/or Event Quota IE is provisioned in the URR and the UP Function has indicated support of the QUASF feature as specified in clause 8.2.25.\nWhen present, it shall contain an SDF Filter matching packets that shall be exempted from applying the FAR ID for Quota Action when the quota has been exhausted.\nSeveral IEs with the same IE type may be present to provide multiple SDF Filters.\nSee NOTE 4.\n-\nX\nX\nX\n-\nSDF Filter\nUser Plane Inactivity Timer\nC\nThis IE shall be present, for a time, volume or event-based measurement, if reporting is required when no packets are received for any PDR(s) associated with the URR during a given inactivity period. See clause 5.11.3.\nWhen present, it shall contain the duration of the inactivity period.\n-\n-\n-\nX\n-\nUser Plane Inactivity Timer\nNOTE 1:\tThe substitute FAR used when exhausting a Volume Quota or Time Quota may be set to drop the packets, buffer the packets or redirect the traffic towards a redirect destination as specified in clause 5.4.7.\nNOTE 2:\tThis IE may be provisioned and set to \"1\" e.g. for a URR with the Dropped DL Traffic Threshold used for the Pause of Charging feature, if the UP function supports the NORP feature.\nNOTE 3:\tIf the FAR as indicated in the FAR ID for Quota Action is removed after being provisioned, the UP function shall behave as if the FAR ID for Quota Action is not provisioned and shall apply the default behaviour per local configuration when the quota is exhausted.\nNOTE 4:\tThe Exempted Application ID for Quota Action IE or Exempted Filter ID for Quota Action IE may be provisioned as the Restricted-Filter-Rule AVP or Filter ID AVP which is included in Final-Unit-Indication AVP from the online charging system when the Final-Unit-Action AVP is set to \"REDIRECT\" or \"RESTRICT_ACCESS\". See also 3GPP TS 32.299 [18].\nTable 7.5.2.4-2: Aggregated URRs\nOctet 1 and 2\nAggregated URRs = 118 (decimal)\nOctets 3 and 4\nLength = n\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\nSxa\nSxb\nSxc\nN4\nN4mb\nAggregated URR ID\nM\nThis IE shall be present for the aggregated URR ID of the URR sharing the credit pool.\n-\nX\n-\n-\n-\nAggregated URR ID\nMultiplier\nM\nThis IE shall be included to measure the abstract service units the traffic of the corresponding aggregated URR consumes from the credit pool.\n-\nX\n-\n-\n-\nMultiplier\nTable 7.5.2.4-3: Additional Monitoring Time\nOctet 1 and 2\nAdditional Monitoring Time = 147 (decimal)\nOctets 3 and 4\nLength = n\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\nSxa\nSxb\nSxc\nN4\nN4mb\nMonitoring Time\nM\nThis IE shall be present and contain the time at which the UP function shall re-apply the volume or time threshold/quota.\nX\nX\nX\nX\n-\nMonitoring Time\nSubsequent Volume Threshold\nO\nThis IE may be present if the Monitoring Time IE is present and volume-based measurement is used.\nWhen present, it shall indicate the traffic volume value after which the UP function shall report network resources usage to the CP function for this URR for the period after the Monitoring Time.\nX\nX\nX\nX\n-\nSubsequent Volume Threshold\nSubsequent Time Threshold\nO\nThis IE may be present if the Monitoring Time IE is present and time-based measurement is used.\nWhen present, it shall indicate the time usage after which the UP function shall report network resources usage to the CP function for this URR for the period after the Monitoring Time.\nX\nX\nX\nX\n-\nSubsequent Time Threshold\nSubsequent Volume Quota\nO\nThis IE may be present if Monitoring Time IE is present and volume-based measurement is used (see clause 5.2.2.2).\nWhen present, it shall indicate the Volume Quota value which the UP function shall use for this URR for the period after the Monitoring Time.\n-\nX\nX\nX\n-\nSubsequent Volume Quota\nSubsequent Time Quota\nO\nThis IE may be present if Monitoring Time IE is present and time-based measurement is used (see clause 5.2.2.2)\nWhen present, it shall indicate the Time Quota value which the UP function shall use for this URR for the period after the Monitoring Time.\n-\nX\nX\nX\n-\nSubsequent Time Quota\nSubsequent Event Threshold\nO\nThis IE may be present if the Monitoring Time IE is present and event-based measurement is used.\nWhen present, it shall indicate the number of events after which the UP function shall report to the CP function for this URR for the period after the Monitoring Time.\n-\nX\nX\nX\n-\nEvent Threshold\nSubsequent Event Quota\nO\nThis IE may be present if Monitoring Time IE is present and event-based measurement is used (see clause 5.2.2.2).\nWhen present, it shall indicate the Event Quota value which the UP function shall use for this URR for the period after the Monitoring Time.\n-\nX\nX\nX\n-\nEvent Quota",
      "chunk_type": "requirement",
      "cross_references": [
        "clause_5.2.2.2",
        "clause_5.2.2.4",
        "clause_8.2.25",
        "clause_5.11.3",
        "clause_5.4.7",
        "table_7.5.2.4-1",
        "ts_32.299_table_7.5.2.4-2",
        "table_7.5.2.4-3",
        "figure_7.5.2.4-1",
        "ts_23.502",
        "ts_32.299"
      ]
    },
    {
      "chunk_id": "ts_29.244_7.5.2.5",
      "section_id": "7.5.2.5",
      "section_title": "Create QER IE within PFCP Session Establishment Request",
      "content": "The Create QER grouped IE shall be encoded as shown in Figure 7.5.2.5-1.\nTable 7.5.2.5-1: Create QER IE within PFCP Session Establishment Request\nOctet 1 and 2\nCreate QER IE Type = 7 (decimal)\nOctets 3 and 4\nLength = n\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\nSxa\nSxb\nSxc\nN4\nN4mb\nQER ID\nM\nThis IE shall uniquely identify the QER among all the QER configured for that PFCP session\n-\nX\nX\nX\nX\nQER ID\nQER Correlation ID\nC\nThis IE shall be present if the UP function is required to correlate the QERs of several PFCP sessions, for APN-AMBR enforcement/APN rate control of multiple UE's PDN connections to the same APN.\n-\nX\n-\nX\n-\nQER Correlation ID\nGate Status\nM\nThis IE shall indicate whether the packets are allowed to be forwarded (the gate is open) or shall be discarded (the gate is closed) in the uplink and/or downlink directions.\n-\nX\nX\nX\nX\nGate Status\nMaximum Bitrate\nC\nThis IE shall be present if an MBR enforcement action shall be applied to packets matching this PDR. When present, this IE shall indicate the uplink and/or downlink maximum bit rate to be enforced for packets matching the PDR.\nFor EPC, this IE may be set to the value of:\n-\tthe APN-AMBR, for a QER that is referenced by all the PDRs of the non-GBR bearers of a PDN connection;\n-\tthe TDF session MBR, for a QER that is referenced by all the PDRs of a TDF session;\n-\tthe bearer MBR, for a QER that is referenced by all the PDRs of a bearer;\n-\tthe SDF MBR, for a QER that is referenced by all the PDRs of a SDF.\nFor 5GC, this IE may be set to the value of:\n-\tthe Session-AMBR, for a QER that is referenced by all the PDRs of the non-GBR QoS flows of a PDU session;\n-\tthe QoS Flow MBR, for a QER that is referenced by all the PDRs of a QoS Flow;\n-\tthe SDF MBR, for a QER that is referenced by all the PDRs of a SDF;\n-\tthe Authorized DL Session AMBR for Offloading, for a QER that is referenced by all the PDRs of the DL non-GBR QoS flows of a PDU session authorized for offloading to the local part of DN in VPLMN.\n-\nX\nX\nX\nX\nMBR\nGuaranteed Bitrate\nC\nThis IE shall be present if a GBR has been authorized to packets matching this PDR. When present, this IE shall indicate the authorized uplink and/or downlink guaranteed bit rate.\nThis IE may be set to the value of:\n-\tthe aggregate GBR, for a QER that is referenced by all the PDRs of a GBR bearer;\n-\tthe QoS Flow GBR, for a QER that is referenced by all the PDRs of a QoS Flow (for 5GC);\n-\tthe SDF GBR, for a QER that is referenced by all the PDRs of a SDF.\n-\nX\nX\nX\nX\nGBR\nPacket Rate\nC\nThis IE shall be present if a Packet Rate enforcement action (in terms of number of packets per time interval) shall be applied to packets matching this PDR.\nWhen present, this IE shall indicate the uplink and/or downlink maximum packet rate to be enforced for packets matching the PDR.\nThis IE may be set to the value of:\n-\tdownlink packet rate for Serving PLMN Rate Control, for a QER that is referenced by all PDRs of the UE belonging to the PDN connection, or belonging to the PDU session (5GC) using CIoT EPS Optimizations as described in 3GPP TS 23.401 [2] and 3GPP TS 23.501 [28], respectively;\n-\tuplink and/or downlink packet rate for APN Rate Control, for a QER that is referenced by all the PDRs of the UE belonging to all PDN connections to the same APN, or for Small Data Rate Control (5GC) for a QER related to the PDU session using CIoT EPS Optimizations as described in 3GPP TS 23.401 [2] and 3GPP TS 23.501 [28], respectively.\n-\nX\n-\nX\n-\nPacket Rate\nPacket Rate Status\nC\nThis IE may be present during the UE requested PDU session establishment, or UE requested PDN connection establishment.\nWhen present, the UP function shall first enforce these rules. Only after that shall the UP function enforce the rules in the Packet Rate IE.\n-\nX\n-\nX\n-\nPacket Rate Status\nDL Flow Level Marking\nC\nThis IE shall be set if the UP function is required to mark the packets for QoS purposes:\n-\tby the TDF-C, for DL flow level marking for application indication (see clause 5.4.5);\n-\tby the PGW-C, for setting the GTP-U Service Class Indicator extension header for service indication towards GERAN (see clause 5.4.12).\n-\nX\nX\n-\n-\nDL Flow Level Marking\nQoS flow identifier\nC\nThis IE shall be present if the QoS flow identifier shall be inserted or modified by the UPF or shall be inserted by the MB-UPF. (NOTE 2), (NOTE 3)\n-\n-\n-\nX\nX\nQFI\nReflective QoS\nC\nThis IE shall be present if the UP function is required to insert a Reflective QoS Indicator to request reflective QoS for uplink traffic. (NOTE 3)\n-\n-\n-\nX\n-\nRQI\nPaging Policy Indicator\nC\nThis IE shall be present if the UPF is required to set the Paging Policy Indicator (PPI) in outgoing packets (see clause 5.4.3.2 of 3GPP TS 23.501 [28]).\nWhen present, it shall be set to the PPI value to set. (NOTE 3)\n-\n-\n-\nX\n-\nPaging Policy Indicator\nAveraging Window\nO\nThis IE may be present if the UP function is required to use a different Averaging window than the default one. (NOTE 1)\n-\n-\n-\nX\n-\nAveraging Window\nQER Control Indications\nC\nThis IE shall be included if the CP function needs to provide the QoS enforcement control information:\n-\tRCSR (Rate Control Status Reporting): the CP function shall set this bit \"1\" to request the UP function to report the rate control status when the PFCP session is released.\n-\nX\n-\nX\n-\nQER Control Indications\nQER Indications\nC\nThis IE shall be included if at least one of the flags is set to \"1\".\n-\tIQFISN (Insert DL MBS QFI Sequence Number): this IE shall be set to \"1\" to request the MB-UPF to insert the DL MBS QFI Sequence Number in the PDU Session Container of the MBS data packets (see 3GPP TS 38.415 [34]).\n-\tEDBMI (End Of Data Burst Marking Indication): this bit shall be set \"1\" to request the UPF to set the End Of Data Burst indication together with the QFI (identifying the QoS flow conveying the Data Burst) in the PDU Set Information Container of the GTP-U packet encapsulating the last PDU of each data burst (see 3GPP TS 38.415 [34]), for the DL PDRs associated with the QER (see clause 5.38.4.4).\n-\tEML4S (ECN Marking for L4S): this IE shall be set to \"1\" to request the UPF to perform ECN marking for L4S for the traffic of the UL and/or DL PDRs associated with the QER (see clause 5.38.1).\n-\tPDUSM (PDU Set Marking): this IE shall be set to \"1\" to request the UPF to perform PDU Set marking for the traffic of the DL PDRs associated with the QER (see clause 5.38.3).\n-\n-\n-\n-\n-\n-\n-\n-\n-\n-\n-\n-\n-\nX\nX\nX\nX\n-\n-\n-\nQER Indications\nNOTE 1:\tFor a GBR QoS flow, as 5QI is not signalled over N4, one default averaging window shall be pre-configured in the UPF. For Non-GBR QoS Flows, e.g., for the measurement of the Session-AMBR, the averaging window to be used (if not received over N4) is implementation specific.\nNOTE 2:\tThe SMF may request the UPF to modify the QFI of downlink packets of a multicast QoS flow received from the MB-UPF to the QFI assigned by the SMF for the Associated QoS flow. See clause 5.34.3.2.\nNOTE 3:\tIn order to support ATSSS for MA PDU sessions with an access connected to EPC and an access connected to 5GC, for DL packets matching a DL PDR associated with a MAR, the UPF shall determine whether the DL packets are sent to an access connected to 5GC or to an access connected to EPC, using the Destination Interface Type IE of the DL FARs associated with the MAR, and the UPF shall include 5G specific information (e.g. QFI, RQI, PPI in the GTP-U PDU session container extension header) in the outgoing GTP-U packets only for DL packets that are sent on the access connected to 5GC, i.e. it shall not do so for DL packets sent on the access connected to EPC.",
      "chunk_type": "requirement",
      "cross_references": [
        "clause_5.4.5",
        "clause_5.4.12",
        "ts_23.501_clause_5.4.3.2",
        "clause_5.38.4.4",
        "clause_5.38.1",
        "clause_5.38.3",
        "clause_5.34.3.2",
        "table_7.5.2.5-1",
        "figure_7.5.2.5-1",
        "ts_23.401",
        "ts_23.501",
        "ts_38.415"
      ]
    },
    {
      "chunk_id": "ts_29.244_7.5.2.6",
      "section_id": "7.5.2.6",
      "section_title": "Create BAR IE within PFCP Session Establishment Request",
      "content": "The Create BAR grouped IE shall be encoded as shown in Figure 7.5.2.6-1.\nTable 7.5.2.6-1: Create BAR IE within PFCP Session Establishment Request\nOctet 1 and 2\nCreate BAR IE Type = 85 (decimal)\nOctets 3 and 4\nLength = n\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\nSxa\nSxb\nSxc\nN4\nN4mb\nBAR ID\nM\nThis IE shall uniquely identify the BAR provisioned for that PFCP session.\nX\n-\n-\nX\n-\nBAR ID\nDownlink Data Notification Delay\nC\nThis IE shall be present if the UP function indicated support of the Downlink Data Notification Delay parameter (see clause 8.2.28) and the UP function has to delay the notification to the CP function about the arrival of DL data packets.\nWhen present, it shall contain the delay the UP function shall apply between receiving a downlink data packet and notifying the CP function about it, when the Apply Action parameter requests to buffer the packets and notify the CP function.\nX\n-\n-\n-\n-\nDownlink Data Notification Delay\nSuggested Buffering Packets Count\nC\nThis IE may be present if the UP Function indicated support of the feature UDBC.\nWhen present, it shall contain the number of packets that are suggested to be buffered when the Apply Action parameter requests to buffer the packets. The packets that exceed the limit shall be discarded.\n-\nX\nX\nX\n-\nSuggested Buffering Packets Count\nMT-EDT Control Information\nO\nThis IE may be included to request the SGW-U to report the sum of DL Data Packets Size.\nX\n-\n-\n-\n-\nMT-EDT Control Information\nMT-SDT Control Information\nO\nThis IE may be included to request the UPF to report the sum of DL Data Packets Size per QoS flow.\n-\n-\n-\nX\n-\nMT-SDT Control Information\nDL Buffering Duration\nC\nThis IE shall be present when the Create BAR is included in the PFCP Session Modification Request message, and if the UP function indicated support of the DL Buffering Duration parameter in PFCP Session Modification Request feature (see DBDM feature in clause 8.2.25) and extended buffering of downlink data packet is required in the UP function.\nWhen present, this IE shall indicate the duration during which the UP function shall buffer the downlink data packets without sending any further notification to the CP function about the arrival of DL data packets.\nX\n-\n-\nX\n-\nDL Buffering Duration\nDL Buffering Suggested Packet Count\nO\nThis IE may be present when the Create BAR is included in the PFCP Session Modification Request message, and if the UP function indicated support of the DL Buffering Suggested Packet Count parameter in PFCP Session Modification Request feature (see DBDM feature in clause 8.2.25) and extended buffering of downlink data packet is required in the UP function.\nWhen present, this IE shall indicate the maximum number of downlink data packets suggested to be buffered in the UP function.\nX\n-\n-\nX\n-\nDL Buffering Suggested Packet Count",
      "chunk_type": "requirement",
      "cross_references": [
        "clause_8.2.28",
        "clause_8.2.25",
        "table_7.5.2.6-1",
        "figure_7.5.2.6-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_7.5.2.7",
      "section_id": "7.5.2.7",
      "section_title": "Create Traffic Endpoint IE within PFCP Session Establishment Request",
      "content": "The Create Traffic Endpoint grouped IE shall be encoded as shown in Figure 7.5.2.7-1.\nTable 7.5.2.7-1: Create Traffic Endpoint IE within PFCP Session Establishment Request\nOctet 1 and 2\nCreate Traffic Endpoint IE Type = 127(decimal)\nOctets 3 and 4\nLength = n\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\nSxa\nSxb\nSxc\nN4\nN4mb\nTraffic Endpoint ID\nM\nThis IE shall uniquely identify the Traffic Endpoint for that PFCP session.\nX\nX\nX\nX\nX\nTraffic Endpoint ID\nLocal F-TEID\nO\nIf present, this IE shall identify the local F-TEID to match for an incoming packet.\nThe CP function shall set the CHOOSE (CH) bit to 1 if the CP function requests the UP function to assign a local F-TEID to the Traffic Endpoint.\nX\nX\n-\nX\n-\nF-TEID\nNetwork Instance\nO\nThis IE shall be present if the CP function requests the UP function to allocate a UE IP address/prefix.\nIf present, this IE shall identify the Network instance to match for the incoming packet. See NOTE 1, NOTE 2.\nX\nX\nX\nX\nX\nNetwork Instance\nRedundant Transmission Detection Parameters\nO\nIf present, this IE shall contain the information used for the reception of redundant uplink packets on N3/N9 interfaces.\nSee Table 7.5.2.2-5.\n-\n-\n-\nX\n-\nRedundant Transmission Detection Parameters\nUE IP address\nO\nIf present, this IE shall identify the UE IP address as the source or destination IP address to match for the incoming packet. (NOTE 3).\nThe CP function shall set the CHOOSE IPV4 (CHV4) and/or CHOOSE IPV6 (CHV6) bits to 1 if the UP function supports the allocation of UE IP address/ prefix and the CP function requests the UP function to assign a UE IP address/prefix to the Traffic Endpoint.\nThis IE may also present to identify the IP address of the CP function as the destination IP address to match for the incoming packet, e.g. Radius, Diameter or DHCP signalling packet. (NOTE 6).\nThis IE may be present for a PFCP session established in the V-UPF (local PSA) for a HR-SBO PDU session if the UPF supports the UN6TU feature (see clause 8.2.25).\nIn the 5GC, several IEs with the same IE type may be present to represent multiple UE IP addresses, if the UPF indicated support of the IP6PL feature (see clause 5.21).\n-\nX\nX\nX\n-\nUE IP address\nMapped N6 IP Address\nO\nWhen present, the V-SMF shall set the CHOOSE IPV4 (CHV4) bit to 1 if the UP function supports the UMN6IP feature and the V-SMF requests the UP function to assign a mapped N6 IP address for a DL Traffic EndPoint as described in clause 5.33.7.\n-\n-\n-\nX\n-\nMapped N6 IP Address\nN6 Routing Information\nO\nThis IE may be present in a DL PDR when using distinct N6 tunnels from the V-EASDF to the V-UPF for differentiating HR-SBO PDU sessions with overlapping private UE IP addresses. See clause 5.33.7.\n-\n-\n-\nX\n-\nN6 Routing Information\nEthernet PDU Session Information\nO\nThis IE may be present to identify all the (DL) Ethernet packets matching an Ethernet PDU session (see clause 5.13.1).\n-\n-\n-\nX\n-\nEthernet PDU Session Information\nFramed-Route\nO\nThis IE may be present for a PDR if the UPF indicated support of Framed Routing (see clauses 8.2.25 and 5.16). If present, this IE shall describe a framed route.\nSeveral IEs with the same IE type may be present to provision a list of framed routes. (NOTE 3)\n-\nX\n-\nX\n-\nFramed-Route\nFramed-Routing\nO\nThis IE may be present for a DL PDR if the UPF indicated support of Framed Routing (see clauses 8.2.25 and 5.16). If present, this IE shall describe the routing method for the UP function for the IP route related to Framed-Routes or Framed-IPv6-Routes. (NOTE 5)\n-\nX\n-\nX\n-\nFramed-Routing\nFramed-IPv6-Route\nO\nThis IE may be present for a PDR if the UPF indicated support of Framed Routing (see clauses 8.2.25 and 5.16). If present, this IE shall describe a framed IPv6 route.\nSeveral IEs with the same IE type may be present to provision a list of framed IPv6 routes. (NOTE 3)\n-\nX\n-\nX\n-\nFramed-IPv6-Route\nQFI\nO\nThis IE may be present if the UPF has indicated it supports MTE feature as specified in clause 8.2.25.\nIf present, this IE shall identify the QoS Flow Identifier to match for the incoming packet received from the traffic endpoint.\nSeveral IEs with the same IE type may be present to provision a list of QFIs. When present, the full set of applicable QFIs shall be provided.\n-\n-\n-\nX\n-\nQFI\nSource Interface Type\nC\nWhen present, this IE shall indicate the 3GPP interface type of the source interface.\nThis IE shall be present if this is a Traffic Endpoint for a DL data forwarding tunnel. Otherwise this IE may be present, if required by functionalities in the UP Function, e.g. for performance measurements.\n(NOTE 4)\nX\nX\n-\nX\nX\n3GPP Interface Type\nLocal Ingress Tunnel\nC\nThis IE shall be present over N4mb, for Nmb9, or for N6mb if unicast transport is used over N6mb, if Traffic Endpoint ID is present in the DL PDR.\nIf present, this IE shall identify the IP address and the UDP port for a UDP/IP tunnel.\nThe CP function shall set the CHOOSE (CH) bit to 1 if the CP function requests the UP function to assign a local ingress tunnel to the PDR.\n-\n-\n-\n-\nX\nLocal Ingress Tunnel\nIP Multicast Addressing Info\nC\nThis IE shall be present over N4mb, if multicast transport is used over N6mb, if Traffic Endpoint ID is present in the DL PDR.\nSee Table 7.5.2.2-4.\n-\n-\n-\n-\nX\nIP Multicast Addressing Info\nMBS Session Identifier\nC\nThis IE shall be present when the PDR is created to receive MBS session data. (NOTE 7)\n-\n-\n-\nX\n-\nMBS Session Identifier\nArea Session ID\nC\nThis IE shall be present for a location dependent MBS service. When present, it shall contain the Area Session ID, which together with the MBS Session Identifier, uniquely identify the service area part of the content data of the MBS service. (NOTE 7)\n-\n-\n-\nX\n-\nArea Session ID\nRAT Type\nO\nThis IE may be present to provide the UP Function the current RAT Type for the UL PDR(s) for statistics purpose if the PFCP session is established for a MA PDU session.\n-\n-\n-\nX\n-\nRAT Type\nNOTE 1:\tThe Network Instance parameter is needed e.g. in the following cases:\n-\tPGW/TDF UP function supports multiple PDNs with overlapping IP addresses;\n-\tSGW UP function is connected to PGWs in different IP domains (S5/S8);\n-\tPGW UP function is connected to SGWs in different IP domains (S5/S8);\n-\tSGW UP function is connected to eNodeBs in different IP domains;\n-\tUPF is connected to 5G-ANs in different IP domains;\n-\tSeparation of multiple 5G VN groups communication in the UPF.\nNOTE 2:\tWhen a Local F-TEID is provisioned in the Traffic Endpoint, the Network Instance shall relate to the IP address of the F-TEID. Otherwise, the Network Instance shall relate to the UE IP address.\nNOTE 3:\tIf both the UE IP Address and the Framed-Route (or Framed-IPv6-Route) are present, the packets which are considered being matching the PDR shall match at least one of them.\nNOTE 4:\tIf the Source Interface Type is provisioned at the traffic endpoint, it shall not be provisioned in individual PDRs associated to the traffic endpoint.\nNOTE 5:\tIn this release of specification, the UP function shall announce the IP route(s) for Framed-Route(s) or Framed-IPv6-Route(s) to the PDN regardless of the value of the Framed-Routing.\nNOTE 6:\tThe CP IP Address parameter is needed e.g. perform Router Advertisements and match the destination IP address of the incoming packet if the Radius, Diameter or DHCP signaling packets between the SMF and the external DN is forwarded by the UPF.\nNOTE 7:\tThe Inclusion of the MBS Session Identifier, or MBS Session Identifier and Area Session ID for a location dependent MBS session, enables the UPF to allocate the same N19mb tunnel for the same MBS Session, or for the same MBS Session Identifier and Area Session ID for a location dependent MBS session, when receiving multiple PFCP Session Establishment or Modification Request messages for different PFCP sessions being associated with the same MBS session, or with the same MBS session and Area Session ID for a location dependent MBS session, and also helps the UPF to identify the PFCP sessions associated with a MBS Session, or with the same MBS session and Area Session ID for a location dependent MBS session.",
      "chunk_type": "requirement",
      "cross_references": [
        "clause_8.2.25",
        "clause_5.21",
        "clause_5.33.7",
        "clause_5.13.1",
        "table_7.5.2.7-1",
        "table_7.5.2.2-5",
        "table_7.5.2.2-4",
        "figure_7.5.2.7-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_7.5.2.8",
      "section_id": "7.5.2.8",
      "section_title": "Create MAR IE within PFCP Session Establishment Request",
      "content": "The Create MAR grouped IE shall be encoded as shown in Figure 7.5.2.8-1.\nTable 7.5.2.8-1: Create MAR IE within PFCP Session Establishment Request\nOctet 1 and 2\nCreate MAR IE Type = 165 (decimal)\nOctets 3 and 4\nLength = n\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\nSxa\nSxb\nSxc\nN4\nN4mb\nMAR ID\nM\nThis IE shall uniquely identify the MAR among all the MARs configured for that PFCP session.\n-\n-\n-\nX\n-\nMAR ID\nSteering Functionality\nM\nThis IE shall be present to indicate the applicable traffic steering functionality.\n-\n-\n-\nX\n-\nSteering Functionality\nSteering Mode\nM\nThis IE shall be present to indicate the steering mode.\n-\n-\n-\nX\n-\nSteering Mode\n3GPP Access Forwarding Action Information\nC\nThis IE shall be present to provision 3GPP access specific forwarding action information if the UE is registered for 3GPP access, except when steering mode is set to \"Active-Standby\", Non-3GPP access is the active access and 3GPP access is not used as Standby access. In the latter case, this IE may be present.\n(NOTE 1)\n-\n-\n-\nX\n-\n3GPP Access Forwarding Action Information\nNon-3GPP Access Forwarding Action Information\nC\nThis IE shall be present to provision non-3GPP access specific forwarding action information if the UE is registered for non-3GPP access, except when steering mode is set to \"Active-Standby\", 3GPP access is the active access and Non-3GPP access is not used as Standby access. In the latter case, this IE may be present.\n(NOTE 1)\n-\n-\n-\nX\n-\nNon-3GPP Access Forwarding Action Information\nThreshold Values\nC\nThis IE shall be present if the steering mode is \"Load Balancing\" with fixed split percentages or \"Priority-based\" and if available. This IE may also be present if the steering mode is \"Redundant\".\nWhen present, this IE shall contain the RTT and/or a Packet Loss Rate. If the Steering Mode is Redundant, either a (maximum) RTT or a (maximum) Packet Loss Rate may be provided, but not both.\n(NOTE 2)\n-\n-\n-\nX\n-\nThresholds\nSteering Mode Indicator\nC\nThis IE shall be included if at least one of the flags is set to \"1\":\n-\tALBI (Autonomous Load Balancing Indicator): this flag shall be set to \"1\" if the SMF allows the UPF to apply autonomous load-balance when the Steering Mode is Load-Balancing;\n-\tUEAI (UE Assistance Indicator): this flag shall be set to \"1\" if the SMF allows UE assistant load-balance when the Steering Mode is Load-Balancing.\n(NOTE 2)\n-\n-\n-\nX\n-\nSteering Mode Indicator\nTransport Mode\nC\nThis IE shall be present to indicate the transport mode of the MPQUIC functionality, if the Steering Functionality is set to the MPQUIC functionality. In all other cases, this IE shall be absent.\n-\n-\n-\nX\n-\nTransport Mode\nNOTE 1:\tFor the \"Active-Standby\" steering mode, if the network determines to not define a Standby access (as specified in clause 5.32.8 of 3GPP TS 23.501 [28]), the SMF shall either set the Priority IE within (Non-)3GPP Access Forwarding Action Information IE to the value \"No Standby\" or not include the (Non-)3GPP Access Forwarding Action Information IE for that access not defined as Standby access.\nNOTE 2:\tThe Threshold Values IE and the Steering Mode Indicator IE shall not be present together.\nTable 7.5.2.8-2: 3GPP Access Forwarding Action Information IE in the Create MAR IE\nOctet 1 and 2\n3GPP Access Forwarding Action Information 1 IE Type = 166 (decimal)\nOctets 3 and 4\nLength = n\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\nSxa\nSxb\nSxc\nN4\nN4mb\nFAR ID\nM\nThis IE shall uniquely identify the FAR among all the FARs configured for this PFCP session.\n-\n-\n-\nX\n-\nFAR ID\nWeight\nC\nThis IE shall be present if steering mode is set to \"Load Balancing\" to identify the weight of the FAR.\n(NOTE 1)\n-\n-\n-\nX\n-\nWeight\nPriority\nC\nThis IE shall be present if the steering mode is set to \"Active-Standby\" or \"Priority-based\". This IE may be present if the steering mode is set to \"Redundant\".\n(NOTE 2)\n-\n-\n-\nX\n-\nPriority\nURR ID\nC\nThis IE shall uniquely identify the URR among all the URRs configured for the PFCP session. This enables the SMF to request separate usage reports for different FARs (i.e. different accesses) (NOTE 3)\nSeveral IEs within the same IE type may be present to represent a list of URRs to be associated to the FAR.\n-\n-\n-\nX\n-\nURR ID\nRAT Type\nO\nThis IE may be present to provide the UP Function the current RAT Type for the DL FAR for statistics purpose.\n-\n-\n-\nX\n-\nRAT Type\nNOTE 1:\tThe weights for all FARs included in both 3GPP Access Forwarding Action Information and Non 3GPP Access Forwarding Action Information need to sum up to 100. If the autonomous load balance operation is allowed, the Weights shall be treated as the default percentages.\nNOTE 2:\tThe Priority value shall be set to \"Active\", \"Standby\" or \"No Standby\" if the Steering Mode is set to \"Active-Standby\". The Priority value shall be set to \"High\" or \"Low\" if the Steering Mode is set to \"Priority-based\". The Priority value shall be set to \"Primary\" or \"Secondary\" if the Steering Mode is set to \"Redundant\" and if the Priority IE is present. The 3GPP Access Forwarding Action Information and Non 3GPP Access Forwarding Action Information shall set different values; for the Redundant Steering Mode, this requirement shall apply only if the Priority IE is present.\nNOTE 3:\tOne or more URRs may still be provisioned in the Create PDR IE when an MAR ID is present, while the URR(s) provisioned in this IE shall present a different set of URR(s) to request separate usage reports.\nTable 7.5.2.8-3: Non-3GPP Access Forwarding Action Information IE in the Create MAR IE\nOctet 1 and 2\nNon-3GPP Access Forwarding Action Information IE Type = 167 (decimal)\nOctets 3 and 4\nLength = n\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\nSxa\nSxb\nSxc\nN4\nN4mb\nSame IEs and requirements as defined in Table 7.5.2.8-2",
      "chunk_type": "requirement",
      "cross_references": [
        "ts_23.501_clause_5.32.8",
        "table_7.5.2.8-1",
        "table_7.5.2.8-2",
        "table_7.5.2.8-3",
        "figure_7.5.2.8-1",
        "ts_23.501"
      ]
    },
    {
      "chunk_id": "ts_29.244_7.5.2.9",
      "section_id": "7.5.2.9",
      "section_title": "Create SRR IE within PFCP Session Establishment Request",
      "content": "The Create SRR grouped IE shall be encoded as shown in Figure 7.5.2.9-1.\nTable 7.5.2.9-1: Create SRR IE within PFCP Session Establishment Request\nOctet 1 and 2\nCreate SRR IE Type = 212 (decimal)\nOctets 3 and 4\nLength = n\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\nSxa\nSxb\nSxc\nN4\nN4mb\nSRR ID\nM\nThis IE shall uniquely identify the SRR among all the SRRs configured for this PFCP session.\n-\n-\n-\nX\n-\nSRR ID\nAccess Availability Control Information\nC\nThis IE shall be present if the UPF needs to report when an access type becomes available or not available (see clause 5.20.4.2).\n-\n-\n-\nX\n-\nAccess Availability Control Information\nQoS Monitoring per QoS flow Control Information\nC\nThis IE shall be present if per QoS Flow QoS monitoring reporting is triggered.\nSeveral IEs within the same IE type may be present to represent a list of QoS Monitoring per QoS flow Control Information for different QoS flows, or for different QoS parameters of a same QoS flow (see clause 5.39.2).\n-\n-\n-\nX\n-\nQoS Monitoring per QoS flow Control Information\nDirect Reporting Information\nC\nThis IE shall be present if the UPF indicated support of the DRQOS feature and if the QoS monitoring events shall be reported by the UPF directly to a Local NEF or AF, or both to the SMF and Local NEF/AF (see clause 5.33.5).\n(NOTE)\n-\n-\n-\nX\n-\nDirect Reporting Information\nTraffic Parameter Measurement Control Information\nC\nThis IE shall be present if the SMF requests the UPF to perform Traffic Parameter measurement for one or more QoS Flows. See clauses 5.37 and 5.38.4.\nSeveral IEs within the same IE type may be present to represent a list of Traffic Parameter Measurement Control Information for different QoS flows or different traffic parameters.\n-\n-\n-\nX\n-\nTraffic Parameter Measurement Control Information\nNOTE:\tIn this release of the specification, the Direct Reporting Information shall only be used for direct reporting of QoS monitoring per QoS flow.\nThe Access Availability Control Information IE shall be encoded as shown in Table 7.5.2.9-2.\nTable 7.5.2.9-2: Access Availability Control Information\nOctet 1 and 2\nAccess Availability Control Information = 216 (decimal)\nOctets 3 and 4\nLength = n\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\nSxa\nSxb\nSxc\nN4\nN4mb\nRequested Access Availability Information\nM\nThis IE shall indicate the requested information to be reported.\n-\n-\n-\nX\n-\nRequested Access Availability Information\nThe QoS Monitoring per QoS flow Control Information IE shall be encoded as shown in Table 7.5.2.9-3.\nTable 7.5.2.9-3: QoS Monitoring per QoS flow Control Information\nOctet 1 and 2\nQoS Monitoring per QoS flow Control Information = 242 (decimal)\nOctets 3 and 4\nLength = n\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\nSxa\nSxb\nSxc\nN4\nN4mb\nQFI\nM\nThis IE shall identify the QoS Flow Identifier for which QoS monitoring is required.\nSeveral IEs within the same IE type may be present to represent different QoS flows.\n-\n-\n-\nX\n-\nQFI\nRequested QoS Monitoring\nM\nThis IE shall indicate the QoS parameter(s) to be measured.\nFor packet delay monitoring, it shall indicate whether the uplink, downlink and/or round trip packet delay between the UE and the UPF (PSA) shall be monitored, and whether QoS monitoring is performed based on GTP-U path monitoring.\nFor congestion information monitoring, it shall indicate whether the uplink and/or downlink congestion information shall be monitored.\nFor data rate monitoring, it shall indicate whether the uplink and/or downlink data rate shall be monitored.\n-\n-\n-\nX\n-\nRequested QoS Monitoring\nReporting Frequency\nM\nThis IE shall indicate the type of reporting, i.e. event triggered or periodic QoS monitoring reporting.\n-\n-\n-\nX\n-\nReporting Frequency\nPacket Delay Thresholds\nC\nThis IE shall be present if the Requested QoS Monitoring indicates packet delay monitoring, event triggered QoS monitoring reporting is used and reporting is required upon reaching a delay threshold. When present, it shall indicate the packet delay after which the UP function shall report packet delay monitoring result for this SRR.\n-\n-\n-\nX\n-\nPacket Delay Thresholds\nMinimum Wait Time\nC\nThis IE shall be present if event triggered QoS monitoring reporting is required. When present, it shall indicate the minimum waiting time between two consecutive reports after which the UP function may report new QoS monitoring result for this SRR.\n-\n-\n-\nX\n-\nMinimum Wait Time\nMeasurement Period\nC\nThis IE shall be present if Periodic QoS monitoring reporting or, for packet delay monitoring, if Event Triggered QoS monitoring reporting is required.\nWhen present, it shall indicate the period for generating and reporting QoS monitoring reports (if periodic QoS monitoring reporting is required) and, for packet delay monitoring, the period used for detecting and reporting a QoS monitoring measurement failure (if Periodic QoS monitoring reporting or Event Triggered QoS monitoring reporting is required). (NOTE 1) (NOTE 2)\n-\n-\n-\nX\n-\nMeasurement Period\nReporting Suggestion Info\nC\nThis IE should be present if the event report can be delayed, i.e. it is delay tolerant.\n-\n-\n-\nX\n-\nReporting Suggestion Info\nMeasurement Indication\nC\nThis IE shall be included if at least one of the flags is set to \"1\".\n-\tDQFI (Default QoS Flow Indication): this bit shall be set to \"1\" if the QoS flow to be monitored is associated with the default QoS rule and the UPF shall include the same indication in the corresponding QoS Monitoring Measurement report. See also clause 4.15.4.5.1 of 3GPP TS 23.502 [29].\n-\n-\n-\nX\n-\nMeasurement Indication\nReporting Thresholds\nC\nThis IE shall be present if the Reporting Frequency indicates event triggered QoS monitoring reporting is used and the Requested QoS Monitoring indicates UL and/or DL congestion information monitoring or UL and/or DL data rate monitoring.\nWhen present, it shall indicate the Reporting threshold to be used by the UPF for sending event reports.\n-\n-\n-\nX\n-\nReporting Thresholds\nNOTE 1:\tFor packet delay monitoring, if no time stamp is received in uplink packet for a delay exceeding the Measurement Period (i.e. no measurement result is available in the UPF within the reporting period), the UP function shall generate a QoS monitoring report indicating a packet delay measurement failure to the SMF or Local NEF or AF.\nNOTE 2:\tFor packet delay monitoring, SMF implementations complying with an earlier version of the specification may not support providing the Measurement Period if the Reporting Frequency IE is set to Event Triggered QoS monitoring reporting. If so, it is implementation specific whether/how the UPF generates QoS monitoring measurement failure report.\nThe Direct Reporting Information IE shall be encoded as shown in Table 7.5.2.9-4.\nTable 7.5.2.9-4: Direct Reporting Information\nOctet 1 and 2\nDirect Reporting Information = 295 (decimal)\nOctets 3 and 4\nLength = n\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\nSxa\nSxb\nSxc\nN4\nN4mb\nEvent Notification URI\nM\nThis IE shall contain the notification URI to be used for sending the UPF event notifications.\n-\n-\n-\nX\n-\nEvent Notification URI\nNotification Correlation ID\nC\nThis IE shall indicate the notification correlation id to be included in the UPF event notifications. It shall be present if it is available.\n-\n-\n-\nX\n-\nNotification Correlation ID\nReporting Flags\nC\nThis IE shall be included if at least one of the flags is set to \"1\".\n-\tDUPL (Duplicate notification): this IE shall be set to \"1\" if event notifications shall be sent over N4 and directly to the notification URI indicated in the Event Notification URI IE. When this flag is set to \"0\", this indicates that the UPF shall only send the event notifications directly to the notification URI indicated in the Event Notification URI IE.\n-\n-\n-\nX\n-\nReporting Flags\nThe Traffic Parameter Measurement Control Information IE shall be encoded as shown in Table 7.5.2.9-5.\nTable 7.5.2.9-5.: Traffic Parameter Measurement Control Information IE\nOctet 1 and 2\nTraffic Parameter Measurement Control Information IE Type = 323 (decimal)\nOctets 3 and 4\nLength = n\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\nSxa\nSxb\nSxc\nN4\nN4mb\nQFI\nM\nThis IE shall identify the QoS Flow Identifier for which traffic parameter is requested to be measured.\nSeveral IEs within the same IE type may be present to represent different QoS flows.\n-\n-\n-\nX\n-\nQFI\nTraffic Parameter Measurement Indication\nM\nThis IE shall be included to indicate the requested traffic parameter measurement(s), as follows:\n-\tULPMI (UL Periodicity Measurement Indication): this bit shall be set to \"1\" to request the UPF to measure the UL Periodicity if the SMF does not receive the UL Periodicity from the PCF.\n-\tDLPMI (DL Periodicity Measurement Indication): this bit shall be set to \"1\" to request the UPF to measure the DL Periodicity if the SMF does not receive the DL Periodicity from the PCF.\n-\tN6JMI (N6 Jitter Measurement Indication): this bit shall be set to \"1\" to request the UPF to measure N6 Jitter.\n-\n-\n-\nX\n-\nTraffic Parameter Measurement Indication\nMeasurement Period\nC\nThis IE shall be present if Periodic traffic parameter measurement reporting is required.\nWhen present, it shall indicate the period for generating and reporting traffic parameter measurement reports.\n(NOTE)\n-\n-\n-\nX\n-\nMeasurement Period\nDL Periodicity\nC\nThis IE shall be present, if N6 jitter measurement is requested and if the DL Periodicity is available. When available, it shall contain the DL Periodicity to perform Jitter measurement.\n-\n-\n-\nX\n-\nDL Periodicity\nTraffic Parameter Threshold\nC\nThis IE shall be present if Traffic Parameter measurement reporting is required only upon reaching a threshold.\nWhen present, and if N6 jitter measurement is requested, it shall contain the Downlink N6 Jitter threshold after which the UP function shall report N6 Jitter measurement to the SMF.\n(NOTE)\n-\n-\n-\nX\n-\nTraffic Parameter Threshold\nNOTE:\tEither a Measurement Period or a Traffic Parameter Threshold shall be present.",
      "chunk_type": "requirement",
      "cross_references": [
        "clause_5.20.4.2",
        "clause_5.39.2",
        "clause_5.33.5",
        "ts_23.502_clause_4.15.4.5.1",
        "table_7.5.2.9-1",
        "table_7.5.2.9-2",
        "table_7.5.2.9-3",
        "table_7.5.2.9-4",
        "table_7.5.2.9-5",
        "figure_7.5.2.9-1",
        "ts_23.502"
      ]
    },
    {
      "chunk_id": "ts_29.244_7.5.2.10",
      "section_id": "7.5.2.10",
      "section_title": "Provide ATSSS Control Information IE within PFCP Session Establishment Request",
      "content": "The Provide ATSSS Control Information grouped IE shall be encoded as shown in Figure 7.5.2.10-1.\nTable 7.5.2.10-1: Provide ATSSS Control Information IE within PFCP Session Establishment Request\nOctet 1 and 2\nProvide ATSSS Control Information IE Type = 220 (decimal)\nOctets 3 and 4\nLength = n\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\nSxa\nSxb\nSxc\nN4\nN4mb\nMPTCP Control Information\nC\nThis IE shall be present if the PDU session is an MA PDU session and the MPTCP functionality is required.\n-\n-\n-\nX\n-\nMPTCP Control Information\nATSSS-LL Control Information\nC\nThis IE shall be present if the PDU session is an MA PDU session and the ATSSS-LL functionality is required.\n-\n-\n-\nX\n-\nATSSS-LL Control Information\nPMF Control Information\nC\nThis IE shall be present if the PDU session is an MA PDU session and the PMF functionality is required.\n-\n-\n-\nX\n-\nPMF Control Information\nMPQUIC Control Information\nC\nThis IE shall be present if the PDU session is an MA PDU session and the MPQUIC functionality is required.\n-\n-\n-\nX\n-\nMPQUIC Control Information",
      "chunk_type": "requirement",
      "cross_references": [
        "table_7.5.2.10-1",
        "figure_7.5.2.10-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_7.5.2.11",
      "section_id": "7.5.2.11",
      "section_title": "Provide RDS Configuration Information IE within PFCP Session Establishment Request",
      "content": "The Provide RDS Configuration Information IE shall be encoded as shown in Figure 7.5.2.11-1.\nTable 7.5.2.11-1: Provide RDS Configuration Information IE within PFCP Session Establishment Request\nOctet 1 and 2\nProvide RDS Configuration Information IE Type = 261 (decimal)\nOctets 3 and 4\nLength = n\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\nSxa\nSxb\nSxc\nN4\nN4mb\nRDS Configuration Information\nO\nWhen present, this IE indicates if the RDS mechanism is supported.\n-\nX\n-\nX\n-\nRDS Configuration Information",
      "chunk_type": "requirement",
      "cross_references": [
        "table_7.5.2.11-1",
        "figure_7.5.2.11-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_7.5.3.1",
      "section_id": "7.5.3.1",
      "section_title": "General",
      "content": "The PFCP Session Establishment Response shall be sent over the Sxa, Sxb, Sxc and N4 interface by the UP function to the CP function as a reply to the PFCP Session Establishment Request.\nTable 7.5.3.1-1: Information Elements in a PFCP Session Establishment Response\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\nSxa\nSxb\nSxc\nN4\nN4mb\nNode ID\nM\nThis IE shall contain the unique identifier of the sending Node.\nX\nX\nX\nX\nX\nNode ID\nCause\nM\nThis IE shall indicate the acceptance, partial acceptance or rejection of the corresponding request message.\nX\nX\nX\nX\nX\nCause\nOffending IE\nC\nThis IE shall be included if the rejection is due to a conditional or mandatory IE missing or faulty.\nX\nX\nX\nX\nX\nOffending IE\nUP F-SEID\nC\nThis IE shall be present if the cause is set to \"Request accepted (success)\". When present, it shall contain the unique identifier allocated by the UP function identifying the session.\nX\nX\nX\nX\nX\nF-SEID\nCreated PDR\nC\nThis IE shall be present if the cause is set to \"success\" and the UP function was requested to allocate a local F-TEID or a UE IP address/prefix or a Mapped N6 IP address for the PDR.\nWhen present, this IE shall contain the PDR information associated to the PFCP session. There may be several instances of this IE.\nSee table 7.5.3.2-1.\nX\nX\n-\nX\nX\nCreated PDR\nLoad Control Information\nO\nThe UP function may include this IE if it supports the load control feature and the feature is activated in the network.\nSee Table 7.5.3.3-1.\nX\nX\nX\nX\nX\nLoad Control Information\nOverload Control Information\nO\nDuring an overload condition, the UP function may include this IE if it supports the overload control feature and the feature is activated in the network.\nSee Table 7.5.3.4-1.\nX\nX\nX\nX\nX\nOverload Control Information\nPGW-U/SGW-U /UPF FQ-CSID\nC\nThis IE shall be included according to the requirements in clause 23 of 3GPP TS 23.007 [24] and clause 4.6 of 3GPP TS 23.527 [40].\nX\nX\n-\nX\n-\nFQ-CSID\nFailed Rule ID\nC\nThis IE shall be included if the Cause IE indicates a rejection due to a rule creation or modification failure.\nX\nX\nX\nX\nX\nFailed Rule ID\nCreated Traffic Endpoint\nC\nThis IE shall be present if the cause is set to \"success\" and the UP function was requested to allocate a local F-TEID or a UE IP address/prefix or a Mapped N6 IP address in a Create Traffic Endpoint IE. When present, it shall contain the local F-TEID, or UE IP address/prefix, or Mapped N6 IP address to be used for this Traffic Endpoint.\nThere may be several instances of this IE.\nX\nX\n-\nX\nX\nCreated Traffic Endpoint\nCreated Bridge/Router Info\nC\nThis IE shall be present if the UPF was requested to provide Bridge/Router information for TSN, TSC or DetNet in the PFCP Session Establishment Request. When present, it shall contain the Bridge/Router information for TSN, TSCTS or DetNet for the PFCP session.\nSee Table 7.5.3.6-1.\n-\n-\n-\nX\n-\nCreated Bridge/Router Info\nATSSS Control Parameters\nC\nThis IE shall be present if ATSSS functionality is required in the request message and the UPF allocates the resources and parameters corresponding to the required ATSSS functionality.\nSee Table 7.5.3.7-1.\n-\n-\n-\nX\n-\nATSSS Control Parameters\nRDS configuration information\nO\nWhen present, this IE shall contain the RDS configuration information the UP function supported for this PFCP session.\n-\nX\n-\nX\n-\nRDS configuration information\nPartial Failure Information\nC\nThis IE shall be present if the Cause IE indicates partial acceptance of the request to provide failure information related to a failed rule. See Table 7.5.3.1-2.\nSeveral IEs within the same IE type may be present to report failures to apply multiple rules.\n-\nX\nX\nX\nX\nPartial Failure Information\nCreated L2TP Session\nO\nThis IE may be present to include information for the Created L2TP session if the Cause IE indicates a success.\n-\nX\n-\nX\n-\nCreated L2TP Session\nMBS Session N4mb Information\nC\nThis IE shall be present if any IE in this grouped IE needs to be included.\n-\n-\n-\n-\nX\nMBS Session N4mb Information\nMBS Session N4 Information\nC\nThis IE shall be included if any IE in this grouped IE needs to be included as specified in clause 5.34.1.\nSeveral IE with the same IE type may be present to contain N4 Information for several MBS Sessions respectively.\n-\n-\n-\nX\n-\nMBS Session N4 Information\nTL-Container\nC\nThis IE shall be present if the UPF/CN-TL needs to send a TL-Container to the SMF/CUC to respond to TL-Container information received in the corresponding request.\n-\n-\n-\nX\n-\nTL-Container\nTable 7.5.3.1-2: Information Elements in a Partial Failure Information\nOctet 1 and 2\nPartial Failure Information IE Type = 272 (decimal)\nOctets 3 and 4\nLength = n\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\nSxa\nSxb\nSxc\nN4\nN4mb\nFailed Rule ID\nM\nThis IE shall indicate the rule that failed to be applied.\n-\nX\nX\nX\nX\nFailed Rule ID\nFailure Cause\nM\nThis IE shall indicate the reason why the rule could not be applied.\n-\nX\nX\nX\nX\nCause\nOffending IE Information\nM\nThis IE shall be included to report the offending IE which caused the rule activation failure, e.g. an unknown predefined rule name included in Activate Predefined Rules IE or an unknown Application ID in the PDI.\nSeveral IEs within the same IE type may be present to report multiple offending IEs.\n-\nX\nX\nX\nX\nOffending IE Information\nTable 7.5.3.1-3: Created L2TP Session IE in the PFCP Session Establishment Response message\nOctet 1 and 2\nCreated L2TP Session IE Type = 279 (decimal)\nOctets 3 and 4\nLength = n\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\nSxa\nSxb\nSxc\nN4\nN4mb\nDNS Server Address\nO\nThis IE may be present to include a DNS server address.\nSeveral IEs with the same IE type may be present to represent multiple DNS server addresses.\nThe order of the IEs in the message indicates the priority, i.e. the first IE shall contain the primary DNS server address and the second IE shall contain the secondary DNS server address.\n-\nX\n-\nX\n-\nDNS Server Address\nNBNS Server Address\nO\nThis IE may be present to include an NBNS server address.\nSeveral IEs with the same IE type may be present to represent multiple NBNS server addresses.\nThe order of the IEs in the message indicates the priority, i.e. the first IE shall contain the primary NBNS server address and the second IE shall contain the secondary NBNS server address.\n-\nX\n-\nX\n-\nNBNS Server Address\nLNS Address\nO\nThis IE may be present to include the used Tunnel Server Endpoint, i.e., the LNS IP address, for the PFCP Session.\n-\nX\n-\nX\n-\nLNS Address\nTable 7.5.3.1-4: MBS Session N4mb Information IE within PFCP Session Establishment Response\nOctet 1 and 2\nMBS Session N4mb Information IE Type = 303 (decimal)\nOctets 3 and 4\nLength = n\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\nSxa\nSxb\nSxc\nN4\nN4mb\nMulticast Transport Information\nC\nThis IE shall be present to include a low layer source specific multicast address information (i.e. multicast destination address and related source IP address) and a GTP-U Common Tunnel EndPoint Identifier (C-TEID) if the CP function has requested to allocate such information for multicast transport over N3mb and/or N19mb.\n-\n-\n-\n-\nX\nMulticast Transport Information\nTable 7.5.3.1-5: MBS Session N4 Information IE within PFCP Session Establishment Response\nOctet 1 and 2\nMBS Session N4 Information IE Type = 311 (decimal)\nOctets 3 and 4\nLength = n\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\nSxa\nSxb\nSxc\nN4\nN4mb\nMBS Session Identifier\nM\n-\n-\n-\nX\n-\nMBS Session Identifier\nArea Session ID\nC\nThis IE shall be present for a location dependent MBS service. When present, it shall contain the Area Session ID, which together with the MBS Session Identifier, uniquely identify the service area part of the content data of the MBS service.\n-\n-\n-\nX\n-\nArea Session ID\nN19mb DL Tunnel ID\nC\nThis IE shall be present when the SMF has requested the UPF to allocate a Local F-TEID in the PDI or in the Create Traffic Endpoint IE. (NOTE 1)\n-\n-\n-\nX\n-\nF-TEID\nMBSN4Resp-Flags\nC\nThis IE shall be included if at least one of the flags is set to \"1\". NOTE 2.\n-\tNN19DT (New N19mb Downlink Tunnel): the UPF shall set this flag if it has allocated a new N19mb DL TEID for the MBS session;\n-\tJMTI (Joined N19mb Multicast Tree Indication): the UPF shall set this flag if it has joined the multicast tree from the MB-UPF;\n-\tN19DTR (N19mb Downlink Tunnel Removal): the UPF shall set this flag if it is about to remove the N19mb DL Tunnel for receiving the MBS session data.\n-\n-\n-\nX\n-\nMBSN4Resp-Flags\nNOTE 1:\tThe UPF need not include Created PDR or Created Traffic Endpoint to return the newly allocated N19mb DL TEID.\nNOTE 2:\tClause 5.34.3.2 explains what is indicated by the absence of the MBSN4Resp-Flags.",
      "chunk_type": "definition",
      "cross_references": [
        "ts_23.007_clause_23",
        "ts_23.007_clause_4.6",
        "clause_5.34.1",
        "clause_5.34.3.2",
        "table_7.5.3.1-1",
        "table_7.5.3.2-1",
        "table_7.5.3.3-1",
        "table_7.5.3.4-1",
        "table_7.5.3.6-1",
        "table_7.5.3.7-1",
        "table_7.5.3.1-2",
        "table_7.5.3.1-3",
        "table_7.5.3.1-4",
        "table_7.5.3.1-5",
        "ts_23.527_clause_4.6",
        "ts_23.007",
        "ts_23.527"
      ]
    },
    {
      "chunk_id": "ts_29.244_7.5.3.2",
      "section_id": "7.5.3.2",
      "section_title": "Created PDR IE within PFCP Session Establishment Response",
      "content": "The Created PDR grouped IE shall be encoded as shown in Figure 7.5.3.2-1.\nTable 7.5.3.2-1: Created PDR IE within PFCP Session Establishment Response\nOctet 1 and 2\nCreated PDR IE Type = 8 (decimal)\nOctets 3 and 4\nLength = n\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\nSxa\nSxb\nSxc\nN4\nN4mb\nPDR ID\nM\nX\nX\n-\nX\nX\nPDR ID\nLocal F-TEID\nC\nIf the UP function allocates the F-TEID, this IE shall be present and shall contain the local F-TEID to be used for this PDR.\nX\nX\n-\nX\n-\nF-TEID\nLocal F-TEID for Redundant Transmission\nC\nThis IE shall be present and shall contain the local F-TEID used for this PDR for the reception of redundant uplink packets on N3/N9 interfaces, if the CP function requested a Local F-TEID to be assigned for redundant transmission.\n-\n-\n-\nX\n-\nF-TEID\nUE IP Address\nC\nIf the UP function allocates the UE IP address/prefix, this IE shall be present and shall contain the UE IP address/ prefix assigned by the UP function.\nIn the 5GC, several IEs with the same IE type may be present to represent multiple UE IP addresses, if the UPF indicated support of the IP6PL feature (see clause 5.21).\n-\nX\n-\nX\n-\nUE IP Address\nMapped N6 IP Address\nC\nIf the UP function in VPLMN is requested to allocate the mapped N6 IP address for a HR-SBO PDU session, this IE shall be present and shall contain the mapped N6 IP address assigned by the UP function.\n-\n-\n-\nX\n-\nMapped N6 IP Address\nLocal Ingress Tunnel\nC\nIf the UP function allocates the Local Ingress Tunnel, this IE shall be present and shall contain the Local Ingress Tunnel to be used for this PDR.\n-\n-\n-\n-\nX\nLocal Ingress Tunnel",
      "chunk_type": "requirement",
      "cross_references": [
        "clause_5.21",
        "table_7.5.3.2-1",
        "figure_7.5.3.2-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_7.5.3.3",
      "section_id": "7.5.3.3",
      "section_title": "Load Control Information IE within PFCP Session Establishment Response",
      "content": "The Load Control Information grouped IE shall be encoded as shown in Figure 7.5.3.3-1.\nTable 7.5.3.3-1: Load Control Information IE within PFCP Session Establishment Response\nOctet 1 and 2\nLoad Control Information IE Type = 51 (decimal)\nOctets 3 and 4\nLength = n\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\nSxa\nSxb\nSxc\nN4\nN4mb\nLoad Control Sequence Number\nM\nSee clause 6.2.3.3.2 for the description and use of this parameter.\nX\nX\nX\nX\nX\nSequence Number\nLoad Metric\nM\nSee clause 6.2.3.3.2 for the description and use of this parameter.\nX\nX\nX\nX\nX\nMetric",
      "chunk_type": "requirement",
      "cross_references": [
        "clause_6.2.3.3.2",
        "table_7.5.3.3-1",
        "figure_7.5.3.3-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_7.5.3.4",
      "section_id": "7.5.3.4",
      "section_title": "Overload Control Information IE within PFCP Session Establishment Response",
      "content": "The Overload Control grouped IE shall be encoded as shown in Figure 7.5.3.4-1.\nTable 7.5.3.4-1: Overload Control Information IE within PFCP Session Establishment Response\nOctet 1 and 2\nOverload Control Information IE Type = 54 (decimal)\nOctets 3 and 4\nLength = n\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\nSxa\nSxb\nSxc\nN4\nN4mb\nOverload Control Sequence Number\nM\nSee 6.2.4.3.2 for the description and use of this parameter.\nX\nX\nX\nX\nX\nSequence Number\nOverload Reduction Metric\nM\nSee clause 6.2.4.3.2 for the description and use of this parameter.\nX\nX\nX\nX\nX\nMetric\nPeriod of Validity\nM\nSee clause 6.2.4.3.2 for the description and use of this parameter.\nX\nX\nX\nX\nX\nTimer\nOverload Control Information Flags\nC\nThis IE shall be included if any of flag in this IE is set.\nX\nX\nX\nX\nX\nOCI Flags",
      "chunk_type": "requirement",
      "cross_references": [
        "clause_6.2.4.3.2",
        "table_7.5.3.4-1",
        "figure_7.5.3.4-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_7.5.3.5",
      "section_id": "7.5.3.5",
      "section_title": "Created Traffic Endpoint IE within PFCP Session Establishment Response",
      "content": "The Created Traffic Endpoint grouped IE shall be encoded as shown in Figure 7.5.3.5-1.\nTable 7.5.3.5-1: Created Traffic Endpoint IE within PFCP Session Establishment Response\nOctet 1 and 2\nCreated Traffic Endpoint IE Type = 128 (decimal)\nOctets 3 and 4\nLength = n\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\nSxa\nSxb\nSxc\nN4\nN4mb\nTraffic Endpoint ID\nM\nThis IE shall uniquely identify the Traffic Endpoint for that PFCP session.\nX\nX\n-\nX\nX\nTraffic Endpoint ID\nLocal F-TEID\nC\nIf the UP function allocates the F-TEID, this IE shall be present and shall contain the local F-TEID to be used for this Traffic Endpoint.\nX\nX\n-\nX\n-\nF-TEID\nLocal F-TEID for Redundant Transmission\nC\nThis IE shall be present and shall contain the local F-TEID to be used for this PDR for the reception of redundant uplink packets on N3/N9 interfaces, if the CP function requested a Local F-TEID to be assigned for redundant transmission.\n-\n-\n-\nX\n-\nF-TEID\nUE IP Address\nC\nIf the UP function allocates the UE IP address/prefix, this IE shall be present and shall contain the UE IP address/ prefix assigned by the UP function.\nIn the 5GC, several IEs with the same IE type may be present to represent multiple UE IP addresses, if the UPF indicated support of the IP6PL feature (see clause 5.21).\n-\nX\n-\nX\n-\nUE IP Address\nMapped N6 IP Address\nC\nIf the UP function in VPLMN is requested to allocate the mapped N6 IP address for a HR-SBO PDU session, this IE shall be present and shall contain the mapped N6 IP address assigned by the UP function.\n-\n-\n-\nX\n-\nMapped N6 IP Address\nLocal Ingress Tunnel\nC\nIf the UP function allocates the Local Ingress Tunnel, this IE shall be present and shall contain the Local Ingress Tunnel to be used for this PDR.\n-\n-\n-\n-\nX\nLocal Ingress Tunnel",
      "chunk_type": "requirement",
      "cross_references": [
        "clause_5.21",
        "table_7.5.3.5-1",
        "figure_7.5.3.5-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_7.5.3.6",
      "section_id": "7.5.3.6",
      "section_title": "Created Bridge/Router Info IE within PFCP Session Establishment Response",
      "content": "The Created Bridge/Router Info grouped IE shall be encoded as shown in Figure 7.5.3.6-1.\nTable 7.5.3.6-1: Created Bridge/Router Info IE within PFCP Session Establishment Response\nOctet 1 and 2\nCreated Bridge/Router Info IE Type = 195 (decimal)\nOctets 3 and 4\nLength = n\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\nSxa\nSxb\nSxc\nN4\nN4mb\nPort Number\nC\nIf the BII bit or the RII bit was set to \"1\" in the Create Bridge/Router Info IE, this IE shall be present and shall contain the  Port Number assigned by the UP function for the PDU Session.\n-\n-\n-\nX\n-\nPort Number\n5GS User Plane Node ID\nC\nIf the BII bit or the RII bit was set to \"1\" in the Create Bridge/Router Info IE, this IE shall be present and shall contain the 5GS User Plane Node ID assigned by the UP function.\n-\n-\n-\nX\n-\n5GS User Plane Node ID",
      "chunk_type": "requirement",
      "cross_references": [
        "table_7.5.3.6-1",
        "figure_7.5.3.6-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_7.5.3.7",
      "section_id": "7.5.3.7",
      "section_title": "ATSSS Control Parameters IE within PFCP Session Establishment Response",
      "content": "The ATSSS Control Parameters grouped IE shall be encoded as shown in Figure 7.5.3.7-1.\nTable 7.5.3.7-1: ATSSS Control Parameters IE within PFCP Session Establishment Response\nOctet 1 and 2\nATSSS Control Parameters IE Type = 221 (decimal)\nOctets 3 and 4\nLength = n\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\nSxa\nSxb\nSxc\nN4\nN4mb\nMPTCP Parameters\nC\nThis IE shall be present if the TCI flag in the MPTCP Control Information IE is set to \"1\" in the Request message and the UPF allocated resources for MPTCP.\n-\n-\n-\nX\n-\nMPTCP Parameters\nATSSS-LL Parameters\nC\nThis IE shall be present if the LLI flag in ATSSS-LL Control Information IE is set to \"1\" in the Request message and the UPF allocated resources for ATSSS-LL.\n-\n-\n-\nX\n-\nATSSS-LL Parameters\nPMF Parameters\nC\nThis IE shall be present if the PMFI flag in the PFM Control Information IE is set to \"1\" in the Request message and the UPF allocated resources for PMF.\nSeveral IEs with the same IE type may be present to provide multiple PMF Parameters.\n-\n-\n-\nX\n-\nPMF Parameters\nMPQUIC Parameters\nC\nThis IE shall be present if the CUDP flag in the MPQUIC Control Information IE is set to \"1\" in the Request message and the UPF allocated resources for MPQUIC.\n-\n-\n-\nX\n-\nMPQUIC Parameters\nThe MPTCP Parameters grouped IE shall be encoded as shown in Figure 7.5.3.7-2.\nTable 7.5.3.7-2: MPTCP Parameters IE within PFCP Session Establishment Response\nOctet 1 and 2\nMPTCP Parameters IE Type = 225 (decimal)\nOctets 3 and 4\nLength = n\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\nSxa\nSxb\nSxc\nN4\nN4mb\nMPTCP Address Information\nM\nThis IE shall carry the information of allocated MPTCP address.\n-\n-\n-\nX\n-\nMPTCP Address Information\nMPTCP Link-Specific IP Address\nM\nThis IE shall carry the information of allocated MPTCP link-specific multipath IP address.\n-\n-\n-\nX\n-\nLink-Specific Multipath IP Address\nThe ATSSS-LL Parameters grouped IE shall be encoded as shown in Figure 7.5.3.7-3.\nTable 7.5.3.7-3: ATSSS-LL Parameters IE within PFCP Session Establishment Response\nOctet 1 and 2\nATSSS-LL Parameters IE Type = 226 (decimal)\nOctets 3 and 4\nLength = n\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\nSxa\nSxb\nSxc\nN4\nN4mb\nATSSS-LL Information\nM\nThis IE shall indicate that resources have been allocated to the ATSSS functionality.\n-\n-\n-\nX\n-\nATSSS-LL Information\nThe PMF Parameters grouped IE shall be encoded as shown in Figure 7.5.3.7-4.\nTable 7.5.3.7-4: PMF Parameters IE within PFCP Session Establishment Response\nOctet 1 and 2\nPMF Parameters IE Type = 227 (decimal)\nOctets 3 and 4\nLength = n\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\nSxa\nSxb\nSxc\nN4\nN4mb\nPMF Address Information\nM\nThis IE shall contain the PMF Address Information.\n-\n-\n-\nX\n-\nPMF Address Information\nQoS flow identifier\nO\nIf present, this IE shall identify the QoS Flow Identifier of the QoS flow related to the PMF address information.\n-\n-\n-\nX\n-\nQFI\nThe MPQUIC Parameters grouped IE shall be encoded as shown in Figure 7.5.3.7-5.\nTable 7.5.3.7-5: MPQUIC Parameters IE within PFCP Session Establishment Response\nOctet 1 and 2\nMPQUIC Parameters IE Type = 331 (decimal)\nOctets 3 and 4\nLength = n\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\nSxa\nSxb\nSxc\nN4\nN4mb\nMPQUIC Address Information\nM\nThis IE shall carry the information of allocated MPQUIC address\n-\n-\n-\nX\n-\nMPQUIC Address Information\nMPQUIC Link-Specific IP Address\nM\nThis IE shall carry the information of allocated MPQUIC link-specific multipath IP address.\n-\n-\n-\nX\n-\nLink-Specific Multipath IP Address",
      "chunk_type": "parameter",
      "cross_references": [
        "table_7.5.3.7-1",
        "table_7.5.3.7-2",
        "table_7.5.3.7-3",
        "table_7.5.3.7-4",
        "table_7.5.3.7-5",
        "figure_7.5.3.7-1",
        "figure_7.5.3.7-2",
        "figure_7.5.3.7-3",
        "figure_7.5.3.7-4",
        "figure_7.5.3.7-5"
      ]
    },
    {
      "chunk_id": "ts_29.244_7.5.4.1",
      "section_id": "7.5.4.1",
      "section_title": "General",
      "content": "The PFCP Session Modification Request is used over the Sxa, Sxb, Sxc, N4 and N4mb interface by the CP function to request the UP function to modify the PFCP session.\nTable 7.5.4.1-1: Information Elements in a PFCP Session Modification Request\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\nSxa\nSxb\nSxc\nN4\nN4mb\nCP F-SEID\nC\nThis IE shall be present if the CP function decides to change its F-SEID for the PFCP session. The UP function shall use the new CP F-SEID for subsequent PFCP Session related messages for this PFCP Session. See Note 2.\nX\nX\nX\nX\nX\nF-SEID\nRemove PDR\nC\nWhen present, this IE shall contain the PDR Rule which is requested to be removed. See Table 7.5.4-6-1.\nSeveral IEs within the same IE type may be present to represent a list of PDRs to remove.\nX\nX\nX\nX\nX\nRemove PDR\nRemove FAR\nC\nWhen present, this IE shall contain the FAR Rule which is requested to be removed. See Table 7.5.4-7-1.\nSeveral IEs within the same IE type may be present to represent a list of FARs to remove.\nX\nX\nX\nX\nX\nRemove FAR\nRemove URR\nC\nWhen present, this shall contain the URR Rule which is requested to be removed. See Table 7.5.4-8-1.\nSeveral IEs within the same IE type may be present to represent a list of URRs to remove.\nX\nX\nX\nX\nX\nRemove URR\nRemove QER\nC\nWhen present, this IE shall contain the QER Rule which is requested to be removed. See Table 7.5.4-9-1.\nSeveral IEs within the same IE type may be present to represent a list of QERs to remove.\n-\nX\nX\nX\nX\nRemove QER\nRemove BAR\nC\nWhen present, this IE shall contain the BAR Rule which is requested to be removed. See Table 7.5.4.12-1.\nX\n-\n-\nX\n-\nRemove BAR\nRemove Traffic Endpoint\nC\nWhen present, this IE shall contain the Traffic Endpoint ID identifying the traffic endpoint to be removed, if the UP function has indicated support of PDI optimization.\nAll the PDRs that refer to the removed Traffic Endpoint shall be deleted.\nSee Table 7.5.4.14-1.\nSeveral IEs within the same IE type may be present to represent a list of Traffic Endpoints to remove.\nX\nX\nX\nX\nX\nRemove Traffic Endpoint\nCreate PDR\nC\nThis IE shall be present if the CP function requests the UP function to create a new PDR.\nSee Table 7.5.2.2-1.\nSeveral IEs within the same IE type may be present to represent a list of PDRs to create.\nX\nX\nX\nX\nX\nCreate PDR\nCreate FAR\nC\nThis IE shall be present if the CP function requests the UP function to create a new FAR. See Table 7.5.2.3-1.\nSeveral IEs within the same IE type may be present to represent a list of FARs to create.\nX\nX\nX\nX\nX\nCreate FAR\nCreate URR\nC\nThis IE shall be present if the CP function requests the UP function to create a new URR. See Table 7.5.2.4-1.\nSeveral IEs within the same IE type may be present to represent a list of URRs to create.\nX\nX\nX\nX\nX\nCreate URR\nCreate QER\nC\nThis IE shall be present if the CP function requests the UP function to create a new QER. See Table 7.5.2.5-1.\nSeveral IEs within the same IE type may be present to represent a list of QERs to create.\n-\nX\nX\nX\nX\nCreate QER\nCreate BAR\nC\nThis IE shall be present if the CP function requests the UP function to create a new BAR.\nSee Table 7.5.2.6-1.\nX\n-\n-\nX\n-\nCreate BAR\nCreate Traffic Endpoint\nC\nWhen present this IE shall contain the information associated with the Traffic Endpoint to be created, if the UP function has indicated support of PDI optimization. See Table 7.5.2.7-1.\nSeveral IEs within the same IE type may be present to represent a list of Traffic Endpoints to create.\nX\nX\nX\nX\nX\nCreate Traffic Endpoint\nUpdate PDR\nC\nThis IE shall be present if a PDR previously created for the PFCP session need to be modified.\nSee Table 7.5.4.2-1.\nSeveral IEs within the same IE type may be present to represent a list of PDRs to update.\nX\nX\nX\nX\nX\nUpdate PDR\nUpdate FAR\nC\nThis IE shall be present if a FAR previously created for the PFCP session need to be modified. See Table 7.5.4.3-1. Several IEs within the same IE type may be present to represent a list of FARs to update.\nX\nX\nX\nX\nX\nUpdate FAR\nUpdate URR\nC\nThis IE shall be present if URR(s) previously created for the PFCP session need to be modified.\nSeveral IEs within the same IE type may be present to represent a list of modified URRs. Previously URRs that are not modified shall not be included.\nSee Table 7.5.4.4-1.\nX\nX\nX\nX\nX\nUpdate URR\nUpdate QER\nC\nThis IE shall be present if QER(s) previously created for the PFCP session need to be modified.\nSeveral IEs within the same IE type may be present to represent a list of modified QERs.\nPreviously created QERs that are not modified shall not be included.\nSee Table 7.5.4.5-1.\n-\nX\nX\nX\nX\nUpdate QER\nUpdate BAR\nC\nThis IE shall be present if a BAR previously created for the PFCP session needs to be modified.\nA previously created BAR that is not modified shall not be included.\nSee Table 7.5.4.11-1.\nX\n-\n-\nX\n-\nUpdate BAR\nUpdate Traffic Endpoint\nC\nWhen present this IE shall contain the information associated with the traffic endpoint to be updated, if the UP function has indicated support of PDI optimization.\nAll the PDRs that refer to the Traffic Endpoint shall use the updated Traffic Endpoint information.\nSee Table 7.5.4.13-1.\nSeveral IEs within the same IE type may be present to represent a list of Traffic Endpoints to update.\nX\nX\nX\nX\nX\nUpdate Traffic Endpoint\nPFCPSMReq-Flags\nC\nThis IE shall be included if at least one of the flags is set to \"1\".\n-\tDROBU (Drop Buffered Packets): the CP function shall set this flag if the UP function is requested to drop the packets currently buffered for this PFCP session (see NOTE 1).\n-\tQAURR (Query All URRs): the CP function shall set this flag if the CP function requests immediate usage report(s) for all the URRs previously provisioned for this PFCP session (see NOTE 3).\n-\tSUMPC (Stop Usage Measurement to Pause Charging): the CP function, e.g. PGW-C or (H-)SMF, shall set this flag if the usage measurement for the URRs which are applicable for charging (i.e. with the \"ASPOC\" flag set to \"1\") shall be stopped in the UP function.\n-\tRUMUC (Resume Usage Measurement to Un-pause Charging): the CP function, e.g. PGW-C or (H-)SMF, shall set this flag if the usage measurement for the URRs which are applicable for charging (i.e. with the \"ASPOC\" flag set to \"1\") shall be resumed in the UP function.\n-\tDETEID (Delete All DL N3mb and/or N19mb F-TEIDs): the MB-SMF shall set this flag to \"1\" if it requests the MB-UPF to delete all NG-RAN N3mb DL F-TEIDs and all UPF N19mb DL F-TEIDs for the MBS session when the Apply Action is changed from the \"FSSM and/or MBSU\" to the \"BUFF\" (with or without \"NOCP\"), or to \"DROP\" (see clause 5.34.2.4).\n-\tHRSBOM (HR-SBO Mode): the V-SMF shall set this flag to the V-UPF acting as Local PSA in the VPLMN, if the V-SMF supports HR-SBO and if the PDU session is working in HB-SBO mode.\nX\nX\n-\n-\n-\n-\n-\nX\nX\nX\n-\n-\n-\nX\n-\n-\n-\n-\nX\nX\nX\nX\n-\nX\n-\nX\n-\n-\nX\n-\nPFCPSMReq-Flags\nQuery URR\nC\nThis IE shall be present if the CP function requests immediate usage report(s) to the UP function.\nSeveral IEs within the same IE type may be present to represent a list of URRs for which an immediate report is requested.\nSee Table 7.5.4.10-1.\nSee NOTE 3.\nX\nX\nX\nX\nX\nQuery URR\nPGW-C/SMF FQ-CSID\nC\nThis IE shall be included according to the requirements in clause 23 of 3GPP TS 23.007 [24] and clause 4.6 of 3GPP TS 23.527 [40].\nX\nX\n-\nX\n-\nFQ-CSID\nSGW-C FQ-CSID\nC\nThis IE shall be included according to the requirements in clause 23 of 3GPP TS 23.007 [24].\nX\nX\n-\n-\n-\nFQ-CSID\nMME FQ-CSID\nC\nThis IE shall be included according to the requirements in clause 23 of 3GPP TS 23.007 [24].\nX\nX\n-\n-\n-\nFQ-CSID\nePDG FQ-CSID\nC\nThis IE shall be included according to the requirements in clause 23 of 3GPP TS 23.007 [24].\n-\nX\n-\n-\n-\nFQ-CSID\nTWAN FQ-CSID\nC\nThis IE shall be included according to the requirements in clause 23 of 3GPP TS 23.007 [24].\n-\nX\n-\n-\n-\nFQ-CSID\nUser Plane Inactivity Timer\nC\nThis IE shall be present if it needs to be changed.\n-\nX\nX\nX\nX\nUser Plane Inactivity Timer\nQuery URR Reference\nO\nThis IE may be present if the Query URR IE is present or the QAURR flag is set to \"1\". When present, it shall contain a reference identifying the query request, which the UP function shall return in any usage report sent in response to the query.\nX\nX\nX\nX\nX\nQuery URR Reference\nTrace Information\nO\nWhen present, this IE shall contain the trace instructions to be applied by the UP function for this PFCP session.\nFor trace only, a Trace Information with a null length indicates that the trace session shall be deactivated.\nFor trace and UE level measurement, the Trace Information shall be set as defined in clause 5.15A.2.\nSee NOTE 7.\nX\nX\nX\nX\n-\nTrace Information\nRemove MAR\nC\nWhen present, this IE shall contain the MAR Rule which is requested to be removed. See Table 7.5.4.15-1.\nSeveral IEs within the same IE type may be present to represent a list of MARs to remove.\n-\n-\n-\nX\n-\nRemove MAR\nUpdate MAR\nC\nThis IE shall be present if an MAR previously created for the PFCP session needs to be modified.\nSee Table 7.5.4.16-1.\nSeveral IEs within the same IE type may be present to represent a list of MARs to update.\n-\n-\n-\nX\n-\nUpdate MAR\nCreate MAR\nC\nThis IE shall be present if the CP function requests the UP function to create a new MAR for a new PDR. See Table 7.5.2.8-1.\nSeveral IEs within the same IE type may be present to represent a list of MARs to create.\n-\n-\n-\nX\n-\nCreate MAR\nNode ID\nC\nThis IE shall be present if a new SMF in an SMF Set, with one PFCP association per SMF and UPF, or a new MB-SMF in an MB-SMF Set, with one PFCP association per MB-SMF and MB-UPF (see clause 5.22.3), takes over the control of the PFCP session.\nWhen present, it shall contain the unique identifier of the new SMF or MB-SMF.\n-\n-\n-\nX\nX\nNode ID\nTSC Management Information\nC\nThis IE shall be present if the SMF needs to send TSC Management information to the UPF.\nSeveral IEs within the same IE type may be present to transfer PMICs for different NW-TT ports. (NOTE 6).\n-\n-\n-\nX\n-\nTSC Management Information\nRemove SRR\nC\nWhen present, this shall indicate the SRR Rule which is requested to be removed. See Table 7.5.4-19-1.\nSeveral IEs within the same IE type may be present to represent a list of SRRs to remove.\n-\n-\n-\nX\n-\nRemove SRR\nCreate SRR\nC\nThis IE shall be present if the CP function requests the UP function to create a new SRR. See Table 7.5.2.9-1.\nSeveral IEs within the same IE type may be present to represent a list of SRRs to create.\n-\n-\n-\nX\n-\nCreate SRR\nUpdate SRR\nC\nThis IE shall be present if SRR(s) previously created for the PFCP session need to be modified.\nSeveral IEs within the same IE type may be present to represent a list of modified SRRs. Previously SRRs that are not modified shall not be included. See Table 7.5.4.20-1.\n-\n-\n-\nX\n-\nUpdate SRR\nProvide ATSSS Control Information\nC\nThis IE shall be present for PFCP session modification for an MA PDU session, if the ATSSS Control Information changes.\nWhen present, this IE shall contain the required ATSSS functionalities for this MA PDU session.\nThe UPF shall replace any value received previously by the new information received in this IE. See Note 4.\nSee Table 7.5.2.10-1.\n-\n-\n-\nX\n-\nProvide ATSSS Control Information\nEthernet Context Information\nC\nThis IE shall be present to update the list of MAC addresses associated to the PDU session during an Ethernet PDU session anchor relocation.\n-\n-\n-\nX\n-\nEthernet Context Information\nAccess Availability Information\nO\nThis IE may be present for an MA PDU session to signal that an access type has become transiently unavailable or has become available again (see clause 5.20.5).\nTwo IEs with the same IE type may be present to report changes of access availability for both 3GPP and non-3GPP accesses.\n-\n-\n-\nX\n-\nAccess Availability Information\nQuery Packet Rate Status\nC\nThis IE shall be present if the CP function requests immediate packet rate status report(s) to the UP function.\nSeveral IEs within the same IE type may be present to represent a list of QERs for which an immediate packet rate status report is requested.\nSee Table 7.5.4.22-1.\n-\nX\n-\nX\n-\nQuery Packet Rate Status\nS-NSSAI\nO\nThis IE may be present to indicate the S-NSSAI of the PDU session or MBS session, if the S-NSSAI of the PDU Session or MBS session has been provided previously to the UP function and the S-NSSAI has changed. (NOTE 5)\nThis IE should be present to indicate the S-NSSAI of the PDU session, if the S-NSSAI of the PDU Session has been provided previously to the UP function and the S-NSSAI has changed.\n-\n-\n-\nX\nX\nS-NSSAI\nHPLMN S-NSSAI\nC\nThis IE should be sent from the V-SMF to any V-UPF acting as (local) PSA for a HR-SBO PDU session and capable of enforcing NAT on N6 traffic, if the information was not provided during the PFCP session establishment.\nWhen present, it shall contain the HPLMN S-NSSAI.\n-\n-\n-\nX\n-\nHPLMN S-NSSAI\nDNN\nC\nThis IE should be sent from the V-SMF to any V-UPF acting as (local) PSA for a HR-SBO PDU session and capable of enforcing NAT on N6 traffic, if the information was not provided during the PFCP session establishment.\nWhen present, it shall contain the full DNN of the PDU session (with the Operator ID part identifying the HPLMN ID).\n-\n-\n-\nX\n-\nDNN\nRAT Type\nThis IE shall be present if there is a RAT change and the CP function wants to inform the UP Function about the new RAT Type if the PFCP session is not established for a MA PDU session.\nX\nX\n-\nX\n-\nRAT Type\nGroup Id\nC\nThis IE shall be included by the CP function to indicate the new group identifier to which the PFCP session pertains, if it has been changed (see clause 5.22.4).\nWhen present, the UP function shall replace any earlier value associated to the PFCP session with the new value.\n-\nX\n-\nX\n-\nGroup Id\nMBS Session N4 Control Information\nC\nThis IE shall be included if:\n-\tthe correspond PDU session is being associated with an MBS session, or with an MBS session and Area Session ID for a location dependent MBS service; or\n-\tthe PDU session is already associated with an MBS session, or with an MBS session and Area Session ID for a location dependent MBS service, and the N19mb multicast transport information has changed. In this case, the Multicast Transport Information IE shall contain the new multicast transport information to use to receive MBS session data from the MB-UPF.\nSeveral IEs with the same IE type may be present to provide N4 control information for several MBS sessions, e.g. when the UE requests to join several MBS sessions.\nSee Table 7.5.2.1-5 for encoding.\n-\n-\n-\nX\n-\nMBS Session N4 Control Information\nDSCP to PPI Control Information\nC\nThis IE shall be present if the DSCP to PPI Control Information needs to be changed. The UPF shall replace any value received previously by the new information received in this IE.\nSee Table 7.5.2.1-6 for encoding.\n-\n-\n-\nX\n-\nDSCP to PPI Control Information\nTL-Container\nC\nThis IE shall be present if the SMF/CUC needs to send a TL-Container to the UPF/CN-TL.\nSeveral IEs within the same IE type may be present to provide multiple TL-Containers.\n-\n-\n-\nX\n-\nTL-Container\nTrace Collection Entity URI\nO\nThis IE may be present if an UPF trace is activated for this PFCP session and if the Trace Information IE is included. When present, this IE shall include the Trace Reporting Consumer URI for Streaming based Reporting as defined in 3GPP TS 32.422 [35].\nIf the UP function supports Streaming based Reporting and Trace Collection Entity URI IE is present, the IP Address of Trace Collection Entity in Trace Information IE shall be ignored.\nX\nX\nX\nX\n-\nURI\nUE Level Measurements Configuration\nO\nWhen present, this IE shall contain the 5GC UE Level Measurement configuration data to be applied by the UP function for this PFCP session (see clause 4.1.2.18 of 3GPP TS 32.422 [35]).\nThis IE shall be included with a null length to instruct UP function to stop the UE level measurement while continuing the trace session.\nSee NOTE 7.\n-\n-\n-\nX\n-\nUE Level Measurements Configuration\nNOTE 1:\tThe CP function may request the UP function to drop the packets currently buffered for the PFCP session when using extended buffering of downlink data packets, buffering is performed in the UP function and the DL Data Buffer Expiration Time is handled by the CP function. In this case, when the DL Data Buffer Expiration Time expires, the CP function shall send a PFCP Session Modification Request including the DROBU flag (to drop the downlink data packets currently buffered in the UP function) and updating the Apply Action within the FARs of this PFCP session to request the UP function to start buffering the downlink data packets with notifying the arrival of subsequent downlink data packets. See clause 5.9.3 of 3GPP TS 23.214 [2].\nNOTE 2:\tWhen changing the CP F-SEID of an established PFCP Session, the CP function shall be able to handle any incoming PFCP Session related messages sent by the UP function with the previous CP F-SEID for a duration at least longer than twice the PFCP retransmission timer (N1xT1).\nNOTE 3:\tThe QAURR (Query All URRs) flag in the PFCPSMReq-Flags IE and the Query URR IE are exclusive from each other in a PFCP Session Modification Request.\nNOTE 4:\tIf the ATSSS resources have already been allocated to the PFCP session previously, e.g. during the PFCP session establishment, the UPF shall not allocate new values for such resources (e.g. UE Link-Specific IP Address).\nNOTE 5:\tS-NSSAI for the PDU session may be updated after PDU session establishment, i.e. during EPS to 5GS handover procedure, the initial AMF may use configured S-NSSAI for interworking to create the PDU session in 5GS. For home routed PDU session, if the S-NSSAI in serving PLMN (mapped from S-NSSAI in HPLMN) is different from the configured S-NSSAI for interworking and V-SMF reselection is not needed, the AMF will update V-SMF with S-NSSAI in serving PLMN for the PDU session, as specified in clause 4.11.1.3.3 of 3GPP TS 23.502 [29]. The S-NSSAI may also be updated by SMF+PGW-C during EPS to 5GS handover in non-roaming or roaming-with-LBO case. The S-NSSAI may be used by the UP function for performance measurement. The S-NSSAI may also be updated by the SMF with an alternative S-NSSAI or a replaced S-NSSAI over N4 interface for Network Slice Replacement (see clause 5.15.19 of 3GPP TS 23.501 [28]).\nNOTE 6:\tWhen transferring port and user plane node management information between the TSN AF or the TSCTSF and the NW-TT, since the NW-TT may support multiple ports, there may be several instances of the TSC Management Information IEs containing a Port Management Information Container together with a NW-TT Port Number, and only one instance of the TSC Management Information IE containing a User Plane Node Management Information Container that may also contain a Port Management Information Container together with a NW-TT Port Number.\nNOTE 7: \tIf both Trace and UE level measurement are deactivated, the Trace Information IE with a null length shall be present and the UE Level Measurements Configuration shall be absent.",
      "chunk_type": "definition",
      "cross_references": [
        "clause_5.34.2.4",
        "ts_23.007_clause_23",
        "ts_23.007_clause_4.6",
        "clause_5.15",
        "clause_5.22.3",
        "clause_5.20.5",
        "clause_5.22.4",
        "ts_32.422_clause_4.1.2.18",
        "ts_23.214_clause_5.9.3",
        "ts_23.502_clause_4.11.1.3.3",
        "ts_23.501_clause_5.15.19",
        "table_7.5.4.1-1",
        "table_7.5.4-6",
        "table_7.5.4-7",
        "table_7.5.4-8",
        "table_7.5.4-9",
        "table_7.5.4.12-1",
        "table_7.5.4.14-1",
        "table_7.5.2.2-1",
        "table_7.5.2.3-1",
        "table_7.5.2.4-1",
        "table_7.5.2.5-1",
        "table_7.5.2.6-1",
        "table_7.5.2.7-1",
        "table_7.5.4.2-1",
        "table_7.5.4.3-1",
        "table_7.5.4.4-1",
        "table_7.5.4.5-1",
        "table_7.5.4.11-1",
        "table_7.5.4.13-1",
        "table_7.5.4.10-1",
        "table_7.5.4.15-1",
        "table_7.5.4.16-1",
        "table_7.5.2.8-1",
        "table_7.5.4-19",
        "table_7.5.2.9-1",
        "table_7.5.4.20-1",
        "table_7.5.2.10-1",
        "table_7.5.4.22-1",
        "table_7.5.2.1-5",
        "table_7.5.2.1-6",
        "ts_23.527_clause_4.6",
        "ts_23.007",
        "ts_23.527",
        "ts_32.422",
        "ts_23.214",
        "ts_23.502",
        "ts_23.501"
      ]
    },
    {
      "chunk_id": "ts_29.244_7.5.4.2",
      "section_id": "7.5.4.2",
      "section_title": "Update PDR IE within PFCP Session Modification Request",
      "content": "The Update PDR grouped IE shall be encoded as shown in Figure 7.5.4.2-1.\nTable 7.5.4.2-1: Update PDR IE within PFCP Session Modification Request\nOctet 1 and 2\nUpdate PDR IE Type = 9 (decimal)\nOctets 3 and 4\nLength = n\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\nSxa\nSxb\nSxc\nN4\nN4mb\nPDR ID\nM\nThis IE shall uniquely identify the PDR among all the PDRs configured for that PFCP session.\nX\nX\nX\nX\nX\nPDR ID\nOuter Header Removal\nC\nThis IE shall be present if it needs to be changed.\nX\nX\n-\nX\nX\nOuter Header Removal\nPrecedence\nC\nThis IE shall be present if there is a change in the PDR's precedence to be applied by the UP function among all PDRs of the PFCP session, when looking for a PDR matching an incoming packet.\n-\nX\nX\nX\nX\nPrecedence\nPDI\nC\nThis IE shall be present if there is a change within the PDI against which incoming packets will be matched. When present, this IE shall replace the PDI previously stored in the UP function for this PDR. See Table 7.5.2.2-2.\nX\nX\nX\nX\nX\nPDI\nFAR ID\nC\nThis IE shall be present if it needs to be changed\nX\nX\nX\nX\nX\nFAR ID\nURR ID\nC\nThis IE shall be present if a measurement action shall be applied or no longer applied to packets matching this PDR.\nWhen present, this IE shall contain the list of all the URR IDs to be associated to the PDR.\nX\nX\nX\nX\n-\nURR ID\nQER ID\nC\nThis IE shall be present if a QoS enforcement action shall be applied or no longer applied to packets matching this PDR.\nWhen present, this IE shall contain the list of all the QER IDs to be associated to the PDR.\n-\nX\nX\nX\nX\nQER ID\nActivate Predefined Rules\nC\nThis IE shall be present if new Predefined Rule(s) needs to be activated for the PDR. When present this IE shall contain one Predefined Rules name.\nSeveral IEs with the same IE type may be present to represent multiple \"Activate Predefined Rules\" names.\n-\nX\nX\nX\n-\nActivate Predefined Rules\nDeactivate Predefined Rules\nC\nThis IE shall be present if Predefined Rule(s) needs to be deactivated for the PDR. When present this IE shall contain one Predefined Rules name.\nSeveral IEs with the same IE type may be present to represent multiple \"Activate Predefined Rules\" names.\n-\nX\nX\nX\n-\nDeactivate Predefined Rules\nActivation Time\nO\nThis IE may be present if the PDR activation time shall be changed. (NOTE 2)\n-\nX\nX\nX\n-\nActivation Time\nDeactivation Time\nO\nThis IE may be present if the PDR deactivation time shall be changed. (NOTE 2)\n-\nX\nX\nX\n-\nDeactivation Time\nIP Multicast Addressing Info\nO\nThis IE may be present in an UL PDR controlling UL IGMP/MLD traffic (see clause 5.25), if it needs to be changed\nWhen present, it shall contain a (range of) IP multicast address(es), and optionally source specific address(es), identifying a set of IP multicast flows. See Table 7.5.2.2-4.\nSeveral IEs with the same IE type may be present to represent multiple IP multicast flows.\nWhen present, the UPF shall replace any IP multicast address(es) previously stored for this PDR by the IP multicast address(es) received in this IE.\n-\n-\n-\nX\n-\nIP Multicast Addressing Info\nTransport Delay Reporting\nC\nThis IE shall be present if Transport Delay Reporting needs to be changed (e.g. transport delay reporting needs to be activated or deactivated). See Table 7.5.2.2-6.\n-\n-\n-\nX\n-\nTransport Delay Reporting\nRAT Type\nO\nThis IE may be present if there is a RAT change for the UL PDR if the PFCP session is established for a MA PDU session.\n-\n-\n-\nX\n-\nRAT Type\nNOTE 1:\tThe IEs which do not need to be modified shall not be included in the Update PDR IE. The UP function shall continue to behave according to the values previously received for IEs not present in the Update PDR IE.\nNOTE 2:\tWhen the Activation Time and Deactivation Time are not present, the PDR shall keep its current activation status, either active or inactive.",
      "chunk_type": "requirement",
      "cross_references": [
        "clause_5.25",
        "table_7.5.4.2-1",
        "table_7.5.2.2-2",
        "table_7.5.2.2-4",
        "table_7.5.2.2-6",
        "figure_7.5.4.2-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_7.5.4.3",
      "section_id": "7.5.4.3",
      "section_title": "Update FAR IE within PFCP Session Modification Request",
      "content": "The Update FAR grouped IE shall be encoded as shown in Figure 7.5.4.3-1.\nTable 7.5.4.3-1: Update FAR IE within PFCP Session Modification Request\nOctet 1 and 2\nUpdate FAR IE Type = 10 (decimal)\nOctets 3 and 4\nLength = n\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\nSxa\nSxb\nSxc\nN4\nN4mb\nFAR ID\nM\nThis IE shall identify the FAR to be updated.\nX\nX\nX\nX\nX\nFAR ID\nApply Action\nC\nThis IE shall be present if it is changed.\nX\nX\nX\nX\nX\nApply Action\nUpdate Forwarding parameters\nC\nThis IE shall be present if it is changed. See table 7.5.4.3-2.\nX\nX\nX\nX\n-\nUpdate Forwarding Parameters\nUpdate Duplicating Parameters\nC\nThis IE shall be present if it is changed. See table 7.5.4.3-3.\nSeveral IEs with the same IE type may be present to request to duplicate the packets to different destinations.\nX\nX\n-\n-\n-\nUpdate Duplicating Parameters\nRedundant Transmission Forwarding Parameters\nC\nThis IE shall be present if it is changed. See table 7.5.2.3-4.\n-\n-\n-\nX\n-\nRedundant Transmission Forwarding Parameters\nBAR ID\nC\nThis IE shall be present if the BAR ID associated to the FAR needs to be modified.\nX\n-\n-\nX\n-\nBAR ID\nAdd MBS Unicast Parameters\nC\nThis IE shall be present when the Apply Action is set to \"MBSU\" to request the MB-UPF to forward the MBS session data to a remote GTP-U peer for unicast transport, if no remote GTP-U peers are provisioned yet in the MB-UPF, or if additional GTP-U peers need to be provisioned. (NOTE).\nSeveral IEs with the same IE type may be present to represent multiple remote GTP-U peers.\nSee Table 7.5.2.3-6.\n-\n-\n-\n-\nX\nAdd MBS Unicast Parameters\nRemove MBS Unicast Parameters\nC\nThis IE shall be present when the MB-SMF to request the MB-UPF to delete a remote GTP-U peer to stop forwarding the MBS session data to that remote GTP-U peer for unicast transport.\nSeveral IEs with the same IE type may be present to represent to delete multiple remote GTP-U peers.\n-\n-\n-\n-\nX\nRemove MBS Unicast Parameters\nNOTE: \tWhen the Apply Action is changed to “MBSU” during an MBS session reactivation, remote GTP-U peers may already be provisioned in the MB-UPF if the MB-SMF did not request the MB-UPF to delete the N3mb/N19mb DL F-TEIDs when the MBS session was deactivated (see clause 5.34.2.4).\nTable 7.5.4.3-2: Update Forwarding Parameters IE in the Update FAR IE\nOctet 1 and 2\nUpdate Forwarding Parameters IE Type = 11 (decimal)\nOctets 3 and 4\nLength = n\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\nSxa\nSxb\nSxc\nN4\nN4mb\nDestination Interface\nC\nThis IE shall only be provided if it is changed.\nWhen present, it shall indicate the destination interface of the outgoing packet.\nX\nX\nX\nX\n-\nDestination Interface\nNetwork instance\nC\nThis IE shall only be provided if it is changed.\nX\nX\nX\nX\n-\nNetwork Instance\nRedirect Information\nC\nThis IE shall be present if the instructions regarding the redirection of traffic by the UP function need to be modified.\n-\nX\nX\nX\n-\nRedirect Information\nOuter Header Creation\nC\nThis IE shall only be provided if it is changed. See NOTE 1.\nX\nX\n-\nX\n-\nOuter Header Creation\nTransport Level Marking\nC\nThis IE shall only be provided if it is changed\nX\nX\n-\nX\n-\nTransport Level Marking\nForwarding Policy\nC\nThis IE shall only be provided if it is changed. See NOTE 1.\n-\nX\nX\nX\n-\nForwarding Policy\nMetadata\nC\nThis IE shall only be provided if it is changed. The UPF shall overwrite any metadata received earlier in this FAR.\n-\n-\n-\nX\n-\nMetadata\nHeader Enrichment\nC\nThis IE shall only be provided if it is changed\n-\nX\nX\nX\n-\nHeader Enrichment\nPFCPSMReq-Flags\nC\nThis IE shall be included if at least one of the flags is set to \"1\".\n-\tSNDEM (Send End Marker Packets): this IE shall be present if the CP function modifies the F-TEID of the downstream node in the Outer Header Creation IE and the CP function requests the UP function to construct and send GTP-U End Marker messages towards the old F-TEID of the downstream node.\nX\nX\n-\nX\n-\nPFCPSMReq-Flags\nLinked Traffic Endpoint ID\nC\nThis IE may be present, if it is changed and the UP function indicated support of the PDI optimization feature, (see clause 8.2.25). When present, it shall identify the Traffic Endpoint ID allocated for this PFCP session to receive the traffic in the reverse direction (see clause 5.2.3.1).\nX\nX\n-\nX\n-\nTraffic Endpoint ID\nDestination Interface Type\nC\nThis IE shall be present to indicate the 3GPP interface type of the destination interface, if the value has changed.\nX\nX\n-\nX\n-\n3GPP Interface Type\nData Network Access Identifier\nC\nThis IE shall be provided over N16a if it is changed. This IE shall not be sent over N4.\n-\n-\n-\n-\n-\nData Network Access Identifier\nIP Address and Port Number Replacement\nC\nThis IE shall only be provided if it is changed.\n-\n-\n-\nX\n-\nIP Address and Port Number Replacement\nNOTE 1:\tIf the Outer Header Creation and Forwarding Policy are present, the UP function shall put the user plane packets in the user plane tunnel by applying Outer Header Creation, after enforcing the required Forwarding Policy.\nTable 7.5.4.3-3: Update Duplicating Parameters IE in the Update FAR IE\nOctet 1 and 2\nUpdate Duplicating Parameters IE Type = 105 (decimal)\nOctets 3 and 4\nLength = n\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\nSxa\nSxb\nSxc\nN4\nN4mb\nDestination Interface\nC\nThis IE shall only be provided if it is changed.\nWhen present, it shall indicate the destination interface of the outgoing packet.\nX\nX\n-\n-\n-\nDestination Interface\nOuter Header Creation\nC\nThis IE shall only be provided if it is changed. See NOTE 1.\nX\nX\n-\n-\n-\nOuter Header Creation\nTransport Level Marking\nC\nThis IE shall only be provided if it is changed.\nX\nX\n-\n-\n-\nTransport Level Marking\nForwarding Policy\nC\nThis IE shall only be provided if it is changed. See NOTE 1.\n-\nX\n-\n-\n-\nForwarding Policy\nNOTE 1:\tIf the Outer Header Creation and Forwarding Policy are present, the UP function shall put the user plane packets in the user plane tunnel by applying Outer Header Creation, after enforcing the required Forwarding Policy.\nTable 7.5.4.3-4: Remove MBS Unicast Parameters IE in the Update FAR IE\nOctet 1 and 2\nRemove MBS Unicast Parameters Type = 304 (decimal)\nOctets 3 and 4\nLength = n\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\nSxa\nSxb\nSxc\nN4\nN4mb\nMBS Unicast Parameters ID\nM\nThis IE shall identify the MBS Unicast Parameters IE to be removed.\n-\n-\n-\n-\nX\nMBS Unicast Parameters ID",
      "chunk_type": "requirement",
      "cross_references": [
        "clause_5.34.2.4",
        "clause_8.2.25",
        "clause_5.2.3.1",
        "table_7.5.4.3-1",
        "table_7.5.4.3-2",
        "table_7.5.4.3-3",
        "table_7.5.2.3-4",
        "table_7.5.2.3-6",
        "table_7.5.4.3-4",
        "figure_7.5.4.3-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_7.5.4.4",
      "section_id": "7.5.4.4",
      "section_title": "Update URR IE within PFCP Session Modification Request",
      "content": "The Update URR grouped IE shall be encoded as shown in Figure 7.5.4.4-1.\nTable 7.5.4.4-1: Update URR IE within PFCP Session Modification Request\nOctet 1 and 2\nUpdate URR IE Type = 13 (decimal)\nOctets 3 and 4\nLength = n\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\nSxa\nSxb\nSxc\nN4\nN4mb\nURR ID\nM\nThis IE shall uniquely identify the URR among all the URRs configured for that PFCP session\nX\nX\nX\nX\n-\nURR ID\nMeasurement Method\nC\nThis IE shall be present if the measurement method needs to be modified.\nWhen present, this IE shall indicate the method for measuring the network resources usage, i.e. whether the data volume, duration (i.e. time), combined volume/duration, or event shall be measured.\nX\nX\nX\nX\n-\nMeasurement Method\nReporting Triggers\nC\nThis IE shall be present if the reporting triggers needs to be modified.\nWhen present, this IE shall indicate the trigger(s) for reporting network resources usage to the CP function, e.g. periodic reporting or reporting upon reaching a threshold, or envelope closure, or when an SMF instructs an UPF to report the reception of the End Marker packet from the old I-UPF during a Service Request procedure (see clauses 4.2.3.2 and 4.23.4.3 in 3GPP TS 23.502 [29]).\nX\nX\nX\nX\nX\nReporting Triggers\nMeasurement Period\nC\nThis IE shall be present if the Measurement Period needs to be modified.\nWhen present, it shall indicate the period for generating and reporting usage reports.\nX\nX\nX\nX\nX\nMeasurement Period\nVolume Threshold\nC\nThis IE shall be present if the Volume Threshold needs to be modified. When present, it shall indicate the traffic volume value after which the UP function shall report network resources usage to the CP function for this URR.\nX\nX\nX\nX\nX\nVolume Threshold\nVolume Quota\nC\nThis IE shall be present if the Volume Quota needs to be modified.\nWhen present, it shall indicate the Volume Quota value.\n-\nX\nX\nX\n-\nVolume Quota\nTime Threshold\nC\nThis IE shall be present if the Time Threshold needs to be modified. When present, it shall indicate the time usage after which the UP function shall report network resources usage to the CP function for this URR.\nX\nX\nX\nX\n-\nTime Threshold\nTime Quota\nC\nThis IE shall be present if the Time Quota needs to be modified.\nWhen present, it shall indicate the Time Quota value.\n-\nX\nX\nX\n-\nTime Quota\nEvent Threshold\nC\nThis IE shall be present if Event Threshold needs to be modified.\nWhen present, it shall indicate the number of events after which the UP function shall report to the CP function for this URR.\n-\nX\nX\nX\n-\nEvent Threshold\nEvent Quota\nC\nThis IE shall be present if Event Quota needs to be modified.\nWhen present, it shall indicate the Event Quota value.\n-\nX\nX\nX\n-\nEvent Quota\nQuota Holding Time\nC\nThis IE shall be present if the Quota Holding Time needs to be modified.\nWhen present, it shall contain the duration of the Quota Holding Time.\n-\nX\nX\nX\n-\nQuota Holding Time\nDropped DL Traffic Threshold\nC\nThis IE shall be present if the Dropped DL Threshold needs to be modified.\nWhen present, it shall contain the threshold of the DL traffic being dropped.\nX\n-\n-\nX\n-\nDropped DL Traffic Threshold\nQuota Validity Time\nC\nThis IE shall be present if Quota Validity time was not sent earlier or quota validity time value needs to be modified.\n-\nX\n-\nX\n-\nQuota Validity Time\nMonitoring Time\nC\nThis IE shall be present if the Monitoring Time needs to be modified. When present, this IE shall contain the time at which the UP function shall re-apply the volume or time threshold.\nX\nX\nX\nX\n-\nMonitoring Time\nSubsequent Volume Threshold\nC\nThis IE shall be present if the Subsequent Volume Threshold needs to be modified and volume-based measurement is used.\nWhen present, it shall indicate the traffic volume value after which the UP function shall report network resources usage to the CP function for this URR for the period after the Monitoring Time.\nX\nX\nX\nX\n-\nSubsequent Volume Threshold\nSubsequent Time Threshold\nC\nThis IE shall be present if the Subsequent Time Threshold needs to be modified. When present, it shall indicate the time usage value after which the UP function shall report network resources usage to the CP function for this URR for the period after the Monitoring Time.\nX\nX\nX\nX\n-\nSubsequent Time Threshold\nSubsequent Volume Quota\nC\nThis IE shall be present if the Subsequent Volume Quota needs to be modified.\nWhen present, it shall indicate the Volume Quota value which the UP function shall use for this URR for the period after the Monitoring Time.\n-\nX\nX\nX\n-\nSubsequent Volume Quota\nSubsequent Time Quota\nC\nThis IE shall be present if the Subsequent Time Quota needs to be modified.\nWhen present, it shall indicate the Time Quota value which the UP function shall use for this URR for the period after the Monitoring Time.\n-\nX\nX\nX\n-\nSubsequent Time Quota\nSubsequent Event Threshold\nO\nThis IE shall be present if the Subsequent Event Threshold needs to be modified.\nWhen present, it shall indicate the number of events after which the UP function shall report to the CP function for this URR for the period after the Monitoring Time.\n-\nX\nX\nX\n-\nSubsequent Event Threshold\nSubsequent Event Quota\nO\nThis IE shall be present if the Subsequent Event Quota needs to be modified.\nWhen present, it shall indicate the Event Quota value which the UP function shall use for this URR for the period after the Monitoring Time.\n-\nX\nX\nX\n-\nSubsequent Event Quota\nInactivity Detection Time\nC\nThis IE shall be present if the Inactivity Detection Time needs to be modified.\nWhen present, it shall indicate the duration of the inactivity period after which time measurement needs to be suspended when no packets are received during this inactivity period.\n-\nX\nX\nX\n-\nInactivity Detection Time\nLinked URR ID\nC\nThis IE shall be present if linked usage reporting is required. When present, this IE shall contain the linked URR ID which is related with this URR (see clause 5.2.2.4).\nSeveral IEs with the same IE type may be present to represent multiple linked URRs which are related with this URR.\n-\nX\nX\nX\nX\nLinked URR ID\nMeasurement Information\nC\nThis IE shall be included if any of the following flag is set to \"1\" or if the change of flag(s) from \"1\" to \"0\" results in the IE becoming set to all zeros.\nApplicable flags are:\n-\tInactive Measurement Flag: this flag shall be set to \"1\" if the measurement shall be paused (inactive). The measurement shall be performed (active) if the bit is set to \"0\" or if the Measurement Information IE is not present in the Update URR IE.\n-\tReduced Application Detection Information Flag: this flag may be set to \"1\", if the Reporting Triggers request to report the start or stop of application, to request the UP function to only report the Application ID in the Application Detection Information, e.g. for envelope reporting.\n-\tImmediate Start Time Metering Flag: this flag may be set to \"1\" if time-based measurement is used and the UP function is requested to start the time metering immediately at receiving the flag.\n-\tSend Start Pause of Charging Flag: this flag may be set to \"1\" by the CP function if the UP Function is requested to send a Start Pause of Charging indication to the upstream GTP-U entity(s) when the Dropped DL Traffic Threshold is reached.\n-\tApplicable for Start of Pause of Charging Flag: this flag may be set to \"1\" if the URR is applicable for Start of Pause of Charging, so that the UP function shall stop the usage measurement for the URR when receiving Start Pause of Charging indication from the peer downstream GTP-U entity.\n-\tControl of Inactive Measurement Flag: the flag shall be set to \"1\" if the CP function requests the UP function to stop or resume the usage measurement for the URR with the \"ASPOC\" flag set to \"1\" according to the value of Inactive Measurement Flag.\n-\n-\n-\nX\n-\n-\nX\nX\nX\n-\nX\nX\n-\n-\nX\n-\n-\n-\nX\nX\nX\nX\nX\nX\n-\n-\n-\n-\n-\n-\nMeasurement Information\nTime Quota Mechanism\nC\nThis IE shall be present if time-based measurement based on CTP or DTP needs to be modified.\n-\nX\n-\n-\n-\nTime Quota Mechanism\nAggregated URRs\nC\nThis IE shall be included if the Aggregated URRs IE needs to be modified. See Table 7.5.2.4-2.\nSeveral IEs with the same IE type may be present to provision multiple aggregated URRs.\nWhen present, this IE shall provide the complete list of the aggregated URRs.\n-\nX\n-\n-\n-\nAggregated URRs\nFAR ID for Quota Action\nC\nThis IE shall be present if the FAR ID for Quota Action IE needs to be modified. This IE may be present if the Volume Quota IE or the Time Quota IE or Event Quota IE is newly provisioned in the URR and the UP Function indicated support of the Quota Action.\nWhen present, it shall contain the identifier of the substitute FAR the UP function shall apply, for the traffic associated to this URR, when exhausting any of these quotas. See NOTE 1, NOTE 2.\n-\nX\nX\nX\n-\nFAR ID\nEthernet Inactivity Timer\nC\nThis IE shall be present if the Ethernet Inactivity Timer needs to be modified. When present, it shall contain the duration of the Ethernet inactivity period.\n-\n-\n-\nX\n-\nEthernet Inactivity Timer\nAdditional Monitoring Time\nO\nThis IE shall be present if the additional Monitoring Time needs to be modified. When present, this IE shall contain the time at which the UP function shall re-apply the volume or time or event threshold/quota. See Table 7.5.2.4-3.\nThe CP function shall provide the full set of Additional Monitoring Times IE(s). The UP function shall replace any Additional Monitoring Times IE(s) provisioned earlier by the new set of received IE(s).\nX\nX\nX\nX\n-\nAdditional Monitoring Time\nNumber of Reports\nO\nThis IE may be present if the Number of Reports need to be changed. When present, it shall indicate the number of usage reports to be generated by the URR. See also clauses 5.2.2.2.1 and 5.2.2.3.1.\nX\nX\nX\nX\n-\nNumber of Reports\nExempted Application ID for Quota Action\nC\nThis IE shall be present if Application ID for Quota Action needs to be changed.\nWhen present, it shall contain an Application ID matching packets that shall be exempted from applying the FAR ID for Quota Action when the quota has been exhausted.\nSeveral IEs with the same IE type may be present to provide multiple Application IDs.\nThe CP function shall always provide a complete list of Application IDs.\nSee NOTE 3.\n-\nX\nX\nX\n-\nApplication ID\nExempted SDF Filter for Quota Action\nC\nThis IE shall be present if the SDF Filter for Quota Action needs to be changed.\nWhen present, it shall contain a SDF Filter matching packets that shall be exempted from applying the FAR ID for Quota Action when the quota has been exhausted.\nSeveral IEs with the same IE type may be present to provide multiple SDF Filters.\nThe CP function shall always provide a complete list of SDF Filters.\nSee NOTE 3.\n-\nX\nX\nX\n-\nSDF Filter\nUser Plane Inactivity Timer\nC\nThis IE shall be present if the User Plane Inactivity Timer needs to be modified.\nWhen present, it shall contain the duration of the User Plane Inactivity Timer.\n-\n-\n-\nX\n-\nUser Plane Inactivity Timer\nNOTE 1:\tThe substitute FAR used when exhausting a Volume Quota or Time Quota may be set to drop the packets, buffer the packets or redirect the traffic towards a redirect destination as specified in clause 5.4.7.\nNOTE 2:\tIf the FAR as indicated in the FAR ID for Quota Action is removed after being provisioned, the UP function shall behave as if the FAR ID for Quota Action is not provisioned and shall apply the default behaviour per local configuration when the quota is exhausted.\nNOTE 3:\tThe Exempted Application ID for Quota Action IE or Exempted Filter ID for Quota Action IE may be provisioned as the Restricted-Filter-Rule AVP or Filter ID AVP which is included in Final-Unit-Indication AVP from the online charging system when the Final-Unit-Action AVP is set to \"REDIRECT\" or \"RESTRICT_ACCESS\". See also 3GPP TS 32.299 [18].",
      "chunk_type": "requirement",
      "cross_references": [
        "clause_5.2.2.4",
        "clause_5.4.7",
        "table_7.5.4.4-1",
        "table_7.5.2.4-2",
        "table_7.5.2.4-3",
        "figure_7.5.4.4-1",
        "ts_23.502",
        "ts_32.299"
      ]
    },
    {
      "chunk_id": "ts_29.244_7.5.4.5",
      "section_id": "7.5.4.5",
      "section_title": "Update QER IE within PFCP Session Modification Request",
      "content": "The Update QER grouped IE shall be encoded as shown in Figure 7.5.4.5-1.\nTable 7.5.4.5-1: Update QER IE within PFCP Session Modification Request\nOctet 1 and 2\nUpdate QER IE Type = 14 (decimal)\nOctets 3 and 4\nLength = n\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\nSxa\nSxb\nSxc\nN4\nN4mb\nQER ID\nM\nThis IE shall uniquely identify the QER among all the QRs configured for that PFCP session\n-\nX\nX\nX\nX\nQER ID\nQER Correlation ID\nC\nThis IE shall be present if the QER correlation ID in this QER needs to be modified.\nSee NOTE 1.\n-\nX\n-\nX\n-\nQER Correlation ID\nGate Status\nC\nThis IE shall be present if the Gate Status needs to be modified. When present, it shall indicate whether the packets are allowed to be forwarded (the gate is open) or shall be discarded (the gate is closed) in the uplink and/or downlink directions.\nSee NOTE 1.\n-\nX\nX\nX\nX\nGate Status\nMaximum Bitrate\nC\nThis IE shall be present if an MBR enforcement action applied to packets matching this PDR need to be modified.\nWhen present, this IE shall indicate the uplink and/or downlink maximum bit rate to be enforced for packets matching the PDR.\nFor EPC, this IE may be set to the value of:\n-\tthe APN-AMBR, for a QER that is referenced by all the PDRs of the non-GBR bearers of a PDN connection;\n-\tthe TDF session MBR, for a QER that is referenced by all the PDRs of a TDF session;\n-\tthe bearer MBR, for a QER that is referenced by all the PDRs of a bearer;\n-\tthe SDF MBR, for a QER that is referenced by all the PDRs of a SDF.\nFor 5GC, this IE may be set to the value of:\n-\tthe Session-AMBR, for a QER that is referenced by all the PDRs of the non-GBR QoS flows of a PDU session;\n-\tthe QoS Flow MBR, for a QER that is referenced by all the PDRs of a QoS Flow;\n-\tthe SDF MBR, for a QER that is referenced by all the PDRs of a SDF\n-\tthe Authorized DL Session AMBR for Offloading, for a QER that is referenced by all the PDRs of the DL non-GBR QoS flows of a PDU session authorized for offloading to the local part of DN in VPLMN.\nSee NOTE 1.\n-\nX\nX\nX\nX\nMBR\nGuaranteed Bitrate\nC\nThis IE shall be present if a GBR authorization to packets matching this PDR needs to be modified. When present, this IE shall indicate the authorized uplink and/or downlink guaranteed bit rate.\nThis IE may be set to the value of:\n-\tthe aggregate GBR, for a QER that is referenced by all the PDRs of a GBR bearer;\n-\tthe QoS Flow GBR, for a QER that is referenced by all the PDRs of a QoS Flow (for 5GC);\n-\tthe SDF GBR, for a QER that is referenced by all the PDRs of a SDF.\nSee NOTE 1.\n-\nX\nX\nX\nX\nGBR\nPacket Rate\nC\nThis IE shall be present if a Packet Rate enforcement action (in terms of number of packets per time interval) need to be modified for packets matching this PDR.\n-\nX\n-\nX\n-\nPacket Rate\nDL Flow Level Marking\nC\nThis IE shall be set if the DL Flow Level Marking IE needs to be modified.\nSee NOTE 1.\n-\nX\nX\n-\n-\nDL Flow Level Marking\nQoS flow identifier\nC\nThis IE shall be present if it needs to be modified.\n-\n-\n-\nX\nX\nQFI\nReflective QoS\nC\nThis IE shall be present if the state of the Reflective QoS needs to be modified (activate if inactive, or deactivate the active Reflective QoS).\n-\n-\n-\nX\n-\nRQI\nPaging Policy Indicator\nC\nThis IE shall be present if it needs to be modified.\n-\n-\n-\nX\n-\nPaging Policy Indicator\nAveraging Window\nO\nThis IE may be present if the UP function is required to modify the Averaging Window. (NOTE 2)\n-\n-\n-\nX\n-\nAveraging Window\nQER Control Indications\nC\nThis IE shall be included if the CP function need to provide the updated QoS enforcement control information:\n-\tRCSR (Rate Control Status Reporting): the CP function shall set this bit \"1\" to request the UP function to report the rate control status when the PFCP session is released.\n-\nX\n-\nX\n-\nQER Control Indications\nQER Indications\nC\nThis IE shall be included if the CP function need to provide updated QER Indications\". When present, it shall be set as follows:\n-\tEDBMI (End Of Data Burst Marking Indication): this bit shall be set \"1\" to request the UPF to set End Of Data Burst indication together with the QFI (identifying the QoS flow conveying the Data Burst) in the PDU Session Container of the GTP-U packet encapsulating the last PDU of each data burst (see 3GPP TS 38.415 [34]). When this indication was earlier set to \"1\", this IE shall be set to \"0\" to request the UPF to stop performing End of Data Burst marking for the DL PDRs associated with the QER.\n-\tEML4S (ECN Marking for L4S): this IE shall be set to \"1\" to request the UPF to perform ECN marking for L4S for the traffic of the UL and/or DL PDRs associated with the QER (see clause 5.38.1). When this indication was earlier set to \"1\", this IE shall be set to \"0\" to request the UPF to stop performing ECN marking for L4S for the traffic of the UL and/or DL PDRs associated with the QER.\n-\tPDUSM (PDU Set Marking): this IE shall be set to \"1\" to request the UPF to perform PDU Set marking for the traffic of the DL PDRs associated with the QER (see clause 5.38.3). When this indication was earlier set to \"1\", this IE shall be set to \"0\" to request the UPF to stop performing PDU Set identification and marking for the traffic of the DL PDRs associated with the QER.\n-\n-\n-\n-\n-\n-\n-\n-\n-\nX\nX\nX\n-\n-\n-\nQER Indications\nNOTE 1:\tThe IEs which do not need to be modified shall not be included in the Update QER IE. The UP function shall continue to behave according to the values previously received for IEs not present in the Update QER IE.\nNOTE 2:\tFor a GBR QoS flow, as 5QI is not signalled over N4, one default averaging window shall be pre-configured in the UPF. For Non-GBR QoS Flows, e.g., for the measurement of the Session-AMBR or Authorized DL Session AMBR for Offloading, the averaging window to be used (if not received over N4) is implementation specific.",
      "chunk_type": "requirement",
      "cross_references": [
        "clause_5.38.1",
        "clause_5.38.3",
        "table_7.5.4.5-1",
        "figure_7.5.4.5-1",
        "ts_38.415"
      ]
    },
    {
      "chunk_id": "ts_29.244_7.5.4.6",
      "section_id": "7.5.4.6",
      "section_title": "Remove PDR IE within PFCP Session Modification Request",
      "content": "The Remove PDR grouped IE shall be encoded as shown in Figure 7.5.4.6-1.\nR grouped IE shall be encoded as shown in Figure 7.5.4.6-1.\nTable 7.5.4.6-1: Remove PDR IE within PFCP Session Modification Request\nOctet 1 and 2\nRemove PDR IE Type = 15 (decimal)\nOctets 3 and 4\nLength = n\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\nSxa\nSxb\nSxc\nN4\nN4mb\nPDR ID\nM\nThis IE shall identify the PDR to be deleted.\nX\nX\nX\nX\nX\nPDR ID",
      "chunk_type": "requirement",
      "cross_references": [
        "table_7.5.4.6-1",
        "figure_7.5.4.6-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_7.5.4.7",
      "section_id": "7.5.4.7",
      "section_title": "Remove FAR IE within PFCP Session Modification Request",
      "content": "The Remove FAR grouped IE shall be encoded as shown in Figure 7.5.4.7-1.\nTable 7.5.4.7-1: Remove FAR IE within PFCP Session Modification Request\nOctet 1 and 2\nRemove FAR IE Type = 16 (decimal)\nOctets 3 and 4\nLength = n\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\nSxa\nSxb\nSxc\nN4\nN4mb\nFAR ID\nM\nThis IE shall identify the FAR to be deleted.\nX\nX\nX\nX\nX\nFAR ID",
      "chunk_type": "requirement",
      "cross_references": [
        "table_7.5.4.7-1",
        "figure_7.5.4.7-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_7.5.4.8",
      "section_id": "7.5.4.8",
      "section_title": "Remove URR IE within PFCP Session Modification Request",
      "content": "The Remove URR grouped IE shall be encoded as shown in Figure 7.5.4.7-1.\nTable 7.5.4.8-1: Remove URR IE within PFCP Session Modification Request\nOctet 1 and 2\nRemove URR IE Type = 17 (decimal)\nOctets 3 and 4\nLength = n\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\nSxa\nSxb\nSxc\nN4\nN4mb\nURR ID\nM\nThis IE shall identify the URR to be deleted.\nX\nX\nX\nX\nX\nURR ID",
      "chunk_type": "requirement",
      "cross_references": [
        "table_7.5.4.8-1",
        "figure_7.5.4.7-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_7.5.4.9",
      "section_id": "7.5.4.9",
      "section_title": "Remove QER IE PFCP Session Modification Request",
      "content": "The Remove QER grouped IE shall be encoded as shown in Figure 7.5.4.9-1.\nT Table 7.5.4.9-1: Remove QER IE PFCP Session Modification Request\nOctet 1 and 2\nRemove QER IE Type = 18 (decimal)\nOctets 3 and 4\nLength = n\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\nSxa\nSxb\nSxc\nN4\nN4mb\nQER ID\nM\nThis IE shall identify the QER to be deleted.\n-\nX\nX\nX\nX\nQER ID",
      "chunk_type": "requirement",
      "cross_references": [
        "table_7.5.4.9-1",
        "figure_7.5.4.9-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_7.5.4.10",
      "section_id": "7.5.4.10",
      "section_title": "Query URR IE within PFCP Session Modification Request",
      "content": "The Query URR grouped IE shall be encoded as shown in Figure 7.5.4.10-1.\nR grouped IE shall be encoded as shown in Figure 7.5.4.10-1.\nTable 7.5.4.10-1: Query URR IE within PFCP Session Modification Request\nOctet 1 and 2\nQuery URR IE Type = 77 (decimal)\nOctets 3 and 4\nLength = n\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\nSxa\nSxb\nSxc\nN4\nN4mb\nURR ID\nM\nThis IE shall identify the URR being queried.\nX\nX\nX\nX\nX\nURR ID",
      "chunk_type": "requirement",
      "cross_references": [
        "table_7.5.4.10-1",
        "figure_7.5.4.10-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_7.5.4.11",
      "section_id": "7.5.4.11",
      "section_title": "Update BAR IE within PFCP Session Modification Request",
      "content": "The Update BAR grouped IE shall be encoded as shown in Figure 7.5.4.11-1.\nTable 7.5.4.11-1: Update BAR IE within PFCP Session Modification Request\nOctet 1 and 2\nUpdate BAR IE Type = 86 (decimal)\nOctets 3 and 4\nLength = n\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\nSxa\nSxb\nSxc\nN4\nN4mb\nBAR ID\nM\nThis IE shall identify the BAR Rule to be modified.\nX\n-\n-\nX\n-\nBAR ID\nDownlink Data Notification Delay\nC\nThis IE shall be present if the UP function indicated support of the Downlink Data Notification Delay parameter (see clause 8.2.28) and the Downlink Data Notification Delay needs to be modified.\nWhen present, it shall contain the delay the UP function shall apply between receiving a downlink data packet and notifying the CP function about it, when the Apply Action parameter requests to buffer the packets and notify the CP function.\nX\n-\n-\nX\n-\nDownlink Data Notification Delay\nSuggested Buffering Packets Count\nC\nThis IE may be present if the UP Function indicated support of the feature UDBC.\nWhen present, it shall contain the number of packets that are suggested to be buffered when the Apply Action parameter requests to buffer the packets. The packets that exceed the limit shall be discarded.\n-\nX\nX\nX\n-\nSuggested Buffering Packets Count\nDL Buffering Duration\nC\nThis IE shall be present if the UP function indicated support of the DL Buffering Duration parameter in PFCP Session Modification Request feature (see DBDM feature in clause 8.2.25) and extended buffering of downlink data packet is required in the UP function.\nWhen present, this IE shall indicate the duration during which the UP function shall buffer the downlink data packets and when the EDBN flag is not present refrain from sending any further notification to the CP function about the arrival of DL data packets. (NOTE 1)\nX\n-\n-\nX\n-\nDL Buffering Duration\nDL Buffering Suggested Packet Count\nO\nThis IE may be present if the UP function indicated support of the DL Buffering Suggested Packet Count parameter in PFCP Session Modification Request feature (see DBDM feature in clause 8.2.25) and extended buffering of downlink data packet is required in the UP function.\nWhen present, this IE shall indicate the maximum number of downlink data packets suggested to be buffered in the UP function.\nX\n-\n-\nX\n-\nDL Buffering Suggested Packet Count\nMT-EDT Control Information\nO\nThis IE may be included to request the SGW-U to report the sum of DL Data Packets Size.\nX\n-\n-\n-\n-\nMT-EDT Control Information\nMT-SDT Control Information\nO\nThis IE may be included to request the UPF to report the sum of DL Data Packets Size per QoS flow.\n-\n-\n-\nX\n-\nMT-SDT Control Information\nExtended DL Buffering Notification Policy\nC\nThis IE may be present if the DL Buffering Duration IE is present.\nWhen present, it shall contain the EDBN flag indicating the Extended DL Buffering Notification policy. (NOTE 1)\n-\n-\n-\nX\n-\nExtended DL Buffering Notification Policy\nNOTE 1:\tIf the Apply Action requests the UP function to buffer and notify the CP function, the DL Buffering Duration is set, the EDBN flag is not present, then the UP function shall not notify the CP function for the duration indicated by the DL Buffering Duration. If the Apply Action requests the UP function to buffer downlink data packets, the DL Buffering Duration is set, the EDBN bit is set to \"1\", then the UP function shall notify the CP function of the arrival of the first buffered DL packet for each QoS flow for a given FAR for the duration indicated by the DL Buffering Duration.",
      "chunk_type": "requirement",
      "cross_references": [
        "clause_8.2.28",
        "clause_8.2.25",
        "table_7.5.4.11-1",
        "figure_7.5.4.11-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_7.5.4.12",
      "section_id": "7.5.4.12",
      "section_title": "Remove BAR IE within PFCP Session Modification Request",
      "content": "The Remove BAR grouped IE shall be encoded as shown in Figure 7.5.4.12-1.\nTable 7.5.4.12-1: Remove BAR IE within PFCP Session Modification Request\nOctet 1 and 2\nRemove BAR IE Type = 87 (decimal)\nOctets 3 and 4\nLength = n\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\nSxa\nSxb\nSxc\nN4\nN4mb\nBAR ID\nM\nThis IE shall identify the BAR to be deleted.\nX\n-\n-\nX\n-\nBAR ID",
      "chunk_type": "requirement",
      "cross_references": [
        "table_7.5.4.12-1",
        "figure_7.5.4.12-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_7.5.4.13",
      "section_id": "7.5.4.13",
      "section_title": "Update Traffic Endpoint IE within PFCP Session Modification Request",
      "content": "The Update Traffic Endpoint grouped IE shall be encoded as shown in Figure 7.5.4.13-1.\nTable 7.5.4.13-1: Update Traffic Endpoint IE within PFCP Session Modification Request\nOctet 1 and 2\nUpdate Traffic Endpoint Type = 129 (decimal)\nOctets 3 and 4\nLength = n\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\nSxa\nSxb\nSxc\nN4\nN4mb\nTraffic Endpoint ID\nM\nThis IE shall uniquely identify the Traffic Endpoint to be modified for that PFCP session.\nX\nX\nX\nX\nX\nTraffic Endpoint ID\nLocal F-TEID\nC\nThis IE shall be present if it needs to be changed.\nThe CP function shall set the CHOOSE (CH) bit to 1 if the CP function requests the UP function to assign a local F-TEID to the PDR.\nSee NOTE.\nX\n-\n-\nX\n-\nF-TEID\nNetwork Instance\nO\nIf present, this IE shall identify the Network instance to match for the incoming packet. See NOTE.\nX\nX\nX\nX\nX\nNetwork Instance\nRedundant Transmission Detection Parameters\nC\nThis IE shall be present if it needs to be changed See Table 7.5.2.2-5.\nSee NOTE.\n-\n-\n-\nX\n-\nRedundant Transmission Detection Parameters\nUE IP address\nC\nThis IE shall be present if it needs to be changed.\nIn the 5GC, several IEs with the same IE type may be present to represent multiple UE IP addresses, if the UPF indicated support of the IP6PL feature (see clause 5.21). When present, the UE IP address(es) present in this IE shall replace the UE IP address(es) stored in the UP function for this traffic endpoint.\nSee NOTE.\n-\nX\nX\nX\n-\nUE IP address\nFramed-Route\nC\nThis IE shall be present for a PDR if the UPF indicated support of Framed Routing (see clauses 8.2.25 and 5.16) and it needs to be changed. If present, this IE shall describe a framed route.\nSeveral IEs with the same IE type may be present to provision a list of framed routes.\n-\nX\n-\nX\n-\nFramed-Route\nFramed-Routing\nC\nThis IE shall be present for a DL PDR if the UPF indicated support of Framed Routing (see clauses 8.2.25 and 5.16) and it needs to be changed. If present, this IE shall describe the routing method for the UP function for the IP route related to Framed-Routes or Framed-IPv6-Routes. (NOTE 2)\n-\nX\n-\nX\n-\nFramed-Routing\nFramed-IPv6-Route\nC\nThis IE shall be present for a PDR if the UPF indicated support of Framed Routing (see clauses 8.2.25 and 5.16) and it needs to be changed. If present, this IE shall describe a framed IPv6 route.\nSeveral IEs with the same IE type may be present to provision a list of framed IPv6 routes.\n-\nX\n-\nX\n-\nFramed-IPv6-Route\nQFI\nC\nThis IE shall be present if QFI(s) applicable for the traffic endpoints need to be changed and if the UPF has indicated it supports MTE feature as specified in clause 8.2.25.\nIf present, this IE shall identify the QoS Flow Identifier to match for the incoming packet.\nSeveral IEs with the same IE type may be present to provision a list of QFIs. When present, the full set of applicable QFIs shall be provided.\n-\n-\n-\nX\n-\nQFI\nSource Interface Type\nC\nThis IE shall be present if the 3GPP interface type of the traffic endpoint needs to be changed.\nX\nX\n-\nX\nX\n3GPP Interface Type\nRAT Type\nO\nThis IE may be present if there is a RAT change for the UL PDR(s) if the PFCP session is established for a MA PDU session.\n-\n-\n-\nX\n-\nRAT Type\nNOTE 1:\tThe IEs which do not need to be modified shall not be included in the Update Traffic Endpoint IE. The UP function shall continue to behave according to the values previously received for IEs not present in the Update Traffic Endpoint IE. F-TEID may be changed if the SGW-C has received the \"Change F-TEID support Indication\" over the S11/S4 interface (for an IDLE state UE initiated TAU/RAU procedure to allow the SGW changing the GTP-U F-TEID).\nNOTE 2:\tIn this release of specification, the UP function shall announce the IP route(s) for Framed-Route(s) or Framed-IPv6-Route(s) to the PDN regardless of the value of the Framed-Routing.",
      "chunk_type": "requirement",
      "cross_references": [
        "clause_5.21",
        "clause_8.2.25",
        "table_7.5.4.13-1",
        "table_7.5.2.2-5",
        "figure_7.5.4.13-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_7.5.4.14",
      "section_id": "7.5.4.14",
      "section_title": "Remove Traffic Endpoint IE within PFCP Session Modification Request",
      "content": "The Remove Traffic Endpoint grouped IE shall be encoded as shown in Figure 7.5.4.14-1.\nTable 7.5.4.14-1: Remove Traffic Endpoint IE within PFCP Session Modification Request\nOctet 1 and 2\nRemove Traffic Endpoint IE Type = 130 (decimal)\nOctets 3 and 4\nLength = n\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\nSxa\nSxb\nSxc\nN4\nN4mb\nTraffic Endpoint ID\nM\nThis IE shall identify the Traffic Endpoint to be deleted.\nX\nX\nX\nX\nX\nTraffic Endpoint ID",
      "chunk_type": "requirement",
      "cross_references": [
        "table_7.5.4.14-1",
        "figure_7.5.4.14-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_7.5.4.15",
      "section_id": "7.5.4.15",
      "section_title": "Remove MAR IE within PFCP Session Modification Request",
      "content": "The Remove MAR grouped IE shall be encoded as shown in Figure 7.5.4.15-1.\nTable 7.5.4.15-1: Remove MAR IE within PFCP Session Modification Request\nOctet 1 and 2\nRemove MAR IE Type = 168 (decimal)\nOctets 3 and 4\nLength = n\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\nSxa\nSxb\nSxc\nN4\nN4mb\nMAR ID\nM\nThis IE shall identify the MAR to be deleted.\n-\n-\n-\nX\n-\nMAR ID",
      "chunk_type": "requirement",
      "cross_references": [
        "table_7.5.4.15-1",
        "figure_7.5.4.15-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_7.5.4.16",
      "section_id": "7.5.4.16",
      "section_title": "Update MAR IE within PFCP Session Modification Request",
      "content": "The Update MAR grouped IE shall be encoded as shown in Figure 7.5.4.16-1.\nTable 7.5.4.16-1: Update MAR IE within PFCP Session Modification Request\nOctet 1 and 2\nUpdate MAR IE Type = 169 (decimal)\nOctets 3 and 4\nLength = n\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\nSxa\nSxb\nSxc\nN4\nN4mb\nMAR ID\nM\nThis IE shall identify the MAR to be updated.\n-\n-\n-\nX\n-\nMAR ID\nSteering Functionality\nC\nThis IE shall be present if it is changed.\n-\n-\n-\nX\n-\nSteering Functionality\nSteering Mode\nC\nThis IE shall be present if it is changed.\n-\n-\n-\nX\n-\nSteering Mode\nUpdate 3GPP Access Forwarding Action Information\nC\nThis IE shall be present if the 3GPP Access Forwarding Action Information was provisioned previously and if any of IEs is to be changed.\nThis IE shall also be present to remove 3GPP Access Forwarding Action Information that was provisioned previously if the UE deregisters from the corresponding access. This shall be done by including this IE with a null length.\n-\n-\n-\nX\n-\nUpdate 3GPP Access Forwarding Action Information\nUpdate Non-3GPP Access Forwarding Action Information\nC\nThis IE shall be present if the Non-3GPP Access Forwarding Action Information was provisioned previously and if any of IEs is to be changed.\nThis IE shall also be present to remove the Non-3GPP Access Forwarding Action Information that was provisioned previously if the UE deregisters from the corresponding access. This shall be done by including this IE with a null length.\n-\n-\n-\nX\n-\nUpdate Non-3GPP Access Forwarding Action Information\n3GPP Access Forwarding Action Information\nC\nThis IE shall be present to provision 3GPP access specific forwarding action information when this access is added, i.e. when the UE registers to 3GPP access.\nSee Table 7.5.2.8-2.\n-\n-\n-\nX\n-\n3GPP Access Forwarding Action Information\nNon-3GPP Access Forwarding Action Information\nC\nThis IE shall be present to provision Non-3GPP access specific forwarding action information when this access is added, i.e. when the UE registers to non-3GPP access.\nSee Table 7.5.2.8-3.\n-\n-\n-\nX\n-\nNon-3GPP Access Forwarding Action Information\nThreshold values\nC\nThis IE shall be present if it is changed.\n-\n-\n-\nX\n-\nThresholds\nSteering Mode Indicator\nC\nThis IE shall be included if any of the following flag is set to \"1\" or if the change of flag(s) from \"1\" to \"0\" results in the IE becoming set to all zeros.\nApplicable flags are:\n-\tALBI (Autonomous Load Balancing Indicator): this flag shall be set to \"1\" if the SMF allows the UPF to apply autonomous load-balance when the Steering Mode is Load-Balancing;\n-\tUEAI (UE Assistance Indicator): this flag shall be set to \"1\" if the SMF allows UE assistant load-balance when the Steering Mode is Load-Balancing.\n-\n-\n-\nX\n-\nSteering Mode Indicator\nTransport Mode\nC\nThis IE shall be present if it is changed.\n-\n-\n-\nX\n-\nTransport Mode\nTable 7.5.4.16-2: Update 3GPP Access Forwarding Action Information IE in Update MAR IE\nOctet 1 and 2\nUpdate 3GPP Access Forwarding Action Information IE Type = 175 (decimal)\nOctets 3 and 4\nLength = n\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\nSxa\nSxb\nSxc\nN4\nN4mb\nFAR ID\nC\nThis IE shall be present if it is changed.\n-\n-\n-\nX\n-\nFAR ID\nWeight\nC\nThis IE shall be present if it is changed.\n-\n-\n-\nX\n-\nWeight\nPriority\nC\nThis IE shall be present if it is changed.\n-\n-\n-\nX\n-\nPriority\nURR ID\nC\nThis IE shall be present if a measurement action shall be applied or no longer applied to packets for this access.\nWhen present, this IE shall contain the list of all the URR IDs to be associated to this access.\n-\n-\n-\nX\n-\nURR ID\nRAT Type\nO\nThis IE may be present if it is changed.\n-\n-\n-\nX\n-\nRAT Type\nTable 7.5.4.16-3: Update Non-3GPP Access Forwarding Action Information IE in Update MAR IE\nOctet 1 and 2\nUpdate Non-3GPP Access Forwarding Action Information IE Type = 176 (decimal)\nOctets 3 and 4\nLength = n\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\nSxa\nSxb\nSxc\nN4\nN4mb\nSame IEs and requirements as defined in Table 7.5.4.16-2",
      "chunk_type": "requirement",
      "cross_references": [
        "table_7.5.4.16-1",
        "table_7.5.2.8-2",
        "table_7.5.2.8-3",
        "table_7.5.4.16-2",
        "table_7.5.4.16-3",
        "figure_7.5.4.16-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_7.5.4.17",
      "section_id": "7.5.4.17",
      "section_title": "Create PDR/FAR/URR/QER/BAR/MAR IEs within PFCP Session Modification Request",
      "content": "PFCP Session Modification Request message may conditionally include Create PDR IE, Create FAR IE, Create URR IE, Create QER IE, Create BAR IE and Create MAR IE. The encoding of these IEs are specified within PFCP Session Establishment Request message (see clauses 7.5.2.2 – 7.5.2.8).",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.244_7.5.4.18",
      "section_id": "7.5.4.18",
      "section_title": "TSC Management Information IE within PFCP Session Modification Request",
      "content": "The TSC Management Information grouped IE shall be encoded as shown in Table 7.5.4.18-1.\nTable 7.5.4.18-1: TSC Management Information IE within PFCP Session Modification Request\nOctet 1 and 2\nTSC Management Information IE Type = 199 (decimal)\nOctets 3 and 4\nLength = n\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\nSxa\nSxb\nSxc\nN4\nN4mb\nPort Management Information Container\nO\nWhen present, this IE shall contain a Port Management Information container.\n-\n-\n-\nX\n-\nPort Management Information Container\nUser Plane Node Management Information Container\nO\nWhen present, this IE shall contain an User Plane Node Management Information container.\n-\n-\n-\nX\n-\nUser Plane Node Management Information Container\nNW-TT Port Number\nC\nWhen PMIC IE is present, this IE shall contain the related NW-TT Port Number.\n-\n-\n-\nX\n-\nNW-TT Port Number\nDirect Reporting Information\nC\nThis IE shall be present if the UPF indicated support of the DRTSC feature and if the TSC management information events shall be reported by the UPF directly to a TSN AF or TSCTSF (see clause 5.26.3.2).\n-\n-\n-\nX\n-\nDirect Reporting Information\nThe Direct Reporting Information IE shall be encoded as shown in Table 7.5.4.18-2.\nTable 7.5.4.18-2: Direct Reporting Information\nOctet 1 and 2\nDirect Reporting Information = 295 (decimal)\nOctets 3 and 4\nLength = n\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\nSxa\nSxb\nSxc\nN4\nN4mb\nEvent Notification URI\nM\nThis IE shall contain the notification URI to be used for sending the UPF event notifications.\n-\n-\n-\nX\n-\nEvent Notification URI\nNotification Correlation ID\nC\nThis IE shall indicate the notification correlation id to be included in the UPF event notifications. It shall be present if it is available.\n-\n-\n-\nX\n-\nNotification Correlation ID",
      "chunk_type": "requirement",
      "cross_references": [
        "clause_5.26.3.2",
        "table_7.5.4.18-1",
        "table_7.5.4.18-2"
      ]
    },
    {
      "chunk_id": "ts_29.244_7.5.4.19",
      "section_id": "7.5.4.19",
      "section_title": "Remove SRR IE within PFCP Session Modification Request",
      "content": "The Remove SRR grouped IE shall be encoded as shown in Table 7.5.4.19-1.\nTable 7.5.4.19-1: Remove SRR IE within PFCP Session Modification Request\nOctet 1 and 2\nRemove SRR IE Type = 211 (decimal)\nOctets 3 and 4\nLength = n\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\nSxa\nSxb\nSxc\nN4\nN4mb\nSRR ID\nM\nThis IE shall identify the SRR to be deleted.\n-\n-\n-\nX\n-\nSRR ID",
      "chunk_type": "requirement",
      "cross_references": [
        "table_7.5.4.19-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_7.5.4.20",
      "section_id": "7.5.4.20",
      "section_title": "Update SRR IE within PFCP Session Modification Request",
      "content": "The Update SRR grouped IE shall be encoded as shown in Table 7.5.4.20-1.\nTable 7.5.4.20-1: Update SRR IE within PFCP Session Modification Request\nOctet 1 and 2\nUpdate SRR IE Type = 213 (decimal)\nOctets 3 and 4\nLength = n\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\nSxa\nSxb\nSxc\nN4\nN4mb\nSRR ID\nM\nThis IE shall uniquely identify the SRR among all the SRRs configured for that PFCP session\n-\n-\n-\nX\n-\nSRR ID\nAccess Availability Control Information\nC\nThis IE shall be present if the Access Availability Control Information needs to be modified. See Table 7.5.2.9-2.\nThe CP function shall provide the full Access Availability Control Information IE. The UP function shall replace the Access Availability Control Information IE provisioned earlier, if any, by the new received IE.\n-\n-\n-\nX\n-\nAccess Availability Control Information\nQoS Monitoring per QoS flow Control Information\nC\nThis IE shall be present if the QoS Monitoring per QoS flow Control Information needs to be modified. See Table 7.5.2.9-3.\nThe CP function shall provide the full set of QoS Monitoring per QoS flow Control Information IE(s). The UP function shall replace any QoS Monitoring per QoS flow Control Information IE(s) provisioned earlier by the new set of received IE(s).\nSeveral IEs within the same IE type may be present to represent a list of QoS Monitoring per QoS flow Control Information for different QoS flows.\n-\n-\n-\nX\n-\nQoS Monitoring per QoS flow Control Information\nDirect Reporting Information\nC\nThis IE shall be present if the Direct Reporting Information IE needs to be modified. See Table 7.5.2.9-4.\n-\n-\n-\nX\n-\nDirect Reporting Information\nTraffic Parameter Measurement Control Information\nC\nThis IE shall be present if the Traffic Parameter Measurement Control Information needs to be modified. See Table 7.5.2.9-4.\nThe CP function shall provide the full set of Traffic Parameter Measurement Control Information(s). The UP function shall replace any Traffic Parameter Measurement Control Information IE(s) provisioned earlier by the new set of received IE(s).\nSeveral IEs within the same IE type may be present to represent a list of Traffic Parameter Measurement Control Information for different QoS flows or different traffic parameters.\n-\n-\n-\nX\n-\nTraffic Parameter Measurement Control Information",
      "chunk_type": "requirement",
      "cross_references": [
        "table_7.5.4.20-1",
        "table_7.5.2.9-2",
        "table_7.5.2.9-3",
        "table_7.5.2.9-4"
      ]
    },
    {
      "chunk_id": "ts_29.244_7.5.4.21",
      "section_id": "7.5.4.21",
      "section_title": "Ethernet Context Information within PFCP Session Modification Request",
      "content": "The Ethernet Context Information grouped IE shall be encoded as shown in Table 7.5.4.21-1.\nTable 7.5.4.21-1: Ethernet Context Information IE within PFCP Session Modification Request\nOctet 1 and 2\nEthernet Context Information IE Type = 254 (decimal)\nOctets 3 and 4\nLength = n\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\nSxa\nSxb\nSxc\nN4\nN4mb\nMAC Addresses Detected\nM\nThis IE shall be present if one or more MAC addresses need to be associated to the PDU session.\nSeveral IEs with the same IE type may be present to provision multiple lists of MAC addresses (e.g. with different V-LAN tags).\n-\n-\n-\nX\n-\nMAC Addressed Detected",
      "chunk_type": "requirement",
      "cross_references": [
        "table_7.5.4.21-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_7.5.4.22",
      "section_id": "7.5.4.22",
      "section_title": "Query Packet Rate Status IE within PFCP Session Modification Request",
      "content": "The Query Packet Rate Status grouped IE shall be encoded as shown in Table 7.5.4.22-1.\nTable 7.5.4.22-1: Query Packet Rate Status IE within PFCP Session Modification Request\nOctet 1 and 2\nQuery Packet Rate Status IE Type = 263 (decimal)\nOctets 3 and 4\nLength = n\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\nSxa\nSxb\nSxc\nN4\nN4mb\nQER ID\nM\nThis IE shall identify the QER being queried for its Packet Rate Status\n-\nX\n-\nX\n-\nQER ID",
      "chunk_type": "requirement",
      "cross_references": [
        "table_7.5.4.22-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_7.5.5.1",
      "section_id": "7.5.5.1",
      "section_title": "General",
      "content": "The PFCP Session Modification Response shall be sent over the Sxa, Sxb, Sxc and N4 interface by the UP function to the CP function as a reply to the PFCP Session Modification Request.\nTable 7.5.5.1-1: Information Elements in a PFCP Session Modification Response\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\nSxa\nSxb\nSxc\nN4\nN4mb\nCause\nM\nThis IE shall indicate the acceptance, partial acceptance or rejection of the corresponding request message.\nX\nX\nX\nX\nX\nCause\nOffending IE\nC\nThis IE shall be included if the rejection is due to a conditional or mandatory IE missing or faulty.\nX\nX\nX\nX\nX\nOffending IE\nCreated PDR\nC\nThis IE shall be present if the cause is set to \"success\", new PDR(s) were requested to be created and the UP function was requested to allocate the local F-TEID or a UE IP address/prefix for the PDR(s).\nWhen present, this IE shall contain the PDR information associated to the PFCP session.\nSee Table 7.5.3.2-1.\nSeveral IEs within the same IE type may be present to represent a list of created PDRs.\nX\nX\n-\nX\nX\nCreated PDR\nLoad Control Information\nO\nThe UP function may include this IE if it supports the load control feature and the feature is activated in the network.\nSee Table 7.5.3.3-1.\nX\nX\nX\nX\nX\nLoad Control Information\nOverload Control Information\nO\nDuring an overload condition, the UP function may include this IE if it supports the overload control feature and the feature is activated in the network.\nX\nX\nX\nX\nX\nOverload Control Information\nUsage Report\nC\nThis IE shall be present if:\n- the Query URR IE was present or the QAURR flag was set to \"1\" in the PFCP Session Modification Request,\n- traffic usage measurements for that URR are available at the UP function, and\n- the UP function decides to return some or all of the requested usage reports in the PFCP Session Modification Response.\nThis IE shall be also present if:\n- a URR or the last PDR associated to a URR has been removed,\n- non-null traffic usage measurements for that URR are available in the UP function, and\n- the UP function decides to return some or all of the related usage reports in the PFCP Session Modification Response (see clause 5.2.2.3.1).\nSeveral IEs within the same IE type may be present to represent a list of Usage Reports.\nX\nX\nX\nX\nX\nUsage Report\nFailed Rule ID\nC\nThis IE shall be included if the Cause IE indicates a rejection due to a rule creation or modification failure.\nX\nX\nX\nX\nX\nFailed Rule ID\nAdditional Usage Reports Information\nC\nThis IE shall be included if the Query URR IE was present or the QAURR flag was set to \"1\" in the PFCP Session Modification Request, and usage reports need to be sent in additional PFCP Session Report Request messages (see clause 5.2.2.3.1).\nWhen present, this IE shall either indicate that additional usage reports will follow, or indicate the total number of usage reports that need to be sent in PFCP Session Report Request messages.\nX\nX\nX\nX\nX\nAdditional Usage Reports Information\nCreated/Updated Traffic Endpoint\nC\nThis IE shall be present if the cause is set to \"success\", Traffic Endpoint(s) were requested to be created or updated, and the UP function was requested to allocate the local F-TEID or a UE IP address/prefix for the Traffic Endpoint(s).\nIf the UP function allocates additional UE IP address/prefix (upon receiving a Create Traffic Endpoint or Update Traffic Endpoint in the corresponding PFCP Session Modification Request message from the CP function), this IE shall be present and shall contain the complete list of UE IP address / prefix assigned by the UP function for this PFCP session.\nIn the 5GC, several IEs with the same IE type may be present to represent multiple UE IP addresses, if the UPF indicated support of the IP6PL feature (see clause 5.21).\n(NOTE 1)\nWhen present, this IE shall contain the Traffic Endpoint information associated to the PFCP session.\nSee Table 7.5.3.5-1.\nSeveral IEs within the same IE type may be present to represent a list of created/updated Traffic Endpoints.\nX\nX\n-\nX\nX\nCreated Traffic Endpoint\nTSC Management Information\nC\nThis IE shall be present if the UPF needs to send TSC Management information to the SMF.\nSeveral IEs within the same IE type may be present to transfer PMICs for different NW-TT ports. (NOTE 2).\n-\n-\n-\nX\n-\nTSC Management Information\nATSSS Control Parameters\nC\nThis IE shall be present if ATSSS functionality is required in the request message, and the UPF allocates the resources and parameters corresponding to the required ATSSS functionality.\nSee Table 7.5.3.7-1.\n-\n-\n-\nX\n-\nATSSS Control Parameters\nUpdated PDR\nC\nThis IE shall be present if a Update PDR is present in the corresponding PFCP Session Modification Request and UP function is requested to allocate a new F-TEID, e.g. to support the redundant transmission on N3/N9 interfaces, or move the application traffic from a default bearer to a new dedicated bearer, or the UP function is requested to assign additional UE IP Address or Prefix, e.g. a shorter than /64 prefix delegation. See Table 7.5.5.5-1.\nSeveral IEs within the same IE type may be present to represent a list of updated PDRs.\n-\nX\n-\nX\n-\nUpdated PDR\nPacket Rate Status Report\nC\nThis IE shall be present if the CP function has requested to report an immediate packet rate status in the PFCP Session Modification Request and the UP function supports the CIOT feature (see clause 8.2.25).\nSeveral IEs within the same IE type may be present to represent a list of Packet Rate Status Reports.\n-\nX\n-\nX\n-\nPacket Rate Status Report\nPartial Failure Information\nC\nThis IE shall be present if the Cause IE indicates partial acceptance of the request to provide failure information related to a failed rule.\nSeveral IEs within the same IE type may be present to report failures to apply multiple rules.\nSee Table 7.5.3.1-2.\n-\nX\nX\nX\nX\nPartial Failure Information\nMBS Session N4 Information\nC\nThis IE shall be included if any IE in this grouped IE needs to be included as specified in clause 5.34.1.\nSeveral IE with the same IE type may be present to contain N4 Information for several MBS Sessions.\nSee Table 7.5.3.1-5 for encoding.\n-\n-\n-\nX\n-\nMBS Session N4 Information\nTL-Container\nC\nThis IE shall be present if the UPF/CN-TL needs to send a TL-Container to the SMF/CUC to respond to TL-Container information received in the corresponding request.\nSeveral IEs within the same IE type may be present to provide multiple TL-Containers.\n-\n-\n-\nX\n-\nTL-Container\nNOTE 1:\tThe UP function supporting the PDI optimization feature and the IP6PL feature (see clause 8.2.25) shall support providing the complete list of UE IP Address IEs in the Created/Updated Endpoint IE.\nNOTE 2:\tWhen transferring port and user plane node management information between the TSN AF or the TSCTSF and the NW-TT, since the NW-TT may support multiple ports, there may be several instances of the TSC Management Information IEs containing a Port Management Information Container together with a NW-TT Port Number, and only one instance of the TSC Management Information IE containing a User Plane Node Management Information Container that may also contain a Port Management Information Container together with a NW-TT Port Number.",
      "chunk_type": "definition",
      "cross_references": [
        "clause_5.2.2.3.1",
        "clause_5.21",
        "clause_8.2.25",
        "clause_5.34.1",
        "table_7.5.5.1-1",
        "table_7.5.3.2-1",
        "table_7.5.3.3-1",
        "table_7.5.3.5-1",
        "table_7.5.3.7-1",
        "table_7.5.5.5-1",
        "table_7.5.3.1-2",
        "table_7.5.3.1-5"
      ]
    },
    {
      "chunk_id": "ts_29.244_7.5.5.2",
      "section_id": "7.5.5.2",
      "section_title": "Usage Report IE within PFCP Session Modification Response",
      "content": "The Usage Report grouped IE shall be encoded as shown in Table 7.5.5.2-1.\nTable 7.5.5.2-1: Usage Report IE within PFCP Session Modification Response\nOctet 1 and 2\nUsage Report IE Type = 78 (decimal)\nOctets 3 and 4\nLength = n\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\nSxa\nSxb\nSxc\nN4\nN4mb\nURR ID\nM\nThis IE shall identify the URR for which usage is reported.\nX\nX\nX\nX\nX\nURR ID\nUR-SEQN\nM\nThis IE shall uniquely identify the Usage Report for the URR (see clause 5.2.2.3).\nX\nX\nX\nX\nX\nUR-SEQN\nUsage Report Trigger\nM\nThis IE shall identify the trigger for this report.\nX\nX\nX\nX\nX\nUsage Report Trigger\nStart Time\nC\nThis IE shall be present, except if the Usage Report Trigger indicates 'Start of Traffic', 'Stop of Traffic' or 'MAC Addresses Reporting'.\nWhen present, this IE shall provide the timestamp when the collection of the information in this report was started.\nX\nX\nX\nX\nX\nStart Time\nEnd Time\nC\nThis IE shall be present, except if the Usage Report Trigger indicates 'Start of Traffic', 'Stop of Traffic' or 'MAC Addresses Reporting'.\nWhen present, this IE shall provide the timestamp when the collection of the information in this report was generated.\nX\nX\nX\nX\nX\nEnd Time\nVolume Measurement\nC\nThis IE shall be present if a volume measurement needs to be reported.\nX\nX\nX\nX\nX\nVolume Measurement\nDuration Measurement\nC\nThis IE shall be present if a duration measurement needs to be reported.\nX\nX\nX\nX\n-\nDuration Measurement\nTime of First Packet\nC\nThis IE shall be present if available for this URR.\n-\nX\nX\nX\nX\nTime of First Packet\nTime of Last Packet\nC\nThis IE shall be present if available for this URR.\n-\nX\nX\nX\nX\nTime of Last Packet\nUsage Information\nC\nThis IE shall be present if the UP function reports Usage Reports before and after a Monitoring Time or before and after QoS enforcement. When present, it shall indicate whether the usage is reported for the period before or after that time, or before or after QoS enforcement.\nX\nX\nX\nX\n-\nUsage Information\nQuery URR Reference\nC\nThis IE shall be present if this usage report is sent as a result of a query URR received in a PFCP Session Modification Request and the Query URR Reference IE was present in the PFCP Session Modification Request.\nWhen present, it shall be set to the Query URR Reference value received in the PFCP Session Modification Request.\nX\nX\nX\nX\nX\nQuery URR Reference\nEthernet Traffic Information\nC\nThis IE shall be present if Ethernet Traffic Information needs to be reported.\n-\n-\n-\nX\n-\nEthernet Traffic Information",
      "chunk_type": "requirement",
      "cross_references": [
        "clause_5.2.2.3",
        "table_7.5.5.2-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_7.5.5.3",
      "section_id": "7.5.5.3",
      "section_title": "TSC Management Information IE within PFCP Session Modification Response",
      "content": "The TSC Management Information grouped IE shall be encoded as shown in Table 7.5.5.3-1.\nTable 7.5.5.3-1: TSC Management Information IE within PFCP Session Modification Response\nOctet 1 and 2\nTSC Management Information IE Type = 200 (decimal)\nOctets 3 and 4\nLength = n\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\nSxa\nSxb\nSxc\nN4\nN4mb\nPort Management Information Container\nO\nWhen present, this IE shall contain a Port Management Information container.\n-\n-\n-\nX\n-\nPort Management Information Container\nUser Plane Node Management Information Container\nO\nWhen present, this IE shall contain an User Plane Node Management Information container.\n-\n-\n-\nX\n-\nUser Plane Node Management Information Container\nNW-TT Port Number\nC\nWhen PMIC IE is present, this IE shall contain the related NW-TT Port Number.\n-\n-\n-\nX\n-\nNW-TT Port Number",
      "chunk_type": "requirement",
      "cross_references": [
        "table_7.5.5.3-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_7.5.5.4",
      "section_id": "7.5.5.4",
      "section_title": "Packet Rate Status Report IE within PFCP Session Modification Response",
      "content": "The Packet Rate Status Report grouped IE shall be encoded as shown in Table 7.5.5.4-1.\nTable 7.5.5.4-1: Packet Rate Status Report IE within PFCP Session Modification Response message\nOctet 1 and 2\nPacket Rate Status Report IE Type = 264 (decimal)\nOctets 3 and 4\nLength = n\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\nSxa\nSxb\nSxc\nN4\nN4mb\nQER ID\nM\nThis IE shall uniquely identify a QER in a PFCP session.\n-\nX\n-\nX\n-\nQER ID\nPacket Rate Status\nM\nThis IE shall indicate the remaining validity time and the remaining number of UL/DL packets that still can be sent.\n-\nX\n-\nX\n-\nPacket Rate Status",
      "chunk_type": "requirement",
      "cross_references": [
        "table_7.5.5.4-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_7.5.5.5",
      "section_id": "7.5.5.5",
      "section_title": "Updated PDR IE within PFCP Session Modification Response",
      "content": "The Updated PDR grouped IE shall be encoded as shown in Table 7.5.5.5-1.\nTable 7.5.5.5-1: Updated PDR IE in PFCP Session Modification Response\nOctet 1 and 2\nUpdated PDR IE Type = 256 (decimal)\nOctets 3 and 4\nLength = n\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\nSxa\nSxb\nSxc\nN4\nN4mb\nPDR ID\nM\nThis IE shall uniquely identify the PDR among all the PDRs configured for that PFCP session.\n-\n-\n-\nX\n-\nPDR ID\nLocal F-TEID for Redundant Transmission\nC\nThis IE shall be present and shall contain the local F-TEID to be used for this PDR for the reception of redundant uplink packets on the N3/N9 interfaces.\n-\n-\n-\nX\n-\nF-TEID\nLocal F-TEID\nC\nIf the UP function allocates the F-TEID, this IE shall be present and shall contain the local F-TEID to be used for this PDR.\n-\nX\n-\n-\n-\nF-TEID\nUE IP Address\nC\nIf the UP function allocates additional UE IP address/prefix (upon receiving a Update PDR in the corresponding PFCP Session Modification Request message from the CP function), this IE shall be present and shall contain the complete list of UE IP address / prefix assigned by the UP function for this PFCP session.\nIn the 5GC, several IEs with the same IE type may be present to represent multiple UE IP addresses, if the UPF indicated support of the IP6PL feature (see clause 5.21).\n-\nX\n-\nX\n-\nUE IP Address",
      "chunk_type": "requirement",
      "cross_references": [
        "clause_5.21",
        "table_7.5.5.5-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_7.5.6",
      "section_id": "7.5.6",
      "section_title": "PFCP Session Deletion Request",
      "content": "The PFCP Session Deletion Request shall be sent over the Sxa, Sxb, Sxc and N4 interface by the CP function to request the UP function to delete the PFCP session. The PFCP Header for Session Related Messages shall contain the F-SEID identifying the PFCP session (see clause 6.3.4.2).\nTable 7.5.6-1: Information Elements in a PFCP Session Deletion Request\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\nSxa\nSxb\nSxc\nN4\nN4mb\nTL-Container\nC\nThis IE shall be present if the SMF/CUC needs to send a TL-Container to the UPF/CN-TL.\nSeveral IEs within the same IE type may be present to provide multiple TL-Containers.\n-\n-\n-\nX\n-\nTL-Container\nNode ID\nC\nThis IE shall be present if a new SMF in an SMF Set, with one PFCP association per SMF and UPF (see clause 5.22.3), takes over the control of the PFCP session.\nWhen present, it shall contain the unique identifier of the new SMF.\n-\n-\n-\nX\nX\nNode ID\nCP F-SEID\nC\nThis IE shall be present if the Node ID is present and if the new SMF decides to change the CP F-SEID of the PFCP session.\nWhen present, it shall contail the unique identifier allocated by the CP function identifying the session.\n-\n-\n-\nX\nX\nF-SEID",
      "chunk_type": "requirement",
      "cross_references": [
        "clause_6.3.4.2",
        "clause_5.22.3",
        "table_7.5.6-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_7.5.7.1",
      "section_id": "7.5.7.1",
      "section_title": "General",
      "content": "The PFCP Session Deletion Response shall be sent over the Sxa, Sxb, Sxc and N4 interface by the UP function to the CP function as a reply to the PFCP Session Deletion Request.\nTable 7.5.7.1-1: Information Elements in a PFCP Session Deletion Response\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\nSxa\nSxb\nSxc\nN4\nN4mb\nCause\nM\nThis IE shall indicate the acceptance or the rejection of the corresponding request message.\nX\nX\nX\nX\nX\nCause\nOffending IE\nC\nThis IE shall be included if the rejection is due to a conditional or mandatory IE missing or faulty.\nX\nX\nX\nX\nX\nOffending IE\nLoad Control Information\nO\nThe UP function may include this IE if it supports the load control feature and the feature is activated in the network.\nSee Table 7.5.3.3-1.\nX\nX\nX\nX\nX\nLoad Control Information\nOverload Control Information\nO\nDuring an overload condition, the UP function may include this IE if it supports the overload control feature and the feature is activated in the network.\nSee Table 7.5.3.4-1.\nX\nX\nX\nX\nX\nOverload Control Information\nUsage Report\nC\nThis IE shall be present if a URR had been provisioned in the UP function for the PFCP session being deleted and traffic usage measurements for that URR are available at the UP function.\nSeveral IEs within the same IE type may be present to represent a list of Usage Reports.\nX\nX\nX\nX\nX\nUsage Report\nAdditional Usage Reports Information\nC\nThis IE shall be included if the usage reports need to be sent in additional PFCP Session Report Request messages (see clause 5.2.2.3.1).\nWhen present, this IE shall either indicate that additional usage reports will follow, or indicate the total number of usage reports that need to be sent in PFCP Session Report Request messages.\nX\nX\nX\nX\nX\nAdditional Usage Reports Information\nPacket Rate Status Report\nC\nThis IE shall be present if the CP function has requested in a QER to report the packet rate status when the PFCP session is released and the UP function supports CIOT feature. (See clause 8.2.25)\n-\nX\n-\nX\n-\nPacket Rate Status Report\nMBS Session N4 Information\nC\nThis IE shall be included if any IE in this grouped IE needs to be included as specified in clause 5.34.1.\nSeveral IE with the same IE type may be present to contain N4 Information for several MBS Sessions.\nSee Table 7.5.3.1-5 for encoding.\n-\n-\n-\nX\n-\nMBS Session N4 Information\nPFCPSDRsp-Flags\nC\nThis IE shall be included if at least one of the flags is set to \"1\".\n-\tPURU (Pending Usage Reports Unacknowledged): the UP function shall set this flag if the UP function has pending PFCP Session Report Request messages which have not been acknowledged yet when it sends the PFCP Session Deletion Response message.\nX\nX\nX\nX\n-\nPFCPSDRsp-Flags\nTL-Container\nC\nThis IE shall be present if the UPF/CN-TL needs to send a TL-Container to the SMF/CUC to respond to TL-Container information received in the corresponding request.\nSeveral IEs within the same IE type may be present to provide multiple TL-Containers.\n-\n-\n-\nX\n-\nTL-Container\nTable 7.5.7.1-2: Packet Rate Status Report IE within PFCP Session Deletion Response message\nOctet 1 and 2\nPacket Rate Status Report IE Type = 252 (decimal)\nOctets 3 and 4\nLength = n\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\nSxa\nSxb\nSxc\nN4\nN4mb\nQER ID\nM\nThis IE shall uniquely identify a QER in a PFCP session.\n-\nX\n-\nX\n-\nQER ID\nPacket Rate Status\nM\nThis IE shall indicate the remaining validity time and the remaining number of UL/DL packets that still can be sent.\n-\nX\n-\nX\n-\nPacket Rate Status",
      "chunk_type": "definition",
      "cross_references": [
        "clause_5.2.2.3.1",
        "clause_8.2.25",
        "clause_5.34.1",
        "table_7.5.7.1-1",
        "table_7.5.3.3-1",
        "table_7.5.3.4-1",
        "table_7.5.3.1-5",
        "table_7.5.7.1-2"
      ]
    },
    {
      "chunk_id": "ts_29.244_7.5.7.2",
      "section_id": "7.5.7.2",
      "section_title": "Usage Report IE within PFCP Session Deletion Response",
      "content": "The Usage Report grouped IE shall be encoded as shown in Table 7.5.7.2-1.\nTable 7.5.7.2-1: Usage Report IE within PFCP Session Deletion Response\nOctet 1 and 2\nUsage Report IE Type = 79 (decimal)\nOctets 3 and 4\nLength = n\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\nSxa\nSxb\nSxc\nN4\nN4mb\nURR ID\nM\nThis IE shall identify the URR for which usage is reported.\nX\nX\nX\nX\nX\nURR ID\nUR-SEQN\nM\nThis IE shall uniquely identify the Usage Report for the URR (see clause 5.2.2.3).\nX\nX\nX\nX\nX\nUR-SEQN\nUsage Report Trigger\nM\nThis IE shall identify the trigger for this report.\nX\nX\nX\nX\nX\nUsage Report Trigger\nStart Time\nC\nThis IE shall be present, except if the Usage Report Trigger indicates 'Start of Traffic', 'Stop of Traffic' or 'MAC Addresses Reporting'.\nWhen present, this IE shall provide the timestamp when the collection of the information in this report was started.\nX\nX\nX\nX\nX\nStart Time\nEnd Time\nC\nThis IE shall be present, except if the Usage Report Trigger indicates 'Start of Traffic', 'Stop of Traffic' or 'MAC Addresses Reporting'.\nWhen present, this IE shall provide the timestamp when the collection of the information in this report was generated.\nX\nX\nX\nX\nX\nEnd Time\nVolume Measurement\nC\nThis IE shall be present if a volume needs to be reported.\nX\nX\nX\nX\nX\nVolume Measurement\nDuration Measurement\nC\nThis IE shall be present if a duration measurement needs to be reported.\nX\nX\nX\nX\n-\nDuration Measurement\nTime of First Packet\nC\nThis IE shall be present if available for this URR.\n-\nX\nX\nX\nX\nTime of First Packet\nTime of Last Packet\nC\nThis IE shall be present if available for this URR.\n-\nX\nX\nX\nX\nTime of Last Packet\nUsage Information\nC\nThis IE shall be present if the UP function reports Usage Reports before and after a Monitoring Time, or before and after QoS enforcement. When present, it shall indicate whether the usage is reported for the period before or after that time, or before or after QoS enforcement.\nX\nX\nX\nX\n-\nUsage Information\nEthernet Traffic Information\nC\nThis IE shall be present if Ethernet Traffic Information needs to be reported. See Table 7.5.8.3-3.\n-\n-\n-\nX\n-\nEthernet Traffic Information",
      "chunk_type": "requirement",
      "cross_references": [
        "clause_5.2.2.3",
        "table_7.5.7.2-1",
        "table_7.5.8.3-3"
      ]
    },
    {
      "chunk_id": "ts_29.244_7.5.8.1",
      "section_id": "7.5.8.1",
      "section_title": "General",
      "content": "The PFCP Session Report Request shall be sent over the Sxa, Sxb, Sxc, N4 and N4mb interface by the UP function to report information related to a PFCP session to the CP function.\nTable 7.5.8.1-1: Information Elements in a PFCP Session Report Request\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\nSxa\nSxb\nSxc\nN4\nN4mb\nReport Type\nM\nThis IE shall indicate the type of the report.\nX\nX\nX\nX\nX\nReport Type\nDownlink Data Report\nC\nThis IE shall be present if the Report Type indicates a Downlink Data Report.\nX\n-\n-\nX\nX\nDownlink Data Report\nUsage Report\nC\nThis IE shall be present if the Report Type indicates a Usage Report.\nSeveral IEs within the same IE type may be present to represent a list of Usage Reports.\nX\nX\nX\nX\nX\nUsage Report\nError Indication Report\nC\nThis IE shall be present if the Report Type indicates an Error Indication Report.\nX\nX\n-\nX\nX\nError Indication Report\nLoad Control Information\nO\nThe UP function may include this IE if it supports the load control feature and the feature is activated in the network.\nSee Table 7.5.3.3-1.\nX\nX\nX\nX\nX\nLoad Control Information\nOverload Control Information\nO\nDuring an overload condition, the UP function may include this IE if it supports the overload control feature and the feature is activated in the network.\nSee Table 7.5.3.4-1.\nX\nX\nX\nX\nX\nOverload Control Information\nAdditional Usage Reports Information\nC\nThis IE shall be included in one of the additional PFCP Session Report Request messages, if the PFCP Session Modification Response or the PFCP Session Deletion Response indicated that more usage reports would follow (i.e. if the AURI flag was set to \"1\") (see clause 5.2.2.3.1).\nWhen present, this IE shall indicate the total number of usage reports that need to be sent in all the additional PFCP Session Report Request messages.\nThis IE may also be included in every additional PFCP Session Report Request message but the last one, with the AURI flag set to 1, to indicate that more usage reports will follow in additional PFCP Session Report Request message.\nX\nX\nX\nX\nX\nAdditional Usage Reports Information\nPFCPSRReq-Flags\nC\nThis IE shall be included if at least one of the flags is set to \"1\".\n-\tPSDBU (PFCP Session Deleted By the UP function):-\tif both the CP function and UP function support the EPFAR feature,the UP function may set this flag if the UP function needs to delete the PFCP session, e.g. to report all remaining non-zero usage reports for all URRs in the PFCP Session and the PFCP session is being deleted locally in the UP function.\n-\tthe UP function shall also set this flag when sending the last PFCP Session Report Request message after having received a PFCP Session Deletion Request (see clause 5.2.2.3.1).\nX\nX\nX\nX\nX\nPFCPSRReq-Flags\nOld CP F-SEID\nC\nThis IE shall be present if the UPF sends the PFCP Session Report Request to a different SMF in an SMF Set. See clauses 5.22.2 and 5.22.3.\nWhen present, it shall indicate the CP F-SEID assigned by the previous SMF to the PFCP session.\n-\n-\n-\nX\nX\nF-SEID\nPacket Rate Status Report\nC\nThis IE shall be present if the EPFAR is used (see clause 5.18), UP function initiates a PFCP Session release and the CP function has requested in a QER to report the packet rate status when the PFCP session is released.\nSee Table 7.5.7.1-1.\n-\nX\n-\nX\n-\nPacket Rate Status Report\nTSC Management Information\nC\nThis IE shall be present if the Report Type indicates TSC Management Information Report.\nSeveral IEs within the same IE type may be present to transfer PMICs for different NW-TT ports. (NOTE).\n-\n-\n-\nX\n-\nTSC Management Information\nSession Report\nC\nThis IE shall be present if the Report Type indicates a Session Report. See Table 7.5.8.6-1.\nSeveral IEs within the same IE type may be present to represent a list of Session Reports.\n-\n-\n-\nX\n-\nSession Report\nCause\nO\nThis IE may be present to provide additional reason for sending the PFCP Session Report Request message, e.g. for a UP function initiated PFCP session deletion due to the corresponding L2TP session being terminated.\n-\nX\n-\nX\n-\nCause\nNOTE:\tWhen transferring port and user plane node management information between the TSN AF or the TSCTSF and NW-TT, since the NW-TT may support multiple ports, there may be several instances of the TSC Management Information IEs containing a Port Management Information Container together with a NW-TT Port Number, and only one instance of the TSC Management Information IE containing a User Plane Node Management Information Container that may also contain a Port Management Information Container together with a NW-TT Port Number.",
      "chunk_type": "definition",
      "cross_references": [
        "clause_5.2.2.3.1",
        "clause_5.18",
        "table_7.5.8.1-1",
        "table_7.5.3.3-1",
        "table_7.5.3.4-1",
        "table_7.5.7.1-1",
        "table_7.5.8.6-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_7.5.8.2",
      "section_id": "7.5.8.2",
      "section_title": "Downlink Data Report IE within PFCP Session Report Request",
      "content": "The Downlink Data Report grouped IE shall be encoded as shown in Table 7.5.8.2-1.\nTable 7.5.8.2-1: Downlink Data Report IE within PFCP Session Report Request\nOctet 1 and 2\nDownlink Data Report IE Type = 83 (decimal)\nOctets 3 and 4\nLength = n\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\nSxa\nSxb\nSxc\nN4\nN4mb\nPDR ID\nM\nThis IE shall identify the PDR for which downlink data packets have been received or discarded at the UP function.\nMore than one IE with this type may be included to represent multiple PDRs having received or discarded downlink data packets.\nX\n-\n-\nX\nX\nPDR ID\nDownlink Data Service Information\nC\nThis IE shall be included for a PFCP session with an IP PDN type, if the UP function supports the Paging Policy Differentiation feature (see clause 4.9 of 3GPP TS 23.401 [14]) and clause 5.4.3.2 of 3GPP TS 23.501 [28]).\nWhen present, for each PDR and for each packet that triggers a Downlink Data Notification, the UP function shall copy, into the Paging Policy Indication value within this IE, the value of the DSCP in TOS (IPv4) or TC (IPv6) information received in the IP payload of the GTP-U packet from the PGW (see IETF RFC 2474 [13]).\nFor 5GC, this IE shall also be included over N4, for each PDR and for each packet that triggers a Downlink Data Notification, if the QFI of the downlink data packet is available. The UPF shall report, per QFI, the sum of the DL Data Packets size, if it supports the MT-SDT feature and the SMF requested to report the sum of the DL Data Packets Size per QoS flow.\nOne IE with this type shall be included per PDR ID reported in the message. When multiple PDR ID IEs are present in the message, the Downlink Data Service Information IEs shall be reported according to the order of the PDR ID IEs.\nX\n-\n-\nX\n-\nDownlink Data Service Information\nDL Data Packets Size\nO\nThis IE may be present if the SGW-U supports the MT-EDT feature and is requested to report the sum of the DL Data Packets Size.\nX\n-\n-\n-\n-\nDL Data Packets Size\nDL Data Status\nO\nThis IE may be present if the first downlink data packet has been buffered or discarded at the UP function for downlink data delivery status notification.\n-\n-\n-\nX\n-\nData Status",
      "chunk_type": "requirement",
      "cross_references": [
        "ts_23.401_clause_4.9",
        "ts_23.401_clause_5.4.3.2",
        "table_7.5.8.2-1",
        "ts_23.501_clause_5.4.3.2",
        "ts_23.401",
        "ts_23.501"
      ]
    },
    {
      "chunk_id": "ts_29.244_7.5.8.3",
      "section_id": "7.5.8.3",
      "section_title": "Usage Report IE within PFCP Session Report Request",
      "content": "The Usage Report grouped IE shall be encoded as shown in Table 7.5.8.3-1.\nTable 7.5.8.3-1: Usage Report IE within PFCP Session Report Request\nOctet 1 and 2\nUsage Report IE Type = 80 (decimal)\nOctets 3 and 4\nLength = n\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\nSxa\nSxb\nSxc\nN4\nN4mb\nURR ID\nM\nThis IE shall identify the URR for which usage is reported.\nX\nX\nX\nX\nX\nURR ID\nUR-SEQN\nM\nThis IE shall uniquely identify the Usage Report for the URR (see clause 5.2.2.3).\nX\nX\nX\nX\nX\nUR-SEQN\nUsage Report Trigger\nM\nThis IE shall identify the trigger for this report.\nX\nX\nX\nX\nX\nUsage Report Trigger\nStart Time\nC\nThis IE shall be present, except if the Usage Report Trigger indicates 'Start of Traffic', 'Stop of Traffic' or 'MAC Addresses Reporting'.\nWhen present, this IE shall provide the timestamp when the collection of the information in this report was started.\nX\nX\nX\nX\nX\nStart Time\nEnd Time\nC\nThis IE shall be present, except if the Usage Report Trigger indicates 'Start of Traffic', 'Stop of Traffic' or ' MAC Addresses Reporting'.\nWhen present, this IE shall provide the timestamp when the collection of the information in this report was generated.\nX\nX\nX\nX\nX\nEnd Time\nVolume Measurement\nC\nThis IE shall be present if a volume measurement needs to be reported. (NOTE 2)\nX\nX\nX\nX\nX\nVolume Measurement\nDuration Measurement\nC\nThis IE shall be present if a duration measurement needs to be reported. (NOTE 2)\nX\nX\nX\nX\n-\nDuration Measurement\nApplication Detection Information\nC\nThis IE shall be present if application detection information needs to be reported.\n-\nX\nX\nX\n-\nApplication Detection Information\nUE IP address\nC\nThis IE shall be present if the start or stop of an application has been detected and no UE IP address was provisioned in the PDI. See NOTE 1.\n-\n-\nX\nX\n-\nUE IP address\nNetwork Instance\nC\nThis IE shall be present if the start or stop of an application has been detected, no UE IP address was provisioned in the PDI and multiple PDNs with overlapping IP addresses are used in the UP function. See NOTE 1.\n-\n-\nX\nX\n-\nNetwork Instance\nTime of First Packet\nC\nThis IE shall be present if available for this URR.\n-\nX\nX\nX\nX\nTime of First Packet\nTime of Last Packet\nC\nThis IE shall be present if available for this URR.\n-\nX\nX\nX\nX\nTime of Last Packet\nUsage Information\nC\nThis IE shall be present if the UP function reports Usage Reports before and after a Monitoring Time, or before and after QoS enforcement. When present, it shall indicate whether the usage is reported for the period before or after that time, or before or after QoS enforcement.\nX\nX\nX\nX\n-\nUsage Information\nQuery URR Reference\nC\nThis IE shall be present if this usage report is sent as a result of a query URR received in a PFCP Session Modification Request and the Query URR Reference IE was present in the PFCP Session Modification Request.\nWhen present, it shall be set to the Query URR Reference value received in the PFCP Session Modification Request.\nX\nX\nX\nX\nX\nQuery URR Reference\nEvent Time Stamp\nC\nThis IE shall be present, if the report is related to an event.\nWhen present, it shall be set to the time when the event occurs.\nSeveral IEs with the same IE type may be present to report multiple occurrences for an event for this URR ID.\n-\nX\nX\nX\n-\nTime Stamp\nEthernet Traffic Information\nC\nThis IE shall be present if Ethernet Traffic Information needs to be reported. See Table 7.5.8.3-3.\n-\n-\n-\nX\n-\nEthernet Traffic Information\nJoin IP Muticast Information\nC\nThis IE shall be present if the UPF needs to report that it has added the PDU session to the DL replication tree of a new IP multicast flow.\nSeveral IEs with the same IE type may be present to report multiple IP multicast flows added to the PDU session.\n-\n-\n-\nX\n-\nJoin IP Multicast Information\nLeave IP Muticast Information\nC\nThis IE shall be present if the UPF needs to report that it has removed the PDU session from the DL replication tree of an IP multicast flow.\nSeveral IEs with the same IE type may be present to report multiple IP multicast flows removed from the PDU session.\n-\n-\n-\nX\n-\nLeave IP Multicast Information\nPredefined Rules Name\nO\nThis IE may be present to identify a predefined rule if the usage report is generated for a predefined URR which was activated via a Activate Predefined Rules IE in a Create PDR IE or an Update PDR IE.\nSeveral IEs with the same IE type may be present to represent multiple Predefined Rules with which the URR is associated.\n-\nX\n-\nX\n-\nPredefined Rules Name\nNOTE 1:\tThis is the case for unsolicited application reporting by the TDF. The Network instance is required when the UE IP address cannot be used to determine the corresponding PDN connection.\nNOTE 2:\tThe UP function may send a Usage Report with the Volume/Duration Measurement set to zero.\nTable 7.5.8.3-2: Application Detection Information IE within Usage Report IE\nOctet 1 and 2\nApplication Detection Information IE Type = 68 (decimal)\nOctets 3 and 4\nLength = n\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\nSxa\nSxb\nSxc\nN4\nN4mb\nApplication ID\nM\nThis IE shall identify the Application ID for which a start or stop of traffic is reported.\n-\nX\nX\nX\n-\nApplication ID\nApplication Instance ID\nC\nWhen present, this IE shall identify the Application Instance Identifier for which a start or stop of traffic is reported. It shall be present, when reporting the start of an application, if the Reduced Application Detection Information flag was not set in the Measurement Information and if the flow information for the detected application is deducible. It shall be present, when reporting the stop of an application, if the Reduced Application Detection Information flag was not set in the Measurement Information and if it was provided when reporting the start of the application.\n-\nX\nX\nX\n-\nApplication Instance ID\nFlow Information\nC\nWhen present, this IE shall contain the flow information for the detected application. It shall be present, when reporting the start of an application, if the Reduced Application Detection Information flag was not set in the Measurement Information and if the flow information for the detected application is deducible.\n-\nX\nX\nX\n-\nFlow Information\nPDR ID\nO\nWhen present, it shall contain the PDR ID which the application traffic matches.\n-\nX\nX\nX\n-\nPDR ID\nTable 7.5.8.3-3: Ethernet Traffic Information IE within Usage Report IE\nOctet 1 and 2\nEthernet Traffic Information IE Type = 143 (decimal)\nOctets 3 and 4\nLength = n\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\nSxa\nSxb\nSxc\nN4\nN4mb\nMAC Addresses Detected\nC\nThis IE shall be present if one or more new MAC addresses have been detected.\nWhen present, it shall identify the MAC (Ethernet) addresses newly detected as source address of frames sent UL by the UE.\nSeveral IEs with the same IE type may be present to to provision multiple lists of MAC addresses (e.g. with different V-LAN tags).\n-\n-\n-\nX\n-\nMAC Addresses Detected\nMAC Addresses Removed\nC\nThis IE shall be present if one or more new MAC addresses have been removed.\nWhen present, it shall identify the MAC (Ethernet) addresses that have been inactive for a duration exceeding the Ethernet inactivity Timer.\nSeveral IEs with the same IE type may be present to to provision multiple lists of MAC addresses (e.g. with different V-LAN tags).\n-\n-\n-\nX\n-\nMAC Addresses Removed\nTable 7.5.8.3-4: Join IP Multicast Information IE within Usage Report IE\nOctet 1 and 2\nJoin IP Multicast Information IE Type = 189 (decimal)\nOctets 3 and 4\nLength = n\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\nSxa\nSxb\nSxc\nN4\nN4mb\nIP Multicast Address\nM\nThis IE shall contain the IP multicast address of the DL multicast flow added to the PDU session.\n-\n-\n-\nX\n-\nIP Multicast Address\nSource IP Address\nC\nThis IE shall contain the source specific IP address of the DL multicast flow added to the PDU session, if available.\nSeveral IEs with the same IE type may be present to represent multiple source specific addresses.\n-\n-\n-\nX\n-\nSource IP Address\nTable 7.5.8.3-5: Leave IP Multicast Information IE within Usage Report IE\nOctet 1 and 2\nLeave IP Multicast Information IE Type = 190 (decimal)\nOctets 3 and 4\nLength = n\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\nSxa\nSxb\nSxc\nN4\nN4mb\nIP Multicast Address\nM\nThis IE shall contain the IP multicast address of the DL multicast flow removed from the PDU session.\n-\n-\n-\nX\n-\nIP Multicast Address\nSource IP Address\nC\nThis IE shall contain the source specific IP address of the DL multicast flow removed from the PDU session, if available.\nSeveral IEs with the same IE type may be present to represent multiple source specific addresses.\n-\n-\n-\nX\n-\nSource IP Address",
      "chunk_type": "requirement",
      "cross_references": [
        "clause_5.2.2.3",
        "table_7.5.8.3-1",
        "table_7.5.8.3-3",
        "table_7.5.8.3-2",
        "table_7.5.8.3-4",
        "table_7.5.8.3-5"
      ]
    },
    {
      "chunk_id": "ts_29.244_7.5.8.4",
      "section_id": "7.5.8.4",
      "section_title": "Error Indication Report IE within PFCP Session Report Request",
      "content": "The Error Indication Report grouped IE shall be encoded as shown in Table 7.5.8.4-1.\nTable 7.5.8.4-1: Error Indication Report IE within PFCP Session Report Request\nOctet 1 and 2\nError Indication Report IE Type = 99 (decimal)\nOctets 3 and 4\nLength = n\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\nSxa\nSxb\nSxc\nN4\nN4mb\nRemote F-TEID\nM\nThis IE shall identify the remote F-TEID of the GTP-U bearer for which an Error Indication has been received at the UP function.\nMore than one IE with this type may be included to represent multiple remote F-TEID for which an Error Indication has been received.\nX\nX\n-\nX\nX\nF-TEID",
      "chunk_type": "requirement",
      "cross_references": [
        "table_7.5.8.4-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_7.5.8.5",
      "section_id": "7.5.8.5",
      "section_title": "TSC Management Information IE within PFCP Session Report Request",
      "content": "The TSC Management Information grouped IE shall be encoded as shown in Table 7.5.8.5-1.\nTable 7.5.8.5-1: TSC Management Information IE within PFCP Session Report Request\nOctet 1 and 2\nTSC Management Information IE Type = 201 (decimal)\nOctets 3 and 4\nLength = n\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\nSxa\nSxb\nSxc\nN4\nN4mb\nPort Management Information Container\nO\nWhen present, this IE shall contain a Port Management Information container.\n-\n-\n-\nX\n-\nPort Management Information Container\nUser Plane Node Management Information Container\nO\nWhen present, this IE shall contain an User Plane Node Management Information container.\n-\n-\n-\nX\n-\nUser Plane Node Management Information Container\nNW-TT Port Number\nC\nWhen PMIC IE is present, this IE shall contain the related NW-TT Port Number.\n-\n-\n-\nX\n-\nNW-TT Port Number",
      "chunk_type": "requirement",
      "cross_references": [
        "table_7.5.8.5-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_7.5.8.6",
      "section_id": "7.5.8.6",
      "section_title": "Session Report IE within PFCP Session Report Request",
      "content": "The Session Report grouped IE shall be encoded as shown in Table 7.5.8.6-1.\nTable 7.5.8.6-1: Session Report IE within PFCP Session Report Request\nOctet 1 and 2\nSession Report IE Type = 214 (decimal)\nOctets 3 and 4\nLength = n\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\nSxa\nSxb\nSxc\nN4\nN4mb\nSRR ID\nM\nThis IE shall identify the SRR for which usage is reported.\n-\n-\n-\nX\n-\nSRR ID\nAccess Availability Report\nC\nThis IE shall be present if change of access availability needs to be reported. When present, this IE shall indicate an access type and whether the access type has become available or unavailable.\n-\n-\n-\nX\n-\nAccess Availability Report\nQoS Monitoring Report\nC\nThis IE shall be present if there is at least a QoS Monitoring Report that needs to be reported.\nSeveral IEs within the same IE type may be present to represent a list of QoS Monitoring Reports, e.g. for different QoS flows.\n-\n-\n-\nX\n-\nQoS Monitoring Report\nTraffic Parameter Measurement Report\nC\nThis IE shall be present if there is at least a Traffic Parameter Measurement Report that needs to be reported.\nSeveral IEs within the same IE type may be present to represent a list of Traffic Parameter Measurement Reports, e.g., for different QoS flows.\n-\n-\n-\nX\n-\nTraffic Parameter Measurement Report\nThe Access Availability Report IE shall be encoded as shown in Table 7.5.8.2-2.\nTable 7.5.8.6-2: Access Availability Report IE\nOctet 1 and 2\nAccess Availability Report IE Type = 218 (decimal)\nOctets 3 and 4\nLength = n\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\nSxa\nSxb\nSxc\nN4\nN4mb\nAccess Availability Information\nM\nThis IE shall indicate an access type and whether the access type has become available or not available.\nUp to two IEs with the same IE type may be present to report access availability changes for 3GPP and non-3GPP accesses.\n-\n-\n-\nX\n-\nAccess Availability Information\nThe QoS Monitoring Report IE shall be encoded as shown in Table 7.5.8.6-3.\nTable 7.5.8.6-3: QoS Monitoring Report IE\nOctet 1 and 2\nQoS Monitoring Report IE Type = 247 (decimal)\nOctets 3 and 4\nLength = n\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\nSxa\nSxb\nSxc\nN4\nN4mb\nQFI\nM\nThis IE shall identify the QoS Flow Identifier for which QoS monitoring is reported.\n-\n-\n-\nX\n-\nQFI\nQoS Monitoring Measurement\nM\nThis IE shall contain the measured packet delay(s) or the indication of packet delay measurement failure.\n-\n-\n-\nX\n-\nQoS Monitoring Measurement\nTime Stamp\nM\nThis IE shall provide the timestamp when the collection of the information in this report was generated.\n-\n-\n-\nX\n-\nTime Stamp\nStart Time\nO\nWhen present, this IE shall provide the timestamp when the collection of the information in this report was started.\n-\n-\n-\nX\n-\nStart Time\nThe Traffic Parameter Measurement Report IE shall be encoded as shown in Table 7.5.8.6-4.\nTable 7.5.8.6-4: Traffic Parameter Measurement Report IE\nOctet 1 and 2\nTraffic Parameter Measurement Report Type = 324 (decimal)\nOctets 3 and 4\nLength = n\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\nSxa\nSxb\nSxc\nN4\nN4mb\nQFI\nM\nThis IE shall identify the QoS Flow Identifier for which traffic parameter measurement is reported.\n-\n-\n-\nX\n-\nQFI\nN6 Jitter Measurement\nC\nThis IE shall be present when N6 Jitter measurement available. The UPF shall include DL Periodicity field in the N6 Jitter Measurement IE.\n-\n-\n-\nX\n-\nN6 Jitter Measurement\nUL Periodicity\nC\nThe IE shall be included if the SMF requested to measure UL Periodicity and if this information is available.\n-\n-\n-\nX\n-\nUL Periodicity\nTime Stamp\nM\nThis IE shall provide the timestamp when the collection of the information in this report was generated.\n-\n-\n-\nX\n-\nTime Stamp\nStart Time\nO\nWhen present, this IE shall provide the timestamp when the collection of the information in this report was started.\n-\n-\n-\nX\n-\nStart Time",
      "chunk_type": "requirement",
      "cross_references": [
        "table_7.5.8.6-1",
        "table_7.5.8.2-2",
        "table_7.5.8.6-2",
        "table_7.5.8.6-3",
        "table_7.5.8.6-4"
      ]
    },
    {
      "chunk_id": "ts_29.244_7.5.9.1",
      "section_id": "7.5.9.1",
      "section_title": "General",
      "content": "The PFCP Session Report Response shall be sent over the Sxa, Sxb, Sxc, N4 and N4mb interface by the CP function to the UP function as a reply to the PFCP Session Report Request.\nTable 7.5.9.1-1: Information Elements in a PFCP Session Report Response\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\nSxa\nSxb\nSxc\nN4\nN4mb\nCause\nM\nThis IE shall indicate the acceptance or the rejection of the corresponding request message.\nX\nX\nX\nX\nX\nCause\nOffending IE\nC\nThis IE shall be included if the rejection is due to a conditional or mandatory IE missing or faulty.\nX\nX\nX\nX\nX\nOffending IE\nUpdate BAR\nC\nThis IE shall be present if a BAR previously created for the PFCP session needs to be modified.\nA previously created BAR that is not modified shall not be included.\nSee Table 7.5.9.2-1.\nX\n-\n-\nX\n-\nUpdate BAR\nPFCPSRRsp-Flags\nC\nThis IE shall be included if at least one of the flags is set to \"1\".\n-\tDROBU (Drop Buffered Packets): the CP function shall set this flag if the UP function needs to drop the packets currently buffered for this PFCP session (see NOTE 1).\nX\n-\n-\nX\n-\nPFCPSRRsp-Flags\nCP F-SEID\nO\nThis IE may be set by the SMF if the UPF indicated support of PFCP sessions successively controlled by different SMFs of a same SMF Set and the Cause IE indicates \"Request accepted (success)\"(see clause 5.22).\nWhen present, it shall be set to the new F-SEID that the UPF shall use for sending subsequent PFCP session related messages.\n-\n-\n-\nX\nX\nF-SEID\nN4-u F-TEID\nO\nThis IE may be set by the SMF if the UPF indicated support of PFCP sessions successively controlled by different SMFs of a same SMF Set and the Cause IE indicates \"Request accepted (success)\".\nWhen present, it shall be set to the new N4-u F-TEID that the UPF shall use for data forwarding towards the SMF.\n-\n-\n-\nX\n-\nF-TEID\nAlternative SMF IP Address\nO\nThis IE may be set by the SMF if the UPF indicated support of PFCP sessions successively controlled by different SMFs of a same SMF Set and the Cause IE indicates \"Redirection Requested\" (see clause 5.22).\nWhen present, it shall be set to the IP address of the new SMF to contact.\n-\n-\n-\nX\nX\nAlternative SMF IP Address\nPGW-C/SMF FQ-CSID\nO\nThis IE may be included by the alternative SMF or PGW-C to allocate a new PGW-C/SMF FQ-CSID for the PFCP session, during the restoration of PFCP sessions associated with one or more PGW-C/SMF FQ-CSID(s) (see clause 5.22.4), if the Cause IE indicates \"Request accepted (success)\".\nWhen present, the UP function shall replace any earlier value associated to the PFCP session with the new value.\n-\nX\n-\nX\n-\nFQ-CSID\nGroup Id\nC\nThis IE may be included by the alternative SMF or PGW-C to allocate a new Group Id for the PFCP session, during the restoration of PFCP sessions associated with one or more Group Id(s) (see clause 5.22.4), if the Cause IE indicates \"Request accepted (success)\".\nWhen present, the UP function shall replace any earlier value associated to the PFCP session with the new value.\n-\nX\n-\nX\n-\nGroup Id\nNode ID\nC\nThis IE should be present if the CP F-SEID IE is present.\nWhen present, it shall be set to the Node ID of the SMF or MB-SMF that has taken over the control of the PFCP session, i.e. that SMF or MB-SMF has assigned the CP F-SEID.\n-\n-\n-\nX\nX\nNode ID\nNOTE 1:\tThe CP function may request the UP function to drop the packets currently buffered for the PFCP session, when buffering is performed in the UP function, upon receipt of a PFCP Session Report Request notifying the CP function about the arrival of downlink data packets for which the CP function decides to throttle the corresponding Downlink Data Notification message over S11/S4 and. See clause 5.9.3 of 3GPP TS 23.214 [2].",
      "chunk_type": "definition",
      "cross_references": [
        "clause_5.22",
        "clause_5.22.4",
        "ts_23.214_clause_5.9.3",
        "table_7.5.9.1-1",
        "table_7.5.9.2-1",
        "ts_23.214"
      ]
    },
    {
      "chunk_id": "ts_29.244_7.5.9.2",
      "section_id": "7.5.9.2",
      "section_title": "Update BAR IE within PFCP Session Report Response",
      "content": "The Update BAR grouped IE shall be encoded as shown in Table 7.5.9.2-1.\nTable 7.5.9.2-1: Update BAR IE in PFCP Session Report Response\nOctet 1 and 2\nUpdate BAR IE Type = 12 (decimal)\nOctets 3 and 4\nLength = n\nInformation elements\nP\nCondition / Comment\nAppl.\nIE Type\nSxa\nSxb\nSxc\nN4\nN4mb\nBAR ID\nM\nThis IE shall identify the BAR Rule to be modified.\nX\n-\n-\nX\n-\nBAR ID\nDownlink Data Notification Delay\nC\nThis IE shall be present if the UP function indicated support of the Downlink Data Notification Delay parameter (see clause 8.2.25) and the Downlink Data Notification Delay needs to be modified.\nWhen present, it shall contain the delay the UP function shall apply between receiving a downlink data packet and notifying the CP function about it, when the Apply Action parameter requests to buffer the packets and notify the CP function.\nX\n-\n-\nX\n-\nDownlink Data Notification Delay\nDL Buffering Duration\nC\nThis IE shall be present if the UP function indicated support of the DL Buffering Duration parameter in PFCP Session Report Response feature (see DLBD feature in clause 8.2.25) and extended buffering of downlink data packet is required in the UP function.\nWhen present, this IE shall indicate the duration during which the UP function shall buffer the downlink data packets and when the EDBN flag is not present refrain from sending any further notification to the CP function about the arrival of DL data packets. (NOTE 1)\nX\n-\n-\nX\n-\nDL Buffering Duration\nDL Buffering Suggested Packet Count\nO\nThis IE may be present if extended buffering of downlink data packet is required in the UP function.\nWhen present, this IE shall indicate the maximum number of downlink data packets suggested to be buffered in the UP function.\nX\n-\n-\nX\n-\nDL Buffering Suggested Packet Count\nSuggested Buffering Packets Count\nC\nThis IE may be present if the UP Function indicated support of the feature UDBC.\nWhen present, it shall contain the number of packets that are suggested to be buffered when the Apply Action parameter requests to buffer the packets. The packets that exceed the limit shall be discarded.\n-\nX\nX\nX\n-\nSuggested Buffering Packets Count\nExtended DL Buffering Notification Policy\nC\nThis IE may be present if the DL Buffering Duration IE is present.\nWhen present, it shall contain the EDBN flag indicating the Extended DL Buffering Notification policy. (NOTE 1)\n-\n-\n-\nX\n-\nExtended DL Buffering Notification Policy\nNOTE 1:\tIf the Apply Action requests the UP function to buffer and notify the CP function, the DL Buffering Duration is set, the EDBN flag is not present, then the UP function shall not notify the CP function for the duration indicated by the DL Buffering Duration. If the Apply Action requests the UP function to buffer downlink data packets, the DL Buffering Duration is set, the EDBN bit is set to \"1\", then the UP function shall notify the CP function of the arrival of the first buffered DL packet for each QoS flow for a given FAR for the duration indicated by the DL Buffering Duration.",
      "chunk_type": "requirement",
      "cross_references": [
        "clause_8.2.25",
        "table_7.5.9.2-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_7.6.1",
      "section_id": "7.6.1",
      "section_title": "Protocol Errors",
      "content": "A protocol error is defined as a message or an Information Element received from a peer entity with an unknown type, or if it is unexpected, or if it has an erroneous content.\nThe term silently discarded is used in the following clauses to mean that the receiving PFCP entity's implementation shall discard such a message without further processing or that the receiving PFCP entity discards such an IE and continues processing the message. The conditions for the receiving PFCP entity to silently discard an IE are specified in the subsequent clauses.\nThe handling of unknown, unexpected or erroneous PFCP messages and IEs shall provide for the forward compatibility of PFCP. Therefore, the sending PFCP entity shall be able to safely include in a message a new conditional-optional or an optional IE. Such an IE may also have a new type value. Any legacy receiving PFCP entity shall, however, silently discard such an IE and continue processing the message.\nIf a protocol error is detected by the receiving PFCP entity, it should log the event including the erroneous message and may include the error in a statistical counter.\nFor Response messages containing a rejection Cause value, see clause 7.2.3.2.\nThe receiving PFCP entity shall apply the error handling specified in the subsequent clauses.\nIf the received erroneous message is a reply to an outstanding PFCP message, the PFCP entity shall stop retransmissions and notify the PFCP application layer of the error even if the reply is silently discarded.",
      "chunk_type": "general",
      "cross_references": [
        "clause_7.2.3.2"
      ]
    },
    {
      "chunk_id": "ts_29.244_7.6.2",
      "section_id": "7.6.2",
      "section_title": "Different PFCP Versions",
      "content": "If a PFCP entity receives a message of an unsupported PFCP version, it shall return a PFCP Version Not Supported Response message and silently discard the received message.",
      "chunk_type": "requirement",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.244_7.6.3",
      "section_id": "7.6.3",
      "section_title": "PFCP Message of Invalid Length",
      "content": "If a PFCP entity receives a message, which is too short to contain the respective PFCP header, the PFCP-PDU shall be silently discarded.\nIf a PFCP entity receives a Request message within an IP/UDP packet of a length that is inconsistent with the value specified in the Length field of the PFCP header, then the receiving PFCP entity should log the error and shall send the Response message with Cause IE value set to \"Invalid Length\".\nIf a PFCP entity receives a Response message within an IP/UDP packet of a length that is inconsistent with the value specified in the Length field of the PFCP header, then the receiving PFCP entity should log the error and shall stop retransmissions of the corresponding Request message, notify the PFCP application layer of the error, and log the error.",
      "chunk_type": "requirement",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.244_7.6.4",
      "section_id": "7.6.4",
      "section_title": "Unknown PFCP Message",
      "content": "If a PFCP entity receives a message with an unknown Message Type value, it shall silently discard the message.",
      "chunk_type": "requirement",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.244_7.6.5",
      "section_id": "7.6.5",
      "section_title": "Unexpected PFCP Message",
      "content": "If a PFCP entity receives an unexpected request message, for example a known message that is sent over an interface for which the message is not defined, or a message that is sent over an interface for which the message is defined, but the direction is incorrect, then the PFCP entity shall silently discard the message and shall log an error.\nIf a PFCP entity receives an unexpected response message, for example a message for which there is no corresponding outstanding request, it shall discard the message and may log an error.",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.244_7.6.6",
      "section_id": "7.6.6",
      "section_title": "Missing Information Elements",
      "content": "A PFCP entity shall check if all mandatory IEs are present in the received Request message. Apart from Heartbeat Request message, if one or more mandatory information elements are missing in the received Request message, the PFCP entity should log the error and shall send a Response message with Cause IE value set to \"Mandatory IE missing\" with the type of the missing mandatory IE.\nIf a PFCP entity receives a Response message with Cause IE value set to \"Mandatory IE missing\", it shall notify its upper layer.\nA PFCP entity shall check if all mandatory IEs are present in the received Response message without a rejection Cause value. If one or more mandatory information elements are missing, the PFCP entity shall stop retransmissions of the corresponding Request message, notify the PFCP application layer of the error, and should log the error.\nA PFCP entity shall check if conditional information elements are present in the received Request message, if possible (i.e. if the receiving entity has sufficient information available to check if the respective conditions were met). If one or more conditional information elements are missing, a PFCP entity should log the error and shall send a Response message with Cause IE value set to \"Conditional IE missing\" together with the type of the missing conditional IE.\nA PFCP entity shall check if conditional information elements are present in the received Response message without a rejection Cause value, if possible (i.e. if the receiving entity has sufficient information available to check if the respective conditions were met). If one or more conditional information elements are missing, a PFCP entity shall stop retransmissions of the corresponding Request message, notify the PFCP application layer of the error, and should log the error.\nAdditional information elements may be included in Response messages containing a rejection Cause value, see clause 7.2.3.2.\nAbsence of an optional information element shall not trigger any error handling.",
      "chunk_type": "requirement",
      "cross_references": [
        "clause_7.2.3.2"
      ]
    },
    {
      "chunk_id": "ts_29.244_7.6.7",
      "section_id": "7.6.7",
      "section_title": "Invalid Length Information Element",
      "content": "An information element has an invalid length when the actual length of the IE is different from the value of the Length field in the IE header. Here, the actual length of the IE means the length of the content field of the received IE.\nIf a PFCP message contains more than one information elements and one or more of them have invalid length, the receiving PFCP entity can detect which of the IEs have invalid length only in the following cases:\n-\tIf the Length value in the IE header is greater than the overall length of the message;\n-\tIf the invalid length IE is the last one in the message.\nApart from Heartbeat Request message, if a receiving PFCP entity detects information element with invalid length in a Request message, it shall send an appropriate error response with Cause IE value set to \"Invalid length\" together with the type of the offending IE.",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.244_7.6.8",
      "section_id": "7.6.8",
      "section_title": "Semantically incorrect Information Element",
      "content": "Apart from Echo Request message, the receiver of a PFCP signalling message Request including a mandatory or a verifiable conditional information element with a semantically invalid Value shall discard the request, should log the error, and shall send a response with Cause IE value set to \"Mandatory IE incorrect\" together with a type and instance of the offending IE.\nThe receiver of a PFCP signalling message Response including a mandatory or a verifiable conditional information element with a semantically invalid Value shall notify the upper layer that a message with this sequence number has been received and should log the error.\nIf a PFCP entity receives an information element with a value which is shown as reserved, it shall treat that information element as invalid and should log the error. If the invalid IE is received in a Request, and it is a mandatory IE or a verifiable conditional IE, the PFCP entity shall send a response with Cause set to \"Mandatory IE incorrect\" together with a type and instance of the offending IE.\nThe principle is: the use of reserved values invokes error handling; the use of spare values can be silently discarded and for IEs with spare values used, processing shall be continued ignoring the spare values.\nThe receiver of a PFCP signalling message including an optional information element with a Value that is not in the range defined for this information element value shall discard this IE, but shall treat the rest of the message as if this IE was absent and continue processing. The receiver shall not check the content of an information element field that is defined as \"spare\".\nAll semantically incorrect optional information elements in a PFCP signalling message shall be treated as not present in the message.",
      "chunk_type": "requirement",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.244_7.6.9",
      "section_id": "7.6.9",
      "section_title": "Unknown or unexpected Information Element",
      "content": "The receiver of a PFCP message including an unexpected information element with a known Type value that is not defined for this message shall discard the IE and log an error. The receiver shall process the message.\nNOTE:\tAn Information Element in an encoded PFCP message or grouped IE is identified by the IE Type.",
      "chunk_type": "requirement",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.244_7.6.10",
      "section_id": "7.6.10",
      "section_title": "Repeated Information Elements",
      "content": "An Information Element is repeated if there is more than one IE with the same IE Type in the scope of the PFCP message (or in the scope of the grouped IE). Such an IE is a member in a list.\nIf an information element is repeated in a PFCP signalling message in which repetition of the information element is not specified, only the contents of the information element appearing first shall be handled and all subsequent repetitions of the information element shall be ignored. When the number of repetitions of information elements is specified, only the contents of specified repeated information elements shall be handled and all subsequent repetitions of the information element shall be ignored.",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_29.244_8.1.1",
      "section_id": "8.1.1",
      "section_title": "Information Element Format",
      "content": "Figure 8.1.1-1 depicts the format of an Information Element.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = xxx (decimal)\n3 to 4\nLength = n\np to (p+1)\nEnterprise ID\nk to (n+4)\nIE specific data or content of a grouped IE\nFigure 8.1.1-1: Information Element Format\nNOTE 1:\tIf the Bit 8 of Octet 1 is not set, this indicates that the IE is defined by 3GPP and the Enterprise ID is absent. If Bit 8 of Octet 1 is set, this indicates that the IE is defined by a vendor and the Enterprise ID is present identified by the Enterprise ID.\nAn IE has the following mandatory fields:\n-\tType: this field indicates the type of the Information Element. IE type values within the range of 0 to 32767 are reserved for IE defined by 3GPP and are listed in clause 8.1.2 IE type values within the range of 32768 to 65535 are used for vendor-specific IE and the value allocation is controlled by the vendor.\n-\tLength: this field contains the length of the IE excluding the first four octets, which are common for all IEs (Type and Length) and is denoted \"n\" in Figure 8.1.1-1 and in Figure 8.1.1-2. Bit 8 of the lowest numbered octet is the most significant bit and bit 1 of the highest numbered octet is the least significant bit.\nAn IE has the following optional fields:\n-\tEnterprise ID: if the IE type value is within the range of 32768 to 65535, this field shall contain the IANA-assigned \"SMI Network Management Private Enterprise Codes\" value of the vendor defining the IE. The Enterprise ID set to \"10415\" (IANA-assigned \"SMI Network Management Private Enterprise Codes\") shall not be used for the vendor specific IEs.\nFor illustration, Figure 8.1.1-2 depicts the format of a Information Element (IE) defined by 3GPP and is specified in this specification. For IE's defined by 3GPP, the IE type shall be within the range of 0 to 32767.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = xxx (decimal)\n3 to 4\nLength = n\n5 to (n+4)\nIE specific data or content of a grouped IE\nFigure 8.1.1-2: 3GPP defined Information Element Format\nNOTE 2:\tBit 8 of Octet 1 is not set. This indicates that the Information Element type value has been allocated by 3GPP.\nFor illustration, Figure 8.1.1-3 depicts the format of a vendor-specific Information Element, which content is not specified and the IE type value shall be within the range of 32768 to 65535.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = xxx (decimal)\n3 to 4\nLength = n\n5 to 6\nEnterprise ID\n7 to (n+4)\nIE specific data or content of a grouped IE\nFigure 8.1.1-3: Vendor-Specific Information Element Format\nNOTE 3:\tBit 8 of Octet 1 is set. This indicates that the IE type value has been allocated by the vendor identified by the Enterprise ID. The content of this IE is vendor specific and therefore out of scope of this specification.",
      "chunk_type": "general",
      "cross_references": [
        "clause_8.1.2",
        "figure_8.1.1-1",
        "figure_8.1.1-2",
        "figure_8.1.1-3"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.1.2",
      "section_id": "8.1.2",
      "section_title": "Information Element Types",
      "content": "A PFCP message may contain several IEs. In order to have forward compatible type definitions for the PFCP IEs, all of them shall be TLV (Type, Length, Value) coded. PFCP IE type values are specified in the Table 8.1.2-1.\nThe 3rd column of this table specifies if the IE is either Extendable or has a variable length or a fixed length and a reference to the clause where the IE is specified:\n-\tFixed Length: the IE has a fixed set of fields, and a fixed number of octets;\n-\tVariable Length: the IE has a fixed set of fields, and has a variable number of octets.For example, the last octets may be numbered similar to \"5 to (n+4)\". In this example, if the value of the length field, n, is 0, then the last field is not present;\n-\tExtendable: the IE has a variable number of fields, and has a variable number of octets.The last fields are typically specified with the statement: \"These octet(s) is/are present only if explicitly specified\". The legacy receiving entity shall ignore the unknown octets.\nThe 4th column of this table indicates the number of fixed Octets the IE contained when the IE was first defined in the specification, which shall be an integer value reflecting the minimum length of fixed octets defined for the IE.\nAn IE of any of the above types may have a null length as specified in clause 5.6.3. This shall not be considered as an error by the receiving PFCP entity.\nIn order to improve the efficiency of troubleshooting, it is recommended that the IEs should be arranged in the signalling messages as well as in the grouped IEs, according to the order the IEs are listed in the message definition table or grouped IE definition table in clause 7. However the receiving entity shall be prepared to handle the messages with IEs in any order.\nWithin IEs, certain fields may be described as spare. These bits shall be transmitted with the value set to \"0\". To allow for future features, the receiver shall not evaluate these bits.\nTable 8.1.2-1: Information Element Types\nIE Type value\n(Decimal)\nInformation elements\nComment / Reference\nNumber of Fixed Octets\n0\nReserved\n1\nCreate PDR\nExtendable / Table 7.5.2.2-1\nNot Applicable\n2\nPDI\nExtendable / Table 7.5.2.2-2\nNot Applicable\n3\nCreate FAR\nExtendable / Table 7.5.2.3-1\nNot Applicable\n4\nForwarding Parameters\nExtendable / Table 7.5.2.3-2\nNot Applicable\n5\nDuplicating Parameters\nExtendable / Table 7.5.2.3-3\nNot Applicable\n6\nCreate URR\nExtendable / Table 7.5.2.4-1\nNot Applicable\n7\nCreate QER\nExtendable / Table 7.5.2.5-1\nNot Applicable\n8\nCreated PDR\nExtendable / Table 7.5.3.2-1\nNot Applicable\n9\nUpdate PDR\nExtendable / Table 7.5.4.2-1\nNot Applicable\n10\nUpdate FAR\nExtendable / Table 7.5.4.3-1\nNot Applicable\n11\nUpdate Forwarding Parameters\nExtendable / Table 7.5.4.3-2\nNot Applicable\n12\nUpdate BAR (PFCP Session Report Response)\nExtendable / Table 7.5.9.2-1\nNot Applicable\n13\nUpdate URR\nExtendable / Table 7.5.4.4\nNot Applicable\n14\nUpdate QER\nExtendable / Table 7.5.4.5\nNot Applicable\n15\nRemove PDR\nExtendable / Table 7.5.4.6\nNot Applicable\n16\nRemove FAR\nExtendable / Table 7.5.4.7\nNot Applicable\n17\nRemove URR\nExtendable / Table 7.5.4.8\nNot Applicable\n18\nRemove QER\nExtendable / Table 7.5.4.9\nNot Applicable\n19\nCause\nFixed / Clause 8.2.1\n1\n20\nSource Interface\nExtendable / Clause 8.2.2\n1\n21\nF-TEID\nExtendable / Clause 8.2.3\n1\n22\nNetwork Instance\nVariable Length / Clause 8.2.4\nNot Applicable\n23\nSDF Filter\nExtendable / Clause 8.2.5\n2\n24\nApplication ID\nVariable Length / Clause 8.2.6\nNot Applicable\n25\nGate Status\nExtendable / Clause 8.2.7\n1\n26\nMBR\nExtendable / Clause 8.2.8\n10\n27\nGBR\nExtendable / Clause 8.2.9\n10\n28\nQER Correlation ID\nExtendable / Clause 8.2.10\n4\n29\nPrecedence\nExtendable / Clause 8.2.11\n4\n30\nTransport Level Marking\nExtendable / Clause 8.2.12\n2\n31\nVolume Threshold\nExtendable /Clause 8.2.13\n1\n32\nTime Threshold\nExtendable /Clause 8.2.14\n4\n33\nMonitoring Time\nExtendable /Clause 8.2.15\n4\n34\nSubsequent Volume Threshold\nExtendable /Clause 8.2.16\n1\n35\nSubsequent Time Threshold\nExtendable /Clause 8.2.17\n4\n36\nInactivity Detection Time\nExtendable /Clause 8.2.18\n4\n37\nReporting Triggers\nExtendable /Clause 8.2.19\n2\n38\nRedirect Information\nExtendable /Clause 8.2.20\n3\n39\nReport Type\nExtendable / Clause 8.2.21\n1\n40\nOffending IE\nFixed / Clause 8.2.22\n2\n41\nForwarding Policy\nExtendable / Clause 8.2.23\n1\n42\nDestination Interface\nExtendable / Clause 8.2.24\n1\n43\nUP Function Features\nExtendable / Clause 8.2.25\n1\n44\nApply Action\nExtendable / Clause 8.2.26\n1\n45\nDownlink Data Service Information\nExtendable / Clause 8.2.27\n1\n46\nDownlink Data Notification Delay\nExtendable / Clause 8.2.28\n1\n47\nDL Buffering Duration\nExtendable / Clause 8.2.29\n1\n48\nDL Buffering Suggested Packet Count\nVariable / Clause 8.2.30\nNot Applicable\n49\nPFCPSMReq-Flags\nExtendable / Clause 8.2.31\n1\n50\nPFCPSRRsp-Flags\nExtendable / Clause 8.2.32\n1\n51\nLoad Control Information\nExtendable / Table 7.5.3.3-1\nNot Applicable\n52\nSequence Number\nFixed Length / Clause 8.2.33\n4\n53\nMetric\nFixed Length / Clause 8.2.34\n1\n54\nOverload Control Information\nExtendable / Table 7.5.3.4-1\nNot Applicable\n55\nTimer\nExtendable / Clause 8.2 35\n1\n56\nPDR ID\nExtendable / Clause 8.2 36\n2\n57\nF-SEID\nExtendable / Clause 8.2 37\n9\n58\nApplication ID's PFDs\nExtendable / Table 7.4.3.1-2\nNot Applicable\n59\nPFD context\nExtendable / Table 7.4.3.1-3\nNot Applicable\n60\nNode ID\nExtendable / Clause 8.2.38\n1\n61\nPFD contents\nExtendable / Clause 8.2.39\n2\n62\nMeasurement Method\nExtendable / Clause 8.2.40\n1\n63\nUsage Report Trigger\nExtendable / Clause 8.2.41\n2\n64\nMeasurement Period\nExtendable / Clause 8.2.42\n4\n65\nFQ-CSID\nExtendable / Clause 8.2.43\n1\n66\nVolume Measurement\nExtendable / Clause 8.2.44\n1\n67\nDuration Measurement\nExtendable / Clause 8.2.45\n4\n68\nApplication Detection Information\nExtendable / Table 7.5.8.3-2\nNot Applicable\n69\nTime of First Packet\nExtendable / Clause 8.2.46\n4\n70\nTime of Last Packet\nExtendable / Clause 8.2.47\n4\n71\nQuota Holding Time\nExtendable / Clause 8.2.48\n4\n72\nDropped DL Traffic Threshold\nExtendable / Clause 8.2.49\n1\n73\nVolume Quota\nExtendable / Clause 8.2.50\n1\n74\nTime Quota\nExtendable / Clause 8.2.51\n4\n75\nStart Time\nExtendable / Clause 8.2.52\n4\n76\nEnd Time\nExtendable / Clause 8.2.53\n4\n77\nQuery URR\nExtendable / Table 7.5.4.10-1\nNot Applicable\n78\nUsage Report (Session Modification Response)\nExtendable / Table 7.5.5.2-1\nNot Applicable\n79\nUsage Report (Session Deletion Response)\nExtendable / Table 7.5.7.2-1\nNot Applicable\n80\nUsage Report (Session Report Request)\nExtendable / Table 7.5.8.3-1\nNot Applicable\n81\nURR ID\nExtendable / Clause 8.2.54\n4\n82\nLinked URR ID\nExtendable / Clause 8.2.55\n4\n83\nDownlink Data Report\nExtendable / Table 7.5.8.2-1\nNot Applicable\n84\nOuter Header Creation\nExtendable / Clause 8.2.56\n2\n85\nCreate BAR\nExtendable / Table 7.5.2.6-1\nNot Applicable\n86\nUpdate BAR (Session Modification Request)\nExtendable / Table 7.5.4.11-1\nNot Applicable\n87\nRemove BAR\nExtendable / Table 7.5.4.12-1\nNot Applicable\n88\nBAR ID\nExtendable / Clause 8.2.57\n1\n89\nCP Function Features\nExtendable / Clause 8.2.58\n1\n90\nUsage Information\nExtendable / Clause 8.2.59\n1\n91\nApplication Instance ID\nVariable Length / Clause 8.2.60\nNot Applicable\n92\nFlow Information\nExtendable / Clause 8.2.61\n3\n93\nUE IP Address\nExtendable / Clause 8.2.62\n1\n94\nPacket Rate\nExtendable / Clause 8.2.63\n1\n95\nOuter Header Removal\nExtendable / Clause 8.2.64\n1\n96\nRecovery Time Stamp\nExtendable / Clause 8.2.65\n4\n97\nDL Flow Level Marking\nExtendable / Clause 8.2.66\n1\n98\nHeader Enrichment\nExtendable / Clause 8.2.67\n1\n99\nError Indication Report\nExtendable / Table 7.5.8.4-1\nNot Applicable\n100\nMeasurement Information\nExtendable / Clause 8.2.68\n1\n101\nNode Report Type\nExtendable / Clause 8.2.69\n1\n102\nUser Plane Path Failure Report\nExtendable / Table 7.4.5.1.2-1\nNot Applicable\n103\nRemote GTP-U Peer\nExtendable / Clause 8.2.70\n1\n104\nUR-SEQN\nFixed Length / Clause 8.2.71\n4\n105\nUpdate Duplicating Parameters\nExtendable / Table 7.5.4.3-3\nNot Applicable\n106\nActivate Predefined Rules\nVariable Length / Clause 8.2.72\nNot Applicable\n107\nDeactivate Predefined Rules\nVariable Length / Clause 8.2.73\nNot Applicable\n108\nFAR ID\nExtendable / Clause 8.2.74\n4\n109\nQER ID\nExtendable / Clause 8.2.75\n4\n110\nOCI Flags\nExtendable / Clause 8.2.76\n1\n111\nPFCP Association Release Request\nExtendable / Clause 8.2.77\n1\n112\nGraceful Release Period\nExtendable / Clause 8.2.78\n1\n113\nPDN Type\nExtendable / Clause 8.2.79\n1\n114\nFailed Rule ID\nExtendable / Clause 8.2.80\n1\n115\nTime Quota Mechanism\nExtendable / Clause 8.2.81\n1\n116\nReserved\n117\nUser Plane Inactivity Timer\nExtendable /Clause 8.2.83\n4\n118\nAggregated URRs\nExtendable / Table 7.5.2.4-2\nNot Applicable\n119\nMultiplier\nFixed / Clause 8.2.84\n12\n120\nAggregated URR ID\nFixed / Clause 8.2.85\n4\n121\nSubsequent Volume Quota\nExtendable / Clause 8.2.86\n1\n122\nSubsequent Time Quota\nExtendable / Clause 8.2.87\n4\n123\nRQI\nExtendable / Clause 8.2.88\n1\n124\nQFI\nExtendable / Clause 8.2.89\n1\n125\nQuery URR Reference\nExtendable / Clause 8.2.90\n4\n126\nAdditional Usage Reports Information\nExtendable / Clause 8.2.91\n2\n127\nCreate Traffic Endpoint\nExtendable / Table 7.5.2.7\nNot Applicable\n128\nCreated Traffic Endpoint\nExtendable / Table 7.5.3.5\nNot Applicable\n129\nUpdate Traffic Endpoint\nExtendable / Table 7.5.4.13\nNot Applicable\n130\nRemove Traffic Endpoint\nExtendable / Table 7.5.4.14\nNot Applicable\n131\nTraffic Endpoint ID\nExtendable / Clause 8.2.92\n1\n132\nEthernet Packet Filter\nExtendable / Table 7.5.2.2-3\nNot Applicable\n133\nMAC address\nExtendable / Clause 8.2.93\n1\n134\nC-TAG\nExtendable / Clause 8.2.94\n3\n135\nS-TAG\nExtendable / Clause 8.2.95\n3\n136\nEthertype\nExtendable / Clause 8.2.96\n2\n137\nProxying\nExtendable / Clause 8.2.97\n1\n138\nEthernet Filter ID\nExtendable / Clause 8.2.98\n4\n139\nEthernet Filter Properties\nExtendable / Clause 8.2.99\n1\n140\nSuggested Buffering Packets Count\nExtendable / Clause 8.2.100\n1\n141\nUser ID\nExtendable / Clause 8.2.101\n1\n142\nEthernet PDU Session Information\nExtendable / Clause 8.2.102\n1\n143\nEthernet Traffic Information\nExtendable / Table 7.5.8.3-3\nNot Applicable\n144\nMAC Addresses Detected\nExtendable / Clause 8.2.103\n7\n145\nMAC Addresses Removed\nExtendable / Clause 8.2.104\n7\n146\nEthernet Inactivity Timer\nExtendable / Clause 8.2.105\n4\n147\nAdditional Monitoring Time\nExtendable / Table 7.5.2.4-3\nNot Applicable\n148\nEvent Quota\nExtendable / Clause 8.2.112\n4\n149\nEvent Threshold\nExtendable / Clause 8.2.113\n4\n150\nSubsequent Event Quota\nExtendable / Clause 8.2.106\n4\n151\nSubsequent Event Threshold\nExtendable / Clause 8.2.107\n4\n152\nTrace Information\nExtendable / Clause 8.2.108\n7\n153\nFramed-Route\nVariable Length / Clause 8.2.109\nNot Applicable\n154\nFramed-Routing\nFixed Length / Clause 8.2.110\n4\n155\nFramed-IPv6-Route\nVariable Length / Clause 8.2.111\nNot Applicable\n156\nTime Stamp\nExtendable / Clause 8.2.114\n4\n157\nAveraging Window\nExtendable /Clause 8.2.115\n4\n158\nPaging Policy Indicator\nExtendable / Clause 8.2.116\n1\n159\nAPN/DNN\nVariable Length / Clause 8.2.117\nNot Applicable\n160\n3GPP Interface Type\nExtendable / Clause 8.2.118\n1\n161\nPFCPSRReq-Flags\nExtendable / Clause 8.2.119\n1\n162\nPFCPAUReq-Flags\nExtendable / Clause 8.2.120\n1\n163\nActivation Time\nExtendable / Clause 8.2.121\n4\n164\nDeactivation Time\nExtendable / Clause 8.2.122\n4\n165\nCreate MAR\nExtendable / Table 7.5.2.8-1\nNot Applicable\n166\n3GPP Access Forwarding Action Information\nExtendable / Table 7.5.2.8-2\nNot Applicable\n167\nNon-3GPP Access Forwarding Action Information\nExtendable / Table 7.5.2.8-3\nNot Applicable\n168\nRemove MAR\nExtendable / Table 7.5.4.15-1\nNot Applicable\n169\nUpdate MAR\nExtendable / Table 7.5.4.16-1\nNot Applicable\n170\nMAR ID\nExtendable / Clause 8.2.123\n2\n171\nSteering Functionality\nExtendable / Clause 8.2.124\n1\n172\nSteering Mode\nExtendable / Clause 8.2.125\n1\n173\nWeight\nFixed / Clause 8.2.126\n1\n174\nPriority\nExtendable / Clause 8.2.127\n1\n175\nUpdate 3GPP Access Forwarding Action Information\nExtendable / Table 7.5.4.16-2\nNot Applicable\n176\nUpdate Non 3GPP Access Forwarding Action Information\nExtendable / Table 7.5.4.16-3\nNot Applicable\n177\nUE IP address Pool Identity\nExtendable / Clause 8.2.128\n2\n178\nAlternative SMF IP Address\nExtendable / Clause 8.2.129\n1\n179\nPacket Replication and Detection Carry-On Information\nExtendable / Clause 8.2.130\n1\n180\nSMF Set ID\nExtendable / Clause 8.2.131\nNot applicable\n181\nQuota Validity Time\nExtendable / Clause 8.2.132\n4\n182\nNumber of Reports\nFixed / Clause 8.2.133\n2\n183\nPFCP Session Retention Information (within PFCP Association Setup Request)\nExtendable / Table 7.4.4.1-2\n1\n184\nPFCPASRsp-Flags\nExtendable / Clause 8.2.134\n1\n185\nCP PFCP Entity IP Address\nExtendable / Clause 8.2.135\n1\n186\nPFCPSEReq-Flags\nExtendable / Clause 8.2.136\n1\n187\nUser Plane Path Recovery Report\nExtendable / Table 7.4.5.1.3-1\nNot Applicable\n188\nIP Multicast Addressing Info within PFCP Session Establishment Request\nExtendable / Clause 7.5.2.2-4\nNot Applicable\n189\nJoin IP Multicast Information IE within Usage Report\nExtendable / Table 7.5.8.3-4\nNot Applicable\n190\nLeave IP Multicast Information IE within Usage Report\nExtendable / Table 7.5.8.3-5\nNot Applicable\n191\nIP Multicast Address\nExtendable / Clause 8.2.137\n1\n192\nSource IP Address\nExtendable / Clause 8.2.138\n1\n193\nPacket Rate Status\nExtendable / Clause 8.2.139\n1\n194\nCreate Bridge/Router Info\nExtendable / Clause 8.2.140\n1\n195\nCreated Bridge/Router Info\nExtendable / Table 7.5.3.6-1\nNot Applicable\n196\nPort Number\nFixed Length / Clause 8.2.141\n4\n197\nNW-TT Port Number\nFixed Length / Clause 8.2.142\n4\n198\n5GS User Plane Node ID\nExtendable / Clause 8.2.143\nNot Applicable\n199\nTSC Management Information IE within PFCP Session Modification Request\nExtendable / Table 7.5.4.18-1\nNot Applicable\n200\nTSC Management Information IE within PFCP Session Modification Response\nExtendable / Table 7.5.5.3-1\nNot Applicable\n201\nTSC Management Information IE within PFCP Session Report Request\nExtendable / Table 7.5.8.5-1\nNot Applicable\n202\nPort Management Information Container\nVariable Length / Clause 8.2.144\nNot Applicable\n203\nClock Drift Control Information\nExtendable / Table 7.4.4.1.2-1\nNot Applicable\n204\nRequested Clock Drift Information\nExtendable / Clause 8.2.145\n1\n205\nClock Drift Report\nExtendable / Table 7.4.5.1.4-1\nNot Applicable\n206\nTime Domain Number\nExtendable / Clause 8.2.146\n1\n207\nTime Offset Threshold\nExtendable / Clause 8.2.147\n8\n208\nCumulative rateRatio Threshold\nExtendable / Clause 8.2.148\n4\n209\nTime Offset Measurement\nExtendable / Clause 8.2.149\n8\n210\nCumulative rateRatio Measurement\nExtendable / Clause 8.2.150\n4\n211\nRemove SRR\nExtendable/ Table 7.5.4.19-1\nNot applicable\n212\nCreate SRR\nExtendable/ Table 7.5.2.9-1\nNot applicable\n213\nUpdate SRR\nExtendable/ Table 7.5.4.21-1\nNot applicable\n214\nSession Report\nExtendable / Table 7.5.8.7-1\nNot Applicable\n215\nSRR ID\nExtendable / Clause 8.2.151\n1\n216\nAccess Availability Control Information\nExtendable / Table 7.5.2.9-2\nNot applicable\n217\nRequested Access Availability Information\nExtendable / Clause 8.2.152\n1\n218\nAccess Availability Report\nExtendable / Table 7.5.8.6-2\nNot applicable\n219\nAccess Availability Information\nExtendable / Clause 8.2.153\n1\n220\nProvide ATSSS Control Information\nExtendable / Table 7.5.2.10-1\nNot Applicable\n221\nATSSS Control Parameters\nExtendable / Table 7.5.3.7-1\nNot Applicable\n222\nMPTCP Control Information\nExtendable / Clause 8.2.154\n1\n223\nATSSS-LL Control Information\nExtendable / Clause 8.2.155\n1\n224\nPMF Control Information\nExtendable / Clause 8.2.156\n1\n225\nMPTCP Parameters\nExtendable / Table 7.5.3.7-2\nNot Applicable\n226\nATSSS-LL Parameters\nExtendable / Table 7.5.3.7-3\nNot Applicable\n227\nPMF Parameters\nExtendable / Table 7.5.3.7-4\nNot Applicable\n228\nMPTCP Address Information\nExtendable / Clause 8.2.157\n4\n229\nLink-Specific Multipath IP Address\nExtendable / Clause 8.2.158\n1\n230\nPMF Address Information\nExtendable / Clause 8.2.159\n1\n231\nATSSS-LL Information\nExtendable / Clause 8.2.160\n1\n232\nData Network Access Identifier\nVariable Length / Clause 8.2.161\nNot applicable\n233\nUE IP address Pool Information\nExtendable / Table 7.4.4.1-3\nNot Applicable\n234\nAverage Packet Delay\nExtendable / Clause 8.2.162\n4\n235\nMinimum Packet Delay\nExtendable / Clause 8.2.163\n4\n236\nMaximum Packet Delay\nExtendable / Clause 8.2.164\n4\n237\nQoS Report Trigger\nExtendable / Clause 8.2.165\n1\n238\nGTP-U Path QoS Control Information\nExtendable / Table 7.4.4.1.3-1\nNot Applicable\n239\nGTP-U Path QoS Report (PFCP Node Report Request)\nExtendable / Table 7.4.5.1.5-1\nNot Applicable\n240\nQoS Information in GTP-U Path QoS Report\nExtendable / Table 7.4.5.1.6-1\nNot Applicable\n241\nGTP-U Path Interface Type\nExtendable / Clause 8.2.166\n1\n242\nQoS Monitoring per QoS flow Control Information\nExtendable / Table 7.5.2.9-3\nNot applicable\n243\nRequested QoS Monitoring\nExtendable / Clause 8.2.167\n1\n244\nReporting Frequency\nExtendable / Clause 8.2.168\n1\n245\nPacket Delay Thresholds\nExtendable / Clause 8.2.169\n1\n246\nMinimum Wait Time\nExtendable / Clause 8.2.170\n4\n247\nQoS Monitoring Report\nExtendable / Table 7.5.8.6-3\nNot applicable\n248\nQoS Monitoring Measurement\nExtendable / Clause 8.2.171\n1\n249\nMT-EDT Control Information\nExtendable / Clause 8.2.172\n1\n250\nDL Data Packets Size\nExtendable / Clause 8.2.173\n2\n251\nQER Control Indications\nExtendable / Clause 8.2.174\n1\n252\nPacket Rate Status Report\nExtendable / Table 7.5.7.1-2\nNot applicable\n253\nNF Instance ID\nFixed / Clause 8.2.175\n16\n254\nEthernet Context Information\nExtendable / Table 7.5.4.21-1\nNot Applicable\n255\nRedundant Transmission Parameters\nExtendable / Table 7.5.2.2-5, Table 7.5.2.3-4\nNot Applicable\n256\nUpdated PDR\nExtendable / Table 7.5.5.5-1\nNot Applicable\n257\nS-NSSAI\nFixed Length / Clause 8.2.176\n4\n258\nIP version\nExtendable / Clause 8.2.177\n1\n259\nPFCPASReq-Flags\nExtendable / Clause 8.2.178\n1\n260\nData Status\nExtendable / Clause 8.2.179\n1\n261\nProvide RDS configuration information\nExtendable / Table 7.5.2.11-1\nNot Applicable\n262\nRDS configuration information\nExtendable / Clause 8.2.180\n1\n263\nQuery Packet Rate Status IE within PFCP Session Modification Request\nExtendable / Table 7.5.4.22-1\nNot Applicable\n264\nPacket Rate Status Report IE within PFCP Session Modification Response\nExtendable / Table 7.5.5.4-1\nNot Applicable\n265\nMultipath Applicable Indication\nExtendable / Clause 8.2.181\n1\n266\nUser Plane Node Management Information Container\nVariable Length / Clause 8.2.182\nNot Applicable\n267\nUE IP Address Usage Information\nExtendable / Table 7.4.4.3.1-1\nNot Applicable\n268\nNumber of UE IP Addresses\nExtendable / Clause 8.2.183\n1\n269\nValidity Timer\nExtendable / Clause 8.2.184\n2\n270\nRedundant Transmission Forwarding Parameters\nExtendable / Table 7.5.2.3-4\nNot Applicable\n271\nTransport Delay Reporting\nExtendable / Table 7.5.2.2-6\nNot Applicable\n272\nPartial Failure Information\nExtendable / Table 7.5.3.1-2\nNot Applicable\n273\nSpare\n274\nOffending IE Information\nVariable Length / Clause 8.2.185\nNot Applicable\n275\nRAT Type\nExtendable / Table 8.2.186\n1\n276\nL2TP Tunnel Information\nExtendable / Table 7.5.2.1-2\nNot Applicable\n277\nL2TP Session Information\nExtendable / Table 7.5.2.1-3\nNot Applicable\n278\nL2TP User Authentication\nExtendable / Clause 8.2.187\n1\n279\nCreated L2TP Session\nExtendable / Table 7.5.3.1-3\nNot Applicable\n280\nLNS Address\nExtendable / Clause 8.2.188\n1\n281\nTunnel Preference\nFixed Length / Clause 8.2.189\n3\n282\nCalling Number\nVariable Length / Clause 8.2.190\nNot Applicable\n283\nCalled Number\nVariable Length / Clause 8.2.191\nNot Applicable\n284\nL2TP Session Indications\nExtendable / Clause 8.2.192\n1\n285\nDNS Server Address\nExtendable / Clause 8.2.193\n1\n286\nNBNS Server Address\nExtendable / Clause 8.2.194\n1\n287\nMaximum Receive Unit\nFixed Length / Clause 8.2.195\n2\n288\nThresholds\nExtendable / Clause 8.2.196\n1\n289\nSteering Mode Indicator\nExtendable / Clause 8.2.197\n1\n290\nPFCP Session Change Info\nExtendable / Table 7.4.7.1-2\nNot Applicable\n291\nGroup ID\nVariable Length / Clause 8.2.198\nNot Applicable\n292\nCP IP Address\nVariable / Clause 8.2.199\nNot Applicable\n293\nIP Address and Port number Replacement\nExtendable / Clause 8.2.200\n1\n294\nDNS Query/Response Filter\nExtendable / Clause 8.2.201\n2\n295\nDirect Reporting Information\nExtendable / Table 7.5.2.9-4\nNot applicable\n296\nEvent Notification URI\nVariable Length / Clause 8.2.202\nNot Applicable\n297\nNotification Correlation ID\nVariable Length / Clause 8.2.203\nNot Applicable\n298\nReporting Flags\nExtendable / Clause 8.2.204\nNot Applicable\n299\nPredefined Rules Name\nVariable Length / Clause 8.205\nNot Applicable\n300\nMBS Session N4mb Control Information\nExtendable / Table 7.5.2.1-4\nNot Applicable\n301\nMBS Multicast Parameters\nExtendable / Table 7.5.2.3-5\nNot Applicable\n302\nAdd MBS Unicast Parameters\nExtendable / Table 7.5.2.3-6\nNot Applicable\n303\nMBS Session N4mb Information\nExtendable / Table 7.5.3.1-4\nNot Applicable\n304\nRemove MBS Unicast Parameters\nExtendable / Table 7.5.4.3-4\nNot Applicable\n305\nMBS Session Identifier\nExtendable Length / Clause 8.2.206\n1\n306\nMulticast Transport Information\nExtendable Length / Clause 8.2.207\n5\n307\nMBSN4mbReq-Flags\nExtendable Length / Clause 8.2.208\n1\n308\nLocal Ingress Tunnel\nExtendable / Clause 8.2.209\n1\n309\nMBS Unicast Parameters ID\nExtendable / Clause 8.2.210\n2\n310\nMBS Session N4 Control Information\nExtendable / Table 7.5.2.1-5\nNot Applicable\n311\nMBS Session N4 Information\nExtendable / Table 7.5.3.1-5\nNot Applicable\n312\nMBSN4Resp-Flags\nExtendable / Clause 8.2.211\n1\n313\nTunnel Password\nVariable Length / Clause 8.2.212\nNot Applicable\n314\nArea Session ID\nFixed Length / Clause 8.2.213\n2\n315\nPeer UP Restart Report\nExtendable / Clause 7.4.5.1.7\nNot Applicable\n316\nDSCP to PPI Control Information\nExtendable / Table 7.5.2.1-6\nNot Applicable\n317\nDSCP to PPI Mapping Information\nExtendable / Clause 8.2.214\n2\n318\nPFCPSDRsp-Flags\nExtendable / Clause 8.2.215\n1\n319\nQER Indications\nExtendable / Clause 8.2.216\n1\n320\nVendor-Specific Node Report Type\nExtendable / Clause 8.2.217\n1\n321\nConfigured Time Domain\nExtendable / Clause 8.2.218\n1\n322\nMetadata\nVariable / Clause 8.2.219\nNot Applicable\n323\nTraffic Parameter Measurement Control Information\nExtendable / Table 7.5.2.9-5\nNot Applicable\n324\nTraffic Parameter Measurement Report\nExtendable / Table 7.5.8.6-4\nNot Applicable\n325\nTraffic Parameter Threshold\nExtendable / Clause 8.2.220\n1\n326\nDL Periodicity\nExtendable / Clause 8.2.221\n1\n327\nN6 Jitter Measurement\nExtendable / Clause 8.2.222\n1\n328\nTraffic Parameter Measurement Indication\nExtendable / Clause 8.2.223\n1\n329\nUL Periodicity\nExtendable / Clause 8.2.224\n1\n330\nMPQUIC Control Information\nExtendable / Clause 8.2.225\n1\n331\nMPQUIC Parameters\nExtendable / Table 7.5.3.7-5\nNot Applicable\n332\nMPQUIC Address Information\nExtendable / Clause 8.2.226\n4\n333\nTransport Mode\nExtendable / Clause 8.2.227\n1\n334\nProtocol Description\nExtendable / Table 7.5.2.2-7\nNot Applicable\n335\nReporting Suggestion Info\nExtendable / Clause 8.2.229\n1\n336\nTL-Container\nVariable Length / Clause 8.2.230\nNot Applicable\n337\nMeasurement Indication\nExtendable / Clause 8.2.231\n1\n338\nHPLMN S-NSSAI\nFixed Length / Clause 8.2.232\n4\n339\nMedia Transport Protocol\nExtendable / Clause 8.2.233\n1\n340\nRTP Header Extension Information\nExtendable / Table 7.5.2.2-8\nNot Applicable\n341\nRTP Payload Information\nExtendable / Table 7.5.2.2-9\nNot Applicable\n342\nRTP Header Extension Type\nFixed Length / Clause 8.2.234\n1\n343\nRTP Header Extension ID\nFixed Length / Clause 8.2.235\n1\n344\nRTP Payload Type\nFixed Length / Clause 8.2.236\n1\n345\nRTP Payload Format\nFixed Length / Clause 8.2.237\n1\n346\nExtended DL Buffering Notification Policy\nExtendable / Clause 8.2.238\n1\n347\nMT-SDT Control Information\nExtendable / Clause 8.2.239\n1\n348\nReporting Thresholds\nExtendable / Clause 8.2.240\n1\n349\nRTP Header Extension Additional Information\nExtendable / Clause 8.2.241\n2\n350\nMapped N6 IP Address\nExtendable / Clause 8.2.242\n1\n351\nN6 Routing Information\nExtendable / Clause 8.2.243\n1\n352\nURI\nVariable Length / Clause 8.2.244\nNot Applicable\n353\nUE Level Measurements Configuration\nExtendable / Clause 8.2.245\n2\n354 to 32767\nSpare. For future use.\n32768 to 65535\nReserved for vendor specific IEs",
      "chunk_type": "requirement",
      "cross_references": [
        "clause_5.6.3",
        "clause_7",
        "clause_8.2.1",
        "clause_8.2.2",
        "clause_8.2.3",
        "clause_8.2.4",
        "clause_8.2.5",
        "clause_8.2.6",
        "clause_8.2.7",
        "clause_8.2.8",
        "clause_8.2.9",
        "clause_8.2.10",
        "clause_8.2.11",
        "clause_8.2.12",
        "clause_8.2.13",
        "clause_8.2.14",
        "clause_8.2.15",
        "clause_8.2.16",
        "clause_8.2.17",
        "clause_8.2.18",
        "clause_8.2.19",
        "clause_8.2.20",
        "clause_8.2.21",
        "clause_8.2.22",
        "clause_8.2.23",
        "clause_8.2.24",
        "clause_8.2.25",
        "clause_8.2.26",
        "clause_8.2.27",
        "clause_8.2.28",
        "clause_8.2.29",
        "clause_8.2.30",
        "clause_8.2.31",
        "clause_8.2.32",
        "clause_8.2.33",
        "clause_8.2.34",
        "clause_8.2",
        "clause_8.2.38",
        "clause_8.2.39",
        "clause_8.2.40",
        "clause_8.2.41",
        "clause_8.2.42",
        "clause_8.2.43",
        "clause_8.2.44",
        "clause_8.2.45",
        "clause_8.2.46",
        "clause_8.2.47",
        "clause_8.2.48",
        "clause_8.2.49",
        "clause_8.2.50",
        "clause_8.2.51",
        "clause_8.2.52",
        "clause_8.2.53",
        "clause_8.2.54",
        "clause_8.2.55",
        "clause_8.2.56",
        "clause_8.2.57",
        "clause_8.2.58",
        "clause_8.2.59",
        "clause_8.2.60",
        "clause_8.2.61",
        "clause_8.2.62",
        "clause_8.2.63",
        "clause_8.2.64",
        "clause_8.2.65",
        "clause_8.2.66",
        "clause_8.2.67",
        "clause_8.2.68",
        "clause_8.2.69",
        "clause_8.2.70",
        "clause_8.2.71",
        "clause_8.2.72",
        "clause_8.2.73",
        "clause_8.2.74",
        "clause_8.2.75",
        "clause_8.2.76",
        "clause_8.2.77",
        "clause_8.2.78",
        "clause_8.2.79",
        "clause_8.2.80",
        "clause_8.2.81",
        "clause_8.2.83",
        "clause_8.2.84",
        "clause_8.2.85",
        "clause_8.2.86",
        "clause_8.2.87",
        "clause_8.2.88",
        "clause_8.2.89",
        "clause_8.2.90",
        "clause_8.2.91",
        "clause_8.2.92",
        "clause_8.2.93",
        "clause_8.2.94",
        "clause_8.2.95",
        "clause_8.2.96",
        "clause_8.2.97",
        "clause_8.2.98",
        "clause_8.2.99",
        "clause_8.2.100",
        "clause_8.2.101",
        "clause_8.2.102",
        "clause_8.2.103",
        "clause_8.2.104",
        "clause_8.2.105",
        "clause_8.2.112",
        "clause_8.2.113",
        "clause_8.2.106",
        "clause_8.2.107",
        "clause_8.2.108",
        "clause_8.2.109",
        "clause_8.2.110",
        "clause_8.2.111",
        "clause_8.2.114",
        "clause_8.2.115",
        "clause_8.2.116",
        "clause_8.2.117",
        "clause_8.2.118",
        "clause_8.2.119",
        "clause_8.2.120",
        "clause_8.2.121",
        "clause_8.2.122",
        "clause_8.2.123",
        "clause_8.2.124",
        "clause_8.2.125",
        "clause_8.2.126",
        "clause_8.2.127",
        "clause_8.2.128",
        "clause_8.2.129",
        "clause_8.2.130",
        "clause_8.2.131",
        "clause_8.2.132",
        "clause_8.2.133",
        "clause_8.2.134",
        "clause_8.2.135",
        "clause_8.2.136",
        "clause_7.5.2.2",
        "clause_8.2.137",
        "clause_8.2.138",
        "clause_8.2.139",
        "clause_8.2.140",
        "clause_8.2.141",
        "clause_8.2.142",
        "clause_8.2.143",
        "clause_8.2.144",
        "clause_8.2.145",
        "clause_8.2.146",
        "clause_8.2.147",
        "clause_8.2.148",
        "clause_8.2.149",
        "clause_8.2.150",
        "clause_8.2.151",
        "clause_8.2.152",
        "clause_8.2.153",
        "clause_8.2.154",
        "clause_8.2.155",
        "clause_8.2.156",
        "clause_8.2.157",
        "clause_8.2.158",
        "clause_8.2.159",
        "clause_8.2.160",
        "clause_8.2.161",
        "clause_8.2.162",
        "clause_8.2.163",
        "clause_8.2.164",
        "clause_8.2.165",
        "clause_8.2.166",
        "clause_8.2.167",
        "clause_8.2.168",
        "clause_8.2.169",
        "clause_8.2.170",
        "clause_8.2.171",
        "clause_8.2.172",
        "clause_8.2.173",
        "clause_8.2.174",
        "clause_8.2.175",
        "clause_8.2.176",
        "clause_8.2.177",
        "clause_8.2.178",
        "clause_8.2.179",
        "clause_8.2.180",
        "clause_8.2.181",
        "clause_8.2.182",
        "clause_8.2.183",
        "clause_8.2.184",
        "clause_8.2.185",
        "clause_8.2.187",
        "clause_8.2.188",
        "clause_8.2.189",
        "clause_8.2.190",
        "clause_8.2.191",
        "clause_8.2.192",
        "clause_8.2.193",
        "clause_8.2.194",
        "clause_8.2.195",
        "clause_8.2.196",
        "clause_8.2.197",
        "clause_8.2.198",
        "clause_8.2.199",
        "clause_8.2.200",
        "clause_8.2.201",
        "clause_8.2.202",
        "clause_8.2.203",
        "clause_8.2.204",
        "clause_8.205",
        "clause_8.2.206",
        "clause_8.2.207",
        "clause_8.2.208",
        "clause_8.2.209",
        "clause_8.2.210",
        "clause_8.2.211",
        "clause_8.2.212",
        "clause_8.2.213",
        "clause_7.4.5.1.7",
        "clause_8.2.214",
        "clause_8.2.215",
        "clause_8.2.216",
        "clause_8.2.217",
        "clause_8.2.218",
        "clause_8.2.219",
        "clause_8.2.220",
        "clause_8.2.221",
        "clause_8.2.222",
        "clause_8.2.223",
        "clause_8.2.224",
        "clause_8.2.225",
        "clause_8.2.226",
        "clause_8.2.227",
        "clause_8.2.229",
        "clause_8.2.230",
        "clause_8.2.231",
        "clause_8.2.232",
        "clause_8.2.233",
        "clause_8.2.234",
        "clause_8.2.235",
        "clause_8.2.236",
        "clause_8.2.237",
        "clause_8.2.238",
        "clause_8.2.239",
        "clause_8.2.240",
        "clause_8.2.241",
        "clause_8.2.242",
        "clause_8.2.243",
        "clause_8.2.244",
        "clause_8.2.245",
        "table_8.1.2-1",
        "table_7.5.2.2-1",
        "table_7.5.2.2-2",
        "table_7.5.2.3-1",
        "table_7.5.2.3-2",
        "table_7.5.2.3-3",
        "table_7.5.2.4-1",
        "table_7.5.2.5-1",
        "table_7.5.3.2-1",
        "table_7.5.4.2-1",
        "table_7.5.4.3-1",
        "table_7.5.4.3-2",
        "table_7.5.9.2-1",
        "table_7.5.4.4",
        "table_7.5.4.5",
        "table_7.5.4.6",
        "table_7.5.4.7",
        "table_7.5.4.8",
        "table_7.5.4.9",
        "table_7.5.3.3-1",
        "table_7.5.3.4-1",
        "table_7.4.3.1-2",
        "table_7.4.3.1-3",
        "table_7.5.8.3-2",
        "table_7.5.4.10-1",
        "table_7.5.5.2-1",
        "table_7.5.7.2-1",
        "table_7.5.8.3-1",
        "table_7.5.8.2-1",
        "table_7.5.2.6-1",
        "table_7.5.4.11-1",
        "table_7.5.4.12-1",
        "table_7.5.8.4-1",
        "table_7.4.5.1.2-1",
        "table_7.5.4.3-3",
        "table_7.5.2.4-2",
        "table_7.5.2.7",
        "table_7.5.3.5",
        "table_7.5.4.13",
        "table_7.5.4.14",
        "table_7.5.2.2-3",
        "table_7.5.8.3-3",
        "table_7.5.2.4-3",
        "table_7.5.2.8-1",
        "table_7.5.2.8-2",
        "table_7.5.2.8-3",
        "table_7.5.4.15-1",
        "table_7.5.4.16-1",
        "table_7.5.4.16-2",
        "table_7.5.4.16-3",
        "table_7.4.4.1-2",
        "table_7.4.5.1.3-1",
        "table_7.5.8.3-4",
        "table_7.5.8.3-5",
        "table_7.5.3.6-1",
        "table_7.5.4.18-1",
        "table_7.5.5.3-1",
        "table_7.5.8.5-1",
        "table_7.4.4.1.2-1",
        "table_7.4.5.1.4-1",
        "table_7.5.4.19-1",
        "table_7.5.2.9-1",
        "table_7.5.4.21-1",
        "table_7.5.8.7-1",
        "table_7.5.2.9-2",
        "table_7.5.8.6-2",
        "table_7.5.2.10-1",
        "table_7.5.3.7-1",
        "table_7.5.3.7-2",
        "table_7.5.3.7-3",
        "table_7.5.3.7-4",
        "table_7.4.4.1-3",
        "table_7.4.4.1.3-1",
        "table_7.4.5.1.5-1",
        "table_7.4.5.1.6-1",
        "table_7.5.2.9-3",
        "table_7.5.8.6-3",
        "table_7.5.7.1-2",
        "table_7.5.2.2-5",
        "table_7.5.2.3-4",
        "table_7.5.5.5-1",
        "table_7.5.2.11-1",
        "table_7.5.4.22-1",
        "table_7.5.5.4-1",
        "table_7.4.4.3.1-1",
        "table_7.5.2.2-6",
        "table_7.5.3.1-2",
        "table_8.2.186",
        "table_7.5.2.1-2",
        "table_7.5.2.1-3",
        "table_7.5.3.1-3",
        "table_7.4.7.1-2",
        "table_7.5.2.9-4",
        "table_7.5.2.1-4",
        "table_7.5.2.3-5",
        "table_7.5.2.3-6",
        "table_7.5.3.1-4",
        "table_7.5.4.3-4",
        "table_7.5.2.1-5",
        "table_7.5.3.1-5",
        "table_7.5.2.1-6",
        "table_7.5.2.9-5",
        "table_7.5.8.6-4",
        "table_7.5.3.7-5",
        "table_7.5.2.2-7",
        "table_7.5.2.2-8",
        "table_7.5.2.2-9"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.1",
      "section_id": "8.2.1",
      "section_title": "Cause",
      "content": "Cause IE is coded as depicted in Figure 8.2.1-1.\n.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 19 (decimal)\n3 to 4\nLength = n\n5\nCause value\nFigure 8.2.1-1: Cause\nThe Cause value shall be included in a response message. In a response message, the Cause value indicates the acceptance or the rejection of the corresponding request message. The Cause value indicates the explicit reason for the rejection.\nTable 8.2.1-1: Cause values\nMessage Type\nCause value\n(decimal)\nMeaning\nDescription\n0\nReserved.\nShall not be sent and if received the Cause shall be treated as an invalid IE\nAcceptance in a response\n1\nRequest accepted (success)\n\"Request accepted (success)\" is returned when the PFCP entity has accepted a request.\n2\nMore Usage Report to send\nThis cause shall be returned by the UP function in the PFCP Session Deletion Response message when it has more usage reports to send. (See clause 5.2.2.3.1)\n3\nRequest partially accepted\nThis cause shall be returned if the PSUCC feature is supported by the CP function and the UP function, when a PFCP Session Establishment Request or PFCP Session Modification Request is partially accepted. See clause 5.2.9.\n4-63\nSpare.\nThis value range shall be used by Cause values in an acceptance response message. See NOTE 1.\nRejection in a response\n64\nRequest rejected (reason not specified)\nThis cause shall be returned to report an unspecified rejection cause\n65\nSession context not found\nThis cause shall be returned, if the F-SEID included in a PFCP Session Modification/Deletion Request message is unknown.\n66\nMandatory IE missing\nThis cause shall be returned when the PFCP entity detects that a Mandatory IE is missing in a request message\n67\nConditional IE missing\nThis cause shall be returned when the PFCP entity detects that a Conditional IE is missing in a request message.\n68\nInvalid length\nThis cause shall be returned when the PFCP entity detects that an IE with an invalid length in a request message\n69\nMandatory IE incorrect\nThis cause shall be returned when the PFCP entity detects that a Mandatory IE is incorrect in a request message, e.g. the Mandatory IE is malformated or it carries an invalid or unexpected value.\n70\nInvalid Forwarding Policy\nThis cause shall be used by the UP function in the PFCP Session Establishment Response or PFCP Session Modification Response message if the CP function attempted to provision a FAR with a Forwarding Policy Identifier for which no Forwarding Policy is locally configured in the UP function.\n71\nInvalid F-TEID allocation option\nThis cause shall be used by the UP function in the PFCP Session Establishment Response or PFCP Session Modification Response message if the CP function attempted to provision a PDR with a F-TEID allocation option which is incompatible with the F-TEID allocation option used for already created PDRs (by the same or a different CP function) and the Restoration Indication bit was not set to \"1\" in the request.\n72\nNo established PFCP Association\nThis cause shall be used by the CP function or the UP function if they receive a PFCP message other than the PFCP Association Setup Request and the Heartbeat Request message from a peer with which there is no established PFCP Association.\n73\nRule creation/modification Failure\nThis cause shall be used by the UP function if a received Rule failed to be stored and be applied in the UP function.\n74\nPFCP entity in congestion\nThis cause shall be returned when a PFCP entity has detected node level congestion and performs overload control, which does not allow the request to be processed.\n75\nNo resources available\nThis cause shall be returned to indicate a temporary unavailability of resources to process the received request. This cause may also be returned in Partial Failure Information to report that a rule cannot be applied due to a limitation of resources in the UP function.\n76\nService not supported\nThis cause shall be returned when a PFCP entity receives a message requesting a feature or service that is not supported.\n77\nSystem failure\nThis cause shall be returned to indicate a system error condition.\n78\nRedirection Requested\nThis cause may be returned to indicate a request to the UPF to redirect its PFCP request to a different SMF.\n79\nAll dynamic addresses are occupied\nThis cause may be returned if the UE IP address is to be assigned by the UP function but all UE IP addresses configured for a given Network Instance and/or IP address pool in the UP function are occupied.\n80\nUnknown Pre-defined Rule\nThis cause may be returned in Partial Failure Information to report that a pre-defined rule cannot be applied since being unknown to the UP function.\n81\nUnknown Application ID\nThis cause may be returned in Partial Failure Information to report that a rule cannot be applied due to the Application ID being unknown by the UP function.\n82\nL2TP tunnel Establishment failure\nThis cause shall be returned if the UP function detects an L2TP tunnel failure in the PFCP Session Establishment Response other than those defined for the cause values 87 and 89.\n83\nL2TP session Establishment failure\nThis cause shall be returned if the UP function detects an L2TP session failure in the PFCP Session Establishment Response other than the one defined for the cause value 88.\n84\nL2TP tunnel release\nThis cause may be returned by the UP function when the L2TP tunnel is released, e.g. in a PFCP Session Report Request message to delete the PFCP session if the corresponding L2TP session is terminated since to the LNS initiated the release of the L2TP tunnel or the LNS is failed. See clause 5.31.3.\n85\nL2TP session release\nThis cause may be returned by the UP function when the L2TP session is released, e.g. in a PFCP Session Report Request message to delete the PFCP session if the corresponding L2TP session is terminated since the LNS initiated the release of the L2TP session. See clause 5.31.3.\n86\nPFCP session restoration failure due to requested resource not available\nThis cause should be returned by:\n-\tthe UP function when the CP function requests the UP function to re-establish an existing PFCP session (i.e. the Restoration Indication bit set to \"1\" in the request) but the GTP-U F-TEID or UE IP address provided by the CP function is not available. See clauses 4.3.2 and 4.3.4 of 3GPP TS 23.527 [40].\n-\tthe MB-UPF when the MB-SMF requests the MB-UPF to re-establish an existing PFCP session (i.e. the MBS Restoration Indication bit is set to \"1\" in the request) but the N3mb/N19mb LL SSM address or N6mb/Nmb9 ingress tunnel address provided by the MB-SMF is not available. See clause 8.2.2 of 3GPP TS 23.527 [40].\nThe resource is not available means that it cannot be assigned to any PFCP session, due to e.g. the address having been decommissioned by OAM from the (MB-) UPF or e.g. the address being no longer operational due to a partial hardware failure at the (MB-)UPF.\n87\nL2TP tunnel Establishment failure – Tunnel Auth Failure\nThis cause shall be returned if the UP function detects an L2TP tunnel failure due to tunnel authentication failure in the PFCP Session Establishment Response.\n88\nL2TP Session Establishment failure – Session Auth Failure\nThis cause shall be returned if the UP function detects an L2TP session establishment failure due to authentication failure in the PFCP Session Establishment Response.\n89\nL2TP tunnel Establishment failure – LNS not reachable\nThis cause shall be returned if the UP function detects an L2TP tunnel failure due to LNS not reachable in the PFCP Session Establishment Response.\n90 to 255\nSpare for future use in a response message. See NOTE 2.\nThis value range shall be used by Cause values in a rejection response message. See NOTE 2.\nNOTE 1:\tThis value is or may be used in future version of the specification. If the receiver cannot comprehend the value, it shall be interpreted as an unspecified acceptance cause. Unspecified/unrecognized acceptance cause shall be treated in the same ways as the cause value 1 \" Request accepted (success)\".\nNOTE 2:\tThis value is or may be used in a future version of the specification. If the receiver cannot comprehend the value, it shall be interpreted as an unspecified rejection cause. Unspecified/unrecognized rejection cause shall be treated in the same ways as the cause value 64 \"Request rejected (reason not specified)\".",
      "chunk_type": "requirement",
      "cross_references": [
        "clause_5.2.2.3.1",
        "clause_5.2.9",
        "clause_5.31.3",
        "ts_23.527_clause_8.2.2",
        "table_8.2.1-1",
        "figure_8.2.1-1",
        "ts_23.527"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.2",
      "section_id": "8.2.2",
      "section_title": "Source Interface",
      "content": "The Source Interface IE type shall be encoded as shown in Figure 8.2.2-1. It indicates the type of the interface from which an incoming packet is received.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 20 (decimal)\n3 to 4\nLength = n\n5\nSpare\nInterface value\n6 to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.2-1: Source Interface\nThe Interface value shall be encoded as a 4 bits binary integer as specified in in Table 8.2.2-1.\nTable 8.2.2-1: Interface value\nInterface value\nValues (Decimal)\nAccess\n0\nCore\n1\nSGi-LAN/N6-LAN\n2\nCP-function\n3\n5G VN Internal\n4\nSpare\n5 to 15\nNOTE 1:\tThe \"Access\" and \"Core\" values denote an uplink and downlink traffic direction respectively.\nNOTE 2:\tFor indirect data forwarding, the Source Interface in the PDR and the Destination Interface in the FAR shall both be set to \"Access\", in the forwarding SGW(s). The Interface value does not infer any traffic direction, in PDRs and FARs set up for indirect data forwarding, i.e. with both the Source and Destination Interfaces set to Access.",
      "chunk_type": "requirement",
      "cross_references": [
        "table_8.2.2-1",
        "figure_8.2.2-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.3",
      "section_id": "8.2.3",
      "section_title": "F-TEID",
      "content": "The F-TEID IE type shall be encoded as shown in Figure 8.2.3-1. It indicates an F-TEID.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 21 (decimal)\n3 to 4\nLength = n\n5\nSpare\nCHID\nCH\nV6\nV4\n6 to 9\nTEID\nm to (m+3)\nIPv4 address\np to (p+15)\nIPv6 address\nq\nCHOOSE ID\nk to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.3-1: F-TEID\nThe following flags are coded within Octet 5:\n-\tBit 1 – V4: If this bit is set to \"1\" and the CH bit is not set, then the IPv4 address field shall be present, otherwise the IPv4 address field shall not be present.\n-\tBit 2 – V6: If this bit is set to \"1\" and the CH bit is not set, then the IPv6 address field shall be present, otherwise the IPv6 address field shall not be present.\n-\tBit 3 – CH (CHOOSE): If this bit is set to \"1\", then the TEID, IPv4 address and IPv6 address fields shall not be present and the UP function shall assign an F-TEID with an IP4 or an IPv6 address if the V4 or V6 bit is set respectively. This bit shall only be set by the CP function.\n-\tBit 4 – CHID (CHOOSE ID): If this bit is set to \"1\", then the UP function shall assign the same F-TEID to the PDRs requested to be created in a PFCP Session Establishment Request or PFCP Session Modification Request with the same CHOOSE ID value. This bit may only be set to \"1\" if the CH bit it set to \"1\". This bit shall only be set by the CP function.\n-\tBit 5 to 8: Spare, for future use and set to \"0\".\nAt least one of the V4 and V6 flags shall be set to \"1\", and both may be set to \"1\" for both scenarios:\n-\twhen the CP function is providing F-TEID, i.e. both IPv4 address field and IPv6 address field may be present; or\n-\twhen the UP function is requested to allocate the F-TEID, i.e. when CHOOSE bit is set to \"1\", and the IPv4 address and IPv6 address fields are not present.\nOctet 6 to 9 (TEID) shall be present and shall contain a GTP-U TEID, if the CH bit in octet 5 is not set. When the TEID is present, if both IPv4 and IPv6 addresses are present in the F-TEID IE, then the TEID value shall be shared by both addresses.\nOctets \"m to (m+3)\" and/or \"p to (p+15)\" (IPv4 address / IPv6 address fields), if present, it shall contain the respective IP address values.\nOctet q shall be present and shall contain a binary integer value if the CHID bit in octet 5 is set to \"1\".",
      "chunk_type": "requirement",
      "cross_references": [
        "figure_8.2.3-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.4",
      "section_id": "8.2.4",
      "section_title": "Network Instance",
      "content": "The Network Instance IE type shall be encoded as shown in Figure 8.2.4-1. It indicates a Network instance.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 22 (decimal)\n3 to 4\nLength = n\n5 to (n+4)\nNetwork Instance\nFigure 8.2.4-1: Network Instance\nThe Network instance field shall be encoded as an OctetString and shall contain an identifier which uniquely identifies a particular Network instance (e.g. PDN instance) in the UP function. It may be encoded as a Domain Name or an Access Point Name (APN) as per clause 9.1 of 3GPP TS 23.003 [2]. In the latter case, the PDN Instance field may contain the APN Network Identifier only or the full APN with both the APN Network Identifier and the APN Operator Identifier as specified in 3GPP TS 23.003 [2] clauses 9.1.1 and 9.1.2.\nNOTE:\tThe APN field is not encoded as a dotted string as commonly used in documentation.",
      "chunk_type": "requirement",
      "cross_references": [
        "ts_23.003_clause_9.1",
        "figure_8.2.4-1",
        "ts_23.003"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.5",
      "section_id": "8.2.5",
      "section_title": "SDF Filter",
      "content": "The SDF Filter IE type shall be encoded as shown in Figure 8.2.5-1. It contains an SDF Filter, i.e. a single IP flow packet filter.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 23 (decimal)\n3 to 4\nLength = n\n5\nSpare\nBID\nFL\nSPI\nTTC\nFD\n6\nSpare\nm to (m+1)\nLength of Flow Description\n(m+2) to p\nFlow Description\ns to (s+1)\nToS Traffic Class\nt to (t+3)\nSecurity Parameter Index\nv to (v+2)\nFlow Label\nw to (w+3)\nSDF Filter ID\nx to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.5-1: SDF Filter\nThe following flags are coded within Octet 5:\n-\tBit 1 – FD (Flow Description): If this bit is set to \"1\", then the Length of Flow Description and the Flow Description fields shall be present, otherwise they shall not be present.\n-\tBit 2 – TTC (ToS Traffic Class): If this bit is set to \"1\", then the ToS Traffic Class field shall be present, otherwise the ToS Traffic Class field shall not be present.\n-\tBit 3 – SPI (Security Parameter Index): If this bit is set to \"1\", then the Security Parameter Index field shall be present, otherwise the Security Parameter Index field shall not be present.\n-\tBit 4 – FL (Flow Label): If this bit is set to \"1\", then the Flow Label field shall be present, otherwise the Flow Label field shall not be present.\n-\tBit 5 – BID (Bidirectional SDF Filter): If this bit is set to \"1\", then the SDF Filter ID shall be present, otherwise the SDF Filter ID shall not be present.\n-\tBit 6 to 8: Spare, for future use and set to \"0\".\nThe Flow Description field, when present, shall be encoded as an OctetString as specified in clause 5.4.2 of 3GPP TS 29.212 [8].\nThe ToS Traffic Class field, when present, shall be encoded as an OctetString on two octets as specified in clause 5.3.15 of 3GPP TS 29.212 [8]. The ToS/Traffic Class mask field may be set to detect packets with a specific DSCP value (e.g. \"0xFC\"), or with specific ECN bits (e.g. \"0x03\") or both (e.g. \"0xFF\").\nThe Security Parameter Index field, when present, shall be encoded as an OctetString on four octets and shall contain the IPsec security parameter index (which is a 32-bit field), as specified in clause 5.3.51 of 3GPP TS 29.212 [8].\nThe Flow Label field, when present, shall be encoded as an OctetString on 3 octets as specified in clause 5.3.52 of 3GPP TS 29.212 [8] and shall contain an IPv6 flow label (which is a 20-bit field). The bits 8 to 5 of the octet \"v\" shall be spare and set to zero, and the remaining 20 bits shall contain the IPv6 flow label.\nAn SDF Filter may:\n-\tbe a pattern for matching the IP 5 tuple (source IP address or IPv6 network prefix, destination IP address or IPv6 network prefix, source port number, destination port number, protocol ID of the protocol above IP). In the pattern:\n-\ta value left unspecified in a filter matches any value of the corresponding information in a packet;\n-\tan IP address may be combined with a prefix mask;\n-\tport numbers may be specified as port ranges;\n-\tthe pattern can be extended by the Type of Service (TOS) (IPv4) / Traffic class (IPv6) and Mask;\n-\tconsist of the destination IP address and optional mask, protocol ID of the protocol above IP, the Type of Service (TOS) (IPv4) / Traffic class (IPv6) and Mask and the IPsec Security Parameter Index (SPI);\n-\tconsist of the destination IP address and optional mask, the Type of Service (TOS) (IPv4) / Traffic class (IPv6) and Mask and the Flow Label (IPv6);\nNOTE 1:\tThe details about the IPsec Security Parameter Index (SPI), the Type of Service (TOS) (IPv4) / Traffic class (IPv6) and Mask and the Flow Label (IPv6) are defined in 3GPP TS 23.060 [19] clause 15.3.\n-\textend the packet inspection beyond the possibilities described above and look further into the packet. Such service data flow filters need to be predefined in the PGW-U, as specified in clause 5.11 of 3GPP TS 23.214 [2].\nNOTE 2:\tSuch filters may be used to support filtering with respect to a service data flow based on the transport and application protocols used above IP, e.g. for HTTP and WAP. Filtering for further application protocols and services can also be supported.\nThe SDF Filter ID, when present, shall be encoded as an Unsigned32 binary integer value. It shall uniquely identify an SDF Filter among all the SDF Filters provisioned for a given PFCP Session. The source/destination IP address and port information, in a bidirectional SDF Filter, shall be set as for downlink IP flows. The SDF filter for the opposite direction has the same parameters, but having the source and destination address/port parameters swapped. When being provisioned with a bidirectional SDF filter in a PDR, the UP function shall apply the SDF filter as specified in clause 5.2.1A.2A.",
      "chunk_type": "requirement",
      "cross_references": [
        "ts_29.212_clause_5.4.2",
        "ts_29.212_clause_5.3.15",
        "ts_29.212_clause_5.3.51",
        "ts_29.212_clause_5.3.52",
        "ts_23.060_clause_15.3",
        "ts_23.214_clause_5.11",
        "clause_5.2.1",
        "figure_8.2.5-1",
        "ts_29.212",
        "ts_23.060",
        "ts_23.214"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.6",
      "section_id": "8.2.6",
      "section_title": "Application ID",
      "content": "The Application ID IE type shall be encoded as shown in Figure 8.2.6-1. It contains an Application Identifier referencing an application detection filter in the UP function (e.g. its value may represent an application such as a list of URLs).\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 24 (decimal)\n3 to 4\nLength = n\n5 to (n+4)\nApplication Identifier\nFigure 8.2.6-1: Application ID\nThe Application Identifier shall be encoded as an OctetString (see 3GPP TS 29.212 [8]).",
      "chunk_type": "requirement",
      "cross_references": [
        "figure_8.2.6-1",
        "ts_29.212"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.7",
      "section_id": "8.2.7",
      "section_title": "Gate Status",
      "content": "The Gate Status IE shall be encoded as shown in Figure 8.2.7-1. It indicates whether the service data flow or application's traffic is allowed to be forwarded (gate is open) or shall be discarded (gate is closed) in uplink and/or in downlink direction.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 25 (decimal)\n3 to 4\nLength = n\n5\nSpare\nUL Gate\nDL Gate\n6 to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.7-1: Gate Status\nTable 8.2.7-1: UL Gate\nUL Gate\nValue (Decimal)\nOPEN\n0\nCLOSED\n1\nFor future use. Shall not be sent. If received, shall be interpreted as the value \"1\".\n2, 3\nTable 8.2.7-2: DL Gate\nDL Gate\nValue (Decimal)\nOPEN\n0\nCLOSED\n1\nFor future use. Shall not be sent. If received, shall be interpreted as the value \"1\".\n2, 3",
      "chunk_type": "requirement",
      "cross_references": [
        "table_8.2.7-1",
        "table_8.2.7-2",
        "figure_8.2.7-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.8",
      "section_id": "8.2.8",
      "section_title": "MBR",
      "content": "The MBR IE type shall be encoded as shown in Figure 8.2.8-1. It indicates the maximum bit rate allowed for the uplink and downlink directions.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 26 (decimal)\n3 to 4\nLength = n\n5 to 9\nUL MBR\n10 to 14\nDL MBR\n15 to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.8-1: MBR\nThe UL/DL MBR fields shall be encoded as kilobits per second (1 kbps = 1000 bps) in binary value. The UL/DL MBR fields may require converting values in bits per second to kilobits per second when the UL/DL MBR values are received from an interface other than GTPv2 interface. If such conversions result in fractions, then the value of UL/DL MBR fields shall be rounded upwards. The range of UL/DL MBR is specified in 3GPP TS 36.413 [10].\nNOTE:\tThe encoding is aligned on the encoding specified in 3GPP TS 29.274 [9].",
      "chunk_type": "requirement",
      "cross_references": [
        "figure_8.2.8-1",
        "ts_36.413",
        "ts_29.274"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.9",
      "section_id": "8.2.9",
      "section_title": "GBR",
      "content": "The GBR IE type shall be encoded as shown in Figure 8.2.9-1. It indicates the guaranteed bit rate authorized for the uplink and/or downlink directions.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 27 (decimal)\n3 to 4\nLength = n\n5 to 9\nUL GBR\n10 to 14\nDL GBR\n15 to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.9-1: GBR\nThe UL/DL GBR fields shall be encoded as kilobits per second (1 kbps = 1000 bps) in binary value. The UL/DL GBR fields may require converting values in bits per second to kilobits per second when the UL/DL GBR values are received from an interface other than GTPv2 interface. If such conversions result in fractions, then the value of UL/DL GBR fields shall be rounded upwards. The range of UL/DL GBR is specified in 3GPP TS 36.413 [10].\nNOTE:\tThe encoding is aligned on the encoding specified in 3GPP TS 29.274 [9].",
      "chunk_type": "requirement",
      "cross_references": [
        "figure_8.2.9-1",
        "ts_36.413",
        "ts_29.274"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.10",
      "section_id": "8.2.10",
      "section_title": "QER Correlation ID",
      "content": "The QER Correlation ID IE type shall be encoded as shown in Figure 8.2.10-1. It contains a QoS Enforcement Rule Correlation ID to correlate QERs from different PFCP sessions. The QER Correlation ID shall be dynamically assigned by the CP function and provisioned by the CP function in different PFCP sessions to correlate QERs used in these PFCP sessions.\nNOTE:\tA QER Correlation ID is not a Rule ID. It is only a correlation number to correlate QERs from different PFCP sessions.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 28 (decimal)\n3 to 4\nLength = n\n5 to 8\nQER Correlation ID value\n9 to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.10-1: QER Correlation ID\nThe QER Correlation ID value shall be encoded as an Unsigned32 binary integer value.",
      "chunk_type": "requirement",
      "cross_references": [
        "figure_8.2.10-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.11",
      "section_id": "8.2.11",
      "section_title": "Precedence",
      "content": "The Precedence IE type shall be encoded as shown in Figure 8.2.11-1. It defines the relative precedence of a PDR among all the PDRs provisioned within a PFCP session, when looking for a PDR matching an incoming packet.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 29 (decimal)\n3 to 4\nLength = n\n5 to 8\nPrecedence value\n9 to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.11-1: Precedence\nThe Precedence value shall be encoded as an Unsigned32 binary integer value. The lower precedence values indicate higher precedence of the PDR, and the higher precedence values indicate lower precedence of the PDR when matching a packet.",
      "chunk_type": "requirement",
      "cross_references": [
        "figure_8.2.11-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.12",
      "section_id": "8.2.12",
      "section_title": "Transport Level Marking",
      "content": "The Transport Level Marking IE type shall be encoded as shown in Figure 8.2.12-1. It indicates the DSCP to be used for UL/DL transport level marking.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 30 (decimal)\n3 to 4\nLength = n\n5 to 6\nToS/Traffic Class\n7 to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.12-1: Transport Level Marking\nThe ToS/Traffic Class shall be encoded on two octets as an OctetString. The first octet shall contain the DSCP value in the IPv4 Type-of-Service or the IPv6 Traffic-Class field and the second octet shall contain the ToS/Traffic Class mask field, which shall be set to \"0xFC\". See clause 5.3.15 of 3GPP TS 29.212 [8].\nNOTE:\tThe original ECN bits in the IP header of user plane packets are not changed after applying transport level marking.",
      "chunk_type": "requirement",
      "cross_references": [
        "ts_29.212_clause_5.3.15",
        "figure_8.2.12-1",
        "ts_29.212"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.13",
      "section_id": "8.2.13",
      "section_title": "Volume Threshold",
      "content": "The Volume Threshold IE contains the traffic volume thresholds to be monitored by the UP function. It shall be encoded as shown in Figure 8.2.13-1.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 31 (decimal)\n3 to 4\nLength = n\n5\nSpare\nDLVOL\nULVOL\nTOVOL\nm to (m+7)\nTotal Volume\np to (p+7)\nUplink Volume\nq to (q+7)\nDownlink Volume\ns to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.13-1: Volume Threshold\nThe following flags are coded within Octet 5:\n-\tBit 1 – TOVOL: If this bit is set to \"1\", then the Total Volume field shall be present, otherwise the Total Volume field shall not be present.\n-\tBit 2 – ULVOL: If this bit is set to \"1\", then the Uplink Volume field shall be present, otherwise the Uplink Volume field shall not be present.\n-\tBit 3 – DLVOL: If this bit is set to \"1\", then the Downlink Volume field shall be present, otherwise the Downlink Volume field shall not be present.\n-\tBit 4 to 8: Spare, for future use and set to \"0\".\nAt least one bit shall be set to \"1\". Several bits may be set to \"1\".\nThe Total Volume, Uplink Volume and Downlink Volume fields shall be encoded as an Unsigned64 binary integer value. They shall contain the total, uplink or downlink number of octets respectively.",
      "chunk_type": "requirement",
      "cross_references": [
        "figure_8.2.13-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.14",
      "section_id": "8.2.14",
      "section_title": "Time Threshold",
      "content": "The Time Threshold IE contains the traffic duration threshold to be monitored by the UP function. It shall be encoded as shown in Figure 8.2.14-1.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 32 (decimal)\n3 to 4\nLength = n\n5 to 8\nTime Threshold\n9 to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.14-1: Time Threshold\nThe Time Threshold field shall be encoded as an Unsigned32 binary integer value. It shall contain the duration in seconds.",
      "chunk_type": "requirement",
      "cross_references": [
        "figure_8.2.14-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.15",
      "section_id": "8.2.15",
      "section_title": "Monitoring Time",
      "content": "The Monitoring Time IE indicates the time at which the UP function is expected to reapply the thresholds. It shall be encoded as shown in Figure 8.2.15-1.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 33 (decimal)\n3 to 4\nLength = n\n5 to 8\nMonitoring Time\n9 to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.15-1: Monitoring Time\nThe Monitoring Time field shall indicate the monitoring time in UTC time. Octets 5 to 8 shall be encoded in the same format as the first four octets of the 64-bit timestamp format as defined in clause 6 of IETF RFC 5905 [12].\nNOTE:\tThe encoding is defined as the time in seconds relative to 00:00:00 on 1 January 1900.",
      "chunk_type": "requirement",
      "cross_references": [
        "clause_6",
        "figure_8.2.15-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.16",
      "section_id": "8.2.16",
      "section_title": "Subsequent Volume Threshold",
      "content": "The Subsequent Volume Threshold IE contains the subsequent traffic volume thresholds to be monitored by the UP function after the Monitoring Time. It shall be encoded as shown in Figure 8.2.16-1.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 34 (decimal)\n3 to 4\nLength = n\n5\nSpare\nDLVOL\nULVOL\nTOVOL\nm to (m+7)\nTotal Volume\np to (p+7)\nUplink Volume\nq to (q+7)\nDownlink Volume\ns to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.16-1: Subsequent Volume Threshold\nThe following flags are coded within Octet 5:\n-\tBit 1 – TOVOL: If this bit is set to \"1\", then the Total Volume field shall be present, otherwise the Total Volume field shall not be present.\n-\tBit 2 – ULVOL: If this bit is set to \"1\", then the Uplink Volume field shall be present, otherwise the Uplink Volume field shall not be present.\n-\tBit 3 – DLVOL: If this bit is set to \"1\", then the Downlink Volume field shall be present, otherwise the Downlink Volume field shall not be present.\n-\tBit 4 to 8: Spare, for future use and set to \"0\".\nAt least one bit shall be set to \"1\". Several bits may be set to \"1\".\nThe Total Volume, Uplink Volume and Downlink Volume fields shall be encoded as an Unsigned64 binary integer value. They shall contain the total, uplink or downlink number of octets respectively.",
      "chunk_type": "requirement",
      "cross_references": [
        "figure_8.2.16-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.17",
      "section_id": "8.2.17",
      "section_title": "Subsequent Time Threshold",
      "content": "The Subsequent Time Threshold IE contains the subsequent traffic duration threshold to be monitored by the UP function after the Monitoring Time. It shall be encoded as shown in Figure 8.2.17-1.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 35 (decimal)\n3 to 4\nLength = n\n5 to 8\nSubsequent Time Threshold\n9 to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.17-1: Subsequent Time Threshold\nThe Subsequent Time Threshold field shall be encoded as an Unsigned32 binary integer value. It shall contain the duration in seconds.",
      "chunk_type": "requirement",
      "cross_references": [
        "figure_8.2.17-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.18",
      "section_id": "8.2.18",
      "section_title": "Inactivity Detection Time",
      "content": "The Inactivity Detection Time IE contains the inactivity time period, in seconds, to be monitored by the UP function. It shall be encoded as shown in Figure 8.2.18-1.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 36 (decimal)\n3 to 4\nLength = n\n5 to 8\nInactivity Detection Time\n9 to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.18-1: Inactivity Detection Time\nThe Inactivity Detection Time field shall be encoded as an Unsigned32 binary integer value.",
      "chunk_type": "requirement",
      "cross_references": [
        "figure_8.2.18-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.19",
      "section_id": "8.2.19",
      "section_title": "Reporting Triggers",
      "content": "The Reporting Triggers IE shall be encoded as shown in Figure 8.2.19-1. It indicates the reporting trigger(s) for the UP function to send a report to the CP function.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 37 (decimal)\n3 to 4\nLength = n\n5\nLIUSA\nDROTH\nSTOPT\nSTART\nQUHTI\nTIMTH\nVOLTH\nPERIO\n6\nQUVTI\nIPMJL\nEVEQU\nEVETH\nMACAR\nENVCL\nTIMQU\nVOLQU\n7\nSpare\nSpare\nSpare\nSpare\nSpare\nSpare\nUPINT\nREEMR\n8 to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.19-1: Reporting Triggers\nOctet 5 shall be encoded as follows:\n-\tBit 1 – PERIO (Periodic Reporting): when set to \"1\", this indicates a request for periodic reporting.\n-\tBit 2 – VOLTH (Volume Threshold): when set to \"1\", this indicates a request for reporting when the data volume usage reaches a volume threshold\n-\tBit 3 – TIMTH (Time Threshold): when set to \"1\", this indicates a request for reporting when the time usage reaches a time threshold.\n-\tBit 4 – QUHTI (Quota Holding Time): when set to \"1\", this indicates a request for reporting when no packets have been received for a period exceeding the Quota Holding Time.\n-\tBit 5 – START (Start of Traffic): when set to \"1\", this indicates a request for reporting when detecting the start of an SDF or Application traffic.\n-\tBit 6 – STOPT (Stop of Traffic): when set to \"1\", this indicates a request for reporting when detecting the stop of an SDF or Application Traffic.\n-\tBit 7 - DROTH (Dropped DL Traffic Threshold): when set to \"1\", this indicates a request for reporting when the DL traffic being dropped reaches a threshold.\n-\tBit 8: - LIUSA (Linked Usage Reporting): when set to \"1\", this indicates a request for linked usage reporting, i.e. a request for reporting a usage report for a URR when a usage report is reported for a linked URR (see clause 5.2.2.4).\nOctet 6 shall be encoded as follows:\n-\tBit 1 –VOLQU (Volume Quota): when set to \"1\", this indicates a request for reporting when a Volume Quota is exhausted.\n-\tBit 2 – TIMQU (Time Quota): when set to \"1\", this indicates a request for reporting when a Time Quota is exhausted.\n-\tBit 3 – ENVCL (Envelope Closure): when set to \"1\", this indicates a request for reporting when conditions for closure of envelope is met (see clause 5.2.2.3).\n-\tBit 4 – MACAR (MAC Addresses Reporting): when set to \"1\", this indicates a request for reporting the MAC (Ethernet) addresses used as source address of frames sent UL by the UE.\n-\tBit 5 – EVETH (Event Threshold): when set to \"1\", this indicates a request for reporting when an event threshold is reached. .\n-\tBit 6 – EVEQU (Event Quota): when set to \"1\", this indicates a request for reporting when an Event Quota is reached. .\n-\tBit 7 – IPMJL (IP Multicast Join/Leave): when set to \"1\", this indicates a request for reporting when the UPF adds or removes the PDU session to/from the DL replication tree associated with an IP multicast flow.\n-\tBit 8: – QUVTI (Quota Validity Time): when set to \"1\", this indicates a usage report being reported for a URR due to the quota validity timer expiry.\nOctet 7 shall be encoded as follows:\n-\tBit 1 – REEMR (REport the End Marker Reception): when set to \"1\", the SMF instructs the UPF to report the reception of the End Marker packet. See clause 5.2.2.2.1 and also clauses 4.2.3.2 and 4.23.4.3 in 3GPP TS 23.502 [29].\n-\tBit 2 – UPINT (User Plane Inactivity Timer): when set to \"1\", this indicates a request for reporting when no packets have been received for a period exceeding the User Plane Inactivity Timer.\n-\tBit 3 to 8: Spare, for future use and set to \"0\".\nAt least one bit shall be set to \"1\". Several bits may be set to \"1\".",
      "chunk_type": "requirement",
      "cross_references": [
        "clause_5.2.2.4",
        "clause_5.2.2.3",
        "clause_5.2.2.2.1",
        "figure_8.2.19-1",
        "ts_23.502"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.20",
      "section_id": "8.2.20",
      "section_title": "Redirect Information",
      "content": "Redirect Information is coded as depicted in Figure 8.2.20-1.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1-2\nType = 38 (decimal)\n3-4\nLength = n\n5\nSpare\nRedirect Address Type\n6-7\nRedirect Server Address Length=a\n8-(8+a-1)\nRedirect Server Address\np-(p+1)\nOther Redirect Server Address Length=b\n(p+2)-(p+2+b-1)\nOther Redirect Server Address\nm to (m+1)\nRedirect Port\ns to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.20-1: Redirect Information\nRedirect Address Type indicates the type of the Redirect Address. It shall be encoded as defined in Table 8.2.20-1.\nTable 8.2.20-1: Redirect Address Type\nRedirect Address Type\nValue (Decimal)\nIPv4 address\n0\nIPv6 address\n1\nURL\n2\nSIP URI\n3\nIPv4 and IPv6 addresses\n4\nPort\n5\nIPv4 address and Port\n6\nIPv6 address and Port\n7\nIPv4 and IPv6 addresses and Port\n8\nSpare, for future use.\n9 to 15\nThe Redirect Server Address Length shall indicate the length of the Redirect Server Address.\nThe Redirect Server Address shall be encoded in UTF8String format and shall contain the address of the redirect server (e.g. HTTP redirect server, SIP server) with which the end user is to be connected, as specified in clauses 8.38 and 8.39 of IETF RFC 4006 [16].\nIf the Redirect Address type is set to \"IPv4 and IPv6 address\", the Redirect Information IE shall include an IPv4 address and an IPv6 address in the Redirect Server Address IE and Other Redirect Server Address.\nThe Redirection Address Type may be set to \"Port\", \"IPv4 address and Port\", \"IPv6 address and Port\", or \"IPv4 and IPv6 addresses and Port\" if the UP function has indicated its support of the RATP feature as specified in clause 8.2.25.\nIf the Redirect Address Type is set to Port, the Redirect Address Server Address shall not be present, the UP function shall keep the destination of IP address and only change the destination port to the port as indicated in Redirect Port field.\nIf the Redirect Address Type is set to \"IPv4 address and Port\", \"IPv6 address and Port\", or \"IPv4 and IPv6 addresses and Port\", the Redirect Address Server Address and Redirect Port shall be included. When Redirect Address Type is set to \"IPv4 and IPv6 addresses and Port\", the Other Redirect Server Address shall also be present.",
      "chunk_type": "general",
      "cross_references": [
        "clause_8.2.25",
        "table_8.2.20-1",
        "figure_8.2.20-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.21",
      "section_id": "8.2.21",
      "section_title": "Report Type",
      "content": "The Report Type IE shall be encoded as shown in Figure 8.2.21-1. It indicates the type of the report the UP function sends to the CP function.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 39 (decimal)\n3 to 4\nLength = n\n5\nSpare\nUISR\nSESR\nTMIR\nUPIR\nERIR\nUSAR\nDLDR\n6 to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.21-1: Report Type\nOctet 5 shall be encoded as follows:\n-\tBit 1 – DLDR (Downlink Data Report): when set to \"1\", this indicates Downlink Data Report\n-\tBit 2 – USAR (Usage Report): when set to \"1\", this indicates a Usage Report\n-\tBit 3 – ERIR (Error Indication Report): when set to \"1\", this indicates an Error Indication Report.\n-\tBit 4 – UPIR (User Plane Inactivity Report): when set to \"1\", this indicates a User Plane Inactivity Report.\n-\tBit 5 –TMIR (TSC Management Information Report): when set to \"1\", this indicates a TSC Management Information Report, includes support of integration with TSN, TSCTS and DetNet.\n-\tBit 6 – SESR (Session Report): when set to \"1\", this indicates a Session Report.\n-\tBit 7 – UISR (UP Initiated Session Request):\twhen set to \"1\", this indicates it is a UP function initiated request for a reason which is indicated by the PFCPSRReq-Flags, for the PFCP session.\n-\tBit 8 – Spare, for future use and set to \"0\".\nAt least one bit shall be set to \"1\". Several bits may be set to \"1\".",
      "chunk_type": "requirement",
      "cross_references": [
        "figure_8.2.21-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.22",
      "section_id": "8.2.22",
      "section_title": "Offending IE",
      "content": "Offending IE IE is coded as depicted in Figure 8.2.22-1.\n.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 40 (decimal)\n3 to 4\nLength = 2\n5 to 6\nType of the offending IE\nFigure 8.2.22-1: Offending IE\nThe offending IE shall contain a mandatory IE type, if the rejection is due to a conditional or mandatory IE is faulty or missing.",
      "chunk_type": "general",
      "cross_references": [
        "figure_8.2.22-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.23",
      "section_id": "8.2.23",
      "section_title": "Forwarding Policy",
      "content": "The Forwarding Policy IE type shall be encoded as shown in Figure 8.2.23-1. It indicates a specific forwarding policy to apply to packets.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 41 (decimal)\n3 to 4\nLength = n\n5\nForwarding Policy Identifier Length\nj to k\nForwarding Policy Identifier\nm to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.23-1: Forwarding Policy\nThe Forwarding Policy Identifier Length shall indicate the length of the Forwarding Policy Identifier.\nThe Forwarding Policy Identifier shall be encoded as an Octet String containing a reference to a pre-configured Forwarding Policy in the UP function, with a maximum length of 255 octets.",
      "chunk_type": "requirement",
      "cross_references": [
        "figure_8.2.23-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.24",
      "section_id": "8.2.24",
      "section_title": "Destination Interface",
      "content": "The Destination Interface IE type shall be encoded as shown in Figure 8.2.24-1. It indicates the type of the interface towards which an outgoing packet is sent.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 42 (decimal)\n3 to 4\nLength = n\n5\nSpare\nInterface value\n6 to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.24-1: Destination Interface\nThe Interface value shall be encoded as a 4 bits binary integer as specified in Table 8.2.24-1.\nTable 8.2.24-1: Interface value\nInterface value\nValues (Decimal)\nAccess (NOTE 1, NOTE 3, NOTE 4)\n0\nCore (see NOTE 1)\n1\nSGi-LAN/N6-LAN\n2\nCP- Function\n3\nLI Function (see NOTE 2)\n4\n5G VN Internal\n5\nSpare\n6 to 15\nNOTE 1:\tThe \"Access\" and \"Core\" values denote a downlink and uplink traffic direction respectively.\nNOTE 2:\tLI Function may denote an SX3LIF or an LMISF. See clause 5.7.\nNOTE 3:\tFor indirect data forwarding, the Source Interface in the PDR and the Destination Interface in the FAR shall both be set to \"Access\", in the forwarding SGW(s). The Interface value does not infer any traffic direction, in PDRs and FARs set up for indirect data forwarding, i.e. with both the Source and Destination Interfaces set to Access.\nNOTE 4:\tFor a HTTP redirection, the Source Interface in the PDR to match the uplink packets to be redirected and the Destination Interface in the FAR to enable the HTTP redirection shall both be set to \"Access\".",
      "chunk_type": "requirement",
      "cross_references": [
        "clause_5.7",
        "table_8.2.24-1",
        "figure_8.2.24-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.25",
      "section_id": "8.2.25",
      "section_title": "UP Function Features",
      "content": "The UP Function Features IE indicates the features supported by the UP function. It is coded as depicted in Figure 8.2.25-1.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 43 (decimal)\n3 to 4\nLength = n\n5 to 6\nSupported-Features\n7 to 8\nAdditional Supported-Features 1\n9 to 10\nAdditional Supported-Features 2\n11 to 12\nAdditional Supported-Features 3\n13 to 14\nAdditional Supported-Features 4\n15 to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.25-1: UP Function Features\nThe UP Function Features IE takes the form of a bitmask where each bit set indicates that the corresponding feature is supported. Spare bits shall be ignored by the receiver. The same bitmask is defined for all PFCP interfaces.\nThe following table specifies the features defined on PFCP interfaces and the interfaces on which they apply.\nTable 8.2.25-1: UP Function Features\nFeature Octet / Bit\nFeature\nInterface\nM/O\nDescription\n5/1\nBUCP\nSxa, N4\nO\n(NOTE 2)\nDownlink Data Buffering in CP function is supported by the UP function.\n5/2\nDDND\nSxa, N4\nO\nThe buffering parameter 'Downlink Data Notification Delay' is supported by the UP function.\n5/3\nDLBD\nSxa, N4\nO\nThe buffering parameter 'DL Buffering Duration' in PFCP Session Report Response is supported by the UP function.\n5/4\nTRST\nSxb, Sxc, N4\nO\nTraffic Steering is supported by the UP function.\n5/5\nFTUP\nSxa, Sxb, N4\nM\nF-TEID allocation / release in the UP function is supported by the UP function.\n5/6\nPFDM\nSxb, Sxc, N4\nO\nThe PFD Management procedure is supported by the UP function.\n5/7\nHEEU\nSxb, Sxc, N4\nO\nHeader Enrichment of Uplink traffic is supported by the UP function.\n5/8\nTREU\nSxb, Sxc, N4\nO\n(NOTE 3)\nTraffic Redirection Enforcement in the UP function is supported by the UP function.\n6/1\nEMPU\nSxa, Sxb, N4\nM\nSending of End Marker packets supported by the UP function.\n6/2\nPDIU\nSxa, Sxb, Sxc, N4, N4mb\nO\n(NOTE 4)\nSupport of PDI optimised signalling in UP function (see clause 5.2.1A.2).\n6/3\nUDBC\nSxb, Sxc, N4\nO\nSupport of UL/DL Buffering Control\n6/4\nQUOAC\nSxb, Sxc, N4\nO\nThe UP function supports being provisioned with the Quota Action to apply when reaching quotas.\n6/5\nTRACE\nSxa, Sxb, Sxc, N4\nO\nThe UP function supports Trace (see clause 5.15).\n6/6\nFRRT\nSxb, N4\nO\nThe UP function supports Framed Routing (see IETF RFC 2865 [37] and IETF RFC 3162 [38]).\n6/7\nPFDE\nSxb, N4\nO\nThe UP function supports a PFD Contents including a property with multiple values.\n6/8\nEPFAR\nSxa, Sxb, Sxc, N4\nO\nThe UP function supports the Enhanced PFCP Association Release feature (see clause 5.18).\n7/1\nDPDRA\nSxb, Sxc, N4\nO\nThe UP function supports Deferred PDR Activation or Deactivation.\n7/2\nADPDP\nSxa, Sxb, Sxc, N4\nO\nThe UP function supports the Activation and Deactivation of Pre-defined PDRs (see clause 5.19).\n7/3\nUEIP\nSxb, N4\nO\n(NOTE 5)\nThe UP function supports allocating UE IP addresses or prefixes (see clause 5.21).\n7/4\nSSET\nN4, N4mb\nO\n(MB-)UPF support of PFCP sessions successively controlled by different (MB-)SMFs of a same (MB-)SMF Set (see clause 5.22).\n7/5\nMNOP\nSxa, Sxb, Sxc, N4\nO\nThe UP function supports measurement of number of packets which is instructed with the flag 'Measurement of Number of Packets' in a URR. See also clause 5.2.2.2.1.\n7/6\nMTE\nN4\nO\nUPF supports multiple instances of Traffic Endpoint IDs in a PDI.\n7/7\nBUNDL\nSxa, Sxb, Sxc, N4, N4mb\nO\nPFCP messages bundling (see clause 6.5) is supported by the UP function.\n7/8\nGCOM\nN4\nO\nUPF support of 5G VN Group Communication. (See clause 5.23)\n8/1\nMPAS\nN4, N4mb\nO\n(MB-)UPF support for multiple PFCP associations to the (MB-)SMFs in an (MB-)SMF set (see clause 5.22.3).\n8/2\nRTTL\nN4\nO\nUPF supports redundant transmission at transport layer.\n8/3\nVTIME\nSxb,N4\nO\nUP function support of quota validity time feature.\n8/4\nNORP\nSxa, Sxb, Sxc, N4\nO\nUP function support of Number of Reports as specified in clause 5.2.2.2.\n8/5\nIPTV\nN4\nO\nUPF support of IPTV service (see clause 5.25)\n8/6\nIP6PL\nN4\nO\nUPF supports:\n-\tUE IPv6 address(es) allocation with IPv6 prefix length other than default /64 (including allocating /128 individual IPv6 addresses), as specified in clause 4.6.2.2 of of 3GPP TS 23.316 [57]; and\n-\tmultiple UE IPv6 addresses allocation using multiple instances of the UE IP Address IE in a same PDI or Traffic Endpoint, or using multiple PDIs or Traffic Endpoints with a different UE IP Address as specified in clause 5.21.1.\n8/7\nTSN\nN4\nO\nIntegration of 5GS into a TSN data network is supported by the UPF (see clause 5.26.1).\n8/8\nMPTCP\nN4\nO\nUPF support of MPTCP Proxy functionality (see clause 5.20)\n9/1\nATSSS-LL\nN4\nO\nUPF support of ATSSS-LL steering functionality (see clause 5.20)\n9/2\nQFQM\nN4\nO\nUPF support of per QoS flow per UE QoS monitoring for packet delay (see clause 5.24.4).\n9/3\nGPQM\nN4\nO\nUPF support of per GTP-U Path QoS monitoring (see clause 5.24.5).\n9/4\nMT-EDT\nSxa\nO\nSGW-U support of reporting the size of DL Data Packets. (see clause 5.2.4.1).\n9/5\nCIOT\nSxb, N4\nO\nUP function support of CIoT feature, e.g. small data packet rate enforcement. (see 5.4.15)\n9/6\nETHAR\nN4\nO\nUPF support of Ethernet PDU Session Anchor Relocation (see clause 5.13.6).\n9/7\nDDDS\nN4\nO\nUPF support of reporting the first buffered / first discarded downlink data after buffering / directly dropped downlink data for downlink data delivery status notification.\n9/8\nRDS\nSxb, N4\nO\nUP function support of Reliable Data Service (see clause 5.29).\n10/1\nRTTWP\nN4\nO\nUPF support of RTT measurements towards the UE Without PMF.\n10/2\nQUASF\nSxb, Sxc, N4\nO\nThe UP function supports being provisioned in a URR with an Exempted Application ID for Quota Action or an Exempted SDF Filter for Quota Action which is to be used when the quota is exhausted. See also clauses 5.2.2.2.1 and 5.2.2.3.1.\n10/3\nNSPOC\nSxa, Sxb, N4\nO\nUP function supports notifying start of Pause of Charging via user plane.\n10/4\nL2TP\nSxb, N4\nO\nUP function supports the L2TP feature as described in clause 5.31.\n10/5\nUPBER\nN4\nO\nUP function supports the uplink packets buffering during EAS relocation.\n10/6\nRESPS\nSxb, N4\nO\nUP function supports Restoration of PFCP Sessions associated with one or more PGW-C/SMF FQ-CSID(s), Group Id(s) or CP IP address(es) (see clause 5.22.4)\n10/7\nIPREP\nN4\nO\nUP function supports IP Address and Port number replacement (see clauses 5.33.3, 5.33.4 and 5.33.6).\n10/8\nDNSTS\nN4\nO\nUP function support DNS Traffic Steering based on FQDN in the DNS Query message (see clause 5.33.4)\n11/1\nDRQOS\nN4\nO\nUP function supports Direct Reporting of QoS monitoring events to Local NEF or AF (see clause 5.33.5).\n11/2\nMBSN4\nN4\nO\nUPF supports sending MBS multicast session data to associated PDU sessions using 5GC individual delivery.\n11/3\nPSUPRM\nN4, N4mb\nO\nUP function supports Per Slice UP Resource Management (see clause 5.35).\n11/4\nEPPPI\nN4\nO\nUP function supports Enhanced Provisioning of Paging Policy Indicator feature as specified in clause 5.36.2.\n11/5\nRATP\nSxb, N4\nO\nUP function supports Redirection Address Types set to \"Port\", \"IPv4 address and Port\", \"IPv6 address and Port\", or \"IPv4 and IPv6 addresses and Port\".\n11/6\nUPIDP\nN4\nO\nUP function supports User Plane Inactivity Detection and reporting per PDR feature as specified in clause 5.11.3.\n11/7\nAFSFC\nN4\nO\nUP function supports inserting metadata when Application Function influence on Service Function Chaining is used as specified in clause 5.4.8.\n11/8\nMPQUIC\nN4\nO\nUPF support of MPQUIC Proxy functionality (see clause 5.20).\n12/1\nREDSM\nN4\nO\nUP function supports the Redundant Steering Mode (see clause 5.32.8 of 3GPP TS 23.501 [28] and clause 5.2.7.1)\n12/2\nDBDM\nSxa, N4\nO\nThe buffering parameters 'DL Buffering Duration' and 'DL Buffering Suggested Packet Count' in PFCP Session Modification Request are supported by the UP function.\n12/3\nTSCTS\nN4\nO\nAF requested support of Time Synchronization and/or Time Sensitive Communication is supported by the UP function (see clause 5.26.1).\n12/4\nDRTSC\nN4\nO\nUP function supports Direct Reporting of TSC management information events to TSN AF or TSCTSF (see clause 5.26.3.2).\n12/5\nN6JEDB\nN4\nO\nUPF support of N6 Jitter, DL Periodicity and UL Periodicity Measurement and Reporting, and End of Data Burst marking as specified in clause 5.38.4.\n12/6\nQMCON\nN4\nO\nUPF support of QoS monitoring of Congestion information (see clause 5.39.3.3).\n12/7\nDETNET\nN4\nO\nDeterministic Networking is supported by the UP function (see clause 5.26.1).\n12/8\nEML4S\nN4\nO\nUP function supports ECN Marking for L4S (see clause 5.38.1).\n13/1\nPDUSM\nN4\nO\nUP function supports PDU Set Marking (see clause 5.38.3).\n13/2\nCN-TL\nN4\nO\nUPF support of the TSN Talker and Listener (TL) functionality, i.e. CN-TL. See clause 5.26a.\n13/3\nQMDRM\nN4\nO\nUPF support of QoS monitoring of Data Rate Measurement (see clause 5.39.3.4).\n13/4\nEDBNC\nN4\nO\nUP function supports Extended DL Buffering Notification Control (see clause 5.2.4.1).\n13/5\nMT-SDT\nN4\nO\nUPF support of reporting the size of DL Data Packets per QoS flow (see clause 5.2.4.1).\n13/6\nUPSBIES\nN4\nO\nUPF support of event subscription via Service Based Interface. (See clause 5.40).\n13/7\nUMN6IP\nN4\nO\nUPF supports to allocate a mapped N6 IP address and perform IP replacement as described in clause 5.33.7.\n13/8\nUN6TU\nN4\nO\nUPF supports N6 tunnelling using N6 routing information as described in clause 5.33.7.\n14/1\nMBSCH\nN4mb\nO\nMB-UPF support of MBS charging (see clause 5.34.2.5)\n15/3\nULM\nN4\nO\nUE Level measurement (see clause 5.15A)\nNOTE 1:\tFeatures are defined as follows:\n- Feature Octet / Bit: The octet and bit number within the Supported-Features IE, e.g. \"5 / 1\".\n- Feature: A short name that can be used to refer to the octet / bit and to the feature.\n- Interface: A list of applicable interfaces to the feature.\n- M/O: Defines if the implementation of the feature is mandatory (\"M\") or optional (\"O\") for a UP function complying with this release of the specification.A feature defined as mandatory in this release of the specification may not necessarily be defined or mandatory to support in earlier releases (see the respective specifications), therefore a CP function complying with this release of the specification shall be prepared to receive a UP Function Features IE with a mandatory feature bit set to \"0\".\n- Description: A clear textual description of the feature.\nNOTE 2:\tDownlink data should be buffered preferably in the UP function. Downlink data may be buffered in the CP function when desired, e.g. for UEs using power saving methods.\nNOTE 3:\tIf the traffic that the UP function can support may be subject to traffic redirection, traffic redirection enforcement in the UP function shall be supported by the UP function.\nNOTE 4:\tCP and UP functions complying with this release of the specification should support this feature.\nNOTE 5:\tA UPF that supports the SSET or MPAS feature shall support this feature.",
      "chunk_type": "general",
      "cross_references": [
        "clause_5.2.1",
        "clause_5.15",
        "clause_5.18",
        "clause_5.19",
        "clause_5.21",
        "clause_5.22",
        "clause_5.2.2.2.1",
        "clause_6.5",
        "clause_5.23",
        "clause_5.22.3",
        "clause_5.2.2.2",
        "clause_5.25",
        "ts_23.316_clause_4.6.2.2",
        "clause_5.21.1",
        "clause_5.26.1",
        "clause_5.20",
        "clause_5.24.4",
        "clause_5.24.5",
        "clause_5.2.4.1",
        "clause_5.13.6",
        "clause_5.29",
        "clause_5.31",
        "clause_5.22.4",
        "clause_5.33.4",
        "clause_5.33.5",
        "clause_5.35",
        "clause_5.36.2",
        "clause_5.11.3",
        "clause_5.4.8",
        "ts_23.501_clause_5.32.8",
        "ts_23.501_clause_5.2.7.1",
        "clause_5.26.3.2",
        "clause_5.38.4",
        "clause_5.39.3.3",
        "clause_5.38.1",
        "clause_5.38.3",
        "clause_5.26",
        "clause_5.39.3.4",
        "clause_5.40",
        "clause_5.33.7",
        "clause_5.34.2.5",
        "table_8.2.25-1",
        "figure_8.2.25-1",
        "ts_23.316",
        "ts_23.501"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.26",
      "section_id": "8.2.26",
      "section_title": "Apply Action",
      "content": "The Apply Action IE indicates the action(s) the UP function is required to apply to packets. It is coded as shown in Figure 8.2.26-1.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 44 (decimal)\n3 to 4\nLength = n\n5\nDFRT\nIPMD\nIPMA\nDUPL\nNOCP\nBUFF\nFORW\nDROP\n6\nSpare\nMBSU\nFSSM\nDDPN\nBDPN\nEDRT\n7 to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.26-1: Apply Action\nThe octet 5 shall be encoded as follows:\n-\tBit 1 – DROP (Drop): when set to \"1\", this indicates a request to drop the packets.\n-\tBit 2 – FORW (Forward): when set to \"1\", this indicates a request to forward the packets.\n-\tBit 3 – BUFF (Buffer): when set to \"1\", this indicates a request to buffer the packets.\n-\tBit 4 – NOCP (Notify the CP function): when set to \"1\", this indicates a request to notify the CP function about the arrival of a first downlink packet being buffered.\n-\tBit 5 – DUPL (Duplicate): when set to \"1\", this indicates a request to duplicate the packets.\n-\tBit 6 – IPMA (IP Multicast Accept): used for IPTV; when set to \"1\", this indicates a request to accept UE requests to join an IP multicast group.\n-\tBit 7 – IPMD (IP Multicast Deny): used for IPTV; when set to \"1\", this indicates a request to deny UE requests to join an IP multicast group.\n-\tBit 8 – DFRT (Duplicate for Redundant Transmission): used for URLLC; when set to \"1\", this indicates a request to duplicate the packets for redundant transmission (see clause 5.24.2).\nThe octet 6 shall be encoded as follows:\n-\tBit 1 – EDRT (Eliminate Duplicate Packets for Redundant Transmission): used for URLLC; when set to \"1\", this indicates a request to eliminate duplicate packets used for redundant transmission (see clause 5.24.2).\n-\tBit 2 – BDPN (Buffered Downlink Packet Notification): used for DDDS; when set to \"1\", this indicates a request to notify the CP function about the first buffered DL packet for downlink data delivery status notification (see clause 5.28).\n-\tBit 3 – DDPN (Discarded Downlink Packet Notification): used for DDDS; when set to \"1\", this indicates a request to notify the CP function about the first discarded DL packet for downlink data delivery status notification if the DL Buffering Duration or DL Buffering Suggested Packet Count is exceeded or it is discarded directly. See clause 5.2.3.1 and 5.28.\n-\tBit 4 - FSSM (Forward packets to lower layer SSM): used for 5MBS; when set to \"1\", this indicates a request to the MB-UPF to forward MBS session data towards a low layer SSM address allocated by the MB-UPF using multicast transport (see clause 5.34.2).\n-\tBit 5 – MBSU (Forward and replicate MBS data using Unicast transport): used for 5MBS; when set to \"1\", this indicates a request to forward and replicate MBS session data towards multiple remote GTP-U peers using unicast transport(see clause 5.34.2).\n-\tBit 6 to 8 – Spare, for future use and seto to \"0\".\nOne and only one of the DROP, FORW, BUFF, IPMA, IPMD and (FFSM and/or MBSU) flags shall be set to \"1\". Both the MBSU flag and the FSSM flag may be set to \"1\" (to require the MB-UPF to forward MBS session data using both multicast and unicast transports).\nThe NOCP flag and BDPN flag may only be set if the BUFF flag is set.\nThe DUPL flag may be set with any of the DROP, FORW, BUFF and NOCP flags.\nThe DFRN flag may only be set if the FORW flag is set.\nThe EDRT flag may be set if the FORW flag is set.\nThe DDPN flag may be set with any of the DROP and BUFF flags.",
      "chunk_type": "general",
      "cross_references": [
        "clause_5.24.2",
        "clause_5.28",
        "clause_5.2.3.1",
        "clause_5.34.2",
        "figure_8.2.26-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.27",
      "section_id": "8.2.27",
      "section_title": "Downlink Data Service Information",
      "content": "The Downlink Data Service Information IE is used to carry downlink data service information. It is coded as shown in Figure 8.2.27-1.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 45 (decimal)\n3 to 4\nLength = n\n5\nSpare\nDLPSI\nQFII\nPPI\nm\nSpare\nPaging Policy Indication value\np\nSpare\nQFI\nq to (q+1)\nDL Data Packets Size\nr to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.27-1: Downlink Data Service Information\nThe PPI flag in octet 5 indicates whether the Paging Policy Indication value in octet \"m\" shall be present. If PPI is set to \"1\", then the Paging Policy Indication value shall be present. If PPI is set to \"0\", then octet \"m\" shall not be present.\nThe Paging Policy Indication value, in octet \"m\", shall be encoded as the DSCP in TOS (IPv4) or TC (IPv6) information received in the IP payload of the GTP-U packet from the PGW (see IETF RFC 2474 [13]).\nThe QFII flag in octet 5 indicates whether the QFI value in octet \"p\" shall be present. If QFII is set to \"1\", then the QFI value shall be present. If QFII is set to \"0\", then octet \"p\" shall not be present.\nThe QFI value, in octet \"p\", shall be encoded as the octet 5 of the QFI IE in clause 8.2.89.\nThe DLPSI flag in octet 5 indicates whether the DL Data Packets Size value in octets \"q\" to \"q+1\" shall be present. If the DLPSI flag is set to \"1\", then the DL Data Packets Size value shall be present. If the DLPSI flag is set to \"0\", then octets \"q\" to \"q+1\" shall not be present.\nThe DL Data Packets Size value, in octets \"q\" to \"q+1\", shall be encoded as an Unsigned16 binary integer value.",
      "chunk_type": "general",
      "cross_references": [
        "clause_8.2.89",
        "figure_8.2.27-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.28",
      "section_id": "8.2.28",
      "section_title": "Downlink Data Notification Delay",
      "content": "The Downlink Data Notification Delay IE indicates the delay the UP function shall apply between receiving a downlink data packet and notifying the CP function about the arrival of the packet. It is coded as depicted in Figure 8.2.28-1.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 46 (decimal)\n3 to 4\nLength = n\n5\nDelay Value in integer multiples of 50 millisecs, or zero\n6 to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.28-1: Downlink Data Notification Delay\nDelay Value shall be set to zero in order to clear a previously set delay condition.",
      "chunk_type": "requirement",
      "cross_references": [
        "figure_8.2.28-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.29",
      "section_id": "8.2.29",
      "section_title": "DL Buffering Duration",
      "content": "The DL Buffering Duration IE indicates the duration during which the UP function is requested to buffer the downlink data packets. It is coded as shown in figure 8.2.29-1 and table 8.2.29.1.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 47 (decimal)\n3 to 4\nLength = n\n5\nTimer unit\nTimer value\n6 to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.29-1: DL Buffering Duration\nTable 8.2.29.1: DL Buffering Duration\nTimer value\nBits 5 to 1 represent the binary coded timer value.\nTimer unit\nBits 6 to 8 defines the timer value unit as follows:\nBits\n8 7 6\n0 0 0  value is incremented in multiples of 2 seconds\n0 0 1  value is incremented in multiples of 1 minute\n0 1 0  value is incremented in multiples of 10 minutes\n0 1 1  value is incremented in multiples of 1 hour\n1 0 0  value is incremented in multiples of 10 hours\n1 1 1  value indicates that the timer is infinite\nOther values shall be interpreted as multiples of 1 minute in this version of the protocol.\nTimer unit and Timer value both set to all \"zeros\" shall be interpreted as an indication that the timer is stopped.",
      "chunk_type": "general",
      "cross_references": [
        "table_8.2.29.1",
        "figure_8.2.29-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.30",
      "section_id": "8.2.30",
      "section_title": "DL Buffering Suggested Packet Count",
      "content": "The DL Buffering Suggested Packet Count IE indicates the maximum number of downlink data packets suggested to be buffered in the UP function for this PFCP session. It is coded as depicted in Figure 8.2.30-1.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 48 (decimal)\n3 to 4\nLength = n\n5 to n+4\nPacket Count Value\nFigure 8.2.30-1: DL Buffering Suggested Packet Count\nThe Packet Count value is encoded with the number of octets defined in the Length field, e.g. when n=2, the range of the Packet Count value is from 0 to 65535.\nThe length shall be set to \"1\" or \"2\" octets.",
      "chunk_type": "general",
      "cross_references": [
        "figure_8.2.30-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.31",
      "section_id": "8.2.31",
      "section_title": "PFCPSMReq-Flags",
      "content": "The PFCPSMReq-Flags IE indicates flags applicable to the PFCP Session Modification Request message. It is coded as depicted in Figure 8.2.31-1.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 49 (decimal)\n3 to 4\nLength = n\n5\nSpare\nHRSBOM\nDETEID\nRUMUC\nSUMPC\nQAURR\nSNDEM\nDROBU\n6 to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.31-1: PFCPSMReq-Flags\nThe following bits within Octet 5 shall indicate:\n-\tBit 1 – DROBU (Drop Buffered Packets): if this bit is set to \"1\", it indicates that the UP function shall drop all the packets currently buffered for the PFCP session, if any, prior to further applying the action specified in the Apply Action value of the FARs.\n-\tBit 2 – SNDEM (Send End Marker Packets): if this bit is set to \"1\", it indicates that the UP function shall construct and send End Marker packets towards the old F-TEID of the downstream node when switching to the new F-TEID.\n-\tBit 3 – QAURR (Query All URRs): if this bit is set to \"1\", it indicates that the UP function shall return immediate usage report(s) for all the URRs previously provisioned for this PFCP session.\n-\tBit 4 -\tSUMPC (Stop of Usage Measurement to Pause Charging): if this bit is set to \"1\", it indicates that the UP function shall stop the usage measurement for all URRs with the \"ASPOC\" flag set to \"1\".\n-\tBit 5 -\tRUMUC (Resume of Usage Measurement to Un-pause of Charging): if this bit is set to \"1\", it indicates that the UP function shall resume the usage measurement for all URRs with the \"ASPOC\" flag set to \"1\".\n-\tBit 6 -\tDETEID (Delete All DL N3mb and/or N19mb F-TEIDs): if this bit is set to \"1\", it indicates that the MB-UPF shall delete all NG-RAN N3mb DL F-TEIDs and all UPF N19mb DL F-TEIDs which were provisioned in Add MBS Unicast Parameters IEs for the MBS session (see clause 5.34.2.4).\n-\tBit 7 – HRSBOM (HR-SBO Mode): if this bit is set to \"1\" at the V-UPF acting as Local PSA in the VPLMN, it indicates that the PDU session is working in HR-SBO mode.\n-\tBit 8 – Spare, for future use, shall be set to\"0\" by the sender and discarded by the receiver.\nBits 4 and 5 shall not be set both to \"1\".",
      "chunk_type": "general",
      "cross_references": [
        "clause_5.34.2.4",
        "figure_8.2.31-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.32",
      "section_id": "8.2.32",
      "section_title": "PFCPSRRsp-Flags",
      "content": "The PFCPSRRsp-Flags IE indicates flags applicable to the PFCP Session Report Response message. It is coded as depicted in Figure 8.2.32-1.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 50 (decimal)\n3 to 4\nLength = n\n5\nSpare\nSpare\nSpare\nSpare\nSpare\nSpare\nSpare\nDROBU\n6 to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.32-1: PFCPSRRsp-Flags\nThe following bits within Octet 5 shall indicate:\n-\tBit 1 – DROBU (Drop Buffered Packets): if this bit is set to \"1\", it indicates that the UP function shall drop all the packets currently buffered for the PFCP session, if any, prior to further applying the action specified in the Apply Action value of the FARs.\n-\tBit 2 to 8 – Spare, for future use, shall be set to \"0\" by the sender and discarded by the receiver.",
      "chunk_type": "general",
      "cross_references": [
        "figure_8.2.32-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.33",
      "section_id": "8.2.33",
      "section_title": "Sequence Number",
      "content": "The Sequence Number IE shall be encoded as shown in Figure 8.2.33-1. It contains an Unsigned32 binary integer value.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 52 (decimal)\n3 to 4\nLength = n\n5 to 8\nSequence Number\nFigure 8.2.33-1: Sequence Number",
      "chunk_type": "requirement",
      "cross_references": [
        "figure_8.2.33-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.34",
      "section_id": "8.2.34",
      "section_title": "Metric",
      "content": "The Metric IE shall be encoded as shown in Figure 8.2.34-1. It indicates a percentage and may take binary coded integer values from and including 0 up to and including 100. Other values shall be considered as 0.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 53 (decimal)\n3 to 4\nLength = n\n5\nMetric\nFigure 8.2.34-1: Metric",
      "chunk_type": "requirement",
      "cross_references": [
        "figure_8.2.34-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.35",
      "section_id": "8.2.35",
      "section_title": "Timer",
      "content": "The purpose of the Timer IE is to specify specific timer values. The Timer IE shall be encoded as shown in Figure 8.2.35-1 and table 8.2.35.1.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 55 (decimal)\n3 to 4\nLength = n\n5\nTimer unit\nTimer value\n6 to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.35-1: Timer\nTable 8.2.35.1: Timer information element\nTimer value\nBits 5 to 1 represent the binary coded timer value.\nTimer unit\nBits 6 to 8 defines the timer value unit for the timer as follows:\nBits\n8 7 6\n0 0 0  value is incremented in multiples of 2 seconds\n0 0 1  value is incremented in multiples of 1 minute\n0 1 0  value is incremented in multiples of 10 minutes\n0 1 1  value is incremented in multiples of 1 hour\n1 0 0  value is incremented in multiples of 10 hours\n1 1 1  value indicates that the timer is infinite\nOther values shall be interpreted as multiples of 1 minute in this version of the protocol.\nTimer unit and Timer value both set to all \"zeros\" shall be interpreted as an indication that the timer is stopped.",
      "chunk_type": "requirement",
      "cross_references": [
        "table_8.2.35.1",
        "figure_8.2.35-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.36",
      "section_id": "8.2.36",
      "section_title": "Packet Detection Rule ID (PDR ID)",
      "content": "The PDR ID IE is coded as depicted in Figure 8.2.36-1.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 56 (decimal)\n3 to 4\nLength = n\n5 to 6\nRule ID\n7to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.36-1: PDR ID\nOctets 5 to 6 contain the Rule ID and shall be encoded as an integer.",
      "chunk_type": "general",
      "cross_references": [
        "figure_8.2.36-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.37",
      "section_id": "8.2.37",
      "section_title": "F-SEID",
      "content": "F-SEID is coded as depicted in Figure 8.2.37-1.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 57 (decimal)\n3 to 4\nLength = n\n5\nSpare\nSpare\nSpare\nSpare\nSpare\nSpare\nV4\nV6\n6 to 13\nSEID\nm to (m+3)\nIPv4 address\np to (p+15)\nIPv6 address\nk to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.37-1: F-SEID\nThe following flags are coded within Octet 5:\n-\tBit 1 – V6: If this bit is set to \"1\", then IPv6 address field shall be present in the F-SEID, otherwise the IPv6 address field is not present at all.\n-\tBit 2 – V4: If this bit is set to \"1\", then IPv4 address field shall be present in the F-SEID, otherwise the IPv4 address field is not present at all.\n-\tBit 3 to 8 are spare and reserved for future use.\nAt least one of V4 and V6 shall be set to \"1\", and both may be set to \"1\".\nOctets \"m to (m+3)\" and/or \"p to (p+15)\" (IPv4 address / IPv6 address fields), if present, contain respective address values.",
      "chunk_type": "general",
      "cross_references": [
        "figure_8.2.37-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.38",
      "section_id": "8.2.38",
      "section_title": "Node ID",
      "content": "The Node ID IE shall contain an FQDN or an IPv4/IPv6 address. It shall be encoded as shown in Figure 8.2.38-1.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 60 (decimal)\n3 to 4\nLength = n\n5\nSpare\nNode ID Type\n6 to o\nNode ID value\nm to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.38-1: Node ID\nNode ID Type indicates the type of the Node ID value. It shall be encoded as a 4 bits binary integer as specified in Table8.2.38-2.\nTable 8.2.38-2: Node ID Type\nNode ID Type Value (Decimal)\nNode ID Type\n0\nIPv4 address\n1\nIPv6 address\n2\nFQDN\n3 to 15\nSpare, for future use.\nIf the Node ID Type is set to an IPv4 address, then the Node ID value length shall be 4 Octets.\nIf the Node ID Type is set to an IPv6 address, then the Node ID value length shall be 16 Octets.\nIf the Node ID Type is set to an FQDN, then the Node ID value encoding shall be identical to the encoding of a FQDN within a DNS message of clause 3.1 of IETF RFC 1035 [27] but excluding the trailing zero byte.\nNOTE 1:\tThe FQDN field in the IE is not encoded as a dotted string as commonly used in DNS master zone files.",
      "chunk_type": "requirement",
      "cross_references": [
        "clause_3.1",
        "table_8.2.38-2",
        "figure_8.2.38-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.39",
      "section_id": "8.2.39",
      "section_title": "PFD Contents",
      "content": "The PFD Contents IE type shall be encoded as shown in Figure 8.2.39-1. It contains the description of a PFD.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 61 (decimal)\n3 to 4\nLength = n\n5\nADNP\nAURL\nAFD\nDNP\nCP\nDN\nURL\nFD\n6\nSpare\nm to (m+1)\nLength of Flow Description\n(m+2) to p\nFlow Description\nq to (q+1)\nLength of URL\n(q+2) to r\nURL\ns to (s+1)\nLength of Domain Name\n(s+2) to t\nDomain Name\nu to (u+1)\nLength of Custom PFD Content\n(u+2) to v\nCustom PFD Content\nw to (w+1)\nLength of Domain Name Protocol\n(w+2) to x\nDomain Name Protocol\ny to (y+1)\nLength of Additional Flow Description\n(y+2) to z\nAdditional Flow Description\na to (a+1)\nLength of Additional URL\n(a+2) to b\nAdditional URL\nc to (c+1)\nLength of Additional Domain Name and Domain Name Protocol\n(c+2) to d\nAdditional Domain Name and Domain Name Protocol\ne to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.39-1: PFD Contents\nThe following flags are coded within Octet 5 in the Figure 8.2.39-1:\n-\tBit 1 – FD (Flow Description): If this bit is set to \"1\", then the Length of Flow Description and the Flow Description fields shall be present, otherwise they shall not be present.\n-\tBit 2 – URL (URL): If this bit is set to \"1\", then the Length of URL and the URL fields shall be present, otherwise they shall not be present.\n-\tBit 3 – DN (Domain Name): If this bit is set to \"1\", then the Length of Domain Name and the Domain Name fields shall be present, otherwise they shall not be present.\n-\tBit 4 – CP (Custom PFD Content): If this bit is set to \"1\", then the Length of Custom PFD Content and the Custom PFD Content fields shall be present, otherwise they shall not be present.\n-\tBit 5 – DNP (Domain Name Protocol): If this bit is set to \"1\", then the Length of Domain Name Protocol and the Domain Name Protocol shall be present, otherwise they shall not be present; and if this bit is set to \"1\", the Length of Domain Name and the Domain Name fields shall also be present.\n-\tBit 6 – AFD (Additional Flow Description): If this bit is set to \"1\", the Length of Additional Flow Description and the Additional Flow Description field shall be present, otherwise they shall not be present.\n-\tBit 7 – AURL (Additional URL): If this bit is set to \"1\", the Length of Additional URL and the Additional URL field shall be present, otherwise they shall not be present.\n-\tBit 8 – ADNP (Additional Domain Name and Domain Name Protocol): If this bit is set to \"1\", the Length of Additional Domain Name and Domain Name Protocol, and the Additional Domain Name and Domain Name Protocol field shall be present, otherwise they shall not be present.\nThe Flow Description field, when present, shall be encoded as an OctetString as specified in clause 6.4.3.7 of 3GPP TS 29.251 [21].\nThe Domain Name field, when present, shall be encoded as an OctetString as specified in clause 6.4.3.9 of 3GPP TS 29.251 [21].\nThe URL field, when present, shall be encoded as an OctetString as specified in clause 6.4.3.8 of 3GPP TS 29.251 [21].\nThe Domain Name Protocol field, when present, shall be encoded as an OctetString as specified in clause 6.4.3.9 of 3GPP TS 29.251 [21].\nAdditional instance(s) of the Flow Description shall be encoded as shown in Figure 8.2.39-2. The encoding of Flow Description 2, 3 up to m field are the same as the Flow Description field specified in clause 8.2.39.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n(y+2) to (y+3)\nLength of Flow Description 2\n(y+4) to i\nFlow Description 2\nj to (j+1)\nLength of Flow Description 3\n(j+2) to k\nFlowDescription 3\n...\nl to (l+1)\nLength of Flow Description m\n(l+2) to z\nFlow Description m\nFigure 8.2.39-2: Additional Flow Description field\nAdditional instance(s) of the URL shall be encoded as shown in Figure 8.2.39-3. The encoding of URL 2, 3 up to m fields are the same as the URL field.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n(a+2) to (a+3)\nLength of URL 2\n(a+4) to o\nURL 2\npa to (pa+1)\nLength of URL 3\n(pa+2) to pb\nURL 3\n...\npc to (pc+1)\nLength of URL m\n(pc+2) to b\nURL m\nFigure 8.2.39-3: Additional URL field\nAdditional instance(s) of the Domain Name and Domain Name Protocol shall be encoded as shown in Figure 8.2.39-4. The encoding of Domain Name 2, 3, up to m fields and Domain Name Protocol 2, 3 up to m fields are the same as the Domain Name field and Domain Name Protocol field respectively.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n(c+2) to (c+3)\nLength of Domain Name 2\n(c+4) to pd\nDomain Name 2\npe to (pe+1)\nLength of Domain Name Protocol 2\n(pe+2) to pf\nDomain Name Protocol 2\npg to (pg+1)\nLength of Domain Name 3\n(pg+2) to ph\nDomain Name 3\npi to (pi+1)\nLength of Domain Name Protocol 3\n(pi+2) + pj\nDomain Name Protocol 3\n...\npk to (pk+1)\nLength of Domain Name m\n(pk+2) to pl\nDomain Name m\npm to (pm+1)\nLength of Domain Name Protocol m\n(pm+2) to d\nDomain Name Protocol m\nFigure 8.2.39-4: Additional Domain Name and Domain Name Protocol field",
      "chunk_type": "requirement",
      "cross_references": [
        "ts_29.251_clause_6.4.3.7",
        "ts_29.251_clause_6.4.3.9",
        "ts_29.251_clause_6.4.3.8",
        "clause_8.2.39",
        "figure_8.2.39-1",
        "figure_8.2.39-2",
        "figure_8.2.39-3",
        "figure_8.2.39-4",
        "ts_29.251"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.40",
      "section_id": "8.2.40",
      "section_title": "Measurement Method",
      "content": "The Measurement Method IE shall be encoded as shown in Figure 8.2.40-1. It indicates the method for measuring the usage of network resources.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 62 (decimal)\n3 to 4\nLength = n\n5\nSpare\nSpare\nSpare\nSpare\nSpare\nEVENT\nVOLUM\nDURAT\n6 to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.40-1: Measurement Method\nOctet 5 shall be encoded as follows:\n-\tBit 1 – DURAT (Duration): when set to \"1\", this indicates a request for measuring the duration of the traffic.\n-\tBit 2 – VOLUM (Volume): when set to \"1\", this indicates a request for measuring the volume of the traffic.\n-\tBit 3 – EVENT (Event): when set to \"1\", this indicates a request for measuring the events.\n-\tBit 4 to 8: Spare, for future use and set to \"0\".\nAt least one bit shall be set to \"1\". Several bits may be set to \"1\".",
      "chunk_type": "requirement",
      "cross_references": [
        "figure_8.2.40-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.41",
      "section_id": "8.2.41",
      "section_title": "Usage Report Trigger",
      "content": "The Usage Report Trigger IE shall be encoded as shown in Figure 8.2.41-1. It indicates the trigger of the usage report.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 63 (decimal)\n3 to 4\nLength = n\n5\nIMMER\nDROTH\nSTOPT\nSTART\nQUHTI\nTIMTH\nVOLTH\nPERIO\n6\nEVETH\nMACAR\nENVCL\nMONIT\nTERMR\nLIUSA\nTIMQU\nVOLQU\n7\nSpare\nSpare\nUPINT\nEMRRE\nQUVTI\nIPMJL\nTEBUR\nEVEQU\n8 to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.41-1: Usage Report Trigger\nOctet 5 shall be encoded as follows:\n-\tBit 1 – PERIO (Periodic Reporting): when set to \"1\", this indicates a periodic report.\n-\tBit 2 – VOLTH (Volume Threshold): when set to \"1\", this indicates that the data volume usage reaches a volume threshold.\n-\tBit 3 – TIMTH (Time Threshold): when set to \"1\", this indicates that the time usage reaches a time threshold.\n-\tBit 4 – QUHTI (Quota Holding Time): when set to \"1\", this indicates that no packets have been received for a period exceeding the Quota Holding Time.\n-\tBit 5 – START (Start of Traffic): when set to \"1\", this indicates that the start of traffic is detected.\n-\tBit 6 – STOPT (Stop of Traffic): when set to \"1\", this indicates that the stop of traffic is detected.\n-\tBit 7 - DROTH (Dropped DL Traffic Threshold): when set to \"1\", this indicates that the DL traffic being dropped reaches a threshold.\n-\tBit 8 – IMMER (Immediate Report): when set to \"1\", this indicates an immediate report reported on CP function demand.\nOctet 6 shall be encoded as follows:\n-\tBit 1 – VOLQU (Volume Quota): when set to \"1\", this indicates that the Volume Quota has been exhausted.\n-\tBit 2 – TIMQU (Time Quota): when set to \"1\", this indicates that the Time Quota has been exhausted.\n-\tBit 3 - LIUSA (Linked Usage Reporting): when set to \"1\", this indicates a linked usage report, i.e. a usage report being reported for a URR due to a usage report being also reported for a linked URR (see clause 5.2.2.4).\n-\tBit 4 – TERMR (Termination Report): when set to \"1\", this indicates a usage report being reported (in a PFCP Session Deletion Response or a PFCP Session Report Request message) for a URR due to the termination of the PFCP session, or a usage report being reported (in a PFCP Session Modification Response or a PFCP Session Report Request message) for a URR due to the removal of the URR or dissociated from the last PDR.\n-\tBit 5 – MONIT (Monitoring Time): when set to \"1\", this indicates a usage report being reported for a URR due to the Monitoring Time being reached.\n-\tBit 6 – ENVCL (Envelope Closure): when set to \"1\", this indicates the usage report is generated for closure of an envelope (see clause 5.2.2.3).\n-\tBit 7 – MACAR (MAC Addresses Reporting): when set to \"1\", this indicates a usage report to report MAC (Ethernet) addresses used as source address of frames sent UL by the UE.\n-\tBits 8: EVETH (Event Threshold): when set to \"1\", this indicates a usage report is generated when an event threshold is reached.\nOctet 7 shall be encoded as follows:\n-\tBit 1 – EVEQU (Event Quota): when set to \"1\", this indicates that the Event Quota has been exhausted.\n-\tBit 2 – TEBUR (Termination By UP function Report): when set to \"1\", this indicates a usage report being reported for a URR due to the termination of the PFCP session which is initiated by the UP function.\n-\tBit 3 – IPMJL (IP Multicast Join/Leave): when set to \"1\", this indicates a usage report being reported for a URR due to the UPF adding or removing the PDU session to/from the DL replication tree associated with an IP multicast flow.\n-\tBit 4 – QUVTI (Quota Validity Time): when set to \"1\", this indicates a usage report being reported for a URR due to the quota validity timer expiry.\n-\tBit 5 – EMRRE (End Marker Reception REport): this indicates that the UP function has received End Marker from the old I-UPF. See clauses 4.2.3.2 and 4.23.4.3 in 3GPP TS 23.502 [29]).\n-\tBit 6 – UPINT (User Plane Inactivity Timer): when set to \"1\", this indicates that no packets have been received for a period exceeding the User Plane Inactivity Timer.\n-\tBit 7 to 8: Spare, for future use and set to \"0\".\nAt least one bit shall be set to \"1\". Several bits may be set to \"1\".",
      "chunk_type": "requirement",
      "cross_references": [
        "clause_5.2.2.4",
        "clause_5.2.2.3",
        "figure_8.2.41-1",
        "ts_23.502"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.42",
      "section_id": "8.2.42",
      "section_title": "Measurement Period",
      "content": "The Measurement Period IE contains the period, in seconds, for generating periodic usage reports or the periodic QoS monitoring reports, or the period used for detecting and reporting a QoS monitoring measurement failure. It shall be encoded as shown in Figure 8.2.42-1.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 64 (decimal)\n3 to 4\nLength = n\n5 to 8\nMeasurement Period\n9 to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.42-1: Measurement Period\nThe Measurement Period field shall be encoded as an Unsigned32 binary integer value.",
      "chunk_type": "general",
      "cross_references": [
        "figure_8.2.42-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.43",
      "section_id": "8.2.43",
      "section_title": "Fully qualified PDN Connection Set Identifier (FQ-CSID)",
      "content": "A fully qualified PDN Connection Set Identifier (FQ-CSID) identifies a set of PDN connections belonging to an arbitrary number of UEs on a SGW-C, PGW-C, SGW-U and PGW-U, or a set of PDU sessions belonging to an arbitrary number of UEs on a SMF or UPF. The FQ-CSID is supported on the Sxa, Sxb and N4 interfaces.\nThe size of CSID is two octets. The FQ-CSID is coded as follows:\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 65 (decimal)\n3 to 4\nLength = n\n5\nFQ-CSID Node-ID Type\nNumber of CSIDs= m\n6 to p\nNode-Address\n(p+1) to (p+2)\nFirst PDN Connection Set Identifier (CSID)\n(p+3) to (p+4)\nSecond PDN Connection Set Identifier (CSID)\n...\n...\nq to q+1\nm-th PDN Connection Set Identifier (CSID)\nq+2\nSpare\nNode Type\n(q+3) to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.43-1: FQ-CSID\nWhere FQ-CSID Node-ID Type values are:\n0\tindicates that Node-Address is a global unicast IPv4 address and p = 9.\n1\tindicates that Node-Address is a global unicast IPv6 address and p = 21.\n2\tindicates that Node-Address is a 4 octets long field with a 32 bit value stored in network order, and p= 9. The coding of the field is specified below:\n-\tMost significant 20 bits are the binary encoded value of (MCC * 1000 + MNC).\n-\tLeast significant 12 bits is a 12 bit integer assigned by an operator to an MME, SGW-C, SGW-U, PGW-C, PGW-U, ePDG, TWAN , SMF or UPF.\nOther values of Node-Address Type are reserved.\nValues of Number of CSID greater than 1 shall only be employed in the PFCP Session Deletion Request. The value 0 shall be used in a PFCP Session Modification Request, with the FQ-CSID Node-ID Type and Node-Address fields set to all zeros, and with the Node Type indicating one node type, to remove an FQ-CSID previously provisioned for the PFCP session for the related node type.\nNOTE:\tThe CP function can remove all the FQ-CSIDs for all node types provisioned in the UP function for a given PFCP session by sending a PFCP Session Modification Request with one FQ-CSID IE with a null length.\nThe node that creates the FQ-CSID (i.e. SGW-C for SGW-C FQ-CSID, PGW-C or SMF for PGW-C/SMF FQ‑CSID and PGW-U or SGW-U or UPF for PGW-U/SGW-U/UPF FQ‑CSID) needs to ensure that the Node-ID is globally unique and the CSID value is unique within that node.\nThe Node Type field in bits 1 to 4 of octet (q+2) shall be encoded as defined in Table 8.2.43-2. Bits 5 to 8 of octet (q+2) shall be set to zero by the sender and ignored by the receiver.\nTable 8.2.43-2: Node Type\nNode Type\nValue (Decimal)\nMME\n0\nSGW-C\n1\nPGW-C/SMF\n2\nePDG\n3\nTWAN\n4\nPGW-U/SGW-U/UPF\n5\nSpare, for future use.\n6-15",
      "chunk_type": "parameter",
      "cross_references": [
        "table_8.2.43-2",
        "figure_8.2.43-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.44",
      "section_id": "8.2.44",
      "section_title": "Volume Measurement",
      "content": "The Volume Measurement IE contains the measured traffic volumes. It shall be encoded as shown in Figure 8.2.44-1.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 66 (decimal)\n3 to 4\nLength = n\n5\nSpare\nDLNOP\nULNOP\nTONOP\nDLVOL\nULVOL\nTOVOL\nm to (m+7)\nTotal Volume\np to (p+7)\nUplink Volume\nq to (q+7)\nDownlink Volume\nr to (r+7)\nTotal Number of Packets\ns to (s+7)\nUplink Number of Packets\nt to (t+7)\nDownlink Number of Packets\nz to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.44-1: Volume Measurement\nThe following flags are coded within Octet 5:\n-\tBit 1 – TOVOL: If this bit is set to \"1\", then the Total Volume field shall be present, otherwise the Total Volume field shall not be present.\n-\tBit 2 – ULVOL: If this bit is set to \"1\", then the Uplink Volume field shall be present, otherwise the Uplink Volume field shall not be present.\n-\tBit 3 – DLVOL: If this bit is set to \"1\", then the Downlink Volume field shall be present, otherwise the Downlink Volume field shall not be present.\n-\tBit 4 – TONOP: If this bit is set to \"1\", then the Total Number of Packets field shall be present, otherwise the Total Number of Packets field shall not be present.\n-\tBit 5 – ULNOP: If this bit is set to \"1\", then the Uplink Number of Packets field shall be present, otherwise the Uplink Number of Packets field shall not be present.\n-\tBit 6 – DLNOP: If this bit is set to \"1\", then the Downlink Number of Packets field shall be present, otherwise the Downlink Number of Packets field shall not be present.\n-\tBit 7 to bit 8: Spare, for future use and set to \"0\".\nAt least one bit shall be set to \"1\". Several bits may be set to \"1\".\nThe Total Volume, Uplink Volume and Downlink Volume fields shall be encoded as an Unsigned64 binary integer value. They shall contain the total, uplink or downlink number of octets respectively.",
      "chunk_type": "requirement",
      "cross_references": [
        "figure_8.2.44-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.45",
      "section_id": "8.2.45",
      "section_title": "Duration Measurement",
      "content": "The Duration Measurement IE type shall be encoded as shown in Figure 8.2.45-1. It contains the used time in seconds.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 67 (decimal)\n3 to 4\nLength = n\n5 to 8\nDuration value\n9 to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.45-1: Duration Measurement\nThe Duration value shall be encoded as an Unsigned32 binary integer value.",
      "chunk_type": "requirement",
      "cross_references": [
        "figure_8.2.45-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.46",
      "section_id": "8.2.46",
      "section_title": "Time of First Packet",
      "content": "The Time of First Packet IE indicates the time stamp for the first IP packet transmitted for a given usage report. It shall be encoded as shown in Figure 8.2.46-1.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 69 (decimal)\n3 to 4\nLength = n\n5 to 8\nTime of First Packet\n9 to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.46-1: Time of First Packet\nThe Time of First Packet field shall contain a UTC time. Octets 5 to 8 shall be encoded in the same format as the first four octets of the 64-bit timestamp format as defined in clause 6 of IETF RFC 5905 [12].\nNOTE:\tThe encoding is defined as the time in seconds relative to 00:00:00 on 1 January 1900.",
      "chunk_type": "requirement",
      "cross_references": [
        "clause_6",
        "figure_8.2.46-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.47",
      "section_id": "8.2.47",
      "section_title": "Time of Last Packet",
      "content": "The Time of Last Packet IE indicates the time stamp for the last IP packet transmitted for a given usage report. It shall be encoded as shown in Figure 8.2.47-1.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 70 (decimal)\n3 to 4\nLength = n\n5 to 8\nTime of Last Packet\n9 to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.47-1: Time of Last Packet\nThe Time of Last Packet field shall contain a UTC time. Octets 5 to 8 shall be encoded in the same format as the first four octets of the 64-bit timestamp format as defined in clause 6 of IETF RFC 5905 [12].\nNOTE:\tThe encoding is defined as the time in seconds relative to 00:00:00 on 1 January 1900.",
      "chunk_type": "requirement",
      "cross_references": [
        "clause_6",
        "figure_8.2.47-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.48",
      "section_id": "8.2.48",
      "section_title": "Quota Holding Time",
      "content": "The Quota Holding Time IE type shall be encoded as shown in Figure 8.2.48-1. It contains the quota holding time in seconds.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 71 (decimal)\n3 to 4\nLength = n\n5 to 8\nQuota Holding Time value\n9 to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.48-1: Quota Holding Time\nThe Quota Holding Time value shall be encoded as an Unsigned32 binary integer value.",
      "chunk_type": "requirement",
      "cross_references": [
        "figure_8.2.48-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.49",
      "section_id": "8.2.49",
      "section_title": "Dropped DL Traffic Threshold",
      "content": "The Dropped DL Traffic Threshold IE type shall be encoded as shown in Figure 8.2.49-1. It contains the dropped DL traffic volume thresholds to be monitored by the UP function.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 72 (decimal)\n3 to 4\nLength = n\n5\nSpare\nDLBY\nDLPA\nm to (m+7)\nDownlink Packets\no to (o+7)\nNumber of Bytes of Downlink Data\ns to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.49-1: Dropped DL Traffic Threshold\nThe following flags are coded within Octet 5:\n-\tBit 1 – DLPA: If this bit is set to \"1\", then the Downlink Packets field shall be present, otherwise the Downlink Packets field shall not be present.\n-\tBit 2 – DLBY: If this bit is set to \"1\", then the Number of Bytes of Downlink Data field shall be present, otherwise the Number of Bytes of Downlink Data field shall not be present.\n-\tBit 3 to 8: Spare, for future use and set to \"0\".\nThe Downlink Packets fields shall be encoded as an Unsigned64 binary integer value. It shall contain a number of downlink packets.\nThe Number of Bytes of Downlink Data fields shall be encoded as an Unsigned64 binary integer value. It shall contain the number of bytes of the downlink data.",
      "chunk_type": "requirement",
      "cross_references": [
        "figure_8.2.49-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.50",
      "section_id": "8.2.50",
      "section_title": "Volume Quota",
      "content": "The Volume Quota IE type shall be encoded as shown in Figure 8.2.50-1. It contains the volume quota to be monitored by the UP function.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 73 (decimal)\n3 to 4\nLength = n\n5\nSpare\nDLVOL\nULVOL\nTOVOL\nm to (m+7)\nTotal Volume\np to (p+7)\nUplink Volume\nq to (q+7)\nDownlink Volume\nS to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.50-1: Volume Quota\nThe following flags are coded within Octet 5:\n-\tBit 1 – TOVOL: If this bit is set to \"1\", then the Total Volume field shall be present, otherwise the Total Volume field shall not be present.\n-\tBit 2 – ULVOL: If this bit is set to \"1\", then the Uplink Volume field shall be present, otherwise the Uplink Volume field shall not be present.\n-\tBit 3 – DLVOL: If this bit is set to \"1\", then the Downlink Volume field shall be present, otherwise the Downlink Volume field shall not be present.\n-\tBit 4 to bit 8: Spare, for future use and set to \"0\".\nAt least one bit shall be set to \"1\". Several bits may be set to \"1\".\nThe Total Volume, Uplink Volume and Downlink Volume fields shall be encoded as an Unsigned64 binary integer value. They shall contain the total, uplink or downlink number of octets respectively.",
      "chunk_type": "requirement",
      "cross_references": [
        "figure_8.2.50-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.51",
      "section_id": "8.2.51",
      "section_title": "Time Quota",
      "content": "The Time Quota IE type shall be encoded as shown in Figure 8.2.51-1. It contains the time quota to be monitored by the UP function.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 74 (decimal)\n3 to 4\nLength = n\n5 to 8\nTime Quota value\n9 to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.51-1: Time Quota\nThe Time Quota value shall be encoded as an Unsigned32 binary integer value. It contains a duration in seconds.",
      "chunk_type": "requirement",
      "cross_references": [
        "figure_8.2.51-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.52",
      "section_id": "8.2.52",
      "section_title": "Start Time",
      "content": "The Start Time IE indicates the time at which the UP function started to collect the charging information. It shall be encoded as shown in Figure 8.2.52-1.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 75 (decimal)\n3 to 4\nLength = n\n5 to 8\nStart Time\n9 to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.52-1: Start Time\nThe Start Time field shall contain a UTC time. Octets 5 to 8 shall be encoded in the same format as the first four octets of the 64-bit timestamp format as defined in clause 6 of IETF RFC 5905 [12].\nNOTE:\tThe encoding is defined as the time in seconds relative to 00:00:00 on 1 January 1900.",
      "chunk_type": "requirement",
      "cross_references": [
        "clause_6",
        "figure_8.2.52-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.53",
      "section_id": "8.2.53",
      "section_title": "End Time",
      "content": "The End Time IE indicates the time at which the UP function ended to collect the charging information. It shall be encoded as shown in Figure 8.2.53-1.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 76 (decimal)\n3 to 4\nLength = n\n5 to 8\nEnd Time\n9 to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.53-1: End Time\nThe End Time field shall contain a UTC time. Octets 5 to 8 shall be encoded in the same format as the first four octets of the 64-bit timestamp format as defined in clause 6 of IETF RFC 5905 [12].\nNOTE:\tThe encoding is defined as the time in seconds relative to 00:00:00 on 1 January 1900.",
      "chunk_type": "requirement",
      "cross_references": [
        "clause_6",
        "figure_8.2.53-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.54",
      "section_id": "8.2.54",
      "section_title": "URR ID",
      "content": "The URR ID IE type shall be encoded as shown in Figure 8.2.54-1. It contains a Usage Reporting Rule ID.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 81 (decimal)\n3 to 4\nLength = n\n5 to 8\nURR ID value\n9 to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.54-1: URR ID\nThe URR ID value shall be encoded as an Unsigned32 binary integer value.\nThe bit 8 of octet 5 is used to indicate if the Rule ID is dynamically allocated by the CP function or predefined in the UP function. If set to \"0\", it indicates that the Rule is dynamically provisioned by the CP Function. If set to \"1\", it indicates that the Rule is predefined in the UP Function.",
      "chunk_type": "requirement",
      "cross_references": [
        "figure_8.2.54-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.55",
      "section_id": "8.2.55",
      "section_title": "Linked URR ID IE",
      "content": "The Linked URR ID IE type shall be encoded as shown in Figure 8.2.55-1. It contains the URR ID of a linked URR.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 82 (decimal)\n3 to 4\nLength = n\n5 to 8\nLinked URR ID value\n9 to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.55-1: Linked URR ID\nThe Linked URR ID value shall be encoded as an Unsigned32 binary integer value.",
      "chunk_type": "requirement",
      "cross_references": [
        "figure_8.2.55-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.56",
      "section_id": "8.2.56",
      "section_title": "Outer Header Creation",
      "content": "The Outer Header Creation IE type shall be encoded as shown in Figure 8.2.56-1. It contains the instructions to create an Outer Header.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 84 (decimal)\n3 to 4\nLength = n\n5 to 6\nOuter Header Creation Description\nm to (m+3)\nTEID\np to (p+3)\nIPv4 Address\nq to (q+15)\nIPv6 Address\nr to (r+1)\nPort Number\nt to (t+2)\nC-TAG\nu to (u+2)\nS-TAG\ns to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.56-1: Outer Header Creation\nThe Outer Header Creation Description field, when present, shall be encoded as specified in Table 8.2.56-1. It takes the form of a bitmask where each bit indicates the outer header to be created in the outgoing packet. Spare bits shall be ignored by the receiver.\nTable 8.2.56-1: Outer Header Creation Description\nOctet / Bit\nOuter Header to be created in the outgoing packet\n5/1\nGTP-U/UDP/IPv4 (NOTE 1), (NOTE 3)\n5/2\nGTP-U/UDP/IPv6 (NOTE 1), (NOTE 3)\n5/3\nUDP/IPv4 (NOTE 2, NOTE 5)\n5/4\nUDP/IPv6 (NOTE 2, NOTE 5)\n5/5\nIPv4 (NOTE 5)\n5/6\nIPv6 (NOTE 5)\n5/7\nC-TAG (see NOTE 4)\n5/8\nS-TAG (see NOTE 4)\n6/1\nN19 Indication (NOTE 6)\n6/2\nN6 Indication (NOTE 6)\n6/3\nLow Layer SSM and C-TEID (NOTE 7)\nNOTE 1:\tThe SGW-U/I-UPF shall also create GTP-U extension header(s) if any has been stored for this packet, during a previous outer header removal (see clause 8.2.64).\nNOTE 2:\tThis value may apply to UL packets sent by a PGW-U for non-IP PDN connections with SGi tunnelling based on UDP/IP encapsulation (see clause 4.3.17.8.3.3.2 of 3GPP TS 23.401 [14]).\nNOTE 3:\tThe SGW-U/I-UPF shall set the GTP-U message type to the value stored during the previous outer header removal.\nNOTE 4:\tThese values may apply to UL packets sent by a UPF for Ethernet PDU sessions over N6 (see clause 5.8.5.6 of 3GPP TS 23.501 [28]). Either C-TAG bit or S-TAG bit may be set to \"1\", or both C-TAG and S-TAG bits may be set to \"1\" to request the UPF to insert the C-TAG or S-TAG, or both C-TAG and S-TAG respectively for UL packets over N6.\nNOTE 5:\tThis value may apply e.g. to UL packets sent by a UPF (PDU Session Anchor) over N6, when explicit N6 traffic routing information is provided to the SMF (see clause 5.6.7 of 3GPP TS 23.501 [28]). The IPv4 or IPv6 address shall correspond to the IP address of the tunnel endpoint in the data network.\nNOTE 6:\tWhen the \"N19 Indication\" or \"N6 Indication\" bit in the Outer Header Creation Description field is set to \"1\", the UPF shall associate an \"N19 Indication\" or \"N6 Indication\" internal flag with the packet to indicate that the packet has been received from a N19 or N6 interface respectively. This indication is further used to prevent the packet from being forwarded back over N19 or N6 respectively (see clause 8.2.130).\nNOTE 7:\tWhen the \"Low Layer SSM and C-TEID\" bit in the Outer Header Creation Description field is set to \"1\", the MB-UPF shall create a GTP-U header with the C-TEID and set the destination IP address and the source IP address as the IP Multicast Distribution Address and the IP Source Address in the Multicast Transport Information IE, which is the Low Layer SSM allocated to the MBS session. In this case, the TEID, IPv4/IPv6 address and Port Number fields shall not be present.\nAt least one bit of the Outer Header Creation Description field shall be set to \"1\". Bits 5/1 and 5/2 may both be set to \"1\" if an F-TEID with both an IPv4 and IPv6 addresses has been assigned by the GTP-U peer. In this case, the UP function shall send the outgoing packet towards the IPv4 or IPv6 address.\nThe TEID field shall be present if the Outer Header Creation Description requests the creation of a GTP-U header, i.e. if in Octet 5 any of the bits 5/1 and 5/2 are set. Otherwise it shall not be present. When present, it shall contain the destination GTP-U TEID to set in the GTP-U header of the outgoing packet.\nThe IPv4 Address field shall be present if the Outer Header Creation Description requests the creation of an IPv4 header, i.e. if in Octet 5 any of the bits 5/1, 5/3 and 5/5 are set. Otherwise it shall not be present. When present, it shall contain the destination IPv4 address to set in the IPv4 header of the outgoing packet.\nThe IPv6 Address field shall be present if the Outer Header Creation Description requests the creation of an IPv6 header, i.e. if in Octet 5 any of the bits 5/2, 5/4 and 5/6 are set. Otherwise it shall not be present. When present, it shall contain the destination IPv6 address to set in the IPv6 header of the outgoing packet.\nThe Port Number field shall be present if the Outer Header Creation Description requests the creation of a UDP/IP header, i.e. if in Octet 5 any of the bits 5/3 and 5/4 are set. Otherwise it shall not be present. When present, it shall contain the destination Port Number to set in the UDP header of the outgoing packet.\nThe C-TAG field shall be present if the Outer Header Creation Description requests the setting of the C-Tag in Ethernet packet. Otherwise it shall not be present. When present, it shall contain the destination Customer-VLAN tag to set in the Customer-VLAN tag header of the outgoing packet.\nThe S-TAG field shall be present if the Outer Header Creation Description requests the setting of the S-Tag in Ethernet packet. Otherwise it shall not be present. When present, it shall contain the destination Service-VLAN tag to set in the Service-VLAN tag header of the outgoing packet.",
      "chunk_type": "requirement",
      "cross_references": [
        "clause_8.2.64",
        "ts_23.401_clause_4.3.17.8.3.3.2",
        "ts_23.501_clause_5.8.5.6",
        "ts_23.501_clause_5.6.7",
        "clause_8.2.130",
        "table_8.2.56-1",
        "figure_8.2.56-1",
        "ts_23.401",
        "ts_23.501"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.57",
      "section_id": "8.2.57",
      "section_title": "BAR ID",
      "content": "The BAR ID IE type shall be encoded as shown in Figure 8.2.57-1. It contains a Buffering Action Rule ID.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 88 (decimal)\n3 to 4\nLength = n\n5\nBAR ID value\n6 to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.57-1: BAR ID\nThe BAR ID value shall be encoded as a binary integer value.",
      "chunk_type": "requirement",
      "cross_references": [
        "figure_8.2.57-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.58",
      "section_id": "8.2.58",
      "section_title": "CP Function Features",
      "content": "The CP Function Features IE indicates the features supported by the CP function. Only features having an impact on the (system-wide) UP function behaviour are signalled in this IE. It is coded as depicted in Figure 8.2.58-1.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 89 (decimal)\n3 to 4\nLength = n\n5\nSupported-Features\n6 to 7\nAdditional Supported-Features 1\n8 to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.58-1: CP Function Features\nThe CP Function Features IE takes the form of a bitmask where each bit set indicates that the corresponding feature is supported. Spare bits shall be ignored by the receiver. The same bitmask is defined for all PFCP interfaces.\nThe following table specifies the features defined on PFCP interfaces and the interfaces on which they apply.\nTable 8.2.58-1: CP Function Features\nFeature Octet / Bit\nFeature\nInterface\nM/O\nDescription\n5/1\nLOAD\nSxa, Sxb, Sxc, N4, N4mb\nO\nLoad Control is supported by the CP function.\n5/2\nOVRL\nSxa, Sxb, Sxc, N4, N4mb\nO\nOverload Control is supported by the CP function.\n5/3\nEPFAR\nSxa, Sxb, Sxc, N4\nO\nThe CP function supports the Enhanced PFCP Association Release feature (see clause 5.18).\n5/4\nSSET\nN4, N4mb\nO\n(MB-)SMF support of PFCP sessions successively controlled by different (MB-)SMFs of a same (MB-)SMF Set (see clause 5.22).\n5/5\nBUNDL\nSxa, Sxb, Sxc, N4, N4mb\nO\nPFCP messages bundling (see clause 6.5) is supported by the CP function.\n5/6\nMPAS\nN4, N4mb\nO\n(MB-)SMF support for multiple PFCP associations from an (MB-)SMF set to a single (MB-)UPF (see clause 5.22.3).\n5/7\nARDR\nSxb, N4\nO\nCP function supports Additional Usage Reports in the PFCP Session Deletion Response (see clause 5.2.2.3.1).\n5/8\nUIAUR\nSxb, N4\nO\nCP function supports the UE IP Address Usage Reporting feature, i.e. receiving and handling of UE IP Address Usage Information IE (see clause 5.21.3.2).\n6/1\nPSUCC\nSxb, Sxc, N4, N4mb\nO\nCP function supports PFCP session establishment or modification with Partial Success, i.e. with UP function reporting rules that cannot be activated.\nSee clause 5.2.9.\n6/2\nRPGUR\nSxa, Sxb, N4, N4mb\nO\nCP function supports the Peer GTP-U Entity Restart Reporting as specified in clause 20.3.4a of 3GPP TS 23.007 [24] and in clause 5.5 of 3GPP TS 23.527 [40].\nNOTE:\tFeatures are defined as follows:\n- Feature Octet / Bit: The octet and bit number within the Supported-Features IE, e.g. \"5 / 1\".\n- Feature: A short name that can be used to refer to the octet / bit and to the feature.\n- Interface: A list of applicable interfaces to the feature.\n- M/O: Defines if the implementation of the feature is mandatory (\"M\") or optional (\"O\") for a CP function complying with this release of the specification.A feature defined as mandatory in this release of the specification may not necessarily be defined or mandatory to support in earlier releases (see the respective specifications), therefore a UP function complying with this release of the specification shall be prepared to receive a CP Function Features IE with a mandatory feature bit set to \"0\".\n- Description: A clear textual description of the feature.",
      "chunk_type": "general",
      "cross_references": [
        "clause_5.18",
        "clause_5.22",
        "clause_6.5",
        "clause_5.22.3",
        "clause_5.2.2.3.1",
        "clause_5.21.3.2",
        "clause_5.2.9",
        "ts_23.007_clause_20.3.4",
        "ts_23.007_clause_5.5",
        "table_8.2.58-1",
        "figure_8.2.58-1",
        "ts_23.527_clause_5.5",
        "ts_23.007",
        "ts_23.527"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.59",
      "section_id": "8.2.59",
      "section_title": "Usage Information",
      "content": "The Usage Information IE shall be encoded as shown in Figure 8.2.59-1. It provides additional information on the Usage Report.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 90 (decimal)\n3 to 4\nLength = n\n5\nSpare\nUBE\nUAE\nAFT\nBEF\n6 to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.59-1: Usage Information\nOctet 5 shall be encoded as follows:\n-\tBit 1 – BEF (Before): when set to \"1\", this indicates usage before a monitoring time.\n-\tBit 2 – AFT (After): when set to \"1\", this indicates a usage after a monitoring time.\n-\tBit 3 – UAE (Usage After Enforcement): when set to \"1\", this indicates a usage after QoS enforcement.\n-\tBit 4 – UBE (Usage Before Enforcement): when set to \"1\", this indicates a usage before QoS enforcement.\n-\tBits 5 to 8: Spare, for future use and set to \"0\".",
      "chunk_type": "requirement",
      "cross_references": [
        "figure_8.2.59-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.60",
      "section_id": "8.2.60",
      "section_title": "Application Instance ID",
      "content": "The Application Instance ID IE type shall be encoded as shown in Figure 8.2.60-1. It contains an Application Instance Identifier referencing an application instance for which the start or stop of traffic is reported to the CP function.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 91 (decimal)\n3 to 4\nLength = n\n5 to (n+4)\nApplication Instance Identifier\nFigure 8.2.60-1: Application Instance ID\nThe Application Instance Identifier shall be encoded as an OctetString (see 3GPP TS 29.212 [8]).",
      "chunk_type": "requirement",
      "cross_references": [
        "figure_8.2.60-1",
        "ts_29.212"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.61",
      "section_id": "8.2.61",
      "section_title": "Flow Information",
      "content": "The Flow Information IE type shall be encoded as shown in Figure 8.2.61-1. It contains the description of a flow information.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 92 (decimal)\n3 to 4\nLength = n\n5\nSpare\nFlow Direction\n6 to 7\nLength of Flow Description\n8 to m\nFlow Description\np to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.61-1: Flow Information\nThe Flow Direction field, when present, shall be encoded as defined in Table 8.2.61-1.\nTable 8.2.61-1: Flow Direction\nFlow Direction\nValue (Decimal)\nUnspecified\n0\nDownlink (traffic to the UE)\n1\nUplink (traffic from the UE)\n2\nBidirectional\n3\nFor future use. Shall not be sent. If received, shall be interpreted as the value \"0\".\n4 to 7\nThe Flow Description field, when present, shall be encoded as an OctetString as specified in clause 5.4.2 of 3GPP TS 29.212 [8].",
      "chunk_type": "procedure",
      "cross_references": [
        "ts_29.212_clause_5.4.2",
        "table_8.2.61-1",
        "figure_8.2.61-1",
        "ts_29.212"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.62",
      "section_id": "8.2.62",
      "section_title": "UE IP Address",
      "content": "The UE IP Address IE type shall be encoded as shown in Figure 8.2.62-1. It contains a source or destination IP address.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 93 (decimal)\n3 to 4\nLength = n\n5\nSpare\nIP6PL\nCHV6\nCHV4\nIPv6D\nS/D\nV4\nV6\nm to (m+3)\nIPv4 address\np to (p+15)\nIPv6 address\nr\nIPv6 Prefix Delegation Bits\ns\nIPv6 Prefix Length\nk to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.62-1: UE IP Address\nThe following flags are coded within Octet 5:\n-\tBit 1 – V6: If this bit is set to \"1\", then the CHV6 bit shall not be set and the IPv6 address field shall be present in the UE IP Address, otherwise the IPv6 address field shall not be present.\n-\tBit 2 – V4: If this bit is set to \"1\", then the CHV4 bit sshall not be set and the IPv4 address field shall be present in the UE IP Address, otherwise the IPv4 address field shall not be present.\n-\tBit 3 – S/D: This bit is only applicable to the UE IP Address IE in the PDI IE, Create Traffic Endpoint IE and Update Traffic Endpoint IE. It shall be set to \"0\" and ignored by the receiver in IEs other than PDI IE. In the PDI IE, if this bit is set to \"0\", this indicates a Source IP address; if this bit is set to \"1\", this indicates a Destination IP address.\n-\tBit 4 – IPv6D: This bit is only applicable to the UE IP address IE in the PDI IE, Create Traffic Endpoint IE and Update Traffic Endpoint IE, when the V6 bit or CHV6 bit is set to \"1\". If this bit is set to \"1\", then the IPv6 Prefix Delegation Bits field shall be present, otherwise the UP function shall consider IPv6 prefix is default /64.\n-\tBit 5 – CHV4 (CHOOSE IPV4): If this bit is set to \"1\", then the V4 bit shall not be set, the IPv4 address shall not be present and the UP function shall assign an IPv4 address. This bit shall only be set by the CP function.\n-\tBit 6 – CHV6 (CHOOSE IPV6): If this bit is set to \"1\", then the V6 bit shall not be set, the IPv6 address shall not be present and the UP function shall assign an IPv6 address. This bit shall only be set by the CP function.\n-\tBit 7 – IP6PL (IPv6 Prefix Length): this bit is only applicable when the V6 bit or CHV6 bit is set to \"1\" and the \"IPv6D\" bit is set to \"0\", for an IPv6 prefix other than default /64, when the UP function supports the IP6PL feature as specified in clause 8.2.25. If this bit is set to \"1\", then the IPv6 Prefix Length field shall be present.\n-\tBit 8 Spare, for future use and set to \"0\".\nOctets \"m to (m+3)\" or \"p to (p+15)\" (IPv4 address / IPv6 address fields), if present, shall contain the address value.\nOctet r, if present, shall contain the number of bits allocated for IPv6 prefix delegation (relative to the default /64 IPv6 prefix), e.g. if /60 IPv6 prefix is used, the value shall be set to \"4\". When using UE IP address IE in a PDI to match packets, the UP function shall only use the IPv6 prefix part and ignore the interface identifier part. When the field is set to \"0\", the UP function shall determine a value based on the local configuration.\nThe IPv6 Prefix Length in octet s, when present, shall be encoded as an 8 bits binary integer, e.g. if /72 prefix is used, the value shall be set to to (decimal) 72, or if /56 prefix is used, the value shall be set to (decimal) 56. The prefix length value \"128\" indicates an individual /128 IPv6 address. When the field is set to \"0\", the UP function shall determine a value based on the local configuration.",
      "chunk_type": "requirement",
      "cross_references": [
        "clause_8.2.25",
        "figure_8.2.62-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.63",
      "section_id": "8.2.63",
      "section_title": "Packet Rate",
      "content": "The Packet Rate IE contains the packet rate thresholds to be enforced by the UP function. It shall be encoded as shown in Figure 8.2.63-1.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 94 (decimal)\n3 to 4\nLength = n\n5\nSpare\nAPRC\nDLPR\nULPR\nm\nSpare\nUplink Time Unit\n(m+1) to (m+2)\nMaximum Uplink Packet Rate\np\nSpare\nDownlink Time Unit\n(p+1) to (p+2)\nMaximum Downlink Packet Rate\nq\nSpare\nAdditional Uplink Time Unit\n(q+1) to (q+2)\nAdditional Maximum Uplink Packet Rate\nr\nSpare\nAdditional Downlink Time Unit\n(r+1) to (r+2)\nAdditional Maximum Downlink Packet Rate\ns to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.63-1: Packet Rate\nThe following flags are coded within Octet 5:\n-\tBit 1 – ULPR (Uplink Packet Rate): If this bit is set to \"1\", then octets m to (m+2) shall be present, otherwise these octets shall not be present.\n-\tBit 2 – DLPR (Downlink Packet Rate): If this bit is set to \"1\", then octets p to (p+2) shall be present, otherwise these octets shall not be present.\n-\tBit 3 – APRC (Additional Packet Rate Control): If this bit is set to \"1\", then the presence of octets q to (r+2) is determined as follows:\n-\tIf bit 1 (ULPR) is set to \"1\", then octets q to (q+2), the Additional Maximum Uplink Packet Rate shall be present. Otherwise, octets q to (q+2) shall not be present;\n-\tIf bit 2 (DLPR) is set to \"1\", then octets r to (r+2), the Additional Maximum Downlink Packet Rate shall be present. Otherwise, octets r to (r+2) shall not be present.\n-\tBits 4 to 8: Spare, for future use and set to \"0\".\nAt least one bit in Octet 5 shall be set to \"1\". Several bits may be set to \"1\".\nWhen present, octets m to (m+2) indicate the maximum number of uplink packets allowed to be sent within the uplink time unit.\nWhen present, octets p to (p+2) indicate the maximum number of downlink packets allowed to be sent within the downlink time unit.\nWhen present, octets q to (q+2) indicate the additional maximum number of uplink packets allowed to be sent within the additional uplink time unit.\nWhen present, octets r to (r+2) indicate the additional maximum number of downlink packets allowed to be sent within the additional downlink time unit.\nThe Additional Uplink/Downlink Time Unit shall be encoded as the Uplink/Downlink Time Unit, see Table 8.2.63.1.\nTable 8.2.63.1: Uplink/Downlink Time Unit\nUplink/Downlink Time unit\nBits 1 to 3 define the time unit as follows:\nBits\n3 2 1\n0 0 0  minute\n0 0 1  6 minutes\n0 1 0  hour\n0 1 1  day\n1 0 0  week\nOther values shall be interpreted as 000 in this version of the protocol.\nThe Maximum Uplink/Downlink Packet Rate shall be encoded as an Unsigned16 binary integer value. They shall indicate the maximum number of uplink/downlink packets allowed to be sent in the indicated uplink/downlink time unit respectively.\nThe Additional Maximum Uplink/Downlink Packet Rate shall be encoded as an Unsigned16 binary integer value. They shall indicate the additional maximum number of uplink/downlink packets allowed to be sent in the indicated Additional uplink/downlink time unit respectively.\nNOTE:\tThe Serving PLMN rate control is only applicable to downlink packets with the value of Maximum Downlink Packet Rate set to equal to or higher than 10 and with the Downlink Time Unit set to 6 minutes. The Small Data Rate Control/APN rate control is applicable to both uplink/downlink packets with the Time Unit set to minute/hour/day/week.",
      "chunk_type": "requirement",
      "cross_references": [
        "table_8.2.63.1",
        "figure_8.2.63-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.64",
      "section_id": "8.2.64",
      "section_title": "Outer Header Removal",
      "content": "The Outer Header Removal IE type shall be encoded as shown in Figure 8.2.64-1. It contains the instructions to remove an Outer Header.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 95 (decimal)\n3 to 4\nLength = n\n5\nOuter Header Removal Description\n6\nGTP-U Extension Header Deletion\n7 to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.64-1: Outer Header Removal\nThe Outer Header Removal Description field, when present, shall be encoded as specified in Table 8.2.64-1.\nTable 8.2.64-1: Outer Header Removal Description\nOuter Header to be removed from the incoming packet\nValue (Decimal)\nGTP-U/UDP/IPv4 (NOTE 1), (NOTE 2), (NOTE 8)\n0\nGTP-U/UDP/IPv6 (NOTE 1), (NOTE 2)\n1\nUDP/IPv4 (NOTE 3, NOTE 6)\n2\nUDP/IPv6 (NOTE 3, NOTE 6)\n3\nIPv4 (NOTE 6)\n4\nIPv6 (NOTE 6)\n5\nGTP-U/UDP/IP (NOTE 4)\n6\nVLAN TAG POP (i.e. removal of one VLAN tag, S-TAG or C-TAG) (See NOTE 5)\n7\nVLAN TAGs POP-POP (i.e. removal of 2 VLAN tags, S-TAG and C-TAG) (See NOTE 5)\n8\nSpare, for future use. (See NOTE 7)\n9 to 255\nNOTE 1:\tThe SGW-U/I-UPF shall store GTP-U extension header(s) required to be forwarded for this packet (as required by the comprehension rules of Figure 5.2.1-2 of 3GPP TS 29.281 [3]) that are not requested to be deleted by the GTP-U Extension Header Deletion field.\nNOTE 2:\tThe SGW-U/I-UPF shall store the GTP-U message type for a GTP-U signalling message which is required to be forwarded, e.g. for an End Marker message.\nNOTE 3:\tThis value may apply to DL packets received by a PGW-U for non-IP PDN connections with SGi tunnelling based on UDP/IP encapsulation (see clause 4.3.17.8.3.3.2 of 3GPP TS 23.401 [14]).\nNOTE 4:\tThe CP function shall use this value to instruct UP function to remove the GTP-U/UDP/IP header regardless it is IPv4 or IPv6.\nNOTE 5:\tThese values may apply to DL packets received by a UPF over N6 for Ethernet PDU sessions (see clause 5.8.5.3 of 3GPP TS 23.501 [28]). When the Outer Header Removal Description is set to \"VLAN TAG POP\", it requires the UPF to remove the VLAN tag from the top of the VLAN stack (outer VLAN tag), i.e. it removes the S-TAG or C-TAG if the user plane packet contains only one VLAN tag, or it removes the S-TAG if the user plane packet contains both a C-TAG and an S-TAG. When the Outer Header Removal Description is set to \"VLAN TAGs POP-POP\", it requires the UPF to remove 2 VLAN tags, S-TAG and C-TAG.\nNOTE 6:\tThis value may apply e.g. to DL packets received by a UPF (PDU Session Anchor) over N6, when explicit N6 traffic routing information is provided to the SMF (see clause 5.6.7 of 3GPP TS 23.501 [28]).\nNOTE 7:\tIf the UP function receives an unknown value, it shall reject the request message with the cause set to \"Mandatory IE incorrect\" together with the Offending IE set to the IE type of Outer Header Removal IE.\nNOTE 8:\tThe PSA UPF shall store GTP-U extension header(s) required to be forwarded and that are not requested to be deleted by the GTP-U Extension Header Deletion field, e.g. the PDU Session Container received from the MB-UPF (for MBS session data) over N19mb interface, and modify it as instructed by the SMF, e.g. the PSA UPF may be instructed to modify the QFI field in the PDU Session Container extension header for the packets received from the MB-UPF.\nIf the GTP-U extension header(s) in incoming GTP-PDUs is not required to be forwarded in the outcoming GTP-PDUs, the GTP-U Extension Header Deletion field (octet 6) shall be present to delete GTP-U extension header(s) from incoming GTP-PDUs. Octet 6 shall be absent if all GTP-U extension headers required to be forwarded shall be stored as indicated in NOTE 1 and NOTE 8 of Table 8.2.64-1.\nThe GTP-U Extension Header Deletion field, when present, shall be encoded as specified in Table 8.2.64-2. It takes the form of a bitmask where each bit provides instructions on the information to be deleted from the incoming GTP-PDU packet. Spare bits shall be ignored by the receiver.\nTable 8.2.64-2: GTP-U Extension Header Deletion\nOctet / Bit\nGTP-U Extension Header to be deleted from incoming packet\n6/1\nPDU Session Container (NOTE)\nBit 2 to 8\nSpare, for future use\nNOTE:\tThis value shall be used for data forwarding during a 5GS to EPS handover for a UPF that supports EPS-5GS interworking (see clause 5.17.3).",
      "chunk_type": "requirement",
      "cross_references": [
        "ts_23.401_clause_4.3.17.8.3.3.2",
        "ts_23.501_clause_5.8.5.3",
        "ts_23.501_clause_5.6.7",
        "clause_5.17.3",
        "table_8.2.64-1",
        "table_8.2.64-2",
        "figure_8.2.64-1",
        "ts_29.281_figure_5.2.1-2",
        "ts_29.281",
        "ts_23.401",
        "ts_23.501"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.65",
      "section_id": "8.2.65",
      "section_title": "Recovery Time Stamp",
      "content": "The Recovery Time Stamp IE is coded as shown in Figure 8.2.65-1. It indicates the UTC time when the PFCP entity started. Octets 5 to 8 are encoded in the same format as the first four octets of the 64-bit timestamp format as defined in clause 6 of IETF RFC 5905 [26].\nNOTE:\tThe encoding is defined as the time in seconds relative to 00:00:00 on 1 January 1900.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 96 (decimal)\n3 to 4\nLength = n\n5 to 8\nRecovery Time Stamp value\n9 to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.65-1: Recovery Time Stamp",
      "chunk_type": "general",
      "cross_references": [
        "clause_6",
        "figure_8.2.65-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.66",
      "section_id": "8.2.66",
      "section_title": "DL Flow Level Marking",
      "content": "The DL Flow Level Marking IE type shall be encoded as shown in Figure 8.2.66-1.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 97 (decimal)\n3 to 4\nLength = n\n5\nSpare\nSCI\nTTC\nm to (m+1)\nToS/Traffic Class\np to (p+1)\nService Class Indicator\nq to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.66-1: DL Flow Level Marking\nThe following flags are coded within Octet 5:\n-\tBit 1 – TTC (ToS/Traffic Class): If this bit is set to \"1\", then the ToS/Traffic Class field shall be present, otherwise the ToS/Traffic Class field shall not be present.\n-\tBit 2 – SCI (Service Class Indicator): If this bit is set to \"1\", then the Service Class Indicator field shall be present, otherwise the Service Class Indicator field shall not be present.\n-\tBit 3 to 8: Spare, for future use and set to \"0\".\nThe ToS/Traffic Class field, when present, shall be encoded on two octets as an OctetString. The first octet shall contain the IPv4 Type-of-Service or the IPv6 Traffic-Class field and the second octet shall contain the ToS/Traffic Class mask field. See clause 5.3.15 of 3GPP TS 29.212 [8].\nOctets p and (p+1) of the Service Class Indicator field, when present, shall be encoded respectively as octets 2 and 3 of the Service Class Indicator Extension Header specified in Figure 5.2.2.3-1 of 3GPP TS 29.281 [3].",
      "chunk_type": "procedure",
      "cross_references": [
        "ts_29.212_clause_5.3.15",
        "figure_8.2.66-1",
        "ts_29.281_figure_5.2.2.3-1",
        "ts_29.212",
        "ts_29.281"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.67",
      "section_id": "8.2.67",
      "section_title": "Header Enrichment",
      "content": "The Header Enrichment IE type shall be encoded as shown in Figure 8.2.67-1. It contains information for header enrichment.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 98 (decimal)\n3 to 4\nLength = n\n5\nSpare\nHeader Type\n6\nLength of Header Field Name\n7 to m\nHeader Field Name\np\nLength of Header Field Value\n(p+1) to q\nHeader Field Value\ns to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.67-1: Header Enrichment\nHeader Type indicates the type of the Header. It shall be encoded as defined in Table 8.2.67-1.\nTable 8.2.67-1: Header Type\nHeader Type\nValue (Decimal)\nHTTP\n0\nSpare, for future use.\n1 to 31\nLength of Header Field Name indicates the length of the Header Field Name.\nHeader Field Name shall be encoded as an OctetString.\nLength of Header Field Value indicates the length of the Header Field Value.\nHeader Field Value shall be encoded as an OctetString.\nFor a HTTP Header Type, the contents of the Header Field Name and Header Field Value shall comply with the HTTP header field format (see clause 3.2 of IETF RFC 7230 [23]).",
      "chunk_type": "requirement",
      "cross_references": [
        "clause_3.2",
        "table_8.2.67-1",
        "figure_8.2.67-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.68",
      "section_id": "8.2.68",
      "section_title": "Measurement Information",
      "content": "The Measurement Information IE shall be encoded as shown in Figure 8.2.68-1. It provides information on the requested measurement information.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 100 (decimal)\n3 to 4\nLength = n\n5\nCIAM\nASPOC\nSSPOC\nMNOP\nISTM\nRADI\nINAM\nMBQE\n6 to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.68-1: Measurement Information\nOctet 5 shall be encoded as follows:\n-\tBit 1 – MBQE (Measurement Before QoS Enforcement): when set to \"1\", this indicates a request to measure the traffic usage before QoS enforcement.\n-\tBit 2 – INAM (Inactive Measurement): when set to \"1\", this indicates that the measurement shall be paused (inactive).\n-\tBit 3 – RADI (Reduced Application Detection Information): when set to \"1\", this indicates that the Application Detection Information reported to the CP function, upon detecting the start or stop of an application, shall only contain the Application ID.\n-\tBit 4 – ISTM (Immediate Start Time Metering): when set to \"1\", this indicates that time metering shall start immediately when the flag is received.\n-\tBit 5 – MNOP (Measurement of Number of Packets): when set to \"1\", this indicate a request to measure the number of packets transferred in UL/DL/Total in addition to the measurement in octets when Volume based measurement applies.\n-\tBit 6 – SSPOC (Send Start Pause of Charging): when set to \"1\", this indicate that the UP Function shall send a Start Pause of Charging indication to the upstream GTP-U entity(s) when the Dropped DL Traffic Threshold is reached.\n-\tBits 7 – ASPOC (Applicable for Start of Pause of Charging): when set to \"1\", this indicate that UP Function the the URR is applicable for Start of Pause of Charging, so that it shall stop the usage measurement for the URR when receiving Start Pause of Charging indication from the peer downstream GTP-U entity.\n-\tBits 8 – CIAM (Control of Inactive Measurement): when set to \"1\", this indicates that the UP function shall read the current value of the \"INAM\" flag and stop (if \"INAM\" is set to \"1\") or resume (if \"INAM\" is set to \"0\") the usage measurement accordingly for the given URR with the \"APSOC\" flag set to \"1\". If the \"CIAM\" flag is set to 0 for a URR with the \"ASPOC\" flag set to \"1\", the UP function shall ignore the \"INAM\" flag received in the Measurement Information. The \"CIAM\" flag shall be ignored for a URR without the ASPOC\" flag set to \"1\".\nAt least one bit shall be set to \"1\". Several bits may be set to \"1\", e.g. both MBQE and MNOP bits are set to \"1\".",
      "chunk_type": "requirement",
      "cross_references": [
        "figure_8.2.68-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.69",
      "section_id": "8.2.69",
      "section_title": "Node Report Type",
      "content": "The Node Report Type IE shall be encoded as shown in Figure 8.2.69-1. It indicates the type of the node report the UP function sends to the CP function.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 101 (decimal)\n3 to 4\nLength = n\n5\nSpare\nSpare\nVSR\nPURR\nGPQR\nCKDR\nUPRR\nUPFR\n6 to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.69-1: Node Report Type\nOctet 5 shall be encoded as follows:\n-\tBit 1 – UPFR (User Plane Path Failure Report): when set to \"1\", this indicates a User Plane Path Failure Report.\n-\tBit 2 – UPRR (User Plane Path Recovery Report): when set to \"1\", this indicates a User Plane Path Recovery Report.\nBit 3 – CKDR (Clock Drift Report): when set to \"1\", this indicates a Clock Drift Report.\n-\tBit 4 – GPQR (GTP-U Path QoS Report): when set to \"1\", this indicates a GTP-U Path QoS Report.\n-\tBit 5 – PURR (peer GTP-U entity Restart Report): when set to \"1\", this indicates a Peer GTP-U Restart report.\n-\tBit 6 – VSR (Vendor-Specific Report): when set to \"1\", this indicates a Vendor-Specific Report.\n-\tBit 7 to 8 – Spare, for future use and set to \"0\".\nAt least one bit shall be set to \"1\". Several bits may be set to \"1\".\nNOTE 1:\tIf UPFR, UPRR and/or PURR bits are set to \"1\", the Remote GTP-U Peer IEs in the User Plane Path Failure Report IE, in the User Plane Path Recovery Report IE and/or Peer UP Restart Report IE are different.\nNOTE 2:\tA Vendor-Specific Report can be used in the PFCP Node Report Request message by non-3GPP Standards Development Organizations for interfaces relying on PFCP as the protocol for Control and User Plane Separation, for reports not defined by 3GPP. See clauses 5.9 and 8.1.1 for the definition and usage of Vendor Specific IEs.",
      "chunk_type": "requirement",
      "cross_references": [
        "figure_8.2.69-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.70",
      "section_id": "8.2.70",
      "section_title": "Remote GTP-U Peer",
      "content": "The Remote GTP-U Peer IE shall be encoded as depicted in Figure 8.2.70-1.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 103 (decimal)\n3 to 4\nLength = n\n5\nSpare\nRTS\nNI\nDI\nV4\nV6\nm to (m+3)\nIPv4 address\np to (p+15)\nIPv6 address\nq to (q+1)\nLength of Destination Interface field\n(q+2) to r\nDestination Interface field\ns to (s+1)\nLength of Network Instance field\n(s+2) to t\nNetwork Instance field\nu to (u+3)\nRecovery Timestamp\nk to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.70-1: Remote GTP-U Peer\nThe following flags are coded within Octet 5:\n-\tBit 1 – V6: If this bit is set to \"1\", then the IPv6 address field shall be present, otherwise the IPv6 address field shall not be present.\n-\tBit 2 – V4: If this bit is set to \"1\", then the IPv4 address field shall be present, otherwise the IPv4 address field shall not be present.\n-\tBit 3 – DI: If this bit is set to \"1\", then the Length of Destination Interface field and the Destination Interface field shall be present, otherwise both the Length of Destination Interface field and the Destination Interface field shall not be present.\n-\tBit 4 – NI: If this bit is set to \"1\", then the Length of Network Instance field and the Network Instance field shall be present, otherwise both the Length of Network Instance field and the Network Instance field shall not be present.\n-\tBit 5 – RTS: If this bit is set to \"1\", then the Recovery Timestamp field shall be present.\n-\tBit 6 to 8 - Spare, for future use and set to \"0\".\nEither the V4 or the V6 bit shall be set to \"1\".\nOctets \"m to (m+3)\" and/or \"p to (p+15)\" (IPv4 address / IPv6 address fields), if present, shall contain the respective address values.\nThe Destination Interface field, when present, shall be encoded as the same as Destination Interface IE (from octet 5, i.e. excluding Type and Length) specified in clause 8.2.24.\nThe Network Instance field, when present, shall be encoded as the same as Network Instance IE (from octet 5, i.e. excluding Type and Length) specified in clause 8.2.4.\nThe Recovery Timestamp field shall contain the Recovery Timestamp of the peer GTP-U entity, and when present, shall be encoded as the same as the Time Stamp IE (from octet 5, i.e. excluding Type and Length) specified in clause 8.2.114.",
      "chunk_type": "requirement",
      "cross_references": [
        "clause_8.2.24",
        "clause_8.2.4",
        "clause_8.2.114",
        "figure_8.2.70-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.71",
      "section_id": "8.2.71",
      "section_title": "UR-SEQN",
      "content": "The UR-SEQN (Usage Report Sequence Number) IE identifies the order in which a usage report is generated for a given URR. It shall be encoded as shown in Figure 8.2.71-1.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 104 (decimal)\n3 to 4\nLength = n\n5 to 8\nUR-SEQN\nFigure 8.2.71-1: UR-SEQN\nThe UR-SEQN value shall be encoded as an Unsigned32 binary integer value.",
      "chunk_type": "requirement",
      "cross_references": [
        "figure_8.2.71-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.72",
      "section_id": "8.2.72",
      "section_title": "Activate Predefined Rules",
      "content": "The Activate Predefined Rules IE type shall be coded as shown in Figure 8.2.72-1. It shall indicate a Predefined Rules Name, referring to one or more predefined rules which need to be activated in the UP function.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 106 (decimal)\n3 to 4\nLength = n\n5 to (n+4)\nPredefined Rules Name\nFigure 8.2.72-1: Activate Predefined Rules\nThe Predefined Rules Name field shall be encoded as an OctetString.",
      "chunk_type": "requirement",
      "cross_references": [
        "figure_8.2.72-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.73",
      "section_id": "8.2.73",
      "section_title": "Deactivate Predefined Rules",
      "content": "The Deactivate Predefined Rules IE type shall be coded as shown in Figure 8.2.73-1. It shall indicate a Predefined Rules Name, referring to one or more predefined rules which need to be deactivated in the UP function.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 107 (decimal)\n3 to 4\nLength = n\n5 to (n+4)\nPredefined Rules Name\nFigure 8.2.73-1: Deactivate Predefined Rules\nThe Predefined Rules Name field shall be encoded as an OctetString.",
      "chunk_type": "requirement",
      "cross_references": [
        "figure_8.2.73-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.74",
      "section_id": "8.2.74",
      "section_title": "FAR ID",
      "content": "The FAR ID IE type shall be encoded as shown in Figure 8.2.74-1. It shall contain a Forwarding Action Rule ID.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 108 (decimal)\n3 to 4\nLength = n\n5 to 8\nFAR ID value\n9 to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.74-1: FAR ID\nThe FAR ID value shall be encoded as an Unsigned32 binary integer value.\nThe bit 8 of octet 5 is used to indicate if the Rule ID is dynamically allocated by the CP function or predefined in the UP function. If set to \"0\", it indicates that the Rule is dynamically provisioned by the CP Function. If set to \"1\", it indicates that the Rule is predefined in the UP Function.",
      "chunk_type": "requirement",
      "cross_references": [
        "figure_8.2.74-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.75",
      "section_id": "8.2.75",
      "section_title": "QER ID",
      "content": "The QER ID IE type shall be encoded as shown in Figure 8.2.75-1. It shall contain a QoS Enforcement Rule ID.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 109 (decimal)\n3 to 4\nLength = n\n5 to 8\nQER ID value\n9 to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.75-1: QER ID\nThe QER ID value shall be encoded as an Unsigned32 binary integer value.\nThe bit 8 of octet 5 is used to indicate if the Rule ID is dynamically allocated by the CP function or predefined in the UP function. If set to \"0\", it indicates that the Rule is dynamically provisioned by the CP Function. If set to \"1\", it indicates that the Rule is predefined in the UP Function.",
      "chunk_type": "requirement",
      "cross_references": [
        "figure_8.2.75-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.76",
      "section_id": "8.2.76",
      "section_title": "OCI Flags",
      "content": "The OCI Flags IE shall contain the flags for overload control related information. It shall be encoded as shown in Figure 8.2.76-1.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 110 (decimal)\n3 to 4\nLength = n\n5\nSpare\nAOCI\n6 to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.76-1: OCI Flags\nThe following flags are coded within Octet 5:\n-\tBit 1 – AOCI: Associate OCI with Node ID: The UP function shall set this flag to \"1\" if it has included the \"Overload Control Information\" and if this information is to be associated with the Node ID (i.e. FQDN or the IP address used during the UP function selection) of the serving UP function. This flag shall be set to \"1\" by the UP function, if the \"Overload Control Information\" is included in the PFCP Session Establishment Response and the Cause IE is set to a rejection cause value.\n-\tBit 2 to 8: Spare, for future use and set to \"0\".",
      "chunk_type": "requirement",
      "cross_references": [
        "figure_8.2.76-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.77",
      "section_id": "8.2.77",
      "section_title": "PFCP Association Release Request",
      "content": "The PFCP Association Release Request IE shall be encoded as shown in Figure 8.2.77-1.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 111 (decimal)\n3 to 4\nLength = n\n5\nSpare\nURSS\nSARR\n6 to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.77-1: PFCP Association Release Request\nThe following flags are coded within Octet 5:\n-\tBit 1 – SARR (PFCP Association Release Request): If this bit is set to \"1\", then the UP function requests the release of the PFCP association.\n-\tBit 2 – URSS (non-zero Usage Reports for the affected PFCP Sessions Sent): If this bit is set to \"1\", it indicates that the UP function has sent all the non-zero usage reports to the CP function for all PFCP essions affected by the PFCP Association Release.\n-\tBit 3 to 8: Spare, for future use and set to \"0\".",
      "chunk_type": "requirement",
      "cross_references": [
        "figure_8.2.77-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.78",
      "section_id": "8.2.78",
      "section_title": "Graceful Release Period",
      "content": "The purpose of the Graceful Release Period IE is to specify a specific time for a graceful release. The Graceful Release Period IE shall be encoded as shown in Figure 8.2.78-1 and table 8.2.78.1.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 112 (decimal)\n3 to 4\nLength = n\n5\nTimer unit\nTimer value\n6 to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.78-1: Graceful Release Period\nTable 8.2.78.1: Graceful Release Period information element\nTimer value\nBits 5 to 1 represent the binary coded timer value.\nTimer unit\nBits 6 to 8 defines the timer value unit for the timer as follows:\nBits\n8 7 6\n0 0 0  value is incremented in multiples of 2 seconds\n0 0 1  value is incremented in multiples of 1 minute\n0 1 0  value is incremented in multiples of 10 minutes\n0 1 1  value is incremented in multiples of 1 hour\n1 0 0  value is incremented in multiples of 10 hours\n1 1 1  value indicates that the timer is infinite\nOther values shall be interpreted as multiples of 1 minute in this version of the protocol.\nTimer unit and Timer value both set to all \"zeros\" shall be interpreted as an indication that the timer is stopped.",
      "chunk_type": "requirement",
      "cross_references": [
        "table_8.2.78.1",
        "figure_8.2.78-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.79",
      "section_id": "8.2.79",
      "section_title": "PDN Type",
      "content": "The PDN Type IE shall be encoded as shown in Figure 8.2.79-1. It indicates the type of a PDN connection (IP, Ethernet or Unstructured).\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 113 (decimal)\n3 to 4\nLength = n\n5\nSpare\nPDN Type\n6 to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.79-1: PDN Type\nThe PDN Type shall be encoded as a 3 bits binary integer value as specified in Table 8.2.79-1.\nTable 8.2.79-1: PDN Type\nPDN Type\nValue (Decimal)\nIPv4\n1\nIPv6\n2\nIPv4v6\n3\nNon-IP\n4\nEthernet\n5\nFor future use. Shall not be sent.\n0, 6, 7",
      "chunk_type": "requirement",
      "cross_references": [
        "table_8.2.79-1",
        "figure_8.2.79-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.80",
      "section_id": "8.2.80",
      "section_title": "Failed Rule ID",
      "content": "The Failed Rule ID IE type shall be encoded as shown in Figure 8.2.80-1. It shall identify the Rule which failed to be created or modified.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 114 (decimal)\n3 to 4\nLength = n\n5\nSpare\nRule ID Type\n6 to p\nRule ID value\n(p+1) to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.80-1: Failed Rule ID\nThe Rule ID Type shall be encoded as a 5 bits binary integer value as specified in Table 8.2.80-1.\nTable 8.2.80-1: Rule ID Type\nRule ID Type\nValue (Decimal)\nPDR\n0\nFAR\n1\nQER\n2\nURR\n3\nBAR\n4\nMAR\n5\nSRR\n6\nFor future use. Shall not be sent. If received, shall be interpreted as the value \"1\".\n7 to 31\nThe length and the value of the Rule ID value field shall be set as specified for the PDR ID, FAR ID, QER ID, URR ID , BAR ID, MAR ID and SRR ID IE types respectively.",
      "chunk_type": "requirement",
      "cross_references": [
        "table_8.2.80-1",
        "figure_8.2.80-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.81",
      "section_id": "8.2.81",
      "section_title": "Time Quota Mechanism",
      "content": "The Time Quota Mechanism type shall be encoded as shown in Figure 8.2.81-1.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 115 (decimal)\n3 to 4\nLength = n\n5\nSpare\nBTIT\nm to (m+3)\nBase Time Interval\nw to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.81-1: Time Quota Mechanism\nBTIT (Base Time Interval Type) indicates the type of the interval to be provided in the Base Time Interval field.\nTable 8.2.81-1: Base Time Interval Type\nBase Time Interval Type\nValue (Decimal)\nCTP\n0\nDTP\n1\nSpare, for future use.\n2 to 3\nThe Base Time Interval, shall be encoded as Unsigned32 as specified in clause 7.2.29 of 3GPP TS 32.299 [18].",
      "chunk_type": "requirement",
      "cross_references": [
        "ts_32.299_clause_7.2.29",
        "table_8.2.81-1",
        "figure_8.2.81-1",
        "ts_32.299"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.83",
      "section_id": "8.2.83",
      "section_title": "User Plane Inactivity Timer",
      "content": "The User Plane Inactivity Timer IE contains the inactivity time period, in seconds, to be monitored by the UP function. It shall be encoded as shown in Figure 8.2.83-1.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 117 (decimal)\n3 to 4\nLength = n\n5 to 8\nUser Plane Inactivity Timer\n9 to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.83-1: User Plane Inactivity Timer\nThe User Plane Inactivity Timer field shall be encoded as an Unsigned32 binary integer value. The timer value \"0\" shall be interpreted as an indication that user plane inactivity detection and reporting is stopped.",
      "chunk_type": "requirement",
      "cross_references": [
        "figure_8.2.83-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.84",
      "section_id": "8.2.84",
      "section_title": "Multiplier",
      "content": "The Multiplier IE type shall be encoded as shown in Figure 8.2.84-1. It contains a Multiplier (see IETF RFC 4006 [16]) to measure the abstract service units the traffic of an aggregated URR consumes from the credit pool.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 119 (decimal)\n3 to 4\nLength = 12\n5 to 12\nValue-Digits\n13 to 16\nExponent\nFigure 8.2.84-1: Multiplier\nThe Value-Digit value and Exponent value shall be encoded as binary integer value, and set the value as in Value-Digit AVP and Exponent AVP as specified in 3GPP TS 32.299 [18].",
      "chunk_type": "requirement",
      "cross_references": [
        "figure_8.2.84-1",
        "ts_32.299"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.85",
      "section_id": "8.2.85",
      "section_title": "Aggregated URR ID IE",
      "content": "The Aggregated URR ID IE type shall be encoded as shown in Figure 8.2.85-1. It contains a URR ID.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 120 (decimal)\n3 to 4\nLength = 4\n5 to 8\nURR ID value\nFigure 8.2.85-1: Aggregated URR ID\nEach URR ID value shall be encoded as an Unsigned32 binary integer value.",
      "chunk_type": "requirement",
      "cross_references": [
        "figure_8.2.85-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.86",
      "section_id": "8.2.86",
      "section_title": "Subsequent Volume Quota",
      "content": "The Subsequent Volume Quota IE type shall be encoded as shown in Figure 8.2.86-1. It contains the volume quota to be monitored by the UP function after the Monitoring Time.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 121 (decimal)\n3 to 4\nLength = n\n5\nSpare\nDLVOL\nULVOL\nTOVOL\nm to (m+7)\nTotal Volume\np to (p+7)\nUplink Volume\nq to (q+7)\nDownlink Volume\nS to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.86-1: Subsequent Volume Quota\nThe following flags are coded within Octet 5:\n-\tBit 1 – TOVOL: If this bit is set to \"1\", then the Total Volume field shall be present, otherwise the Total Volume field shall not be present.\n-\tBit 2 – ULVOL: If this bit is set to \"1\", then the Uplink Volume field shall be present, otherwise the Uplink Volume field shall not be present.\n-\tBit 3 – DLVOL: If this bit is set to \"1\", then the Downlink Volume field shall be present, otherwise the Downlink Volume field shall not be present.\n-\tBit 4 to bit 8: Spare, for future use and set to \"0\".\nAt least one bit shall be set to \"1\". Several bits may be set to \"1\".\nThe Total Volume, Uplink Volume and Downlink Volume fields shall be encoded as an Unsigned64 binary integer value. They shall contain the total, uplink or downlink number of octets respectively.",
      "chunk_type": "requirement",
      "cross_references": [
        "figure_8.2.86-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.87",
      "section_id": "8.2.87",
      "section_title": "Subsequent Time Quota",
      "content": "The Subsequent Time Quota IE type shall be encoded as shown in Figure 8.2.87-1. It contains the time quota to be monitored by the UP function after the Monitoring Time.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 122 (decimal)\n3 to 4\nLength = n\n5 to 8\nTime Quota value\n9 to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.87-1: Subsequent Time Quota\nThe Time Quota value shall be encoded as an Unsigned32 binary integer value. It contains a duration in seconds.",
      "chunk_type": "requirement",
      "cross_references": [
        "figure_8.2.87-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.88",
      "section_id": "8.2.88",
      "section_title": "RQI",
      "content": "The Reflective QoS Indicator (RQI) IE shall be encoded as shown in Figure 8.2.88-1. It indicates if Reflective QoS applies for the UL.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 123 (decimal)\n3 to 4\nLength = n\n5\nSpare\nRQI\n6 to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.88-1: RQI\nThe value of RQI flag shall be set as follows:\n-\tRQI set to 0: deactivate Reflective QoS;\n-\tRQI set to 1: activate Reflective QoS.\nSee also clause 5.5.3.4 of 3GPP TS 38.415 [34].",
      "chunk_type": "requirement",
      "cross_references": [
        "ts_38.415_clause_5.5.3.4",
        "figure_8.2.88-1",
        "ts_38.415"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.89",
      "section_id": "8.2.89",
      "section_title": "QFI",
      "content": "The QFI IE type shall be encoded as shown in Figure 8.2.89-1. It contains an QoS flow identifier identifying a QoS flow in a 5G system filter.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 124 (decimal)\n3 to 4\nLength = n\n5\nSpare\nQFI value\np to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.89-1: QFI\nThe QFI value shall be encoded as binary integer value, as specified in clause 5.5.3.3 of 3GPP TS 38.415 [34].",
      "chunk_type": "requirement",
      "cross_references": [
        "ts_38.415_clause_5.5.3.3",
        "figure_8.2.89-1",
        "ts_38.415"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.90",
      "section_id": "8.2.90",
      "section_title": "Query URR Reference",
      "content": "The Query URR Reference IE type shall be encoded as shown in Figure 8.2.90-1. It shall contain the reference of a query request for URR(s).\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 125 (decimal)\n3 to 4\nLength = n\n5 to 8\nQuery URR Reference value\n9 to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.90-1: Query URR Reference\nThe Query URR Reference value shall be encoded as an Unsigned32 binary integer value.",
      "chunk_type": "requirement",
      "cross_references": [
        "figure_8.2.90-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.91",
      "section_id": "8.2.91",
      "section_title": "Additional Usage Reports Information",
      "content": "The Additional Usage Reports Information IE type shall be encoded as shown in Figure 8.2.91-1. It shall either indicate that additional usage reports will follow, or contain the total number of usage reports that need to be sent in all the additional PFCP Session Report Request messages after the PFCP Session Modification Response or PFCP Session Deletion Response (see clause 5.2.2.3.1).\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 126 (decimal)\n3 to 4\nLength = n\n5\nAURI\nNumber of Additional Usage Reports value\n6\nNumber of Additional Usage Reports value\n7 to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.91-1: Additional Usage Reports Information\nThe Number of Additional Usage Reports value shall be encoded as an unsigned binary integer value on 15 bits. Bit 7 of Octet 5 is the most significant bit and bit 1 of Octet 6 is the least significant bit.\nThe bit 8 of octet 5 shall encode the AURI (Additional Usage Reports Indication) flag:\n-\twhen set to \"1\", it indicates that additional usage reports will follow. In this case, the Number of Additional Usage Reports value shall be set to \"0\" by the sender and ignored by the receiver;\n-\twhen set to \"0\", the Number of Additional Usage Reports value shall be set to the total number of additional usage reports to be sent in PFCP Session Report Request messages.",
      "chunk_type": "requirement",
      "cross_references": [
        "clause_5.2.2.3.1",
        "figure_8.2.91-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.92",
      "section_id": "8.2.92",
      "section_title": "Traffic Endpoint ID",
      "content": "The Traffic Endpoint ID IE type shall be encoded as shown in Figure 8.2.92-1. It shall contain a Traffic Endpoint ID.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 131 (decimal)\n3 to 4\nLength = n\n5\nTraffic Endpoint ID value\n6 to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.92-1: Traffic Endpoint ID\nThe Traffic Endpoint ID value shall be encoded as a binary integer value within the range of 0 to 255.",
      "chunk_type": "requirement",
      "cross_references": [
        "figure_8.2.92-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.93",
      "section_id": "8.2.93",
      "section_title": "MAC address",
      "content": "The MAC address IE shall be encoded as shown in Figure 8.2.93-1. It shall contain an MAC address value.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 133 (decimal)\n3 to 4\nLength = n\n5\nspare\nUDES\nUSOU\nDEST\nSOUR\nm to (m+5)\nSource MAC address value\nn to (n+5)\nDestination MAC address value\no to (o+5)\nUpper Source MAC address value\np to (p+5)\nUpper Destination MAC address value\ns to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.93-1: MAC address\nThe following flags are coded within Octet 5:\n-\tBit 1 – SOUR (Source): If this bit is set to \"1\", then the source MAC address value is provided.\n-\tBit 2 – DEST (Destination): If this bit is set to \"1\", then the destination MAC address value is provided.\n-\tBit 3 – USOU (Source): If this bit is set to \"1\", then the source MAC address value contains the lower value and Upper Source MAC address value contains the upper value of an MAC address range.\n-\tBit 4 – UDES (Destination): If this bit is set to \"1\", then the destination MAC address value contains the lower value and Upper Destination MAC address value contains the upper value of an MAC address range.-\tBit 5 to 8: Spare, for future use and set to \"0\".\nOctets \"m to (m+5)\" or \"n to (n+5)\" and \"o to (o+5)\" or \"p to (p+5)\", if present, shall contain an MAC address value (12-digit hexadecimal numbers).",
      "chunk_type": "requirement",
      "cross_references": [
        "figure_8.2.93-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.94",
      "section_id": "8.2.94",
      "section_title": "C-TAG (Customer-VLAN tag)",
      "content": "The C-TAG IE shall be encoded as shown in Figure 8.2.94-1. It shall contain the Customer-VLAN tag (C-TAG) as defined in IEEE 802.1Q [30].\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 134 (decimal)\n3 to 4\nLength = n\n5\nSpare\nVID\nDEI\nPCP\n6\nC-VID value\nDEI Flag\nPCP value\n7\nC-VID Value\n8 to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.94-1: C-TAG (Customer-VLAN tag)\nThe following flags are coded within Octet 5:\n-\tBit 1 – PCP: If this bit is set to \"1\", then PCP Value field shall used by the receiver, otherwise the PCP Value field shall be ignored.\n-\tBit 2 – DEI: If this bit is set to \"1\", then DEI flag field shall used by the receiver, otherwise the DEI flag field shall be ignored.\n-\tBit 3 – VID: If this bit is set to \"1\", then C-VID value field shall used by the receiver, otherwise the VID Value field shall be ignored.\n-\tBit 4 to 8 – spare and reserved for future use.\nThe PCP value, DEI flag and C-VID Value are specified in IEEE 802.1Q [30] tag format.\nOctet 6 / Bit 3 shall contain the most significant bit of the PCP value.\nOctet 6 / Bit 8 shall be the most significant bit of the C-VID value and Octet 7 / Bit 1 shall be the least significant bit (see clause 7.1).\nNOTE:\tThe encoding of the C-Tag in PFCP differs from the encoding of the C-Tag defined in IEEE 802.1Q [30].",
      "chunk_type": "requirement",
      "cross_references": [
        "clause_7.1",
        "figure_8.2.94-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.95",
      "section_id": "8.2.95",
      "section_title": "S-TAG (Service-VLAN tag)",
      "content": "The S-TAG IE type shall be encoded as shown in Figure 8.2.95-1. It shall contain Service-VLAN tag (S-TAG) as defined in IEEE 802.1Q [30]\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 135 (decimal)\n3 to 4\nLength = n\n5\nSpare\nVID\nDEI\nPCP\n6\nS-VID value\nDEI Flag\nPCP value\n7\nS-VID value\n8 to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.95-1: S-TAG (Service-VLAN tag)\nThe following flags are coded within Octet 5:\n-\tBit 1 – PCP: If this bit is set to \"1\", then PCP Value field shall used by the receiver, otherwise the PCP Value field shall be ignored.\n-\tBit 2 – DEI: If this bit is set to \"1\", then DEI flag field shall used by the receiver, otherwise the DEI flag field shall be ignored.\n-\tBit 3 – VID: If this bit is set to \"1\", then VID value field shall used by the receiver, otherwise the VID Value field shall be ignored.\n-\tBit 4 to 8 – spare and reserved for future use.\nThe PCP value, DEI flag and S-VID Value are specified in IEEE 802.1Q [30] tag format.\nOctet 6 / Bit 3 shall contain the most significant bit of the PCP value.\nOctet 6 / Bit 8 shall be the most significant bit of the S-VID value and Octet 7 / Bit 1 shall be the least significant bit (see clause 7.1).\nNOTE:\tThe encoding of the S-Tag in PFCP differs from the encoding of the S-Tag defined in IEEE 802.1Q [30].",
      "chunk_type": "requirement",
      "cross_references": [
        "clause_7.1",
        "figure_8.2.95-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.96",
      "section_id": "8.2.96",
      "section_title": "Ethertype",
      "content": "The Ethertype IE type shall be encoded as shown in Figure 8.2.96-1. It contains an Ethertype as defined in IEEE 802.3 [31].\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 136 (decimal)\n3 to 4\nLength = n\n5 to 6\nEthertype\n7 to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.96-1: Ethertype",
      "chunk_type": "requirement",
      "cross_references": [
        "figure_8.2.96-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.97",
      "section_id": "8.2.97",
      "section_title": "Proxying",
      "content": "The Proxying IE shall be encoded as shown in Figure 8.2.97-1. It specifies if responding to Address Resolution Protocol (ARP) (see IETF RFC 826 [32]) and / or IPv6 Neighbour Solicitation (see IETF RFC 4861 [33]) as specified in clause 5.6.10.2 of 3GPP TS 23.501 [28], functionality for the Ethernet PDUs is performed in UPF.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 137 (decimal)\n3 to 4\nLength = n\n5\nSpare\nINS\nARP\n6 to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.97-1: Proxying\nThe following flags are coded within Octet 5:\n-\tBit 1 – ARP: If this bit is set to \"1\", then responding ARP is performed in UPF based on local cache information.\n-\tBit 2 – INS: If this bit is set to \"1\", then responding to IPv6 Neighbour Solicitation is performed in UPF based on local cache information.\n-\tBit 3 to 8 – spare and reserved for future use.",
      "chunk_type": "requirement",
      "cross_references": [
        "ts_23.501_clause_5.6.10.2",
        "figure_8.2.97-1",
        "ts_23.501"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.98",
      "section_id": "8.2.98",
      "section_title": "Ethernet Filter ID",
      "content": "The Ethernet Filter ID IE type shall be encoded as shown in Figure 8.2.98-1.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 138 (decimal)\n3 to 4\nLength = n\n5 to 8\nEthernet Filter ID value\n10 to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.98-1: Ethernet Filter ID\nThe Ethernet Filter ID value shall be encoded as an Unsigned32 binary integer value.",
      "chunk_type": "requirement",
      "cross_references": [
        "figure_8.2.98-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.99",
      "section_id": "8.2.99",
      "section_title": "Ethernet Filter Properties",
      "content": "The Ethernet Filter Properties IE type shall be encoded as shown in Figure 8.2.99-1.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 139 (decimal)\n3 to 4\nLength = n\n5\nSpare\nBIDE\n6 to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.99-1: Ethernet Filter Properties\nThe following flags are coded within Octet 5:\n-\tBit 1 – BIDE (Bidirectional Ethernet Filter): If this bit is set to \"1\", then the Ethernet Filter identified by the Ethernet Filter ID is bidirectional.\n-\tBit 2 to 8 – spare and reserved for future use.",
      "chunk_type": "requirement",
      "cross_references": [
        "figure_8.2.99-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.100",
      "section_id": "8.2.100",
      "section_title": "Suggested Buffering Packets Count",
      "content": "The Suggested Buffering Packets Count IE indicates the number of packets (including both UL and DL packets) that are suggested to be buffered by the UP function while waiting for the new instruction from the CP function. It is coded as depicted in Figure 8.2.100-1.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 140 (decimal)\n3 to 4\nLength = n\n5\nPacket Count value\n6 to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.100-1: Suggested Buffering Packets Count\nThe Packet Count value is encoded in octet 5 and the range of the Packet Count value is from 0 to 255.",
      "chunk_type": "general",
      "cross_references": [
        "figure_8.2.100-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.101",
      "section_id": "8.2.101",
      "section_title": "User ID",
      "content": "The User ID IE type shall be encoded as shown in Figure 8.2.101-1.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 141 (decimal)\n3 to 4\nLength = n\n5\nSpare\nPEIF\nGPSIF\nSUPIF\nNAIF\nMSISDNF\nIMEIF\nIMSIF\n6\nLength of IMSI\n7 to a\nIMSI\nb\nLength of IMEI\n(b+1) to c\nIMEI\nd\nLength of MSISDN\n(d+1) to e\nMSISDN\nf\nLength of NAI\n(f+1) to g\nNAI\nh\nLength of SUPI\n(h+1) to i\nSUPI\nj\nLength of GPSI\n(j+1) to k\nGPSI\nl\nLength of PEI\n(l+1) to m\nPEI\np to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.101-1: User ID\nThe following flags are coded within Octet 5:\n-\tBit 1 – IMSIF: If this bit is set to \"1\", then the Length of IMSI and IMSI fields shall be present, otherwise these fields shall not be present.\n-\tBit 2 – IMEIF: If this bit is set to \"1\", then the Length of IMEI and IMEI fields shall be present, otherwise these fields shall not be present.\n-\tBit 3 – MSISDNF: If this bit is set to \"1\", then the Length of MSISDN and MSISDN fields shall be present, otherwise these fields shall not be present.\n-\tBit 4 – NAIF: If this bit is set to \"1\", then the Length of NAI and NAI fields shall be present, otherwise these fields shall not be present.\n-\tBit 5 – SUPIF: If this bit is set to \"1\", then the Length of SUPI and SUPI fields shall be present, otherwise these fields shall not be present.\n-\tBit 6 – GPSIF: If this bit is set to \"1\", then the Length of GPSI and GPSI fields shall be present, otherwise these fields shall not be present.\n-\tBit 7 – PEIF: If this bit is set to \"1\", then the Length of PEI and PEI fields shall be present, otherwise these fields shall not be present.-\tBit 8: Spare, for future use and set to \"0\".\nOne or more flags may be set to \"1\".\nFor 5GS User Identities:\n-\tThe SUPI field shall only be used for carrying a Global Cable Identifier (GCI) or a Global Line Identifier (GLI). The IMSI and NAI, if received by the SMF in the SUPI, shall be included in the IMSI and NAI field respectively.\n-\tThe GPSI field shall only be used for carrying an External Identifier. The MSISDN, if received by the SMF in the SUPI, shall be included in the MSISDN field.\n-\tThe PEI field shall only be used for carrying an MAC address or an Extended Unique Identifier. The IMEI, if received by the SMF in the PEI, shall be included in the IMEI field.\nThe coding of IMSI field, from octets 7 to 'a' shall be encoded as the octets 5 to n+4 of the IMSI IE type specified in clause 8.3 of 3GPP TS 29.274 [9].\nThe coding of IMEI field, in octets 'b+1' to 'c' shall be encoded as the octets 5 to n+4 of the MEI IE type specified in clause 8.10 of 3GPP TS 29.274 [9].\nThe coding of MSISDN field, in octets 'd+1' to 'e' shall be encoded as the octets 5 to n+4 of the MSISDN IE type specified in clause 8.11 of 3GPP TS 29.274 [9].\nThe coding of the SUPI field, in octets 'h+1' to 'i' shall be encoded as the Supi data type specified in clause 5.3.2 of 3GPP TS 29.571 [61].\nThe coding of the GPSI field, in octets 'j+1' to 'k' shall be encoded as the Gpsi data type specified in clause 5.3.2 of 3GPP TS 29.571 [61].\nThe coding of the PEI field, in octets 'l+1' to 'm' shall be encoded as the Pei data type specified in clause 5.3.2 of 3GPP TS 29.571 [61].\nThe NAI field, in octets 'f+1' to 'g' shall be encoded as an Octet String (see IETF RFC 4282 [36]).",
      "chunk_type": "requirement",
      "cross_references": [
        "ts_29.274_clause_8.3",
        "ts_29.274_clause_8.10",
        "ts_29.274_clause_8.11",
        "ts_29.571_clause_5.3.2",
        "figure_8.2.101-1",
        "ts_29.274",
        "ts_29.571"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.102",
      "section_id": "8.2.102",
      "section_title": "Ethernet PDU Session Information",
      "content": "Ethernet PDU Session Indication is coded as depicted in Figure 8.2.102-1.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 142 (decimal)\n3 to 4\nLength = n\n5\nSpare\nETHI\nk to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.102-1: Ethernet PDU Session Information\nThe following flags are coded within Octet 5:\n-\tBit 1 – ETHI (Ethernet Indication): This bit shall be set to \"1\". This refers to all the DL traffic matching the Ethernet PDU session (see clause 5.13.1).\n-\tBit 2 to 8 are spare and reserved for future use.",
      "chunk_type": "general",
      "cross_references": [
        "clause_5.13.1",
        "figure_8.2.102-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.103",
      "section_id": "8.2.103",
      "section_title": "MAC Addresses Detected",
      "content": "The MAC Addresses Detected IE shall be encoded as shown in Figure 8.2.103-1. It shall contain a list of MAC address values.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 144 (decimal)\n3 to 4\nLength = n\n5\nNumber of MAC addresses (k)\n6 to 11\nMAC address value 1\no to (o+5)\nMAC address value 2\np to (p+5)\n…\nq to (q+5)\nMAC address value k\ns\nLength of C-TAG field\n(s+1) to t\nC-TAG\nu\nLength of S-TAG field\n(u+1) to v\nS-TAG\nw to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.103-1: MAC addresses Detected\nOctet 5 shall encode the number of 48-bit MAC addresses.\nMAC address values shall be encoded as 12-digit hexadecimal numbers.\nThe Length of C-TAG field shall indicate the length of the C-TAG field. It shall be set to 0 if the C-TAG field is absent.\nWhen present, the C-TAG field shall be encoded as the Customer-VLAN tag defined in clause 8.2.94, excluding octets 1 to 4.\nThe Length of S-TAG field shall indicate the length of the S-TAG field. It shall be set to 0 if the S-TAG field is absent.\nWhen present, the S-TAG field shall be encoded as the Service-VLAN Tag defined in clause 8.2.95, excluding octets 1 to 4.",
      "chunk_type": "requirement",
      "cross_references": [
        "clause_8.2.94",
        "clause_8.2.95",
        "figure_8.2.103-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.104",
      "section_id": "8.2.104",
      "section_title": "MAC Addresses Removed",
      "content": "The MAC Addresses Removed IE shall be encoded as shown in Figure 8.2.104-1. It shall contain a list of MAC address values.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 145 (decimal)\n3 to 4\nLength = n\n5\nNumber of MAC addresses (k)\n6 to 11\nMAC address value 1\no to (o+5)\nMAC address value 2\np to (p+5)\n…\nq to (q+5)\nMAC address value k\ns\nLength of C-TAG field\n(s+1) to t\nC-TAG\nu\nLength of S-TAG field\n(u+1) to v\nS-TAG\nw to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.104-1: MAC addresses Removed\nOctet 5 shall encode the number of 48-bit MAC addresses.\nMAC address values shall be encoded as 12-digit hexadecimal numbers.\nThe Length of C-TAG field shall indicate the length of the C-TAG field. It shall be set to 0 if the C-TAG field is absent.\nWhen present, the C-TAG field shall be encoded as the Customer-VLAN tag defined in clause 8.2.94, excluding octets 1 to 4.\nThe Length of S-TAG field shall indicate the length of the S-TAG field. It shall be set to 0 if the S-TAG field is absent.\nWhen present, the S-TAG field shall be encoded as the Service-VLAN Tag defined in clause 8.2.95, excluding octets 1 to 4.",
      "chunk_type": "requirement",
      "cross_references": [
        "clause_8.2.94",
        "clause_8.2.95",
        "figure_8.2.104-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.105",
      "section_id": "8.2.105",
      "section_title": "Ethernet Inactivity Timer",
      "content": "The Ethenet Inactivity Timer IE contains the inactivity time period, in seconds, to be monitored by the UP function, to detect that a UE MAC address is inactive. It shall be encoded as shown in Figure 8.2.105-1.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 146 (decimal)\n3 to 4\nLength = n\n5 to 8\nEthernet Inactivity Timer\n9 to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.105-1: Ethernet Inactivity Timer\nThe Ethernet Inactivity Timer field shall be encoded as an Unsigned32 binary integer value.",
      "chunk_type": "requirement",
      "cross_references": [
        "figure_8.2.105-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.106",
      "section_id": "8.2.106",
      "section_title": "Subsequent Event Quota",
      "content": "The Subsequent Event Quota IE type shall be encoded as shown in Figure 8.2.106-1. It contains the event quota to be monitored by the UP function.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 150 (decimal)\n3 to 4\nLength = n\n5 to 8\nSubsequent Event Quota\n9 to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.106-1: Subsequent Event Quota\nThe Subsequent Event Quota field shall be encoded as an Unsigned32 binary integer value.",
      "chunk_type": "requirement",
      "cross_references": [
        "figure_8.2.106-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.107",
      "section_id": "8.2.107",
      "section_title": "Subsequent Event Threshold",
      "content": "The Subsequent Event Threshold IE contains the Number of events after which the measurement report is to be generated by the UP function. It shall be encoded as shown in Figure 8.2.107-1.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 151 (decimal)\n3 to 4\nLength = n\n5 to 8\nSubsequent Event Threshold\n9 to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.107-1: Subsequent Event Threshold\nThe Subsequent Event Threshold field shall be encoded as an Unsigned32 binary integer value.",
      "chunk_type": "requirement",
      "cross_references": [
        "figure_8.2.107-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.108",
      "section_id": "8.2.108",
      "section_title": "Trace Information",
      "content": "The Trace Information IE type shall be encoded as shown in Figure 8.2.108-1. It contains the trace control and configuration parameters to apply for the PFCP session.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 152 (decimal)\n3 to 4\nLength = n\n5\nMCC digit 2\nMCC digit 1\n6\nMNC digit 3\nMCC digit 3\n7\nMNC digit 2\nMNC digit 1\n8 to10\nTrace ID\n11\nLength of Triggering Events\n12 to m\nTriggering Events\nm+1\nSession Trace Depth\nm+2\nLength of List of Interfaces\n(m+3) to p\nList of Interfaces\np+1\nLength of IP Address of Trace Collection Entity\n(p+2) to q\nIP Address of Trace Collection Entity\n(q+1) to (n-4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.108-1: Trace Information\nOctets 5 to 10 represent the Trace Reference parameter as defined in clause 5.6 of 3GPP TS 32.422 [35].\nTriggering Events, Session Trace Depth, List of Interfaces and IP Address of Trace Collection Entity are specified in 3GPP TS 32.422 [35].\nOctets \"(p+2) to q\" shall contain an IPv4 address value (4 octets) or IPv6 address value (16 octets).\nSee 3GPP TS 24.008 [5], clause 10.5.1.4, Mobile Identity, for the coding of MCC and MNC. If MNC is 2 digits long, bits 5 to 8 of octet 6 are coded as \"1111\".",
      "chunk_type": "requirement",
      "cross_references": [
        "ts_32.422_clause_5.6",
        "ts_24.008_clause_10.5.1.4",
        "figure_8.2.108-1",
        "ts_32.422",
        "ts_24.008"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.109",
      "section_id": "8.2.109",
      "section_title": "Framed-Route",
      "content": "The Framed-Route IE describes a framed route. It shall be encoded as shown in Figure 8.2.109-1.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 153 (decimal)\n3 to 4\nLength = n\n5 to (n+4)\nFramed-Route\nFigure 8.2.109-1: Framed-Route\nThe Framed-Route field shall be encoded as an Octet String as the value part of the Framed-Route AVP specified in IETF RFC 2865 [37].",
      "chunk_type": "requirement",
      "cross_references": [
        "figure_8.2.109-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.110",
      "section_id": "8.2.110",
      "section_title": "Framed-Routing",
      "content": "The Framed-Routing IE describes the frame routing of a framed route. It shall be encoded as shown in Figure 8.2.110-1.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 154 (decimal)\n3 to 4\nLength = 4\n5 to 8\nFramed-Routing\nFigure 8.2.110-1: Framed-Routing\nThe Framed-Routing field shall be encoded as the value part of the Framed-Routing AVP specified in IETF RFC 2865 [37].",
      "chunk_type": "requirement",
      "cross_references": [
        "figure_8.2.110-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.111",
      "section_id": "8.2.111",
      "section_title": "Framed-IPv6-Route",
      "content": "The Framed-IPv6-Route IE describes a framed IPv6 route. It shall be encoded as shown in Figure 8.2.111-1.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 155 (decimal)\n3 to 4\nLength = n\n5 to (n+4)\nFramed-IPv6-Route\nFigure 8.2.111-1: Framed-IPv6-Route\nThe Framed-IPv6-Route field shall be encoded as an Octet String as the value part of the Framed-IPv6-Route AVP specified in IETF RFC 3162 [38].",
      "chunk_type": "requirement",
      "cross_references": [
        "figure_8.2.111-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.112",
      "section_id": "8.2.112",
      "section_title": "Event Quota",
      "content": "The Event Quota IE type shall be encoded as shown in Figure 8.2.112-1. It contains the event quota to be monitored by the UP function.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 148 (decimal)\n3 to 4\nLength = n\n5 to 8\nSubsequent Event Quota\n9 to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.112-1: Event Quota\nThe Event Quota field shall be encoded as an Unsigned32 binary integer value.",
      "chunk_type": "requirement",
      "cross_references": [
        "figure_8.2.112-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.113",
      "section_id": "8.2.113",
      "section_title": "Event Threshold",
      "content": "The Event Threshold IE contains the Number of events after which the measurement report is to be generated by the UP function. It shall be encoded as shown in Figure 8.2.113-1.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 149 (decimal)\n3 to 4\nLength = n\n5 to 8\nEvent Threshold\n9 to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.113-1: Event Threshold\nThe Event Threshold field shall be encoded as an Unsigned32 binary integer value.",
      "chunk_type": "requirement",
      "cross_references": [
        "figure_8.2.113-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.114",
      "section_id": "8.2.114",
      "section_title": "Time Stamp",
      "content": "The Time Stamp IE indicates the time stamp when certain event occurs or certain operation occurs. It shall be encoded as shown in Figure 8.2.114-1.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 156 (decimal)\n3 to 4\nLength = n\n5 to 8\nTime Stamp\n9 to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.114-1: Time Stamp\nThe Time Stamp field shall contain a UTC time. Octets 5 to 8 shall be encoded in the same format as the first four octets of the 64-bit timestamp format as defined in clause 6 of IETF RFC 5905 [12].\nNOTE:\tThe encoding is defined as the time in seconds relative to 00:00:00 on 1 January 1900.",
      "chunk_type": "requirement",
      "cross_references": [
        "clause_6",
        "figure_8.2.114-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.115",
      "section_id": "8.2.115",
      "section_title": "Averaging Window",
      "content": "The Averaging Window IE shall contain the duration over which the GFBR and MFBR is calculated (see clause 5.7.3.6 of 3GPP TS 23.501 [28]), or the duration over which the Session-AMBR is measured (see clause 5.7.2.6 of 3GPP TS 23.501 [28]), or the duration over which the Authorized DL Session AMBR for Offloading is measured. It shall be encoded as shown in Figure 8.2.115-1.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 157 (decimal)\n3 to 4\nLength = n\n5 to 8\nAveraging Window\n9 to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.115-1: Averaging Window\nThe Averaging Window field shall be encoded as an Unsigned32 binary integer value. It shall contain the duration in ms.",
      "chunk_type": "requirement",
      "cross_references": [
        "ts_23.501_clause_5.7.3.6",
        "ts_23.501_clause_5.7.2.6",
        "figure_8.2.115-1",
        "ts_23.501"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.116",
      "section_id": "8.2.116",
      "section_title": "Paging Policy Indicator (PPI)",
      "content": "The Paging Policy Indicator (PPI) IE indicates a PPI value for paging policy differentation. It shall be encoded as shown in Figure 8.2.116-1.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 158 (decimal)\n3 to 4\nLength = n\n5\nSpare\nPPI value\n6 to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.116-1: Paging Policy Indicator (PPI)\nThe PPI value shall be encoded as a value between 0 and 7, as specified in clause 5.5.3.7 of 3GPP TS 38.415 [34].",
      "chunk_type": "requirement",
      "cross_references": [
        "ts_38.415_clause_5.5.3.7",
        "figure_8.2.116-1",
        "ts_38.415"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.117",
      "section_id": "8.2.117",
      "section_title": "APN/DNN",
      "content": "Access Point Name (APN) / Data Network Name (DNN) is transferred from CP function to UP function.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 159 (decimal)\n3 to 4\nLength = n\n5 to (n+4)\nAPN/DNN\nFigure 8.2.117-1: APN/DNN\nThe encoding the APN/DNN field follows 3GPP TS 23.003 [2] clause 9.1. The content of the APN/DNN field shall be the full APN/DNN with both the APN/DNN Network Identifier and APN/DNN Operator Identifier being present as specified in 3GPP TS 23.003 [2] clauses 9.1.1 and 9.1.2, 3GPP TS 23.060 [19] Annex A and 3GPP TS 23.401 [14] clauses 4.3.8.1.\nNOTE:\tThe APN/DNN field is not encoded as a dotted string as commonly used in documentation.",
      "chunk_type": "general",
      "cross_references": [
        "ts_23.003_clause_9.1",
        "figure_8.2.117-1",
        "ts_23.003",
        "ts_23.060",
        "ts_23.401"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.118",
      "section_id": "8.2.118",
      "section_title": "3GPP Interface Type",
      "content": "The 3GPP Interface Type IE shall be encoded as shown in Figure 8.2.118-1. It indicates the 3GPP interface type of the Source Interface within the PDR IE, or the 3GPP interface type of the Destination Interface within the FAR IE.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 160 (decimal)\n3 to 4\nLength = n\n5\nSpare\nInterface Type value\n6 to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.118-1: 3GPP Interface Type\nThe 3GPP Interface Type value shall be encoded as a 6 bits binary integer as specified in in Table 8.2.118-1.\nTable 8.2.118-1: Interface Type value\nInterface value\nValues (Decimal)\nS1-U\n0\nS5 /S8-U (NOTE 1)\n1\nS4-U\n2\nS11-U\n3\nS12\n4\nGn/Gp-U (NOTE 2)\n5\nS2a-U\n6\nS2b-U\n7\neNodeB GTP-U interface for DL data forwarding\n8\neNodeB GTP-U interface for UL data forwarding\n9\nSGW/UPF GTP-U interface for DL data forwarding\n10\nN3 3GPP Access\n11\nN3 Trusted Non-3GPP Access\n12\nN3 Untrusted Non-3GPP Access\n13\nN3 for data forwarding\n14\nN9 (or N9 for non-roaming, see NOTE 3)\n15\nSGi\n16\nN6\n17\nN19\n18\nS8-U\n19\nGp-U\n20\nN9 for roaming\n21\nIu-U\n22\nN9 for data forwarding\n23\nSxa-U\n24\nSxb-U\n25\nSxc-U\n26\nN4-U\n27\nSGW/UPF GTP-U interface for UL data forwarding\n28\nN6mb/Nmb9\n29\nN3mb\n30\nN19mb\n31\nSpare\n32 to 63\nNOTE 1:\tIf separation of roaming and non-roaming traffic is desired this value should only be used for the S5-U interface and \"S8-U\" (decimal 19) should be used for the S8-U interface.\nNOTE 2:\tIf separation of roaming and non-roaming traffic is desired this value should only be used for the Gn-U interface and \"Gp-U\" (decimal 20) should be used for the Gp-U interface.\nNOTE 3: If separation of roaming and non-roaming traffic is desired, this value should only be used for N9 non-roaming interfaces and (decimal value \"21\") should be used for N9 roaming interfaces.\nNOTE 4:\tThere is no 3GPP interface Type value defined for the Source Interface Type or Destination Interface Type if the Source Interface IE in PDR or the Destination Interface IE in FAR is set to \"5G VN Internal\".",
      "chunk_type": "requirement",
      "cross_references": [
        "table_8.2.118-1",
        "figure_8.2.118-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.119",
      "section_id": "8.2.119",
      "section_title": "PFCPSRReq-Flags",
      "content": "The PFCPSRReq-Flags IE indicates flags applicable to the PFCP Session Report Request message. It is coded as depicted in Figure 8.2.119-1.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 161 (decimal)\n3 to 4\nLength = n\n5\nSpare\nSpare\nSpare\nSpare\nSpare\nSpare\nSpare\nPSDBU\n6 to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.199-1: PFCPSRReq-Flags\nThe following bits within Octet 5 shall indicate:\n-\tBit 1 – PSDBU (PFCP Session Deleted By the UP function): if this bit is set to \"1\", it indicates that the UP function has reported all non-zero Usage Reports for all URRs in the PFCP Session and the PFCP Session is being deleted in the UP function locally.\n-\tBit 2 to 8 – Spare, for future use, shall be set to \"0\" by the sender and discarded by the receiver.",
      "chunk_type": "general",
      "cross_references": [
        "figure_8.2.119-1",
        "figure_8.2.199-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.120",
      "section_id": "8.2.120",
      "section_title": "PFCPAUReq-Flags",
      "content": "The PFCPAUReq-Flags IE indicates flags applicable to the PFCP Association Update Request message. It is coded as depicted in Figure 8.2.120-1.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 162 (decimal)\n3 to 4\nLength = n\n5\nSpare\nSpare\nSpare\nSpare\nSpare\nSpare\nSpare\nPARPS\n6 to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.120-1: PFCPAUReq-Flags\nThe following bits within Octet 5 shall indicate:\n-\tBit 1 – PARPS (PFCP Association Release Preparation Start): if this bit is set to \"1\", it indicates that the PFCP association is to be released and all non-zero usage reports for the PFCP Sessions affected by the release of the PFCP association shall be reported.\n-\tBit 2 to 8 – Spare, for future use, shall be set to \"0\" by the sender and discarded by the receiver.",
      "chunk_type": "general",
      "cross_references": [
        "figure_8.2.120-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.121",
      "section_id": "8.2.121",
      "section_title": "Activation Time",
      "content": "The Activation Time IE indicates the time that the PDR shall be set to be active in the UP function. It shall be encoded as shown in Figure 8.2.121-1.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 163 (decimal)\n3 to 4\nLength = n\n5 to 8\nActivation Time\n9 to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.121-1: Activation Time\nThe Activation Time field shall indicate the activation time in UTC time. Octets 5 to 8 shall be encoded in the same format as the first four octets of the 64-bit timestamp format as defined in clause 6 of IETF RFC 5905 [12].\nNOTE:\tThe encoding is defined as the time in seconds relative to 00:00:00 on 1 January 1900.",
      "chunk_type": "requirement",
      "cross_references": [
        "clause_6",
        "figure_8.2.121-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.122",
      "section_id": "8.2.122",
      "section_title": "Deactivation Time",
      "content": "The Deactivation Time IE indicates the time that the PDR shall be set to be inactive in the UP function. It shall be encoded as shown in Figure 8.2.122-1.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 164 (decimal)\n3 to 4\nLength = n\n5 to 8\nDeactivation Time\n9 to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.122-1: Deactivation Time\nThe Deactivation Time field shall indicate the deactivation time in UTC time. Octets 5 to 8 shall be encoded in the same format as the first four octets of the 64-bit timestamp format as defined in clause 6 of IETF RFC 5905 [12].\nNOTE:\tThe encoding is defined as the time in seconds relative to 00:00:00 on 1 January 1900.",
      "chunk_type": "requirement",
      "cross_references": [
        "clause_6",
        "figure_8.2.122-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.123",
      "section_id": "8.2.123",
      "section_title": "MAR ID",
      "content": "The MAR ID IE type shall be encoded as shown in Figure 8.2.123-1. It shall contain a Multi-Access Rule ID.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 170 (decimal)\n3 to 4\nLength = n\n5 to 6\nMAR ID value\n7 to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.123-1: MAR ID\nThe MAR ID value field shall be encoded as an Unsigned16 binary integer value.",
      "chunk_type": "requirement",
      "cross_references": [
        "figure_8.2.123-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.124",
      "section_id": "8.2.124",
      "section_title": "Steering Functionality",
      "content": "The Steering Functionality IE type shall be encoded as shown in Figure 8.2.124-1. It indicates the steering functionality (ATSSS feature) to be used in a MAR.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 171 (decimal)\n3 to 4\nLength = n\n5\nSpare\nSteering Functionality Value\n6 to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.124-1: Steering Functionality\nThe Steering Functionality value shall be encoded as a 4 bits binary integer as specified in Table 8.2.124-1.\nTable 8.2.124-1: Steering Functionality value\nSteering Functionality Value\nValues (Decimal)\nATSSS-LL\n0\nMPTCP\n1\nMPQUIC\n2\nSpare\n3 to 15",
      "chunk_type": "requirement",
      "cross_references": [
        "table_8.2.124-1",
        "figure_8.2.124-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.125",
      "section_id": "8.2.125",
      "section_title": "Steering Mode",
      "content": "The Steering Mode IE type shall be encoded as shown in Figure 8.2.125-1. It indicates the steering mode to be used in a MAR.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 172 (decimal)\n3 to 4\nLength = n\n5\nSpare\nSteering Mode Value\n6 to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.125-1: Steering Mode\nThe Steering Mode value shall be encoded as a 4 bits binary integer as specified in Table 8.2.125-1.\nTable 8.2.125-1: Steering Mode value\nSteering Mode Value\nValues (Decimal)\nActive-Standby\n0\nSmallest Delay\n1\nLoad Balancing\n2\nPriority-based\n3\nRedundant\n4\nSpare\n5 to 15",
      "chunk_type": "requirement",
      "cross_references": [
        "table_8.2.125-1",
        "figure_8.2.125-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.126",
      "section_id": "8.2.126",
      "section_title": "Weight",
      "content": "The Weight IE shall be encoded as shown in Figure 8.2.126-1. It indicates the percentage of the traffic to be transferred over one access.\nThe Weight Value field shall take binary coded integer values from 0 up to 100. Other values shall be considered as 0.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 173 (decimal)\n3 to 4\nLength = 1\n5\nWeight Value\nFigure 8.2.126-1: Weight",
      "chunk_type": "requirement",
      "cross_references": [
        "figure_8.2.126-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.127",
      "section_id": "8.2.127",
      "section_title": "Priority",
      "content": "The Priority IE type shall be encoded as shown in Figure 8.2.127-1. It indicates whether it is active or standby or no standby for a given access when the Steering Mode is set to Active-Standby, or whether it is high or low priority for a given access when the Steering Mode is set to Priority-based.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 174 (decimal)\n3 to 4\nLength = n\n5\nSpare\nPriority Value\n6 to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.127-1: Priority\nThe Priority Value shall be encoded as a 4 bits binary integer as specified in Table 8.2.127-1.\nTable 8.2.127-1: Priority value\nPriority Value\nValues (Decimal)\nActive\n0\nStandby\n1\nNo Standby\n2\nHigh\n3\nLow\n4\nPrimary\n5\nSecondary\n6\nSpare\n7 to 15\nThe \"No Standby\" Priority value may be used when the network determines to not define a Standby access.",
      "chunk_type": "requirement",
      "cross_references": [
        "table_8.2.127-1",
        "figure_8.2.127-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.128",
      "section_id": "8.2.128",
      "section_title": "UE IP address Pool Identity",
      "content": "The User Plane UE IP Pool Identity IE type shall be encoded as shown in Figure 8.2.128-1.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 177 (decimal)\n3 to 4\nLength = n\n5 to 6\nUE IP address Pool Id Length\n7 to k\nUE IP address Pool Identity\nm to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.128-1: UE IP address Pool Identity\nOctets 7 to \"k\": The UE IP address Pool Identity shall be encoded as an OctetString (see the Framed-Ipv6-Pool and Framed-Pool in clause 12.6.3 of 3GPP TS 29.561 [49]); the value part of Framed-Pool or Framed-Ipv6-Pool is copied into the UE IP address Pool Identity field of the UE IP address Pool Identity IE if the CP function receives the corresponding information from an external server.",
      "chunk_type": "requirement",
      "cross_references": [
        "ts_29.561_clause_12.6.3",
        "figure_8.2.128-1",
        "ts_29.561"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.129",
      "section_id": "8.2.129",
      "section_title": "Alternative SMF IP Address",
      "content": "The Alternative SMF IP Address IE shall contain an IPv4 and/or IPv6 address. It shall be encoded as shown in Figure 8.2.129-1.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 178 (decimal)\n3 to 4\nLength = n\n5\nSpare\nPPE\nV4\nV6\np to (p+3)\nIPv4 Address\nq to (q+15)\nIPv6 Address\nm to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.129-1: Alternative SMF IP Address\nThe following flags are coded within Octet 5:\n-\tBit 1 – V6: If this bit is set to \"1\", then the IPv6 address field shall be present in the Alternative SMF IP Address, otherwise the IPv6 address field shall not be present.\n-\tBit 2 – V4: If this bit is set to \"1\", then the IPv4 address field shall be present in the Alternative SMF IP Address, otherwise the IPv4 address field shall not be present.\n-\tBit 3 – PPE (Preferred PFCP Entity): If this bit is set to \"1\", then the alternative SMF IP address shall be used by the UPF as a preferred address when reselecting a PFCP entity as specified in clauses 5.22.2 and 5.22.3.\n-\tBit 4 to 8 Spare, for future use and set to \"0\".\nOctets \"p to (p+3)\" or \"q to (q+15)\" (IPv4 address / IPv6 address fields), if present, shall contain the address value.",
      "chunk_type": "requirement",
      "cross_references": [
        "figure_8.2.129-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.130",
      "section_id": "8.2.130",
      "section_title": "Packet Replication and Detection Carry-On Information",
      "content": "The Packet Replication and Detection Carry-On Information IE shall be encoded as shown in Figure 8.2.130-1.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 179 (decimal)\n3 to 4\nLength = n\n5\nSpare\nDCARONI\nPRIN6I\nPRIN19I\nPRIUEAI\n6 to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.130-1: Packet Replication and Detection Carry-On Information\nThe following flags are coded within Octet 5:\n-\tBit 1 – PRIUEAI (Packet Replication Information – UE/PDU Session Address Indication): This bit shall be set to \"1\" to indicate that if the packet has been received from the UE's PDU session (e.g. the source IP address is set to the UE's PDU IP session address, or the source MAC address is an Ethernet MAC address associated to the PDU session for an Ethernet PDU session), the UP function shall neither create a copy of the packet nor apply the corresponding processing (i.e. FAR, QER, URR). Otherwise the UPF shall perform a copy of the packet and apply the corresponding processing (i.e. FAR, QER, URR).\n-\tBit 2 – PRIN19I (Packet Replication Information - N19 Indication): This bit shall be set to \"1\" to indicate that if the packet has been received from a N19 interface (i.e. a \"N19 Indication\" internal flag is associated with the packet, see clause 8.2.56)), the UP function shall neither create a copy of the packet nor apply the corresponding processing (i.e. FAR, QER, URR). Otherwise the UPF shall perform a copy of the packet and apply the corresponding processing (i.e. FAR, QER, URR).\n-\tBit 3 – PRIN6I (Packet Replication Information - N6 Indication): This bit shall be set to \"1\" to indicate that if the packet has been received from a N6 interface (i.e. a \"N6 Indication\" internal flag is associated with the packet, see clause 8.2.56)), the UP function shall neither create a copy of the packet nor apply the corresponding processing (i.e. FAR, QER, URR). Otherwise the UPF shall perform a copy of the packet and apply the corresponding processing (i.e. FAR, QER, URR).\n-\tBit 4 – DCARONI (Detection Carry-On Indication): This bit shall be set to \"1\" to request the UP function to continue the packet detection process, i.e. look up of other PDRs of other PFCP sessions matching the packet (see clause 5.2.1).\n-\tBit 5 to 8 are spare and reserved for future use.",
      "chunk_type": "requirement",
      "cross_references": [
        "clause_8.2.56",
        "clause_5.2.1",
        "figure_8.2.130-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.131",
      "section_id": "8.2.131",
      "section_title": "SMF Set ID",
      "content": "The SMF Set ID IE shall contain an FQDN representing the SMF Set. It shall be encoded as shown in Figure 8.2.131-1.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 180 (decimal)\n3 to 4\nLength = n\n5\nSpare\n6 to m\nFQDN\n(m+1) to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.131-1: SMF Set ID\nFQDN encoding shall be identical to the encoding of a FQDN within a DNS message of clause 3.1 of IETF RFC 1035 [27] but excluding the trailing zero byte.\nNOTE:\tThe FQDN field in the IE is not encoded as a dotted string as commonly used in DNS master zone files.",
      "chunk_type": "requirement",
      "cross_references": [
        "clause_3.1",
        "figure_8.2.131-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.132",
      "section_id": "8.2.132",
      "section_title": "Quota Validity Time",
      "content": "The Quota Validity Time IE type shall be encoded as shown in Figure 8.2.132-1. It contains the quota validity time in seconds.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 181 (decimal)\n3 to 4\nLength = n\n5 to 8\nValidity Time value\n9 to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.132-1: Quota Validity Time\nThe Quota Validity Time value shall be encoded as an Unsigned32 binary integer value.",
      "chunk_type": "requirement",
      "cross_references": [
        "figure_8.2.132-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.133",
      "section_id": "8.2.133",
      "section_title": "Number of Reports",
      "content": "The Number of Reports IE shall be encoded as shown in Figure 8.2.133-1. It contains an Unigned16 binary integer value excluding the first value \"0\".\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 182 (decimal)\n3 to 4\nLength = n\n5 to 6\nNumber of Reports\nFigure 8.2.133-1: Number of Reports",
      "chunk_type": "requirement",
      "cross_references": [
        "figure_8.2.133-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.134",
      "section_id": "8.2.134",
      "section_title": "PFCPASRsp-Flags",
      "content": "The PFCPASRsp-Flags IE indicates flags applicable to the PFCP Association Setup Response message. It is coded as depicted in Figure 8.2.134-1.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 184 (decimal)\n3 to 4\nLength = n\n5\nSpare\nUUPSI\nPSREI\n6 to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.134-1: PFCPASRsp-Flags\nThe following bits within Octet 5 shall indicate:\n-\tBit 1 – PSREI (PFCP Session Retained Indication): if this bit is set to \"1\", it indicates that an existing PFCP association was already established for the same Node ID and the requested PFCP sessions have been retained. See clause 6.2.6.2.2.\n-\tBit 2 – UUPSI (UPF configured for IPUPS Indication): if this bit is set to \"1\", it indicates that the UPF is configured to be used for IPUPS. See clause 5.27.\n-\tBit 3 to 8 – Spare, for future use, shall be set to \"0\" by the sender and discarded by the receiver.",
      "chunk_type": "general",
      "cross_references": [
        "clause_6.2.6.2.2",
        "clause_5.27",
        "figure_8.2.134-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.135",
      "section_id": "8.2.135",
      "section_title": "CP PFCP Entity IP Address",
      "content": "The CP PFCP Entity IP Address IE shall contain an IPv4 and/or IPv6 address. It shall be encoded as shown in Figure 8.2.135-1.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 135 (decimal)\n3 to 4\nLength = n\n5\nSpare\nV4\nV6\np to (p+3)\nIPv4 Address\nq to (q+15)\nIPv6 Address\nm to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.135-1: CP PFCP Entity IP Address\nThe following flags are coded within Octet 5:\n-\tBit 1 – V6: If this bit is set to \"1\", then the IPv6 address field shall be present in the CP PFCP Entity IP Address, otherwise the IPv6 address field shall not be present.\n-\tBit 2 – V4: If this bit is set to \"1\", then the IPv4 address field shall be present in the CP PFCP Entity IP Address, otherwise the IPv4 address field shall not be present.\n-\tBit 3 to 8 Spare, for future use and set to \"0\".\nOctets \"p to (p+3)\" or \"q to (q+15)\" (IPv4 address / IPv6 address fields), if present, shall contain the address value.",
      "chunk_type": "requirement",
      "cross_references": [
        "figure_8.2.135-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.136",
      "section_id": "8.2.136",
      "section_title": "PFCPSEReq-Flags",
      "content": "The PFCPSEReq-Flags IE indicates flags applicable to the PFCP Session Establishment Request message. It is coded as depicted in Figure 8.2.136-1.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 186 (decimal)\n3 to 4\nLength = n\n5\nSpare\nSpare\nSpare\nSpare\nSpare\nHRSBOM\nSUMPC\nRESTI\n6 to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.136-1: PFCPSEReq-Flags\nThe following bits within Octet 5 shall indicate:\n-\tBit 1 – RESTI (Restoration Indication): if this bit is set to \"1\", it indicates to the UP function that the PFCP session to be established is to restore an existing PFCP session.\n-\tBit 2 – SUMPC (Stop of Usage Measurement to Pause Charging): if this bit is set to \"1\", it indicates that the UP function shall stop the usage measurement for all URRs with the \"ASPOC\" flag set to \"1\".\n-\tBit 3 – HRSBOM (HR-SBO Mode): if this bit is set to \"1\" at the V-UPF acting as Local PSA in the VPLMN, it indicates that the PDU session is working in HR-SBO mode.\n-\tBit 4 to 8 – Spare, for future use, shall be set to\"0\" by the sender and discarded by the receiver.",
      "chunk_type": "general",
      "cross_references": [
        "figure_8.2.136-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.137",
      "section_id": "8.2.137",
      "section_title": "IP Multicast Address",
      "content": "The IP Multicast Address IE type shall be encoded as shown in Figure 8.2.137-1. It contains an IP multicast address or a range of IP multicast addresses.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 191 (decimal)\n3 to 4\nLength = n\n5\nSpare\nA\nR\nV4\nV6\nm to (m+3)\n(start) IPv4 address\np to (p+15)\n(start) IPv6 address\nq to (q+3)\n(end) IPv4 address\nr to (r+15)\n(end) IPv6 address\nk to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.137-1: IP Multicast Address\nThe following flags are coded within Octet 5:\n-\tBit 1 – V6: If this bit is set to \"1\", then the (start) IPv6 address field shall be present, otherwise the (start) IPv6 address field shall not be present.\n-\tBit 2 – V4: If this bit is set to \"1\", then the (start) IPv4 address field shall be present, otherwise the (start) IPv4 address field shall not be present.\n-\tBit 3 – R (Range): If this bit is set to \"1\", this indicates that a range of addresses is included, i.e. that\n-\tthe (start) IPv4 address and (end) IPv4 address fields shall be present if bit 2 (V4) is set to \"1\";\n-\tthe (start) IPv6 address and (end) IPv6 address fields shall be present if bit 1 (V6) is set to \"1\",\notherwise (end) address fields shall not be present.\n-\tBit 4 – Any: If this bit is set to \"1\", this indicates any IP multicast address; in this case, no IP address field shall be included.\n-\tBit 5 to 8 Spare, for future use and set to \"0\".\nOne and only one of the V6, V4 and A flags shall be set to \"1\". The R flag may be set if the V6 or the V4 flag is set to \"1\".\nOctets \"m to (m+3)\", \"p to (p+15)\", \"q to (q+3)\", \"r to (r+15)\" (IPv4 address / IPv6 address fields), if present, shall contain the address value.",
      "chunk_type": "requirement",
      "cross_references": [
        "figure_8.2.137-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.138",
      "section_id": "8.2.138",
      "section_title": "Source IP Address",
      "content": "The Source IP Address IE type shall be encoded as shown in Figure 8.2.138-1\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 192 (decimal)\n3 to 4\nLength = n\n5\nSpare\nMPL\nV4\nV6\nm to (m+3)\nIPv4 address\np to (p+15)\nIPv6 address\nq\nmask/prefix length\nk to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.138-1: Source IP Address\nThe following flags are coded within Octet 5:\n-\tBit 1 – V6: If this bit is set to \"1\", then the IPv6 address field shall be present, otherwise the IPv6 address field shall not be present.\n-\tBit 2 – V4: If this bit is set to \"1\", then the IPv4 address field shall be present, otherwise the IPv4 address field shall not be present.\n-\tBit 3 – Mask/Prefix Length: If this bit is set to \"1\", then the mask (for IPv4) / prefix (for IPv6) length field shall be present, otherwise this field shall not be present.\n-\tBit 4 to 8 Spare, for future use and set to \"0\".\nOctets \"m to (m+3)\", \"p to (p+15)\" (IPv4 address / IPv6 address fields), if present, shall contain the address value.\nThe mask/prefix length field, if present, shall be encoded as a 8 bits binary integer.\nEXAMPLE 1: this field encodes the value 24 for the IPv4 subnet 192.0.2.10/24.\nEXAMPLE 2: this field encodes the value 64 for the /64 IPv6 prefix.",
      "chunk_type": "requirement",
      "cross_references": [
        "figure_8.2.138-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.139",
      "section_id": "8.2.139",
      "section_title": "Packet Rate Status",
      "content": "Packet Rate Status shall be encoded as shown in Figure 8.2.139-1.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 193 (decimal)\n3 to 4\nLength = n\n5\nSpare\nAPR\nDL\nUL\na to (a+1)\nNumber of Remaining Uplink Packets Allowed\nb to (b+1)\nNumber of Remaining Additional Uplink Packets Allowed\nc to (c+1)\nNumber of Remaining Downlink Packets Allowed\nd to (d+1)\nNumber of Remaining Additional Downlink Packets Allowed\ne to (e+7)\nRate Control Status Validity Time\nm to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.139-1: Packet Rate Status\nThe following flags are coded within Octet 5:\n-\tBit 1 – UL (remaining uplink packet limit): If this bit is set to \"1\", then octets 'a' to (a+1), the Number of Remaining Uplink Packets Allowed shall be present, otherwise these octets shall not present.\n-\tBit 2 – DL (remaining downlink packet limit): If this bit is set to \"1\", then octets 'c' to (c+1), the Number of Remaining Downlink Packets Allowed shall be present, otherwise these octets shall not present.\n-\tBit 3 – APR (Additional Packet Rates, i.e. remaining additional packet limit): If this bit is set to \"1\", then the presence of Number of Remaining Additional Uplink/Downlink Packets Allowed is determined as follows:\n-\tIf bit 1 (UL) is set to \"1\", then octets b to (b+1), the Number of Remaining Additional Uplink Packets Allowed shall be present. Otherwise, octets b to (b+1) shall not be present;\n-\tIf bit 2 (DL) is set to \"1\", then octets d to (d+1), the Number of Remaining Additional Downlink Packets Allowed shall be present. Otherwise, octets d to (d+1) shall not be present.\n-\tBits 4 to 8: Spare, for future use and set to \"0\".\nIf either bit 1 or bit 2 is set to '1', then octets 'e' to (e+7), the Rate Control Status Validity Time shall be present.\nIf present, the Number of Remaining Uplink Packets Allowed in octets 'a' to (a+1) shall indicate the number of uplink packets that are still allowed to be sent within the Rate Control Status Validity Time.\nIf present, the Number of Remaining Additional Uplink Packets Allowed in octets 'b' to (b+1) shall indicate the number of additional uplink packets that are still allowed to be sent within the Rate Control Status Validity Time.\nIf present, the Number of Remaining Downlink Packets Allowed in octets 'c' to (c+1) shall indicate the number of downlink packets that are still allowed to be sent within the Rate Control Status Validity Time.\nIf present, the Number of Remaining Additional Downlink Packets Allowed in octets 'd' to (d+1) indicate the number of additional downlink packets that are still allowed to be sent within the Rate Control Status Validity Time.\nIf present, the Rate Control Status Validity Time shall be coded as the time in seconds relative to 00:00:00 on 1 January 1900 (calculated as continuous time without leap seconds and traceable to a common time reference) where binary encoding of the integer part is in the 32 most significant bits and binary encoding of the fraction part in the 32 least significant bits. The fraction part is expressed with a granularity of 1 /2**32 second (see clause 8.135 in 3GPP TS 29.274 [9]).",
      "chunk_type": "requirement",
      "cross_references": [
        "ts_29.274_clause_8.135",
        "figure_8.2.139-1",
        "ts_29.274"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.140",
      "section_id": "8.2.140",
      "section_title": "Create Bridge/Router Info IE",
      "content": "The Create Bridge/Router Info IE shall be encoded as shown in Figure 8.2.140-1.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 194 (decimal)\n3 to 4\nLength = n\n5\nSpare\nRII\nBII\nm to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.140-1: Create Bridge/Router Info IE\nThe following flags are coded within Octet 5:\n-\tBit 1 – BII (Bridge Information Indication): If this bit is set to \"1\", then the Bridge Information comprising a DS-TT port number and the related 5GS User Plane Node ID are requested to be provided.\n-\tBit 2 – RII (Router Information Indication): If this bit is set to \"1\", then the Router Information comprising a port number for the PDU Session and the related 5GS User Plane Node ID are requested to be provided.\n-\tBit 3 to 8 Spare, for future use and set to \"0\".",
      "chunk_type": "requirement",
      "cross_references": [
        "figure_8.2.140-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.141",
      "section_id": "8.2.141",
      "section_title": "Port Number",
      "content": "The  Port Number IE shall be encoded as shown in Figure 8.2.141-1. It shall contain one Port Number value.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 196 (decimal)\n3 to 4\nLength = 4\n5 to 8\nPort Number value\nFigure 8.2.141-1:  Port Number\nFor TSN and TSCTS (i.e. if the BII flag was set to 1 in the Create Bridge/Router Info IE), the Port Number value may refer either to an Ethernet port or an IEEE PTP port and it shall be encoded as an Unsigned16 binary integer value in octets 7 and 8. Octets 5 and 6 shall be set to all zeros.\nFor DetNet (i.e. if the RII flag was set to 1 in the Create Bridge/Router Info IE), the port number value shall be encoded as an Unsigned32 binary integer.\nFor Ethernet type PDU Sessions, it is assumed that the PTP port number is the same as the associated Ethernet port number.",
      "chunk_type": "requirement",
      "cross_references": [
        "figure_8.2.141-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.142",
      "section_id": "8.2.142",
      "section_title": "NW-TT Port Number",
      "content": "The NW-TT Port Number IE shall be encoded as shown in Figure 8.2.142-1. It shall contain one Port Number value.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 197 (decimal)\n3 to 4\nLength = 4\n5 to 8\nPort Number value\nFigure 8.2.142-1: NW-TT Port Number\nFor TSN and TSCTS (i.e. if the BII flag was set to 1 in the Create Bridge/Router Info IE), the Port Number value may refer either to an Ethernet port or an IEEE PTP port and it shall be encoded as an Unsigned16 binary integer in octets 7 and 8. Octets 5 and 6 shall be set to all zeros.\nFor DetNet (i.e. if the RII flag was set to 1 in the Create Bridge/Router Info IE), the port number value shall be encoded as an Unsigned32 binary integer.\nFor Ethernet type PDU Sessions, it is assumed that the PTP port number is the same as the associated Ethernet port number.",
      "chunk_type": "requirement",
      "cross_references": [
        "figure_8.2.142-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.143",
      "section_id": "8.2.143",
      "section_title": "5GS User Plane Node ID",
      "content": "The 5GS User Plane Node ID IE shall be encoded as shown in Figure 8.2.143-1.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 198 (decimal)\n3 to 4\nLength = n\n5\nSpare\nBID\nm to (m+7)\nUser Plane Node ID value\ns to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.143-1: 5GS User Plane Node ID\nThe following flags are coded within Octet 5:\n-\tBit 1 – BID: If this bit is set to \"1\", then the User Plane Node ID value field shall be present.\n-\tBit 2 to 8: Spare, for future use and set to \"0\".\nThe User Plane Node ID value field shall be encoded as an Unsigned64 binary integer. To support IEEE TSN, the User Plane Node ID value field encodes the Bridge ID as defined in IEEE 802.1Q [30] clause 14.2.5. Without IEEE TSN, the User Plane Node ID may encode any value within the range, e.g. to support integration with IETF DetNet, the User Plane Node ID value field may be encoded as the Router ID.",
      "chunk_type": "requirement",
      "cross_references": [
        "clause_14.2.5",
        "figure_8.2.143-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.144",
      "section_id": "8.2.144",
      "section_title": "Port Management Information Container",
      "content": "The Port Management Information Container IE shall be encoded as shown in Figure 8.2.144-1. It contains an opaque container of port management information.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 202 (decimal)\n3 to 4\nLength = n\n5 to (n+4)\nPort Management Information\nFigure 8.2.144-1: Port Management Information Container\nThe Port Management Information field shall be encoded as an Octet String. It shall encode a Port management message defined in clause 8 of 3GPP TS 24.539 [63].",
      "chunk_type": "requirement",
      "cross_references": [
        "ts_24.539_clause_8",
        "figure_8.2.144-1",
        "ts_24.539"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.145",
      "section_id": "8.2.145",
      "section_title": "Requested Clock Drift Information",
      "content": "The Requested Clock Drift Information IE shall be encoded as shown in Figure 8.2.145-1. It indicates the clock drift information to report to the CP function.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 204 (decimal)\n3 to 4\nLength = n\n5\nSpare\nRRCR\nRRTO\n7 to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.145-1: Requested Clock Drift Information\nOctet 5 shall be encoded as follows:\n-\tBit 1: (RRTO) Request to Report Time Offset: when set to \"1\", this indicates a request to report when the Time Offset Reporting Threshold is exceeded.\n-\tBit 2: (RRCR) Request to Report Cumulative RateRatio: when set to \"1\", this indicates a request to report when the cumulative RateRatio Reporting Thresholds is exceeded.\n-\tBits 3 to 8: Spare, for future use and set to \"0\".\nAt least one bit shall be set to \"1\". Several bits may be set to \"1\".",
      "chunk_type": "requirement",
      "cross_references": [
        "figure_8.2.145-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.146",
      "section_id": "8.2.146",
      "section_title": "Time Domain Number",
      "content": "The Time Domain Number IE type shall be encoded as shown in Figure 8.2.146-1. It shall contain a external timing related Domain Number.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 206 (decimal)\n3 to 4\nLength = n\n5\nTime Domain Number value\n6 to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.146-1: Time Domain Number\nThe Time Domain Number value field shall be encoded as a binary integer value.",
      "chunk_type": "requirement",
      "cross_references": [
        "figure_8.2.146-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.147",
      "section_id": "8.2.147",
      "section_title": "Time Offset Threshold",
      "content": "The Time Offset Threshold IE type shall be encoded as shown in Figure 8.2.147-1.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 207 (decimal)\n3 to 4\nLength = n\n5 to 12\nTime Offset Threshold\n13 to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.147-1: Time Offset Threshold\nThe Time Offset Threshold field shall be encoded as a signed64 binary integer value. It shall contain the Time Offset Threshold in nanoseconds.",
      "chunk_type": "requirement",
      "cross_references": [
        "figure_8.2.147-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.148",
      "section_id": "8.2.148",
      "section_title": "Cumulative rateRatio Threshold",
      "content": "The Cumulative rateRatio Threshold IE type shall be encoded as shown in Figure 8.2.148-1.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 208 (decimal)\n3 to 4\nLength = n\n5 to 8\nCumulative rateRatio Threshold\n9 to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.148-1: Cumulative rateRatio Threshold\nThe Cumulative rateRatio Threshold field shall be encoded as the cumulativeRateRatio (Integer32) specified in clauses 14.4.2 and 15.6 of IEEE Std 802.1AS-2020 [58], i.e. the quantity \"(rateRatio- 1.0)(2^41)\".",
      "chunk_type": "requirement",
      "cross_references": [
        "figure_8.2.148-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.149",
      "section_id": "8.2.149",
      "section_title": "Time Offset Measurement",
      "content": "The Time Offset Measurement IE type shall be encoded as shown in Figure 8.2.149-1.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 209 (decimal)\n3 to 4\nLength = n\n5 to 12\nTime Offset Measurement\n13 to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.149-1: Time Offset Measurement\nThe Time Offset Measurement field shall be encoded as a signed64 binary integer value. It shall contain the Time Offset Measurement in nanoseconds. It shall contain the time offset between the 5GS clock and the clock of the external time domain.",
      "chunk_type": "requirement",
      "cross_references": [
        "figure_8.2.149-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.150",
      "section_id": "8.2.150",
      "section_title": "Cumulative rateRatio Measurement",
      "content": "The Cumulative rateRatio Measurement IE type shall be encoded as shown in Figure 8.2.150-1.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 210 (decimal)\n3 to 4\nLength = n\n5 to 8\nCumulative rateRatio Measurement\n9 to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.150-1: Cumulative rateRatio Measurement\nThe Cumulative rateRatio Measurement field shall be encoded as the cumulativeRateRatio (Integer32) specified in clauses 14.4.2 and 15.6 of IEEE Std 802.1AS-2020 [58], i.e. the quantity \"(rateRatio- 1.0)(2^41)\". It shall be equal to the cumulative ratio of the frequency of the 5GS clock to the frequency of the clock of the external time domain.",
      "chunk_type": "requirement",
      "cross_references": [
        "figure_8.2.150-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.151",
      "section_id": "8.2.151",
      "section_title": "SRR ID",
      "content": "The SRR ID IE type shall be encoded as shown in Figure 8.2.151-1. It contains a Session Reporting Rule ID.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 215 (decimal)\n3 to 4\nLength = n\n5\nSRR ID value\n6 to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.151-1: SRR ID\nThe SRR ID value shall be encoded as a binary integer value.",
      "chunk_type": "requirement",
      "cross_references": [
        "figure_8.2.151-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.152",
      "section_id": "8.2.152",
      "section_title": "Requested Access Availability Information",
      "content": "The Requested Access Availability Information IE shall be encoded as shown in Figure 8.2.152-1. It indicates the access availability information requested to be reported to the CP function.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 217 (decimal)\n3 to 4\nLength = n\n5\nSpare\nRRCA\n7 to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.152-1: Requested Access Availability Information\nOctet 5 shall be encoded as follows:\n-\tBit 1: (RRCA) Request to Report Change in Access availability: when set to \"1\", this indicates a request to the UPF to report when an access (3GPP or non-3GPP access) becomes available or unavailable.\n-\tBits 2 to 8: Spare, for future use and set to \"0\".\nAt least one bit shall be set to \"1\". Several bits may be set to \"1\".",
      "chunk_type": "requirement",
      "cross_references": [
        "figure_8.2.152-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.153",
      "section_id": "8.2.153",
      "section_title": "Access Availability Information",
      "content": "The Access Availability Information IE shall indicate an access type and whether the access type has become available or not available. It shall be encoded as shown in Figure 8.2.153-1.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 219 (decimal)\n3 to 4\nLength = n\n5\nSpare\nAvailability Status\nAccess Type\nm to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.153-1: Access Availability Information\nThe Access Type shall be encoded as a 2 bits binary integer as specified in Table 8.2.153-1.\nTable 8.2.153-1: Access Type\nAccess Type\nValues (Decimal)\n3GPP access type\n0\nNon-3GPP access type\n1\nSpare\n2 to 3\nThe Availability Status shall be encoded as a 2 bits binary integer as specified in Table 8.2.153-2.\nTable 8.2.153-2: Availability Status\nAvailability Status\nValues (Decimal)\nAccess has become unavailable\n0\nAccess has become available\n1\nSpare\n2 to 3",
      "chunk_type": "requirement",
      "cross_references": [
        "table_8.2.153-1",
        "table_8.2.153-2",
        "figure_8.2.153-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.154",
      "section_id": "8.2.154",
      "section_title": "MPTCP Control Information",
      "content": "The MPTCP Control Information IE shall provide details of the required MPTCP functionality. It shall be encoded as shown in Figure 8.2.154-1.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 222 (decimal)\n3 to 4\nLength = n\n5\nSpare\nTCI\nm to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.154-1: MPTCP Control Information\nThe following flags are coded within Octet 5:\n-\tBit 1 – TCI (Transport Converter Indication): If this bit is set to \"1\", it indicates that the required MPTCP steering functionality is of type Transport Converter (see IETF RFC 8803 [60]) and the UPF shall allocate relevant resource as specified in clause 5.20.2.1.\n-\tBit 2 to 8 Spare, for future use and set to \"0\".",
      "chunk_type": "requirement",
      "cross_references": [
        "clause_5.20.2.1",
        "figure_8.2.154-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.155",
      "section_id": "8.2.155",
      "section_title": "ATSSS-LL Control Information",
      "content": "The ATSSS-LL Control Information IE shall provide details of the required ATSSS-LL functionality. It shall be encoded as shown in Figure 8.2.155-1.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 223 (decimal)\n3 to 4\nLength = n\n5\nSpare\nLLI\nm to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.155-1: ATSSS-LL Control Information\nThe following flags are coded within Octet 5:\n-\tBit 1 – LLI: If this bit is set to \"1\", it indicates that the ATSSS-LL steering functionality is required.\n-\tBit 2 to 8 Spare, for future use and set to \"0\".",
      "chunk_type": "requirement",
      "cross_references": [
        "figure_8.2.155-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.156",
      "section_id": "8.2.156",
      "section_title": "PMF Control Information",
      "content": "The PMF Control Information IE shall provide details of the required PMF functionality. It shall be encoded as shown in Figure 8.2.156-1.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 224 (decimal)\n3 to 4\nLength = n\n5\nSpare\nPQPM\nDRTTI\nPMFI\n6\nNumber of QFI (=p)\n7\nvalue of QFI 1\n8\nvalue of QFI 2\n...\n…\n7-(7+p-1)\nvalue of QFI p\nm to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.156-1: PMF Control Information\nThe following flags are coded within Octet 5:\n-\tBit 1 – PMFI: If this bit is set to \"1\", it indicates that the PMF functionality is required and the UPF shall allocate relevant resource as specified in 5.20.3.1.\n-\tBit 2 – DRTTI (Disallow PMF RTT Indication): If this bit is set to \"1\", it indicates that PMF RTT measurements are not allowed. This bit shall be set to \"1\" if the UE does not support PMF RTT measurements (i.e. if the UE supports MPTCP with any steering mode and ATSSS-LL with only the Active-Standby steering mode, see clauses 5.32.2 and 5.32.5.1 of 3GPP TS 23.501 [28]).\n-\tBit 3 – PQPM (Per QoS flow Performance Measurement indication): If this bit is set to \"1\", it indicates that per QoS flow access performance measurement is applicable to this PDU session. A list of QFI values shall be present to indicate a list of QoS flows over which access performance measurement may be performed.\n-\tBit 4 to 8 Spare, for future use and set to \"0\".\nThe Number of QFI shall indicate the total number of the QFI values. Each subsequent Octet after the Number of QFI shall carry one QFI value (i.e. the Octet 5 of the QFI IE, as specified in clause 8.2.89).",
      "chunk_type": "requirement",
      "cross_references": [
        "clause_8.2.89",
        "figure_8.2.156-1",
        "ts_23.501"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.157",
      "section_id": "8.2.157",
      "section_title": "MPTCP Address Information",
      "content": "The MPTCP Address Information IE shall carry the address information of MPTCP proxy in the UPF. It shall be encoded as shown in Figure 8.2.157-1.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 228 (decimal)\n3 to 4\nLength = n\n5\nSpare\nV6\nV4\n6\nMPTCP Proxy Type\n7 to 8\nMPTCP Proxy Port\np to (p+3)\nMPTCP Proxy IPv4 Address\nq to (q+15)\nMPTCP Proxy IPv6 Address\nm to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.157-1: MPTCP Address Information\nThe following flags are coded within Octet 5:\n-\tBit 1 – V4: If this bit is set to \"1\", then the MPTCP Proxy IPv4 Address field shall be present in the MPTCP Address Information IE.\n-\tBit 1 – V6: If this bit is set to \"1\", then the MPTCP IPv6 Address field shall be present in the MPTCP Address Information IE.\n-\tBit 3 to 8 Spare, for future use and set to \"0\".\nOctets 6 shall indicate the MPTCP Proxy Type, with the value specified in clause 6.1.4 of 3GPP TS 24.193 [59].\nOctets 7 to 8 shall indicate the allocated TCP port number of the MPTCP Proxy.\nOctets \"p to (p+3)\" or \"q to (q+15)\" (IPv4 address / IPv6 address fields), if present, shall contain the address value.",
      "chunk_type": "requirement",
      "cross_references": [
        "ts_24.193_clause_6.1.4",
        "figure_8.2.157-1",
        "ts_24.193"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.158",
      "section_id": "8.2.158",
      "section_title": "Link-Specific Multipath IP Address",
      "content": "The Link-Specific Multipath IP Address IE shall carry link-specific IP address used for MPTCP or MPQUIC steering function. It shall be encoded as shown in Figure 8.2.158-1.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 229 (decimal)\n3 to 4\nLength = n\n5\nSpare\nNV6\nNV4\nV6\nV4\np to (p+3)\nLink-Specific Multipath IPv4 Address for 3GPP Access\nq to (q+15)\nLink-Specific Multipath IPv6 Address for 3GPP Access\nr to (r+3)\nLink-Specific Multipath IPv4 Address for Non-3GPP Access\ns to (s+3)\nLink-Specific Multipath IPv6 Adress for Non-3GPP Access\nm to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.158-1: Link-Specific Multipath IP Address\nThe following flags are coded within Octet 5:\n-\tBit 1 – V4: If this bit is set to \"1\", then the Link-Specific Multipath IPv4 Address for 3GPP Access shall be present in the Link-Specific Multipath IP Address IE.\n-\tBit 2 – V6: If this bit is set to \"1\", then the Link-Specific Multipath IPv6 Address for 3GPP Access shall be present in the Link-Specific Multipath IP Address IE.\n-\tBit 3 – NV4: If this bit is set to \"1\", then the Link-Specific Multipath IPv4 Address for Non-3GPP Access shall be present in the Link-Specific Multipath IP Address IE.\n-\tBit 4 – NV6: If this bit is set to \"1\", then the Link-Specific Multipath IPv6 Address for Non-3GPP Access shall be present in the Link-Specific Multipath IP Address IE.\n-\tBit 5 to 8 Spare, for future use and set to \"0\".\nOctets \"p to (p+3)\" or \"q to (q+15)\" (IPv4 address / IPv6 address fields), if present, shall contain the value for Link-Specific Multipath IP Address for 3GPP access.\nOctets \"r to (r+3)\" or \"s to (s+15)\" (IPv4 address / IPv6 address fields), if present, shall contain the value for Link-Specific Multipath IP Address for Non-3GPP access.",
      "chunk_type": "requirement",
      "cross_references": [
        "figure_8.2.158-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.159",
      "section_id": "8.2.159",
      "section_title": "PMF Address Information",
      "content": "The PMF Address Information IE shall contain the address information of Performance Measure Function (PMF). It shall be encoded as shown in Figure 8.2.159-1.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 230 (decimal)\n3 to 4\nLength = n\n5\nSpare\nMAC\nV6\nV4\np to (p+3)\nPMF IPv4 Address\nq to (q+15)\nPMF IPv6 Address\nr to (r+1)\nPMF Port for 3GPP Access\ns to (s+1)\nPMF Port for Non-3GPP Access\nt to (t+5)\nPMF MAC Address for 3GPP Access\nu to (u+5)\nPMF MAC Address for Non-3GPP Access\nm to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.159-1: PMF Addresss Information\nThe following flags are coded within Octet 5:\n-\tBit 1 – V4: If this bit is set to \"1\", it indicates the PMF IPv4 Address filed shall be presend in the PMF Address Information IE, together with: PMF Port for 3GPP Access, PMF Port for Non-3GPP Access.\n-\tBit 2 – V6: If this bit is set to \"1\", it indicates the PMF IPv6 Address filed shall be presend in the PMF Address Information IE, together with: PMF Port for 3GPP Access, PMF Port for Non-3GPP Access.\n-\tBit 3 – MAC: If this bit is set to \"1\", it indicates the PMF MAC Address for 3GPP Access, PMF MAC Address for Non-3GPP Access filed shall be presend in the PMF Address Information IE.\n-\tBit 4 to 8 Spare, for future use and set to \"0\".\nOctets \"p to (p+3)\" or \"q to (q+15)\" (IPv4 address / IPv6 address fields), if present, shall contain the value for PMF IP Address.\nOctets \"r to (r+1)\" shall carry the allocated UDP port number associated with the 3GPP access network, for IP PDU session.\nOctets \"s to (s+1)\" shall carry the allocated UDP port number associated with the Non-3GPP access network, for IP PDU session.\nOctets \"t to (t+5)\" shall carry the allocated PMF MAC address for 3GPP access, for Ethernet PDU session.\nOctets \"u to (u+5)\" shall carry the allocated PMF MAC address for Non-3GPP access, for Ethernet PDU session.",
      "chunk_type": "requirement",
      "cross_references": [
        "figure_8.2.159-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.160",
      "section_id": "8.2.160",
      "section_title": "ATSSS-LL Information",
      "content": "The ATSSS-LL Information IE shall contain ATSSS-LL information. It shall be encoded as shown in Figure 8.2.160-1.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 231 (decimal)\n3 to 4\nLength = n\n5\nSpare\nLLI\nm to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.160-1: ATSSS-LL Information\nThe following flags are coded within Octet 5:\n-\tBit 1 – LLI: If this bit is set to \"1\", it indicates that resources for the ATSSS-LL steering functionality have been allocated.\n-\tBit 2 to 8 Spare, for future use and set to \"0\".",
      "chunk_type": "requirement",
      "cross_references": [
        "figure_8.2.160-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.161",
      "section_id": "8.2.161",
      "section_title": "Data Network Access Identifier",
      "content": "The Data Network Access Identifier IE type shall be encoded as shown in Figure 8.2.161-1. It contains an identifier of a Data Network Access.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 232 (decimal)\n3 to 4\nLength = n\n5 to (n+4)\nData Network Access Identfier\nFigure 8.2.161-1: Data Network Access Identifier\nThe Data Network Access Identifier field shall be encoded as an OctetString.",
      "chunk_type": "parameter",
      "cross_references": [
        "figure_8.2.161-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.162",
      "section_id": "8.2.162",
      "section_title": "Average Packet Delay",
      "content": "The Average Packet Delay IE indicates the average packet delay experienced by user plane packets on a GTP-U path. It shall be coded as depicted in Figure 8.2.162-1.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 234 (decimal)\n3 to 4\nLength = n\n5 to 8\nDelay Value in milliseconds\n9 to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.162-1: Average Packet Delay\nThe Delay Value shall be encoded as an Unsigned 32 binary integer value, in milliseconds.",
      "chunk_type": "requirement",
      "cross_references": [
        "figure_8.2.162-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.163",
      "section_id": "8.2.163",
      "section_title": "Minimum Packet Delay",
      "content": "The Minimum Packet Delay IE indicates the minimum packet delay experienced by user plane packets on a GTP-U path. It shall be coded as depicted in Figure 8.2.163-1.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 235 (decimal)\n3 to 4\nLength = n\n5 to 8\nDelay Value in milliseconds\n9 to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.163-1: Minimum Packet Delay\nThe Delay Value shall be encoded as an Unsigned 32 binary integer value, in milliseconds.",
      "chunk_type": "requirement",
      "cross_references": [
        "figure_8.2.163-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.164",
      "section_id": "8.2.164",
      "section_title": "Maximum Packet Delay",
      "content": "The Maximum Packet Delay IE indicates the maximum packet delay experienced by user plane packets on a GTP-U path. It shall be coded as depicted in Figure 8.2.164-1.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 236 (decimal)\n3 to 4\nLength = n\n5 to 8\nDelay Value in milliseconds\n9 to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.164-1: Maximum Packet Delay\nThe Delay Value shall be encoded as an Unsigned 32 binary integer value, in milliseconds.",
      "chunk_type": "requirement",
      "cross_references": [
        "figure_8.2.164-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.165",
      "section_id": "8.2.165",
      "section_title": "QoS Report Trigger",
      "content": "The QoS Report Trigger IE shall be encoded as shown in Figure 8.2.165-1. It indicates the trigger of the QoS report.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 237 (decimal)\n3 to 4\nLength = n\n5\nSpare\nIRE\nTHR\nPER\n6 to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.165-1: QoS Report Trigger\nOctet 5 shall be encoded as follows:\n-\tBit 1 – PER (Periodic Reporting): when set to \"1\", this indicates a periodic report.\n-\tBit 2 –THR (Event triggered based on Threshold): when set to \"1\", this indicates a report caused by QoS exceeding a threshold.\n-\tBit 3 – IRE (Immediate Report): when set to \"1\", this indicates an immediate report requested by CP function.\n-\tBit 4 to 8: Spare, for future use and set to \"0\".",
      "chunk_type": "requirement",
      "cross_references": [
        "figure_8.2.165-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.166",
      "section_id": "8.2.166",
      "section_title": "GTP-U Path Interface Type",
      "content": "The GTP-U Path Interface Type IE shall be encoded as shown in Figure 8.2.166-1.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 241 (decimal)\n3 to 4\nLength = n\n5\nSpare\nN3\nN9\n6 to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.166-1: GTP-U Path Interface Type\nOctet 5 shall be encoded as follows:\n-\tBit 1 – N9: when set to \"1\", this indicates the N9 interface type.\n-\tBit 2 –N3: when set to \"1\", this indicates the N3 interface type.\n-\tBit 3 to 8: Spare, for future use and set to \"0\".",
      "chunk_type": "requirement",
      "cross_references": [
        "figure_8.2.166-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.167",
      "section_id": "8.2.167",
      "section_title": "Requested QoS Monitoring",
      "content": "The Requested QoS Monitoring IE shall be encoded as shown in Figure 8.2.167-1.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 243 (decimal)\n3 to 4\nLength = n\n5\nULDR\nDLDR\nULCI\nDLCI\nGTPUPM\nRPPD\nULPD\nDLPD\n6 to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.167-1: Requested QoS Monitoring\nOctet 5 shall be encoded as follows:\n-\tBit 1 – DLPD (Downlink Packet Delay): when set to \"1\", this indicates a request for measuring the downlink packet delay from the UPF (PSA) to the UE.\n-\tBit 2 – ULPD (Uplink Packet Delay): when set to \"1\", this indicates a request for measuring the uplink packet delay from the UE to the UPF (PSA).\n-\tBit 3 – RPPD (Round Trip Packet Delay): when set to \"1\", this indicates a request for measuring the round trip packet delay between the UPF (PSA) and UE.\n-\tBit 4 – GTPUPM (GTP-U Path Monitoring):\n-\twhen set to \"1, this indicates that the Downlink, Uplink or Round Trip delay shall be measured by using GTP-U path monitoring, i.e. by the I-UPF reporting the one-way end to end accumulated transport delay in UL GTP-U packets towards the PSA; see clause 5.33.3.3 of 3GPP TS 23.501 [28];\n-\twhen set to \"0\", this indicates that the Downlink, Uplink or Round Trip delay shall be measured by using RAN and UPF time information in GTP-U packets; see clause 5.33.3.2 of 3GPP TS 23.501 [28].\n-\tBit 5 – DLCI (Downlink Congestion Information): when set to \"1\", this indicates a request for monitoring the congestion information of the QoS flow for the downlink direction received from the NG-RAN.\n-\tBit 6 – ULCI (Uplink Congestion Information): when set to \"1\", this indicates a request for monitoring the congestion information of the QoS flow for the uplink direction received from the NG-RAN.\n-\tBit 7 – DLDR (Downlink Data Rate): when set to \"1\", this indicates a request for monitoring the data rate of the QoS flow for the downlink direction.\n-\tBit 8 – ULDR (Uplink Data Rate): when set to \"1\", this indicates a request for monitoring the data rate of the QoS flow for the uplink direction.\nAt least one bit shall be set to \"1\". Several bits may be set to \"1\".",
      "chunk_type": "requirement",
      "cross_references": [
        "ts_23.501_clause_5.33.3.3",
        "ts_23.501_clause_5.33.3.2",
        "figure_8.2.167-1",
        "ts_23.501"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.168",
      "section_id": "8.2.168",
      "section_title": "Reporting Frequency",
      "content": "The Reporting Frequency IE shall be encoded as shown in Figure 8.2.168-1. It indicates the typeof requested QoS Monitoring reports.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 244 (decimal)\n3 to 4\nLength = n\n5\nSpare\nReserved\nPERIO\nEVETT\n6 to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.19-1: Reporting Frequency\nOctet 5 shall be encoded as follows:\n-\tBit 1 – EVETT (Event Triggered QoS monitoring reporting): when set to \"1\", this indicates the delay for QoS monitoring is reported when the delay exceeds a threshold.\n-\tBit 2 – PERIO (Periodic QoS monitoring reporting): when set to \"1\", this indicates the delay for QoS monitoring is reported periodicly.\n-\tBit 3: Reserved. It shall be set to \"0\" by the sender and it shall be ignored by the receiver.\nNOTE: Bit 3 was allocated in earlier versions of the specification but its usage has been deprecated.\n-\tBits 4 to 8: Spare, for future use and set to \"0\".\nAt least one bit shall be set to \"1\". Several bits may be set to \"1\".",
      "chunk_type": "requirement",
      "cross_references": [
        "figure_8.2.168-1",
        "figure_8.2.19-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.169",
      "section_id": "8.2.169",
      "section_title": "Packet Delay Thresholds",
      "content": "The Packet Delay Thresholds IE contains a packet delay thresholds in milliseconds to be monitored by the UP function. It shall be encoded as shown in Figure 8.2.169-1.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 245 (decimal)\n3 to 4\nLength = n\n5\nSpare\nRP\nUL\nDL\nm to (m+3)\nDownlink packet delay threshold\np to (p+3)\nUplink packet delay threshold\nq to (q+3)\nRound trip packet delay threshold\ns to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.169-1: Packet Delay Thresholds\nThe following flags are coded within Octet 5:\n-\tBit 1 – DL: If this bit is set to \"1\", then the Downlink packet delay threshold field shall be present, otherwise the Downlink packet delay threshold field shall not be present.\n-\tBit 2 – UL: If this bit is set to \"1\", then the Uplink packet delay threshold field shall be present, otherwise the Uplink packet delay threshold field shall not be present.\n-\tBit 3 – RP: If this bit is set to \"1\", then the Round trip packet delay threshold field shall be present, otherwise the Round trip packet delay threshold field shall not be present.\n-\tBit 4 to 8: Spare, for future use and set to \"0\".\nAt least one bit shall be set to \"1\". Several bits may be set to \"1\".\nThe Downlink packet delay threshold, Uplink packet delay threshold and Round trip packet delay threshold fields shall be encoded as an Unsigned32 binary integer value. They shall contain the downlink, uplink or round trip packet delay in milliseconds respectively.",
      "chunk_type": "requirement",
      "cross_references": [
        "figure_8.2.169-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.170",
      "section_id": "8.2.170",
      "section_title": "Minimum Wait Time",
      "content": "The Minimum Wait Time IE contains the minimum waiting time between two consecutive reports for event triggered QoS monitoring reporting. It shall be encoded as shown in Figure 8.2.170-1.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 246 (decimal)\n3 to 4\nLength = n\n5 to 8\nMinimum Wait Time\n9 to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.170-1: Minimum Wait Time\nThe Minimum Wait Time field shall be encoded as an Unsigned32 binary integer value. It shall contain the duration in seconds.",
      "chunk_type": "requirement",
      "cross_references": [
        "figure_8.2.170-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.171",
      "section_id": "8.2.171",
      "section_title": "QoS Monitoring Measurement",
      "content": "The QoS Monitoring Measurement IE contains the QoS measurements from the UP function. It shall be encoded as shown in Figure 8.2.171-1.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 248 (decimal)\n3 to 4\nLength = n\n5\nULDR\nDLDR\nULCI\nDLCI\nPLMF\nRPPD\nULPD\nDLPD\nm to (m+3)\nDownlink packet delay\np to (p+3)\nUplink packet delay\nq to (q+3)\nRound trip packet delay\nr to (r+1)\nDownlink Congestion information\ns to (s+1)\nUplink Congestion information\nt to (t+4)\nAverage downlink data rate\nu to (u+4)\nAverage uplink data rate\nv to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.171-1: QoS Monitoring Measurement\nThe following flags are coded within Octet 5:\n-\tBit 1 – DLPD (Downlink Packet Delay): If this bit is set to \"1\", then the Downlink packet delay field shall be present, otherwise the Downlink packet delay field shall not be present.\n-\tBit 2 – ULPD (Uplink Packet Delay): If this bit is set to \"1\", then the Uplink packet delay field shall be present, otherwise the Uplink packet delay field shall not be present.\n-\tBit 3 – RPPD (Round Trip Packet Delay): If this bit is set to \"1\", then the Round trip packet delay field shall be present, otherwise the Round trip packet delay field shall not be present.\n-\tBit 4 – PLMF (Packet Delay Measurement Failure): If this bit is set to \"1\", this indicates no timestamp is received in uplink packet for a delay exceeding the Measurement Period.\n-\tBit 5 – DLCI (Downlink Congestion Info): If this bit is set to \"1\", then the Downlink Congestion information field shall be present, otherwise the Downlink Congestion information field shall not be present.\n-\tBit 6 – ULCI (Uplink Congestion Info): If this bit is set to \"1\", then the Uplink Congestion information field shall be present, otherwise the Uplink Congestion information field shall not be present.\n-\tBit 7 – DLDR (Downlink Data Rate): If this bit is set to \"1\", then the Average downlink data rate field shall be present, otherwise it shall not be present.\n-\tBit 8 – ULDR (Uplink Data Rate): If this bit is set to \"1\", then the Average uplink data rate field shall be present, otherwise it shall not be present.\nAt least one bit shall be set to \"1\". Several bits may be set to \"1\".\nWhen the PLMF flag is set to \"1\", the RP, UL and DL bits shall not be set to \"1\", i.e. the DL/UL/Round Trip packet delay fields shall not be present when reporting a packet delay measurement failure.\nThe Downlink packet delay, Uplink packet delay and Round trip packet delay fields shall be encoded as an Unsigned32 binary integer value. They shall contain the downlink, uplink or round trip packet delay in milliseconds respectively.\nThe Downlink Congestion information field and the Uplink Congestion information field shall be encoded as an Unsigned16 binary integer value, in the (decimal) values range 0 to 10000 (included), representing the percentage of congestion level in the downlink and in the uplink directions respectively, up to two decimal points, for the QoS flow. As an example, the (decimal) value 9574 corresponds to a percentage of 95.74%.\nThe Average downlink data rate and the Average uplink data rate fields shall be encoded as kilobits per second (1 kbps = 1000 bps) in binary value (rounded upwards).",
      "chunk_type": "requirement",
      "cross_references": [
        "figure_8.2.171-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.172",
      "section_id": "8.2.172",
      "section_title": "MT-EDT Control Information",
      "content": "MT-EDT Control Information is coded as depicted in Figure 8.2.172-1.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 249 (decimal)\n3 to 4\nLength = n\n5\nSpare\nRDSI\nk to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.172-1: MT-EDT Control Information\nThe following flags are coded within Octet 5:\n-\tBit 1 – RDSI (Reporting DL data packets Size Indication): This bit shall be set to \"1\" if the UP function is requested to report the sum of DL data packets size.\n-\tBit 2 to 8 are spare and reserved for future use.",
      "chunk_type": "general",
      "cross_references": [
        "figure_8.2.172-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.173",
      "section_id": "8.2.173",
      "section_title": "DL Data Packets Size",
      "content": "The DL Data Packets Size IE type shall be encoded as shown in Figure 8.2.173-1. It contains the sum of DL data packets size in byte which triggers to send Downlink Data Report.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 250 (decimal)\n3 to 4\nLength = n\n5 to 6\nDL Data Packets Size\n7 to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.173-1: DL Data Packets Size\nThe DL Data Packets Size shall be encoded as an Unsigned16 binary integer value.",
      "chunk_type": "requirement",
      "cross_references": [
        "figure_8.2.173-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.174",
      "section_id": "8.2.174",
      "section_title": "QER Control Indications",
      "content": "The QER Control Indications IE indicates flags applicable to a QER. It is coded as depicted in Figure 8.2.174-1.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 251 (decimal)\n3 to 4\nLength = n\n5\nSpare\nSpare\nSpare\nSpare\nSpare\nSpare\nSpare\nRCSR\n6 to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.174-1: QER Control Indications\nThe following bits within Octet 5 shall indicate:\n-\tBit 1 – RCSR (Rate Control Status Reporting): If this bit is set to \"1\", then the UP function shall report the rate control status when the PFCP session is released. If this bit is set to \"0\", then the UPF shall not report the rate control status (see clause 5.4.15).\n-\tBit 2 to 8 – Spare, for future use, shall be set to \"0\" by the sender and discarded by the receiver.",
      "chunk_type": "general",
      "cross_references": [
        "clause_5.4.15",
        "figure_8.2.174-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.175",
      "section_id": "8.2.175",
      "section_title": "NF Instance ID",
      "content": "The NF Instance ID IE type shall be encoded as shown in Figure 8.2.175-1. It contains the NF Instance ID of a UPF.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 253 (decimal)\n3 to 4\nLength = 16\n5 to 20\nNF Instance ID\nFigure 8.2.175-1: NF Instance ID\nThe format of the NF Instance ID field shall be a Universally Unique Identifier (UUID) version 4, as specified in IETF RFC 4122 [75].",
      "chunk_type": "requirement",
      "cross_references": [
        "figure_8.2.175-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.176",
      "section_id": "8.2.176",
      "section_title": "S-NSSAI",
      "content": "The S-NSSAI IE indicates the S-NSSAI of a PDU session. It shall be encoded as shown in Figure 8.2.176-1.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 257 (decimal)\n3 to 4\nLength = 4\n5\nSST\n6 to 8\nSD\nFigure 8.2.176-1: S-NSSAI\nThe SST (Slice/Service Type) and SD (Slice Differentiator) fields shall be encoded as defined in clause 28.4.2 of 3GPP TS 23.003 [2].",
      "chunk_type": "requirement",
      "cross_references": [
        "ts_23.003_clause_28.4.2",
        "figure_8.2.176-1",
        "ts_23.003"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.177",
      "section_id": "8.2.177",
      "section_title": "IP version",
      "content": "IP version shall be encoded as shown in Figure 8.2.177-1.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 258 (decimal)\n3 to 4\nLength = n\n5\nSpare\nV6\nV4\n6 to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.177-1: IP version\nThe following flags are coded within Octet 5:\n-\tBit 1 – V4: when set to \"1\", this indicate the IP version is V4;\n-\tBit 2 – V6: when set to \"1\", this indicate the IP version is V6;\n-\tBit 3 to 8: Spare, for future use and set to \"0\".\nAt least one of V4 and V6 shall be set to \"1\", and both may be set to \"1\".",
      "chunk_type": "requirement",
      "cross_references": [
        "figure_8.2.177-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.178",
      "section_id": "8.2.178",
      "section_title": "PFCPASReq-Flags",
      "content": "The PFCPASReq-Flags IE indicates flags applicable to the PFCP Association Setup Request message. It is coded as depicted in Figure 8.2.178-1.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 259 (decimal)\n3 to 4\nLength = n\n5\nSpare\nUUPSI\n6 to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.178: PFCPASReq-Flags\nThe following bits within Octet 5 shall indicate:\n-\tBit 1 – UUPSI (UPF configured for IPUPS Indication): if this bit is set to \"1\", it indicates that the UPF is configured to be used for IPUPS. See clause 5.27.\n-\tBit 2 to 8 – Spare, for future use, shall be set to \"0\" by the sender and discarded by the receiver.",
      "chunk_type": "general",
      "cross_references": [
        "clause_5.27",
        "figure_8.2.178-1",
        "figure_8.2.178"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.179",
      "section_id": "8.2.179",
      "section_title": "Data Status",
      "content": "The Data Status IE indicates the status of the data packets in the UP function. It is coded as shown in Figure 8.2.179-1.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 260 (decimal)\n3 to 4\nLength = n\n5\nSpare\nBUFF\nDROP\n6 to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.179-1: Data Status\nThe following flags are coded within Octet 5:\n-\tBit 1 – DROP: when set to \"1\", this indicates first DL packet is discarded by the UP function.\n-\tBit 2 – BUFF: when set to \"1\", this indicates first DL packet is received and buffered by the UP function.\n-\tBit 3 to 8 Spare, for future use and set to \"0\".",
      "chunk_type": "general",
      "cross_references": [
        "figure_8.2.179-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.180",
      "section_id": "8.2.180",
      "section_title": "RDS Configuration Information",
      "content": "The RDS Configuration Information IE shall provide details of the RDS Configuration Information. It shall be encoded as shown in Figure 8.2.180-1.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 262 (decimal)\n3 to 4\nLength = n\n5\nSpare\nRDS\nm to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.180-1: RDS Configuration Information\nThe following flags are coded within Octet 5:\n-\tBit 1 – RDS (Reliable Data Service): If this bit is set to \"1\", it indicates that the RDS is requested to be applied (in request) / applied (in response).\n-\tBit 2 to 8 Spare, for future use and set to \"0\".",
      "chunk_type": "requirement",
      "cross_references": [
        "figure_8.2.180-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.188",
      "section_id": "8.2.188",
      "section_title": "LNS Address",
      "content": "The LNS Address IE shall contain an IPv4/IPv6 address. It shall be encoded as shown in Figure 8.2.188-1.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType =  280 (decimal)\n3 to 4\nLength = n\n5 to o\nLNS Address value\nm to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.188-1: LNS Address\nIf the LNS Address is an IPv4 address, the LNS Address value length shall be \"4\".\nIf the LNS Address is an IPv6 address, the LNS Address value length shall be \"16\".",
      "chunk_type": "requirement",
      "cross_references": [
        "figure_8.2.188-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.181",
      "section_id": "8.2.181",
      "section_title": "Multipath Applicable Indication",
      "content": "Multipath Applicable Indication shall be coded as depicted in Figure 8.2.181-1.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 265 (decimal)\n3 to 4\nLength = n\n5\nSpare\nMQAI\nMTAI\n6 to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.181-1: Multipath Applicable Indication\nThe following flags are coded within Octet 5:\n-\tBit 1 – MTAI (MPTCP Applicable Indication): When this bit is set to \"1\", it indicates that the PDR is used to detect user plane traffic for which MPTCP is applicable (see clause 5.20.2.4).\n-\tBit 2 – MQAI (MPQUIC Applicable Indication): When this bit is set to \"1\", it indicates that the PDR is used to detect user plane traffic for which MPQUIC is applicable (see clause 5.20.2A.4).\n-\tBit 3 to 8 are spare and reserved for future use.",
      "chunk_type": "requirement",
      "cross_references": [
        "clause_5.20.2.4",
        "clause_5.20.2",
        "figure_8.2.181-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.182",
      "section_id": "8.2.182",
      "section_title": "User Plane Node Management Information Container",
      "content": "The User Plane Node Management Information Container IE shall be encoded as shown in Figure 8.2.182-1. It contains an opaque container of User Plane Node management information.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 266 (decimal)\n3 to 4\nLength = n\n5 to (n+4)\nUser Plane Node Management Information\nFigure 8.2.182-1: User Plane Node Management Information Container\nThe User Plane Node Management Information field shall be encoded as an Octet String. It shall encode a User plane node management message defined in clause 9 of 3GPP TS 24.539 [63].",
      "chunk_type": "requirement",
      "cross_references": [
        "ts_24.539_clause_9",
        "figure_8.2.182-1",
        "ts_24.539"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.183",
      "section_id": "8.2.183",
      "section_title": "Number of UE IP Addresses",
      "content": "Number of UE IP Addresses IE shall be coded as depicted in Figure 8.2.183-1. It contains an Unsigned32 binary integer value in octets \"a to (a+3)\" and \"b to (b+3)\".\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 268 (decimal)\n3 to 4\nLength = n\n5\nSpare\nSpare\nSpare\nSpare\nSpare\nSpare\nIPv6\nIPv4\na to (a+3)\nNumber of UE IPv4 Addresses\nb to (b+3)\nNumber of UE IPv6 Addresses\nk to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.183-1: Number of UE IP Addresses\nThe following flags are coded within Octet 5:\n-\tBit 1 – IPv4: If this bit is set to \"1\", Number of UE IPv4 Addresses field shall be present. Otherwise the Number of UE IPv4 Addresses field shall not be present.\n-\tBit 2 – IPv6: If this bit is set to \"1\", Number of UE IPv6 Addresses field shall be present. Otherwise the Number of UE IPv6 Addresses field shall not be present.\nOctets \"a to (a+3)\" and/or \"b to (b+3)\" shall be present if Bis 1 and/or Bit 2 in octet 5 is present. Otherwise, these octets shall not be present.",
      "chunk_type": "requirement",
      "cross_references": [
        "figure_8.2.183-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.184",
      "section_id": "8.2.184",
      "section_title": "Validity Timer",
      "content": "Validity Timer IE shall be coded as depicted in Figure 8.2.184-1. It shall contain two octets long Unsigned16 binary integer value representing a time interval in seconds.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 269 (decimal)\n3 to 4\nLength = n\n5 to 6\nValidity Timer\nk to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.184-1: Validity Timer",
      "chunk_type": "requirement",
      "cross_references": [
        "figure_8.2.184-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.185",
      "section_id": "8.2.185",
      "section_title": "Offending IE Information",
      "content": "Offending IE Information shall be coded as depicted in Figure 8.2.185-1.\n.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 274 (decimal)\n3 to 4\nLength = n\n5 to 6\nType of the offending IE\n7 to (n+4)\nValue of the offending IE\nFigure 8.2.185-1: Offending IE Information\nThe Type of the offending IE field in octets 5 to 6 shall contain the IE type (as defined in clause 8.2.1) that caused the failure.\nThe Value of the offending IE field in octets 7 to (n+4) shall contain the value of the offending IE that caused the failure.",
      "chunk_type": "requirement",
      "cross_references": [
        "clause_8.2.1",
        "figure_8.2.185-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.186",
      "section_id": "8.2.186",
      "section_title": "RAT Type",
      "content": "The RAT Type IE indicates the RAT type for the PFCP Session. The RAT Type IE type shall be encoded as shown in Figure 8.2.186-1.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 275\n3 to 4\nLength = n\n5\nRAT Type\n6 to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.186-1: RAT Type IE\nRAT Type indicates the type of RAT for the PFCP Session. It shall be encoded as defined in Table 8.2.186-1.\nTable 8.2.186-1: RAT Type values\nRAT Type\nValues (Decimal)\n<reserved>\n0\nUTRAN\n1\nGERAN\n2\nWLAN\n3\nGAN\n4\nHSPA Evolution\n5\nEUTRAN (WB-E-UTRAN)\n6\nVirtual\n7\nEUTRAN-NB-IoT\n8\nLTE-M\n9\nNR\n10\nWB-E-UTRAN (LEO)\n11\nWB-E-UTRAN (MEO)\n12\nWB-E-UTRAN (GEO)\n13\nWB-E-UTRAN (OTHERSAT)\n14\nEUTRAN-NB-IoT (LEO)\n15\nEUTRAN-NB-IoT (MEO)\n16\nEUTRAN-NB-IoT (GEO)\n17\nEUTRAN-NB-IoT (OTHERSAT)\n18\nLTE-M (LEO)\n19\nLTE-M (MEO)\n20\nLTE-M (GEO)\n21\nLTE-M (OTHERSAT)\n22\nNR (LEO)\n23\nNR (MEO)\n24\nNR (GEO)\n25\nNR (OTHERSAT)\n26\nNR-REDCAP\n27\nNR-EREDCAP\n28\nSpare, for future use\n29-255",
      "chunk_type": "requirement",
      "cross_references": [
        "table_8.2.186-1",
        "figure_8.2.186-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.187",
      "section_id": "8.2.187",
      "section_title": "L2TP User Authentication",
      "content": "The L2TP User Authentication IE shall be encoded as shown in Figure 8.2.187-1.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 278 (decimal)\n3 to 4\nLength = n\n5 - 6\nProxy Authen Type Value\n7\nSpare\nPAI\nPAR\nPAC\nPAN\n8\nLength of Proxy Authen Name\n9 to a\nProxy Authen Name Value\na+1\nLength of Proxy Authen Challenge\n(a+2) to b\nProxy Authen Challenge Value\nb+1\nLength of Proxy Authen Response\n(b+2) to c\nProxy Authen Response Value\nc+1\nProxy Authen ID\n(c+2) to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.187-1: L2TP User Authentication\nThe following flags are coded within Octet 7:\n-\tBit 1 – PAN: If this bit is set to \"1\", then the Length of Proxy Authen Name and Proxy Authen Name Value shall be present; otherwise, the Length of Proxy Authen Name and Proxy Authen Name Value  shall not be present.\n-\tBit 2 – PAC: If this bit is set to \"1\", then the Length of Proxy Authen Challenge and Proxy Authen Challenge Value shall be present; otherwise, the Length of Proxy Authen Challenge and Proxy Authen Challenge Value shall not be present.\n-\tBit 3 – PAR: If this bit is set to \"1\", then the Length of Proxy Authen Response and Proxy Authen Response Value shall be present; otherwise, the Length of Proxy Authen Response and Proxy Authen Response Value shall not be present.\n-\tBit 4 – PAI: If this bit is set to \"1\", then the Proxy Authen ID shall be present; otherwise, the Proxy Authen ID shall not be present.\nProxy Authen Type Value, Proxy Authen Name Value, Proxy Authen Challenge Value, Proxy Authen Response Value and Proxy Authen ID shall be encoded as the Attribute Value field for the Proxy Authen Type AVP, Proxy Authen Name AVP, Proxy Authen Challenge AVP, Proxy Authen Response AVP and Proxy Authen ID respectively as specified in IETF RFC 2661 [67].\nIf Proxy Authen Type Value is 1, then the PAN and PAR flags shall be set.\nIf Proxy Authen Type Value is 2, then the PAN, PAC, PAR, and PAI flags shall be set.\nIf Proxy Authen Type Value is 3, then the PAN, PAR, and PAI flags shall be set.\nIf Proxy Authen Type Value is 5, then the PAN, PAC, PAR, and PAI flags shall be set.",
      "chunk_type": "requirement",
      "cross_references": [
        "figure_8.2.187-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.189",
      "section_id": "8.2.189",
      "section_title": "Tunnel Preference",
      "content": "The Tunnel Preference IE type shall be encoded as shown in Figure 8.2.189-1. It contains a Tunnel Preference value which indicates the preference to be given to the L2TP tunnel to which it refers; higher preference is given to lower values, with 0x000000 being most preferred and 0xFFFFFF least preferred (see 3GPP TS 29.061 [39]).\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 281 (decimal)\n3 to 4\nLength = 3\n5 to 7\nTunnel Preference value\nFigure 8.2.189-1: Tunnel Preference\nThe Tunnel Preference value shall be encoded as three octets binary integer value.",
      "chunk_type": "requirement",
      "cross_references": [
        "figure_8.2.189-1",
        "ts_29.061"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.190",
      "section_id": "8.2.190",
      "section_title": "Calling Number",
      "content": "The Calling Number IE type shall be encoded as shown in Figure 8.2.190-1. It contains a Calling Number value which may contain a MSISDN (see 3GPP TS 29.061 [39]).\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 282 (decimal)\n3 to 4\nLength = n\n5 to (n+4)\nCalling Number value\nFigure 8.2.190-1: Calling Number\nThe Calling Number value shall be encoded in UTF8String format.",
      "chunk_type": "requirement",
      "cross_references": [
        "figure_8.2.190-1",
        "ts_29.061"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.191",
      "section_id": "8.2.191",
      "section_title": "Called Number",
      "content": "The Called Number IE type shall be encoded as shown in Figure 8.2.191-1. It contains a Called Number value which may contain a DNN/APN. (see 3GPP TS 29.061 [39]).\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 283 (decimal)\n3 to 4\nLength = n\n5 to (n+4)\nCalled Number value\nFigure 8.2.191-1: Called Number\nThe Called Number value shall be encoded in UTF8String format.",
      "chunk_type": "requirement",
      "cross_references": [
        "figure_8.2.191-1",
        "ts_29.061"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.192",
      "section_id": "8.2.192",
      "section_title": "L2TP Session Indications",
      "content": "The L2TP Session Indications IE shall be encoded as shown in Figure 8.2.192-1.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 284 (decimal)\n3 to 4\nLength = n\n5\nSpare\nSpare\nSpare\nSpare\nSpare\nRENSA\nREDSA\nREUIA\n6 to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.192-1: L2TP Session Indications\nThe following bits within Octet 5 shall indicate:\n-\tBit 1 – REUIA (Request UE IP Address): if this bit is set to \"1\", it indicates to the UP function that the UP function shall request the UE IP address from the LNS.\n-\tBit 2 – REDSA (Request DNS Server Address): if this bit is set to \"1\", it indicates to the UP function that the UP function shall request DNS Server Address from the LNS.\n-\tBit 3 – RENSA (Request NBNS Server Address): if this bit is set to \"1\", it indicates to the UP function that the UP function shall request NBNS Server Address from the LNS.\n-\tBit 4 to 8 – Spare, for future use, shall be set to \"0\" by the sender and discarded by the receiver.\nNOTE:\tREDSA and RENSA are only applicable for PDN connections/PDU sessions with IPv4 address.",
      "chunk_type": "requirement",
      "cross_references": [
        "figure_8.2.192-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.193",
      "section_id": "8.2.193",
      "section_title": "DNS Server Address",
      "content": "The DNS Server Address IE shall contain an IPv4 address. It shall be encoded as shown in Figure 8.2.193-1.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType =  285 (decimal)\n3 to 4\nLength = n\n5 to 8\nDNS Server Address value\n9 to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.193-1: DNS Server Address",
      "chunk_type": "requirement",
      "cross_references": [
        "figure_8.2.193-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.194",
      "section_id": "8.2.194",
      "section_title": "NBNS Server Address",
      "content": "The NBNS Server Address IE shall contain an IPv4 address. It shall be encoded as shown in Figure 8.2.194-1.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType =  286 (decimal)\n3 to 4\nLength = n\n5 to 8\nNBNS Server Address value\n9 to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.194-1: NBNS Server Address",
      "chunk_type": "requirement",
      "cross_references": [
        "figure_8.2.194-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.195",
      "section_id": "8.2.195",
      "section_title": "Maximum Receive Unit",
      "content": "The Maximum Receive Unit shall be encoded as shown in Figure 8.2.195-1. The Maximum Receive Unit value shall contain the link MTU size value received from the UE via the Protocol Configuration Options (see 3GPP TS 24.008 [5]).\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 287 (decimal)\n3 to 4\nLength = 2\n5 to 6\nMaximum Receive Unit value\nFigure 8.2.195-1: Maximum Receive Unit\nThe Maximum Receive Unit value shall be encoded as two octet's binary integer value.",
      "chunk_type": "requirement",
      "cross_references": [
        "figure_8.2.195-1",
        "ts_24.008"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.196",
      "section_id": "8.2.196",
      "section_title": "Thresholds",
      "content": "The Thresholds IE shall be encoded as shown in Figure 8.2.196-1. It indicates the RTT and/or a Packet Loss Rate.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 288 (decimal)\n3 to 4\nLength = n\n5\nSpare\nPLR\nRTT\nm to (m+1)\nRTT value\np\nPacket Loss Rate value\nq to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.196.-1: Thresholds\nThe following flags are coded within Octet 5:\n-\tBit 1 – RTT: If this bit is set to \"1\", then the RTT value field shall be present, otherwise the RTT value shall not be present.\n-\tBit 2 – PLR: If this bit is set to \"1\", then the Packet Loss Rate value field shall be present, otherwise the Packet Loss Rate value shall not be present.\n-\tBit 3 to 8 Spare, for future use and set to \"0\".\nAt least one bit shall be set to \"1\". Several bits may be set to \"1\".\nThe RTT value field shall be encoded as an Unsigned16 binary integer value. It shall contain the RTT in milliseconds.\nThe Packet Loss Rate value field shall indicate a percentage and may take binary coded integer values from and including 0 up to and including 100. Other values shall be considered as 0.",
      "chunk_type": "requirement",
      "cross_references": [
        "figure_8.2.196-1",
        "figure_8.2.196"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.197",
      "section_id": "8.2.197",
      "section_title": "Steering Mode Indicator",
      "content": "The Steering Mode Indicator IE shall be encoded as shown in Figure 8.2.197-1.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 289 (decimal)\n3 to 4\nLength = n\n5\nSpare\nUEAI\nALBI\n6 to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.197.-1: Steering Mode Indicator\nThe following flags are coded within Octet 5:\n-\tBit 1 –ALBI (Autonomous Load Balancing Indicator): If this bit is set to \"1\", the autonomous load-balance is allowed.\n-\tBit 2 –UEAI (UE Assistance Indicator): If this bit is set to \"1\", the UE-assistance operation is allowed.\n-\tBit 3 to 8 Spare, for future use and set to \"0\".\nThe ALBI and UEAI shall not be set to \"1\" at the same time.",
      "chunk_type": "requirement",
      "cross_references": [
        "figure_8.2.197-1",
        "figure_8.2.197"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.198",
      "section_id": "8.2.198",
      "section_title": "Group Id",
      "content": "The Group Id IE type shall be encoded as shown in Figure 8.2.198-1. It shall contain an octet string as a global unique identifier for a group and it may be encoded using the same mechanism for the NfInstanceId as specified in 3GPP TS 29.571 [61].\n.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 291 (decimal)\n3 to 4\nLength = n\n5 to n+4\nGroup Id\nFigure 8.2.198-1: Group Id",
      "chunk_type": "requirement",
      "cross_references": [
        "figure_8.2.198-1",
        "ts_29.571"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.199",
      "section_id": "8.2.199",
      "section_title": "CP IP Address",
      "content": "The CP IP Address IE shall contain an IPv4 and/or IPv6 address. It shall be encoded as shown in Figure 8.2.199-1.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 292 (decimal)\n3 to 4\nLength = n\n5\nSpare\nV4\nV6\np to (p+3)\nIPv4 Address\nq to (q+15)\nIPv6 Address\nFigure 8.2.199-1: CP IP Address\nThe following flags are coded within Octet 5:\n-\tBit 1 – V6: If this bit is set to \"1\", then the IPv6 address field shall be present in the CP IP Address, otherwise the IPv6 address field shall not be present.\n-\tBit 2 – V4: If this bit is set to \"1\", then the IPv4 address field shall be present in the CP IP Address, otherwise the IPv4 address field shall not be present.\n-\tBit 3 to 8 Spare, for future use and set to \"0\".\nOctets \"p to (p+3)\" or \"q to (q+15)\" (IPv4 address / IPv6 address fields), if present, shall contain the address value.",
      "chunk_type": "requirement",
      "cross_references": [
        "figure_8.2.199-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.200",
      "section_id": "8.2.200",
      "section_title": "IP Address and Port Number Replacement",
      "content": "The IP Address and Port Number Replacement IE type shall be encoded as shown in Figure 8.2.200-1. It contains instructions to modify the contents of the (inner) packet.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 293 (decimal)\n3 to 4\nLength = n\n5 to 6\nSpare\nUMN6RS\nSPN\nSIPV6\nSIPV4\nDPN\nDIPV6\nDIPV4\np to (p+3)\nDestination IPv4 Address\nq to (q+15)\nDestination IPv6 Address\nr to (r+1)\nDestination Port Number\ns to (s+3)\nSource IPv4 Address\nt to (t+15)\nSource IPv6 Address\nu to (u+1)\nSource Port Number\nv to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.200-1: IP Address and Port Number Replacement\nThe following flags are coded within Octet 5:\n-\tBit 1 – DIPV4: If this bit is set to \"1\", then the Destination IPv4 field shall be present, otherwise the Destination IPv4 field shall not be present.\n-\tBit 2 – DIPV6: If this bit is set to \"1\", then the Destination IPv6 field shall be present, otherwise the Destination IPv6 field shall not be present.\n-\tBit 3 – DPN: If this bit is set to \"1\", then the Destination Port Number field shall be present, otherwise the Destination Port Number field shall not be present.\n-\tBit 4 – SIPV4: If this bit is set to \"1\", then the Source IPv4 field shall be present, otherwise the Source IPv4 field shall not be present.\n-\tBit 5 – SIPV6: If this bit is set to \"1\", then the Source IPv6 field shall be present, otherwise the Source IPv6 field shall not be present.\n-\tBit 6 – SPN: If this bit is set to \"1\", then the Source Port Number field shall be present, otherwise the Source Port Number field shall not be present.\n-\tBit 7 – UMN6RS (Use Mapped N6 address to Replace Source IP address): if this bit is set to \"1\", it indicates that the V-UPF shall use the Mapped N6 IP address to replace the source IP address (which is set to the UE's private IP address) for the traffic sent to N6. This bit may be set in the IP Address and Port Number Replacement IE provided in a UL FAR.\n-\tBit 8 Spare, for future use and set to \"0\".\nWhen present, the Destination IPv4 Address field or the Source IPv4 Address field shall contain the destination or source IPv4 address respectively to set in the IPv4 header of the outgoing packet.\nWhen present, the Destination IPv6 Address field or the Source IPv6 Address field shall contain the destination or source IPv6 address respectively to set in the IPv6 header of the outgoing packet.\nWhen present, the Destination Port Number field or the Source Port Number field shall contain the destination or source Port Number respectively to set in the UDP header of the outgoing packet.\nAt least one IP address shall be present if the UMN6RS flag is not set.\nNeither of the Destination IPv4 Address, Destination IPv6 Address, Destination Port Number, Source IPv4 Address, Source IPv6 Address and Source Port Number IEs shall be present if the UMN6RS flag is set.",
      "chunk_type": "requirement",
      "cross_references": [
        "figure_8.2.200-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.201",
      "section_id": "8.2.201",
      "section_title": "DNS Query/Response Filter",
      "content": "The DNS Query/Response Filter IE type shall be encoded as shown in Figure 8.2.201-1. It contains a DNS Query Filter or the DNS Response Filter.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 294 (decimal)\n3 to 4\nLength = n\n5 to 6\nLength of Domain Name Pattern\n7 to p\nDomain Name Pattern\nx to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.201-1: DNS Query/Response Filter\nThe Domain Name Pattern field, in octets 7 to p, shall be encoded as Octetstring representing a JSON object defined as FqdnPatternMatchingRule data type specified in clause 5.2.4.23 of 3GPP TS 29.571 [61].",
      "chunk_type": "requirement",
      "cross_references": [
        "ts_29.571_clause_5.2.4.23",
        "figure_8.2.201-1",
        "ts_29.571"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.202",
      "section_id": "8.2.202",
      "section_title": "Event Notification URI",
      "content": "The Event Notification URI IE type shall be encoded as shown in Figure 8.2.202-1.\n.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 296 (decimal)\n3 to 4\nLength = n\n5 to n+4\nEvent Notification URI\nFigure 8.2.202-1: Event Notification URI\nThe Event Notification URI field in octets 5 to (n+4) shall contain an octet string representing the Event Notification URI (i.e. string providing an URI formatted according to IETF RFC 3986 [71]) to be used for sending the UPF event notifications.",
      "chunk_type": "requirement",
      "cross_references": [
        "figure_8.2.202-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.203",
      "section_id": "8.2.203",
      "section_title": "Notification Correlation ID",
      "content": "The Notification Correlation ID IE type shall be encoded as shown in Figure 8.2.203-1.\n.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 297 (decimal)\n3 to 4\nLength = n\n5 to n+4\nNotification Correlation ID\nFigure 8.2.203-1: Notification Correlation ID\nThe Notification Correlation ID field in octets 5 to (n+4) shall contain an octet string representing the value of the Notification Correlation ID to be sent in UPF event notifications.",
      "chunk_type": "requirement",
      "cross_references": [
        "figure_8.2.203-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.204",
      "section_id": "8.2.204",
      "section_title": "Reporting Flags",
      "content": "The Reporting Flags IE indicates flags providing additional information for direct event notification reporting. It is coded as depicted in Figure 8.2.204-1.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 298 (decimal)\n3 to 4\nLength = n\n5\nSpare\nSpare\nSpare\nSpare\nSpare\nSpare\nSpare\nDUPL\n6 to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.204-1: Reporting Flags\nThe following bits within Octet 5 shall indicate:\n-\tBit 1 – DUPL (Duplicated notification): if this bit is set to \"1\", it indicates that the UP function shall also report the event notifications over N4 (in addition to reporting them directly to the Event Notification URI).\n-\tBit 2 to 8 – Spare, for future use, shall be set to\"0\" by the sender and discarded by the receiver.",
      "chunk_type": "general",
      "cross_references": [
        "figure_8.2.204-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.205",
      "section_id": "8.2.205",
      "section_title": "Predefined Rules Name",
      "content": "The Predefined Rules Name IE type shall be coded as shown in Figure 8.2.205-1. It shall contain a Predefined Rules Name, referring to one or more predefined rules which are activated in the UP function.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 299 (decimal)\n3 to 4\nLength = n\n5 to (n+4)\nPredefined Rules Name\nFigure 8.2.205-1: Predefined Rules Name\nThe Predefined Rules Name field shall be encoded as an OctetString.",
      "chunk_type": "requirement",
      "cross_references": [
        "figure_8.2.205-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.206",
      "section_id": "8.2.206",
      "section_title": "MBS Session Identifier",
      "content": "The MBS Session Identifier is used to identify a 5G MBS Session. It contains the Temporary Mobile Group Identity as defined in 3GPP TS 23.003 [2] or a Source Specific IP multicast address which consists of two IP addresses, one is an IP unicast address used as source address in IP packets for identifying the source of the multicast service (e.g. AF/AS), the other is an IP multicast address used as destination address in related IP packets for identifying a multicast service associated with the source.\nIt is coded as specified in Figure 8.2.206-1.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 305 (decimal)\n3 to 4\nLength = n\n5\nSpare\nNIDI\nSSMI\nTMGI\n6-11\nTMGI\n12-m\nSource Specific IP Multicast Address\no to (o+5)\nNID\nq-(n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.206-1: MBS Session Identifier\nThe following bits within Octet 5 shall indicate:\n-\tBit 1 – TMGI: if this bit is set to \"1\", it indicates that the TMGI field shall be present, otherwise it shall not be present;\n-\tBit 2 – SSMI: if this bit is set to \"1\", it indicates that the Source Specific IP Multicast Address field shall be present, otherwise it shall not be present;\n-\tBit 3 – NIDI: if this bit is set to \"1\", it indicates that the Network Identifier (NID) field shall be present, otherwise it shall not be present;\n-\tBit 4 to 8 – Spare, for future use, shall be set to \"0\" by the sender and discarded by the receiver.\nThe TMGI field shall be encoded as octets 3 to octet 8 in the figure 10.5.154 of 3GPP TS 24.008 [5].\nThe Source Specific IP Multicast Address field shall be encoded the octets 10 to m of IE Multicast Transport Information as specified in 8.2.207.\nThe NID field shall be encoded with 11 hexadecimal digit, bit 8 to bit 5 of the octet \"o\" is the most significant digit and bit 8 to bit 5 of the octet \"o+5\" is the least significant digit, and bits 4 to 1 of octets (o+5) shall all be encoded as 0.",
      "chunk_type": "parameter",
      "cross_references": [
        "figure_8.2.206-1",
        "ts_24.008_figure_10.5.154",
        "ts_23.003",
        "ts_24.008"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.207",
      "section_id": "8.2.207",
      "section_title": "Multicast Transport Information",
      "content": "The Multicast Transport Information IE contains the Low Layer Source Specific IP Multicast Address allocated by the MB-UPF. It is coded as specified in Figure 8.2.207-1.\nThe IP Multicast Distribution Address and the IP Source Address fields contain the IPv4 or IPv6 address. The Address Type and Address Length fields shall be included in each field:\n-\tThe Address Type, which is a fixed length code (of 2 bits) identifying the type of address that is used in the Address field.\n-\tThe Address Length, which is a fixed length code (of 6 bits) identifying the length of the Address field.\n-\tThe Address, which is a variable length field shall contain either an IPv4 address or an IPv6 address.\nAddress Type 0 and Address Length 4 shall be used when Address is an IPv4 address.\nAddress Type 1 and Address Length 16 shall be used when Address is an IPv6 address.\nOther combinations of values are not valid.\nCommon Tunnel Endpoint Identifier is allocated at the source Tunnel Endpoint and signalled to the destination Tunnel Endpoint. There is one Common Tunnel Endpoint Identifier allocated per MBS session.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 306 (decimal)\n3 to 4\nLength=n\n5\nSpare\n6 to 9\nCommon Tunnel Endpoint Identifier\n10\nAddress Type\nAddress Length\n11 to K\nIP Multicast Distribution Address (IPv4 or IPv6)\nK+1\nAddress Type\nAddress Length\n(k+2) to m\nIP Source Address (IPv4 or IPv6)\n(m+1) to n\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.207-1: Multicast Transport Information",
      "chunk_type": "general",
      "cross_references": [
        "figure_8.2.207-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.208",
      "section_id": "8.2.208",
      "section_title": "MBSN4mbReq-Flags",
      "content": "The MBSN4mbReq-Flags IE indicates flags applicable to the PFCP Session Establishment Request. It is coded as depicted in Figure 8.2.208-1.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 307 (decimal)\n3 to 4\nLength = n\n5\nSpare\nMBS RESTI\nJMBSSM\nPLLSSM\n6 to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.208-1: MBSN4mbReq-Flags\nThe following bits within Octet 5 shall indicate:\n-\tBit 1 – PLLSSM (Provide Lower Layer SSM): if this bit is set to \"1\", it indicates that the MB-UPF shall allocate a lower layer SSM (i.e. multicast destination address and related source IP address) and a GTP-U Common Tunnel EndPoint Identifier (C-TEID) in the Multicast Transport Address IE. See clause 5.34.2.2.\n-\tBit 2 – JMBSSM (Join MBS Session SSM): if this bit is set to \"1\", it indicates that the MB-UPF shall join the multicast tree towards the Source Specific Multicast (SSM) address information provided by AF/AS or MBSTF for the MBS Session.\n-\tBit 3 – MBS RESTI (MBS Restoration Indication): if this bit is set to \"1\", it indicates to the MB-UPF that the PFCP session to be established is to restore an existing PFCP session of an MBS session.\n-\tBit 4 to 8 – Spare, for future use, shall be set to \"0\" by the sender and discarded by the receiver.",
      "chunk_type": "general",
      "cross_references": [
        "clause_5.34.2.2",
        "figure_8.2.208-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.209",
      "section_id": "8.2.209",
      "section_title": "Local Ingress Tunnel",
      "content": "The Local Ingress Tunnel IE type shall be encoded as shown in Figure 8.2.209-1. It indicates a UDP/IP tunnel.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 308 (decimal)\n3 to 4\nLength = n\n5\nSpare\nCH\nV6\nV4\n6-7\nUDP Port\nm to (m+3)\nIPv4 address\np to (p+15)\nIPv6 address\nk to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.209-1: Local Ingress Tunnel\nThe following flags are coded within Octet 5:\n-\tBit 1 – V4: If this bit is set to \"1\" and the CH bit is not set, then the IPv4 address field shall be present, otherwise the IPv4 address field shall not be present.\n-\tBit 2 – V6: If this bit is set to \"1\" and the CH bit is not set, then the IPv6 address field shall be present, otherwise the IPv6 address field shall not be present.\n-\tBit 3 – CH (CHOOSE): If this bit is set to \"1\", then the UDP Port, IPv4 address and IPv6 address fields shall not be present and the UP function shall assign a UDP Port with either an IP4 or an IPv6 address, depending on whether the CP fuction has set the V4 or the V6 bit, respectively. This bit shall only be set by the CP function.\n-\tBit 4 to 8: Spare, for future use and set to \"0\".\nOnly one of the V4 and V6 flags shall be set to \"1\".\nOctets \"m to (m+3)\" and/or \"p to (p+15)\" (IPv4 address / IPv6 address fields), if present, it shall contain the respective IP address values.",
      "chunk_type": "requirement",
      "cross_references": [
        "figure_8.2.209-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.210",
      "section_id": "8.2.210",
      "section_title": "MBS Unicast Parameters ID",
      "content": "The MBS Unicast Parameters ID IE type shall be encoded as shown in Figure 8.2.210-1. It shall contain a MBS Unicast Parameters ID.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 309 (decimal)\n3 to 4\nLength = n\n5 to 6\nMBS Unicast Parameters ID value\n7 to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.210-1: MBS Unicast Parameters ID\nThe MBS Unicast Parameters ID value field shall be encoded as an Unsigned16 binary integer value.",
      "chunk_type": "parameter",
      "cross_references": [
        "figure_8.2.210-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.211",
      "section_id": "8.2.211",
      "section_title": "MBSN4Resp-Flags",
      "content": "The MBSN4Resp-Flags IE indicates flags applicable to the PFCP Session Establishment/Modification/Deletion Response message for a PFCP session that is associated with an MBS Session. It is coded as depicted in Figure 8.2.211-1.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 312 (decimal)\n3 to 4\nLength = n\n5\nSpare\nN19DTR\nJMTI\nNN19DT\n6 to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.211-1: MBSN4Resp-Flags\nThe following bits within Octet 5 shall indicate:\n-\tBit 1 – NN19DT (New N19mb Downlink Tunnel): if this bit is set to \"1\", it indicates that the UPF has allocated a new N19mb DL Tunnel ID for the MBS Session;\n-\tBit 2 – JMTI (Joined N19mb Multicast Tree Indication): if this bit is set to \"1\", it indicates that the UPF has joined the multicast tree from MB-UPF;\n-\tBit 3 – N19DTR (N19mb Downlink Tunnel Removal): if this bit is set to \"1\", it indicates that the UPF is going to remove the N19mb DL Tunnel for receiving the MBS session data, because the PFCP session removing the PDR is the last PFCP session which was associated with the N19mb DL Tunnel in the UPF;\n-\tBit 4 to 8 – Spare, for future use, shall be set to \"0\" by the sender and discarded by the receiver.\nNOTE:\tSee clause 5.34.3.2 for further description of the setting and use of the bits in the MBSN4Resp-Flags.",
      "chunk_type": "general",
      "cross_references": [
        "clause_5.34.3.2",
        "figure_8.2.211-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.212",
      "section_id": "8.2.212",
      "section_title": "Tunnel Password",
      "content": "The Tunnel Password IE type shall be encoded as shown in Figure 8.2.212-1. It contains the value of Tunnel Password (in plain text) to be used for the L2TP tunnel.\nNOTE:\tThe CP function obtains the plain text value of Tunnel Password after decoding and de-encrypting the Tunnel-Password AVP, which is received from AAA/Radius Server, as specified in clause 3.5 of IETF RFC 2868 [68].\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 313 (decimal)\n3 to 4\nLength = n\n5 to (n+4)\nTunnel Password value\nFigure 8.2.212-1: Tunnel Password\nThe Tunnel Password value shall be encoded in UTF8String format.",
      "chunk_type": "requirement",
      "cross_references": [
        "clause_3.5",
        "figure_8.2.212-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.213",
      "section_id": "8.2.213",
      "section_title": "Area Session ID",
      "content": "The Area Session ID together with the MBS Session Identifier uniquely identifies the service area part of the content data of a location dependent MBS service (see clause 30.3 of 3GPP TS 23.003 [2]). It shall be coded as specified in Figure 8.2.213-1.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 314 (decimal)\n3 to 4\nLength = 2\n5 to 6\nArea Session ID value\nFigure 8.2.213-1: Area Session ID\nThe Area Session ID value shall be encoded as an Unsigned16 binary integer value.",
      "chunk_type": "general",
      "cross_references": [
        "ts_23.003_clause_30.3",
        "figure_8.2.213-1",
        "ts_23.003"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.214",
      "section_id": "8.2.214",
      "section_title": "DSCP to PPI Mapping Information",
      "content": "The DSCP to PPI Mapping Information IE shall be encoded as shown in Figure 8.2.214-1. It contains the mapping from DSCP(s) to a PPI.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 317 (decimal)\n3 to 4\nLength = n\n5\nSpare\nPPI Value\n6\nSpare\nDSCP Value 1\n7\nSpare\nDSCP Value 2\n...\nSpare\n...\n(5+x)\nSpare\nDSCP Value x\n(6+x) to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.214-1: DSCP to PPI Mapping Information\nThe PPI Value in octet 5 shall be encoded as a value between 0 and 7, as specified in clause 5.5.3.7 of 3GPP TS 38.415 [34].\nThe DSCP Value 1 to x, in octet 6 to octet (5+x), where X shall not be larger than 63, shall be encoded as the DSCP in TOS (IPv4) or TC (IPv6) information (see IETF RFC 2474 [13]).",
      "chunk_type": "requirement",
      "cross_references": [
        "ts_38.415_clause_5.5.3.7",
        "figure_8.2.214-1",
        "ts_38.415"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.215",
      "section_id": "8.2.215",
      "section_title": "PFCPSDRsp-Flags",
      "content": "The PFCPSDRsp-Flags IE indicates flags applicable to the PFCP Session Report Response message. It is coded as depicted in Figure8.2.215-1.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 318 (decimal)\n3 to 4\nLength = n\n5\nSpare\nSpare\nSpare\nSpare\nSpare\nSpare\nSpare\nPURU\n6 to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.215-1: PFCPSDRsp-Flags\nThe following bits within Octet 5 shall indicate:\n-\tBit 1 – PURU (Pending Usage Reports Unacknowledged): if this bit is set to \"1\", it indicates that there are pending PFCP Session Report Request messages which have not been acknowledged yet.\n-\tBit 2 to 8 – Spare, for future use, shall be set to \"0\" by the sender and discarded by the receiver.",
      "chunk_type": "general",
      "cross_references": [
        "figure_8.2.215-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.216",
      "section_id": "8.2.216",
      "section_title": "QER Indications",
      "content": "The QER Indications IE indicates flags applicable to a QER. It shall be coded as depicted in Figure 8.2.216-1.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 319 (decimal)\n3 to 4\nLength = n\n5\nSpare\nSpare\nSpare\nSpare\nPDUSM\nEML4S\nEDBMI\nIQFISN\n6 to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.216-1: QER Indications\nThe following bits within Octet 5 shall indicate:\n-\tBit 1 – IQFISN (Insert DL MBS QFI SN): If this bit is set to \"1\", then the MB-UPF shall insert the DL MBS QFI Sequence Number in the PDU Session Container of MBS data packets (see 3GPP TS 38.415 [34]).\n-\tBit 2 – EDBMI (End Of Data Burst Marking Indication): If this bit is set \"1\", then the UPF shall set the End Of Data Burst indication together with the QFI (identifying the QoS flow conveying the Data Burst) in the PDU Set Information Container of the GTP-U packet encapsulating the last PDU of each data burst (see 3GPP TS 38.415 [34]).\n-\tBit 3 – EML4S (ECN Marking for L4S): If this bit is set to \"1\", then the UPF shall perform ECN marking for L4S (see clause 5.38.1).\n-\tBit 4 – PDUSM (PDU Set Marking): If this bit is set to \"1\", then the UPF shall perform PDU Set marking in the PDU Set Information Container of the GTP-U packet (see clause 5.38.3).\n-\tBit 5 to 8 – Spare, for future use, shall be set to \"0\" by the sender and discarded by the receiver.",
      "chunk_type": "requirement",
      "cross_references": [
        "clause_5.38.1",
        "clause_5.38.3",
        "figure_8.2.216-1",
        "ts_38.415"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.217",
      "section_id": "8.2.217",
      "section_title": "Vendor-Specific Node Report Type",
      "content": "The Vendor-Specific Node Report Type IE shall be encoded as shown in Figure 8.2.217-1. It indicates the type of the Vendor-Specific node report the UP function sends to the CP function.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 320 (decimal)\n3 to 4\nLength = n\n5 to 6\nEnterprise ID\n7\nSpare\nSpare\nSpare\nSpare\nSpare\nSpare\nSpare\nSpare\n8 to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.217-1: Vendor-Specific Node Report Type\nOctet 7 (and following octets if needed) shall be encoded as a bitmask, where each bit in the bitmask shall indicate a Vendor-Specific Node Report Type. The definition and semantic of the bits in the bitmask are out of scope of 3GPP.\nEnterprise ID in octets 5 to 6 shall be encoded as defined in clause 8.1.1. The Enterprise ID may identify a Standards Development Organization. The report types indicated by octet 7 (and following octets if needed) are specific to the Standards Development Organization or enterprise identified by the Enterprise ID.\nSpare bits are for future use and shall be set to \"0\".\nAt least one bit shall be set to \"1\".\nNOTE:\tThe Vendor-Specific Node Report Type IE in the PFCP Node Report Request message can be used by non-3GPP Standards Development Organizations for interfaces relying on PFCP as the protocol for Control and User Plane Separation, for identifying the type of vendor-specific node reports not defined by 3GPP. The definition and semantic of the bits within the bitmask are to be specified by each non-3GPP Standards Development Organization (without liaising with 3GPP CT4). See clauses 5.9 and 8.1.1 for the definition and usage of Vendor Specific IEs.",
      "chunk_type": "requirement",
      "cross_references": [
        "clause_8.1.1",
        "figure_8.2.217-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.218",
      "section_id": "8.2.218",
      "section_title": "Configured Time Domain",
      "content": "The Configured Time Domain IE type shall be encoded as shown in Figure 8.2.218-1. It shall contain\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 321 (decimal)\n3 to 4\nLength = n\n5\nSpare\nCTDI\n6 to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.218-1: Configured Time Domain\nOctet 5 shall be encoded as follows:\n-\tBit 1 (CTDI – Configured Time Domain Indicator): when set to \"1\", this indicates that the Time Domain Number configured to the NW-TT(s) is used.\n-\tBits 2 to 8: Spare, for future use and set to \"0\".",
      "chunk_type": "requirement",
      "cross_references": [
        "figure_8.2.218-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.219",
      "section_id": "8.2.219",
      "section_title": "Metadata",
      "content": "The Metadata IE type shall be encoded as shown in Figure 8.2.219-1. It contains the Metadata which the UPF needs to apply to traffic sent over a Service Function Chain.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 322 (decimal)\n3 to 4\nLength = n\n5 to n+4\nMetadata\nFigure 8.2.219-1: Metadata\nThe Metadata field shall contain an octet string set to base64-encoded characters as specified in clause 5.5.2 of 3GPP TS 29.571 [61].\n8.2.220\tTraffic Parameter Threshold\nThe N6 Jitter Threshold IE contains a N6 Jitter threshold in milliseconds. It shall be encoded as shown in Figure 8.2.220-1.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 325 (decimal)\n3 to 4\nLength = n\n5\nSpare\nDL\n6 to 9\nDownlink N6 Jitter threshold\n10 to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.220-1: Traffic Parameter Threshold\nThe following flags are coded within Octet 5:\n-\tBit 1 – DL: If this bit is set to \"1\", then the Downlink packet N6 Jitter threshold field shall be present, otherwise the Downlink packet N6 Jitter threshold field shall not be present.\n-\tBit 2 to 8: Spare, for future use and set to \"0\".\nThe Downlink N6 Jitter threshold field shall be encoded as an Unsigned32 binary integer value containing the downlink packet Jitter threshold in milliseconds.\n8.2.221\tDL Periodicity\nThe DL Periodicity IE contains a DL Periodicity in milliseconds to be used to measure N6 Jitter by the UP function. It shall be encoded as shown in Figure 8.2.221-1.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 326 (decimal)\n3 to 4\nLength = n\n5\nSpare\n6 to 9\nDL Periodicity\n10 to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.221-1: DL Periodicity\nThe DL Periodicity fields shall be encoded as an Unsigned32 binary integer value containing the DL Periodicity in milliseconds.\n8.2.222\tN6 Jitter Measurement\nThe N6 Jitter Measurement IE contains a N6 jitter measurement in milliseconds measured by the UP function. It shall be encoded as shown in Figure 8.2.222-1.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 327 (decimal)\n3 to 4\nLength = n\n5\nSpare\nDL\n6 to 9\nDL Periodicity\n10 to 13\nLower DL Jitter Measurement\n14 to 17\nHigher DL Jitter Measurement\n18 to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.222-1: N6 Jitter Measurement\nThe following flags are coded within Octet 5:\n-\tBit 1 – DL: If this bit is set to \"1\", then the DL Periodicity, Lower DL Jitter Measurement and Higher DL Jitter Measurement fields shall be present, otherwise the DL Periodicity, Lower DL Jitter Measurement and Higher DL Jitter Measurement fields shall not be present.\n-\tBit 2 to 8: Spare, for future use and set to \"0\".\nWhen present, the DL Periodicity field shall be encoded as an Unsigned32 binary integer value containing the DL Periodicity in milliseconds used for the N6 Jitter Measurement.\nWhen present, the Lower DL Jitter Measurement and the Higher DL Jitter Measurement fields shall indicate the downlink packet Jitter range over N6. The Lower DL Jitter Measurement and the Higher DL Jitter Measurement fields shall be encoded as a signed32 binary integer value containing the downlink packet Jitter (i.e. positive or negative deviation of the arrival time of first packet of a Data Burst compared to the ideal Data Burst start time which is determined based on the DL periodicity) measured in milliseconds.",
      "chunk_type": "requirement",
      "cross_references": [
        "ts_29.571_clause_5.5.2",
        "figure_8.2.219-1",
        "figure_8.2.220-1",
        "figure_8.2.221-1",
        "figure_8.2.222-1",
        "ts_29.571"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.223",
      "section_id": "8.2.223",
      "section_title": "Traffic Parameter Measurement Indication",
      "content": "The Traffic Parameter Measurement Indication IE indicates to the UPF to perform the relevant traffic parameter measurement for a QoS flow. It shall be coded as depicted in Figure 8.2.223-1.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 328 (decimal)\n3 to 4\nLength = n\n5\nSpare\nN6JMI\nDLPMI\nULPMI\n6 to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.223-1: Traffic Parameter Measurement Indication\nThe following bits within Octet 5 shall indicate:\n-\tBit 1 – ULPMI (UL Periodicity Measurement Indication): If this bit is set to \"1\", then the UPF shall measure and report the UL Periodicity for the QoS flow as specified in clause 5.38.4.\n-\tBit 2 – DLPMI (DL Periodicity Measurement Indication): If this bit is set to \"1\", then the UPF shall measure the DL Periodicity for the QoS flow as specified in clause 5.38.4.\n-\tBit 3 – N6JMI (N6 Jitter Measurement Indication): If this bit is set to \"1\", then the UPF shall measure N6 Jitter as specified in clause 5.38.4.\n-\tBit 4 to 8 – Spare, for future use, shall be set to \"0\" by the sender and discarded by the receiver.\n8.2.224\tUL Periodicity\nThe UL Periodicity IE contains a UL Periodicity in milliseconds measured by the UP function when requested by the SMF. It shall be encoded as shown in Figure 8.2.224-1.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 329 (decimal)\n3 to 4\nLength = n\n5\nSpare\n6 to 9\nUL Periodicity\n10 to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.224-1: UL Periodicity\nThe UL Periodicity fields shall be encoded as an Unsigned32 binary integer value containing the UL Periodicity in milliseconds.",
      "chunk_type": "parameter",
      "cross_references": [
        "clause_5.38.4",
        "figure_8.2.223-1",
        "figure_8.2.224-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.225",
      "section_id": "8.2.225",
      "section_title": "MPQUIC Control Information",
      "content": "The MPTCP Control Information IE shall provide details of the required MPQUIC functionality. It shall be encoded as shown in Figure 8.2.a-1.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 330 (decimal)\n3 to 4\nLength = n\n5\nSpare\nCUDP\nm to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.225-1: MPQUIC Control Information\nThe following flags are coded within Octet 5:\n-\tBit 1– CUDP (CONNECT-UDP): If this bit is set to \"1\", it indicates that the proxy type of required MPQUIC is \"connect-udp\" (see clause 5.32.6.2.2 of 3GPP TS 23.501 [28]) and the UPF shall allocate relevant resource as specified in clause 5.20.2A.1\n-\tBit 2 to 8 Spare, for future use and set to \"0\".",
      "chunk_type": "requirement",
      "cross_references": [
        "ts_23.501_clause_5.32.6.2.2",
        "clause_5.20.2",
        "figure_8.2",
        "figure_8.2.225-1",
        "ts_23.501"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.226",
      "section_id": "8.2.226",
      "section_title": "MPQUIC Address Information",
      "content": "The MPQUIC Address Information IE shall carry the address information of MPQUIC proxy in the UPF. It shall be encoded as shown in Figure 8.2.226-1.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 332 (decimal)\n3 to 4\nLength = n\n5\nSpare\nV6\nV4\n6\nMPQUIC Proxy Type\n7 to 8\nMPQUIC Proxy Port\np to (p+3)\nMPQUIC Proxy IPv4 Address\nq to (q+15)\nMPQUIC Proxy IPv6 Address\nm to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.226-1: MPQUIC Address Information\nThe following flags are coded within Octet 5:\n-\tBit 1 – V4: If this bit is set to \"1\", then the MPQUIC Proxy IPv4 Address field shall be present in the MPQUIC Address Information IE.\n-\tBit 1 – V6: If this bit is set to \"1\", then the MPQUIC IPv6 Address field shall be present in the MPQUIC Address Information IE.\n-\tBit 3 to 8 Spare, for future use and set to \"0\".\nOctets 6 shall indicate the MPQUIC Proxy Type, with the value specified in clause 6.1.4 of 3GPP TS 24.193 [59].\nOctets 7 to 8 shall indicate the allocated UDP port number of the MPQUIC Proxy.\nOctets \"p to (p+3)\" or \"q to (q+15)\" (IPv4 address / IPv6 address fields), if present, shall contain the address value.",
      "chunk_type": "requirement",
      "cross_references": [
        "ts_24.193_clause_6.1.4",
        "figure_8.2.226-1",
        "ts_24.193"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.227",
      "section_id": "8.2.227",
      "section_title": "Transport Mode",
      "content": "The transport mode IE shall be encoded as shown in Figure 8.2.227-1. It indicates the transport mode for transmitting a UDP flow.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 333 (decimal)\n3 to 4\nLength = n\n5\nSpare\nTransport Mode Value\n6 to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.227-1: Transport Mode\nThe Transport Mode value shall be encoded as a 4 bits binary integer as specified in Table 8.2.e-1.\nTable 8.2.227-1: Transport Mode value\nTransport Mode Value\nValues (Decimal)\nDatagram mode 1\n0\nDatagram mode 2\n1\nStream mode\n2\nSpare\n3 to 15",
      "chunk_type": "requirement",
      "cross_references": [
        "table_8.2",
        "table_8.2.227-1",
        "figure_8.2.227-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.229",
      "section_id": "8.2.229",
      "section_title": "Reporting Suggestion Info",
      "content": "The Reporting Suggestion Info IE shall be encoded as shown in Figure 8.2.229-1.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 335 (decimal)\n3 to 4\nLength = n\n5\nSpare\nReporting Urgency value\n6 to 9\nReporting Time Info\n10 to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.229-1: Reporting Suggestion Info\nThe Reporting Urgency value shall be encoded as a 4 bits binary integer as specified in Table 8.2.229-1.\nTable 8.2.229-1: Reporting Urgency value\nReporting Urgency Value\nValues (Decimal)\nDelay tolerant\n0\nNon delay tolerant\n1\nSpare\n2 to 15\nThe Reporting Time Info field shall be present if the Reporting Urgency indicates the event report is delay tolerant. When present, it shall be encoded as an Unsigned32 binary integer value indicating the latest time for the UPF to report the detected event, expressed as a duration in seconds.",
      "chunk_type": "requirement",
      "cross_references": [
        "table_8.2.229-1",
        "figure_8.2.229-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.230",
      "section_id": "8.2.230",
      "section_title": "TL-Container",
      "content": "The TL-Container IE shall be encoded as shown in Figure 8.2.230-1. It contains an opaque container of TL-Container information.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 336 (decimal)\n3 to 4\nLength = n\n5 to (n+4)\nTL-Container Information\nFigure 8.2.230-1: TL-Container\nThe TL-Container Information field shall be encoded as an Octet String. It shall encode a Get or Set Request or Response message defined in 3GPP TS 29.585 [80].",
      "chunk_type": "requirement",
      "cross_references": [
        "figure_8.2.230-1",
        "ts_29.585"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.231",
      "section_id": "8.2.231",
      "section_title": "Measurement Indication",
      "content": "The Measurement Indication IE shall be encoded as shown in Figure 8.2.231-1.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 337 (decimal)\n3 to 4\nLength = n\n5\nSpare\nDQFI\nm to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.231-1: Measurement Indication\nThe following flags are coded within Octet 5:\n-\tBit 1 – DQFI (Default QoS Flow Indication): If this bit is set to \"1\", it indicates that the UPF is requested to perform QoS Monitoring measurements on the QoS flow associated with the default QoS rule and the UPF shall include the same indication in the corresponding QoS Monitoring Measurement report (see clause 4.15.4.5.1 of 3GPP TS 23.502 [29]).\n-\tBit 2 to 8 Spare, for future use and set to \"0\".",
      "chunk_type": "requirement",
      "cross_references": [
        "ts_23.502_clause_4.15.4.5.1",
        "figure_8.2.231-1",
        "ts_23.502"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.232",
      "section_id": "8.2.232",
      "section_title": "HPLMN S-NSSAI",
      "content": "The HPLMN S-NSSAI IE indicates the HPLMN S-NSSAI of a PDU session. It shall be encoded as shown in Figure 8.2.232-1.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 338 (decimal)\n3 to 4\nLength = 4\n5\nSST\n6 to 8\nSD\nFigure 8.2.232-1: HPLMN S-NSSAI\nThe SST (Slice/Service Type) and SD (Slice Differentiator) fields shall be encoded as defined in clause 28.4.2 of 3GPP TS 23.003 [2].",
      "chunk_type": "requirement",
      "cross_references": [
        "ts_23.003_clause_28.4.2",
        "figure_8.2.232-1",
        "ts_23.003"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.233",
      "section_id": "8.2.233",
      "section_title": "Media Transport Protocol",
      "content": "The Media Transport Protocol IE indicates the transport protocol used by the packets of the media flow. It shall be coded as depicted in Figure 8.2.233-1.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 339 (decimal)\n3 to 4\nLength = n\n5\nSpare\nMedia Transport Protocol\n6 to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.233-1: Media Transport Protocol\nThe Media Transport Protocol field in octet 5 shall be encoded as defined in Table 8.2.233-1.\nTable 8.2.233-1: Media Transport Protocol\nValue (Decimal)\nMedia Transport Protocol\n0\nUnspecified\n1\nRTP (Real-time Transport Protocol) – see IETF RFC 3550 [82]\n2\nSRTP (Secure Real-Time Protocol) – see IETF RFC 3711 [83]\n3-15\nSpare, for future use.",
      "chunk_type": "requirement",
      "cross_references": [
        "table_8.2.233-1",
        "figure_8.2.233-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.234",
      "section_id": "8.2.234",
      "section_title": "RTP Header Extension Type",
      "content": "The RTP Header Extension Type IE indicates the type of the RTP header extension. It shall be coded as depicted in Figure 8.2.234-1.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 342 (decimal)\n3 to 4\nLength = 1\n5\nRTP Header Extension Type\nFigure 8.2.234-1: RTP Header Extension Type\nThe RTP Header Extension Type field in octet 5 shall be encoded as defined in Table 8.2.234-1.\nTable 8.2.234-1: RTP Header Extension Type\nValue (Decimal)\nHeader Extension\n1\nRTP Header Extension for PDU Set Marking (see clause 4.4.2.2 of 3GPP TS 26.522 [79]\n2-255\nSpare, for future use.",
      "chunk_type": "requirement",
      "cross_references": [
        "ts_26.522_clause_4.4.2.2",
        "table_8.2.234-1",
        "figure_8.2.234-1",
        "ts_26.522"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.235",
      "section_id": "8.2.235",
      "section_title": "RTP Header Extension ID",
      "content": "The RTP Header Extension ID IE indicates the ID of the RTP header extension. It shall be coded as depicted in Figure 8.2.235-1.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 343 (decimal)\n3 to 4\nLength = 1\n5\nRTP Header Extension ID\nFigure 8.2.235-1: RTP Header Extension ID\nThe RTP Header Extension ID field shall be encoded as a decimal value in the range 1 to 255 (see IETF RFC 8285 [86]).",
      "chunk_type": "requirement",
      "cross_references": [
        "figure_8.2.235-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.236",
      "section_id": "8.2.236",
      "section_title": "RTP Payload Type",
      "content": "The RTP Payload Type indicates the payload type of RTP packets. It shall be coded as depicted in Figure 8.2.336-1.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 344 (decimal)\n3 to 4\nLength = 1\n5\nPayload Type\nFigure 8.2.236-1: RTP Payload Type\nThe Payload Type field shall encode the (S)RTP payload type, as an integer between (and including) 1 and 127.",
      "chunk_type": "requirement",
      "cross_references": [
        "figure_8.2.336-1",
        "figure_8.2.236-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.237",
      "section_id": "8.2.237",
      "section_title": "RTP Payload Format",
      "content": "The RTP Payload Format indicates the payload format of RTP packets. It shall be coded as depicted in Figure 8.2.337-1.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 345 (decimal)\n3 to 4\nLength = 1\n5\nPayload Format\nFigure 8.2.237-1: RTP Payload Format\nThe Payload Format field shall be encoded as defined in Table 8.2.237-1.\nTable 8.2.237-1: Payload Format\nValue\n(Decimal)\nPayload Format\n1\nH.264 – see IETF RFC 6184 [84]\n2\nH.265 – see IETF RFC 7798 [85]\n3-255\nSpare, for future use.",
      "chunk_type": "requirement",
      "cross_references": [
        "table_8.2.237-1",
        "figure_8.2.337-1",
        "figure_8.2.237-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.238",
      "section_id": "8.2.238",
      "section_title": "Extended DL Buffering Notification Policy",
      "content": "Extended DL Buffering Notification Policy is coded as depicted in Figure 8.2.238-1.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 346 (decimal)\n3 to 4\nLength = n\n5\nSpare\nEDBN\nk to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.238-1: Extended DL Buffering Notification Policy\nThe following flags are coded within Octet 5:\n-\tBit 1 – EDBN (Extended DL Buffer Notification): This bit shall be set to \"1\" when the UP function shall send DL packet notification for the duration indicated by the DL Buffering Duration to report the arrival of the first buffered DL packet for each QoS flow for a given FAR. (see clause 7.5.4.11 and 7.5.9.2).\n-\tBit 2 to 8 are spare and reserved for future use, shall be set to \"0\" by the sender and discarded by the receiver.",
      "chunk_type": "general",
      "cross_references": [
        "clause_7.5.4.11",
        "figure_8.2.238-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.239",
      "section_id": "8.2.239",
      "section_title": "MT-SDT Control Information",
      "content": "MT-SDT Control Information is coded as depicted in Figure 8.2.239-1.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 347 (decimal)\n3 to 4\nLength = n\n5\nSpare\nRDSI\nk to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.239-1: MT-SDT Control Information\nThe following flags are coded within Octet 5:\n-\tBit 1 – RDSI (Reporting DL data packets Size Indication): This bit shall be set to \"1\" if the UP function is requested to report the sum of DL data packets size per QoS flow.\n-\tBit 2 to 8 are spare and reserved for future use.",
      "chunk_type": "general",
      "cross_references": [
        "figure_8.2.239-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.240",
      "section_id": "8.2.240",
      "section_title": "Reporting Thresholds",
      "content": "The Reporting Thresholds IE contains reporting thresholds to be monitored by the UP function for event triggered QoS monitoring reporting. It shall be encoded as shown in Figure 8.2.240-1.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 348 (decimal)\n3 to 4\nLength = n\n5\nSpare\nULDR\nDLDR\nULCI\nDLCI\nm to (m+1)\nDL Congestion information threshold\np to (p+1)\nUL Congestion information threshold\nq to (q+4)\nDL Data Rate threshold\nr to (r+4)\nUL Data Rate threshold\ns to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.240-1: Reporting Thresholds\nThe following flags are coded within Octet 5:\n-\tBit 1 – DLCI: If this bit is set to \"1\", then the Downlink Congestion Information threshold field shall be present, otherwise the Downlink Congestion Information threshold field shall not be present.\n-\tBit 2 – ULCI: If this bit is set to \"1\", then the Uplink Congestion Information threshold field shall be present, otherwise the Uplink Congestion Information threshold field shall not be present.\n-\tBit 3 – DLDR: If this bit is set to \"1\", then the Downlink Data Rate threshold field shall be present, otherwise the Downlink Data Rate threshold field shall not be present.\n-\tBit 4 – ULDR: If this bit is set to \"1\", then the Uplink Data Rate threshold field shall be present, otherwise the Uplink Data Rate threshold field shall not be present.\n-\tBit 5 to 8: Spare, for future use and set to \"0\".\nAt least one bit shall be set to \"1\". Several bits may be set to \"1\".\nThe Downlink Congestion information threshold field and the Uplink Congestion information threshold field shall be encoded as an Unsigned16 binary integer value, in the (decimal) values range 0 to 10000 (included), representing the percentage of congestion level in the downlink and in the uplink directions respectively, up to two decimal points, for the QoS flow. As an example, the (decimal) value 7500 corresponds to a percentage of 75.00%.\nThe Downlink Data Rate threshold field and the Uplink Data Rate threshold field shall be encoded as kilobits per second (1 kbps = 1000 bps) in binary value (rounded upwards).",
      "chunk_type": "requirement",
      "cross_references": [
        "figure_8.2.240-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.241",
      "section_id": "8.2.241",
      "section_title": "RTP Header Extension Additional Information",
      "content": "The RTP Header Extension Additional Information provides additional information on the RTP Header Extension. It shall be coded as depicted in Figure 8.2.241-1.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 349 (decimal)\n3 to 4\nLength = n\n5\nSpare\nPSSAI\nFI\n6\nSpare\nPSSA\nFormat\n7 to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.241-1: RTP Extension Header Additional Information\nThe following flags are coded within Octet 5:\n-\tBit 1 – FI (Format Indication): If this bit is set to \"1\", it indicates that the Format field in octet 6 indicates the RTP header extension format. If this bit is set to \"0\", the format field in octet 6 shall be coded as all \"0\" and be ignored by the receiver.\n-\tBit 2 – PSSAI (PDU Set Size Active Indication): If this bit is set to \"1\", it indicates that the PSSA field in octet 6 indicates whether the PDU Set size in bytes is present in the RTP header extension of every RTP packet. If this bit is set to \"0\", the PSSA field in octet 6 shall be coded as all \"0\" and be ignored by the receiver.\n-\tBit 3 to 8 Spare, for future use and set to \"0\".\nThe Format field in octet 6 shall be encoded as defined in Table 8.2.241-1.\nTable 8.2.241-1: Format field\nValue\n(Decimal)\nFormat field\n1\n1-byte (short) format is used\n2\n2-byte (long) format is used\n0, 3\nSpare, for future use.\nThe PDU Set Size Active (PSSA) field in octet 6 shall be encoded as \"1\" if the PSSAI flag is set to 1 and the PDU Set Size is present in the RTP header extension of every RTP packet, and as \"0\" otherwise.",
      "chunk_type": "requirement",
      "cross_references": [
        "table_8.2.241-1",
        "figure_8.2.241-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.242",
      "section_id": "8.2.242",
      "section_title": "Mapped N6 IP Address",
      "content": "The Mapped N6 IP Address IE type shall be encoded as shown in Figure 8.2.242-1. It contains an N6 IP address mapped to a UE IP address.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 350 (decimal)\n3 to 4\nLength = n\n5\nSpare\nV4\nCHV4\nm to (m+3)\nIPv4 address\nk to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.242-1: Mapped N6 IP Address\nThe following flags are coded within Octet 5:\n-\tBit 1 – CHV4 (CHOOSE IPV4): If this bit is set to \"1\", then the IPv4 address shall not be present and the UP function shall assign an IPv4 address as a mapped N6 IP address. This bit shall only be set by the CP function.\n-\tBit 2 – V4: If this bit is set to \"1\", then the CHV4 bit shall not be set and the IPv4 address field shall be present in the Mapped N6 IP Address, otherwise the IPv4 address field shall not be present.\n-\tBit 3 - 8 Spare, for future use and set to \"0\".\nOctets \"m to (m+3)\" (IPv4 address fields), if present, shall contain the address value.",
      "chunk_type": "requirement",
      "cross_references": [
        "figure_8.2.242-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.243",
      "section_id": "8.2.243",
      "section_title": "N6 Routing Information",
      "content": "The N6 Routing Information IE type shall be encoded as shown in Figure 8.2.243-1. It contains N6 tunneling information.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 351 (decimal)\n3 to 4\nLength = n\n5\nSpare\nDPO\nDIPV6\nDIPV4\nSPO\nSIPV6\nSIPV4\nm to (m+3)\nSource IPv4 address\np to (p+15)\nSource IPv6 address\nq to (q+1)\nSource Port Number\nr to (r+3)\nDestination IPv4 address\ns to (s+15)\nDestination IPv6 address\nt to (t+1)\nDestination Port Number\nk to (n+4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.243-1: N6 Routing Information\nThe following flags are coded within Octet 5:\n-\tBit 1 – SIPV4: If this bit is set to \"1\", then the Source IPv4 address field shall be present in the N6 Routing Information, otherwise the Source IPv4 address field shall not be present.\n-\tBit 2 – SIPV6: If this bit is set to \"1\", then the Source IPv6 address field shall be present in the N6 Routing Information, otherwise the Source IPv6 address field shall not be present.\n-\tBit 3 – SPO: If this bit is set to \"1\", then the Source Port Number field shall be present in the N6 Routing Information, otherwise the Source Port Number field shall not be present.\n-\tBit 4 – DIPV4: If this bit is set to \"1\", then the Destination IPv4 address field shall be present in the N6 Routing Information, otherwise the Destination IPv4 address field shall not be present.\n-\tBit 5 – DIPV6: If this bit is set to \"1\", then the Destination IPv6 address field shall be present in the N6 Routing Information, otherwise the Destination IPv6 address field shall not be present.\n-\tBit 6 – DPO: If this bit is set to \"1\", then the Destination Port Number field shall be present in the N6 Routing Information, otherwise the Destination Port Number field shall not be present.\n-\tBit 7 - 8 Spare, for future use and set to \"0\".\nOctets \"m to (m+3)\" or \"p to (p+15)\" (Source IPv4 address / Source IPv6 address fields) and Octets \"r to (r+3)\" or \"s to (s+15)\" (Destination IPv4 address / Destination IPv6 address fields), if present, shall contain the address value.\nWhen present, the Destination Port Number field or the Source Port Number field shall contain the destination or source Port Number respectively to set in the UDP header of the outgoing packet.",
      "chunk_type": "requirement",
      "cross_references": [
        "figure_8.2.243-1"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.244",
      "section_id": "8.2.244",
      "section_title": "URI",
      "content": "The URI IE type shall be encoded as shown in Figure 8.2.244-1.\n.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 352 (decimal)\n3 to 4\nLength = n\n5 to n+4\nURI\nFigure 8.2.244 -1: URI\nThe URI field in octets 5 to (n+4) shall contain an octet string representing the URI formatted according to IETF RFC 3986 [71].",
      "chunk_type": "requirement",
      "cross_references": [
        "figure_8.2.244-1",
        "figure_8.2.244"
      ]
    },
    {
      "chunk_id": "ts_29.244_8.2.245",
      "section_id": "8.2.245",
      "section_title": "UE Level Measurements Configuration",
      "content": "The UE Level Measurements Configuration IE shall be encoded as shown in Figure 8.2.245-1. It contains the 5GC UE level measurements configuration parameters to apply for the PFCP session.\nBits\nOctets\n8\n7\n6\n5\n4\n3\n2\n1\n1 to 2\nType = 353 (decimal)\n3 to 4\nLength = n\n5\nJob Type\n6\nNumber of Measurement Types (k)\n7\nMeasurement Type value 1\n8\nMeasurement Type value 2\n…\n…\n7+k-1\nMeasurement Type value k\nm to m+2\nTime Period\np to (n-4)\nThese octet(s) is/are present only if explicitly specified\nFigure 8.2.245-1: UE Level Measurements Configuration\nOctets 5 represent the Job type for 5GC UE level measurements as defined in 3GPP TS 32.422 [35]. It shall be encoded as defined in Table 8.2.245-1.\nTable 8.2.245-1: Job Type values\nJob Type\nValues (Decimal)\n<reserved>\n0\n5GC UE Level Measurements only\n1\nTrace and 5GC UE Level Measurements\n2\nSpare, for future use\n3-255\nThe Number of Measurement Types shall indicate the total number of the Measurement Type values. Each subsequent Octet after the Number of Measurement Types shall carry one Measurement Type value as defined in 3GPP TS 28.558 [88]. The Measurement Type value shall be encoded as defined in Table 8.2.245-2.\nTable 8.2.245-2: Measurement Type values\nMeasurement Type\nValues (Decimal)\n<reserved>\n0\nAverage DL packet delay between PSA UPF and UE for a QoS flow\n1\nAverage UL packet delay between PSA UPF and UE for a QoS flow (excluding D1)\n2\nAverage UL packet delay between PSA UPF and UE for a QoS flow (including D1)\n3\nAverage UL packet delay between PSA UPF and NG-RAN for a QoS flow\n4\nAverage DL packet delay between PSA UPF and NG-RAN for a QoS flow\n5\nSpare, for future use\n6-255\nTime Period Field Value shall indicate the period time for every Trace Recording Session of 5GC UE level measurement as defined in 3GPP TS 32.422 [35]. It shall be encoded as binary integer value in 3 octets with a unit second.\nAnnex A (Informative):PFCP Load and Overload Control Mechanism\nA.1\tThrottling Aalgorithms\nA.1.1\t\"Loss\" Throttling Algorithm\nA.1.1.1\tExample of Possible Implementation\nThis clause provides an example of a possible implementation of the \"Loss\" algorithm, amongst other possible methods.\nIt is possible to make use of a statistical loss function (e.g., random selection of messages to throttle based on the indicated percentage) to decide if the given message can be sent or need to be throttled. For example, the source node generates a random number between (0, 100) for each message which is a potential candidate for throttling. To realize 10% throttling, messages with a random number 10 or less are throttled and hence this achieves approximately a 10% reduction in the overall traffic. The actual traffic reduction might vary slightly from the requested percentage, albeit by an insignificant amount.\nThe algorithm can select certain messages to throttle in priority. For example, implementations can distinguish between higher-priority and lower-priority messages, and drop the lower-priority messages in favour of dropping the higher priority messages, as long as the total reduction in traffic conforms to the requested reduction in effect at the time. For example, in the 50-50 distribution of high priority and low priority messages, 20% reduction to low priority messages and 0% reduction to high priority messages need to be applied in order to achieve the effective reduction in traffic by 10% towards the overloaded node.\nAnnex B (Normative):CP and UP Selection Functions with Control and User Plane Separation\nB.1\tCP Selection Function\nB.1.1\tGeneral\nThe SGW-C and PGW-C selection function shall follow the principles specified in 3GPP TS 29.303 [25] for the SGW and PGW selection functions without Control and User Plane Separation.\nThe following additional considerations apply with Control and User Plane Separation:\n1.\tAt most one SGW-C shall be selected per user at any time.\n2.\tThe service area of an SGW-C function shall be aligned with the service area of the corresponding SGW-U functions (see clause 4.3.4 of 3GPP TS 23.214 [2]. All the SGW-U functions in the service area shall have a full meshed connectivity with all the eNBs of TAs and/or all RNCs/BSCs of RAs served by that service area.\n3.\tThe SGW dynamic load reported to the MME/SGSN and the PGW dynamic load reported to the MME/SGSN or TWAN/ePDG should take into account the operating status of the CP and UP functions' resources that the SGW-C/PGW-C is controlling. See clause 6.2.3 for how the CP function obtains load control information from the UP function.\n4.\tFor Dedicated Core Networks (see clause 5.8 of 3GPP TS 29.303 [25]), an SGW-C or PGW-C function shall be declared in DNS as dedicated to certain mapped UE usage types if the CP function or if all the UP functions it controls are dedicated to certain mapped UE usage types. In this case, the CP function shall be provisioned in DNS with all the mapped UE usage types that both the CP function and its UP functions support.\n5.\tThe MME/SGSN shall be able to select an SGW-C and a PGW-C optimized for NR, e.g. for UEs indicating support of dual connectivity with NR in NAS signalling to the MME or SGSN and without subscription restriction to use NR as secondary RAT, according to the requirements specified in clause 5.12.2 of 3GPP TS 29.303 [25]. The SGW-C and the PGW-C optimized for NR may be a combined SGW-C/PGW-C function optimized for the NR.\nB.2\tUP Selection Function\nB.2.1\tGeneral\nThe following requirements apply for the selection of the UP function:\n-\tthe SGW-C, PGW-C and TDF-C shall be responsible for the selection of the SGW-U, PGW-U and TDF-U respectively;\n-\tan SGW-C may select different SGW-U functions for different PDN connections of a same user.\nIt is implementation specific how to support the UP selection function requirements specified in this clause. Clause B.2.6 specifies one possible implementation.\nB.2.2\tSGW-U Selection Function\nThe SGW-C shall be able to select the SGW-U considering the following parameters:\n-\tthe SGW-U location and the user 's location (i.e. ECGI, eNodeB ID or TAI for E-UTRAN, RAI or RNC-ID for UTRAN);\n-\tthe SGW-U's capabilities and the capabilities required for the particular UE session to establish;\n-\tthe mapped UE Usage Type (when dedicating SGW-U to specific Dedicated Core Networks);\n-\tthe SGW-U's dynamic load;\n-\tthe SGW-U's relative static capacity (versus other SGW-Us);\n-\tthe UP Function Selection Information Flags, indicating whether it is desired to select an SGW-U optimized for NR, as specified in 3GPP TS 29.274 [9].\nBased on local policy, if the user's location information is required to be used for selecting the UP function, the SGW-C shall determine the list of candidate SGW-Us taking into account the user's location (ECGI, eNodeB ID or TAI for E-UTRAN, RAI or RNC-ID for UTRAN).\nThe SGW-C shall select, among the candidate SGW-U functions, an SGW-U function which supports all the capabilities required for the particular UE session, considering the information received during the PFCP Association Setup.\nB.2.3\tPGW-U Selection Function\nThe PGW-C shall be able to select the PGW-U considering the following parameters:\n-\tthe requested APN for the PDN connection;\n-\tthe PGW-U location and the user 's location;\n-\tthe PGW-U's capabilities and the capabilities required for the particular UE session to establish;\n-\tthe mapped UE Usage Type (when dedicating PGW-U to specific Dedicated Core Networks);\n-\tthe PGW-U's dynamic load;\n-\tthe PGW-U's relative static capacity (versus other PGW-Us);\n-\twhether a PDN connection already exists for the same UE and APN, in which case the same PGW-U shall be selected (to enable APN-AMBR enforcement);\n-\tthe UP Function Selection Information Flags, indicating whether it is desired to select a PGW-U optimized for NR, as specified in 3GPP TS 29.274 [9].\nNOTE:\tThe SGW-U and PGW-U location can be configured in the SGW-C and PGW-C or derived from DNS procedures as specified in clause B.2.2.\nIf the PGW-C already assigned a PGW-U to the UE for the requested APN (e.g. UE with multiple PDN connections to the same APN), the PGW-C shall select the same PGW-U for the new PDN connection.\nIf a non-null IPv4 address and/or an IPv6 prefix is received in the PDN Address Allocation (PAA) IE in the Create Session Request, e.g. static address assignment in the user subscription, the PGW-C shall select a PGW-U which can support the requested UE's IP address and/or IPv6 prefix.\nOtherwise, the PGW-C shall determine the list of candidate PGW-Us taking into account the requested APN.\nThe PGW-C shall select, among the candidate PGW-U functions, a PGW-U function which supports all the capabilities required for the particular UE session, considering the information received during the PFCP Association Setup.\nB.2.4\tCombined SGW-U/PGW-U Selection Function\nA Combined SGW-C/PGW-C function shall be able to select a combined SGW-U/PGW-U function. This shall be possible for all the UE's PDN connections, as shown in Figure B.2.1-1.\nFigure B.2.4-1: SGW-U/PGW-U colocation with Control and User Plane Separation\nA combined SGW-C/PGW-C function shall select the SGW-U and PGW-U as defined respectively in B.2.2 and B.2.3, with the following additions:\n-\tthe combined SGW-C/PGW-C function shall select the best couple of SGW-U and PGW-U (e.g. the combined SGW-U/PGW-U function), for the requested APN, among all candidate couples of (SGW-U, PGW-U), instead of selecting independently the SGW-U and the PGW-U.\nB.2.5\tTDF-U selection function\nThe TDF-C shall be able to select the TDF-U as specified in clause 5.12.5 of 3GPP TS 23.214 [2].\nB.2.6\tUP Selection Function Based on DNS\nB.2.6.1\tGeneral\nThis clause specifies optional DNS procedures to select the SGW-U and PGW-U functions and the requirements which apply when these procedures are supported.\nThe relative static capacity of an SGW-U and PGW-U may be configured in the DNS.\nThe Node ID of an SGW-U and PGW-U may take the form of a canonical node name to allow the selection of a SGW-U and PGW-U with the best topological match.\nB.2.6.2\tSGW-U Selection Function Based on DNS\nThe SGW-C shall retrieve the list of candidate SGW-Us using DNS procedures taking into account the user's location (ECGI, eNodeB ID or TAI for E-UTRAN, RAI or RNC-ID for UTRAN), as specified in 3GPP TS 29.303 [25].\nIn non-roaming or LBO scenarios where the PGW-U is already selected (e.g. TAU with SGW change) and when it is preferred to select a collocated node or a topologically closer node, the SGW-C shall try to select an SGW-U collocated with the PGW-U.\nB.2.6.3\tPGW-U Selection Function Based on DNS\nThe PGW-C shall retrieve the list of candidate PGW-Us using DNS procedures taking into account the requested APN, as specified in 3GPP TS 29.303 [25].\nIn non-roaming or LBO scenarios, when it is preferred to select a collocated node or a topologically closer node, i.e. when such preference is indicated in the canonical node names of the PGW-U functions in the DNS (using \"topon\" as the first label of canonical node name), the PGW-C shall give precedence to collocation of SGW-U and PGW-U, then to topological closeness (i.e. pairs of SGW-U and PGW-U with canonical node names with the highest number of matching labels). This requires the SGW-C to provide the SGW-U Node ID to the PGW-C.\nB.2.6.4\tCombined SGW-U/PGW-U Selection Function Based on DNS\nA combined SGW-C/PGW-C function shall select the SGW-U and PGW-U as defined respectively in B.2.4, B.2.6.2 and B.2.6.3.\nAnnex C (Informative):Examples scenarios\nC.1\tGeneral\nThis clause provides example call flows illustrating how the CP function can provision the UP function to support certain functionalities.\nThis Annex is informative and the normative descriptions in this specification and in 3GPP TS 23.214 [2] prevail over the descriptions in this Annex if there is any difference.\nC.2\tCharging Support\nC.2.1\tOnline Charging\nC.2.1.1\tOnline Charging Call Flow – Normal Scenario\nFigure C.2.1.1-1 illustrates the exchanges taking place over the Sxb or Sxc reference points when applying online charging. In this example, the OCS grants quotas by chunks of 100 Mbytes and requests the CP function to request new credits when the remaining credit falls below 10 Mbytes.\nFigure C.2.1.1-1: Online charging with intermediate and final quotas\n1.\tUpon the request from the CP function, the OCS grants an intermediate quota of 100 Mbytes and requests the CP function to request a new credit when the remaining credit falls below 10 Mbytes.\n2.\tThe CP function sends a PFCP Session Modification Request to the UP function with an Update URR IE including the Volume Threshold IE set to 90 Mbytes and the Volume Quota IE set to 100 Mbytes.\n3.\tUpon reaching the Volume Threshold (i.e. 90 Mbytes), the UP function sends a PFCP Session Report Request to the CP function with a Usage Report IE including the Usage Report Trigger set to \"Volume Threshold\" and the Volume Measurement set to 90 Mbytes. The UP function continues to pass on traffic until reaching the Volume Quota (i.e. an extra 10 Mbytes of traffic can be passed on).\n4.\tUpon the request from the CP function, the OCS grants a new intermediate quota of 100 Mbytes and requests the CP function to request a new credit when the remaining credit falls below 10 Mbytes.\n5.\tThe CP function sends a PFCP Session Modification Request to the UP function with an Update URR IE including the Volume Threshold IE set to 90 Mbytes and the Volume Quota IE set to 100 Mbytes. If the UP function had forwarded e.g. 5 Mbytes of traffic since the last usage report, the UP function knows that it shall send the next usage report upon passing on an extra 85 Mbytes of traffic.\n6.\tUpon reaching the Volume Threshold (i.e. 90 Mbytes), the UP function sends a PFCP Session Report Request to the CP function with a Usage Report IE including the Usage Report Trigger set to \"Volume Threshold\" and the Volume Measurement set to 90 Mbytes. The UP function continues to pass on traffic until reaching the Volume Quota (i.e. an extra 10 Mbytes of traffic can be passed on).\n7.\tUpon the request from the CP function, the OCS grants a new final quota of 50 Mbytes and requests the CP function to terminate the service or to redirect the traffic towards a redirect destination when the quota is consumed.\n8.\tThe CP function sends a PFCP Session Modification Request to the UP function with an Update URR IE including the Volume Quota IE set to 50 Mbytes. If the UP function had forwarded e.g. 5 Mbytes of traffic since the last usage report, the UP function knows that it shall send the next usage report upon passing on an extra 45 Mbytes of traffic.\n9.\tUpon reaching the Volume Quota (i.e. 50 Mbytes), the UP function sends a PFCP Session Report Request to the CP function with a Usage Report IE including the Usage Report Trigger set to \"Volume Quota\" and the Volume Measurement set to 50 Mbytes. The UP function stops passing on traffic.\n10.\tUpon being notified that the final quota has been reached, the CP function terminates the service (e.g. by preventing the traffic of the corresponding SDF to further pass on in the UP function) or redirects the traffic towards a redirect destination by provisioning a Redirect Information IE within the FAR associated to the traffic.\nFigure C.2.1.1-2 illustrates the exchanges taking place over the Sxb or Sxc reference points when applying online charging and the UP function supports being provisioned with the Quota Action to apply when reaching quotas. This example is similar to the previous one, but the CP function provisions the UP function with the action to apply when reaching the final quota.\nFigure C.2.1.1-2: Online charging with Quota Action provisioned in the UP function\n1 to 7'.\tSame as for figure C.2.1.1-1.\n8.\tThe CP function sends a PFCP Session Modification Request to the UP function with a Create FAR IE provisioning the action the UP function shall apply when reaching the quota, and with an Update URR IE including the Volume Quota IE set to 50 Mbytes and the FAR ID for Quota Action IE set to the new FAR ID). If the UP function had forwarded e.g. 5 Mbytes of traffic since the last usage report, the UP function knows that it shall send the next usage report upon passing on an extra 45 Mbytes of traffic.\n9.\tUpon reaching the Volume Quota (i.e. 50 Mbytes), the UP function sends a PFCP Session Report Request to the CP function with a Usage Report IE including the Usage Report Trigger set to \"Volume Quota\" and the Volume Measurement set to 50 Mbytes.\n10.\tThe UP function applies the quota action provisioned at step 8, i.e. it stops forwarding packets or it redirects the traffic towards a redirect destination, according to the FAR identified in the FAR ID for Quota Action.\nC.2.1.2\tOnline Charging Call Flow with Credit Pooling\nC.2.1.2.1\tGeneral\nFigure C.2.1.2-1 illustrates a signalling flow over the Sxb and Gy reference points when applying online charging, and when the CP function (i.e. PGW-C) is instructed by the OCS to handle a Credit Pool for a given Gy Session.\nC.2.1.2.2\tExample Call Flow 1\nIn this example, the PGW-C is instructed by the OCS to handle a credit pool for two Rating Groups, RG1 and RG2. The PGW-C provisions two URRs, URR1 and URR2, for the two RGs respectively, and a URR3 for the Credit Pool. The PGW-C provisions the URR1 and URR2 with the quota received from the OCS respectively for RG1 and RG2 (like if there was no credit pooling).\nThis reflects one possible implementation option, whereby each quota remains managed independently from the others. This approach can result in extra usage reports being sent over Sxb for RG1 or RG2 before the credit pool is exhausted.\nFigure C.2.2.2-1: Online charging with Credit Pooling (alt 1)\n1.\tUpon the request from the CP function for RG1 and RG2, the OCS grants:\nRG1: quota 100 Mbytes, together with a G-S-U-Pool-Reference AVP included within the Multiple Services Credit Control (for RG1), where the G-S-U-Pool-Identifier AVP indicating the identifer (e.g. 1000) of the Credit Pool to which the RG1 pertains, the CC-Unit-Type AVP specifies the type of units for which credit is (e.g. total octets), the Unit-Value AVP specifies the multiplier (e.g. 0.1);\nRG2: quotas 100 Mbytes, together with a G-S-U-Pool-Reference AVP included within the Multiple Services Credit Control (for RG2), where the G-S-U-Pool-Identifier AVP indicating the identifer (e.g. 1000) of the Credit Pool to which the RG2 pertains, the CC-Unit-Type AVP specifies the type of units for which credit is (e.g. total octets), the Unit-Value AVP specifies the multiplier (e.g. 0.5);\n2.\tThe CP function sends a PFCP Session Modification Request to the UP function, to create:\nA new URR1 for RG1, quota=100, Linked URR = URR3;A new URR2 for RG2, quota=100, Linked URR = URR3;A new URR3 for Pool, quota = S = 100 x 0.1 + 100 x 0.5 = 60, Aggregated URRs: URR1 with Multiplier 0.1 and URR2 with Multiplier 0.5.\nThe UP function accepts the request.\n3.\tThe RG1 has consumed 100 counted by URR1, RG2 consumed 10 counted by URR2; the URR3 for the Credit Pool counts U = 100 x 0.1 + 10 x 0.5 = 15 < S. The URR1 triggers sending a usage report towards the CP function due to reaching the Quota 100. So the UP function sends a PFCP Session Report Request, including the Usage Reports for the URR1. The CP function sends the response message.\n4.\tBased on operator's policies, the CP function reports used quota for the RG1 to the OCS. The OCS does not grant any quota since the quota for the Credit Pool has not been consumed yet.\nNOTE: This step is skipped in the rest flow.\n5.\tThe CP function sends a PFCP Session Modification Request to the UP function with the modified URR1, with new quota 100.\nStep 6, 7, 8 and 9 repeats step 3 and 5.\n10. The RG1 has consumed another 100 counted by URR1, RG2 consumed another 10 counted by URR2; the URR3 for the Credit Pool counts U = (100 + 100 + 100 + 100) x 0.1 + (10 +10 + 10 + 10) x 0.5 = 60 >= S = 60. So the UP function sends a PFCP Session Report Request, including the Usage Reports for:- the URR3, generated due to reaching quota (60),- for the URR1, generated due to that it is linked to the URR3 and it has reached the quota 100, and- for the URR2 generated due to that it is linked to the URR3.The CP function sends the response message.\n11.\tThe CP function requests new Quota for RG1 and RG2 to the OCS. The OCS grants 200M for RG1 and 100M for RG2, with the same pool ID and Multipliers.\n12.\tThe CP function sends a PFCP Session Modification Request to the UP function with the modified URRs, for URR1, URR2 and URR3.\nC.2.1.2.3\tExample Call Flow 2\nIn this example, the PGW-C is instructed by the OCS to handle a credit pool for two Rating Groups, RG1 and RG2. The PGW-C provisions two URRs, URR1 and URR2, for the two RGs respectively, and a URR3 for the Credit Pool. The PGW-C provisions the quotas for URR1 and URR2 taking into account the credit pool quota and the multipliers of the RGs.\nThis reflects another possible implementation option. This approach avoids extra usage reports being sent over Sxb for RG1 or RG2 before the credit pool is exhausted, and thus reduces Sxb signalling.\nFigure C.2.2.3-2: Online charging with Credit Pooling (alt 2)\n1.\tUpon the request from the CP function for RG1 and RG2, the OCS grants:\nRG1: quota 100 Mbytes, together with a G-S-U-Pool-Reference AVP included within the Multiple Services Credit Control (for RG1), where the G-S-U-Pool-Identifier AVP indicating the identifer (e.g. 1000) of the Credit Pool to which the RG1 pertains, the CC-Unit-Type AVP specifies the type of units for which credit is (e.g. total octets), the Unit-Value AVP specifies the multiplier (e.g. 0.1);\nRG2: quotas 100 Mbytes, together with a G-S-U-Pool-Reference AVP included within the Multiple Services Credit Control (for RG2), where the G-S-U-Pool-Identifier AVP indicating the identifer (e.g. 1000) of the Credit Pool to which the RG2 pertains, the CC-Unit-Type AVP specifies the type of units for which credit is (e.g. total octets), the Unit-Value AVP specifies the multiplier (e.g. 0.5);\n2.\tThe CP function sends a PFCP Session Modification Request to the UP function, to create:\nA new URR1 for RG1, quota=600, Linked URR = URR3;A new URR2 for RG2, quota=120, Linked URR = URR3;And new URR3 for Pool, quota = S = 100 x 0.1 + 100 x 0.5 = 60, Aggregated URRs: URR1 with Multiplier 0.1 and URR2 with Multiplier 0.5.\nThe UP function accepts the request.\nNOTE 1: To avoid receiving usage report upon exceeding the original Quota for RG1 or RG2, the quota can be set to 60 / 0.1 = 600 for RG1, assuming RG1 consumes the complete Quota for the pool; similarly, for RG2, the quota can be set to 60 / 0.5 = 120;\n3.\tThe URR3 always first reaches the Quota, e.g. when the URR1 has counted 400, and URR2 has counted 40, this results the counted usage for the Credit Pool U=400 x 0.1 + 40 x 0.5 = 60. So the UP function sends a PFCP Session Report Request, including the Usage Reports:\n-\tfor the URR3, generated due to that it has reached quota (60);-\tfor the URR1, generated due to that it is linked to the URR3; and-\tfor the URR2, generated due to that it is linked to the URR3.\nThe CP function sends the response message.\n4.\tThe CP function requests new Quota for RG1 and RG2 to the OCS. The OCS grants 200M for RG1 and 100M for RG2, with the same pool ID and Multipliers.\n5.\tThe CP function sends a PFCP Session Modification Request to the UP function with the modified URRs, for URR1, URR2 and URR3.\nURR1 for RG1, quota=70 / 0.1 = 700; URR2 for RG2, quota=70 / 0.5 = 140; URR3 for The Credit Pool, quota = 200 x 0.1 + 100 x 0.5 = 70.\nAnnex D (Normative):Use of PFCP over N16a for the support of traffic offload by UPF controlled by I-SMF\nD.1\tGeneral\nThis Annex applies to PDU sessions involving an Intermediate SMF (I-SMF), when the I-SMF has inserted an Uplink Classifier (UL CL) or Banching Point (BP) into the data path of the PDU session and a local PDU Session Anchor (PSA) further called PSA2 in this Annex, for local traffic offload.\nFor such PDU sessions, PFCP session related messages shall be exchanged between the SMF and I-SMF for:\n-\tthe SMF to provide N4 information to the I-SMF regarding how the traffic shall be detected, enforced and monitored in the UPF(s) controlled by the I-SMF;\n-\tthe I-SMF to forward N4 information with traffic usage reporting to the SMF.\nSee clause 5.34.6 of 3GPP TS 23.501 [28].\nWhether the UL CL or BP and PSA2 are supported by the same UPF or not shall be transparent to the SMF.\nWhen exchanging N4 information over N16a, the SMF and I-SMF shall assume the model in Figure D.1-1 where the UL CL or BP and PSA2 are supported by separate UPFs, i.e. separate PFCP session related messages shall be exchanged over N4 for the UL CL/BP and for the PSA2.\nNOTE 1:\tThis allows the SMF and I-SMF to exchange unambiguous information on whether N4 information exchanged over N16a relates to the UL CL/BP or the PSA2, e.g. whether a QER is to be enforced in the UL CL/BP or PSA2.\nNOTE 2:\tThe UL CL/BP and PSA2 inserted by the I-SMF can be co-located or located on different UPFs, regardless of the model assumed over N16a for the exchange of N4 information.\nNOTE 3:\tOnly one local PSA (i.e. PSA2) is shown in this figure; in real deployment, more than one local PSAs can be inserted.\nFigure D.1-1: UL CL/BP and PSA2 model for N4 information exchanged over N16a\nThe I-SMF shall translate the N4 information received from the SMF into appropriate N4 rules towards the UL CL/BP and the PSA2; the I-SMF shall merge the N4 information received for the UL CL/BP and the PSA2 if the UL CL/BP and PSA2 are located on the same UPF.\nThe N4 information exchanged over N16a shall only include the rules related to the UL and DL traffic to offload via PSA2, and not include the rules to the non-offload UL and DL traffic via PSA1. The I-SMF shall generate on its own N4 rules towards the UL CL/BP for UL and DL traffic exchanged between the AN and PSA1. The PDR, FAR, URR, QER ID(s) allocated by the I-SMF and the SMF for the PFCP sessions between I-SMF and UL CL and between I-SMF and PSA2 shall be distinct; the Precedence of the PDRs set by the I-SMF and the SMF shall also be distinct (see clause D.2.1).\nAll the PFCP session related messages specified in clause 7.5 shall be supported over N16a. Unless specified otherwise in this Annex, the requirements specified in the rest of this specification for PFCP session related procedures and messages are also applicable to N16a.\nNone of the PFCP Node related messages specified in clause 7.4 shall be sent over N16a. PFCP Load and Overload control information shall not be exchanged over N16a.\nData forwarding procedures (see clause 5.3) shall not be used over N16a.\nPFCP session related messages shall be sent over N16a in a binary body part of an HTTP multipart message using the Nsmf_PDUSession as specified in 3GPP TS 29.502 [50]. The Json body part of a HTTP multipart message shall indicate whether a given PFCP session related message relates to the UL CL/BP or to the PSA2. Presence of the DNAI IE indicates the PFCP session message relates to PSA2 and absence of the DNAI IE indicates the PFCP session message relates to UL CL/BP.\nD.2\tProcedures\nD.2.1\tAddition of PSA and UL CL/BP controlled by I-SMF\nThe corresponding stage 2 call flow is specified in clause 4.23.9.1 of 3GPP TS 23.502 [29].\nWhen the I-SMF decides to select a new PSA2 and/or a UL CL/BP (replacing the current I-UPF) for the PDU session, e.g. using the list of DNAI(s) of interest for this PDU Session received from the SMF, it shall establish PFCP sessions towards UL CL/BP and/or PSA2 respectively.\nThe I-SMF shall allocate PDR/FAR/URR/QER ID not larger than 255 and shall set Precedence value not smaller than 65536. The SMF shall allocate PDR/FAR/URR/QER ID from 256 onwards and shall set Precedence value not larger than 65535.\nNOTE 1:\tSince PDRs provided by the SMF to control the traffic via PSA2 have higher precedence than PDRs generated by the I-SMF, the I-SMF need not modify the PDRs generated by its own. See the example further down.\nFor the PFCP session established between I-SMF and UL CL/BP:\n-\tthe I-SMF shall create at least a UL PDR to identify the UL traffic received from AN and a UL FAR to forward the traffic towards PSA1;\n-\tthe I-SMF shall create a DL PDR to identify the DL traffic from the PSA1 and a DL FAR to forward the traffic towards the AN;\nNOTE 2:\tThe I-SMF needs to include DL N9 F-TEID in the SMF PDUSession Update Request sent to SMF as specified in 3GPP TS 29.502 [50].\nFor the PFCP session established between I-SMF and PSA2:\n-\tthe I-SMF shall create at least an UL PDR to identify the UL traffic received from UL CL/BP and a UL FAR to forward the traffic towards the DN;\n-\tthe I-SMF shall create a DL PDR to identify the DL traffic from the DN and a DL FAR to forward the traffic towards the UL CL/BP;\nNOTE 3:\tIf IPv6 multi-homing applies to the PDU session, a new IPv6 prefix can be allocated by the PSA2, which is sent in SMF PDUSession Update Request to SMF.\nUpon successful establishment of the PFCP sessions, the I-SMF indicates to the SMF that it has inserted an UL CL/BP and PSA by sending a SMF PDUSession Update Request to the SMF (see step 4 clause 4.23.9.1 of 3GPP TS 23.502 [29]).\nWhen the I-SMF indicates to the SMF that it has inserted an UL CL/BP and PSA, the SMF shall send two PFCP Session Establishment Requests towards the I-SMF, one targeting the UL CL/BP and another one targeting the PSA2, with the following information:\n1)\tPFCP Session Establishment Request for the UL CL/BP:\n-\tFor the support of the UL traffic offloaded towards PSA2:\n-\tone Create Traffic Endpoint IE, just including a Traffic EndPoint ID; the UL traffic endpoint corresponds to the N3 endpoint of UL CL/BP; the UL traffic endpoint shall not contain information about the N3 interface, i.e. the Network Instance IE and the Local F-TEID IE shall not be included;\n-\tat least one Create PDR IE with:\n-\tthe Source Interface set to \"Access\";\n-\tthe Traffic Endpoint IE referring to the UL traffic endpoint;\n-\tany additional Packet Detection Information to define the UL traffic to match (e.g. SDF Filter, Application ID, Ethernet Packet Filter);\n-\tany applicable PDR information, e.g. FAR ID, URR ID, QER ID.\nUL PDRs shall not contain the Outer Header Removal IE.\n-\tone UL FAR set to forward (or drop) the UL traffic, with the Destination Interface set to \"Core\". If more than one local PSA has been inserted by the I-SMF, the UL FAR shall indicate the Data Network Access Identifier associated to the local PSA towards which the UL traffic shall be forwarded; the UL FAR may do so otherwise.\n-\tFor the support of the DL traffic offloaded from PSA2:\n-\tone Create Traffic Endpoint IE, including a Traffic EndPoint ID; the DL traffic endpoint shall not contain information about the N9 interface, i.e. the Network Instance IE and the Local F-TEID IE shall not be included;\n-\tat least one Create PDR IE with:\n-\tthe Source Interface set to \"Core\";\n-\tthe Traffic Endpoint IE referring to the DL traffic endpoint;\n-\tany applicable PDR information, e.g. FAR ID, URR ID, QER ID;\n-\tone DL FAR set to forward (or drop) the DL traffic to the access network, with the Destination Interface set to \"Access\"; the DL FAR shall not contain the Outer Header Creation IE;\nNOTE 4:\tThe I-SMF is responsible for all the N3 and N9 protocol aspects (e.g. Network Instance, Local F-TEID, outer header creation or removal).\n-\tany applicable QERs and/or URRs.\n2)\tPFCP Session Establishment Request for the PSA2:\n-\tFor the support of the UL traffic offloaded at PSA2:\n-\tone Create Traffic Endpoint IE, just including a Traffic EndPoint ID; the UL traffic endpoint shall not contain information about the N9 interface, i.e. the Network Instance IE and the Local F-TEID IE shall not be included;\n-\tat least one Create PDR IE with:\n-\tthe Source Interface set to \" Access \";\n-\tthe Traffic Endpoint IE referring to the UL traffic endpoint;\n-\tany applicable PDR information, e.g. FAR ID, URR ID, QER ID;\nUL PDRs shall not contain the Outer Header Removal IE;\n-\tone UL FAR set to forward (or drop) the UL traffic, with the Destination Interface set to \"Core\".\n-\tFor the support of the DL traffic offloaded at PSA2:\n-\tone Create Traffic Endpoint IE, including a Traffic EndPoint ID and any additional information to define the DL traffic endpoint (e.g. Network Instance IE, UE IP Address IE); the DL traffic endpoint corresponds to the N6 endpoint of PSA2;\n-\tat least one Create PDR IE with:\n-\tthe Source Interface set to \"Core\";\n-\tthe Traffic Endpoint IE referring to the DL traffic endpoint;\n-\tany additional Packet Detection Information to define the DL traffic to match (e.g. SDF Filter, Application ID, Ethernet Packet Filter);\n-\tany applicable PDR information, e.g. FAR ID, URR ID, QER ID;\n-\tone DL FAR set to forward (or drop) the DL traffic, with the Destination Interface set to \" Access \"; the DL FAR shall not contain the Outer Header Creation IE.\nNOTE 5:\tThe I-SMF is responsible for all the N3 and N9 protocol aspects (e.g. Network Instance, Local F-TEID, outer header creation or removal).\n-\tAny applicable QERs and/or URRs.\nIn the PFCP Session Establishment Request for the UL CL/BP, the SMF shall not include any N4 rules for the UL and DL traffic via PSA1 (i.e. non-offload traffic exchanged between AN and PSA1).\nThe I-SMF shall translate the SMF instructions into N4 instructions to send to the UL CL/BP and PSA2, for the UL and DL traffic in one or more PFCP Session Modification Request message(s) (the I-SMF has already created a PFCP session in the UL CL/BP and PSA2 in steps 2 and 3 of Figure 4.23.9.1-1 of 3GPP TS 23.502 [29]). In particular:\n-\tthe I-SMF shall map the UL and DL traffic endpoints requested to be created by the SMF in the UL CL/BP and PSA2 respectively to the UL and DL traffic endpoints created in the UL CL/BP and in PSA2 for UL and DL traffic; the I-SMF shall update the DL traffic endpoint in PSA2 if necessary, e.g. with any Framed-Route or Framed-IPv6-Route information received from the SMF;\n-\tthe I-SMF shall add the Outer Header Removal IE to the UL PDR of the UL CL/BP;\n-\tthe I-SMF shall add an Outer Header Creation IE to DL PDR(s) of the UL CL/BP to add a GTP-U header set to the 5G-AN F-TEID, and to add a Network Instance IE if needed;\n-\tthe I-SMF shall update the UL FAR of the UL CL/BP and the DL FAR of the PSA2 with N9 protocol information, if the UL CL/BP and PSA2 are located on different UPFs; if more than one local PSA has been inserted by the I-SMF, the I-SMF shall derive the local PSA towards which the UL traffic shall be forwarded from the Data Network Access Identifier IE indicated in the UL FAR over N16a.\n-\tthe I-SMF shall overwrite the Apply Action IE of the DL FAR received from the SMF according to the User Plane connection state of the PDU session, e.g. to request the UPF to buffer packets if the PDU session is deactivated, or to forward the DL packets otherwise;\n-\tthe I-SMF shall merge the N4 information received for the UL CL/BP and the PSA2 if the UL CL/BP and PSA2 are located on the same UPF.\nThe I-SMF shall return two PFCP Session Establishment Response messages to the SMF for UL CL/BP and PSA2 respectively. In the PFCP Session Establishment Response messages, the I-SMF may set the Node ID IE and UP F-SEID IE to the ones provided by the UL CL/BP and the PSA2. The Created PDR and Created Traffic Endpoint shall not be included.\nThe I-SMF shall generate by itself the N4 rules to control the UL and DL traffic via PSA1 (i.e. non-offload traffic exchanged between AN and PSA1), and send such N4 rules to the UL CL/BP together with the N4 rules mapped from the N4 information sent by the SMF.\nEXAMPLE:\tExample of addition of PSA2 and UL CL controlled by I-SMF:\n1)\tin step 3 of clause 4.23.9.1 of 3GPP TS 23.502 [29], when establishing the PFCP session between I-SMF and UL CL/BP, the I-SMF can provide the following PDRs/FARs to the UL CL/BP:\nUL PDR1 (UL F-TEID 1 is allocated to receive UL traffic from NG-RAN ) andUL FAR1 (forward all traffic towards PSA1);\nDL PDR2 (N9 DL F-TEID is allocated to receive DL traffic from PSA1 which will be reported in SMF PDUSession Update Request towards SMF) andDL FAR2 (forward all traffic towards NG-RAN N3 F-TEID).\n2)\tin step 2 of clause 4.23.9.1 of 3GPP TS 23.502 [29], when establishing the PFCP session between I-SMF and PSA2, the I-SMF can provide the following PDRs/FARs to PSA2:\nUL PDR1 (to receive traffic from UL CL, i.e. including the UL F-TEID of UL CL) andUL FAR1 (forward all traffic towards DN);\nDL PDR2 (to receive traffic from DN) andDL FAR2 (forward all traffic towards UL CL's N9 DL F-TEID).\n3)\tin step 6 of clause 4.23.9.1 of 3GPP TS 23.502 [29], the SMF sends an SMF PDUSession Update Request to the I-SMF encapsulating binary encoded PFCP Session Establishment Request messages to request to offload service traffic towards PSA2, e.g. for a service which is identified by app-id 100;\nIn the PFCP Session Establishment Request message for PSA2, the SMF includes:\nUL PDR 256 (where the PDI includes app-id =100) andUL FAR 256 (forward all traffic towards DN);DL PDR 257 (sending traffic to UL CL, where the PDI includes app-id=100) andDL FAR 257 (sending traffic to UL CL).\nIn the PFCP Session Establishment Request message for UL CL, the SMF includes:\nUL PDR 256 (where the PDI includes app-id =100) andUL FAR 256 (forward traffic towards PSA2);DL PDR 257 (identifying all traffic received from PSA2) andDL FAR 257 (forward traffic toward access);\n4)\tin step 7 of clause 4.23.9.1 of 3GPP TS 23.502 [29], the I-SMF maps rules received in 3) in the PFCP Session Modification Request message to the PSA2, and the PDR1 and PDR2 provisioned earlier by I-SMF during the PFCP session establishment procedure will not be matched for the application traffic identified by app-id 100 due to a lower precedence.\n5)\tin step 8 of clause 4.23.9.1 of 3GPP TS 23.502 [29], the I-SMF can maps rules received in 3) in the PFCP Session Modification Request message to the UL CL, the PDR1 (forwarding all traffic to PSA1) provisioned earlier by I-SMF during the PFCP session establishment procedure will not be matched for the application traffic identified by app-id 100 due to a lower precedence.\nD.2.2\tRemoval of PSA and UL CL/BP\nThe corresponding stage 2 call flow is specified in clause 4.23.9.2 of 3GPP TS 23.502 [29].\nWhen the I-SMF indicates to the SMF that it is removing a UL CL/BP and PSA, the SMF shall send two PFCP Session Deletion Requests towards the I-SMF, one for the UL CL/BP and another one for the PSA2. The I-SMF shall return two PFCP Session Deletion Responses to the SMF (including usage reports if applicable, see clause 7.5.7.1).\nD.2.3\tChange of PSA\nThe corresponding stage 2 call flow is specified in clause 4.23.9.3 of 3GPP TS 23.502 [29].\nWhen the I-SMF indicates to the SMF a change of traffic offload, the SMF shall send a PFCP Session Establishment Request (for the new DNAI), a PFCP Session Deletion Request (for the old DNAI) towards the I-SMF, and a PFCP Session Modification Request for the UL CL/BP if needed. The I-SMF shall behave as described in clauses D.2.1 and D.2.2 and return a PFCP Session Establishment Response, a PFCP Session Deletion Response and a PFCP Session Modification Response if needed.\nD.2.4\tTraffic Usage Reporting\nThe SMF may request the I-SMF to report traffic usage measurements as specified in the rest of this specification.\nThe I-SMF shall report traffic usage measurements to the SMF as specified in the rest of this specification, i.e. in PFCP Session Report Request, PFCP Session Modification Response and PFCP Session Deletion Response messages.\nD.2.5\tUpdating N4 information towards I-SMF\nThe SMF may send PFCP Session Modification Requests with updated PFCP rules (e.g. updated PDR, QER URR), targeting the UL CL/BP or PSA2, as specified in the rest of this specification. The I-SMF shall return PFCP Session Modification Responses accordingly.\nD.2.6\tPDU session release\nCorresponding stage 2 requirements are specified in clauses 4.23.3a and 4.23.5.2 of 3GPP TS 23.502 [29].\nIf an UL/CL or BP was inserted in the data path by the I-SMF:\n-\tIn scenarios where the I-SMF sends a Release Request to the SMF, e.g. UE deregistration procedure, the I-SMF shall first send a PFCP Session Deletion Request to the UL CL/BP and local PSA to retrieve non-zero traffic usage reports, before sending the Release Request over N16a to the SMF. If the I-SMF needs to report traffic usage measurements to the SMF for the UL CL/BP and/or for the local PSA, the I-SMF shall encapsulate one PFCP Session Report Request for the UL CL/BP and/or one PFCP Session Report Request for the local PSA in the Release Request sent over N16a to the SMF. The SMF shall encapsulate corresponding PFCP Session Report Response(s) in the Release Response.If more traffic usage measurements need to be reported to the SMF, the I-SMF shall send one or more Update Request(s) towards the SMF before sending a Release Request.Upon receiving the Release Request from the I-SMF, the SMF shall consider that the PFCP sessions between the I-SMF and UL CL/BP and local PSA have been deleted.\n-\tIn scenarios where the I-SMF sends an Update Request to the SMF, e.g. UE initiated PDU session release, if the I-SMF needs to report traffic usage measurements to the SMF for the UL CL/BP and/or for the local PSA, the I-SMF may encapsulate one PFCP Session Report Request for the UL CL/BP and/or one PFCP Session Report Request for the local PSA in the Update Request sent over N16a to the SMF (i.e. in step 3a of Figure 4.3.4.3-1 of 3GPP TS 23.502 [29])). If so, the SMF shall encapsulate corresponding PFCP Session Report Response(s) in the Update Response.The SMF shall then send two PFCP Session Deletion Requests towards the I-SMF, one for the UL CL/BP and another one for the local PSA, in the subsequent Update Request initiated by the SMF towards the I-SMF to trigger the release of the PDU session (i.e. in step 3a of Figure 4.3.4.3-1 of 3GPP TS 23.502 [29]). The I-SMF shall encapsulate corresponding PFCP Session Deletion Response(s) in the Update Response (i.e. in step 14 of Figure 4.3.4.3-1 of 3GPP TS 23.502 [29]), including usage reports if applicable, see clause 7.5.7.1. The PFCP Session Deletion Response may indicate that additional usage reports need to be signalled; if so, the I-SMF shall send additional Update Request(s) towards the SMF encapsulating PFCP Session Report Requests and the SMF shall return Update Response (s) encapsulating PFCP Session Report Responses. When the last usage report has been received, the SMF shall notify the I-SMF that the PDU session is released (in step 16a of Figure 4.3.4.3-1 of 3GPP TS 23.502 [29]).\nD.2.7\tSimultaneous change of UL CL/BP and PSA controlled by I-SMF\nThe corresponding stage 2 call flow is specified in clause 4.23.9.4 of 3GPP TS 23.502 [29]. Figure D.2.7-1 specifies the details of the signalling interactions between the SMF and the I-SMF, and between the I-SMF and the UL CL/BPs and PSAs.\nFigure D.2.7-1 – Simultaneous change of UL CL/BP and PSA controlled by I-SMF\n1-2.\tThese steps are the same as described in clause D.2.1 and correspond to steps 2 and 3 of Figure 4.23.9.4-1 of 3GPP TS 23.502 [29].\n3.\tThe I-SMF indicates to the SMF that it has inserted an UL CL/BP and PSA if both the I-SMF and the SMF support the \"N9FSC\" feature defined in clause 6.1.8 of 3GPP TS 29.502 [50], or the I-SMF indicates to the SMF a change of UL CL/BP and PSA if either the I-SMF or the SMF does no support the \"N9FSC\" feature.\n4.\tWhen the I-SMF indicates to the SMF an insertion of UL CL/BP and PSA, and data forwarding between the new and old UL CL/BPs for EAS session continuity is required, the SMF shall send to the I-SMF a PFCP Session Establishment Request (for the new DNAI) and a PFCP Session Establishment Request for the new UL CL/BP.\nWhen the I-SMF indicates to the SMF a change of UL CL/BP and PSA, or when the I-SMF indicates to the SMF an insertion of UL CL/BP and PSA and data forwarding between the new and old UL CL/BPs for EAS session continuity is not required, the SMF shall send to the I-SMF a PFCP Session Establishment Request (for the new DNAI), a PFCP Session Deletion Request (for the old DNAI), a PFCP Session Deletion Request for the old UL CL/BP and a PFCP Session Establishment Request for the new UL CL/BP. The I-SMF shall behave as described in clauses D.2.1 and D.2.2 and return two PFCP Session Establishment Responses and two PFCP Session Deletion Responses.\nThe following signalling applies if both the I-SMF and the SMF support the \"N9FSC\" feature and data forwarding between the new and old UL CL/BPs for EAS session continuity is required.\nStep 4 is same as described in clause D.2.1, in addition, the SMF shall send the following additional information to the I-SMF:\n-\tin the PFCP Session Establishment Request for the new UL CL/BP:\n-\tCreate PDR(s) IE for the UL traffic to forward to the old UL CL/BP with:\n-\tthe Source Interface set to \"Access\";\n-\tthe Traffic Endpoint IE referring to the UL traffic endpoint;\n-\tany additional Packet Detection Information to define the UL traffic to match for N9 forwarding (e.g. SDF Filter, Application ID, Ethernet Packet Filter);\n-\tany applicable PDR information, e.g. FAR ID, QER ID;\n-\tthe UL PDR shall not contain the Outer Header Removal IE;\n-\tthe Precedence value of the above UL PDR for N9 forwarding to the old UL CL/BP shall be set to a higher precedence than the UL PDR for the new UL CL/BP to support the UL traffic offloaded towards the PSA2, if the same Packet Detection Information applies.\n-\tone UL FAR, set to \"forward\" the UL traffic to the old UL CL/BP, with the Destination Interface set to \"Core\"; the UL FAR shall not contain the Outer Header Creation IE.\n-\tthe following additional information in the Update Request:\n-\tthe indication that a N9 forwarding tunnel between UL CLs/BPs is required;\n-\tthe list of Rule IDs pointing to the UL PDRs included in the PFCP Session Establishment Request for the new UL CL/BP to establish the UL N9 data forwarding in the new UL CL/BP;\n-\tthe value of the timer to detect the end of activity on the N9 forwarding tunnel.\nNOTE:\tThe UL PDR(s) for UL traffic offloaded towards PSA2 will not be matched as long as the UL PDR(s) for UL traffic forwarding to the old UL CL/BP is installed in the target UL CL/BP if the same Packet Detection Information applies, since the latter PDR(s) has a higher precedence than the former.\n5.\tThe step is same as described in clause D.2.1, i.e. the SMF updates the remote PSA (PSA1) via N4 with the DL Tunnel Info of the Target UL CL/BP for the downlink traffic.\n6.\tThe I-SMF shall map the above rules received in the PFCP Session Establishment Request message to the new UL CL/BP. In particular:\n-\tthe I-SMF shall add the Outer Header Removal IE to the UL PDR(s) of the UL CL/BP for the UL traffic to be forwarded to the old UL CL/BP;\n-\tthe I-SMF shall add an Outer Header Creation IE to the UL FAR of the UL CL/BP to add a GTP-U header set to the old N3 UL F-TEID in the old UL CL/BP if it can be reused;\n-\tthe I-SMF shall provision a DL PDR to receive DL traffic forwarded from the old UL CL/BP and a DL FAR to forward the received DL traffic towards the NG-RAN. The new UL CL/BP shall assign a new N9 DL F-TEID for the old UL CL/BP.\n7.\tThe I-SMF returns two PFCP Session Establishment Responses to the SMF.\n8.\tThe step is same as described in clause D.2.1.\n9.\tThe I-SMF shall send the following information to the old UL CL/BP in the PFCP Session Modification Request based on the additional information received in the Update Request from the SMF and the PFCP Session Establishment Response from the new UL CL/BP:\n-\tthe I-SMF shall update the Outer Header Creation IE in the DL FAR of the old UL CL/BP to add a GTP-U header set to the F-TEID assigned by the new UL CL/BP for DL traffic forwarding;\n-\tthe I-SMF shall update the UL PDR(s) to receive UL traffic forwarded from the new UL CL/BP, if the old UL CL/BP needs to assign a new N9 DL F-TEID for the new UL CL/BP;\n-\tinstruct the old UL CL/BP to report user inactivity on the N9 forwarding tunnel by provisioning the received time in the User Plane Inactivity Timer IE (as specified in clause 5.11.2).\nIf the old UL CL/BP assigns a new N9 DL F-TEID to receive the UL traffic from the new UL CL/BP, the I-SMF shall send a PFCP Session Modification Request message to the new UL CL/BP to add an Outer Header Creation IE to the UL FAR of the UL CL/BP to add a GTP-U header set to the new N9 UL F-TEID assigned by the old UL CL/BP for UL traffic forwarding, and to add a Network Instance IE if needed.\n10.\tIf the User Plane Inactivity Report is received from the old UL CL/BP due to the User Plane Inactivity Timer expires, the I-SMF indicates to the SMF that it is removing the old UL CL/BP and PSA0.\n11.\tThe SMF shall send to the I-SMF a PFCP Session Deletion Request (for the old DNAI) and a PFCP Session Deletion Request for the old UL CL/BP.\n12-14.\tThe I-SMF shall remove the UL PDR(s) identified by the received Rule ID(s) in the target UL CL/BP and the PFCP sessions in old UL CL/BP/PSA0.\n15.\tThe I-SMF returns two PFCP Session Deletion Responses to the SMF.\nD.2.8\tSimultaneous change of UL CL/BP and PSA controlled by different I-SMFs\nThe corresponding stage 2 call flow is specified in clause 4.23.9.5 of 3GPP TS 23.502 [29]. Figure D.2.8-1 specifies the details of the signalling between the SMF and the I-SMF, and between the I-SMFs and the UL CL/BPs and PSAs.\nFigure D.2.8-1 – Simultaneous change of UL CL/BP and PSA controlled by different I-SMFs\n1-2.\tThese steps are the same as described in clause D.2.7.\n3.\tThe target I-SMF indicates to the SMF the insertion of UL CL/BP and PSA.\n4.\tThe SMF shall send to the target I-SMF a PFCP Session Establishment Request (for the new DNAI) and a PFCP Session Establishment Request for the new UL CL/BP.\nIn addition, to support the EAS session continuity, the SMF may send additional information to the target I-SMF as defined in step 4 of clause D.2.7.\n5-6.\tThe target I-SMF shall behave as described in step 5 and 6 of clause D.2.7. In addition, the target I-SMF shall provision a URR with a User Plane Inactivity Timer IE in the new UL CL/BP, based on the user plane inactivity time received from the SMF, and associate it to the UL PDR(s) used detecting the UL traffic to forward towards the old UL CL/BP and the DL PDR(s) used for detecting the DL traffic from the old UL CL/BP (as specified in clause 5.11.3).\n7-8.\tThese steps are the same as described in clause D.2.7.\n9.\tThe target I-SMF shall send an Nsmf_PDUSession_UpdateSMContext Request (N9 forwarding tunnel required, target UL CL N9 forwarding tunnel info, value of the timer to detect the end of activity on the N9 forwarding tunnel to support the EAS session continuity) to the source I-SMF, as specified in clause 5.2.2.3.21 of 3GPP TS 29.502 [50].\n10.\tThe source I-SMF shall send the following information to the old UL CL/BP in the PFCP Session Modification Request based on the information received from the target I-SMF:\n-\tthe source I-SMF shall update the Outer Header Creation IE in the DL FAR of the old UL CL/BP to add a GTP-U header set to the F-TEID assigned by the new UL CL/BP for DL traffic forwarding;\n-\tinstruct the old UL CL/BP to report user inactivity on the N9 forwarding tunnel by provisioning the received time in the User Plane Inactivity Timer IE (as specified in clause 5.11.2).\n11.\tThe source I-SMF shall return information to the target I-SMF, e.g. F-TEID in old UL CL/BP on receiving the UL traffic from the new UL CL/BP, as specified in clause 5.2.2.3.21 of 3GPP TS 29.502 [50]. The source I-SMF may return the old N3 UL F-TEID if it can be reused or a new N9 UL F-TEID assigned by the old UL CL/BP for UL traffic forwarding.\n12.\tThe target I-SMF shall update the UL FAR of the UL PDR(s) for UL data forwarding (to the old UL CL/BP) in new UL CL/BP with the F-TEID received.\n13.\tUpon being notified about user plane inactivity of the N9 forwarding tunnel by the new UL CL/BP, the target I-SMF shall release the UL PDR(s) for UL data forwarding (to the old UL CL/BP) and the DL PDR(s) for DL data received (from the old UL CL/BP) in the new UL CL/BP.\n14.\tUpon being notified about user plane inactivity of the N9 forwarding tunnel by the old UL CL/BP, the source I-SMF indicates to the SMF that it is removing the old UL CL/BP and PSA0.\n15.\tThe SMF shall send to the source I-SMF a PFCP Session Deletion Request (for the old DNAI) and a PFCP Session Deletion Request for the old UL CL/BP.\n16-17.\tThe source I-SMF shall remove the PFCP sessions in old UL CL/BP/PSA0.\n18.\tThe source I-SMF returns two PFCP Session Deletion Responses to the SMF.\nAnnex E (Informative):Procedures Related to MPTCP Functionality\nE.1\tGeneral\nThis clause provides example MPTCP flows.\nThis Annex is informative and the normative descriptions in this specification and in 3GPP TS 23.501 [28], 3GPP TS 23.502 [29] and in 3GPP TS 24.193 [59], prevail over the descriptions in this Annex if there is any difference.\nE.2\tMultipath TCP Connection Setup\nE.2.1\tGeneral\nMultipath TCP Connection is setup between the MPTCP Client in the UE and the MPTCP Proxy in the UPF (PSA). The outgoing Multipath is initiated by the MPTCP Client in the UE towards the MPTCP Proxy in the UPF.\nNOTE:\tThe incoming Multipath which is assumed to be initiated by the MPTCP Proxy in the UPF towards the MPTCP Client in the UE is not supported in this release of the specification.\nThe RTT TCP Convert Protocol (specified in IETF RFC 8803 [60]) is used to setup Multipath TCP connection and used for data exchange. The MPTCP Proxy implements the Transport Converter functionality.\nE.2.2\tOutgoing Multipath TCP Connection Setup\nFigure E.2.2-1 describes the establishment of an outgoing multipath TCP connection through a Transport Converter.\nThe MPTCP Client initiates a Multipath TCP connection towards the Transport Converter, by sending a SYN with the MP_CAPABLE option (MPC in Figure E.2.2-1). The SYN includes the address and port number of the Server (i.e. remote host), that are extracted by the Transport Converter and used to initiate a Multipath TCP connection towards this Server. As the Server does not support Multipath TCP, it replies with a SYN+ACK that does not contain the MP_CAPABLE option. The Transport Converter notes that the connection with the Server does not support Multipath TCP and returns the extended TCP header received from the Server to the Client.\nFigure E.2.2-1 – Outgoing Converter-Assisted Multipath TCP Connection Setup\nE.2.3\tIncoming Multipath TCP Connection Setup\nIncoming Multipath TCP Connection Setup as described in clause 5.2 of IETF RFC 8803 [60] is not supported in this release of the specification.\nE.2.4\tMPTCP Session Entry Stored in MPTCP Proxy\nOnce Multipath TCP Connection is successfully setup between the MPTCP Client in the UE and the MPTCP Proxy in the UPF, the MPTCP Proxy stores the MPTCP session entry in its storage.\nThe MPTCP session entry includes the following information:\n-\tMPTCP link-specific multipath IP address and the associated TCP ports;\n-\tUE's MA-PDU session IP address and its TCP port, if the MA-PDU session IP address is used by MPTCP Proxy for IP translation;\n-\tN6 routable IP address and its TCP port, if N6 routable IP address is used by the MPTCP Proxy for IP translation;\n-\tthe remote host IP address and its TCP port.\nThe stored MPTCP session entry is used by the MPTCP Proxy for IP translation when receiving uplink or downlink MPTCP traffic.\nE.3\tIP Translation Procedure\nE.3.1\tGeneral\nOn receiving uplink or downlink MPTCP traffic, the UPF internally forwards the MPTCP traffic to the MPTCP Proxy. The MPTCP Proxy detects the MPTCP traffic is for data exchange, and performs IP translation before sending out the translated MPTCP traffic.\nFigure E.3.1-1 illustrates the IP translation model for uplink and downlink MPTCP traffics, both on the UE side and the UPF side.\nFigure E.3.1-1 IP Translation Model\nWhen UE's MA-PDU session IP address is used by MPTCP Proxy for IP translation, port collision and port exhaustion can potentially occur because the UE also uses the MA-PDU session IP address for non-MPTCP traffic. To avoid this, an N6 routable IP address can be used by the MPTCP Proxy for IP translation, based on the UPF implementation.\nE.3.2\tIP Translation on Uplink IP Packets\nOnce uplink MPTCP traffic is detected by the UPF, the UPF internally forwards the uplink IP packets to the MPTCP Proxy.\nThe MPTCP Proxy performs IP translation to the uplink IP packets, based on the stored MPTCP session entry:\n-\treplace the source IP address and port, from the UE's MPTCP link-specific multipath IP@ and its ports, to the UE's MA-PDU session IP@ and its port (or N6 routable IP@ and its port);\n-\treplace the destination IP address and port, from the MPTCP Proxy IP@ and its port, to the remote host IP@ and its port.\nAfter performing IP translation, the MPTCP Proxy forwards the translated uplink IP packets to N6 interface.\nE.3.3\tIP Translation on Downlink IP Packets\nOnce downlink MPTCP traffic is detected by the UPF, the UPF internally forwards the downlink IP packets to the MPTCP Proxy.\nThe MPTCP Proxy performs IP translation to the downlink IP packets, based on the stored MPTCP session entry:\n-\treplace the source IP address and port, from the remote host IP@ and its port, to the MPTCP Proxy IP@ and its port;\n-\treplace the destination IP address and port, from the UE's MA-PDU session IP@ and its port (or N6 routable IP@ and its port), to the UE's MPTCP link-specific multipath IP@ and its port.\nAfter performing IP translation, the MPTCP Proxy forwards the translated downlink IP packets to N3 or N9 interface.\nAnnex F (Informative):Change history\nDate\nTSG #\nTSG Doc.\nCR\nRev\nCat\nSubject/Comment\nNew\n2016-07\nCT4#74\nC4-164286\nFirst version after CT4#74\n0.1.0\n2016-10\nCT4#74bis\nC4-165318\nVersion after CT4#74bis\n0.2.0\n2016-11\nCT4#75\nC4-166347\nVersion after CT4#75\n0.3.0\n2017-01\nCT4#75bis\nC4-170124\nVersion after CT4#75bis\n0.4.0\n2017-02\nCT4#76\nC4-171423\nVersion after CT4#76\n0.5.0\n2017-03\nCT#75\nCP-170016\nThis version was sent for information\n1.0.0\n2017-04\nC4#77\nC4-172285\nVersion after CT4#77\n1.1.0\n2017-05\nC4#78\nC4-173360\nVersion after CT4#78\n1.2.0\n2017-06\nCT#76\nCP-171047\nThis version was sent for approval\n2.0.0\n2017-06\nCT#76\nCP-171183\nEditorial correction\n2.0.1\n2017-06\nCT#76\nCP-171183\nApproved in CT#76\n14.0.0\n2017-09\nCT#77\nCP-172020\n0001\n-\nPDN Instance over Sx\n14.1.0\n2017-09\nCT#77\nCP-172020\n0002\n1\nTransport Level Marking & DL Flow Level Marking\n14.1.0\n2017-09\nCT#77\nCP-172020\n0003\n2\nClarifications and corrections to Usage Reporting\n14.1.0\n2017-09\nCT#77\nCP-172020\n0004\n-\nPDN Type over Sx\n14.1.0\n2017-09\nCT#77\nCP-172020\n0005\n1\nCreating multiple PDRs in one Sx message with F-TEID allocation in UP function\n14.1.0\n2017-09\nCT#77\nCP-172020\n0006\n1\nMessage with a rejection cause\n14.1.0\n2017-09\nCT#77\nCP-172020\n0007\n-\nCorrections to the number of Fixed Octets\n14.1.0\n2017-09\nCT#77\nCP-172020\n0008\n1\nQER correlation ID\n14.1.0\n2017-09\nCT#77\nCP-172020\n0009\n3\nSx Protocol extension to support Envelope Reporting\n14.1.0\n2017-09\nCT#77\nCP-172020\n0010\n1\nOCI Flags\n14.1.0\n2017-09\nCT#77\nCP-172020\n0011\n2\nIP Address(es) and TEIDs of a UP function\n14.1.0\n2017-09\nCT#77\nCP-172020\n0012\n1\nClarification on bearer of a PDN connection and description on UP fucntion feature\n14.1.0\n2017-09\nCT#77\nCP-172020\n0013\n2\nClarification on Rule IDs\n14.1.0\n2017-09\nCT#77\nCP-172020\n0014\n1\nClarification on creating rules\n14.1.0\n2017-09\nCT#77\nCP-172020\n0018\n2\nURR and QER handling\n14.1.0\n2017-12\nCT#78\nCP-173023\n0026\n4\nReporting User Plane Inactivity\n14.2.0\n2017-12\nCT#78\nCP-173023\n0027\n-\nReporting of Usage Reports to the CP function\n14.2.0\n2017-12\nCT#78\nCP-173023\n0028\n-\nSuspend and Resume Notification procedures\n14.2.0\n2017-12\nCT#78\nCP-173023\n0029\n-\nNetwork Instance parameter\n14.2.0\n2017-12\nCT#78\nCP-173023\n0030\n1\nUser Plane traffic handling upon reaching quotas based on operator policies\n14.2.0\n2017-12\nCT#78\nCP-173023\n0031\n-\nReduced Application Detection Information for Envelope Reporting\n14.2.0\n2017-12\nCT#78\nCP-173023\n0034\n3\nSx protocol extension to support Credit Pool\n14.2.0\n2017-12\nCT#78\nCP-173023\n0035\n-\nClarification on the Setting of Precedence\n14.2.0\n2017-12\nCT#78\nCP-173023\n0036\n1\nPresence of UP F-SEID in Sx Session Establishment Response\n14.2.0\n2017-12\nCT#78\nCP-173023\n0042\n1\nChange the Title of the TS\n14.2.0\n2017-12\nCT#78\nCP-173023\n0043\n1\nClarification on Create PDR and Create FAR IEs in Sx Session Establishment Request\n14.2.0\n2017-12\nCT#78\nCP-173023\n0047\n1\nOuter Header Creation\n14.2.0\n2017-12\nCT#78\nCP-173023\n0048\n1\nClarification on presence of Activate Predefined Rule Name\n14.2.0\n2017-12\nCT#78\nCP-173023\n0056\n-\nCorrection on Load Control Information IE Type value\n14.2.0\n2017-12\nCT#78\nCP-173023\n0058\n2\nProvisioning of Subsequent Time Quota and Subsequent Volume Quota\n14.2.0\n2017-12\nCT#78\nCP-173027\n0032\nQuota Action to apply upon reaching quotas\n15.0.0\n2017-12\nCT#78\nCP-173036\n0033\n2\nSGW/PGW selection for NR\n15.0.0\n2017-12\nCT#78\nCP-173034\n0037\n2\nUpdate of the TS to prepare it for 5GC/N4\n15.0.0\n2017-12\nCT#78\nCP-173034\n0038\n1\nUpdate introdcution clause to 5GC\n15.0.0\n2017-12\nCT#78\nCP-173034\n0039\n2\nUpdate on general procedures for N4\n15.0.0\n2017-12\nCT#78\nCP-173034\n0040\n1\nNode related Messages supported on N4 interface\n15.0.0\n2017-12\nCT#78\nCP-173034\n0041\n1\nUser plane reporting\n15.0.0\n2017-12\nCT#78\nCP-173034\n0049\n2\nSession establishment on N4\n15.0.0\n2017-12\nCT#78\nCP-173034\n0050\n2\nSession Modification on N4\n15.0.0\n2017-12\nCT#78\nCP-173034\n0051\n1\nSession deletion on N4\n15.0.0\n2017-12\nCT#78\nCP-173034\n0052\n2\nSession Reporting on N4\n15.0.0\n2017-12\nCT#78\nCP-173034\n0053\n2\nLoad-overload control on N4\n15.0.0\n2017-12\nCT#78\nCP-173034\n0054\n2\nQOS enhancements on N4 for 5G\n15.0.0\n2018-03\nCT#79\nCP-180018\n0062\n1\nPDR with multiple SDFs\n15.1.0\n2018-03\nCT#79\nCP-180018\n0064\n1\nBidirectional SDF Filters\n15.1.0\n2018-03\nCT#79\nCP-180018\n0066\n-\nSource and Destination Interface setting for Indirect Data Forwarding\n15.1.0\n2018-03\nCT#79\nCP-180018\n0068\n2\nCorrelating additional usage reports with the query URR request\n15.1.0\n2018-03\nCT#79\nCP-180019\n0071\n5\nPDI optimisation\n15.1.0\n2018-03\nCT#79\nCP-180018\n0078\nCorrections to the Association Setup, Update and Release Procedures\n15.1.0\n2018-03\nCT#79\nCP-180018\n0087\n1\nError correction for Cause IE and Online-Charing Call Flow Alternative 2 example\n15.1.0\n2018-03\nCT#79\nCP-180019\n0075\n1\nMissing Feature Description on Transport Level Marking\n15.1.0\n2018-03\nCT#79\nCP-180026\n0055\n6\nSupport of Ethernet frames on N4\n15.1.0\n2018-03\nCT#79\nCP-180026\n0059\n4\nN4 alignment\n15.1.0\n2018-03\nCT#79\nCP-180026\n0060\n-\nReporting User Plane Inactivity on N4\n15.1.0\n2018-03\nCT#79\nCP-180026\n0079\n1\nAdding QFIs to the Packet Detection Information\n15.1.0\n2018-03\nCT#79\nCP-180020\n0069\n1\nCondition correction for SGW-U/PGW-U selection based on DCNR\n15.1.0\n2018-03\nCT#79\nCP-180020\n0076\n2\nSelection of SGW-C/PGW-C for Dual Connectivity with NR\n15.1.0\n2018-06\nCT#80\nCP-181119\n0093\n2\nClarification of volume-based measurement report from UP to CP\n15.2.0\n2018-06\nCT#80\nCP-181119\n0095\n-\nUsage reports queried by the CP function\n15.2.0\n2018-06\nCT#80\nCP-181119\n0103\n1\nLinked URR\n15.2.0\n2018-06\nCT#80\nCP-181119\n0106\n1\nDuplicating the user plane packets to multiple destinations\n15.2.0\n2018-06\nCT#80\nCP-181119\n0108\n2\nThe Source Interface in the User Plane IP Resource Information\n15.2.0\n2018-06\nCT#80\nCP-181125\n0097\n2\nQuota Action Buffering\n15.2.0\n2018-06\nCT#80\nCP-181125\n0100\n1\nQuota Action to apply upon reaching quotas\n15.2.0\n2018-06\nCT#80\nCP-181125\n0104\n1\nThe report and update of a URR\n15.2.0\n2018-06\nCT#80\nCP-181132\n0089\n1\nUser ID\n15.2.0\n2018-06\nCT#80\nCP-181132\n0090\n1\nPDN Type of ethernet\n15.2.0\n2018-06\nCT#80\nCP-181132\n0091\n1\nUpdate attributes in QER\n15.2.0\n2018-06\nCT#80\nCP-181132\n0101\n-\nEthernet traffic\n15.2.0\n2018-06\nCT#80\nCP-181132\n0111\n1\nResolve editor's notes\n15.2.0\n2018-06\nCT#80\nCP-181132\n0112\n1\nPDR for Ethernet PDU session\n15.2.0\n2018-06\nCT#80\nCP-181132\n0113\n1\nReporting of UE MAC addresses to the SMF\n15.2.0\n2018-09\nCT#81\nCP-182079\n0118\n2\nEssential correction on UE IP address\n15.3.0\n2018-09\nCT#81\nCP-182079\n0120\n1\nEssential correction on Monitoring Time\n15.3.0\n2018-09\nCT#81\nCP-182079\n0122\n1\nEssential clarification on the CHOOSE bit in F-TEID IE\n15.3.0\n2018-09\nCT#81\nCP-182079\n0124\n2\nEssential correction on the Forward Policy\n15.3.0\n2018-09\nCT#81\nCP-182079\n0128\n2\nUsage Report Trigger IMMER\n15.3.0\n2018-09\nCT#81\nCP-182079\n0132\n1\nEssential clarification on the zero quota\n15.3.0\n2018-09\nCT#81\nCP-182079\n0134\n1\nEssential clarification on the provision of several SDF filters in a PDI\n15.3.0\n2018-09\nCT#81\nCP-182079\n0142\n3\nEvent reporting\n15.3.0\n2018-09\nCT#81\nCP-182079\n0154\n2\nApplication detection report when the PFDs are removed\n15.3.0\n2018-09\nCT#81\nCP-182079\n0158\n1\nEssential correction on reporting the usage\n15.3.0\n2018-09\nCT#81\nCP-182079\n0160\n1\nEssential clarification on the provision of SDF filter\n15.3.0\n2018-09\nCT#81\nCP-182079\n0162\n2\nEssential correction on the Dropped DL Traffic Threshold\n15.3.0\n2018-09\nCT#81\nCP-182068\n0136\n1\nAdd support for 5G Trace\n15.3.0\n2018-09\nCT#81\nCP-182084\n0137\n-\nQFI in Downlink Data Report\n15.3.0\n2018-09\nCT#81\nCP-182084\n0138\n1\nUser ID extensions\n15.3.0\n2018-09\nCT#81\nCP-182084\n0139\n2\nFramed Routing\n15.3.0\n2018-09\nCT#81\nCP-182084\n0143\n-\n5GS restoration procedures\n15.3.0\n2018-09\nCT#81\nCP-182084\n0144\n1\nUplink Classifier and Branching Point functionalities\n15.3.0\n2018-09\nCT#81\nCP-182084\n0145\n1\nPause of charging.\n15.3.0\n2018-09\nCT#81\nCP-182084\n0146\n2\nData forwarding\n15.3.0\n2018-09\nCT#81\nCP-182084\n0147\n1\nSending of endmarker packets in 5GC\n15.3.0\n2018-09\nCT#81\nCP-182084\n0148\n1\nPredefined Rules PCC/ADC Rules\n15.3.0\n2018-09\nCT#81\nCP-182084\n0149\n1\nDownlink Data Notification Delay\n15.3.0\n2018-09\nCT#81\nCP-182084\n0150\n1\nClarification on Editor's notes and cleanup of the specification.\n15.3.0\n2018-09\nCT#81\nCP-182076\n0152\n3\nLinked usage report\n15.3.0\n2018-12\nCT#82\nCP-183103\n0166\n1\nClarification on UL/DL MBR\n15.4.0\n2018-12\nCT#82\nCP-183103\n0171\n2\nForwarding End Marker\n15.4.0\n2018-12\nCT#82\nCP-183103\n0173\n1\nReapplying Thresholds\n15.4.0\n2018-12\nCT#82\nCP-183103\n0175\n1\nSupport of event based reporting for charging\n15.4.0\n2018-12\nCT#82\nCP-183103\n0177\n1\nUsage Report Sequence Number Starting Value\n15.4.0\n2018-12\nCT#82\nCP-183103\n0179\n1\nTransport Level Marking\n15.4.0\n2018-12\nCT#82\nCP-183103\n0181\n2\nCorrection on the support of PGW Pause of Charging\n15.4.0\n2018-12\nCT#82\nCP-183103\n0183\n1\nNetwork Instance in relation to IP Address\n15.4.0\n2018-12\nCT#82\nCP-183103\n0185\n-\nTime of First (Last) Packet\n15.4.0\n2018-12\nCT#82\nCP-183103\n0187\n1\nOuter Header Removal for IPv4v6 GTP-U tunnel\n15.4.0\n2018-12\nCT#82\nCP-183103\n0203\n1\nEssential correction on the start point of time based measurement\n15.4.0\n2018-12\nCT#82\nCP-183103\n0205\n2\nFAR for HTTP Redirection\n15.4.0\n2018-12\nCT#82\nCP-183092\n0163\n1\nCleanup and Alignment\n15.4.0\n2018-12\nCT#82\nCP-183092\n0169\n6\nVLAN Tag support in outer header creation\n15.4.0\n2018-12\nCT#82\nCP-183092\n0191\n1\nThe VIDs handling in N4 aligned with 23.501\n15.4.0\n2018-12\nCT#82\nCP-183092\n0193\n-\nQFI Correction\n15.4.0\n2018-12\nCT#82\nCP-183092\n0194\n1\nClarification to ARP / IPv6 ND Proxying\n15.4.0\n2018-12\nCT#82\nCP-183092\n0195\n6\nAdding Averaging Window parameter on N4\n15.4.0\n2018-12\nCT#82\nCP-183092\n0196\n4\nAdding 5G Session-AMBR\n15.4.0\n2018-12\nCT#82\nCP-183092\n0197\n1\nPaging Policy Differentiation in 5GC\n15.4.0\n2018-12\nCT#82\nCP-183092\n0198\n3\nClarification on forwarding user plane data via a shared Sx-u tunnel\n15.4.0\n2018-12\nCT#82\nCP-183092\n0199\n1\n5G UPF Introduction\n15.4.0\n2018-12\nCT#82\nCP-183092\n0206\n2\nPFD Procedure\n15.4.0\n2018-12\nCT#82\nCP-183092\n0209\n1\nTraffic steering control with AF provided N6 traffic routing information\n15.4.0\n2018-12\nCT#82\nCP-183092\n0210\n2\nData forwarding between 5GS and EPS\n15.4.0\n2018-12\nCT#82\nCP-183099\n0188\n-\nCorrections for wrong references\n15.4.0\n2018-12\nCT#82\nCP-183099\n0200\n2\nInterpretation of predefined Rules\n15.4.0\n2019-03\nCT#83\nCP-190040\n0215\n1\nClarifications to CP/UP function, Node, PFCP entity and PFCP Association concepts\n15.5.0\n2019-03\nCT#83\nCP-190032\n0211\n1\n(Un)solicited Application Reporting\n15.5.0\n2019-03\nCT#83\nCP-190032\n0212\n2\nPolicy and Charging Control\n15.5.0\n2019-03\nCT#83\nCP-190032\n0213\n1\nLegal Interception support for 5GC SMF/UPF\n15.5.0\n2019-03\nCT#83\nCP-190032\n0216\n1\nPFD Contents and Management\n15.5.0\n2019-03\nCT#83\nCP-190032\n222\n1\nClarification on ARP Proxy\n15.5.0\n2019-03\nCT#83\nCP-190032\n0230\n1\nInactivity timer for Always-on PDU session\n15.5.0\n2019-03\nCT#83\nCP-190032\n0231\n1\nSMF Derivation of DSCP on N4\n15.5.0\n2019-03\nCT#83\nCP-190039\n0217\n2\nClarification on the use of Graceful Release Period\n15.5.0\n2019-03\nCT#83\nCP-190039\n0219\n2\nPFCP Association Release Procedure\n15.5.0\n2019-03\nCT#83\nCP-190039\n0221\n3\nURR triggered packets dropping or redirection\n15.5.0\n2019-03\nCT#83\nCP-190039\n0232\n1\nIE Name Corrections\n15.5.0\n2019-06\nCT#84\nCP-191021\n0248\n1\nCorrect the length of redirection server address\n15.6.0\n2019-06\nCT#84\nCP-191021\n0257\n-\nCorrect the length of Multiplier\n15.6.0\n2019-06\nCT#84\nCP-191024\n0235\n1\nRelease of F-TEID by the UP Function upon removal of PDR\n15.6.0\n2019-06\nCT#84\nCP-191024\n0242\n1\nEssential correction on report of user plane path failure\n15.6.0\n2019-06\nCT#84\nCP-191024\n0244\n2\nParameters for Performance Measurement\n15.6.0\n2019-06\nCT#84\nCP-191024\n0243\n3\nAccurate Interface Type for Supporting Performance Measurement\n15.6.0\n2019-06\nCT#84\nCP-191024\n0245\n3\nUpdate the redirection server address to support dual stack UE\n15.6.0\n2019-06\nCT#84\nCP-191024\n0262\n1\nFramed-Route and Framed-IPv6-Route in a PDR\n15.6.0\n2019-06\nCT#84\nCP-191024\n0258\n1\nCorrections to the Recovery Time Stamp\n15.6.0\n2019-06\nCT#84\nCP-191024\n0251\n1\nMatching a PFD\n15.6.0\n2019-06\nCT#84\nCP-191058\n0233\n-\nCorrection to Framed Routing\n15.6.0\n2019-06\nCT#84\nCP-191058\n0260\n-\nReverting N4 requirements for Lawful Interception support in 5GC\n15.6.0\n2019-06\nCT#84\nCP-191047\n0240\n1\nEnhancement to the PFCP Association Release Procedure\n16.0.0\n2019-06\nCT#84\nCP-191047\n0241\n2\nDeferred PDR Activation and Deactivation\n16.0.0\n2019-06\nCT#84\nCP-191047\n0263\n1\nActivation and Deactivation of Pre-defined PDRs\n16.0.0\n2019-06\nCT#84\nCP-191050\n0247\n1\nUser Plane Forwarding with Control Plane CIoT 5GS Optimisation\n16.0.0\n2019-06\nCT#84\nCP-191051\n0237\n1\nSupport for ATSSS\n16.0.0\n2019-06\nCT#84\nCP-191051\n0236\n1\nUpdate on the Packet Forwarding Model\n16.0.0\n2019-06\nCT#84\nCP-191051\n0238\n2\nMulti-Access Action Rule\n16.0.0\n2019-06\nCT#84\nCP-191054\n0259\n1\nUE IP addresses/prefixes allocation by UPF\n16.0.0\n2019-06\nCT#84\nCP-191054\n0252\n3\nUpdate the PFCP association setup to support UE IP address Allocation by AAA/DHCP\n16.0.0\n2019-06\nCT#84\nCP-191055\n0261\n1\nPFCP sessions successively controlled by different SMFs of a same SMF set\n16.0.0\n2019-06\nCT#84\nCP-191056\n0253\n2\nUpdate description of 5G UPF with redundant transmission\n16.0.0\n2019-09\nCT#85\nCP-192129\n0293\n1\nEditorial and style corrections\n16.1.0\n2019-09\nCT#85\nCP-192129\n0267\n-\nApplication report when the PFDs are removed or modified\n16.1.0\n2019-09\nCT#85\nCP-192129\n0273\n1\nMeasurement Before QoS Enforcement Clarification\n16.1.0\n2019-09\nCT#85\nCP-192129\n0274\n1\nNumber of packets\n16.1.0\n2019-09\nCT#85\nCP-192129\n0278\n1\nF-TEID in a PDR\n16.1.0\n2019-09\nCT#85\nCP-192129\n0282\n-\nClarification to C-Tag and S-Tag encoding\n16.1.0\n2019-09\nCT#85\nCP-192129\n0285\n1\nPFCP messages bundling\n16.1.0\n2019-09\nCT#85\nCP-192096\n0280\n-\nEssential Correction on Heartbeat procedure\n16.1.0\n2019-09\nCT#85\nCP-192133\n0271\n1\nSupport 5G VN Group Communication – unicast traffic\n16.1.0\n2019-09\nCT#85\nCP-192133\n0272\n1\nSupport 5G VN Group Communication – broadcast traffic\n16.1.0\n2019-09\nCT#85\nCP-192133\n0283\n1\n3GPP Interface Type values\n16.1.0\n2019-09\nCT#85\nCP-192194\n0270\n3\nPFCP sessions controlled by different SMFs in a set\n16.1.0\n2019-09\nCT#85\nCP-192194\n0294\n-\nSupport of SMF set and association establishement between SMF and UPF initiated by the UPF.\n16.1.0\n2019-09\nCT#85\nCP-192193\n0265\n3\nEnhancing UE IP address Pool Identity IE type\n16.1.0\n2019-09\nCT#85\nCP-192193\n0266\n2\nPFCP usage over N16a for the support of traffic offload by UPF controlled by I-SMF\n16.1.0\n2019-09\nCT#85\nCP-192126\n0281\n1\nProtocol support for Ethernet PDN in EPS\n16.1.0\n2019-09\nCT#85\nCP-192187\n0287\n2\nSupporting redundant transmission at transport layer Negotiation\n16.1.0\n2019-09\nCT#85\nCP-192187\n0269\n3\nValidity time in Create URR IE\n16.1.0\n2019-12\nCT#86\nCP-193023\n0398\n1\nCorrect Terminology of Sx Session to PFCP Session\n16.2.0\n2019-12\nCT#86\nCP-193041\n0318\n3\nCorrection to number of fixed octets in table 8.1.2\n16.2.0\n2019-12\nCT#86\nCP-193045\n0277\n3\nControlling of number of reports\n16.2.0\n2019-12\nCT#86\nCP-193045\n0295\n1\nClarification to Create PDR/FAR/URR/QER/BAR/MAR IEs in a modification message\n16.2.0\n2019-12\nCT#86\nCP-193045\n0302\n1\nPFCP Association Setup Request with same Node ID\n16.2.0\n2019-12\nCT#86\nCP-193045\n0315\n2\nNull Usage Report\n16.2.0\n2019-12\nCT#86\nCP-193045\n0317\n3\nClarifications to Vendor-specific IE handling\n16.2.0\n2019-12\nCT#86\nCP-193045\n0329\n2\nReestablishment of PFCP sessions after a UP function restart\n16.2.0\n2019-12\nCT#86\nCP-193045\n0335\n1\nCause No established PFCP Association\n16.2.0\n2019-12\nCT#86\nCP-193045\n0340\n1\nUser Plane Path Recovery Report\n16.2.0\n2019-12\nCT#86\nCP-193045\n0341\n1\nUE IP address allocation\n16.2.0\n2019-12\nCT#86\nCP-193045\n0342\n4\nAdditional PFCP Session Report Request\n16.2.0\n2019-12\nCT#86\nCP-193045\n0349\n1\nReporting PDR ID in a Usage Report\n16.2.0\n2019-12\nCT#86\nCP-193046\n0310\n2\nSupport of IPTV service\n16.2.0\n2019-12\nCT#86\nCP-193046\n0327\n1\nIPv6 address allocation and IPv6 prefix delegation for RG connecting to 5GC\n16.2.0\n2019-12\nCT#86\nCP-193049\n0288\n7\nSmall Data Rate Control Parameters\n16.2.0\n2019-12\nCT#86\nCP-193050\n0309\n2\n5GS Bridge information reporting for Time Sensitive Communication\n16.2.0\n2019-12\nCT#86\nCP-193050\n0314\n1\nNetwork Instance representing the 5G VN group\n16.2.0\n2019-12\nCT#86\nCP-193050\n0316\n1\nTransfer of TSN bridge port management information\n16.2.0\n2019-12\nCT#86\nCP-193050\n0347\n2\nReporting the clock drift between TSN and 5GS times\n16.2.0\n2019-12\nCT#86\nCP-193051\n0298\n1\nGeneral description of ATSSS and Multi-Access Rule\n16.2.0\n2019-12\nCT#86\nCP-193051\n0300\n4\nHandling of GBR traffic of a MA PDU session\n16.2.0\n2019-12\nCT#86\nCP-193051\n0322\n2\nSession Reporting Rule\n16.2.0\n2019-12\nCT#86\nCP-193051\n0301\n1\nAccess type of a MA PDU session becoming (un)available\n16.2.0\n2019-12\nCT#86\nCP-193051\n0304\n4\nATSSS Funtionality Required and ATSSS Control Parameters Returned\n16.2.0\n2019-12\nCT#86\nCP-193051\n0325\n3\nClarifications to ATSSS feature\n16.2.0\n2019-12\nCT#86\nCP-193056\n0297\n1\nUL FAR in UL CL or BP towards Local PSA\n16.2.0\n2019-12\nCT#86\nCP-193056\n0306\n2\nClarification on N4 Rules Exchanged via N16a Interface\n16.2.0\n2019-12\nCT#86\nCP-193056\n0330\n1\nUE IP Address Pool ID in PFCP Association Procedure\n16.2.0\n2019-12\nCT#86\nCP-193056\n0331\n1\nUE IP address Pool Identity\n16.2.0\n2019-12\nCT#86\nCP-193057\n0296\n2\nPFCP sessions successively controlled by different SMFs of an SMF set\n16.2.0\n2019-12\nCT#86\nCP-193060\n0312\n4\nFunction description for URLLC\n16.2.0\n2019-12\nCT#86\nCP-193060\n0326\n1\nGTP-U Path QoS Monitoring\n16.2.0\n2019-12\nCT#86\nCP-193060\n0346\n2\nPer QoS Flow per UE QoS Monitoring\n16.2.0\n2020-03\nCT#87e\nCP-200035\n0350\n2\nIETF reference update for IPv6 multicast\n16.3.0\n2020-03\nCT#87e\nCP-200033\n0352\n1\nSupport of MT-EDT\n16.3.0\n2020-03\nCT#87e\nCP-200033\n0385\n2\nMO Exception Data Indication\n16.3.0\n2020-03\nCT#87e\nCP-200033\n0386\n2\nPacket Rate Status Reporting and Control\n16.3.0\n2020-03\nCT#87e\nCP-200016\n0354\n1\nProvision alternative SMF IP addresses of PFCP entities pertaining to the same SMF\n16.3.0\n2020-03\nCT#87e\nCP-200017\n0355\n1\nTransferring N4 messages over N16a\n16.3.0\n2020-03\nCT#87e\nCP-200017\n0388\n-\nClarification to N4 information\n16.3.0\n2020-03\nCT#87e\nCP-200038\n0357\n4\nRemoving a URR\n16.3.0\n2020-03\nCT#87e\nCP-200038\n0358\n2\nUPF ID\n16.3.0\n2020-03\nCT#87e\nCP-200038\n0359\n1\n3GPP Interface Type\n16.3.0\n2020-03\nCT#87e\nCP-200038\n0360\n2\nMiscellaneous small corrections\n16.3.0\n2020-03\nCT#87e\nCP-200038\n0361\n1\nThe Source IP Address in Heartbeat Request message\n16.3.0\n2020-03\nCT#87e\nCP-200038\n0362\n2\nUP function Initiated PFCP Association Release at timeout\n16.3.0\n2020-03\nCT#87e\nCP-200038\n0363\n1\nUP function initiated PFCP session release\n16.3.0\n2020-03\nCT#87e\nCP-200038\n0366\n1\nThe Recovery Time Stamp in PFCP Session Establishment Request message\n16.3.0\n2020-03\nCT#87e\nCP-200038\n0374\n2\nF-TEID allocation\n16.3.0\n2020-03\nCT#87e\nCP-200038\n0376\n2\nReflective QoS\n16.3.0\n2020-03\nCT#87e\nCP-200038\n0384\n1\nSDF Handling when waiting for credit\n16.3.0\n2020-03\nCT#87e\nCP-200023\n0364\n-\nEthernet PDU Session Anchor Relocation\n16.3.0\n2020-03\nCT#87e\nCP-200023\n0375\n2\nSupport of Redundant Transmission\n16.3.0\n2020-03\nCT#87e\nCP-200031\n0367\n2\nSteering Mode Value\n16.3.0\n2020-03\nCT#87e\nCP-200031\n0368\n-\nPort Type of MPTCP Proxy and PMF\n16.3.0\n2020-03\nCT#87e\nCP-200031\n0369\n1\nApply ATSSS-LL together with MPTCP\n16.3.0\n2020-03\nCT#87e\nCP-200031\n0370\n2\nMore Description for MPTCP Functionality\n16.3.0\n2020-03\nCT#87e\nCP-200031\n0381\n1\nSignalling to the UPF that an access of a MA PDU session is unavailable\n16.3.0\n2020-03\nCT#87e\nCP-200032\n0379\n1\nUpdate of 5G VN Group Communication\n16.3.0\n2020-03\nCT#87e\nCP-200032\n0380\n1\nTSN Domain and Time Domain\n16.3.0\n2020-03\nCT#87e\nCP-200032\n0382\n1\n5GS Bridge information reporting cleanup for Time Sensitive Communication\n16.3.0\n2020-04\nCT#87e\nClause 5.24.3 was deleted by mistake during implementation after CT#87e\n16.3.1\n2020-06\nCT#88e\nCP-201029\n0415\n1\nRestoring deleted statement\n16.4.0\n2020-06\nCT#88e\nCP-201029\n0441\n1\nDL Data Notification for the subsequent DL data pertaining to a different QoS flow\n16.4.0\n2020-06\nCT#88e\nCP-201051\n0356\n1\nActivating a predefined FAR/URR/QER\n16.4.0\n2020-06\nCT#88e\nCP-201051\n0390\n-\nMiscellaneous small correction on Figures\n16.4.0\n2020-06\nCT#88e\nCP-201051\n0395\n1\nNew S-NSSAI IE\n16.4.0\n2020-06\nCT#88e\nCP-201051\n0396\n-\nInconsistent description for the use of Activation/Deactivation time\n16.4.0\n2020-06\nCT#88e\nCP-201051\n0397\n-\nF-TEID allocation cleanup\n16.4.0\n2020-06\nCT#88e\nCP-201051\n0398\n-\nEncoding of the Remote GTP-U Peer IE\n16.4.0\n2020-06\nCT#88e\nCP-201051\n0403\n-\nUE IP address allocation\n16.4.0\n2020-06\nCT#88e\nCP-201051\n0404\n1\nUE IP address pool based on S-NSSAI\n16.4.0\n2020-06\nCT#88e\nCP-201051\n0406\n1\nReport Trigger for Quota Validity Time Expiry\n16.4.0\n2020-06\nCT#88e\nCP-201051\n0411\n1\nClarification on Partial Failure of UP Function\n16.4.0\n2020-06\nCT#88e\nCP-201051\n0413\n2\nNode level vs PFCP entity level procedures\n16.4.0\n2020-06\nCT#88e\nCP-201051\n0417\n2\nHeartbeat procedure clarification\n16.4.0\n2020-06\nCT#88e\nCP-201051\n0418\n2\nAlternative IP Address in SSET\n16.4.0\n2020-06\nCT#88e\nCP-201051\n0419\n2\nClarification when Node ID is set to an IP address\n16.4.0\n2020-06\nCT#88e\nCP-201051\n0420\n2\nAssociation Update Response for EPFAR\n16.4.0\n2020-06\nCT#88e\nCP-201051\n0422\n1\nUP function features description update\n16.4.0\n2020-06\nCT#88e\nCP-201051\n0427\n3\nDownlink data reordering - new feature definition\n16.4.0\n2020-06\nCT#88e\nCP-201051\n0438\n2\nUE IP address pool based on IP version\n16.4.0\n2020-06\nCT#88e\nCP-201051\n0444\n1\nRemaining Quota in the UP function\n16.4.0\n2020-06\nCT#88e\nCP-201051\n0445\n1\nAdjust Threshold/Quota after a usage report in the UP function\n16.4.0\n2020-06\nCT#88e\nCP-201051\n0446\n2\nQuota Reporting Trigger Clarification\n16.4.0\n2020-06\nCT#88e\nCP-201051\n0449\n1\nEditorial corrections\n16.4.0\n2020-06\nCT#88e\nCP-201050\n0389\n1\nSupport of IPUPS Functionality\n16.4.0\n2020-06\nCT#88e\nCP-201046\n0391\n3\nFirst discarded downlink packet notification\n16.4.0\n2020-06\nCT#88e\nCP-201046\n0392\n2\nAdd RDS configuration information\n16.4.0\n2020-06\nCT#88e\nCP-201046\n0394\n2\nData rate control during mobility between 5GS and EPS\n16.4.0\n2020-06\nCT#88e\nCP-201046\n0414\n1\nAligning \"MO Exception data\" handling with stage 2 - UPF\n16.4.0\n2020-06\nCT#88e\nCP-201044\n0393\n1\nMPTCP Indication for a Uplink PDR for traffic applicable for MPTCP\n16.4.0\n2020-06\nCT#88e\nCP-201044\n0408\n1\nPacket Forwarding Model for MPTCP\n16.4.0\n2020-06\nCT#88e\nCP-201044\n0423\n1\nUpdate IETF References for MPTCP\n16.4.0\n2020-06\nCT#88e\nCP-201044\n0425\n1\nPMFP Message Handling\n16.4.0\n2020-06\nCT#88e\nCP-201044\n0426\n1\nN6 Routable IP address\n16.4.0\n2020-06\nCT#88e\nCP-201044\n0434\n1\nDL PDRs of a MA PDU session\n16.4.0\n2020-06\nCT#88e\nCP-201044\n0435\n1\nPMF control information to enable/disable PMF RTT measurements\n16.4.0\n2020-06\nCT#88e\nCP-201037\n0400\n1\nRedundant Transmission on transport layer\n16.4.0\n2020-06\nCT#88e\nCP-201045\n0401\n1\nClarification for TSN NW-TT port number\n16.4.0\n2020-06\nCT#88e\nCP-201045\n0402\n2\nSupport of QoS differentiation for NPN\n16.4.0\n2020-06\nCT#88e\nCP-201045\n0436\n1\n5GS Bridge ID clarification\n16.4.0\n2020-06\nCT#88e\nCP-201045\n0437\n1\n5GS Bridge and port information separation for Time Sensitive Communication\n16.4.0\n2020-06\nCT#88e\nCP-201031\n0433\n1\nN4 information exchanged over N16a during PDU session release\n16.4.0\n2020-06\nCT#88e\nCP-201068\n0412\n1\nInter-system handover with direct data forwarding\n16.4.0\n2020-06\nCT#88e\nCP-201070\n0447\n1\nData Forwarding Info\n16.4.0\n2020-09\nCT#89e\nCP-202114\n0466\n2\nInterworking between ETSUN and URLLC/TSC\n16.5.0\n2020-09\nCT#89e\nCP-202114\n0475\n1\nEnd marker handling in service request procedure\n16.5.0\n2020-09\nCT#89e\nCP-202114\n0482\n-\nCorrecting the example of addition of PSA2 and UL CL controlled by I-SMF\n16.5.0\n2020-09\nCT#89e\nCP-202102\n0471\n3\nReporting UE IP Address Usage\n16.5.0\n2020-09\nCT#89e\nCP-202102\n0479\n-\nInterface Type of Traffic Endpoint\n16.5.0\n2020-09\nCT#89e\nCP-202102\n0484\n2\nSMF-Set ID in PFCP Association Messages\n16.5.0\n2020-09\nCT#89e\nCP-202107\n0472\n2\nCorrect IE Type of Redundant Transmission Parameters\n16.5.0\n2020-09\nCT#89e\nCP-202107\n0473\n1\nTime Stamp in QoS Monitoring Report IE\n16.5.0\n2020-09\nCT#89e\nCP-202105\n0474\n1\nSmall data rate control and Serving PLMN rate control\n16.5.0\n2020-09\nCT#89e\nCP-202106\n0477\n1\nEditor's Note on TSN Bridge Name\n16.5.0\n2020-09\nCT#89e\nCP-202106\n0478\n1\nEditor's Note on TSN NW-TT Port relation to PDU session\n16.5.0\n2020-09\nCT#89e\nCP-202103\n0480\n1\nIPv6 Prefix Delegation via DHCPv6\n16.5.0\n2020-12\nCT#90e\nCP-203038\n0492\n-\nMessage Priority encoding\n16.6.0\n2020-12\nCT#90e\nCP-203038\n0494\n1\nEssential clarification on the Additional Usage Reports\n16.6.0\n2020-12\nCT#90e\nCP-203038\n0496\n2\nEssential clarification on the Framed-Route\n16.6.0\n2020-12\nCT#90e\nCP-203038\n0497\n1\nIPv6 Prefix delegation when the UP function allocating UE IP Address\n16.6.0\n2020-12\nCT#90e\nCP-203038\n0499\n1\nImplicitly allowing packets be forwarded via provisioning a non-zero quota\n16.6.0\n2020-12\nCT#90e\nCP-203038\n0500\n1\nMiscellaneous corrections\n16.6.0\n2020-12\nCT#90e\nCP-203041\n0501\n2\nNotify the discarded downlink packet\n16.6.0\n2020-12\nCT#90e\nCP-203042\n0490\n-\nPFCP session used to send PMIC and BMIC\n16.6.0\n2020-12\nCT#90e\nCP-203042\n0491\nRemoving NW-TT Port Number from Created Bridge Info for TSC IE\n16.6.0\n2020-12\nCT#90e\nCP-203043\n0485\n1\nReplace reference draft-ietf-tcpm-converters-19 by reference to RFC 8803\n16.6.0\n2020-12\nCT#90e\nCP-203043\n0489\n1\nIncorrect IE type values\n16.6.0\n2020-12\nCT#90e\nCP-203043\n0498\n1\nProcedures Related to MPTCP Functionality\n16.6.0\n2020-12\nCT#90e\nCP-203046\n0487\n-\nGTP-U path interface type IE in GTP-U Path QoS Report\n16.6.0\n2020-12\nCT#90e\nCP-203046\n0488\n3\nQoS monitoring of a PDU session based on GTP-U path monitoring\n16.6.0\n2020-12\nCT#90e\nCP-203051\n0495\n1\nEnd Marker Reception Reporting Corrections\n16.6.0\n2021-03\nCT#91e\nCP-210045\n0504\n3\nStop of QoS Monitoring\n16.7.0\n2021-03\nCT#91e\nCP-210045\n0508\n2\nUsage Reporting when using Redundant Transmission on N3/N9 interfaces\n16.7.0\n2021-03\nCT#91e\nCP-210051\n0509\n1\nDistinguishing FQ-CSIDs in PFCP messages\n16.7.0\n2021-03\nCT#91e\nCP-210051\n0511\n2\nEssential correction on the use of the Updated PDR\n16.7.0\n2021-03\nCT#91e\nCP-210051\n0512\n1\nClarification on the deletion of several IEs with the same IE Type\n16.7.0\n2021-03\nCT#91e\nCP-210051\n0514\n1\nClarification on the FAR ID for Quota Action\n16.7.0\n2021-03\nCT#91e\nCP-210051\n0515\n1\nAdding MAR and SRR in Failed Rule ID\n16.7.0\n2021-03\nCT#91e\nCP-210051\n0518\n2\nClarification on the update for a bitmap style IE\n16.7.0\n2021-03\nCT#91e\nCP-210051\n0525\n1\nN9 forwarding tunnel removal\n16.7.0\n2021-03\nCT#91e\nCP-210051\n0526\n1\nUE IP address / prefix Allocation\n16.7.0\n2021-03\nCT#91e\nCP-210051\n0527\n2\nInterface Type\n16.7.0\n2021-03\nCT#91e\nCP-210037\n0517\n1\nEssential correction on the use of null SEID\n16.7.0\n2021-03\nCT#91e\nCP-210049\n0520\n1\nSNSSAI Update in PFCP Session Modification\n16.7.0\n2021-03\nCT#91e\nCP-210022\n0506\n1\nImplementation of conclusions agreed for KI#3 of TR 29.820\n17.0.0\n2021-03\nCT#91e\nCP-210032\n0507\n-\nRule activation failure\n17.0.0\n2021-03\nCT#91e\nCP-210032\n0513\n1\nEditorial Correction\n17.0.0\n2021-03\nCT#91e\nCP-210032\n0516\n1\nFilter ID\n17.0.0\n2021-03\nCT#91e\nCP-210032\n0519\n2\nAddition of RAT Type IE on PFCP Interface\n17.0.0\n2021-03\nCT#91e\nCP-210032\n0528\n1\nSupport of Radius, Diameter or DHCP communication via UPF\n17.0.0\n2021-03\nCT#91e\nCP-210033\n0510\n2\nEnhancement on the support of Pause of Charging\n17.0.0\n2021-03\nCT#91e\nCP-210030\n0521\n1\nPartial failure handling support over N4\n17.0.0\n2021-06\nCT#92e\nCP-211070\n0543\n1\nEssential Clarification on PDR Provisioning and 2-Steps Packet Matching\n17.1.0\n2021-06\nCT#92e\nCP-211025\n0545\n3\nControl of Start and Stop Usage Measurement for a PFCP session\n17.1.0\n2021-06\nCT#92e\nCP-211029\n0554\n2\nSupport of L2TP\n17.1.0\n2021-06\nCT#92e\nCP-211031\n0535\n2\nUL packet buffering during EAS relocation\n17.1.0\n2021-06\nCT#92e\nCP-211033\n0536\n4\nSupport of thresholds in ATSSS\n17.1.0\n2021-06\nCT#92e\nCP-211033\n0537\n4\nSteering Mode Indicator\n17.1.0\n2021-06\nCT#92e\nCP-211033\n0540\n1\nSupport of MA PDU with 3GPP access connected to EPC and Non-3GPP access connected to 5GC\n17.1.0\n2021-06\nCT#92e\nCP-211033\n0551\n1\nPer QoS Flow Performance Measurement\n17.1.0\n2021-06\nCT#92e\nCP-211035\n0529\n-\nGeneralization Time Sensitive Communication to other than IEEE TSN\n17.1.0\n2021-06\nCT#92e\nCP-211035\n0530\n-\nExternal time and Time domain terms\n17.1.0\n2021-06\nCT#92e\nCP-211035\n0548\n1\nTerminology of the Time Sensitive Communication MIC and Bridge ID\n17.1.0\n2021-06\nCT#92e\nCP-211035\n0549\n1\nUE-UE communication for TSC\n17.1.0\n2021-06\nCT#92e\nCP-211042\n0546\n-\nEditorial Corrections\n17.1.0\n2021-06\nCT#92e\nCP-211042\n0547\n-\nCorrection to interface type value\n17.1.0\n2021-06\nCT#92e\nCP-211043\n0544\n2\nPFCP Session Set Modification to restore PFCP Sessions\n17.1.0\n2021-06\nCT#92e\nCP-211046\n0539\n1\nSimultaneous change of Branching Point or UL CL and additional PSA\n17.1.0\n2021-06\nCT#92e\nCP-211059\n0532\n1\nSMF and UPF behaviour in SSET / MAPS cases\n17.1.0\n2021-09\nCT#93e\nCP-212068\n0575\n1\nA\nIEEE 802.1AS-2020 reference update\n17.2.0\n2021-09\nCT#93e\nCP-212027\n0556\n1\nF\nCorrection on references\n17.2.0\n2021-09\nCT#93e\nCP-212027\n0561\n1\nB\nL2TP Corrections\n17.2.0\n2021-09\nCT#93e\nCP-212027\n0562\n1\nB\nLNS Address\n17.2.0\n2021-09\nCT#93e\nCP-212038\n0557\n1\nB\nPMF address information per QoS flow\n17.2.0\n2021-09\nCT#93e\nCP-212038\n0563\n2\nB\nHandling of PMF Message with UE Assistance Data\n17.2.0\n2021-09\nCT#93e\nCP-212031\n0564\n-\nB\nEdge Relocation using EAS IP address Replacement\n17.2.0\n2021-09\nCT#93e\nCP-212031\n0565\n1\nB\nEAS Discovery procedure with Local DNS Server/Resolver\n17.2.0\n2021-09\nCT#93e\nCP-212031\n0566\n-\nB\nDirect Reporting of QoS monitoring events to Local NEF or AF\n17.2.0\n2021-09\nCT#93e\nCP-212044\n0558\n-\nF\n5GS User Plane Node\n17.2.0\n2021-09\nCT#93e\nCP-212044\n0569\n1\nB\nSNSSAI Update after EPS to 5GS Handover\n17.2.0\n2021-09\nCT#93e\nCP-212044\n0570\n1\nF\nPartial Failure Information\n17.2.0\n2021-09\nCT#93e\nCP-212044\n0571\n1\nB\nAdd SUPI, GPSI, and PEI to User ID\n17.2.0\n2021-09\nCT#93e\nCP-212044\n0572\n1\nF\nPredefined Rule Name\n17.2.0\n2021-09\nCT#93e\nCP-212035\n0559\n1\nB\nProtocol impact on N4mb for 5G MBS\n17.2.0\n2021-09\nCT#93e\nCP-212040\n0573\n1\nB\nIntroduction of TSCTSF and other stage2 and 3 alignments\n17.2.0\n2021-09\nCT#93e\nEditorial corrections\n17.2.1\n2021-12\nCT#94e\nCP-213097\n0560\n2\nB\nProtocol impact on N4 for 5G MBS\n17.3.0\n2021-12\nCT#94e\nCP-213097\n0587\n1\nF\n5MBS corrections\n17.3.0\n2021-12\nCT#94e\nCP-213093\n0578\n1\nF\nReference to UPF service specification\n17.3.0\n2021-12\nCT#94e\nCP-213099\n0579\n2\nB\nEnabling and disabling the adjustment of DL traffic steering rules\n17.3.0\n2021-12\nCT#94e\nCP-213099\n0580\n1\nB\nUPF behaviour of setting source and destination addresses of PMF message\n17.3.0\n2021-12\nCT#94e\nCP-213099\n0581\n1\nB\nCondition of Inclusion of Threshold Values IE and Steering Mode Indicator IE\n17.3.0\n2021-12\nCT#94e\nCP-213090\n0582\n2\nB\nPer Slice UP Resource Allocatoin and Usage Report\n17.3.0\n2021-12\nCT#94e\nCP-213090\n0583\n2\nB\nPer Slice UE IP Address Usage Report\n17.3.0\n2021-12\nCT#94e\nCP-213090\n0584\n2\nB\nAdding S-NSSAI as a factor in managing UPF resources\n17.3.0\n2021-12\nCT#94e\nCP-213101\n0585\n-\nF\nUpdates for Bridge/User plane Node ID configuration\n17.3.0\n2021-12\nCT#94e\nCP-213089\n0589\n1\nF\nOuter Header Removal\n17.3.0\n2021-12\nCT#94e\nCP-213129\n0590\n1\nF\nUsage Reporting for Monitoring Time\n17.3.0\n2021-12\nCT#94e\nCP-213125\n0591\n-\nF\nTraffic usage reporting on Redundant Transmission at transport layer\n17.3.0\n2022-03\nCT#95e\nCP-220027\n0599\n1\nB\nUE IP allocation in CP function with SSET and MPAS\n17.4.0\n2022-03\nCT#95e\nCP-220027\n0602\n2\nF\nMissing Definition for Tunnel Password IE\n17.4.0\n2022-03\nCT#95e\nCP-220031\n0610\n-\nB\nIP Address and Port number Replacement IE in EAS Discovery procedure with Local DNS Server/Resolver\n17.4.0\n2022-03\nCT#95e\nCP-220035\n0592\n1\nF\nClarification to the MBS Session N4 Information\n17.4.0\n2022-03\nCT#95e\nCP-220035\n0595\n1\nF\nAssociated QoS Flow\n17.4.0\n2022-03\nCT#95e\nCP-220035\n0597\n-\nB\nLocation dependent MBS service\n17.4.0\n2022-03\nCT#95e\nCP-220035\n0603\n-\nF\nIncorrect IE Type Value - MBS Session N4 Information IE\n17.4.0\n2022-03\nCT#95e\nCP-220035\n0606\n-\nB\nPFCP Node related messages supported over N4mb\n17.4.0\n2022-03\nCT#95e\nCP-220035\n0607\n1\nB\nMapping MBS QoS Flows to Associated QoS Flows\n17.4.0\n2022-03\nCT#95e\nCP-220035\n0608\n1\nB\nUser Plane (In)Activity Detection and Reporting over N4mb\n17.4.0\n2022-03\nCT#95e\nCP-220037\n0600\n1\nB\nReporting of the restart of a GTP-U entity\n17.4.0\n2022-03\nCT#95e\nCP-220046\n0600\n1\nB\nClarification on Allocation of Access Specific UDP Ports or MAC Addresses\n17.4.0\n2022-03\nCT#95e\nCP-220086\n0593\n-\nD\nEditorial corrections\n17.4.0\n2022-03\nCT#95e\nCP-220086\n0596\n1\nF\nCorrecting PFCP Associations setup description\n17.4.0\n2022-03\nCT#95e\nCP-220086\n0598\n-\nF\nCVLAN tag removal from DL traffic received on N6\n17.4.0\n2022-03\nCT#95e\nCP-220086\n0604\n-\nF\nCorrections to IE Definitions\n17.4.0\n2022-03\nCT#95e\nCP-220086\n0605\n1\nF\nReturn Node ID in PFCP Session Report Response\n17.4.0\n2022-03\nCT#95e\nCP-220086\n0609\n1\nF\nPFCP session related procedures apply to 5GC\n17.4.0\n2022-03\nCT#95e\nCP-220086\n0611\n2\nB\nPaging Policy Differentiation\n17.4.0\n2022-03\nCT#95e\nCP-220086\n0612\n1\nF\nAdditional Usage Reports Information\n17.4.0\n2022-03\nCT#95e\nCP-220086\n0613\n1\nB\nRedirect Port Information\n17.4.0\n2022-06\nCT#96\nCP-221023\n0622\n1\nB\nTransport Level Marking information for PFCP sessions over N4mb\n17.5.0\n2022-06\nCT#96\nCP-221023\n0621\n1\nB\nMBS Session Identifier\n17.5.0\n2022-06\nCT#96\nCP-221023\n0617\n1\nB\nRestoration procedure for MB-UPF restart\n17.5.0\n2022-06\nCT#96\nCP-221023\n0616\n-\nF\nIncorrect references to N19mb and Nmb9 reference points\n17.5.0\n2022-06\nCT#96\nCP-221023\n0615\n-\nB\nDL MBS QFI Sequence Number in PDU Session Container\n17.5.0\n2022-06\nCT#96\nCP-221024\n0644\n1\nB\nOuter Header Removal for PSA UPF\n17.5.0\n2022-06\nCT#96\nCP-221024\n0637\n-\nF\nMB-UPF failure without restart\n17.5.0\n2022-06\nCT#96\nCP-221024\n0636\n-\nF\n3GPP Interface Type extensions for MBS\n17.5.0\n2022-06\nCT#96\nCP-221024\n0635\n-\nF\nCP and UP function features supported over N4mb\n17.5.0\n2022-06\nCT#96\nCP-221024\n0634\n-\nF\nN4mb requirements for PFCP Node Related messages\n17.5.0\n2022-06\nCT#96\nCP-221024\n0633\n-\nF\nN4mb requirements for PFCP Session Related messages\n17.5.0\n2022-06\nCT#96\nCP-221034\n0642\n1\nB\nDNS Query Filter Encoding\n17.5.0\n2022-06\nCT#96\nCP-221035\n0630\n1\nF\nTwo N3 UL CN tunnels information\n17.5.0\n2022-06\nCT#96\nCP-221045\n0619\n1\nF\nPFCP Node ID\n17.5.0\n2022-06\nCT#96\nCP-221045\n0618\n1\nF\nFailure to restore a PFCP session at UPF restart\n17.5.0\n2022-06\nCT#96\nCP-221045\n0614\n3\nF\nNode Report Type value for PFCP node reports not defined by 3GPP\n17.5.0\n2022-06\nCT#96\nCP-221046\n0646\n-\nF\nUE IP address\n17.5.0\n2022-06\nCT#96\nCP-221046\n0645\n1\nF\nCorrections on QoS Monitoring per QoS flow\n17.5.0\n2022-06\nCT#96\nCP-221046\n0643\n-\nF\nCorrections on PFCP Session Deletion Response with Additional Usage Report Info\n17.5.0\n2022-06\nCT#96\nCP-221046\n0641\n-\nF\nIncomplete CR implementation on Partial failure handling support over N4\n17.5.0\n2022-06\nCT#96\nCP-221046\n0632\n1\nF\nFormat of Tunnel Password\n17.5.0\n2022-06\nCT#96\nCP-221046\n0629\n1\nF\nClarfication on the Threshold and Quota\n17.5.0\n2022-06\nCT#96\nCP-221046\n0628\n1\nF\nNumber of Reports and Monitoring Time/Measurement Before QoS Enforcement\n17.5.0\n2022-06\nCT#96\nCP-221046\n0627\n-\nF\nResolving editor's note for IPUPS\n17.5.0\n2022-06\nCT#96\nCP-221046\n0626\n1\nF\nClarification on reactivation of an inactive URR\n17.5.0\n2022-06\nCT#96\nCP-221046\n0625\n-\nF\nUsage Report at expiry of the Quota Validity Timer\n17.5.0\n2022-06\nCT#96\nCP-221046\n0624\n-\nF\nPacket Rate for N4\n17.5.0\n2022-06\nCT#96\nCP-221046\n0623\n1\nF\nEssential Correction on the support of the SMF Set\n17.5.0\n2022-06\nCT#96\nCP-221050\n0631\n1\nF\nN9 forwarding tunnel between ULCLs controlled by I-SMF\n17.5.0\n2022-06\nCT#96\nCP-221065\n0620\n2\nA\nTime domain identification in the clock drift reporting\n17.5.0\n2022-06\nCT#96\nCP-221067\n0640\n-\nA\nPDRs and Traffic Endpoints in PFCP Session Modification Request and Response\n17.5.0\n2022-09\nCT#97e\nCP-222031\n0649\n2\nF\nOuter header creation\n17.6.0\n2022-09\nCT#97e\nCP-222031\n0650\n2\nF\nClarifications to Add MBS Unicast Parameters\n17.6.0\n2022-09\nCT#97e\nCP-222031\n0651\n4\nF\nPLLSSM and FSSM flags\n17.6.0\n2022-09\nCT#97e\nCP-222031\n0653\n-\nF\nIngress address over N6mb or Nmb9\n17.6.0\n2022-09\nCT#97e\nCP-222031\n0655\n1\nF\nNo URR support over N4mb\n17.6.0\n2022-09\nCT#97e\nCP-222031\n0656\n-\nF\nFSSM Flag\n17.6.0\n2022-09\nCT#97e\nCP-222031\n0658\n-\nF\nUnicast transport is used over Nmb9\n17.6.0\n2022-09\nCT#97e\nCP-222041\n0652\n1\nF\nCorrections on applicability of Flags\n17.6.0\n2022-09\nCT#97e\nCP-222041\n0654\n1\nF\nCorrections to FQ-CSID node types\n17.6.0\n2022-09\nCT#97e\nCP-222041\n0660\n-\nD\nRemove duplicate tables\n17.6.0\n2022-09\nCT#97e\nCP-222042\n0647\n1\nF\nUplink packets buffering during EAS relocation\n17.6.0\n2022-12\nCT#98e\nCP-223036\n0665\n1\nF\nMBS Session Deactivation and (Re)activation\n17.7.0\n2022-12\nCT#98e\nCP-223036\n0667\n-\nF\nIncorrect implementation of CR 29.244 #0650\n17.7.0\n2022-12\nCT#98e\nCP-223036\n0668\n-\nF\nIncomplete implementation of CR 29.244 #0658\n17.7.0\n2022-12\nCT#98e\nCP-223036\n0669\n-\nF\nN4 requirements for MBS session deactivation and reactivation\n17.7.0\n2022-12\nCT#98e\nCP-223059\n0663\n3\nF\nClarifications and corrections on Time Sensitive Communication\n17.7.0\n2022-12\nCT#98e\nCP-223059\n0666\n1\nF\nEssential clarification on Gate Status\n17.7.0\n2022-12\nCT#98e\nCP-223043\n0670\n2\nF\nL2TP tunnel failure cause\n18.0.0\n2022-12\nCT#98e\nAstyle of header 7.5.4.10 corrected to H4.\n18.0.1\n2023-03\nCT#99\nCP-230092\n0681\n1\nA\nQoS monitoring measurement failure\n18.1.0\n2023-03\nCT#99\nCP-230040\n0688\n1\nB\nSupport IPv6 Prefix Delegation in 5GS\n18.1.0\n2023-03\nCT#99\nCP-230043\n0687\n2\nB\nSupport of integration with IETF Deterministic Networking\n18.1.0\n2023-03\nCT#99\nCP-230044\n0682\n1\nB\nMetadata for Service Function Chain\n18.1.0\n2023-03\nCT#99\nCP-230045\n0674\n1\nB\nIntroduction of MPQUIC Steering Functionality\n18.1.0\n2023-03\nCT#99\nCP-230045\n0678\n-\nB\nIntroducing the Redundant steering mode\n18.1.0\n2023-03\nCT#99\nCP-230049\n0662\n1\nF\nOverhaul of 5MBS description in TS 29.244\n18.1.0\n2023-03\nCT#99\nCP-230049\n0671\n2\nF\nMutually exclusive flags in Apply Action IE\n18.1.0\n2023-03\nCT#99\nCP-230061\n0686\n1\nF\nClarification of the Time Sensitive Communications and Time Synchronization\n18.1.0\n2023-03\nCT#99\nCP-230069\n0689\n-\nF\nSupport of RAT Type with NR_REDCAP\n18.1.0\n2023-03\nCT#99\nCP-230097\n0677\n1\nF\nIE Name Corrections to Framed Routing\n18.1.0\n2023-06\nCT#100\nCP-231035\n0725\n2\nB\nDirect reporting of TSC Management Information from UPF to TSN AF or TSCTSF\n18.2.0\n2023-06\nCT#100\nCP-231036\n0697\n2\nB\nN6 Jitter Measurement and Reporting and Marking End of Data Burst Indication\n18.2.0\n2023-06\nCT#100\nCP-231044\n0701\n1\nB\nUP Function Features for Time Sensitive Communication, Time Synchronization,Time Sensitive Networking and Deterministic Networking\n18.2.0\n2023-06\nCT#100\nCP-231044\n0702\n1\nB\nSupport of integration with IETF Deterministic Networking\n18.2.0\n2023-06\nCT#100\nCP-231045\n0706\n2\nF\nService Function Chaining Support\n18.2.0\n2023-06\nCT#100\nCP-231046\n0698\n1\nB\nMA-PDU with non-3GPP leg connected to ePDG/EPC while 3GPP leg connected to 5GC\n18.2.0\n2023-06\nCT#100\nCP-231046\n0713\n1\nB\nSupport of MPQUIC Steering Functionality\n18.2.0\n2023-06\nCT#100\nCP-231046\n0715\n1\nB\nSupport of Redundant of steering mode\n18.2.0\n2023-06\nCT#100\nCP-231046\n0719\n1\nB\nCorrect IE Name in Annex E\n18.2.0\n2023-06\nCT#100\nCP-231046\n0720\n1\nB\nSMF decision of steering parameters\n18.2.0\n2023-06\nCT#100\nCP-231057\n0696\n1\nB\nSupport of high data rate low latency services, XR and interactive media services\n18.2.0\n2023-06\nCT#100\nCP-231057\n0721\n2\nB\nECN marking for L4S\n18.2.0\n2023-06\nCT#100\nCP-231057\n0722\n1\nB\nPDU Set based QoS handling\n18.2.0\n2023-06\nCT#100\nCP-231057\n0723\n-\nB\nGeneralization of QoS monitoring control description\n18.2.0\n2023-06\nCT#100\nCP-231057\n0724\n1\nB\nCongestion information monitoring\n18.2.0\n2023-06\nCT#100\nCP-231067\n0703\n1\nF\nQoS Monitoring Reporting Type\n18.2.0\n2023-06\nCT#100\nCP-231067\n0704\n1\nF\nClarification to the Local Ingress Tunnel IE\n18.2.0\n2023-06\nCT#100\nCP-231067\n0726\n1\nF\nSubstitute FAR when exhausting a Volume Quota or a Time Quota\n18.2.0\n2023-06\nCT#100\nCP-231083\n0728\n2\nA\nCorrection the format of NF Instance Id\n18.2.0\n2023-06\nCT#100\nCP-231089\n0718\n1\nA\nExtended Buffering Support in UPF\n18.2.0\n2023-09\nCT#101\nCP-232038\n0733\n2\nB\nReporting suggestion information for QoS flow related QoS monitoring\n18.3.0\n2023-09\nCT#101\nCP-232040\n0734\n-\nB\nTL-Container for the support of TSN enabled Transport Network\n18.3.0\n2023-09\nCT#101\nCP-232041\n0742\n1\nB\nRemove the Editor's note on Redundant steering mode for GBR traffic\n18.3.0\n2023-09\nCT#101\nCP-232043\n0730\n1\nB\nUpdate N4 Session modification procedure to support network slice replacement feature\n18.3.0\n2023-09\nCT#101\nCP-232043\n0731\n1\nB\nUser plane inactivity detection update\n18.3.0\n2023-09\nCT#101\nCP-232051\n0741\n3\nB\nClarification on the 5G VN Group Communication used for PIN\n18.3.0\n2023-09\nCT#101\nCP-232054\n0735\n1\nB\nData rate monitoring\n18.3.0\n2023-09\nCT#101\nCP-232054\n0736\n-\nF\nCorrection to N6 Jitter measurement\n18.3.0\n2023-09\nCT#101\nCP-232054\n0737\n1\nB\nPDU Set QoS handling during Xn and N2 Handover\n18.3.0\n2023-09\nCT#101\nCP-232054\n0738\n-\nF\nRemoval of UPF exposure of QoS Notification Control\n18.3.0\n2023-09\nCT#101\nCP-232054\n0739\n2\nB\nExposure of congestion information\n18.3.0\n2023-09\nCT#101\nCP-232054\n0744\n1\nB\nRemove the Editor's Note of End of Data Burst Marking\n18.3.0\n2023-09\nCT#101\nCP-232058\n0740\n1\nF\nPFCP Error Handling Corrections\n18.3.0\n2023-12\nCT#102\nCP-233032\n0771\n1\nB\nIndication of QoS Flow associated with the default QoS Rule\n18.4.0\n2023-12\nCT#102\nCP-233032\n0776\n-\nF\nCorrection on Reporting Urgency\n18.4.0\n2023-12\nCT#102\nCP-233038\n0750\n1\nB\nPFCP extensions for HR-SBO PDU sessions\n18.4.0\n2023-12\nCT#102\nCP-233041\n0767\n-\nB\nTL-Containers in PFCP Session Modification/Deletion Request/Response\n18.4.0\n2023-12\nCT#102\nCP-233042\n0777\n1\nF\nCorrection on User Plane Node ID\n18.4.0\n2023-12\nCT#102\nCP-233043\n0752\n-\nF\nIncorrect implementation of CR 29.244 #0742\n18.4.0\n2023-12\nCT#102\nCP-233044\n0757\n-\nD\nEditorial corrections\n18.4.0\n2023-12\nCT#102\nCP-233044\n0760\n1\nF\nEthernet PDU Session Information\n18.4.0\n2023-12\nCT#102\nCP-233044\n0761\n1\nF\nAveraging Window for Session AMBR on N4\n18.4.0\n2023-12\nCT#102\nCP-233044\n0762\n1\nF\nClarification for C/S-TAG operation\n18.4.0\n2023-12\nCT#102\nCP-233044\n0770\n-\nF\nFlow description within MBS Service Information if MBS data are transported in IP tunnel toward MB-UPF\n18.4.0\n2023-12\nCT#102\nCP-233046\n0781\n1\nF\nUser plane inactivity timer update from SMF towards UPF\n18.4.0\n2023-12\nCT#102\nCP-233047\n0759\n2\nB\nUpdate to support the VN group communication without N6-based forwarding\n18.4.0\n2023-12\nCT#102\nCP-233053\n0749\n1\nB\nSMF Decision of PDU Set Handling Activation\n18.4.0\n2023-12\nCT#102\nCP-233053\n0753\n2\nB\nTraffic steering to an L4S enabled QoS flow\n18.4.0\n2023-12\nCT#102\nCP-233053\n0754\n-\nB\nPDU Set QoS handling during Xn and N2 Handover\n18.4.0\n2023-12\nCT#102\nCP-233053\n0755\n-\nB\nECN marking during Xn and N2 Handover\n18.4.0\n2023-12\nCT#102\nCP-233053\n0756\n1\nB\nProtocol Description for End of Data Burst marking\n18.4.0\n2023-12\nCT#102\nCP-233053\n0768\n-\nF\nPer QoS flow data rate monitoring\n18.4.0\n2023-12\nCT#102\nCP-233053\n0769\n3\nB\nProtocol Description\n18.4.0\n2023-12\nCT#102\nCP-233053\n0772\n-\nB\nECN marking during PDU session establishment procedure\n18.4.0\n2023-12\nCT#102\nCP-233054\n0751\n-\nB\nQoS differentiation for UEs behind RG\n18.4.0\n2023-12\nCT#102\nCP-233056\n0774\n1\nF\nPopulating the recovery timestamp of the remote GTP-U entity\n18.4.0\n2023-12\nCT#102\nCP-233056\n0782\n-\nF\nSource/Destination Interface Type for Indirect DL Data Forwarding Tunnels\n18.4.0\n2024-03\nCT#103\nCP-240054\n0817\n1\nA\nCreate BAR in the PFCP Session Modification Request\n18.5.0\n2024-03\nCT#103\nCP-240063\n0831\n1\nA\nRAT TYPE update for NR satellite access\n18.5.0\n2024-03\nCT#103\nCP-240064\n0806\n1\nA\nATSSS between EPC and 5GC accesses\n18.5.0\n2024-03\nCT#103\nCP-240029\n0766\n6\nB\nDL data notifications during Extended Buffering - Option1\n18.5.0\n2024-03\nCT#103\nCP-240029\n0795\n2\nB\nReporting the DL data size over N4\n18.5.0\n2024-03\nCT#103\nCP-240029\n0809\n1\nB\nSupport of subsequent DL data notifications while extended buffering\n18.5.0\n2024-03\nCT#103\nCP-240031\n0823\n1\nB\nEAS discovery procedure with V-EASDF using IP replacement mechanism for supporting HR-SBO\n18.5.0\n2024-03\nCT#103\nCP-240031\n0824\n-\nB\nSupport of DL Session AMBR in HR-SBO session\n18.5.0\n2024-03\nCT#103\nCP-240031\n0825\n2\nB\nSupport of DNS traffic routing in multiple DNN networks with the same IP address range\n18.5.0\n2024-03\nCT#103\nCP-240033\n0832\n2\nB\nAdd S-NSSAI and DNN information in Session Establishment procedure\n18.5.0\n2024-03\nCT#103\nCP-240034\n0785\n1\nB\nUpdate to Fields of PDU Set Information\n18.5.0\n2024-03\nCT#103\nCP-240034\n0787\n1\nB\nNew GTP-U PDU Set Information Container extension header\n18.5.0\n2024-03\nCT#103\nCP-240034\n0789\n-\nB\nCongestion information and data rate monitoring\n18.5.0\n2024-03\nCT#103\nCP-240034\n0790\n1\nB\nEncoding of UL/DL Congestion Information\n18.5.0\n2024-03\nCT#103\nCP-240034\n0791\n1\nF\nRemoval of Editor's note on ECN marking\n18.5.0\n2024-03\nCT#103\nCP-240034\n0792\n-\nF\nCorrection of the QER Indications\n18.5.0\n2024-03\nCT#103\nCP-240034\n0793\n1\nF\nCorrections to Protocol Description\n18.5.0\n2024-03\nCT#103\nCP-240034\n0794\n-\nB\nExtensions to Protocol Description requested by SA4\n18.5.0\n2024-03\nCT#103\nCP-240034\n0808\n2\nF\nThe minimum and the maximum measurement result\n18.5.0\n2024-03\nCT#103\nCP-240034\n0811\n2\nB\nMonitoring averaging window for Non-GBR QoS flows\n18.5.0\n2024-03\nCT#103\nCP-240034\n0814\n-\nB\nPDU Set based handling clarification\n18.5.0\n2024-03\nCT#103\nCP-240034\n0829\n-\nB\nSupport of Network Exposure of 5GS information\n18.5.0\n2024-03\nCT#103\nCP-240035\n0821\n-\nD\nEditorial correction of MBS Session N4mb Information IE\n18.5.0\n2024-03\nCT#103\nCP-240039\n0796\n1\nF\nIncorrect references\n18.5.0\n2024-03\nCT#103\nCP-240040\n0799\n-\nF\nHandling of GBR traffic using the Redundant steering mode\n18.5.0\n2024-03\nCT#103\nCP-240040\n0800\n-\nF\nCorrections to the MPQUIC steering functionality\n18.5.0\n2024-03\nCT#103\nCP-240040\n0801\n-\nF\nMiscellaneous ATSSS corrections\n18.5.0\n2024-03\nCT#103\nCP-240040\n0812\n1\nB\nClarifications on interworking with EPS\n18.5.0\n2024-03\nCT#103\nCP-240042\n0818\n1\nF\nUser Plane Inactivity Timer update\n18.5.0\n2024-03\nCT#103\nCP-240042\n0828\n1\nF\nSupport of slice replacement with replaced S-NSSAI on N4\n18.5.0\n2024-03\nCT#103\nCP-240053\n0802\n-\nF\nPFCP Association Release procedure with the MPAS feature\n18.5.0\n2024-03\nCT#103\nCP-240053\n0803\n1\nF\nSMF restoration procedures for SMF in an SMF set\n18.5.0\n2024-03\nCT#103\nCP-240053\n0807\n-\nF\nRemove Session Report for QoS monitoring measurement at PFCP session deletion\n18.5.0\n2024-03\nCT#103\nCP-240053\n0810\n-\nF\nFramed-Route AVP\n18.5.0\n2024-03\nCT#103\nCP-240053\n0834\n1\nF\nClarification presence of Bridge ID and Router ID\n18.5.0\n2024-06\nCT#104\nCP-241029\n0858\n-\nF\nSupport of NR_EREDCAP\n18.6.0\n2024-06\nCT#104\nCP-241029\n0855\n1\nF\nActivation of DL data size reporting for support of MT-SDT\n18.6.0\n2024-06\nCT#104\nCP-241031\n0841\n1\nF\nHR-SBO indication\n18.6.0\n2024-06\nCT#104\nCP-241031\n0846\n1\nB\nUE source IP address mapping for HR-SBO sessions with overlapping IP addresses\n18.6.0\n2024-06\nCT#104\nCP-241031\n0847\n1\nB\nN6 tunneling between V-UPF and V-EASDF for HR-SBO PDU sessions with overlapping IP addresses\n18.6.0\n2024-06\nCT#104\nCP-241049\n0839\n-\nF\nDefinition of congestion information for exposure\n18.6.0\n2024-06\nCT#104\nCP-241049\n0838\n1\nF\nUPF reports for Congestion information and Data Rate monitoring\n18.6.0\n2024-06\nCT#104\nCP-241049\n0840\n1\nF\nResolving Editor's notes on EDB Indication and RTP Header Extension Type\n18.6.0\n2024-06\nCT#104\nCP-241049\n0849\n1\nF\nDescription of IEs in congestion information monitoring\n18.6.0\n2024-06\nCT#104\nCP-241049\n0851\n1\nF\nUpdate the description of PDU set marking\n18.6.0\n2024-06\nCT#104\nCP-241050\n0853\nF\nCorrections on IE definition\n18.6.0\n2024-06\nCT#104\nCP-241050\n0837\n1\nF\nPFCP session deletion when new SMF takes over the PDU session\n18.6.0\n2024-06\nCT#104\nCP-241050\n0844\n1\nF\nUser Plane Inactivity Timer after the User Plane Inactivity Report is sent\n18.6.0\n2024-06\nCT#104\nCP-241050\n0852\n1\nF\nAdd MB-SMF and MB-UPF to NodeID over N4mb\n18.6.0\n2024-06\nCT#104\nCP-241050\n0854\n1\nF\nClarification on Downlink data delivery status feature\n18.6.0\n2024-06\nCT#104\nCP-241050\n0856\n1\nF\nClarification on the usage of TERMR\n18.6.0\n2024-06\nCT#104\nCP-241050\n0859\n1\nF\nCorrection on Ethernet Packet Filter\n18.6.0\n2024-06\nCT#104\nCP-241050\n0860\n2\nF\nInterface Type for 5G VN Internal\n18.6.0\n2024-06\nCT#104\nCP-241054\n0845\n1\nF\nUpdating User Plane Inactivity Timer\n18.6.0\n2024-06\nCT#104\nCP-241070\n0797\n1\nB\nMBS data usage reporting over N4mb for MBS charging\n18.6.0\n2024-06\nCT#104\nCP-241070\n0798\n1\nB\nMBS data usage reporting over N4 for MBS charging\n18.6.0\n2024-09\nCT#105\nCP-242041\n0862\n1\nF\nRemoval of MBS Flow Based charging\n18.7.0\n2024-09\nCT#105\nCP-242051\n0864\n-\nF\nCorrection on UPF L4S\n18.7.0\n2024-09\nCT#105\nCP-242053\n0863\n-\nF\nCorrection to the PFCPSEReq-Flags IE\n18.7.0\n2024-09\nCT#105\nCP-242053\n0865\n1\nF\nPath Failure Handling\n18.7.0\n2024-09\nCT#105\nCP-242053\n0866\n1\nF\nCorrection on GTP-U Extension Header Deletion field\n18.7.0\n2024-12\nCT#106\nCP-243022\n0904\n1\nF\nSupport of Trace Reporting Consumer URI\n18.8.0\n2024-12\nCT#106\nCP-243022\n0905\n2\nF\nSupport of UE level measurements configuration\n18.8.0\n2024-12\nCT#106\nCP-243029\n0872\n1\nF\nCorrection on End of Data Burst Indication\n18.8.0\n2025-03\nCT#107\nCP-250023\n0941\n1\nF\nFunction description on UE level measurement\n18.9.0",
      "chunk_type": "requirement",
      "cross_references": [
        "ts_23.214_clause_4.3.4",
        "clause_6.2.3",
        "ts_29.303_clause_5.8",
        "ts_29.303_clause_5.12.2",
        "ts_23.214_clause_5.12.5",
        "ts_23.501_clause_5.34.6",
        "clause_7.5",
        "clause_7.4",
        "clause_5.3",
        "ts_23.502_clause_4.23.9.1",
        "ts_23.502_clause_4.23.9.2",
        "clause_7.5.7.1",
        "ts_23.502_clause_4.23.9.3",
        "ts_23.502_clause_4.23.9.4",
        "ts_29.502_clause_6.1.8",
        "clause_5.11.2",
        "ts_23.502_clause_4.23.9.5",
        "clause_5.11.3",
        "ts_29.502_clause_5.2.2.3.21",
        "clause_5.2",
        "clause_5.24.3",
        "table_8.2.245-1",
        "table_8.2.245-2",
        "table_8.1.2",
        "figure_8.2.245-1",
        "ts_23.502_figure_4.23.9.1-1",
        "ts_23.502_figure_4.3.4.3-1",
        "ts_23.502_figure_4.23.9.4-1",
        "ts_32.422",
        "ts_28.558",
        "ts_29.303",
        "ts_23.214",
        "ts_29.274",
        "ts_23.501",
        "ts_29.502",
        "ts_23.502",
        "ts_24.193",
        "ts_14.1",
        "ts_14.2",
        "ts_15.5",
        "ts_16.1",
        "ts_16.2",
        "ts_16.4",
        "ts_16.6",
        "ts_29.820",
        "ts_17.2",
        "ts_17.5",
        "ts_29.244"
      ]
    }
  ]
}