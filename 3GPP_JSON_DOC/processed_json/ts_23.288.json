{
  "metadata": {
    "specification_id": "ts_23.288",
    "version": "18.9.0",
    "title": "3GPP TS 23.288",
    "file_path": "/content/drive/MyDrive/RAG_thesis/data/23_series/23288-i90/23288-i90.docx"
  },
  "export_info": {
    "export_date": "2025-07-26T09:30:46.488142",
    "total_chunks": 231
  },
  "chunks": [
    {
      "chunk_id": "ts_23.288_1",
      "section_id": "1",
      "section_title": "Scope",
      "content": "The present document defines the Stage 2 architecture enhancements for 5G System (5GS) to support network data analytics services in 5G Core network.",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.288_2",
      "section_id": "2",
      "section_title": "References",
      "content": "The following documents contain provisions which, through reference in this text, constitute provisions of the present document.\n-\tReferences are either specific (identified by date of publication, edition number, version number, etc.) or non‑specific.\n-\tFor a specific reference, subsequent revisions do not apply.\n-\tFor a non-specific reference, the latest version applies. In the case of a reference to a 3GPP document (including a GSM document), a non-specific reference implicitly refers to the latest version of that document in the same Release as the present document.\n[1]\t3GPP TR 21.905: \"Vocabulary for 3GPP Specifications\".\n[2]\t3GPP TS 23.501: \"System Architecture for the 5G System; Stage 2\".\n[3]\t3GPP TS 23.502: \"Procedures for the 5G System; Stage 2\".\n[4]\t3GPP TS 23.503: \"Policy and Charging Control Framework for the 5G System; Stage 2\".\n[5]\tVoid.\n[6]\t3GPP TS 28.532: \"Management and orchestration; Generic management services\".\n[7]\t3GPP TS 28.550: \"Management and orchestration; Performance Assurance\".\n[8]\t3GPP TS 28.552: \"Management and orchestration; 5G performance measurements\".\n[9]\t3GPP TS 28.545: \"Management and orchestration; Fault Supervision (FS)\".\n[10]\t3GPP TS 28.554: \"Management and orchestration; 5G end to end Key Performance Indicators (KPI)\".\n[11]\tITU‑T Recommendation P.1203.3: \"Parametric bitstream-based quality assessment of progressive download and adaptive audiovisual streaming services over reliable transport - Quality integration module\".\n[12]\t3GPP TS 38.215: \"NR; Physical layer measurements\".\n[13]\tVoid.\n[14]\t3GPP TS 38.331: \"NR; Radio Resource Control (RRC) protocol specification\".\n[15]\t3GPP TS 36.331: \"Evolved Universal Terrestrial Radio Access (E-UTRA); Radio Resource Control (RRC); Protocol specification\".\n[16]\t3GPP TS 38.413: \"NG-RAN; NG Application Protocol (NGAP)\".\n[17]\t3GPP TS 29.244: \"Interface between the Control Plane and the User Plane Nodes\".\n[18]\t3GPP TS 29.510: \"5G System; Network function repository services; Stage 3\".\n[19]\t3GPP TS 28.533: \"Management and orchestration; Architecture framework\".\n[20]\t3GPP TS 37.320: \"Radio measurement collection for Minimization of Drive Tests (MDT); Overall description; stage 2\".\n[21]\t3GPP TS 28.201: \"Charging management; Network slice performance and analytics charging in the 5G System (5GS); stage 2\".\n[22]\t3GPP TS 28.541: \"Management and orchestration; 5G Network Resource Model (NRM); Stage 2 and stage 3\".\n[23]\t3GPP TS 24.501: \"Non-Access-Stratum (NAS) protocol for 5G System (5GS); Stage 3\".\n[24]\t3GPP TS 28.310: \"Management and orchestration; Energy efficiency of 5G\".\n[25]\t3GPP TS 29.518: \"5G System; Access and Mobility Management Services; Stage 3\".\n[26]\t3GPP TS 29.503: \"Unified Data Management Services; Stage 3\".\n[27]\t3GPP TS 26.114: \"IP Multimedia Subsystem (IMS); Multimedia Telephony; Media handling and interaction\".\n[28]\t3GPP TS 26.247: \"Transparent end-to-end Packet-switched Streaming Service (PSS); Progressive Download and Dynamic Adaptive Streaming over HTTP (3GP-DASH)\".\n[29]\t3GPP TS 26.118: \"Virtual Reality (VR) profiles for streaming applications\".\n[30]\t3GPP TS 26.346: \"Multimedia Broadcast/Multicast Service (MBMS); Protocols and codecs\".\n[31]\t3GPP TS 26.512: \"5G Media Streaming (5GMS); Protocols\".\n[32]\t3GPP TS 26.531: \"Data Collection and Reporting; General Description and Architecture\".\n[33]\t3GPP TS 22.261: \"Service requirements for the 5G system; Stage 1\".\n[34]\t3GPP TS 23.032: \"Universal Geographical Area Description (GAD)\".\n[35]\t3GPP TS 22.071: \"Technical Specification Group Systems Aspects; Location Services (LCS)\".\n[36]\t3GPP TS 29.508: \"5G System; Session Management Event Exposure Service; Stage 3\".\n[37]\t3GPP TS 29.572: \"5G System; Location Management Services; Stage 3\".\n[38]\tGSMA TS.06: \"IMEI Allocation and Approval Process\".\n[39]\t3GPP TS 23.273: \"5G System (5GS) Location Services (LCS); Stage 2\".\n[40]\tITU‑T Y.1540: \"Internet protocol data communication service - IP packet transfer and availability performance parameters\".\n[41]\t3GPP TS 28.622: \"Telecommunication management; Generic Network Resource Model (NRMs). Integration Reference Point (IRP): Information Service (IS)\".\n[42]\t3GPP TS 32.422: \"Subscriber and equipment trace: Trace control and configuration management\".\n[43]\t3GPP TS 26.532: \"Data Collection and Reporting; Protocols and Formats\".\n[44]\t3GPP TS 38.455: \"NG-RAN; NR Positioning Protocol A (NRPPa)\".\n[45]\t3GPP TS 28.104: \"Management and orchestration; Management Data Analytics (MDA)\".\n[46]\t3GPP TS 28.537: \"Management and orchestration; Management capabilities\".\n[47]\t3GPP TS 23.228: \"IP Multimedia Subsystem (IMS); Stage 2\".\n[48]\t3GPP TS 29.515: \"Gateway Mobile Location Services; Stage 3\".\n[49]\t3GPP TS 33.501: \"Security architecture and procedures for 5G system\".\n[50]\t3GPP TS 28.558: \"User Equipment (UE) level measurements for 5G system\".\n[51]\t3GPP TS 29.564: \"5G System; User Plane Function Services; Stage 3\".",
      "chunk_type": "general",
      "cross_references": [
        "ts_21.905",
        "ts_23.501",
        "ts_23.502",
        "ts_23.503",
        "ts_28.532",
        "ts_28.550",
        "ts_28.552",
        "ts_28.545",
        "ts_28.554",
        "ts_38.215",
        "ts_38.331",
        "ts_36.331",
        "ts_38.413",
        "ts_29.244",
        "ts_29.510",
        "ts_28.533",
        "ts_37.320",
        "ts_28.201",
        "ts_28.541",
        "ts_24.501",
        "ts_28.310",
        "ts_29.518",
        "ts_29.503",
        "ts_26.114",
        "ts_26.247",
        "ts_26.118",
        "ts_26.346",
        "ts_26.512",
        "ts_26.531",
        "ts_22.261",
        "ts_23.032",
        "ts_22.071",
        "ts_29.508",
        "ts_29.572",
        "ts_23.273",
        "ts_28.622",
        "ts_32.422",
        "ts_26.532",
        "ts_38.455",
        "ts_28.104",
        "ts_28.537",
        "ts_23.228",
        "ts_29.515",
        "ts_33.501",
        "ts_28.558",
        "ts_29.564"
      ]
    },
    {
      "chunk_id": "ts_23.288_3.1",
      "section_id": "3.1",
      "section_title": "Definitions",
      "content": "For the purposes of the present document, the terms and definitions given in TR 21.905 [1], TS 23.501 [2] and TS 23.503 [4]. A term defined in the present document takes precedence over the definition of the same term, if any, in TR 21.905 [1].\nAnalytics Accuracy Information: Represent a performance measure of an analytics ID provided by an NWDAF containing AnLF, which is composed of the number of correct predictions of the analytics ID out of all predictions and the corresponding number of samples.\nML Model Accuracy Information: Represent a performance measure of a ML Model provided by an NWDAF containing MTLF, which is composed of the number of correct predictions by the ML Model out of all predictions and the corresponding number of samples.\nAnalytics Feedback Information: Indicates that the consumer NF has taken action(s) influenced by the previously provided analytics, which may or may not affect the ground truth data.",
      "chunk_type": "definition",
      "cross_references": [
        "ts_21.905",
        "ts_23.501",
        "ts_23.503"
      ]
    },
    {
      "chunk_id": "ts_23.288_3.2",
      "section_id": "3.2",
      "section_title": "Abbreviations",
      "content": "For the purposes of the present document, the abbreviations given in TR 21.905 [1], TS 23.501 [2] and TS 23.503 [4] and the following apply. An abbreviation defined in the present document takes precedence over the definition of the same abbreviation, if any, in TR 21.905 [1].\nAI/ML\tArtificial Intelligence/Machine Learning\nDCAF\tData Collection Application Function\nFL\tFederated Learning\nRE-NWDAF\tRoaming Exchange Network Data Analytics Function",
      "chunk_type": "general",
      "cross_references": [
        "ts_21.905",
        "ts_23.501",
        "ts_23.503"
      ]
    },
    {
      "chunk_id": "ts_23.288_4.1",
      "section_id": "4.1",
      "section_title": "General",
      "content": "The NWDAF (Network Data Analytics Function) is part of the architecture specified in TS 23.501 [2] and uses the mechanisms and interfaces specified for 5GC in TS 23.501 [2] and OAM services (see clause 6.2.3.1).\nThe NWDAF may support the following functionalities:\n-\tData collection based on subscription to events provided by AMF, SMF, UPF, PCF, UDM, NSACF, AF (directly or via NEF) and OAM;\n-\tAnalytics and Data collection using the DCCF (Data Collection Coordination Function);\n-\tRetrieval of information from data repositories (e.g. from UDR via UDM for subscriber-related information or optinally via NEF(PFDF) for PFD information);\n-\tData collection of location information using LCS (finer granularity location information determined by LMF);\n-\tStorage and retrieval of information from ADRF (Analytics Data Repository Function);\n-\tAnalytics and Data collection from MFAF (Messaging Framework Adaptor Function);\n-\tRetrieval of information about NFs (e.g. from NRF for NF-related information);\n-\tOn demand provision of analytics to consumers, as specified in clause 6.\n-\tProvision of bulked data related to Analytics ID(s).\n-\tProvision of Accuracy information about Analytics ID(s).\n-\tProvision or retrieval of ML Model Accuracy Information or ML Model accuracy degradation about a ML Model.\n-\tFederated Learning.\nA single instance or multiple instances of NWDAF may be deployed in a PLMN. If multiple NWDAF instances are deployed, the architecture supports deploying the NWDAF as a central NF, as a collection of distributed NFs, or as a combination of both. If multiple NWDAF instances are deployed, an NWDAF can act as an aggregate point (i.e. Aggregator NWDAF) and collect analytics information from other NWDAFs, which may have different Serving Areas, to produce the aggregated analytics (per Analytics ID), possibly with Analytics generated by itself.\nNOTE 1:\tWhen multiple NWDAFs exist, not all of them need to be able to provide the same type of analytics results, i.e. some of them can be specialized in providing certain types of analytics. An Analytics ID information element is used to identify the type of supported analytics that NWDAF can generate.\nNOTE 2:\tNWDAF instance(s) can be collocated with a 5GS NF.",
      "chunk_type": "definition",
      "cross_references": [
        "clause_6.2.3.1",
        "clause_6",
        "ts_23.501"
      ]
    },
    {
      "chunk_id": "ts_23.288_4.2.0",
      "section_id": "4.2.0",
      "section_title": "General",
      "content": "As depicted in Figure 4.2.0-1, the 5G System architecture allows NWDAF to collect data from any 5GC NF. The NWDAF belongs to the same PLMN as the 5GC NF that provides the data.\nFigure 4.2.0-1: Data Collection architecture from any 5GC NF\nThe Nnf interface is defined for the NWDAF to request subscription to data delivery for a particular context, to cancel subscription to data delivery and to request a specific report of data for a particular context.\nThe 5G System architecture allows NWDAF to retrieve the management data from OAM by invoking OAM services.\nThe 5G System architecture allows NWDAF to collect data from any 5GC NF or OAM using a DCCF with associated Ndccf services as specified in clause 8.2.\nThe 5G System architecture allows NWDAF and DCCF to collect data from an NWDAF with associated Nnwdaf_DataManagement services as specified in clause 7.4. The 5G system architecture allows MFAF to fetch data from an NWDAF with associated Nnwdaf_DataManagement service as specified in clause 7.4.\nFigure 4.2.0-1a: Data Collection architecture using Data Collection Coordination\nAs depicted in Figure 4.2.0-1a, the Ndccf interface is defined for the NWDAF to support subscription request(s) for data delivery from a DCCF, to cancel subscription to data delivery and to request a specific report of data. If the data is not already being collected, the DCCF requests the data from the Data Source using Nnf services. The DCCF may collect the data and deliver it to the NWDAF or the DCCF may rely on a messaging framework to collect data from the NF and deliver it to the NWDAF.\nAs depicted in Figure 4.2.0-2, the 5G System architecture allows any 5GC NF to request network analytics information from NWDAF containing Analytics logical function (AnLF). The NWDAF belongs to the same PLMN as the 5GC NF that consumes the analytics information.\nFigure 4.2.0-2: Network Data Analytics Exposure architecture\nThe Nnwdaf interface is defined for 5GC NFs, to request subscription to network analytics delivery for a particular context, to cancel subscription to network analytics delivery and to request a specific report of network analytics for a particular context.\nNOTE 1:\tThe 5G System architecture also allows other consumers such as OAM and CEF (Charging Enablement Function) to request network analytics information from NWDAF.\nThe 5G System architecture allows any NF to obtain Analytics from an NWDAF using a DCCF function with associated Ndccf services, as specified in clause 8.2.\nThe 5G System architecture allows NWDAF and DCCF to request historical analytics from an NWDAF with associated Nnwdaf_AnalyticsSubscription services as specified in clause 7.2. The 5G system architecture allows MFAF to fetch historical analytics from an NWDAF with associated Nnwdaf_AnalyticsSubscription service as specified in clause 7.2.\nFigure 4.2.0-2a: Network Data Analytics Exposure architecture using Data Collection Coordination\nAs depicted in Figure 4.2.0-2a, the Ndccf interface is defined for any NF to support subscription request(s) to network analytics, to cancel subscription for network analytics and to request a specific report of network analytics. If the analytics is not already being collected, the DCCF requests the analytics from the NWDAF using Nnwdaf services. The DCCF may collect the analytics and deliver it to the NF, or the DCCF may rely on a messaging framework to collect analytics and deliver it to the NF.\nAs depicted in Figure 4.2.0-3, the 5G System architecture allows NWDAF containing Analytics logical function (AnLF) to use trained ML Model provisioning services from another NWDAF containing Model Training logical function (MTLF).\nNOTE 2:\tAnalytics logical function and Model Training logical function are described in clause 5.1.\nFigure 4.2.0-3: Trained ML Model Provisioning architecture\nThe Nnwdaf interface is used by an NWDAF containing AnLF to request and subscribe to trained ML Model provisioning services.\nNOTE 3:\tThe NWDAF trained ML Model provisioning services are described in clause 7.5 and clause 7.6.",
      "chunk_type": "definition",
      "cross_references": [
        "clause_8.2",
        "clause_7.4",
        "clause_7.2",
        "clause_5.1",
        "clause_7.5",
        "clause_7.6",
        "figure_4.2.0-1",
        "figure_4.2.0-2",
        "figure_4.2.0-3"
      ]
    },
    {
      "chunk_id": "ts_23.288_4.2.1",
      "section_id": "4.2.1",
      "section_title": "Analytics Data Repository Function",
      "content": "As depicted in Figure 4.2.1-1, the 5G System architecture allows ADRF to store and retrieve the collected data, analytics and ML Model(s). The following options are supported:\n-\tADRF exposes the Nadrf service for storage and retrieval of data, analytics or ML Model(s) by other 5GC NFs (e.g. NWDAF) which access the data using Nadrf services.\n-\tBased on the NF request or configuration on the DCCF, the DCCF may determine the ADRF and interact directly or indirectly with the ADRF to request or store data or analytics. The interaction can be:\n-\tDirect: the DCCF requests to store data or analytics in the ADRF via an Nadrf service, or via an Ndccf_DataManagement_Notify (e.g. when ADRF requested data or analytics collection notification via DCCF). In addition, the DCCF retrieves data or analytics from the ADRF via an Nadrf service.\n-\tIndirect: the DCCF requests that the Messaging Framework to store data or analytics in the ADRF i.e. via an Nadrf service or via an Nmfaf_3daDataManagement_Configure. The Messaging Framework may contain one or more adaptors that translate between 3GPP defined protocols.\nNOTE 1:\tThe internal logic of Messaging Framework is outside the scope of 3GPP, only the MFAF and the interface between MFAF and other 3GPP defined NF is under 3GPP scope.\n-\tA Consumer NF may specify in requests to a DCCF that data or analytics provided by a Data Source needs to be stored in the ADRF.\n-\tThe ADRF stores data or analytics received in an Nadrf_DataManagement_StorageRequest sent directly from an NF, or data or analytics received in an Ndccf_DataManagement_Notify / Nmfaf_3caDataManagement_Notify or Nnwdaf_DataManagement_Notify from the DCCF, MFAF or from the NWDAF.\n-\tThe ADRF may store, provide or delete ML Model(s) based on the Nadrf_MLModelManagement service received from NWDAF.\n-\tThe ADRF checks if the Consumer is authorized to access ADRF services and provides the requested data, analytics or ML Model(s) using the procedures specified in clause 7.1.4 of TS 23.501 [2].\nFigure 4.2.1-1: Storage architecture for Analytics, Collected Data and ML Model(s)",
      "chunk_type": "general",
      "cross_references": [
        "ts_23.501_clause_7.1.4",
        "figure_4.2.1-1",
        "ts_23.501_figure_4.2.1-1",
        "ts_23.501"
      ]
    },
    {
      "chunk_id": "ts_23.288_4.3",
      "section_id": "4.3",
      "section_title": "Roaming architecture",
      "content": "Based on operator's policy and local regulations (e.g. privacy), data or analytics may be exchanged between PLMNs (i.e. HPLMN and VPLMN). In a PLMN, an NWDAF is used as exchange point to exchange analytics and to collect input data for analytics with other PLMNs. The NWDAF with roaming exchange capability is called Roaming Exchange NWDAF (RE-NWDAF).\nFigure 4.3-1: Roaming Architecture to exchange Input Data or Data Analytics between VPLMN and HPLMN\nUsing the architecture shown in Figure 4.3-1:\n-\tFor outbound roaming users, the NF consumer in the HPLMN can retrieve analytics from the VPLMN via the H-RE-NWDAF in HPLMN and V-RE-NWDAF in VPLMN.\nNOTE 1:\tThe analytics from the VPLMN may be generated by the V-RE-NWDAF in the VPLMN or by other NWDAFs in the VPLMN.\n-\tFor outbound roaming users, the H-RE-NWDAF in HPLMN can collect data from the VPLMN via V-RE-NWDAF in VPLMN.\n-\tFor inbound roaming users, the NF consumer in the VPLMN can retrieve analytics from the HPLMN via V-RE-NWDAF in VPLMN and H-RE-NWDAF in HPLMN.\nNOTE 2:\tThe analytics from the HPLMN may be generated by H-RE-NWDAF in the HPLMN or other NWDAFs in the HPLMN.\n-\tFor inbound roaming users, the V-RE-NWDAF can collect data from the HPLMN via the H-RE-NWDAF.\nNOTE 3:\tBoth local breakout and home routed roaming architectures support the data or analytics exchanging between PLMNs.\nNOTE 4:\tInteractions between RE-NWDAFs of different PLMNs may be via SEPPs, which are not depicted in the architecture for the sake of clarity.",
      "chunk_type": "general",
      "cross_references": [
        "figure_4.3-1"
      ]
    },
    {
      "chunk_id": "ts_23.288_5.1",
      "section_id": "5.1",
      "section_title": "General",
      "content": "The NWDAF provides analytics to 5GC NFs and OAM as defined in clause 7. An NWDAF may contain the following logical functions:\n-\tAnalytics logical function (AnLF): A logical function in NWDAF, which performs inference, derives analytics information (i.e. derives statistics and/or predictions based on Analytics Consumer request) and exposes analytics service i.e. Nnwdaf_AnalyticsSubscription or Nnwdaf_AnalyticsInfo.\n-\tModel Training logical function (MTLF): A logical function in NWDAF, which trains Machine Learning (ML) models and exposes new training services (e.g. providing trained ML Model) as defined in clause 7.5 and clause 7.6.\nNOTE 1:\tNWDAF can contain an MTLF or an AnLF or both logical functions.\nNOTE 2:\tPre-trained ML Model storage and provisioning to NWDAF is out of the scope of 3GPP.\nAnalytics information are either statistical information of the past events, or predictive information.\nDifferent NWDAF instances may be present in the 5GC, with possible specializations per type of analytics. The capabilities of a NWDAF instance are described in the NWDAF profile stored in the NRF.\nTo guarantee the accuracy of analytics output for an Analytics ID, based on the UE abnormal behaviour analytics from itself or other NWDAF including abnormal UE list and the observed time window, the NWDAF is to detect and may delete the input data from the abnormal UE(s) and then may generate a new ML Model and/or analytics outputs for the Analytics ID without the input data related to abnormal UE list during the observed time window and then send/update the ML Model Information and/or analytics outputs to the subscribed NWDAF service consumer.\nIn order to support NFs to discover and select an NWDAF instance containing MTLF, AnLF, or both, that is able to provide the required service (e.g. analytics exposure or ML Model provisioning) for the required type of analytics, each NWDAF instance should provide the list of supported Analytics IDs (possibly per supported service) when registering to the NRF, in addition to other NRF registration elements of the NF profile. NFs requiring the discovery of an NWDAF instance that provides support for some specific service(s) for a specific type of analytics may query the NRF for NWDAFs supporting the required service(s) and the required Analytics ID(s).\nThe consumers, i.e. 5GC NFs and OAM, decide how to use the data analytics provided by NWDAF.\nThe interactions between 5GC NF(s) and the NWDAF take place within a PLMN.\nThe NWDAF has no knowledge about NF application logic. The NWDAF may use subscription data but only for statistical purpose.\nThe NWDAF architecture allows for arranging multiple NWDAF instances in a hierarchy/tree with a flexible number of layers/branches. The number and organisation of the hierarchy layers, as well as the capabilities of each NWDAF instance remain deployment choices.\nIn a hierarchical deployment, NWDAFs may provide data collection exposure capability for generating analytics based on the data collected by other NWDAFs, when DCCF, MFAF are not present in the network.\nIn order to make NWDAF discoverable in some network deployments, NWDAF may be configured (e.g. for UE mobility analytics) to register in UDM (Nudm_UECM_Registration service operation) for the UE(s) it is serving and for the related Analytics ID(s). Registration in UDM should take place at the time the NWDAF starts serving the UE(s) or collecting data for the UE(s). Deregistration in UDM takes place when NWDAF deletes the analytics context for the UE(s) (see clause 6.1B.4) for a related Analytics ID.\nNOTE 3:\tThe procedures for data collection for UE related analytics need to take user consent into account. The user consent for analytics is defined in clause 6.2.9.",
      "chunk_type": "definition",
      "cross_references": [
        "clause_7",
        "clause_7.5",
        "clause_7.6",
        "clause_6.1",
        "clause_6.2.9"
      ]
    },
    {
      "chunk_id": "ts_23.288_5.2",
      "section_id": "5.2",
      "section_title": "NWDAF Discovery and Selection",
      "content": "The NWDAF service consumer selects an NWDAF that supports requested analytics information and required analytics capabilities and/or requested ML Model Information by using the NWDAF discovery principles defined in clause 6.3.13 of TS 23.501 [2].\nDifferent deployments may require different discovery and selection parameters. Different ways to perform discovery and selection mechanisms depend on different types of analytics/data (NF related analytics/data and UE related analytics/data). NF related refers to analytics/data that do not require a SUPI nor group of SUPIs (e.g. NF load analytics). UE related refers to analytics/data that requires SUPI or group of SUPIs (e.g. UE mobility analytics).\nIn order to discover an NWDAF containing AnLF using the NRF:\n-\tIf the analytics is related to NF(s) and the NWDAF service consumer (other than an NWDAF) cannot provide an Area of Interest for the requested data analytics, the NWDAF service consumer may select an NWDAF with large serving area from the candidate NWDAFs from discovery response. Alternatively, in case the consumer receives NWDAF(s) with aggregation capability, the consumer preferably selects an NWDAF with aggregation capability with large serving area.\nNOTE 1:\tIf the selected NWDAF cannot provide the requested data analytics, e.g. due to the NF(s) to be contacted being out of serving area of the NWDAF, the selected NWDAF might reject the analytics request/subscription or it might query the NRF with the service area of the NF to be contacted to determine another target NWDAF.\n-\tIf the analytics is related to UE(s) and the NWDAF service consumer (other than an NWDAF) cannot provide an Area of Interest for the requested data analytics, the NWDAF service consumer may select an NWDAF with large serving area from the candidate NWDAFs from discovery response. Alternatively, in case the consumer receives NWDAF(s) with aggregation capability, the consumer preferably selects an NWDAF with aggregation capability with large serving area.\nNOTE 2:\tIf a selected NWDAF cannot provide analytics for the requested UE(s) (e.g. the NWDAF serves a different serving area), the selected NWDAF might reject the analytics request/subscription or it might determine the AMF serving the UE as specified in clause 6.2.2.1, request UE location information from the AMF and query the NRF with the tracking area where the UE is located to discover another target NWDAF serving the area where the UE(s) is located.\n-\tIf the analytics are related to UE(s) and if NWDAF instances indicate weights for TAIs in their NF profile (see clause 6.3.13 of TS 23.501 [2]), the NWDAF service consumer may use the weights for TAIs to decide which NWDAF to select.\n-\tIf the NWDAF service consumer needs to discover an NWDAF containing an AnLF with analytics accuracy checking capability, the consumer may query NRF providing also the analytics accuracy checking capability in the discovery request.\n-\tIf the NWDAF service consumer needs to discover an NWDAF containing AnLF which can use the Model provided by the specific NWDAF containing MTLF (e.g., in case of analytics context transfer), the consumer should discover the NWDAF(s) whose vendor ID is in the ML Model Interoperability indicator of the NWDAF containing MTLF.\nIf the NWDAF service consumer needs to discover an NWDAF that is able to collect data from particular data sources identified by their NF Set IDs or NF types or to collect data from particular NWDAF Serving Area, the consumer may query NRF providing the NF Set IDs or NF types or Area of Interest in the discovery request.\nNOTE 3:\tThe NF Set ID or NF Type of a data source serving a particular UE, can be determined as indicated in Table 5A.2-1.\nIn order to discover an NWDAF that has registered in UDM for a given UE:\n-\tNWDAF service consumers or other NWDAFs interested in UE related data or analytics, if supported, may make a query to UDM to discover an NWDAF instance that is already serving the given UE.\nIf an NWDAF service consumer needs to discover NWDAFs with data collection exposure capability, the NWDAF service consumer may discover via NRF the NWDAF(s) that provide the Nnwdaf_DataManagement service and their associated NF type of data sources or their associated NF Set ID of data sources or NWDAF Serving Area information as defined in clause 6.3.13 of TS 23.501 [2].\nIn order to discover an NWDAF containing MTLF via NRF:\n-\tWhen one or more trained ML Models are available for one or more Analytics ID(s) the NWDAF containing MTLF shall include the Analytics ID(s) that is(are) supported per service in the registration towards NRF. The NWDAF containing MTLF may wait to register in NRF the above services until at least one trained model is available. The NWDAF containing MTLF may provide to the NRF a list of Analytics IDs corresponding to the trained ML Models and possibly the ML Model Filter Information for the trained ML Model per Analytics ID(s), if available. In this Release of the specification, only the S-NSSAI(s) and Area(s) of Interest from the ML Model Filter Information for the trained ML Model per Analytics ID(s) may be registered into the NRF during the NWDAF containing MTLF registration. If the NWDAF containing MTLF supports ML Model interoperability, the NWDAF containing MTLF includes, in the registration to the NRF, an ML Model Interoperability indicator for each Analytics ID.\n-\tThe ML Model Interoperability indicator comprises a list of NWDAF providers (vendors) that are allowed to retrieve ML Models from this NWDAF containing MTLF. It also indicates that the NWDAF containing MTLF supports the interoperable ML Models requested by the NWDAFs from the vendors in the list.\nNOTE 4:\tThe S-NSSAI(s) and Area(s) of Interest from the ML Model Filter Information are within the indicated S-NSSAI and NWDAF Serving Area information in the NF profile of the NWDAF containing MTLF, respectively.\n-\tDuring the discovery of NWDAF containing MTLF, a consumer (e.g. an NWDAF containing AnLF, an NWDAF containing MTLF as FL server or FL client) may include in the request the target NF type (i.e. NWDAF), the Analytics ID(s), the S-NSSAI(s), Area(s) of Interest of the Trained ML Model required and Vendor ID. The NRF returns one or more candidate instances of NWDAF containing MTLF to the NF consumer and each candidate instance of NWDAF containing MTLF includes the Analytics ID(s), possibly the ML Model Filter Information for the available trained ML Models and ML Model Interoperability indicator, if available.\n-\tIf the NWDAF service consumer needs to discover an NWDAF containing an MTLF with ML Model accuracy checking capability, the consumer may query NRF also providing the ML Model accuracy checking capability in the discovery request.\nIn order to discover an NWDAF containing MTLF with Federated Learning (FL) capability via NRF, in addition to the procedures described above for discovering NWDAF containing MTLF:\n-\tAn NWDAF containing MTLF supporting FL as a server shall additionally include FL capability type (i.e. FL server) and may include Time interval supporting FL as FL capability information during the registration in NRF.\n-\tAn NWDAF containing MTLF supporting FL as a client shall additionally include FL capability type (i.e. FL client) and may include Time interval supporting FL as FL capability information during the registration in NRF, and it may also include, NF type(s) and NWDAF Serving Area information and/or NF set ID(s) of the data source(s) where data can be collected as input for local model training.\nNOTE 5:\tAn NWDAF containing MTLF may indicate to support both FL server and FL client in the FL capability for specific Analytics ID.\n-\tDuring the discovery of NWDAF containing MTLF as FL server, a consumer (e.g. a NWDAF containing MTLF) may include in the request the FL capability type as FL server and may include Time Period of Interest and ML Model Filter information for the trained ML Model(s) per Analytics ID(s), if available. The NRF returns one or more NF profiles of candidate instances of NWDAF satisfying the query parameters.\n-\tDuring the discovery of NWDAF containing MTLF as FL client, a consumer (e.g. an FL server) may include in the request FL capability type as FL client and may include Time Period of Interest, a list of NF type(s) and/or NF set ID(s) of the data source(s). The NRF returns one or more NF profiles of candidate instances of NWDAF satisfying the query parameters.\nNOTE 6:\tThe service consumer to discover an NWDAF containing MTLF with FL capability is limited to NWDAF containing MTLF in this Release.\nA PCF may learn which NWDAFs being used by AMF, SMF and UPF for a specific UE, via signalling described in clause 4.16 of TS 23.502 [3]. This enables a PCF to select the same NWDAF instance that is already being used for a specific UE.\nIn the roaming architecture, the NWDAF with roaming exchange capability (RE-NWDAF) to request analytics or input data is discovered via the NRF. A consumer in the same PLMN as the RE-NWDAF discovers the RE-NWDAF(s) by querying for NWDAF(s) where the roaming exchange capability is indicated in its (their) NF profile. A consumer in a peer PLMN (i.e. RE-NWDAF) discovers the RE-NWDAF(s) by querying for NWDAF(s) in the target PLMN that is (are) supporting the specific services defined for roaming. A RE-NWDAF discovers the RE-NWDAF(s) in a different PLMN (i.e. HPLMN or VPLMN) using the procedure defined in clause 4.17.5 (if delegated discovery is not used) or clause 4.17.10 (if delegated discovery is used) of TS 23.502 [3], where the detailed parameters are determined based on the analytics request or subscription from the consumer 5GC NF, operator policy, user consent and/or local configuration.",
      "chunk_type": "general",
      "cross_references": [
        "ts_23.501_clause_6.3.13",
        "clause_6.2.2.1",
        "ts_23.502_clause_4.16",
        "clause_4.17.5",
        "clause_4.17.10",
        "table_5",
        "ts_23.501",
        "ts_23.502"
      ]
    },
    {
      "chunk_id": "ts_23.288_5.3",
      "section_id": "5.3",
      "section_title": "Federated Learning (FL) among multiple NWDAFs",
      "content": "NOTE 1:\tIn this Release of the specification, Federated Learning (FL) only refers to Horizontal Federated Learning.\nFederated learning among multiple NWDAFs is a machine learning technique in core network that trains an ML Model across multiple decentralized entities holding local data set, without exchanging/sharing local data set. This approach stands in contrast to centralized machine learning techniques where all the local datasets are uploaded to one server, thus allowing to address critical issues such as data privacy, data security, data access rights.\nNOTE 2:\tHorizontal Federated Learning is supported among multiple NWDAFs, which means the local data set in different FL client NWDAFs have the same feature space for different samples (e.g. UE IDs).\nFor Federated Learning supported by multiple NWDAFs containing MTLF, there is one NWDAF containing MTLF acting as FL server (called FL server NWDAF for short) and multiple NWDAFs containing MTLF acting as FL client (called FL client NWDAF for short), the main functionality includes:\nFL server NWDAF:\n-\tdiscovers and selects FL client NWDAFs to participant in an FL procedure\n-\trequests FL client NWDAFs to do local model training and to report local model information.\n-\tgenerates global ML Model by aggregating local model information from FL client NWDAFs.\n-\tsends the global ML Model back to FL client NWDAFs to perform an additional training iteration if needed.\nFL client NWDAF:\n-\tlocally trains ML Model as tasked by the FL server NWDAF with the available local data set, which includes the data that may not be allowed to be shared with other FL client NWDAFs due to e.g. data privacy, data security, data access rights.\n-\treports the trained local ML Model information to the FL server NWDAF.\n-\treceives the global ML Model from FL server NWDAF and perform an additional training iteration if needed.\nFL server NWDAF or FL client NWDAF register to NRF with their FL capability information as described in clause 5.2.\nThe NWDAF containing MTLF determines to train an ML Model either based on local configuration or when it receives a request from NWDAF containing AnLF. The NWDAF containing MTLF further determines whether the ML Model should be trained via FL mechanism based on Analytic ID, Service Area/DNAI or when data can not be obtained directly from data producer NF (e.g. due to data privacy, data security). The NWDAF containing AnLF is not aware whether the ML Model is trained based on FL or not.\nIf the NWDAF containing MTLF can act as an FL server for the ML Model training, then FL procedure is initiated by the NWDAF containing MTLF as FL server NWDAF directly.\nIf the NWDAF containing MTLF determines to train an ML Model based on local configuration and the FL mechanism is required, but the NWDAF containing MTLF can't act as an FL server, the NWDAF containing MTLF should discover an FL server NWDAF as described in clause 5.2 and request the FL server NWDAF to provide the trained ML Model as described in clause 6.2C.2.2. The FL server NWDAF may determine to initiate FL procedure before providing the ML Model.\nIf the ML Model training is triggered by the request from NWDAF containing AnLF, the NWDAF containing MTLF determines the FL mechanism is required but it can not act as an FL server, the NWDAF containing MTLF should discover an FL server NWDAF as described in clause 5.2 and request the FL server NWDAF to provide the trained ML Model as described in clause 6.2C.2.2. The Notification Target Address and the Notification Correlation ID from the NWDAF containing AnLF is provided in the request message sent to the FL server NWDAF. The FL server NWDAF may determine to initiate FL procedure before providing the ML Model. The FL server NWDAF sends the ML Model information to the notification endpoint (e.g. the NWDAF containing AnLF) after the ML Model training success.\nNOTE 3:\tThe security procedure on authorizating FL server to initiate FL procedure on the FL client(s) is described in Annex X, clause X.9 of TS 33.501 [49]. The security procedure authorizing an MTLF to request ML Models on behalf of an AnLF to another MTLF (e.g., FL server NWDAF) is described in Annex X, clause X.10 of TS 33.501 [49].\nBefore FL procedure is initiated by FL server NWDAF, appropriate FL client NWDAFs should be discovered by FL server NWDAF as described in clause 5.2.\nWhen starting an FL procedure, the FL server NWDAF is to provide an initial model to each FL client NWDAF, and then each FL client NWDAF is to perform local model training using its local data set. The detailed procedure for FL among Multiple NWDAFs is described in clause 6.2C.\n5A\tData Collection Coordination and Delivery Functional Description\n5A.1\tGeneral\nData Collection Coordination and Delivery coordinates the collection and distribution of data requested by NF consumers. It prevents data sources from having to handle multiple subscriptions for the same data and send multiple notifications containing the same information due to uncoordinated requests from data consumers.\nData Collection Coordination and Delivery is supported by a DCCF via Ndccf_DataManagement service or by an NWDAF via Nnwdaf_DataManagement service. Unless otherwise stated, capabilities specified in clause 5A for a DCCF are also applicable to an NWDAF.\nIn this Release of the specification Data Collection Coordination and Delivery is applicable to:\n-\tNWDAFs that request data from a Data Source (e.g. for use in computing analytics).\n-\tNF consumers that request analytics from an NWDAF Data Source.\n-\tNF consumers that request data from an ADRF Data Source.\n-\tADRFs that receive data from an NF Data Source.\nNOTE:\tNnwdaf_DataManagement service can be used to collect historical data or runtime data. For collecting historical and runtime analytics, Nnwdaf_AnalyticsSubscription service is used.\n5A.2\tData Collection Coordination\nData Collection Coordination is supported by a DCCF or an NWDAF. The Data Consumer may use an NRF to perform NF discovery and selection to find a DCCF that can coordinate data collection (DCCF discovery principles are defined in clause 6.3.19 of TS 23.501 [2]). Data Consumers send requests for data to the DCCF rather than directly to the NF Data Source. Whether the data consumers directly contact the NF Data Source or goes via the DCCF is based on configuration of the data consumers. For the Data Consumer and each notification endpoint in a data request, the Data Consumer may specify Formatting and Processing Instructions that determine how the data is to be provided. Upon receiving a request from a Data Consumer, the selected DCCF determines the NF instance that can be a Data Source if the Data Source is not indicated in the Data Consumer's request. The DCCF may also select an ADRF if the data is to be stored in an ADRF and an ADRF endpoint is not indicated in the Data Consumer's request. To retrieve data for a specific UE, the NRF, UDM or BSF can provide the DCCF with the identity of the Data Source using the services indicated in table 5A.2-1.\nTable 5A.2-1: NF Services consumed by DCCF or NWDAF to determine which NF instances are serving a UE\nType of NF instance (serving the UE) to determine\nNF to be contacted by DCCF\nService\nReference in TS 23.502 [3]\nUDM\nNRF\nNnrf_NFDiscovery (NOTE 1)\n5.2.7.3\nAMF\nUDM\nNudm_UECM\n5.2.3.2\nSMF\nUDM\nNudm_UECM\n5.2.3.2\nBSF\nNRF\nNnrf_NFDiscovery (NOTE 1)\n5.2.7.3\nPCF\nBSF\nNbsf_Management\n5.2.13.2\nNEF\nNRF\nNnrf_NFDiscovery\n5.2.7.3\nNWDAF\nNRF\nUDM\nNnrf_NFDiscovery\nNudm_UECM\n5.2.7.3\n5.2.3.2\nGMLC\nNRF\nNnrf_NFDiscovery (NOTE 2)\n5.2.7.3\nNSACF\nNRF\nNnrf_NFDiscovery\n5.2.7.3\nNOTE 1:\tDiscovery can be based on a group ID. The group ID for a UE ID can be obtained using the Nudr_GroupIDmap service defined in clause 5.2.12.3 of TS 23.502 [3].\nNOTE 2:\tDiscovery of the GMLC serving a UE is described in clause 5.1a of TS 23.273 [39] and can also be based on DNS. A GMLC is supposed to be able to serve any UE in the PLMN; the GMLC will in turn discover an AMF serving the UE via the UDM as described in clause 6.1 of TS 23.273 [39].\nThe DCCF keeps track of the data actively being collected from the Data Sources it is coordinating. It may do so by maintaining a record of the active prior requests it sends to each Data Source. If a NWDAF subscribes for data directly with a Data Source, or a Data Source has stored data in an ADRF, the NWDAF or ADRF may register the data collection profile with the DCCF. The data collection profile may include the following parameters:\n-\t\"Service Operation\" identifies the service used to collect the data or analytics from a Data Source (e.g. Namf_EventExposure_Subscribe or Nnwdaf_AnalyticsSubscription_Subscribe);\n-\t\"Analytics/Data Specification\" is the \"Service Operation\" specific parameters that identify the collected data (i.e. Analytics ID(s) / Event ID (s), Target of Analytics Reporting or Target of Event Reporting, Analytics Filter or Event Filter, etc.);\n-\tNWDAF ID or ADRF ID specifies the ADRF or NWDAF which registers data collection profile.\nThe DCCF may then determine certain historical data may be available in the NWDAF or ADRF and coordinate collection of data from the NWDAF or ADRF based on the data collection profile.\nWhen the DCCF receives a request for data, it determines the status of data collection from the Data Source. If parameters in a request for data from a Data Consumer match those in a prior request or in a data collection profile registration, the DCCF may determine that the requested data is already being collected from a Data Source or that a prior subscription to a Data Source may be modified to in addition satisfy the requirements of the new data request from a Data Consumer. This status is used in clause 5A.3 to deliver data to the Data Consumer and notification endpoints.\nFor persisting event exposure subscriptions for long-lived data collection, the DCCF may subscribe to the UDM to receive event notifications even if a Data Source that serves a UE changes.\nThe DCCF may subscribe to the NRF to receive event notifications if a Data Source changes (e.g. because of a NF life-cycle event).\nNOTE:\tA DCCF can support multiple Data Sources, Data Consumers and Message Frameworks. However, to avoid duplicate data collection, each Data Source NF or Set of Data Source NF should be associated with only one DCCF instance or DCCF Set.\nA DCCF may use the same mechanisms described in clause 6.2.2.1 to determine AMF and SMF to retrieve data related to \"any UE\".\nIf the data consumer requests to collect data for any UE in an area of interest, the data consumer shall first determine all DCCFs covering the area of interest and then contact these DCCFs to request for data collection.\n5A.3\tData Delivery\n5A.3.0\tGeneral\nData is provided to Consumers or notification endpoints according to the Delivery Option configured on the DCCF or NWDAF. Delivery Options are:\n1.\tDelivery via DCCF or NWDAF: Consumers or Notification Endpoints receive the data from the DCCF or NWDAF.\n2.\tDelivery via Messaging Framework: Consumers or Notification Endpoints receive the data from the Messaging Framework via the services offered by the MFAF.\n5A.3.1\tData Delivery via the DCCF or NWDAF\nFigure 5A.3.1-1: Data Delivery via DCCF\nData Delivery via DCCF is shown in Figure 5A.3.1-1. Each Event Notification received from a Data Source NF is sent to the DCCF which propagates it to all Data Consumers / Notification Endpoints specified by the Data Consumers or determined by the DCCF. Each Data Consumer may specify in its request to the DCCF multiple notification endpoints, which may include the requesting Data Consumer, an ADRF or other NFs. The DCCF may also select an ADRF or other notification endpoint based on configuration. The DCCF supports formatting and processing for each Consumer / notification endpoint so notifications comply with the data requests received from each Consumer NF.\nUpon the DCCF determining the status of data collection for a data request (see clause 5A.2):\n-\tIf the requested data is not already being collected from a Data Source, the DCCF sends a new subscription/request towards the Data Source with the notification target specified as the DCCF.\n-\tIf the requested data is partially covered by existing subscriptions with the Data Source, the DCCF sends to the existing Data Source a request to modify the subscription and/or creates new subscription(s) to new Data Source for the newly requested data which cannot be provided by the current Data Source.\n-\tIf the requested data is already being collected from the Data Source, the DCCF determines that no subscriptions to the Data Source need to be created or modified.\nWhen notifications are received by the DCCF, they are processed according to the Formatting and Processing Instructions for each Consumer and notification endpoint. The DCCF subsequently sends notifications to Consumers and notification endpoints via a Ndccf_DataManagement service.\nThe same functionality as described above applies for Data Delivery and bulked data collection via NWDAF with Nnwdaf services replacing corresponding Ndccf services.\n5A.3.2\tData Delivery via a Messaging Framework\nFigure 5A.3.2-1: Data Delivery via a Messaging Framework\nData Delivery via a Messaging Framework is shown in figure 5A.3.2-1. The Messaging Framework formats and processes data received from the Data Source NF and sends notifications to all Data Consumers and Notification Endpoints specified by Data Consumers or determined by the DCCF. Each Data Consumer may specify in its request to the DCCF multiple notification endpoints, which may include the requesting Data Consumer, an ADRF or other NFs. The DCCF may also select an ADRF or other notification endpoint based on configuration. While the Messaging Framework is not standardized by 3GPP, a Messaging Framework Adaptor NF (MFAF) offers 3GPP defined services that allow the 5GS to interact with the Messaging Framework. Internally, the Messaging Framework may for example support the pub-sub pattern, where received data are published to the Messaging Framework and requests from 3GPP Consumers result in Messaging Framework specific subscriptions. Alternatively, the Messaging Framework may support other protocols outside of the scope of 3GPP.\nThe Messaging Framework Adaptor NF offers services that enable the 5GS to interact with the Messaging Framework:\n-\t3GPP Consumer Adaptor (3CA) Data Management Service: Nmfaf_3caDataManagement Service delivers data to each Data Consumer or notification endpoint after formatting and processing of data received by the Messaging Framework.\n-\t3GPP DCCF Adaptor (3DA) Data Management Service: The consumer (e.g. DCCF) may configure MFAF using Nmfaf_3daDataManagement service to enable the MFAF to convey data or analytics received from data source NF to notification endpoints. The configuration may include data formatting and processing instruction and notification endpoints.\nUpon the DCCF determining the status of data collection for a data request (see clause 5A.2):\n-\tIf the requested data is not currently being collected from a Data Source, the DCCF sends a new subscription/request towards the Data Source with the notification target specified as the Messaging Framework.\n-\tIf the requested data is partially covered by existing subscriptions with the Data Source, the DCCF sends a request to the Data Source to modify one or more subscriptions to accommodate both the previous requests for data and the new request for data and/or creates new subscription(s) to new Data Source for the newly requested data which cannot be provided by the current Data Source.\n-\tIf the requested data is already being collected from the Data Source, the DCCF determines that no subscriptions to the Data Source need to be created or modified.\nNOTE:\tThe internal logic of DCCF, e.g. how it decides on what modifications to do, is not specified.\n-\tThe DCCF uses the Nmfaf_3daData Management service to convey information so:\n1.\tthe Messaging Framework can recognize data that are received from a Data Source.\n2.\tthe MFAF can obtain data received by the Messaging Framework, process and format the data according to processing and formatting instructions for each Consumer / notification endpoint and send notifications or responses to the Data Consumers.\nWhen data are received by the Messaging Framework (e.g. because of an event notification) they are processed according the Formatting and Processing Instructions for each Consumer / notification endpoint before notifications are sent to the Data Consumer or Notification Endpoints. Notifications sent via the Nmfaf_3caDataManagement service have the same content as those sent via a Ndccf_DataManagement service for Data Delivery via the DCCF.\nThe same functionality as described above applies for Data Delivery and bulk data collection via NWDAF with Nnwdaf services replacing corresponding Ndccf services.\n5A.4\tData Formatting and Processing\nFormatting and/or Processing instructions may be provided in requests by Data Consumers via the Ndccf_DataManagement service and Nnwdaf_DataManagement service. As an alternative to providing individual events, formatting can be used to aggregate notifications and processing can be used to extract and send summary information from multiple notifications. Data Formatting and Processing are applicable to notifications due to events as they occur at data sources (runtime data or analytics) and historical data as described in clause 5A.5.\nWhen using the Messaging Framework, the DCCF sends the formatting and/or processing instructions to the Messaging Framework via the Nmfaf_3daData_Management Service so the MFAF may format and/or process the data before sending notifications to the Data Consumers / notification endpoints. When using Data Delivery via the DCCF, the DCCF performs formatting and/or processing before sending notifications.\nFormatting determines when a notification is sent to the Consumer. Formatting Instructions may indicate:\n-\tNotification Event clubbing: Buffering and sending of several notifications in one message. The consumer may specify a minimum and/or maximum number of notifications to be clubbed.\n-\tNotification Time Window (example: notifications are buffered and sent between 2 and 3 AM).\n-\tCross event reference-based notification: When a subscribing NF is subscribing to multiple events (e.g. event X and event Y) the notification for an Event-X is buffered and reported only when the Event-Y occurs.\n-\tConsumer triggered Notification: Notifications containing data or analytics are buffered until the consumer requests delivery using Nnwdaf_DataManagement, Ndccf_DataManagement or Nmfaf_3caDataManagement Service. The consumer requests Consumer triggered notification by setting a \"fetch flag\" in its subscription request to the DCCF or NWDAF. When the requested data or analytics is available for retrieval, the DCCF, NWDAF or MFAF sends a notification containing fetch instructions to the consumer. The consumer must then fetch the data or analytics before an expiry time as provided in the fetch instructions.\nNOTE:\tWhen this indication is set by the consumer, DCCF, NWDAF or MFAF notifications to the consumer contain Fetch Instructions (see clauses 8.2.4, 7.4.4 and 9.3.2).\n-\tExact time-based Notification: Notifications are sent to the Consumer at an exact time, irrespective of whether the event occurs (example: every 30 min). Exact time-based notifications may be periodic.\n-\tIncreasing time window based notification: Notifications are sent to the Consumer at an increasing periodicity (example: the first notification is sent immediately, subsequent received notifications are sent after 5 min, then after 10 min, then after 15 min, etc.).\nFor an ADRF endpoint, Formatting Instructions sent to the messaging framework may further specify whether Nmfaf services are used to deliver notifications to an ADRF, or whether the data are sent to the ADRF using a Nadrf service.\nProcessing instructions allow summarizing of notifications to reduce the volume of data reported to the Data Consumer. The processing results in summarizing of information from multiple notifications into a common report. Processing of data for inclusion in each notification sent to consumers occurs over a Processing Interval specified in the Processing Instructions. Notifications sent to consumers may represent partial intervals if formatting instructions or Event Reporting Information (as specified in table 4.15.1-1 of TS 23.502 [3]) require that a notification be sent to the consumer before the end of a processing interval. Processing Instructions are provided per Event ID or Analytics ID and are applied to multiple notifications that result from the same subscription and for the same Event ID or Analytics ID. Processing Instructions, in addition to the Processing Interval, may specify the parameter names, parameter values and the attributes to be determined and reported to the Consumer. Processing Instructions may also specify aggregation level (e.g. per-UEs, per AoIs) or temporal aggregation (e.g. per minute, per hour). The processed notifications may comprise the following depending on the Event and Processing Instructions:\n-\tEvent;\n-\tProcessing Interval;\n-\tList of Event Parameter Name(s) and for each Event Parameter Name, one Event Parameter Values and sets of the following attributes as indicated in the processing instructions:\n-\tEvent Spacing: Average and variance of the time interval separating two consecutive occurrences of the same event and parameter value, or periodicity for periodic reporting;\n-\tEvent Duration: Average and variance of the Time for which the parameter value applies;\n-\tNumber of countable occurrences for the parameter (e.g. Mobility Registration Update);\n-\tAverage, variance, most frequent value, least frequent value and skew of the parameter (e.g.: number of UEs in an AoI);\n-\tMaximum and minimum parameter values (e.g. number of UEs in an AoI).\nEvent Parameter Names are Event specific and not all attributes are applicable for all parameter names. Examples of Event Parameter Names and Parameter values are provided in table 5A.4-1.\nTable 5A.4-1: Examples of Event Parameter Names, Parameter values\nEvent\nEvent parameter name\nParameter values\nAttributes\nLocation Report\nTAI\nTAI-7\n-\tAverage and variance of the time interval between TA boundary crossings.\n-\tNumber of TA boundary crossing.\nNumber of UEs in a Region\nRegion\nAMF-3\n-\tAverage and variance of the number of UEs in the Region.\nUE Reachability (status change)\nCM State\nConnected\n-\tAverage and variance of time between CM connected state transitions.\n-\tAverage and variance of the time spent in CM connected state.\n-\tNumber of transitions to CM connected state.\nPDU Session Establishment\nDNN\nInternet\n-\tAverage and variance of time between PDU Session establishments to the Internet DN.\n-\tAverage and variance of the duration of PDU Sessions established to the Internet DN.\n-\tNumber of PDU Session establishments to the Internet DN.\nPDU Session Establishment\nPDU Session Type\nEthernet\n-\tAverage and variance of time between Ethernet PDU Session establishments.\n-\tAverage and variance of the duration of Ethernet PDU Sessions.\n-\tNumber of Ethernet PDU Session establishments.\n5A.5\tHistorical Data Handling\nADRF or NWDAF as a Data Source:\n-\tWhen the DCCF receives a request for data that includes a period in the past and ADRF is deployed, the DCCF may obtain data from ADRF as the Data Source. The DCCF may also obtain historical data from an NWDAF. The data obtained from the ADRF or NWDAF is delivered to Consumers / Notification Endpoints according to a configured Delivery Option. The DCCF may determine that requested data may be available in an ADRF or NWDAF based on ADRF identification from the consumer, the data collection profile previously registered by the ADRF or NWDAF or by querying the ADRF or NWDAF.\nADRF or NWDAF as a Data Recipient:\n-\tAn ADRF or NWDAF may be a Consumer NF that initiates requests to the DCCF for data, the ADRF or NWDAF may be specified as a notification endpoint by another Consumer NF that wants to have data it requests archived, or the DCCF may be configured to archive certain data in a ADRF (e.g. all data from an AMF instance).\n-\tIf the ADRF or NWDAF instance is not specified in a request for data by a Consumer NF, the DCCF may select the ADRF or NWDAF instance based on provisioned information or information received from the NRF.\n-\tData is delivered to the ADRF or NWDAF according to a configured Delivery Option (via DCCF or Messaging Framework).\n5B\tAnalytics Data Repository Functional Description\n5B.1\tGeneral\nThe ADRF offers services that enable a consumer to store, retrieve and delete data and analytics. The analytics are produced by the NWDAF as described in clause 6.1 and data are collected as described in clause 6.2. Multiple instances of ADRF may be deployed in a network, NF consumer selects a target ADRF instance using ADRF discovery mechanism defined in clause 6.3.20 of TS 23.501 [2].\nData may be stored in the ADRF by:\n-\ta consumer sending the ADRF an Nadrf_DataManagement_StorageRequest containing the data or analytics to be stored. The ADRF response provides a result indication.\n-\ta consumer sending the ADRF an Nadrf_DataManagement_StorageSubscriptionRequest requesting that the ADRF subscribes to receive data or analytics for storage. The ADRF then subscribes to the NWDAF or DCCF for data or analytics, providing ADRF Notification Address (+Notification Correlation ID). Analytics or Data are subsequently provided as notifications using DCCF, NWDAF or MFAF services (Ndccf_DataManagement Nnwdaf_DataManagement or Nmfaf_3caDataManagement service).\nData may be retrieved from the ADRF by:\n-\ta consumer sending an Nadrf_DataManagement_RetrievalRequest request to the ADRF to retrieve data or analytics for a Storage Transaction Identifier or a Fetch Instructions received from the ADRF in an Nadrf_DataManagement_RetrievalNotify. The ADRF determines the availability of the data or analytics in its repository and sends in the response to the consumer either the data or analytics.\n-\ta consumer sending an Nadrf_DataManagement_RetrievalSubscribe request to the ADRF to retrieve data or analytics for a specified data or analytics collection time window. If the time window includes the future and the ADRF has subscribed to receive the data or analytics, subsequent notifications received by the ADRF are sent by the ADRF to the notification endpoint.\nThe ADRF determines the availability of the data or analytics and sends a success/failure indication in the response to the consumer. The ADRF then sends one or more notifications using an Nadrf_DataManagement_RetrievalNotify to the Notification Address (+Notification Correlation ID) specified by the consumer. The notification(s) either provide the data or analytics or provide instructions to the endpoint to fetch the data or analytics using an Nadrf_DataManagement_RetrievalRequest.\nData may be deleted from the ADRF by:\n-\ta consumer sending an Nadrf_DataManagement_Delete request. The ADRF response provides a result indication.\nAn ADRF may be configured to register the data it is collecting with a DCCF. The registration uses the Ndccf_ContextManagement service specified in clause 8.3.2. The registration may subsequently be used by the DCCF to obtain data from the ADRF as described in clause 6.2.6.3.6.\nThe ADRF offers services that enable a consumer to store, delete and retrieve ML Models. The ML Models are trained by NWDAF containing MTLF as described in clause 5.1.\nML Model(s) may be retrieved from the ADRF by:\n-\ta consumer sending the ADRF an Nadrf_MLModelManagement_RetrievalRequest as described in clause 10.3.4, containing one or more tuples of unique ML Model identifier stored in ADRF or Storage Transaction Identifier. The ADRF response provides one or more tuples of unique ML Model identifiers and ML Model file address of ML Model file stored in ADRF.\nML Model(s) may be stored or updated in the ADRF by:\n-\ta consumer sending the ADRF an Nadrf_MLModelManagement_StorageRequest as described in clause 10.3.2, containing the ML Model or ML Model address to be stored or updated. The ADRF response provides a result indication.\nNOTE:\tWhen MTLF updates a model in ADRF, or even in MTLF itself, it could happen that multiple different ML models which are being used in the system have the same model identifier, which may lead to misoperations. It is up to MTLF implementation on how to avoid such situation if that can cause problems. For example, MTLF can only update models that are not provisioned yet.\nML Model(s) may be deleted from the ADRF by:\n-\ta consumer sending an Nadrf_MLModelManagement_Delete request as described in clause 10.3.3. The ADRF response provides a result indication.\nWhen a consumer requests data or analytics to be stored in an ADRF, it may specify Storage Handling information requesting:\n-\ta lifetime indicating how long the data or analytics should be stored; and/or\n-\tthat a notification alerting the consumer be sent prior to data deletion from the ADRF.\nThe ADRF, DCCF or NWDAF may be configured with default operator storage policies. The policies specify how long data or analytics are to be stored and conditions when the default policy supersedes Storage Handling Information provided in a request from the Data or Analytics Consumer. Based on the default operator policy and the Storage Handling information, the ADRF, DCCF or NWDAF determines the Storage Approach that will be applied for the data or analytics.\nThe Storage Approach is comprised of the lifetime for how long the data or analytics will be stored and the notification requirement to be applied when data or analytics are to be deleted from the ADRF.\nWhen more than one consumer requests a storage lifetime for the same data or analytics, the Storage Approach should be based on the longest requested storage lifetime.\nThe response to the consumer request for data or analytics includes the Storage Approach.\nNOTE:\tThe default operator policy for how long data or analytics are to be stored may be longer or shorter than the lifetime requested by the consumer. A default operator policy may for example accept only consumer requested lifetimes that are shorter or longer than the default policy.\nThe ADRF, DCCF or NWDAF determines when the data or analytics lifetime has expired. When data or analytics is to be removed from the ADRF, an alert is sent to the Consumer that the data is about to be deleted. The alert contains a Storage Transaction Identifier that can be used by the consumer to retrieve the data or analytics.\n5C\tAnalytics/ML Model Accuracy Monitoring Functional Description\n5C.1\tGeneral\nA NWDAF may have the accuracy checking capability for Analytics and/or ML Models. The NWDAF may provide the accuracy information to consumers when requested or use it for its internal processes.\nInput data is collected from Data Producer NF(s) when there is a request for inference/prediction per analytics ID in NWDAF for a specific time period in future. Ground truth data are collected from those Data Producer NF corresponding to the requested analytic ID at the time to which the prediction refers.\nThe ground truth data is the actual measured data observed at the time which the prediction refers to.\nNOTE 1:\tThe ground truth data can be impacted when Analytics Feedback Information shows that an action is triggered by the analytics output in the consumer.\nAnalytics/ML Model Accuracy Monitoring is to be achieved by comparing the predictions using the current trained ML Model and its corresponding ground truth data i.e. the corresponding true observed events.\nAnalytics/ML Model Accuracy Information is to represent general performance measurements for analytics and ML Model respectively, which are composed of the number of correct predictions out of all predictions and the corresponding number of samples.\nNOTE 2:\tIn this Release, only Analytics/ML Model Accuracy Information is supported for monitoring the performance of Analytics/ML Model.\nNOTE 3:\tHow an MTLF/AnLF determines whether a prediction is correct is up to implementation.\nThe NWDAF (containing AnLF) with accuracy checking capability decides to initiate Analytics Accuracy Monitoring based on:\n-\tA request from an analytics accuracy consumer. The analytics accuracy consumer may be an NWDAF containing AnLF, NWDAF containing MTLF or an analytics consumer NF.\n-\tAnalytics Feedback Information which may be provided by an Analytics Consumer NF.\nThe AnLF with analytics accuracy checking capability as defined in clause 6.2D is able to provide or notify the accuracy information of Analytics IDs to the analytics consumers of such service and when the analytics accuracy does not meet the analytics consumer's requirements, the analytics consumer may stop using analytics for a period of time or obtain new analytics. In addition, updated analytics for the provided Analytics IDs may be provided to analytics consumers as requested, if the updated analytics is able to be generated within the correction time period. The AnLF with analytics accuracy checking capability is as defined in clause 6.2D.1 is able to determine Analytics Accuracy Information based on e.g.:\n-\tComparing predictions and its corresponding ground truth data, which are collected corresponding to the requested analytic ID at the time which the prediction refers to.\nNOTE 4:\tThe ground truth data and the corresponding prediction is to be defined per Analytics ID.\n-\tComparing changes in internal configuration for the analytics ID generation (e.g. change of data collection parameters, change in data distribution from a Data Source).\n-\tPrevious existent records of Analytics Accuracy Information.\n-\tAccuracy Feedback Information provided by an NF consumer.\n-\tDetermining analytics accuracy by comparing analytics accuracy using multiple ML Models that serve the same Analytics ID.\nThe MTLF with ML Model accuracy checking capability as defined in clause 6.2E is able to determine ML Model degradation based on e.g.:\n-\tcomparing/evaluating the data: including input data, analytics output and the ground truth data either collected from various data source NFs, DCCF, AnLF, ADRF or configured by OAM; or\n-\tAnLF providing notifications of the Analytics Accuracy Information; or\n-\tAnLF providing Analytics Feedback Information of the analytics generated by the ML Model.\nThe NWDAF containing MTLF may reselect a new ML Model or retrain the existing ML Model and consequently notify the ML Model accuracy degradation to the ML Model consumer(s). In addition, the NWDAF containing MTLF may consider the rating of untrusted AF(s) when used as data sources.",
      "chunk_type": "general",
      "cross_references": [
        "clause_5.2",
        "clause_6.2",
        "clause_5",
        "ts_23.501_clause_6.3.19",
        "ts_23.502_clause_5.2.12.3",
        "ts_23.273_clause_5.1",
        "ts_23.273_clause_6.1",
        "clause_6.2.2.1",
        "clause_6.1",
        "ts_23.501_clause_6.3.20",
        "clause_8.3.2",
        "clause_6.2.6.3.6",
        "clause_5.1",
        "clause_10.3.4",
        "clause_10.3.2",
        "clause_10.3.3",
        "table_5",
        "ts_23.502_table_4.15.1-1",
        "figure_5",
        "ts_33.501",
        "ts_23.501",
        "ts_23.502",
        "ts_23.273"
      ]
    },
    {
      "chunk_id": "ts_23.288_6.0",
      "section_id": "6.0",
      "section_title": "General",
      "content": "This clause specifies procedures to support network data analytics function.\nClause 6.1 and clause 6.2 specify generic procedures which apply to all type of analytics, while clause 6.3 and onwards specify procedures specific to some type of analytics.",
      "chunk_type": "definition",
      "cross_references": [
        "clause_6.1",
        "clause_6.2",
        "clause_6.3"
      ]
    },
    {
      "chunk_id": "ts_23.288_6.1.1.1",
      "section_id": "6.1.1.1",
      "section_title": "Analytics subscribe/unsubscribe by NWDAF service consumer",
      "content": "This procedure is used by any NWDAF service consumer (e.g. including NFs/OAM) to subscribe/unsubscribe at NWDAF to be notified on analytics information, using Nnwdaf_AnalyticsSubscription service defined in clause 7.2. This service is also used by an NWDAF service consumer to modify existing analytics subscription(s). Any entity can consume this service as defined in clause 7.2.\nFigure 6.1.1.1-1: Network data analytics Subscribe/unsubscribe\n1.\tThe NWDAF service consumer subscribes to or cancels subscription to analytics information by invoking the Nnwdaf_AnalyticsSubscription_Subscribe/ Nnwdaf_AnalyticsSubscription_Unsubscribe service operation. The parameters that can be provided by the NWDAF service consumer are listed in clause 6.1.3.\nWhen a subscription to analytics information is received, the NWDAF determines whether triggering new data collection is needed.\nIf the service invocation is for a subscription modification, the NF service consumer includes an identifier (Subscription Correlation ID) to be modified in the invocation of Nnwdaf_AnalyticsSubscription_Subscribe. In addition, if the NWDAF service consumer has taken an action(s) influenced by the previously received analytics information at step 2, which may or may not affect the ground truth data corresponding to Analytics ID requested at the time which the prediction refers to, the NWDAF service consumer may include Analytics Feedback Information in the invocation of Nnwdaf_AnalyticsSubscription_Subscribe.\nIf the subscription relates to outbound roaming users, the NWDAF in the HPLMN may decide to retrieve or to subscribe to input data or analytics from the VPLMN and the detailed procedure is described in clause 6.1.5.3 for analytics retrieval and in clause 6.2.10 for data retrieval.\nIf the subscription relates to inbound roaming users, the NWDAF in the VPLMN may decide to retrieve or to subscribe to input data or analytics from the HPLMN and the detailed procedure is described in clause 6.1.5.2 for analytics retrieval and in clause 6.2.11 for data retrieval.\n2.\tIf NWDAF service consumer is subscribed to analytics information, the NWDAF notifies the NWDAF service consumer with the analytics information by invoking Nnwdaf_AnalyticsSubscription_Notify service operation, based on the request from the NWDAF service consumer, e.g. Analytics Reporting Parameters. If the NWDAF provides a Termination Request, then the consumer cancels subscription to analytics information by invoking the Nnwdaf_AnalyticsSubscription_Unsubscribe service operation.\nWhen calculating the analytics/ML Model Accuracy Information with the retrieved Analytics Feedback Information, in addition to comparing predictions of ML Model and its corresponding ground truth data, the NWDAF may additionally determine/take into account whether the action(s) taken by the NWDAF service consumer affects the ground truth data corresponding to Analytics ID requested at the time which the prediction refers to as described in clauses 6.2D and 6.2E, which may affect the ML Model Accuracy Monitoring/Analytics Accuracy Monitoring.",
      "chunk_type": "general",
      "cross_references": [
        "clause_7.2",
        "clause_6.1.3",
        "clause_6.1.5.3",
        "clause_6.2.10",
        "clause_6.1.5.2",
        "clause_6.2.11",
        "figure_6.1.1.1-1"
      ]
    },
    {
      "chunk_id": "ts_23.288_6.1.1.2",
      "section_id": "6.1.1.2",
      "section_title": "Analytics subscribe/unsubscribe by AFs via NEF",
      "content": "The analytics exposure to AFs may be performed via NEF by using analytics subscription to NWDAF.\nFigure 6.1.1.2-1 illustrates the interaction between AF and NWDAF performed via the NEF.\nFigure 6.1.1.2-1: Procedure for analytics subscribe/unsubscribe by AFs via NEF\n0.\tNEF controls the analytics exposure mapping among the AF identifier with allowed Analytics ID and associated inbound restrictions (i.e. applied to subscription of the Analytics ID for an AF) and/or outbound restrictions (i.e. applied to notification of Analytics ID to an AF).\nIn this Release, AF is configured with the appropriated NEF to subscribe to analytics information, the allowed Analytics ID(s) and with allowed inbound restrictions (i.e. parameters and/or parameter values) for subscription to each Analytics ID.\n1.\tThe AF subscribes to or cancels subscription to analytics information via NEF by invoking the Nnef_AnalyticsExposure_Subscribe/ Nnef_AnalyticsExposure_Unsubscribe service operation defined in TS 23.502 [3]. If the AF wants to modify an existing analytics subscription at NEF, it includes an identifier (Subscription Correlation ID) to be modified in the invocation of Nnef_AnalyticsExposure_Subscribe, in addition, if the AF has taken an action(s) influenced by the previously received analytics information at step 4, which may or may not affect the ground truth data corresponding to Analytics ID requested at the time which the prediction refers to, the AF may include Analytics Feedback Information in the invocation of Nnef_AnalyticsExposure_Subscribe. If the analytics information subscription is authorized by the NEF, the NEF proceeds with the steps below.\n2.\tBased on the request from the AF, the NEF subscribes to or cancels subscription to analytics information by invoking the Nnwdaf_AnalyticsSubscription_Subscribe/ Nnwdaf_AnalyticsSubscription_Unsubscribe service operation.\nIf the parameters and/or parameters values of the AF request comply with the inbound restriction in the analytics exposure mapping, NEF forwards in the subscription to NWDAF service the Analytics ID, parameters and/or parameters values from the AF request.\nIf the request from AF does not comply with the restrictions in the analytics exposure mapping, NEF may apply restrictions to the subscription request to NWDAF (e.g. restrictions to parameters or parameter values of the Nnwdaf_AnalyticsSubscription_Subscribe service operations), based on operator configuration and/or may apply parameter mapping (e.g. geo coordinate mapping to TA(s)/Cell-id(s)).\nThe NEF records the association of the analytics request from the AF and the analytics request sent to the NWDAF.\nThe NEF selects an NWDAF that supports analytics information requested by the AF using the NWDAF discovery procedure defined in TS 23.502 [3].\nIf the subscription relates to outbound roaming users, the NWDAF in the HPLMN may decide to retrieve or to subscribe to input data or analytics from the VPLMN and the detailed procedure is described in clause 6.1.5.3 for analytics retrieval and in clause 6.2.10 for data retrieval.\nIf the AF request is for a modification of the existing analytics subscription(s), the NEF invokes Nnwdaf_AnalyticsSubscription_Subscribe to modify the analytics subscription identified by an identifier (Subscription Correlation ID) associated with the AF.\n3.\tIf the NEF has subscribed to analytics information, the NWDAF notifies the NEF with the analytics information or Termination Request by invoking Nnwdaf_AnalyticsSubscription_Notify service operation.\n4.\tIf the NEF receives the notification from the NWDAF, the NEF notifies the AF with the analytics information or Termination Request by invoking Nnef_AnalyticsExposure_Notify service operation defined in TS 23.502 [3]. NEF may apply outbound restrictions to the notifications to AFs (e.g. restrictions to parameters or parameter values of the Nnef_AnalyticsExposure_Notify service operation) based on analytics exposure mapping and may apply parameter mapping for external usage (e.g. TA(s), cell ID(s) to geo coordinate). The AF checks if a Termination Request is present in the Nnef_AnalyticsExposure_Notify as defined in step 2 in clause 6.1.1.1.\nWhen calculating the analytics/ML Model Accuracy Information with the retrieved Analytics Feedback Information, in addition to comparing predictions of ML Model and its corresponding ground truth data, the NWDAF may determine/take into account whether the action(s) taken by the AF, when AF provides Analytics Feedback Information, affects the ground truth data corresponding to Analytics ID requested at the time which the prediction refers to or start rating AF(s) used as data sources, as described in clauses 6.2D, 6.2E and 6.2.13, which may affect the ML Model Accuracy Monitoring/Analytics Accuracy Monitoring.",
      "chunk_type": "general",
      "cross_references": [
        "clause_6.1.5.3",
        "clause_6.2.10",
        "clause_6.1.1.1",
        "figure_6.1.1.2-1",
        "ts_23.502"
      ]
    },
    {
      "chunk_id": "ts_23.288_6.1.2.1",
      "section_id": "6.1.2.1",
      "section_title": "Analytics request by NWDAF service consumer",
      "content": "This procedure is used by the NWDAF service consumer (e.g. including NFs/OAM) to request and get from NWDAF analytics information, using Nnwdaf_AnalyticsInfo service defined in clause 7.3.\nFigure 6.1.2.1-1: Network data analytics Request\n1.\tThe NWDAF service consumer requests analytics information by invoking Nnwdaf_AnalyticsInfo_Request service operation. The parameters that can be provided by the NWDAF service consumer are listed in clause 6.1.3.\nWhen a request for analytics information is received, the NWDAF determines whether triggering new data collection is needed.\nIf the analytics request relates to outbound roaming users, the NWDAF in the HPLMN may decide to retrieve input data or analytics from the related VPLMN and the detailed procedure is described in clause 6.1.5.3 for analytics retrieval and in clause 6.2.10 for data retrieval.\nIf the analytics request relates to inbound roaming users, the NWDAF in the VPLMN may decide to retrieve input data or analytics, from the related HPLMN and the detailed procedure is described in clause 6.1.5.2 for analytics retrieval and in clause 6.2.11 for data retrieval.\n2.\tThe NWDAF responds with analytics information to the NWDAF service consumer. The NWDAF checks if a Termination Request is indicated as defined in step 2 in clause 6.1.1.1.",
      "chunk_type": "general",
      "cross_references": [
        "clause_7.3",
        "clause_6.1.3",
        "clause_6.1.5.3",
        "clause_6.2.10",
        "clause_6.1.5.2",
        "clause_6.2.11",
        "clause_6.1.1.1",
        "figure_6.1.2.1-1"
      ]
    },
    {
      "chunk_id": "ts_23.288_6.1.2.2",
      "section_id": "6.1.2.2",
      "section_title": "Analytics request by AFs via NEF",
      "content": "The analytics exposure to AFs may be performed via NEF by using analytics request to NWDAF.\nFigure 6.1.2.2-1 illustrates the interaction between AF and NWDAF performed via the NEF.\nFigure 6.1.2.2-1: Procedure for analytics request by AFs via NEF\n0.\tNEF controls the analytics exposure mapping among the AF identifier with allowed Analytics ID(s) and associated inbound restrictions (i.e. applied to the Analytics ID requested by AF) and/or outbound restrictions (i.e. applied to the response of Analytics ID to AF).\nIn this Release, AF is configured, e.g. via static OAM configuration, with the appropriated NEF to subscribe to analytics information, the allowed Analytics ID(s) and with allowed inbound restrictions (i.e. parameters and/or parameter values) for requesting each Analytics ID.\n1.\tThe AF requests to receive analytics information via NEF by invoking the Nnef_AnalyticsExposure_Fetch service operation defined in TS 23.502 [3]. If the analytics information request is authorized by the NEF, the NEF proceeds with the steps below.\n2.\tBased on the request from the AF, the NEF requests analytics information by invoking the Nnwdaf_AnalyticsInfo_Request service operation.\nIf the parameters and/or parameters values of the AF request comply with the restriction in the analytics exposure mapping, NEF forwards in the subscription to NWDAF service the Analytics ID, parameters and/or parameters values from AF in the request to NWDAF.\nIf the request from AF does not comply with the restrictions in the analytics exposure mapping, NEF may apply restrictions to the request to NWDAF (e.g. restrictions to parameters or parameter values of the Nnwdaf_AnalyticsInfo_Request service operations) based on operator configuration and/or may apply parameter mapping (e.g. geo coordinate mapping to TA(s), Cell-id(s)).\nThe NEF records the association of the analytics request from the AF and the analytics request sent to the NWDAF.\nThe NEF selects an NWDAF that supports analytics information requested by the AF using the NWDAF discovery procedure defined in TS 23.501 [2].\nIf the analytics request relates to outbound roaming users, the NWDAF in the HPLMN may decide to retrieve input data or analytics from the related VPLMN and the detailed procedure is described in clause 6.1.5.3 for analytics retrieval and in clause 6.2.10 for data retrieval.\n3.\tThe NWDAF responds with the analytics information to the NEF.\n4.\tThe NEF responds with the analytics information to the AF. NEF may apply restrictions to the response to AFs (e.g. restrictions to parameters or parameter values of the Nnef_AnalyticsExposure_Fetch response service operation) based on operator configuration. The AF checks if a Termination Request is present and then follows as defined in step 2 in clause 6.1.1.1.",
      "chunk_type": "general",
      "cross_references": [
        "clause_6.1.5.3",
        "clause_6.2.10",
        "clause_6.1.1.1",
        "figure_6.1.2.2-1",
        "ts_23.502",
        "ts_23.501"
      ]
    },
    {
      "chunk_id": "ts_23.288_6.1.3",
      "section_id": "6.1.3",
      "section_title": "Contents of Analytics Exposure",
      "content": "The consumers of the Nnwdaf_AnalyticsSubscription_Subscribe or Nnwdaf_AnalyticsInfo_Request service operations described in clause 7 provide the input parameters listed below.\n-\tA list of Analytics IDs: identifies the requested analytics.\n-\tAnalytics Filter Information: indicates the conditions to be fulfilled for reporting Analytics Information. This set of optional parameter types and values enables to select which type of analytics information is requested. Analytics Filter Information is defined in the analytics related clauses.\n-\tTarget of Analytics Reporting: indicates the object(s) for which Analytics information is requested, entities such as specific list of UEs, i.e. a list of SUPIs, group of UEs, i.e. a list of Internal-Group-Ids, or any UE (i.e. all UEs).\n-\t(Only for Nnwdaf_AnalyticsSubscription_Subscribe) A Notification Target Address (+ Notification Correlation ID) as defined in clause 4.15.1 of TS 23.502 [3], allowing to correlate notifications received from NWDAF with this subscription.\n-\t(Only for Nnwdaf_AnalyticsSubscription_Subscribe) Subscription Correlation ID: identifies an existing analytics subscription that is to be modified.\n-\tRelated to analytic consumers that aggregate analytics from multiple NWDAF subscriptions:\n-\t[OPTIONAL] (Set of) NWDAF identifiers of NWDAF instances used by the NWDAF service consumer when aggregating multiple analytics subscriptions. See clause 6.1A.\n-\tAnalytics Reporting Information with the following parameters:\n-\t(Only for Nnwdaf_AnalyticsSubscription_Subscribe) Analytics Reporting Parameters as per Event Reporting parameters defined in Table 4.15.1-1 of TS 23.502 [3].\nNOTE 1:\tWhen the Analytics Reporting Parameters indicates a periodic reporting mode and the periodicity of the report is equal to or greater than the Supported Analytics Delay associated with the Analytics ID (if available) defined in clause 6.2.6.2 of TS 23.501 [2], it is expected that the periodic reporting can be provided by the NWDAF as requested.\n-\t(Only for Nnwdaf_AnalyticsSubscription_Subscribe) Reporting Thresholds, which indicate conditions on the level of each requested analytics that when reached shall be notified by the NWDAF.\n-\t[OPTIONAL] Matching direction: A matching direction may be provided such as below, above, or crossed. If no matching direction is provided, the default direction is crossed.\n-\t[OPTIONAL] Acceptable deviation: An acceptable deviation from the threshold level in the non-critical direction (i.e. in which the QoS is improving) may be set to limit the amount of signalling.\n-\tAnalytics target period: time interval [start..end], either in the past (both start time and end time in the past) or in the future (both start time and end time in the future). An Analytics target period in the past is a request or subscription for statistics. An Analytics target period in the future is a request or subscription for predictions. The time interval is expressed with actual start time and actual end time (e.g. via UTC time). When the Analytics Reporting Parameters indicate a periodic reporting mode, the time interval can also be expressed as positive or negative offsets to the reporting time, which indicates a subscription for predictions or statistics respectively. By setting start time and end time to the same value, the consumer of the analytics can request analytics or subscribe to analytics for a specific time rather than for a time interval.\n-\tTime window for historical analytics: time interval [start..end]. The time window for historical analytics indicates the time interval during which the historical analytics was generated. If the time window for historical analytics is included, the NWDAF only needs to provide the existing analytics, and does not need to generate new analytics.\n-\t[OPTIONAL] Data time window: if specified, only events that have been created in the specified time interval are considered for the analytics generation.\n-\t[OPTIONAL] Preferred level of accuracy of the analytics (\"Low\", \"Medium\", \"High\" or \"Highest\").\n-\t[OPTIONAL] Preferred level of accuracy per analytics subset (\"Low\", \"Medium\", \"High\" or \"Highest\"). When a preferred level of accuracy is expressed for a given analytics subset, it takes precedence for this subset over the above preferred level of accuracy of the analytics. Analytics subsets are defined in the \"Output Analytics\" clause of applicable analytics.\n-\t[OPTIONAL] Dataset Statistical Properties: information in order to influence the data selection mechanisms to be used for the generation of an Analytics ID, assuring that the generated Analytics ID reflects the statistical characteristics of the data that are relevant for the NWDAF consumer. The following dataset statistical properties are allowed:\n-\tUniformly distributed datasets, which indicates the use of data samples that are uniformly distributed according to the different aspects of the requested analytics (e.g. equivalent data samples for each UE listed as a Target of Analytics Reporting or for S-NSSAIs included in the Analytics Filter Information).\n-\tDatasets with or without outliers, which indicates that the data samples shall consider or disregard data samples that are at the extreme boundaries of the value range.\n-\tTime when analytics information is needed (if applicable): indicates to the NWDAF the latest time the analytics consumer expects to receive analytics data provided by the NWDAF. It should not be set to a value less than the Supported Analytics Delay of the selected NWDAF if applicable. If the time is reached the consumer does not need to wait for the analytics information any longer, yet the NWDAF may send an error response or error notification to the consumer. \"Time when analytics information is needed\" is a relative time interval as the gap with respect to analytics request /subscription (e.g. \"in 10 minutes\").\nNOTE 2:\tIf the analytics request contains the parameter \"Time when analytics information is needed\" for Analytics ID(s), this parameter takes precedence over the requested periodicity, if a periodic reporting mode is requested.\nNOTE 3:\tIf the Time when analytics information is needed is provided and it is less than the Supported Analytics Delay per Analytics ID (if available) defined in clause 6.2.6.2 of TS 23.501 [2], it is expected that the NWDAF might not be able to treat the Analytics ID on time.\n-\t[OPTIONAL] Maximum number of objects requested by the consumer (max) to limit the number of objects in a list of analytics per Nnwdaf_AnalyticsSubscription_Notify or Nnwdaf_AnalyticsInfo_Request response.\n-\t[OPTIONAL] Preferred granularity of location information: \"TA level\", \"cell level\" or \"longitude and latitude level\".\nNOTE 4:\tAs defined in clause 4 of TS 23.032 [34], longitude and latitude level means the location information is expressed as longitude and latitude in geographical coordinate instead of TA ID or cell ID that is only known in 3GPP system. It also stands for the location information that is expressed as a reference point in local co-ordinate.\n-\t[OPTIONAL] Spatial granularity size: maximum number of TA or cells used to define an area for which analytics are provided. When this parameter is provided, the NWDAF should provide analytics per group of TA of cells accordingly.\n-\t[OPTIONAL] Temporal granularity size: minimum duration of each time slot for which analytics are provide. When this parameter is provided, the NWDAF should provide analytics per elementary time slot accordingly.\nNOTE 5:\tIt is up to NWDAF implementation to determine whether the data is taken into account that the UE locates in an area for a shorter time than the Temporal granularity size.\n-\t[OPTIONAL] Preferred orientation of location information: (\"horizontal\", \"vertical\", \"both\").\n-\t[OPTIONAL] Preferred order of results when a list of analytics is returned, possibly with a criterion for identifying the property of the results to which the preferred ordering is applied.\n-\t[OPTIONAL] Maximum number of SUPIs (SUPImax) requested by the consumer to limit the number of SUPIs in an object. When SUPImax is not provided, the NWDAF shall return all SUPIs concerned by the analytics object. When SUPImax is set to 0, the NWDAF shall not provide any SUPI.\n-\t[OPTIONAL] Output strategy: indicates the relevant factors for determining when the analytics reported. The following values are allowed:\n-\tBinary output strategy: indicates that the analytics shall only be reported when the preferred level of accuracy is reached within a cycle of periodic notification as defined in the Analytics Reporting Parameters.\nNOTE 6:\tIf preferred level of accuracy is more important than providing an output, then the binary strategy is used so that all analytics outputs have equivalent confidence in the prediction.\n-\tGradient output strategy: indicates that the analytics shall be reported according to the periodicity defined in the Analytics Reporting Parameters irrespective if the preferred level of accuracy has been reached.\nNOTE 7:\tIf having an analytics output is more important than reaching the preferred level of accuracy, then the gradient output strategy is used so that each NWDAF will timely provide the output indicating the confidence of the prediction at the moment of the output generation.\nNOTE 8:\tWhen no output strategy is included in the subscription, the analytics output will be generated based on the gradient strategy and includes the confidence of the prediction for the reporting period.\n-\t[OPTIONAL] Analytics metadata request: indicates a request from one NWDAF to another NWDAF to provide the \"analytics metadata information\" related to the produced output analytics. This input parameter indicates which parameters in \"analytics metadata information\" are required to aggregate the output analytics for the requested Analytics ID(s).\n-\t(Only for Nnwdaf_AnalyticsSubscription_Subscribe) Consumer NF's serving area or NF ID. During a pending analytics subscription transfer, this information can be used by the NWDAF to find out if the analytics consumers may change as described in clause 6.1B.2.\n-\t(Only for Nnwdaf_AnalyticsSubscription_Subscribe) Information of previous analytics subscription. When setting up the analytics generation, this information may be used to retrieve analytics context from the previous NWDAF in order to build upon the context that is already related to this subscription as described in clause 6.1B.2.1.\n-\t[OPTIONAL] Use case context: indicates the context of use of the analytics to select the most relevant ML Model.\nNOTE 9:\tThe NWDAF can use the parameter \"Use case context\" to select the most relevant ML Model, when several ML Models are available for the requested Analytics ID(s). NWDAF containing AnLF can additionally provide the parameter \"Use case context\" when requesting an ML Model from an NWDAF containing MTLF. The values of this parameter are not standardized. For example, the AMF can use a given value of \"Use case context\" when requesting UE Mobility analytics for optimizing the definition of a Registration Area, and a different value of \"Use case context\" when requesting UE Mobility analytics for determines a paging strategy.\n-\t(Only for Nnwdaf_AnalyticsSubscription_Subscribe) [OPTIONAL] Analytics Feedback Information: indicates that the consumer NF has taken an action(s) influenced by the previously provided analytics, which may or may not affect the ground truth data corresponding to analytic ID requested at the time which the prediction refers to, and consequently affect the ML Model Accuracy Monitoring by the subscription with following parameter(s):\n-\tCorresponding Analytics ID(s) which has been used for taking an action(s);\n-\tIndication whether the action will affect ground truth data (if available);\n-\tTime stamp(s) of the action(s) taken.\nNOTE 10:\tThe consumer NF cannot include Analytics Feedback Information in initial subscription request. Analytics Feedback Information can be included in modification request for the existing analytics subscription.\n-\t[OPTIONAL] Analytics Accuracy Request information with the following parameters:\n-\tAnalytics accuracy request: indicates NWDAF to provide accuracy information to the analytics consumer.\n-\t[OPTIONAL] Analytics Accuracy Information time window: time interval [start. end], which indicates that analytics consumers only consider the accuracy information which is generated within this time interval.\n-\t[OPTIONAL] Analytics Accuracy Information periodicity: time period, which indicates periodic reporting of accuracy information for the corresponding Analytics ID(s).\n-\t[OPTIONAL] Analytics Accuracy threshold: a reporting threshold accuracy value, which indicates that:\n-\tThe NWDAF can provide analytics output and optionally analytics accuracy value to the analytics consumer(s) when the accuracy value is above this Analytics Accuracy threshold (i.e. the accuracy is sufficient according to the threshold);\n-\tThe NWDAF can provide \"Stop Analytics Output Consumption indication\", \"Updated Analytics\" or the Analytics Accuracy Information to the analytics consumer(s) when the accuracy value is under this threshold (This indicates the deviation of the predictions from the actual network data does not meet analytics accuracy requirement, i.e. the accuracy is not sufficient according to the threshold).\n-\t[OPTIONAL] Minimal number of analytics output occurrences: determines the minimal number of analytics outputs provided by NWDAF that have to be considered in the determination of the accuracy information.\n-\t[OPTIONAL] Updated Analytics flag: indicates that the NWDAF can provide updated analytics for provided Analytics ID(s), if updated analytics can be generated within Analytics Accuracy Information time window.\n-\t[OPTIONAL] Correction time period: a relative time interval as the gap with respect to analytics is provided, which is indicated the time interval during which the updated analytics can be accepted by the analytics consumer.\n-\t[OPTIONAL] Pause analytics consumption flag: is a flag indicating to NWDAF to stop sending the notifications of analytics outputs for a subscribed analytics ID, without unsubscribing to such analytics ID.\n-\t[OPTIONAL] Resume Analytics Subscription request: is a flag indicating to NWDAF to resume the notification of analytics outputs for an existing analytics ID(s) subscription(s) that have been previously paused.\nThe NWDAF provides to the consumer of the Nnwdaf_AnalyticsSubscription_Subscribe or Nnwdaf_AnalyticsInfo_Request service operations described in clause 7, the output information listed below, using a Nnwdaf_AnalyticsSubscription_Notify service operation or the Nnwdaf_AnalyticsInfo_Request response, respectively:\n-\t(Only for Nnwdaf_AnalyticsSubscription_Notify) The Notification Correlation Information.\n-\tFor each Analytics ID, the analytics information in the requested Analytics target period. If the analytics subset is subscribed or requested, then the corresponding analytics information shall be provided.\n-\tTimestamp of analytics generation: allows consumers to decide until when the received information shall be used. For instance, an NF can deem a received notification from NWDAF for a given feedback as invalid based on this timestamp;\n-\tValidity period: defines the time period for which the analytics information is valid.\nNOTE 11:\t\tValidity period is determined by NWDAF internal logic and it is a subset of Analytics target period.\n-\tConfidence: probability assertion, i.e. confidence in the prediction.\n-\t[OPTIONAL] For each Analytics ID the Termination Request, which notifies the consumer that the subscription is requested to be cancelled as the NWDAF can no longer serve this subscription, e.g. due to user consent revoked, NWDAF overload, UE moved out of NWDAF serving area, etc.\n-\t[OPTIONAL] Analytics metadata information: additional information required to aggregate the output analytics for the requested Analytics ID(s). This parameter shall be provided if the \"Analytics metadata request\" parameter was provided in the corresponding Nnwdaf_AnalyticsSubscription_Subscribe or Nnwdaf_AnalyticsInfo_Request service operation.\n-\tNumber of data samples used for the generation of the output analytics;\n-\tData time window of the data samples;\n-\tDataset Statistical Properties of the analytics output used for the generation of the analytics;\n-\t[OPTIONAL] Data source(s) of the data used for the generation of the output analytics;\n-\t[OPTIONAL] Data Formatting and Processing applied on the data;\n-\tOutput strategy (i.e. gradient output strategy or binary output strategy) used for the reporting of the analytics.\n-\t(Only for error response or error notification) Revised waiting time: indicates to the consumer a revised waiting value for \"Time when analytics information is needed\". Each NWDAF may include this as part of error response or error notification to \"Time when analytics information is needed\" as described in clause 6.2.5. Revised waiting time is the minimum time interval recommended by NWDAF to use as \"Time when analytics information is needed\" for similar future analytics requests/subscriptions.\n-\t[OPTIONAL] Analytics Accuracy Information generated for each analytics ID, including:\n-\tAnalytics accuracy value for requested Analytics ID(s): a value shall be provided if \"Analytics accuracy request\" parameter was provided in the corresponding Nnwdaf_AnalyticsSubscription_Subscribe service operation. This parameter may be provided if the value crosses the analytics accuracy threshold(s) which is indicated in the subscribe request or locally configured, or the Analytics Accuracy Information periodicity indicated in the subscribe request is reached.\n-\t[OPTIONAL] An indication that the determined accuracy value for the analytics ID does not meet the analytics accuracy threshold requested for the analytics ID.\n-\t[OPTIONAL] Updated Analytics: NWDAF provides updated Analytics, which is generated within Analytics Accuracy Information time window, for provided Analytics ID(s), if \"Updated Analytics flag\" parameter was indicated in the corresponding Nnwdaf_AnalyticsSubscription_Subscribe service operation.\n-\t[OPTIONAL] Stop Analytics Output Consumption indication: NWDAF provides to the consumer an indication to stop the consumption of the Analytics ID(s) related to the subscription ID based on NWDAF internal logic or specified analytics accuracy threshold.\n-\t[OPTIONAL] Stop Analytics Output Consumption time window: NWDAF provides to the consumer a time window to stop the consumption of the Analytics ID(s) related to the subscription ID based on NWDAF internal logic or specified analytics accuracy threshold.\n-\t[OPTIONAL] Resume Analytics Output Consumption indication: NWDAF provides to consumer an indication to resume the consumption of analytics output for existing subscription to the analytics ID(s) that was previously paused.\n-\t[OPTIONAL] Accuracy Information Termination: NWDAF notifies the consumer that the subscription to the accuracy information for an analytics ID has been cancelled as the NWDAF does not support the accuracy checking capability, e.g. as an indication that a new target serving NWDAF supporting accuracy checking capability could not have been selected during the analytics transfer procedures.\nNOTE 12:\tIt is left to Stage 3 to decide whether the Accuracy Information Termination is a cause related to the Termination Request or not.",
      "chunk_type": "general",
      "cross_references": [
        "clause_7",
        "ts_23.502_clause_4.15.1",
        "clause_6.1",
        "ts_23.501_clause_6.2.6.2",
        "ts_23.032_clause_4",
        "clause_6.2.5",
        "ts_23.502_table_4.15.1-1",
        "ts_23.502",
        "ts_23.501",
        "ts_23.032"
      ]
    },
    {
      "chunk_id": "ts_23.288_6.1.4.1",
      "section_id": "6.1.4.1",
      "section_title": "General",
      "content": "This clause specifies procedures for analytics exposure using DCCF services, with two options: analytics can be exposed via DCCF, according to clauses 6.1.4.2 and 6.1.4.3, or can be exposed via a messaging framework according to clauses 6.1.4.4 and 6.1.4.5. Which option to use is determined by DCCF configuration.",
      "chunk_type": "definition",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.288_6.1.4.2",
      "section_id": "6.1.4.2",
      "section_title": "Analytics Exposure via DCCF",
      "content": "The procedure as depicted in Figure 6.1.4.2-1 is used by analytics consumer(s) (e.g. NFs/OAM) to subscribe/unsubscribe to NWDAF analytics and be notified of analytics information via the DCCF, using Ndccf_DataManagement_Subscribe service operation. Whether a NWDAF service consumer directly contacts the NWDAF or goes via the DCCF is based on NWDAF service consumer configuration.\nFigure 6.1.4.2-1: Network data analytics subscription via DCCF\n1.\tAnalytics consumer subscribes to analytics information via DCCF by invoking the Ndccf_DataManagement_Subscribe (Nnwdaf service operation, Analytics Specification, Formatting Instructions, Processing Instructions, NWDAF (or NWDAF-Set) ID, ADRF Information) service operation. The analytics consumer may specify one or more notification endpoints. Analytics consumer decides to go via DCCF based on internal configuration. The \"Analytics Specification\" provides Nnwdaf service operation specific parameters, e.g. Analytics IDs, Target of Analytics Reporting and optional parameters used to retrieve the analytics. The analytics consumer may provide the identity of the NWDAF to collect analytics from. The analytics consumer may provide additional information on possible notification endpoints or ADRF information so analytics are archived.\n2.\tIf the NWDAF instance or NWDAF Set is not identified by the analytics Consumer, the DCCF determines the NWDAF instances that can provide analytics. If the consumer requested storage of analytics in an ADRF but an ADRF ID is not provided by the Analytics Consumer, or the collected analytics is to be stored in an ADRF according to configuration on the DCCF, the DCCF selects an ADRF to store the collected data.\n3.\tThe DCCF determines whether the analytics requested in step 1 are already being collected. If the requested analytics are already being collected by an Analytics Consumer, the DCCF adds the new analytics consumer to the list of analytics consumers that are subscribed for these analytics.\n4.\tIf the analytics subscribed in step 1 partially matches an analytics that is already being collected by the DCCF from an NWDAF and a modification of this subscription to the NWDAF would satisfy both the existing analytics subscriptions as well as the newly requested analytics, the DCCF invokes a modification of the previous subscription via Nnwdaf_AnalyticsSubscription_Subscribe service operation (as specified in clause 6.1.1.1) and the DCCF adds the analytics consumer to the list of analytics consumers that are subscribed for these analytics.\nIf the analytics requested at step 1 are not already available or not being collected yet, the DCCF subscribes to analytics from NWDAF using the Nnwdaf_AnalyticsSubscription_Subscribe procedure as specified in clause 6.1.1.1. The DCCF adds the analytics consumer to the list of analytics consumers that are subscribed for these analytics.\n5.\tWhen new output analytics are available, the NWDAF notifies the analytics information to the DCCF by invoking Nnwdaf_AnalyticsSubscription_Notify service operation.\n6.\tThe DCCF uses Ndccf_DataManagement_Notify to send the analytics to all notification endpoints indicated in step 1. Analytics sent to notification endpoints may be processed and formatted by the DCCF so they conform to delivery requirements for each analytics consumer or notification endpoint as specified in clause 5A.4. The DCCF may store the analytics in the ADRF if requested by the consumer or if required by DCCF configuration, using procedure as specified in clause 6.2B.3.\nNOTE:\tAccording to Formatting Instructions provided by the Analytics Consumer, multiple notifications from a NWDAF can be combined in a single Ndccf_DataManagement_Notify so many notifications from an NWDAF results in fewer notifications (or one notification) to the Analytics Consumer. Alternatively, a notification can instruct the analytics notification endpoint to fetch the analytics from the DCCF.\n7.\tIf a Ndccf_DataManagement_Notify contains a fetch instruction, the notification endpoint sends a Ndccf_DataManagement_Fetch request to fetch the analytics from the DCCF before an expiry time.\n8.\tThe DCCF delivers the analytics to the notification endpoint.\n9.\tWhen the Analytics Consumer no longer wants analytics to be collected it invokes Ndccf_DataManagement_Unsubscribe (Subscription Correlation ID), using the Subscription Correlation ID received in response to its subscription in step 1. The DCCF removes the analytics consumer from the list of analytics consumers that are subscribed for these analytics.\n10.\tIf there are no other Analytics Consumers subscribed to the analytics, the DCCF unsubscribes with the NWDAF.",
      "chunk_type": "general",
      "cross_references": [
        "clause_6.1.1.1",
        "clause_5",
        "clause_6.2",
        "figure_6.1.4.2-1"
      ]
    },
    {
      "chunk_id": "ts_23.288_6.1.4.3",
      "section_id": "6.1.4.3",
      "section_title": "Historical Analytics Exposure via DCCF",
      "content": "The procedure as depicted in Figure 6.1.4.3-1 is used by an analytics consumer (e.g. NFs/OAM) to obtain historical analytics via the DCCF. Historical analytics may be previously computed statistics or predictions stored in an NWDAF or ADRF. Statistics may have been previously computed and stored in the ADRF or NWDAF and can be identified by a \"target period\" in the past (see clause 6.1.3). Requests for previously computed predictions have a \"Time Window\", which specifies an allowable span for when the predictions may have been computed. This allows the Analytics Consumer to request previously computed predictions for a target period.\nThe analytics consumer requests analytics via the DCCF, using Ndccf_DataManagement_Subscribe service operation. Whether the NWDAF service consumer directly contacts the NWDAF/ADRF or goes via the DCCF is based on configuration.\nFigure 6.1.4.3-1: Historical Analytics Exposure via DCCF\n1.\tThe analytics consumer requests analytics via DCCF by invoking the Ndccf_DataManagement_Subscribe (Nnwdaf service operation, Analytics Specification, Time Window, Formatting Instructions, Processing Instructions, ADRF ID or NWDAF ID (or ADRF Set ID or NWDAF Set ID) service operation as specified in clause 8.2.2. The analytics consumer may specify one or more notification endpoints to receive the analytics.\nParameter \"Nnwdaf service operation\" is the service operation used to originally acquire the analytics and identifies this as a request for analytics, \"Analytics Specification\" provides Nnwdaf service operation specific parameters, e.g. Analytics IDs, Target of Analytics Reporting and optional parameters used to retrieve the analytics. \"Time Window\" specifies a past time period and comprises a start and stop time indicating when predictions were computed and \"Formatting and Processing Instructions\" are as defined in clause 5A.4. The analytics consumer may optionally include the ADRF or NWDAF instance (or ADRF Set or NWDAF Set) ID where the stored analytics resides.\n2.\tIf an ADRF or NWDAF instance or ADRF or NWDAF Set ID is not provided by the analytics consumer, the DCCF determines if any ADRF or NWDAF instances might provide the analytics as described in clause 5A and clause 5B.\n3.\t(conditional) If the DCCF determines that an ADRF instance might provide the analytics, or an ADRF instance or Set was supplied by the analytics consumer, the DCCF sends a request to the ADRF, using Nadrf_DataManagement_RetrievalSubscribe (Analytics Specification, Notification Target Address=DCCF) service operation, as specified in clause 10.2. The ADRF responds to the DCCF with an Nadrf_DataManagement_RetrievalSubscribe response indicating if the ADRF can supply the analytics. If the analytics can be provided, the procedure continues with step 5.\n4.\t(conditional) If the DCCF determines that an NWDAF instance might provide the analytics or an NWDAF instance or Set was supplied by the Analytics Consumer, the DCCF sends a request to the NWDAF using Nnwdaf_AnalyticsSubscription_Subscribe as specified in clause 7.2.2.\n5.\tThe ADRF uses Nadrf_DataManagement_RetrievalNotify or the NWDAF uses Nnwdaf_AnalyticsSubscription_Notify to send the requested analytics (e.g. one or more stored notifications archived from an NWDAF) to the DCCF. The analytics may be sent in one or more notification messages.\n6.\tThe DCCF uses Ndccf_DataManagement_Notify to send analytics to all notification endpoints indicated in step 1. Notifications are sent to the Notification Target Address(es) using the Analytics Consumer Notification Correlation ID(s) received in step 1. Analytics sent to notification endpoints may be processed and formatted by the DCCF, so they conform to delivery requirements specified by the analytics consumer.\nNOTE:\tAccording to Formatting Instructions provided by the analytics consumer, multiple notifications from an ADRF or NWDAF can be combined in a single Ndccf_DataManagement_Notify so many notifications from the ADRF or NWDAF results in fewer notifications (or one notification) to the Analytics Consumer. Alternatively, a Ndccf_DataManagement_Notify can instruct the analytics notification endpoint to fetch the analytics from the DCCF before an expiry time.\n7.\tIf a notification contains a fetch instruction, the notification endpoint sends a Ndccf_DataManagement_Fetch request as specified in clause 8.2.5 to fetch the analytics from the DCCF.\n8.\tThe DCCF delivers the analytics to the notification endpoint.\n9.\tWhen the analytics consumer no longer wants analytics to be collected or has received all the analytics it needs, it invokes Ndccf_DataManagement_Unsubscribe (Subscription Correlation ID), using the Subscription Correlation Id received in response to its subscription in step 1.\n10.\tIf the analytics are being provided by an ADRF and there are no other analytics consumers subscribed to the analytics, the DCCF unsubscribes with the ADRF using Nadrf_DataManagement_RetrievalUnsubscribe as specified in clause 10.2.7.\n11.\tIf the analytics are being provided by an NWDAF and there are no other analytics consumers subscribed to the analytics, the DCCF unsubscribes with the NWDAF using Nnwdaf_AnalyticsSubscription_Unsubscribe service operation as specified in clause 7.2.3.",
      "chunk_type": "general",
      "cross_references": [
        "clause_6.1.3",
        "clause_8.2.2",
        "clause_5",
        "clause_10.2",
        "clause_7.2.2",
        "clause_8.2.5",
        "clause_10.2.7",
        "clause_7.2.3",
        "figure_6.1.4.3-1"
      ]
    },
    {
      "chunk_id": "ts_23.288_6.1.4.4",
      "section_id": "6.1.4.4",
      "section_title": "Analytics Exposure via Messaging Framework",
      "content": "The procedure as depicted in Figure 6.1.4.4-1 is used by analytics consumer(s) (e.g. NFs/OAM) to subscribe/unsubscribe to NWDAF analytics and be notified of analytics information, using Ndccf_DataManagement_Subscribe service operation. The 3GPP DCCF Adaptor (3da) Data Management service and 3GPP Consumer Adaptor (3ca) Data Management service of the Messaging Framework Adaptor Function (MFAF) are used to interact with the 3GPP Network and the Messaging Framework. Whether a NWDAF service consumer directly contacts the NWDAF or goes via the DCCF is based on NWDAF service consumer configuration.\nFigure 6.1.4.4-1: Network data analytics subscription via DCCF\n1.\tAnalytics consumer subscribes to analytics information via DCCF by invoking the Ndccf_DataManagement_Subscribe (Nnwdaf service operation, Analytics Specification, Formatting Instructions, Processing Instructions, NWDAF (or NWDAF-Set) ID, ADRF Information, Analytics Consumer Notification Target Address (+ Notification Correlation ID)) service operation. The analytics consumer may specify one or more notification endpoints. Analytics consumer decides to go via DCCF based on internal configuration. The \"Analytics Specification\" provides Nnwdaf service operation specific parameters, e.g. Analytics IDs, Target of Analytics Reporting and optional parameters used to retrieve the analytics. The analytics consumer may provide the identity of the NWDAF to collect analytics from. The analytics consumer may provide additional information on possible notification endpoints or ADRF information to archive analytics.\n2.\tIf the NWDAF instance or NWDAF Set is not identified by the analytics consumer, the DCCF determines the NWDAF instances that can provide analytics. If the consumer requested storage of analytics in an ADRF but an ADRF ID is not provided by the Analytics Consumer, or the collected analytics is to be stored in an ADRF according to configuration on the DCCF, the DCCF selects an ADRF to store the collected analytics.\n3.\tThe DCCF determines whether the analytics requested in step 1 are already being collected. If the requested analytics are already being collected by an analytics consumer, the DCCF adds the new analytics consumer to the list of analytics consumers that are subscribed for these analytics.\n4.\tThe DCCF sends an Nmfaf_3daDataManagement_Configure (Analytics Consumer Information, MFAF Notification Information, Formatting Conditions, Processing Instructions) to configure the MFAF to map notifications received from the NWDAF to outgoing notifications sent to endpoints and to instruct the MFAF how to format and process the outgoing notifications.\n\"Analytics Consumer Information\" contains for each notification endpoint, the analytics consumer Notification Target Address (+ Analytics Consumer Notification Correlation ID) to be used by the MFAF when sending notifications in step 7.\n\"MFAF Notification Information\" is included if an NWDAF is already sending the analytics to the MFAF. MFAF Notification Information identifies Event Notifications received from the NWDAF and comprises the MFAF Notification Target Address (+ MFAF Notification Correlation ID). If the MFAF does not receive MFAF Notification information from the DCCF, the MFAF selects an MFAF Notification Target Address (+ MFAF Notification Correlation ID) and sends the MFAF Notification Information, containing the MFAF Notification Target Address (+ MFAF Notification Correlation ID), to the DCCF in the Nmfaf_3daDataManagement_Configure Response.\n5.\tIf the analytics subscribed in step 1 partially matches analytics that are already being collected by the DCCF from a NWDAF and a modification of this subscription to the NWDAF would satisfy both the existing analytics subscriptions as well as the newly requested analytics, the DCCF invokes Nnwdaf_AnalyticsSubscription_Subscribe (Subscription Correlation ID) with parameters indicating how to modify the previous subscription (as specified in clause 6.1.1.1). The DCCF adds the analytics consumer to the list of analytics consumers that are subscribed for these analytics.\nIf the analytics requested at step 1 are not already available or not being collected yet, the DCCF subscribes to analytics from the NF using Nnwdaf_AnalyticsSubscription_Subscribe, setting the Notification Target Address (+Notification Correlation ID)) to the MFAF Notification Target Address (+ MFAF Notification Correlation ID) received in step 4. The DCCF adds the analytics consumer to the list of analytics consumers that are subscribed for these analytics.\n6.\tWhen new output analytics are available, the NWDAF uses Nnwdaf_AnalyticsSubscription_Notify to send the analytics to the MFAF. The Notification includes the MFAF Notification Correlation ID.\n7.\tThe MFAF uses Nmfaf_3caDataManagement_Notify to send the analytic to all notification endpoints indicated in step 4. Notifications are sent to the Notification Target Address(es) using the Analytics Consumer Notification Correlation ID(s) received in step 4. Analytics sent to notification endpoints may be processed and formatted by the MFAF, so they conform to delivery requirements specified by the analytics consumer. The MFAF may store the information in the ADRF if requested by consumer or if required by DCCF configuration, using procedure as specified in clause 6.2B.3.\nNOTE:\tAccording to Formatting Instructions provided by the Analytics Consumer, multiple notifications from a NWDAF can be combined in a single Nmfaf_3caDataManagement_Notify, so many notifications from the NWDAF results in fewer notifications (or one notification) to the analytics consumer. Alternatively, a notification can instruct the analytics notification endpoint to fetch the analytics from the MFAF before an expiry time.\n8.\tIf a Nmfaf_3caDataManagement_Notify contains a fetch instruction, the notification endpoint sends a Nmfaf_3caDataManagement_Fetch request to fetch the analytics from the MFAF.\n9.\tThe MFAF delivers the analytics to the notification endpoint.\n10.\tWhen the analytics consumer no longer wants analytics to be collected, it invokes Ndccf_DataManagement_Unsubscribe (Subscription Correlation ID), using the Subscription Correlation Id received in response to its subscription in step 1. The DCCF removes the analytics consumer from the list of analytics consumers that are subscribed for these analytics.\n11.\tIf there are no other analytics consumers subscribed to the analytics, the DCCF unsubscribes with the NWDAF.\n12.\tThe DCCF de-configures the MFAF so it no longer maps notifications received from the NWDAF to the notification endpoints configured in step 4.",
      "chunk_type": "general",
      "cross_references": [
        "clause_6.1.1.1",
        "clause_6.2",
        "figure_6.1.4.4-1"
      ]
    },
    {
      "chunk_id": "ts_23.288_6.1.4.5",
      "section_id": "6.1.4.5",
      "section_title": "Historical Analytics Exposure via Messaging Framework",
      "content": "The procedure as depicted in Figure 6.1.4.5-1 is used by an analytics consumer (e.g. NFs/OAM) to obtain historical analytics via the messaging framework. Historical analytics may be previously computed statistics or predictions stored in an NWDAF or ADRF. Statistics may be previously computed and stored in the ADRF or NWDAF and can be identified by a \"target period\" in the past (see clause 6.1.3). Requests for previously computed predictions have a \"Time Window\", which specifies an allowable span for when the predictions may have been computed. This allows the analytics consumer to request previously computed predictions for a target period.\nThe analytics consumer requests analytics via the DCCF, using Ndccf_DataManagement_Request service operation. Whether the NWDAF service consumer directly contacts the NWDAF/ADRF, or goes via the DCCF is based on configuration.\nFigure 6.1.4.5-1: Historical Analytics Exposure via Messaging Framework\n1.\tThe analytics consumer requests analytics via DCCF by invoking the Ndccf_DataManagement_Subscribe (Nnwdaf service operation, Analytics Specification, Time Window, Formatting Instructions, Processing Instructions, ADRF ID or NWDAF ID (or ADRF Set ID or NWDAF Set ID)). The analytics consumer may specify one or more notification endpoints to receive the analytics.\n2.\tIf an ADRF or NWDAF instance or ADRF or NWDAF Set ID is not provided by the Analytics Consumer, the DCCF determines if any ADRF or NWDAF instances might provide the analytics as described in clause 5A and clause 5B.\n3.\tThe DCCF sends an Nmfaf_3daDataManagement_Configure (Analytics Consumer Information, Formatting Conditions, Processing Instructions) to configure the MFAF to map notifications received from the ADRF or NWDAF to outgoing notifications sent to endpoints and to instruct the MFAF how to format and process the outgoing notifications.\n\"Analytics Consumer Information\" contains for each notification endpoint, the analytics consumer Notification Target Address (+ Analytics Consumer Notification Correlation ID) to be used by the MFAF when sending notifications. The MFAF selects an MFAF Notification Target Address (+ MFAF Notification Correlation ID) and sends the MFAF Notification Information, containing the MFAF Notification Target Address (+ MFAF Notification Correlation ID), to the DCCF in the Nmfaf_3daDataManagement_Configure Response.\n4.\t(conditional) If the DCCF determines that an ADRF instance might provide the analytics, or an ADRF instance or Set was supplied by the Analytics Consumer, the DCCF sends a request to the ADRF, using Nadrf_DataManagement_RetrievalSubscribe (Analytics Specification, MFAF Notification Information) as specified in clause 10.2.6. The MFAF Notification information contains the MFAF Notification Target Address (+ MFAF Notification Correlation ID) received in step 3.\n5.\tThe ADRF responds to the DCCF with an Nadrf_DataManagement_RetrievalSubscribe response indicating if the ADRF can supply the analytics. If the analytics can be provided, the procedure continues with step 8.\n6.\t(conditional) If the DCCF determines that an NWDAF instance might provide the analytics or an NWDAF instance or Set was supplied by the Analytics Consumer, the DCCF sends a request to the NWDAF using Nnwdaf_AnalyticsSubscription_Subscribe as specified in clause 7.2.2. The MFAF Notification Information contains the MFAF Notification Target Address (+ MFAF Notification Correlation ID) received in step 3.\n7.\tThe NWDAF responds to the DCCF with an Nnwdaf_AnalyticsSubscription_Subscribe response indicating if the NWDAF can supply the analytics.\n8.\tThe ADRF uses Nadrf_DataManagement_RetrievalNotify or the NWDAF uses Nnwdaf_AnalyticsSubscription_Notify to send the requested analytics (e.g. one or more stored notifications archived from an NWDAF) to the MFAF. The analytics may be sent in one or more notification messages.\n9.\tThe MFAF uses Nmfaf_3caDataManagement_Notify to send analytics to all notification endpoints indicated in step 3. Notifications are sent to the Notification Target Address(es) using the Analytics Consumer Notification Correlation ID(s) received in step 3. Analytics sent to notification endpoints may be processed and formatted by the DCCF, so they conform to delivery requirements specified by the analytics consumer.\nNOTE:\tAccording to Formatting Instructions provided by the Analytics Consumer, multiple notifications from an ADRF or NWDAF can be combined in a single Ndccf_DataManagement_Notify so many notifications from the ADRF or NWDAF results in fewer notifications (or one notification) to the Analytics Consumer. Alternatively, a Nmfaf_3caDataManagement_Notify can instruct the analytics notification endpoint to fetch the analytics from the DCCF before an expiry time.\n10.\tIf a notification contains a fetch instruction, the notification endpoint sends a Nmfaf_3caDataManagement_Fetch request as specified in clause 9.3.3 to fetch the analytics from the MFAF.\n11.\tThe DCCF delivers the analytics to the notification endpoint.\n12.\tWhen the analytics consumer no longer wants analytics to be collected or has received all the analytics it needs, it invokes Ndccf_DataManagement_Unsubscribe (Subscription Correlation ID) as specified in clause 8.2.3, using the Subscription Correlation Id received in response to its subscription in step 1.\n13.\tIf the analytics are being provided by an ADRF and there are no other analytics consumers subscribed to the analytics, the DCCF invokes Nadrf_DataManagement_RetrievalUnsubscribe as specified in clause 10.2.7 to unsubscribe from the ADRF.\n14.\tIf the analytics are being provided by an NWDAF and there are no other analytics consumers subscribed to the analytics, the DCCF invokes Nnwdaf_AnalyticsSubscription_Unsubscribe service operation as specified in clause 7.2.3 to unsubscribe from the NWDAF\n15.\tThe DCCF de-configures the MFAF so it no longer maps notifications received from the NWDAF to the notification endpoints configured in step 3.",
      "chunk_type": "general",
      "cross_references": [
        "clause_6.1.3",
        "clause_5",
        "clause_10.2.6",
        "clause_7.2.2",
        "clause_9.3.3",
        "clause_8.2.3",
        "clause_10.2.7",
        "clause_7.2.3",
        "figure_6.1.4.5-1"
      ]
    },
    {
      "chunk_id": "ts_23.288_6.1.5.1",
      "section_id": "6.1.5.1",
      "section_title": "General",
      "content": "Based on roaming agreements (e.g. SLA), analytics may be exchanged between PLMNs (i.e. HPLMN and VPLMN of a UE served by the NWDAF analytics consumer). In this case, an NWDAF with roaming exchange capability (RE-NWDAF) is used as entry point in a PLMN to exchange analytics in roaming scenario with other PLMNs. It authorizes the analytics request according to roaming agreements, and filters the information exposed to other PLMNs. The roaming architecture is defined in clause 4.3.\nThe H-RE-NWDAF may provide analytics to the V-RE-NWDAF. The V-RE-NWDAF may provide analytics to the H-RE-NWDAF.\nNOTE 1:\tThe roaming agreements (e.g. SLA) between HPLMN and VPLMN on network analytics and data exchange takes into consideration all relevant regulatory requirements.\nNOTE 2:\tIt depends on the deployment whether analytics exchange between PLMNs is supported, and thus whether H-RE-NWDAF and V-RE-NWDAF are provided in a PLMN.\nThe H-RE-NWDAF or V-RE-NWDAF provides the Nnwdaf_RoamingAnalytics service for that purpose. An RE-NWDAF is the only consumer of these services, i.e. both NWDAF in HPLMN and NWDAF in VPLMN need to have the roaming exchange capability (in other words, be an H-RE-NWDAF or V-RE-NWDAF, respectively) when used as entry point or exit point to exchange analytics in roaming scenario.\nNOTE 3:\tThe access to the Nnwdaf_AnalyticsSubscription service and the Nnwdaf_AnalyticsInfo service is expected to be restricted by the NRF to NF service consumers within the same PLMN to prevent bypassing checks based on user consent and operator policy\nNOTE 4:\tSee clause X.7 and Annex V of TS 33.501 [49] for details of the user consent check procedures. See clause X.8 of TS 33.501 [49] for protection of analytics exchange in roaming case.\nV-RE-NWDAF may request or subscribe to HPLMN analytics from the H-RE-NWDAF as described in clause 6.1.5.2, and then the analytics can be leveraged by the 5GC NF in the VPLMN, for example:\n-\tIn home routed roaming scenarios, HPLMN analytics (i.e. slice load level analytics, NF load analytics, etc.) can be leveraged by the AMF in the VPLMN for network slice selection and SMF selection for PDU Session management.\n-\tUE-related analytics (e.g.. service experience analytics, etc.) can include statistics or predictions for outbound roaming UEs.\nNOTE 5:\tAnalytics that rely on input data from the VPLMN are preferably not provided from H-RE-NWDAF to V-RE-NWDAF, but generated by a NWDAF in the VPLMN.\nH-RE-NWDAF may request or subscribe to VPLMN analytics from the V-RE-NWDAF as described in clause 6.1.5.3, and then the analytics can be leveraged by the 5GC NF in the HPLMN, for example:\n-\tIn home routed roaming scenarios, analytics information with statistics or predictions for outbound roaming UEs can be leveraged by the H-PCF for QoS control of the PDU Session.\n-\tAnalytics (i.e. service experience analytics, slice load level analytics, etc.) can be leveraged by the H-PCF for decision of NSSP in URSP rules provisioned to the UE roaming in the VPLMN.\nNOTE 6:\tAnalytics that rely on input data from the HPLMN are preferably not provided from V-RE-NWDAF to H-RE-NWDAF, but generated by a NWDAF in the HPLMN.",
      "chunk_type": "definition",
      "cross_references": [
        "clause_4.3",
        "clause_6.1.5.2",
        "clause_6.1.5.3",
        "ts_33.501"
      ]
    },
    {
      "chunk_id": "ts_23.288_6.1.5.2",
      "section_id": "6.1.5.2",
      "section_title": "Analytics Exposure from HPLMN to VPLMN",
      "content": "Figure 6.1.5.2-1 shows the procedure where a V-RE-NWDAF requests network analytics (i.e. slice load level analytics, NF load analytics, service experience analytics, etc.) in HPLMN from a H-RE-NWDAF, upon receiving an analytics information request/subscribe from a service consumer NF (e.g. AMF) in the VPLMN.\nFigure 6.1.5.2-1: Procedure for analytics exposure from HPLMN to VPLMN\n1a.\tThe Consumer NF in VPLMN (e.g. AMF) discovers a V-RE-NWDAF as described in clause 5.2 and sends an Analytics request/subscribe (Analytics ID, Analytics Filter Information, Target of Analytics Reporting) to the V-RE-NWDAF by invoking a Nnwdaf_AnalyticsInfo_Request service operation or a Nnwdaf_AnalyticsSubscription_Subscribe service operation.\n1b.\tFor the inbound roaming UE(s) indicated in the Target of Analytics Reporting:\n-\tThe V-RE-NWDAF determines based on operator configuration and the requested analytics whether analytics or input data from the HPLMN are required, or the analytics can be derived locally. The subsequent steps only apply if analytics from the HPLMN are required. If input data from the HPLMN are required, the procedures in clause 6.2.11 apply.\nNOTE 1:\tIt is possible that the Target of Analytics Reporting sent by the Consumer NF to the V-RE-NWDAF includes both inbound roaming UE(s) and non-roaming UE(s).\n-\tThe V-RE-NWDAF checks the roaming agreements related to analytics from the HPLMN to determine if the roaming analytics request/subscribe can be accepted or must be rejected with a proper cause in the response to the Consumer NF. If the V-RE-NWDAF determined the roaming analytics request/subscribe is rejected, the following steps are skipped.\n2.\tThe V-RE-NWDAF discovers a H-RE-NWDAF as described in clause 5.2 if the V-RE-NWDAF determines the roaming analytics request/subscribe can be accepted. The V-RE-NWDAF sends a roaming analytics request/subscribe (Analytics ID, Analytics Filter Information, Target of Analytics Reporting) to H-RE-NWDAF by invoking a Nnwdaf_RoamingAnalytics_Request service operation or a Nnwdaf_RoamingAnalytics_Subscribe service operation, based on the Analytics request/subscribe received from the Consumer NF in the VPLMN. The Target of Analytics Reporting sent by the V-RE-NWDAF to the H-RE-NWDAF only contains the inbound roaming UE(s).\nNOTE 2:\tThe inbound roaming UE(s) are distinguished by the V-RE-NWDAF according to the UE ID(s) (i.e. SUPI(s)).\n3a.\tThe H-RE-NWDAF checks the roaming agreements between the HPLMN and the VPLMN, and user consent for analytics as defined in clause 6.2.9 if needed, to determine if the roaming analytics request/subscribe can be accepted or must be rejected with a proper cause in response to the V-RE-NWDAF (which then relays the response to the Consumer NF). If the roaming analytics request/subscribe is rejected, the following steps are skipped.\nIf the H-RE-NWDAF supports to generate the requested analytics, it collects data from the NF(s) and/or OAM in the HPLMN and derives the requested analytics; otherwise step 3b and step 3c are executed.\nNOTE 3:\tSee clause X.7 and Annex V of TS 33.501 [49] for details of the user consent check procedures. See clause X.8 of TS 33.501 [49] for protection of analytics exchange in roaming case.\n3b-3c.\t[Optional] If the H-RE-NWDAF does not support to generate the requested analytics, it may request/subscribe to other NWDAF(s) in the HPLMN (if available) for the analytics and get corresponding response/notification.\n4.\tThe H-RE-NWDAF sends the HPLMN analytics information to the V-RE-NWDAF using either Nnwdaf_RoamingAnalytics_Request response or Nnwdaf_RoamingAnalytics_Notify service operation, depending on the service used in step 2. The H-RE-NWDAF may restrict the exposed analytics information based on HPLMN operator polices.\n5.\t[Optional] If the Consumer NF also indicates request or subscription of analytics information available in the VPLMN (e.g. via Target of Analytics Reporting) in step 1, the V-RE-NWDAF collects data from the NF(s) and/or OAM in VPLMN and derives the requested analytics. These steps can be executed in parallel with steps 3-4. The V-RE-NWDAF may perform analytics aggregation with the analytics information received from the H-RE-NWDAF and analytics information generated by itself, based on the analytics request or subscription.\n6.\tThe V-RE-NWDAF sends the HPLMN analytics information received in step 4, or the aggregated analytics information if step 5 are performed, to the Consumer NF in the VPLMN using either Nnwdaf_AnalyticsInfo_Request response or Nnwdaf_AnalyticsSubscription_Notify service operation, depending on the service used in step 1.\nNOTE 4:\tThe present document describes that the RE-NWDAF can perform analytics aggregation for roaming scenario, but whether and how the RE-NWDAF performs analytics aggregation for roaming scenario are up to implementation.",
      "chunk_type": "general",
      "cross_references": [
        "clause_5.2",
        "clause_6.2.11",
        "clause_6.2.9",
        "figure_6.1.5.2-1",
        "ts_33.501"
      ]
    },
    {
      "chunk_id": "ts_23.288_6.1.5.3",
      "section_id": "6.1.5.3",
      "section_title": "Analytics Exposure from VPLMN to HPLMN",
      "content": "Figure 6.1.5.3-1 shows the procedure that the H-RE-NWDAF requests network analytics (i.e. service experience analytics, slice load level analytics, etc.) in the VPLMN from the V-RE-NWDAF, upon receiving an analytics information request/subscription from the service consumer NF (e.g. PCF) in the HPLMN.\nFigure 6.1.5.3-1: Procedure for analytics exposure from VPLMN to HPLMN\n1a.\tIf the Consumer NF in the HPLMN (e.g. H-PCF) is aware that the UE(s) indicated in Target of Analytics Reporting is/are outbound roaming UE(s), the Consumer NF discovers a H-RE-NWDAF as described in clause 5.2 and sends an Analytics request/subscribe (Analytics ID, Target of Analytics Reporting, Analytics Filter Information) to the H-RE-NWDAF by invoking a Nnwdaf_AnalyticsInfo_Request service operation or a Nnwdaf_AnalyticsSubscription_Subscribe service operation.\n1b.\tFor the outbound roaming UE(s) indicated in the Target of Analytics Reporting:\n-\tThe H-RE-NWDAF determines based on operator configuration and the requested analytics whether analytics or input data from the VPLMN are required, or the analytics can be derived locally. The subsequent steps only apply if analytics from the VPLMN are required. If input data from the VPLMN are required, the procedures in clause 6.2.10 apply.\n-\tIf the Consumer NF is unaware that the Target of Analytics Reporting includes roaming UE(s) and sends the Analytics request/subscribe to a H-NWDAF which does not support roaming exchange capability, then the H-NWDAF may perform either of the following after determining that the Target of Analytics Reporting includes roaming UE(s) (e.g. by inquiring the AMF(s) serving the UE(s) at the UDM with the Nudm_UECM service):\n-\tforward the Analytics request/subscribe to a H-RE-NWDAF after discovering a H-RE-NWDAF as described in clause 5.2. The H-NWDAF may include the VPLMN ID in the Analytics request/subscribe; or\n-\treject the Analytics request/subscribe with a proper cause value in the response to the Consumer NF. And the following steps will not be performed.\nNOTE 1:\tIt is possible that the Target of Analytics Reporting sent by the Consumer NF to the H-RE-NWDAF includes both outbound roaming UE(s) and non-roaming UE(s).\nNOTE 2:\tThe H-NWDAF is not depicted in the flow.\n-\tIf PLMN ID of the VPLMN is not included in the Analytics request/subscribe, the H-NWDAF inquires it at the UDM for the UE(s) indicated as Target of Analytics Reporting. The H-RE-NWDAF checks user consent for analytics as defined in clause 6.2.9. The H-RE-NWDAF checks the roaming agreements between the HPLMN and the VPLMN to determine if the roaming analytics request/subscription can be accepted or must be rejected with a proper cause in the response to the Consumer NF. If the H-RE-NWDAF determined the roaming analytics request/subscribe is rejected, the following steps are skipped.\nNOTE 3:\tSee clause X.7 and Annex V of TS 33.501 [49] for details of the user consent check procedures. See clause X.8 of TS 33.501 [49] for protection of analytics exchange in roaming case.\n2.\tThe H-RE-NWDAF discovers the V-RE-NWDAF as described in clause 5.2 if the H-RE-NWDAF determined the roaming analytics request/subscribe can be accepted. The H-RE-NWDAF sends a roaming analytics request/subscribe (Analytics ID, Analytics Filter Information, Target of Analytics Reporting, [NF ID(s)]) to the V-RE-NWDAF by invoking a Nnwdaf_RoamingAnalytics_Request service operation or a Nnwdaf_RoamingAnalytics_Subscribe service operation, based on the Analytics request/subscribe received from the Consumer NF in HPLMN. The Target of Analytics Reporting sent by the H-RE-NWDAF to the V-RE-NWDAF only contains the outbound roaming user(s). The H-RE-NWDAF may obtain NF ID(s) of the NF(s) serving the roaming UE(s) in the VPLMN, e.g. AMF ID(s), SMF ID(s), from the UDM and include the NF ID(s) in the analytics request/subscribe.\n3a.\tThe V-RE-NWDAF checks the roaming agreements between the HPLMN and the VPLMN, to determine if the roaming analytics request/subscribe can be accepted or must be rejected with a proper cause in response to the H-RE-NWDAF (which then relays the response to the Consumer NF). If the roaming analytics request/subscribe is rejected, the following steps are skipped.\nIf the V-RE-NWDAF supports to generate the requested analytics, it collects data from the NF(s) serving the roaming UE(s) and/or OAM in VPLMN and derives the analytics; otherwise step 3b and step 3c are executed. The NF(s) serving the roaming UE(s), e.g. AMF(s) or SMF(s), if indicated in step 2, can be used as data source.\n3b-3c.\t[Optional] If the V-RE-NWDAF does not support to generate the requested analytics, it may request/subscribe to other NWDAF(s) in the VPLMN (if available) for the analytics and get corresponding response/notification(s).\n4.\tThe V-RE-NWDAF sends the VPLMN analytics information to the H-RE-NWDAF using either Nnwdaf_RoamingAnalytics_Request response or Nnwdaf_RoamingAnalytics_Notify service operation, depending on the service used in step 2. The V-RE-NWDAF may restrict the exposed analytics information based on VPLMN operator polices.\n5.\t[Optional] If the Consumer NF also indicates request or subscription of analytics information available in the HPLMN (e.g. via Target of Analytics Reporting) in step 1, the H-RE-NWDAF collects data from the NF(s) and/or OAM in HPLMN and derives the analytics. These steps can be executed in parallel with steps 3-4. The H-RE-NWDAF may perform analytics aggregation with the analytics information received from the V-RE-NWDAF and analytics information generated by itself, based on the analytics request or subscription.\n6.\tThe H-RE-NWDAF sends the VPLMN analytics information received in step 4, or the aggregated analytics information if step 5 are performed, to the Consumer NF in HPLMN using either Nnwdaf_AnalyticsInfo_Request response or Nnwdaf_AnalyticsSubscription_Notify, depending on the service used in step 1.\nIf the Analytics request/subscribe is forwarded to the H-RE-NWDAF by a H-NWDAF as described in step 1, the H-NWDAF forwards the analytics information received from the H-RE-NWDAF to the Consumer NF using either Nnwdaf_AnalyticsInfo_Request response or Nnwdaf_AnalyticsSubscription_Notify, depending on the service used in step 1.\nNOTE 4:\tThe present document describes that the RE-NWDAF may perform analytics aggregation for roaming scenario, but whether and how the RE-NWDAF performs analytics aggregation for roaming scenario are up to implementation.",
      "chunk_type": "general",
      "cross_references": [
        "clause_5.2",
        "clause_6.2.10",
        "clause_6.2.9",
        "figure_6.1.5.3-1",
        "ts_33.501"
      ]
    },
    {
      "chunk_id": "ts_23.288_6.1.5.4",
      "section_id": "6.1.5.4",
      "section_title": "Contents of Analytics Exposure in roaming case",
      "content": "When requesting or subscribing to analytics involving one or more roaming UEs, the Consumer NF shall send the request or subscription to an RE-NWDAF belonging to the same PLMN as the Consumer NF. The Consumer NF may indicate the following parameters in the Nnwdaf_AnalyticsInfo_Request service operation or the Nnwdaf_AnalyticsSubscription_Subscribe service operation:\n-\tThe parameters as defined in clause 6.1.3, with the following differences:\n-\tParameters related to analytics aggregation, analytics transfer or ML Model selection should not be included;\n-\tIf Target of Analytics Reporting is included and indicates specific UE(s) or a group of UEs, these UEs shall belong to the same HPLMN (if HPLMN analytics are subscribed/requested) or be served by the same VPLMN (if VPLMN analytics are subscribed/requested)\n-\tAdditionally, the following parameters:\n-\tIf the NWDAF service consumer in a VPLMN requests/subscribes to HPLMN analytics, in Analytics Filter Information:\n-\t[OPTIONAL] PLMN ID of the HPLMN;\nNOTE 1:\tIf PLMN ID of the HPLMN is not provided by the NWDAF service consumer, the V-RE-NWDAF derives it from the SUPIs of UEs indicated as Target of Analytics Reporting.\n-\t[OPTIONAL] mapped S-NSSAI of the HPLMN.\n-\t[OPTIONAL] AOI (in the form of geographical area) in the HPLMN\n-\tIf the NWDAF service consumer in a HPLMN requests/subscribes to VPLMN analytics, in Analytics Filter Information:\n-\t[OPTIONAL] PLMN ID of the VPLMN\n-\t[OPTIONAL] AOI (in the form of geographical area) in the VPLMN\nNOTE 2:\tIf PLMN ID of the VPLMN is not provided by the NWDAF service consumer, the H-RE-NWDAF inquires it at the UDM for the UEs indicated as Target of Analytics Reporting.\nNOTE 3:\tIn this release of the specification, only one PLMN ID (of HPLMN or VPLMN) is supported in the Nnwdaf_AnalyticsInfo_Request service operation or the Nnwdaf_AnalyticsSubscription_Subscribe service operation.\nBased on the analytics request or subscription from the NWDAF service consumer in the HPLMN, and local configuration, the H-RE-NWDAF may indicate the following parameters in the Nnwdaf_RoamingAnalytics_Request service operation or the Nnwdaf_RoamingAnalytics_Subscribe service operation to the V-RE-NWDAF, for requesting/subscribing to analytics in the VPLMN:\n-\tAnalytics ID;\n-\tPLMN ID of the HPLMN;\nNOTE 4:\tSecurity aspects for analytics exchange are covered in TS 33.501 [49].\n-\tAnalytics Filter Information:\n-\t[OPTIONAL] HPLMN S-NSSAI;\nNOTE 5:\tV-NWDAF maps that S-NSSAI to an S-NSSAI of the VPLMN which will be used in the Analytics Filter Information.\n-\tother Analytics Filter Information (e.g. AOI in the form of geographical area in the VPLMN) as provided by NWDAF service consumer in the HPLMN, if applicable in the VPLMN.\n-\t[OPTIONAL] NF ID(s) of the NF(s) (e.g. AMF(s), SMF(s)) serving the roaming UE(s) in the VPLMN;\n-\tother parameters as provided by NWDAF service consumer in the HPLMN, if applicable in the VPLMN.\nBased on the analytics request or subscription from the NWDAF service consumer in the VPLMN, and local configuration, the V-RE-NWDAF may indicate the following parameters in the Nnwdaf_RoamingAnalytics_Request service operation or the Nnwdaf_RoamingAnalytics_Subscribe service operation to the H-RE-NWDAF, for requesting/subscribing to analytics in the HPLMN:\n-\tAnalytics ID;\n-\tPLMN ID of the VPLMN;\nNOTE 6:\tSecurity aspects for analytics exchange are covered in TS 33.501 [49].\n-\tAnalytics Filter Information:\n[OPTIONAL] HPLMN S-NSSAI;\nNOTE 7:\tIf an S-NSSAI but no mapped S-NSSAI is provided by the NWDAF service consumer in the Analytics Filter Information, the V-NWDAF maps the S-NSSAI to the S-NSSAI of the HPLMN and provides that mapped S-NSSAI of the HPLM as the Analytics Filter Information.\n-\tother Analytics Filter Information (e.g. AOI in the form of geographical area in the HPLMN) as provided by NWDAF service consumer in the VPLMN, if applicable in the HPLMN.\n-\tother parameters as provided by NWDAF service consumer in the VPLMN, if applicable in the HPLMN.\nThe RE-NWDAF provides the following output information to the consumer RE-NWDAF of the Nnwdaf_RoamingAnalytics_Request service operation or the Nnwdaf_RoamingAnalytics_Notify service operation:\n-\tThe output information as defined in clause 6.1.3, with the following differences:\n-\tInformation related to analytics aggregation (i.e. analytics metadata information) should not be included.\nNOTE 8:\tThe output of the analytics depends on the roaming agreements.\nNOTE 9:\tUE specific data and analytics exchange between HPLMN and VPLMN and the possible storage is agreed between the operators bilaterally via roaming agreements (e.g. SLA) and takes into consideration all relevant regulatory requirements.\n6.1A\tAnalytics aggregation from multiple NWDAFs\n6.1A.1\tGeneral\nIn a multiple NWDAF deployment scenario, an NWDAF instance may be specialized to provide Analytics for one or more Analytics IDs. Each of the NWDAF instances may serve a certain Area of Interest or TAI(s). Multiple NWDAFs may collectively serve the particular Analytics ID. An NWDAF may have the capability to support the aggregation of Analytics (per Analytics ID) received from other NWDAFs, possibly with Analytics generated by itself.\nThe procedure for analytics aggregation from multiple NWDAFs is as defined in clause 6.1A.3.\n6.1A.2\tAnalytics Aggregation\nThe analytics aggregation from multiple NWDAFs is used to address cases where an NWDAF service consumer requests Analytics ID(s) that requires multiple NWDAFs to collectively serve the request. Analytic aggregation applies to scenarios where NWDAF service consumer requests or subscribes to analytics information with or without provisioning Area of Interest.\nAggregator NWDAF or aggregation point:\n-\tIs an NWDAF instance with additional capabilities to aggregate output analytics provided by other NWDAFs. This is in addition to regular NWDAF behaviour such as collecting data from other data sources to be able to generate its own output analytics.\n-\tIs able to divide the area of interest, if received from the consumer, into sub area of interest based on the serving area of each NWDAF to be requested for analytics and then send analytics requests including the sub area of interest as an Analytics Filter to corresponding NWDAFs. The Aggregator NWDAF may maintain information on the discovered NWDAFs, including their supported Analytics IDs, NWDAF Serving Areas, etc.\n-\tHas \"analytics aggregation capability\" registered in its NF Profile within the NRF.\n-\tSupports the requesting and exchange of \"Analytics Metadata Information\" between NWDAFs when required for the aggregation of output analytics. \"Analytics Metadata Information\" is additional information associated with the requested Analytics ID(s) as defined in clause 6.1.3.\n-\tSupports dataset statistical properties, output strategy and data time window parameters per type of analytics (i.e. Analytics ID) as defined in clause 6.1.3.\nNRF:\n-\tStores the NF Profile of the NWDAF instances, including \"analytics aggregation capability\" for Aggregator NWDAFs and \"analytics metadata provisioning capability\" when supported by the NWDAF.\n-\tReturns the NWDAF(s) matching the attributes provided in the Nnrf_NFDiscovery_Request, as specified in clause 5.2.7.3 of TS 23.502 [3].\nNWDAF service consumer:\n-\tRequests or subscribes to receive analytics for one or more Analytics IDs, as specified in clause 6.1 of the present document.\n-\tDoes discovery and selection as defined in clause 6.3.13 of TS 23.501 [2] to identify NWDAFs with analytics aggregation capability and other capabilities (e.g. providing data/analytics for specific TAI(s)).\n-\tCan differentiate and select the preferred NWDAF in case multiple NWDAFs are returned in the NWDAF discovery response based on its internal selection criteria (considering the registered NWDAF capabilities and information in NRF or UDM).\n6.1A.3\tProcedure for analytics aggregation\n6.1A.3.1\tProcedure for analytics aggregation with Provision of Area of Interest\nThe procedure depicted in figure 6.1A.3-1 is used to address cases where an NWDAF service consumer requests Analytics ID(s) for an Area of Interest that requires multiple NWDAFs that collectively serve the request.\nFigure 6.1A.3.1-1: Procedure for analytics aggregation\n1a-b.\tNWDAF service consumer discovers the NWDAF as specified in clause 5.2. When NRF is used, NRF may return multiple NWDAF candidates matching the requested capabilities, area of interest and supported Analytics ID(s). NWDAF service consumer selects an NWDAF (e.g. NWDAF1) with analytics aggregation capability (i.e. Aggregator NWDAF), based on its internal selection criteria, considering registered NWDAF capabilities and information in NRF including the Supported Analytics Delay per Analytics ID (if available).\n2.\tNWDAF service consumer invokes Nnwdaf_AnalyticsInfo_Request or Nnwdaf_AnalyticsSubscription_Subscribe service operation from the selected Aggregator NWDAF (e.g. NWDAF1). In the request, NWDAF service consumer provides Analytics ID(s) (e.g. Analytics ID 1) Analytics Filter Information (area of interest, e.g. TAI-1, TAI-2, TAI-n, if known to the NWDAF service consumer), Target of Analytics Reporting as defined in clause 6.1.3. It may also provide \"time when analytics information is needed\" (e.g. T1). It is expected that T1 is equal or greater than the Supported Analytics Delay per Analytics ID (if available) of the Aggregator NWDAF. Otherwise, the aggregator NWDAF may reject the analytics request or analytics subscription.\n3.\tOn receiving the request in step 2, Aggregator NWDAF (e.g. NWDAF1), based on e.g. configuration, queries to NRF including the Real-Time Communication Indication per Analytics ID and queries to UDM for checking which NWDAF(s) is serving the Target of Analytics Reporting. Considering the request from the NWDAF service consumer (e.g. Analytics Filter Information, T1, etc.) and Supported Delay per Analytics ID per NWDAF instance (when Real-Time Communication Indication was included), Aggregator NWDAF determines the other NWDAF instances that collectively can cover the area of interest indicated in the request (e.g. TAI-1, TAI-2, TAI-n).\nNOTE 1:\tIn the discovery request sent to NRF, Aggregator NWDAF might indicate \"analytics metadata provisioning capability\" (e.g. as query parameter), thus, requesting to NRF to reply back with, if available, those NWDAF instance(s) which also supports \"analytics metadata provisioning capability\" functionality as indicated during particular NWDAF instance registration procedure.\n4-5.\tAggregator NWDAF (e.g. NWDAF1) invokes Nnwdaf_AnalyticsInfo_Request or Nnwdaf_AnalyticsSubscription_Subscribe service operation from each of the NWDAFs discovered/determined in step 3 (e.g. NWDAF2 and NWDAF3).\nThe request may optionally indicate \"analytics metadata request\" parameter to the determined NWDAFs (e.g. NWDAF-2 and/or NWDAF3), when analytics metadata is supported by these NWDAFs.\nThe request or subscription to the determined NWDAFs (e.g. NWDAF2 and/or NWDAF3) may also include the dataset statistical properties, output strategy and data time window. This indicates to the determined NWDAFs that the Analytics ID output shall be generated based on such parameters when requested.\nIf \"time when analytics information is needed\" (T1) was provided in step 2, the Aggregator NWDAF shall also provide a \"time when analytics information is needed\" to the determined NWDAFs, with a smaller value compared with T1 (e.g. T2).\nNOTE 2:\tT2 in step 4-5 is smaller than T1 accounting for the analytics delay and processing time within the Aggregator NWDAF itself.\n6-7a-b.\tThe determined NWDAFs (e.g. NWDAF-2 and/or NWDAF3) reply or notify with the requested output analytics.\nIf \"analytics metadata request\" was included in the request received by such NWDAF (in steps 4-5), the NWDAF additionally returns the \"analytics metadata information\" used for generating the analytics output as defined in clause 6.1.3.\nIf the determined NWDAFs (e.g. NWDAF 2 and/or NWDAF 3) cannot reply or notify with the requested output analytics before the expiry of T2, they may send an error response or error notification to the Aggregator NWDAF including a \"revised waiting time\".\n8.\tAggregator NWDAF (e.g. NWDAF1) aggregates received Analytics information, i.e. generates a single output analytics based on the multiple analytics outputs and, optionally, the \"analytics metadata information\" received from the determined NWDAFs (e.g. NWDAF2 and NWDAF3).\nThe Aggregator NWDAF (e.g. NWDAF1) may also take its own analytics for TAI-n into account for the analytics aggregation.\n9a-b.\tAggregator NWDAF (e.g. NWDAF1) sends a response or notifies to the NWDAF service consumer the aggregated output analytics for the requested Analytics ID.\nIf the Aggregator NWDAF (e.g. NWDAF 1) cannot reply or notify with the requested output analytics before the expiry of T1 or anticipates that it cannot reply or notify with the requested output analytics before the expiry of T1 (e.g. due to error notification in step 6-7a-b), it may send an error response or error notification to the NWDAF service consumer including a \"revised waiting time\". The NWDAF service consumer may optionally use the \"revised waiting time\" to update the \"time when analytics information is needed\" parameter (i.e. T1) for future analytics requests/subscriptions to the same Aggregator NWDAF as defined in clause 6.2.5.2.\n6.1A.3.2\tProcedure for Analytics Aggregation without Provision of Area of Interest\nThe procedure depicted in Figure 6.1A.3.2-1 is used to address cases where an NWDAF service consumer requests Analytics ID(s) without providing an Area of Interest, but requires multiple NWDAFs to collectively serve the request.\nFigure 6.1A.3.2-1: Procedure for analytics aggregation without provision of Area of Interest\n1.\tThis step is a NWDAF discovery procedure without providing any area of interest. The service consumer discovers an aggregation NWDAF (e.g. NWDAF1) as specified in clause 5.2. When NRF is used, NRF may return multiple NWDAF candidates matching the requested capabilities and supported Analytics ID(s).\nDepending on the requested Analytics ID, the NWDAF service consumer, e.g. based on internal logic, can be able to determine which NWDAF should be selected for providing the required data analytics. If not, the NWDAF service consumer should select a NWDAF with large serving area from the candidate NWDAFs which supports analytics aggregation, e.g. NWDAF1.\n2.\tNWDAF service consumer sends Analytics information or analytics subscription request to the aggregator NWDAF, i.e. NWDAF1 in the Figure 6.1A.3.2-1. In the request, NWDAF service consumer provides the requested Analytics ID(s), e.g. Analytics ID 1.\nThe NWDAF service consumer may also provide \"time when analytics information is needed\" (e.g. T1). It is expected that T1 is equal or greater than the Supported Analytics Delay per Analytics ID of the Aggregator NWDAF (if available). Otherwise, the aggregator NWDAF may reject the analytics request or analytics subscription.\nOnce receiving the request, the Aggregator NWDAF1 may decide to subscribe data analytics from other NWDAF instances which can provide the requested data analytics. Based on the Analytics ID, there are two cases for the Aggregator NWDAF1 to subscribe data analytics from other NWDAF instances.\n3a.\tIf the data analytics requires UE location information, e.g. for the Analytics IDs \"UE Mobility\", \"Abnormal behaviour\", or \"User Data Congestion\", then:\n-\t3a-1: (optional) The Aggregator NWDAF1 queries UDM to discover the NWDAF serving the UE, if it is supported.\n-\t3a-2: If step 3a-1 is not supported, was not executed, or did not return a suitable NWDAF serving the UE, the Aggregator NWDAF1 determines the AMF serving the UE as specified in the clause 6.2.2.1, then requests UE location information from the AMF to be used in the query to NRF in step 4.\nNOTE:\tIf an Aggregator NWDAF receives an Analytics request for a group of UEs, i.e. the Target of Analytics Reporting set to a list of Internal Group IDs, it performs NWDAF discovery based on location information of all UEs in each of the Internal Group Ids in the list and then requests all discovered NWDAFs to provide the required analytics.\n3b.\tIf the data analytics does not require to collect UE location information, e.g. for the Analytics IDs \"Service Experience\", \"NF load information\", or \"UE Communication\", the Aggregator NWDAF1 can determine the NFs to be contacted for data collection as specified in clause 6.2.2.1 and then it can retrieve NF service area for each of the data source NFs from NRF.\n4.\t(conditional) With the data obtained in step 3, the Aggregator NWDAF1 queries the NRF for discovering the required NWDAF, by sending an NF discovery request which may include UE location (e.g. TAI-1) or NF serving area (e.g. TAI list-1) as a filter to NRF and obtains candidates target NWDAF(s) that can provide the required analytics. This step is skipped if a suitable NWDAF was discovered in step 3a-1. Additionally the Aggregator NWDAF1 may include in the NF discovery request the Real-Time Communication Indication per Analytics ID to request Supported Delay per Analytics ID per NWDAF instance.\nDepending on the discovered NWDAF instance(s), there can be two cases:\n5a.\tIf a single target NWDAF (e.g. NWDAF2) can provide the requested analytics data, the Aggregator NWDAF (e.g. NWDAF1) can redirect the Nnwdaf_AnalyticsInfo_Request to that target NWDAF or request an analytics subscription transfer to that target NWDAF, depending on the type of the analytics request/subscription received by the NWDAF Service Consumer.\n5b.\tIf the Aggregator NWDAF decides to request data analytics from one or more target NWDAFs, the steps 4-9 of the analytics aggregation procedure in clause 6.1A.3.1 are executed.\n6.1B\tTransfer of analytics context and analytics subscription\n6.1B.1\tGeneral\nIn a multiple NWDAFs deployment scenario, procedures for transfer of analytics context and analytics subscription can be used to support the target NWDAF to produce the needed analytics.\nWhen the analytics consumer provides the target NWDAF with information on the subscription that could be transferred from the source NWDAF, the target NWDAF may initiate the transfer of analytics context. The analytics consumer provides the information via Nnwdaf_AnalyticsSubscription_Subscribe service operation. When the analytics consumer is an AMF, the old subscription information (if related to a UE) may be provided by the source AMF to the target AMF using a UE context transfer procedure as specified in TS 23.502 [3].\nAn analytics subscription transfer to the target NWDAF may be initiated by the source NWDAF, followed by an analytics context transfer initiated by the target NWDAF. An NWDAF may transfer one or more of its analytics subscriptions to another NWDAF instance due to internal (e.g. load balancing, graceful shutdown) or external triggers (e.g. UE mobility). For external triggers, the NWDAF may subscribe to NF(s) to be notified about the corresponding events. As for UE mobility, upon the UE location change event notified by the AMF subscribed by the NWDAF, the NWDAF determines whether it can continue to provide the analytics service. If the NWDAF cannot continue to serve the consumer, it should either select a target NWDAF and initiate analytics subscription transfer, or notify the analytics consumer that it cannot provide the service anymore, so that the analytics consumer can select a new NWDAF.\nProcedures for analytics subscription transfer allow one NWDAF instance to transfer its ongoing analytics subscriptions to another NWDAF instance. The transfer can be done for all subscriptions or just a selected subset of subscriptions related to specific area(s), specific Analytics ID(s), specific NF(s) and/or specific UE(s).\nThe procedure for prepared analytics subscription transfer can be used if the source NWDAF instance anticipates that it will soon not be able to continue its current analytics tasks.\n6.1B.2\tAnalytics Transfer Procedures\n6.1B.2.1\tAnalytics context transfer initiated by target NWDAF selected by the NWDAF service consumer\nThe procedure in Figure 6.1B.2.1-1 is used when an NF decides to select a new NWDAF instance due to internal or external triggers, e.g. the NF starts serving a UE with analytics subscription information received upon UE context transfer procedure as described in TS 23.502 [3], or the NF starts to request NF related analytics, or the NF receives a \"Termination Request\" for an existing analytics subscription from an NWDAF. The NF sends to the target NWDAF information about the NWDAF previously used for analytics subscription, if available, in Nnwdaf_AnalyticsSubscription_Subscribe service operation. The target NWDAF may initiate the transfer of the analytics context, using the Nnwdaf_AnalyticsInfo_ContextTransfer or Nnf_DataManagement_Subscribe service operation.\nThe procedure in Figure 6.1B.2.1-1 is also used when an Aggregator NWDAF decides to select a new NWDAF to request output analytics for analytics aggregation. For example, upon receiving a Termination Request from one of the NWDAFs that are collectively serving a request for analytics subscription as specified in clause 6.1A, the Aggregator NWDAF queries the NRF or UDM to select a target NWDAF as specified in clause 6.1A.3 using information e.g. the UE location, the 5GC NFs (identified by their NF Set IDs or NF types) serving the UE or to be contacted for data collection (if Area of Interest is not provisioned for the requested analytics), or the subset of AoI (if Area of Interest is provisioned for the requested analytics). Then, the Aggregator NWDAF sends information about the NWDAF previously used for analytics subscription, if available, in Nnwdaf_AnalyticsSubscription_Subscribe service operation towards the selected target NWDAF.\nFigure 6.1B.2.1-1: Analytics context transfer initiated by target NWDAF selected by the NWDAF service consumer\n1.\tThe NWDAF service consumer determines to select an NWDAF instance. The consumer discovers and selects the target NWDAF as specified in clause 5.2.\n2.\tThe consumer sends a request for analytics subscription to the target NWDAF using Nnwdaf_AnalyticsSubscription_Subscribe service operation, including information on the previous analytics subscription (i.e. NWDAF ID, Analytics ID(s), SUPIs, Analytics Filter Information for UE-related Analytics, Subscription Correlation ID, the Analytics Accuracy Request information (as defined in clause 6.1.3) when the Target NWDAF supports accuracy checking capability) which relates to the requested analytics subscription, if available. If the target NWDAF accepts the analytics subscription request, it sends Nnwdaf_AnalyticsSubscription_Subscribe response with a Subscription Correlation ID.\nIf the target NWDAF does not receive information of previous analytics subscription in step 2, for UE related Analytics, the target NWDAF may discover previously used NWDAF in UDM as specified in clause 5.2.\nNOTE 1:\tIf the selected target NWDAF instance is the same as the source NWDAF instance (as received from the other consumer in step 0), the target NWDAF will update the existing analytics subscription to the new analytics consumer. Following steps are skipped.\nNOTE 2:\tThe consumer can provide information on the previous analytics subscription when, e.g. the consumer is an AMF and it received information from the old AMF, see clause 5.2.2.2.2 of TS 23.502 [3].\n3a.\t[Option 1] If the target NWDAF decides to request an analytics context transfer from the previously used NWDAF, it may make use of information sent in step 2 (e.g. the provided Subscription Correlation ID) and use the analytics context transfer procedure as specified in clause 6.1B.3. The target NWDAF may receive an ADRF ID or DCCF ID for collecting the historical data and/or analytics.\nIf the target NWDAF supports the accuracy checking capability and the request received in step 2 contains the Analytics Accuracy Request information, the target NWDAF may include in the Nnwdaf_AnalyticsInfo_ContextTransfer request the field Requested Analytics Context Type with value set to Analytics accuracy related information and ML Model accuracy related information (both defined in clause 6.1B.4) in order to retrieve the necessary information for starting, respectively, the Analytics Accuracy Information generation as well as the registration as provider of ML Model Accuracy Information for the ML Model.\n3b-c.\t[Option 2] If the target NWDAF decides to only request historical data and/or analytics, then it may collect the data and/or analytics via Nnf_DataManagement_Subscribe service, where the NFs may be either the ADRF, NWDAF or DCCF, as described in clauses 10.2.6, 7.4.2 and 8.2.2 respectively.\nTarget NWDAF is now ready to generate analytics information and if applicable, Analytics Accuracy Information, taking into account the information received in step 3. The target NWDAF is also able to perform the registration as a new provider for an existing ML Model Accuracy Information process as defined in clause 6.2E.3.2.\n4.\t[Optional] Source NWDAF may purge analytics context after completion of step 3a, if performed and if not already done, unsubscribes from the data source(s) and/or model source(s) that are no longer needed for the remaining analytics subscriptions.\n5.\t[Optional] Target NWDAF may subscribe to relevant data source(s) and/or model source(s), if it is not yet subscribed to the data source(s) and/or model source(s).\n6.1B.2.2\tAnalytics Subscription Transfer initiated by source NWDAF\nThe procedure in Figure 6.1B.2.2-1 is used by an NWDAF instance to request the transfer of analytics subscription(s) to another NWDAF instance, using the Nnwdaf_AnalyticsSubscription_Transfer service operation defined in clause 7.2.5.\nIf the source NWDAF discovers that the analytics consumer may change concurrently to this procedure, the source NWDAF should not perform the procedure. In such a case, the source NWDAF may send a message to indicate to the analytics consumer that it will not serve this subscription anymore.\nNOTE 1:\tTo discover the possible change of analytics consumer, if the Analytics ID is UE related, the source NWDAF takes actions responding to external trigger (such as UE mobility), for example, checking if the Target of Analytics Reporting is still within the serving area of the analytics consumer, if the serving area information is available.\nNOTE 2:\tHandling of overload situation or preparation for a graceful shutdown are preferably executed inside an NWDAF Set, when available, therefore, not requiring an analytics subscription transfer as described in this clause. The procedure in Figure 6.1B.2.2-1 is applicable for analytics subscription transfer across NF Sets or if the NWDAF is not deployed in a Set.\nFigure 6.1B.2.2-1: Analytics subscription transfer initiated by source NWDAF\n0.\tThe analytics consumer subscribes to analytics from source NWDAF. The analytics consumer may send its NF ID or serving area, enabling NWDAF to determine whether the following analytics subscription transfer procedure is applicable. Optionally the source NWDAF subscribes to UE mobility events.\n1.\t[Optional] Source NWDAF determines, e.g. triggered by a UE mobility event notification, to prepare an analytics subscription transfer to target NWDAF(s), as specified in the procedure illustrated in clause 6.1B.2.3.\n2.\tSource NWDAF determines, e.g. based on the UE location information received and the analytics consumer's serving area either directly received in step 0 or indirectly received via NRF, to perform an analytics subscription transfer to target NWDAF(s). Therefore, the source NWDAF determines the analytics subscription(s) to be transferred to a target NWDAF.\n3.\tSource NWDAF performs an NWDAF discovery and selects the target NWDAF. NWDAF discovery may be skipped if the target NWDAF had already been discovered as part of a prepared analytics subscription transfer. In the case of aggregated analytics from multiple NWDAFs, the source NWDAF may use the set of NWDAF identifiers related to aggregated analytics (see clause 6.1.3) to preferably select a target NWDAF that is already serving the consumer. If the analytics subscription to be relocated to a target NWDAF also includes the Analytics Accuracy Request information, the source NWDAF selects, if possible, a target NWDAF also with accuracy checking capability. If the source NWDAF does not discover a target NWDAF with accuracy checking capability, the source NWDAF notifies the analytics consumer with Accuracy Information Termination. Therefore, the consumer based on local policy may decide to unsubscribe the analytics ID or to keep using the analytics ID even without receiving the accuracy information.\n4.\tSource NWDAF requests, using Nnwdaf_AnalyticsSubscription_Transfer Request service operation, a transfer of the analytics subscription(s) determined in step 2 to the target NWDAF. The request contains a callback URI of the analytics consumer. The request may also contain active data source ID(s) and ML Model related information, which are related to the analytics subscriptions requested to be transferred, if not already provided as part of the prepared analytics subscription transfer in the preparation procedure (see step 1). The ML Model related information contains the ID(s) of NWDAF(s) containing MTLF that provided the trained models and may contain the file address(es) of the trained ML Model(s), where the file address(es) of the trained ML Model(s) is included only when the source NWDAF itself provides the trained ML Model(s) for the analytics subscription(s) being transferred. The request message may also include \"analytics context identifier(s)\" indicating the availability of analytics context for particular Analytics ID(s).\n5.\tTarget NWDAF accepts the analytics subscription transfer and takes over the analytics generation and if applicable, the Analytics Accuracy Information generation, based on the information received from the source NWDAF.\nThe target NWDAF may use analytics accuracy request information included in the analytics subscription transfer received in step 4 to start the process of checking and generating Analytics Accuracy Information for the consumer of the transfer analytics subscription.\nTarget NWDAF may use the ML Model related information, if provided in the Nnwdaf_AnalyticsSubscription_Transfer request. If the ID(s) of NWDAF(s) containing MTLF is provided in the Nnwdaf_AnalyticsSubscription_Transfer request and the NWDAF(s) containing MTLF is part of the locally configured set of NWDAFs containing MTLF, target NWDAF may request or subscribe to the ML Model(s) from the indicated NWDAF(s) containing MTLF as specified in clause 6.2A and use the ML Model(s) for the transferred analytics subscription. If the file address(es) of the trained ML Model(s) is provided and if the NWDAF containing MTLF is part of the locally configured set of NWDAFs containing MTLF, the target NWDAF may retrieve the ML Model using the file address of the trained ML Model. If the provided ID(s) of NWDAF(s) containing MTLF are not part of the locally configured set of ID(s) of NWDAFs containing MTLF, the target NWDAF discovers the NWDAF(s) supporting MTLF that can provide trained ML Model(s) for the Analytics ID(s) as described in clause 5.2.\nNOTE 3:\tIf not yet done during a prepared analytics subscription transfer, the target NWDAF allocates a new Subscription Correlation ID to the received analytics subscriptions.\nNOTE 4:\tThe target NWDAF might already have received information on some/all of the analytics subscriptions as part of the prepared analytics subscription transfer request received in step 1 and, thus, might already have started to prepare for the analytics generation, e.g. by having already subscribed to relevant event notifications.\n6.\tTarget NWDAF informs the analytics consumer about the successful analytics subscription transfer using a Nnwdaf_AnalyticsSubscription_Notify message. A new Subscription Correlation ID, which was assigned by the target NWDAF, is provided in the Subscription Correlation ID and the old Subscription Correlation Id, which was allocated by the source NWDAF, is provided in the Subscription Change Notification Correlation ID parameter of this message as specified in clause 7.2.4.\nNOTE 5:\tNotification correlation information in the Nnwdaf_AnalyticsSubscription_Notify message allows the analytics consumer to correlate the notifications (of analytics output and if applicable of Analytics Accuracy Information) to the initial subscription request made with the source NWDAF in step 0.\nNOTE 6:\tThe existing Analytics context in the source NWDAF is not deleted directly but will be purged first when it was collected by the target NWDAF.\nNOTE 7:\tIf this subscription is used as input for analytics aggregation by the analytics consumer, the analytics consumer might inform the other NWDAFs instance participating in this analytics aggregation that the Set of NWDAF identifiers of NWDAF instances used by the NWDAF service consumer for this analytics aggregation (see clause 6.1.3) has changed using the Nnwdaf_AnalyticsSubscription_Subscribe service operation.\n7.\t[Conditional] If \"analytics context identifier(s)\" had been included in the Nnwdaf_AnalyticsSubscription_Transfer Request received in step 4, the target NWDAF requests the \"analytics context\". The analytics context transfer procedure is specified in clause 6.1B.3.\nIf the transfer request received by the target NWDAF also includes the Analytics Accuracy Request information, the target NWDAF will include in the Nnwdaf_AnalyticsInfo_ContextTransfer request the field Requested Analytics Context Type with value set to Analytics accuracy related information (as defined in clause 6.1B.4) in order to retrieve the necessary information for generating the Analytics Accuracy Information.\nThe target NWDAF may also retrieve from source NWDAF containing AnLF the ML Model Accuracy Information for the ML Model when ML Model accuracy related information context type is included in the \"analytics context identifier(s)\" in the transfer request. Based on the retrieved ML Model accuracy related information, the target NWDAF containing AnLF registers as provider of ML Model Accuracy Information for the ML Model as defined in clause 6.2E.3.2.\n8.\t[Optional] Target NWDAF subscribes to relevant data source(s), if it is not yet subscribed to the data source(s) for the data required for the Analytics.\n9.\tTarget NWDAF confirms the analytics subscription transfer to the source NWDAF.\n10.\t[Optional] Source NWDAF unsubscribes with the data source(s) that are no longer needed for the remaining analytics subscriptions. In addition, Source NWDAF unsubscribes with the NWDAF(s) containing MTLF, if exist, which are no longer needed for the remaining analytics subscriptions.\nNOTE 8:\tAt this point, the analytics subscription transfer is deemed completed, i.e. the source NWDAF can delete all information related to the successfully transferred analytics subscription.\n11-12.\tTarget NWDAF at some point derives new output analytics and Analytics Accuracy Information (if applicable) based on new input data and notifies the analytics consumer about the new analytics and new Analytics Accuracy Information (if applicable) using a Nnwdaf_AnalyticsSubscription_Notify message as specified in clause 6.1.1.\n6.1B.2.3\tPrepared analytics subscription transfer\nThe procedure in Figure 6.1B.2.3-1 is used by an NWDAF instance to request another NWDAF instance for a prepared analytics subscription transfer from the source NWDAF instance, using the Nnwdaf_AnalyticsSubscription_Transfer service operation defined in clause 7.2.5.\nNOTE 1:\tThe source NWDAF might determine that it needs to prepare to transfer analytics to another NWDAF instance, e.g. when the source NWDAF estimates for UE related analytics subscription that the UE might enter an area which is not covered by the source NWDAF (e.g. by subscribing to AMF event exposure service for UE mobility event notifications, by performing UE mobility analytics, or by subscribing to another NWDAF providing UE mobility analytics). If the source NWDAF discovers that the analytics consumer may change concurrently to this procedure, the source NWDAF does not perform the procedure. If the procedure makes use of predictions to determine the candidate NWDAFs, care must be taken with regards to load and signalling cost when sending data to an NWDAF that will not eventually start serving the UE.\nNOTE 2:\tThe source NWDAF might also determine that it needs to prepare to transfer analytics subscriptions to another NWDAF instance, as the source NWDAF wants to resolve an internal load situation or prepare for a graceful shutdown.\nNOTE 3:\tHandling of overload situation or preparation for a graceful shutdown are preferably executed inside an NWDAF Set, when available.\nFigure 6.1B.2.3-1: Prepared analytics subscription transfer\n0.\tAnalytics consumer subscribes to the source NWDAF for certain analytics as specified in clause 6.1.1.\n0a.\tSource NWDAF starts data collection from relevant data source(s) (e.g. NFs or OAM) as specified in clause 6.2. Source NWDAF starts generating requested analytics.\n0b.\t[Conditional] (Only if the source NWDAF does not serve the whole PLMN and the requested analytics involves UE related data) The source NWDAF subscribes, using Namf_EventExposure_Subscribe service operation, to receive notifications on UE mobility events from AMF.\n1.\tThe source NWDAF determines that it needs to prepare to transfer analytics to another NWDAF instance.\n2.\tThe source NWDAF discovers candidate target NWDAF instances (e.g. NWDAFy and NWDAFz) supporting the requested analytics information for the predicted target area(s). NWDAF discovery and selection is specified in clause 6.3.13 of TS 23.501 [2]. In the case of aggregated analytics from multiple NWDAFs, the source NWDAF may use the set of NWDAF identifiers related to aggregated analytics (see clause 6.1.3) to preferably select a target NWDAF that is already serving the consumer. In the case of the analytics subscription to be transferred also includes an Analytics Accuracy Request information as defined in clause 6.1.3, the source NWDAF takes into consideration in the selection process whether target NWDAF have the accuracy checking capability.\nNOTE 4:\tIn this procedure, NWDAFy and NWDAFz are examples for target NWDAF instances that are candidates to take over those analytic subscriptions.\n3-4.\tIn the case of a prepared analytics subscription transfer, the source NWDAF requests, using Nnwdaf_AnalyticsSubscription_Transfer Request, to the candidate target NWDAFs (e.g. NWDAFy and NWDAFz) to prepare for an analytics subscription transfer by including a \"prepared analytics subscription transfer indication\" in the request message. The request message includes information on the analytics subscriptions to be transferred. The request message may also include \"analytics context identifier(s)\" indicating the availability of analytics context for particular Analytics ID(s).\nThe candidate target NWDAFs (e.g. NWDAFy and NWDAFz) respond to the request from the source NWDAF using a Nnwdaf_AnalyticsSubscription_Transfer Response message.\n5-6.\t[Conditional] If \"analytics context identifier(s)\" had been included in the Nnwdaf_AnalyticsSubscription_Transfer Request received in step 4, the determined target NWDAFs (e.g. NWDAFy and NWDAFz) may request the \"analytics context\" from the source NWDAF by invoking the \"Nnwdaf_AnalyticsInfo_ContextTransferservice\" operation. The analytics context transfer procedure is specified in clause 6.1B.3.\nIf the target NWDAF supports the accuracy checking capability and the request received in steps 3-4 contains the Analytics Accuracy Request information, the target NWDAF includes in the Nnwdaf_AnalyticsInfo_ContextTransfer request the field Requested Analytics Context Type with value set to Analytics accuracy related information (as defined in clause 6.1B.4) in order to retrieve the necessary information for starting the Analytics Accuracy Information. The target NWDAF may also include in the request the Requested Analytics Context Type with value set to ML Model accuracy related information in order obtain the proper information to register as a new provider of ML Model Accuracy Information for the ML Model as defined in clause 6.2E.3.2.\nNOTE 5:\tThe target NWDAFs (e.g. NWDAFy and NWDAFz) can allocate a new Subscription Correlation ID to the received analytics subscriptions.\n7.\t[Optional] Based on the information received from the source NWDAF, the target NWDAFs (e.g. NWDAFy and NWDAFz) start data collection from NFs or OAM (as specified in clause 6.2), analytics generation for the indicated analytics subscriptions and if applicable the analytics accuracy checking and generation (as specified in clause 6.2D).\nNOTE 6:\tAfter step 7, the source NWDAF initiates the analytics subscription transfer to the target NWDAF as specified in steps 4 to 12 of the analytics subscription transfer procedure illustrated in Figure 6.1B.2.2-1.\n8.\tThe source NWDAF cancels the prepared analytics subscription transfer to a candidate target NWDAF (e.g. NWDAFz), using Nnwdaf_AnalyticsSubscription_Transfer Request include an \"analytics subscription transfer cancel indication\". The target NWDAF (e.g. NWDAFz) confirms the cancelation to the source NWDAF and, if applicable, deletes any analytics data that is no longer needed. If the target NWDAF (e.g. NWDAFz), as part of the analytics subscription preparation, had already subscribed to entities to collect data or acquire ML Model, it unsubscribes to those entities if the subscriptions are not needed for other active analytics subscriptions with the target NWDAF. If the candidate NWDAF (e.g. NWDAFz), as part of the analytics subscription preparation, had already started the analytics accuracy generation (as specified in clause 6.2D), it cancels the generation and if any extra data collection has been started, this data collection is also stopped, if not used by any other process in the target NWDAF.\nStep 8 may take place any time after step 4 if the NWDAF determines that the candidate target NWDAF (e.g. NWDAFz) does no longer need to prepare for the analytics subscription transfer. In particular, the source NWDAF shall cancel the prepared analytics subscription transfer to all remaining candidate target NWDAFs after one target NWDAF has accepted the analytics subscription transfer (see NOTE 6).\nIf the source NWDAF is not able to discover a target NWDAF with accuracy checking capability, the source NWDAF notifies the analytics consumer with Accuracy Information Termination. Therefore, the consumer may decide to unsubscribe the analytics ID or to keep using the analytics ID even without receiving the accuracy information.\n6.1B.3\tAnalytics Context Transfer\nThe procedure depicted in Figure 6.1B.3-1 is used by an NWDAF instance to request analytics context from another NWDAF instance, using the Nnwdaf_AnalyticsInfo_ContextTransfer service operation as defined in clause 7.3.3. This procedure, for example, can be invoked in the procedures described in clause 6.1B.2 to request the transfer of relevant analytics context.\nFigure 6.1B.3-1: Analytics Context Transfer\nThe procedure of analytics context information transfer comprises the following steps:\n1.\tThe consumer NWDAF requests analytics context by invoking Nnwdaf_AnalyticsInfo_ContextTransfer request service operation. The parameters that can be provided in the request are listed in clause 6.1B.4.\n2.\tThe provider NWDAF responds with analytics context to the consumer NWDAF. The analytics context that can be provided in the response is listed in clause 6.1B.4.\nIf the provider NWDAF stores analytics context (i.e. Historical output Analytics and/or Data related to Analytics) in ADRF, the provider NWDAF may include in the response the ADRF ID together with an indication of the Analytics Context Type stored in the ADRF (i.e. Historical output Analytics and/or Data related to Analytics).\nUpon receiving the analytics context, the consumer NWDAF may:\n-\tprovide the pending output analytics or historical analytics information to the analytics consumer per the subscription/request;\n-\tuse the historical data and analytics metadata in the analytics context to generate analytics;\n-\tuse the analytics accuracy related information in the analytics context to activate the checking of Analytics Accuracy Information for the transferred analytics ID, generate and provide the Analytics Accuracy Information for the consumer.\nNOTE:\tThe consumer NWDAF can analyse the timestamps of the historical data included in the analytics context in order to obtain the inference configuration used at the source NWDAF for data collection and may decide to use the same inference configuration for the analytics accuracy generation.\n-\tuse the ML Model accuracy related information in the analytics context to determine the need for registration at the NWDAF containing MTLF with the information to enable the NWDAF containing MTLF to reassociated the data of the existing subscription for ML Model Accuracy Information to a new ML Model Accuracy Monitoring process at the target NWDAF containing AnLF, reusing the existing data (as further detailed in clause 6.2E.3).\n-\tsubscribe to data collected for analytics with the data sources indicated in the analytics context;\n-\tif the ID(s) of the NWDAF(s) containing MTLF indicated in the analytics context is part of the locally configured (set of) IDs of NWDAFs containing MTLF, retrieve trained ML Model(s) from the indicated NWDAF(s) containing MTLF or based on the file address(es) of the trained ML Model(s) and use for analytics; and/or\n-\tsubscribe to output analytics from the indicated NWDAFs that collectively serve the transferred analytics subscription and perform analytics aggregation on the output analytics using the analytics metadata information, based on the analytics subscription aggregation information.\n6.1B.4\tContents of Analytics Context\nThe Nnwdaf_AnalyticsInfo_ContextTransfer service operation is used to transfer analytics context from a source NWDAF instance to a target NWDAF instance, whereby the target NWDAF consumes the Nnwdaf_AnalyticsInfo_ContextTransfer service operation produced by the source NWDAF instance to request the analytics context as depicted in Figure 6.1B.3-1.\nThe consumers of the Nnwdaf_AnalyticsInfo_ContextTransfer service operation (as specified in clause 7.3.3) provide the following input parameters:\n-\tA list of analytics context identifier(s): identify a set of analytics contexts that are available at the NWDAF instance providing this service and that are requested to be transferred to the consumer NWDAF instance. The analytics context identifier is provided as the following:\n-\tSubscription Correlation ID: identifies the analytics subscription for which the related analytics context is requested; or\n-\tA set of SUPI and associated Analytics ID for UE related Analytics; or\n-\tAn Analytics ID for NF related Analytics.\n-\t[OPTIONAL] Requested Analytics Context Type per analytics context identifier: indicates which part of the analytics context the consumer wishes to receive. Following values are specified:\n-\tPending output Analytics;\n-\tHistorical output Analytics;\n-\tAnalytics subscription aggregation information;\n-\tData related to Analytics;\n-\tAggregation related information;\n-\tML Model related information;\n-\tAnalytics accuracy related information.\n-\tML Model accuracy related information.\nNOTE:\tA list of \"analytics context identifiers\" can be provided by the source NWDAF to the target NWDAF in an analytics subscriptions transfer request as described in clause 6.1B.2.2. Information allowing to identify an analytics context can also be provided by the NWDAF consumer to the target NWDAF in the Nnwdaf_AnalyticsSubscription_Subscribe request and based on this information the target NWDAF derives the \"analytics context identifier\", as defined in clause 6.1B.2.1.\nThe producer NWDAF provides to the consumer of the Nnwdaf_AnalyticsInfo_ContextTransfer service operation (as specified in clause 7.3.3), the output information listed below:\n-\t(Set of) Analytics context matching the input parameters of the Nnwdaf_AnalyticsInfo_ContextTransfer request. If no Requested Analytics Context type parameters are available in the request, all available analytics context types are sent. Analytics context includes the following information parts, if available:\n-\tAnalytics related:\n-\tPending output analytics (i.e. not yet notified to the consumer).\n-\tHistorical output analytics information. The content of the output analytics is specified in clause 6.1.3 as output information of the Nnwdaf_AnalyticsSubscription_Notify or Nnwdaf_AnalyticsInfo_Request service operations.\n-\tTimestamp(s) of the last output analytics provided to the analytics consumer(s). Value is set to 0 if no output analytics had been sent yet.\n-\tAnalytics subscription aggregation information (only provided when analytics context is related to analytics aggregation): information about the analytics subscriptions that the source NWDAF has with the NWDAFs that collectively serve the transferred analytics subscription, which includes IDs and analytics metadata information of these NWDAFs for specific Analytics ID(s) and optionally input parameters of analytics exposure as defined in clause 6.1.3.\n-\tData related to Analytics:\n-\tHistorical data that is available at the source NWDAF and that is related to the analytics to be handed over to the target NWDAF. If available, the time period of the collected data, NF ID(s) of the data source(s) and information (e.g. filter and event reporting parameters) on the subscriptions with those data sources which were used to generate this historical data.\n-\tAggregation related information: Related to analytic consumers that aggregate analytics from multiple NWDAF subscriptions:\n-\t(Set of) NWDAF identifiers of NWDAF instances used by the NWDAF service consumer when aggregating multiple analytic subscriptions.\n-\tML Model related information:\n-\tID(s) of NWDAF(s) containing MTLF: Instance/Set ID(s) of the NWDAF(s) containing MTLF from which the source NWDAF currently subscribes to the ML Model Information used for the analytics.\n-\tOptionally, file address(es) of the trained ML Model(s), which is included only when the source NWDAF itself provides the trained ML Model(s) for the analytics subscription(s) for which the related analytics context is requested.\n-\tAnalytics Accuracy related information: The information is related to the parameters of the Analytics Accuracy Request Information and status of the analytics subscription due to NF consumer and NWDAF interactions pausing or resuming the analytics output. It includes:\n-\tTimestamp(s) of the last Analytics Accuracy Information provided to the analytics consumer(s). Value is set to 0 if no Analytics Accuracy Information had been sent yet;\n-\tIndication whether analytics subscription is paused;\n-\tRemaining time window of paused analytics subscription;\n-\tGround truth information: data types and data sources of the ground truth per analytics used for the accuracy information computation.\n-\tML Model accuracy related information: The information is related to the parameters of the ML Model Accuracy (i.e. Analytics accuracy for an ML model as described in clause 6.2E.3.3) Subscription Information requested by a NWDAF containing MTLF. It includes:\n-\toriginal Subscription Correlation ID for the ML Model Accuracy Information associated with the ML Model and/or analytics ID at the source NWDAF containing AnLF;\n-\tAnalytics ID, Target of Analytics Reporting and the corresponding Analytics filter associated with the original ML Model Monitoring subscription at the source NWDAF containing AnLF;\n-\tNWDAF containing AnLF NF ID of source NWDAF;\n-\tThe parameters used for the subscription for ML Model Accuracy Information for the given ML Model at the source NWDAF containing AnLF.\n6.1C\tNWDAF Registration/Deregistration in UDM\n6.1C.1\tGeneral\nThe procedures in this clause are applicable to UE-related analytics (e.g. UE mobility analytics) for some network deployments, e.g. such with an NWDAF co-located to an AMF or SMF, where the NWDAF is configured to register in UDM for the UEs that it is serving or collecting data for and for the related Analytics ID(s). The procedures in this clause are also applicable to analytics that are not UE-related, when the NWDAF collects UE-related data. This enables NWDAF service consumers to discover the NWDAF instance that is already serving the UE for one or more Analytics ID(s).\n6.1C.2\tNWDAF Registration in UDM\nFigure 6.1C.2-1 shows the procedures for registration of the NWDAF in UDM for UE-related analytics or UE-related data collection.\nFigure 6.1C.2-1: NWDAF registration in UDM\n1.\tNWDAF triggers a registration in UDM, e.g. based on local configuration in the NWDAF, the reception of a new Analytics subscription request, start of collection of UE related data or an OAM configuration action.\n2.\tThe NWDAF registers into UDM for the served UE, by sending Nudm_UECM_Registration request (UE ID, NWDAF ID, Analytics ID(s)).\n3.\tUDM sends a response to NWDAF.\n6.1C.3\tNWDAF De-registration from UDM\nFigure 6.1C.3-1 shows the procedures for deregistration of the NWDAF in UDM.\nFigure 6.1C.3-1: NWDAF de-registration from UDM\n1.\tNWDAF triggers a de-registration from a previous registration in UDM. This trigger may be that, e.g. the NWDAF has purged the analytics context for the UE (see clause 6.1B.4) for related Analytics ID(s), the NWDAF is no longer collecting data related to the UE, or an administrative action.\n2.\tNWDAF sends Nudm_UECM_Deregistration request (UE ID, NWDAF ID, Analytics ID(s)).\n3.\tUDM sends a response to NWDAF.",
      "chunk_type": "requirement",
      "cross_references": [
        "clause_6.1.3",
        "clause_6.1",
        "ts_23.502_clause_5.2.7.3",
        "ts_23.501_clause_6.3.13",
        "clause_5.2",
        "clause_6.2.5.2",
        "clause_6.2.2.1",
        "ts_23.502_clause_5.2.2.2.2",
        "clause_6.2",
        "clause_7.2.5",
        "clause_7.2.4",
        "clause_6.1.1",
        "clause_7.3.3",
        "figure_6.1",
        "ts_33.501",
        "ts_23.502",
        "ts_23.501"
      ]
    },
    {
      "chunk_id": "ts_23.288_6.2.1",
      "section_id": "6.2.1",
      "section_title": "General",
      "content": "The Data Collection feature permits NWDAF to retrieve data from various sources (e.g. NF such as AMF, SMF, PCF, NSACF, GMLC and AF; OAM), as a basis of the computation of network analytics.\nAll available data encompass:\n-\tOAM global NF data,\n-\tData available in NFs, e.g. behaviour data related to individual UEs or UE groups (e.g. UE reachability) and pre-computed metrics covering UE populations (e.g. number of UEs present in a geographical area), per spatial and temporal dimensions (e.g. per region for a period of time),\n-\tNF data available in the 5GC (e.g. NRF),\n-\tData available in AF.\nWhen DCCF, ADRF, MFAF or NWDAF hosting DCCF or ADRF are present in the network, the data collection also follows the principles described in clause 6.2.6.\nThe NWDAF shall use at least one of the following services:\n-\tthe Generic management services as defined in TS 28.532 [6], the Performance Management services as defined in TS 28.550 [7] or the Fault Supervision services as defined in TS 28.545 [9], offered by OAM in order to collect OAM global NF data.\n-\tthe Exposure services offered by NFs in order to retrieve data and other non-OAM pre-computed metrics available in the NFs.\n-\tOther NF services in order to collect NF data (e.g. NRF)\n-\tDCCF data management service to retrieve data using DCCF.\nThe NWDAF shall obtain the proper information to perform data collection for a UE identified by a SUPI, a group of UEs identified by an Internal-Group-Id or any UE:\n-\tFor an Analytics ID, NWDAF is configured with the corresponding NF Type(s) and/or event ID(s) and/or OAM measurement types.\n-\tNWDAF shall determine which NF instance(s) of the relevant NF type(s) are serving the UE, the group of UEs identified by an Internal-Group-Id or any UE, taking into account the S-NSSAI(s) and area of interest as defined in clause 7.1.3 of TS 23.501 [2].\n-\tNWDAF invokes Nnf_EventExposure_Subscribe services to collect data from the determined NF instance(s) and/or triggers the procedure in clause 6.2.3.2 to subscribe to OAM services to collect the OAM measurement.\nThe NWDAF performs data collection from an AF directly as defined in clause 6.2.2.2 or via NEF as defined in clause 6.2.2.3. According to the data collection request, the AF may further perform data collection from UE (see clause 6.4.2 and clauses 6.5.2-6.5.4) as defined in clause 6.2.8.\nThe NWDAF shall be able to discover the events supported by a NF.\nData collection procedures enables the NWDAF to efficiently obtain the appropriate data with the appropriate granularity.\nWhen a request or subscription for statistics or predictions is received, the NWDAF may not possess the necessary data to perform the service, including:\n-\tData on the monitoring period in the past, which is necessary for the provision of statistics and predictions matching the Analytics target period.\n-\tData on longer monitoring periods in the past, which is necessary for model training.\nTherefore, in order to optimize the service quality, the NWDAF may undertake the following actions:\n-\tThe NWDAF may return a confidence parameter as stated in clause 6.1.3 expressing the confidence in the prediction produced. Prediction may be returned with zero confidence as described below. This confidence is likely to grow in the case of subscriptions.\n-\tThe value of the confidence depends on the level or urgency expressed by the parameter \"preferred level of accuracy\" as listed in clause 6.1.3, the parameter \"time when analytics information is needed\" as listed in clause 6.1.3 and the availability of data. If no sufficient data is collected to provide an estimation for the preferred level of accuracy before the time deadline, the service shall return a zero confidence. Otherwise, the NWDAF may wait until enough data is collected before providing a response or a first notification.\n-\tIn order to be prepared for future requests on analytics from NFs/OAM, the NWDAF, upon operator configuration, may collect data on its own initiative, e.g. on samples of UEs and retain the data collected in the data storage.\nNOTE 1:\tThe NWDAF can send an error response to the analytics consumer to indicate that statistics are unavailable if the NWDAF was not prepared for future requests and did not collect data on its own initiative.\nThe volume and maximum duration of data storage is also subject to operator configuration.\nThe NWDAF may decide to reduce the amount of data collected to reduce signalling load, by either prioritizing requests received from analytics consumers, or reducing the extent (e.g. duration, scope) of data collection, or modifying the sampling ratios. When using sampling ratio, the NWDAF may, depending on the analytics required and based on local configuration, provide additional partitioning criteria to the NFs to allow for a better UEs representation and to request that the NFs first partition the UEs before applying sampling ratio (see Event Reporting Information as specified in TS 23.502 [3]). The NWDAF may provide one or multiple partitioning criteria in its request for data collection from NFs.\nIn order to optimize the performance and accuracy of data collection and reporting and reduce the impact on data producers, the NWDAF may request subscriptions to the NFs with the variable reporting periodicity parameter. Depending on the condition provided as part of this parameter, different reporting periodicity are used. The condition is the load of the NF.\nThe NWDAF may skip data collection phase when the NWDAF already has enough information to provide requested analytics.\nThe data which NWDAF may collect is listed for each analytics in input data clause and is decided by the NWDAF.\nNOTE 2:\tNWDAF can skip data collection phase for some specific input data per the requested analytics e.g. when some of the data is already available at NWDAF for the requested analytics, or when NWDAF considers that some of the data is not needed at all to provide the requested analytics as per the analytics consumer request (e.g. based on preferred level of accuracy or based on the time when analytics are needed).\nEvent exposure subscriptions for data collection from the AMF and the SMF may need to survive after the removal of UE context in the AMF including event exposure subscriptions, or upon the creation of new UE context in AMF or SMF. In order for event exposure subscriptions in AMF and SMF to be (re)created in these cases, the NWDAF may subscribe to the events in AMF and/or SMF via UDM for a UE identified by a SUPI or a group of UEs identified by an Internal-Group-Id, as specified in clause 4.15.4.4 of TS 23.502 [3].\nIn hierarchical interactions among NWDAFs, without standalone DCCF, or co-located DCCF, the efficiency of data collection can be achieved by inter-NWDAF instance cooperation among NWDAF instances on different levels of the hierarchy. An efficient data collection means that the same data required for the same Analytics ID or different Analytics IDs should not be collected multiple times by the different NWDAFs of the hierarchy.",
      "chunk_type": "definition",
      "cross_references": [
        "clause_6.2.6",
        "ts_23.501_clause_7.1.3",
        "clause_6.2.3.2",
        "clause_6.2.2.2",
        "clause_6.2.2.3",
        "clause_6.4.2",
        "clause_6.2.8",
        "clause_6.1.3",
        "ts_23.502_clause_4.15.4.4",
        "ts_28.532",
        "ts_28.550",
        "ts_28.545",
        "ts_23.501",
        "ts_23.502"
      ]
    },
    {
      "chunk_id": "ts_23.288_6.2.2.1",
      "section_id": "6.2.2.1",
      "section_title": "General",
      "content": "The Data Collection from NFs is used by NWDAF to subscribe/unsubscribe at any 5GC NF to be notified for data on a set of events.\nThe Data Collection from NFs is based on the services of AMF, SMF, UDM, PCF, NRF, NSACF, UPF and AF (possibly via NEF):\n-\tEvent Exposure Service offered by each NF as defined in clause 4.15 and clause 5.2 of TS 23.502 [3].\n-\tother NF services (e.g. Nnrf_NFDiscovery and Nnrf_NFManagement in NRF as defined in clause 4.17 of TS 23.502 [3])\nThis data collection service is used directly in order to retrieve behaviour data for individual UEs or groups of UEs (e.g. UE reachability) and also to retrieve global UE information (e.g. Number of UEs present in a geographical area).\nTable 6.2.2.1-1: NF Services consumed by NWDAF for data collection\nService producer\nService\nReference in TS 23.502 [3]\nAMF\nNamf_EventExposure (NOTE 2)\n5.2.2.3\n5.2.3.5\nSMF\nNsmf_EventExposure (NOTE 2)\n5.2.8.3\n5.2.3.5\nPCF\nNpcf_EventExposure (for a group of UEs identified by an Internal-Group-Id or any UE)\nNpcf_PolicyAuthorization_Subscribe (for a specific UE)\n5.2.5.7\nUDM\nNudm_EventExposure\n5.2.3.5\nNEF\nNnef_EventExposure\n5.2.6.2\nAF\nNaf_EventExposure\n5.2.19.2\nNRF\nNnrf_NFDiscovery\n5.2.7.3\nNnrf_NFManagement\n5.2.7.2\nNSACF\nNnsacf_SliceEventExposure\n5.2.21.4\nUPF\nNsmf_EventExposure or Nupf_EventExposure\n5.2.8.3\n5.2.26.2\nNOTE 1:\tThere is no data collected from the PCF by the NWDAF defined in this Release of the specification.\nNOTE 2:\tThe Nudm_EventExposure can be used when NWDAF uses the procedures specified in clause 4.15.4.4 of TS 23.502 [3] to subscribe to AMF or SMF via UDM.\nTo retrieve data related to a specific UE, there are two cases:\n-\tIf no Area of interest is indicated by the consumer, the NWDAF shall first determine which NF instances are serving this UE as stated in table 6.2.2.1-2 unless the NWDAF has already obtained this information due to recent operations related to this UE.\n-\tIf an Area of interest is indicated, the NWDAF can:\n-\tFirst determine the AMF serving the UE and subscribe UE location from the AMF. Once the UE is in or moves into the Area of interest, the NWDAF determines which NF instances are serving this UE as stated in table 6.2.2.1-2 unless the NWDAF has already obtained this information due to recent operations related to this UE; or\n-\tDetermine the NF instances of a given type of network function serving the Area of interest by querying NRF unless the NWDAF has already obtained this information due to recent operations related to this UE.\nTable 6.2.2.1-2: NF Services consumed by NWDAF to determine which NF instances are serving a UE\nType of NF instance (serving the UE) to determine\nNF to be contacted by NWDAF\nService\nReference in TS 23.502 [3]\nUDM\nNRF\nNnrf_NFDiscovery\n5.2.7.3\nAMF\nUDM\nNudm_UECM\n5.2.3.2\nSMF\nUDM\nNudm_UECM\n5.2.3.2\nBSF\nNRF\nNnrf_NFDiscovery\n5.2.7.3\nPCF\nBSF\nNbsf_Management\n5.2.13.2\nNEF\nNRF\nNnrf_NFDiscovery\n5.2.7.3\nNWDAF\nNRF\nUDM\nNnrf_NFDiscovery\nNudm_UECM\n5.2.7.3\n5.2.3.2\nNSACF\nNRF\nNnrf_NFDiscovery\n5.2.7.3\nGMLC\nNRF\nNnrf_NFDiscovery\n5.2.7.3\nThe UDM instance should be determined using NRF as described in clause 4.17.4 of TS 23.502 [3] and factors to determine as described in clause 6.3.8 of TS 23.501 [2].\nThe AMF, SMF instances should be determined using a request to UDM providing the SUPI. To determine the SMF serving a PDU session, the NWDAF should in addition provide the DNN and S-NSSAI of this PDU Session; otherwise the NWDAF will obtain a list of possibly multiple SMFs (e.g. one per PDU session).\nThe BSF instance is discovered and selected according to TS 23.503 [4], clause 6.1.1.2.2.\nThe PCF instance serving UE PDU Session(s) should be determined using a request to BSF with the allocated UE address, DNN and S-NSSAI.\nTo collect data (e.g. current number of UEs registered in a network slice or current number of PDU Sessions established in a network slice) from NSACF, the NSACF instance is discovered and selected as specified in clause 6.3.22 of TS 23.501 [2].\nWhen NWDAF receives a request addressed to an Internal Group ID from a consumer, NWDAF may need to initiate data collection from several 5GC NFs, such as AMF, SMF, UDM, PCF, AF (e.g. via NEF), etc. If an Area of interest is indicated by the consumer, NWDAF may first discover the instances of the required 5GC NFs deployed in the network, e.g. by querying NRF, otherwise:\n-\tFor discovering the UDM, NWDAF can query the NRF with the Internal Group ID as the target of the query.\n-\tFor discovering AMF, SMF, PCF, NEF and AF, NWDAF may need to discover all instances in the network by using the Nnrf_NFDiscovery service.\nNOTE 3:\tIt is assumed that all members of an Internal Group ID belong to the same UDM Group ID. NWDAF can select a UDM instance supporting the UDM Group ID of the Internal Group ID.\nThen, if data needs to be collected from AMF, SMF, UDM and PCF, NWDAF may initiate the data collection with the Internal Group ID as the target, e.g. subscribing to the event exposure in all the instances of a given type of network function. This subscription to all the instances of required source of event exposure handles, e.g. mobility of UEs across AMFs, or initiation of new PDU sessions with different allocated SMFs.\nFor collecting data from AMF and SMF, NWDAF may collect the data directly from AMF and/or SMF, or indirectly via UDM, according to clause 4.15.4.4 of TS 23.502 [3]. The indirect method may be required if the event exposure subscription from NWDAF, for a UE identified by a SUPI or a group of UEs identified by an Internal-Group-Id, needs to survive the removal of UE context in the AMF including event exposure subscriptions, or upon the creation of new UE context in AMF or SMF serving the UE or group of UEs. In this case the UDM is responsible for (re)creating event exposure subscriptions in AMF and SMF, as specified in clause 4.15.4.4 of TS 23.502 [3].\nThe NWDAF determines to collect data from a trusted AF supporting specific Event ID(s) and serving specific application(s) based on internal configuration.\nThe NEF instance that is serving a specific network slices and/or applications of a UE should be determined using NRF using optional request parameters as defined in clause 6.3.14 of TS 23.501 [2]\nIf NWDAF needs to collect data from an AF deployed outside the operator's domain, the NWDAF shall contact NEF with a SUPI or Internal Group ID as the target of the data collection. NEF is responsible for translation of SUPI to GPSI, or internal to external group identifiers, by querying UDM, prior to contacting the AF.\nNOTE 4:\tIt is assumed that an AF is provisioned with the list of UE IDs (GPSIs or SUPIs) belonging to an External or Internal Group ID.\nNWDAF may collect data directly from UPF for a specific UE identified by a SUPI, a group of UEs identified by an Internal-Group-Id or for any UEs as defined in clause 5.8.2 of TS 23.501 [2] and in clause 4.15.4.5 of TS 23.502 [3]. NWDAF may subscribe indirectly via SMF or directly to UPF for UPF data collection. The direct subscription to UPF event exposure service is only for data collection for any UE e.g., to collect user data usage information for NWDAF NF Load analytic, and if the subscription is not including any of the parameters described in Table 4.15.4.5.1-1 of TS 23.502 [3].\nNOTE 5:\tTo avoid causing high UPF load due to extensive reporting related to all traffic flows, the NWDAF can preferably subscribe for reporting for some UEs only.\nTo retrieve required data for any UE, the NWDAF may subscribe to events from the AMF and/or SMF instances or UPF instances it has determined, setting the target of event reporting to \"any UE\" and the event filter(s) according to the Analytics Filter Information. Alternatively, if the required data is communication related and for any UE within an Area of interest, the NWDAF can obtain from the AMF instances it has determined a list of UEs located within the Area of Interest. Based on the obtained UE list, for each UE in the list, the NWDAF retrieves the SMF serving the UE and the NWDAF subscribes to data from the relevant SMF per each specific UE. The indirect event exposure subscription to AMF or SMF via UDM is not available for \"any UE\" or \"any UE within an Area of interest\". If the required data is collected from UE via AF as described in clause 6.2.8 and the Target of Analytics Reporting received from consumer is \"any UE\", the NWDAF may either set the target of event reporting to \"any UE\" in the data collection request to the AF, or may determine a list of UEs from AMF and/or SMF based on the Analytics Filter Information and send the data collection request to the AF for the determined list of UEs.\nNOTE 6:\tIf NWDAF requires collecting data from either AMF or SMF for \"any UE\" or \"any UE within an Area of Interest\", NWDAF can use the direct Event Exposure subscription to AMF or SMF, since subscriptions to \"any UE\" or \"any UE within an Area of Interest\" are persistent by nature in AMF or SMF, due to not being linked to a UE context.\nTo retrieve data related to \"any UE\" based on Analytics Filter Information, the NWDAF shall first determine which NF instances are matching the Analytics Filter Information (see clause 6.7.5.1) as stated in table 6.2.2.1-3 unless the NWDAF has already obtained this information due to recent operations related to this Analytics Filter Information.\nTable 6.2.2.1-3: NF Services consumed by NWDAF to determine which NF instances are matching analytics filters\nType of NF instance (matching analytics filters) to determine\nNF to be contacted by NWDAF\nService\nReference in TS 23.502 [3]\nAMF, SMF, UPF\nNRF\nNnrf_NFDiscovery\n5.2.7.3\nTo retrieve data related to Analytics IDs for \"any UE\" with Analytics Filter Information defining an area of interest in terms of TA or Cells and/or with specific S-NSSAIs, NWDAF requires the network slice association information to properly determine the AMFs to collect data from as well as the proper queries to OAM for data collection.\nNOTE 7:\tExamples of Analytics ID requiring NWDAF to use network slice association information for data retrieval are: network performance clause 6.6.1; user data congestion clause 6.8.1; QoS Sustainability clause 6.9; Dispersion Analytics clause 6.10.1; observed service experience for a Network Slice clause 6.4.1; and slice load analytics clause 6.3.\nThe network slice association information comprises the TAs associated with each AMF and for each TAI its associated access type, cells and list of supported S-NSSAIs (including indication of S-NSSAIs restricted by AMF). Additionally, the mapping of cells per TAI and supported S-NSSAIs (including indication of S-NSSAIs restricted by AMF) for TAI for each AMF can change and NWDAF shall obtain this accurate information in order to properly retrieve data for analytics generation.\nIn order to derive the network slice association information, NWDAF may be configured with the mapping of cells per TAI and the S-NSSAIs per TAI. NWDAF may subscribe to the \"S-NSSAIs per TAI mapping\" event exposed by AMF. The NWDAF may use the configured information (when the analytics subscription or request is at cell granularity) and the area of interest in the analytics subscription or request to retrieve from AMF the list of supported S-NSSAIs (including indication of S-NSSAIs restricted by AMF) per TAI and access types per TAI for each AMF in the required area of interest. NWDAF consumes the \"S-NSSAIs per TAI mapping\" event exposed by AMF using, as target of event reporting, the list of TAIs based on the area of interest received in the Analytics Filter Information or identified by the mapping of the Cells per TAI matching to the Cell granularity included in the Analytics Filter Information. The AMF \"S-NSSAIs per TAI mapping\" event output contains, for each of the TAIs requested by NWDAF, its associated access type and the list of supported S-NSSAIs (including indication of S-NSSAIs restricted by AMF).\nTo retrieve data from SMFs for Analytics IDs subscription or requests for \"any UE\" including Analytics Filter Information with specific Applications, DNNs, DNAIs and area of interest per TA granularity, NWDAF shall first discover the SMF serving the area of interest via NRF.\nNOTE 8:\tExamples of Analytics ID requiring NWDAF to collect data related to PDU sessions associated with an AoI with TA granularity are: network performance clause 6.6.1; user data congestion clause 6.8.1, QoS Sustainability clause 6.9.\nNWDAF may directly consume events from the discovered and selected SMF using the event target set to \"any PDU session\" and event filters with the same parameters of the Analytics Filter Information, i.e. list of Application IDs and/or DNNs and/or DNAI and the area of interest related to the requested Analytics ID.\n1.\tWhen SMF supports the exchange of UE Location parameter when SMF interacts with AMF via Nsmf_PDUSession_Create/Update/CreateSMContext/UpdateSMContext due to session establishment, modification, or release, service request, or handover procedures (as defined in clause 5.2.8.2 of TS 23.502 [3]), SMF can directly map the PDU sessions to an AoI with TA granularity.\nIf there are any changes in PDU sessions in the area of interest, for the Application ID and/or DNN and/or DNAI subscribed by NWDAF, SMF notifies the detected changes to NWDAF via Nsmf_EventExposure_Notify service operation, enabling NWDAF to keep an updated map of SMF and PDU sessions associated with the Analytics Filter Information in an area of interest.\n2.\tWhen SMF does not support the exchange of UE Location parameter when SMF interacts with AMF but supports the mapping of PDU sessions per TA (as defined in clause 5.6.11 of TS 23.501 [2]), SMF may subscribe to UE mobility event notifications of AMF as described in clause 5.3.4.4 of TS 23.501 [2] using event ID \"UE moving in or out of Area of Interest\" and Event Filters as described in Table 5.2.2.3.1-1 from TS 23.502 [3] to retrieve the list of SUPIs (and GPSIs if available) in the area of interest. Based on the retrieved list of SUPIs in the area of interest, SMF identifies the PDU sessions in the area of interest.\n3.\tWhen SMF does not support the exchange of UE Location parameter when SMF interacts with AMF nor supports the mapping of PDU sessions per TA (as defined in clause 5.6.11 of TS 23.501 [2]), SMF rejects the request from NWDAF. Upon the reject, NWDAF identifies the need to create the mapping of PDU sessions per TA. NWDAF subscribes to UE mobility event notifications of AMF as described in clause 5.3.4.4 of TS 23.501 [2] using event ID \"UE moving in or out of Area of Interest\" and Event Filters as described in Table 5.2.2.3.1-1 from TS 23.502 [3] to retrieve the list of SUPIs (and GPSIs if available) in the area of interest. Based on the retrieved list of SUPIs in the area of interest, NWDAF subscribes to the SMFs serving the UEs in the area of interest and derives the mapping of PDU sessions per TA.\nAn NWDAF may require to discover and select other NWDAFs for UE related analytics. In this case, the NWDAF may discover from UDM if an NWDAF is already collecting data related to the UE, as specified in clauses 5.2 and 6.1C.",
      "chunk_type": "definition",
      "cross_references": [
        "ts_23.502_clause_4.15",
        "ts_23.502_clause_5.2",
        "ts_23.502_clause_4.17",
        "ts_23.502_clause_4.15.4.4",
        "ts_23.502_clause_4.17.4",
        "ts_23.501_clause_6.3.8",
        "ts_23.503_clause_6.1.1.2.2",
        "ts_23.501_clause_6.3.22",
        "ts_23.501_clause_6.3.14",
        "ts_23.501_clause_5.8.2",
        "ts_23.501_clause_4.15.4.5",
        "clause_6.2.8",
        "clause_6.7.5.1",
        "clause_6.6.1",
        "clause_6.8.1",
        "clause_6.9",
        "clause_6.10.1",
        "clause_6.4.1",
        "clause_6.3",
        "ts_23.502_clause_5.2.8.2",
        "ts_23.501_clause_5.6.11",
        "ts_23.501_clause_5.3.4.4",
        "table_6.2.2.1-1",
        "table_6.2.2.1-2",
        "ts_23.502_table_4.15.4.5.1-1",
        "table_6.2.2.1-3",
        "ts_23.502_table_5.2.2.3.1-1",
        "ts_23.502_clause_4.15.4.5",
        "ts_23.502",
        "ts_23.501",
        "ts_23.503"
      ]
    },
    {
      "chunk_id": "ts_23.288_6.2.2.2",
      "section_id": "6.2.2.2",
      "section_title": "Procedure for Data Collection from NFs",
      "content": "The procedure in Figure 6.2.2.2-1 is used by NWDAF to subscribe/unsubscribe at NFs in order to be notified for data collection on a related event (s), using Event Exposure Services as listed in Table 6.2.2.1-1. Depending on local regulation requirements, user consent for UE related data collection and usage of collected data may be required. User consent is defined for a specific purpose such as, e.g. analytics or model training. NWDAF checks user consent taking the purpose for data collection and usage of these data into account.\nFigure 6.2.2.2-1: Event Exposure Subscribe/unsubscribe for NFs\n1.\tThe NWDAF checks if data is to be collected for a user, i.e. SUPI or GPSI, then, depending on local policy and regulations, the NWDAF checks the user consent by retrieving the user consent information from UDM using Nudm_SDM_Get including data type \"User consent\". If user consent is not granted, NWDAF does not subscribe to event exposure for events related to this user and the data collection for this SUPI or GPSI stops here.\n2.\tIf the user consent is granted, the NWDAF subscribes to UDM to notifications of changes on subscription data type \"User consent\" for this user using Nudm_SDM_Subscribe.\n3.\tThe NWDAF subscribes to or cancels subscription for a (set of) Event ID(s) by invoking the Nnf_EventExposure_Subscribe/Nnf_EventExposure_Unsubscribe service operation.\nNOTE 1:\tThe Event ID(s) are defined in TS 23.502 [3].\n4.\tIf NWDAF subscribes to a (set of) Event ID(s), the NFs notify the NWDAF (e.g. with the event report) by invoking Nnf_EventExposure_Notify service operation according to Event Reporting Information in the subscription.\nWhen the Reporting type is provided at step 1, the NWDAF determines that the events are disappeared, if the same events are included in the notification compared to the previous notification. Otherwise, NWDAF determines the events are newly appeared or changed. Also, the NWDAF restores the events that are not included in the notification, but included in the previous notification.\nIf the Granularity of dynamics is applied to the subscription, the NWDAF shall infer the events in the NF from the events in the previous notification with the applied Granularity of dynamics.\nNOTE 2:\tThe Event Reporting Information are defined in TS 23.502 [3].\nNOTE 3:\tThe NWDAF can use the immediate reporting flag as defined in Table 4.15.1-1 of TS 23.502 [3] to meet the request-response model for data collection from NFs.\nNOTE 4:\tThis procedure is also used when the NWDAF subscribes for data from a trusted AF.\n5.\tThe UDM may notify the NWDAF on changes of user consent at any time after step 2.\n6-7.\tIf user consent is no longer granted for a user for which data has been collected, the NWDAF shall unsubscribe to any Event ID to collect data for that SUPI or GPSI. The NWDAF may unsubscribe to be notified of user consent updates from UDM for each SUPI for which data consent has been revoked.",
      "chunk_type": "procedure",
      "cross_references": [
        "table_6.2.2.1-1",
        "ts_23.502_table_4.15.1-1",
        "figure_6.2.2.2-1",
        "ts_23.502"
      ]
    },
    {
      "chunk_id": "ts_23.288_6.2.2.3",
      "section_id": "6.2.2.3",
      "section_title": "Procedure for Data Collection from AF via NEF",
      "content": "The procedure in Figure 6.2.2.3-1 is used by NWDAF to collect information from AFs via the NEF.\nNOTE 1:\tIn this release, AF registers its available data to NWDAF via OAM configuration at NEF.\nThe AF collectable data information includes: AF identification, AF service identification (e.g. endpoint information of Naf_EventExposure), available data to be collected per application (e.g. identified by Event ID(s)).\nFigure 6.2.2.3-1: Data Collection from AF via NEF\n1a.\tAfter the registration of AF available data at the NEF, NEF generates an event exposure with new EventID to be associated with available data to be collected from AF. NEF invokes Nnrf_NFManagement_NFUpdate_request service operation to update its registration information (i.e. NEF Profile) including the generated Event IDs and associated AF identification, Application ID(s) (i.e. internal application ID or Application ID known in the core network).\n1b.\tNRF stores the received NEF registration information including available data to be collected from AF.\n1c.\tNRF sends Nnrf_NFManagement_NFUpdate_response message to NEF.\n1d.\tWhen NWDAF needs to discovery the available data from AFs and the appropriated NEF to collect this data, NWDAF invokes Nnrf_NFDiscovery_Request_request service operation using as parameter the NEF NF Type and optionally a list of Event ID(s), AF identification and application ID.\n1e.\tNRF matches the requested query for available data in AFs with the registered NEF Profiles and sends this information via Nnrf_NFDiscovery_Request_response message to NWDAF.\nNOTE 2:\tAfter the registration and discovery procedure described in step 1, NWDAF identifies the available data per AF per application and the proper NEF to collect such data.\n2.\tThe NWDAF subscribes to or cancels subscription to data in AF via NEF by invoking the Nnef_EventExposure_Subscribe or Nnef_EventExposure_Unsubscribe service operation. If the event subscription is authorized by the NEF, the NEF records the association of the event trigger and the NWDAF identity.\nNOTE 3:\tUser consent for retrieving user data in AF via NEF is not specified in this Release.\n3.\tBased on the request from the NWDAF, the NEF subscribes to or cancels subscription to data in AF by invoking the Naf_EventExposure_Subscribe/ Naf_EventExposure_Unsubscribe service operation.\n4.\tIf the NEF subscribes to data in AF, the AF notifies the NEF with the data by invoking Naf_EventExposure_Notify service operation according to Event Reporting Information in the subscription.\n5.\tIf the NEF receives the notification from the AF, the NEF notifies the NWDAF with the data by invoking Nnef_EventExposure_Notify service operation.\nWhen the Reporting type is provided at step 2, the NWDAF determines that the events are disappeared, if the same events are included in the notification compared to the previous notification. Otherwise, NWDAF determines the events are newly appeared or changed. Also, the NWDAF restores the events that are not included in the notification, but included in the previous notification.\nIf the Granularity of dynamics is applied to the subscription, the NWDAF shall infer the events in the AF from the events in the previous notification and the applied Granularity of dynamics.",
      "chunk_type": "procedure",
      "cross_references": [
        "figure_6.2.2.3-1"
      ]
    },
    {
      "chunk_id": "ts_23.288_6.2.2.4",
      "section_id": "6.2.2.4",
      "section_title": "Procedure for Data Collection from NRF",
      "content": "The NWDAF may use NRF services and Network Function service framework procedures as defined in clause 5.2.7 and clause 4.17 of TS 23.502 [3]:\n-\tNF/NF service discovery procedures (in clause 4.17.4 of TS 23.502 [3]) and Nnrf_NFDiscovery service (in clause 5.2.7.3 of TS 23.502 [3]) in order to dynamically discover the NF instances and services of the 5GC. Such discovery may be performed on a periodic basis, or under specific circumstances.\n-\tNF/NF service status subscribe/notify procedures (in clause 4.17.7 of TS 23.502 [3]) and Nnrf_NFManagement service (in clause 5.2.7.2 of TS 23.502 [3]) in order to be notified about the change of status of an NF. The service operations for obtaining status information are NFStatusSubscribe and NFStatusNotify, from the Nnrf_NFManagement service.\nThe information provided by the NRF to the NWDAF with the Nnrf_NFDiscovery_Request and the Nnrf_NFManagement_NFStatusNotify service operations are the NF Profiles which includes the supported NF services of the NFs as defined in clause 5.2.7 of TS 23.502 [3]. Such information can be used to set-up and maintain a consistent network map for data collection and also, depending on use cases, to perform analytics (e.g. NF load analytics as defined in clause 6.5).\nIf the NWDAF needs to keep a consistent network map for data collection from AMFs and SMFs associated with a list of TAs, the subscription to NFStatusSubscribe for such type of NFs may include the list of TAs target.",
      "chunk_type": "procedure",
      "cross_references": [
        "ts_23.502_clause_5.2.7",
        "ts_23.502_clause_4.17",
        "ts_23.502_clause_4.17.4",
        "ts_23.502_clause_5.2.7.3",
        "ts_23.502_clause_4.17.7",
        "ts_23.502_clause_5.2.7.2",
        "clause_6.5",
        "ts_23.502"
      ]
    },
    {
      "chunk_id": "ts_23.288_6.2.2.5",
      "section_id": "6.2.2.5",
      "section_title": "Usage of Exposure framework by the NWDAF for Data Collection",
      "content": "The NWDAF shall subscribe (and unsubscribe) to the Event exposure service from NF(s) reusing the framework defined in clause 4.15 of TS 23.502 [3]. This framework supports the possibility for the NWDAF to indicate/request:\n-\tEvents-ID: one or multiple Event ID(s) defined in clause 4.15.1 of TS 23.502 [3].\n-\tTarget of Event Reporting defined in clause 4.15.1 of TS 23.502 [3]: the objects targeted by the Events. Within a subscription, all Event ID(s) are associated with the same target of event reporting. In the case of NWDAF, the objects can be UE(s), UE group(s), any UE.\n-\tEvent Filter Information defined in clause 4.15.1 of TS 23.502 [3]. This provides Event Parameter Types and Event Parameter Value(s) to be matched against.\n-\tA Notification Target Address and a Notification Correlation ID as defined in clause 4.15.1 of TS 23.502 [3], allowing the NWDAF to correlate notifications received from the NF with this subscription.\n-\tEvent Reporting Information described in TS 23.502 [3] Table 4.15.1-1 and the muted stored events exposure as described in clause 6.2.7.\n-\tExpiry time as defined in clause 4.15.1 of TS 23.502 [3].\nThe notifications from NFs/AFs contain on top of the Event being reported (and of dedicated information being reported for this event):\n-\tthe Notification Correlation Information provided by the NWDAF in its request;\n-\t(when applicable to the event) the Target Id e.g. UE ID (SUPI and if available GPSI); and\n-\ta time stamp.",
      "chunk_type": "requirement",
      "cross_references": [
        "ts_23.502_clause_4.15",
        "ts_23.502_clause_4.15.1",
        "clause_6.2.7",
        "ts_23.502_table_4.15.1-1",
        "ts_23.502"
      ]
    },
    {
      "chunk_id": "ts_23.288_6.2.3.1",
      "section_id": "6.2.3.1",
      "section_title": "General",
      "content": "The NWDAF may collect relevant management data from the services in the OAM as configured by the PLMN operator.\n‐\tNG RAN or 5GC performance measurements as defined in TS 28.552 [8].\n‐\t5G End to end KPIs as defined in TS 28.554 [10].\nNWDAF shall use the following services to have access to the information provided by OAM:\n-\tGeneric performance assurance and fault supervision management services as defined in TS 28.532 [6].\n‐\tPM (Performance Management) services as defined in TS 28.550 [7].\n‐\tFS (Fault Supervision) services defined in TS 28.545 [9].\n-\tMDA (Management Data Analytics) services as defined in TS 28.104 [45].\nNWDAF can be configured to invoke the existing OAM services to retrieve the management data that are relevant for analytics generation, which may include NF resources usage information (e.g. usage of virtual resources assigned to NF) and NF resource configuration information (e.g. life cycle changes of NF resource configurations).\nOAM perform the required configuration in order to provide the information requested by NWDAF subscription and perform the tasks, e.g. data collection, data processing, associated with the subscribed request from NWDAF.\nAnother usage of OAM services is when the target of data collection is a specific UE, via MDT based retrieval of information:\n-\tMeasurement collection for MDT as defined in TS 37.320 [20].\nIn addition, NWDAF can be provisioned with Network Slice information (i.e. as defined by the NetworkSliceInfo specified in TS 28.541 [22]) when a slice is created or modified via OAM configuration mechanism as defined in TS 28.541 [22] and TS 28.532 [6].",
      "chunk_type": "definition",
      "cross_references": [
        "ts_28.552",
        "ts_28.554",
        "ts_28.532",
        "ts_28.550",
        "ts_28.545",
        "ts_28.104",
        "ts_37.320",
        "ts_28.541"
      ]
    },
    {
      "chunk_id": "ts_23.288_6.2.3.2",
      "section_id": "6.2.3.2",
      "section_title": "Procedure for data collection from OAM",
      "content": "The interactions between NWDAF and OAM for data collection are illustrated in Figure 6.2.3.2-1. The data collected depends on the use cases. This figure is an abstraction of the OAM performance data file report management service that is defined TS 28.532 [6]. The actual OAM services and reporting mechanisms that NWDAF may use are specified in TS 28.532 [6], TS 28.550 [7] or TS 28.545 [9].\nThe flow below assumes the NWDAF is configured on how to subscribe to the relevant OAM services.\nOAM shall setup the required mechanisms to guarantee the continuous data collection requested by NWDAF.\nFigure 6.2.3.2-1: Data collection from OAM performance data file report management service\n1.\t(Clause 11.6.1.3.2 of TS 28.532 [6]), Subscribe (Input): NWDAF subscribes to the notification(s) related to the services provided by the management service producer.\n2.\t(Clause 11.6.1.3.3 of TS 28.532 [6]), Subscribe (Output): management service producer responses to NWDAF if the subscription is success or not.\n3.\tData processing: management service producer prepares the data.\n4.\t(Clause 11.6.1.1 of TS 28.532 [6]), Notification (notifyFileReady): management service producer notifies the data file is ready.\nAs the final step, NWDAF fetches data by using file transfer protocols as defined in clause 11.6.2 of TS 28.532 [6].\nNOTE 1:\tThe call flow in Figure 6.2.3.2-1 only shows a subscribe/notify model for the simplicity, however both request-response and subscription-notification models are supported.\nNOTE 2:\tNWDAF is configured with the Network Slice information (i.e. NetworkSliceInfo including a DN (Distinguished Name) of the NetworkSlice managed object relating to the network slice instance associated to the S-NSSAI and NSI ID if available as defined in TS 28.541 [22]). Based on the Network Slice information, the NWDAF uses the DN (Distinguished Name) to identify the NetworkSlice managed object relating to the S-NSSAI and NSI ID and consumes the management services to collect the management data of the corresponding NetworkSlice managed object (including the NRF serving the network slice, the NFs associated to the network slice, the NG RAN or 5GC performance measurements defined in TS 28.552 [8], or the 5G end to end KPIs defined in TS 28.554 [10]) provided by OAM.",
      "chunk_type": "procedure",
      "cross_references": [
        "ts_28.532_clause_11.6.1.3.2",
        "ts_28.532_clause_11.6.1.3.3",
        "ts_28.532_clause_11.6.1.1",
        "ts_28.532_clause_11.6.2",
        "figure_6.2.3.2-1",
        "ts_28.532",
        "ts_28.550",
        "ts_28.545",
        "ts_28.541",
        "ts_28.552",
        "ts_28.554"
      ]
    },
    {
      "chunk_id": "ts_23.288_6.2.4",
      "section_id": "6.2.4",
      "section_title": "Correlation between network data and service data",
      "content": "The Correlation information in input data which helps NWDAF correlate data from different NFs, OAM and UE application(s) is defined in Table 6.2.4-1, which is subject to all the network data analytics.\nNOTE:\tFor simplicity, the correlation information is not listed in the input data per network data analytics.\nTable 6.2.4-1: Correlation Information\nCorrelation Information\nDescription\nTimestamp, IP address 5-tuple\nTo correlate the data from AF and from UPF.\nTimestamp, AN Tunnel Info (Clause 9.3.2.2 of TS 38.413 [16])\nTo correlate the UPF data and OAM data which are reported by the RAN (e.g. Reference Signal Received Power or Reference Signal Received Quality as defined in Table 6.4.2-3).\nTimestamp, UE IP address\nTo correlate the data from UPF and SMF.\nTimestamp, SUPI\nTo correlate data from SMF and AMF.\nTimestamp, SUPI, DNN, S-NSSAI or UE IP address\nTo correlate data from SMF and PCF.\nTimestamp, RAN UE NGAP ID\n(Clause 9.3.3.2 of TS 38.413 [16]) and Global RAN Node ID\nTo correlate the AMF data and OAM data reported by the RAN (e.g. Reference Signal Received Power or Reference Signal Received Quality as defined in Table 6.4.2-3).\nTimestamp, Application ID, IP filter information\nTo correlate data from SMF and AF.\nTimestamp, UE ID or UE IP address, Application ID, DNN, S-NSSAI\nTo correlate data from 5GC NF (e.g. SMF, UPF) and UE Application (via the AF).",
      "chunk_type": "general",
      "cross_references": [
        "ts_38.413_clause_9.3.2.2",
        "ts_38.413_clause_9.3.3.2",
        "table_6.2.4-1",
        "table_6.4.2-3",
        "ts_38.413"
      ]
    },
    {
      "chunk_id": "ts_23.288_6.2.5.1",
      "section_id": "6.2.5.1",
      "section_title": "General",
      "content": "In certain situations, an NWDAF Service Consumer expects to receive analytics by a given time. In particular, when an NWDAF Service Consumer is collecting analytics from multiple NWDAFs it can be necessary to coordinate the timing of the analytics subscriptions/requests from the same NWDAF service consumer.\nThe NWDAF Service Consumer may use \"time when analytics information is needed parameter\" (see clause 6.1.3) as a dynamic timer to indicate the minimum time it is going to wait (i.e. \"expected waiting time\") to receive the analytics collected from multiple NWDAFs.",
      "chunk_type": "definition",
      "cross_references": [
        "clause_6.1.3"
      ]
    },
    {
      "chunk_id": "ts_23.288_6.2.5.2",
      "section_id": "6.2.5.2",
      "section_title": "Procedure for time coordination across multiple NWDAFs",
      "content": "Figure 6.2.5.2-1: Procedure for time coordination across multiple NWDAFs\n1a-1b.\tOn analytics request/subscription, the NWDAF Service Consumer indicates the \"expected waiting time\" as \"time when analytics is needed\" parameter to those NWDAFs from which it expects to receive the analytics latest by the \"time when analytics information is needed\", using either the Nnwdaf_AnalyticsInfo_Request or Nnwdaf_AnalyticsSubscription_Subscribe service operation. In this example, NWDAF1 and NWDAF2 are the NWDAFs with tightly related analytics.\n2a-2b.\tEach NWDAF generates the requested analytics based on data from related data sources. In this example, NWDAF1 processes data from NF1 and NWDAF2 processes data from NF2.\n3a-3b.\t[Optional] If the \"time when analytics information is needed\" is reached, but the analytics is not ready, the NWDAF may indicate a \"revised waiting time\" in an error response or error notification, using either the Nnwdaf_AnalyticsInfo_Request response or Nnwdaf_AnalyticsSubscription_Notify service operation, depending on the service used in step 1.\n4a-4b.\t[Optional] On receiving an indicated \"revised waiting time\" as part of an error response or error notification, the NWDAF Service consumer may use the \"revised waiting time\" to update the \"time when analytics information is needed\" parameter for future analytics requests/subscriptions to the same group of NWDAFs.\n5a-5b.\tIf the value of the \"time when analytics information is needed\" was updated in step 4, the NWDAF Service Consumer, in future requests or within current subscription, indicates the new expected waiting time as \"time when analytics information is needed\" to all NWDAFs with tightly related analytics, using either the Nnwdaf_AnalyticsInfo_Request or Nnwdaf_AnalyticsSubscription_Subscribe service operation.\nNOTE 1:\tSteps 3a-3b and steps 4a-4b may happen in different orders depending on the timing of analytics collection (from other NFs, e.g. NF1 or NF2) or processing.\nNOTE 2:\tParameter \"time when analytics is needed\" as in steps 1a-1b, 3a-3b, 4a-4b and 5a-5b can be per individual Analytics ID.",
      "chunk_type": "procedure",
      "cross_references": [
        "figure_6.2.5.2-1"
      ]
    },
    {
      "chunk_id": "ts_23.288_6.2.6.0",
      "section_id": "6.2.6.0",
      "section_title": "General",
      "content": "Data collection may be performed via DCCF, MFAF and ADRF, when such NFs are deployed, or via NWDAF (hosting DCCF and/or ADRF). The NF services used for DCCF, MFAF, ADRF and the NWDAF (hosting DCCF and/or ADRF) are listed in Table 6.2.6.0-1.\nTable 6.2.6.0-1: NF Services for the enhanced data collection procedures\nService producer\nService\nReference\nNWDAF\nNnwdaf_DataManagement\n7.4\nDCCF\nNdccf_DataManagement\nNdccf_ContextManagement\n8.2\n8.3\nMFAF\nNmfaf_3daDataManagement\nNmfaf_3caDataManagement\n9.2\n9.3\nADRF\nNadrf_DataManagement\n10.2\nDCCF, MFAF and NWDAF hosting DCCF shall use the same services listed in clause 6.2.1 from OAM and NFs (including AFs directly or via NEF) to collect data. Additionally, the new services for data exposure from DCCF, MFAF, ADRF and NWDAF (hosting DCCF and/or ADRF) as specified in clause 8, 9, 10 and 7.4 may also be used for data collection.\nThe NWDAF, DCCF, ADRF shall obtain the proper information to perform data collection for a UE identified by a SUPI, a group of UEs identified by an Internal-Group-Id or any UE following the principles of clause 6.2.1.\nWhen NWDAF or DCCF need to discover the sources of data collection, they follow the principles defined in clause 6.2.2.1 in the case of data collection from NFs; in clause 5A.2 in the case of DCCF deployed in the network and requiring data from NWDAFs or ARDFs that independently collect data; clause 5.2 in the case of NWDAF (hosting DCCFs) and collecting data from other NWDAFs.",
      "chunk_type": "definition",
      "cross_references": [
        "clause_6.2.1",
        "clause_8",
        "clause_6.2.2.1",
        "clause_5",
        "clause_5.2",
        "table_6.2.6.0-1"
      ]
    },
    {
      "chunk_id": "ts_23.288_6.2.6.1.0",
      "section_id": "6.2.6.1.0",
      "section_title": "General",
      "content": "NWDAFs may provide bulked data to consumers as an alternative to providing individual events (i.e. subscription to multiple event IDs to obtain the data required for an analytics generation).\nThe bulked data is the set of data samples from the collected event notifications to be used for an Analytics ID for a consumer of NWDAF. A data sample may be a notification, in which case the bulked data may comprise a group of received notifications, or a data sample may be information extracted from a notification and processed, in which case the bulked data comprises the processed information. The bulked data can be used for the purpose of analytics inference or ML Model training.\nThe bulked data is generated based on the set of data samples from event notifications collected from NFs/OAM and the properties for the selection of such data, Consumers of bulked data or operators may define different rules (e.g. aggregation formats or processes) for generation of bulked data for training or inference.\nNFs capable to expose bulked data have the following capabilities:\n-\tExposing runtime collected data (e.g. data from NFs/AFs/OAM retrieved via notification mechanisms), or historical collected data (e.g. data from NFs/AFs/OAM that were at some point collected, then stored), or both;\n-\tApplying selection processes of data samples or processing mechanisms for the generation of the bulked data according to bulked data formatting and processing instructions provided by consumers of the bulked data or defined by an operator. The bulked data formatting and processing instructions may include the formatting and processing instructions as specified in clause 5A.4 and further instructions as described in clause 6.2.6.1.1. Such instructions define the allowed and/or restricted properties and/or processes to be applied to the set of data from the collected event notifications to be used for the bulked data, the properties and processes being:\n-\tThe properties associated with the Bulked data formatting and processing are filters over the data to be associated with the bulked data. The properties for bulked data are defined as per Data Specification parameters in clause 6.2.6.1.1.\n-\tThe processes associated with the bulked data formatting and processing are mechanisms applied to the data to be associated with the bulked data and are defined according to the Formatting and Processing parameter defined in clause 5A.4 and the further instructions defined in clause 6.2.6.1.1. These processes may comprise: definition if data to be used for composing the bulked data is directly extracted from collected events, or the data is extracted from event notification of the same event type and pre-processed, or both; applying anonymization of data fields in the bulked data to avoid exposing undesired information, aggregation levels (i.e. per cell, per UEs, or temporal, e.g. per hours or days).\nNOTE:\tPre-process data from collected event notifications of the same event type refers to the usage of data manipulation processes in order to aggregate, concatenate, process data from multiple collected event notifications from the same event type that results in a single processed value.\n-\tHaving the mapping of the Service Operation that have to be used for collecting data of the bulked data associated with an Analytics ID.",
      "chunk_type": "definition",
      "cross_references": [
        "clause_5",
        "clause_6.2.6.1.1"
      ]
    },
    {
      "chunk_id": "ts_23.288_6.2.6.1.1",
      "section_id": "6.2.6.1.1",
      "section_title": "Services for Bulked Data Collection",
      "content": "NWDAF may expose the Nnwdaf_DataManagement_Subscribe service operation with a request for bulked data including the following input parameters:\n-\tData Specification:\n-\tEvent ID(s) or Analytics ID(s);\n-\tIn the case of Event IDs, the Data Specification fields includes the fields Target of Event Reporting and Event Filter Information as defined in clause 4.15.1 of TS 23.502 [3] and Bulked Data Type parameter, which can be set to ''raw data samples'' (i.e. data is directly extracted from collected events) or ''pre-processed data samples'' (i.e. data from collected events is processed and the processed data is included in the bulked data) or a combination of both;\n-\tIf the Analytics ID(s), the Data Specification fields contain:\n-\tTarget of Reporting including a tuple with Analytics ID; Bulked Data Type, which can be set to ''raw data samples'' (i.e. data is directly extracted from collected events) or ''pre-processed data samples'' (i.e. data from collected events is processed and the processed data is included in the bulked data) or a combination of both;\n-\tFilter Information may include fields related to the Analytics ID such as: Target of Analytics Information (e.g. any UE, list of UEs, groups of UEs); Analytics Filter Information (e.g. area of interest, DNN, Application, S-NSSAI). The Analytics ID also determines the Service Operation from NFs, OAM to be used and type of data (i.e. Event IDs, OAM measurements) to be collected and associated with the bulked data.\n-\tService Operation in the case of Event ID, defines the service operation to be used by NWDAF, DCCF, MFAF, or ADRF to request data (e.g. Namf_EventExposure_Subscribe or OAM Subscribe)\n-\tBulked Data Formatting and Processing: the parameters defined in clause 4.15.1 of TS 23.502 [3] for Event Reporting Information and Formatting and Processing instructions as defined in clause 5A.4.\n-\tA Notification Target Address (+ Notification Correlation ID), where the Notification Correlation ID is the unique identification for the bulked data being generated for the requesting consumer.\n-\tADRF ID or NWDAF ID (or ADRF Set ID or NWDAF Set ID) storing historical data (optional). If known to the consumer, this may be specified to direct a DCCF or an NWDAF to the repository containing historical data.\n-\t(Optional) ADRF information indicating whether the collected data for the generation of the bulked data are to be stored in an ADRF and optionally an ADRF ID.\n-\t(Optional, in case the requested data is Event IDs) Data Source identification to collect the data, e.g. NF Instance (or NF Set) ID from which the data needs to be collected.\nThe output parameter of the Nnwdaf_DataManagement_Subscribe service operation comprise the subscription correlation ID, which identifies the requested bulked data.\nThe input parameters of Nnwdaf_DataManagement_Notify service operation shall contain the Notification Correlation ID and the generated bulked data when the fetch flag = false. When the fetch flag = true the notifications will contain the Notification Correlation ID, the Fetch Correlation ID and a target address where the generated bulked data may be retrieved. In the case of unsuccessful bulked data generation, the notification will contain an indication of an unsuccessful bulked data generation, optionally with expired bulked data deadline.\nThe input parameters for the service operation Nnwdaf_DataManagement_Fetch include: the Notification correlation ID (+list of Fetch Correlation ID), which identifies the requested bulked data.\nThe output parameters for the service operation Nnwdaf_DataManagement_Fetch include:\n-\tthe generated bulked data.\nThe generated bulked data exposed by the above listed service operations comprises:\n-\tthe dataset (i.e. the resulting set of data samples and/or set of pre-processed data samples from the collected event notifications) generated based on the parameters of bulked data request and Bulked Data Formatting and Processing;\n-\ttimestamp when the data sample is associated with a bulked data.",
      "chunk_type": "general",
      "cross_references": [
        "ts_23.502_clause_4.15.1",
        "clause_5",
        "ts_23.502"
      ]
    },
    {
      "chunk_id": "ts_23.288_6.2.6.2",
      "section_id": "6.2.6.2",
      "section_title": "Procedure for Data Collection from NWDAF",
      "content": "The procedure in Figure 6.2.6.2-1 is used by NWDAF service consumer to invoke the data management services at NWDAFs in order to retrieve runtime and historical data.\nFigure 6.2.6.2-1: Data Collection from NWDAF via Data Management Service\n1.\tNWDAF service consumer (e.g. NWDAF, DCCF) identifies that further data from an NWDAF is required in order to perform some operation related to Analytics ID. The triggers for further data collection are related to:\na)\tthe local policies of NWDAF or DCCF (e.g. preparation for future requests for Analytics ID as specified in clause 6.2.2.1);\nb)\ta request for analytics generation requiring data not available or not directly reachable via the NWDAF service consumer (e.g. out of the serving area);\nc)\ta request for model training;\nd)\ta request for data collection that NWDAF service consumer cannot provide by itself.\nNOTE 1:\tIf the NWDAF service consumer is a DCCF, the discovery of the proper NWDAF is defined in clause 6.2.6.3.6. If the NWDAF service consumer is a NWDAF, the NWDAF service consumer can discover the appropriate NWDAF(s) as defined in clause 5.2.\n2a.\tNWDAF service consumer invokes Nnwdaf_DataManagement_Subscribe service from NWDAF to request a required data. The request comprises the Data Specification as well as Data Formatting and Processing instructions as defined in clause 5A.4, Notification Target Address (+ Notification Correlation ID).\nWhen the required data is Event IDs, the NWDAF service consumer may include the Data Source, e.g. NF Instance (or NF Set) ID from which the data needs to be collected.\nThe NWDAF service consumer may include ADRF information indicating whether the data are to be stored in an ADRF and optionally an ADRF ID.\nThe NWDAF service consumer may include ADRF ID or NWDAF ID (or ADRF Set ID or NWDAF Set ID) storing historical data (optional), directing NWDAF to the repository containing historical data.\nThe NWDAF checks if required data is related to a user, i.e. SUPI or GPSI, then, depending on local policy and regulations, as described in clause 6.2.9, the NWDAF checks or has checked the user consent by retrieving the user consent information from UDM using Nudm_SDM_Get including data type \"User consent\". If user consent is not granted, NWDAF sends a response to the NWDAF service consumer in step 2b, indicating that user consent for data collection was not granted and the data collection for this SUPI or GPSI stops here. If the user consent is granted, the NWDAF can provide the required data to the NWDAF service consumer by performing the following steps 2b-7 and the NWDAF subscribes to UDM to notifications of changes on subscription data type \"User consent\" for this user using Nudm_SDM_Subscribe. When receiving the notification that user consent has been revoked, the NWDAF shall provide a Termination Request in Nnwdaf_DataManagement_Notify to request the NWDAF service consumer to cancel the subscription to the required data.\n2b.\tBased on the received request, NWDAF creates a new data for the requesting consumer. NWDAF sends Nnwdaf_DataManagement_Subscribe service response with a confirmation of successful request and the subscription correlation ID identifying the requested data.\nNOTE 2:\tSubscription Correlation ID allows the NWDAF service consumer to request to NWDAF any changes in the generation of a requested data.\n3.\tNWDAF determines whether the request data is available at such NWDAF.\nNWDAF maintains a local association of requested Event IDs or Analytics IDs to the list of triggered event subscription identifications from data sources to generate the requested data. Based on this local association, the NWDAF checks if the data to be collected is available at itself. If the data is available, NWDAF uses such data to generate the requested data.\nWhen data sources are NFs, the NWDAF discovers the proper NFs as defined in clause 6.2.2.1.\nWhen the data sources are other NWDAFs, the NWDAF discovers the other NWDAFs as defined in clause 5.2.\nWhen the data source is DCCF, the NWDAF discovers the proper DCCF as defined in clause 6.3.19 of TS 23.501 [2].\n4a.\t(Optional) If NWDAF receives a request for data that is not available or not reachable by such NWDAF (e.g. out of serving area), NWDAF determines the sources for the data that is not available, if the information has not been included in the subscription to the requested data.\n4b.\t(Optional) NWDAF may trigger further data collection using any of the available mechanisms in clause 6.2.2 (e.g. if the data subscribed in step 2a partially matches data that are already being collected by the NWDAF from a data source and a modification of the subscription to the data source would satisfy both the existing data collection as well as the newly requested data) and clause 6.2.6 (e.g. recursively using data collection services from other needed NWDAFs, DCCFs, ADRFs, NFs).\nNWDAF updates its local association of the mapping of the requested data (Event ID or Analytics ID) to the identification of the request/subscription for data collection from the further data sources.\n5.\tBased on the properties of the received request, NWDAF generates the requested data including the available or collected data (e.g. from other NWDAFs, DCCFs or ADRFs, NFs).\n6a.\tIf the fetch flag is set to true in step 2a, NWDAF waits until the requested data is ready and sends a Nnwdaf_DataManagement_Notify service message with fetch instructions.\nThe requested data is ready when the NWDAF has generated the data and completed processing and formatting as described in clause 5A.4.\n6b.\tIf the fetch flag is set to false in step 2a, NWDAF uses the Nnwdaf_DataManagement_Notify service to send the Notification Correlation ID and requested data to the NWDAF service consumer.\n7(a.b).\tAlternatively, if the Nnwdaf_DataManagement_Notify service message with fetch instructions is received in step 6a, the NWDAF service consumer shall fetch the required data from NWDAF via Nnwdaf_DataManagement_Fetch service operation within the fetch deadline specified in the fetch instructions. The NWDAF service consumer invokes the Nnwdaf_DataManagement_Fetch service operation with the input parameters including the Fetch Correlation ID, that identifies the data to be fetched and receives a response with the requested data.\n8.\tThe NWDAF service consumer uses the requested data for performing further processing. If the NWDAF service consumer is an NWDAF the requested data can be used for analytics generation or model training or for further exposing such data to other NWDAFs. If the NWDAF service consumer is a DCCF, the requested data can be provided to a DCCF data consumer.\n9.\tWhen the NWDAF service consumer determines that no more data is required or if receiving a Termination Request from the NWDAF, e.g. due to user consent revocation for the data collection related to a user, it unsubscribes to the requested data from NWDAF. If NWDAF had triggered further data collection in Step 3a and 3b, NWDAF also unsubscribe to all data sources.\nNOTE 3:\tIt is also possible that instead of providing the dataset of the generated data in steps 6a, 6b, 7b, the NWDAF provides a reference to where the dataset can be retrieved by the NWDAF service consumer.",
      "chunk_type": "procedure",
      "cross_references": [
        "clause_6.2.2.1",
        "clause_6.2.6.3.6",
        "clause_5.2",
        "clause_5",
        "clause_6.2.9",
        "ts_23.501_clause_6.3.19",
        "clause_6.2.2",
        "clause_6.2.6",
        "figure_6.2.6.2-1",
        "ts_23.501"
      ]
    },
    {
      "chunk_id": "ts_23.288_6.2.6.3.1",
      "section_id": "6.2.6.3.1",
      "section_title": "General",
      "content": "This clause specifies procedures for data collection using the DCCF described in clause 5A for cases other than obtaining analytics from an NWDAF (which is specified in clause 6.1.2). Two options are supported: data delivered via the DCCF, according to clauses 6.2.6.3.2 and 6.2.6.3.3 and data delivered via a messaging framework according to clauses 6.2.6.3.4 and 6.2.6.3.5. Which option to be used is determined by DCCF configuration.\nDue to e.g. UE mobility, the source DCCF or MFAF may no longer be able to serve the UE. In such cases, the data consumer may select a new DCCF as described in clause 6.2.6.3.7, or source DCCF may execute the DCCF relocation procedure as described in clause 6.2.6.3.8. The data consumer may indicate in the subscription request whether the DCCF should execute the relocation procedure or send a notification to the data consumer as specified in the reselection procedure. If the data consumer does not send an indicator in the subscription request allowing DCCF relocation initiated by the DCCF the consumer may execute DCCF reselection based on internal logic.\nWhen data is collected for a group of UEs identified by an Internal-Group-Id or any UE, the procedure of DCCF relocation initiated by the DCCF is not applicable. In such case, the consumer may select one or more Target DCCFs and initiate a new subscription for the UEs.",
      "chunk_type": "definition",
      "cross_references": [
        "clause_5",
        "clause_6.1.2",
        "clause_6.2.6.3.7",
        "clause_6.2.6.3.8"
      ]
    },
    {
      "chunk_id": "ts_23.288_6.2.6.3.2",
      "section_id": "6.2.6.3.2",
      "section_title": "Data Collection via DCCF",
      "content": "The procedure depicted in Figure 6.2.6.3.2-1 is used by a data consumer (e.g. NWDAF) to obtain data and be notified of events via the DCCF using Ndccf_DataManagement_Subscribe service operation. Whether the data consumer directly contacts the Data Source or goes via the DCCF is based on configuration of the data consumer.\nFigure 6.2.6.3.2-1: Data Collection via DCCF\n1.\tThe data consumer subscribes to data via the DCCF by invoking the Ndccf_DataManagement_Subscribe (Service_Operation, Data Specification, Formatting Instructions, Processing Instructions, NF (or NF-Set) ID, ADRF Information) service operation as specified in clause 8.2.2. The data consumer may specify one or more notification endpoints. If data to be collected is subject to user consent: if the data consumer checked user consent, the data consumer shall provide user consent check information (i.e. an indication that it has checked user consent), otherwise, the data consumer shall provide a purpose for the data collection.\nService_Operation is the service operation to be used by the DCCF to request data (e.g. Namf_EventExposure_Subscribe or OAM Subscribe). Data Specification provides Service Operation-specific parameters (e.g. event IDs, UE-ID(s), target of event reporting) used to retrieve the data. Formatting and Processing Instructions are as defined in clause 5A.4. The data consumer may include the Data Source, e.g. NF Instance (or NF Set) ID from which the data needs to be collected. The data consumer may include ADRF information indicating whether the data are to be stored in an ADRF and optionally an ADRF ID.\n2.\tThe DCCF checks if data is to be collected for a user, i.e. SUPI or GPSI, then, depending on local policy and regulations, the DCCF checks the user consent by retrieving the user consent information from UDM using Nudm_SDM_Get including data type \"User consent\" and taking into account purpose for data collection as provided in step 1. If user consent is not granted, DCCF does not subscribe to event exposure for events related to this user, the data collection for this SUPI or GPSI stops here and DCCF sends a response to the data consumer indicating that user consent for data collection was not granted. If the user consent is granted, the DCCF subscribes to UDM to notifications of changes on subscription data type \"User consent\" for this user using Nudm_SDM_Subscribe.\nIf the data consumer is NWDAF and it provides user consent check information (i.e. an indication that it has checked user consent) in Ndccf_DataManagement_Subscribe in step 1, which has been obtained by the NWDAF from UDM before, then the DCCF can do data collection for a user based on the user consent information from the NWDAF and skip retrieving it from UDM.\n3.\tThe DCCF determine the NF type(s) and/or OAM to retrieve the data based on the Service Operation requested in step 1. If the NF instance or NF Set ID is not provided by the data consumer. the DCCF determines the NF instances that can provide data as described in clause 5A.2 and clause 6.2.2.2. If the consumer requested storage of data in an ADRF but the ADRF ID is not provided by the data consumer, or the collected data is to be stored in an ADRF according to configuration on the DCCF, the DCCF selects an ADRF to store the collected data.\n4.\tThe DCCF determines whether the data requested in step 1 are already being collected, as described in clause 5A.2.\nIf the data requested are already being collected from the Data Source by a data consumer, the DCCF adds the data consumer to the list of data consumers that are subscribed for these data, then the DCCF determines that no subscriptions to the Data Source need to be created or modified.\n5.\tIf the data subscribed in step 1 partially matches data that are already being collected by the DCCF from a Data Source and a modification of this subscription to the Data Source would satisfy both the existing data subscriptions as well as the newly requested data, the DCCF invokes Nnf_EventExposure_Subscribe (Subscription Correlation ID) with parameters indicating how to modify the previous subscription (as specified in clause 5A.2). The DCCF adds the data consumer to the list of data consumers that are subscribed for these data. If some of the newly requested data can only be provided by new Data Source, the DCCF creates new subscription(s) to the new Data Source for the newly requested data.\nIf the data requested at step 1 are not already available or not being collected yet, the DCCF subscribes to data from the NF using the Nnf_EventExposure_Subscribe service operation as specified in clause 5A.2 and clause 6.2.2.2, with DCCF indicated as Notification Target Address. The DCCF adds the data consumer to the list of data consumers that are subscribed for these data.\n6.\tWhen new output data are available, the Data Source uses Nnf_EventExposure_Notify to send the data to the DCCF.\n7.\tThe DCCF uses Ndccf_DataManagement_Notify to send the data to all notification endpoints indicated in step 1. Data sent to notification endpoints may be processed and formatted by the DCCF so they conform to delivery requirements for each data consumer or notification endpoint as specified in clause 5A.4. The DCCF may store the information in ADRF if requested by the consumer or if required by DCCF configuration, using procedure as specified in clause 6.2B.3.\nNOTE:\tAccording to Formatting Instructions provided by the data consumer, multiple notifications from a Data Source can be combined in a single Ndccf_DataManagement_Notify so many notifications from the Data Source result in fewer notifications (or one notification) to the data consumer. Alternatively, a notification can instruct the data notification endpoint to fetch the data from the DCCF before an expiry time.\n8a.\tIf DCCF needs to retrieve data from OAM, procedure for data collection from OAM as per steps 1-4 from clause 6.2.3.2 is used.\n8b.\tThe DCCF uses Ndccf_DataManagement_Notify to send the data to all notification endpoints indicated in step 1. Data sent to notification endpoints may be processed and formatted by the DCCF, so they conform to delivery requirements for each data consumer or notification endpoint as specified in clause 5A.4. The DCCF may store the information in ADRF if requested by the consumer or if required by DCCF configuration, using procedure as specified in clause 6.2B.3.\n9.\tIf a Ndccf_DataManagement_Notify contains a fetch instruction, the notification endpoint sends a Ndccf_DataManagement_Fetch request to fetch the data from the DCCF.\n10.\tThe DCCF delivers the data to the notification endpoint\n11.\tThe UDM may notify the DCCF on changes of user consent at any time after step 2. If user consent is no longer granted for a user for which data has been collected and there are no other consumers for the data, the DCCF shall unsubscribe to any Event ID to collect data for that SUPI or GPSI. The DCCF shall further update or terminate affected subscriptions of the Data Consumer. The DCCF may unsubscribe to be notified of user consent updates from UDM for each SUPI for which user consent has been revoked.\n12.\tWhen the data consumer no longer wants data to be collected it invokes Ndccf_DataManagement_Unsubscribe (Subscription Correlation ID), using the Subscription Correlation Id received in response to its subscription in step 1. The DCCF removes the data consumer from the list of data consumers that are subscribed for these data.\n13.\tIf there are no other data consumers subscribed to the data, the DCCF unsubscribes with the Data Source.",
      "chunk_type": "general",
      "cross_references": [
        "clause_8.2.2",
        "clause_5",
        "clause_6.2.2.2",
        "clause_6.2",
        "clause_6.2.3.2",
        "figure_6.2.6.3.2-1"
      ]
    },
    {
      "chunk_id": "ts_23.288_6.2.6.3.3",
      "section_id": "6.2.6.3.3",
      "section_title": "Historical Data Collection via DCCF",
      "content": "The procedure depicted in figure 6.2.6.3.3-1 is used by data consumers (e.g. NWDAF) to obtain historical data, i.e. data related to past time period. The data consumer requests data using Ndccf_DataManagement_Subscribe service operation. Whether the data consumer uses this procedure or directly contacts the ADRF or NWDAF is based on configuration.\nFigure 6.2.6.3.3-1: Historical Data Collection via DCCF\n1.\tThe data consumer requests data via DCCF by invoking the Ndccf_DataManagement_Subscribe (Service_Operation, Data Specification, Time Window, Formatting Instructions, Processing Instructions, ADRF ID or NWDAF ID (or ADRF Set ID or NWDAF Set ID) service operation as specified in clause 8.2.2. The data consumer may specify one or more notification endpoints to receive the data. If data to be collected is subject to user consent: if the data consumer checked user consent, the data consumer shall provide user consent check information (i.e. an indication that it has checked user consent), otherwise, the data consumer shall provide a purpose for the data collection.\n\"Service_Operation\" is the service operation used to acquire the data from a data source. \"Data Specification\" provides Service_Operation-specific parameters (e.g. event IDs, UE-ID(s)) used to retrieve the data. \"Time Window\" specifies a past time period and comprises a start and stop time. \"Formatting and Processing Instructions\" are as defined in clause 5A4. The data consumer may optionally include the ADRF or NWDAF instance (or ADRF Set or NWDAF Set) ID where the stored data resides.\n2.\tThe DCCF checks if data is to be collected for a user, i.e. SUPI or GPSI, then, depending on local policy and regulations, the DCCF checks the user consent by retrieving the user consent information from UDM using Nudm_SDM_Get including data type \"User consent\" and taking into account purpose for data collection as provided in step 1. If user consent is not granted, DCCF does not subscribe to event exposure for events related to this user, the data collection for this SUPI or GPSI stops here and DCCF sends a response to the data consumer indicating that user consent for data collection was not granted. If the user consent is granted, the DCCF subscribes to UDM to notifications of changes on subscription data type \"User consent\" for this user using Nudm_SDM_Subscribe.\nIf the data consumer is NWDAF and it provides user consent check information (i.e. an indication that it has checked user consent) in Ndccf_DataManagement_Subscribe in step 1, which has been obtained by the NWDAF from UDM before, then the DCCF can do data collection for a user based on the user consent information from the NWDAF and skip retrieving it from UDM.\n3.\tIf an ADRF or NWDAF instance or ADRF Set ID or NWDAF Set ID is not provided by the data consumer, the DCCF determines if any ADRF or NWDAF instances might provide the data as described in clause 5B and 5A.2.\nNOTE 1:\tAn ADRF or NWDAF might have previously registered data it is collecting with the DCCF.\n4.\t(conditional) If the DCCF determines that an ADRF instance might provide the data, or an ADRF instance or Set was supplied by the data consumer, the DCCF sends a request to the ADRF, using Nadrf_DataManagement_RetrievalSubscribe (Data Specification, Notification Target Address=DCCF) service operation as specified in clause 10.2. The ADRF responds to the DCCF with an Nadrf_DataManagement_RetrievalSubscribe response indicating if the ADRF can supply the data. If the data can be provided, the procedure continues with steps 6a and 6c.\n5.\t(conditional) If the DCCF determines that an NWDAF instance might provide the data or an NWDAF instance or Set was supplied by the data consumer, the DCCF sends a request to the NWDAF using Nnwdaf_DataManagement_Subscribe (Data Specification, Notification Target Address=DCCF) as specified in clause 7.4.2.\n6a-d.\tThe ADRF uses Nadrf_DataManagement_RetrievalNotify or the NWDAF uses Nnwdaf_DataManagement_Notify to send the requested data (e.g. one or more stored notifications archived from a data source) to the DCCF. The data may be sent in one or more notification messages.\n7a-b.\tThe DCCF uses Ndccf_DataManagement_Notify to send data to all notification endpoints indicated in step 1. Notifications are sent to the Notification Target Address(es) using the data consumer Notification Correlation ID(s) received in step 1. Data sent to notification endpoints may be processed and formatted by the DCCF, so they conform to delivery requirements specified by the data consumer.\nNOTE 2:\tAccording to Formatting Instructions provided by the data consumer, multiple notifications from an ADRF or NWDAF can be combined in a single Ndccf_DataManagement_Notify so many notifications from the ADRF or NWDAF results in fewer notifications (or one notification) to the data consumer. Alternatively, a Ndccf_DataManagement_Notify can instruct the data notification endpoint to fetch the data from the DCCF before an expiry time.\n8.\tIf a notification contains a fetch instruction, the notification endpoint sends a Ndccf_DataManagement_Fetch request to fetch the data from the DCCF.\n9.\tThe DCCF delivers the data to the notification endpoint.\n10.\tThe UDM may notify the DCCF on changes of user consent at any time after step 2. If user consent is no longer granted for a user for which data has been collected and if there are no other consumers for the data, the DCCF shall unsubscribe to any data collection for that SUPI or GPSI. The DCCF shall further update or terminate affected subscriptions of the Data Consumer. The DCCF may unsubscribe to be notified of user consent updates from UDM for each SUPI for which user consent has been revoked.\n11.\tWhen the data consumer no longer wants data to be collected or has received all the data it needs, it invokes Ndccf_DataManagement_Unsubscribe (Subscription Correlation ID) as specified in clause 8.2.3, using the Subscription Correlation Id received in response to its subscription in step 1.\n12.\tIf the data are being provided by an ADRF and there are no other data consumers subscribed to the data, the DCCF unsubscribes with the ADRF using Nadrf_DataManagement_RetrievalUnsubscribe as specified in clause 10.2.7.\n13.\tIf the data are being provided by an NWDAF and there are no other data consumers subscribed to the data, the DCCF unsubscribes with the NWDAF using Nnwdaf_DataManagement_Unsubscribe as specified in clause 7.4.3.",
      "chunk_type": "general",
      "cross_references": [
        "clause_8.2.2",
        "clause_5",
        "clause_10.2",
        "clause_7.4.2",
        "clause_8.2.3",
        "clause_10.2.7",
        "clause_7.4.3",
        "figure_6.2.6.3.3-1"
      ]
    },
    {
      "chunk_id": "ts_23.288_6.2.6.3.4",
      "section_id": "6.2.6.3.4",
      "section_title": "Data Collection via Messaging Framework",
      "content": "This procedure depicted in Figure 6.2.6.3.4-1 is used by a data consumer (e.g. NWDAF) to obtain data and be notified of events using the DCCF and a Messaging Framework. The 3GPP DCCF Adaptor (3da) Data Management service and 3GPP Consumer Adaptor (3ca) Data Management service of the Messaging Framework Adaptor Function (MFAF) are used to interact with the 3GPP Network and the Messaging Framework. Whether the data consumer directly contacts the Data Source or goes via the DCCF is based on configuration.\nFigure 6.2.6.3.4-1: Data Collection via Messaging Framework\n1.\tThe data consumer subscribes to data via the DCCF by invoking the Ndccf_DataManagement_Subscribe (Service_Operation, Data Specification, Formatting Instructions, Processing Instructions, NF (or NF-Set) ID, ADRF Information, Data Consumer Notification Target Address (+ Notification Correlation ID)) service operation as specified in clause 8.2.2. The data consumer may specify one or more notification endpoints and the NF or NF set to collect data from. If data to be collected is subject to user consent: if the data consumer checked user consent, the data consumer shall provide user consent check information (i.e. an indication that it has checked user consent), otherwise, the data consumer shall provide a purpose for the data collection.\nService_Operation is the service operation to be used by the DCCF to request data (e.g. Namf_EventExposure_Subscribe or OAM Subscribe). Data Specification provides Service_Operation-specific required parameters (e.g. event IDs, UE-ID(s), target of event reporting) and optional input parameters used to retrieve the data. Formatting and Processing Instructions are as defined in clause 5A.4. The data consumer may optionally include the Data Source NF Instance (or NF Set) ID. The data consumer may include ADRF information indicating whether the data are to be stored in an ADRF and, optionally, an ADRF ID.\nNOTE 1:\tData consumer requesting data to be stored in ADRF allows the collected data to be available to other data consumers in the future.\n2.\tThe DCCF checks if data is to be collected for a user, i.e. SUPI or GPSI, then, depending on local policy and regulations, the NWDAF checks the user consent by retrieving the user consent information from UDM using Nudm_SDM_Get including data type \"User consent\" and taking into account purpose for data collection as provided in step 1. If user consent is not granted, NWDAF does not subscribe to event exposure for events related to this user, the data collection for this SUPI or GPSI stops here and DCCF sends a response to the data consumer indicating that user consent for data collection was not granted. If the user consent is granted, the DCCF subscribes to UDM to notifications of changes on subscription data type \"User consent\" for this user using Nudm_SDM_Subscribe.\nIf the data consumer is NWDAF and it provides user consent check information (i.e. an indication that it has checked user consent) in Ndccf_DataManagement_Subscribe in step 1, which has been obtained by the NWDAF from UDM before, then the DCCF can do data collection for a user based on the user consent information from the NWDAF and skip retrieving it from UDM.\n3.\tIf the NF instance or NF Set ID is not provided by the data consumer, the DCCF determines the NF instances that can provide data as described in clause 5A.2 and clause 6.2.2.2. If the consumer requested storage of data in an ADRF, but the ADRF ID is not provided by the data consumer, or the collected data is to be stored in an ADRF according to configuration on the DCCF, the DCCF selects an ADRF to store the collected data.\n4.\tThe DCCF determines whether the data requested in step 1 are already being collected, as described in clause 5A.2.\nIf the data requested are already being collected from the Data Source by a data consumer, the DCCF adds the data consumer to the list of data consumers that are subscribed for these data, then the DCCF determines that no subscriptions to the Data Source need to be created or modified.\n5.\tThe DCCF sends an Nmfaf_3daDataManagement_Configure (Data Consumer Information, MFAF Notification Information, Formatting Conditions, Processing Instructions) to configure the MFAF to map notifications received from the Data Source to outgoing notifications sent to endpoints and to instruct the MFAF how to format and process the outgoing notifications. The DCCF may also instruct the MFAF to store data into ADRF by providing an ADRF ID, if requested by the data consumer in step 1, together with the NF Id of the data source.\nData Consumer Information contains for each notification endpoint, the data consumer Notification Target Address (+ Data Consumer Notification Correlation ID to be used by the MFAF when sending notifications in step 9.\nMFAF Notification Information is included if a Data Source is already sending the data to the MFAF. MFAF Notification Information identifies Event Notifications received from the Data Sources and comprises the MFAF Notification Target Address (+ MFAF Notification Correlation ID). If the MFAF does not receive MFAF Notification information from the DCCF, the MFAF selects a MFAF Notification Target Address (+ MFAF Notification Correlation ID) and sends the MFAF Notification Information, containing MFAF Notification Target Address (+ MFAF Notification Correlation ID), to the DCCF in the Nmfaf_3daDataManagement_Configure Response.\n6.\tIf the data subscribed in step 1 partially matches data that are already being collected by the DCCF from a Data Source and a modification of this subscription to the Data Source would satisfy both the existing data subscriptions as well as the newly requested data, the DCCF invokes Nnf_EventExposure_Subscribe (Subscription Correlation ID) with parameters indicating how to modify the previous subscription (as specified in clause 5A.2). The DCCF adds the data consumer to the list of data consumers that are subscribed for these data. If some of the newly requested data can only be provided by new Data Source, the DCCF creates new subscription(s) to the new Data Source for the newly requested data.\nIf the data requested at step 1 are not already available or not being collected yet, the DCCF subscribes to data from the NF using the Nnf_EventExposure_Subscribe (Data Specification, MFAF Notification Target Address (+ MFAF Notification Correlation ID)) service operation as specified in clause 5A.2 and clause 6.2.2.2, using the MFAF Notification Target Address (+ MFAF Notification Correlation ID) received in step 5. The DCCF adds the data consumer to the list of data consumers that are subscribed for these data.\n7.\tWhen new output data are available, the Data Source uses Nnf_EventExposure_Notify to send the data to the MFAF. The Notification includes the MFAF Notification Correlation ID.\n8.\tThe MFAF uses Nmfaf_3caDataManagement_Notify to send the data to all notification endpoints indicated in step 6. Notifications are sent to the Notification Target Address(es) using the Data Consumer Notification Correlation ID(s) received in step 6. Data sent to notification endpoints may be processed and formatted by the MFAF, so they conform to delivery requirements specified by the data consumer. The MFAF may store the information in ADRF if requested by consumer or if required by DCCF configuration\nNOTE 2:\tAccording to Formatting Instructions provided by the data consumer, multiple notifications from a Data Source can be combined in a single Nmfaf_3caDataManagement_Notify, so many notifications from the Data Source results in fewer notifications (or one notification) to the data consumer. Alternatively, a notification can instruct the data notification endpoint to fetch the data from the MFAF before an expiry time.\n9.\tIf a Nmfaf_3caDataManagement_Notify contains a fetch instruction, the notification endpoint sends a Nmfaf_3caDataManagement_Fetch request to fetch the data from the MFAF.\n10.\tThe MFAF delivers the data to the notification endpoint.\n11.\tThe UDM may notify the DCCF on changes of user consent at any time after step 2. If user consent is no longer granted for a user for which data has been collected and if there are no other consumers for the data, the DCCF shall unsubscribe to any Event ID to collect data for that SUPI or GPSI. The DCCF shall further update or terminate affected subscriptions of the Data Consumer. The DCCF may unsubscribe to be notified of user consent updates from UDM for each SUPI for which user consent has been revoked.\n12.\tWhen the data consumer no longer wants data to be collected, it invokes Ndccf_DataManagement_Unsubscribe (Subscription Correlation ID), using the Subscription Correlation Id received in response to its subscription in step 1. The DCCF removes the data consumer from the list of data consumers that are subscribed for these data.\n13.\tIf there are no other data consumers subscribed to the data, the DCCF unsubscribes with the Data Source.\n14.\tThe DCCF de-configures the MFAF so it no longer maps notifications received from the Data Source to the notification endpoints configured in step 5.",
      "chunk_type": "general",
      "cross_references": [
        "clause_8.2.2",
        "clause_5",
        "clause_6.2.2.2",
        "figure_6.2.6.3.4-1"
      ]
    },
    {
      "chunk_id": "ts_23.288_6.2.6.3.5",
      "section_id": "6.2.6.3.5",
      "section_title": "Historical Data Collection via Messaging Framework",
      "content": "The procedure depicted in figure 6.2.6.3.5-1 is used by data consumers (e.g. NWDAF) to obtain historical data, i.e. data related to past time period. The data consumer obtains data using Ndccf_DataManagement_Subscribe service operation as specified in clause 8.2.2, where the subscription results in one or more notifications depending on how the data is retrieved from the ADRF or NWDAF and how the data is formatted. Whether the data consumer uses this procedure or directly contacts the ADRF or NWDAF is based on configuration.\nFigure 6.2.6.3.5-1: Historical Data Collection via Messaging Framework\n1.\tThe data consumer requests data via DCCF by invoking the Ndccf_DataManagement_Subscribe (Service Operation, Data Specification, Time Window, Formatting Instructions, Processing Instructions, ADRF ID or NWDAF ID (or ADRF Set ID or NWDAF Set ID) service operation as specified in clause 8.2.2. The data consumer may specify one or more notification endpoints to receive the data. If data to be collected is subject to user consent: if the data consumer checked user consent, the data consumer shall provide user consent check information (i.e. an indication that it has checked user consent), otherwise, the data consumer shall provide a purpose for the data collection.\nService_Operation is the service operation used to acquire the data from a data source, Data Specification provides Service_Operation-specific required parameters (e.g. event IDs, UE-ID(s) and optional input parameters used to retrieve the data. Time Window specifies a past time period and comprises a start and stop time and Formatting and Processing Instructions are as defined in clause 5A4. The data consumer may optionally include the ADRF or NWDAF instance (or ADRF Set or NWDAF Set) ID where the stored data resides.\n2.\tThe DCCF checks if data is to be collected for a user, i.e. SUPI or GPSI, then, depending on local policy and regulations, the DCCF checks the user consent by retrieving the user consent information from UDM using Nudm_SDM_Get including data type \"User consent\" and taking into account purpose for data collection as provided in step 1. If user consent is not granted, DCCF does not subscribe to event exposure for events related to this user, the data collection for this SUPI or GPSI stops here and DCCF sends a response to the data consumer indicating that user consent for data collection was not granted. If the user consent is granted, the DCCF subscribes to UDM to notifications of changes on subscription data type \"User consent\" for this user using Nudm_SDM_Subscribe.\nIf the data consumer is NWDAF and it provides user consent check information (i.e. an indication that it has checked user consent) in Ndccf_DataManagement_Subscribe in step 1, which has been obtained by the NWDAF from UDM before, then the DCCF can do data collection for a user based on the user consent information from the NWDAF and skip retrieving it from UDM.\n3.\tIf an ADRF or NWDAF instance or ADRF Set ID or NWDAF Set ID is not provided by the data consumer, the DCCF determines if any ADRF or NWDAF instances might provide the data as described in clause 5B and 5A.2.\nNOTE 1:\tAn ADRF or NWDAF might have previously registered data it is collecting with the DCCF.\n4.\tThe DCCF sends an Nmfaf_3daDataManagement_Configure (Data Consumer Information, Formatting Conditions, Processing Instructions) to configure the MFAF to map notifications received from the ADRF or NWDAF to outgoing notifications sent to endpoints and to instruct the MFAF how to format and process the outgoing notifications.\n\"Data Consumer Information\" contains for each notification endpoint, the data consumer Notification Target Address (+ Data Consumer Notification Correlation ID) to be used by the MFAF when sending notifications. The MFAF selects an MFAF Notification Target Address (+ MFAF Notification Correlation ID) and sends the MFAF Notification Information, containing MFAF Notification Target Address (+ MFAF Notification Correlation ID), to the DCCF in the Nmfaf_3daDataManagement_Configure Response.\n5.\t(conditional) If the DCCF determines that an ADRF instance might provide the data, or an ADRF instance or Set was supplied by the data consumer, the DCCF sends a request to the ADRF, using Nadrf_DataManagement_RetrievalSubscribe (Data Specification, MFAF Notification Information) containing the MFAF Notification Target Address (+ MFAF Notification Correlation ID) received in step 4 as specified in clause 10.2.\n6.\tThe ADRF responds to the DCCF with an Nadrf_DataManagement_RetrievalSubscribe response indicating if the ADRF can supply the data. If the data can be provided, the procedure continues with step 9.\n7.\t(conditional) If the DCCF determines that an NWDAF instance might provide the data, or an NWDAF instance or NWDAF Set was supplied by the data consumer, the DCCF sends a request to the NWDAF, using Nnwdaf_DataManagement_Subscribe (Data Specification, MFAF Notification Information) as specified in clause 7.4.2. MFAF Notification Information contains the MFAF Notification Target Address (+ MFAF Notification Correlation ID) received in step 4.\n8.\tThe NWDAF responds to the DCCF with an Nnwdaf_DataManagement_Subscribe response indicating if the NWDAF can supply the data.\n9.\tThe ADRF uses Nadrf_DataManagement_RetrievalNotify or the NWDAF uses Nnwdaf_DataManagement_Notify to send the requested data (e.g. one or more stored notifications archived from a data source) to the MFAF. The data may be sent in one or more notification messages.\n10.\tThe MFAF uses Nmfaf_3caDataManagement_Notify to send data to all notification endpoints indicated in step 4. Notifications are sent to the Notification Target Address(es) using the Data Consumer Notification Correlation ID(s) received in step 4. Data sent to notification endpoints may be processed and formatted by the MFAF, so they conform to delivery requirements specified by the data consumer.\nNOTE 2:\tAccording to Formatting Instructions provided by the data consumer, multiple notifications from an ADRF or NWDAF can be combined in a single Nmfaf_3caDataManagement_Notify so many notifications from the ADRF or NWDAF results in fewer notifications (or one notification) to the data consumer. Alternatively, a Nmfaf_3caDataManagement_Notify can instruct the data notification endpoint to fetch the data from the MFAF before an expiry time.\n11.\tIf a notification contains a fetch instruction, the notification endpoint sends a Nmfaf_3caDataManagement_Fetch request as specified in clause 9.3.3 to fetch the data from the MFAF.\n12.\tThe MFAF delivers the data to the notification endpoint.\n13.\tThe UDM may notify the DCCF on changes of user consent at any time after step 2. If user consent is no longer granted for a user for which data has been collected and if there are no other consumers for the data, the DCCF shall unsubscribe to any data collection for that SUPI or GPSI. The DCCF shall further update or terminate affected subscriptions of the Data Consumer. The DCCF may unsubscribe to be notified of user consent updates from UDM for each SUPI for which user consent has been revoked.\n14.\tWhen the data consumer no longer wants data to be collected or has received all the data it needs, it invokes Ndccf_DataManagement_Unsubscribe (Subscription Correlation ID), using the Subscription Correlation Id received in response to its subscription in step 1.\n15.\tIf the data are being provided by an ADRF and there are no other data consumers subscribed to the data, the DCCF unsubscribes with the ADRF using Nadrf_DataManagement_RetrievalUnsubscribe as specified in clause 10.2.7.\n16.\tIf the data are being provided by an NWDAF and there are no other data consumers subscribed to the data, the DCCF unsubscribes with the NWDAF using Nnwdaf_DataManagement_Unsubscribe as specified in clause 7.4.3.\n17.\tThe DCCF de-configures the MFAF so it no longer maps notifications received from the ADRF or NWDAF to the notification endpoints configured in step 4.",
      "chunk_type": "general",
      "cross_references": [
        "clause_8.2.2",
        "clause_5",
        "clause_10.2",
        "clause_7.4.2",
        "clause_9.3.3",
        "clause_10.2.7",
        "clause_7.4.3",
        "figure_6.2.6.3.5-1"
      ]
    },
    {
      "chunk_id": "ts_23.288_6.2.6.3.6",
      "section_id": "6.2.6.3.6",
      "section_title": "Data collection profile registration",
      "content": "In some cases data consumers (e.g. NWDAF or ADRF) collect data from data source NF directly, e.g. when NWDAF is co-located with 5GC NF.\nTo enable data consumers can get the data which has been collected by NWDAF or ADRF directly (i.e. not via DCCF), the NWDAF or ADRF may register/update the data collection profile to the DCCF during/after the procedure of data collection. DCCF can then determine some requested data is available in NWDAF or ADRF and can coordinate data collection based on the data collection profile.\nThe procedure depicted in Figure 6.2.6.3.6-1 is used by data source (e.g. NWDAF or ADRF) to register data profile to DCCF.\nFigure 6.2.6.3.6-1: Procedure for the NWDAF or ADRF register data profile to DCCF\n1.\tAn ADRF or NWDAF instance is collecting or has collected data directly, e.g. from collocated NF.\n2.\tThe ADRF or NWDAF requests to register/update data collection profile (Service Operation, Analytics/Data Specification, ADRF ID or NWDAF ID) to DCCF by invoking the Ndccf_ContextManagement_Register or Ndccf_ContextManagement_Update. The registration/ update request can be triggered by the acceptation of subscription for data collection responded by the data source (e.g. collocated NF), it can be before the start of data collection or after the completion of data collection. DCCF determines the data collection status of NWDAF or ADRF based on the Analytics/Data Specification, i.e. DCCF determines whether the required data is being collected or has been collected.\n\"Service Operation\" identifies the service used to collect the data or analytics from a Data Source (e.g.: Namf_EventExposure_Subscribe or Nnwdaf_AnalyticsSubscription_Subscribe).\n\"Analytics/Data Specification\" is the \"Service Operation\" specific parameters that identify the collected data (i.e.: Analytics ID(s) / Event ID (s), Target of Analytics Reporting or Target of Event Reporting, Analytics Filter or Event Filter, etc.).\nADRF ID or NWDAF ID specify the ADRF or NWDAF which registers data collection profile.\n3.\tThe DCCF responds to the ADRF or NWDAF with a Ndccf_ContextManagement_Register Response or Ndccf_ContextManagement_Update Response.\n4.\tTo obtain historical data and if the data consumer is configured to collect data via the DCCF using Ndccf_DataManagement_Subscribe service operation, the data consumer uses the procedures described in clause 6.2.6.3.2 or clause 6.2.6.3.3.\n5.\tThe ADRF or NWDAF requests to delete a registration of data collection or analytics collection to the DCCF by invoking the Ndccf_ContextManagement_Deregister, triggered for instance by a request of the service consumer or by a storage life-time expiry of related data.",
      "chunk_type": "general",
      "cross_references": [
        "clause_6.2.6.3.2",
        "clause_6.2.6.3.3",
        "figure_6.2.6.3.6-1"
      ]
    },
    {
      "chunk_id": "ts_23.288_6.2.6.3.7",
      "section_id": "6.2.6.3.7",
      "section_title": "DCCF (re-)selection initiated by consumer",
      "content": "The procedure depicted in Figure 6.2.6.3.7-1 is used by a data consumer (e.g. NWDAF or central DCCF) to obtain data related to UE(s), to be notified by the DCCF when the DCCF can no longer serve the UE(s) and to then reselect the DCCF.\nFigure 6.2.6.3.7-1: Procedure for DCCF relocation initiated by consumer\n0.\tThe data consumer subscribes to source DCCF.\n1.\tSource DCCF may notify the data consumer that it cannot serve the subscription anymore, e.g. when location of UE(s) falls outside the serving area of the DCCF. A cause code is added with the notification (e.g. UE(s) moved outside DCCF serving area). The DCCF may send pending data to the data consumer.\n2.\tThe data consumer for the DCCF determines to select a new instance of DCCF. The data consumer discovers and selects the target DCCF as described in clause 6.3.19 of TS 23.501 [2]. The data consumer may perform the DCCF selection due to internal triggers, notification of a UE mobility event or by receiving the notification from the source DCCF in step 1.\n3.\tThe data consumer sends a subscription request to the target DCCF using Ndccf_DataManagement_Subscribe request.\n4.\tThe data consumer may unsubscribe from the source DCCF.\n5.\tTarget DCCF may subscribe to relevant data source(s), if not yet subscribed.",
      "chunk_type": "general",
      "cross_references": [
        "ts_23.501_clause_6.3.19",
        "figure_6.2.6.3.7-1",
        "ts_23.501"
      ]
    },
    {
      "chunk_id": "ts_23.288_6.2.6.3.8",
      "section_id": "6.2.6.3.8",
      "section_title": "DCCF and MFAF relocation initiated by DCCF",
      "content": "The procedure depicted in Figure 6.2.6.3.8-1 is used to support DCCF and MFAF reselection when the source DCCF or MFAF can no longer serve the UE.\nFigure 6.2.6.3.8-1: Procedure for DCCF relocation initiated by DCCF\n0.\tThe data consumer subscribes to source DCCF. The data consumer may indicate in the subscription request with an indicator that the DCCF may execute the relocation procedure.\nNOTE 1:\tIf the source DCCF or target DCCF does not support relocation, the consumer may execute DCCF relocation based on internal logic.\n1.\tSource DCCF subscribes UE mobility events from AMF. The UE ID is provided by the data consumer in step 0.\n2.\tIf UE moves out of the service area of the source DCCF, source DCCF determines UE DCCF subscription context to be transferred to target DCCF, e.g., triggered by a UE mobility event notification from AMF. If UE moves out of the service area of the source MFAF, source DCCF determines UE MFAF data subscription to be transferred to target MFAF.\n3.\tSource DCCF may query the NRF to discover and select the target DCCF and/or MFAF, e.g. based on the UE location information received from AMF.\nConditional on MFAF transfer:\n4.\tSource DCCF uses the Nmfaf_3daDataManagement service to request transfer of UE MFAF data subscription context to the target MFAF.\n5.\tTarget MFAF retrieves MFAF subscription context from Source MFAF.\n6.\tTarget MFAF accepts the data subscription context transfer. The source MFAF stops data collection and can remove the related context.\n7.\tTarget MFAF responds to the DCCF indicating the transfer is complete. The response may contain a Transaction Reference ID from the Target MFAF. The DCCF regards the data collection context at the Source NWDAF as terminated.\n8.\tIf a DCCF relocation does not occur, Source DCCF updates the data subscription to the data source by changing the Notification Target Address and Notification Correlation ID to the MFAF Notification Address and the MFAF Notification Correlation ID that received in step 7.\nConditional on DCCF transfer:\n9.\tSource DCCF using Ndccf_DataManagement_Transfer Request service operation to transfer of UE data subscription context to the target DCCF.\n10.\tTarget DCCF accepts the data subscription(s) context transfer.\n11.\tIf an MFAF is being used, the Target DCCF uses the Nmfaf_3daDataManagement_Configure service to configure the target MFAF.\n12.\tTarget DCCF confirms UE data subscription context transfer to the source DCCF. The confirmation includes the Subscription Correlation ID used by the Target DCCF.\n13.\t[Optional] Target DCCF subscribes to the relevant data source(s), if it is not yet subscribed to the data source(s) for the data required for the data subscription context and repeat step 1 to subscribes for UE mobility events from AMF.\n14.\tSource DCCF informs the data consumer about the successful UE DCCF or MFAF data subscription context transfer using a Ndccf_DataManagement_Notify message. The notification may contain a Subscription Correlation ID provided by the target DCCF.\n15.\t[Optional] Source DCCF unsubscribes with the data source(s) that are no longer needed for the remaining UE data subscriptions.\nFor DCCF or MFAF transfer:\nNOTE 3:\tAt this point, UE data subscription transfer is deemed completed.\n16-18.\tTarget DCCF or MFAF collects data from the data source(s) and notifies the data consumer using a Ndccf_DataManagement_Notify message.",
      "chunk_type": "general",
      "cross_references": [
        "figure_6.2.6.3.8-1"
      ]
    },
    {
      "chunk_id": "ts_23.288_6.2.7.1",
      "section_id": "6.2.7.1",
      "section_title": "General",
      "content": "Additional mechanisms to limit signalling between Event Producer NF (e.g. AMF, SMF) and Event Consumer NF (NWDAF, DCCF) are provided, with the Event Provider NFs enhanced with the optional capability of muting the notification of the events while storing for a limited time and limited size the events until the Event Consumer NF retrieves such mute stored events.",
      "chunk_type": "definition",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.288_6.2.7.2",
      "section_id": "6.2.7.2",
      "section_title": "Procedure for Data Collection with Event Muting Mechanism",
      "content": "The mute storage of events mechanism in the DCCF, the NWDAF, or NFs (if configured to support event muting mechanism) reuses the Event Reporting Information field of Event Exposure Framework to include the following flags:\n-\tDeactivate notification flag: The event consumer NF includes in the subscription to an event ID the deactivation flag to indicate to the event provider NF to collect, store the requested events but halt the notification to the consumer. The number of stored events may be limited based on Event Producer NF configuration; when this number is reached or another exception occurs (e.g., full buffer), the Event Producer NF performs the actions described later in this clause.\n-\tRetrieval notification flag: The event consumer NF includes in an event subscription modification request the subscription identification and the retrieval notification flag to indicate to the event producer NF to send the past collected events not already sent to this consumer NF. After sending the past collected events the event producer continues to store events without sending notifications to the event consumer.\nWhen an Event Consumer NF requests notification muting from an Event Producer NF using the Deactivation notification flag, the Event Consumer can in addition specify requested Event Producer NF actions to be taken when an exception occurs at the Event Producer NF. The Event Consumer NF may specify the following parameters in the Event Reporting Information field of Event Exposure Framework:\n-\tEvent Producer NF action on buffered notifications: 'Send All', 'Discard All' or 'Drop Old'.\n-\tEvent Producer NF action on subscription: 'close', 'continue with muting', 'continue without muting'.\nThe Event Producer NF evaluates the requested action from the Event Consumer NF according to local policy (if configured) and in the response to the Event Consumer NF provides an accept indication if the request can be satisfied.\nIf the request is accepted, the response from the Event Producer NF may indicate the following:\n-\tThe maximum number of notifications that the Event Producer NF expects to be able to store.\n-\tAn estimate of the duration for which notifications can be buffered.\nUsing the event muting mechanism NWDAF, DCCF can subscribe to events from NFs such as AMF and SMF (if configured to support event muting mechanism), to avoid constant notifications and retrieve the mute stored events when it requires.\nThe procedure in Figure 6.2.7.2-1 is used by Event Consumer NF to control the frequency of data collection from Event Producer NFs (except DCCF and NWDAF) via Event Exposure. For data collection via DCCF and NWDAF, the consumer may mute the notifications by using the formatting instructions as specified in clause 5A.4.\nFigure 6.2.7.2-1: Procedure for muting event notification\n0a.\tThe Event Consumer NF, such as NWDAF or DCCF, is configured with local policies that are used to determine when the muted storage of events is triggered and actions to be requested from the Event Producer NF if an exception occurs at the NF Producer (e.g., full buffer). The Event Producer NF is configured with local polices specifying default actions to take should an exception occur and policies for handling Event Consumers requests containing requested actions to be taken by the Event Producer NF if an exception occurs.\n0b.\tThe Event Consumer NF, such as NWDAF or DCCF, may receive a request with the Formatting and Processing parameters indicating Event Clubbing. The DCCF or NWDAF may utilize event muting when collecting data from NFs (if configured to support event muting mechanism).\n1.\tThe Event Consumer NF, DCCF or NWDAF subscribes for a (set of) Event ID(s) by invoking the Nnf_EventExposure_Subscribe service operation including in event reporting information the deactivate notification flag and optionally requested Event Producer NF actions to be taken when an exception occurs at the Event Producer NF.\nIf the Event Producer NF supports the deactivate notification flag and the requested actions to be taken by the Event Producer NF when an exception occurs, the Event Producer NF sends a response back including the Subscription Correlation ID and an indication of successful deactivation of notifications. The Event Consumer NF may request the Event Producer NF to store data related to Event ID(s), or aggregated data related to UE(s). The response from the Event Producer NF may indicates the maximum number of notifications that the Event Producer NF expects to be able to store and / or an estimate of the duration for which notifications can be buffered.\nIf the Event Producer NF does not support the deactivate notification flag or does not accept requested actions to be taken by the Event Producer NF when an exception occurs, the Event Producer NF sends a response back including an indication of failure and cause code. In this case, the Event Consumer NF re-sends the subscription request without including in the event reporting information the deactivate notification flag or with different requested actions to be taken by the Event Producer NF when an exception occurs.\nNOTE:\tIf the Event Producer NF receives a subscription without the deactivate notification flag, the steps 2 - 6 are not executed and the Event Producer NF performs the event notification as defined in clause 4.15 of TS 23.502 [3].\n2.\tBased on the request from Event Consumer NF, DCCF or NWDAF, the Event Producer NF triggers a window of event collection for the Event Consumer NF, DCCF or NWDAF subscription with the indication of \"deactivate notification flag\". The Event Producer NF keeps the association between the Event ID, Subscription Correlation ID (which identifies the consumer of the event), subscriber information (e.g. notification target information) and the status of the transaction between the Event Consumer NF, DCCF or NWDAF and the Event Producer as \"collecting events / non-notification\".\n3.\tBased on local policies or based on the Notification Time Window indicated in the Formatting and Processing parameters of the received request in step 0b, the Event Consumer NF, DCCF or NWDAF decides when to request the muted stored events from the Event Producer NF.\n4.\tEvent Consumer NF invokes the Nnf_EventExposure_Subscribe service operation from the Event Producer NF including, the Event ID, the Subscription Correlation ID and the retrieval notification flag. These parameters denote the identification of the transaction required by the Event Consumer NF, i.e. retrieve muted stored events for a subscribed Event ID and trigger a new time window of muted stored event generation without notification.\n5.\tEvent Producer NF based on the parameters received in the request from Event Consumer NF verifies whether there is a subscription to the requested Event ID with a deactivate notification flag. In positive case, Event Producer NF identifies and sends the past collected events muted during the period between the received retrieval notification flag and the last deactivate flag received from the Event consumer NF for the Event ID, the Subscription Correlation ID.\nIf an exception (e.g. full buffer) occurs, the Event Producer NF performs the actions determined in steps 0a and 1.\n6.\tThe Event Producer NF checks whether overall event reporting information (e.g. the maximum time window for the subscription of such Event ID) has expired. If yes, it does not trigger another round of event muted storage and deactivates the subscription. If not expired, the Event Producer NF trigger another time window for muted stored of produced events, sets back the deactivated notification flag for the Event ID and Subscription Correlation ID.\nIf the Event Consumer NF wants to change an existing subscription to an Event Producer NF using muted stored events into a regular notification of events, it shall invoke Nnf_EventExposure_Subscribe service operation from Event Producer NF without deactivate notification flag.",
      "chunk_type": "procedure",
      "cross_references": [
        "clause_5",
        "ts_23.502_clause_4.15",
        "figure_6.2.7.2-1",
        "ts_23.502"
      ]
    },
    {
      "chunk_id": "ts_23.288_6.2.8.1",
      "section_id": "6.2.8.1",
      "section_title": "General",
      "content": "The NWDAF may interact with an AF to collect data from UE Application(s) as an input for analytics generation and ML Model training. The AF can be in the MNO domain or an AF external to MNO domain. The data collection request from NWDAF may trigger the AF to collect data from the UE Application. The AF in this clause is referred as the Data Collection AF which is described in TS 26.531 [32].\nThe UE Application establishes a connection to the AF in the MNO domain or external to MNO domain over user plane via a PDU session. The AF communicates with the UE Application and collects data from UE Application.\nFor both an AF in trusted domain and an AF in untrusted domain (which supports to collect data from a UE Application), the SLA between the operator and the Application Service Provider (i.e. ASP) determines per Application ID in use by the ASP:\n-\tThe AF for the UE Application to connect to (e.g. based on an FQDN).\n-\tThe information that the UE Application shares with the AF, subject to user consent.\n-\tPossible Data Anonymization, Aggregation or Normalization algorithms (if used).\n-\tThe authentication information that enable the AF to verify the authenticity of the UE's Application that provides data.\nNOTE 1:\tThe mutual authentication information that is used by the UE Application and the AF and how user consent is obtained is out of scope of the present document. However, the authentication information could contain GPSI.\nThe AF (which supports the data collection) is configured based on the SLA above.\nNOTE 2:\tData Anonymization, Aggregation or Normalization algorithms within the SLA are defined per individual UE.\nA UE Application (which supports to providing data to an AF) is configured by the ASP with the Application ID to use in the communication with the AF and then the UE Application is configured per Application ID with the following information:\n-\tThe address of the AF to contact.\n-\tThe parameters that the UE Application is authorized to provide to the AF.\n-\tThe authentication information to enable the UE Application to verify the authenticity of the AF that requests data.\nNOTE 3:\tThe authentication and authorization information that is used by the UE Application and the AF for collection and how user consent is obtained is out of SA2's scope. However, the authentication information could contain GPSI.\nNOTE 4:\tThe configuration procedure for the above information from the ASP to the UE's Application is out of scope of the present document.\nNOTE 5:\tThe Application ID configured in the UE Application can either be an OSAppId as defined in TS 23.503 [4] or an OS independent Application Identifier (e.g. for applications running on a web browser).\nThe Target for Event Reporting in the Naf_EventExposure request may be set to:\n-\tan external UE ID (i.e. GPSI) or an external Group ID, in case the AF is located in the untrusted domain;\n-\ta SUPI or an internal Group ID, in case the AF is located within the trusted domain.\nThe GPSI may be an External Identifier for individual UE as defined in TS 23.501 [2] that includes the domain name. This domain name and the Application ID configured in the UE Application are different from each other.",
      "chunk_type": "definition",
      "cross_references": [
        "ts_26.531",
        "ts_23.503",
        "ts_23.501"
      ]
    },
    {
      "chunk_id": "ts_23.288_6.2.8.2.1",
      "section_id": "6.2.8.2.1",
      "section_title": "Connection establishment between UE Application and AF",
      "content": "The UE Application receives the data collection configuration from ASP. The configuration information is as described in clause 6.2.8.1.\nThe UE Application establishes a user plane connection to the AF. Data collection procedure from the UE Application is performed via the user plane connection.\nNOTE 1:\tWhether multiple user plane connections are established, or a single user plane connection is established for different applications between each UE Application and AF is based on implementation that is out of 3GPP scope.\nNOTE 2:\tThe Connection establishment procedure from the UE Application to the AF as above is out of scope of the present specification. For the 3GPP defined services, the Connection establishment procedure is described in TS 26.531 [32]. For the non-3GPP defined services, the Connection establishment procedure is out of 3GPP's scope.\nNOTE 3:\tIn order to preserve resources (e.g. battery, quota) for the end user, a user plane connection to the AF can be established only when the UE has an active PDU Session for the UE Application and it is actively using the network (i.e. the user plane connection to the AF does not need to be established when the UE Application is inactive, or used in an off-line mode).\nBoth direct data collection procedure (from the UE Application to the AF, either in trusted domain or untrusted domain) and indirect data collection procedure (from the UE Application to the Application server and from the Application server to the AF) are described in TS 26.531 [32].\nThe AF stores the IP address received from the UE (in the PDU session used) in order to request data collection from the UE Application. The UE IP address is used by the AF to identify the user plane connection.\nThe UE Application provides the Application ID configured in the UE Application to the AF as described in TS 26.531 [32].",
      "chunk_type": "general",
      "cross_references": [
        "clause_6.2.8.1",
        "ts_26.531"
      ]
    },
    {
      "chunk_id": "ts_23.288_6.2.8.2.2",
      "section_id": "6.2.8.2.2",
      "section_title": "AF registration and discovery",
      "content": "The AF registers its available NF profile to the NRF. The AF in trusted domain registers to the NRF by using the Nnrf_NFManagement service that is defined in clause 5.2.7.2 of TS 23.502 [3]. The AF in untrusted domain registers the available NF profile to the NRF via the NEF as described in clause 6.2.2.3.\nThe AF discovery and selection is described in clause 6.3.25 of TS 23.501 [2].",
      "chunk_type": "general",
      "cross_references": [
        "ts_23.502_clause_5.2.7.2",
        "clause_6.2.2.3",
        "ts_23.501_clause_6.3.25",
        "ts_23.502",
        "ts_23.501"
      ]
    },
    {
      "chunk_id": "ts_23.288_6.2.8.2.3",
      "section_id": "6.2.8.2.3",
      "section_title": "Data Collection Procedure from UE",
      "content": "Figure 6.2.8.2.3-1: Data Collection Procedure from UE\n1.\tAn NF subscribes to analytics from the NWDAF as described in clause 6.1.1.1, that includes Analytics ID, Analytics Filter Information including e.g. AoI, Internal Application ID(s) and Target of Analytics Reporting. NWDAF may also initiate the data collection prior to this subscription.\nNOTE:\tSubscription to analytics can be triggered directly towards NWDAF or can be done via DCCF using procedure in clause 6.1.4.2.\n2.\tNWDAF discovers and selects the AF that provides data collection (based on the AF profiles registered in NRF) as described in clause 6.3.25 of TS 23.501 [2].\nStep 3a is used for the AF in trusted domain while step 3b is used for the AF in untrusted domain.\n3a.\tNWDAF subscribes to the AF in trusted domain for UE data collection (i.e. input data from UE for analytics), by using Naf_EventExposure_Subscribe as defined in clause 5.2.19.2.2 of TS 23.502 [3]. The NWDAF request contains an Application ID known in the core network and the UE Application provides the Application ID configured in the UE Application. The AF binds the NWDAF request for an Application Id and the UE data collection for an Application Id configured in the UE.\n3b.\tNWDAF subscribes to the AF in untrusted domain for UE data collection (i.e. input data from UE for analytics), by using step 2 and step 3 of the procedure that is described in Figure 6.2.2.3-1.\nNOTE:\tFor steps 3a and 3b, data collection can also be triggered using DCCF, as specified in clause 6.2.6.3.\n4.\tThe AF collects the UE data using either direct or indirect data collection procedure in clause 6.2.8.2.1. The establishment of the connection can be performed at any time prior to this. The AF links the data collection request from step 3 to the user plane connection as described in clause 6.2.8.2.4.\nNOTE 1:\tThe Direct data collection and indirect data collection procedure is described in TS 26.531 [32].\nStep 5a is used for the AF in trusted domain while step 5b is used for the AF in untrusted domain.\n5a.\tThe AF in trusted domain receives the input data from the UE and processes the data (e.g. anonymizes, aggregates and normalizes) according to the SLA that is configured in the AF described in clause 6.2.8.1 and Event ID(s) and Event Filter(s) set during step 3a. The trusted AF then notifies the NWDAF on the processed data according to the NWDAF subscription in step 3a.\n5b.\tThe AF in untrusted domain receives the input data from the UE and processes the data (e.g. anonymizes, aggregates and normalizes) according to the SLA that is configured in the AF described in clause 6.2.8.1 and Event ID(s) and Event Filter(s) set during step 3b. The untrusted AF notifies the NWDAF on the processed data by using step 5b (i.e. Step 4 and step 5 of the procedure that described in Figure 6.2.2.3-1).\nNOTE 2:\tIf NWDAF requests the same data from multiple UEs, i.e. a determined list of UEs or \"any UE\" as the Target of Analytics Reporting, the AF can process (e.g. anonymize, aggregate and normalize) the data from multiple UEs according to the Event ID(s) and Event Filter(s) received from NWDAF during step 3a or 3b before notifying the NWDAF on the processed data in step 5a (if the AF is in trusted domain) or step 5b (if the AF is in untrusted domain).\n6.\tThe NWDAF produces analytics using the UE data received from the AF.\n7.\tThe NWDAF provides analytics to the consumer NF.\nIf the Target of Analytics Reporting that was received from the consumer in step 1 includes an Internal Group ID, NWDAF includes such Internal Group ID in step 3a or step 3b to AF. In the case of step 3b, NEF translates the Internal Group ID to an External Group ID.\nIf the Target of Analytics Reporting that was received from consumer in step 1 is \"any UE\", NWDAF may either set the target of event reporting to \"any UE\" in step 3a or 3b to AF, or may determine a list of SUPIs from AMF and/or SMF based on the Analytics Filter Information and sends the step 3a or 3b to AF for the determined list of UEs.\nNOTE 3:\tIt is assumed that the AF is provisioned with the list of UE IDs (GPSIs or SUPIs) belonging to an External or Internal Group ID.",
      "chunk_type": "procedure",
      "cross_references": [
        "clause_6.1.1.1",
        "clause_6.1.4.2",
        "ts_23.501_clause_6.3.25",
        "ts_23.502_clause_5.2.19.2.2",
        "clause_6.2.6.3",
        "clause_6.2.8.2.1",
        "clause_6.2.8.2.4",
        "clause_6.2.8.1",
        "figure_6.2.8.2.3-1",
        "figure_6.2.2.3-1",
        "ts_23.501",
        "ts_23.502",
        "ts_26.531"
      ]
    },
    {
      "chunk_id": "ts_23.288_6.2.8.2.4",
      "section_id": "6.2.8.2.4",
      "section_title": "Correlation between UE data collection and the NWDAF data request",
      "content": "6.2.8.2.4.1\tGeneral\nThe UE IP address is used to identify the user plane connection established between the UE application and the AF for data collection, while the AF receives the Naf_EventExposure_Subscribe to request for the specific UE data collection by using SUPI (for AF in trusted domain) or external UE ID (i.e. GPSI) (for AF in untrusted domain). AF is required to correlate the UE IP address to the SUPI or to GPSI.\nIf the AF supports requests addressed to External Group ID (for AF in untrusted domain) or Internal Group ID (for AF in internal trust domain), the AF must correlate the list of external UE ID (i.e. GPSI) or SUPI, respectively, with the group(s) the UE belongs to, so that the AF can further correlate the UE ID (external or internal) to the UE IP address.\nAF may indicate in NF profile and register to NRF in clause 6.2.8.2.2 if it supports to do the mapping itself or ask NWDAF to do it. If the AF is in a trusted domain, it may also indicate the supported list of S-NSSAI, DNN combinations to NRF in NF profile.\nNOTE 1:\tIf any method in Annex A is used, the AF always indicates in the NF profile that it supports mapping by itself.\nAccordingly, if AF supports the mapping, for AF in trusted domain, it is required to correlate the UE IP address and SUPI as described in clause 6.2.8.2.4.2 or by other means, e.g. as described in Annex A. This, after receiving the data collection request from NWDAF and there is no mapping information storage in the AF. For AF in untrusted domain, the procedure to correlate the UE IP address and GPSI is described in clause 6.2.8.2.4.4 or by some other means, e.g. as described in Annex A. If there is NAT between the UE and the AF, one of the methods in Annex A can be used.\nIf there is no NAT between the UE and the AF, NWDAF may collect the mapping information as described in clause 6.2.8.2.4.4 before sending request to AF in step 3a or step 3b in Figure 6.2.8.2.3-1.\nIf the user plane session between the UE and the AF is released, the AF / NWDAF removes the stored correlation information between UE IP address and UE SUPI / GPSI.\nFor all procedures defined in this clause 6.2.8.2.4.1, a specific combination of S-NSSAI/DNN shall be corresponding to a single PDU session for a UE to access the AF (either in trusted domain or untrusted domain).\nNOTE 2:\tBased on implementation, for the UE to access the Data Collection AF, only a single PDU Session is allowed to be established to the Data Collection AF, by configuring a specific S-NSSAI/DNN for the Data Collection AF only.\n6.2.8.2.4.2\tAF in trusted domain correlates UE data collection and NWDAF request\nThis is only valid if there is no NAT between the UE and the AF.\nIf the AF receives the Naf_EventExposure_Subscribe/Request including Target for Event Reporting set to SUPI and not including the UE's IP address and the AF does not locally store the UE's IP address, the AF finds the PDU session(s) serving the SUPI, DNN, S-NSSAI from UDM and the allocated IPv4 address or IPv6 prefix or both from SMF as described in Figure 6.2.8.2.4.2-1.\nFigure 6.2.8.2.4.2-1: AF in trusted domain correlates UE data collection and NWDAF request\n0.\tAt the establishment of the user plane connection between the UE Application and the AF, the AF stores the UE IP address (for both direct and indirect reporting) as described clause 6.2.8.2.1.\n1.\tThe AF receives a request to retrieve input data as described in clause 6.2.8.2.3 including a SUPI. The AF finds the SMF serving the PDU session(s) for this SUPI using Nudm_UECM_Get_Request including SUPI, type of requested information set to SMF Registration Info and the S-NSSAI and DNN, as defined in clause 5.3.2.5.7 in TS 29.503 [26].\n2.\tThe UDM provides the SMF id and the corresponding PDU Session id, S-NSSAI, DNN using Nudm_UECM_Get_Response to the AF. Using the AF supported S-NSSAI, DNN and the received information from UDM, AF determines the PDU session used for the user plane connection between UE and AF.\n3.\tThe AF sends Nsmf_EventExposure_Subscribe to the SMF identified in step 2, including the Target for Event Reporting set to the PDU Session id(s) provided in step 2 and the Event ID set to IP address/prefix allocation/change.\n4.\tThe SMF provides the allocated IPv4 address or IPv6 prefix to the AF.\n5.\tThe AF correlates the UE data that includes the UE IP address and the NWDAF request for a SUPI using the retrieved IPv4 address or IP v6 prefix.\nIf the user plane session between the UE and the AF is released, the AF shall remove the stored correlation information between the UE IP address / prefix and SUPI.\n6.2.8.2.4.3\tAF in untrusted domain correlates UE data collection and NWDAF request\nThis is only valid if there is no NAT between the UE and the AF.\nIf the AF receives the Naf_EventExposure_Subscribe from NWDAF, via NEF, including Target for Event Reporting set to GPSI and not including the UE's IP address and the AF does not locally store the UE's IP address, the AF request the NEF to provide the allocated IPv4 address or IPv6 prefix or both as described in Figure 6.2.8.2.4.3-1.\nNOTE 1:\tThe NWDAF can also provide the UE IP address to the AF as described in clause 6.2.8.2.4.1.\nFigure 6.2.8.2.4.3-1: AF in untrusted domain correlates UE data collection and NWDAF request\n0.\tSame step as step 0 in figure 6.2.8.2.4.3-1.\n1.\tThe AF receives a request to retrieve input data as described in clause 6.2.8.2.3 including a GPSI. The AF requests NEF to provide the IPv4address or IPv6 prefix or both serving the PDU session for this GPSI towards the AF using Nnef_UEAddress_Get_Request.\n2.\tThe NEF is configured with the DNN, S-NSSAI to access this AF. The NEF finds the SMF serving the PDU session(s) for this GPSI, DNN, S-NSSAI using Nudm_UECM_Get_Request including type of requested information set to SMF Registration Info and the S-NSSAI and DNN, as defined in clause 5.3.2.5.7 of TS 29.503 [26].\nNOTE 2:\tIf there are more than one (DNN, S-NSSAI) combination to access this AF, the NEF will find the SMF(s) serving the PDU session(s) to any of these (DNN, S-NSSAI) combinations.\n3.\tThe UDM provides the SMF id(s) and the tuple (PDU Session id (S-NSSAI, DNN) using Nudm_UECM_Get_Response to the NEF. Using the configuration in NEF, as described in step 2, the NEF determines the PDU session used for the user plane connection between UE and AF.\n4.\tThe NEF sends Nsmf_EventExposure_Subscribe to the SMF(s) identified in step 3, including the Target for Event Reporting set to the PDU Session id(s) provided in step 3 and the Event ID set to IP address/prefix allocation/change.\n5.\tThe SMF provides the allocated IPv4 address or IPv6 prefix or both to the NEF.\n6.\tThe NEF provides the allocated IPv4 address or IPv6 prefix or both provided by SMF in step 5 to the AF.\n7.\tThe AF correlates the UE data that includes the UE IP address and the NWDAF request for the GPSI using the retrieved IPv4 address or IP v6 prefix.\nIf the user plane session between the UE and the AF is released, the AF shall remove the stored correlation information between the UE IP address / prefix and GPSI.\n6.2.8.2.4.4\tNWDAF correlates UE data collection and NWDAF request for trusted AF and untrusted AF\nThis is only valid if there is no NAT between the UE and the AF.\nNWDAF receives the analytics subscription from consumer and discover an AF as described in clause 6.2.8.2.3. NWDAF finds the PDU session(s) serving the SUPI, DNN, S-NSSAI from UDM and the allocated IPv4 address or IPv6 prefix from SMF as described in Figure 6.2.8.2.4.4-1.\nFigure 6.2.8.2.4.4-1: NWDAF correlates UE data collection and NWDAF request\n1.\tThe NWDAF finds the SMF(s) serving the PDU session(s) for this SUPI or GPSI using Nudm_UECM_Get_Request including SUPI or GPSI, type of requested information set to SMF Registration Info and the list of S-NSSAI and DNN combinations, as defined in clause 5.3.2.5.7 in TS 29.503 [26]. The NWDAF acquires the DNN, S-NSSAI used to access the AF using Nnrf_NFDiscovery_Request service operation or is configured with the DNN, S-NSSAI used to access the AF.\n2.\tThe UDM provides the SMF id(s) and the corresponding PDU Session id(s), per S-NSSAI, DNN combination using Nudm_UECM_Get_Response to the NWDAF. Based on the S-NSSAI, DNN used to access the AF in step 1, NWDAF determines the PDU session used for the user plane connection between UE and AF.\n3.\tThe NWDAF sends Nsmf_EventExposure_Subscribe to the SMF identified in step 2, including the Target for Event Reporting set to the PDU Session id(s) provided in step 2 and the Event ID set to IP address/prefix allocation/change.\n4.\tThe SMF provides the allocated IPv4 address or IPv6 prefix to the NWDAF.\n5.\tStep 3a for AF in trusted domain or step 3b for AF in untrusted domain in Figure 6.2.8.2.3-1 is performed with the exception that NWDAF sets the allocated IPv4 address or IPv6 prefix that were received in step 4 as target of event reporting.\nIf NWDAF subscribed for the PDU session used for the user plane connection between the UE and the AF is released notification in step 3, the SMF informs the NWDAF that the UE IP address / prefix is released via Nsmf_EventExposure_Notify. Based on this information, the NWDAF shall remove the stored correlation information between the UE IP address / prefix and SUPI.\n6.2.8.2.4a\tVoid",
      "chunk_type": "general",
      "cross_references": [
        "clause_6.2.8.2.2",
        "clause_6.2.8.2.4.2",
        "clause_6.2.8.2.4.4",
        "clause_6.2.8.2.4.1",
        "clause_6.2.8.2.1",
        "clause_6.2.8.2.3",
        "ts_29.503_clause_5.3.2.5.7",
        "figure_6.2.8.2.3-1",
        "figure_6.2.8.2.4.2-1",
        "figure_6.2.8.2.4.3-1",
        "figure_6.2.8.2.4.4-1",
        "ts_29.503"
      ]
    },
    {
      "chunk_id": "ts_23.288_6.2.9",
      "section_id": "6.2.9",
      "section_title": "User consent for analytics",
      "content": "Depending on local policy or regulations, to protect the privacy of user data, the data collection, ML Model training and analytics generation for a SUPI or GPSI, Internal or External_Group_Id or \"any UE\" may be subject to user consent bound to a purpose, such as analytics or ML Model training. The user consent is subscription information stored in the UDM, which includes:\na)\twhether the user authorizes the collection and usage of its data for a particular purpose;\nb)\tthe purpose for data collection, e.g. analytics or model training.\nThe NWDAF retrieves the user consent to data collection and usage from UDM for a user, i.e. SUPI prior to collecting user data from an NF as described in clause 6.2.2 and from a DCCF as described in clause 6.2.6 and prior to retrieving data from NWDAF (either directly according to clause 6.2.6.2 or via DCCF according to clause 6.2.6.3) or ADRF (either directly or via DCCF according to clause 6.2.6.3).\nIn roaming scenario, the H-RE-NWDAF is the enforcement point to check user consent. The H-RE-NWDAF retrieves the roaming-related user consent for a user from the UDM.\nNOTE 1:\tThe content of the roaming-related user consent is specified in clause X.7 and Annex V of TS 33.501 [49].\nIf a request for analytics is for \"any UE\", meaning that the consumer requests analytics for all UEs registered in an area, such as a S-NSSAI or DNN or AoI, then the NWDAF resolves \"any UE\" into a list of SUPIs using the Namf_EventExposure service with EventId \"Number of UEs served by the AMF and located in an area of interest\" and retrieves user consent for each SUPI. If a request for analytics is for an Internal or External Group Id, NWDAF resolves it into a list of SUPIs and retrieves user consent for each SUPI.\nIf user consent for a user is granted, then the NWDAF subscribes to user consent updates in UDM using Nudm_SDM_Subscribe service operation. Otherwise, the NWDAF excludes the corresponding SUPI from the request to collect data and generate analytics or ML Model on the other users for which user consent is granted if the request is for a group of UEs identified by an Internal-Group-Id or \"any UE\".\nWhen data is collected from the UE Application, the ASP is responsible to obtain user consent to share data with the MNO.\nIf the UDM notifies that the user consent changed, then the NWDAF checks if the user consent is not granted for the purpose of analytics or model training. If user consent was revoked for a UE, the NWDAF stops data collection for that UE. For analytics subscriptions to UE related analytics with the Target of Analytics Reporting set to that UE, the NWDAF stops generation of new analytics and stops providing affected analytics to consumers. For ML Model subscriptions with Target of ML Model Reporting set to that UE, the NWDAF containing MTLF stops (re-)training of ML Model(s) using data from the UE and stops providing the ML Model(s) to consumers (NWDAF containing AnLF) for analytics. If the Target of Analytics Reporting or Target of ML Model Reporting is either an Internal or External Group Id or a list of SUPIs or \"any UE\", the NWDAF skips those SUPIs that do not grant user consent for the purpose of analytics or model training. The NWDAF may unsubscribe to be notified of user consent updates from UDM for users for which data consent has been revoked.\nNOTE 2:\tThe NWDAF can provide analytics or ML Model to consumers that request analytics or ML Model for an Internal or External Group Id, or for \"any UE\", skipping those users for which consent is not granted or is revoked.\nThe Analytics ID that needs to check user consent before collecting input data are those that collect input data per user, i.e. per SUPI, GPSI, Internal or External Group Id, or those with the Target of Analytics Reporting or Target of ML Model Reporting set to a SUPI, GPSI or External or Internal Group Id and are described in clause 6.",
      "chunk_type": "general",
      "cross_references": [
        "clause_6.2.2",
        "clause_6.2.6",
        "clause_6.2.6.2",
        "clause_6.2.6.3",
        "clause_6",
        "ts_33.501"
      ]
    },
    {
      "chunk_id": "ts_23.288_6.2.10",
      "section_id": "6.2.10",
      "section_title": "Data collection by H-RE-NWDAF from V-RE-NWDAF for outbound roaming users",
      "content": "This procedure may be used by the RE-NWDAF in the HPLMN as service consumer to subscribe/unsubscribe to notifications about input data from the VPLMN for outbound roaming users (from the HPLMN perspective). The H-RE-NWDAF and V-RE-NWDAF in the procedure are NWDAFs with roaming exchange capability.\nFigure 6.2.10-1: data collection by H-RE-NWDAF from V-RE-NWDAF for outbound roaming users\n1.\tFor subscription to collected data related to the UE(s), the H-RE-NWDAF checks the user consent of related users depending on local policy or regulations.\nNOTE 1:\tSee clause X.7 and Annex V TS 33.501 [49] for details of the user consent check procedures. See clause X.8 of TS 33.501 [49] for protection of data exchange in roaming case.\n2.\tThe H-RE-NWDAF of HPLMN discovers the V-RE-NWDAF of VPLMN that supports the Nnwdaf_RoamingData service using the NRF as specified in Clause 5.2.\nNOTE 2:\tThe access to the Nnf_EventExposure services is expected to be restricted to NF service consumers within the same PLMN to prevent bypassing checks based on user consent and operator policy.\n3.\tThe H-RE-NWDAF subscribes/unsubscribes to notifications about input data by invoking the Nnwdaf_RoamingData_Subscribe / Nnwdaf_RoamingData_Unsubscribe service operation. It optionally may indicate the IDs of AMFs and for local breakout also SMFs in the VPLMN handling related UEs, as obtained from the UDM.\n4.\tThe V-RE-NWDAF checks if the HPLMN is authorised to subscribe to the input data based on VPLMN operator polices (that may depend on the HPLMN and may indicate permissible or restricted input data and related parameters). If the HPLMN is not authorized to subscribe to the input data, the subscription request must be rejected with a proper cause in the response to the H-RE-NWDAF and the following steps are skipped.\n5.\tThe V-RE-NWDAF may trigger new data collection from NF(s) (as indicated via the AMF ID(s) or SMF ID(s)) if needed and monitors the requested input data using procedures as described in clauses 6.2.1 to 6.2.8.\n6.\tThe V-RE-NWDAF may restrict the exposed input data based on VPLMN operator polices (that may depend on the HPLMN) and may store them for auditing.\n7.\tThe V-RE-NWDAF responds to or notifies the H-RE-NWDAF with the subscribed available input data.",
      "chunk_type": "general",
      "cross_references": [
        "clause_5.2",
        "figure_6.2.10-1",
        "ts_33.501"
      ]
    },
    {
      "chunk_id": "ts_23.288_6.2.11",
      "section_id": "6.2.11",
      "section_title": "Data collection by V-RE-NWDAF from H-RE-NWDAF for inbound roaming users",
      "content": "This procedure may be used by an RE-NWDAF in the VPLMN to subscribe/unsubscribe to notifications about input data from the HPLMN for inbound roaming users (from the VPLMN perspective). H-RE-NWDAF and V-RE-NWDAF in the procedure are NWDAFs with roaming exchange capability.\nFigure 6.2.11-1: Data Collection by V-RE-NWDAF from H-RE-NWDAF for inbound roaming users\n1.\tThe V-RE-NWDAF of VPLMN discovers an H-RE-NWDAF of the HPLMN that supports the Nnwdaf_RoamingData service using the NRF as specified in clause 5.2.\nNOTE 1:\tThe access to the Nnf_EventExposure services is expected to be restricted to NF service consumers within the same PLMN to prevent bypassing checks based on user consent and operator policy\n2.\tThe V-RE-NWDAF subscribes/unsubscribes to input data information by invoking Nnwdaf_RoamingData_Subscribe / Nnwdaf_RoamingData_Unsubscribe service operation.\n3.\tThe H-RE-NWDAF checks if the VPLMN is authorised to subscribe to the indicated input data based on the HPLMN operator polices (that may depend on the VPLMN and may indicate permissible or restricted input data and related parameters) and user consent of related users. If the VPLMN is not authorized to subscribe to the input data, the subscription request must be rejected with a proper cause in the response to the V-RE-NWDAF and the following steps are skipped.\nNOTE 2:\tSee clause X.7 and Annex V of TS 33.501 [49] for details of the user consent check procedures. See clause X.8 of TS 33.501 [49] for protection of data exchange in roaming case.\n4.\tThe H-RE-NWDAF may trigger new data collection if needed and monitors the requested input data, using procedures as described in clauses 6.2.1 to 6.2.8.\n5.\tThe H-RE-NWDAF may restrict the exposed input data based on HPLMN operator polices (that may depend on the VPLMN) and may store them for auditing.\n6.\tThe H-RE-NWDAF responds to or notifies the V-RE-NWDAF with the subscribed available input data.",
      "chunk_type": "general",
      "cross_references": [
        "clause_5.2",
        "figure_6.2.11-1",
        "ts_33.501"
      ]
    },
    {
      "chunk_id": "ts_23.288_6.2.12.1",
      "section_id": "6.2.12.1",
      "section_title": "General",
      "content": "The NWDAF may collect location information for a target UE or a group of target UEs using LCS. The collected location related information can include:\n‐\tLocation estimate of the UE in geographical coordinates and/or local coordinates expressed as a shape as defined in TS 23.032 [34] or local coordinate reference system;\n-\tTime stamp of location estimate;\n-\tVelocity of the UE as defined in TS 23.032 [34];\n-\tInformation about the positioning method used to obtain the location estimate of the UE;\n-\tIndication of area event, when UE enters, is within or leaves the Geographical area;\n-\tIndication of motion event when UE moves by more than some predefined straight line distance from a previous location.\nNOTE:\tThe location information that can be retrieved is defined within the location service response in clause 5.5 of TS 23.273 [39].\nNWDAF shall use Ngmlc service as defined in TS 23.273 [39] to collect the location information using LCS. Only Mobile Terminated Location Request (MT-LR) is supported, including both Immediate Location Request and Deferred Location Request.\nNWDAF may determine to query LCS system instead of AMF to obtain UE's location information based on the following attributes as received from NWDAF consumer:\n-\tAnalytics ID (e.g. UE Mobility, QoS Sustainability, Relative Proximity, Movement Behaviour);\n-\tPreferred granularity of location information.",
      "chunk_type": "definition",
      "cross_references": [
        "ts_23.273_clause_5.5",
        "ts_23.032",
        "ts_23.273"
      ]
    },
    {
      "chunk_id": "ts_23.288_6.2.12.2",
      "section_id": "6.2.12.2",
      "section_title": "Procedure for data collection using LCS",
      "content": "The interactions between NWDAF and LCS for data collection are illustrated in Figure 6.2.12.2-1. The data collected depends on the use cases. This figure is an abstraction of how NWDAF collects location information using LCS. The actual procedures that NWDAF may use are as follows:\n-\tFor a target UE, both 5GC-MT-LR procedure for the commercial location service as specified in clause 6.1.2 and deferred 5GC-MT-LR procedure as specified in clause 6.3 of TS 23.273 [39] can be utilized;\n-\tFor a group of target UEs, bulk operation of LCS Service Request Targeting to Multiple UEs as specified in clause 6.8 of TS 23.273 [39] can be utilized.\nFigure 6.2.12.2-1: Data collection using LCS\n1.\tNWDAF requests the location information from GMLC about a target UE (that may be identified by a SUPI) or a group of target UEs (identified by a group ID).\n2.\tGMLC interacts within LCS, i.e. with AMF/LMF as described in TS 23.273 [39], to obtain the UE's location information. If privacy verification is required, GLMC will interact with UE via AMF before sending the location information to NWDAF.\n3.1\tIf it is Immediate Location Request, GMLC sends the location service response including the location information for the target UE (or a group of target UEs) within a short time period as specified in clause 4.1a.4 of TS 23.273 [39] to the NWDAF.\n3.2\tIf it is Deferred Location Request, GMLC sends the location service response including the indication of event occurrence and location information if requested for the target UE (or group of target UEs) at some future time (or times) as specified in clause 4.1a.5 of TS 23.273 [39] to the NWDAF.",
      "chunk_type": "procedure",
      "cross_references": [
        "clause_6.1.2",
        "ts_23.273_clause_6.3",
        "ts_23.273_clause_6.8",
        "ts_23.273_clause_4.1",
        "figure_6.2.12.2-1",
        "ts_23.273"
      ]
    },
    {
      "chunk_id": "ts_23.288_6.2.13.1",
      "section_id": "6.2.13.1",
      "section_title": "General",
      "content": "When using an untrusted AF as data source, NWDAF may consider the data source rating results. The rating of untrusted AF is based on the quality of data collected.\nSuch rating may be triggered when the accuracy check based on the calculation between the predicted and ground-truth data indicates low performance, while the untrusted data source rating may be performed based on NWDAF internal logic. In the selection of the appropriate data sources, the NWDAF may use the rate of untrusted AF data sources as a criterion to calculate the expected confidence degree.",
      "chunk_type": "definition",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.288_6.2.13.2",
      "section_id": "6.2.13.2",
      "section_title": "Procedure for rating untrusted AF data sources",
      "content": "The process of rating untrusted AF data sources is depicted in Figure 6.2.13.2. For realizing potential issues, the NWDAF containing AnLF subscribes to the NWDAF containing MTLF, which performs an accuracy calculation based on the predicted and ground-truth data or alternatively the NWDAF containing AnLF can calculate the accuracy locally by comparing the predicted and ground-truth data.\nFigure 6.2.13.2: NWDAF containing AnLF-based untrusted AF data source rating\n1.\tNWDAF containing AnLF subscribes to NWDAF containing MTLF for obtaining an ML Model using the Nnwdaf_ModelProvision_Subscribe service operation. The NWDAF containing AnLF may include a threshold (as described in clause 6.2E.2) to indicate when the NWDAF containing MTLF needs to execute the accuracy monitoring operations.\nOption 1: Accuracy report from NWDAF containing MTLF\n2a.\tNWDAF containing MTLF evaluates the ML Model Accuracy according to clause 6.2E.2.\n2b.\tAn accuracy report is sent to the NWDAF containing AnLF, e.g. when the reporting threshold is met by invoking Nnwdaf_MLModelProvision_Notify service operation.\nOption 2: NWDAF containing AnLF computes accuracy\n2c.\tNWDAF containing AnLF calculates the accuracy by comparing the predictions with ground truth data.\n2d.\tNWDAF containing AnLF is aware that the ML Model used has a low accuracy either by receiving the accuracy report in step 2b or monitoring the accuracy by itself in step 2c. NWDAF containing AnLF determines that it needs to check further the data sources and compute data source rating. The decision conditions upon which it needs to initiate data source rating for a data source is based on NWDAF containing AnLF implementation.\n3a-3b.\tNWDAF containing AnLF initiates rating of a data source by requesting and receiving supplementary data, i.e. via Nnwdaf_DataManagement_Fetch / Ndccf_DataManagement_Notify, from different data sources (if available) to verify the data source quality or correctness. Such data can be for example performance data from the OAM which are supplementary to the data from untrusted AFs, or data from UPF supplementary to the data from untrusted AFs.\n4.\tNWDAF containing AnLF updates the rating for the sources where untrusted data is deviated from the supplementary trusted data per Event ID.\nNOTE 1:\tAn NWDAF containing AnLF determines the rating of an untrusted AF data source based on internal operations.\n5a.\tNWDAF containing AnLF stores the untrusted AF data source rating locally.\n5b.\tNWDAF containing AnLF may send the untrusted AF data source rating to UDSF, if available. NWDAF containing AnLF uses the Nudsf_ UnstructuredDataManagement_Create service operation.\nNOTE 2:\tTo avoid an untrusted AF to be permanently excluded as a data source, the NWDAF containing AnLF can re-rate the untrusted AF based on its internal logic. For example, it can rate the untrusted AF after some timer expired.\n6.\tA NWDAF consumer subscribes to a certain Analytics ID, using Nnwdaf_AnalyticsSubscription_Subscribe service operation.\nEither step 7a or step 7b is executed, before collecting the data needed for the subscribed Analytic ID.\n7a.\tThe NWDAF containing AnLF retrieves the untrusted AF rating of the data sources locally.\n7b.\tThe NWDAF containing AnLF retrieves the untrusted AF rating of the data sources from the UDSF using the to use Nudsf_ UnstructuredDataManagement_Query service operation.\n8.\tIf the rating of one or more untrusted AF is below a threshold (i.e. that is pre-configured), then the NWDAF containing AnLF can:\n(i)\tselect an alternative untrusted AF (if available) with higher rating; or\n(ii)\trequest supplementary data from other trusted data sources.\n9.\tThe NWDAF containing AnLF subscribes to a new data source to receive alternative or supplementary data if a new data source is selected in step 8.\n10.\tThe NWDAF containing AnLF may use the rate of untrusted AF data sources as a criterion to calculate the confidence level of the respective analytics output.\n11.\tThe NWDAF containing AnLF provides the analytics output to the analytics consumer, using the Nnwdaf_AnalyticsSubscription_Notify service operation.\nIn the case of ML Model (re)training, if the NWDAF containing MTLF is the same NWDAF containing AnLF in step 5b, it may also use the rate of untrusted AF data sources by performing steps 7b and 8-9 and then, (re)trains the ML Model.",
      "chunk_type": "procedure",
      "cross_references": [
        "clause_6.2",
        "figure_6.2.13.2"
      ]
    },
    {
      "chunk_id": "ts_23.288_6.2.14.1",
      "section_id": "6.2.14.1",
      "section_title": "General",
      "content": "The MDA functional overview and service framework as defined in Figure 5.1-1 of TS 28.104 [45] is used by NWDAF to trigger the MDA MnS to request analytics from the MDA Management Function (MDAF).\nBefore NWDAF requests analytics from the MDA Management Function, the NWDAF discovers the MDA Management Function via the MnS discovery service producer as defined in clause 5 of TS 28.537 [46].",
      "chunk_type": "definition",
      "cross_references": [
        "ts_28.537_clause_5",
        "ts_28.104_figure_5.1-1",
        "ts_28.104",
        "ts_28.537"
      ]
    },
    {
      "chunk_id": "ts_23.288_6.2.14.2",
      "section_id": "6.2.14.2",
      "section_title": "Procedure for analytics collection from MDAF",
      "content": "Figure 6.2.14.2-1: Procedure for analytics collection from MDAF\nPrecondition: Initially MDAF(s) or MDA MnS producers register their capabilities, i.e. MnS information or MnS profile as described in clause 5 of TS 28.537 [46] to a MnS discovery service producer. The MnS discovery service producer may contain all or partial information related to the capabilities of MDA MnS producer.\n1.\tAn analytics consumer issues a request or subscription of network analytics towards the selected NWDAF as described in clause 6.1.\n2.\tNWDAF discovers the MDA Management Function from the MnS discovery service producer by sending a MnS producer discovery service operation.\nNOTE 1:\tThe service operation can possibly include parameters for MDA MnS discovery, e.g. requested MDA Type, Area of Interest, Network Slice information, etc. The detailed parameters are defined in TS 28.537 [46] and TS 28.622 [41].\n3.\tThe MnS discovery service producer provides the relevant MnS information of the MDA Management Function to the NWDAF.\nNOTE 2:\tMnS information refer to the data describing a MnS producer and their capabilities, which is used by the consumer to discover the producers of specific Management Services and to derive the addresses of the Management Services as defined in TS 28.537 [46] and TS 28.622 [41].\n4.\tIf the MnS information of more than one MDAF is received, NWDAF selects the most suitable MDAF and gets the address of the selected MDAF from the MnS information. Then NWDAF sends analytics request to the MDA Management Function by triggering a MDARequest service operation as defined in clause 9.3.2 of TS 28.104 [45] requesting management data analytics such as Slice Coverage Analysis, Mobility Performance Analysis, Fault Prediction analysis. The analyticScope may contain Area of interest, Network Slice information, NF type etc.\nNOTE 3:\tDefinitions and details of the parameters for MDARequest service operation can be found in TS 28.104 [45].\nNOTE 4:\tThe selection of the most suitable MDAF can be based on MnS information of the MDA MnS, e.g. MDA type as one MDA capability, and the request/subscription received from analytics consumer in step 1. The detailed information and procedure between the NWDAF and the MDAF for MDA MnS selection is defined in TS 28.537 [46], TS 28.622 [41] and TS 28.104 [45].\n5.\tThe MDA Management Function provides the analytics to the NWDAF by triggering an MDAReporting service operation.\n6.\tNWDAF provides the analytics response back to the analytics consumer after processing the analytics provided by the MDA Management Function together with other data receives from NF sources according to the Analytics ID defined in clause 6.\n6.2A\tProcedure for ML Model Provisioning\n6.2A.0\tGeneral\nThis clause presents the procedure for the ML Model provisioning.\nAn NWDAF containing AnLF may be locally configured with (a set of) IDs of NWDAFs containing MTLF and the Analytics ID(s) supported by each NWDAF containing MTLF to retrieve trained ML Models or may use the NWDAF discovery procedure specified in clause 5.2 for discovering NWDAFs containing MTLF. An NWDAF containing MTLF may determine that further training for an existing ML Model is needed when it receives the ML Model subscription or the ML Model request.\nA NWDAF containing MTLF may retrieve trained ML Models from other NWDAF containing MTLF as described in clause 5.3. The NWDAF containing MTLF determines to train a ML Model either based on the request from NWDAF containing AnLF, or based on local configuration. The NWDAF containing MTLF further determines the FL procedure is required but it can not act as an FL server, therefore, the NWDAF containing MTLF should discover an FL server NWDAF as described in clause 5.2 and request the ML Model provisioning from the FL server NWDAF. How to protect the trained ML Model file from being used without authorization e.g. being forwarded by an NWDAF containing MTLF that has retrieved a model from another NWDAF containing MTLF is defined in Annex X, clause X.10 of TS 33.501  [49].\n6.2A.1\tML Model Subscribe/Unsubscribe\nThe procedure in Figure 6.2A.1-1 is used by an NWDAF service consumer, i.e. an NWDAF containing AnLF to subscribe/unsubscribe at another NWDAF, i.e. an NWDAF containing MTLF or an NWDAF containing MTLF to subscribe/unsubscribe at another NWDAF containing MTLF, i.e. an FL server NWDAF, to be notified when ML Model Information related to the ML Model subscription becomes available, using Nnwdaf_MLModelProvision services as defined in clause 7.5. The ML Model Information is used by an NWDAF containing AnLF to derive analytics. The service is also used by an NWDAF to modify existing ML Model Subscription(s). An NWDAF can be at the same time a consumer of this service provided by other NWDAF(s) and a provider of this service to other NWDAF(s).\nFigure 6.2A.1-1: ML Model for analytics subscribe/unsubscribe\n1.\tThe NWDAF service consumer subscribes to, modifies, or cancels subscription for a (set of) trained ML Model(s) associated with a/an (set of) Analytics ID(s) by invoking the Nnwdaf_MLModelProvision_Subscribe / Nnwdaf_MLModelProvision_Unsubscribe service operation. The parameters that can be provided by the NWDAF service consumer are listed in clause 6.2A.2. The service consumer optionally indicates its support for multiple ML Models if available.\nWhen a ML Model subscription is received, the NWDAF containing MTLF may:\n-\tdetermine whether existing trained ML Model(s) can be used for the subscription; or\n-\tdetermine whether triggering further training for the existing trained ML Models is needed for the subscription.\nIf the NWDAF containing MTLF determines that further training is needed, this NWDAF may initiate data collection from NFs, (e.g. AMF/DCCF/ADRF), UE Application (via AF) or OAM as described in clause 6.2, to generate the ML Model.\nIf the service invocation is for a subscription modification or subscription cancelation, the NWDAF service consumer includes an identifier (Subscription Correlation ID) to be modified in the invocation of Nnwdaf_MLModelProvision_Subscribe.\n2.\tIf the NWDAF service consumer subscribes to a (set of) trained ML Model(s) associated to a (set of) Analytics ID(s), the NWDAF containing MTLF notifies the NWDAF service consumer by invoking Nnwdaf_MLModelProvision_Notify service operation with:\n-\tFor each Analytics ID requested by the service consumer, a set of pair(s) of unique ML Model identifier and the associated Information.\nNOTE 1:\tThe structure and format of the ML Model identifier and its uniqueness are up to stage 3.\nNOTE 2:\tParameters defined for Multiple ML Models are for Analytics accuracy enhancement.\nThe content of trained ML Model Information that can be provided by the NWDAF containing MTLF is specified in clause 6.2A.2.\nThe NWDAF containing MTLF also invokes the Nnwdaf_MLModelProvision_Notify service operation to notify an available re-trained ML Model when the NWDAF containing MTLF determines that the previously provided trained ML Model required re-training at step 1.\nWhen step 1 is for a subscription modification (i.e. including Subscription Correlation ID), the NWDAF containing MTLF may provide either a new trained ML Model different to the previously provided one, or a re-trained ML Model by invoking Nnwdaf_MLModelProvision_Notify service operation.\nWhen the content includes ML Model provide indicator, the NWDAF service consumer (i.e. an NWDAF containing AnLF or an NWDAF containing MTLF) may triggers ML Model retrieval procedure in clause 6.2B.7 to retrieve ML Model(s) from ADRF.\n6.2A.2\tContents of ML Model Provisioning\nThe consumers of the ML Model provisioning services as described in clause 7.5 and clause 7.6 may provide the input parameters as listed below:\n-\tA list of Analytics IDs: identifies the analytics for which the ML Model is used.\n-\t[OPTIONAL] Vendor ID: identifies the vendor of NWDAF containing AnLF or NWDAF containing MTLF.\nFor each Analytics ID, the following parameters may be provided:\n-\t[OPTIONAL] Use case context: indicates the context of use of the analytics to select the most relevant t ML Model.\nNOTE 1:\tThe NWDAF containing MTLF can use the parameter \"Use case context\" to select the most relevant ML Model, when several ML Models are available for the requested Analytics ID(s). The values of this parameter are not standardized.\n-\t[OPTIONAL] ML Model Interoperability Information. This is vendor-specific information that conveys, e.g., requested model file format, model execution environment, etc. The encoding, format, and value of ML Model Interoperable Information is not specified since it is vendor specific information, and is agreed between vendors, if necessary for sharing purposes.\n-\t[OPTIONAL] ML Model Filter Information: enables the NWDAF containing MTLF to select which ML Model for the analytics is requested, e.g. S-NSSAI, Area of Interest. Parameter types in the ML Model Filter Information are the same as parameter types in the Analytics Filter Information which are defined in procedures.\n-\t[OPTIONAL] Target of ML Model Reporting: indicates the object(s) for which ML Model is requested, e.g. specific UEs i.e. a list of SUPIs, a group of UEs i.e. a list of Internal-Group-Ids or any UE (i.e. all UEs).\n-\t[OPTIONAL] Requested representative ratio: a minimum percentage of UE(s) in the group whose data is a non-empty set and can be used in the model training when the Target of ML Model Reporting is a group of UEs i.e. a list of Internal-Group-Ids.\n-\t[OPTIONAL] ML Model Target Period: indicates time interval [start, end] for which ML Model for the Analytics is requested. The time interval is expressed with actual start time and actual end time (e.g. via UTC time).\n-\t[OPTIONAL] Inference Input Data information: contains information about various settings that are expected to be used by AnLF during inferences such as:\n-\tthe \"Input Data\" that are expected be used, each of them optionally accompanied by metrics that show the granularity with which this data will be used (i.e., a sampling ratio, the maximum number of input values, and/or a maximum time interval between the samples of this input data).\nNOTE 2:\tThis can be a subset of the possible Input Data specified for a certain analytics type.\n-\tthe data sources that are expected to be used, indicated as a list of NF instance (or NF set) identifiers.\n-\t[OPTIONAL] Number of ML model(s), indicating the maximum number of ML models that the NWDAF containing MTLF could provide to the NWDAF containing AnLF for the Analytics ID.\n-\tML Model Reporting Information with the following parameters:\n-\t(Only for Nnwdaf_MLModelProvision_Subscribe) ML Model Reporting Information Parameters as per Event Reporting Information Parameter defined in Table 4.15.1-1, TS 23.502 [3].\n-\tA Notification Target Address (+ Notification Correlation ID) as defined in clause 4.15.1 of TS 23.502 [3], allowing to correlate notifications received from the NWDAF containing MTLF with this subscription.\n-\t[OPTIONAL] Indication of supporting multiple ML Models.\n-\t[OPTIONAL] Accuracy level(s) of Interest.\nNOTE 3:\tMultiple ML Models Filter Information are composed by Accuracy level(s) of Interest and Number of ML Model(s).\n-\t[OPTIONAL] Time when model is needed: indicates the latest time when the consumer expects to receive the ML Model(s).\n-\t[OPTIONAL] ML Model Monitoring Information:\n-\tdesired ML Model metric.\nNOTE 4:\tIn this Release, only \"ML Model Accuracy\" is defined as ML Model metric.\n-\t[OPTIONAL] (only for Nnwdaf_MLModelProvision_Subscribe service operation) ML Model monitoring reporting mode: such as Accuracy reporting interval or pre-determined status. Depending on the reporting mode, the NWDAF containing MTLF reports the ML Model accuracy to NWDAF containing AnLF either periodically or when the ML Model accuracy is crossing an ML Model Accuracy threshold, i.e. the accuracy either becomes higher or lower than the ML Model Accuracy threshold.\n-\t[OPTIONAL] ML Model Accuracy Threshold: indicating the accuracy threshold of the ML Model requested by the consumer (as a kind of pre-determined status). It also can be used as an indication that the MTLF is triggered to execute the accuracy monitoring operations for the ML Model provisioned to AnLF.\n-\t[OPTIONAL] DataSetTag and ADRF ID if available: indicates the inference data (including input data, prediction and the ground truth data at the time which the prediction refers to) stored in ADRF which can be used by MTLF to retrain or reprovision of the ML Model.\n-\t[OPTIONAL] ML Model identifier: indicates the Model that the data corresponding to the DataSetTag is related to (in the case of subscription modification).\nThe NWDAF containing MTLF provides to the consumer of the ML Model provisioning service operations as described in clause 7.5 and 7.6, the output information as listed below:\n-\t(Only for Nnwdaf_MLModelProvision_Notify) The Notification Correlation Information.\n-\tFor each Analytics ID requested by the service consumer, a set of pair (s) of unique ML Model identifier and the following information.\n-\tML Model Information, which includes:\n-\tthe ML Model file address; or\n-\tADRF (Set) ID.\nWhen ADRF (Set) ID is provisioned and the MTLF authorizes the NF Service Consumer to retrieve all ML Models corresponding to a Storage Transaction ID, a Storage Transaction ID may also be provisioned.\n-\t[OPTIONAL] ML Model provider information, includes the NF Instance Identifer to identify the NWDAF containing MTLF which is the ML Model provider and is responsible for training/updating this ML Model.\nNOTE 5:\tFor example, if one MTLF provides the Model which is generated by FL server NWDAF, the NF Instance Identifier identifies the FL server NWDAF but not the MTLF.\n-\t[OPTIONAL] ML Model Filter Information and/or Target of ML Model Reporting may be also provided. They are provided when the ML Model provisioning request include same Analytics IDs but with different Targets of ML Model Reporting and/or ML Model Filter Information.\n-\t[OPTIONAL] ML Model provide indicator: indicates that the ML Model corresponding to the ML Model identifier is updated (e.g. re-trained ML Model).\n-\t[OPTIONAL] ML Model degradation indicator: indicates whether the provided ML Model is degraded.\n-\t[OPTIONAL] Validity period: indicates time period when the provided ML Model Information applies.\n-\t[OPTIONAL] Spatial validity: indicates Area where the provided ML Model Information applies.\nNOTE 6:\tSpatial validity and Validity period are determined by MTLF internal logic and it is a subset of AoI if provided in ML Model Filter Information and of ML Model Target Period, respectively.\n-\t[OPTIONAL] ML Model representative ratio: indicating the percentage of UE(s) in the group whose data is used in the ML Model training when the Target of ML Model Reporting is a group of UE(s).\n-\t[OPTIONAL] Training Input Data Information: contains information about various settings that have been used by MTLF during training, such as:\n-\tthe \"Input Data\" that have been used, each of them optionally accompanied by metrics that show the data characteristics and granularity with which this data has been used (i.e. a sampling ratio, the maximum number of input values and/or a maximum time interval between the samples of this input data, data range including maximum and minimum values, mean and standard deviation and data distribution when applicable) and the time, i.e. timestamp and duration, when this data was obtained.\n-\tthe data sources related to the \"Input Data\" that were used for ML Model training, which have been identified by a list of NF instance (or NF set) identifiers.\nNOTE 7:\tThis can be a subset of the possible Input Data specified for a certain analytics type.\nNOTE 8:\tData source information enables ML Model selection when different models are available for an Analytics ID, or it enables a consumer to avoid selecting a ML Model that used data from a specific data source at a particular time or used data characterized by specific data characteristics.\n-\t[OPTIONAL] ML Model Accuracy Information: indicates the accuracy of the ML Model if related ML Model Monitoring Information was provided, which includes:\n-\tthe metric value of the ML Model.\n-\t[OPTIONAL] used ML Model metric.\n6.2A.3\tML Model request\nThe procedure in Figure 6.2A.3-1 is used by an NWDAF service consumer, i.e. an NWDAF containing AnLF to request and get from another NWDAF, i.e. an NWDAF containing MTLF ML Model Information, or an NWDAF containing MTLF to request and get from another NWDAF containing MTLF worked as FL server ML Model Information, using Nnwdaf_MLModelInfo services as defined in clause 7.6. The ML Model is used by an NWDAF containing AnLF to derive analytics. An NWDAF can be at the same time a consumer of this service provided by other NWDAF(s) and a provider of this service to other NWDAF(s).\nFigure 6.2A.3-1: ML Model Request\n1.\tThe NWDAF service consumer requests a (set of) ML Model(s) associated with a/an (set of) Analytics ID(s) by invoking Nnwdaf_MLModelInfo_Request service operation. The parameters that can be provided by the NWDAF Service Consumer are listed in clause 6.2A.2. The service consumer optionally indicates its support for multiple ML Models if available.\nWhe an ML Model Information request is received, the NWDAF containing MTLF may:\n-\tdetermine whether existing trained ML Model(s) can be used for the request; or\n-\tdetermine whether triggering further training for the existing trained ML Models is needed for the request.\nIf the NWDAF containing MTLF determines that further training is needed, this NWDAF may initiate data collection from NFs, (e.g. AMF/DCCF/ADRF), UE Application (via AF) or OAM as described in clause 6.2, to generate the ML Model.\n2.\tThe NWDAF containing MTLF responds to the NWDAF service consumer by invoking Nnwdaf_MLModelInfo_Request response service operation including:\n-\ta set of pair(s) of unique ML Model identifier, the ML Model Information for each Analytics ID that the NWDAF service consumer requests.\nThe content of ML Model Information that can be provided by the NWDAF containing MTLF is specified in clause 6.2A.2.\n6.2B\tAnalytics Data and ML Model Repository procedures\n6.2B.1\tGeneral\nCollected data and analytics may be stored in ADRF, using procedure as specified in clause 6.2B.2 and clause 6.2B.3. Collected data and analytics may be deleted from ADRF, using procedure as specified in clause 6.2B.4.\nML Model may be stored in ADRF, using procedure as specified in clause 6.2B.5. ML Model may be deleted from ADRF, using procedure as specified in clause 6.2B.6. ML Model(s) may be retrieved from ADRF, using procedure as specified in clause 6.2B.7.\n6.2B.2\tHistorical Data and Analytics storage\nThe procedure depicted in figure 6.2B.2-1 is used by consumers (e.g. NWDAF, DCCF or MFAF) to store historical data and/or analytics, i.e. data and/or analytics related to past time period that has been obtained by the consumer. After the consumer obtains data and/or analytics, consumer may store historical data and/or analytics in an ADRF. Whether the consumer directly contacts the ADRF or goes via the DCCF or via the Messaging Framework is based on configuration.\nThe consumer may include in the storage request the DataSetTag attribute which the data records are to be associated to when stored by ADRF. The DataSetTag attribute is defined in Table 6.2B-1. Data records can be associated to multiple DataSetTag attributes.\nTable 6.2B-1: DataSetTag attribute\nInformation\nDescription\nDataSetTag\nIdentifies the data set.\nDataSetDescription\nProvides human-readable information about the characteristics of the data set.\nThe consumer may include in the storage request the Data Synthesis and Compression (DSC) information. The detail of DSC information is up to implementation, which is out of 3GPP scope.\nNOTE:\tDSC information can include the following information:\n-\tindication that the data have been generated using a data synthesis tool;\n-\tindication that the data have been generated using a data compression tool;\n-\tthe information about the data synthesis and/or compression technique.\nFigure 6.2B.2-1: Historical Data and Analytics storage\n0a-c.\tNWDAF, DCCF or ADRF are configured with default operator storage policies as described in clause 5B.1.\n1.\tThe consumer sends data and/or analytics to the ADRF by invoking the Nadrf_DataManagement_StorageRequest (collected data with timestamp, analytics with timestamp, Service Operation, Analytics Specification or Data Specification, Storage Handling information, optionally DataSetTag, optionally DSC information) service operation. The NWDAF or DCCF may provide notification endpoint information to the ADRF for use by the ADRF to send notifications (implicit subscription) alerting the DCCF or NWDAF that data are about to be deleted (see step 6).\n2a-c.\tBased on Storage Handling information (if available) and Storage Policy, the ADRF, DCCF or NWDAF determines the Storage Approach (lifetime for storing data and whether consumer is notified prior to data deletion).\n3.\tThe ADRF stores the data and/or analytics sent by the consumer. The ADRF may, based on implementation, determine whether the same data and/or analytics is already stored or being stored based on the information sent in step 1 by the consumer NF and, if the data and/or analytics is already stored or being stored in the ADRF, the ADRF decides to not store again the data and/or analytics sent by the consumer. If the DataSetTag attribute is included for data and/or analytics already stored or being stored, then ADRF associates the data records with such DataSetTag.\n4.\tThe ADRF sends Nadrf_DataManagement_StorageRequest Response message to the consumer indicating that data and/or analytics is stored, whether the ADRF determined at step 3 that data or analytics is already stored and the Storage Approach.\nConditional on ADRF Managing the Storage Approach\n5.\tThe ADRF determines that the lifetime of the stored data or analytics has expired (according to the Storage Approach).\n6.\tIf indicated by the Storage Approach, the ADRF sends a notification alerting the DCCF or NWDAF that data are about to be deleted.\nNOTE:\tThis is an implicit subscription.\n7.\tThe DCCF or NWDAF indicate in the response to the ADRF whether they will retrieve the Data or Analytics.\n8.\tThe DCCF or NWDAF may retrieve the Data or Analytics from the ADRF as described in clause 5B.1.\nConditional on the DCCF or NWDAF Managing the Storage Approach\n9\tThe NWDAF or DCCF determine that the lifetime of the stored data or analytics has expired (according to the Storage Approach).\n10. The NWDAF or DCCF optionally retrieve the data or analytics from the ADRF as described in clause 5B.1.\n11.\tThe NWDAF or DCCF request that the data or analytics be deleted from the ADRF.\n12.\tThe ADRF deletes the data or analytics if:\n-\tthe Storage Approach in the ADRF indicates alerting the consumer is not required prior to data or analytics deletion;\n-\tin step 7 the DCCF or NWDAF indicated data or analytics will not be retrieved prior to deletion;\n-\tdata or analytics retrieval in step 8 has completed; or\n-\tA request to delete data or analytics was received in step 11.\nIf the ADRF received a response from the NWDAF or DCCF in step 7 indicating data or analytics will be retrieved but retrieval is not initiated before an adequate fixed time has elapsed, the ADRF may autonomously delete the data or analytics.\n6.2B.3\tHistorical Data and Analytics Storage via Notifications\nThe procedure depicted in figure 6.2B.3-1 is used by consumers (NWDAF, DCCF) to store received notifications in the ADRF. The consumer requests the ADRF to initiate a subscription for data and/or analytics. Data and/or analytics provided in notifications as a result of the subsequent subscription by the ADRF are stored in the ADRF.\nThe consumer may include in the subscription request the DataSetTag attribute defined in Table 6.2B-1.\nFigure 6.2B.3-1: Historical Data and Analytics Storage via Notifications\n0a-c\tNWDAF, DCCF or ADRF are configured with default operator storage policies as described in clause 5B.1.\n1a-d.\tBased on provisioning or based on reception of a DataManagement subscription request (e.g. see clause 6.2.6.3.2), the DCCF or the NWDAF determines that notifications are to be stored in an ADRF. The subscription request may contain Storage Handling information with a requested ADRF storage lifetime and a request to be notified before data are deleted from the ADRF.\n2a-b.\tThe DCCF or the NWDAF determines the ADRF where data and/or analytics needs to be stored and requests that the ADRF subscribes to receive notifications. The determination may be made based on configuration or information supplied by the data consumer as described in clauses 6.1.4 and 6.2.6.3. The request to the ADRF specifies the data and/or analytics to which the ADRF will subscribe by invoking the Nadrf_DataManagement_StorageSubscriptionRequest service operation. The request may include the DataSetTag attribute which the data records are to be associated to when stored by ADRF. If the Storage Policy is not configured on the NWDAF or DCCF, the NWDAF or DCCF sends the Storage Handling Request to the ADRF. The NWDAF or DCCF may provide notification endpoint information to the ADRF for use by the ADRF to send notifications (implicit subscription) alerting the DCCF or NWDAF that data are about to be deleted (see step 12).\n3.\t[Optional] The ADRF may, based on implementation, determine whether the same data and/or analytics is already stored or being stored, based on the information sent in step 2 by the consumer. If the DataSetTag attribute is included for data and/or analytics already stored or being stored, then ADRF associates the data records with such DataSetTag.\n3a-c.\t[Optional] Based on Storage Handling information and Storage Policy, the ADRF, DCCF or NWDAF determines the Storage Approach (lifetime for storing data and whether consumer is notified prior to data deletion).\n4a-b.\t[Optional] If the data and/or analytics is already stored and/or being stored in the ADRF, the ADRF sends Nadrf_DataManagement_StorageSubscriptionRequest Response message to the consumer indicating that data and/or analytics is stored. The ADRF includes the Storage Approach if determined in step 3c.\n5a-b.\tThe DCCF or NWDAF sends a subscription response to the Data or Analytics Consumer. The response may contain the Storage Approach determined by the ADRF, NWDAF or DCCF.\n6a-b.\tADRF subscribes to the DCCF or the NWDAF to receive notifications, providing its notification endpoint address and a notification correlation ID. In step 6b, the ADRF uses Nnwdaf_DataManagement_Subscribe (as depicted in Figure 6.2B.3-1) to obtain data from the NWDAF or Nnwdaf_AnalyticsSubscription_Subscribe to obtain analytics from the NWDAF (not depicted).\n7.\tThe DCCF, the MFAF or the NWDAF sends Analytics or Data notifications containing the notification correlation ID provided by the ADRF to ADRF notification endpoint address. The Analytics or Data notifications shall contain timestamp. The ADRF stores the notifications.\nConditional on DCCF or NWDAF determining to stop storing data or analytics\n8a-b.\tThe DCCF or the NWDAF determines to stop storing notifications in the ADRF.\n9a-b.\tThe DCCF or the NWDAF requests that the ADRF unsubscribes to receive notifications.\n10a-b.\tThe ADRF sends a request to the DCCF or the NWDAF to unsubscribe to data notifications.\nThe NWDAF may interact with the Data Source and the DCCF may interact with the Data Source and/or MFAF. Delivery of notifications from the DCCF/MFAF or NWDAF to the ADRF are subsequently halted. If Nnwdaf_AnalyticsSubscription_Subscribe was used in step 6b, then the Nnwdaf_AnalyticsSubscription_Unsubscribe is used in step 10b.\nConditional on ADRF Managing the Storage Approach\n11.\tThe ADRF determines that the lifetime of the stored data or analytics has expired (according to the Storage Approach).\n12.\tIf indicated by the Storage Approach, the ADRF sends a notification alerting the DCCF or NWDAF that data are about to be deleted.\nNOTE:\tThis is an implicit subscription.\nConditional if the Storage Approach is based on Default Operator Policies provisioned on the NWDAF or DCCF (see step 3a-c and clause 5B.1)\n13.\tThe DCCF or NWDAF indicate in the response to the ADRF whether they will retrieve the Data or Analytics.\n14.\tThe DCCF or NWDAF may retrieve the Data or Analytics from the ADRF as described in clause 5B.1.\nConditional if the Storage Approach is based on a Storage Handling Request received from the Data or Analytics Consumer (see step 3a-c and clause 5B.1)\n15a-b. The NWDAF or DCCF sends a notification to the Data or Analytics Consumer alerting it that the data or analytics are about to be deleted.\n16a-b. The Data or Analytics Consumer indicates in the response to the NWDAF or DCCF whether it will retrieve the Data or Analytics.\n17. The DCCF or NWDAF indicate in the response to the ADRF whether the consumer will retrieve the Data or Analytics.\n18.\tThe Data or Analytics Consumer retrieves the stored data or analytics as described in clause 5B.1.\nConditional on DCCF or NWDAF Managing the Storage Approach\n19a-b.\tThe NWDAF or DCCF determines that the lifetime of the stored data has expired (according to the Storage Approach).\nConditional if the Storage Approach is based on Default Operator Policies provisioned on the NWDAF or DCCF (see step 3a-c and clause 5B.1)\n20.\tThe NWDAF or DCCF optionally retrieve the data or analytics from the ADRF as described in clause 5B.1.\n21.\tThe NWDAF or DCCF request that the data or analytics be deleted from the ADRF.\nConditional if the Storage Approach is based on a Storage Handling Request received from the Data or Analytics Consumer (see step 3a-c and clause 5B.1)\n22a-b.\tThe NWDAF or DCCF sends a notification to the Data or Analytics Consumer alerting it that the data or analytics are about to be deleted.\n23a-b.\tThe Data or Analytics Consumer indicates in the response to the NWDAF or DCCF whether it will retrieve the Data or Analytics.\n24.\tThe Data or Analytics Consumer retrieves the stored data or analytics as described in clause 5B.1.\n25.\tThe NWDAF or DCCF request that the data or analytics be deleted from the ADRF.\n26.\tThe ADRF deletes the data or analytics if:\n-\tthe Storage Approach in the ADRF indicates alerting the consumer is not required prior to data or analytics deletion;\n-\tin Steps 13 or 17 the DCCF or NWDAF indicated data or analytics will not be retrieved prior to deletion;\n-\tdata or analytics retrieval in steps 14 or 18 has completed; or\n-\tA request to delete data or analytics was received in steps 21 or 25.\nIf the ADRF received a response from the NWDAF or DCCF in steps 14 or 17 indicating data or analytics will be retrieved but retrieval is not initiated before an adequate fixed time has elapsed, the ADRF may autonomously delete the data or analytics.\n6.2B.4\tData removal from an ADRF\nThe procedure depicted in figure 6.2B.4-1 is used by consumers (DCCF, NWDAF) to remove data previously stored in an ADRF.\nFigure 6.2B.4-1: Data Removal from an ADRF\n1.\tA consumer requests that specified data be deleted from the ADRF using Nadrf_DataManagement_Delete request service operations. The request may include the DataSetTag attribute which the stored data records are associated to.\n2.\tThe ADRF deletes all copies of the stored data.\n3.\tThe ADRF indicates the result (i.e. data deleted, data not found, data found but not deleted) using Nadrf_DataManagement_Delete response service operations.\nNOTE:\tAs described in clauses 6.2B.2 and 6.2B.3, data or analytics may be removed from an ADRF when a storage lifetime expires. The NWDAF, DCCF or ADRF can provide an alert to the consumer and the consumer may retrieve data or analytics prior to deletion by the ADRF.\n6.2B.5\tML Model Storage in ADRF\nThe procedure depicted in figure 6.2B.5-1 is used by NWDAF containing MTLF to store or update ML Model(s) in an ADRF.\nFigure 6.2B.5-1: ML Model Storage in ADRF\n0.\tNWDAF containing MTLF determines to store or update ML Model(s) in ADRF based on MTLF policy.\n1.\tNWDAF containing MTLF requests to store or update a (set of) ML Model(s) to the ADRF by invoking Nadrf_MLModelManagement_StorageRequest service, optionally including allowed NF instance list for the ML Model identifier as described in TS 33.501 [49].\n2.\tThe ADRF locally maintains the association between the ML Model identifier and the NF instance ID of NWDAF containing MTLF and allowed NF instance list (if there is any in step 1).\n[Optional] If instead of the ML Model(s), the ML Model address(es) is/are included in request, ADRF downloads the ML Model(s) based on the ML Model address(es) and locally stores the ML Model(s).\n3.\tThe ADRF sends Nadrf_MLModelManagement_StorageRequest Response message to the consumer including the ML Model storage or ML Model Update result indication.\n6.2B.6\tML Model removal from ADRF\nThe procedure depicted in figure 6.2B.6-1 is used by NWDAF containing MTLF to delete ML Model from an ADRF.\nFigure 6.2B.6-1: ML Model removal from ADRF\n1.\tNWDAF containing MTLF requests to delete the ML Model(s) previously stored in the ADRF using Nadrf_MLModelManagement_Delete request service operation.\n2.\tThe ADRF deletes both the stored ML Model(s) and related ML Model information.\n3.\tThe ADRF indicates the result (i.e. ML Model deleted, ML Model not found, ML Model found but not deleted) using Nadrf_MLModelManagement_Delete response service operation.\n6.2B.7\tML Model retrieval from ADRF\nThe procedure depicted in Figure 6.2B.7-1 is used by consumers (NWDAF containing MTLF and NWDAF containing AnLF) to retrieve ML Models from an ADRF.\nFigure 6.2B.7-1: Procedure for ML Model(s) retrieval from ADRF\n1.\tThe NWDAF service consumer (NWDAF containing AnLF or NWDAF containing MTLF) subscribes/requests for a (set of) trained ML Model(s) associated with a/an (set of) Analytics ID(s) by invoking the Nnwdaf_MLModelProvision_Subscribe / Nnwdaf_MLModelInfo_Request service.\n2.\tThe NWDAF containing MTLF determines whether the set of ML Model(s) associated with a/an (set of) Analytics ID(s) should be retrieved from the ADRF.\nWhen NWDAF containing MTLF authorizes the NF consumer to retrieve the ML Model(s) stored in the ADRF directly, steps 3 and 4 is skipped.\nIf NWDAF containing MTLF determines that the set of ML Model(s) corresponding Analytics ID(s) requested in step 1 needs to be retrieved from ADRF and the NF consumer is agnostic to where the ML Model(s) is stored, then Steps 3 and 4 is performed.\nNOTE:\tHow NWDAF containing MTLF and ADRF authorizes the NF Consumer is specified in clause X.10 of TS 33.501 [49].\n3.\tThe ADRF service consumer (NWDAF containing MTLF) requests for the ML Model stored in ADRF by invoking the Nadrf_MLModelManagement_RetrievalRequest Request (Storage Transaction Identifier or one or more unique ML Model identifier(s)) service operation.\n4.\tThe ADRF verifies the service consumer (NWDAF containing MTLF) as described in Annex X.10 of TS 33.501 [49]. If verification is successful, the ADRF sends Nadrf_MLModelManagement_RetrievalRequest Response (ML Model file address of Model file(s) stored in ADRF) service operation.\n5.\tThe NWDAF containing MTLF notifies/ response to the NWDAF service consumer with the tuple Analytics ID, one or more tuples of unique ML Model identifier and ML Model Information. The ML Model information may contain the ML Model file address or ADRF (Set) ID. The ADRF(Set) ID is included only when the NWDAF containing MTLF authorizes the NF consumer to retrieve the ML Model(s) stored in the ADRF in step 2. When ADRF (Set) ID is provided and the NWDAF containing MTLF authorizes the NF Service Consumer to retrieve all ML Models corresponding to a Storage Transaction ID, the Storage Transaction ID may be provided. In other cases, the NWDAF containing MTLF only provides ML Model identifier(s).\n6.\tIf in step 5, the NWDAF service consumer which is also the service consumer of ADRF in this step 6 and step 7 (NWDAF containing AnLF or NWDAF containing MTLF) received ADRF (Set) ID (where the ML Model(s) requested in step 1 is stored) and/or the ML Model provide indicator, then the service consumer may invoke the Nadrf_MLModelManagement_RetrievalRequest (Storage Transaction Identifier or one or more unique ML Model identifier(s)) service operation to get the ML Model stored in ADRF.\n7.\tThe ADRF verifies the service consumer as described in Annex X.10 of TS 33.501 [49]. If verification is successful, the ADRF sends Nadrf_MLModelManagement_RetrievalRequest Response (ML Model identifier(s) and address(es) of Model file(s) stored in ADRF) to the NWDAF (ADRF) service consumer.\n6.2C\tFederated Learning among Multiple NWDAFs\n6.2C.1\tGeneral\nThis clause specifies how NWDAF containing MTLF can leverage Federated Learning technique to train an ML Model.\n6.2C.2\tProcedures\n6.2C.2.1\tRegistration and Discovery procedure for Federated Learning\nFigure 6.2C.2.1-1: Registration and Discovery procedure for Federated Learning\nSteps 1 to 3 are the NWDAF registration procedure.\n1-3.\tNWDAF containing MTLF as FL Server NWDAF or FL Client NWDAF registers to NRF with its NF profile, which includes NWDAF NF Type (see clause 5.2.7.2.2 of TS 23.502 [3]), Analytics ID(s), Address information of NWDAF, Service Area, FL capability type information (i.e. FL server and/or FL client) and Time interval supporting FL as described in clause 5.2.\nSteps 4 to 6 are the NWDAF Discovery procedure.\n4-6.\tNWDAF containing MTLF determines ML Model requires FL based on operator policy (e.g. pre-configured list of ML Models), Analytic ID, Service Area/DNAI or data can not be obtained directly from data producer NF (e.g. due to privacy reasons).\nIf the NWDAF containing MTLF can not perform as FL Server NWDAF, the MTLF first discovers and selects FL Server NWDAF from NRF by invoking the Nnrf_NFDiscovery_Request service operation. The following criteria might be used: Analytic ID of the ML Model required, Model filter information as defined in clause 6.2A.2, FL capability Type (i.e. FL server), Time Period of Interest, Service Area.\nOnce the FL Server NWDAF (the requested or the selected one) is determined, the FL Server NWDAF discovers and selects other NWDAF(s) containing MTLF as FL Client NWDAF(s) from NRF by invoking the Nnrf_NFDiscovery_Request service operation. The following criteria might be used: Analytic ID of the ML Model required, FL capability Type (i.e. FL client), Service Area, NF type(s) of data sources from which the FL Client NWDAF is able to collect data for local ML Model training, Time Period of Interest, ML Model Interoperability Indicator.\n7.\tFL Server NWDAF sends Federated Learning preparation request to the FL Client NWDAF(s), using Nnwdaf_MLModelTraining_Subscribe or Nnwdaf_MLModelTrainingInfo_Request service with the ML Preparation Flag, to check if the FL Client NWDAF(s) can meet the ML Model training requirement (e.g. Analytics ID, ML Model Interoperability information, Data Availability requirement, FL Availability time requirement (time span needed for the FL process), etc.). Data Availability requirement includes a list of Event IDs of the local data for training, and may also include the dataset statistical properties, the time window of the data samples and the minimum number of data samples.\nNOTE:\tFederated Learning preparation procedure (i.e. steps 7-9) can be skipped if the FL Server NWDAF can decide that the FL Client NWDAF(s) supports the FL procedure to be performed, e.g. based on information acquired from previous FL procedures or from the NRF, or based on local configuration.\n8.\tFL Client NWDAF(s) checks if it can meet the ML Model training requirement and/or can successfully download the model if the model information is provided in the request and decides whether to join the Federated Learning process based on operator policy (e.g. pre-configured list of ML Models) and/or implementation. Example criteria used by FL Client NWDAF(s) may be based on its data availability and time availability, computation and communication capability and ML Model Interoperability information.\n9.\tFL Client NWDAF(s) invokes Nnwdaf_MLModelTraining_Notify or Nnwdaf_MLModelTraining_Subscribe response or Nnwdaf_MLModelTrainingInfo_Request response service operation to indicate to the FL Server NWDAF whether it will join the FL procedure and may include the reason in the response message if it cannot join the FL process.\n10.\tFL Server NWDAF determines the FL Client NWDAFs to be involved in the FL procedures based on the information received in step 6 and other information received in step 9 (if available).\n6.2C.2.2\tGeneral procedure for Federated Learning among Multiple NWDAF Instances\nFigure 6.2C.2.2-1: General procedure for Federated Learning among Multiple NWDAF\n0.\tThe consumer (NWDAF containing AnLF or NWDAF containing MTLF) sends a subscription request to FL server NWDAF to retrieve an ML Model, using Nnwdaf_MLModelProvision including Analytics ID, ML Model Monitoring information as defined in clause 7.5.2, desired ML Model metric (e.g. ML Model Accuracy).\nNOTE 1:\tThe ML Model Accuracy threshold can be used to indicate the target ML Model Accuracy of the training process and the FL server NWDAF may stop the training process when the ML Model Accuracy threshold is achieved during the training process.\nIf the consumer (i.e. the NWDAF containing AnLF or NWDAF containing MTLF) provides the Time when the ML Model is needed, the FL Server NWDAF can take this information into account to decide the maximum response time for its FL Client NWDAF(s).\n1.\tFL Server NWDAF selects NWDAF(s) containing MTLF (FL Client NWDAF(s)) as described in clause 6.2C.2.1.\n2.\tFL Server NWDAF sends a Nnwdaf_MLModelTraining_Subscribe or Nnwdaf_MLModelTrainingInfo_Request to the selected NWDAF(s) containing MTLF (FL Client NWDAF(s)), which participate in the Federated learning to perform the local model training and determine the interim local ML Model information based on the input parameter in the request from FL Server NWDAF. The request includes the desired ML Model metric and initial ML Model and also includes the maximum response time, the FL Client NWDAF has to report the interim local ML Model information to the FL Server NWDAF before the maximum response time elapses.\n3.\t[Optional] Each FL Client NWDAF collects its local data by using the current mechanism in clause 6.2 if the Client NWDAF has not local data available already.\n4.\tDuring Federated Learning training procedure, each FL Client NWDAF further trains the ML Model provided by the FL Server NWDAF based on its local data and reports the interim local ML Model information to the FL Server NWDAF in Nnwdaf_MLModelTraining_Notify or Nnwdaf_MLModelTrainingInfo_Request response. The Nnwdaf_MLModelTraining_Notify or Nnwdaf_MLModelTrainingInfo_Request response may also include the Status report of FL training that includes local ML Model metric value (and optionally the used metric) computed by the FL Client NWDAF and Training Input Data Information (e.g. areas covered by the data set, sampling ratio, maximum/minimum of value of each dimension of data, etc.) in the FL Client NWDAF. The Nnwdaf_MLModelTraining_Notify or Nnwdaf_MLModelTrainingInfo_Response also includes the global ML Model metric (value (and optionally the used metric) when the ML Model Accuracy Check Flag was included in the Nnwdaf_MLModelTraining_Subscribe or Nnwdaf_MLModelTrainingInfo_Request (as described in step 7), the global ML Model metric value is calculated by the FL Client NWDAF using the local training data as the testing dataset.\nNOTE 2:\tThe parameters in characteristics of local training dataset are up to the implementation.\nThe local ML Model, which is sent from the FL Client NWDAF(s) to the FL Server NWDAF during the FL training process, is the information needed by the FL Server NWDAF to build the aggregated model.\nIf the FL Client NWDAF is not able to complete the training of the interim local ML Model within the maximum response time provided by the FL Server NWDAF, the FL Client NWDAF shall send the Delay Event Notification that include the delay event indication, an optional cause code (e.g. local ML Model training failure, more time necessary for local ML Model training) and the expected time to complete the training if available to the FL Server NWDAF before the maximum response time elapses.\n4a.\t[Optional]If FL Server NWDAF receives notification/response that the FL Client NWDAF is not able to complete the training within the maximum response time, the FL Server NWDAF may send to the FL Client NWDAF a new maximum response time in Nnwdaf_MLModelTraining_Subscribe or Nnwdaf_MLModelTrainingInfo_Request, before which the FL Client NWDAF has to report the interim local ML Model information to the FL Server NWDAF. Otherwise, the FL Server NWDAF may indicate FL Client NWDAF to skip reporting for this iteration. FL Server NWDAF includes the current iteration round ID in the message to indicate that the request is to modify the training parameters of the current iteration round.\nAlternatively, the FL Server NWDAF may inform the FL Client NWDAF to cease the ML Model training by sending termination request and to report back the current local ML Model updates.\n5.\tThe FL Server NWDAF aggregates all the local ML Model information retrieved at step 4, to update the global ML Model. The FL Server NWDAF may also compute the global ML Model metric value, e.g. based on the local ML Model metric value(s) provided by the FL Client NWDAF(s) or by applying the global model on the validation dataset (if available). The FL Server NWDAF may update the global ML Model each time a FL Client NWDAF provides updated local ML Model information, or the FL Server NWDAF may decide to wait for local ML Model information from all FL Client NWDAFs before updating the global ML Model.\nIf the FL Server NWDAF provides the maximum response time for the FL Client NWDAF(s) to provide the interim local ML Model information in step 2, or the new maximum response time in step 4a, the FL Server NWDAF decides either to wait for the FL Client NWDAF(s) which have not yet provided their interim local ML Model within the new maximum response time or to aggregate only the retrieved local ML Model information instances to update global ML Model. The FL Server NWDAF makes this decision, considering the notification/response from the FL Client NWDAF or, if the notification is not received, based on local configuration.\n6a.\t[Optional] Based on the consumer request in step 0, the FL Server NWDAF sends a Nnwdaf_MLModelProvision_Notify message to update the global ML Model metric value to the consumer periodically (e.g. a certain number of training rounds or every 10 min) or dynamically when some pre-determined status is achieved (e.g. the ML Model Accuracy threshold is achieved or training time expires).\n6b.\t[Optional] The consumer decides whether the current model can fulfil the requirement, e.g. global ML Model metric value is satisfactory for the consumer and determines to stop or continue the training process. The consumer re-invokes Nnwdaf_MLModelProvision_Subscribe service operation as used in step 0 to continue the training process or invokes Nnwdaf_MLModelProvision_Unsubscribe service operation to stop the training process.\n6c.\t[Optional] Based on the subscription request sent from the consumer in step 6b, the FL Server NWDAF updates or terminates the current FL training process.\nIf the FL Server NWDAF received a request in step 6b to stop the Federated Training process, steps 7 and 8 are skipped.\n7.\tIf the FL procedure continues, FL Server NWDAF may determine FL Client NWDAF as described in clause 6.2C.2.3 and sends Nnwdaf_MLModelTraining_Subscribe or Nnwdaf_MLModelTrainingInfo_Request that includes the aggregated ML Model information to selected FL Client NWDAF(s) for next round of Federated Training. The request may also include the ML Model Accuracy Check Flag, that indicates the FL Client NWDAF(s) to use the local training data as the testing dataset to calculate the Model Accuracy of the global ML Model provided by the FL Server NWDAF.\n8.\tEach FL Client NWDAF updates its own ML Model based on the aggregated ML Model information distributed by the FL Server NWDAF at step 7.\nNOTE 3:\tThe steps 3-8 should be repeated until the training termination condition (e.g. maximum number of iterations, or the result of loss function is lower than a threshold) is reached.\nWhen the Federated Training procedure is complete, the FL Server NWDAF requests the FL client NWDAF(s) to terminate the FL procedure by invoking Nnwdaf_MLModelTraining_Unsubscribe service with a cause code that the FL process has finished and optionally with the final aggregated ML Model information. Then the FL client NWDAF(s) terminate the local model training and if the final aggregated ML Model information is received from the FL server NWDAF, the FL client NWDAF(s) can store it for further use.\n9.\tAfter the training process is complete, the FL Server NWDAF may send Nnwdaf_MLModelProvision_Notify that includes the globally optimal ML Model information to the consumer.\n6.2C.2.3\tProcedures for Maintaining Federated Learning Processes\nThis clause specifies how to maintain a Federation Learning process in FL execution phase, including FL Server NWDAF triggers reselection, addition, or removal of FL Client NWDAF(s), discovers new FL Client NWDAF(s) via NRF and FL Client NWDAF(s) joins or leaves Federated Learning process dynamically.\nIn Federated Learning execution phase, FL Server NWDAF monitors the status changes of FL Client NWDAF(s) and may reselects FL Client NWDAF(s) based on the updated status, availability and/or capability, etc.\nNOTE 1:\tFL Server NWDAF checks if there is a need to carry on the FL execution phase and then reselects FL members for the next iteration if needed.\nFigure 6.2C.2.3-1: Procedure of FL Server NWDAF reselects FL Client NWDAF(s), FL Client NWDAF(s) Join or Leave Federated Learning Process Dynamically in Federated Learning execution phase\nThe procedure for FL Server NWDAF reselecting FL Client NWDAF(s), FL Client NWDAF(s) joining or leaving Federated Learning process dynamically is as follows:\n1a.\tFL Server NWDAF may get the updated status of current FL Client NWDAF(s) via NRF by using Nnrf_NFManagement service (as in clause 5.2.7.2 of TS 23.502 [3]) in the Federated Learning execution phase.\nFL Server NWDAF may subscribe to NRF for notifications of status changes of the current NWDAF(s) (FL Client NWDAFs 1…N) by invoking an Nnrf_NFManagement_NFStatusSubscribe service operation. NRF notifies the FL Server NWDAF the status changes of the current FL Client NWDAF(s) by invoking Nnrf_NFManagement_NFStatusNotify service operation(s).\nThe status of a current FL Client NWDAF could be availability changes, capability changes (e.g. it will not support FL anymore, etc.).\n1b.\tThe current FL Client NWDAF(s) may inform FL Server NWDAF that it is leaving the Federated Learning process by invoking Nnwdaf_MLModelTraining_Notify service operation with Termination Request and cause code (reason for leaving, e.g. high NF load, time availability changes).\n1c.\tFL Server NWDAF may get the information of the new FL Client NWDAF(s) dynamically via NRF by subscribing to the event that a new FL Client NWDAF registers (Nnrf_NFManagement_NFStatusSubscribe service as in clause 5.2.7.2 of TS 23.502 [3]).\n1d.\tNWDAF may subscribe for NF load analytics of the FL Client NWDAF(s).\n1e.\tFL Client NWDAF(s) may send Status report of FL training and Global ML Model Accuracy Information by invoking Nnwdaf_MLModelTraining_Notify service.\n2.\tFL Server NWDAF checks FL Client NWDAF(s) status based on the received information and may determine whether reselection of FL Client NWDAF(s) for the next round(s) of Federated Learning is needed based on the received information from step 1.\nNOTE 2:\tSeveral examples of the factors that the FL Server NWDAF can consider to reselect the FL Client NWDAF(s) are updated status of FL Client NWDAF reported by NRF is different than the criteria were initially used for selecting the client; characteristics of local training dataset is different than global validation dataset owned by FL Server NWDAF and/or the metric value of the global model calculated using the local training dataset is much different from that calculated by other FL Client NWDAFs; the metric value of the global model calculated using the local training dataset is lower than the metric value calculated using the global validation dataset owned by FL Server NWDAF; the metric value of the global model calculated using the local training dataset is lower than ML Model metric value received in Nnwdaf_MLModelMonitor_Notify when FL Server NWDAF using AnLF-assisted MTLF ML Models Accuracy Monitoring; the load of the FL Client NWDAF (from the NF load Analytics or from the FL Client NWDAF directly) is high; the FL Server NWDAF receives leave request from the FL Client NWDAF; the FL Client NWDAF did not report the status of FL Training within the maximum response time.\n3.\t[If re-selection is needed as judged in step 2] If step 1c is not performed, FL Server NWDAF may discover new candidate FL Client NWDAF(s) via NRF by using Nnrf_NFDiscovery services as in clause 5.2.7.3 of TS 23.502 [3]. FL Server NWDAF reselects FL Client NWDAF(s) from the current FL Client NWDAF(s) and the new candidate FL Client NWDAF(s) (found in steps 1c or 3). For the new candidate FL Client NWDAF(s), the interaction between FL Server NWDAF and FL Client NWDAF(s) is same as the selection procedure described in clause 6.2C.2.1. The adding / deleting FL Client NWDAF(s) may happen at the end of each iteration.\n4.\tFL Server NWDAF sends termination request by invoking Nnwdaf_MLModelTraining_Unsubscribe service operation or Nnwdaf_MLModelTrainingInfo_Request service operation with Termination Request to the FL Client NWDAF(s), optionally indicating the reason, e.g. FL Client NWDAF is unselected by the FL Server NWDAF for the FL process, or the FL process is suspended, etc. And FL server may also send the updated global ML Model information to the unselected FL client NWDAF. FL Client NWDAF(s) terminates operations for the Federated Learning process if receive termination request from the FL Server NWDAF and may perform further action to be qualified in participation of FL training in the next cycles.\nNOTE 3:\tIn the case of high load, the FL Client NWDAF can e.g. decline new service request. In the case of low accuracy, the FL Client NWDAF can gather new local training data.\n6.2D\tAnLF Analytics Accuracy Monitoring Procedures\n6.2D.1\tGeneral\nThe Analytics Accuracy Information comprises a set of parameters as defined in clause 6.1.3.\nWhen multiple NWDAFs are deployed, some NWDAFs may be specialized with the analytics accuracy checking capability. When an NWDAF containing AnLF has the analytics accuracy checking capability, such an NWDAF is able to:\n-\tReceive a subscription or a request for analytics IDs via Nnwdaf_AnalyticsSubscription_Subscribe or Nnwdaf_AnalyticsInfo_Request service operation with the indication for activating the mechanisms for checking the accuracy of such analytics ID as defined in clause 6.1.3.\n-\tProvide the accuracy information to the consumer via Nnwdaf_AnalyticsSubscription_Notify or Nnwdaf_AnalyticsInfo_Request response service operation.\nNOTE 1:\tIn this version of the specification, NWDAF containing AnLF can provide accuracy information to an NF consumer that subscribes or requests for the analytics.\nNOTE 2:\tWhen receiving a subscription from an NF consumer that includes a request for accuracy information, the analytics output and the accuracy information can be provided by NWDAF containing AnLF in a single notification or via separate notifications.\nNOTE 3:\tWhen receiving a request from an NF consumer that includes a request for accuracy information, the analytics and the accuracy information can be provided by NWDAF containing AnLF within the single response.\nNOTE 4:\tIn this version of the specification, the subscription or request for accuracy information independently from requesting an analytics output is not supported.\nBased on the triggers described in clause 5C.1, NWDAF containing AnLF starts the accuracy monitoring and generation of Analytics Accuracy Information for an Analytics ID.\nThe Analytics Accuracy Information may be requested per Analytics ID and scoped using the same parameters as those defined in the Target of Analytics Reporting as defined in clause 6.1.3 and Analytics Filter Information (e.g. for a specific area, specific slice) of the requested Analytics ID.\nWhen the analytics accuracy checking is activated in an NWDAF containing the AnLF, the NWDAF may store for a period of time the necessary information to determine the analytics accuracy and provide the accuracy information to consumers when requested or use it for its internal processes.\nNWDAF containing AnLF generates the accuracy information as described in clause 5C.1.\n6.2D.2\tProcedures for Analytics Accuracy Information Subscription\nThis procedure is used by NF consumers of analytics ID to subscribe to receive analytics output and Analytics Accuracy Information related to the requested analytics ID for NF consumer. Figure 6.2D.2-1 shows the procedure for accuracy information subscription and provisioning.\nFigure 6.2D.2-1: Analytics Accuracy Information Subscribe\n1.\tThe NWDAF service consumer selects the appropriated NWDAF containing AnLF according to clause 5.2 and subscribes or modifies the subscription for Analytics Accuracy Information by invoking the Nnwdaf_AnalyticsSubscription_Subscribe service operation. The parameters that can be included in the subscription to trigger the accuracy information checking and provisioning are listed in clause 6.1.3.\nIf the subscription is not the initial subscription request, it may include Analytics Feedback Information as described in clause 6.1.1.\n2.\tWhen a subscription request is received, the NWDAF containing AnLF verifies the parameters of the Analytics Accuracy Request information received from the NWDAF service consumer in step 1.\nThe NWDAF containing AnLF starts the Analytics Accuracy Monitoring and generation of the Analytics Accuracy Information related to the analytics ID indicated in the subscription according to the parameters defined in Analytics Accuracy Request Information in clause 6.1.3. The NWDAF containing AnLF is to compute Analytics Accuracy Information according to the methods in clause 6.2D.1. If the NWDAF containing AnLF does not have enough necessary data, it will perform step 3b to collect ground truth data before computing Analytics Accuracy Information.\nThe NWDAF containing AnLF may have started to perform the Analytics Accuracy Monitoring and Analytics Accuracy Information generation, triggered by other NWDAF service consumer(s) before. Upon receiving a new request from the NWDAF service consumer, the NWDAF containing AnLF determines whether new data collection is needed for Analytics Accuracy Information generation based on the corresponding analytics subscription.\nIn addition to the received request from the NWDAF service consumer, based on local policy, the NWDAF containing AnLF may determine to start the Analytics Accuracy Monitoring and Analytics Accuracy Information generation.\n3a.\tThe NWDAF containing AnLF performs the data collection for the subscribed analytics ID and generates the analytics output.\n3b.\tThe NWDAF containing AnLF performs the data collection (e.g., ground truth data collection) for accuracy information generation for the subscribed analytics ID and generates the associated Analytics Accuracy Information. If Analytics Feedback Information is included in step 1, the NWDAF containing AnLF may take it into account and determine whether it affects the ground truth data by the internal logic to generate Analytics Accuracy Information.\n4a.\tThe NWDAF containing AnLF provides the analytics output according to the parameters defined in Analytics Reporting Information included in the subscription request when there is no Analytics Accuracy Request Information included in the subscription in step 1.\nNOTE:\tSteps 3b and 4a can occur in any order.\n4b.\tThe NWDAF containing AnLF provides the Analytics Accuracy Information together with the analytics output for the analytics ID according to the parameters defined in the Analytics Accuracy Request Information included in the subscription request.\n4c.\tThe NWDAF containing AnLF provides only the Analytics Accuracy Information for the analytics ID according to the parameters defined in the Analytics Accuracy Request Information included in the subscription request. The Analytics Accuracy Information is provided in a separated notification when the periodicity for providing the Analytics Accuracy Information indicated in the Analytics Accuracy Request Information is different from the periodicity for providing the analytics output indicated in the subscription request, or the accuracy value is under the analytics accuracy threshold which is indicated in the subscription request or locally configured.\n5.\tWhen determining the low or insufficient accuracy for an analytics ID, i.e. the deviation of the analytics output using the trained ML Model from the ground truth data (which are collected from Data Producer NF corresponding to the requested analytic ID at the time which the prediction refers to) does not meet analytics accuracy requirement, which indicates the accuracy value is under the analytics accuracy threshold(s) (which are locally configured or received in the subscribe request), the NWDAF containing AnLF may notify the NWDAF Service consumer with the Stop Analytics Output Consumption indication and the Stop Analytics Output Consumption time window.\n6.\t(Optional) The NWDAF Service Consumer may decide to stop the consumption of analytics output without unsubscribing to the analytics ID, based on its own logic or based on a received notification from NWDAF with the Stop Analytics Output Consumption indication. The NWDAF Service Consumer invokes the Nnwdaf_AnalyticsSubscription_Subscribe service operation including the Subscription Correlation ID to modify an existing subscription and provides the parameter Pause analytics consumption flag in the Analytics Accuracy Request Information.\n7.\tWhen the NWDAF determines an improvement in the accuracy of an analytics ID (e.g. meet the accuracy requirement of the analytics consumer) or when the Stop Analytics Output Consumption time window set by itself is finished, the NWDAF notifies the NWDAF Service Consumer of the accuracy information for the analytics ID to resume the consumption of the analytics output, therefore reactivating an existing analytics ID subscription that has been previously stopped.\n8.\t(Optional) The NWDAF Service Consumer based on its own logic can notify the NWDAF to resume the notification of analytics output, therefore reactivating an existing subscription to analytics ID that has been paused either by NWDAF Service Consumer request (step 6) or by NWDAF indication (step 5). The NWDAF Service Consumer invokes the Nnwdaf_AnalyticsSubscription_Subscribe service operation including the Subscription Correlation ID to modify an existing subscription and provides the parameter Resume Analytics Subscription request in the Analytics Accuracy Request Information.\n6.2D.3\tProcedures for Analytics Accuracy Information Request\nThis procedure is used by NF consumers of analytics ID to request Analytics Accuracy Information related to the requested analytics ID for NF consumer. Figure 6.2D.3-1 shows the procedure for accuracy information request and response.\nFigure 6.2D.3-1: Analytics Accuracy Information Request\n1.\tThe NWDAF service consumer selects the appropriated NWDAF containing AnLF according to Clause 5.2 and requests for Analytics Accuracy Information by invoking the Nnwdaf_AnalyticsInfo_Request service operation. The parameters that can be included in the request to trigger the accuracy information checking and provisioning are listed in clause 6.1.3.\n2.\tWhen a request is received, the NWDAF containing AnLF determines whether the request is only for analytics output generation or if it includes the Analytics Accuracy request.\nIf the Analytics Accuracy request is included, the NWDAF containing AnLF starts the Analytics Accuracy Monitoring and generation of the Analytics Accuracy Information related to the analytics ID indicated in the request and according to the parameters defined in Analytics Accuracy Request Information in clause 6.1.3. The NWDAF containing AnLF is to compute Analytics Accuracy Information according to the methods in Clause 6.2D.1. If the NWDAF containing AnLF does not have enough necessary data, it will perform step 3b to collect ground truth data before computing Analytics Accuracy Information.\nThe NWDAF containing AnLF may have started to perform the Analytics Accuracy Monitoring and Analytics Accuracy Information generation, triggered by other NWDAF service consumer(s) before. Upon receiving a new request from the NWDAF service consumer, the NWDAF containing AnLF determines whether new data collection is needed for Analytics Accuracy Information generation based on the corresponding analytics request.\nIn addition to the received request from the NWDAF service consumer, based on local policy, the NWDAF containing AnLF may determine to start the Analytics Accuracy Monitoring and Analytics Accuracy Information generation.\n3a.\tThe NWDAF containing AnLF performs the data collection for the requested analytics ID and generates the analytics output.\n3b.\tThe NWDAF containing AnLF performs the data collection (e.g., ground truth data collection) for accuracy information generation for the requested analytics ID and generates the associated Analytics Accuracy Information.\n4a.\tThe NWDAF containing AnLF provides the analytics output according to the parameters defined in Analytics Reporting Information included in the request, when no Analytics Accuracy Request Information is included in the request in step 1.\nNOTE:\tStep 3b, 4a can occur in any order.\n4b.\tThe NWDAF containing AnLF provides the requested analytics output and Analytics Accuracy Information for the analytics ID according to the parameters defined in the Analytics Accuracy Request Information included in the request.\n6.2E\tMTLF-based ML Model Accuracy Monitoring\n6.2E.1\tGeneral\nMTLF-based ML Model Accuracy Monitoring procedure is where an NWDAF containing MTLF determines ML Model degradation based on newly collected test data and retrain or reprovisioning the existing ML Model.\n6.2E.2\tProcedure for MTLF-based ML Model Accuracy Monitoring\nFigure 6.2E.2-1 illustrates the procedure for monitoring the accuracy of the provisioned ML Model using newly collected data. NWDAF containing AnLF may provide inference data to NWDAF containing MTLF for model accuracy monitoring and the NWDAF containing MTLF determines retraining or re-provisioning of the ML Model.\nFigure 6.2E.2-1: Procedure for MTLF-based ML Model Accuracy Monitoring\n1.\tAn analytics consumer initiates a subscription for analytics exposure services towards an NWDAF containing AnLF.\n2.\tThe NWDAF containing AnLF requests an ML Model from the appropriate NWDAF containing MTLF, using the Nnwdaf_MLModelProvision_Subscribe service operation. The NWDAF containing AnLF may include an ML Model accuracy threshold which is used as an indicator to execute the accuracy monitoring operations as defined in clause 6.2A.2. NWDAF containing AnLF may include a DataSetTag (see clause 6.2B.1) and/or ADRF ID, which is used to store and fetch the inference data (including input data, prediction and the ground truth data at the time which the prediction refers to) from ADRF which are relevant for the accuracy monitoring and re-training/re-provisioning of ML Model.\nIf the NWDAF containing AnLF receives ML Model(s), the NWDAF containing AnLF sends set of tuples (unique ML Model identifier and a DataSetTag and/or ADRF ID) to the NWDAF containing MTLF by invoking Nnwdaf_MLModelProvision_Subscribe service operation for subscription modification.\n3.\tThe NWDAF containing MTLF provides trained ML Model(s) to the NWDAF containing AnLF as specified in clause 6.2A and clause 6.2B. The NWDAF containing MTLF may include an accuracy information which is used to indicate the accuracy of ML Model during the training.\nWhen the step 2 is for a subscription modification (i.e. including Subscription Correlation ID) and contains the set of tuples (unique ML Model identifier and a DataSetTag and/or ADRF ID), the NWDAF containing MTLF determines the relationship between the ML Model and the DataSetTag.\n4.\tThe NWDAF containing AnLF registers the use of the ML Model with the NWDAF containing MTLF to indicate its capability of sending Analytics Feedback Information and/or Analytics Accuracy  for the ML Model as described in clause 6.2E.3.\nNOTE 1:\tThe NWDAF containing AnLF receives the Analytics Feedback information from the Analytics consumer.\n5.\tDue to the registration in the previous step, the NWDAF containing MTLF may subscribe to the NWDAF containing AnLF to get Analytics Feedback Information and/or Analytics Accuracy  for the provisioned ML Model by invoking Nnwdaf_MLModelMonitor_Subscribe service operation, if the service operation is supported by the NWDAF containing AnLF.\n6.\tThe Analytics consumer may send Analytics Feedback Information in an Nnwdaf_AnalyticsSubscription_Subscribe message as described in clause 6.1.1.\n7.\tThe NWDAF containing AnLF may send the Analytics Feedback Information and/or  Analytics Accuracy for the provisioned ML Model by invoking Nnwdaf_MLModelMonitor_Notify service operation as requested in step 5. When the NWDAF containing MTLF receives Analytics Feedback Information and/or Analytics Accuracy of the ML Model, the NWDAF containing MTLF may trigger step from 8 to 13 to enhance the ML Model accuracy.\n8a-8f.\tThe NWDAF containing MTLF, based on the request(s) from one or more NWDAF containing AnLF or its local policy, determines whether to perform ML Model Accuracy Monitoring and re-training/re-provisioning of ML Model by collecting new data from various data sources:\n-\tThe NWDAF containing MTLF may collect new data for ML Model Accuracy monitoring, re-training and re-provisioning from the data source NFs and DCCF by invoking Nnf_EventExposure_Subscribe and Ndccf_DataManagement_Susbscribe service operation, respectively.\n-\tWhen ADRF ID and/or DataSetTag is given by step 2, the NWDAF containing MTLF may retrieve historical data from the ADRF indicated by the NWDAF containing AnLF at step 2. by invoking Nadrf_DataManagementRetrievalRequest or Nadrf_DataManagementRetrieval_Subscribe service operation. Otherwise, the NWDAF containing MTLF may retrieves the historical data from the DCCF or the NWDAF containing AnLF by invoking Ndccf_DataManagement_Subscribe or Nnwdaf_DataManagement_Subscribe service operation, respectively.\n-\tIf the NWDAF containing AnLF does not include a DataSetTag with ADRF ID at step 2, the NWDAF containing MLTF may request ADRF to subscribe for the collection of the analytics and data that correspond to the analytics generated by the ML Model provisioned in step 3, using the procedures defined in clause 6.2B.3.\n-\tThe NWDAF containing MTLF may subscribe to UDM to get notification on change in the subscription data for Target of ML Model Reporting by invoking Nudm_SDM_Subscribe service operation and the UDM subscribes to the UDR to get notifications of the modification on UE subscription data by invoking Nudr_DM_Subscribe service operation.\n-\tThe NWDAF containing MTLF may consider the data quality into the accuracy monitoring by collecting fault prediction analytics data from MDAS to determine the status of Data Source NFs, using MDA Request.\nIf the NWDAF containing MTLF has already collected new test data and performed ML Model Accuracy Monitoring and retraining which is triggered by other NWDAF containing AnLF(s) (for ML Model Accuracy Monitoring and retraining), the NWDAF containing MTLF, based on its internal logic, determines whether to use the data for the subscription or not.\n9a-9f.\tThe NWDAF containing MTLF receives the requested data from various sources as requested in steps 8a-8f.\n10.\tBased on the collected analytics and data from steps 9a-9f, the NWDAF containing MTLF computes the accuracy using the methods described in clause 5C.1. The NWDAF containing MTLF may discard data from data sources if it detects the data quality of that source is not good. The NWDAF containing MTLF may generate prediction with the collected input data to calculate the accuracy if only input data and ground truth data are available.\nNOTE 2:\tHow the NWDAF containing MTLF determines whether the data from the data source is of good quality or needs to be discarded is up to the NWDAF implementation and configuration.\n11.\tAn accuracy report is sent to the NWDAF containing AnLF, e.g. when the reporting threshold is met by invoking Nnwdaf_MLModelProvision_Notify service operation.\n12.\tBased on the computed accuracy, the NWDAF containing MTLF may decide to re-train/re-provision the ML Model.\n13.\tWhen the newly generated or re-trained ML Model is ready, the NWDAF containing MTLF sends new or re-trained ML Model to the NWDAF containing AnLF by invoking Nnwdaf_MLModelProvision_Notify service operation. The NWDAF containing MTLF may send the accuracy report of the new or re-trained ML Model to the NWDAF containing AnLF.\n6.2E.3\tProcedure for AnLF-assisted MTLF ML Models Accuracy Monitoring\n6.2E.3.1\tGeneral\nThe procedures described in this clause enable the following functionality:\n-\tAn NWDAF containing AnLF may register with an NWDAF containing MTLF when it starts using an ML Model and monitoring the accuracy of analytics generated by that ML Model for a given Analytics ID. It is assumed that the NWDAF containing AnLF obtained the ML Model in a previous interaction with the NWDAF containing MTLF, e.g. using the Nnwdaf_MLModelInfo_Request or Nnwdaf_MLModelProvision_Subscribe services. If the AnLF receives ML Model provider information in the Nnwdaf_MLModelInfo_Request response or Nnwdaf_MLModelProvision_Subscribe Notify message, it registers to the NWDAF containing MTLF indicated by the ML Model provider information. This registration enables the NWDAF containing MTLF to become aware of NWDAF containing AnLF that are using a given ML Model for certain Analytics ID and that the NWDAF containing AnLF supports the capability of monitoring the accuracy of the corresponding analytics.\n-\tAn NWDAF containing MTLF may subscribe to an NWDAF containing AnLF where an existing Nnwdaf_MLModelMonitor service is established for receiving notifications of the accuracy of analytics generated by a given ML Model for a certain Analytics ID. NWDAF containing AnLF can generate the accuracy information in many ways: e.g. comparing predictions of ML Model and its corresponding ground truth data, comparing changes in internal configuration for the analytics ID generation, previous existent records of Analytics Accuracy Information, etc.\n6.2E.3.2\tProcedures for registering the monitoring of the analytics accuracy of an ML Model\nWhen an NWDAF containing AnLF starts making use of an ML Model and it has the ability either to monitor the analytics accuracy of the ML Model, or to deliver Analytics Feedback Information for the analytics generated by the ML Model, it registers with the NWDAF containing MTLF, that is responsible for training/updating this ML Model.\nWhen the NWDAF containing AnLF is no longer using the ML Model or monitoring the accuracy of the analytics generated by that ML Model for the Analytics ID, it de-registers it with the responsible NWDAF containing MTLF.\nFigure 6.2E.3.2-1 illustrates the procedure by which an NWDAF containing AnLF registers with an NWDAF containing MTLF that it is starting to make use and monitor the analytics accuracy of an ML Model. A new Nnwdaf_MLModelMonitor_Register service operation is used for that purpose.\nFigure 6.2E.3.2-1: Procedure for ML Model monitoring registration\nAn NWDAF containing AnLF may start monitoring the accuracy of an ML Model based on local policy or request from its service consumer.\n1-2.\tThe NWDAF containing AnLF sends an Nnwdaf_MLModelMonitor_Register request to an NWDAF containing MTLF (NF ID of the NWDAF containing AnLF, unique identifier of the ML Model, optionally: subscription endpoint of the Nnwdaf_MLModelMonitor_Subscribe service operation at the NWDAF containing AnLF, Analytics ID, Target of Analytics Reporting, Analytics filter). The NWDAF containing MTLF is now aware of the NF ID of the NWDAF containing AnLF that is monitoring the accuracy of that ML Model.\nIf the NWDAF containing AnLF is a target NWDAF in analytics transfer procedure (as defined in clause 6.1B), based on the ML Model Accuracy Information received from source NWDAF containing AnLF, the NWDAF containing AnLF also includes in the Nnwdaf_MLModelMonitor_Register service request the ML Model accuracy transfer indication, which includes the original Subscription Correlation ID for the ML Model Accuracy Information provided by the source NWDAF containing AnLF and the source NF ID of the NWDAF containing AnLF.\nNOTE 1:\tThese parameters support the NWDAF containing MTLF to map the registration of a new NWDAF containing AnLF with an existing subscription for consumption of ML Model Accuracy Information from a previous NWDAF containing AnLF (i.e. source NWDAF containing AnLF which as described in steps 3-4 may provide a termination indication), enabling NWDAF containing MTLF to reassociate the data from the previous subscription to the new the subscription for ML Model accuracy provisioning at the new NWDAF containing AnLF.\n3-4.\tWhen the NWDAF containing AnLF is no longer using the ML Model, it sends an Nnwdaf_MLModelMontior_Deregister service operation.\nIf NWDAF containing AnLF is registered with a NWDAF containing MTLF, is a source NWDAF containing AnLF in an analytics transfer procedure (as defined in clause 6.1B) and is no longer using the ML Model, the NWDAF containing AnLF sends Nnwdaf_MLModelMontior_Deregister service operation request including the ML Model accuracy provisioning termination information, which includes: a termination indication, the termination cause set to analytics transfer and optionally the NWDAF containing AnLF NF ID of the target NWDAF.\nNOTE 2:\tThe ML Model accuracy termination information is used by the NWDAF containing MTLF to determine whether the termination request is from the source NWDAF containing AnLF. If so, the NWDAF containing MTLF will not delete any data immediately upon receiving of a de-registration request. Then the NWDAF containing MTLF is able to associate the data from the source NWDAF containing AnLF to the target NWDAF containing AnLF.\n6.2E.3.3\tProcedures for monitoring the analytics accuracy of an ML Model\nAn NWDAF containing MTLF, due to the registration of monitoring of the analytics accuracy of an ML Model received from NWDAF containing AnLF and local policies, subscribes to the NWDAF containing AnLF for receiving notifications of either the accuracy of the ML Model, or Analytics Feedback Information of the ML Model. The NWDAF containing MTLF may get the Subscription endpoint address of the NWDAF containing AnLF from the information received in a previous registration or through a service discovery procedure at the NRF.\nFigure 6.2E.3.3-1 illustrates the procedure either for monitoring the analytics accuracy of an ML Model or for delivery of Analytics Feedback Information of an ML Model. Nnwdaf_MLModelMonitor_Subscribe and Nnwdaf_MLModelMonitor_Notify service operations are used for the purposes. A service consumer, i.e. an NWDAF containing MTLF, subscribes at a service producer, i.e. an NWDAF containing AnLF, to be notified when either the analytics accuracy of the previously provisioned ML Model is not sufficient, or Analytics Feedback Information is retrieved from analytics consumer NF.\nFigure 6.2E.3.3-1: Procedure for monitoring the analytics accuracy of an ML Model\n0.\tUpon the reception of an Nnwdaf_MLModelMonitor_Register request and based on local policy, the NWDAF containing MTLF determines to subscribe to the Analytics Accuracy Monitoring for the ML Model as defined in clause 5C.1.\n1.\tThe NWDAF containing MTLF sends an Nnwdaf_MLModelMonitor_Subscribe request (Analytics ID(s), unique identifier(s) of the ML Model(s) to be monitored, desired accuracy metrics to be monitored, optionally Reporting Threshold(s), Analytics ID, Target of Analytics Reporting and Analytics filter for each ML Model identifier or Reporting Period) to an NWDAF containing AnLF subscription endpoint.\nWhen the NWDAF containing MTLF determines during the registration process described in clause 6.2E.3.2 that a subscription request for ML Model Accuracy Monitoring to an NWDAF containing AnLF is related to a previous subscription for ML Model Accuracy Information to a different NWDAF containing AnLF (due to changes in the provider of the ML accuracy monitoring for a given ML Model, as an effect of analytics transfer among NWDAFs containing AnLF), the NWDAF containing MTLF may use as base for the new subscription request at the new NWDAF containing AnLF the parameters associated with the original subscription identification for the ML Model Accuracy Information that was received in the registration request of the new NWDAF containing AnLF, as described in steps 1-2 of clause 6.2E.3.2.\n2.\tThe NWDAF containing AnLF sends a response to the NWDAF containing MTLF.\n3.\tThe analytics consumer NF may send Analytics Feedback Information to the NWDAF containing AnLF as described in clause 6.1.1.\n4.\tWhen step 1 is triggered, the NWDAF containing AnLF may start monitoring the analytics accuracy of the ML Model(s), if it not started yet.\nNOTE 1:\tThe NWDAF containing AnLF can monitor the analytics accuracy in many ways: e.g. comparing predictions of ML Model and its corresponding ground truth data, comparing changes in internal configuration for the analytics ID generation, previous existent records of Analytics Accuracy Information, etc.\n5.\tThe NWDAF containing AnLF determines whether the analytics accuracy of the ML Model is insufficient, i.e. deviation of the output analytics using the trained ML Model from ground truth data (which are collected from Data Producer NF corresponding to analytic ID requested at the time which the prediction refers to) does not meet the analytics accuracy requirement, which indicates the accuracy value is under the Reporting Threshold(s) (which are locally configured or received in the Subscribe request), or the Reporting Period indicated in the Subscribe request is reached.\n6.\tEither the Analytics Feedback Information is retrieved at step 3 or the NWDAF containing AnLF detects the analytics accuracy of ML Model is insufficient at step 5, the NWDAF containing AnLF sends an Nnwdaf_MLModelMonitor_Notify request to the notification endpoint (e.g. the NWDAF containing MTLF). The Notify request includes either Analytics Feedback Information, or the monitored accuracy information of the ML Model (e.g. unique identifier(s) of the ML Model(s) to be monitored, Analytics ID, Target of Analytics Reporting and Analytics filter for each ML Model identifier, a deviation value which indicates the deviation of the predictions generated using the ML Model(s) from the ground truth data and the network data when the deviation occurs (which can be used by the NWDAF containing MTLF for possible ML Model retraining) and the number of inferences that were performed during the time interval between Nnwdaf_MLModelMonitor_Register request and the Notify request or between the time of last Notification message and the time of the current Notification message) and optionally an indication that the analytics accuracy of the ML Model does not meet the requirement of accuracy for the ML Model.\n7.\tThe NWDAF containing MTLF sends a response.\n8.\tThe NWDAF containing MTLF determines whether the ML Model is degraded or not based on the notification at step 6. If the notification contains Analytics Feedback Information, the NWDAF containing MTLF may determine ML Model degradation based on the procedures as described in clause 6.2E.2. Otherwise when the NWDAF containing MTLF has received the multiple Analytics Accuracy Information, from one or more NWDAFs containing AnLF, it may consider that the ML Model is degraded/to be updated (i.e. enough number Analytics Accuracy Information received from one or more NWDAFs containing AnLF, indicating insufficient analytics accuracy).\nNOTE 2:\tThe actual mechanism for the NWDAF containing MTLF for determining the degradation of the ML Model degradation is an internal procedure of the NWDAF containing MTLF, e.g. the NWDAF containing MTLF calculate a global accuracy based on the Analytics Accuracy Information and the number of inferences received from multiple NWDAFs containing AnLF.\n9.\tWhen an ML Model is considered degraded / to be updated at step 8, the NWDAF containing MTLF re-trains the existing ML Model or selects a new ML Model. If the network data was not included in the Nnwdaf_MLModelMonitor_Notify request of step 6, the NWDAF containing MTLF may request data from the NWDAF containing AnLF, ADRF and/or other 5GS entities as specified in clause 6.2 and use the collected data for ML Model retraining. The NWDAF containing MTLF notifies the NWDAF(s) containing AnLF with the updated trained ML Model Information by invoking Nnwdaf_MLModelProvision_Notify service operation, as described in clause 6.2A.\n6.2F\tProcedure for ML Model Training\n6.2F.1\tML Model Training Subscribe/Unsubscribe\nThe procedure in Figure 6.2F.1-1 is used by an NWDAF service consumer, i.e. an NWDAF containing MTLF to subscribe to another NWDAF, i.e. an NWDAF containing MTLF, for a trained ML Model based on the ML Model file or ML Model information as described in clause 6.2F.2 provided by the NWDAF service consumer. The service may be used by an NWDAF containing MTLF to enable e.g. Federated Learning or to update ML Model. The service is also used by an NWDAF service consumer to request an NWDAF containing MTLF to prepare training ML Model or modify existing ML Model training subscription.\nFigure 6.2F.1-1: Procedure for ML Model Training subscribe/unsubscribe\n1.\tThe NWDAF service consumer may subscribe or unsubscribe for training an ML Model by invoking the Nnwdaf_MLModelTraining_Subscribe/ Nnwdaf_MLModelTraining_Unsubscribe service operation. The parameters that can be provided by the NWDAF service consumer are listed in clause 6.2F.2.\nIn order to enable Federated Learning, NWDAF Service consumer act as FL Server NWDAF can subscribe to multiple NWDAFs containing MTLF act as FL Client NWDAFs, which are selected by the FL Server NWDAF.\nThe FL server NWDAF may use the request to check if an NWDAF can meet the ML Model training requirement (e.g. ML Model Interoperability information, Analytics ID, Serving Area and/or availability of data and time). In such case, the FL server NWDAF includes an ML Preparation Flag. When the ML Preparation Flag presents in the request, the service provider NWDAF only checks if it can meet the ML Model training requirement (e.g. ML Model Interoperability information, Analytics ID, Serving Area and/or availability of data and time) and / or can successfully download the model if the model information is provided.\nThe FL server NWDAF may use the request to get the Model Accuracy information of the global ML Model calculated by the FL Client NWDAFs. In such cases, the service consumer NWDAF includes a Model Accuracy Check Flag. When the Model Accuracy Check Flag is present in the request, the service provider NWDAF uses the local training data as the testing dataset to calculate the Model Accuracy information of the ML Model provided by the service consumer NWDAF.\nWhen NWDAF service consumer determine to further update the ML Model, NWDAF service consumer modifies the subscription by invoking Nnwdaf_MLModelTraining_Subscribe service operation including Subscription Correlation ID with ML Model Information (as defined in clause 6.2A.2).\n2.\tThe NWDAF containing MTLF trains ML Model provided at step 2 by collecting new data or re-use the data that it owns. If the ML Model file is not provided in step 1, the NWDAF containing MTLF shall first get the ML Model using the information indicated at step 1.\n3.\tWhen the NWDAF containing MTLF completes ML Model training, the NWDAF containing MTLF notifies the NWDAF service consumer with ML Model Information (as defined in clause 6.2A.2) of updated ML Model by invoking the Nnwdaf_MLModelTraining_Notify service operation. The parameters that can be provided by the NWDAF containing MTLF as service provider is specified in clause 6.2F.2.\nIf the NWDAF containing MTLF determines to terminate the ML Model training, i.e. NWDAF containing MTLF will not provide further notifications related to this request, then the NWDAF containing MTLF may notify the NWDAF Service consumer a Terminate Request indication with cause code (e.g. NWDAF overload, not available for the FL process anymore, etc.) by invoking the Nnwdaf_MLModelTraining_Notify service operation.\nIn order to enable Federated Learning, NWDAF containing MTLF acting as FL Client NWDAF can notify NWDAF Service consumer acting as FL Server NWDAF the local ML Model information and status report of FL training including accuracy information of local model and Training Input Data Information (e.g. areas covered by the data set, sampling ratio, maximum/minimum of value of each dimension, etc.).\nIf the Model Accuracy Check Flag is present in the Nnwdaf_MLModelTraining_Subscribe, the service provider NWDAF acting as FL Client NWDAF may notify the NWDAF Service consumer acting as FL Server NWDAF the Model Accuracy information of the global ML Model.\n6.2F.2\tContents of ML Model Training\nThe consumers of the ML Model training services (i.e. an NWDAF containing MTLF) may provide the input parameters in Nnwdaf_MLModelTraining_Subscribe or Nnwdaf_MLModelTrainingInfo_Request service operations as listed below:\n-\tAnalytics ID: identifies the analytics for which the ML Model is requested to be trained.\n-\tML Model Interoperability Information as defined in clause 6.2A.2.\n-\t(Only for Nnwdaf_MLModelTraining_Subscribe) A Notification Target Address (+ Notification Correlation ID) as defined in TS 23.502 [3] clause 4.15.1, allowing to correlate notifications received from the NWDAF containing MTLF with the subscription.\n-\t[OPTIONAL] ML Model Information (as defined in clause 6.2A.2).\n-\t[OPTIONAL] ML Model file.\nNOTE 1:\tIt is up to NWDAF implementation to determine whether to include ML Model file in input parameters considering ML Model file size, etc.\n-\t[OPTIONAL] ML Model identifier: identifies the provided ML Model.\n-\t[OPTIONAL] ML Preparation Flag: identifies whether the request is for preparing Federated Learning or executing Federated Learning.\n-\t[OPTIONAL] ML Model Accuracy Check Flag: identifies that the request is for using the local training data as the testing dataset to calculate the Model Accuracy of the global ML Model provided by the NWDAF service consumer acting as the FL Server NWDAF.\n-\t[OPTIONAL] ML Correlation ID: identifies the Federated Learning procedure for training the ML Model. This parameter is included when the service is used for Federated Learning.\n-\t[OPTIONAL] Data Availability requirement. This is the requirement on data availability for the ML Model training. e.g. FL Server NWDAF sends the requirement in preparation request to a FL Client NWDAF for selecting the FL Client NWDAF which can meet the data availability requirement. The following may be included:\n-\tEvent ID list to be collected for local model training.\n-\tDataset statistical properties as defined in clause 6.1.3.\n-\tTime window of the data samples.\n-\tMinimum number of data samples.\n-\t[OPTIONAL] FL Availability time requirement. This is the requirement on availability time for the ML Model training, e.g. FL Server NWDAF sends the requirement in preparation request to FL Client NWDAF for selecting the FL Client NWDAF which is available in the required time for training ML Model.\n-\t[OPTIONAL] Training Filter Information: enables to select which data for the ML Model training is requested, e.g. S-NSSAI, Area of Interest. Parameter types in the Training Filter Information are the same as or subset of parameter types in the ML Model Filter Information which are defined in clause 6.2A.2.\n-\t[OPTIONAL] Target of Training Reporting: indicates the object(s) for which data for ML Model training is requested, i.e. group of UEs identified by a list of Internal-Group-Ids or any UE (i.e. all UEs).\n-\t[OPTIONAL] Use case context: indicates the context of use of ML Model.\n-\t[OPTIONAL] Training Reporting Information with the following parameters:\n-\tMaximum response time: indicates maximum time for waiting notifications (i.e. model training results).\n-\t[OPTIONAL] Iteration round ID: indicates the iteration round number of current ML Model training.\n-\t[OPTIONAL] Expiry time.\n-\t[OPTIONAL] Indication of skipping the current FL round.\nThe NWDAF containing MTLF provides to the consumer of the ML Model training service operations as described in clause 7.10 and clause 7.11, the output information in notification or response as listed below:\n-\t(Only for Nnwdaf_MLModelTraining_Notify) The Notification Correlation Information.\n-\t[OPTIONAL] ML Model Information (as defined in clause 6.2A.2).\n-\t[OPTIONAL] ML Model identifier: identifies the provisioned ML Model.\n-\t[OPTIONAL] Global ML Model Accuracy information: The model metric value of the global ML Model and optionally the used metric, which is calculate by the FL Client NWDAF using the local training data as the testing dataset.\n[OPTIONAL] Status report of FL training: Accuracy information of local model and Training Input Data Information (e.g. areas covered by the data set, sampling ratio, maximum/minimum of value of each dimension, etc.), which are generated by the FL Client NWDAF during FL procedure.\nNOTE 2:\tThe parameters in Training Input Data Information are up to the implementation.\n-\t[OPTIONAL] ML Correlation ID. This parameter may be included when the service is used for Federated Learning.\n-\t[OPTIONAL] Iteration round ID: indicates the iteration round number of ML Model training indicated by the FL Server NWDAF.\n-\t[OPTIONAL] Delay Event Notification with the following parameters:\n-\tdelay event indication: this parameter indicates that FL Client NWDAF is not able to complete the training of the interim local ML Model within the maximum response time provided by the FL Server NWDAF.\n-\t[OPTIONAL] cause code (e.g. local ML Model training failure, more time necessary for local ML Model training, etc.).\n-\t[OPTIONAL] Expected time to complete the training: Indicates to the FL Server NWDAF that expected remaining training time and may be provided with Delay Event Notification.\n6.2F.3\tML Model Training Information Request\nThe procedure in Figure 6.2F.3-1 is used by an NWDAF service consumer, i.e., an NWDAF containing MTLF to request another NWDAF, i.e., an NWDAF containing MTLF, for the information about ML Model training based on the ML Model file or ML Model information as described in clause 6.2F.2 provided by the NWDAF service consumer. The service may be used by an NWDAF containing MTLF to enable e.g. Federated Learning.\nFigure 6.2F.3-1: Procedure for ML Model Training Information Request\n1.\tThe NWDAF service consumer may request the NWDAF containing MTLF to get the information about the ML Model training based on the ML Model file or ML Model information as described in clause 6.2F.2 provided by the service consumer by invoking the Nnwdaf_MLModelTrainingInfo_Request service operation. The parameters that can be provided by the NWDAF service consumer are listed in clause 6.2F.2.\nIn order to enable Federated Learning, NWDAF Service consumer acting as FL Server NWDAF requests to get ML Model Training Information from multiple NWDAF containing MTLF acting as FL Client NWDAFs, which are selected by the FL Server NWDAF. The details are specified in clause 6.2C.\nThe NWDAF service consumer may use the request to check if an NWDAF can meet the ML Model training requirements (e.g. ML Model Interoperability information, Analytics ID, Service Area/DNAI and/or availability of data and time). In such cases, the NWDAF service consumer includes an ML Preparation Flag.\nThe NWDAF service consumer may use the request to get the Model Accuracy of the ML Model provided by the service consumer using local training data in the NWDAF containing MTLF as the testing dataset. In such cases, the service consumer NWDAF includes a Model Accuracy Check Flag.\n2.\tWhen the ML Preparation Flag is present in the request, the NWDAF containing MTLF only checks whether it can meet the ML Model training requirement and/or can successfully download the model if the model information is provided. Based on the check result, the NWDAF containing MTLF gets a successful return code or failure cause code (e.g. NWDAF does not meet the ML training requirements) as the information about the ML Model training.\nWhen the Model Accuracy Check Flag is present in the request, the NWDAF containing MTLF uses the local training data as the testing dataset to calculate the Model Accuracy information of the ML Model provided by the service consumer. The NWDAF containing MTLF includes the Model Accuracy information into the information about the ML Model training.\nWhen the NWDAF containing MTLF is ongoing ML Model training based on the ML Model file or ML Model information as described in clause 6.2F.2 provided by the NWDAF service consumer, the NWDAF containing MTLF gets a failure cause code (e.g. ML training is not complete) as the information about the ML Model training.\nWhen the NWDAF containing MTLF completes ML Model training based on the ML Model file or ML Model information as described in clause 6.2F.2 provided by the NWDAF service consumer, the NWDAF containing MTLF gets a successful return code and the ML Model Information of the trained ML Model as the information about the ML Model training.\n3.\tThe NWDAF containing MTLF replies to the NWDAF service consumer with the information about the ML Model training by invoking the Nnwdaf_MLModelTrainingInfo_Request response service operation.",
      "chunk_type": "procedure",
      "cross_references": [
        "ts_28.537_clause_5",
        "clause_6.1",
        "ts_28.104_clause_9.3.2",
        "clause_6",
        "clause_5.2",
        "clause_5.3",
        "clause_7.5",
        "clause_6.2",
        "clause_7.6",
        "ts_23.502_clause_4.15.1",
        "clause_5",
        "clause_6.2.6.3.2",
        "ts_23.502_clause_5.2.7.2.2",
        "clause_7.5.2",
        "ts_23.502_clause_5.2.7.2",
        "ts_23.502_clause_5.2.7.3",
        "clause_6.1.3",
        "clause_6.1.1",
        "clause_7.10",
        "clause_7.11",
        "ts_23.502_table_4.15.1-1",
        "table_6.2",
        "figure_6.2.14.2-1",
        "figure_6.2",
        "ts_28.537",
        "ts_28.622",
        "ts_28.104",
        "ts_33.501",
        "ts_23.502"
      ]
    },
    {
      "chunk_id": "ts_23.288_6.3.1",
      "section_id": "6.3.1",
      "section_title": "General",
      "content": "The NWDAF provides slice load level information to a consumer NF on a Network Slice level or a Network Slice instance level or both. The NWDAF is not required to be aware of the current subscribers using the slice. The NWDAF notifies slice specific network status analytics information to the consumer NF that is subscribed to it. A consumer NF may collect directly slice specific network status analytics information from NWDAF. This information is not subscriber specific.\nThe NWDAF services as defined in the clause 7.2 and clause 7.3 are used to expose slice load level analytics from the NWDAF to the consumer NF (e.g. PCF, NSSF, AMF or AF, possibly via NEF).\nThe consumer of these analytics shall indicate in the request or subscription:\n-\tAnalytics ID = \"Load level information\";\n-\tAnalytics Filter Information:\n-\tS-NSSAI and NSI ID;\nNOTE 1:\tThe use of NSI ID in the network is optional and depends on the deployment choices of the operator. If used, the NSI ID is associated with S-NSSAI. NSI ID is only applicable when the consumer of analytics is NSSF or AMF.\n-\toptionally, the list of analytics subsets that are requested among those specified in clause 6.3.3A;\n-\toptionally, for analytics exposure in roaming case (see clause 6.1.5), the PLMN ID identifying the target PLMN (i.e. PLMN of which the roaming analytics is requested); and\n-\toptionally, for analytics exposure in roaming case (see clause 6.1.5), mapped S-NSSAI of the HPLMN if the consumer NF is in the VPLMN.\nNOTE 2:\tThe terms \"HPLMN\" and \"VPLMN\" here refer to a roaming case in which at least one UE served by the NWDAF analytics consumer is involved.\n-\tan optional Area of Interest (i.e. list of TAs or cells);\nNOTE 3:\tWhen the AF provides geographical area, the NEF can map it into list of TAs or cells.\n-\tan optional list of NF types;\n-\toptionally, Load Level Threshold value;\n-\toptionally, \"maximum number of objects\" indicating the maximum number of Network Slice instances expected in output, when the Analytics Filter Information does not indicate an NSI ID; and\n-\tan Analytics target period indicating the time period over which the statistics or predictions are requested.",
      "chunk_type": "definition",
      "cross_references": [
        "clause_7.2",
        "clause_7.3",
        "clause_6.3.3",
        "clause_6.1.5"
      ]
    },
    {
      "chunk_id": "ts_23.288_6.3.2",
      "section_id": "6.3.2",
      "section_title": "Void",
      "content": "6.3.2A\tInput data\nThe detailed information collected by the NWDAF is listed in Table 6.3.2A-1 and Table 6.3.2A-2.\nTable 6.3.2A-1: OAM Input data for slice load analytics\nInformation\nSource\nDescription\nUE registered in a Network Slice/Network Slice instance\nOAM\nMean number of UEs registered in a NW slice or NW slice instance as defined in TS 28.552 [8]. (NOTE 1).\nPDU Session established on a Network Slice/Network Slice instance\nOAM\nMean number of established PDU Sessions in a NW slice or NW slice instance as defined in TS 28.552 [8]. (NOTE 1).\nLoad of NFs associated to Network Slice instance\nOAM\nResource utilization information of a Network Slice instance obtained from its constituent NF instances. NF instance load input data collection is described in clause 6.5, Table 6.5.2-1.\nNOTE 1:\t5GC performance measurements can be provided per S-NSSAI by OAM as defined in TS 28.552 [8].\nTable 6.3.2A-2: 5GC NF Input data for slice load analytics\nInformation\nSource\nDescription\nTimestamps\n5GC NF\nA time stamp associated with the collected information.\nUE registers/de-registers to a Network Slice/Network Slice instance\nAMF(s)\nAMF reports that a UE registered or deregistered to a S-NSSAI or to a S-NSSAI and NSI ID.\nNumber of UEs served by the AMF\nAMF(s)\nAMF reports the total number of UEs served by the AMF per S-NSSAI or per S-NSSAI and NSI ID. (NOTE 1)\nPDU Session established/released on a Network Slice\nSMF(s)\nSMF reports that a PDU Session is established or released per S-NSSAI or per S-NSSAI and NSI ID.\nCurrent number of UEs registered in a NW slice\nNSACF\nNSACF reports the number of UE registered at the S-NSSAI.\nCurrent number of PDU Sessions established in a NW slice\nNSACF\nNSACF reports the number of PDU Sessions established at the S-NSSAI.\nLoad of NFs associated to Network Slice instance\nNRF\nResource utilization information of a Network Slice instance obtained from its constituent NF instances. NF instance load input data collection is described in clause 6.5, Table 6.5.2-1.\nNOTE 1:\tAMF reports the total number of registered UE in the AMF at each associated time stamp.\nNOTE 2:\tSMF reports multiple PDU Sessions when establishment or release happened at the same time, indicated by the time stamp.\nNOTE 3:\tBased on the internal logic, the NWDAF determines the source for the data collection.\nNWDAF collects input data on the number of UEs registered in a S-NSSAI or S-NSSAI and NSI ID combination using one of the following options:\n-\tTotal number of UE registered to a S-NSSAI or to a S-NSSAI and NSI ID from each AMF(s) and/or from NSCAF serving the slice:\n-\tNamf_EventExposure_Subscribe (Target for Event Reporting = \"any UE\", Event ID = \"Number of UEs served by the AMF and located in \"Area of Interest\"\", Event Filter information = S-NSSAI(s) or one or more of the tuple (S-NSSAI, NSI ID), Event reporting mode = periodic along with periodicity) as defined in clause 5.2.2.3.1 of TS 23.502 [3]; or\n-\tNnsacf_SliceEventExposure_Subscribe (EventID = \"Number of UE registered\", EventFilter = \"S-NSSAI\", Event reporting mode = periodic along with periodicity) as defined in clause 5.2.21.4.2 of TS 23.502 [3].\n-\tIndividual UE registration/deregistration to a S-NSSAI or to a S-NSSAI and NSI ID reported by AMF(s):\n-\tNamf_EventExposure_Subscribe (Target for Event Reporting = \"any UE\", Event ID = \"UE moving in or out of a subscribed \"Area of Interest\", Event Filter information = S-NSSAI(s) or one or more of the tuples (S-NSSAI, NSI ID), Event reporting mode = reporting to a maximum number or a maximum duration) as defined in clause 5.2.2.3.1 of TS 23.502 [3].\nNWDAF collects input data on the number of PDU Sessions established in a S-NSSAI using one of the following options:\n-\tTotal number of PDU Sessions established in a S-NSSAI from each NSACF serving the slice:\n-\tNnsacf_SliceEventExposure_Subscribe (EventID = \"Number of PDU sessions established\", EventFilter = \"S-NSSAI(s)\", Event reporting mode = periodic along with periodicity) as defined in clause 5.2.21.4.2 of TS 23.502 [3].\n-\tIndividual PDU Session Established or PDU Session Released in a S-NSSAI from SMF:\n-\tNsmf_EventExposure_Subscribe (Target for Event Reporting = \"any UE\", Event ID = \"PDU Session Establishment and/or PDU Session Release\", Event Filter information = S-NSSAI(s), Event reporting mode = reporting to a maximum number or a maximum duration) as defined in clause 5.2.8.3.1 of TS 23.502 [3].",
      "chunk_type": "general",
      "cross_references": [
        "clause_6.5",
        "ts_23.502_clause_5.2.2.3.1",
        "ts_23.502_clause_5.2.21.4.2",
        "ts_23.502_clause_5.2.8.3.1",
        "table_6.3.2",
        "table_6.5.2-1",
        "ts_28.552_table_6.3.2",
        "ts_28.552",
        "ts_23.502"
      ]
    },
    {
      "chunk_id": "ts_23.288_6.3.3",
      "section_id": "6.3.3",
      "section_title": "Void",
      "content": "6.3.3A\tOutput analytics\nThe NWDAF services as defined in the clause 7.2 and 7.3 are used to expose the following analytics:\n-\tNetwork Slice instance load statistics information as defined in Table 6.3.3A-1.\n-\tNetwork Slice load statistics information as defined in Table 6.3.3A-2.\n-\tNetwork Slice instance load predictions information as defined in Table 6.3.3A-3.\n-\tNetwork Slice load predictions information as defined in Table 6.3.3A-4.\nTable 6.3.3A-1: Network Slice instance load statistics\nInformation\nDescription\nS-NSSAI\nIdentification of the Network Slice.\nNetwork Slice instances (1..max)\nList of Network Slice instance(s) within the S-NSSAI.\n> NSI ID\nIdentification of the Network Slice instance.\n> Number of UE Registrations (NOTE 1)\nNumber of UE registrations of the Network Slice instance (average, variance).\n> Number of PDU Sessions establishment (NOTE 1)\nNumber of PDU Session establishments of the Network Slice instance (average, variance).\n> Resource usage (NOTE 1)\nThe usage of assigned virtual resources currently in use for the NF instances (mean usage of virtual CPU, memory, disk) as defined in clause 5.7 of TS 28.552 [8], belonging to a particular Network Slice instance.\n> Resource usage threshold crossings (NOTE 1)\nNumber of times resource usage threshold is met or exceeded or crossed on the Network Slice instance and the time when it happened. It is present if threshold is provided by the consumer as Analytics Filter.\n> Resource usage threshold crossings time period (1..max) (NOTE 1, NOTE 2)\nResource usage threshold crossing vector including time elapsed between times each threshold is met or exceeded or crossed on the Network Slice instance if a threshold value is provided by the consumer as Analytics Filter.\n> Load Level (NOTE 1)\nThe load level of the Network Slice Instance indicated by the S-NSSAI and the associated NSI ID (if applicable) in the Analytics Filter, it is present if Load Level Threshold is not provided by the consumer as Analytics Filter.\n> Crossed Load Level Threshold (NOTE 1)\nAn indication on whether the Load Level Threshold is met or exceeded by the statistics value of the Load Level. It is present if the Load Level Threshold is provided by the consumer as Analytics Filter.\nNOTE 1:\tAnalytics subset that can be used in \"list of analytics subsets that are requested\".\nNOTE 2:\tThe time period is a time interval specified by a start time and an end time timestamps within the Analytics target period.\nTable 6.3.3A-2: Network Slice load statistics\nInformation\nDescription\nS-NSSAI\nIdentification of the Network Slice.\n> Number of UE Registrations (NOTE 1)\nNumber of UE registrations at the Network Slice (average, variance).\n> Number of PDU sessions establishments (NOTE 1)\nNumber of PDU Session establishments at the Network Slice (average, variance).\n> Load Level (NOTE 1)\nThe load level of the Network Slice Instance indicated by the S-NSSAI and the associated NSI ID (if applicable) in the Analytics Filter, it is present if Load Level Threshold is not provided by the consumer as Analytics Filter.\n> Crossed Load Level Threshold (NOTE 1)\nAn indication on whether the Load Level Threshold is met or exceeded by the statistics value of the Load Level. It is present if the Load Level Threshold is provided by the consumer as Analytics Filter.\nNOTE 1:\tAnalytics subset that can be used in \"list of analytics subsets that are requested\".\nTable 6.3.3A-3: Network Slice instance load predictions\nInformation\nDescription\nS-NSSAI\nIdentification of the Network Slice.\nNetwork Slice instances (1..max)\nList of Network Slice instance(s) within the S-NSSAI.\n> NSI ID\nIdentification of the Network Slice instance.\n> Number of UE Registrations (NOTE 1)\nNumber of predicted UE registrations at the Network Slice instance (average, variance).\n> Number of PDU Sessions establishment (NOTE 1)\nNumber of predicted PDU Session establishments of the Network Slice instance (average, variance).\n> Resource usage (NOTE 1)\nThe predicted usage of assigned virtual resources for the NF instances (mean usage of virtual CPU, memory, disk) as defined in clause 5.7 of TS 28.552 [8], belonging to a particular Network Slice instance.\n> Resource usage threshold crossings (NOTE 1)\nNumber of predicted times resource usage threshold is met or exceeded or crossed at the Network Slice instance and the time when it happened. It is present if a threshold value is provided by the consumer as Analytics Filter.\n> Resource usage threshold crossings time period (1..max) (NOTE 1, NOTE 2)\nPredicted Resource usage threshold vector including predicted time elapsed between times each threshold is met or exceeded or crossed on the Network Slice instance, it is present if a threshold value is provided by the consumer as Analytics Filter.\n> Load Level (NOTE 1)\nThe load level of the Network Slice Instance indicated by the S-NSSAI and the associated NSI ID (if applicable) in the Analytics Filter, if Load Level Threshold is not provided by the consumer as Analytics Filter.\n> Crossed Load Level Threshold (NOTE 1)\nAn indication on whether the Load Level Threshold is met or exceeded by the predicted value of the Load Level. It is present if the Load Level Threshold is provided by the consumer as Analytics Filter.\n> Confidence\nConfidence of this prediction.\nNOTE 1:\tAnalytics subset that can be used in \"list of analytics subsets that are requested\".\nNOTE 2:\tThe time period is a time interval specified by a start time and an end time timestamps within the Analytics target period.\nTable 6.3.3A-4: Network Slice load predictions\nInformation\nDescription\nS-NSSAI\nIdentification of the Network Slice.\n> Number of UE Registrations (NOTE 1)\nPredicted Number of UE registrations at the Network Slice (average, variance).\n> Number of PDU sessions establishments (NOTE 1)\nPredicted Number of PDU Session establishments at the Network Slice (average, variance).\n> Load Level (NOTE 1)\nThe load level of the Network Slice Instance indicated by the S-NSSAI and the associated NSI ID (if applicable) in the Analytics Filter, if Load Level Threshold is not provided by the consumer as Analytics Filter.\n> Crossed Load Level Threshold (NOTE 1)\nAn indication of whether the Load Level Threshold is met or exceeded by the predicted value of the Load Level. It is present if the Load Level Threshold is provided by the consumer as Analytics Filter.\n> Confidence\nConfidence of this prediction.\nNOTE 1:\tAnalytics subset that can be used in \"list of analytics subsets that are requested\".\nNOTE:\tIf no NSI ID is provided as Analytics Filter, slice load level related output analytics are provided according to Tables 6.3.3A-2 and 6.3.3A-4. Otherwise slice instance load level related output analytics are provided according to Tables 6.3.3A-1 and 6.3.3A-3.\nThe predictions are provided with a Validity Period, as defined in clause 6.1.3. The Network Slice Load statistics and predictions may be exposed to the AF by NEF under the conditions defined in clause 5.9.2.3 of TS 33.501 [49] NEF security requirements.",
      "chunk_type": "general",
      "cross_references": [
        "clause_7.2",
        "ts_28.552_clause_5.7",
        "clause_6.1.3",
        "ts_33.501_clause_5.9.2.3",
        "table_6.3.3",
        "ts_28.552",
        "ts_33.501"
      ]
    },
    {
      "chunk_id": "ts_23.288_6.3.4",
      "section_id": "6.3.4",
      "section_title": "Procedures",
      "content": "Figure 6.3.4-1: Network Slice load analytics provided by NWDAF\nFigure 6.3.4-1 shows the procedure for NWDAF to derive slice load analytics. The steps are described as follows:\n1.\tA consumer NF subscribes to/requests a NWDAF using Nnwdaf_AnalyticsSubscription_Subscribe or Nnwdaf_AnalyticsInfo_Request service operation (Analytics ID = Load level information and a set of Analytics Filters (e.g. S-NSSAI, NSI ID, Area of Interest)).\n2.\t[OPTIONAL] If the NWDAF does not have already the slice information, it gains the slice information from OAM (as described in clause 6.2.3) and selects, based on discovery towards NRF, the AMF, SMF and NSSF instance(s) relevant to the Analytics Filters provided in the analytics subscription.\n3.\t[OPTIONAL] If the NSI ID(s) are not provided in the analytics subscription by the consumer NF, the NWDAF invokes Nnssf_NSSelection_Get service operation from NSSF to obtain the NSI ID(s) corresponding to the S-NSSAI in the subscription.\nNOTE:\tStep 4a to step 7 are conditional depending on the NWDAF internal logic that determines the source(s) of data collection.\n4a.\t[CONDITIONAL] The NWDAF may subscribe to input data in Table 6.3.2A-1 from the OAM according to the data collection principles from the OAM described in clause 6.2.3.\n4b.\t[CONDITIONAL] The NWDAF may collect input data from the NRF (see clause 6.5) to derive slice instance resource usage statistics and predictions for a Network Slice instance.\n5.\t[CONDITIONAL] The NWDAF may subscribe to the AMF(s) event exposure service to collect data on the number of UEs currently registered on certain Network Slice and, if available, its constituent Network Slice instance(s) as defined in clause 6.3.2A. If required, the NWDAF may also collect the corresponding UE IDs.\n6.\t[CONDITIONAL] The NWDAF may subscribe to the SMF(s) event exposure service to collect data on the number of PDU sessions established and/or released at the SMF on currently registered on certain Network Slice as defined in clause 6.3.2A. NWDAF can then use such collected data to determine the number of PDU sessions established on i) a Network Slice; and ii) if available, on a Network Slice instance by leveraging the data collected in step 5.\n7.\t[CONDITIONAL] The NWDAF may subscribe to one or multiple NSACFs to collect data on either the number of UE registered in a S-NSSAI or the number of PDU sessions established in a S-NSSAI as defined in clause 6.3.2A. When multiple NSACFs are selected by the NWDAF for the S-NSSAI, the NWDAF aggregates the reports from the NSACFs to derive the number of UEs registered in the S-NSSAI or the number of PDU sessions established in the S-NSSAI.\n8.\tThe NWDAF derives slice load analytics.\n9.\tThe NWDAF delivers analytics to the consumer NF by invoking Nnwdaf_AnalyticsSubscription_Notify or Nnwdaf_AnalyticsInfo_Request response service operations.",
      "chunk_type": "procedure",
      "cross_references": [
        "clause_6.2.3",
        "clause_6.5",
        "clause_6.3.2",
        "table_6.3.2",
        "figure_6.3.4-1"
      ]
    },
    {
      "chunk_id": "ts_23.288_6.4.1",
      "section_id": "6.4.1",
      "section_title": "General",
      "content": "This clause specifies how NWDAF can provide Observed Service Experience (i.e. average of observed Service MoS and/or variance of observed Service MoS indicating service MOS distribution for services such as audio-visual streaming as well as services that are not audio-visual streaming such as V2X and Web Browsing services) analytics, in the form of statistics or predictions, to a service consumer.\nThe Observed Service Experience analytics may provide one or more of the following outputs:\n-\tService Experience for a Network Slice: Service Experience for a UE or group of UEs or any UE in a Network Slice;\n-\tService Experience for an Application: Service Experience for a UE or group of UEs or any UE in an Application or a set of Applications;\n-\tService Experience for an Edge Application over a UP path: Service experience for a UE or a group UEs or any UE in an Application or a set of Applications over a specific UP path (UPF, DNAI and EC server);\n-\tService Experience for an Application over a RAT Type or Frequency or both: Service experience for a UE or group of UEs in an Application or a set of Applications over a RAT Type or over a Frequency or both as defined in Table 6.4.1-1.\n-\tService Experience for an Application transferring data over a PDU Session: Service experience for a UE or group of UEs or any UE in an Application or a set of Applications transferring data over a PDU Session with PDU Session parameters i.e. S-NSSAI, DNN, PDU Session Type , SSC mode and optionally an Access Type or with combination of PDU Session parameters such as a list of the tuple (PDU Session Type, SSC mode) optionally per Access Type.\nTherefore, Observed Service experience may be provided as defined in clause 6.4.3. For example, individually per UE or group of UEs, or globally, averaged per Application or averaged across a set of Applications on a Network Slice.\nThe service consumer may be an NF (e.g. PCF, NSSF, AMF, NEF), AF, or the OAM.\nThe consumer of these analytics shall indicate in the request or subscription:\n-\tAnalytics ID = \"Service Experience\";\n-\tTarget of Analytics Reporting as defined in clause 6.1.3;\n-\tAnalytics Filter Information as defined in Table 6.4.1-1 and optionally a list of analytics subsets that are requested (see clause 6.4.3);\n-\toptionally, maximum number of objects and maximum number of SUPIs;\n-\toptionally, preferred level of accuracy of the analytics;\n-\toptionally, preferred level of accuracy per analytics subset;\n-\toptionally, preferred order of results for the list of Application Service Experiences and/or Slice instance service experiences: \"ascending\" or \"descending\";\n-\toptionally, preferred granularity of location information: TA level or cell level or \"longitude and latitude level\";\n-\tAnalytics target period that indicates the time window for which the statistics or predictions are requested;\n-\tin a subscription, the Notification Correlation Id and the Notification Target Address; and\n-\toptionally, Reporting Thresholds, which apply only for subscriptions and indicate conditions on the Service Experience to be reached in order to be notified by the NWDAF (see Table 6.4.3-1 and Table 6.4.3-2).\nNOTE:\tDefinition of \"longitude and latitude level\" is described in clause 6.1.3.\nTable 6.4.1-1: Analytics Filter Information related to the observed service experience\nInformation\nDescription\nMandatory\nApplication\nNetwork Slice\nEdge Applications over a UP path\nApplication over RAT Type and frequency\nApplication transfering data over a PDU Session\nApplication ID (0...max)\nThe identification of the application(s) for which the analytics information is subscribed or requested.\nY\nN\nY\nY\nY\nS-NSSAI\n(NOTE 3)\nWhen requesting Service Experience for a Network Slice: identifies the Network Slice for which analytics information is subscribed or requested.\nWhen requesting Service Experience for an Application: identifies the S-NSSAI used to access the application together with the DNN listed below.\nN\nY\nN\nN\nC\nNSI ID(s)\nIdentifies the Network Slice instance(s) for which analytics information is subscribed or requested.\nN\nN\nN\nN\nN\nArea of Interest\n(NOTE 6)\nIdentifies the Area (i.e. set of TAIs), as defined in TS 23.501 [2] for which the analytics information is subscribed or requested.\nN\nN\nN\nN\nN\nDNN\n(NOTE 3)\nWhen requesting Service Experience for an Application, this is the DNN to access the application.\nN\nN\nN\nN\nC\nDNAI\n(NOTE 1)\nIdentifier of a user plane access to one or more DN(s) where applications are deployed as defined in TS 23.501 [2].\nN\nN\nY\nN\nN\nRAT Type\n(NOTE 2)\nIdentifies the RAT type.\nN\nN\nN\nY\nN\nFrequency\n(NOTE 2)\nIdentifies the Frequency value(s) (e.g. high, low).\nN\nN\nN\nY\nN\nApplication Server Addresses (NOTE 1)\nList of IP addresses/FQDNs of the Application Servers the Target of Analytics Reporting has a communication session for which Service Experience Analytic information is requested.\nN\nN\nY\nN\nN\nUPF anchor ID (NOTE 1)\n(NOTE 4)\nIdentifies the UPF where a UE has an associated PDU session\nN\nN\nN\nN\nN\nPDU Session type (NOTE 3)\nIdentifies the type of the associated PDU Session\nN\nN\nN\nN\nC\nSSC Mode (NOTE 3)\nIdentifies the SSC Mode selected for the associated PDU Session\nN\nN\nN\nN\nC\nAccess Type (NOTE 3)\nIdentifies the Access type of the associated PDU Session\nN\nN\nN\nN\nC\nMapped NSSAI\n(NOTE 5)\nIdentifies the mapped NSSAI in the HPLMN. May be used in VPLMN for analytics exposure in roaming case (see clause 6.1.5).\nN\nN\nY\nN\nN\nPLMN ID\nIdentifies the target PLMN (i.e. PLMN from which the analytics are requested, for analytics exposure in roaming case (see clause 6.1.5).\nN\nN\nY\nN\nN\nNOTE 1:\tThese parameters can be provided when a consumer requires analytics for an edge application over a UP path.\nNOTE 2:\tA service consumer can provide either a RAT Type or a Frequency or a specific combination of RAT Type and Frequency. A service consumer can also provide multiple instances of RAT Type or multiple instances of Frequency or multiple combinations of RAT type and Frequency. A service consumer can also provide \"any\" RAT type indication \"any\" Frequency value indication or \"any\" indication for all the RAT type and Frequency value the NWDAF has received for the application.\nNOTE 3:\tOne or more of these parameters can be provided by the consumer when requesting analytics for an application running over a PDU Session(s).\nNOTE 4:\tUPF ID is only needed when the target of NWDAF analytics on Service Experience is a specific UPF.\nNOTE 5:\tThe terms \"HPLMN\" and \"VPLMN\" here refer to a roaming case in which at least one UE served by the NWDAF analytics consumer is involved.\nNOTE 6:\tIf the request is for fine granularity location information (i.e. with a finer granularity than cell), the AOI may be described as shown in clause 5.5 of TS 23.273 [39].\nNOTE 1:\tA service consumer can use the Area of Interest in order to reduce the amount of signalling that the analytics subscription or request generates.\nThe NWDAF shall notify the result of the analytics to the consumer as specified in clause 6.4.3.\nNWDAF collects the network data from AF (directly or via NEF) and from other 5GC NF(s) in order to calculate and provide statistics and predictions on the observed service experience to a consumer NF or to OAM. When the AF provides Service Experience Information and the Target of Analytics Reporting is one or more UE ID(s), the AF may also provide a Service Experience Contribution Weight with each UE's Service Experience value. The Service Experience Contribution Weight is determined by the AF and indicates the relative importance of each UE's Service Experience. The NWDAF may use the Service Experience Contribution Weight(s) to calculate and provide statistics, confidence values and predictions on the observed service experience to a consumer NF or to OAM.\nNOTE 2:\tThe relative importance of that is conveyed in the Service Experience Contribution Weights is used to indicate the relative importance of the Service Experience value (i.e. MOS). For example, it might be that one the Service Experience of one UE is not very important because the UE is an infrequent user of the service, or the UE does not use all features that are associated with the service. Whereas another UE might be considered important because the UE is a frequent user of the service or a user who uses many features that are associated with the service.\nBased on the Analytics Filter information in Table 6.4.1-1 and the Target of Analytics Reporting provided by the service consumer in the analytics subscription or request, NWDAF determines whether service experience analytics should be delivered for:\ni)\tApplication(s);\nii)\tNetwork Slice;\niii)\tboth Application(s) and Network Slice;\niv)\tEdge Applications over a UP path;\nv)\tApplication(s) over RAT Type(s) and/or Frequency value(s);\nvi)\tApplication(s) running over a PDU Session using the following PDU Session parameters or combination of them, i.e. S-NSSAI, DNN, PDU Session type, SSC Mode and optionally per Access Type.\nIf NWDAF is unable to differentiate based on the analytics subscription or request, it provides service experience analytics for both Application(s) and Network Slice.\nIf service experience for both Application(s) and Network Slice is desired but the Target of Analytics Reporting or Analytics Filter information values (e.g. Area of Interest) need to be different, separate subscriptions/requests may be provided by the service consumer.",
      "chunk_type": "definition",
      "cross_references": [
        "clause_6.4.3",
        "clause_6.1.3",
        "clause_6.1.5",
        "ts_23.273_clause_5.5",
        "table_6.4.1-1",
        "table_6.4.3-1",
        "table_6.4.3-2",
        "ts_23.501",
        "ts_23.273"
      ]
    },
    {
      "chunk_id": "ts_23.288_6.4.2",
      "section_id": "6.4.2",
      "section_title": "Input Data",
      "content": "The service data and performance data collected from the AF (including the service data collected from the UE through the AF), the network data from other 5GC NFs and the network data from OAM and MDAS/MDAF for observed service experience are defined in Table 6.4.2-1, 6.4.2-1a, Table 6.4.2-2, Table 6.4.2-3, Table 6.4.2-4 and Table 6.4.2-5 respectively.\nTable 6.4.2-1: Service Data from AF related to the observed service experience\nInformation\nSource\nDescription\nApplication ID\nAF\nTo identify the service and support analytics per type of service (the desired level of service)\nIP filter information\nAF\nIdentify a service flow of the UE for the application\nLocations of Application\nAF/NEF\nLocations of application represented by a list of DNAIs. The NEF may map the AF-Service-Identifier information to a list of DNAI when the DNAI(s) being used by the application are statically defined.\nService Experience\nAF\nRefers to the QoE per service flow as established in the SLA and during on boarding. It can be either e.g. MOS or video MOS as specified in ITU-T P.1203.3 [11] or a customized MOS for any kind of service including those not related to video or voice.\nUE ID\nAF\nThe list of UE IDs that are associated with the Service Experience value(s). When the AF is untrusted, GPSIs will be provided. When the AF is trusted SUPIs will be provided.\nService Experience Contribution Weight\nAF\nThe list of Service Experience Contribution Weights that are associated with each of the provided UE IDs.\nQoE metrics\nUE (via AF)\nQoE metrics observed at the UE(s). QoE metrics and measurement as described in TS 26.114 [27], TS 26.247 [28], TS 26.118 [29], TS 26.346 [30], TS 26.512 [31] or ASP specific QoE metrics in TS 26.512 [31], as agreed in the SLA with the MNO, may be used.\nTimestamp\nAF\nA time stamp associated to the Service Experience provided by the AF, mandatory if the Service Experience is provided by the ASP.\nApplication Server Instance\nAF\nThe IP address or FQDN of the Application Server that the UE had a communication session when the measurement was made.\nNWDAF subscribes to the service data from AF in the Table 6.4.2-1 either directly for trusted AFs by invoking Naf_EventExposure_Subscribe service (Event ID = Service Experience information, Event Filter information = Area of Interest, Application ID) as defined in TS 23.502 [3], or indirectly for untrusted AFs via NEF by invoking Nnef_EventExposure_Subscribe service (Event ID = Service Experience information, Event Filter information = Area of Interest, Application ID) where NEF translates the Area of Interest into geographic zone identifier(s). For the information whose source is UE (via AF), the AF collects data from the UE as defined in clause 6.2.8.\nNOTE:\tWhen the Service Experience is expressed as a customized MOS, the customized MOS might be defined by the content provider or by the MNO and might be based on the nature of the targeted service type (e.g. web browsing, gaming, augmented reality, V2X, SMS).\nTable 6.4.2-1a: Performance Data from AF\nInformation\nSource\nDescription\nUE identifier\nAF\nIP address of the UE at the time the measurements was made.\nUE location\nAF\nThe location of the UE when the performance measurement was made.\nApplication ID\nAF\nTo identify the service and support analytics per type of service (the desired level of service).\nIP filter information\nAF\nIdentify a service flow of the UE for the application.\nLocations of Application\nAF/NEF\nLocations of application represented by a list of DNAIs. The NEF may map the AF-Service-Identifier information to a list of DNAIs when the DNAIs being used by the application are statically defined.\nApplication Server Instance address\nAF/NEF\nThe IP address/FQDN of the Application Server that the UE had a communication session when the measurement was made.\nPerformance Data\nAF\nThe performance associated with the communication session of the UE with an Application Server that includes: Average Packet Delay, Average Loss Rate and Throughput.\nTimestamp\nAF\nA time stamp associated to the Performance Data provided by the AF.\nNWDAF subscribes to the performance data from AF in the Table 6.4.2-1a either directly for trusted AFs by invoking Naf_EventExposure_Subscribe service (Event ID = Performance Data, Event Filter information = Area of Interest, Application ID) as defined in TS 23.502 [3], or indirectly for untrusted AFs via NEF by invoking Nnef_EventExposure_Subscribe service (Event ID = Performance Data, Event Filter information = Area of Interest, Application ID) where NEF translates the Area of Interest into geographic zone identifier(s).\nTable 6.4.2-2: QoS flow level Network Data from 5GC NF related to the QoS profile assigned for a particular service (identified by an Application Id or IP filter information)\nInformation\nSource\nDescription\nTimestamp\n5GC NF\nA time stamp associated with the collected information.\nLocation\nAMF\nThe UE location information, e.g. cell ID or TAI.\nFiner granularity location (1...max)\nGMLC\nUE positions.\n....>UE location\nGAD shape or location coordinates (see TS 23.032 [34]).\n....>Timestamp\nA time stamp when the location was measured.\n....>LCS QoS\nThe accuracy of the measurement.\nUE ID\nAMF\nList of SUPIs. If UE IDs are not provided as Target of Analytics Reporting for slice service experience, AMF returns the UE IDs matching the AMF event filters.\nDNN\nSMF\nDNN for the PDU Session which contains the QoS flow.\nS-NSSAI\nSMF\nS-NSSAI for the PDU Session which contains the QoS flow.\nApplication ID\nSMF\nUsed by NWDAF to identify the application service provider and application for the QoS flow.\nDNAI\nSMF\nIdentifies the access to DN to which the PDN session connects.\nPDU Session type\nSMF\nType of the PDU Session.\nSSC Mode\nSMF\nSSC Mode selected for the PDU Session.\nAccess Type\nSMF\nList of Access Types used for the PDU Session.\nIP filter information\nSMF\nProvided by the SMF, which is used by NWDAF to identify the service data flow for policy control and/or differentiated charging for the QoS flow.\nQFI\nSMF\nQoS Flow Identifier.\nQoS flow Bit Rate\nUPF\nThe observed bit rate for UL direction; and\nThe observed bit rate for DL direction.\nQoS flow Packet Delay\nUPF\nThe observed Packet delay for UL direction; and\nThe observed Packet delay for the DL direction.\nPacket transmission\nUPF\nThe observed number of packet transmission.\nPacket retransmission\nUPF or AF\nThe observed number of packet retransmission.\nNOTE:\tCare needs to be taken with regards to load and major signalling caused when requesting Any UE. This could be achieved via utilization of some event filters (e.g. Area of Interest for AMF), Analytics Reporting Information (e.g. SUPImax), or sampling ratio as part of Event Reporting Information.\nNWDAF subscribes to the network data from 5GC NF(s) in the Table 6.4.2-2 by invoking Nnf_EventExposure_Subscribe service operation with the following Event IDs as input parameters:\n-\tAMF Source: Namf_EventExposure_Subscribe (Event IDs = Location Changes, Area of Interest).\n-\tSMF Source: Nsmf_EventExposure_Subscribe (Event ID = QFI allocation).\nTable 6.4.2-3: UE level Network Data from OAM related to the QoS profile\nInformation\nSource\nDescription\nTimestamp\nOAM\nA time stamp associated with the collected information.\nReference Signal Received Power\nOAM\n(see NOTE 1)\nThe per UE measurement of the received power level in a network cell, including SS-RSRP, CSI-RSRP as specified in clause 5.5 of TS 38.331 [14] and E-UTRA RSRP as specified in clause 5.5.5 of TS 36.331 [15].\nReference Signal Received Quality\nOAM\n(see NOTE 1)\nThe per UE measurement of the received quality in a network cell, including SS-RSRQ, CSI-RSRQ as specified in clause 5.5 of TS 38.331 [14] and E-UTRA RSRQ as specified in clause 5.5.5 of TS 36.331 [15].\nSignal-to-noise and interference ratio\nOAM\n(see NOTE 1)\nThe per UE measurement of the received signal to noise and interference ratio in a network cell, including SS-SINR, CSI-SINR, E-UTRA RS-SINR, as specified in clause 5.1 of TS 38.215 [12].\nRAN Throughput for DL and UL\nOAM\n(see NOTE 1)\nThe per UE measurement of the throughput for DL and UL as specified in clauses 5.2.1.1 and 5.4.1.1 of TS 37.320 [20].\nRAN Packet delay for DL and UL\nOAM\n(see NOTE 1)\nThe per UE measurement of the packet delay for DL and UL, including per QCI per UE packet delay as specified in clause 5.2.1.1 of TS 37.320 [20] and per DRB per UE packet delay as specified in clause 5.4.1.1 of TS 37.320 [20].\nRAN Packet loss rate for DL and UL\nOAM\n(see NOTE 1)\nThe per UE measurement of the packet loss rate for DL and UL, including the per QCI per UE packet loss rate as specified in clause 5.2.1.1 of TS 37.320 [20] and the per DRB per UE packet loss rate as specified in clause 5.4.1.1 of TS 37.320 [20].\nThe mapping information between cell ID and frequency\nOAM\nThe mapping information between cell ID and frequency (NOTE 2).\nCell Energy Saving State\nOAM\nList of the cells which are within the area of interest and are in energy saving state, as specified in clauses 3.1 and 6.2 of TS 28.310 [24].\nNOTE 1:\tPer UE measurement for a specific UE from OAM (via MDT), is as captured in clause 6.2.3.1.\nNOTE 2:\tThe MDT measurement report provides the cell identity and carrier frequency information for UE's serving cell and neighbour cell(s). The NWDAF can get the mapping information between cell ID and frequency using OAM service as described in clause 6.2.3.\nNWDAF subscribes the network data from OAM in the Table 6.4.2-3 by using the services provided by OAM as described in clause 6.2.3.\nTable 6.4.2-4: UE level Network Data from 5G NF related to the Service Experience\nInformation\nSource\nDescription\nTimestamp\n5GC NF\nA time stamp associated with the collected information.\nLocation\nAMF\nThe UE location information, e.g. cell ID or TAI.\nFiner granularity location\nGMLC\nUE positions.\nUE ID\nAMF\nList of SUPIs.\nRAT Type\nSMF\nThe RAT type the UE camps on.\nThe Event Filters for the service data collection from SMF, AMF and AF are defined in TS 23.502 [3].\nThe timestamps are provided by each NF to allow correlation of QoS and traffic KPIs. The clock reference is able to know the accuracy of the time and correlate the time series of the data retrieved from each NF.\nThe NWDAF collects the following MDAF analysis result listed in Table 6.4.2-5, as defined in clauses 8.4.2.1.3 and 8.4.4.1.3 of TS 28.104 [45].\nTable 6.4.2-5: Data collection from MDAS/MDAF of service experience and energy saving state analysis\nInformation\nSource\nDescription\nServiceExperienceIssueType\nMDAF\nIndication of the service experience issue type.\nThe allowed value is one of the enumerated values: RAN issue, CN issue, both.\nAffectedObjects\nMDAF\nThe managed object instances where the service experience is applicable, e.g. SubNetwork Instance, NetworkSlice Instance, S-NSSAI.\nServiceExperienceStatistics\nMDAF\nThe statistics of the level of service experience for a service in a certain time period, e.g. there are five levels which are represented by 1, 2, 3, 4, 5 where level 1 represents the users are enduring bad experience while level 5 represents the users' requirements are perfectly satisfied.\nServiceExperiencePredictions\nMDAF\nThe predictions of the level of service experience for a service in a certain time period.\nStatisticsOfCellsEsState\nMDAF\nThe statistic result of current energy saving state of the cells at a certain time.",
      "chunk_type": "general",
      "cross_references": [
        "clause_6.2.8",
        "ts_38.331_clause_5.5",
        "ts_38.331_clause_5.5.5",
        "ts_38.215_clause_5.1",
        "ts_37.320_clause_5.2.1.1",
        "ts_37.320_clause_5.4.1.1",
        "clause_6.2.3.1",
        "clause_6.2.3",
        "table_6.4.2-1",
        "table_6.4.2-2",
        "table_6.4.2-3",
        "table_6.4.2-4",
        "table_6.4.2-5",
        "ts_28.104_table_6.4.2-5",
        "ts_36.331_clause_5.5.5",
        "ts_26.114",
        "ts_26.247",
        "ts_26.118",
        "ts_26.346",
        "ts_26.512",
        "ts_23.502",
        "ts_23.032",
        "ts_38.331",
        "ts_36.331",
        "ts_38.215",
        "ts_37.320",
        "ts_28.310",
        "ts_28.104"
      ]
    },
    {
      "chunk_id": "ts_23.288_6.4.3",
      "section_id": "6.4.3",
      "section_title": "Output Analytics",
      "content": "The NWDAF services as defined in the clause 7.2 and 7.3 are used to expose the analytics.\n-\tService Experience statistics information is defined in Table 6.4.3-1.\n-\tService Experience predictions information is defined in Table 6.4.3-2.\nTable 6.4.3-1: Service Experience statistics\nInformation\nDescription\nSlice instance service experiences (0..max)\nList of observed service experience information for each Network Slice instance.\n> S-NSSAI\nIdentifies the Network Slice\n> NSI ID (NOTE 2)\nIdentifies the Network Slice instance within the Network Slice.\n> Network Slice instance service experience\nService experience across Applications on a Network Slice instance over the Analytics target period (average, variance).\n> SUPI list (0..SUPImax) (NOTE 3)\nList of SUPI(s) for which the slice instance service experience applies.\n> Ratio (NOTE 3)\nEstimated percentage of UEs with similar service experience (in the group, or among all UEs).\n> Spatial validity (NOTE 6)\nArea where the Network Slice service experience analytics applies.\n> Validity period\nValidity period for the Network Slice service experience analytics as defined in clause 6.1.3.\nApplication service experiences (0..max)\nList of observed service experience information for each Application.\n> S-NSSAI\nIdentifies the Network Slice used to access the Application.\n> Application ID\nIdentification of the Application.\n> Service Experience Type\nType of Service Experience analytics, e.g. on voice, video, other.\n> UE location (NOTE 1, NOTE 5)\nIndicating the UE location information (e.g. TAI list, gNB ID, or location coordinates, etc) when the UE service is delivered.\n> UPF Info (NOTE 4)\nIndicating UPF serving the UE.\n> DNAI\nIndicating which DNAI the UE service uses/camps on.\n> DNN\nDNN for the PDU Session which contains the QoS flow.\n> Application Server Instance Address\nIdentifies the Application Server Instance (IP address of the Application Server) or FQDN of Application Server.\n> Service Experience\nService Experience over the Analytics target period (average, variance).\n> SUPI list (0..SUPImax) (NOTE 3)\nList of SUPI(s) with the same application service experience.\n> Ratio (NOTE 3)\nEstimated percentage of UEs with similar service experience (in the group, or among all UEs).\n> Spatial validity (NOTE 6)\nArea where the Application service experience analytics applies.\n> Validity period\nValidity period for the Application service experience analytics as defined in clause 6.1.3.\n> RAT Type\n(NOTE 7)\nIndicating the list of RAT type(s) for which the application service experience analytics applies.\n> Frequency\n(NOTE 7)\nIndicating the list of carrier frequency value(s) of UE's serving cell(s) where the application service experience analytics applies.\n> SSC Mode\nSSC Mode selected for the PDU Session used to associate with the application.\n> PDU Session Type\nType of PDU Session used to associate with the application.\n> Access Type\nList of  Access Type(s) used for the PDU Session for the application.\nNOTE 1:\tThis information element is an Analytics subset that can be used in \"list of analytics subsets that are requested\" and \"Preferred level of accuracy per analytics subset\".\nNOTE 2:\tThe NSI ID is an optional parameter. If not provided the Slice instance service experience indicates the service experience for the S-NSSAI.\nNOTE 3:\tThe SUPI list and Ratio in the service experience information for an application can be omitted, if the corresponding parameter(s) is/are provided and are assigned with the same value(s) in the service experience information for the slice instance which the application belongs to. Otherwise, the SUPI list and Ratio are mandatory to be provided for an application service experience.\nNOTE 4:\tIf the consumer NF is an AF, the \"UPF info\" shall not be included.\nNOTE 5:\tWhen possible and applicable to the access type, UE location is provided according to the preferred granularity of location information. UE location shall only be included if the Consumer analytics request is for single UE or a list of UEs. Inclusion of UE location requires user consent.\nNOTE 6:\tThe Spatial validity is present in the output parameters if the consumer provided the Area of Interest as defined in Table 6.4.1-1.\nNOTE 7:\tWhen \"any\" value has been provided in the request (e.g. \"any\" RAT type, \"any\" frequency, or \"any\" for all the RAT type and frequency indication), the NWDAF provides an instance of the Application service experience per combination of RAT Type(s) and/or Frequency value(s) having the same Service Experience.\nTable 6.4.3-2: Service Experience predictions\nInformation\nDescription\nSlice instance service experiences (0..max)\nList of observed service experience information for each Network Slice instance.\n> S-NSSAI\nIdentifies the Network Slice\n> NSI ID (NOTE 2)\nIdentifies the Network Slice instance within the Network Slice.\n> Network Slice instance service experience\nService experience across Applications on a Network Slice instance over the Analytics target period (average, variance).\n> SUPI list (0..SUPImax) (NOTE 3)\nList of SUPI(s) for which the slice instance service experience applies.\n> Ratio (NOTE 3)\nEstimated percentage of UEs with similar service experience (in the group, or among all UEs).\n> Spatial validity (NOTE 6)\nArea where the Network Slice service experience analytics applies.\n> Validity period\nValidity period for the Network Slice service experience analytics as defined in clause 6.1.3.\n> Confidence\nConfidence of this prediction.\nApplication service experiences (0..max)\nList of predicted service experience information for each Application.\n> S-NSSAI\nIdentifies the Network Slice used to access the Application.\n> Application ID\nIdentification of the Application.\n> Service Experience Type\nType of Service Experience analytics, e.g. on voice, video, other.\n> UE location (NOTE 1, NOTE 5)\nIndicating the UE location information (e.g. TAI list, gNB ID, or location coordinates, etc.) when the UE service is delivered.\n> UPF Info (NOTE 4)\nIndicating UPF serving the UE.\n> DNAI\nIndicating which DNAI the UE service uses/camps on.\n> DNN\nDNN for the PDU Session which contains the QoS flow.\n> Application Server Instance Address\nIdentifies the Application Server Instance (IP address of the Application Server) or FQDN of Application Server.\n> Service Experience\nService Experience over the Analytics target period (average, variance).\n> SUPI list (0..SUPImax) (NOTE 3)\nList of SUPI(s) with the same application service experience.\n> Ratio (NOTE 3)\nEstimated percentage of UEs with similar service experience (in the group, or among all UEs).\n> Spatial validity (NOTE 6)\nArea where the Application service experience analytics applies.\n> Validity period\nValidity period for the Application service experience analytics as defined in clause 6.1.3.\n> Confidence\nConfidence of this prediction.\n> RAT Type\n(NOTE 7)\nIndicating the list of RAT type(s) for which the application service experience analytics applies.\n> Frequency\n(NOTE 7)\nIndicating the list of carrier frequency value(s) of UE's serving cell(s) where the application service experience analytics applies.\n> SSC Mode\nSSC Mode selected for the PDU Session used to associate with the application.\n> PDU Session Type\nType of PDU Session used to associate with the application.\n> Access Type\nList of Access Type(s) used for the PDU Session for the application.\nNOTE 1:\tThis information element is an Analytics subset that can be used in \"list of analytics subsets that are requested\" and \"Preferred level of accuracy per analytics subset\".\nNOTE 2:\tThe NSI ID is an optional parameter. If not provided the Slice instance service experience indicates the service experience for the S-NSSAI.\nNOTE 3:\tThe SUPI list and Ratio in the service experience information for an application can be omitted, if the corresponding parameter(s) is/are provided and are assigned with the same value(s) in the service experience information for the slice instance which the application belongs to. Otherwise, the SUPI list and Ratio are mandatory to be provided for an application service experience.\nNOTE 4:\tIf the consumer NF is an AF, the \"UPF info\" shall not be included.\nNOTE 5:\tWhen possible and applicable to the access type, UE location is provided according to the preferred granularity of location information. UE location shall only be included if the Consumer analytics request is for single UE or a list of UEs. Inclusion of UE location requires user consent.\nNOTE 6:\tThe Spatial validity is present in the output parameters if the consumer provided the Area of Interest as defined in Table 6.4.1-1.\nNOTE 7:\tWhen \"any\" value has been provided in the request (e.g. \"any\" RAT type, \"any\" frequency, or \"any\" for all the RAT type and frequency indication), the NWDAF provides an instance of the Application service experience per combination of RAT Type(s) and/or Frequency value(s) having the same Service Experience.\nThe number of Service Experiences and SUPIs are limited respectively by the maximum number of objects and the Maximum number of SUPIs provided as part of Analytics Reporting Information by the NWDAF Service Consumer.",
      "chunk_type": "general",
      "cross_references": [
        "clause_7.2",
        "clause_6.1.3",
        "table_6.4.3-1",
        "table_6.4.3-2",
        "table_6.4.1-1"
      ]
    },
    {
      "chunk_id": "ts_23.288_6.4.4",
      "section_id": "6.4.4",
      "section_title": "Procedures to request Service Experience for an Application",
      "content": "Figure 6.4.4-1: Procedure for NWDAF providing Service Experience for an Application\nThis procedure allows the consumer to request Analytics ID \"Service Experience\" for a particular Application. The consumer includes both the Application ID for which the Service Experience is requested and indicates that the Target of Analytics Reporting is \"any UE\". If the Target for Analytics Reporting is either a SUPI or an Internal-Group-Id the procedure in clause 6.4.6 applies. At the same time, for an Application ID, a set of initial QoS parameter combinations per service experience window (e.g. one is for 3<Service MOS<4 and another is for 4<Service MOS<5) is defined in PCF (e.g. by configuration of operator policies) that may be updated based on the Service Experience reported by NWDAF.\n1.\tConsumer NF sends an Analytics request/subscribe (Analytics ID = Service Experience, Target of Analytics Reporting = any UE, Analytics Filter Information that may include one or more of the following as defined in Table 6.4.1-1 (Application ID, S-NSSAI, DNN, Application Server Address(es), Area of Interest, RAT type(s), Frequency value(s)), Analytics Reporting Information=Analytics target period) to NWDAF by invoking a Nnwdaf_AnalyticsInfo_Request or a Nnwdaf_AnalyticsSubscription_Subscribe.\n2a. NWDAF subscribes the service data from AF in the Table 6.4.2-1 by invoking Nnef_EventExposure_Subscribe or Naf_EventExposure_Subscribe service (Event ID = Service Experience information, Application ID, Event Filter information, Target of Event Reporting = Any UE) as defined in TS 23.502 [3].\nNOTE 1:\tIn the case of trusted AF, NWDAF provides the Area of Interest as a list of TAIs to AF. In the case of untrusted AF, NEF translates the requested Area of Interest provided as event filter by NWDAF into geographic zone identifier(s) that act as event filter for AF.\n2b.\tNWDAF subscribes the network data from 5GC NF(s) in the Table 6.4.2-2 by invoking Nnf_EventExposure_Subscribe service operation.\n2c. With these data, the NWDAF estimates the Service experience for the application.\nNOTE 2:\tQoE measurements from the applications are based on outcome of the ongoing SA5 Rel-16 WID \"Management of QoE measurement collection\" which addresses how to collect the QoE measurements from the applications in the UE.\n3.\tThe NWDAF provides the data analytics, i.e. the observed Service Experience (which can be a range of values) to the consumer NF by means of either Nnwdaf_AnalyticsInfo_Request response or Nnwdaf_AnalyticsSubscription_Notify, depending on the service used in step 1, indicating how well the used QoS Parameters satisfy the Service MoS agreed between the MNO and the end user or between the MNO and the external ASP.\nNOTE 3:\tThe call flow only shows a request-response model for the interaction of NWDAF and consumer NF for simplicity instead of both request-response model and subscription-notification model.\nNOTE 4:\tThe non-real time data information from AF includes the service experience data (see Table 6.4.2-1), which indicates the service quality during the service lifetime.\nIf the consumer NF is a PCF and it determines that the application SLA is not satisfied, it may take into account the Observed Service Experience and the operator policies including SLA and required Service Experience (which can be a range of values) to determine new QoS parameters to be applied for the service, as defined in clause 6.1.1.3 and clause 6.2.1.2 of TS 23.503 [4].\nIf the consumer NF is an AF (e.g. MEC or other Application Server), it may use the Observed Service Experience related network data analytics to determine whether the user experience can be satisfied. If not, the AF may determine to adjust service parameters, e.g. for a video service this may be bit rate, frame rate, codec format, compression parameter, screen size, etc. to better match the network conditions and achieve better user experience.\nIf the consumer NF is SMF, PCF or AF/Application Server, it may take into account the Observed Service Experience analytics per UP path (i.e. UPF and/or DNAI and/or AS instance address as defined in Table 6.4.3-1) to perform the following procedures:\n-\tThe consumer SMF determines to (re)selects UP paths, including UPF and DNAI, as described in clause 4.3.5 of TS 23.502 [3]. In addition, the SMF may (re)configure traffic steering, updating the UPF regarding the target DNAI with new traffic steering rules.\n-\tThe consumer AF/Application Server determines to adjust service parameters, e.g. service parameters of video for adjustment may be bit rate, frame rate, codec format, compression parameter, screen size, etc. or service parameters for the AI/ML operations described in clause 6.40 of TS 22.261 [33]. In addition, the AF/ Application Server may provide an updated list of DNAI(s) for SMF to perform relocation when appropriate.\n-\tThe consumer PCF may provide an updated list of DNAI(s) for SMF to perform relocation upon AF request.\nIf the consumer NF is a NEF, it may take into account the Observed Service Experience analytics to support Member UE selection as detailed in clause 4.15.13 of TS 23.502 [3].",
      "chunk_type": "procedure",
      "cross_references": [
        "clause_6.4.6",
        "ts_23.503_clause_6.1.1.3",
        "ts_23.503_clause_6.2.1.2",
        "ts_23.502_clause_4.3.5",
        "ts_22.261_clause_6.40",
        "ts_23.502_clause_4.15.13",
        "table_6.4.1-1",
        "table_6.4.2-1",
        "table_6.4.2-2",
        "table_6.4.3-1",
        "figure_6.4.4-1",
        "ts_23.502",
        "ts_23.503",
        "ts_22.261"
      ]
    },
    {
      "chunk_id": "ts_23.288_6.4.5",
      "section_id": "6.4.5",
      "section_title": "Procedures to request Service Experience for a Network Slice",
      "content": "Figure 6.4.5-1: Procedure for NWDAF providing Service Experience for a UE or a group of UEs in a Network Slice\nThis procedure is similar to the procedure in clause 6.4.4, with the following differences. The consumer needs to request the Analytics ID \"Service Experience\" for a Target for Analytics Reporting as defined in clause 6.1.3 on a Network Slice, identified by an S-NSSAI. If multiple Network Slice instances of the same Network Slice are deployed, associated NSI ID(s) may be used in addition to S-NSSAI. If 'any UE' is the Target of Analytics Reporting, NWDAF may subscribe to UE mobility event notifications of AMF as described in clause 5.3.4.4 of TS 23.501 [2] using event ID \"UE moving in or out of Area of Interest\" and Event Filters as described in Table 5.2.2.3.1-1 of TS 23.502 [3] if it is needed to retrieve the list of SUPIs (and GPSIs if available) in the area of interest. The event exposure service request may also include the immediate reporting flag as Event Reporting Information as described in Table 4.15.1-1 of TS 23.502 [3].\nIn addition, service experience data may need to be collected from multiple Applications. If each Application is hosted in different AFs, NWDAF subscribes the service data in the Table 6.4.2-1 from the different AFs by invoking Nnef_EventExposure_Subscribe or Naf_EventExposure_Subscribe services for each Application (Event ID = Service Experience information, Event Filter information, Application ID) as defined in TS 23.502 [3]. Figure 6.4.5-1 shows an example procedure with two AFs. If one AF provides the service experience data of multiple Applications, the set of Application IDs is provided by NWDAF to the AF with the Naf_EventExposure_Subscribe service operation, as defined TS 23.502 [3].\nThe Observed Service Experience for a Network Slice when consumed by OAM could be used as described in Annex H of TS 28.550 [7].",
      "chunk_type": "procedure",
      "cross_references": [
        "clause_6.4.4",
        "clause_6.1.3",
        "ts_23.501_clause_5.3.4.4",
        "ts_23.502_table_5.2.2.3.1-1",
        "ts_23.502_table_4.15.1-1",
        "table_6.4.2-1",
        "figure_6.4.5-1",
        "ts_23.502_figure_6.4.5-1",
        "ts_23.501",
        "ts_23.502",
        "ts_28.550"
      ]
    },
    {
      "chunk_id": "ts_23.288_6.4.6",
      "section_id": "6.4.6",
      "section_title": "Procedures to request Service Experience for a UE",
      "content": "Figure 6.4.6-1 depicts procedure for NWDAF providing Service Experience for an application for a UE or a group of UEs.\nFigure 6.4.6-1: Procedure for NWDAF providing Service Experience for an application for a UE or a group of UEs\nThe procedure in clause 6.4.4 applies with the following additions. The consumer needs to request the Analytics ID \"Service Experience\" for a UE identified by a SUPI or a group of UEs identified by a list of Internal Group-Ids. The consumer includes both the Application ID for which their Service Experience is requested and the Target of Analytics Reporting. Analytic Filter Information can be set according to clause 6.4.1. The NWDAF may collect UE location information from the GLMC if the consumer requested fine granularity location information according to clause 6.4.2.1. When NEF is the NF service consumer, the NEF translates a GPSI into a SUPI or an External-Group-Id into an Internal-Group-Id then includes it in the Target of Analytics Reporting.",
      "chunk_type": "procedure",
      "cross_references": [
        "clause_6.4.4",
        "clause_6.4.1",
        "clause_6.4.2.1",
        "figure_6.4.6-1"
      ]
    },
    {
      "chunk_id": "ts_23.288_6.5.1",
      "section_id": "6.5.1",
      "section_title": "General",
      "content": "The clause 6.5 describes how NWDAF can provide NF load analytics, in the form of statistics or predictions or both, to another NF.\nThe service consumer may be an NF, or the OAM.\nThe consumer of these analytics shall indicate in the request:\n-\tAnalytics ID = \"NF load information\";\n-\tTarget of Analytics Reporting: an optional SUPI or any UE;\n-\tAnalytics Filter Information:\n-\toptional S-NSSAI;\n-\tan optional list of NF Instance IDs, NF Set IDs, or NF types;\n-\toptional area of interest;\n-\tan optional list of analytics subsets that are requested (see clause 6.5.3);\n-\tOptional preferred level of accuracy of the analytics;\n-\tOptional preferred level of accuracy per analytics subset (see clause 6.5.3);\n-\tOptional preferred order of results for the list of resource status: ascending or descending NF load;\n-\tOptional Reporting Threshold; the Reporting Threshold is unique for all NFs matching the above Analytics Filter and the reporting applies when the conditions are met for at least one of these NFs;\n-\tAn Analytics target period indicates the time period over which the statistics or predictions are requested;\n-\tIn a subscription, the Notification Correlation Id and the Notification Target Address are included.\nThe NWDAF shall notify the result of the analytics to the consumer as indicated in clause 6.5.3.\nIf a list of the NF Instance IDs (or respectively of NF Set IDs) is provided, the NWDAF shall provide the analytics for each designated NF instance (or respectively for each NF instance belonging to each designated NF Set). In such case the Target of Analytics Reporting should be ignored.\nOtherwise, if a SUPI is provided, the NWDAF shall use the SUPI to determine which NF instances (AMF and SMF) are serving this specific UE, filter them according to the provided S-NSSAI and NF types using data collected from NRF or OAM and provide analytics for these NF instances.\nNOTE:\tOnly NF instances of type AMF and SMF can be determined using a SUPI.",
      "chunk_type": "definition",
      "cross_references": [
        "clause_6.5",
        "clause_6.5.3"
      ]
    },
    {
      "chunk_id": "ts_23.288_6.5.2",
      "section_id": "6.5.2",
      "section_title": "Input data",
      "content": "For the purpose of NF load analytics, the NWDAF may collect the information as listed in Table 6.5.2-1 for the relevant NF instance(s).\nTable 6.5.2-1: Data collected by NWDAF for NF load analytics\nInformation\nSource\nDescription\nNF load\nNRF\nThe load of specific NF instance(s) in their NF profile as defined per TS 29.510 [18].\nNF status\nNRF\nThe status of a specific NF instance(s) (registered, suspended, undiscoverable) as defined per TS 29.510 [18].\nNF resource usage\nOAM\nThe usage of assigned virtual resources currently in use for specific NF instance(s) (mean usage of virtual CPU, memory, disk) as defined in clause 5.7 of TS 28.552 [8].\nNF resource configuration\nOAM\nThe life cycle changes of specific NF resources (e.g. NF operational or interrupted during virtual/physical resources reconfiguration) as defined in clause 5.2 of TS 28.533 [19].\nNOTE 1:\tThe OAM information can be used as a complement to NRF information for some or all of the following aspects: resources utilization, NRF information correlation and alternative source of information if NRF information on load is not available.\nNOTE 2:\tNWDAF can request NRF for data related to NF instances, as described in TS 29.510 [18].\nNOTE 3:\tNWDAF can correlate the NF resources configuration with NF resource usage for generating the analytics output.\nIf target NF type is UPF, the NWDAF may collect the information as listed in Table 6.5.2-2, in addition to information listed in Table 6.5.2-1.\nTable 6.5.2-2: Data collected by NWDAF for UPF load analytics\nInformation\nSource\nDescription\nTraffic usage report\nUPF\nReport of user plane traffic in the UPF for the accumulated usage of network resources (see clause 5.2.1.3.3 of TS 29.564 [51]).\nFor the purpose of NF load analytics, the NWDAF may collect the information as listed in Table 6.5.2-3 (from OAM via MDT) and Table 6.5.2-5 via the AF (for trusted AF) or NEF (for untrusted AF) in addition to other information described above.\nTable 6.5.2-3: MDT input data for UE\nInformation\nSource\nDescription\nUE Speed\nOAM\n(see NOTE 1)\nUE Speed (see TS 37.320 [20]).\nUE Orientation\nOAM\n(see NOTE 1)\nUE Orientation (see TS 37.320 [20]).\nNOTE 1:\tUE input data collection for a specific UE from OAM (via MDT), is as captured in clause 6.2.3.1.\nTable 6.5.2-4: Per UE attribute to be collected and processed by the AF\nInformation\nSource\nDescription\nPer UE attribute\nUE Application\n(see NOTE 1)\nUE application data to be collected from UE.\n> Destination\nExpected final location of UE based on the route planned.\n> Route\nPlanned path of movement by a UE application (e.g. a navigation app). The format is based on the SLA.\n> Average Speed\nExpected speed over the route planned by a UE application.\n> Time of arrival\nExpected Time of arrival to destination based on the route planned.\nNOTE 1:\tThe procedure for data collection from UE Application is as covered in clause 6.2.8.\nTable 6.5.2-5: AF input data to the NWDAF for Collective Behaviour of UEs\nInformation\nSource\nDescription\nCollective Attribute\nAF / NEF\n(see NOTE 1, NOTE 2)\nCharacterise collective attribute per set of UEs (see Table 6.5.2-4) within the area of interest.\n> Number of UEs\nTotal number of UEs that fulfil a collective behaviour within the area of interest.\n> Timestamp\nA time stamp of time that the collective attribute derived.\n> Application ID(s)\n(see NOTE 3)\nIdentifying the application providing this information\n> List of UE IDs\n(see NOTE 4)\nUE IDs that fulfil a collective behaviour within the area of interest.\nNOTE 1:\tFor collective behaviour attribute, data processing procedure is as defined in clause 6.2.8.\nNOTE 2:\tPer collective attribute, the AF may provide several collective attribute sets, if several sets of UEs with similar behaviour are identified. A similar behaviour can be identified to specific ranges if the AF performs data processing (Data Anonymisation, Aggregation or Normalization) based on NWDAF request. UEs falling in the same range per UE attribute can form a collective attribute set.\nNOTE 3:\tThe application ID(s) (either external or Internal) is optional. If the application ID(s) is not provided, the relevant application ID(s) can be identified by NWDAF based on the relevant event ID as registered in NRF as covered in clause 6.2.8.2.2.\nNOTE 4:\tList of UE IDs is optional and subject to support by the AF when processing the data based on NWDAF request.\nBased on network configuration, NWDAF may discover the AF from the NRF as defined in 6.2.8.2.2 (based on Collective Behaviour as Event ID or a corresponding Application ID).\nFor AF in trusted domain, the NWDAF invokes step 3a in clause 6.2.8.2.3 by using Naf_EventExposure_Subscribe service (Event ID = Collective Behaviour, Event Filter information, Target of Event Reporting). The collective attribute (see Table 6.5.2-5) can be indicated as part of event filter information as defined in TS 23.502 [3]. Otherwise, the AF notifies for all collective attributes within the area of interest.\nFor AF in untrusted domain, the NWDAF invokes step 3b in clause 6.2.8.2.3 by using Nnef_EventExposure_Subscribe (Event ID = Collective Behaviour, Event Filter information, Target of Event Reporting). The collective attribute (see Table 6.5.2-5) can be indicated as part of event filter information as defined in TS 23.502 [3]. Otherwise, the AF via NEF notifies for all collective attributes within the area of interest.\nFor Collective Behaviour of multiple UEs, NWDAF based on the configuration by MNO may request certain type of data processing from the AF as part of event filter information (e.g. for anonymisation, normalisation, aggregation). The data processing requested by NWDAF is used to anonymise, normalise or aggregate the same UE attribute from multiple UEs at the AF before notifying to the NWDAF.\nFor each UE attribute of a specific UE, whether and how AF is processing the data that is received from the UE depends on the SLA configured in AF (defined in clause 6.2.8.1) and is not known by the NWDAF.\nTo determine NF load (per area of interest), NWDAF may collect and take into account UE trajectory input data from the AF, defined in clause 6.7.2.2, Table 6.7.2.2-2 for UE mobility analytics in addition to MDT input data and /or collective behaviour input data, defined in clause 6.5.2, Table 6.5.2-3 and Table 6.5.2-5, respectively.",
      "chunk_type": "general",
      "cross_references": [
        "ts_28.552_clause_5.7",
        "ts_28.533_clause_5.2",
        "ts_29.564_clause_5.2.1.3.3",
        "clause_6.2.3.1",
        "clause_6.2.8",
        "clause_6.2.8.2.2",
        "clause_6.2.8.2.3",
        "clause_6.2.8.1",
        "clause_6.7.2.2",
        "clause_6.5.2",
        "table_6.5.2-1",
        "table_6.5.2-2",
        "table_6.5.2-3",
        "table_6.5.2-5",
        "table_6.5.2-4",
        "table_6.7.2.2-2",
        "ts_29.510",
        "ts_28.552",
        "ts_28.533",
        "ts_29.564",
        "ts_37.320",
        "ts_23.502"
      ]
    },
    {
      "chunk_id": "ts_23.288_6.5.3",
      "section_id": "6.5.3",
      "section_title": "Output analytics",
      "content": "The NWDAF services as defined in the clause 7.2 and 7.3 are used to expose the analytics. NF load statistics information are defined in Table 6.5.3-1. NF load predictions information are defined in Table 6.5.3-2.\nTable 6.5.3-1: NF load statistics\nInformation\nDescription\nList of resource status (1..max)\nList of observed load information for each NF instance along with the corresponding NF id / NF Set ID (as applicable).\n> NF type\nType of the NF instance.\n> NF instance ID\nIdentification of the NF instance.\n> NF status (NOTE 1)\nThe availability status of the NF on the Analytics target period, expressed as a percentage of time per status value (registered, suspended, undiscoverable).\n> NF resource usage (NOTE 1)\nThe average usage of assigned resources (CPU, memory, disk).\n> NF load (NOTE 1)\nThe average load of the NF instance over the Analytics target period.\n> NF peak load (NOTE 1)\nThe maximum load of the NF instance over the Analytics target period.\n> NF load (per area of interest) (NOTE 1, NOTE 2)\nThe average load of the NF instances over the area of interest.\nNOTE 1:\tAnalytics subset that can be used in \"list of analytics subsets that are requested\" and \"Preferred level of accuracy per analytics subset\".\nNOTE 2:\tApplicable only to AMF load based on Input data in clause 6.5.2, Table 6.5.2-3 and Table 6.5.2-5.\nTable 6.5.3-2: NF load predictions\nInformation\nDescription\nList of resource status (1..max)\nList of predicted load information for each NF instance along with the corresponding NF id / NF Set ID (as applicable)\n> NF type\nType of the NF instance\n> NF instance ID\nIdentification of the NF instance\n> NF status (NOTE 1)\nThe availability status of the NF on the Analytics target period, expressed as a percentage of time per status value (registered, suspended, undiscoverable)\n> NF resource usage (NOTE 1)\nThe average usage of assigned resources (CPU, memory, disk)\n> NF load (NOTE 1)\nThe average load of the NF instance over the Analytics target period\n> NF peak load (NOTE 1)\nThe maximum load of the NF instance over the Analytics target period\n> Confidence\nConfidence of this prediction\n> NF load (per area of interest) (NOTE 1, NOTE 2)\nThe predicted average load of the NF instances over the area of interest.\nNOTE 1:\tAnalytics subset that can be used in \"list of analytics subsets that are requested\" and \"Preferred level of accuracy per analytics subset\".\nNOTE 2:\tApplicable only to AMF load based on Input data in clause 6.5.2, Table 6.5.2-3 and Table 6.5.2-5.\nNOTE:\tThe variations on per-instance NF load and resource usage could be influenced by the number of running NF instances in addition to the load itself.\nThe predictions are provided with a Validity Period, as defined in clause 6.1.3.\nThe number of resource status is limited by the maximum number of objects provided as part of Analytics Reporting Information.",
      "chunk_type": "general",
      "cross_references": [
        "clause_7.2",
        "clause_6.5.2",
        "clause_6.1.3",
        "table_6.5.3-1",
        "table_6.5.3-2",
        "table_6.5.2-3",
        "table_6.5.2-5"
      ]
    },
    {
      "chunk_id": "ts_23.288_6.5.4",
      "section_id": "6.5.4",
      "section_title": "Procedures",
      "content": "The procedure depicted in Figure 6.5.4-1 allows a consumer NF to request analytics to NWDAF for NF load of various NF instances as defined in 6.5.1.\nFigure 6.5.4-1: NF load analytics provided by NWDAF\n1.\tThe NF sends a request to the NWDAF for analytics for NF load for a specific NF, using either the Nnwdaf_AnalyticsInfo or Nnwdaf_AnalyticsSubscription service. The Analytics ID is set to NF load information, the Target of Analytics Reporting and the Analytics Filter Information are set according to clause 6.5.1. The NF can request statistics or predictions or both and can provide a time window.\n2-5.\tIf the request is authorized and in order to provide the requested analytics, the NWDAF may need for each NF targeted instance to subscribe to OAM services to retrieve the target NF resource usage and NF resources configuration following steps captured in clause 6.2.3.2 for data collection from OAM. The NWDAF may collect MDT input data per individual UE from OAM (see Table 6.5.2-3). Steps 2-5 may be skipped when e.g. the NWDAF already has the requested analytics.\n6.\tFor Collective Behaviour attributes, if the request is authorized and in order to provide the requested analytics, NWDAF may follow the UE Input Data Collection Procedure via the AF as defined in clause 6.2.8 (see Table 6.5.2-4 and Table 6.5.2-5).\nThe NWDAF subscribes to the AF services as above invoking either Nnef_EventExposure_Subscribe or Naf_EventExposure_Subscribe service (Event ID = Collective Behaviour, Event Filter information, Target of Event Reporting) as defined in TS 23.502 [3]. The area of interest is set as part of Event Filter information to specific TAs or AMF region. The UE data is collected from UEs within the area of interest.\nIn the case of trusted AF, the NWDAF provides the Area of Interest as a list of TAIs to the AF. In the case of untrusted AF, NEF translates the requested Area of Interest provided as event filter by the NWDAF into geographic zone identifier(s) that act as event filter for the AF.\nFor collective attributes as defined in Table 6.5.2-5, the AF processes (e.g. anonymize, aggregate and normalize) the data from individual UEs per UE attribute (see Table 6.5.2-4) based on Event Filters indicated by the NWDAF to determine which ones display a collective behaviour within the area of interest before notifying a collective attribute directly (trusted AF) or via NEF (for untrusted AF) to the NWDAF. The AF will provide (per collective attribute) e.g. the number of UEs that fulfil the collective attribute (within an area of interest).\nNOTE 1:\tThe call flow only shows a subscription/notification model for the simplicity, however both request-response and subscription-notification models should be supported.\nNOTE 2:\tIf the target NF type is UPF, the NWDAF can collect the information as listed in Table 6.5.2-2. How the NWDAF collects information is defined in clause 5.8.2.17 of TS 23.501 [2] and in clause 4.15.4 of TS 23.502 [3].\n7a.\tThe NWDAF subscribes to changes on the load and status of NF instances registered in NRF and identified by their NF id from NRF using Nnrf_NFManagement_NFStatusSubscribe service operation for each NF instance.\n7b. NRF notifies NWDAF of changes on the load and status of the requested NF instances by using Nnrf_NFManagement_NFStatusNotify service operation.\n8.\tThe NWDAF derives requested analytics.\n9.\tThe NWDAF provides requested NF load analytics to the NF along with the corresponding Validity Period (only for predictions) or area of interest, using either the Nnwdaf_AnalyticsInfo_Request response or Nnwdaf_AnalyticsSubscription_Notify, depending on the service used in step 1.\n10-12. If at step 1 the NF has subscribed to receive continuous reporting of NF load analytics, the NWDAF may generate new analytics and, when relevant according to the Analytics target period and Reporting Threshold, provide them along with the corresponding Validity Period (only for predictions) to the NF upon reception of notification of new NF load information from OAM or NRF or UE Input data notification via MDT or the AF (see Table 6.5.2-3 and Table 6.5.2-5).\nNOTE 3:\tIf the target NF type at step 1 is UPF, the NWDAF can generate new analytics when receiving new information as listed in Table 6.5.2-2.",
      "chunk_type": "procedure",
      "cross_references": [
        "clause_6.5.1",
        "clause_6.2.3.2",
        "clause_6.2.8",
        "ts_23.501_clause_5.8.2.17",
        "ts_23.501_clause_4.15.4",
        "table_6.5.2-3",
        "table_6.5.2-4",
        "table_6.5.2-5",
        "table_6.5.2-2",
        "figure_6.5.4-1",
        "ts_23.502_clause_4.15.4",
        "ts_23.502",
        "ts_23.501"
      ]
    },
    {
      "chunk_id": "ts_23.288_6.6.1",
      "section_id": "6.6.1",
      "section_title": "General",
      "content": "With Network Performance Analytics, NWDAF provides either statistics or predictions on the gNB status information, gNB resource usage, communication performance and mobility performance in an Area of Interest. In addition, NWDAF can provide statistics or predictions on the number of UEs located in that Area of Interest.\nThe service consumer may be an NF (e.g. PCF, NEF, AF), or the OAM.\nThe consumer of these analytics may indicate in the request:\n-\tAnalytics ID = \"Network Performance\";\n-\tTarget of Analytics Reporting as defined in clause 6.1.3;\n-\tAnalytics Filter Information:\n-\tArea of Interest (list of TAs or Cell IDs) which restricts the area in focus (mandatory if Target of Analytics Reporting is set to \"any UE\", optional otherwise);\n-\tOptionally, Traffic type of interest (overall traffic, GBR traffic or Delay-critical GBR traffic);\nNOTE:\tIf Traffic type of interest is not provided, overall traffic is considered.\n-\tOptionally, a list of analytics subsets that are requested among those specified in clause 6.6.3;\n-\tOptionally, a preferred level of accuracy of the analytics;\n-\tOptionally, preferred level of accuracy per analytics subset (see clause 6.6.3);\n-\tOptionally, preferred order of results for the list of Network Performance information:\n-\tordering criterion: \"number of UEs\", \"communication performance\" or \"mobility performance\";\n-\torder: ascending or descending;\n-\tOptionally, Reporting Thresholds, which apply only for subscriptions and indicate conditions on the level to be reached for respective analytics information (see clause 6.6.3) in order to be notified by the NWDAF;\n-\tAn Analytics target period indicates the time period over which the statistics or prediction are requested; and\n-\tOptionally, maximum number of objects.\n-\tIn a subscription, the Notification Correlation Id and the Notification Target Address are included.\n-\tOptionally, Spatial granularity size (if an Area of Interest is provided) and Temporal granularity size.\nThe NWDAF notifies the result of the analytics to the consumer as indicated in clause 6.6.3.",
      "chunk_type": "definition",
      "cross_references": [
        "clause_6.1.3",
        "clause_6.6.3"
      ]
    },
    {
      "chunk_id": "ts_23.288_6.6.2",
      "section_id": "6.6.2",
      "section_title": "Input Data",
      "content": "The NWDAF collects Load and Performance information in an Area of Interest from the sources listed in Table 6.6.2-1 and number of UEs within Area of Interest from the sources listed in Table 6.6.2-2.\nTable 6.6.2-1: Load and Performance information collected by NWDAF\nLoad information\nSource\nDescription\nStatus, load and performance information\nOAM\nStatistics on RAN status (up/down), load (i.e. Radio Resource Utilization) and performance per Cell Id for the traffic type of interest and in the Area of Interest as defined in TS 28.552 [8].\nNF Load information\nNRF\nLoad per NF\nTable 6.6.2-2: Number of UEs in Area of Interest information collected by NWDAF\nNumber of UEs information\nSource\nDescription\nNumber of UEs\nAMF\nNumber of UEs in an Area of Interest\nThe NWDAF shall be able to collect UE mobility information as stated in clause 6.7.2.2.",
      "chunk_type": "general",
      "cross_references": [
        "clause_6.7.2.2",
        "table_6.6.2-1",
        "table_6.6.2-2",
        "ts_28.552"
      ]
    },
    {
      "chunk_id": "ts_23.288_6.6.3",
      "section_id": "6.6.3",
      "section_title": "Output Analytics",
      "content": "The NWDAF shall be able to provide both statistics and predictions on Network Performance.\nNetwork performance statistics are defined in Table 6.6.3-1.\nTable 6.6.3-1: Network performance statistics\nInformation\nDescription\nList of network performance information (1..max)\nObserved statistics during the Analytics target period.\n> Area subset\nList of TAs or Cell IDs within the requested area of interest as defined in clause 6.6.1. If a Spatial granularity size was provided in the request or subscription, the number of elements of the list is smaller than or equal to the Spatial granularity size.\n> Analytics target period subset\nTime window within the requested Analytics target period as defined in clause 6.6.1. If a Temporal granularity size was provided in the request or subscription, the duration of the Analytics target period subset is greater than or equal to the Temporal granularity size.\n> gNB status information (NOTE 1)\nAverage ratio of gNBs that have been up and running during the entire Analytics target period in the area subset.\n> gNB resource usage (NOTE 1) (NOTE 2)\nUsage of assigned resources (average, peak).\n> gNB resource usage for GBR traffic (NOTE 1) (NOTE 2) (NOTE 3)\nUsage of assigned resources for GBR traffic (average, peak).\n> gNB resource usage for Delay-critical GBR traffic (NOTE 1) (NOTE 2) (NOTE 3)\nUsage of assigned resources for Delay-critical GBR traffic (average, peak).\n> Number of UEs (NOTE 1)\nAverage number of UEs observed in the area subset.\n> Communication performance (NOTE 1)\nAverage ratio of successful setup of PDU Sessions.\n> Mobility performance (NOTE 1)\nAverage ratio of successful handover.\nNOTE 1:\tAnalytics subset that can be used in \"list of analytics subsets that are requested\" and \"Preferred level of accuracy per analytics subset\".\nNOTE 2:\tThe average and peak usage of uplink and downlink traffic are provided as percentage.\nNOTE 3\tThe resource usage (average, peak) for GBR and Delay-critical GBR traffic types can be computed using the sub-counters of their corresponding 5QI measurements, as defined in clause 5.1.1.2 of TS 28.552 [8].\nNetwork performance predictions are defined in Table 6.6.3-2.\nTable 6.6.3-2: Network performance predictions\nInformation\nDescription\nList of network performance information (1..max)\nPredicted analytics during the Analytics target period\n> Area subset\nList of TAs or Cell IDs within the requested area of interest as defined in clause 6.6.1. If a Spatial granularity size was provided in the request or subscription, the number of elements of the list is smaller than or equal to the Spatial granularity size.\n> Analytics target period subset\nTime window within the requested Analytics target period as defined in clause 6.6.1. If a Temporal granularity size was provided in the request or subscription, the duration of the Analytics target period subset is greater than or equal to the Temporal granularity size.\n> gNB status information (NOTE 1)\nAverage ratio of gNBs that will be up and running during the entire Analytics target period in the area subset.\n> gNB resource usage (NOTE 1) (NOTE 2)\nUsage of assigned resources (average, peak)\n> gNB resource usage for GBR traffic (NOTE 1) (NOTE 2) (NOTE 3)\nUsage of assigned resources for GBR traffic (average, peak).\n> gNB resource usage for Delay-critical GBR traffic (NOTE 1) (NOTE 2) (NOTE 3)\nUsage of assigned resources for Delay-critical GBR traffic (average, peak).\n> Number of UEs (NOTE 1)\nAverage number of UEs predicted in the area subset.\n> Communication performance (NOTE 1)\nAverage ratio of successful setup of PDU Sessions.\n> Mobility performance (NOTE 1)\nAverage ratio of successful handover.\n> Confidence\nConfidence of this prediction.\nNOTE 1:\tAnalytics subset that can be used in \"list of analytics subsets that are requested\" and \"Preferred level of accuracy per analytics subset\".\nNOTE 2:\tThe average and peak usage of uplink and downlink traffic are provided as percentage.\nNOTE 3:\tThe resource usage (average, peak) for GBR and Delay-critical GBR traffic types can be computed using the sub-counters of their corresponding 5QI measurements, as defined in clauses 5.1.1.2 of TS 28.552 [8].\nNOTE 1:\tThe predictions are provided with a Validity Period, as defined in clause 6.1.3.\nNOTE 2:\tThe analytics on number of UEs are related to the information retrieved from the AMFs.\nThe number of network performance information entries is limited by the maximum number of objects provided as part of Analytics Reporting Information.\nThe NWDAF provides Network Performance Analytics to a consumer at the time requested by the consumer in the Analytics target period:\n-\tAnalytics ID set to \"Network Performance\".\n-\tNotification Target Address including the address of the consumer.\n-\tNotification Correlation ID, for the consumer to correlate notifications from NWDAF if subscription applies.\n-\tAnalytics specific parameters at the time indicated in the Analytics target period.",
      "chunk_type": "requirement",
      "cross_references": [
        "clause_6.6.1",
        "ts_28.552_clause_5.1.1.2",
        "clause_6.1.3",
        "table_6.6.3-1",
        "table_6.6.3-2",
        "ts_28.552"
      ]
    },
    {
      "chunk_id": "ts_23.288_6.6.4",
      "section_id": "6.6.4",
      "section_title": "Procedures",
      "content": "Figure 6.6.4-1: Procedure for subscription to network performance analytics\n1.\tThe NF sends Nnwdaf_AnalyticsSubscription_Subscribe or Nnwdaf_AnalyticsInfo_Request (Analytics ID=\"Network Performance\", Target of Analytics Reporting, Analytics Filter Information = \"Area of Interest\", Analytics Reporting Information = (\"Reporting Thresholds\" and Analytics target Period(s))) to the NWDAF.\n2a-2d.\tThe NWDAF discovers from NRF the AMF(s) belonging to the AMF Region(s) that include(s) the Area of Interest and subscribes to NF load and status information from NRF about these AMF(s).\n3a-3b.\tThe NWDAF subscribes to OAM services to get the status and load information and the resource usage on the Area of Interest in clause 6.6.2, following the procedure captured in Clause 6.2.3.2.\n4a-4b.\tThe NWDAF collects the number of UEs located in the Area of Interest from AMF using Namf_EventExposure_Subscribe service, including the Target of Event Reporting provided as an input parameter (i.e. any UE or Internal Group Identifier).\n5.\tThe NWDAF derives the requested analytics.\n6.\tThe NWDAF sends Nnwdaf_AnalyticsSubscription_Notify or Nnwdaf_AnalyticsInfo_Request response (Network Performance analytics, Subscription Correlation Id, Confidence).\n7-8. A change of network performance information, i.e. change in the gNB status information, gNB resource usage, communication performance and mobility performance in the area of interest at the observed period, is detected by OAM, or a change in the NF load information is reported by NRF and is notified to NWDAF.\n9.\tThe NWDAF derives new analytics taking into account the most recent data collected.\n10.\tWhen relevant according to the Analytics target period and Reporting Thresholds, the NWDAF provides a notification using Nnwdaf_AnalyticsSubscription_Notify (Network Performance analytics, Subscription Correlation Id, Confidence).",
      "chunk_type": "procedure",
      "cross_references": [
        "clause_6.6.2",
        "clause_6.2.3.2",
        "figure_6.6.4-1"
      ]
    },
    {
      "chunk_id": "ts_23.288_6.7.1",
      "section_id": "6.7.1",
      "section_title": "General",
      "content": "This clause specifies the UE related analytics which can be provided by NWDAF:\n-\tUE mobility analytics;\n-\tUE communication analytics;\n-\tExpected UE behavioural parameters related network data analytics; and\n-\tAbnormal behaviour related network data analytics.\nThe NWDAF service consumer may request for these analytics separately, or in a combined way. As an example, an NWDAF service consumer may learn from the NWDAF the expected UE behaviour parameters as defined in clause 4.15.6.3 of TS 23.502 [3], by requesting analytics for both UE mobility (see clause 6.7.2) and for UE communication (see clause 6.7.3).\nDepending on local regulations, the NWDAF retrieves user consent for the UE with UDM prior to data collection as defined in clause 6.2.2.2 or clause 6.2.2.3. If user consent to collect data is not granted by the UE, the NWDAF rejects/cancels any analytics subscriptions to any of the UE related analytics with target for analytics set to the SUPI or GPSI of that UE. If the target for analytics is either an Internal or External Group Id or a list of SUPIs or \"any UE\", the NWDAF skips those SUPIs that do not grant user consent for the purpose of analytics or model training.\nNOTE:\tPossible uses of such analytics is for the AMF to learn about expected UE behaviour to derive appropriate MICO mode configuration, or for an AF to learn about expected UE behaviour to further provision 5GC with appropriate UE parameters.",
      "chunk_type": "definition",
      "cross_references": [
        "ts_23.502_clause_4.15.6.3",
        "clause_6.7.2",
        "clause_6.7.3",
        "clause_6.2.2.2",
        "clause_6.2.2.3",
        "ts_23.502"
      ]
    },
    {
      "chunk_id": "ts_23.288_6.7.2.1",
      "section_id": "6.7.2.1",
      "section_title": "General",
      "content": "NWDAF supporting UE mobility statistics or predictions shall be able to collect UE mobility related information from NF, OAM and to perform data analytics to provide UE mobility statistics or predictions.\nThe service consumer may be a NF (e.g. AMF, SMF or AF).\nThe consumer of these analytics may indicate in the request:\n-\tAnalytics ID = \"UE Mobility\".\n-\tTarget of Analytics Reporting: a single UE (SUPI) or group of UEs (i.e. a list of Internal Group Ids);\n-\tAnalytics Filter Information optionally containing:\n-\tArea of Interest (AOI): restricts the scope of the UE mobility analytics to the provided area. If the request is for fine granularity location information (i.e. with a finer granularity than cell), the AOI may be described as shown in clause 5.5 of TS 23.273 [39];\nNOTE 1:\tFor LADN service, the consumer (e.g. SMF) provides the LADN DNN to refer the LADN service area as the AOI.\n-\tVisited Area(s) of Interest (visited AOI(s)): additional filter to only consider UEs that are currently (i.e. now) in the \"AOI\" and had previously (i.e. in the \"Analytics target period\") been in at least one of the Visited AOI(s). If this parameter is provided, the Analytics target period shall be in the past (i.e. supported for statistics only);\n-\tLinear distance threshold: An event where the UE moves by more than some predefined straight line distance from a previous location as per TS 23.273 [39]. The consumer can provide more than one value of Linear distance threshold.\n-\tan optional list of analytics subsets that are requested (see clause 6.7.2.3);\n-\tAn Analytics target period indicates the time period over which the statistics or predictions are requested;\nNOTE 2:\tFor regular analytics scenarios, the Analytics target period is associated with the Analytics Filter Information = AOI, while for the scenario that Analytics ID=UE Mobility and Analytics Filter Information = (AOI and visited AOI(s)), as described in this clause, the Analytics target period is associated with the visited AOI(s) and to obtain the statistics for those UEs that currently reside in the AOI and had previously (i.e. in the \"Analytics target period\") been in at least one of the Visited AOI(s).\n-\tOptionally, maximum number of objects;\n-\tPreferred level of accuracy of the analytics;\n-\tOptionally, Preferred level of accuracy per analytics subset (see clause 6.7.2.3);\n-\tPreferred order of results for the time slot entries: ascending or descending time slot start;\n-\tOptionally, preferred granularity of location information: TA level or cell level \"longitude and latitude level\";\nNOTE 3:\tDefinition of \"longitude and latitude level\" is described in clause 6.1.3.\n-\tOptionally, Preferred orientation of location information: (\"horizontal\", \"vertical\", \"both\");\n-\tOptionally, Spatial granularity size and Temporal granularity size;\n-\tUE Location order indicator: indicates the NWDAF should derives and provides the UE Mobility analytics for UE Location in time order; and\n-\tIn a subscription, the Notification Correlation Id and the Notification Target Address are included.",
      "chunk_type": "definition",
      "cross_references": [
        "ts_23.273_clause_5.5",
        "clause_6.7.2.3",
        "clause_6.1.3",
        "ts_23.273"
      ]
    },
    {
      "chunk_id": "ts_23.288_6.7.2.2",
      "section_id": "6.7.2.2",
      "section_title": "Input Data",
      "content": "The NWDAF supporting data analytics on UE mobility shall be able to collect UE mobility information from OAM, 5GC and AFs. The detailed information collected by the NWDAF could be MDT data from OAM, network data from 5GC and/or service data from AFs:\n-\tUE mobility information from OAM is UE location carried in MDT data;\n-\tNetwork data related to UE mobility from 5GC is UE location information, UE location trends or UE access behaviour trends, as defined in the Table 6.7.2.2-1;\nTable 6.7.2.2-1: UE Mobility information collected from 5GC\nInformation\nSource\nDescription\nUE ID\nAMF\nSUPI.\nUE locations (1..max)\nAMF\nUE positions.\n>UE location\nTA or cells that the UE enters (NOTE 1).\n>Timestamp\nA time stamp when the AMF detects the UE enters this location.\nFine granularity location (1...max)\nLCS\n(NOTE 2)\nUE positions.\n....>UE location\nGAD shape or location coordinates (see TS 23.032 [34]).\n....>Timestamp\nA time stamp when the location was measured.\n....>LCS QoS\nLCS QoS accuracy as defined in clause 4.1b of TS 23.273 [39].\n....>Motion Event Notification)\nThe notification about motion event reporting as described in TS 23.273 [39].\n....>Liner distance threshold\nNWDAF consumer\nThe distance travelled by the UE before reporting subsequent location as described in TS 23.273 [39].\nType Allocation code (TAC)\nAMF\nTo indicate the terminal model and vendor information of the UE. The UEs with the same TAC may have similar mobility behaviour. The UE whose mobility behaviour is unlike other UEs with the same TAC may be an abnormal one.\nFrequent Mobility Registration Update\nAMF\nA UE (e.g. a stationary UE) may re-select between neighbour cells due to radio coverage fluctuations. This may lead to multiple Mobility Registration Updates if the cells belong to different registration areas. The number of Mobility Registration Updates N within a period M may be an indication for abnormal ping-pong behaviour, where N and M are operator's configurable parameters.\nUE access behaviour trends\nAMF\nMetrics on UE state transitions (e.g. access, RM and CM states, handover).\nUE location trends\nAMF\nMetrics on UE locations.\nNOTE 1:\tUE location includes either the last known location or the current location, under the conditions defined in Table 4.15.3.1-1 in TS 23.502 [3].\nNOTE 2:\tThe procedure to collect location data using LCS is described in clause 6.2.12.\n-\tService data related to UE mobility provided by AFs is defined in the Table 6.7.2.2-2;\nTable 6.7.2.2-2: Service Data from AF related to UE mobility\nInformation\nDescription\nUE ID\nCould be external UE ID (i.e. GPSI).\nApplication ID\nIdentifying the application providing this information.\nUE trajectory (1..max)\nTimestamped UE positions.\n>UE location\nGeographical area that the UE enters.\n>Timestamp\nA time stamp when UE enters this area.\nA list of areas\nA list of areas used by the AF for the application service.\nNOTE:\tThe application ID is optional. If the application ID is omitted, the collected UE mobility information can be applicable to all the applications for the UE.\nDepending on the requested level of accuracy, data collection may be provided on samples (e.g. spatial subsets of UEs or UE group, temporal subsets of UE location information).\nNOTE:\tReporting current UE location can cause AMF to request NG-RAN to report UE location and consequently extra signalling and load in NG-RAN and AMF. The consumer retrieving data from AMF needs to use current location with care to avoid excessive signalling.",
      "chunk_type": "requirement",
      "cross_references": [
        "ts_23.273_clause_4.1",
        "clause_6.2.12",
        "table_6.7.2.2-1",
        "ts_23.502_table_4.15.3.1-1",
        "table_6.7.2.2-2",
        "ts_23.032",
        "ts_23.273",
        "ts_23.502"
      ]
    },
    {
      "chunk_id": "ts_23.288_6.7.2.3",
      "section_id": "6.7.2.3",
      "section_title": "Output Analytics",
      "content": "The NWDAF supporting data analytics on UE mobility shall be able to provide UE mobility analytics to consumer NFs or AFs. The analytics results provided by the NWDAF could be UE mobility statistics as defined in table 6.7.2.3-1, UE mobility predictions as defined in Table 6.7.2.3-2:\nTable 6.7.2.3-1: UE mobility statistics\nInformation\nDescription\nUE group ID or UE ID\nIdentifies the UE(s) for which the statistic applies by a list of SUPIs, or a group of UEs by a list of Internal-Group-Ids defined in clause 5.9.7 of TS 23.501 [2] (see NOTE 1).\nTime slot entry (1..max)\nList of time slots during the Analytics target period.\n> Time slot start\nTime slot start within the Analytics target period.\n> Duration\nDuration of the time slot. If a Temporal granularity size was provided in the request or subscription, the Duration is greater than or equal to the Temporal granularity size.\n> UE location (1..max)\nObserved location statistics (see NOTE 2).\n>> UE location (NOTE 5)\nTAs or cells which the UE stays or geographical location (longitude and latitude level) (see NOTE 3).\n>> Ratio (NOTE 5)\nPercentage of UEs in the group (in the case of a UE group).\n>> UE's geographical distribution (NOTE 5)\nThe geographical distribution of the UEs among the TAs or cells or location coordinates.\n>> Requested Linear Distance Threshold (NOTE 4)\nThe linear distance threshold used for UE location reporting.\n>> Geographical Identifier (NOTE 5)\nGeographical Identifier as specified in TS 23.228 [47] (see NOTE 6).\n> UE's direction (NOTE 5)\nThe direction of the UEs in the Area of Interest.\nNOTE 1:\tWhen Target of Analytics Reporting is an individual UE, one UE ID (i.e. SUPI) will be included, the NWDAF will provide the analytics mobility result (i.e. list of (predicted) time slots) to NF service consumer(s) for the UE.\nNOTE 2:\tIf Visited AOI(s) was provided in the analytics request/subscription, the UE location provides information on the observed location(s) that the UE or group of UEs had been residing during the Analytics Target Period.\nNOTE 3:\tWhen possible and applicable to the access type, UE location is provided according to the preferred granularity of location information and Spatial granularity size.\nNOTE 4:\tThe requested Linear Distance Threshold is provided only when in the analytic filter information of the analytics request there are multiple linear distance thresholds and the target is a single UE.\nNOTE 5:\tAnalytics subset that can be used in \"list of analytics subsets that are requested\" and \"Preferred level of accuracy per analytics subset\".\nNOTE 6:\tIt depends on the implementation how the NWDAF collects the geographic identifier.\nTable 6.7.2.3-2: UE mobility predictions\nInformation\nDescription\nUE group ID or UE ID\nIdentifies the UE(s) for which the prediction applies by a list of SUPIs, or a group of UEs by a list of Internal-Group-Ids defined in clause 5.9.7 of TS 23.501 [2] (see NOTE 1).\nTime slot entry (1..max)\nList of predicted time slots.\n>Time slot start\nTime slot start time within the Analytics target period.\n> Duration\nDuration of the time slot. If a Temporal granularity size was provided in the request or subscription, the Duration is greater than or equal to the Temporal granularity size.\n> UE location (1..max)\nPredicted location prediction during the Analytics target period.\n>> UE location (NOTE 3)\nTAs or cells where the UE or UE group may move into or geographical location (longitude and latitude level) (see NOTE 2).\n>> Confidence\nConfidence of this prediction.\n>> Ratio (NOTE 3)\nPercentage of UEs in the group (in the case of a UE group).\n>> UE's geographical distribution (NOTE 3)\nThe geographical distribution of the UEs among the TAs or cells or location coordinates.\n>> Geographical Identifier (NOTE 3)\nGeographical Identifier as specified in TS 23.228 [47] (see NOTE 4).\n> UE's direction (NOTE 3)\nThe direction of the UEs in the Area of Interest.\nNOTE 1:\tWhen Target of Analytics Reporting is an individual UE, one UE ID (i.e. SUPI) will be included, the NWDAF will provide the analytics mobility result (i.e. list of (predicted) time slots) to NF service consumer(s) for the UE.\nNOTE 2:\tWhen possible and applicable to the access type, UE location is provided according to the preferred granularity of location information and Spatial granularity size.\nNOTE 3:\tAnalytics subset that can be used in \"list of analytics subsets that are requested\" and \"Preferred level of accuracy per analytics subset\".\nNOTE 4:\tIt depends on the implementation how the NWDAF collects the geographic identifier.\nThe results for UE groups address the group globally. The ratio is the proportion of UEs in the group at a given location at a given time.\nThe number of time slots and UE locations is limited by the maximum number of objects provided as part of Analytics Reporting Information.\nThe time slots shall be provided by order of time, possibly overlapping. The locations shall be provided by decreasing value of ratio for a given time slot. The sum of all ratios on a given time slot must be equal or less than 100%. Depending on the list size limitation, the least probable locations on a given Analytics target period may not be provided.\nIf a UE Location order indicator is included in the Analytics Reporting information, the NWDAF does not aggregate the UE locations in a long duration but provides the UE locations one by one in their own time period, i.e. the \"UE location (1..max)\" in the UE Mobility analytics has only one UE location (TA, Cell or a finer granularity UE Location smaller than cell) which indicates the UE is located in this UE location in the duration from the time slot start (i.e. time stamp when the UE enters this location as described in clause 6.7.2.2).",
      "chunk_type": "requirement",
      "cross_references": [
        "ts_23.501_clause_5.9.7",
        "clause_6.7.2.2",
        "table_6.7.2.3-1",
        "table_6.7.2.3-2",
        "ts_23.501",
        "ts_23.228"
      ]
    },
    {
      "chunk_id": "ts_23.288_6.7.2.4",
      "section_id": "6.7.2.4",
      "section_title": "Procedures",
      "content": "The NWDAF can provide UE mobility related analytics, in the form of statistics or predictions or both, directly to another NF. If the NF is an AF and when the AF is untrusted, the AF will request analytics via the NEF and the NEF will then convey the request to NWDAF.\nNOTE:\tIn the case of untrusted AF the Target of Analytics Reporting can be a GPSI or an External Group Identifier that is mapped in the 5GC to a SUPI or an Internal Group Identifier.\nFigure 6.7.2.4-1: UE mobility analytics provided to an Analytics Service Consumer\n1.\tThe NF sends a request (Analytics ID = UE mobility, Target of Analytics Reporting = UE id or Internal Group ID, Analytics Filter Information = AOI, Analytics Reporting Information= Analytics target period and/or UE Location order indicator) to the serving NWDAF for analytics information on a specific UE or group of UEs, i.e. list of Internal-Group-Ids, using either the Nnwdaf_AnalyticsInfo or Nnwdaf_AnalyticsSubscription service to derive UE mobility information. The NF can request statistics or predictions or both. For LADN service, the NF (i.e. SMF) provides LADN DNN as AOI in the Analytics Filter Information.\nIf NF wants to obtain the aggregated mobility analytics of those UEs, that currently reside in the AOI and had visited at least one of visited AOI(s) during an Analytics target period, the NF may send a request for UE mobility analytics with Analytics ID = UE mobility, Target of Analytics Reporting = UE group ID or UE ID, Analytics Filter Information = (AOI, visited AOI(s)), Analytics Reporting information = Analytics target period. In this case, the requested mobility analytics is a statistics.\n2.\tIf the request is authorized and in order to provide the requested analytics, the NWDAF may subscribe to events with all the serving AMFs for the requested UE(s), for notification of location changes. This step may be skipped when e.g. the NWDAF already has the requested analytics available.\nThe NWDAF subscribes the service data for the requested UE(s) from AF(s) in the Table 6.7.2.2-2 by invoking Naf_EventExposure_Subscribe service or Nnef_EventExposure_Subscribe (if via NEF) using event ID \"UE Mobility information\" as defined in TS 23.502 [3].\nThe NWDAF collects UE mobility information from OAM for the requested UE(s), following the procedure captured in clause 6.2.3.2.\nThe NWDAF may collect UE location information from the GLMC, which may initiate the UE location service procedure and gets the location of each requested UE(s), if the consumer requested fine granularity location information and/or one or more location requests corresponding to the linear distance threshold values in the analytics request according to clause 6.7.2.1.\nNOTE 1:\tThe NWDAF determines the serving AMF(s) as described in clause 6.2.2.1.\n3.\tThe NWDAF derives requested analytics.\nIf in step 1 the NWDAF receives analytics subscription/request from NF to obtain the aggregated mobility analytics of those UEs, which currently reside in AOI and had visited at least one of visited AOI(s) during an Analytics target period and if visited AOI(s) and AOI are covered by different NWDAFs, in addition to the data collected in the AOI in step 2, the NWDAF can also obtain UE mobility analytics in one of the visited AOI(s) during the Analytics target period from other NWDAF instance(s) for the requested UE(s). Then the NWDAF supporting analytics aggregation capability derives a UE ID list based on the request from the NF in step 1 and the requested aggregated analytics based on the data collected in the AOI in step 2 and UE mobility analytics in one or more of the visited AOI(s) obtained from the other NWDAF instance(s). UE visited locations in visited AOI(s) and AOI will be included in the aggregated UE mobility analytics.\nNOTE 2:\tIf the visited AOI(s) and AOI are covered by different NWDAFs, then consumer in the AOI firstly discovers a NWDAF supporting analytics aggregation capability in the AOI from the NRF, as defined in clause 6.3.13 of TS 23.501 [2].\n4.\tThe NWDAF provides requested UE mobility analytics to the NF, using either the Nnwdaf_AnalyticsInfo_Request response or Nnwdaf_AnalyticsSubscription_Notify, depending on the service used in step 1. The details for UE mobility analytics provided by NWDAF are defined in clause 6.7.2.3.\nIf in step 1 the NF wants to obtain the aggregated mobility analytics of those UEs, that currently reside in the AOI and had visited at least one of visited AOI(s) during an Analytics target period, the NWDAF will provide the requested aggregated analytics for the UE(s) matching this criteria, i.e. the derived mobility analytics can cover a subset of UEs compared to the Target of Analytics Reporting as provided in step 1.\n5-6.\tIf at step 1, the NF has subscribed to receive notifications for UE mobility analytics, after receiving event notification from the AMFs, AFs, GMLC and OAM subscribed by NWDAF in step 2, the NWDAF may generate new analytics and provide them to the NF.",
      "chunk_type": "procedure",
      "cross_references": [
        "clause_6.2.3.2",
        "clause_6.7.2.1",
        "clause_6.2.2.1",
        "ts_23.501_clause_6.3.13",
        "clause_6.7.2.3",
        "table_6.7.2.2-2",
        "figure_6.7.2.4-1",
        "ts_23.502",
        "ts_23.501"
      ]
    },
    {
      "chunk_id": "ts_23.288_6.7.3.1",
      "section_id": "6.7.3.1",
      "section_title": "General",
      "content": "In order to support some optimized operations, e.g. customized mobility management, traffic routing handling, RFSP Index Management, QoS improvement or Inactivity Timer optimization, in 5GS, an NWDAF may perform data analytics on UE communication pattern and user plane traffic and provide the analytics results (i.e. UE communication statistics or prediction) to NFs in the 5GC or an AF.\nAn NWDAF supporting UE Communication Analytics collects per-application communication description from AFs. If consumer NF provides an Application ID, the NWDAF only considers the data from AF, SMF and UPF that corresponds to this application ID. NWDAF may also collect data from AMF.\nThe consumer of these analytics may indicate in the request:\n-\tAnalytics ID = \"UE Communication\".\n-\tTarget of Analytics Reporting: a single UE (SUPI) or group of UEs (a list of Internal-Group-Ids).\n-\tAnalytics Filter Information optionally including:\n-\tS-NSSAI;\n-\tDNN;\n-\tApplication ID;\n-\tArea of Interest.\n-\tan optional list of analytics subsets that are requested (see clause 6.7.3.3);\n-\tAn Analytics target period indicates the time period over which the statistics or predictions are requested.\n-\tPreferred level of accuracy of the analytics.\n-\tOptional Preferred level of accuracy per analytics subset (see clause 6.7.3.3);\n-\tOptional preferred order of results for the list of UE Communications:\n-\tordering criterion: \"start time\" or \"duration\",\n-\torder: ascending or descending;\n-\tOptionally, maximum number of objects;\n-\tOptionally, Spatial granularity size (if an Area of Interest is provided); and\n-\tIn a subscription, the Notification Correlation Id and the Notification Target Address are included.",
      "chunk_type": "definition",
      "cross_references": [
        "clause_6.7.3.3"
      ]
    },
    {
      "chunk_id": "ts_23.288_6.7.3.2",
      "section_id": "6.7.3.2",
      "section_title": "Input Data",
      "content": "The NWDAF supporting data analytics on UE communication shall be able to collect communication information for the UE from 5GC. The detailed information collected by the NWDAF includes service data related to UE communication as defined in the Table 6.7.3.2-1.\nTable 6.7.3.2-1: Service Data from 5GC related to UE communication\nInformation\nSource\nDescription\nUE ID\nSMF, AF\nSUPI in the case of SMF, external UE ID (i.e. GPSI) in the case of AF\nGroup ID\nSMF, AF\nTo identify UE group if available\nInternal Group ID in the case of SMF, External Group ID in the case of AF\nS-NSSAI\nSMF\nInformation to identify a Network Slice\nDNN\nSMF\nData Network Name where PDU connectivity service is provided\nApplication ID\nSMF, AF\nIdentifying the application providing this information\nExpected UE Behaviour parameters\nAF\nSame as Expected UE Behaviour parameters specified in TS 23.502 [3]\nUE communication (1..max)\nUPF, AF\nCommunication description per application\n>Communication start\nThe time stamp that this communication starts\n>Communication stop\nThe time stamp that this communication stops\n>UL data rate\nUL data rate of this communication\n>DL data rate\nDL data rate of this communication\n>Traffic volume\nTraffic volume of this communication\nType Allocation code (TAC)\nAMF\nTo indicate the terminal model and vendor information of the UE. The UEs with the same TAC may have similar communication behaviour. The UE whose communication behaviour is unlike other UEs with the same TAC may be an abnormal one.\nUE locations (1..max)\nAMF\nUE positions\n>UE location\nTA or cells that the UE enters\n>Timestamp\nA time stamp when the AMF detects the UE enters this location\nUE location trends\nAMF\nMetrics on UE locations.\nPDU Session ID (1..max)\nSMF\nIdentification of PDU Session.\n> Inactivity detection time\nSMF, UPF\nValue of session inactivity timer.\n> PDU Session status\nSMF\nStatus of the PDU Session (activated, deactivated).\nUE CM state\nAMF\nUE connection management state (e.g. CM-IDLE).\nUE session behaviour trends\nSMF\nMetrics on UE state transitions (e.g. \"PDU Session Establishment\", \"PDU Session Release\").\nUE communication trends\nSMF\nMetrics on UE communications.\nUE access behaviour trends\nAMF\nMetrics on UE state transitions (e.g. access, RM and CM states, handover).\nDepending on the requested level of accuracy, data collection may be provided on samples (e.g. spatial subsets of UEs or UE group, temporal subsets of UE communication information).\nThe application Id is optional. If the application Id is omitted, the collected UE communication information can be applicable to all the applications for the UE.",
      "chunk_type": "requirement",
      "cross_references": [
        "table_6.7.3.2-1",
        "ts_23.502"
      ]
    },
    {
      "chunk_id": "ts_23.288_6.7.3.3",
      "section_id": "6.7.3.3",
      "section_title": "Output Analytics",
      "content": "The NWDAF supporting UE Communication Analytics provides the analytics results to consumer NFs. The analytics results provided by the NWDAF include the UE communication statistics as defined in Table 6.7.3.3-1 or predictions as defined in Table 6.7.3.3-2.\nTable 6.7.3.3-1: UE Communication Statistics\nInformation\nDescription\nUE group ID or UE ID\nIdentifies the UE(s) for which the statistic applies by a list of SUPIs, or a group of UEs by a list of Internal-Group-Ids defined in clause 5.9.7 of TS 23.501 [2].\nUE communications (1..max) (NOTE 1)\nList of communication time slots.\n> Periodic communication indicator (NOTE 1)\nIdentifies whether the UE communicates periodically or not.\n> Periodic time (NOTE 1)\nInterval Time of periodic communication (average and variance) if periodic.\nExample: every hour\n> Start time (NOTE 1)\nStart time observed (average and variance)\n> Duration (NOTE 1)\nDuration of communication (average and variance).\n> Traffic characterization\nS-NSSAI, DNN, ports, other useful information.\n> Traffic volume (NOTE 1)\nVolume UL/DL (average and variance).\n> Ratio\nPercentage of UEs in the group (in the case of a UE group).\nApplications (0..max) (NOTE 1)\nList of applications in use.\n> Application Id\nIdentification of the application.\n> Start time\nStart time of the application.\n> Duration time\nDuration interval time of the application.\n> Occurrence ratio\nProportion for the application used by the UE during requested period.\n> Spatial validity\nArea where the service behaviour applies. If Area of Interest information was provided in the request or subscription, spatial validity may be a subset of the requested Area of Interest.\nN4 Session ID (1..max) (NOTE 1) (NOTE 2)\nIdentification of N4 Session.\n> Inactivity detection time\nValue of session inactivity timer (average and variance).\nNOTE 1:\tAnalytics subset that can be used in \"list of analytics subsets that are requested\" and \"Preferred level of accuracy per analytics subset\".\nNOTE 2:\tThis analytics subset shall only be included if the consumer is SMF.\nTable 6.7.3.3-2: UE Communication Predictions\nInformation\nDescription\nUE group ID or UE ID\nIdentifies the UE(s) for which the statistic applies by a list of SUPIs, or a group of UEs by a list of Internal-Group-Ids defined in clause 5.9.7 of TS 23.501 [2].\nUE communications (1..max) (NOTE 1)\nList of communication time slots.\n> Periodic communication indicator (NOTE 1)\nIdentifies whether the UE communicates periodically or not.\n> Periodic time (NOTE 1)\nInterval Time of periodic communication (average and variance) if periodic.\nExample: every hour.\n> Start time (NOTE 1)\nStart time predicted (average and variance).\n> Duration time (NOTE 1)\nDuration interval time of communication.\n> Traffic characterization\nS-NSSAI, DNN, ports, other useful information.\n> Traffic volume (NOTE 1)\nVolume UL/DL (average and variance).\n> Confidence\nConfidence of the prediction.\n> Ratio\nPercentage of UEs in the group (in the case of a UE group).\nApplications (0..max) (NOTE 1)\nList of applications in use.\n> Application Id\nIdentification of the application.\n> Start time\nStart time of the application.\n> Duration time\nDuration interval time of the application.\n> Occurrence probability\nProbability the application will be used by the UE.\n> Spatial validity\nArea where the service behaviour applies. If Area of Interest information was provided in the request or subscription, spatial validity may be a subset of the requested Area of Interest. If a Spatial granularity size was provided in the request or subscription, the number of elements of TAs or cells in the area is smaller than or equal to the Spatial granularity size.\nN4 Session ID (1..max) (NOTE 1) (NOTE 2)\nIdentification of N4 Session.\n> Inactivity detection time\nValue of session inactivity timer (average and variance).\n> Confidence\nConfidence of the prediction.\nNOTE 1:\tAnalytics subset that can be used in \"list of analytics subsets that are requested\" and \"Preferred level of accuracy per analytics subset\".\nNOTE 2:\tThis analytics subset shall only be included if the consumer is SMF.\nNOTE:\tWhen Target of Analytics Reporting is an individual UE, one UE ID (i.e. SUPI) will be included, the NWDAF will provide the analytics communication result (i.e. list of (predicted) communication time slots) to NF service consumer(s) for the UE.\nThe results for UE groups address the group globally. The ratio is the proportion of UEs in the group for a given communication at a given time and duration.\nThe number of UE communication entries (1..max) is limited by the maximum number of objects provided as part of Analytics Reporting Information. The communications shall be provided by order of time, possibly overlapping.\nDepending on the list size limitation, the least probable communications on a given Analytics target period may not be provided.",
      "chunk_type": "general",
      "cross_references": [
        "ts_23.501_clause_5.9.7",
        "table_6.7.3.3-1",
        "table_6.7.3.3-2",
        "ts_23.501"
      ]
    },
    {
      "chunk_id": "ts_23.288_6.7.3.4",
      "section_id": "6.7.3.4",
      "section_title": "Procedures",
      "content": "The NWDAF can provide UE communication related analytics, in the form of statistics or predictions or both, to a 5GC NF.\nFigure 6.7.3.4-1: Procedure for UE communication analytics\n1.\t5GC NF to NWDAF: Nnwdaf_AnalyticsSubscription_Subscribe (Analytics ID = UE communication, Target of Analytics Reporting=SUPI, Analytics Filter Information = (Application ID, Area of Interest, etc.)).\n5GC NF sends a request to the NWDAF for analytics on a specific UE(s), using either Nnwdaf_AnalyticsInfo or Nnwdaf_AnalyticsSubscription_Subscribe service. The analytics type indicated by \"Analytics ID\" is set to \"UE communication\". The Target of Analytics Reporting is set to SUPI or an Internal Group Identifier and Analytics Filter may include Application ID and Area of Interest.\n2a-b.\tNWDAF to AF (Optional): Naf_EventExposure_Subscribe (Event ID, external UE ID, Application ID, Area of Interest).\nIn order to provide the requested analytics, the NWDAF may subscribe per application communication information, which is identified by Application ID, from AFs for the UE. The Event ID \"UE Communication information\" as defined in TS 23.502 [3] is used, which indicates communication report for the UE which is requested by the 5GC NF in the step 1. The external UE ID is obtained by the NWDAF based on UE internal ID, i.e. SUPI. In the case of external AF, the NEF translates the requested Area of Interest into a list of geographic zone identifier(s) as described in clause 5.6.7.1 of TS 23.501 [2].\nThis step is skipped if the NWDAF already has the requested analytics available or has subscribed to the AF.\n2c.\tNWDAF to SMF: Nsmf_EventExposure_Subscribe (Event ID, SUPI, Application ID).\nIn order to provide the requested analytics, the NWDAF subscribes via SMF to UPF information on SUPI, providing e.g. Indication of UPF Event Exposure Service and Target subscription UPF Event Id, Filter Information such as Application ID and/or Area of Interest. This is specified in clause 5.8.2.17 of TS 23.501 [2] and clause 4.15.4 of TS 23.502 [3].\n2d.\tHow SMF subscribes to on UPF is defined in clause 5.8.2.17 of TS 23.501 [2] and in clause 4.15.4 of TS 23.502 [3].\nNOTE:\tThe NWDAF request does not trigger any N4 session Establishment/Modification procedure. UPF sends N4 session level reports, including PDU session Inactivity to SMF, according to clause 4.4.2.2 of TS 23.502 [3].\n2f.\tThe UPF provides the requested input data to NWDAF. This is specified in clause 4.15.4 of TS 23.502 [3].\n2g-h.\tNWDAF to AMF: Namf_EventExposure_Subscribe (Event ID, SUPI, Area of Interest).\nIn order to provide the requested analytics, the NWDAF retrieves one or more of Type Allocation code, UE connection management state, UE access behaviour trends and UE location trends from AMF.\nNOTE:\tThe NWDAF determines the SMF serving the UE as described in clause 6.2.2.1.\n3.\tThe NWDAF derives requested analytics, in the form of UE communication statistics or predictions or both.\n4.\tNWDAF to 5GC NF: Nnwdaf_AnalyticsInfo_Request response or Nnwdaf_AnalyticsSubscription_Notify.\nThe NWDAF provides requested UE communication analytics to the NF, using either Nnwdaf_AnalyticsInfo_Request response or Nnwdaf_AnalyticsSubscription_Notify, depending on the service used in step 1.\n5.\tIf the NF subscribed UE communication analytics at step 1, when, based e.g. on new UPF notifications the NWDAF generates new analytics, the NWDAF notifies the new generated analytics to the 5GC NF.",
      "chunk_type": "procedure",
      "cross_references": [
        "ts_23.501_clause_5.6.7.1",
        "ts_23.501_clause_5.8.2.17",
        "ts_23.501_clause_4.15.4",
        "ts_23.502_clause_4.4.2.2",
        "ts_23.502_clause_4.15.4",
        "clause_6.2.2.1",
        "figure_6.7.3.4-1",
        "ts_23.502",
        "ts_23.501"
      ]
    },
    {
      "chunk_id": "ts_23.288_6.7.4.1",
      "section_id": "6.7.4.1",
      "section_title": "General",
      "content": "The clause 6.7.4 defines how a service consumer learns from the NWDAF the expected UE behaviour parameters as defined in clause 4.15.6.3 of TS 23.502 [3] for a group of UEs or a specific UE.\nThe service consumer may be an NF (e.g. AMF, AF), or the OAM.\nThe consumer of these analytics shall indicate in the request:\n-\tAnalytics ID = \"UE Mobility\" or \"UE Communication\".\n-\tTarget of Analytics Reporting: a single UE (SUPI) or group of UEs (i.e. a list of Internal Group Ids).\nNOTE:\tIn the case of untrusted AF the Target of Analytics Reporting can be a GPSI or an External Group Identifier that is mapped in the 5GC to a SUPI or an Internal Group Identifier\n-\tAn Analytics target period, which indicates the time period over which the statistics or predictions are requested.\n-\tAnalytics Filter Information optionally including:\n-\tArea of Interest (AOI);\n-\tS-NSSAI;\n-\tDNN;\n-\tApplication ID;\n-\tan optional list of analytics subsets that are requested (see clause 6.7.3.3).\n-\tOptional maximum number of objects.\n-\tIn a subscription, the Notification Correlation Id and the Notification Target Address are included.\nThe NWDAF shall notify the result of the analytics to the consumer as indicated in clause 6.7.4.3.",
      "chunk_type": "definition",
      "cross_references": [
        "clause_6.7.4",
        "ts_23.502_clause_4.15.6.3",
        "clause_6.7.3.3",
        "clause_6.7.4.3",
        "ts_23.502"
      ]
    },
    {
      "chunk_id": "ts_23.288_6.7.4.2",
      "section_id": "6.7.4.2",
      "section_title": "Input Data",
      "content": "In order to produce \"UE Mobility\" analytics, the NWDAF collects UE mobility information, UE location trends and/or UE access behaviour trends, as defined in clause 6.7.2.2.\nIn order to produce \"UE Communication\" analytics, the NWDAF collects UE communication information, UE communication trends, UE session behaviour trends and/or UE access behaviour trends, as defined in clause 6.7.3.2.",
      "chunk_type": "general",
      "cross_references": [
        "clause_6.7.2.2",
        "clause_6.7.3.2"
      ]
    },
    {
      "chunk_id": "ts_23.288_6.7.4.3",
      "section_id": "6.7.4.3",
      "section_title": "Output Analytics",
      "content": "The analytics results for \"UE Mobility\" are specified in Table 6.7.2.3-1 and Table 6.7.2.3-2.\nThe analytics results for \"UE Communication\" are specified in Table 6.7.3.3-1 and Table 6.7.3.3-2.",
      "chunk_type": "general",
      "cross_references": [
        "table_6.7.2.3-1",
        "table_6.7.2.3-2",
        "table_6.7.3.3-1",
        "table_6.7.3.3-2"
      ]
    },
    {
      "chunk_id": "ts_23.288_6.7.4.4.1",
      "section_id": "6.7.4.4.1",
      "section_title": "NWDAF-assisted expected UE behavioural analytics",
      "content": "Figure 6.7.4.4.1-1: NWDAF assisted expected UE behavioural analytics procedure\n1.\t5GC NF (e.g. AMF, SMF and AF) to NWDAF: Nnwdaf_AnalyticsInfo_Request (Analytics ID, Target of Analytics Reporting, Analytics Filter Information) or Nnwdaf_AnalyticsSubscription_Subscribe (Analytics ID, Target of Analytics Reporting, Analytics Filter Information).\nThe Analytics ID is set to \"UE Mobility\" or to \"UE Communication\",\" and the consumer request analytics.\n2.\tIf Analytics ID is set to \"UE Mobility\", the NWDAF collects data from OAM, AMF and/or AF as specified in clause 6.7.2.4 step 2, unless the information is already available.\nIf Analytics ID is set to \"UE Communication\", the NWDAF collects data from AMF, SMF and/or AF as specified in clause 6.7.3.4 step 2, unless the information is already available.\n3.\tThe NWDAF derives requested analytics.\n4.\tNWDAF to 5GC NF: Nnwdaf_AnalyticsInfo_Request response or Nnwdaf_AnalyticsSubscription_Notify.\nThe NWDAF provides requested Expected UE behaviour to the NF, using either Nnwdaf_AnalyticsInfo_Request response or Nnwdaf_AnalyticsSubscription_Notify, depending on the service used in step 1.\n5-6.\tIf the NF subscribed to at step 1, when the NWDAF generates new analytics, it provides the new generated analytics to the NF.",
      "chunk_type": "general",
      "cross_references": [
        "clause_6.7.2.4",
        "clause_6.7.3.4",
        "figure_6.7.4.4.1-1"
      ]
    },
    {
      "chunk_id": "ts_23.288_6.7.5.1",
      "section_id": "6.7.5.1",
      "section_title": "General",
      "content": "This clause defines how to identify a group of UEs or a specific UE with abnormal behaviour, e.g. being misused or hijacked, with the help of NWDAF.\nNOTE 1:\tThe misused or hijacked UEs are UEs in which there are malicious applications running or UEs which have been stolen.\nThe consumer of this analytics could be a 5GC NF. The 5GC NF subscribes analytics on abnormal behaviour from a NWDAF based on the UE subscription, network configuration or application layer request.\nThe NWDAF performs data analytics on abnormal behaviour if there is a related subscription and returns exception reports that result from the analysis of the correlations between behavioural variables. The exception reports contain an Exception Level expressed in the form of a scalar value, possibly supplemented by additional measurements.\nThe consumer of this analytics shall indicate in the request:\n-\tAnalytics ID = \"Abnormal behaviour\";\n-\tTarget of Analytics Reporting as defined in clause 6.1.3;\n-\tAn Analytics target period indicates the time period over which the statistics or predictions are requested;\n-\tAnalytics Filter Information optionally including:\n-\texpected UE behaviour parameters;\n-\texpected analytics type or list of Exception IDs with associated thresholds for the Exception Level, where the expected analytics type can be mobility related, communication related or both;\n-\tArea of interest;\n-\tApplication ID;\n-\tDNN;\n-\tS-NSSAI.\nNOTE 2:\tThe expected analytics type generally indicates whether mobility or communication related abnormal behaviour analytics or both are expected by the consumer and the list of exception IDs indicates what specific analytics are expected by the consumer. Either the expected analytics type or the list of Exception IDs needs to be indicated, but they are not presented simultaneously. When the expected analytics type is indicated, the NWDAF performs corresponding abnormal behaviour analytics which are supported by the NWDAF. The relation between the expected analytics type and Exception IDs is defined in Table 6.7.5.1-1.\n-\tOptionally, maximum number of objects and maximum number of SUPIs;\n-\tIn a subscription, the Notification Correlation Id and the Notification Target Address are included.\nTable 6.7.5.1-1: Relation between expected analytics type and Exception IDs\nExpected analytics type\nException IDs matching the expected analytics type\nmobility related\nUnexpected UE location, Ping-ponging across neighbouring cells, Unexpected wakeup, Unexpected radio link failures.\ncommunication related\nUnexpected long-live/large rate flows, Unexpected wakeup, Suspicion of DDoS attack, Wrong destination address, Too frequent Service Access.\nIf the Target of Analytics Reporting is any UE, then the Analytics Filter should at least include:\n-\tArea of Interest or S-NSSAI, if the expected analytics type or the list of Exception IDs is mobility related.\n-\tArea of Interest, application ID, DNN or S-NSSAI, if the expected analytics type or the list of Exception IDs is communication related.\nIf the Target of Analytics Reporting is any UE, the consumer of this analytics shall request either mobility related only or communication related only abnormal behaviour analytics, but not both at the same time.\nThe expected UE behaviour parameters that the consumer can indicate in the request when known depend on the Exception ID that the consumer expects. They may encompass UE behaviour parameters as defined in clause 4.15.6.3 of TS 23.502 [3] and other parameters. Table 6.7.5.1-2 shows the mapping between each Exception ID and UE behaviour parameters.\nTable 6.7.5.1-2: Description of Expected UE Behaviour parameters per Exception ID\nException ID\nUE behaviour parameters to provide\nUnexpected UE location\nExpected UE Moving Trajectory\nStationary Indication\nUnexpected long-live/large rate flows\nPeriodic Time\nScheduled Communication Time\nCommunication Duration Time\nUnexpected wakeup\nPeriodic Time\nCommunication Duration Time\nScheduled Communication Time\nSuspicion of DDoS attack\nPeriodic Time\nCommunication Duration Time\nScheduled Communication Time\nScheduled Communication Type\nTraffic Profile\nExpected transaction Dispersion\nToo frequent Service Access\nPeriodic Time\nUnexpected radio link failures\nExpected UE Moving Trajectory\nPing-ponging across neighbouring cells\nExpected UE Moving Trajectory\nStationary Indication\nWhen the NWDAF detects those UEs that deviate from the expected UE behaviour, e.g. unexpected UE location, abnormal traffic pattern, unexpected transaction dispersion amount, wrong destination address, etc. the NWDAF shall notify the result of the analytics to the consumer as specified in clause 6.7.5.3.",
      "chunk_type": "definition",
      "cross_references": [
        "clause_6.1.3",
        "ts_23.502_clause_4.15.6.3",
        "clause_6.7.5.3",
        "table_6.7.5.1-1",
        "table_6.7.5.1-2",
        "ts_23.502"
      ]
    },
    {
      "chunk_id": "ts_23.288_6.7.5.2",
      "section_id": "6.7.5.2",
      "section_title": "Input Data",
      "content": "The Exceptions information from AF is as specified in Table 6.7.5.2-1.\nOn request of the service consumer, the NWDAF shall collect and analyse UE behavioural information from the 5GC NFs (SMF, AMF, AF), or OAM as specified in clauses 6.7.2.2 and 6.7.3.2 and/or expected UE behavioural parameters from UDM as defined in clause 4.15.6.3, TS 23.502 [3], depending on Exception IDs.\nNOTE:\tCare needs to be taken with regards to load by avoiding to cause major extra signalling when collecting data for any UE.\nTable 6.7.5.2-1: Exceptions information from AF\nInformation\nDescription\nIP address 5-tuple\nTo identify a data flow of a UE via the AF (such as the Firewall or a Threat Intelligence Sharing platform)\nExceptions (1..max) (NOTE 1)\n>Exception ID\nIndicating the Exception ID (such as Unexpected long-live/large rate flows and Suspicion of DDoS attack as defined in Table 6.7.5.3-2) of the data flow.\n>Exception Level\nScalar value indicating the severity of the abnormal behaviour.\n>Exception trend\nMeasured trend (up/down/unknown/stable)\nNOTE 1:\tThe Exceptions information and the UE behavioural information as defined in clauses 6.7.2.2 and 6.7.3.2 could help NWDAF to train an Abnormal classifier, which could be used to classify a UE behaviour data into Normal behaviour or Exception.",
      "chunk_type": "requirement",
      "cross_references": [
        "ts_23.502_clause_4.15.6.3",
        "table_6.7.5.2-1",
        "table_6.7.5.3-2",
        "ts_23.502"
      ]
    },
    {
      "chunk_id": "ts_23.288_6.7.5.3",
      "section_id": "6.7.5.3",
      "section_title": "Output Analytics",
      "content": "Corresponding to the \"abnormal behaviour\" Analytics ID, the analytics result provided by the NWDAF is defined in Table 6.7.5.3-1 and Table 6.7.5.3-2. When the level of an exception trespasses above or below the threshold, the NWDAF shall notify the consumer with the exception ID associated with the exception if the exception ID is within the list of exception IDs indicated by the consumer or matches the expected analytics type indicated by the consumer. The NWDAF shall provide the Exception Level and determine which of the other information elements to provide, depending on the observed exception.\nAbnormal behaviour statistics information is defined in Table 6.7.5.3-1.\nTable 6.7.5.3-1: Abnormal behaviour statistics\nInformation\nDescription\nExceptions (1..max)\nList of observed exceptions\n> Exception ID\nThe risk detected by NWDAF\n> Exception Level\nScalar value indicating the severity of the abnormal behaviour\n> Exception trend\nMeasured trend (up/down/unknown/stable)\n> UE characteristics\nInternal Group Identifier, TAC\n> SUPI list (1..SUPImax)\nSUPI(s) of the UE(s) affected with the Exception\n> Ratio\nEstimated percentage of UEs affected by the Exception within the Target of Analytics Reporting\n> Amount\nEstimated number of UEs affected by the Exception (applicable when the Target of Analytics Reporting = \"any UE\")\n> Additional measurement\nSpecific information for each risk (see Table 6.7.5.3-3)\nAbnormal behaviour predictions information is defined in Table 6.7.5.3-2.\nTable 6.7.5.3-2: Abnormal behaviour predictions\nInformation\nDescription\nExceptions (1..max)\nList of predicted exceptions\n> Exception ID\nThe risk detected by NWDAF\n> Exception Level\nScalar value indicating the severity of the abnormal behaviour\n> Exception trend\nMeasured trend (up/down/unknown/stable)\n> UE characteristics\nInternal Group Identifier, TAC\n> SUPI list (1..SUPImax)\nSUPI(s) of the UE(s) affected with the Exception\n> Ratio\nEstimated percentage of UEs affected by the Exception within the Target of Analytics Reporting\n> Amount\nEstimated number of UEs affected by the Exception (applicable when the Target of Analytics Reporting = \"any UE\")\n> Additional measurement\nSpecific information for each risk (see Table 6.7.5.3-3)\n> Confidence\nConfidence of this prediction\nThe predictions are provided with a Validity Period, as defined in clause 6.1.3.\nThe UE characteristics may provide a set of features common to all UEs affected with the exception.\nThe number of exceptions and the length of the SUPI list shall respectively be lower than the parameters maximum number of objects and Maximum number of SUPIs provided as part of Analytics Reporting Information.\nIf PCF subscribes to notifications on \"Abnormal behaviour\", the NWDAF shall send the PCF notifications about the risk, which may trigger the PCF to update the AM/SM policies.\nThe NWDAF also sends the notification directly to the AMF or SMF, if the AMF or SMF subscribes to the notification, so that the AMF or SMF may, based on operator local policies defined on a per S-NSSAI basis (for AMF) or on a per S-NSSAI, per DNN, or per (DNN,S-NSSAI) basis (for SMF), take actions for risk solving.\nIf the AF subscribes to notifications on \"Abnormal behaviour\", the NWDAF sends the notifications to the AF so that the AF may take actions for risk solving.\nThe following Table 6.7.5.3-3 gives examples of additional measurement provided by the NWDAF and examples of NF actions for solving each risk.\nTable 6.7.5.3-3: Examples of additional measurements and NF actions for risk solving\nException ID and description\nAdditional measurement\nActions of NFs\nUnexpected UE location\nUnexpected UE location (TA or cells which the UE stays)\nPCF may extend the Service Area Restrictions with current UE location. AMF may extend the mobility restriction with current UE location.\nPing-ponging across neighbouring cells\nNumbers, frequency, time and location information, assumption about the possible circumstances of the ping-ponging\nIf the ping-ponging are per UE, then:\n1.\tthe AMF may adjust the UE (e.g. a stationary UE) registration area.\n2.\tthe AMF and/or the AF may allow the use of Coverage Enhancement for the affected UE.\nUnexpected long-live/large rate flows\nUnexpected flow template (IP address 5 tuple)\nSMF updates the QoS rule, e.g. decrease the MBR for the related QoS flow.\nPCF, if dynamic PCC applies for corresponding DNN, S-NSSAI, updates PCC Rules that triggers SMF updates the QoS rule, e.g. decrease the MBR for the related QoS flow.\nUnexpected wakeup\nTime of unexpected wake-up\nAMF applies MM back-off timer to the UE.\nSuspicion of DDoS attack\nVictim's address (target IP address list)\nPCF may request SMF to release the PDU session.\nSMF may release the PDU session and apply SM back-off timer.\nWrong destination address\nWrong destination address (target IP address list)\nPCF updates the packet filter in the PCC Rules that triggers the SMF to update the related QoS flow and configures the UPF.\nToo frequent Service Access\nVolume, frequency, time, assumptions about the possible circumstances\nAF may release the AF session.\nPCF may request SMF to release the PDU session.\nSMF may release the PDU session and apply SM back-off timer.\nUnexpected radio link failures\nNumbers, frequency, time and location, assumptions about the possible circumstances\nIf the unexpected radio link failures are per UE location bases, the AMF may allow the use of CE (Coverage Enhancement) in the affected location. Also, the Operator may improve the coverage conditions in the affected location.\nIf the unexpected radio link failures are per UE bases, then the AMF and/or the AF may allow the use of CE for the affected UE.",
      "chunk_type": "general",
      "cross_references": [
        "clause_6.1.3",
        "table_6.7.5.3-1",
        "table_6.7.5.3-2",
        "table_6.7.5.3-3"
      ]
    },
    {
      "chunk_id": "ts_23.288_6.7.5.4",
      "section_id": "6.7.5.4",
      "section_title": "Procedure",
      "content": "Figure 6.7.5.4-1: Procedure for NWDAF assisted misused or hijacked UEs identification\n1a.\tA consumer NF subscribes to/requests NWDAF using Nnwdaf_AnalyticsSubscription_Subscribe/ Nnwdaf_AnalyticsInfo_Request (Analytics ID = Abnormal behaviour, Target of Analytics Reporting as defined in clause 6.1.3, Analytics Filter Information).\nA consumer NF may subscribe to/request abnormal behaviour notification/response from NWDAF for a group of UEs, any UE or a specific UE. The Analytics ID indicates the NWDAF to identify misused or hijacked UEs through abnormal behaviour analytic.\n1b.\tAF to NWDAF: Nnwdaf_AnalyticsSubscription_Subscribe or Nnwdaf_AnalyticsInfo_Request (Analytics ID, Target of Analytics Reporting as defined in clause 6.1.3, Analytics Filter Information).\nFor untrusted AFs, the AF sends the subscription via a NEF, where the AF invokes NEF service Nnef_AnalyticsExposure_Subscribe or Nnef_AnalyticsExposure_Fetch (Analytics ID, Target of Analytics Reporting = External-group-identifier, any UE or External UE ID, Analytics Filter Information).\nAn AF may also subscribe to/request abnormal behaviour notification/response from NWDAF for a group of UEs, a specific UE or any UE, where the subscription/request message may contain expected UE behaviour parameters identified on the application layer. If an External-Group-Identifier is provided by the AF, the NEF interrogates UDM to map the External-Group-Identifier to the Internal-Group-Identifier and obtain SUPI list corresponding to the Internal-Group-Identifier.\n2.\t[Conditional] NWDAF to AMF: Namf_EventExposure_Subscribe (Event ID(s), Event Filter(s), Internal-Group-Identifier, any UE or SUPI).\nThe NWDAF sends subscription requests to the related AMF to collect UE behavioural information if it has not subscribed such data.\nNOTE 1:\tThe NWDAF determines the related AMF(s) as described in clause 6.2.2.1.\nThe AMF sends event reports to the NWDAF based on the report requirements contained in the subscription request received from the NWDAF.\nIf requested by NWDAF via Event Filter(s), the AMF checks whether the UE's behaviour matches its expected UE behavioural information. In this case, the AMF sends event reports to the NWDAF only when it detects that the UE's behaviour deviated from its expected UE behaviour.\nDepending on the Exception ID, the NWDAF may in addition perform data collection from OAM as specified in clause 6.2.3.2.\n3.\t[Conditional] NWDAF to SMF: Nsmf_EventExposure_Subscribe (Event ID(s), Event Filter(s), Internal-Group-Identifier, any UE or SUPI).\nThe NWDAF sends subscription requests to the related SMF(s) if it has not subscribed to such data.\nNOTE 2: Besides Analytics Filter Information, other mechanisms such as setting maximum number of SUPIs and/ or using sampling ratio as part of Analytics Reporting Parameters as per Event Reporting Information (clause 4.15.1 of TS 23.502 [3]) can be used by the analytics consumer to limit signalling load, e.g. when the Target of Analytics Reporting is \"any UE\". The NWDAF can also use sampling ratio, possibly with partition criteria, when subscribing towards AMF and SMF.\nNOTE 3:\tThe NWDAF determines the related SMF(s) as described in clause 6.2.2.1.\nThe SMF sends event reports to the NWDAF based on the report requirements contained in the subscription request received from the NWDAF.\nIf requested by NWDAF via Event Filter(s), the SMF checks whether the UE's behaviour matches its expected UE behavioural information. In this case, the SMF sends event reports to the NWDAF only when it detects that the UE's behaviour deviated from its expected UE behaviour.\n4.\tThe NWDAF performs data analytics for misused or hijacked UEs identification. Based on the analytics and operator's policies the NWDAF determines whether to send a notification to the consumer NF or AF.\n5a.\t[Conditional] NWDAF to consumer NF (AMF or PCF or SMF depending on the subscription): Nnwdaf_AnalyticsSubscription_Notify or Nnwdaf_AnalyticsInfo_Request response (Analytics ID, Exception ID, Internal-Group-Identifier or SUPI, Exception level) (which is used depending on the service used in step 1a).\nIf the NWDAF determines to send a notification/response to the consumer 5GC NFs, the NWDAF invokes Nnwdaf_AnalyticsSubscription_Notify or Nnwdaf_AnalyticsInfo_Request response service operations. Based on the notification/response, the 5G NFs adopt configured actions to resolve/mitigate/avoid the risks as described in the Table 6.7.5.3-1.\n5b.\t[Conditional] NWDAF to AF: Nnwdaf_AnalyticsSubscription_Notify or Nnwdaf_AnalyticsInfo_Request response (Analytics ID, Exception ID, External UE ID, Exception level) (which is used depending on the service used in step 1b).\nIf the NWDAF determines to send a notification/response to the consumer AF, the NWDAF needs to include external UE ID of the identified UE into the notification/response message.\nNOTE 3:\tBased on the notification, the AF can adopt corresponding actions, e.g. adjusting recommended TCP Window Size, adjusting recommended Service Start and End.\nNOTE 4:\tThe call flow only shows a subscribe-notify model for the interaction of NWDAF and consumer NF for simplicity instead of both request-response model and subscription-notification model.",
      "chunk_type": "procedure",
      "cross_references": [
        "clause_6.1.3",
        "clause_6.2.2.1",
        "clause_6.2.3.2",
        "ts_23.502_clause_4.15.1",
        "table_6.7.5.3-1",
        "figure_6.7.5.4-1",
        "ts_23.502"
      ]
    },
    {
      "chunk_id": "ts_23.288_6.8.1",
      "section_id": "6.8.1",
      "section_title": "General",
      "content": "The NWDAF can provide user data congestion related analytics, by one-time reporting or continuous reporting, in the form of statistics or predictions or both, to another NF. User Data Congestion related analytics can relate to congestion experienced while transferring user data over the control plane or user plane or both. A request for user data congestion analytics relates to a specific area or to a specific user. If the consumer of these analytics provides a UE ID, the NWDAF determines the area where the UE is located. The NWDAF then collects measurements per cell and uses the measurements to determine user data congestion analytics.\nThe request for user data congestion related analytics indicates the location area information where congestion related analytics is desired or indicates a UE Identity that can be used by the NWDAF to determine the location area information where congestion related analytics is desired. When requesting user data congestion, the consumer may request the identifiers of the applications that contribute the most to the traffic in the area. The consumer may indicate how many applications should be reported by providing the maximum number of applications in the request or subscription.\nWhen the consumer of user data congestion related analytics subscribes to user data congestion related analytics, it may indicate a threshold and the NWDAF will provide analytics to the consumer when the congestion level crosses the threshold. The consumer can indicate an S-NSSAI in the request when congestion analytics are needed on a per slice level.\nThe service consumer may be an NF (e.g. NEF, AF, PCF).\nThe consumer of these analytics may indicate in the request or subscription the following parameters, its content is described in the clause 6.1.3:\n-\tAnalytics ID = \"User Data Congestion\";\n-\tTarget of Analytics Reporting: either a single UE (SUPI), or \"any UE\";\nNOTE:\tThe Target of Analytics Reporting set to \"any UE\" applies when user data congestion analytics relates to a specific Area of Interest.\n-\tAnalytics Filter Information:\n-\tArea of Interest (i.e. list of TAIs or Cell IDs) which restricts the area in focus (mandatory if Target of Analytics Reporting is set to \"any UE\", optional otherwise);\n-\tan optional list of analytics subsets that are requested, (see clause 6.8.3);\n-\tOptional S-NSSAI, in order to obtain congestion analytics only on a given slice;\n-\tOptional Reporting Threshold, which applies only for subscriptions and indicates conditions on the congestion level (Network Status Indication, see clause 6.8.3) to be reached in order to be notified by the NWDAF.\n-\tPreferred level of accuracy of the analytics;\n-\tPreferred order of results for the list of User Data Congestion statistics or predictions:\n-\tordering by Applicable Time Window, chronological or reverse chronological order; or\n-\tordering by Network Status Indication, ascending or descending;\n-\tOptional maximum number of objects;\n-\tAn Analytics target period indicates the time period over which the statistics or prediction are requested, either in the past or in the future;\n-\tOptionally, Temporal granularity size; and\n-\tIn a subscription, the Notification Correlation Id and the Notification Target Address are included.\nThe NWDAF notifies the result of the analytics to the consumer as indicated in clause 6.8.3.",
      "chunk_type": "definition",
      "cross_references": [
        "clause_6.1.3",
        "clause_6.8.3"
      ]
    },
    {
      "chunk_id": "ts_23.288_6.8.2",
      "section_id": "6.8.2",
      "section_title": "Input data",
      "content": "The detailed information collected by the NWDAF is defined in Table 6.8.2-1.\nNOTE 1:\tPerformance Measurements defined in TS 28.552 [8] represent resource utilisation but do not, by themselves, indicate the event of congestion or congestion levels. The NWDAF collects measurements from the OAM and how the NWDAF derives Network Status Indication (NSI) is not specified.\nTable 6.8.2-1: Data Collected from the NF and OAM related to User Data Congestion Analytics\nInformation\nSource\nDescription\nUE Location\nAMF\nUE location information that NWDAF can use to derive the Area of Interest.\nMeasurements\nOAM\nPerformance Measurements that will be used by the NWDAF to determine congestion levels. Performance Measurements are related to information transfer over the user plane and/or the control plane (e.g. UE Throughput, DRB Setup Management, RRC Connection Number, PDU Session Management and Radio Resource Utilization as defined in TS 28.552 [8]). The NWDAF may obtain measurements by invoking management services that are defined in TS 28.532 [6] and TS 28.550 [7].\nTable 6.8.2-2: Data Collected from the UPF or from the AF related to User Data Congestion Analytics\nInformation\nSource\nDescription\nApplication ID\nUPF or AF\nApplication identifier as defined in clause 5.8.2 of TS 23.501 [2] (see NOTE 1).\nIP Packet Filter Set\nUPF or AF\nIP Packet Filter set as defined in clause 5.8.2 of TS 23.501 [2] (see NOTE 1).\nMeasurement period\nUPF or AF\nMeasurement period.\nThroughput UL/DL\nUPF or AF\nAverage Throughput UL/DL over the measurement period.\nThroughput UL/DL (peak)\nUPF or AF\nPeak Throughput UL/DL over the measurement period.\nTimestamp\nUPF or AF\nTime when measurements are taken.\nAchieved sampling ratio\nUPF\nSampling ratio achieved by UPF (see NOTE 2).\nNOTE 1:\tApplication Id and IP Packet Filter Set are mutually exclusive.\nNOTE 2:\tUPF may apply data sampling to reduce the load on the UPF. This parameter is provided when no sampling ratio is configured at the UPF or the UPF could not fulfil the configured sampling ratio.\nNOTE 3:\tMultiple outputs are provided by the UPF when multiple Service Data Flows are running at the UPF for the same UE and measurement period.\nNOTE 2:\tCare needs to be taken with regards to load and major signalling caused when requesting \"any UE\". This can be achieved via utilization of event filters (e.g. Area of Interest), Analytics Reporting Information (e.g. maximum number of objects), or preferred sampling ratio provided by NWDAF to the UPF and/or local UPF configuration of data collection for specific application IDs, Packet Filter Sets and/or PFDs.\nAdditionally, NWDAF may use statistics or predictions on service experience as specified in clause 6.4.3 as an input, e.g. for service experience in a given area or service experience for some specific applications such as high bandwidth applications.",
      "chunk_type": "general",
      "cross_references": [
        "ts_23.501_clause_5.8.2",
        "clause_6.4.3",
        "table_6.8.2-1",
        "ts_28.532_table_6.8.2-2",
        "ts_28.552",
        "ts_28.532",
        "ts_28.550",
        "ts_23.501"
      ]
    },
    {
      "chunk_id": "ts_23.288_6.8.3",
      "section_id": "6.8.3",
      "section_title": "Output analytics",
      "content": "The NWDAF outputs the user data congestion analytics for transfer over the user plane, for transfer over the control plane, or for both. The output may consist of statistics, predictions, or both. The detailed information provided by the NWDAF is defined in Table 6.8.3-1 for statistics and in Table 6.8.3-2 for predictions.\nTable 6.8.3-1: User Data Congestion statistics\nInformation\nDescription\nArea of Interest\nA list of TAIs or Cell IDs\nList of user data congestion Analytics (1..max)\nList of user data congestion Analytics. See NOTE 5.\n> Type\nUser Plane or Control Plane\n> Applicable Time Window\nThe time period that the analytics applies to. If a Temporal granularity size was provided in the request or subscription, the duration of the Applicable Time Window is greater than or equal to the Temporal granularity size.\n> Network Status Indication\nCongestion Level\n> List of top applications in UL (0..NU) (NOTE 1, NOTE 4)\nThe list of applications that contribute the most to the traffic in the UL direction.\n>> Application ID\nApplication identifier as defined in clause 5.8.2 of TS 23.501 [2] (see NOTE 2).\n>> IP Packet Filter Set\nIP Packet Filter set as defined in clause 5.8.2 of TS 23.501 [2] (see NOTE 2).\n>> Percentage\nThe application's throughput as a percentage of the total throughput in the Area of Interest.\n> List of top applications in DL (0..ND) (NOTE 1, NOTE 4)\nThe list of applications that contribute the most to the traffic in the DL direction.\n>> Application ID\nApplication identifier as defined in clause 5.8.2 of TS 23.501 [2] (see NOTE 2)\n>> IP Packet Filter Set\nIP Packet Filter set as defined in clause 5.8.2 of TS 23.501 [2] (see NOTE 2).\n>> Percentage\nThe application's throughput as a percentage of the total throughput in the Area of Interest.\nNOTE 1:\tThis information element is an Analytics subset that can be used in \"list of analytics subsets that are requested\".\nNOTE 2:\tApplication Id and IP Packet Filter Set are mutually exclusive.\nNOTE 3:\tThe listed applications are not necessarily ranked by any order of traffic contribution.\nNOTE 4:\tThis information element relates to congestion experienced while transferring user data over the user plane.\nNOTE 5:\tThe number of user data congestion analytics entries is limited by the maximum number of objects provided as part of Analytics Reporting Information.\nTable 6.8.3-2: User Data Congestion predictions\nInformation\nDescription\nArea of Interest\nA list of TAIs or Cell IDs.\nList of user data congestion Analytics (1..max)\nList of user data congestion Analytics. See NOTE 5.\n> Type\nUser Plane or Control Plane.\n> Applicable Time Window\nThe time period that the analytics applies to. If a Temporal granularity size was provided in the request or subscription, the duration of the Applicable Time Window is greater than or equal to the Temporal granularity size.\n> Network Status Indication\nCongestion Level.\n> Confidence\nConfidence of this prediction.\n> List of top applications in UL (0..NU) (NOTE 1, NOTE 4)\nThe list of applications predicted to contribute most of the traffic in the UL direction.\n>> Application ID\nApplication identifier as defined in clause 5.8.2 of TS 23.501 [2] (see NOTE 2).\n>> IP Packet Filter Set\nIP Packet Filter set as defined in clause 5.8.2 of TS 23.501 [2] (see NOTE 2).\n>> Percentage\nThe application's throughput as a percentage of the total throughput in the Area of Interest.\n>> Confidence\nConfidence of this prediction.\n> List of top applications in DL (0..ND) (NOTE 1, NOTE 4)\nThe list of applications predicted to contribute most of the traffic in the DL direction.\n>> Application ID\nApplication identifier as defined in clause 5.8.2 of TS 23.501 [2] (see NOTE 2).\n>> IP Packet Filter Set\nIP Packet Filter set as defined in clause 5.8.2 of TS 23.501 [2] (see NOTE 2).\n>> Percentage\nThe application's throughput as a percentage of the total throughput in the Area of Interest.\n>> Confidence\nConfidence of this prediction.\nNOTE 1:\tThis information element is an Analytics subset that can be used in \"list of analytics subsets that are requested\".\nNOTE 2:\tApplication Id and IP Packet Filter Set are mutually exclusive.\nNOTE 3:\tThe listed applications are not necessarily ranked by any order.\nNOTE 4:\tThis information element relates to congestion experienced while transferring user data over the user plane.\nNOTE 5:\tThe number of user data congestion analytics entries is limited by the maximum number of objects provided as part of Analytics Reporting Information.\nThe following list shows the applicability of the analytics subsets per consumer:\n-\tAnalytics subset \"List of top applications in UL (0..NU)\" and \"List of top applications in DL (0..ND)\" are applicable to any consumer (e.g. PCF, AF, NEF), The NWDAF decides if these Analytics subset is provided to an AF.",
      "chunk_type": "general",
      "cross_references": [
        "ts_23.501_clause_5.8.2",
        "table_6.8.3-1",
        "table_6.8.3-2",
        "ts_23.501"
      ]
    },
    {
      "chunk_id": "ts_23.288_6.8.4.1",
      "section_id": "6.8.4.1",
      "section_title": "Procedure for one-time or continuous reporting of analytics for user data congestion in a geographic area",
      "content": "The procedure as depicted in Figure 6.8.4.1-1 is used by an NF to retrieve congestion analytics for a specific geographic area. The procedure can be used to request a one-time or continuous reporting of congestion analytics.\nFigure 6.8.4.1-1: Procedure for one-time or continuous reporting of analytics for congestion in a geographic area\nFor one-time reporting:\n1.\tThe NF sends Nnwdaf_AnalyticsInfo_Request to NWDAF, indicating request for analytics for congestion in a specific location. The NF can request statistics or predictions or both. The Analytics ID is set to \"User Data Congestion\" for transfer over user plane, control plane, or both, the Target of Analytics Reporting is set to \"any UE\" and Analytics Filter Information set to include a location (e.g. ECGI, TA) and an indication to provide the list of applications that contribute the most to the traffic.\n2-3.\tIf the request is authorized and in order to provide the requested analytics, the NWDAF may request the measurement information for the requested location from OAM services following the data collection from OAM procedure as captured in 6.2.3.2. If the NWDAF already has information about the requested location, these steps are omitted. The NWDAF may obtain measurements by invoking management services that are defined in TS 28.532 [6] and TS 28.550 [7].\nIf the request is to provide the list of applications that contribute the most to the traffic, then the NWDAF collects input data from the AF for the applications being served by AF(s) by invoking Naf_EventExposure_Subscribe service or Nnef_EventExposure_Subscribe (if via NEF) or collected from the UPF or collected from both, AF and UPF.\n4.\tThe NWDAF derives requested analytics.\n5.\tThe NWDAF provides the analytics for congestion to the NF.\nFor continuous reporting:\n6.\tThe NF sends Nnwdaf_AnalyticsSubscription_Subscribe Request to the NWDAF, indicating request for analytics for congestion in a specific location (e.g. ECGI, TA), possibly with thresholds and including an indication to provide the list of applications that contribute the most to the traffic. The NF can request statistics or predictions or both. The type of analytics is set to user data congestion analytics for transfer over user plane, control plane, or both.\n7-8. The NWDAF subscribes to OAM services following the data collection from OAM procedure as captured in 6.2.3.2 to get measurement information for the requested location, possibly providing measurement thresholds for example, data congestion crossing values. The NWDAF may obtain measurements by invoking management services that are defined in TS 28.532 [6] and TS 28.550 [7]. If a request is to provide the list of applications that contribute the most to the traffic, the NWDAF subscribes to the service data from AF by invoking Naf_EventExposure_Subscribe service or Nnef_EventExposure_Subscribe (if via NEF) or from the UPF or from both.\n9.\tThe NWDAF derives requested analytics.\n10.\tThe NWDAF provides the analytics for congestion to the NF.\n11a.\tA change of user data congestion status corresponding to crossing a threshold set by the NWDAF at steps 7-8 is detected by OAM and notified to NWDAF.\n11b.\tThe AF notifies the NWDAF with the input data as defined in table 6.8.2-2.\n11c.\tThe UPF provides the NWDAF with the input data as defined in table 6.8.2-2.\nNOTE:\tHow the data from UPF is retrieved (subscribed to on UPF and notified then by UPF) is defined in clause 5.8.2.17 of 23.501 [2] and in clause 4.15.4 of TS 23.502 [3].\n12.\tThe NWDAF derives new analytics.\n13.\tThe NWDAF provides a notification for analytics for the user data congestion to the NF.",
      "chunk_type": "procedure",
      "cross_references": [
        "clause_5.8.2.17",
        "ts_23.502_clause_4.15.4",
        "table_6.8.2-2",
        "figure_6.8.4.1-1",
        "ts_28.532",
        "ts_28.550",
        "ts_23.502"
      ]
    },
    {
      "chunk_id": "ts_23.288_6.8.4.2",
      "section_id": "6.8.4.2",
      "section_title": "Procedure for one-time or continuous reporting of analytics for user data congestion for a specific UE",
      "content": "The procedure as depicted in Figure 6.8.4.2-1 is used by an NF to retrieve user data congestion analytics for a specific UE. The procedure can be used to request a one-time or continuous reporting of user data congestion analytics.\nFigure 6.8.4.2-1: Procedure for one-time or continuous reporting of analytics for congestion for a specific UE\nFor one-time reporting:\n1.\tThe NF sends Nnwdaf_AnalyticsInfo_Request to NWDAF, requesting for analytics for user data congestion for a specific UE id. The NF can request statistics or predictions or both. The type of analytics is set to user data congestion analytics for transfer over user plane, control plane, or both, the Target of Analytics Reporting is set to UE id.\n2-5. The NWDAF may already know the UE location. If not, the NWDAF checks the UE location by first retrieving the AMF serving the UE (steps 2-3) and then by interrogating the AMF about the UE location.\nNOTE 1:\tThe NF sends a request for a UE that is registered, so that NWDAF can retrieve the UE location.\n6-7. The NWDAF requests measurement information for the UE location from OAM services (as captured in 6.2.3.2). These steps are omitted if the NWDAF already has the information. The NWDAF may obtain measurements by invoking management services that are defined in TS 28.532 [6] and TS 28.550 [7].\nIf the request is to provide the list of applications that contribute the most to the traffic, then the NWDAF collects the input data from the UPF serving the UE location, or from the AF(s) by invoking Naf_EventExposure_Subscribe service or Nnef_EventExposure_Subscribe (if via NEF) or collects input data from both, AF and UPF. The input data is defined in Table 6.8.2-2.\n8.\tThe NWDAF derives requested analytics.\n9.\tThe NWDAF provides the analytics for congestion to the NF.\nFor continuous reporting:\n10.\tThe NF sends Nnwdaf_AnalyticsSubscription_Subscribe Request to the NWDAF. The NF can request for statistics or for predictions or for both. The type of analytics is set to user data congestion analytics for transfer over user plane, control plane, or both.\n11.\tThe NWDAF determines the UE location, either via internal information or by applying the same steps as steps 2 to 5. The NWDAF then determines an area of interest.\n12-13. The NWDAF subscribes to OAM services (as captured in 6.2.3.2) to get the measurement information for the UE location, possibly providing measurement thresholds. The NWDAF may obtain measurements by invoking management services that are defined in TS 28.532 [6] and TS 28.550 [7].\nIf the request is to provide the list of applications that contribute the most to the traffic, then the NWDAF collects input data from the UPF serving the UE location or from the AF(s) by invoking Naf_EventExposure_Subscribe service or Nnef_EventExposure_Subscribe (if via NEF) or collects from both, AF and UPF. The input data is defined in Table 6.8.2-2.\n14.\tThe NWDAF derives requested analytics.\n15.\tThe NWDAF provides the analytics for user data congestion status information to the NF.\n16-17. The NWDAF subscribes to UE mobility event notification in order to be informed when the UE moves out of the area of interest (in order to define a new area of interest and request new information to OAM if the UE moves to a different area).\n18a.\tA change of user data congestion status corresponding to crossing a threshold set by the NWDAF is detected by OAM and notified to NWDAF.\n18b.\tThe AF notifies the NWDAF with the input data as defined in table 6.8.2-2.\n18c.\tThe UPF provides the NWDAF with the input data as defined in table 6.8.2-2.\nNOTE 2:\tHow the data from UPF is retrieved (subscribed to on UPF and notified then by UPF) is defined in clause 5.8.2.17 of TS 23.501 [2] and in clause 4.15.4 of TS 23.502 [3].\n19.\tThe NWDAF derives new analytics.\n20.\tThe NWDAF provides a notification for analytics for the user data congestion status information to the NF.",
      "chunk_type": "procedure",
      "cross_references": [
        "ts_23.501_clause_5.8.2.17",
        "ts_23.501_clause_4.15.4",
        "table_6.8.2-2",
        "figure_6.8.4.2-1",
        "ts_23.502_clause_4.15.4",
        "ts_28.532",
        "ts_28.550",
        "ts_23.501",
        "ts_23.502"
      ]
    },
    {
      "chunk_id": "ts_23.288_6.9.1",
      "section_id": "6.9.1",
      "section_title": "General",
      "content": "The consumer of QoS Sustainability analytics may request the NWDAF analytics information regarding the QoS change statistics for an Analytics target period in the past in a certain area or the likelihood of a QoS change for an Analytics target period in the future in a certain area. The consumer can request either to subscribe to notifications (i.e. a Subscribe-Notify model) or to a single notification (i.e. a Request-Response model).\nThe service consumer may be a NF (e.g. AF).\nThe request includes the following parameters:\n-\tAnalytics ID = \"QoS Sustainability\";\n-\tTarget of Analytics Reporting: any UE;\n-\tAnalytics Filter Information:\n-\tQoS requirements (mandatory):\n-\t5QI (standardized or pre-configured) and applicable additional QoS parameters and the corresponding values (conditional, i.e. it is needed for GBR 5QIs to know the GFBR); or\n-\tthe QoS Characteristics attributes including Resource Type, PDB, PER and their values;\n-\tLocation information (mandatory): an Area Of Interest or a path of interest. The location information could reflect a list of waypoints:\n-\tif the location information is an Area Of Interest, the area can be either described in a coarse granularity as list of TAIs or Cell IDs, or in a fine granularity as geographical area (that can be smaller than a cell), or both (coarse and fine granularity); if both granularities are provided, the NWDAF understands that the area of interest is the intersection between the fine granularity location and the list of TAIs or Cell IDs.\n-\tif the location information is a path of interest, the area can be either described in a coarse granularity as list of TAIs or Cell IDs, or in a fine granularity as a list of waypoints (expressed as longitude and latitude in geographical coordinates) and combined with a radius value, or both (coarse and fine granularity); if both granularities are provided, the NWDAF understands that the path of interest is the intersection between the fine granularity location and the list of TAIs or Cell IDs.\n-\tThreshold linear distance: The distance travelled by the UE before reporting subsequent location as described in TS 23.273 [39].\nNOTE 1:\tThreshold linear distance is used by the NWDAF when requesting location of the UE from the GMLC using LCS.\nNOTE 2:\tIn this Release, the consumer of the \"QoS Sustainability\" Analytics ID will provide location information in the area of interest format (TAIs or Cell IDs or geographical area) which is understandable by NWDAF.\nNOTE 3:\tWhen location information is described as an area of interest in a fine granularity (i.e. as geographical area that can be smaller than a cell) the Cell ID(s) can already be determined by the NEF based on its local configuration and provided to the NWDAF in addition. This addresses the scenario when Cell ID(s) cannot be determined by the NWDAF based on its local configuration. Alternatively, the NWDAF can also be configured with the Cell ID(s) corresponding to an area of interest in a fine granularity.\n-\tS-NSSAI (optional);\n-\tOptional maximum number of objects;\n-\tOptional UE Device and Context Information: which may contain one or more of the following:\n-\tSpeed range, which is a range of UE speeds for which analytics is requested, where the speed range is indicated as a range of Velocity Estimate, as in clause 6.1.6.2.17 of TS 29.572 [37];\n-\tDevice information, which may contain one of the following:\n-\tList of equipment types, according to clause 8.0 of GSMA TS.06 [38].\n-\tAnalytics target period: relative time interval, either in the past or in the future, that indicates the time period for which the QoS Sustainability analytics is requested;\n-\tOptionally, Spatial granularity size and Temporal granularity size;\n-\tReporting Threshold(s), which apply only for subscriptions and indicate conditions on the level to be reached for the reporting of the analytics, i.e. to discretize the output analytics and to trigger the notification when the threshold(s) provided in the analytics subscription are crossed by the expected QoS KPIs.\n-\tA matching direction may be provided such as crossed (default value), below, or above.\n-\tAn acceptable deviation from the threshold level in the non-critical direction (i.e. in which the QoS is improving) may be set to limit the amount of signalling.\nThe level(s) relate to value(s) of the QoS KPIs defined in TS 28.554 [10], for the relevant 5QI:\n-\tfor a 5QI of GBR resource type, the Reporting Threshold(s) refer to the QoS flow Retainability KPI;\n-\tfor a 5QI of non-GBR resource type, the Reporting Threshold(s) refer to the RAN UE Throughput KPI and/or delay in RAN KPI as defined in TS 28.554 [10].\n-\tIn a subscription, the Notification Correlation Id and the Notification Target Address.\nTo derive the QoS Sustainability analytics when the location information is an area of interest with coarse granularity (i.e. TAIs or Cell IDs):\n-\tThe NWDAF collects the corresponding statistics information on the QoS KPI for the relevant 5QI of interests from the OAM, i.e. the QoS flow Retainability or the RAN UE Throughput or delay in RAN as defined in TS 28.554 [10] and average GTP metrics as defined in TS 28.552 [8].\nTo derive the QoS Sustainability analytics when the location information is an area of interest with fine granularity (i.e. geographical area that can be smaller than a cell):\n-\tThe NWDAF derives the UE list for the area of interest with fine granularity by two steps, firstly based on an initial selection of the UE list in the corresponding coarse area from AMF, secondly based on finer granularity location data using LCS as described in clause 6.2.12, e.g. NWDAF can collect finer granularity location data of a UE using LCS and identify whether this UE is inside of the area of interest with fine granularity area, input data as defined in Table 6.9.2-2.\n-\tThe NWDAF can then collect the corresponding UE level information on the QoS KPI for the relevant 5QI of interests from the 5GC NF/OAM, i.e. input data as defined in Table 6.9.2-2.\n-\tNWDAF derives QoS sustainability statistics or predictions for the area of interest with fine granularity by averaging these input data for all the UEs that are in the UE list.\nTo improve QoS Sustainability analytics, the NWDAF may additionally collect GTP metrics defined in Table 6.9.2-3.\nIf the Analytics target period refers to the past:\n-\tThe NWDAF verifies whether the triggering conditions for the notification of QoS change statistics are met and if so, generates for the consumer one or more notifications.\n-\tThe analytics feedback contains the information on the location and the time for the QoS change statistics and the Reporting Threshold(s) that were crossed.\nIf the Analytics target period is in the future:\n-\tThe NWDAF detects the need for notification about a potential QoS change based on comparing the expected values for the KPI of the target 5QI against the Reporting Threshold(s) provided by the consumer in any cell in the requested area for the requested Analytics target period. The expected KPI values are derived from the statistics for the 5QI obtained from OAM. OAM information may also include planned or unplanned outages detection and other information that is not in scope for 3GPP to discuss in detail.\n-\tThe analytics feedback contains the information on the location and the time when a potential QoS change may occur and what Reporting Threshold(s) may be crossed.",
      "chunk_type": "definition",
      "cross_references": [
        "ts_29.572_clause_6.1.6.2.17",
        "clause_8.0",
        "clause_6.2.12",
        "table_6.9.2-2",
        "table_6.9.2-3",
        "ts_23.273",
        "ts_29.572",
        "ts_28.554",
        "ts_28.552"
      ]
    },
    {
      "chunk_id": "ts_23.288_6.9.2",
      "section_id": "6.9.2",
      "section_title": "Input data",
      "content": "To derive the QoS Sustainability analytics for a path of interest or for an area of interest with coarse granularity (i.e. TAIs or Cell IDs), the input data is listed in Table 6.9.2-1.\nTable 6.9.2-1: Data collection for \"QoS Sustainability\" analytics\nInformation\nSource\nDescription\nRAN UE Throughput\nOAM TS 28.554 [10]\nAverage UE bitrate in the cell (Payload data volume on RLC level per elapsed time unit on the air interface, for transfers restricted by the air interface), per timeslot, per cell, per 5QI and per S-NSSAI.\nQoS flow Retainability\nOAM TS 28.554 [10]\nNumber of abnormally released QoS flows during the time the QoS Flows were used per timeslot, per cell, per 5QI and per S-NSSAI.\nDelay in RAN\nOAM TS 28.554 [10]\nAverage Uplink and downlink packet transmission delay through RAN part to the UE, per timeslot, per cell, per 5QI and per S-NSSAI.\nNOTE 1:\tThe timeslot is the time interval split according to the time unit of the OAM statistics defined by operator.\nTo derive the QoS Sustainability analytics for an area of interest with fine granularity (i.e. geographical area that can be smaller than a cell), additional input data is listed in Table 6.9.2-2.\nTable 6.9.2-2: UE level data collection for \"QoS Sustainability\" analytics with fine granularity\nInformation\nSource\nDescription\nTimestamp\nLCS (NOTE 1)\nA time stamp associated with the collected information.\nUE ID\nLCS, AMF (NOTE 1)\n(list of) SUPI(s).\nFiner granularity location data\nLCS (NOTE 1)\nUE position in the area of interest.\nSpeed\nLCS (NOTE 1)\nCurrent UE speed.\nSMF info\nAMF\nSMF address for the SMF serving the UE\nUPF info\nSMF\nAddress for the UPF serving the UE.\n5QI\nSMF\n5G QoS Identifier.\nPEI\nUDM\nPermanent Equipment Identifier, as described in clause 5.9.3 of 1 23.501 [2].\nEquipment type\nGSMA IMEI database or OAM\nEquipment Type such as smartphone, tablet, dongle, etc. as described in GSMA TS.06 [38].\nNOTE 1:\tThe procedure to collect location data using LCS is described in clause 6.2.12\nNOTE 2:\tHow to use the input data from GSMA for QoS Sustainability analytics is up to NWDAF implementation.\nAdditionally, the NWDAF collects the following input (Table 6.9.2-3) according to measurements defined in clause 5.33.3 QoS Monitoring to Assist URLLC Service of TS 23.501 [2] and IP-layer section capacity definition from ITU-T Y.1540 [40] between UE, NG-RAN and UPF at GTP level. The UL/DL available GTP capacity between UPF and UE will also be used as inputs for the QoS Sustainability analytics. The NWDAF calculates this value by implementation, e.g. by subtracting the UL/DL traffic volume from the maximum value of the GTP capacity.\nTable 6.9.2-3: Data collection for QoS Sustainability analytics at GTP level\nInformation\nSource\nDescription\nUL/DL packet delay GTP\nOAM TS 28.552 [8] (NOTE)\nUL/DL packet delay measurement round trip on GTP path on N3 for non-GBR traffic.\nUL/DL capacity GTP between UPF and NG-RAN\nOAM\nTS 28.552 [8]\nTS 28.554 [10]\nMaximum achievable UL/DL capacity measurement from UPF to NG-RAN based on GTP path. The capacity measurement corresponds to the IP-layer section capacity definition from ITU‑T Y.1540 [40]. It also corresponds to the descriptions in clause 5.1 (DL GTP Capacity) and clause 5.4 (UL GTP Capacity) of TS 28.552 [8] and clause 6.3 of TS 28.554 [10].\nUL/DL capacity GTP between UPF and UE\nOAM\nTS 28.552 [8]\nTS 28.554 [10]\nMaximum achievable UL/DL capacity measurement from UE to UPF based on GTP path. The capacity measurement corresponds to the IP-layer section capacity definition from ITU‑T Y.1540 [40]. It also corresponds to the descriptions in clause 5.4 of TS 28.552 [8] and clause 6.3 of TS 28.554 [10].\nNOTE:\tRefer to clause 5.1 of TS 28.552 [8] for the performance measurement in NG-RAN and clause 5.4 of TS 28.552 [8] for the performance measurement in UPF. In addition, Annex A of TS 28.552 [8] describes various performance measurements, especially, clause A.61 \"Monitoring of one way delay between PSA UPF and NG-RAN\" indicates that the measurements on the one way DL and UL delay between PSA UPF and NG-RAN can be used to evaluate and optimize the DL and UL user plane delay performance between 5GC and NG-RAN.",
      "chunk_type": "general",
      "cross_references": [
        "clause_5.9.3",
        "clause_6.2.12",
        "clause_5.33.3",
        "clause_5.1",
        "ts_28.552_clause_5.4",
        "ts_28.552_clause_6.3",
        "ts_28.554_clause_5.1",
        "table_6.9.2-1",
        "table_6.9.2-2",
        "table_6.9.2-3",
        "ts_28.554_clause_6.3",
        "ts_28.552_clause_5.1",
        "ts_28.554",
        "ts_23.501",
        "ts_28.552"
      ]
    },
    {
      "chunk_id": "ts_23.288_6.9.3",
      "section_id": "6.9.3",
      "section_title": "Output analytics",
      "content": "The NWDAF outputs the QoS Sustainability analytics. Depending on the Analytics target period, the output consists of statistics or predictions. The detailed information provided by the NWDAF is defined in Table 6.9.3-1 for statistics and Table 6.9.3-2 for predictions.\nTable 6.9.3-1: \"QoS Sustainability\" statistics\nInformation\nDescription\nList of QoS sustainability Analytics (1..max)\n>Applicable Area (NOTE 1)\nA list of TAIs or Cell IDs or a geographical area in a fine granularity (e.g. smaller than a cell) within the Location information that the analytics applies to. If a Spatial granularity size was provided in the request or subscription, the number of elements of the list is smaller than or equal to the Spatial granularity size.\n>Applicable Time Period\nThe time period within the Analytics target period that the analytics applies to. If a Temporal granularity size was provided in the request or subscription, the duration of the Applicable Time Period is greater than or equal to the Temporal granularity size.\n>Crossed Reporting Threshold(s)\nThe Reporting Threshold(s) that are met or exceeded or crossed by the statistics value or the expected value of the QoS KPI.\nNOTE 1:\tThe Applicable Area may be described as geographical area in a fine granularity (e.g. smaller than a cell) within the Location information when the location information is an area of interest with finer granularity or a path of interest expressed with a list of waypoints and a radius value. How to determine the geographical area is up to NWDAF implementation.\nTable 6.9.3-2: \"QoS Sustainability\" predictions\nInformation\nDescription\nList of QoS sustainability Analytics (1..max)\n>Applicable Area (NOTE 1)\nA list of TAIs or Cell IDs or a geographical area in a fine granularity (e.g. smaller than a cell) within the Location information that the analytics applies to. If a Spatial granularity size was provided in the request or subscription, the number of elements of the list is smaller than or equal to the Spatial granularity size.\n>Applicable Time Period\nThe time period within the Analytics target period that the analytics applies to. If a Temporal granularity size was provided in the request or subscription, the duration of the Applicable Time Period is greater than or equal to the Temporal granularity size.\n>Crossed Reporting Threshold(s)\nThe Reporting Threshold(s) that are met or exceeded or crossed by the statistics value or the expected value of the QoS KPI.\n>Confidence\nConfidence of the prediction.\nNOTE 1:\tThe Applicable Area may be described as geographical area in a fine granularity (e.g. smaller than a cell) within the Location information when the location information is an area of interest with finer granularity or a path of interest expressed with a list of waypoints and a radius value. How to determine the geographical area is up to NWDAF implementation.\nNOTE 1:\tThe meaning of Confidence is based on the SLA, i.e. the consumer has to understand the meaning of the different values of Confidence.\nNOTE 2:\tThe Analytics can contain multiple sets of the above information if the location information reflected a list of waypoints.\nThe number of QoS sustainability analytics entries is limited by the maximum number of objects provided as part of Analytics Reporting Information.",
      "chunk_type": "general",
      "cross_references": [
        "table_6.9.3-1",
        "table_6.9.3-2"
      ]
    },
    {
      "chunk_id": "ts_23.288_6.9.4.1",
      "section_id": "6.9.4.1",
      "section_title": "Procedure for Qos Sustainability in a coarse granularity area",
      "content": "Figure 6.9.4.1-1 depicts a procedure for \"QoS Sustainability\" analytics in a coarse granularity area provided by NWDAF.\nThe NWDAF shall not activate the measurements for QoS Monitoring. If QoS Monitoring is already activated, the measurements will be triggered according to QoS Monitoring procedures (see clause 5.33.3 of TS 23.501 [2]).\nFigure 6.9.4.1-1: \"QoS Sustainability\" analytics provided by NWDAF in a coarse granularity area\n1.\tThe consumer requests or subscribes to analytics information on \"QoS Sustainability\" provided by NWDAF. The parameters included in the request are described in clause 6.9.1.\nThe consumer may include multiple sets of parameters in order to provide different combinations of \"Location information\" and \"Analytics target period\" when requesting QoS Sustainability analytics.\n2.\tThe NWDAF collects the data specified in clause 6.9.2 from the OAM, following the procedure captured in clause 6.2.3.2.\n3.\tThe NWDAF verifies whether the triggering conditions are met and derives the requested analytics. The NWDAF can detect the need for notification based on comparing the requested analytics of the target 5QI against the Reporting Threshold(s) provided by consumer in any cell over the requested Analytics target period.\n4.\tThe NWDAF provides response or notification on \"QoS Sustainability\" to the consumer.",
      "chunk_type": "procedure",
      "cross_references": [
        "ts_23.501_clause_5.33.3",
        "clause_6.9.1",
        "clause_6.9.2",
        "clause_6.2.3.2",
        "figure_6.9.4.1-1",
        "ts_23.501_figure_6.9.4.1-1",
        "ts_23.501"
      ]
    },
    {
      "chunk_id": "ts_23.288_6.9.4.2",
      "section_id": "6.9.4.2",
      "section_title": "Procedure for QoS Sustainability in a fine granularity area",
      "content": "Figure 6.9.4.2-1: Procedure for \"QoS Sustainability\" analytics in a fine granularity area\n1.\tThe NF consumer requests or subscribes to analytics information on \"QoS Sustainability\" provided by the NWDAF. The parameters included in the request are defined in clause 6.9.1 of TS 23.288 [5]. The NF can request statistics or predictions or both.\nThe consumer provides the \"Location information\" as defined in clause 6.9.1 when requesting QoS Sustainability analytics. If the AF doesn't provide TAIs or Cell IDs, the NWDAF as an 5GC internal NF needs to determine which cells are related to the fine granularity area.\nThe consumer may optionally provide UE Context or Subscription information such as one or more of the following: device speed or speed range, IMEI or IMEISV or TAC range, equipment type.\n2a.\tIf the request is authorized and in order to provide the requested analytics, the NWDAF decides the AMF(s) based on the TAIs/Cell IDs and obtains the UE list in the TAs/Cells from AMF by invoking Namf_EventExposure_Subscribe service operation using event ID \"Number of UEs present in a geographical area\" as described in TS 23.502 [3].\n2b.\tThe NWDAF invokes Namf_EventExposure_Subscribe service operation to get the update of the UE list using event ID \"UE moving in or out of Area of Interest\" as described in TS 23.502 [3].\n3.\tThe NWDAF obtains location information using LCS by initiating the LCS Service Request to the GMLC to get the location and optionally the speed of UEs from UE list provided by the AMF in step 2.\n4.\tThe GMLC initiates the UE location service procedure and gets the location of the UEs as described in TS 23.273 [39].\n5.\tThe GMLC provides location information for each UE in the UE list to the NWDAF.\n6.\tFrom the list of UE locations returned by the GMLC, the NWDAF identifies the UEs located in fine granularity area by comparing the UEs' locations to the fine granularity area, provided in step 1.\n7.\tThe NWDAF invokes Namf_EventExposure_Subscribe service operation to get the serving SMF for the UE.\n8.\tBased on the serving SMF in step 7, the NWDAF invokes Nsmf_EventExposure_Subscribe service operation to get the UPF information and 5QI for the UE.\n9.\tThe NWDAF may collect QoS information either from the UPF directly, or subscribe to the UPF via the SMF. The QoS information may include the bandwidth, packet delay for the UE and the information on the serving UPF node id.\nNOTE 1:\tHow the data from UPF is retrieved (subscribed to on UPF and notified then by UPF) is defined in clause 5.8.2.17 of 23.501 [2] and in clause 4.15.4 of TS 23.502 [3].\n10.\tOptionally, the NWDAF may collect additional information for the UE Context or UE Subscription from the UDM such as PEI (if available). PEI may be used to retrieve, from GSMA database, additional information such as IMEI or IMEISV or TAC range, equipment type. Such additional information may be used by NWDAF to add more information to the collected measurements and filter those measurements that are applicable to the UE Device and Context Information for which analytics are requested by the service consumer.\n11.\tThe NWDAF verifies whether the triggering conditions are met and derives the requested analytics. The NWDAF can detect the need for notification based on comparing the requested analytics of the target 5QI against the Reporting Threshold(s) provided by the consumer in any cell over the requested Analytics target period.\n12.\tThe NWDAF provides the response or notification on \"QoS Sustainability\" to the NF consumer.\nNOTE 2:\tNWDAF may decide to ignore some of the filters if collected measurements are not sufficient to derive meaningful analytics.\nNOTE 3:\tIn order to reduce the amount of information collected per measurement point, the additional information from UDM may only be collected for the events of GBR unfulfillment. In this way the additional analytics filter information may only be supported for 5QI of resource type GBR and for events of GBR unfulfillment.",
      "chunk_type": "procedure",
      "cross_references": [
        "ts_23.288_clause_6.9.1",
        "clause_6.9.1",
        "clause_5.8.2.17",
        "ts_23.502_clause_4.15.4",
        "figure_6.9.4.2-1",
        "ts_23.288",
        "ts_23.502",
        "ts_23.273"
      ]
    },
    {
      "chunk_id": "ts_23.288_6.10.1",
      "section_id": "6.10.1",
      "section_title": "General",
      "content": "Dispersion analytics identifies the location (i.e. areas of interest, TAs, cells) or network slice(s) where a UE, or a group of UEs, or any UE disperse most (if not all) of their data volume and sessions transactions (i.e. MM and SM messages).\nThe NWDAF shall be able to provide dispersion statistics or predictions and shall be able to collect UE dispersion related information from NFs.\nDispersion is the percentage of activity that a UE, or group of UEs, or any UE, generates at a location or a slice during a period of interest. This enables the operator to rank hot locations or slices by the various activities and to identify the top contributors (i.e. UEs) for that activity. When heavy UEs at a particular location or slice are detected/predicted and reported to a policy entity, their QoS attributes, or access to an area of interest or a slice can then be limited.\n-\tData volume dispersion - The percentage of data traffic volume that a UE, or a group of UEs, or any UE, generated at a location or in a slice during the period of interest.\n-\tTransactions dispersion - The percentage of MM and SM messages that a UE, or a group of UEs, or any UE, generated at a location or in a slice during the period of interest.\nThe operator may classify and assign one of the three mobility classes per dispersion characteristics for a UE or a group of UEs, or any UE as fixed, camper or traveller. In addition, the operator may classify a UE as a Top-Heavy UE in case its dispersion percentile rating, at a location or a slice, is higher than a threshold value defined by the operator (e.g. 0.9 percentile), see percentile ranking in the output tables, clause 6.10.3. The classification is based on either Data volume dispersion or Transactions dispersion.\n-\tData-Classification - fixed, camper, traveller data-classification per thresholds assigned by the operator.\nEXAMPLE:\tWhen a UE disperses, during the period of observation, most (threshold=95%) of its data at a location or a slice, the dispersion data-classification of the UE at that location or slice is \"fixed\".\n-\tTransaction-Classification - fixed, camper, traveller transactions-classifications per thresholds assigned by the operator.\nEXAMPLE:\tWhen a UE disperses, during the period of observation, (threshold=40%) of its session transactions at a location or a slice, the dispersion transaction-classification of the UE is camper at that location or slice.\nBased on the dispersion analytics, the analytics consumer can determine that a data volume or transactions hot spot is formed when the volume of data or amount of transactions dispersed by most of the UEs at the area of interest or slice exceeds a certain data or transaction threshold established through trend analysis or operator policy.\nThe consumer of dispersion analytics may indicate in its request:\n-\tAnalytics ID = \"Dispersion Analytics\";\n-\tTarget of Analytics Reporting as defined in clause 6.1.3. \"Any UE\" is only supported in combination with Analytics Filter Information (S-NSSAI, Area(s) of Interest, Top-Heavy UEs indication, Fixed indication, Camper indication or Traveller indication) and Dispersion Analytics type \"Data Volume Dispersion Analytics\" and/or \"Transaction Dispersion Analytics\";\n-\tAnalytics Filter Information:\n-\toptional list of TAs, Areas of Interest, Cells, or S-NSSAIs, Application IDs, Top-Heavy UEs, Fixed UEs, Camper UEs, Dispersion Analytics types (Data Volume Dispersion Analytics (DVDA) or Transactions Dispersion Analytics (TDA) or both); and\n-\toptional list of analytics subsets that are requested (see clause 6.10.3);\n-\tPreferred level of accuracy of the analytics;\n-\tPreferred level of accuracy per analytics subset (see clause 6.10.3);\n-\tPreferred order of results for the list of UE Dispersion Analytics information:\n-\tordering criterion:\n-\tFor DDA, one of the following: \"time slot start\", \"data dispersion\", \"data classification\", \"data ranking\", or \"data percentile ranking\";\n-\tFor TDA, one of the following: \"time slot start\", \"transaction dispersion\", \"transaction classification\", \"transaction ranking\", or \"transaction percentile ranking\"; and\n-\torder: ascending or descending;\n-\tAnalytics target period indicating the time period over which the statistics or predictions are requested;\n-\tOptionally, maximum number of objects and maximum number of SUPIs;\n-\tOptionally, preferred granularity of location information: TA level or cell level;\n-\tOptionally, Spatial granularity size and Temporal granularity size; and\n-\tIn a subscription, the Notification Correlation Id and the Notification Target Address are included.\nNOTE 1:\tIf one or multiple ID(s) are included in the filter information, the output analytics will be reported per Application ID, otherwise the output analytics is aggregated information per AOI or slice independent of the applications.\nNOTE 2:\tCare needs to be taken with regards to load when requesting analytics for \"Any UE\". This could be achieved by utilizing event filters (e.g. Area of Interest for AMF) and possible analytics filters including Top-Heavy UEs and/or Fixed and/or Camper UEs and/or Analytics Reporting Information (e.g. SUPImax), or sampling ratio as part of Event Reporting Information. The load of analytics for \"Any UE\" can be alleviated by limiting the number of S-NSSAI in the analytics filter.",
      "chunk_type": "definition",
      "cross_references": [
        "clause_6.10.3",
        "clause_6.1.3"
      ]
    },
    {
      "chunk_id": "ts_23.288_6.10.2",
      "section_id": "6.10.2",
      "section_title": "Input Data",
      "content": "The NWDAF shall be able to collect UE dispersion information from NF(s) and AFs. The information collected by the NWDAF is network data from 5GC NFs and service data from AFs:\n-\tData related to UE transactions dispersion and bound by location collected from AMF and SMF are defined in the tables 6.10.2-1 and 6.10.2-2. This may include individual transactions or SMF/AMF state transition information stored as UE behaviour trends, which provides aggregated transaction information.\nTable 6.10.2-1: Location based UE transactions dispersion information collected from serving AMF\nInformation\nSource\nDescription\nUE ID\nAMF\nSUPI.\nType Allocation Code\nAMF\nTerminal model and vendor information of the UE.\nUE locations (1..max)\nAMF\nUE locations.\n> UE location\nAMF\nArea of Interest (TA or cells that the UE had entered).\n> Timestamp\nAMF\nTime stamp when the AMF detected that the UE had entered this location.\n> Transactions\nAMF\nEither all transactions for this UE in this location or, optionally, if subscription with periodic notification is requested, the amount of UE transactions exchanged at the location in the notified time period.\nUE access behaviour trends\nAMF\nMetrics on UE state transitions (e.g. access, RM and CM states, handover).\nUE location trends\nAMF\nMetrics on UE locations.\nNOTE:\tUE location provides one location per instance while UE location trend provides multiple locations at once. One or both of them may be used.\nTable 6.10.2-2: UE transactions dispersion information collected from serving SMF\nInformation\nSource\nDescription\nUE IP address\nSMF\nUE IP address.\nUE ID\nSMF\nSUPI.\n> Timestamp\nSMF\nTime stamp of the collected information.\n> Transactions\nSMF\nEither all transaction for this UE or, optionally, if subscription with periodic notification is requested, the amount of UE transactions exchanged in the notified time period.\n> UE session behaviour trends\nSMF\nMetrics on UE state transitions (e.g. PDU Session Establishment, PDU Session Release).\nData volume can be collected from the AF per UE across all the UE applications provided by a particular AF or per UE per application when application IDs are requested.\nData related to UE data volume dispersion, bound by a location or slice, collected from the AF and UPF are defined in tables 6.10.2-3 through 6.10.2-6.\nIf the Target of Analytics Reporting is set to an Internal Group ID and the AF is located in the untrusted domain, NEF translates it into an External Group ID.\nNOTE 1:\tIt is assumed that the AF is provisioned with the list of UE IDs (GPSIs or SUPIs) belonging to an External or Internal Group ID.\n-\tIn table 6.10.2-3, the data volume is collected per UE from the AF. The collected UE information is applicable across all the applications used by the UE during the period.\nTable 6.10.2-3: UE Data volume dispersion information collected from the AF\nInformation\nSource\nDescription\nUE ID\nAF\nInternal or External UE ID (i.e. SUPI or GPSI, respectively).\nTimestamp\nAF\nTime stamp of the collected information.\nData Volume UL/DL\nAF\nSum of UE data volume exchanged at the AF during the period of observation.\n-\tIn table 6.10.2-4, the AF reports data volume per UE per application in relation to the start and stop of the application as indicated by the application duration.\nTable 6.10.2-4: UE data volume dispersion collected from the AF\nInformation\nSource\nDescription\nUE IP address\nAF\nUE IP address.\nIP 5-tuple\nAF\nIP address 5-tuple.\nTimestamp\nAF\nTimestamp of the collected information.\nApplication ID\nAF\nIdentifier of the application at the AF.\nLocation of Application\nAF/NEF\nLocation of application represented by a list of DNAIs. The NEF may map the AF-Service identifier information to a list of DNAIs when the DNAIs being used by the application are statically defined.\nData Volume UL/DL\nAF\nSum of UE data volume exchanged per application during the period.\nApplication duration\nAF\nDuration for the application (e.g. Voice talk time).\nNOTE 1:\tApplication ID and IP 5-tuple are mutually exclusive.\nNOTE 2:\tMultiple outputs are provided by the AF when multiple applications are running at the AF for the same UE and time period.\nData volume can also be collected from the UPF per UE IP address across all applications or per UE for specific application(s).\n-\tIn table 6.10.2-5, the data volume is collected per UE from the UPF. The collected UE information is applicable across all applications used by the UE between start and stop of the PDU session. The UPF reports volume per UE IP address across all applications.\nTable 6.10.2-5: UE data volume dispersion collected from serving UPF\nInformation\nSource\nDescription\nUE IP address\nUPF\nUE IP address.\nTimestamp\nUPF\nTime stamp of the collected information.\nData Volume UL/DL\nUPF\nSum of UE data volume exchanged per UE across all applications.\nNOTE:\tThe Data volume can be reported either as total volume of the PDU session or periodically. It refers to the Data volume exchanged between the start and stop of the PDU session. When reported periodically, the period can be specified in the requested analytic target period or configured as a default value in the UPF.\n-\tIn table 6.10.2-6, the UPF reports data volume per UE for specific application(s) in relation to the start and stop of the application as indicated by the application duration.\nThere are two modes of data collection:\n-\tNon periodical: A mode where the data volume is requested and consequently provided for the total volume of a PDU session.\n-\tPeriodical: A mode where data volume is provided periodically between the start and stop of a PDU session. The period can be specified in the requested analytic target period or configured as a default value in the UPF.\nFor both modes of data collection, if there are multiple application sessions for the UE PDU session, the NWDAF aggregates (i.e. sums up) the data volume across all applications to obtain per UE information.\nTable 6.10.2-6: UE data volume dispersion collected from serving UPF\nInformation\nSource\nDescription\nUE IP address\nUPF\nUE IP address.\nTimestamp\nUPF\nA timestamp of the collected information.\nApplication ID\nUPF\nIdentify the application at the UPF\nIP 5-tuple\nUPF\nIP 5-tuple.\nLocation of Application\nUPF\nList of Internet applications represented by DNAI(s).\nData Volume UL/DL\nUPF\nSum of UE data volume exchanged per application during the period.\nApplication duration\nUPF\nDuration for the application (e.g. Voice talk time).\nNOTE 1:\tApplication ID and IP 5-tuple are mutually exclusive.\nNOTE 2:\tMultiple outputs are provided by the UPF when multiple applications are running at the UPF for the same UE and time period.\nNOTE 3:\tThe Data volume can be reported either as total volume of the PDU session or periodically. It refers to the Data volume exchanged between the start and stop of the PDU session. When reported periodically, the period can be specified in the requested analytic target period or configured as a default value in the UPF.\nThe task of the NWDAF is to calculate the volume of data and amount of transactions dispersed by the UE at each visited location during a period of interest. The entry time and exit time to a location is provided by the AMF.\nCollecting volume per UE and per specific application is optional and such information can be provided by the UPF or AF.\nThe Correlation Information as defined in table 6.2.4-1 is used to correlate the input data from AMF and SMF, the input data from SMF and UPF and the input data from UPF and AF.\n-\tSlice information related to UE transactions dispersion from NF(s) are defined in tables 6.10.2-7 and 6.10.2-8. This may include individual transactions or SMF/AMF state transition information stored as UE behaviour trends, which provides aggregated transaction information.\n-\tThe Slice data volume collection is the same as listed in tables 6.10.2-3 to 6.10.2-6.\nTable 6.10.2-7: Slice based UE transactions dispersion information collected from serving AMF\nInformation\nSource\nDescription\nUE ID\nAMF\nSUPI.\nType Allocation Code\nAMF\nTerminal model and vendor information of the UE.\nSlice (1..max)\nAMF\nUE assigned slice.\n>S-NSSAI\nAMF\nIdentifier of the slice.\n>Timestamp\nAMF\nTime stamp when the slice was assigned.\n>Transactions (NOTE)\nAMF\nEither all transactions for this UE or, optionally, if subscription with periodic notification is requested, an amount of UE transactions exchanged at the slice in the notified time period.\nUE access behaviour trends\nAMF\nMetrics on UE state transitions (e.g. access, RM and CM states, handover).\nNOTE:\tWhen a UE moves to a new AMF during Analytics target period, timestamps for assigned slices of the UE are set to the date and time of the new AMF. The NWDAF shall aggregate (sum up) the amount of slice transactions, for the requested Analytics target period, across the AMFs traversed by the UE.\nTable 6.10.2-8: Slice based UE transactions dispersion information collected from serving SMF\nInformation\nSource\nDescription\nUE IP\nSMF\nUE IP address.\nUE ID\nSMF\nSUPI.\nSlice (1..max)\nSMF\nUE assigned slice.\n>S-NSSAI\nSMF\nIdentifier of the slice.\n>Timestamp\nSMF\nTime stamp associated with the collected information.\n>Application ID\nSMF\nIdentifier of the application for the UE in the slice.\n>Transactions\nSMF\nEither all transactions for this UE or, optionally, if subscription with periodic notification is requested, an amount of UE transactions exchanged at the slice in the notified time period.\nUE session behaviour trends\nSMF\nMetrics on UE state transitions (e.g. PDU Session Establishment, PDU Session Release).\nThe task of the NWDAF is to calculate the volume of data and amount of transactions dispersed by the UE at each slice during a period of interest. A time stamp of a slice assignment is provided by the AMF.\nThe Correlation Information as defined in table 6.2.4-1 is used to correlate the input data from AMF and SMF, the input data from SMF and UPF and the input data from UPF and AF.\nData collection may be provided on samples (e.g. spatial subsets of UEs or UE group, temporal subsets of UE location information).\nNOTE 2:\tHow the data from UPF is retrieved (subscribed to on UPF and notified then by UPF) is defined in clause 5.8.2.17 of TS 23.501 [2] and in clause 4.15.4 of TS 23.502 [3].\nNOTE 3: The list of monitored transactions (MM and SM messages) is a subset of the messages listed in clauses 8.2 and 8.3 of TS 24.501 [23].\nNOTE 4:\tThe Namf_EventExposure and Nsmf_EventExposure services in clauses 5.2.2.3 and 5.2.8.3 of TS 23.502 [3] provide the required transactions information.",
      "chunk_type": "requirement",
      "cross_references": [
        "ts_23.501_clause_5.8.2.17",
        "ts_23.501_clause_4.15.4",
        "table_6.10.2-1",
        "table_6.10.2-2",
        "table_6.10.2-3",
        "table_6.10.2-4",
        "table_6.10.2-5",
        "table_6.10.2-6",
        "table_6.2.4-1",
        "table_6.10.2-7",
        "table_6.10.2-8",
        "ts_23.502_clause_4.15.4",
        "ts_23.501",
        "ts_23.502",
        "ts_24.501"
      ]
    },
    {
      "chunk_id": "ts_23.288_6.10.3.0",
      "section_id": "6.10.3.0",
      "section_title": "General",
      "content": "The NWDAF provides UE dispersion analytics, which can be statistics and/or prediction for data volume and/or transactions dispersions, to consumer NFs or AFs.",
      "chunk_type": "definition",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.288_6.10.3.1",
      "section_id": "6.10.3.1",
      "section_title": "Data Volume Dispersion Analytics",
      "content": "The data volume dispersion analytics results provided by the NWDAF can be for a UE or group of UEs or \"any UE\" data volume dispersion statistics as defined in table 6.10.3.1-1 and/or UE data volume dispersion predictions as defined in table 6.10.3.1-2. If the analytics covers multiple UEs, the Data dispersed, Data ranking and Data percentile ranking parameters are calculated as the aggregated (i.e. summed up) data volume. When the Target of Analytics Reporting is set as \"any UE\" the data volume dispersion analytics results provided by the NWDAF can be for all UEs data volume dispersion statistics at a location and/or the slice and/or data volume dispersion predictions at a location and/or the slice.\nTable 6.10.3.1-1: Data volume dispersion statistics bound by location\nInformation\nDescription\nUE group ID or UE ID or list of UE IDs (1..SUPImax)\nIdentifies the UE(s) for which the statistic applies by a list of SUPIs, or a group of UEs by a list of Internal-Group-Ids (see NOTE 1).\nTime slot entry (1..max)\nList of time slots during the Analytics target period.\n> Time slot start\nTime slot start within the Analytics target period.\n> Duration\nDuration of the time slot. If a Temporal granularity size was provided in the request or subscription, the Duration is greater than or equal to the Temporal granularity size.\n> UE location (1..max)\nObserved location statistics.\n>> UE location\nTA or cells where the UE or UE group or list of UEs dispersed its data (see NOTE 3).\n>> Application ID (0..max) (NOTE 7)\nTo identify the application (NOTE 6).\n>>> Data volume dispersed (NOTE 4)\nData volume dispersed at this location.\n>> Data mobility classification (NOTE 4)\nData mobility classification of the UE for this location: fixed, camper, traveller (see NOTE 5).\n>> Data usage ranking (NOTE 4) (NOTE 7)\nRanking of UE data usage at this location (See NOTE 2).\n>> Data usage percentile ranking (NOTE 4) (NOTE 7)\nPercentile ranking of the UE or UE group in the Cumulative Distribution Function of data usage for the population of all UEs served at the location.\n>> Ratio\nPercentage of UEs in the group at the location and observation time (in the case of UE group).\nNOTE 1:\tWhen Target of Analytics Reporting is an individual UE, a single UE ID (i.e. SUPI) will be included. When Target of Analytics Reporting is a UE group ID, an internal group ID will be included. When Target of Analytics Reporting is a UE group ID or \"Any UE\" and a filter for Top-Heavy UEs, fixed, camper or traveller is included, the NWDAF will include the list of UEs matching the filter. This information element is not present when Target of Analytic Reporting is \"Any UE\" and no filter for Top-Heavy UEs, fixed, camper or traveller is included. The NWDAF will provide the dispersion analytics result of one or a list of time slots to the service consumer(s) for the UE, group of UEs or list of UEs.\nNOTE 2:\tUE is ranked high (i.e. 1), medium (2) and low (3) when its data dispersed, during the period of observation at the location, is higher than N1% or at the range of N1% to N2% or less than N2%, respectively. The percentage values of N1 and N2 are subject to operator's configuration.\nNOTE 3:\tWhen possible and applicable to the access type, UE location is provided according to the preferred granularity of location information and Spatial granularity size.\nNOTE 4:\tThis information element is an analytics subset that can be used in \"list of analytics subsets that are requested\" and \"preferred level of accuracy per analytics subset\".\nNOTE 5:\tThis parameter is only provided for Target of Analytics Reporting set to single UE.\nNOTE 6:\tWhen Application ID is not included in the input, cardinality is zero and data volume dispersed is provided per UE location and applies across all the applications in that location.\nNOTE 7:\tThis parameter is not provided for Target of Analytics Reporting set to \"Any UE\".\nTable 6.10.3.1-2: Data volume dispersion prediction bound by location\nInformation\nDescription\nUE group ID or UE ID or list of UE IDs (1..SUPImax)\nIdentifies the UE(s) for which the prediction applies by a list of SUPIs, or a group of UEs by a list of Internal-Group-Ids (see NOTE 1).\nTime slot entry (1..max)\nList of time slots during the Analytics target period.\n> Time slot start\nTime slot start within the Analytics target period.\n> Duration\nDuration of the time slot. If a Temporal granularity size was provided in the request or subscription, the Duration is greater than or equal to the Temporal granularity size.\n> UE location (1..max)\nPredicted location during the analytics target period.\n>> UE location\nTA or cells where the UE or UE group or list of UEs is predicted to disperse its data (see NOTE 3).\n>> Application ID (0..max) (NOTE 7)\nTo identify the application (NOTE 6).\n>>> Data volume dispersion (NOTE 4)\nData volume dispersion prediction at this location.\n>>>> Confidence\nConfidence of this prediction (i.e. data volume to be dispersed at this location).\n>> Data mobility classification (NOTE 4)\nData mobility classification of the UE for this location: fixed, camper, traveller (see NOTE 5).\n>>> Confidence\nConfidence of this prediction (i.e. mobility classification at this location).\n>> Data usage ranking (NOTE 4) (NOTE 7)\nRanking of UE data usage at this location (See NOTE 2).\n>> Data percentile usage ranking (NOTE 4) (NOTE 7)\nPercentile ranking of the UE or UE group in the Cumulative Distribution Function of data usage for the population of all UEs served at the location.\n>>> Confidence\nConfidence of this prediction (i.e. percentile ranking at this location).\n>> Ratio\nPercentage of UEs in the group (in the case of UE group).\nNOTE 1:\tWhen Target of Analytics Reporting is an individual UE, a single UE ID (i.e. SUPI) will be included. When Target of Analytics Reporting is a UE group ID, an internal group ID will be included. When Target of Analytics Reporting is a UE group ID or \"Any UE\" and a filter for Top-Heavy UEs, fixed, camper or traveller is included, the NWDAF will include the list of UEs matching the filter. This information element is not present when Target of Analytic Reporting is \"Any UE\" and no filter for Top-Heavy UEs, fixed, camper or traveller is included. The NWDAF will provide the dispersion analytics result of one or a list of time slots to the service consumer(s) for the UE, group of UEs or list of UEs.\nNOTE 2:\tUE is ranked high (i.e. 1), medium (2) and low (3) when its data dispersed, during the period of observation at the location, is higher than N1% or at the range of N1% to N2% or less than N2%, respectively. The percentage values of N1 and N2 are subject to operator's configuration.\nNOTE 3:\tWhen possible and applicable to the access type, UE location is provided according to the preferred granularity of location information and Spatial granularity size.\nNOTE 4:\tThis information element is an analytics subset that can be used in \"list of analytics subsets that are requested\" and \"preferred level of accuracy per analytics subset\".\nNOTE 5:\tThis parameter is only provided for Target of Analytics Reporting set to single UE.\nNOTE 6:\tWhen Application ID is not included in the input, cardinality is zero and data volume dispersion prediction is provided per UE location and applies across all the applications in that location.\nNOTE 7:\tThis parameter is not provided for Target of Analytics Reporting set to \"Any UE\".\nThe data volume dispersion analytics results provided by the NWDAF can also be for a UE or group of UEs or \"any UE\" data volume dispersion statistics at a given slice as defined in Table 6.10.3.1-3 and/or data volume dispersion predictions as defined in Table 6.10.3.1-4. If the analytics covers multiple UEs, the Data dispersed, Data ranking and Data percentile ranking parameters are calculated as the aggregated (i.e. summed up) data volume. When the Target of Analytics Reporting is set as \"any UE\" the data volume dispersion analytics results provided by the NWDAF can be for all UEs data volume dispersion statistics at a given slice and/or data volume dispersion predictions at a given slice.\nTable 6.10.3.1-3: Data volume dispersion statistics bound by slice\nInformation\nDescription\nUE group ID or UE ID or a list of UE IDs (1..SUPImax)\nIdentifies the UE(s) for which the statistics applies by a list of SUPIs, or a group of UEs by a list of Internal-Group-Ids (see NOTE 1).\nTime slot entry (1..max)\nList of time slots during the Analytics target period.\n> Time slot start\nTime slot start within the Analytics target period.\n> Duration\nDuration of the time slot. If a Temporal granularity size was provided in the request or subscription, the Duration is greater than or equal to the Temporal granularity size.\n> Slice (1..max)\nObserved slice statistics.\n>> S-NSSAI\nSlice where the UE or group of UEs or list of UEs dispersed data.\n>> Application ID (0..max) (NOTE 6)\nTo identify the application at the slice (NOTE 5).\n>>> Data volume dispersed (NOTE 3)\nData volume dispersed at this slice.\n>> Data mobility classification (NOTE 3)\nData mobility classification of the UE at the slice: fixed, camper, traveller (see NOTE 4).\n>> Data usage ranking (NOTE 3) (NOTE 6)\nRanking of UE data usage at this slice.  (See NOTE 2).\n>> Data usage percentile ranking (NOTE 3) (NOTE 6)\nPercentile ranking of the UE or UE group in the Cumulative Distribution Function of data usage for the population of all UEs served by the slice.\n>> Ratio\nPercentage of UEs in the group (in the case of UE group).\nNOTE 1:\tWhen Target of Analytics Reporting is an individual UE, a single UE ID (i.e. SUPI) will be included. When Target of Analytics Reporting is a UE group ID, an internal group ID will be included. When Target of Analytics Reporting is a UE group ID or \"Any UE\" and a filter for Top-Heavy UEs, fixed, camper or traveller is included, the NWDAF will include the list of UEs matching the filter. This information element is not present when Target of Analytic Reporting is \"Any UE\" and no filter for Top-Heavy UEs, fixed, camper or traveller is included. The NWDAF will provide the dispersion analytics result of one or a list of time slots to the service consumer(s) for the UE, the group of UEs or the list of UEs.\nNOTE 2:\tUE is ranked high (i.e. 1), medium (2) and low (3) when its data dispersed, during the period of observation at the location, is higher than N1% or at the range of N1% to N2% or less than N2%, respectively. The percentage values of N1 and N2 are subject to operator's configuration.\nNOTE 3:\tThis information element is an analytics subset that can be used in \"list of analytics subsets that are requested\" and \"preferred level of accuracy per analytics subset\".\nNOTE 4:\tThis parameter is only provided for Target of Analytics Reporting set to single UE.\nNOTE 5:\tWhen Application ID is not included in the input, cardinality is zero and data volume dispersed is provided per slice and applies across all the applications in the slice.\nNOTE 6:\tThis parameter is not provided for Target of Analytics Reporting set to \"Any UE\".\nTable 6.10.3.1-4: Data volume dispersion prediction bound by slice\nInformation\nDescription\nUE group ID or UE ID or list of UE IDs (1..SUPImax)\nIdentifies the UE(s), for which the prediction applies by a list of SUPIs, or a group of UEs by a list of Internal-Group-Ids (see NOTE 1).\nTime slot entry (1..max)\nList of time slots during the Analytics target period.\n> Time slot start\nTime slot start within the Analytics target period.\n> Duration\nDuration of the time slot. If a Temporal granularity size was provided in the request or subscription, the Duration is greater than or equal to the Temporal granularity size.\n> Slice (1..max)\nPredicted slice during the Analytics target period.\n>> S-NSSAI\nSlice where the UE or UE group or list of UEs is predicted to disperse its data.\n>> Application ID (0..max) (NOTE 6)\nTo identify the application at the slice (NOTE 5).\n>>> Data volume dispersion (NOTE 3)\nData volume dispersion prediction at this slice.\n>>>> Confidence\nConfidence of this prediction (i.e. data volume to be dispersed at this slice).\n>> Data mobility classification (NOTE 3)\nData mobility classification of the UE at this slice: fixed, camper, traveller (see NOTE 4).\n>>> Confidence\nConfidence of this prediction (i.e. mobility classification at this slice).\n>> Data usage ranking (NOTE 3) (NOTE 6)\nRanking of UE data usage at this slice. See NOTE 2.\n>> Data usage percentile ranking (NOTE 3) (NOTE 6)\nPercentile ranking of the UE or UE group in the Cumulative Distribution Function of data usage for the population of all UEs served by the slice.\n>>> Confidence\nConfidence of this prediction (i.e. percentile ranking at this slice).\n>> Ratio\nPercentage of UEs in the group (in the case of UE group).\nNOTE 1:\tWhen Target of Analytics Reporting is an individual UE, a single UE ID (i.e. SUPI) will be included. When Target of Analytics Reporting is a UE group ID, an internal group ID will be included. When Target of Analytics Reporting is a UE group ID or \"Any UE\" and a filter for Top-Heavy UEs, fixed, camper or traveller is included, the NWDAF will include the list of UEs matching the filter. This information element is not present when Target of Analytic Reporting is \"Any UE\" and no filter for Top-Heavy UEs, fixed, camper or traveller is included. The NWDAF will provide the dispersion analytics result of one or a list of time slots to the service consumer(s) for the UE, group of UEs or list of UEs.\nNOTE 2:\tUE is ranked high (i.e. 1), medium (2) and low (3) when its data dispersed, during the period of observation at the location, is higher than N1% or at the range of N1% to N2% or less than N2%, respectively. The percentage values of N1 and N2 are subject to operator's configuration.\nNOTE 3:\tThis information element is an analytics subset that can be used in \"list of analytics subsets that are requested\" and \"preferred level of accuracy per analytics subset\".\nNOTE 4:\tThis parameter is only provided for Target of Analytics Reporting set to single UE.\nNOTE 5:\tWhen Application ID is not included in the input, cardinality is zero and data volume dispersion prediction is provided per slice and applies across all the applications in the slice.\nNOTE 6:\tThis parameter is not provided for Target of Analytics Reporting set to \"Any UE\".\nWhen the Target of Analytics Reporting is set as \"any UE\", no filter for Top-Heavy UEs, fixed, camper or traveller is included and the Analytics Filter Information is set to one or several S-NSSAIs and DDVA, the data volume dispersion analytics results provided by the NWDAF can be for all UEs data volume dispersion statistics at a given slice as defined in Table 6.10.3.1-5 and/or data volume dispersion predictions as defined in Table 6.10.3.1-6:\nTable 6.10.3.1-5: Data volume dispersion statistics bound by slice (for any UE)\nInformation\nDescription\nTime slot entry (1..max)\nList of time slots during the Analytics target period.\n> Time slot start\nTime slot start within the Analytics target period.\n> Duration\nDuration of the time slot. If a Temporal granularity size was provided in the request or subscription, the Duration is greater than or equal to the Temporal granularity size.\n> Slice (1..max)\nObserved slice statistics.\n>> S-NSSAI\nSlice where all UEs dispersed data.\n>> Data volume dispersed\nData volume dispersed at this slice. (see NOTE 1).\nNOTE 1:\tUtilized bandwidth (i.e. average throughput) at the slice can be calculated by using the Data volume dispersed in the Duration.\nTable 6.10.3.1-6: Data volume dispersion prediction bound by slice (for any UE)\nInformation\nDescription\nTime slot entry (1..max)\nList of time slots during the Analytics target period.\n> Time slot start\nTime slot start within the Analytics target period.\n> Duration\nDuration of the time slot. If a Temporal granularity size was provided in the request or subscription, the Duration is greater than or equal to the Temporal granularity size.\n> Slice (1..max)\nPredicted slice during the Analytics target period.\n>> S-NSSAI\nSlice where the UE is predicted to disperse its data.\n>> Data volume dispersion\nData volume dispersion prediction at this slice. (see NOTE 1).\n>>>> Confidence\nConfidence of this prediction (i.e. data to be dispersed at this slice).\nNOTE 1:\tUtilized bandwidth (i.e. average throughput) predication at the slice can be calculated by using the Data volume dispersion in the Duration.\nNOTE:\tThe Application ID in the Data Volume Dispersion Analytics is optional. When the Application ID is missing, the Data Volume Dispersion Analytics is applied across all the applications in an AOI or a slice.",
      "chunk_type": "general",
      "cross_references": [
        "table_6.10.3.1-1",
        "table_6.10.3.1-2",
        "table_6.10.3.1-3",
        "table_6.10.3.1-4",
        "table_6.10.3.1-5",
        "table_6.10.3.1-6"
      ]
    },
    {
      "chunk_id": "ts_23.288_6.10.3.2",
      "section_id": "6.10.3.2",
      "section_title": "Transactions Dispersion Analytics",
      "content": "The transactions (MM and MS messages) dispersion analytics results provided by the NWDAF can be for a UE or group of UEs or \"any UE\" transactions dispersion statistics as defined in Table 6.10.3.2-1 and/or UE transactions dispersion predications as defined in Table 6.10.3.2-2. If the analytics covers multiple UEs, the Transactions dispersed, Transactions ranking and Transactions percentile ranking parameters are calculated as the aggregated (i.e. summed up) number of transactions. When the Target of Analytics Reporting is set as \"any UE\" the transaction dispersion analytics results provided by the NWDAF can be for all UEs transaction dispersion statistics at a location and/or the slice and/or transaction dispersion predictions at a location and/or the slice.\nTable 6.10.3.2-1: Transactions dispersion statistics bound by location\nInformation\nDescription\nUE group ID or UE ID or list of UE IDs (1..SUPImax)\nIdentifies the UE(s) for which the statistics applies by a list of SUPIs, or a group of UEs by a list of Internal-Group-Ids (see NOTE 1).\nTime slot entry (1..max)\nList of time slots during the Analytics target period.\n> Time slot start\nTime slot start within the Analytics target period.\n> Duration\nDuration of the time slot. If a Temporal granularity size was provided in the request or subscription, the Duration is greater than or equal to the Temporal granularity size.\n> UE location (1..max)\nObserved location statistics.\n>> UE location\nTA or cells where the UE or group of UEs or list of UEs dispersed its transactions (see NOTE 3).\n>> Transactions dispersed (NOTE 4)\nTransactions amount dispersed at this location.\n>> Transactions mobility classification (NOTE 4)\nTransactions mobility classification of the UE for this location: fixed, camper, traveller (see NOTE 5).\n>> Transactions ranking (NOTE 4) (NOTE 6)\nRanking of transactions amount at this location. See NOTE 2.\n>> Transactions percentile ranking (NOTE 4) (NOTE 6)\nPercentile ranking of the UE or UE group in the Cumulative Distribution Function of transactions for the population of all UEs served at the location.\n>> Ratio\nPercentage of UEs in the group (in the case of UE group).\nNOTE 1:\tWhen Target of Analytics Reporting is an individual UE, a single UE ID (i.e. SUPI) will be included. When Target of Analytics Reporting is a UE group ID, an internal group ID will be included. When Target of Analytics Reporting is a UE group ID or \"Any UE\" and a filter for Top-Heavy UEs, fixed, camper or traveller is included, the NWDAF will include the list of UEs matching the filter. This information element is not present when Target of Analytic Reporting is \"Any UE\" and no filter for Top-Heavy UEs, fixed, camper or traveller is included. The NWDAF will provide the dispersion analytics result of one or a list of time slots to the service consumer(s) for the UE, group of UEs or list of UEs.\nNOTE 2:\tUE is ranked high (i.e. 1), medium (2) and low (3) when its transactions are dispersed, during the period of observation at the location, is higher than N1% or at the range of N1% to N2% or less than N2%, respectively. The percentage values of N1 and N2 are subject to operator's configuration.\nNOTE 3:\tWhen possible and applicable to the access type, UE location is provided according to the preferred granularity of location information and Spatial granularity size.\nNOTE 4:\tThis information element is an analytics subset that can be used in \"list of analytics subsets that are requested\" and \"preferred level of accuracy per analytics subset\".\nNOTE 5:\tThis parameter is only provided for Target of Analytics Reporting set to single UE.\nNOTE 6:\tThis parameter is not provided for Target of Analytics Reporting set to \"Any UE\".\nTable 6.10.3.2-2: Transactions dispersion prediction bound by location\nInformation\nDescription\nUE group ID or UE ID or list of UE IDs (1..SUPImax)\nIdentifies the UE(s), for which the prediction applies by a list of SUPIs, or a group of UEs by a list of Internal-Group-Ids (see NOTE 1).\nTime slot entry (1..max)\nList of predicted time slots.\n> Time slot start\nTime slot start within the Analytics target period.\n> Duration\nDuration of the time slot. If a Temporal granularity size was provided in the request or subscription, the Duration is greater than or equal to the Temporal granularity size.\n> UE location (1..max)\nPredicted location during the analytic target period.\n>> UE location\nTA or cells where the UE or group of UEs or list of UEs is predicted to disperse its transactions (see NOTE 3).\n>> Transactions dispersion (NOTE 4)\nTransaction amount predicted to be dispersed at this location.\n>>> Confidence\nConfidence of this prediction (i.e. data to be dispersed at this location).\n>> Transactions mobility classification (NOTE 4)\nTransaction mobility classification of the UE for this location: fixed, camper, traveller (see NOTE 5).\n>>> Confidence\nConfidence of this prediction (i.e. mobility classification at this location).\n>> Transactions ranking (NOTE 4) (NOTE 6)\nRanking of transactions amount at this location. See NOTE 2.\n>> Transactions percentile ranking (NOTE 4) (NOTE 6)\nPercentile ranking of the UE or UE group in the Cumulative Distribution Function of transactions for the population of all UEs served at the location.\n>>> Confidence\nConfidence of this prediction (i.e. percentile ranking at this location).\n>> Ratio\nPercentage of UEs in the group (in the case of UE group).\nNOTE 1:\tWhen Target of Analytics Reporting is an individual UE, a single UE ID (i.e. SUPI) will be included. When Target of Analytics Reporting is a UE group ID, an internal group ID will be included. When Target of Analytics Reporting is a UE group ID or \"Any UE\" and a filter for Top-Heavy UEs, fixed, camper or traveller is included, the NWDAF will include the list of UEs matching the filter. This information element is not present when Target of Analytic Reporting is \"Any UE\" and no filter for Top-Heavy UEs, fixed, camper or traveller is included. The NWDAF will provide the dispersion analytics result of one or a list of time slots to the service consumer(s) for the UE, group of UEs or list of UEs.\nNOTE 2:\tUE is ranked high (i.e. 1), medium (2) and low (3) when its transactions are dispersed, during the period of observation at the location, is higher than N1% or at the range of N1% to N2% or less than N2%, respectively. The percentage values of N1 and N2 are subject to operator's configuration.\nNOTE 3:\tWhen possible and applicable to the access type, UE location is provided according to the preferred granularity of location information and Spatial granularity size.\nNOTE 4:\tThis information element is an analytics subset that can be used in \"list of analytics subsets that are requested\" and \"preferred level of accuracy per analytics subset\".\nNOTE 5:\tThis parameter is only provided for Target of Analytics Reporting set to single UE.\nNOTE 6:\tThis parameter is not provided for Target of Analytics Reporting set to \"Any UE\".\nThe transactions dispersion analytics results provided by the NWDAF can be UE or group of UEs or \"any UE\" transactions dispersion statistics at a given slice as defined in table 6.10.3.2-3 and/or transactions dispersion predictions as defined in table 6.10.1.4.2-4. If the analytics covers multiple UEs, the Transactions dispersed, Transactions ranking and Transactions percentile ranking parameters are calculated as the aggregated (i.e. summed up) number of transactions. When the Target of Analytics Reporting is set as \"any UE\" the transaction dispersion analytics results provided by the NWDAF can be for all UEs transaction dispersion statistics at a given slice and/or transaction dispersion predictions at a given slice.\nTable 6.10.3.2-3: Transactions dispersion statistics bound by slice\nInformation\nDescription\nUE group ID or UE ID or a list of UE IDs (1..SUPImax)\nIdentifies the UE(s), for which the statistic applies by a list of SUPIs, or a group of UEs by a list of Internal-Group-Ids (see NOTE 1).\nTime slot entry (1..max)\nList of time slots during the Analytics target period.\n> Time slot start\nTime slot start within the Analytics target period.\n> Duration\nDuration of the time slot. If a Temporal granularity size was provided in the request or subscription, the Duration is greater than or equal to the Temporal granularity size.\n> Slice (1..max)\nObserved slice statistics.\n>> S-NSSAI\nSlice where the UE or group of UEs or list of UEs dispersed its transactions.\n>> Transactions dispersed (NOTE 3)\nTransactions amount dispersed at this location.\n>> Transactions mobility classification (NOTE 3)\nTransaction mobility classification of the UE at the slice: fixed, camper, traveller (see NOTE 4).\n>> Transactions ranking (NOTE 3) (NOTE 5)\nRanking of transactions amount at this slice. See NOTE 2.\n>> Transactions percentile ranking (NOTE 3) (NOTE 5)\nPercentile ranking of the UE or UE group in the Cumulative Distribution Function of transactions for the population of all UEs served by the slice.\n>> Ratio\nPercentage of UEs in the group (in the case of UE group).\nNOTE 1:\tWhen Target of Analytics Reporting is an individual UE, a single UE ID (i.e. SUPI) will be included. When Target of Analytics Reporting is a UE group ID, an internal group ID will be included. When Target of Analytics Reporting is a UE group ID or \"Any UE\" and a filter for Top-Heavy UEs, fixed, camper or traveller is included, the NWDAF will include the list of UEs matching the filter. This information element is not present when Target of Analytic Reporting is \"Any UE\" and no filter for Top-Heavy UEs, fixed, camper or traveller is included. The NWDAF will provide the dispersion analytics result of one or a list of time slots to the service consumer(s) for the UE, the group of UEs or the list of UEs.\nNOTE 2:\tUE is ranked high (i.e. 1), medium (2) and low (3) when its transactions are dispersed, during the period of observation at the location, is higher than N1% or at the range of N1% to N2% or less than N2%, respectively. The percentage values of N1 and N2 are subject to operator's configuration.\nNOTE 3:\tThis information element is an analytics subset that can be used in \"list of analytics subsets that are requested\" and \"preferred level of accuracy per analytics subset\".\nNOTE 4:\tThis parameter is only provided for Target of Analytics Reporting set to single UE.\nNOTE 5:\tThis parameter is not provided for Target of Analytics Reporting set to \"Any UE\".\nTable 6.10.3.2-4: Transactions dispersion prediction bound by slice\nInformation\nDescription\nUE group ID or UE ID or list of UE IDs (1..SUPImax)\nIdentifies the UEs, , or a list of UEs for which the prediction applies by a list of SUPIs, or a group of UEs by a list of Internal-Group-Ids (see NOTE 1).\nTime slot entry (1..max)\nList of predicted time slots.\n> Time slot start\nTime slot start within the Analytics target period.\n> Duration\nDuration of the time slot. If a Temporal granularity size was provided in the request or subscription, the Duration is greater than or equal to the Temporal granularity size.\n> Slice (1..max)\nPredicted slice during the Analytics target period.\n>> S-NSSAI\nSlice where the UE or group of UEs or list of UEs is predicted to disperse its transactions.\n>> Transactions dispersion (NOTE 3)\nTransaction volume to be dispersed at this slice.\n>>> Confidence\nConfidence of this prediction (i.e. transactions to be dispersed at this slice).\n>> Transactions mobility classification (NOTE 3)\nTransaction mobility classification of the UE at this slice: fixed, camper, traveller (see NOTE 4).\n>>> Confidence\nConfidence of this prediction (i.e. mobility classification at this slice).\n>> Transactions ranking (NOTE 3) (NOTE 5)\nRanking of transactions amount at this slice.  See NOTE 2.\n>> Transactions percentile ranking (NOTE 3) (NOTE 5)\nPercentile ranking of the UE or UE group in the Cumulative Distribution Function of transactions for the population of all UEs served by the slice.\n>>> Confidence\nConfidence of this prediction (i.e. percentile ranking at this slice).\n>> Ratio\nPercentage of UEs in the group (in the case of UE group).\nNOTE 1:\tWhen Target of Analytics Reporting is an individual UE, a single UE ID (i.e. SUPI) will be included. When Target of Analytics Reporting is a UE group ID an internal group ID will be included. When Target of Analytics Reporting is a UE group ID or \"Any UE\" and a filter for Top-Heavy UEs, fixed, camper or traveller is included, the NWDAF will include the list of UEs matching the filter. This information element is not present when Target of Analytic Reporting is \"Any UE\" and no filter for Top-Heavy UEs, fixed, camper or traveller is included. The NWDAF will provide the dispersion analytics result of one or a list of time slots to the service consumer(s) for the UE, group of UEs or list of UEs.\nNOTE 2:\tUE is ranked high (i.e. 1), medium (2) and low (3) when its transactions are dispersed, during the period of observation at the location, is higher than N1% or at the range of N1% to N2% or less than N2%, respectively. The percentage values of N1 and N2 are subject to operator's configuration.\nNOTE 3:\tThis information element is an analytics subset that can be used in \"list of analytics subsets that are requested\" and \"preferred level of accuracy per analytics subset\".\nNOTE 4:\tThis parameter is only provided for Target of Analytics Reporting set to single UE.\nNOTE 5:\tThis parameter is not provided for Target of Analytics Reporting set to \"Any UE\".",
      "chunk_type": "general",
      "cross_references": [
        "table_6.10.3.2-1",
        "table_6.10.3.2-2",
        "table_6.10.3.2-3",
        "table_6.10.1.4.2-4",
        "table_6.10.3.2-4"
      ]
    },
    {
      "chunk_id": "ts_23.288_6.10.4",
      "section_id": "6.10.4",
      "section_title": "Dispersion Analytic Procedure",
      "content": "The NWDAF can provide Dispersion analytics, in the form of statistics or predictions, to an NF or AF.\nFigure 6.10.4-1: UE Dispersion Analytics provided to an NF or AF\n1.\tThe NF sends a request or subscription to the NWDAF for dispersion analytics on a specific UE, any UE, or a group of UEs, using either the Nnwdaf_AnalyticsInfo or Nnwdaf_AnalyticsSubscription service. The NF can request statistics or predictions or both. The Analytics ID is set to \"UE Dispersion Analytics\", the Dispersion Analytic (DA) type is set to \"Data Volume Dispersion Analytics\" (DVDA) or \"Transactions Dispersion Analytics\" (TDA) and Analytic Filter Information = (Area of Interest, slice, target period, optional UE class: Top-Heavy, Fixed, or Camper UEs). The NF or AF provides the Target of Analytics Reporting as defined in clause 6.10.2.\n2.\tIf the request is authorized and in order to provide the requested analytics, the NWDAF may subscribe to events with all the serving AMFs, SMFs of the requested UE(s) for notification of location changes or a slice change (a slice change can be an additional slice or a deletion), or to obtain UE location trends, UE access behaviour trends and UE session behaviour trends. This step may be skipped when, e.g. the NWDAF already has the requested analytics available.\nThe NWDAF subscribes to application service data from AF(s) by invoking Naf_EventExposure_Subscribe service or Nnef_EventExposure_Subscribe (via NEF).\nThe NWDAF can collect data volume information from the UPF, as listed in tables 6.10.2-5 and 6.10.2-6 and clause 6.2.2.1. How the data from UPF is retrieved (subscribed to on UPF and notified then by UPF) is defined in clause 5.8.2.17 of TS 23.501 [2] and in clause 4.15.4 of TS 23.502 [3].\nNOTE:\tThe NWDAF determines the AMF serving the UE, any UE, or the group of UEs, identified by an Internal-Group-Id, as described in clause 6.2.2.1.\n3.\tThe NWDAF derives requested analytics.\n4.\tThe NWDAF provides requested or subscribed UE dispersion analytics to the NF, using either the Nnwdaf_AnalyticsInfo_Request Response or Nnwdaf_AnalyticsSubscription_Notify, depending on the service used in step 1. The details for UE dispersion analytics provided by NWDAF are described in clause 6.10.3. The provided analytics enables the consumer to predict changing network conditions such as data volume change at a location or a slice, excessive signalling conditions at a location or a slice, etc.\n5-6. If at step 1, the NF has subscribed to receive notifications for UE dispersion analytics, after receiving event notification from the AMFs (e.g. location change) or SMFs (e.g. slice change add/delete) subscribed by NWDAF in step 2, the NWDAF may generate new dispersion analytics.\n7.\tThe NWDAF provides the newly generated dispersion analytics to the NF. The details for UE dispersion analytics provided by NWDAF are described in clause 6.10.3.",
      "chunk_type": "procedure",
      "cross_references": [
        "clause_6.10.2",
        "clause_6.2.2.1",
        "ts_23.501_clause_5.8.2.17",
        "ts_23.501_clause_4.15.4",
        "clause_6.10.3",
        "figure_6.10.4-1",
        "ts_23.502_clause_4.15.4",
        "ts_23.501",
        "ts_23.502"
      ]
    },
    {
      "chunk_id": "ts_23.288_6.11.1",
      "section_id": "6.11.1",
      "section_title": "General",
      "content": "The NWDAF provides WLAN performance analytics to a service consumer NF. The analytics results are generated based on the data from other 5GC NFs and OAM. The analytics results, provided in the form of statistics or predictions, contain quality and performance of WLAN connection of UE according to UE location and SSID. The consumer can request either one-time or continuous reporting.\nThe service consumer may be an NF (e.g. PCF, NEF or AF).\nIf a service consumer is PCF, the WLAN performance analytics can be used to update WLANSP as defined in TS 23.503 [4].\nIf the service consumer is NEF or AF, the WLAN performance analytics per UE granularity can be used to select candidate members for an application layer operation.\nThe consumer of these analytics may indicate in the request or subscription:\n-\tAnalytics ID = \"WLAN performance\";\n-\tTarget of Analytics Reporting as defined in clause 6.1.3;\n-\tAnalytics Filter Information:\n-\tArea of Interest (list of TA or Cells);\n-\tSSID(s);\n-\tBSSID(s); and\n-\toptional list of analytics subsets that are requested (see clause 6.11.3);\n-\tAn Analytics target period indicates the time period over which the statistics or prediction are requested, either in the past or in the future;\n-\tOptionally, Temporal granularity size;\n-\tOptional maximum number of objects;\n-\tPreferred level of accuracy of the analytics;\n-\tPreferred level of accuracy per analytics subset (see clause 6.11.3);\n-\tPreferred order of results for the list of WLAN performance information:\n-\tordering criterion: \"time slot start\", \"number of UEs\", \"RSSI\", \"RTT\" or \"Traffic information\"; and\n-\torder: ascending or descending; and\n-\tIn a subscription, the Notification Correlation Id and the Notification Target Address are included.\nIf the Target of Analytics Reporting is any UE, then the Analytics Filter should at least include Area of Interest or SSID(s) or BSSID(s).",
      "chunk_type": "definition",
      "cross_references": [
        "clause_6.1.3",
        "clause_6.11.3",
        "ts_23.503"
      ]
    },
    {
      "chunk_id": "ts_23.288_6.11.2",
      "section_id": "6.11.2",
      "section_title": "Input Data",
      "content": "For the purpose of generating WLAN performance analytics results, the NWDAF collects the data as listed in Table 6.11.2-1.\nTable 6.11.2-1: Data collected by NWDAF for WLAN performance analytics\nInformation\nSource\nDescription\nWLAN measurement results\nOAM\nThe WLAN measurement results per wireless network served by the WLAN AP.\n> SSID / BSSID / HESSID\nSSID / BSSID / HESSID of the selected WLAN during the period of analysis.\n> RSSI\nMeasured RSSI of the selected WLAN during the period of analysis.\n> RTT\nMeasured RTT of the selected WLAN during the period of interest.\n> UE Location\nLocation information tagged by UE when it reports WLAN MDT measurement (e.g. Cell ID and/or longitude/latitude if available).\nInformation on PDU Session for WLAN (1..max)\nSMF\nInformation on PDU session for which Access Type is Non-3GPP and RAT Type is TRUSTED_WLAN.\n> UE ID\nSUPI\n> SSID / BSSID\nSSID / BSSID that the PDU session is related to.\n> Start time of the PDU Session for WLAN\nThe time stamp that indicates when the existing PDU Session's access type changes to WLAN or when the new PDU Session for WLAN is established.\n> End time of the PDU Session for WLAN\nThe time stamp that indicates when the existing WLAN based PDU Session's access type is not WLAN any more or when the PDU Session for WLAN is released.\nUE communications (1..max)\nUPF\nList of communication time slots\n> Communication start\nThe time stamp that PDU session(s) for WLAN starts.\n> Communication stop\nThe time stamp that PDU session(s) for WLAN ends.\n> UL data rate\nUL data rate of PDU session(s) for WLAN.\n> DL data rate\nDL data rate of PDU session(s) for WLAN.\n> Traffic volume\nTraffic volume of PDU session(s) for WLAN.\nNOTE 1:\tWLAN Data from OAM is collected via MDT and aligned with the WLAN measurement reporting list described in clause 5.1.1.3.3 of TS 37.320 [20]. It is assumed that not all UEs support MDT WLAN measurements.\nNOTE 2:\tUE Location from OAM can be used to deduce WLAN location.",
      "chunk_type": "general",
      "cross_references": [
        "ts_37.320_clause_5.1.1.3.3",
        "table_6.11.2-1",
        "ts_37.320"
      ]
    },
    {
      "chunk_id": "ts_23.288_6.11.3",
      "section_id": "6.11.3",
      "section_title": "Output Analytics",
      "content": "The NWDAF generates WLAN performance analytics. Depending on the Analytics Target Period, the output consists of statistics or predictions. The detailed information provided by the NWDAF is defined in Table 6.11.3-1 for statistics and Table 6.11.3-2 for predictions.\nTable 6.11.3-1: WLAN performance statistics\nInformation\nDescription\nArea of Interest\nA list of TAIs or Cell Ids\nList of Analytics per SSID\nSSIDs of WLAN access points deployed in the Area of Interest\n> Time slot entry (1..max)\nList of time slots during the Analytics target period\n>> Time slot start\nTime slot start time within the Analytics target period\n>> Duration\nDuration of the time slot. If a Temporal granularity size was provided in the request or subscription, the Duration is greater than or equal to the Temporal granularity size.\n>> RSSI (NOTE 1)\nMeasured RSSI\n>> RTT (NOTE 1)\nMeasured RTT\n>> Traffic Information (NOTE 1)\nUL/DL data rate, Traffic volume\n>> Number of UEs (NOTE 1)\nNumber of UEs observed for the SSID\nList of Analytics per UE\nUE ID(s) of WLAN performance analytics\n> Time slot entry (1..max)\nList of time slots during the Analytics target period\n>> Time slot start\nTime slot start time within the Analytics target period\n>> Duration\nDuration of the time slot\n>> RSSI (NOTE 1)\nMeasured RSSI\n>> RTT (NOTE 1)\nMeasured RTT\n>> Traffic Information (NOTE 1)\nUL/DL data rate, Traffic volume\nNOTE 1:\tThis information element is an analytics subset that can be used in \"list of analytics subsets that are requested\" and \"preferred level of accuracy per analytics subset\".\nTable 6.11.3-2: WLAN performance predictions\nInformation\nDescription\nArea of Interest\nA list of TAIs or Cell Ids\nList of Analytics per SSID\nSSIDs of WLAN access points deployed in the Area of Interest\n> Time slot entry (1..max)\nList of time slots during the Analytics target period\n>> Time slot start\nTime slot start time within the Analytics target period\n>> Duration\nDuration of the time slot. If a Temporal granularity size was provided in the request or subscription, the Duration is greater than or equal to the Temporal granularity size.\n>> RSSI (NOTE 1)\nPredicted RSSI\n>> RTT (NOTE 1)\nPredicted RTT\n>> Traffic Information (NOTE 1)\nPredicted UL/DL data rate, Traffic volume\n>> Number of UEs (NOTE 1)\nNumber of UEs predicted for the SSID\nList of Analytics per UE\nUE ID(s) of WLAN performance analytics\n> Time slot entry (1..max)\nList of time slots during the Analytics target period\n>> Time slot start\nTime slot start time within the Analytics target period\n>> Duration\nDuration of the time slot\n>> RSSI (NOTE 1)\nMeasured RSSI\n>> RTT (NOTE 1)\nMeasured RTT\n>> Traffic Information (NOTE 1)\nUL/DL data rate, Traffic volume\n>> Confidence\nConfidence of the prediction\nNOTE 1:\tThis information element is an analytics subset that can be used in \"list of analytics subsets that are requested\" and \"preferred level of accuracy per analytics subset\".",
      "chunk_type": "general",
      "cross_references": [
        "table_6.11.3-1",
        "table_6.11.3-2"
      ]
    },
    {
      "chunk_id": "ts_23.288_6.11.4",
      "section_id": "6.11.4",
      "section_title": "Procedures",
      "content": "Figure 6.11.4-1: Procedure for WLAN performance analytics\n1.\tThe consumer NF sends a request to the NWDAF for WLAN performance analytics using either the Nnwdaf_AnalyticsInfo or Nnwdaf_AnalyticsSubscription service. The Analytics ID is set to \"WLAN performance\", the Target of Analytics Reporting and the Analytics Filter Information are set according to clause 6.11.1. The consumer NF can request statistics or predictions.\nThe analytics can be requested with the filter information (e.g. Area of Interest or specific SSID(s)). When Area of Interest is provided, the analytics results include WLAN performance information of all SSID(s) located in the Area of Interest. When specific SSID(s) is provided, the analytics results include WLAN performance information of a specific UE or all UE(s) connected to the corresponding SSID(s).\n2-3.\tThe NWDAF subscribes to information related to PDU Session for WLAN (i.e. Access Type is Non-3GPP and RAT Type is TRUSTED_WLAN) from SMF.\n4.\tThe NWDAF collects WLAN measurement data for the period of analysis from the OAM, following the procedure captured in clause 6.2.3.2.\nNOTE:\tThe NWDAF collects the data from the UPF as listed in Table 6.11.2.1. How the NWDAF collects the data is defined in clause 5.8.2.17 of TS 23.501 [2] and in clause 4.15.4 of TS 23.502 [3].\n5.\tThe NWDAF derives requested analytics with the collected data. Analytics output parameters are listed in clause 6.11.3.\n6.\tThe NWDAF provides the requested analytics to the NF, using either the Nnwdaf_AnalyticsInfo or Nnwdaf_AnalyticsSubscription service, depending on the service used at step 1.\n7.\tIf the NF subscribed the analytics at step 1, the NWDAF provides a new analytics when it generated the new output.",
      "chunk_type": "procedure",
      "cross_references": [
        "clause_6.11.1",
        "clause_6.2.3.2",
        "ts_23.501_clause_5.8.2.17",
        "ts_23.501_clause_4.15.4",
        "clause_6.11.3",
        "table_6.11.2.1",
        "figure_6.11.4-1",
        "ts_23.502_clause_4.15.4",
        "ts_23.501",
        "ts_23.502"
      ]
    },
    {
      "chunk_id": "ts_23.288_6.12.1",
      "section_id": "6.12.1",
      "section_title": "General",
      "content": "According to the Session Management Congestion Control (SMCC) mechanisms, i.e. DNN based congestion control defined in clause 5.19.7.3 of TS 23.501 [2] and S-NSSAI based congestion control defined in clause 5.19.7.4 of TS 23.501 [2], the SMF that is applying or has applied the SMCC mechanism does not store any historical information related to which UEs is/was subject to backoff timer settings. Therefore, fairness to apply the SMCC cannot be considered nor guaranteed. For example, among UEs that use a PDU Session associated with S-NSSAI#1, some of them may have experienced the S-NSSAI based high level of congestion control (e.g. receiving NAS SM reject messages with a long backoff timer) while some of the UEs may have experienced the S-NSSAI based low level congestion control (e.g. receiving NAS SM reject messages with a short backoff timer), within a specific period. The backoff timer provided to each UE can vary, e.g. up to 70 hours.\nThe SMF service consumer may request the NWDAF to provide Session Management Congestion Control Experience (SMCCE) statistical analytics for a specific DNN and/or S-NSSAI. The SMF uses potential congestion condition as a trigger to request the SMCCE analytics from the NWDAF.\nThe request by the SMF includes mainly the following parameters:\n-\tAnalytics ID = \"Session Management Congestion Control Experience\".\n-\tTarget of Analytics Reporting: one or more SUPI(s).\nNOTE 1:\tThe UE(s) contained in the Target of Analytics Reporting. These are UE(s) that have the PDU Session for the DNN and/or S-NSSAI indicated by Analytics Filter Information.\n-\tAnalytics Filter Information:\n-\tDNN and/or S-NSSAI; and\n-\toptional list of analytics subsets that are requested (see clause 6.12.3);\n-\tAnalytics target period: the time window for which the statistics are requested.\nNOTE 2:\tPredictions are not provided as output for the Session Management Congestion Control Experience analytics.",
      "chunk_type": "definition",
      "cross_references": [
        "ts_23.501_clause_5.19.7.3",
        "ts_23.501_clause_5.19.7.4",
        "clause_6.12.3",
        "ts_23.501"
      ]
    },
    {
      "chunk_id": "ts_23.288_6.12.2",
      "section_id": "6.12.2",
      "section_title": "Input Data",
      "content": "For the purpose of SMCCE analytics, the NWDAF collects the data as listed in Table 6.12.2-1.\nTable 6.12.2-1: Data collected by NWDAF for SMCCE analytics\nInformation\nSource\nDescription\nUE ID\nSMF\nSUPI.\nSMCC experience for PDU Session\nSMF\nData related to SMCC experience per PDU Session.\n> DNN\nSMF\nDNN for the PDU Session that SMF collects Data related to SMCCE.\n> S-NSSAI\nSMF\nS-NSSAI for the PDU Session that SMF collects Data related to SMCCE.\n> Start time of data collection\nSMF\nStart time of data collection.\n> End time of data collection\nSMF\nEnd time of data collection.\n> SM NAS request from UE (1..max)\nSMF\nInformation on the SM NAS messages that SMF receives from UE for PDU Session during the collection period.\n>> Type of SM NAS request\nSMF\nThe type of SM NAS message transmitted by UE (e.g. PDU Session Establishment Request, PDU Session Modification Request, etc.).\n>> Timestamp\nSMF\nA time stamp when SMF receives SM NAS message from UE.\n> SM NAS message from network with backoff timer (1..max)\nSMF\nInformation on SMCC applied to UE for PDU Session.\n>> Type of SM NAS message from network\nSMF\nThe type of SM NAS message with backoff timer provided to UE (e.g. PDU Session Establishment Reject, PDU Session Modification Reject, PDU Session Release Command, etc.).\n>> Timestamp\nSMF\nA time stamp when SMF sends SM NAS message to UE.\n>> Provided backoff timer\nSMF\nA value of backoff timer provided to UE.\n>> Type of applied SMCC\nSMF\nThe type of applied SMCC, i.e. DNN based congestion control or S-NSSAI based congestion control.\nAs described in Table 6.12.2-1, the NWDAF subscribes to the network data from SMF(s) by invoking Nsmf_EventExposure_Subscribe service (Event ID = Session Management Congestion Control Experience for PDU Session, Target of Event Reporting = one or more SUPI(s), Event Filter information = DNN and/or S-NSSAI and target period).",
      "chunk_type": "general",
      "cross_references": [
        "table_6.12.2-1"
      ]
    },
    {
      "chunk_id": "ts_23.288_6.12.3",
      "section_id": "6.12.3",
      "section_title": "Output Analytics",
      "content": "The NWDAF outputs the SMCCE statistical analytics. The detailed statistical information provided by the NWDAF is defined in Table 6.12.3-1.\nTable 6.12.3-1: SMCCE statistics\nInformation\nDescription\nList of SMCCE Analytics (1..max)\n> DNN\nDNN that SMCC is applied.\n> S-NSSAI\nS-NSSAI that SMCC is applied.\n> List of UEs classified based on experience level of SMCC\nOne, or more than one, of the following lists (SUPI is used to identify a UE).\n>> List of high-experienced UEs (NOTE 2)\nA list of UEs whose experience level of SMCC for specific DNN and/or S-NSSAI is high.\n>> List of medium-experienced UEs (NOTE 2)\nA list of UEs whose experience level of SMCC for specific DNN and/or S-NSSAI is medium.\n>> List of low-experienced UEs (NOTE 2)\nA list of UEs whose experience level of SMCC for specific DNN and/or S-NSSAI is low.\nNOTE 1:\tThe high/medium/low-experience thresholds values are operator defined.\nNOTE 2:\tThis information element is an analytics subset that can be used in \"list of analytics subsets that are requested\".",
      "chunk_type": "general",
      "cross_references": [
        "table_6.12.3-1"
      ]
    },
    {
      "chunk_id": "ts_23.288_6.12.4",
      "section_id": "6.12.4",
      "section_title": "Procedures",
      "content": "Figure 6.12.4-1 shows the procedure for Session Management Congestion Control Experience Analytics.\nFigure 6.12.4-1: Procedure for Session Management Congestion Control Experience Analytics\n1.\tConsumer SMF requests or subscribes to analytics information for \"Session Management Congestion Control Experience\" from the NWDAF using either Nnwdaf_AnalyticsInfo or Nnwdaf_AnalyticsSubscription service when the SMF wants to take the analytics information into account for the Session Management Congestion Control to be applied.\nThe parameters included in the request are described in clause 6.12.1.\nNOTE:\tTo account for SMCCE analytics information, the SMF needs to request the analytics information from the NWDAF before applying Session Management Congestion Control due to potential congestion conditions formation.\n2.\tIf has not already subscribed, the NWDAF sends subscription requests to all the SMFs serving the DNN and/or S-NSSAI as indicated by Analytics Filter Information to collect data related to SMCCE. The SMF that made the request in step 1 can be also one of the data providers.\n3.\tThe SMF(s) provide the collected data to the NWDAF.\n4.\tThe NWDAF derives the requested analytics.\n5.\tThe NWDAF provides the analytics for Session Management Congestion Control Experience to the consumer SMF, using either Nnwdaf_AnalyticsInfo_Request Response or Nnwdaf_AnalyticsSubscription_Notify.",
      "chunk_type": "procedure",
      "cross_references": [
        "clause_6.12.1",
        "figure_6.12.4-1"
      ]
    },
    {
      "chunk_id": "ts_23.288_6.13.1",
      "section_id": "6.13.1",
      "section_title": "General",
      "content": "This clause describes the Redundant Transmission Experience related analytics. These analytics may be used as follows:\n-\tby the SMF to determine whether redundant transmission on N3/N9 interfaces (see clause 5.33.2.2 of TS 23.501 [2]) shall be performed, or (if it had been activated) shall be stopped;\n-\tby the PCF for the calculation of the Route Selection Components in a URSP Rule for redundant PDU Sessions as described in clause 5.33.2.1 of TS 23.501 [2].\nThe service consumer may be a NF (e.g. SMF, PCF).\nThe consumer of these analytics may indicate in the request:\n-\tAnalytics ID = \"Redundant Transmission Experience\".\n-\tTarget of Analytics Reporting as defined in clause 6.1.3.\n-\tAnalytics Filter Information optionally containing:\n-\tArea of Interest;\n-\tS-NSSAI;\n-\tDNN;\n-\toptional list of analytics subsets that are requested (i.e. UL/DL packet drop rate GTP-U, UL/DL packet delay GTP-U, see clause 6.13.3).\n-\tAn Analytics target period indicates the time period over which the statistics or predictions are requested.\n-\tOptionally, Temporal granularity size;\n-\tPreferred level of accuracy of the analytics;\n-\tPreferred order of results for the list of Redundant Transmission Experience:\n-\tordering criterion: \"time slot start\"; and\n-\torder: ascending or descending;\n-\tIn a subscription, the Notification Correlation Id and the Notification Target Address are included.",
      "chunk_type": "definition",
      "cross_references": [
        "ts_23.501_clause_5.33.2.2",
        "ts_23.501_clause_5.33.2.1",
        "clause_6.1.3",
        "clause_6.13.3",
        "ts_23.501"
      ]
    },
    {
      "chunk_id": "ts_23.288_6.13.2",
      "section_id": "6.13.2",
      "section_title": "Input Data",
      "content": "The NWDAF supporting data analytics on Redundant Transmission Experience shall be able to collect UE mobility information from OAM, MDAS/MDAF, 5GC and AFs and service data from AF, as described in clause 6.7.2.2. In addition, NWDAF shall be able to collect the information for PDU session which is established with redundant transmission from the SMF. UE mobility information is specified in Table 6.7.2.2-1 and service data from AF related to UE mobility in Table 6.7.2.2-2. In addition, the NWDAF shall be able to collect performance measurements on user data congestion as specified in Table 6.8.2-1 for user data congestion analytics.\nAdditionally, the NWDAF collects the following input (see Table 6.13.2-1 and Table 6.13.2-2) according to existing measurements defined in clause 5.33.3 QoS Monitoring to Assist URLLC Service of TS 23.501 [2]. The NWDAF also collects the input from MDAS/MDAF of the end to end latency analysis in Table 6.13.2-3, as defined in clause 8.4.2.4.3 of TS 28.104 [45].\nTable 6.13.2-1: Packet drop and/or packet delay measurement per QFI or GTP level\nInformation\nSource\nDescription\nUL/DL packet drop rate GTP-U\nOAM (see NOTE 2)\nUL/DL packet drop rate measurement on GTP path on N3.\nUL/DL packet delay GTP\nOAM (see NOTE 2)\nUL/DL packet delay measurement round trip on GTP path on N3.\nE2E UL/DL packet delay\nUPF (see NOTE 3)\nEnd-to-End (between UE and UPF) packet delay measurement between the UE and the UPF.\nUL/DL packet drop/loss rate of RAN part\nOAM (see NOTE 2)\nUL/DL packet drop/loss rate measurement of RAN part.\nNOTE 1:\tThe information in this table is provided both as the base to compare with the redundant transmission performance as well as when redundant transmission is enabled.\nNOTE 2:\tRefer to clause 5.1 of TS 28.552 [8] for the performance measurement in NG-RAN and clause 5.4 of TS 28.552 [8] for the performance measurement in UPF. In addition, Annex A of TS 28.552 [8] describes various performance measurements.\nNOTE 3:\tRefer to clause 5.33.3 of TS 23.501 [2] for the packet delay measurement in the UPF.\nTable 6.13.2-2: The information related to PDU Session established\nInformation\nSource\nDescription\nDNN\nSMF\nData Network Name associated for URLLC service.\nUP with redundant transmission\nSMF\nRedundant transmission is setup or terminated.\nTable 6.13.2-3: Data collection from MDAS/MDAF of end-to-end latency analysis\nInformation\nSource\nDescription\nE2ELatencyIssueType\nMDAF\nIndication the type of the E2E latency issue.\nThe allowed value is one of the enumerated values: RAN latency issue, CN latency issue.\nAffectedObjects\nMDAF\nThe managed object instances of subnetwork, managed elements or network slices where the latency issue happens.",
      "chunk_type": "requirement",
      "cross_references": [
        "clause_6.7.2.2",
        "clause_5.33.3",
        "ts_28.104_clause_8.4.2.4.3",
        "ts_28.552_clause_5.1",
        "ts_28.552_clause_5.4",
        "ts_23.501_clause_5.33.3",
        "table_6.7.2.2-1",
        "table_6.7.2.2-2",
        "table_6.8.2-1",
        "table_6.13.2-1",
        "table_6.13.2-2",
        "table_6.13.2-3",
        "ts_28.104_table_6.13.2-1",
        "ts_23.501",
        "ts_28.104",
        "ts_28.552"
      ]
    },
    {
      "chunk_id": "ts_23.288_6.13.3",
      "section_id": "6.13.3",
      "section_title": "Output Analytics",
      "content": "The NWDAF supporting data analytics on Redundant Transmission Experience shall be able to provide Redundant Transmission Experience analytics as defined in Table 6.13.3-1 and Table 6.13.3-2.\nTable 6.13.3-1: Redundant Transmission Experience statistics\nInformation\nDescription\nUE group ID or UE ID, any UE\nIdentifies the UE(s) for which the statistic applies by a list of SUPIs, or a group of UEs by a list of Internal-Group-Ids.\nDNN\nData Network Name associated for URLLC service.\nSpatial validity\nArea where the Redundant Transmission Experience statistics applies.\nIf Area of Interest information was provided in the request or subscription, spatial validity should be the requested Area of Interest.\nTime slot entry (1..max)\nList of time slots during the Analytics target period.\n> Time slot start\nTime slot start within the Analytics target period.\n> Duration\nDuration of the time slot. If a Temporal granularity size was provided in the request or subscription, the Duration is greater than or equal to the Temporal granularity size.\n> Observed Redundant Transmission Experience\nObserved Redundant Transmission Experience related information during the Analytics target period.\n>> UL/DL packet drop rate GTP-U (NOTE 2)\nObserved UL/DL packet drop rate on GTP-U path on N3 (average, variance).\n>> UL/DL packet delay GTP-U (NOTE 2)\nObserved UL/DL packet delay round trip on GTP-U path on N3 (average, variance).\n>> E2E UL/DL packet delay (NOTE 2)\nObserved End-to-End (between UE and UPF) UL/DL packet delay (average, variance).\n>> E2E UL/DL packet loss rate (NOTE 2) (NOTE 3)\nObserved End-to-End (between UE and UPF) UL/DL packet loss (average, variance).\n> Redundant Transmission Status\nRedundant Transmission Status, i.e. redundant transmission was activated or not activated for the time slot entry.\n> Ratio\nPercentage on which UE, any UE, or UE group experience the packet drop rate and packet delay.\nNOTE 1:\tThe Observed Redundant Transmission Experience can be further derived by SMF from the observed UL/DL packet drop rate GTP-U and UL/DL packet delay GTP-U.\nNOTE 2:\tThis information element is an analytics subset that can be used in \"list of analytics subsets that are requested\" and only applicable when Target of Analytics Reporting is for a single UE.\nNOTE 3:\tThe NWDAF outputs the analytics on E2E UL/DL packet loss rate based on the input UL/DL packet drop rate on N3 and UL/DL packet drop/loss rate of RAN part.\nTable 6.13.3-2: Redundant Transmission Experience predictions\nInformation\nDescription\nUE group ID or UE ID, any UE\nIdentifies the UE(s) for which the prediction applies by a list of SUPIs, or a group of UEs by a list of Internal-Group-Ids.\nDNN\nData Network Name associated for URLLC service.\nSpatial validity\nArea where the estimated Redundant Transmission Experience predictions applies.\nIf Area of Interest information was provided in the request or subscription, spatial validity should be the requested Area of Interest.\nTime slot entry (1..max)\nList of predicted time slots.\n>Time slot start\nTime slot start time within the Analytics target period.\n> Duration\nDuration of the time slot.\n> Predicted Redundant Transmission Experience\nPredicted Redundant Transmission Experience related information during the Analytics target period.\n>> UL/DL packet drop rate GTP-U (NOTE 2)\nPredicted UL/DL packet drop rate on GTP-U path on N3 (average, variance).\n>> UL/DL packet delay GTP-U (NOTE 2)\nPredicted UL/DL packet delay round trip on GTP-U path on N3 (average, variance).\n>> E2E UL/DL packet delay\nPredicted End-to-End (between UE and UPF) UL/DL packet delay (average, variance).\n>> E2E UL/DL packet loss rate (NOTE 4)\nPredicted End-to-End (between UE and UPF) UL/DL packet loss rate (average, variance).\n> Redundant Transmission Status (NOTE 3)\nRedundant Transmission Status, i.e., redundant transmission is activated or not activated for the time slot entry.\n> Ratio\nPercentage on which the UE, any UE, or UE group may efficiently use the PDU session with redundant transmission.\n> Confidence\nConfidence of this prediction.\nNOTE 1:\tThe Predicted Redundant Transmission Experience can be further derived by the SMF from the predicted UL/DL packet drop rate GTP-U and UL/DL packet delay GTP-U and based on which the SMF can decide to start redundant transmission or not.\nNOTE 2:\tThis information element is an analytics subset that can be used in \"list of analytics subsets that are requested\" and only applicable when Target of Analytics Reporting is for a single UE.\nNOTE 3:\tThe list of predicted time slots and predicted redundant transmission experience is provided to the consumer when both the redundant transmission status is activated and not activated.\nNOTE 4:\tThe NWDAF outputs the prediction on E2E UL/DL packet loss rate based on the input UL/DL packet drop rate on N3 and UL/DL packet drop/loss rate of RAN part.",
      "chunk_type": "requirement",
      "cross_references": [
        "table_6.13.3-1",
        "table_6.13.3-2"
      ]
    },
    {
      "chunk_id": "ts_23.288_6.13.4.1",
      "section_id": "6.13.4.1",
      "section_title": "Analytics Procedure",
      "content": "Figure 6.13.4.1-1 shows the analytics procedure. The NWDAF can provide analytics, in the form of statistics or predictions or both.\nFigure 6.13.4.1-1: Redundant Transmission Experience analytics provided to an NF\n1.\tThe analytics consumer sends a request to the NWDAF for analytics on a Target for Analytics Reporting as defined in clause 6.13.2, using either the Nnwdaf_AnalyticsInfo or Nnwdaf_AnalyticsSubscription service. The NF can request statistics or predictions or both. The type of analytics is set to Redundant Transmission Experience. Analytics Filter Information optionally contains DNN, S-NSSAI, Area of Interest, etc.\n2.\tIf the request is authorized and in order to provide the requested analytics, the NWDAF may subscribe to events with all the serving AMFs for notification of location changes and may subscribe to events with SMFs serving PDU Session on URLLC service for notification of redundant transmission related information.\nThe NWDAF may subscribe the service data from AF(s) by invoking Naf_EventExposure_Subscribe service or Nnef_EventExposure_Subscribe (if via NEF).\nThe NWDAF collects UE mobility information and/or packet measurement information from OAM, following the procedure captured in clause 6.2.3.2. The NWDAF collects redundant transmission status from SMF.\nNOTE:\tThe NWDAF determines the AMF serving the UE, any UE, or the group of UEs, identified by an Internal-Group-id, as described in clause 6.2.2.1.\nThis step may be skipped when e.g. the NWDAF already has the requested analytics available.\n3.\tThe NWDAF derives requested analytics.\n4.\tThe NWDAF provide requested Redundant Transmission Experience analytics to the NF, using either the Nnwdaf_AnalyticsInfo_Request response or Nnwdaf_AnalyticsSubscription_Notify, depending on the service used in step 1.\n5-7.\tIf at step 1, the NF has subscribed to receive notifications for Redundant Transmission Experience analytics, after receiving event notification from the AMFs, SMF, AFs and OAM subscribed by NWDAF in step 2, the NWDAF may generate new analytics and provide them to the NF.\nIf a service consumer is SMF, the Redundant Transmission Experience analytics can be used to make decision if that redundant transmission shall be performed or (if activated) shall be stopped regarding the PDU session for URLLC service.",
      "chunk_type": "procedure",
      "cross_references": [
        "clause_6.13.2",
        "clause_6.2.3.2",
        "clause_6.2.2.1",
        "figure_6.13.4.1-1"
      ]
    },
    {
      "chunk_id": "ts_23.288_6.14.1",
      "section_id": "6.14.1",
      "section_title": "General",
      "content": "This clause specifies how an NWDAF can provide DN Performance Analytics which provides analytics for user plane performance (i.e. average/maximum traffic rate, average/maximum packet delay, average packet loss rate) in the form of statistics or predictions to a service consumer.\nThe DN Performance Analytics may provide one or a combination of the following information:\n-\tUser plane performance analytics for a specific Edge Computing application for a UE, group of UEs, or any UE over a specific serving anchor UPF.\n-\tUser plane performance analytics for a specific Edge Computing application for a UE, group of UEs, or any UE over a specific DNAI.\n-\tUser plane performance analytics for a specific Edge Computing application for a UE, group of UEs, or any UE over a specific Edge Application Server Instance.\nThe service consumer may be an NF (e.g. SMF, PCF) or an AF.\nThe consumer of these analytics shall indicate in the request or subscription:\n-\tAnalytics ID = \"DN Performance\";\n-\tTarget of Analytics Reporting as defined in clause 6.1.3;\n-\tAnalytics Filter Information as defined in table 6.14.1-1 and optionally a list of analytics subsets that are requested (see clause 6.14.3); and\n-\toptionally, a preferred level of accuracy of the analytics;\n-\toptionally, preferred level of accuracy per analytics subset (see clause 6.14.3);\n-\toptionally, preferred order of results for the list of Network Performance information:\n-\tordering criterion: one of the analytics subset (see clause 6.14.3);\n-\torder: ascending or descending;\n-\toptionally, Reporting Thresholds, which apply only for subscriptions and indicate conditions on the level to be reached for respective analytics subsets (see clause 6.14.3) in order to be notified by the NWDAF;\n-\toptionally, maximum number of objects and maximum number of SUPIs;\n-\tAn Analytics target period indicates the time period over which the statistics or predictions are requested; and\n-\tOptionally, Spatial granularity size and Temporal granularity size.\nTable 6.14.1-1: Analytics Filter Information related to DN Performance Analytics\nInformation\nDescription\nApplication ID (0..max)\nThe identification of the application(s) for which the analytics information is subscribed or requested.\nS-NSSAI\nIdentifies the Network Slice for which analytics information is subscribed or requested.\nNSI ID(s)\nIdentifies the Network Slice instance(s) for which analytics information is subscribed or requested.\nArea of Interest\nIdentifies the Area (i.e. set of TAIs), as defined in TS 23.501 [2] for which the analytics information is subscribed or requested.\nAnchor UPF info\nIdentifies the UPF where a UE has an associated PDU session.\nDNN\nDNN to access the application.\nDNAI\nThe UPF ID/address/FQDN information identifier of a user plane access to one or more DN(s) where applications are deployed as defined in TS 23.501 [2].\nApplication Server Addresses\nList of IP addresses/FQDNs of the Application Servers that a UE, group of UEs, or 'any UE' has a communication session with for which DN Performance Analytic information is requested.\nList of analytics subsets\nList of analytics subsets that are requested among those specified in clause 6.14.3.\nNOTE:\tAll parameters are optional.",
      "chunk_type": "definition",
      "cross_references": [
        "clause_6.1.3",
        "clause_6.14.3",
        "table_6.14.1-1",
        "ts_23.501"
      ]
    },
    {
      "chunk_id": "ts_23.288_6.14.2",
      "section_id": "6.14.2",
      "section_title": "Input Data",
      "content": "The data collected from the AF are defined in table 6.14.2-1\nTable 6.14.2-1: Performance Data from AF\nInformation\nSource\nDescription\nUE identifier\nAF\nIP address of the UE at the time the measurements was made.\nUE location\nAF\nThe location of the UE when the performance measurement was made.\nApplication ID\nAF\nTo identify the service and support analytics per type of service (the desired level of service).\nIP filter information\nAF\nIdentify a service flow of the UE for the application.\nLocations of Application\nAF/NEF\nLocations of application represented by a list of DNAI(s). The NEF may map the AF-Service-Identifier information to a list of DNAI(s) when the DNAI(s) being used by the application are statically defined.\nApplication Server Instance address\nAF/NEF\nThe IP address/FQDN of the Application Server that the UE had a communication session when the measurement was made.\nUL/DL Performance Data\nAF\nThe performance associated with the communication session of the UE with an Application Server that includes: UL/DL Average/Maximum Packet Delay, UL/DL Average/Maximum Loss Rate and UL/DL Average/Minimum/Maximum Throughput.\nTimestamp\nAF\nA time stamp associated to the Performance Data provided by the AF.\nThe data collected by the SMF are described in table 6.4.2-2.\nThe NWDAF subscribes to network data as defined in clause 6.4.2.\nData may be collected from OAM as described in table 6.4.2-3 by using the services provided by OAM as described in clause 6.2.3.\nThe Event Filters for the service data collection from SMF, AMF and AF are defined in TS 23.502 [3].\nThe timestamps are provided by each NF to allow correlation of QoS and traffic KPIs. The clock reference is able to know the accuracy of the time and correlate the time series of the data retrieved from each NF.",
      "chunk_type": "general",
      "cross_references": [
        "clause_6.4.2",
        "clause_6.2.3",
        "table_6.14.2-1",
        "table_6.4.2-2",
        "table_6.4.2-3",
        "ts_23.502"
      ]
    },
    {
      "chunk_id": "ts_23.288_6.14.3",
      "section_id": "6.14.3",
      "section_title": "Output Analytics",
      "content": "The DN performance analytics is shown in table 6.14.3-1 and table 6.14.3-2.\nTable 6.14.3-1: DN service performance statistics\nInformation\nDescription\nApplication ID\nIdentifies the application for which analytics information is provided.\nS-NSSAI\nIdentifies the Network Slice for which analytics information is provided. See note 1.\nDNN\nIdentifies the data network name (e.g. \"internet\") for which analytics information is provided. See NOTE 1.\nDN performance (0-x)\nList of DN performances for the application.\n> Application Server Instance Address\nIdentifies the Application Server Instance (IP address/FQDN of the Application Server).\n> Serving anchor UPF info\nThe UPF ID/address/FQDN information for the involved anchor UPF. See NOTE 1.\n> DNAI\nIdentifier of a user plane access to one or more DN(s) where applications are deployed as defined in TS 23.501 [2].\n> Performance (NOTE 4)\nPerformance indicators.\n>> Aggregated Traffic rate (NOTE 2, NOTE 5)\nAggregated traffic rate observed for the UE group or all UEs (i.e. any UE) communicating with the application.\n>> Average Traffic rate (NOTE 2)\nUE granularity level Average traffic rate observed for the UE group or all UEs communicating with the application, or Average traffic rate observed for the specific UE in the statistics period.\n>> Maximum Traffic rate (NOTE 2)\nUE granularity level Maximum traffic rate observed for the UE group or all UEs communicating with the application, or Maximum Traffic rate observed for the specific UE in the statistics period.\n>> Minimum Traffic rate (NOTE 3)\nUE granularity level Minimum traffic rate observed for the UE group or all UEs communicating with the application, or Minimum Traffic rate observed for the specific UE in the statistics period.\n>> Variance Traffic rate (NOTE 2, NOTE 5)\nUE granularity level Variance of the traffic rate observed for the UE group or all the UEs communicating with the application, or Variance Traffic rate observed for the specific UE in the statistics period.\n>> UE ID or list of UE IDs for traffic rate performance (1..SUPImax) (NOTE 2, NOTE 5)\nIdentifies a UE or a list of UEs whose observed traffic rate is higher or lower than the Reporting Threshold.\n>> Average Packet Delay (NOTE 2)\nAverage packet delay observed for the specific UE, the UE group or all UEs communicating with the application.\n>> Maximum Packet Delay (NOTE 2)\nMaximum packet delay observed for the specific UE, the UE group or all UEs communicating with the application.\n>> Variance Packet Delay (NOTE 2, NOTE 5)\nVariance of packet delay observed for the specific UE, the UE group or all UEs communicating with the application.\n>> UE ID or list of UE IDs for packet delay performance (1..SUPImax) (NOTE 2, NOTE 5)\nIdentifies a UE or a list of UEs whose observed packet delay is higher or lower than the Reporting Threshold.\n>> Average Packet Loss Rate (NOTE 2)\nAverage packet loss observed for the specific UE, the UE group or all UEs communicating with the application.\n>> Maximum Packet Loss Rate (NOTE 2)\nMaximum packet loss observed for the specific UE, the UE group or all UEs communicating with the application.\n>> Variance Packet Loss Rate (NOTE 2, NOTE 5)\nVariance of packet loss rate observed for the specific UE, the UE group or all UEs communicating with the application.\n>> UE ID or list of UE IDs for packet loss performance (1..SUPImax) (NOTE 2, NOTE 5)\nIdentifies a UE or a list of UEs whose observed packet loss rate is higher than the Reporting Threshold.\n>> Number of UEs (NOTE 2)\nThe observed number of UEs for the UE group or all UEs (i.e. any UE) communicating with the application in the DNAI.\n> Spatial Validity Condition\nArea (i.e. list of TAIs) where the DN performance analytics applies. If a Spatial granularity size was provided in the request or subscription, the number of elements of the list is smaller than or equal to the Spatial granularity size.\n> Temporal Validity Condition\nValidity period for the DN performance analytics. If a Temporal granularity size was provided in the request or subscription, the duration of this period is greater than or equal to the Temporal granularity size.\nNOTE 1:\tThe item \"Serving anchor UPF info\" shall not be included if the consumer NF is an AF.\nNOTE 2:\tAnalytics subset that can be used in \"list of analytics subsets that are requested\", \"Preferred level of accuracy per analytics subset\" and \"Reporting Thresholds\".\nNOTE 3:\tMinimum traffic rate measurements are only derived from active traffic.\nNOTE 4:\tPerformance statistics may not be applicable to short group operation cycle for the given application.\nNOTE 5:\tAnalytics subset that can be used to support aggregated UE performance monitoring and exposure for a group of UEs.\nTable 6.14.3-2: DN service performance predictions\nInformation\nDescription\nApplication ID\nIdentifies the application for which analytics information is provided.\nS-NSSAI\nIdentifies the Network Slice for which analytics information is provided. See NOTE 1.\nDNN\nIdentifies the data network name (e.g. internet) for which analytics information is provided. See NOTE 1.\nDN performance (0-x)\nList of DN performance for the application.\n> Application Server Instance Address\nIdentifies the Application Server Instance (IP address/FQDN of the Application Server).\n> Serving anchor UPF info\nThe UPF ID/address/FQDN information for the involved anchor UPF. See NOTE 1.\n> DNAI\nIdentifier of a user plane access to one or more DN(s) where applications are deployed as defined in TS 23.501 [2].\n> Performance\nPerformance indicators.\n>> Aggregated Traffic rate (NOTE 2)\nAggregated traffic rate predicted for the UE group or all UEs (i.e. any UE) communicating with the application.\n>> Average Traffic rate (NOTE 2)\nUE granularity level Average traffic rate predicted for the UE group or all UEs communicating with the application, or Average traffic rate predicted for the specific UE in the prediction period.\n>> Maximum Traffic rate (NOTE 2)\nUE granularity level Maximum traffic rate predicted for the UE group or all UEs communicating with the application, or Maximum Traffic rate predicted for the specific UE in the prediction period.\n>> Minimum Traffic rate (NOTE 3)\nUE granularity level Minimum traffic rate predicted for the UE group or all UEs communicating with the application, or Minimum Traffic rate predicted for the specific UE in the prediction period.\n>> Variance Traffic rate (NOTE 2)\nUE granularity level Variance of the traffic rate predicted for the UE group or all the UEs communicating with the application, or Variance Traffic rate predicted for the specific UE in the prediction period.\n>> Average Packet Delay (NOTE 2)\nAverage packet delay predicted for the specific UE, the UE group or all UEs communicating with the application.\n>> Maximum Packet Delay (NOTE 2)\nMaximum packet delay for predicted for the specific UE, the UE group or all UEs communicating with the application.\n>> Variance Packet Delay (NOTE 2)\nVariance of packet delay predicted for the specific UE, the UE group or all UEs communicating with the application.\n>> Average Packet Loss Rate (NOTE 2)\nAverage packet loss predicted for the specific UE, the UE group or all UEs communicating with the application.\n>> Maximum Packet Loss Rate (NOTE 2)\nMaximum packet loss predicted for the specific UE, the UE group or all UEs communicating with the application.\n>> Variance Packet Loss Rate (NOTE 2)\nVariance of packet loss rate predicted for the specific UE, the UE group or all UEs communicating with the application.\n>> Number of UEs (NOTE 2)\nThe predicted number of UEs for the UE group or all UEs (i.e. any UE) communicating with the application in the DNAI.\n> Spatial Validity Condition\nArea (i.e. list of TAIs) where the DN performance analytics applies. If a Spatial granularity size was provided in the request or subscription, the number of elements of the list is smaller than or equal to the Spatial granularity size.\n> Temporal Validity Condition\nValidity period for the DN performance analytics. If a Temporal granularity size was provided in the request or subscription, the duration of this period is greater than or equal to the Temporal granularity size.\n> Confidence\nConfidence of this prediction.\nNOTE 1:\tThe item \"Serving anchor UPF info\" shall not be included if the consumer is an AF.\nNOTE 2:\tAnalytics subset that can be used in \"list of analytics subsets that are requested\", \"Preferred level of accuracy per analytics subset\" and \"Reporting Thresholds\".\nNOTE 3:\tMinimum traffic rate measurements are only derived from active traffic.",
      "chunk_type": "general",
      "cross_references": [
        "table_6.14.3-1",
        "table_6.14.3-2",
        "ts_23.501"
      ]
    },
    {
      "chunk_id": "ts_23.288_6.14.4",
      "section_id": "6.14.4",
      "section_title": "Procedures to request DN Performance Analytics for an Application",
      "content": "Figure 6.14.4-1: Procedure for NWDAF providing DN Performance analytics for an Application\nThe procedure illustrated in figure 6.14.4-1 allows an analytics consumer to request Analytics ID \"DN Performance\" for a particular Application. The analytics consumer includes the Application ID for which DN Performance is requested. The consumer indicates the Target of Analytics Reporting (e.g. \"any UE\") and may include as Analytic Filter Information the UPF anchor ID, DNAI, or Application Server instance that DN performance analytics are requested.\n1.\tAnalytics consumer sends an Analytics request/subscribe (Analytics ID = DN Performance Target of Analytics Reporting, Analytics Filter Information = (Application ID, S-NSSAI, DNN, Area of Interest, UPF anchor ID, DNAI, Application Server Address(es)), Analytics Reporting Information = Analytics target period) to NWDAF by invoking a Nnwdaf_AnalyticsInfo_Request or a Nnwdaf_AnalyticsSubscription_Subscribe service.\n2a.\tNWDAF subscribes to the performance data from AF defined in table 6.14.2-1 by invoking Nnef_EventExposure_Subscribe or Naf_EventExposure_Subscribe service (Event ID = Performance Data, Application ID, Event Filter information), Target of Event Reporting = Any UE) as defined in TS 23.502 [3].\nNOTE 1:\tIn the case of trusted AF, NWDAF provides the Area of Interest as a list of TAIs to AF. In the case of untrusted AF, NEF translates the requested Area of Interest provided as event filter by NWDAF into geographic zone identifier(s) that act as event filter for AF.\n2b.\tNWDAF subscribes to the network data from 5GC NF(s) defined in table 6.4.2-2 by invoking Nnf_EventExposure_Subscribe service.\n2c.\tWith the collected data, the NWDAF estimates the DN Performance for the application.\n3.\tNWDAF provides the data analytics, to the analytics consumer by means of either Nnwdaf_AnalyticsInfo_Request response or Nnwdaf_AnalyticsSubscription_Notify, depending on the service used in step 1.\nNOTE 2:\tFor simplicity, the call flow only shows a request-response model for the interaction of NWDAF and analytics consumer instead of both request-response model and subscription-notification model.\nIf the analytics consumer is an SMF, the SMF may use the analytics to determine the UPF and DNAI that offers the best user plane performance.\nIf the analytics consumer is an AF, the AF may use the analytics to determine the DNAI that has the best user plane performance if Application Server relocation is required.",
      "chunk_type": "procedure",
      "cross_references": [
        "table_6.14.2-1",
        "table_6.4.2-2",
        "figure_6.14.4-1",
        "ts_23.502"
      ]
    },
    {
      "chunk_id": "ts_23.288_6.16.1",
      "section_id": "6.16.1",
      "section_title": "General",
      "content": "This clause specifies the procedure on how NWDAF can provide NWDAF-assisted PFD Determination analytics, in the form of statistics.\nTo assist determination of PFDs for known application identifiers, if the related Service Level Agreement does not preclude this, an NWDAF may perform data analytics on existing PFD information and user plane traffic and provide analytics results in the form of new or updated PFD determination statistics, e.g. new or updated IP 3-tuple list, to an analytics consumer in the 5GC. The NEF(PFDF) as the consumer uses the suggested PFD information of the PFD determination statistics provided by the NWDAF as defined in clause 4.18.2.2 of TS 23.502 [3] and in TS 23.503 [4].\nThe service consumer is a NEF(PFDF).\nThe consumer of these analytics shall indicate in the subscription:\n-\tAnalytics ID = \" PFD Determination\";\n-\tTarget of Analytics Reporting: \"any UE\";\n-\tApplication identifier;\n-\tAnalytics Filter Information optionally containing:\n-\tS-NSSAI(s);\n-\tDNN(s);\n-\tAn Analytics target period indicates the time period over which the statistics are requested;\n-\tAnalytics Reporting Parameters indicating either periodic reporting (together with the parameter periodicity) or reporting when threshold is reached (together with the parameter Reporting type (as defined in clause 4.15.1 of TS 23.502 [3]) to indicate that the report shall only occur when the information differs from the previous report);\n-\tOptionally, the preferred level of accuracy on the PFD determination statistics;\n-\tOptionally, maximum number of objects. This refers to the analytic output (i.e. maximum number of new or updated suggested PFD information in the PFD determination statistics);\n-\tIn a subscription, the Notification Correlation Id and the Notification Target Address are included.",
      "chunk_type": "definition",
      "cross_references": [
        "ts_23.502_clause_4.18.2.2",
        "ts_23.502_clause_4.15.1",
        "ts_23.502",
        "ts_23.503"
      ]
    },
    {
      "chunk_id": "ts_23.288_6.16.2",
      "section_id": "6.16.2",
      "section_title": "Input Data",
      "content": "The NWDAF collects information on user data traffic from the UPF for a known Application ID optionally together with a combination of certain S-NSSAI(s) and/or DNN(s) and retrieves the existing PFDs from the NEF(PFDF). The detailed input data are described in Table 6.16.2-1.\nTable 6.16.2-1: Input data to detect known application from NFs\nInformation\nSource\nDescription\nApplication ID for detection of suggested PFD information\n(NOTE 1)\nUPF\nIdentifies the application detection algorithm used for the detection of suggested PFD information.\nApplication Traffic Flow Information (1..max)\nUPF\nPer Application Traffic flow related information for the application and optionally, for a DNN, S-NSSAI combination.\n> IP 5-tuple\nUPF\nIdentifies a service flow of the UE that uses the application.\n> Start time\nUPF\nStart time of traffic detection for the flow.\n> End time\nUPF\nEnd time of traffic detection for the flow.\n> UL Data volume\nUPF\nMeasured UL data traffic volume for the flow.\n> DL Data volume\nUPF\nMeasured DL data traffic volume for the flow.\n> UL Data Rate\nUPF\nMeasured UL data rate for the flow.\n> DL Data Rate\nUPF\nMeasured DL data rate for the flow.\n> URL list\nUPF\nList of URLs extracted from the inspected user plane packets in the flow.\n> Domain Name list\nUPF\nList of domain names extracted from the inspected user plane packets in the flow.\nPFD Information\nNEF(PFDF)\nPFD Information stored in the UDR (as Application Data) and retrieved by NEF (PFDF), as defined in clause 6.1.2.3.2 of TS 23.503 [4].\n> Application ID\nNEF(PFDF)\nIdentification of the application that refers to one or more application detection filters.\n>  PFD(s) (1..max)\nNEF(PFDF)\n>> PFD ID\nNEF(PFDF)\n>> IP 3-tuple list\nNEF(PFDF)\nIncluding protocol, server side IP address and port number.\n>> URL list\nNEF(PFDF)\nThe significant parts of the URL to be matched, e.g. host name.\n>> Domain Name list\nNEF(PFDF)\nA Domain Name matching criteria and information about applicable protocol(s).\n>> Source NF type\n(NOTE 2)\nNEF(PFDF)\nIndicates the source NF type which generated the PFD (i.e. AF or NWDAF).\nNOTE 1:\tIn the UPF, the \"Application ID for detection of suggested PFD information\" can refer to a detection algorithm that has a wider scope than the detection algorithm the Application ID provided by the consumer refers to.\nNOTE 2:\tThe absence of the Source NF type indicates that this PFD was generated by the AF.\nNOTE 1:\tExtensive reporting of all traffic flows may conflict with the requirement to avoid extra UPF load. An NWDAF may subscribe only for reporting for some UEs to limit the load.\nNOTE 2:\tIn order to enable retrieval of input data from the UPF as listed in Table 6.16.2-1, if UPF supports exposure, then SMF is expected to provide DNN and S-NSSAI to UPF at PDU Session establishment.",
      "chunk_type": "general",
      "cross_references": [
        "ts_23.503_clause_6.1.2.3.2",
        "table_6.16.2-1",
        "ts_23.503"
      ]
    },
    {
      "chunk_id": "ts_23.288_6.16.3",
      "section_id": "6.16.3",
      "section_title": "Output Analytics",
      "content": "The output analytics of PFD Determination is defined in Table 6.16.3-1. The output analysis may be used to provision new or updated PFDs information for known applications. The NWDAF may assign a confidence to the PFD Determination statistics based on the analytics of input data provided by UPF and NEF(PFDF).\nTable 6.16.3-1: PFD Determination statistics\nInformation\nDescription\nApplication ID\nIdentifies the application for which the PFD information applies.\nList of suggested PFD information (1..max)\nSuggested PFD information derived by the analytics for the application.\n> PFD ID\nIdentifier of the PFD (i.e. new PFD ID assigned by NWDAF or existing PFD ID retrieved from UDR).\n> IP 3-tuple list\nIncluding protocol, server side IP address and port number.\n> URL list\nThe significant parts of the URL to be matched, e.g. host name.\n> Domain Name list\nA Domain Name matching criteria and information about applicable protocol(s).\n> Confidence\nConfidence on the provided suggested PFD information for the Application ID.",
      "chunk_type": "general",
      "cross_references": [
        "table_6.16.3-1"
      ]
    },
    {
      "chunk_id": "ts_23.288_6.16.4",
      "section_id": "6.16.4",
      "section_title": "Procedures",
      "content": "Figure 6.16.4-1 shows the procedure that a consumer can use to request PFD Determination analytics.\nFigure 6.16.4-1: A procedure for NWDAF-assisted PFD Determination\n1.\tThe Consumer NF (NEF(PFDF)) subscribes to the NWDAF to request PFD Determination analytics for a known application identifier. The Target of Analytics Reporting is set to Any UE.\nThe Analytics Filter Information may optionally include the S-NSSAI and/or DNN.\n2.\tThe NWDAF subscribes to PFD notifications for the Application ID provided in step 1 by sending Nnef_PFDManagement_Subscribe message to the NEF (PFDF) in order to be informed about the stored PFD information in use from UDR via NEF(PFDF). The NEF(PFDF) sends the PFD(s) that are currently stored for the Application ID in the Nnef_PFD_Management_Notify message. The NEF(PFDF) will send further Nnef_PFD_Management_Notify messages whenever the PFD(s) for this Application ID change.\n3.\tThe NWDAF collects information from the UPF (event \"User Data Usage Measures\") as listed in Table 6.16.2-1 via SMF as defined in clause 5.8.2.17 of TS 23.501 [2]. NWDAF discovers the SMF through NRF as defined in clause 4.15.4.5.3 of TS 23.502 [3]. The event \"User Data Usage Measures\" is defined in clause 5.2.26.2 of TS 23.502 [3], the subscription to the event includes an \"Application ID for detection of suggested PFD information\" which allows the NWDAF to retrieve input information to derive PFD Determination Analytics for the Application ID that is provided by the consumer.\nNOTE 1:\tThe Application ID provided by the consumer and the \"Application ID for detection of suggested PFD information\" provided to the UPF to retrieve input data for PFD Determination Analytics can be different ones.\n4.\tUPF reports the data directly to NWDAF.\n5.\tThe NWDAF derives PFD Determination analytics, e.g. new or updated suggested PFD information for the existing Application ID. For providing new suggested PFD information, the NWDAF shall assign a new PFD ID that is not yet used for this Application ID. For updating PFD information, the NWDAF shall use the existing PFD ID when indicating the updated suggested PFD information. For deleting PFD information, the NWDAF shall only indicate the existing PFD ID. The NWDAF can only update or delete suggested PFD information previously generated by the NWDAF, i.e. that contains \"NWDAF\" as source NF type. When the consumer provides the preferred level of accuracy, the NWDAF provides PFD Determination Analytics that reaches or exceeds this level to the consumer.\n6.\tThe NWDAF notifies PFD Determination analytics (shown in table 6.16.3-1) to the consumer NF (i.e. NEF(PFDF)) with suggested PFD Information according to the reporting mode indicated by the Consumer NF (i.e. NEF(PFDF)) during the subscription in step 1.\nNOTE 2:\tSteps 2b, 4, 5 and 6 can occur multiple times during the lifetime of the subscription of the consumer NF (i.e. NEF(PFDF)).",
      "chunk_type": "procedure",
      "cross_references": [
        "ts_23.501_clause_5.8.2.17",
        "ts_23.502_clause_4.15.4.5.3",
        "ts_23.502_clause_5.2.26.2",
        "table_6.16.2-1",
        "table_6.16.3-1",
        "figure_6.16.4-1",
        "ts_23.501",
        "ts_23.502"
      ]
    },
    {
      "chunk_id": "ts_23.288_6.17.1",
      "section_id": "6.17.1",
      "section_title": "General",
      "content": "This clause specifies how an NWDAF can provide Location Accuracy Analytics which provides analytics for LCS QoS accuracy to an analytics consumer such as LMF.\nWith different input data to NWDAF, the Location Accuracy Analytics provides one or a combination of the following information:\n-\twhen the input data is location:\n-\tlocation accuracy (i.e. Horizontal Accuracy (see clause 4.3.1 of TS 22.071 [35]) and optionally Vertical Accuracy (see clause 4.3.2 of TS 22.071 [35]) of applicable positioning method at indicated location;\n-\tIndication on whether a UE is indoor or outdoor when a location measurement is made (optional);\n-\tIndication on whether a UE location is measured with NLOS or LOS (optional);\n-\twhen the input data is area:\n-\taverage location accuracy (i.e. Horizontal Accuracy (see clause 4.3.1 of TS 22.071 [35]) and optionally Vertical Accuracy (see clause 4.3.2 of TS 22.071 [35]) of applicable positioning method at indicated area;\n-\tpercentage of indoor/outdoor measurement for an applicable area (optional);\n-\tpercentage of NLOS/LOS measurement for an applicable area (optional);\n-\trequested Confidence of location accuracy prediction (optional).\nThe consumer of these analytics shall indicate in the request or subscription:\n-\tAnalytics ID = \"Location Accuracy\";\n-\tTarget of Analytics Reporting: \"any UE\";\n-\tAnalytics Filter Information:\n-\tOptionally, the Positioning methods used as defined in clause 4.2b of TS 23.273 [39];\n-\tLocation information (horizontal and optional vertical); or\n-\tArea of Interest: restricts the scope of the LCS accuracy analytics to the provided area. The AOI is TA and/or cell list as defined in TS 23.502 [3]. Depends on the NWDAF consumer, there can be more than one AOIs in one request;\n-\tOptionally, the list of analytics subsets that are requested among those specified in clause 6.17.3;\n-\toptionally, a preferred level of accuracy of the analytics;\n-\toptionally, preferred level of accuracy per analytics subset (see clause 6.17.3);\n-\toptionally, Reporting Thresholds, which apply only for subscriptions and indicate conditions on the level to be reached for respective analytics subsets (see clause 6.17.3) in order to be notified by the NWDAF;\n-\toptionally, maximum number of objects; and\n-\tan Analytics target period indicates the time period over which the statistics or predictions are requested.",
      "chunk_type": "definition",
      "cross_references": [
        "ts_22.071_clause_4.3.1",
        "ts_22.071_clause_4.3.2",
        "ts_23.273_clause_4.2",
        "clause_6.17.3",
        "ts_22.071",
        "ts_23.273",
        "ts_23.502"
      ]
    },
    {
      "chunk_id": "ts_23.288_6.17.2",
      "section_id": "6.17.2",
      "section_title": "Input Data",
      "content": "In Input data for the analytics ID is listed in Table 6.17.2-1. A training should be done by performing a specific LCS positioning method and comparing the position result with the ground truth UE location obtained by another method.\nNOTE:\tThere are at least two conceivable options for the ground truth data used for the ML Model training of this analytics ID. One option is to use the known location of Positioning Reference Units (PRUs), another option is to use the positioning result of one positioning method (preferably Global Navigation Satellite System (GNSS) information such as GPS information). Collecting PRU related information by NWDAF is not supported in this release. There could be other options for ground truth data which can be determined in the future releases.\nTable 6.17.2-1: Data Collected by NWDAF for Location Accuracy Analytics\nInformation\nSource\nDescription\nUE IDs\nAMF\n(List of) SUPI(s)\nFiner granularity UE location\nLCS\nNOTE 1\nUE location information.\n>UE location\nGeographical location or location in local coordinate (as defined in TS 23.032 [34])\n>positioning methods\nThe positioning methods used by the LMF when the location measurement was made\n>LCS QoS\nLCS QoS accuracy as defined in clause 4.1b in TS 23.273 [39]\n>Indoor/outdoor indication\nIndication of indoor/outdoor when LMF can distinguish indoor/outdoor environment\n>NLOS/LOS indication\nIndication whether the UE measurements were based on LOS/NLOS measurements\nUE location (ground truth)\nAF\nTimestamped UE positions\n>UE location\nNOTE 2,\nGNSS location information\n>Timestamp\nNOTE 3\nTime stamp for the UE location\n>Accuracy\nThe accuracy of the GNSS location information\nNOTE 1:\tThe procedure to collect location data using LCS is described in clause 6.2.12.\nNOTE 2:\tHow the AF obtains timestamped GNSS location information of a UE ID is out of 3GPP scope. Whether to trust the UE location from AF is up to the implementation.\nNOTE 3:\tWhen AF is deployed in the untrusted domain, NEF is employed to mediate the interactions between NWDAF and AF via the Naf_EventExposure_Subscribe service specified in clause 5.2.19.2 of TS 23.502 [3], as described in clause 6.2.8.2.3.",
      "chunk_type": "general",
      "cross_references": [
        "ts_23.273_clause_4.1",
        "clause_6.2.12",
        "ts_23.502_clause_5.2.19.2",
        "clause_6.2.8.2.3",
        "table_6.17.2-1",
        "ts_23.032",
        "ts_23.273",
        "ts_23.502"
      ]
    },
    {
      "chunk_id": "ts_23.288_6.17.3",
      "section_id": "6.17.3",
      "section_title": "Output Analytics",
      "content": "The Location Accuracy analytics are shown in table 6.17.3-1.\nTable 6.17.3-1: Location Accuracy statistics\nInformation\nDescription\nList of Accuracy sustainability Analytics (1..max)\n>Applicable Area\nA list of TAIs or Cell IDs or longitude and latitude level location information that the analytics applies to\n>Applicable Time Period\nThe time period within the Analytics target period that the statistics applies to.\n> Positioning Methods (1…max) (NOTE)\nThe positioning methods used to measure location as defined in clause 4.2b of TS 23.273 [39]\n>> average accuracy of positioning method in applicable area (NOTE)\nStatistics about the horizontal and optionally vertical location average accuracy of applicable positioning method at the applicable area\n>> Percentage of NLOS/LOS measurements of positioning method in applicable area\nProvides ratio of LOS to NLOS measurements of positioning method in the applicable area\n> Percentage of UE in indoor/outdoor in applicable area (optional) (NOTE)\nProvides ratio of UEs that are indoor/outdoor in the applicable area\n> Applicable Location\nA location (i.e. Geographical location or location in local coordinate (as defined in TS 23.032 [34])) that the analytics applies to\n>Applicable Time Period\nThe time period within the Analytics target period that the prediction applies to.\n> Positioning Methods (1…max) (NOTE)\nThe positioning methods used to measure location as defined in clause 4.2b of TS 23.273 [39]\n>>accuracy of positioning method in applicable location (NOTE)\nstatistics about the horizontal and optionally vertical location accuracy of applicable positioning method at the applicable location\n>>Indication whether the location is measured NLOS/LOS with the positioning method\nIndicates whether this applicable location is measured with NLOS or LOS with the positioning method\n> Indication whether location is indoor/outdoor (optional) (NOTE)\nIndicates whether this applicable location is measured to be indoor or outdoor\nNOTE:\tAnalytics subset that can be used in \"list of analytics subsets that are requested\", \"Preferred level of accuracy per analytics subset\" and \"Reporting Thresholds\".\nTable 6.17.3-2: Location Accuracy predictions\nInformation\nDescription\nList of Accuracy sustainability Analytics (1..max)\n>Applicable Area\nA list of TAIs or Cell IDs or longitude and latitude level location information that the analytics applies to\n>Applicable Time Period\nThe time period within the Analytics target period that the prediction applies to\n> Positioning Methods (1…max) (NOTE)\nThe positioning methods used to measure location as defined in clause 4.2b of TS 23.273 [39]\n>> average accuracy of positioning method in applicable area (NOTE)\nPrediction about the horizontal and optionally vertical location average accuracy of applicable positioning method at the applicable area\n>> Percentage of NLOS/LOS measurements of positioning method in applicable area\nProvides predicted ratio of LOS to NLOS measurements of positioning method in the applicable area\n> Percentage of UE in indoor/outdoor in applicable area (optional) (NOTE)\nProvides predicted ratio of UEs that are indoor/outdoor in the applicable area\n> Applicable Location\nA location (i.e. Geographical location or location in local coordinate (as defined in TS 23.032 [34])) that the analytics applies to\n>Applicable Time Period\nThe time period within the Analytics target period that the prediction applies to.\n> Positioning Methods (1…max) (NOTE)\nThe positioning methods used to measure location as defined in clause 4.2b of TS 23.273 [39]\n>>accuracy of positioning method in applicable location (NOTE)\nPrediction about the horizontal and optionally vertical location accuracy of applicable positioning method at the applicable location\n>>Indication whether the location is measured NLOS/LOS with the positioning method\nPredicts whether this applicable location is measured with NLOS or LOS with the positioning method\n> Indication whether location is indoor/outdoor (optional) (NOTE)\nPredicts whether this applicable location is measured to be indoor or outdoor\n> Confidence\nConfidence of the prediction\nNOTE:\tAnalytics subset that can be used in \"list of analytics subsets that are requested\", \"Preferred level of accuracy per analytics subset\" and \"Reporting Thresholds\".",
      "chunk_type": "general",
      "cross_references": [
        "ts_23.273_clause_4.2",
        "table_6.17.3-1",
        "table_6.17.3-2",
        "ts_23.273",
        "ts_23.032"
      ]
    },
    {
      "chunk_id": "ts_23.288_6.17.4",
      "section_id": "6.17.4",
      "section_title": "Procedures to request Location Accuracy Analytics",
      "content": "Figure 6.17.4-1: Location accuracy analytics retrieval\nPre-condition: NWDAF has a trained supervised ML Model for predicting location accuracy. In the training phase, the NWDAF consumes input data as listed in clause 6.17.2. To pre-train the ML Model, NWDAF may collect input data based on area of interest (AoI). The AoI is determined by NWDAF.\n0-1.\tNWDAF collects UE IDs from AMF as defined in Table 6.17.2 via the AMF event exposure service with AoI as filtering criteria.\n0-2.\tNWDAF collects the UE location information using LCS (location estimate, Position Methods Used, Indoor/Outdoor indication, NLOS/LOS indication) as described in clause 6.2.12 and Table 6.17.2 with UE ID as filtering criteria.\n0-3.\tNWDAF collects ground truth UE location information (i.e. timestamped GNSS location information) from AF.\n0-4.\tNWDAF prepares the analytics for statistics and/or pre-trains the ML Model for prediction.\n1.\tThe Analytics consumer, e.g. LMF, requests from NWDAF location accuracy statistics or predictions, giving as inputs the corresponding Analytics ID and UE location estimate (in the form of horizontal and/or vertical location) or corresponding area (cell ID/TAI). The analytics request to the NWDAF may be a one time or a subscription request. Other inputs such as UE positioning method, applicable period can be assistance data.\nNOTE 1:\tIt is assumed that the analytics consumer determines a location. For instance, the LMF can be triggered by LCS client request to determine a location and then use location accuracy analytics to inquire the accuracy of the determined location.\nNOTE 2:\tBoth Nnwdaf_AnalyticsSubscription or Nnwdaf_AnalyticsInfo services can be used for step 1. The Nnwdaf_AnalyticsSubscription service can be used by a service consumer to receive notifications about location accuracy, e.g. when a change is detected.\n2.\tThe NWDAF uses the trained ML Model and provides the location accuracy as output to the analytics consumer.\nNOTE 3:\tThe NWDAF can derive the accuracy based on the model without further input data.",
      "chunk_type": "procedure",
      "cross_references": [
        "clause_6.17.2",
        "clause_6.2.12",
        "table_6.17.2",
        "figure_6.17.4-1"
      ]
    },
    {
      "chunk_id": "ts_23.288_6.18.1",
      "section_id": "6.18.1",
      "section_title": "General",
      "content": "Clause 6.18 describes how NWDAF can provide E2E data volume transfer time analytics, in the form of statistics or predictions or both, to a service consumer. NWDAF collects E2E data volume transfer time related input data from 5GC NFs, OAM and AF. The consumer can either subscribe to analytics notifications (i.e. a Subscribe-Notify model) or request a single notification (i.e. a Request-Response model).\nThe E2E data volume transfer time refers to a time delay for completing the transmission of a specific data volume from UE to AF, or from AF to UE. The data volume may be the expected or observed data volume from UE to AF or from AF to UE. The NWDAF may use the data volume indicated by the consumer as a reference to collect the input data for deriving the statistics and predictions of the end-to-end data volume transfer time. If a target repetition number of data transmissions or a target time interval between data transmissions is given, the E2E data volume transfer time can be provided as an average value of the data volume transfer times within the Analytics target period. The E2E data volume transfer time analytics may be used to assist an AF or NEF with AI/ML-based services, e.g. for member UE selection of federated learning.\nThe E2E data volume transfer time analytics may be provided as defined in clause 6.18.3 for a single UE or a list of UEs.\nMore than one E2E data volume transfer time classes might be assigned by operator or AF to a list of UEs. The UEs might be classified into high-, medium- and low-transfer time classes with respect to the threshold(s) of the corresponding class.\nThe service consumer may be an NF (e.g. AF, or NEF).\nThe consumer of these analytics indicates in the request or subscription:\n-\tAnalytics ID = \"E2E data volume transfer time \".\n-\tTarget of Analytics Reporting as defined in clause 6.1.3.\n-\tAnalytics Filter Information, including:\n-\tOptionally, DNN;\n-\tOptionally, S-NSSAI;\n-\tOptionally, Application ID;\n-\tOptionally, Area of Interest (AOI(s)): restricts the scope of the E2E data volume transfer time analytics to the provided area;\n-\tOptionally, a list of analytics subsets that are requested (see clause 6.18.3);\n-\tQoS requirements (e.g. 5QI, QoS Characteristics);\n-\tOptionally, either a target number of repeating data transmissions or a target time interval between data transmissions within the Analytics target period;\n-\tData Volume UL/DL: indicates a specific data volume per transmission either from UE to AF or from AF to UE;\n-\tA request for geographical distribution (i.e. the AoIs) of the UEs.\nAn Analytics target period indicates the time period over which the statistics or predictions are requested.\n-\tIn a subscription, the Notification Correlation Id and the Notification Target Address are included.\n-\tOptionally, preferred level of accuracy of the analytics.\n-\tOptionally, preferred level of accuracy per analytics subset (see clause 6.18.3).\n-\tOptionally, preferred order of results for the list of E2E data volume transfer times:\n-\tordering criterion: \"E2E data volume transfer time\",\n-\torder: ascending or descending.\n-\tOptionally, Reporting Thresholds, which apply only for subscriptions and indicate conditions on the levels to be reached for the respective analytics subsets (see clause 6.18.3)\n-\tOptionally, maximum number of UEs.",
      "chunk_type": "definition",
      "cross_references": [
        "clause_6.18",
        "clause_6.18.3",
        "clause_6.1.3"
      ]
    },
    {
      "chunk_id": "ts_23.288_6.18.2",
      "section_id": "6.18.2",
      "section_title": "Input Data",
      "content": "The NWDAF supporting analytics on E2E data volume transfer time shall be able to collect information from AF, OAM and 5GC NFs.\nThe information collected by the NWDAF from the OAM is defined in the Table 6.18.2-1, from relevant 5GC NFs (i.e. UPF, SMF, AMF) is defined in Table 6.18.2-2 and from AF is defined in Table 6.18.2-3.\nTable 6.18.2-1: Input data from OAM related to E2E data volume transfer time\nInformation\nSource\nDescription\nRAN part delay for DL and UL\nOAM\n(See NOTE 2)\nAverage packet transmission delay through the RAN part to the UE per 5QI and per S-NSSAI as specified in clauses 6.3.1.2.1 and 6.3.1.7.1 of TS 28.554 [10] and per UE level per supported S-NSSAI and per QoS level in clauses 6.3.1.1.1 and 6.3.1.1.6 of TS 28.558 [50].\nTimestamp\nOAM\nA time stamp associated with the collected information.\nRAN Throughput for DL and UL\nOAM\n(see NOTE 1)\nThe per UE measurement of the throughput for DL and UL as specified in clauses 5.2.1.1 and 5.4.1.1 of TS 37.320 [20].\nRAN Packet delay for DL and UL\nOAM\n(see NOTE 1)\nThe per UE measurement of the packet delay for DL and UL, including per DRB per UE packet delay as specified in clause 5.4.1.1 of TS 37.320 [20].\nRAN Packet loss rate for DL and UL\nOAM\n(see NOTE 1, NOTE 2)\nThe per UE measurement of the packet loss rate for DL and UL, including per DRB per UE packet loss rate as specified in clause 5.4.1.1 of TS 37.320 [20] and packet loss rate per UE per QoS level and per supported S-NSSAI in clauses 6.3.1.2.1 and 6.3.1.3.1 of TS 28.558 [50].\nAverage UL/DL packet delay between PSA UPF and UE\nOAM\n(See NOTE 2)\nThe average of UL/DL packet delay between PSA UPF and UE per S-NSSAI as specified in clauses 5.4.9.1.1 and 5.4.9.2.1 of TS 28.552 [8] and per UE level per supported S-NSSAI and per QoS level in clauses 6.2.2.1.1 and 6.2.2.1.3 of TS 28.558 [50].\nAverage UL/DL Packet delay between PSA UPF and RAN\nOAM\n(See NOTE 2)\nThe per UE level per supported S-NSSAI and per QoS level of the average UL/DL packet delay between PSA UPF and RAN as specified in clauses 6.2.2.1.4 and 6.2.2.1.5 of TS 28.558 [50].\nAverage DL/UL UE throughput in gNB\nOAM\n(See NOTE 2)\nAverage DL/UL UE throughput in the gNB per QoS level (mapped 5QI) and per S-NSSAI as specified in clauses 5.1.1.3.1 and 5.1.1.3.3 of TS 28.552 [8] and per UE per supported S-NSSAI and per QoS level clauses 6.3.1.4.1 and 6.3.1.4.2 of TS 28.558 [50].\nNOTE 1:\tPer UE measurement for a specific UE from OAM (via MDT), is as specified in clause 6.2.3.1 in TS 37.230 [20].\nNOTE 2:\tIn addition to the average KPIs, per UE level measurements if available, can be taken into account by the NWDAF.\nNWDAF subscribes to the input data from OAM as defined in the Table 6.18.2-1 by using the services provided by OAM as described in clause 6.2.3.\nNOTE 1:\tWhether the UE(s) is supporting a Slice or not can be checked by retrieving the registered AMF details from UDM or by asking AMF about what Slice is used by the UE(s) at the current registration (Alternatively, if NSACF is deployed, NSACF can provide a report on what slices are used by the UE(s)).\nNOTE 23:\tUser consent checking from UDM can apply to these analytics.\nTable 6.18.2-2: Service Data from 5GC NFs for E2E data volume transfer time analytics\nInformation\nSource\nDescription\nTimestamp\n5GC NF\nA time stamp associated with the collected information.\nUE location\nAMF, LCS (NOTE 1)\nLocation of the UE(s) needs to be collected from AMF if the application needs to be started at the same time. If the AoI indicated by the AF is a finer granularity area than the Cell level, the current location of the UE(s) needs to be collected from GMLC instead.\nUE ID\nAMF\n(list of) SUPI(s).\n5QI\nSMF\nA reference to 5G QoS characteristics.\nQoS flow Packet Delay\nSMF, UPF\nThe observed Packet delay for UL/DL/round trip directions between UE and PSA_UPF.\nRAT Type\nSMF\nThe RAT types the UE camps on.\nAccess Type\nSMF\nThe list of Access Type(s) used for the PDU Session.\nNOTE 1:\tThe procedure to collect location data using LCS is described in clause 6.2.12.\nTable 6.18.2-3: Service Data from AF for E2E data volume transfer time analytics\nInformation\nSource\nDescription\nTimestamp\nAF\nTimestamp of the collected information.\nApplication ID\nAF\nIdentifier of the application at the AF.\nUE ID(s)\nAF\nInternal or External UE IDs (i.e. SUPI or GPSI, respectively).\nTransmitted UL/DL data volume\nAF\nThe volume of the transmitted UL/DL data.\nUL/DL transmission time duration\nAF\nThe time duration (start and end time) needed for sending the volume of UL/DL data.\nApplication Server Instance information\nAF\nThe IP address/FQDN of the Application Server.\nNOTE 3:\tHow to derive the time delay for sending a specific data volume between UPF and AF on N6 interface is out of scope of the present specification.\nFor calculation of the E2E data volume transfer time, the NWDAF uses mainly the Data Volume DL/UL provided by the analytics consumer (see clause 6.18.1) and the Average DL/UL UE throughput in gNB of the NG-RAN serving the UE or in the AoI (if an AoI is provided by the analytics consumer). Per UE input parameters if available may also be taken into account by the NWDAF.",
      "chunk_type": "requirement",
      "cross_references": [
        "ts_37.320_clause_5.4.1.1",
        "ts_37.230_clause_6.2.3.1",
        "clause_6.2.3",
        "clause_6.2.12",
        "clause_6.18.1",
        "table_6.18.2-1",
        "table_6.18.2-2",
        "table_6.18.2-3",
        "ts_28.554",
        "ts_28.558",
        "ts_37.320",
        "ts_28.552",
        "ts_37.230"
      ]
    },
    {
      "chunk_id": "ts_23.288_6.18.3",
      "section_id": "6.18.3",
      "section_title": "Output Analytics",
      "content": "The NWDAF supporting E2E data volume transfer time analytics provides the analytics results to consumer NFs, e.g. AF, or NEF. The analytics results provided by the NWDAF could be E2E data volume transfer time statistics as defined in Table 6.18.3-1 or predictions as defined in table 6.18.3-2.\nTable 6.18.3-1: E2E data volume transfer time statistics\nInformation\nDescription\nUE ID or list of UE IDs (1..SUPImax)\nIdentifies the UE(s)for which the statistic applies by a list of SUPIs.\nTime slot entry (1..max)\nList of time slots during the Analytics target period.\n> Time slot start\nTime slot start within the Analytics target period.\n> Duration\nDuration of the time slot.\n> E2E data volume transfer time information (1…max)\nList of E2E data volume transfer time statistics per UE.\nMax. is the number of UEs, if applicable.\n>> Application ID\nIdentifies the application in use during the time slot\n>> UE location\nIndicate the UE location information when the service is delivered.\n>> DNN\nDNN for the PDU Session which contains the QoS flow.\n>> S-NSSAI\nIdentifies the Network Slice used to access the application.\n>> RAT Type\nIndicate the list of RAT types for which the E2E data volume transfer time applies.\n>> Access Type\nAccess Type when the UE establishes a PDU Session for the AF.\n>> Validity period\nThe validity period within the time slot for the E2E data volume transfer time statistics as defined in clause 6.1.3.\n>> Spatial validity\nArea where the E2E data volume transfer time statistics applies.\n>> E2E data volume transfer time UL\nE2E data volume transfer time UL indicators.\nStatistics of E2E data volume transfer time for uplink over the time slot (e.g. average, variance).\n>>> Data volume UL\nIndicates uplink data volume used to derive E2E data volume transfer time UL.\n>> E2E data volume transfer time DL\nE2E data volume transfer time DL indicators.\nStatistics of E2E data volume transfer time for downlink over the time slot (e.g. average, variance).\n>>> Data volume DL\nIndicates downlink data volume used to derive E2E data volume transfer time DL.\n> Classified E2E data volume transfer time information for a list of UEs (NOTE 1)\nClassified E2E data volume transfer time statistics for multiple UEs with respect to one or more reporting thresholds (e.g. NWDAF may provide the ratio of UEs that have reached certain Reporting Threshold(s)).\nThe list of UEs is indicated in the request of service consumer.\n>> E2E data volume transfer time classes (1…max) (NOTE 2)\nList with group of UEs classified by ranges of E2E data volume transfer time.\n>>> UE ID(s)\nIdentifies the UE(s) in the transfer time class with respect to the threshold of the corresponding transfer time class.\n>>> Ratio of UEs per E2E data volume transfer time class\nRatio of UEs.\n>> Validity period\nThe validity period within the time slot for the Classified E2E data volume transfer times for a list of UEs statistics as defined in clause 6.1.3.\n>> Spatial Validity\nArea where the Classified E2E data volume transfer times statistics for a list of UEs analytics applies.\n> Geographical distribution of the UE(s)\nIf requested, a list of UEs per location information.\nNOTE 1:\tAnalytics subset that can be used in \"list of analytics subsets that are requested\", \"Preferred level of accuracy per analytics subset\" and \"Reporting Thresholds\".\nNOTE 2:\tThe number of transfer time classes may be pre-configured by the operator or provided by the service consumer via reporting thresholds.\nTable 6.18.3-2: E2E data volume transfer time predictions\nInformation\nDescription\nUE ID or list of UE IDs (1..SUPImax)\nIdentifies the UE(s) for which the predictions applies by a list of SUPIs.\nTime slot entry (1..max)\nList of time slots during the Analytics target period.\n> Time slot start\nTime slot start within the Analytics target period.\n> Duration\nDuration of the time slot.\n> E2E data volume transfer time information (1…max)\nList of E2E data volume transfer time predictions per UE.\nMax. is the number of UEs, if applicable.\n>> Application ID\nIdentifies the application in use during the time slot.\n>> UE location\nIndicate the UE location information when the service is delivered.\n>> DNN\nDNN for the PDU Session which contains the QoS flow.\n>> S-NSSAI\nIdentifies the Network Slice used to access the application.\n>> RAT Type\nIndicate the list of RAT types for which the E2E data volume transfer time applies.\n>> Access Type\nAccess Type when the UE establishes a PDU Session for the AF.\n>> Validity period\nThe validity period within the time slot for the E2E data volume transfer time prediction as defined in clause 6.1.3.\n>> Spatial validity\nArea where the E2E data volume transfer time prediction applies.\n>> E2E data volume transfer time UL\nE2E data volume transfer time indicators.\nPredictions of E2E data volume transfer time for uplink over the time slot (e.g. average, variance).\n>>> Data volume UL\nIndicates uplink data volume used to derive E2E data volume transfer time UL.\n>> E2E data volume transfer time DL\nE2E data volume transfer time DL indicators.\nPredictions of E2E data volume transfer time for downlink over the time slot (e.g. average, variance).\n>>> Data volume DL\nIndicates downlink data volume used to derive E2E data volume transfer time DL.\n> Classified E2E data volume transfer time information for a list of UEs (NOTE 1)\nClassified E2E data volume transfer time prediction for multiple UEs with respect to one or more reporting thresholds (e.g. NWDAF may provide the ratio of UEs that have reached certain Reporting Threshold(s)).\nThe list of UEs is indicated in the request of service consumer.\n>> E2E data volume transfer time classes (1…max) (NOTE 2)\nList with group of UEs classified by ranges of E2E data volume transfer time.\n>>> UE ID(s)\nIdentifies the UE(s) in the transfer time class with respect to the threshold of the corresponding transfer time class.\n>>> Ratio of UEs per E2E data volume transfer time class\nRatio of UEs.\n>> Validity period\nThe validity period within the time slot for the Classified E2E data volume transfer times for a list of UEs prediction as defined in clause 6.1.3.\n>> Spatial Validity\nArea where the Classified E2E data volume transfer times prediction for a list of UEs applies.\n> Geographical distribution of the UE(s)\nIf requested, a list of UEs per location information.\nConfidence\nConfidence of this prediction.\nNOTE 1:\tAnalytics subset that can be used in \"list of analytics subsets that are requested\", \"Preferred level of accuracy per analytics subset\" and \"Reporting Thresholds\".\nNOTE 2:\tThe number of transfer time classes may be pre-configured by the operator or provided by the service consumer via reporting thresholds.\nNOTE:\tWhen Target of Analytics Reporting is an individual UE, one UE ID (i.e. SUPI) will be included, the NWDAF will provide the analytics transfer time result (i.e. list of (predicted) time slots) to NF service consumer(s) for the UE.",
      "chunk_type": "general",
      "cross_references": [
        "clause_6.1.3",
        "table_6.18.3-1",
        "table_6.18.3-2"
      ]
    },
    {
      "chunk_id": "ts_23.288_6.18.4",
      "section_id": "6.18.4",
      "section_title": "Procedures",
      "content": "The NWDAF may provide E2E data volume transfer time analytics to a 5GC NF (e.g. AF, or NEF).\nFigure 6.18.4-1: Procedure for E2E data volume transfer time analytics\n1.\tThe Consumer NF, e.g. AF or NEF, requests or subscribes to analytics for E2E data volume transfer time analytics from NWDAF (possibly via NEF in case the consumer NF is an untrusted AF) and provides the input information as specified in clause 6.18.1 to 5GC.\n2a-b.\tThe NWDAF may subscribe to the service data from AMF as defined in Table 6.18.2-2 using Namf_EventExposure_Subscribe service operation for collecting UE location(s) for a UE or a group of UEs using an Internal-Group-Id.\nNOTE:\tIf NWDAF requires UE location information with finer granularity than TA/cell level, then NWDAF collects the location data from GMLC instead of AMF.\n2c.\tThe NWDAF may subscribe to service data from SMF as defined in Table 6.18.2-2 by invoking Nsmf_EventExposure_Subscribe service operation (Event ID, SUPI(s) or Application ID).\n2c.\tThe NWDAF may subscribe to service data from SMF as defined in Table 6.18.2-2 by invoking Nsmf_EventExposure_Subscribe service operation (Event ID, SUPI(s) or Application ID).\n2d.\tIn order to provide the QoS flow Packet delay to NWDAF the SMF subscribe to QoS Monitoring information from UPF, as defined in Table 6.18.2-2, using the N4 Session level Reporting procedure defined in TS 23.502 [3].\n2e.\tThe subscribed event is triggered in the UPF.\n2f.\tThe UPF notifies the subscribed event report directly to the NWDAF.\n2g.\tThe NWDAF may subscribe to the input data from the OAM as defined in the Table 6.18.2-1 according to the data collection principles described in clause 6.2.3.\n2h.\tThe NWDAF may subscribe to the service data from as defined AF in the Table 6.18-3 by invoking Nnef_EventExposure_Subscribe or Naf_EventExposure_Subscribe (Event ID = E2E data volume transfer time information, Application ID, Event Filter information, Target of Event Reporting = UE ID(s)) service as defined in TS 23.502 [3].\n3.\tThe NWDAF derives the requested analytics, in the form of E2E data volume transfer time statistics and/or predictions.\n4.\tThe NWDAF provides the requested E2E data volume transfer time analytics to the consumer NF, using either Nnwdaf_AnalyticsInfo_Request response or Nnwdaf_AnalyticsSubscription_Notify, depending on the service used in step 1.\n5-7.\tIf the consumer NF subscribed to E2E data volume transfer time analytics in step 1, once the NWDAF generates new analytics for E2E data volume transfer time, it provides a notification using Nnwdaf_AnalyticsSubscription_Notify to the Consumer NF.",
      "chunk_type": "procedure",
      "cross_references": [
        "clause_6.18.1",
        "clause_6.2.3",
        "table_6.18.2-2",
        "table_6.18.2-1",
        "table_6.18-3",
        "figure_6.18.4-1",
        "ts_23.502"
      ]
    },
    {
      "chunk_id": "ts_23.288_6.19.1",
      "section_id": "6.19.1",
      "section_title": "General",
      "content": "Relative Proximity Analytics among UEs provided by NWDAF can be used to assist a consumer NF to more accurately localize a cluster (or a set) of UEs via provisioning statistics or prediction information related to their relative proximity. This analytics type may help the consumer improve the location estimation accuracy of a UE by using proximity information from nearby UEs, or it may help the consumer identify UEs in the vicinity of another UE. Relative proximity information can also be leveraged by NWDAF to provide location information with finer granularity than TA/cell.\nThe NWDAF provides relativity proximity analytics to a NF (e.g. NEF or AF).\nThe consumer of these analytics shall indicate in the request or subscription:\n-\tAnalytics ID = \"Relative Proximity\";\n-\tTarget of Analytics Reporting as defined in clause 6.1.3;\n-\tAnalytics Filter Information:\n-\toptionally, S-NSSAI and/or DNN\n-\tan optional Area of Interest;\n-\tan optional individual or set of direction(s) of interest;\n-\tan optional number of UEs to be accounted for relative proximity (i.e. the number of UEs for which one UE may report proximity information);\n-\toptionally, one or several attributes to be accounted for relative proximity (i.e. additional information that can be provided in addition to distance between two UEs): velocity, average speed, orientation, mobility trajectory;\n-\tOptionally, the list of analytics subsets that are requested among those specified in clause 6.19.3;\n-\tOptionally, preferred level of accuracy of the analytics;\n-\tOptionally, preferred level of accuracy per analytics subset (see clause 6.19.3);\n-\tOptionally, \"maximum number of objects\" indicating the maximum number of UEs\n-\tAn Analytics target period indicating the time period over which the statistics or predictions are requested.",
      "chunk_type": "definition",
      "cross_references": [
        "clause_6.1.3",
        "clause_6.19.3"
      ]
    },
    {
      "chunk_id": "ts_23.288_6.19.2",
      "section_id": "6.19.2",
      "section_title": "Input data",
      "content": "The detailed input data collected by the NWDAF for relative proximity analytics is listed in Table 6.19.2-1, Table 6.19.2-2 and Table 6.19.2-3.\nTable 6.19.2-1: OAM input data for relative proximity analytics\nInformation\nSource\nDescription\nPer UE information\nOAM\n> Speed\nUE Speed\n> Orientation\nUE Orientation\nNOTE 1:\tTo collect the input data in Table 6.19.2-1, NWDAF can invoke TraceJob with the UE ID (e.g. SUPI) of the UE as described in clause 4.3.30 of TS 28.622 [41] using Generic Provisioning Management Service as described in clause 11.1 of TS 28.532 [6] to get Sensor Information as part of MDT data collection mechanism. The UE sensor information includes Barometric pressure, UE speed and UE orientation as described in clause 5.10.29 of TS 32.422 [42].\nTable 6.19.2-2: Proximity related input data collected via DCAF/NEF\nInformation\nSource\nDescription\nProximity Attribute\nDCAF / NEF\nCharacterise a set of UEs in relative proximity.\n> Number of UEs\nTotal number of UEs in proximity of target UE.\n> Timestamp\nA time stamp of time that the proximity attribute derived.\n> Application ID(s)\nIdentifying the applications(s) providing this information.\n> List of UE IDs\nUE IDs in proximity of target UE if available.\n> Other attribute(s)\nOther attributes for the set of UEs i.e. destination, route, average speed, time of arrival.\n> Confidence\nConfidence on relative proximity data.\nNOTE 2:\tThe list of UE IDs that fulfil a proximity criterion can be determined by NWDAF based on the input information collected from the UE application via DCAF. The UE does not need to determine proximity information related to other UEs.\nNOTE 3:\tWhen DCAF is deployed in untrusted domain, NEF is employed to mediate the interactions between NWDAF and DCAF via the Naf_EventExposure_Subscribe service specified in clause 5.2.19.2 of TS 23.502 [3], as described in clause 6.2.8.2.3.\nTable 6.19.2-3: Proximity related input data from 5GC/AF\nInformation\nSource\nDescription\nUE ID(s)\nAMF\nSUPI(s) of individual UE(s).\nUE location\nAMF, GMLC\nAbsolute location of an UE.\nUE location accuracy\nGMLC\nAccuracy of the location estimation.\nVelocity estimate\nLCS\nUE velocity.\nCollision risk distance\nAF\nDerived from the UE connected physical object dimensions e.g. length, width, height.\nUE heading\nAF\nUE moving direction.\n> Absolute heading\nHeading of the UE movement with respect to the true north.\n> Relative heading\nHeading of the UE movement with respect to another UE.\nUE trajectory\nAF\nTimestamped UE positions.\n>UE location\nGeographical area where the UE is located.\n>Timestamp\nTime stamp for the UE location.",
      "chunk_type": "general",
      "cross_references": [
        "ts_28.622_clause_4.3.30",
        "ts_28.532_clause_11.1",
        "ts_32.422_clause_5.10.29",
        "ts_23.502_clause_5.2.19.2",
        "clause_6.2.8.2.3",
        "table_6.19.2-1",
        "table_6.19.2-2",
        "table_6.19.2-3",
        "ts_32.422_table_6.19.2-2",
        "ts_28.622",
        "ts_28.532",
        "ts_32.422",
        "ts_23.502"
      ]
    },
    {
      "chunk_id": "ts_23.288_6.19.3",
      "section_id": "6.19.3",
      "section_title": "Output analytics",
      "content": "The NWDAF services as defined in the clause 7.2 and 7.3 are used to expose the analytics.\n-\tRelative proximity statistics information is defined in Table 6.19.3-1.\n-\tRelative proximity predictions information is defined in Table 6.19.3-2.\nTable 6.19.3-1: Relative proximity statistics\nInformation\nDescription\nUE group ID or set of UE IDs\nIdentifies the UE(s) for which the statistics apply by a list of SUPIs or GPSIs, or a group of UEs by a list of Internal-Group-Ids.\nTime slot entry (1..max)\nList of time slots during the Analytics target period.\n> Time slot start\nTime slot start within the Analytics target period.\n> Duration\nDuration of the time slot.\n> UE proximity attributes\nObserved proximity data. This includes distance between UEs in the group/list and other proximity data as mentioned in clause 6.19.1\n>> relative proximity information\nObserved proximity information.\n>> Sampling Ratio\nPercentage of UEs accounted based on proximity criteria.\nNOTE 1:\tAnalytics subset that can be used in \"list of analytics subsets that are requested\" and \"Preferred level of accuracy per analytics subset\".\nTable 6.19.3-2: Relative proximity predictions\nInformation\nDescription\nUE group ID or set of UE IDs\nIdentifies the UE(s) for which the statistics apply by a list of SUPIs or GPSIs, or a group of UEs by a list of Internal-Group-Ids.\nTime slot entry (1..max)\nList of predicted time slots.\n>Time slot start\nTime slot start time within the Analytics target period.\n> Duration\nDuration of the time slot.\n> UE proximity attributes\nPredicted proximity data. This includes distance between UEs in the group/list and other proximity data as mentioned in clause 6.19.1.\n>> relative proximity information\nPredicted proximity information.\n>> Confidence\nConfidence of this prediction.\n>> Sampling Ratio\nPercentage of UEs accounted based on proximity criteria.\nTime To Collision (TTC) information (NOTE 1)\n> Time To Collision\nTime until a collision with another UE happens.\n> Confidence\nConfidence of the prediction.\n> Accuracy\nAccuracy of TTC (dependent on both the UE location accuracy and confidence of the prediction).\nNOTE 1:\tAnalytics subset that can be used in \"list of analytics subsets that are requested\" and \"Preferred level of accuracy per analytics subset\".",
      "chunk_type": "general",
      "cross_references": [
        "clause_7.2",
        "clause_6.19.1",
        "table_6.19.3-1",
        "table_6.19.3-2"
      ]
    },
    {
      "chunk_id": "ts_23.288_6.19.4",
      "section_id": "6.19.4",
      "section_title": "Procedures",
      "content": "Figure 6.19.4-1: Procedure for NWDAF providing relative proximity analytics\nFigure 6.19.4-1 shows the procedure for NWDAF to derive relative proximity analytics. The steps are described as follows:\n1.\tThe Consumer NF/AF sends a request to the NWDAF for analytics related to relative proximity, using either the Nnwdaf_AnalyticsInfo or Nnwdaf_AnalyticsSubscription service.\nThe Analytics ID is set to \"Relative Proximity\". The target for analytics reporting as defined in clause 6.19.1. Analytic filters may be provided as shown in clause 6.19.1.\nThe Consumer NF/AF can request statistics or predictions or both for a given Analytics target period.\n2-5.\tIf the request is authorized and in order to provide the requested analytics, the NWDAF may subscribe to OAM services to retrieve relevant information to proximity analytics. The NWDAF may collect MDT input data per individual UE from OAM as defined in Table 6.19.2-1.\n6-7.\tFor relative proximity information, if the request is authorized and in order to provide the requested analytics, NWDAF may follow the UE Input Data Collection Procedure via the DCAF. DCAF may collect proximity related input data directly from the UE Application, for NWDAF to determine a list of UEs fulfilling certain proximity criterion.\nNOTE 1:\tThe UE data collection procedure should be based on clause 6.2.8.\nNOTE 2:\tDifferent Application IDs of the same DCAF or different DCAFs may be selected for different UEs, since each DCAF can only collect the proximity information for the UEs that have PDU session between UE and DCAF.\nThe NWDAF subscribes to the AF services as above invoking either Nnef_EventExposure_Subscribe for untrusted DCAF or Naf_EventExposure_Subscribe service for trusted DCAF with (Event ID = Relative Proximity, Event Filter information, Target of Event Reporting). The target of event reporting and / or Event Filter information is set according to the target of analytics reporting and / or analytics filters set during the step 1 of the procedure.\nEvent filters can be defined for relative proximity to indicate to NWDAF on how to process the data from individual UEs to determine the set of UEs to be accounted for relative proximity.\nIn the case of a trusted DCAF, the NWDAF may provide the Area of Interest, proximity range, predefined geographical area, or other criteria to the DCAF on the resolution of TAIs or any other finer resolution recognizable by the 5GC. In the case of an untrusted DCAF, NEF translates the requested criteria provided as event filter by the NWDAF into geographic zone identifier(s) or other geographic range identifier(s) or geographic direction identifier(s) that act as event filter(s) for the DCAF.\nThe DCAF may collect the data from individual UEs based on Event Filters indicated by the NWDAF to determine the set of UEs to be accounted for relative proximity before notifying that directly (for trusted DCAF) or via NEF (for untrusted DCAF) to the NWDAF. Input data that may be collected from DCAF can be found in Table 6.19.2-2.\nNOTE 3:\tDetails of DCAF and its data processing can be found in TS 26.531 [32] and TS 26.532 [43].\n8.\tThe NWDAF collects input data from AMF as defined in Table 6.19.2-3 via the AMF event exposure service as defined in TS 23.502 [3].\nNOTE 4:\tStep 8 could be performed before step 6 when DCAF cannot determine the set of UEs fulfilling a proximity criterion.\n9.\tThe NWDAF collects input data from GMLC as defined in Table 6.19.2-3 using the Ngmlc_Location service as defined in TS 23.273 [39] and TS 29.515 [48].\n10.\tThe NWDAF collects input data from AF as defined in Table 6.19.2-3 via the AF event exposure service as defined in TS 23.502 [3].\n11.\tThe NWDAF derives requested analytics.\n12.\tThe NWDAF provides requested relative proximity and TTC information as defined in Table 6.19.3-1 and Table 6.19.3-2 to the consumer NF or AF along with the corresponding Validity Period or any Validity Area, Validity Direction of interest or ranging distance, using either the Nnwdaf_AnalyticsInfo_Request response or Nnwdaf_AnalyticsSubscription_Notify, depending on the service used in step 1.\n13-15.\tIf at step 1 the consumer NF or AF has subscribed to receive continuous reporting of relative proximity information, the NWDAF may generate new analytics and, when relevant according to the Analytics target period and Reporting Threshold, provide them along with the corresponding Validity Period (or any Validity Area, Validity Direction of interest or ranging distance) to the consumer NF or AF.",
      "chunk_type": "procedure",
      "cross_references": [
        "clause_6.19.1",
        "clause_6.2.8",
        "table_6.19.2-1",
        "table_6.19.2-2",
        "table_6.19.2-3",
        "table_6.19.3-1",
        "table_6.19.3-2",
        "figure_6.19.4-1",
        "ts_26.531",
        "ts_26.532",
        "ts_23.502",
        "ts_23.273",
        "ts_29.515"
      ]
    },
    {
      "chunk_id": "ts_23.288_6.20.1",
      "section_id": "6.20.1",
      "section_title": "General",
      "content": "This clause specifies the procedure for an NWDAF to provide statistics on whether traffic of UEs via one or multiple PDU sessions is according to the information provides by the service consumer.\nThe NWDAF collects traffic flow information of UE traffic via PDU session(s) established for a specific S-NSSAI and/or DNN and provides statistics of UEs that route traffic according to the information provided by the service consumer (e.g., Traffic Descriptor, S-NSSAI, DNN) and UEs that route traffic which is not expected according to the information provided by the service consumer (e.g., Traffic Descriptor, S-NSSAI, DNN).\nThe assumption is that Traffic Descriptors are known (e.g. known flow description), so that there are associated Packet Detection Rule(s) for the known traffic configured in the UPF.\nNOTE 1:\tHow traffic from different applications over the same S-NSSAI/DNN and/or PDU session is discerned is implementation-specific.\nThe service consumer may be a PCF.\nThe consumer of these analytics includes in the request:\n-\tAnalytics ID = \"PDU Session traffic\".\n-\tTarget of Analytics Reporting as defined in clause 6.1.3.\n-\tTraffic Descriptor: Application Identifier, IP Descriptions or Domain Descriptors are applicable.\nNOTE 2:\tThe Application Id provided by the consumer is known by the network, i.e. corresponds to an Application Id known at the UPF.\n-\tAnalytics Filter Information containing:\n-\tArea of Interest (i.e. the location of UEs where PDU Session traffic is monitored);\n-\tS-NSSAI;\n-\tDNN;\n-\tan optional list of analytics subsets that are requested (see clause 6.20.3);\n-\tOptionally, preferred level of accuracy of the analytics.\n-\tOptionally, preferred level of accuracy per analytics subset (see clause 6.20.3);\n-\tAn Analytics target period indicates the time period over which the analytics are requested.\n-\tOptionally, maximum number of objects.\n-\tIn a subscription, the Notification Correlation Id and the Notification Target Address are included.",
      "chunk_type": "definition",
      "cross_references": [
        "clause_6.1.3",
        "clause_6.20.3"
      ]
    },
    {
      "chunk_id": "ts_23.288_6.20.2",
      "section_id": "6.20.2",
      "section_title": "Input Data",
      "content": "NWDAF collects input data from the SMF and/or UPF. The detailed data are described in Table 6.20.2-1.\nTable 6.20.2-1: Collected PDU Session User Plane Traffic Information\nInformation\nSource\nDescription\nSUPI\nSMF, UPF\nUE ID for the UE that established PDU sessions to an S-NSSAI/DNN.\nS-NSSAI\nSMF, UPF\nThe S-NSSAI for which the PDU session is established.\nDNN\nSMF, UPF\nThe DNN for which the PDU session is established.\nPDU Session Information\nThe detected Service Data Flow, volume measured and Application related information in a PDU Session.\n> Packet Filter Set\nSMF, UPF\nPacket Filter Set for the detected Service Data Flow as defined in clause 5.8.2.4.2 of TS 23.502 [3].\n> URL list\nSMF, UPF\nIf available, list of URLs extracted from the inspected user plane packets in the Service Data Flow.\n> Domain Name list\nSMF, UPF\nIf available, list of domain names extracted from the inspected user plane packets in the Service Data Flow.\n> UL Data volume\nSMF, UPF\nMeasured UL data traffic volume for the Service Data Flow for the duration of the PDU Session.\n> DL Data volume\nSMF, UPF\nMeasured DL data traffic volume for the Service Data Flow for the duration of the PDU Session.\nNOTE:\tCare needs to be taken with regards to load and major signalling caused when requesting Any UE. This could be achieved via utilization of some event filters (e.g. Area of Interest), a specific DNN, S-NSSAI or sampling ratio as part of Event Reporting Information.\nThe NWDAF collects input data from the UPF either indirectly via the SMF, or directly from the UPF using the \"UserDataUsageMeasures\" event exposure event as described in clause 4.15.4.5 of TS 23.502 [3]. Further details about input parameters are described in Table 4.15.4.5.1 of TS 23.502 [3].",
      "chunk_type": "general",
      "cross_references": [
        "ts_23.502_clause_5.8.2.4.2",
        "ts_23.502_clause_4.15.4.5",
        "table_6.20.2-1",
        "ts_23.502_table_4.15.4.5.1",
        "ts_23.502"
      ]
    },
    {
      "chunk_id": "ts_23.288_6.20.3",
      "section_id": "6.20.3",
      "section_title": "Output Analytics",
      "content": "The NWDAF collects input data from the UPF, via SMF when the request is for a UE or a group of UEs identified by an Internal-Group-ID or directly from the UPF when possible (see clause 5.8.2.17 of TS 23.501 [2]) if the request applies for any UE and NWDAF provides analytics of UEs about the traffic they route over a PDU session of specific S-NSSAI/DNN according to the Traffic Descriptor provided by the consumer and traffic they route over a PDU Session that is not according to the Traffic Descriptor provided by the consumer and information about that traffic.\nThe output analytics is shown in Table 6.20.3-1.\nTable 6.20.3-1: PDU Session traffic statistics\nInformation\nDescription\nList of SUPIs or SUPI\nIdentifies a SUPI, or a list of SUPIs for which analytics are provided.\nS-NSSAI\nIdentifies the Network Slice for which analytic information is provided.\nDNN\nIdentifies the data network name (e.g. internet) for which analytics information is provided.\nTraffic matching the Traffic Descriptor (NOTE 1)\nIdentifies traffic that matches Traffic Descriptor provided by the consumer in those PDU Sessions identified by the S-NSSAI and DNN above and the volume.\n> Traffic Descriptor\nIP Flow descriptor containing 3-tuple, server side (destination address, port and protocol) or Application ID or Domain descriptor.\n> Volume\nmeasures of data volume exchanged (UL, DL and/or overall) and/or number of packets exchanged (UL, DL and/or overall) for the Traffic Descriptor within the PDU Session.\nTraffic which does not match Traffic Descriptor (NOTE 1)\nIdentifies traffic that does not match Traffic Descriptor provided by the consumer in those PDU Sessions identified by the S-NSSAI and DNN above and the volume.\n> Traffic Descriptor\nIP Flow descriptor containing 3-tuple, server side (destination address, port and protocol) or Application ID or Domain descriptor.\n> Volume\nmeasures of data volume exchanged (UL, DL and/or overall) and/or number of packets exchanged (UL, DL and/or overall).\nNOTE 1:\tAnalytics subset that can be used in \"list of analytics subsets that are requested\" and \"Preferred level of accuracy per analytics subset\". The list is ordered by descending volume.\nNOTE:\tPredictions are not provided.",
      "chunk_type": "general",
      "cross_references": [
        "ts_23.501_clause_5.8.2.17",
        "table_6.20.3-1",
        "ts_23.501"
      ]
    },
    {
      "chunk_id": "ts_23.288_6.20.4",
      "section_id": "6.20.4",
      "section_title": "Procedures",
      "content": "The procedure for deriving PDU Session traffic is shown below.\nFigure 6.20.4-1: NWDAF providing PDU Session traffic analytics\n1.\tThe Consumer NF (e.g. the PCF) requests or subscribes to the NWDAF to request PDU Session Traffic analytics. The consumer includes within analytics filter the expected traffic via a PDU session according to the Traffic Descriptors and the SUPI or list of SUPIs, the S-NSSAI and DNN of the PDU session. It is assumed that there are associated Packet Detection Rule(s) for the expected traffic listed in the analytics request, i.e. the expected traffic is known.\n2.\tThe NWDAF determines to collect data, either directly from the UPF or indirectly via the SMF and identifies the SMF(s) and/or UPF(s) to retrieve input data according to the S-NSSAI/DNN and SUPI or list of SUPIs in the analytics request.\n3.\tThe NWDAF collects input information using the procedure for subscription to UPF event exposure for certain UEs via SMF as described in clause 4.15.4.5.2 of TS 23.502 [3]; the Target of Event Reporting is set to each of the tuples (SUPI, DNN and S-NSSAI) that have a PDU Session in the same SMF, the Target Subscription Information is set to \"UserDataUsageMeasures\", the Target service data flows is absent to indicate that the UPF reports any detected service data flow in the PDU Session.\nThe UPF reports volume measurements for the PDU Session with per application granularity, the report includes volume measurements and provide the application related information, i.e. URLs and Domain names.\n4.\tThe NWDAF derives analytics indicating a list of UEs and the traffic they route according to the provided information provided by the consumer (i.e. Traffic Descriptor, S-NSSAI and DNN), including its volume and the traffic they route and a list of UEs which route traffic that it is not expected according to the information provided by the consumer (i.e. Traffic Descriptor, S-NSSAI and DNN) including its volume.\n5.\tThe NWDAF provides the analytics as defined in Table 6.20.3-1 using either the Nnwdaf_AnalyticsInfo_Request response or Nnwdaf_AnalyticsSubscription_Subscribe_Notify, depending on the service used in step 1",
      "chunk_type": "procedure",
      "cross_references": [
        "ts_23.502_clause_4.15.4.5.2",
        "table_6.20.3-1",
        "figure_6.20.4-1",
        "ts_23.502"
      ]
    },
    {
      "chunk_id": "ts_23.288_6.21.1",
      "section_id": "6.21.1",
      "section_title": "General",
      "content": "The movement behaviour analytics provides analytics information (statistics or predictions) regarding e.g. the number, direction and velocity of UEs during an analytics target period in a target area. The analytics of movement behaviour requires to collect UE movements in a certain region in a certain period of time. In addition, the consumers can further derive the congestion situation in the target area through analytics.\nThe NWDAF provides movement behaviour analytics to a NF (e.g. NEF, AF).\nThe consumer of these analytics shall indicate in the request or subscription:\n-\tAnalytics ID = \"movement behaviour\";\n-\tTarget of Analytics Reporting: any UE;\n-\tAnalytics Filter Information:\n-\tArea of Interest (AOI): restricts the scope of the movement behaviour analytics to the provided area. The AOI may be described as shown in clause 5.5 of TS 23.273 [39];\n-\tOptionally, the list of analytics subsets that are requested among those specified in clause 6.21.3;\n-\tAn Analytics target period indicates the time period over which the statistics or predictions are requested;\n-\tOptionally, preferred level of accuracy of the analytics;\n-\tOptionally, preferred level of accuracy per analytics subset (see clause 6.21.3);\n-\tOptionally, preferred granularity of location information: \"longitude and latitude level\";\n-\tOptionally, preferred orientation of location information: (\"horizontal\", \"vertical\", \"both\")\"; and\n-\tOptionally, maximum number of objects.",
      "chunk_type": "definition",
      "cross_references": [
        "ts_23.273_clause_5.5",
        "clause_6.21.3",
        "ts_23.273"
      ]
    },
    {
      "chunk_id": "ts_23.288_6.21.2",
      "section_id": "6.21.2",
      "section_title": "Input data",
      "content": "The NWDAF collects the UE location and velocity information within the area of interest from the sources listed in Table 6.21.2-1.\nTable 6.21.2-1: Data collection by NWDAF for \"movement behaviour\" analytics\nInformation\nSource\nDescription\nUE ID\nAMF\nSUPI\nUE locations (1..max)\nAMF\nUE positions\n>UE location\nTA or cells that the UE enters\n>Timestamp\nA time stamp when the AMF detects the UE enters this location\nFine granularity locations (1 …max)\nLCS (NOTE 1)\nUE locations\n…>Timestamp\nTime information associated with the collected information\n…>LCS QoS\nThe achieved LCS QoS accuracy (see TS 23.273 [39])\n…>Location estimate\nGeographical location or location in local coordinates (as defined in TS 23.032 [34])\n…>Velocity estimate\nSpeed and direction information\n…>Indoors/outdoor indication\nIndicate the location estimate is indoor or outdoor\n…>Age of location\nValid period of the location estimate\nNOTE 1:\tThe procedure to collect location data using LCS is described in clause 6.2.12.",
      "chunk_type": "general",
      "cross_references": [
        "clause_6.2.12",
        "table_6.21.2-1",
        "ts_23.273",
        "ts_23.032"
      ]
    },
    {
      "chunk_id": "ts_23.288_6.21.3",
      "section_id": "6.21.3",
      "section_title": "Output analytics",
      "content": "The output for analytics of movement behaviour provided by NWDAF is defined in Table 6.21.3-1 and Table 6.21.3-2.\nTable 6.21.3-1: movement behaviour statistics\nInformation\nDescription\nApplicable Area\nA geographical area as defined in TS 23.273 [39] that the analytics applies to.\nTime slot entry (1..max)\nList of time slots during the Analytics target period\n> Time slot start\nTime slot start within the Analytics target period\n> Duration\nDuration of the time slot\n> Total number of UEs (NOTE)\nTotal number of UEs in the area of interest\n> Ratio of moving UEs (NOTE)\nRatio of moving UEs in the area of interest\n> Average speed (NOTE)\nAverage speed of all UEs in the area of interest\n> Speed threshold (1...max) (NOTE)\nThreshold utilized to filter the UEs\n>> Number of UEs\nThe number of UEs whose speed is faster than the speed threshold\n>> Ratio\nPercentage of UEs whose speed is faster than the speed threshold\n> Direction (1…max) (NOTE)\nHeading directions of the UEs in the target area, such as north, south, east, west etc.\n>> Number of UEs\nThe number of UEs in the specific direction\n>> Average speed\nAverage speed of UEs in the specific direction\n>> Ratio\nPercentage of UEs in the specific direction\nNOTE:\tAnalytics subset that can be used in \"list of analytics subsets that are requested\" and \"Preferred level of accuracy per analytics subset\".\nTable 6.21.3-2: movement behaviour predictions\nInformation\nDescription\nApplicable Area\nA geographical area as defined in TS 23.273 [39] that the analytics applies to\nTime slot entry (1..max)\nList of time slots during the Analytics target period\n> Time slot start\nTime slot start within the Analytics target period\n> Duration\nDuration of the time slot\n> Total number of UEs (NOTE)\nTotal number of UEs in the area of interest\n> Ratio of moving UEs (NOTE)\nRatio of moving UEs in the area of interest\n> Average speed (NOTE)\nAverage speed of all UEs in the area of interest\n> Speed threshold (1...max) (NOTE)\nThreshold utilized to filter the UEs\n>> Number of UEs\nThe number of UEs whose speed is faster than the speed threshold\n>> Ratio\nPercentage of UEs whose speed is faster than the speed threshold\n> Direction (1..max) (NOTE)\nHeading directions of the UEs in the target area, such as north, south, east, west etc.\n>> Number of UEs\nThe number of UEs in the specific direction\n>> Average speed\nAverage speed of UEs in the specific direction\n>> Ratio\nPercentage of UEs in the specific direction\nConfidence\nConfidence of the prediction\nNOTE:\tAnalytics subset that can be used in \"list of analytics subsets that are requested\" and \"Preferred level of accuracy per analytics subset\".",
      "chunk_type": "general",
      "cross_references": [
        "table_6.21.3-1",
        "table_6.21.3-2",
        "ts_23.273"
      ]
    },
    {
      "chunk_id": "ts_23.288_6.21.4",
      "section_id": "6.21.4",
      "section_title": "Procedures",
      "content": "Figure 6.21.4-1 depicts the procedure for movement behaviour analytics provided by NWDAF.\nFigure 6.21.4-1: \"Movement Behaviour\" analytics provided by NWDAF\n1.\tThe NWDAF receives an analytics request from the NWDAF service consumer (as defined in clause 6.1.1.1) or from an AF via NEF (as defined in clause 6.1.1.2) to request movement behaviour analytics within a target area for any UE.\nThe Analytics ID is set to \"Movement Behaviour\". The target for analytics reporting is set to be any UE. Analytic filters may be provided as shown in clause 6.21.1. The Area of Interest is the target area that may be defined as a geographical area or as a geopolitical name of an area, in such case, the NEF will translate it as the identities of one or more radio cells or tracking areas.\nThe NWDAF service consumer NF can request statistics or predictions or both for a given Analytics target period.\n2.\tThe NWDAF collects input data from AMF as defined in Table 6.21.2-1 via the AMF event exposure service.\nThe collected UE location information from AMF is optional and may assist in the statistics/prediction of UE moving direction and speed in step 4.\n3.\tThe NWDAF collects the UE location information using LCS as defined in Table 6.21.2-1 and clause 6.2.12.\nBased on the analytics target period, the NWDAF may trigger the immediate 5GC-MT-LR procedure as defined in clause 6.1.2 or the deferred 5GC-MT-LR procedure in clause 6.3.1 of TS 23.273 [39] to obtain UE's location information.\n4.\tThe NWDAF derives requested analytics.\n5.\tThe NWDAF provides the analytics as defined in Table 6.21.3-1 and Table 6.21.3-2 using either the Nnwdaf_AnalyticsInfo_Request response or Nnwdaf_AnalyticsSubscription_Notify, depending on the service used in step 1.",
      "chunk_type": "procedure",
      "cross_references": [
        "clause_6.1.1.1",
        "clause_6.1.1.2",
        "clause_6.21.1",
        "clause_6.2.12",
        "clause_6.1.2",
        "ts_23.273_clause_6.3.1",
        "table_6.21.2-1",
        "table_6.21.3-1",
        "table_6.21.3-2",
        "figure_6.21.4-1",
        "ts_23.273"
      ]
    },
    {
      "chunk_id": "ts_23.288_7.1",
      "section_id": "7.1",
      "section_title": "General",
      "content": "Table 7.1-1 illustrates the NWDAF Services.\nTable 7.1-1: NF services provided by NWDAF\nService Name\nService Operations\nOperation\nSemantics\nExample Consumer(s)\nNnwdaf_AnalyticsSubscription\nSubscribe\nSubscribe / Notify\nPCF, NSSF, AMF, SMF, NEF, AF, OAM, CEF, NWDAF, DCCF, LMF, ADRF\nUnsubscribe\nPCF, NSSF, AMF, SMF, NEF, AF, OAM, CEF, NWDAF, DCCF, LMF, ADRF\nNotify\nPCF, NSSF, AMF, SMF, NEF, AF, OAM, CEF, NWDAF, DCCF, MFAF, LMF, ADRF\nTransfer\nRequest / Response\nNWDAF\nNnwdaf_AnalyticsInfo\nRequest\nRequest / Response\nPCF, NSSF, AMF, SMF, NEF, AF, OAM, CEF, NWDAF, DCCF, LMF, ADRF\nContextTransfer\nRequest / Response\nNWDAF\nNnwdaf_DataManagement\nSubscribe\nSubscribe / Notify\nNWDAF, DCCF\nNotify\nNWDAF, DCCF, MFAF, ADRF\nFetch\nRequest / Response\nNWDAF, DCCF, MFAF, ADRF\nNnwdaf_MLModelProvision\nSubscribe\nSubscribe / Notify\nNWDAF\nUnsubscribe\nNWDAF\nNotify\nNWDAF\nNnwdaf_MLModelInfo\nRequest\nRequest / Response\nNWDAF\nNnwdaf_MLModelMonitor\nSubscribe\nSubscribe / Notify\nNWDAF\nUnsubscribe\nNWDAF\nNotify\nNWDAF\nRegister\nRequest / Response\nNWDAF\nDeregister\nNWDAF\nNnwdaf_MLModelTraining\nSubscribe\nSubscribe / Notify\nNWDAF\nUnsubscribe\nNWDAF\nNotify\nNWDAF\nNnwdaf_MLModelTrainingInfo\nRequest\nRequest / Response\nNWDAF\nNnwdaf_RoamingAnalytics\nSubscribe\nSubscribe / Notify\nH-RE-NWDAF, V-RE-NWDAF\nUnsubscribe\nH-RE-NWDAF, V-RE-NWDAF\nNotify\nH-RE-NWDAF, V-RE-NWDAF\nRequest\nRequest / Response\nH-RE-NWDAF, V-RE-NWDAF\nNnwdaf_RoamingData\nSubscribe\nSubscribe / Notify\nH-RE-NWDAF, V-RE-NWDAF\nUnsubscribe\nH-RE-NWDAF, V-RE-NWDAF\nNotify\nH-RE-NWDAF, V-RE-NWDAF\nNOTE 1:\tHow OAM consumes Nnwdaf services and which Analytics information is relevant is defined in TS 28.550 [7] Annex H and out of the scope of this TS.\nNOTE 2:\tHow CEF consumes Nnwdaf services and which Analytics information is relevant is defined in TS 28.201 [21] and out of the scope of this TS.\nNOTE 3:\tThe Nnwdaf_MLModelProvision service and the Nnwdaf_MLModelInfo service are provided by an NWDAF containing MTLF and consumed by an NWDAF containing AnLF or provided by an NWDAF containing MTLF supporting FL as a server and consumed by an NWDAF containing MTLF.\nTable 7.1-2 shows the analytics information provided by NWDAF service.\nTable 7.1-2: Analytics information provided by NWDAF\nAnalytics Information\nRequest Description\nResponse Description\nSlice Load level information\nAnalytics ID: load level information\nLoad level provided as number of UE registrations and number of PDU sessions for a Network Slice and Network Slice instances as well as resource utilization for Network Slice instances.\nObserved Service experience information\nAnalytics ID: Service Experience\nObserved Service experience statistics or predictions may be provided for a Network Slice or an Application. They may be derived from an individual UE, a group of UEs or any UE. For slice service experience, they may be derived from an Application, a set of Applications or all Applications on the Network Slice.\nNF Load information\nAnalytics ID: NF load information\nLoad statistics or predictions information for specific NF(s).\nNetwork Performance information\nAnalytics ID: Network Performance\nStatistics or predictions on the load in an Area of Interest; in addition, statistics or predictions on the number of UEs that are located in that Area of Interest.\nUE mobility information\nAnalytics ID: UE Mobility\nStatistics or predictions on UE mobility. When visited AOI(s) is included in the Analytics Filter information, only statistics on UE mobility can be provided.\nUE Communication information\nAnalytics ID: UE Communication\nStatistics or predictions on UE communication.\nExpected UE behavioural parameters\nAnalytics ID: UE Mobility and/or UE Communication\nAnalytics on UE Mobility and/or UE Communication.\nUE Abnormal behaviour information\nAnalytics ID: Abnormal behaviour\nList of observed or expected exceptions, with Exception ID, Exception Level and other information, depending on the observed or expected exceptions.\nEnd-to-end data volume transfer time\nAnalytics ID: E2E data volume transfer time\nAnalytics on E2E data volume transfer time.\nUser Data Congestion information\nAnalytics ID: User Data Congestion\nStatistics or predictions on the user data congestion for transfer over the user plane, for transfer over the control plane, or for both.\nQoS Sustainability\nAnalytics ID: QoS Sustainability\nFor statistics, the information on the location and the time for the QoS change and the threshold(s) that were crossed; or, for predictions, the information on the location and the time when a potential QoS change may occur and what threshold(s) may be crossed.\nSession Management Congestion Control Experience\nAnalytics ID: Session Management Congestion Control Experience\nStatistics on session management congestion control experience for specific DNN and/or S-NSSAI.\nRedundant Transmission Experience\nAnalytics ID: Redundant Transmission Experience\nStatistics or predictions aimed at supporting redundant transmission decisions for URLLC services.\nWLAN performance\nAnalytics ID: WLAN performance\nStatistics or predictions on WLAN performance of UE.\nDispersion\nAnalytics ID: UE Dispersion\nStatistics or predictions that identify the location (i.e. areas of interest) or network slice(s) where a UE, or a group of UEs disperse their data volume, or disperse mobility or session management transactions or both.\nDN Performance\nAnalytics ID: DN Performance\nStatistics or predictions on user plane performance for a specific Edge Computing application.\nPFD Determination\nAnalytics ID: PFD Determination\nStatistics on PFD information for a known application identifier(s).\nMovement Behaviour\nAnalytics ID: Movement Behaviour\nStatistics or predictions on movement behaviour for an applicable area.\nLocation Accuracy\nAnalytics ID: Location Accuracy\nPredictions on Location Accuracy.\nRelative Proximity\nAnalytics ID: Relative Proximity\nStatistics or predictions on Relative Proximity among UEs.\nPDU Session traffic\nAnalytics ID: PDU Session traffic\nStatistics on whether traffic of UEs via one or multiple PDU sessions is according to the information provided by the service consumer.",
      "chunk_type": "definition",
      "cross_references": [
        "table_7.1-1",
        "table_7.1-2",
        "ts_28.550",
        "ts_28.201"
      ]
    },
    {
      "chunk_id": "ts_23.288_7.2.1",
      "section_id": "7.2.1",
      "section_title": "General",
      "content": "Service Description: This service enables the consumer to subscribe/unsubscribe for network data analytics and optionally its corresponding Analytics Accuracy Information.\nWhen the subscription for network data analytics and optionally Analytics Accuracy Information is accepted by the NWDAF containing AnLF, the consumer receives from the NWDAF an identifier (Subscription Correlation ID) allowing to further manage (modify, delete) this subscription. The modification of Analytics and optionally Analytics Accuracy Information subscription can be enforced by NWDAF based on operator policy and configuration.\nThis service also enables the consumer to transfer analytics subscriptions to another NWDAF using the Nnwdaf_AnalyticsSubscription_Transfer service operation. Using this service operation, a consumer can request to the NWDAF to prepare for or take over analytics subscription(s), indicating also if and where analytics context is available.",
      "chunk_type": "definition",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.288_7.2.2",
      "section_id": "7.2.2",
      "section_title": "Nnwdaf_AnalyticsSubscription_Subscribe service operation",
      "content": "Service operation name: Nnwdaf_AnalyticsSubscription_Subscribe\nDescription: Subscribes to NWDAF analytics and optionally Analytics Accuracy Information with specific parameters.\nInputs, Required:\n-\t(Set of) Analytics ID(s) as defined in Table 7.1-2;\n-\tTarget of Analytics Reporting;\n-\tNotification Target Address (+ Notification Correlation ID);\n-\tAnalytics Reporting Parameters (including Analytics target period, etc.).\nNOTE 1:\tTarget of Analytics Reporting can be provided per individual Analytics ID.\nInputs, Optional:\n-\tAnalytics Filter Information;\n-\tTime window for historical analytics;\n-\tSubscription Correlation ID (in the case of modification of the analytics subscription);\n-\tPreferred level of accuracy of the analytics;\n-\tPreferred level of accuracy per analytics subset;\n-\tReporting Thresholds;\n-\tMaximum number of objects requested (max);\n-\tPreferred order of results;\n-\tMaximum number of SUPIs requested (SUPImax);\n-\tTime when analytics information is needed;\n-\tAnalytics Metadata Request;\n-\t(Set of) NWDAF identifiers used by the NWDAF service consumer when aggregating multiple analytic subscriptions;\n-\tDataset Statistical Properties;\n-\tOutput strategy;\n-\tData time window;\n-\tConsumer NF's serving area or NF ID;\n-\tInformation of previous analytics subscription, i.e. NWDAF identifier (i.e. Instance ID or Set ID), Analytics ID(s) (including SUPIs and Analytics Filter Information for UE-related Analytics) and Subscription Correlation ID;\n-\tUse case context.\n-\tAnalytics Accuracy Request information.\n-\tAnalytics Feedback Information.\nNOTE 2:\tAnalytics Filter Information, Reporting Thresholds, maximum number of objects requested (max), maximum number of SUPIs requested (SUPImax), Analytics Metadata Request, Dataset Statistical Properties, Output strategy, Data time window and time when analytics information is needed can be provided per individual Analytics ID.\nNOTE 3:\tAnalytics Feedback Information only can be included in modification request for the existing analytics subscription.\nNOTE 4:\tOther input parameters specific for different analytics ID can be also needed, as specified in the corresponding clause for each analytics ID.\nOutputs Required: When the subscription is accepted: Subscription Correlation ID (required for management of this subscription). When the subscription is not accepted, an error response.\nOutputs, Optional: First corresponding Analytics report is included, if available and if analytics consumer requested immediate reporting (see clause 4.15.1 of TS 23.502 [3]).\nNOTE 5:\tWhen the Target of Analytics Reporting is a SUPI or a GPSI then the subscription may not be accepted, e.g. user consent is not granted and an error is sent to the consumer. When the Target of Analytics Reporting is an Internal Group Id, or a list of SUPIs/GPSIs or any UE, no error is sent, but a SUPI or GPSI is skipped if user consent is not granted.",
      "chunk_type": "general",
      "cross_references": [
        "ts_23.502_clause_4.15.1",
        "table_7.1-2",
        "ts_23.502"
      ]
    },
    {
      "chunk_id": "ts_23.288_7.2.3",
      "section_id": "7.2.3",
      "section_title": "Nnwdaf_AnalyticsSubscription_Unsubscribe service operation",
      "content": "Service operation name: Nnwdaf_AnalyticsSubscription_Unsubscribe\nDescription: Unsubscribe to NWDAF analytics.\nInputs, Required: Subscription Correlation ID.\nInputs, Optional: None.\nOutputs, Required: Operation execution result indication.\nOutputs, Optional: None.",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.288_7.2.4",
      "section_id": "7.2.4",
      "section_title": "Nnwdaf_AnalyticsSubscription_Notify service operation",
      "content": "Service operation name: Nnwdaf_AnalyticsSubscription_Notify\nDescription: NWDAF notifies the consumer instance of the analytics and optionally Analytics Accuracy Information that has subscribed to the specific NWDAF service. See also clause 6.1.3 for contents of the Analytics Exposure.\nInputs, Required: Notification Correlation Information: this parameter indicates the Notification Correlation ID that has been assigned by the consumer during analytics subscription.\nInputs, Optional:\n-\tSet of the tuple (Analytics ID, Analytics specific parameters): this parameter shall be present if output analytics are reported.\n-\tTimestamp of analytics generation (required when ADRF is deployed).\n-\tValidity period.\n-\tConfidence\n-\tRevised waiting time.\n-\tAnalytics Metadata Information.\n-\tAnalytics Accuracy Information.\n-\tStop Analytics Output Consumption indication.\n-\tStop Analytics Output Consumption time window.\n-\tResume Analytics Output Consumption indication.\n-\tTermination Request: this parameter indicates that NWDAF requests to terminate the analytics subscription, i.e. NWDAF will not provide further notifications related to this subscription, with cause value (e.g. user consent revoked, NWDAF overload, UE moved out of NWDAF serving area, etc.).\n-\tAccuracy Information Termination.\nNOTE 1:\tValidity period can also be provided as part of Analytics specific parameters for some NWDAF output analytics.\n-\tSubscription Change Notification Correlation ID: this parameter shall be present if the notification is for informing the assignment of a new Subscription Correlation Id by the NWDAF. It is set to the old Subscription Correlation ID.\n-\tSubscription Correlation ID: this parameter shall be present if the notification is for informing the assignment of a new Subscription Correlation Id by the NWDAF. It is set to a new Subscription Correlation ID assigned by the NWDAF.\nNOTE 2:\tOther input parameters specific for different analytics ID can be also needed, as specified in the corresponding clause of each analytics ID.\nOutputs, Required: Operation execution result indication.\nOutputs, Optional: None.",
      "chunk_type": "general",
      "cross_references": [
        "clause_6.1.3"
      ]
    },
    {
      "chunk_id": "ts_23.288_7.2.5",
      "section_id": "7.2.5",
      "section_title": "Nnwdaf_AnalyticsSubscription_Transfer service operation",
      "content": "Service operation name: Nnwdaf_AnalyticsSubscription_Transfer\nDescription: Requests to NWDAF for transferring analytics subscription(s) from the consumer NWDAF.\nInputs, Required:\n-\tTransfer type: indicates the type of the transfer request. The following values are supported:\n-\tAnalytics subscription transfer preparation: requests the NWDAF to prepare for taking over the analytics subscription(s) and/or prepare for collecting Analytics Context(s).\n-\tAnalytics subscription transfer: requests the NWDAF to take over the analytics subscription(s).\n-\tAnalytics subscription transfer cancel: cancels a prepared analytics subscription request.\nInputs, Optional:\n-\tIf this service operation is for \"analytics subscription transfer preparation\", the following parameter shall be provided:\n-\t(Set of) analytics subscription information with the following parameters:\n-\tAll input parameters for the analytics exposure as specified in clause 6.1.3.\n-\t[OPTIONAL] Active data source ID(s): Instance ID or Set ID of the active data source(s) the consumer NWDAF is currently using for the analytics of this analytics subscription.\n-\t[OPTIONAL] ML Model related information, i.e. information related to the ML Model(s) that the NWDAF is currently using for the analytics:\n-\tID(s) of NWDAF(s) containing MTLF: Instance ID(s) of the NWDAF(s) containing MTLF from which the consumer NWDAF currently subscribes to the ML Model information used for the analytics.\n-\t[OPTIONAL] File address of the ML Model(s).\n-\tID of the analytics consumer, e.g. NF, AF or OAM, that is subscribed to receive analytics.\n-\t[OPTIONAL] (Set of) analytics context identifier(s): identifies analytics context available at the consumer NWDAF as defined in clause 6.1B.4.\n-\tIf this service operation is to request analytics subscriptions transfer and if analytics subscription transfer preparation is not performed, the same parameters as those for transfer type \"Analytics subscription transfer preparation\" shall be provided.\n-\tIf this service operation is to request analytics subscriptions transfer and if analytics subscription transfer preparation is performed, the same parameters as those for transfer type \"Analytics subscription transfer preparation\" can be provided with updated parameter values.\n-\tIf this service operation is to request analytics subscriptions transfer cancel, the following parameter shall be provided:\n-\tSubscription Correlation ID.\nOutputs Required: Operation execution result indication.\nOutputs, Optional: None.",
      "chunk_type": "general",
      "cross_references": [
        "clause_6.1.3",
        "clause_6.1"
      ]
    },
    {
      "chunk_id": "ts_23.288_7.3.1",
      "section_id": "7.3.1",
      "section_title": "General",
      "content": "Service description: this service enables the consumer to request and get from NWDAF network data analytics, Analytics Accuracy Information or enables NWDAF to request transfer of analytics context from another NWDAF.",
      "chunk_type": "definition",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.288_7.3.2",
      "section_id": "7.3.2",
      "section_title": "Nnwdaf_AnalyticsInfo_Request service operation",
      "content": "Service operation name: Nnwdaf_AnalyticsInfo_Request\nDescription: The consumer requests NWDAF operator specific analytics and optionally Analytics Accuracy Information.\nInputs, Required: (Set of) Analytics ID(s) as defined in Table 7.1-2, Target of Analytics Reporting, Analytics Reporting Parameters (including Analytics target period, etc.).\nNOTE 1:\tTarget of Analytics Reporting can be provided per individual Analytics ID.\nInputs, Optional: Analytics Filter Information, preferred level of accuracy of the analytics, preferred level of accuracy per analytics subset, time when analytics information is needed, maximum number of objects requested (max), preferred order of results, maximum number of SUPIs requested (SUPImax), Analytics Metadata Request, Dataset Statistical Properties, Output strategy, Data time window, Use case context, Time window for historical analytics and Analytics Accuracy Request information.\nNOTE 2:\tAnalytics Filter Information, Maximum number of objects requested (max), Maximum number of SUPIs requested (SUPImax), Analytics Metadata Request, Dataset Statistical Properties, Output strategy, Data time window and time when analytics information is needed can be provided per individual Analytics ID.\nOutputs, Required: If the request is accepted, then set of the tuple (Analytics ID, Analytics specific parameters). When the request is not accepted, an error response.\nOutputs, Optional: Timestamp of analytics generation (required when ADRF is deployed), validity period, confidence, revised waiting time, Analytics Metadata Information, Analytics Accuracy Information. See clause 6.1.3.\nNOTE 3:\tValidity period can also be provided as part of Analytics specific parameters for some NWDAF output analytics.\nNOTE 4:\tWhen the Target of Analytics Reporting is a SUPI or a GPSI then the request may not be accepted, e.g. user consent is not granted and an error is sent to the consumer. When the Target of Analytics Reporting is an Internal Group Id, or a list of SUPIs/GPSIs or any UE, no error is sent, but a SUPI or GPSI is skipped if user consent is not granted.\nNOTE 5:\tOther input or output parameters specific for different analytics ID can be also needed, as specified in the corresponding clause of each analytics ID.",
      "chunk_type": "general",
      "cross_references": [
        "clause_6.1.3",
        "table_7.1-2"
      ]
    },
    {
      "chunk_id": "ts_23.288_7.3.3",
      "section_id": "7.3.3",
      "section_title": "Nnwdaf_AnalyticsInfo_ContextTransfer service operation",
      "content": "Service operation name: Nnwdaf_AnalyticsInfo_ContextTransfer\nDescription: Requests to NWDAF to transfer context information related to analytics subscriptions.\nInputs, Required: (Set of) Analytics context identifier(s).\nInputs, Optional: Requested Analytics Context per analytics context identifier.\nOutputs Required: (Set of) Analytics Context as specified in clause 6.1B.4.\nOutputs, Optional: ADRF ID with Analytics Context Type stored in the ADRF (i.e. Historical output Analytics and/or Data related to Analytics).\nNOTE:\tFor the Requested Analytics Context, the NWDAF can return a combination of Analytics Context and reference to ADRF ID from where Historical output Analytics and/or Data related to Analytics can be retrieved.",
      "chunk_type": "general",
      "cross_references": [
        "clause_6.1"
      ]
    },
    {
      "chunk_id": "ts_23.288_7.4.1",
      "section_id": "7.4.1",
      "section_title": "General",
      "content": "Service Description: This service enables the consumer to subscribe/unsubscribe for data exposed by an NWDAF, fetch the subscribed data. Historical data or runtime data may be obtained using this service.",
      "chunk_type": "definition",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.288_7.4.2",
      "section_id": "7.4.2",
      "section_title": "Nnwdaf_DataManagement_Subscribe service operation",
      "content": "Service operation name: Nnwdaf_DataManagement_Subscribe\nDescription: The consumer subscribes to receive data, or if the data is already requested from the NWDAF, then the subscription is updated. The subscription includes service operation specific parameters that identify the data to be provided and may include formatting and processing instructions that specify how the data is to be delivered to the consumer. The consumer may request bulked data related to Analytics, as an alternative to asking individual events (i.e. subscription to multiple event IDs to obtain the data required for an analytics generation). The consumer may also request that data be stored in an ADRF. When historical data is being obtained, the consumer may specify the ID of the ADRF or NWDAF containing the data.\nInputs, Required: Data Specification, Notification Target Address(es) (+ Notification Correlation ID(s)).\nWhen the required data is data for Event IDs received from NFs, the Data Specification includes set of Event IDs, Event Filter Information, Target of Event Reporting.\nWhen the required data is a bulked data for an Analytics ID, the Data Specification includes Target of Reporting with the Analytics ID to generate bulked data, Target of Analytics reporting and Analytics Filter.\nInputs, Optional: Service Operation, Time Window, NF (or NF-Set) ID, ADRF or NWDAF hosting ADRF information where data are to be stored, ADRF ID where historical data are stored, Formatting Instructions, Processing Instructions, user consent check information (i.e. an indication that the data consumer has checked user consent), purpose for data collection, Storage Handling Information.\nNOTE 1:\tSee clause 8.2.2 for further description of the Input Parameters.\nOutputs Required: When the subscription is accepted: Subscription Correlation ID (required for management of the requested subscription). When the subscription is not accepted, an error response.\nOutputs, Optional: First corresponding event report is included, if available (see clause 4.15.1 of TS 23.502 [3]), Requested data, Storage Approach (see clause 5B.1).\nNOTE 2:\tWhen the Target of Event Reporting or Target of Reporting is a SUPI or a GPSI then the subscription may not be accepted, e.g. for user consent is not granted and an error is sent to the consumer. When the Target of Event Reporting or Target of Reporting is an Internal Group Id, or a list of SUPIs/GPSI(s) or any UE, no error is sent, but a SUPI or GPSI is skipped if user consent is not granted.",
      "chunk_type": "general",
      "cross_references": [
        "clause_8.2.2",
        "ts_23.502_clause_4.15.1",
        "clause_5",
        "ts_23.502"
      ]
    },
    {
      "chunk_id": "ts_23.288_7.4.3",
      "section_id": "7.4.3",
      "section_title": "Nnwdaf_DataManagement_Unsubscribe service operation",
      "content": "Service operation name: Nnwdaf_DataManagement_Unsubscribe\nDescription: The NF consumer unsubscribes to the NWDAF for data.\nInputs, Required: Subscription Correlation ID.\nOutputs, Required: Operation execution result indication.\nOutputs, Optional: The pending data that have not been sent to the consumer yet.",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.288_7.4.4",
      "section_id": "7.4.4",
      "section_title": "Nnwdaf_DataManagement_Notify service operation",
      "content": "Service operation name: Nnwdaf_DataManagement_Notify\nDescription: NWDAF notifies the consumer instance of the requested data, or notifies of the availability of previously subscribed Data when delivery is via an NWDAF. The NWDAF may also notify the consumer instance when Data or Analytics is to be deleted.\nInputs, Required: Notification Correlation ID, time stamp representing time when NWDAF completed preparation of the requested data.\nInputs, Optional:\n-\tRequested Data with timestamp;\n-\tFetch Instructions;\n-\tTermination Request;\n-\tData or Analytics Deletion Alert.\nNOTE 1:\tIf the NWDAF has received the notifications from another source without a timestamp, then the NWDAF adds itself a timestamp based on the time it received the notification.\nFetch Instructions indicate whether the data are to be fetched by the Consumer. If the data are to be fetched, the fetch instructions include an address from which the data may be fetched, one or more Fetch Correlation IDs and a deadline to fetch the data (Fetch Deadline).\nTermination Request indicates that NWDAF requests to terminate the data management subscription, i.e. NWDAF will not provide further notifications related to this subscription.\nPending Notification Cause indicates the cause of the pending notification of the stored unsent data, e.g., the data cannot be collected any more due to UE moved out of NWDAF serving area.\nData or Analytics Deletion Alert is described in clause 5B.1.\nNOTE 2:\tData provided in notifications are processed and formatted according to the Processing and Formatting Instructions provided by the Consumer in Nnwdaf_DataManagement_Subscribe.\nOutputs, Required: Operation execution result indication.\nOutputs, Optional: Data or Analytics Retrieval Indication.\nThe Data or Analytics Retrieval Indication may be sent if the notification contains a Data or Analytics Deletion Alert. The Data or Analytics Retrieval Indication indicates if the consumer will retrieve stored data or analytics prior to deletion (see clause 6.2B.3)",
      "chunk_type": "general",
      "cross_references": [
        "clause_5",
        "clause_6.2"
      ]
    },
    {
      "chunk_id": "ts_23.288_7.4.5",
      "section_id": "7.4.5",
      "section_title": "Nnwdaf_DataManagement_Fetch service operation",
      "content": "Service operation name: Nnwdaf_DataManagement_Fetch\nDescription: Consumer retrieves from the NWDAF subscribed data (which is regarded as a kind of data), as indicated by Fetch Instructions from Nnwdaf_DataManagement_Notify.\nInputs, Required: Set of Fetch Correlation ID(s).\nInputs, Optional: None.\nOutputs, Required: Operation execution result indication.\nOutputs, Optional: Requested data.",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.288_7.5.1",
      "section_id": "7.5.1",
      "section_title": "General",
      "content": "Service Description: This service enables the consumer to receive a notification when an ML Model matching the subscription parameters becomes available.\nWhen the subscription is accepted by the NWDAF containing MTLF, the consumer NF, receives from the NWDAF an identifier (Subscription Correlation ID) allowing to further manage (modify, delete) this subscription. The modification of ML Model subscription can be enforced by NWDAF based on operator policy and configuration.",
      "chunk_type": "definition",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.288_7.5.2",
      "section_id": "7.5.2",
      "section_title": "Nnwdaf_MLModelProvision_Subscribe service operation",
      "content": "Service operation name: Nnwdaf_MLModelProvision_Subscribe\nDescription: Subscribes to NWDAF ML Model provision with specific parameters.\nInputs, Required: (set of) Analytics ID(s) defined in Table 7.1-2, Notification Target Address (+ Notification Correlation ID).\nInputs, Optional:\n-\tSubscription Correlation ID (in the case of modification of the ML Model subscription).\n-\tFor each Analytics ID the following parameters may be provided: ML Model Filter Information to indicate the conditions for which ML Model for the analytics is requested and Target of ML Model Reporting as defined in clause 6.2A.2, Requested representative ratio, ML Model Target Period, Use case context, Inference Input Data information, indication of support for multiple ML Models, multiple ML Models Filter Information to indicate the conditions for which multiple ML Models are requested, ML Model Interoperability Information.\n-\tNF consumer information, ML Model Reporting Information, Time when model is needed, ML Model Monitoring Information (including e.g. desired ML Model metric, ML Model monitoring reporting mode, ML Model Accuracy Threshold, DataSetTag and ADRF ID, ML Model identifier), Expiry time.\nOutputs Required: When the subscription is accepted: Subscription Correlation ID (required for management of this subscription), Expiry time (required if the subscription can be expired based on the operator's policy).\nOutputs, Optional: None.",
      "chunk_type": "general",
      "cross_references": [
        "clause_6.2",
        "table_7.1-2"
      ]
    },
    {
      "chunk_id": "ts_23.288_7.5.3",
      "section_id": "7.5.3",
      "section_title": "Nnwdaf_MLModelProvision_Unsubscribe service operation",
      "content": "Service operation name: Nnwdaf_MLModelProvision_Unsubscribe\nDescription: unsubscribe to NWDAF ML Model provision.\nInputs, Required: Subscription Correlation ID.\nInputs, Optional: None.\nOutputs, Required: Operation execution result indication.\nOutputs, Optional: None.",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.288_7.5.4",
      "section_id": "7.5.4",
      "section_title": "Nnwdaf_MLModelProvision_Notify service operation",
      "content": "Service operation name: Nnwdaf_MLModelProvision_Notify\nDescription: NWDAF notifies the ML Model information to the consumer instance which has subscribed to the specific NWDAF service.\nInputs, Required: Notification Correlation Information, Set of:\n-\tthe tuple (Analytics ID, one or more tuples of unique ML Model identifier and the information as defined in clause 6.2A.2).\nInputs, Optional: ML Model Accuracy Information.\nOutputs, Required: Operation execution result indication.\nOutputs, Optional: None.",
      "chunk_type": "general",
      "cross_references": [
        "clause_6.2"
      ]
    },
    {
      "chunk_id": "ts_23.288_7.6.1",
      "section_id": "7.6.1",
      "section_title": "General",
      "content": "Service description: this service enables the consumer to request and get from NWDAF containing MTLF ML Model Information.",
      "chunk_type": "definition",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.288_7.6.2",
      "section_id": "7.6.2",
      "section_title": "Nnwdaf_MLModelInfo_Request service operation",
      "content": "Service operation name: Nnwdaf_MLModelInfo_Request\nDescription: The consumer requests NWDAF ML Model Information.\nInputs, Required: (Set of) Analytics ID(s) defined in Table 7.1-2.\nInputs, Optional:\n-\tFor each Analytics ID the following parameters may be provided: ML Model Filter Information to indicate the conditions for which ML Model for the analytics is requested and Target of ML Model Reporting as defined in clause 6.2A.2, Requested representative ratio, ML Model Target Period, Use case context, Inference Input Data Information, indication of support for multiple ML Models, multiple ML Models Filter Information to indicate the conditions for which multiple ML Models are requested, ML Model Interoperability Information.\n-\tVendor ID.\n-\tML Model Accuracy Monitoring Information.\nOutputs, Required: Set of:\n-\tthe tuple (Analytics ID, one or more tuples of unique ML Model identifier and the information as defined in clause 6.2A.2.\nOutputs, Optional: ML Model Accuracy Information.",
      "chunk_type": "general",
      "cross_references": [
        "clause_6.2",
        "table_7.1-2"
      ]
    },
    {
      "chunk_id": "ts_23.288_7.7.1",
      "section_id": "7.7.1",
      "section_title": "General",
      "content": "Service Description: This service enables the consumer to request or to subscribe/unsubscribe for network data analytics related to roaming UE(s).",
      "chunk_type": "definition",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.288_7.7.2",
      "section_id": "7.7.2",
      "section_title": "Nnwdaf_RoamingAnalytics_Subscribe service operation",
      "content": "Service operation name: Nnwdaf_RoamingAnalytics_Subscribe\nDescription: Subscribes to NWDAF analytics related to roaming UE(s).\nInputs, Required:\n-\t(Set of) Analytics ID(s).\n-\tPLMN ID of the consumer NWDAF.\n-\tTarget of Analytics Reporting.\n-\tNotification Target Address (+ Notification Correlation ID).\n-\tAnalytics Reporting Parameters (including Analytics target period, etc.).\nNOTE 1:\tTarget of Analytics Reporting can be provided per individual Analytics ID.\nNOTE 2:\tTarget of Analytics Reporting sent by the V-RE-NWDAF to the H-RE-NWDAF only contains the inbound roaming UE(s), and the Target of Analytics Reporting sent by the H-RE-NWDAF to the V-RE-NWDAF only contains the outbound roaming UE(s).\nInputs, Optional:\n-\tAnalytics Filter Information.\n-\tTime window for historical analytics.\n-\tSubscription Correlation ID (in the case of modification of the analytics subscription).\n-\tpreferred level of accuracy of the analytics.\n-\tpreferred level of accuracy per analytics subset.\n-\tReporting Thresholds.\n-\tmaximum number of objects requested (max).\n-\tpreferred order of results, maximum number of SUPIs requested (SUPImax).\n-\ttime when analytics information is needed.\n-\tOutput strategy.\n-\tNF (or NF-Set) ID(s) of NFs in VPLMN serving the UE(s) in Target of Analytics Reporting.\nNOTE 3:\tAnalytics Filter Information, Reporting Thresholds, maximum number of objects requested (max), maximum number of SUPIs requested (SUPImax) and time when analytics information is needed can be provided per individual Analytics ID.\nOutputs Required: When the subscription is accepted: Subscription Correlation ID (required for management of this subscription). When the subscription is not accepted, an error response.\nOutputs, Optional: None.",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.288_7.7.3",
      "section_id": "7.7.3",
      "section_title": "Nnwdaf_RoamingAnalytics_Unsubscribe service operation",
      "content": "Service operation name: Nnwdaf_RoamingAnalytics_Unsubscribe\nDescription: Unsubscribe to NWDAF analytics related to roaming UE(s).\nInputs, Required: Subscription Correlation ID.\nInputs, Optional: None.\nOutputs, Required: Operation execution result indication.\nOutputs, Optional: None.",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.288_7.7.4",
      "section_id": "7.7.4",
      "section_title": "Nnwdaf_RoamingAnalytics_Notify service operation",
      "content": "Service operation name: Nnwdaf_RoamingAnalytics_Notify\nDescription: NWDAF notifies the consumer instance of the analytics related to roaming UE(s) that the consumer has subscribed to.\nInputs, Required: Notification Correlation Information: this parameter indicates the Notification Correlation Id that has been assigned by the consumer during analytics subscription.\nInputs, Optional:\n-\tSet of the tuple (Analytics ID, Analytics specific parameters): this parameter shall be present if output analytics are reported.\n-\tTimestamp of analytics generation.\n-\tValidity period.\n-\tConfidence\n-\tRevised waiting time.\n-\tTermination Request: this parameter indicates that NWDAF requests to terminate the analytics subscription, i.e. NWDAF will not provide further notifications related to this subscription, with cause value (e.g. user consent revoked, NWDAF overload, UE moved out of NWDAF serving area, etc.).\nNOTE:\tValidity period can also be provided as part of Analytics specific parameters for some NWDAF output analytics.\nOutputs, Required: Operation execution result indication.\nOutputs, Optional: None.",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.288_7.7.5",
      "section_id": "7.7.5",
      "section_title": "Nnwdaf_RoamingAnalytics_Request service operation",
      "content": "Service operation name: Nnwdaf_RoamingAnalytics_Request\nDescription: The consumer requests analytics related to roaming UE(s).\nInputs, Required:\n-\t(Set of) Analytics ID(s).\n-\tPLMN ID of the consumer NWDAF.\n-\tTarget of Analytics Reporting.\n-\tAnalytics Reporting Parameters (including Analytics target period, etc.).\nNOTE 1:\tTarget of Analytics Reporting can be provided per individual Analytics ID.\nNOTE 2:\tTarget of Analytics Reporting sent by the V-RE-NWDAF to the H-RE-NWDAF only contains the inbound roaming UE(s), and the Target of Analytics Reporting sent by the H-RE-NWDAF to the V-RE-NWDAF only contains the outbound roaming UE(s).\nInputs, Optional:\n-\tAnalytics Filter Information.\n-\tTime window for historical analytics.\n-\tpreferred level of accuracy of the analytics.\n-\tpreferred level of accuracy per analytics subset.\n-\tReporting Thresholds.\n-\tmaximum number of objects requested (max).\n-\tpreferred order of results, maximum number of SUPIs requested (SUPImax).\n-\ttime when analytics information is needed.\n-\tOutput strategy.\n-\tNF (or NF-Set) ID(s) of NFs in VPLMN serving the UE(s) in Target of Analytics Reporting.\nNOTE 3:\tAnalytics Filter Information, Reporting Thresholds, maximum number of objects requested (max), maximum number of SUPIs requested (SUPImax) and time when analytics information is needed can be provided per individual Analytics ID.\nOutputs, Required: If the request is accepted, then set of the tuple (Analytics ID, Analytics specific parameters). When the request is not accepted, an error response.\nOutputs, Optional: Timestamp of analytics generation, validity period, confidence, revised waiting time.",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.288_7.8.1",
      "section_id": "7.8.1",
      "section_title": "General",
      "content": "Service Description: This service enables the consumer to subscribe/unsubscribe for input data related to roaming UE(s) for NWDAF analytics.",
      "chunk_type": "definition",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.288_7.8.2",
      "section_id": "7.8.2",
      "section_title": "Nnwdaf_RoamingData_Subscribe service operation",
      "content": "Service operation name: Nnwdaf_RoamingData_Subscribe\nDescription: Subscribe to input data related to roaming UE(s). The consumer subscribes to receive data, or if the data is already requested from the RE-NWDAF, then the subscription is updated. The subscription includes service operation specific parameters that identify the data to be provided and may include formatting and processing instructions that specify how the data is to be delivered to the consumer. The consumer may request bulked data related to Analytics, as an alternative to asking individual events (i.e. subscription to multiple event IDs to obtain the data required for an analytics generation).\nInputs, Required: PLMN ID of the consumer NWDAF, Data Specification, Notification Target Address(es) (+ Notification Correlation ID(s)).\nWhen the required data is data for Event IDs received from NFs, the Data Specification includes set of Event IDs, Event Filter Information, Target of Event Reporting.\nWhen the required data is a bulked data for an Analytics ID, the Data Specification includes Target of Reporting with the Analytics ID to generate bulked data, Target of Analytics reporting and Analytics Filter.\nInputs, Optional: Service Operation, Time Window, NF (or NF-Set) ID of data source (e.g. AMF, SMF), Formatting Instructions, Processing Instructions.\nOutputs Required: When the subscription is accepted: Subscription Correlation ID (required for management of this subscription). When the subscription is not accepted, an error response.\nOutputs, Optional: First corresponding event report is included, if available (see clause 4.15.1 of TS 23.502 [3]), Requested data.",
      "chunk_type": "general",
      "cross_references": [
        "ts_23.502_clause_4.15.1",
        "ts_23.502"
      ]
    },
    {
      "chunk_id": "ts_23.288_7.8.3",
      "section_id": "7.8.3",
      "section_title": "Nnwdaf_RoamingData_Unsubscribe service operation",
      "content": "Service operation name: Nnwdaf_RoamingData_Unsubscribe\nDescription: Unsubscribe to input data related to roaming UE(s).\nInputs, Required: Subscription Correlation ID.\nInputs, Optional: None.\nOutputs, Required: Operation execution result indication.\nOutputs, Optional: The pending data that have not been sent to the consumer yet.",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.288_7.8.4",
      "section_id": "7.8.4",
      "section_title": "Nnwdaf_RoamingData_Notify service operation",
      "content": "Service operation name: Nnwdaf_RoamingData_Notify\nDescription: NWDAF notifies the consumer about input data related to roaming UE(s) that the consumer has subscribed to.\nInputs, Required: Notification Correlation Information: this parameter indicates the Notification Correlation Id that has been assigned by the consumer during analytics subscription. Time stamp representing time when NWDAF completed preparation of the requested data.\nInputs, Optional:\n-\tRequested Data with timestamp;\n-\tTermination Request.\nNOTE 1:\tIf the NWDAF has received the notifications from another source without a timestamp, then the NWDAF adds itself a timestamp based on the time it received the notification.\nTermination Request indicates that NWDAF requests to terminate the data subscription, i.e. NWDAF will not provide further notifications related to this subscription.\nNOTE 2:\tData provided in notifications are processed and formatted according to the Processing and Formatting Instructions provided by the Consumer in Nnwdaf_RoamingData_Subscribe.\nOutputs, Required: Operation execution result indication.\nOutputs, Optional: None.",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.288_7.9.1",
      "section_id": "7.9.1",
      "section_title": "General",
      "content": "Service Description: This service enables the consumer to subscribe/unsubscribe for ML Model accuracy (i.e. Analytics accuracy for an ML Model as described in clause 6.2E.3.3) information monitored. The service can additionally provide Analytics Feedback Information for the analytics generated by an NWDAF (i.e. NWDAF containing AnLF). The service also enables the NWDAF containing AnLF registers the use and monitoring capability for an ML Model into the model provider NWDAF, i.e. NWDAF containing MTLF.",
      "chunk_type": "definition",
      "cross_references": [
        "clause_6.2"
      ]
    },
    {
      "chunk_id": "ts_23.288_7.9.2",
      "section_id": "7.9.2",
      "section_title": "Nnwdaf_MLModelMonitor_Subscribe service operation",
      "content": "Service operation name: Nnwdaf_MLModelMonitor_Subscribe\nDescription: Subscribes to NWDAF for the monitored ML Model accuracy (i.e. Analytics accuracy for an ML Model as described in clause 6.2E.3.3) information and Analytics Feedback Information for the analytics generated by the NWDAF with specific parameters.\nInputs, Required: (set of) Unique ML Model identifier(s), Notification Target Address (+ Notification Correlation ID).\nInputs, Optional: Subscription Correlation ID (in the case of modification of the ML Model monitor subscription), desired Accuracy metrics to indicate the metrics to calculate the accuracy information, reporting period to indicate the reporting periodicity in which the monitored ML Model Accuracy Information shall be reported, Accuracy reporting threshold to indicate the reporting condition across which the accuracy information shall be reported, Analytics ID, Target of Analytics Reporting and Analytics filter.\nAnalytics ID, Target of Analytics Reporting and Analytics filter for each ML Model identifier should reflect the corresponding information received in the Nnwdaf_MLModelMonitor_Register request from the NWDAF containing AnLF to which the current NWDAF containing MTLF subscribes.\nOutputs Required: When the subscription is accepted: Subscription Correlation ID (required for management of this subscription), Expiry time (required if the subscription can be expired based on the operator's policy).\nOutputs, Optional: None.",
      "chunk_type": "general",
      "cross_references": [
        "clause_6.2"
      ]
    },
    {
      "chunk_id": "ts_23.288_7.9.3",
      "section_id": "7.9.3",
      "section_title": "Nnwdaf_MLModelMonitor_Unsubscribe service operation",
      "content": "Service operation name: Nnwdaf_MLModelMonitor_Unsubscribe\nDescription: The NF consumer unsubscribes to the NWDAF for the monitored ML Model accuracy (i.e. Analytics accuracy for an ML Model as described in clause 6.2E.3.3) information and Analytics Feedback Information for the analytics generated by the NWDAF.\nInputs, Required: Subscription Correlation ID.\nOutputs, Required: Operation execution result indication.\nOutputs, Optional: None.",
      "chunk_type": "general",
      "cross_references": [
        "clause_6.2"
      ]
    },
    {
      "chunk_id": "ts_23.288_7.9.4",
      "section_id": "7.9.4",
      "section_title": "Nnwdaf_MLModelMonitor_Notify service operation",
      "content": "Service operation name: Nnwdaf_MLModelMonitor_Notify.\nDescription: NWDAF notifies the monitored ML Model accuracy (i.e. Analytics accuracy for an ML Model as described in clause 6.2E.3.3) information and Analytics Feedback Information for the analytics generated by the NWDAF to the consumer instance which has subscribed to the specific NWDAF service.\nInputs, Required: Notification Correlation Information, at least one of the following:\n-\tthe monitored ML Model Accuracy Information which includes:\n-\tUnique ML Model identifier;\n-\tMonitoring interval: time interval during which the ML Model Accuracy Monitoring was conducted;\n-\tMonitored Analytics metrics value of the ML Model and a deviation value which indicates the deviation of the predictions generated using the ML Model(s) from the ground truth data;\n-\tNumber of inferences that were performed during the monitoring interval;\n-\tUsed Accuracy metrics (as requested in Subscribe service operation).\n-\tAnalytics Feedback Information: indicates that the consumer NF of the analytics generated by the provisioned ML Model has taken an action(s) influenced by the analytics and includes the following parameter(s):\n-\tCorresponding Analytics ID(s) which has been used for taking an action(s);\n-\tCorresponding ML Model identifier(s) which has been used for generating Analytics;\n-\tIndication whether the action will affect on ground truth data (if available);\n-\tTime stamp(s) when the action(s) are taken.\nInputs, Optional:\n-\tInput data used for inferencing indicated by DataSetTag with ADRF ID when the prediction generated from the ML Model is not correct (which can be used by the NWDAF containing MTLF for possible ML Model retraining);\nNOTE:\tHow MTLF/AnLF determines whether the prediction is correct one is up to implementation.\n-\tAn indication that the analytics metrics value of the ML Model does not meet the requirement of accuracy for the ML Model.\n-\tAnalytics ID;\n-\tTarget of Analytics Reporting;\n-\tAnalytics filter for which the model is used for.\nOutputs, Required: Operation execution result indication.\nOutputs, Optional: None.",
      "chunk_type": "general",
      "cross_references": [
        "clause_6.2"
      ]
    },
    {
      "chunk_id": "ts_23.288_7.9.5",
      "section_id": "7.9.5",
      "section_title": "Nnwdaf_MLModelMonitor_Register",
      "content": "Service operation name: Nnwdaf_MLModelMonitor_Register\nDescription: The consumer registers the use and monitoring capability for an ML Model at an NWDAF containing MTLF.\nInputs, Required: Consumer NF ID, Unique ML Model identifier.\nInputs, Optional: Endpoint address of the Nnwdaf_MLModelMonitor_Subscribe service operation, ML Model accuracy transfer indication as defined in clause 6.2E.3.2, Analytics ID, Target of Analytics Reporting and the Analytics filter for which the model is used for.\nOutputs, Required: ML Model monitoring registration ID.\nOutputs, Optional: None.",
      "chunk_type": "general",
      "cross_references": [
        "clause_6.2"
      ]
    },
    {
      "chunk_id": "ts_23.288_7.9.6",
      "section_id": "7.9.6",
      "section_title": "Nnwdaf_MLModelMonitor_Deregister",
      "content": "Service operation name: Nnwdaf_MLModelMonitor_Deregister\nDescription: The consumer deregisters, from an NWDAF containing MTLF, a previous MLModelMonitor registration, e.g. when the consumer is no longer using or monitoring the accuracy of the analytics generated using the ML Model.\nInputs, Required: ML Model monitoring registration ID.\nInputs, Optional: A termination indication, a termination cause, the NWDAF containing AnLF NF ID of the target NWDAF (in the case that the termination cause is due to analytics transfer).\nOutputs, Required: None.\nOutputs, Optional: None.",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.288_7.10.1",
      "section_id": "7.10.1",
      "section_title": "General",
      "content": "Service Description: This service enables the consumer to subscribe/unsubscribe/notify/modify for ML Model training.\nNOTE:\tIn this release of the specification, the service provider and consumer are limited to NWDAF containing MTLF.\nWhen used for Federated Learning, this service enables FL server NWDAF to enable Federated Learning while providing global ML Model information to FL Client NWDAF and getting local ML Model information and status report of FL training as defined in clause 6.2C.2.3 from the FL Client NWDAF.\nThis service may also be used by the consumer (i.e. FL Server NWDAF) to check if the service provider (i.e. FL Client NWDAF) can meet the ML Model training requirement as described in clause 6.2F.1.\nThis service may also be used by the consumer (i.e. FL Server NWDAF) to request the service provider (i.e. FL Client NWDAF) to calculate and provide Model Accuracy of the global ML Model as described in clause 6.2F.1.",
      "chunk_type": "definition",
      "cross_references": [
        "clause_6.2"
      ]
    },
    {
      "chunk_id": "ts_23.288_7.10.2",
      "section_id": "7.10.2",
      "section_title": "Nnwdaf_MLModelTraining_Subscribe service operation",
      "content": "Service operation name: Nnwdaf_MLModelTraining_Subscribe\nDescription: Subscribes to NWDAF ML Model training with specific parameters.\nInputs, Required:\n-\tAnalytics ID as defined in Table 7.1-2;\n-\tML Model Interoperability information;\n-\tNotification Target Address (+ Notification Correlation ID).\nInputs, Optional:\n-\tML Model identifier: identifies the provided ML Model.\n-\tML Model Information (as defined in clause 6.2A.2);\n-\tML Model file;\n-\tSubscription Correlation ID (in the case of modification of the ML Model Training subscription);\n-\tML Training Information, i.e. data availability requirement, time availability requirement.\n-\tML Preparation Flag;\n-\tML Model Accuracy Check Flag;\n-\tML Correlation ID;\n-\tTraining Filter Information;\n-\tTarget of Training Reporting;\n-\tTraining Reporting Information as defined in clause 6.2F.2;\n-\tUse case context;\n-\tIteration round ID;\n-\tExpiry time.\n-\tIndication of skipping the current FL round.\nOutputs Required: When the request is accepted: Subscription Correlation ID (required for management of this subscription). When the request is not accepted, an error response with cause code (e.g. NWDAF does not meet the ML training requirements, ML training is not complete, NWDAF overload, not available for the FL process anymore, etc.).\nNOTE:\tThe detail reasons in the cause code are up to Stage 3.\nOutputs, Optional: ML Correlation ID (e.g. confirm of the subscription for this FL process).",
      "chunk_type": "general",
      "cross_references": [
        "clause_6.2",
        "table_7.1-2"
      ]
    },
    {
      "chunk_id": "ts_23.288_7.10.3",
      "section_id": "7.10.3",
      "section_title": "Nnwdaf_MLModelTraining_Unsubscribe service operation",
      "content": "Service operation name: Nnwdaf_MLModelTraining_Unsubscribe\nDescription: Terminate NWDAF ML Model training.\nInputs, Required: Subscription Correlation ID.\nInputs, Optional: None.\nOutputs, Required: Operation execution result indication.\nOutputs, Optional: Cause code (e.g. FL Client NWDAF is unselected by the FL Server NWDAF for the FL process, or the FL process is suspended or finished, etc.). Final aggregated ML Model information (if FL has finished) or updated aggregated ML Model information (if FL is suspended).",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.288_7.10.4",
      "section_id": "7.10.4",
      "section_title": "Nnwdaf_MLModelTraining_Notify service operation",
      "content": "Service operation name: Nnwdaf_MLModelTraining_Notify\nDescription: NWDAF notifies the consumer instance of the trained ML Model that has subscribed to the specific NWDAF service. The NWDAF can also use this service to indicate to consumer it will terminate the ML Model training.\nInputs, Required:\n-\tNotification Correlation Information: this parameter indicates the Notification Correlation ID that has been assigned by the consumer during ML Model training.\nInputs, Optional:\n-\tSet of the tuple (Analytics ID, ML Model Information as defined in clause 6.2F.2;\n-\tML Correlation ID, when for Federated Learning;\n-\tCorresponding Use case context;\n-\tTermination Request: this parameter indicates that NWDAF requests to terminate the ML Model training, i.e. NWDAF will not provide further notifications related to this request, with cause code (e.g. NWDAF overload, not available for the FL process anymore, etc.);\n-\tML Model identifier: this parameter identifies the provisioned ML Model;\n-\tGlobal ML Model Accuracy information: The model accuracy of the global ML Model, which is calculate by the FL Client NWDAF using the local training data as the testing dataset;\n-\tStatus report of FL training: local ML Model accuracy information and Training Input Data Information (e.g. areas covered by the data set, sampling ratio, maximum/minimum of value of each dimension, etc.), which are generated by the FL Client NWDAF during FL procedure;\n-\tDelay Event Notification: as defined in clause 6.2F.2;\n-\tIteration round ID.\nNOTE:\tThe detail reasons in the cause code are up to stage 3.\nOutputs, Required: Operation execution result indication.\nOutputs, Optional: None.",
      "chunk_type": "general",
      "cross_references": [
        "clause_6.2"
      ]
    },
    {
      "chunk_id": "ts_23.288_7.11.1",
      "section_id": "7.11.1",
      "section_title": "General",
      "content": "Service Description: This service enables the consumer to request for the information about ML Model training based on the ML Model file or ML Model information as described in clause 6.2F.2 provided by the consumer.\nNOTE:\tIn this release of the specification, the service provider and consumer are limited to NWDAF containing MTLF.\nWhen used for Federated Learning, this service enables FL server NWDAF to enable Federated Learning while providing global ML Model information to FL Client NWDAF and getting local ML Model information from the FL Client NWDAF.",
      "chunk_type": "definition",
      "cross_references": [
        "clause_6.2"
      ]
    },
    {
      "chunk_id": "ts_23.288_7.11.2",
      "section_id": "7.11.2",
      "section_title": "Nnwdaf_MLModelTrainingInfo_Request service operation",
      "content": "Service operation name: Nnwdaf_MLModelTrainingInfo_Request\nDescription: Request information about NWDAF ML Model training with specific parameters.\nInputs, Required:\n-\tAnalytics ID as defined in Table 7.1-2.\n-\tML Model Interoperability information.\nInputs, Optional:\n-\tML Model identifier: identifies the provided ML Model.\n-\tML Model Information (as defined in clause 6.2A.2).\n-\tML Model file.\n-\tML Training Information (i.e. data availability requirement, time availability requirement).\n-\tTraining Reporting Information as defined in clause 6.2F.2.\n-\tML Preparation Flag.\n-\tML Model Accuracy Check Flag.\n-\tML Correlation ID.\n-\tTermination Request, when terminating the Federated Learning identified by the ML Correlation ID and optionally indicating the reason, e.g. FL Client NWDAF is unselected by the FL Server NWDAF for the FL process, or the FL process is suspended, etc.\n-\tTraining Filter Information.\n-\tTarget of Training Reporting.\n-\tUse case context.\n-\tIndication of skipping the current FL round.\nOutputs Required: When the request is accepted: Operation execution result indication. When the request is not accepted, an error response with cause code (e.g. NWDAF does not meet the ML training requirements, ML training is not complete, NWDAF overload, not available for the FL process anymore, etc.).\nNOTE:\tThe detail reasons in the cause code are up to stage 3.\nOutputs, Optional:\n-\tML Model identifier.\n-\tSet of the tuple (Analytics ID, ML Model Information (as defined in clause 6.2A.2)).\n-\tML Correlation ID, when for Federated Learning.\n-\tCorresponding Use case context.\n-\tGlobal ML Model Accuracy information: The model accuracy of the global ML Model, which is calculate by the FL Client NWDAF using the local training data as the testing dataset.\n-\tStatus report of FL training: local ML Model Accuracy Information and Training Input Data Information (e.g. areas covered by the data set, sampling ratio, maximum/minimum of value of each dimension of data, etc.), which are generated by the FL Client NWDAF during FL procedure.\n-\tDelay Event Notification as defined in clause 6.2F.2.",
      "chunk_type": "general",
      "cross_references": [
        "clause_6.2",
        "table_7.1-2"
      ]
    },
    {
      "chunk_id": "ts_23.288_8.1",
      "section_id": "8.1",
      "section_title": "General",
      "content": "Table 8.1-1 shows the DCCF services and DCCF service operations.\nTable 8.1-1: NF services provided by DCCF\nService Name\nService Operations\nOperation Semantics\nExample Consumer(s)\nNdccf_DataManagement\nSubscribe\nSubscribe / Notify\nNWDAF, PCF, NSSF, AMF, SMF, NEF, AF, ADRF, LMF\nUnsubscribe\nNWDAF, PCF, NSSF, AMF, SMF, NEF, AF, ADRF, LMF\nNotify\nNWDAF, PCF, NSSF, AMF, SMF, NEF, AF, ADRF, LMF\nFetch\nRequest / Response\nNWDAF, PCF, NSSF, AMF, SMF, NEF, AF, ADRF, LMF\nTransfer\nRequest / Response\nDCCF\nNdccf_ContextManagement\nRegister\nRequest / Response\nNWDAF, ADRF\nUpdate\nRequest / Response\nNWDAF, ADRF\nDeregister\nRequest / Response\nNWDAF, ADRF",
      "chunk_type": "definition",
      "cross_references": [
        "table_8.1-1"
      ]
    },
    {
      "chunk_id": "ts_23.288_8.2.1",
      "section_id": "8.2.1",
      "section_title": "General",
      "content": "Service Description: This service enables the consumer to subscribe/unsubscribe for data or analytics via the DCCF, be notified about data or analytics exposed by the DCCF, fetch the subscribed data and have data delivered via the DCCF or via a messaging framework. Historical data, or runtime data may be obtained using this service.\nWhen the subscription is accepted by the DCCF, the consumer NF receives from the DCCF an identifier (Subscription Correlation ID) allowing it to further manage (modify, delete) the subscription.",
      "chunk_type": "definition",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.288_8.2.2",
      "section_id": "8.2.2",
      "section_title": "Ndccf_DataManagement_Subscribe service operation",
      "content": "Service operation name: Ndccf_DataManagement_Subscribe\nDescription: The consumer subscribes to receive data or analytics (which is regarded as a kind of data), or if the data is already requested from the DCCF, then the subscription is updated. The subscription includes service operation specific parameters that identify the data or analytics to be provided and may include formatting and processing instructions that specify how the data is to be delivered to the consumer. The consumer may also request that data be stored in an ADRF or an NWDAF hosting ADRF functionality. When historical data is being obtained, the consumer may specify the ID of the ADRF or NWDAF containing the data.\nInputs, Required: Service operation, Analytics Specification or Data Specification, Notification Target Address(es) (+ Notification Correlation ID (s)).\nInputs, Optional: Time Window, NF (or NF-Set) ID, ADRF or NWDAF hosting ADRF information where collected data are to be stored, ADRF ID where historical data are stored, Formatting Instructions, Processing Instructions, user consent check information (i.e. an indication that the data consumer has checked user consent), purpose for data collection, Storage Handling Information.\n\"Service Operation\" identifies the service used by the DCCF to request data or analytics from a Data Source (e.g.: Namf_EventExposure_Subscribe or Nnwdaf_AnalyticsSubscription_Subscribe)\n\"Analytics Specification or Data Specification\" is the \"Service Operation\" specific required and optional input parameters that identify the data to be collected (e.g. Analytics ID(s) / Event ID (s), Target of Analytics Reporting or Target of Event Reporting, Analytics Filter or Event Filter, etc.). Service Operations and input parameters are defined in clause 7 for NWDAF and in TS 23.502, clause 5.2 for the other NFs.\n\"Time Window\" is the start and stop time when the requested data or analytics was or will be collected. If the Time Window includes a period in the past, then the data or analytics collection is \"historical\". If the Time Window includes a period in the future, the data or analytics collection is \"runtime\".\nNOTE 1:\tTime Window parameter is different from the \"Analytics target period\" defined in clause 6.1.3.\nNOTE 2:\tWhen Time Window is not provided, the consumer subscribes to runtime data or analytics collection, with no end time specified.\nNF (or NF-Set) ID specifies a data source that may provide the data.\nADRF Information specifies that collected data or analytics is to be stored in an ADRF and optionally an ADRF or NWDAF ID.\nFormatting Instructions and Processing Instructions are as defined in clause 5A.4.\nStorage Handling Information is described in clause 5B.1.\nOutputs Required: When the subscription is accepted: Subscription Correlation ID (required for management of this subscription). When the subscription is not accepted: An error response.\nOutputs, Optional: First corresponding event report is included, if available (see clause 4.15.1 of TS 23.502 [3]), Requested data, Storage Approach (see clause 5B.1).\nNOTE 3:\tWhen the Target of Event Reporting or Target of Reporting is a SUPI or a GPSI then the subscription may not be accepted, e.g. for user consent is not granted and an error is sent to the consumer. When the Target of Event Reporting or Target of Reporting is an Internal Group Id, or a list of SUPIs/GPSI(s) or any UE, no error is sent, but a SUPI or GPSI is skipped if user consent is not granted.",
      "chunk_type": "general",
      "cross_references": [
        "ts_23.502_clause_7",
        "ts_23.502_clause_5.2",
        "clause_6.1.3",
        "clause_5",
        "ts_23.502_clause_4.15.1",
        "ts_23.50",
        "ts_23.502"
      ]
    },
    {
      "chunk_id": "ts_23.288_8.2.3",
      "section_id": "8.2.3",
      "section_title": "Ndccf_DataManagement_Unsubscribe service operation",
      "content": "Service operation name: Ndccf_DataManagement_Unsubscribe\nDescription: The consumer unsubscribes to DCCF for data or analytics.\nInputs, Required: Subscription Correlation ID.\nInputs, Optional: None.\nOutputs, Required: Operation execution result indication.\nOutputs, Optional: The pending (events) data that is not sent to the consumer yet.",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.288_8.2.4",
      "section_id": "8.2.4",
      "section_title": "Ndccf_DataManagement_Notify service operation",
      "content": "Service operation name: Ndccf_DataManagement_Notify\nDescription: DCCF notifies the consumer instance of the requested data or analytics (which is regarded as a kind of data) according to the request, or notifies of the availability of previously subscribed Data or Analytics when data delivery is via the DCCF. The DCCF may also notify the consumer instance when Data or Analytics is to be deleted.\nInputs, Required: Notification Correlation Information, time stamp representing time when DCCF completed preparation of the requested data.\nInputs, Optional: Requested Data with timestamp or Analytics with timestamp, Fetch Instructions, Termination Request, Data or Analytics Deletion Alert.\nNOTE 1:\tIf the DCCF has received the notifications from another source (e.g. NWDAF) without a timestamp, then the DCCF adds itself a timestamp based on the time it received the notification.\nFetch Instructions indicate whether the data or analytics are to be fetched by the Consumer. If the data or analytics are to be fetched, the fetch instructions include an address from which the data may be fetched, one or more Fetch Correlation IDs and a deadline to fetch the data (Fetch Deadline).\nTermination Request indicates that the DCCF requests to terminate the data management subscription, i.e. DCCF will not provide further notifications related to this subscription.\nPending Notification Cause indicates the cause of the pending notification of the stored unsent data, e.g. the data cannot be collected any more due to UE moved out of DCCF serving area.\nData or Analytics Deletion Alert is described in clause 5B.1.\nNOTE 2:\tData or Analytics provided in notifications are processed and formatted according to the Processing and Formatting Instructions provided by the Consumer in Ndccf_DataManagement_Subscribe.\nOutputs, Required: Operation execution result indication.\nOutputs, Optional: Data or Analytics Retrieval Indication.\nThe Data or Analytics Retrieval Indication may be sent if the notification contains a Data or Analytics Deletion Alert. The Data or Analytics Retrieval Indication indicates if the consumer will retrieve stored data or analytics prior to deletion (see clause 6.2B.3).",
      "chunk_type": "general",
      "cross_references": [
        "clause_5",
        "clause_6.2"
      ]
    },
    {
      "chunk_id": "ts_23.288_8.2.5",
      "section_id": "8.2.5",
      "section_title": "Ndccf_DataManagement_Fetch service operation",
      "content": "Service operation name: Ndccf_DataManagement_Fetch\nDescription: Consumer retrieves from the DCCF, data or analytics (which is regarded as a kind of data) as indicated by Ndccf_DataManagement_Notify Fetch Instructions.\nInputs, Required: Set of Fetch Correlation ID(s).\nInputs, Optional: None.\nOutputs, Required: Operation execution result indication.\nOutputs, Optional: Requested data or Analytics.",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.288_8.2.6",
      "section_id": "8.2.6",
      "section_title": "Ndccf_DataManagement_Transfer service operation",
      "content": "Service operation name: Ndccf_DataManagement_Transfer\nDescription: Source DCCF transfers UE data subscription context to the target DCCF.\nInputs, Required: UE data subscription context(UE ID, Data Specification, Notification Target Address(es) (+ Notification Correlation ID(s))).\nInputs, Optional: Service Operation, Time Window, NF (or NF-Set) ID, ADRF or NWDAF hosting ADRF information where data are to be stored.\nOutputs Required: Subscription Correlation ID, Operation execution result indication.\nOutputs, Optional: None.",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.288_8.3.1",
      "section_id": "8.3.1",
      "section_title": "General",
      "content": "Service Description: This service enables the consumer to register collected data or analytics with the DCCF.\nWhen the DCCF is configured by the consumer NF, the DCCF supplies a Transaction Reference Id. The Consumer NF may use the Transaction Reference Id in subsequent transactions to update or delate the context in the DCCF.",
      "chunk_type": "definition",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.288_8.3.2",
      "section_id": "8.3.2",
      "section_title": "Ndccf_ContextManagement_Register service operation",
      "content": "Service operation name: Ndccf_ContextManagement_Register\nDescription: The consumer NF uses this service operation to register data or analytics it is collecting to the DCCF. The registration includes a service operation specific Analytics/Data Specification that identifies the data or analytics that are being collected or has been collected.\nInputs, Required: Service Operation, Analytics/Data Specification, NWDAF ID or ADRF ID.\nInputs, Optional: None\nNOTE:\tThe input parameters are defined as:\n-\t\"Service Operation\" identifies the service used to collect the data or analytics from a Data Source (e.g. Namf_EventExposure_Subscribe or Nnwdaf_AnalyticsSubscription_Subscribe).\n-\t\"Analytics/Data Specification\" is the \"Service Operation\" specific required and optional input parameters that identify the collected data (i.e. Analytics ID(s) / Event ID (s), Target of Analytics Reporting or Target of Event Reporting, Analytics Filter or Event Filter, etc.). NF Service Operations and input parameters are defined in clause 7 and clause 5.2 of TS 23.502 [3].\n-\tNWDAF ID or ADRF ID specify the ADRF or NWDAF with the stored data.\nOutputs Required: Transaction Reference ID(s), Operation execution result indication.\nOutputs, Optional: None.",
      "chunk_type": "general",
      "cross_references": [
        "ts_23.502_clause_7",
        "ts_23.502_clause_5.2",
        "ts_23.502"
      ]
    },
    {
      "chunk_id": "ts_23.288_8.3.3",
      "section_id": "8.3.3",
      "section_title": "Ndccf_ContextManagement_Update service operation",
      "content": "Service operation name: Ndccf_ContextManagement_Update\nDescription: The consumer NF uses this service operation to update a registration of data or analytics to the DCCF. The registration update includes a service operation specific Analytics/Data Specification that identifies the data or analytics that is being collected or has been collected.\nInputs, Required: Transaction Reference ID(s), Service Operation, Analytics/Data Specification\nInputs, Optional: None\nNOTE:\tThe input parameters are defined in clause 8.3.2.\nOutputs Required: Transaction Reference ID(s), Operation execution result indication.",
      "chunk_type": "general",
      "cross_references": [
        "clause_8.3.2"
      ]
    },
    {
      "chunk_id": "ts_23.288_8.3.4",
      "section_id": "8.3.4",
      "section_title": "Ndccf_ContextManagement_Deregister service operation",
      "content": "Service operation name: Ndccf_ContextManagement_Deregister\nDescription: The consumer NF uses this service operation to delete a registration of data or analytics to the DCCF.\nInputs, Required: Transaction Reference ID(s)\nInputs, Optional: None\nOutputs Required: Transaction Reference ID(s), Operation execution result indication.\nOutputs, Optional: None.",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.288_9.1",
      "section_id": "9.1",
      "section_title": "General",
      "content": "Table 9.1-1 shows the MFAF services and MFAF service operations.\nTable 9.1-1: NF services provided by MFAF\nService Name\nService Operations\nOperation Semantics\nExample Consumer(s)\nNmfaf_3daDataManagement\nConfigure\nRequest / Response\nDCCF, NWDAF\nDeconfigure\nRequest / Response\nDCCF, NWDAF\nNmfaf_3caDataManagement\nNotify\nSubscribe / Notify\nNWDAF, PCF, NSSF, AMF, SMF, NEF, AF, ADRF, LMF\nFetch\nRequest / Response\nNWDAF, PCF, NSSF, AMF, SMF, NEF, AF, ADRF, LMF\nNmfaf_ContextManagement\nTransfer\nRequest / Response\nMFAF",
      "chunk_type": "definition",
      "cross_references": [
        "table_9.1-1"
      ]
    },
    {
      "chunk_id": "ts_23.288_9.2.1",
      "section_id": "9.2.1",
      "section_title": "General",
      "content": "Service Description: The consumer (e.g. DCCF) uses this service to instruct the MFAF to map data or analytics received by the MFAF to out-bound notification endpoints. Configuration of the MFAF by the consumer may include formatting and processing instructions for each notification endpoint as described in clause 5A.4. The sending of historical data or run-time data may be configured/deconfigured using this service.\nWhen the MFAF is configured by the consumer NF, the MFAF provides a Transaction Reference Id. The Consumer NF may use the Transaction Reference Id in subsequent transactions to modify or remove (deconfigure) the sending of data to consumers.",
      "chunk_type": "definition",
      "cross_references": [
        "clause_5"
      ]
    },
    {
      "chunk_id": "ts_23.288_9.2.2",
      "section_id": "9.2.2",
      "section_title": "Nmfaf_3daDataManagement_Configure service operation",
      "content": "Service operation name: Nmfaf_3daDataManagement_Configure\nDescription: The consumer configures or reconfigures the MFAF to map data or analytics received by the MFAF to out-bound notification endpoints and to format and process the out-bound data or analytics. The consumer may also use this service operation with a target MFAF to request that it transfer MFAF UE context(s) from the indicated MFAF.\nInputs, Required: None.\nInputs, Optional: Data Consumer or Analytics Consumer Information, Formatting Instructions, Processing Instructions, MFAF Notification Information, Transaction Reference Id, ADRF ID, MFAF Transfer Information.\n\"Data Consumer or Analytics Consumer Information\" contains for each notification endpoint, the consumer provided Notification Target Address (+ Analytics Consumer Notification Correlation ID) or other endpoint addresses if provisioned on the DCCF to be used by the MFAF when sending notifications. The consumer includes this information except when initiating a UE context transfer between a source MFAF and a target MFAF.\n\"MFAF Notification Information\" is used to identify Event Notifications received from a Data Source and comprises the MFAF Notification Target Address (+ MFAF Notification Correlation ID). If a Data Source is already supplying the data to the MFAF, the MFAF Notification Information previously provided by the MFAF and used by the DCCF to obtain data from a Data Source is provided as an Input. If a new subscription to a Data Source is needed, the MFAF Notification Information is not specified as an Input and the MFAF provides Notification Information as an output. The MFAF Notification Information may subsequently be used by the DCCF when subscribing to a Data Source. \"ADRF ID\" is used to identify the ADRF when DCCF requests that the Messaging Framework to store historical data and analytics in the ADRF via Nadrf_DataManagement_StorageRequest. When a Notification Correlation ID is provided, MFAF shall use the Nmfaf_3caDataManagement_Notify service with the notification correlation ID to send the data or analytics to the ADRF.\n\"MFAF Transfer Information\" consists of a Transfer Initiation flag together with ID of the MFAF currently holding the UE context, UE MFAF Context Identifier(s) (i.e. the Transaction Reference ID(s) that was returned to the consumer when using the Nmfaf_3daDataManagement_Configure service operation to configure or update the MFAF).\nOutputs Required: Operation execution result indication.\nOutputs, Optional: MFAF Notification Information, Transaction Reference Id.",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.288_9.2.3",
      "section_id": "9.2.3",
      "section_title": "Nmfaf_3daDataManagement_Deconfigure service operation",
      "content": "Service operation name: Nmfaf_3daDataManagement_Deconfigure\nDescription: The consumer configures the MFAF to stop mapping data or analytics received by the MFAF to one or more out-bound notification endpoints.\nInputs, Required: Data Consumer or Analytics Consumer Information, Transaction Reference Id.\nInputs, Optional: None.\nOutputs, Required: Operation execution result indication.\nOutputs, Optional: None.",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.288_9.3.1",
      "section_id": "9.3.1",
      "section_title": "General",
      "content": "Service Description: This service is used to supply data or analytics from the MFAF to notification endpoints. Notifications may contain data or analytics, or an indication of availability of data or analytics.",
      "chunk_type": "definition",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.288_9.3.2",
      "section_id": "9.3.2",
      "section_title": "Nmfaf_3caDataManagement_Notify service operation",
      "content": "Service operation name: Nmfaf_3caDataManagement_Notify\nDescription: Provides data or analytics or notification of availability of data or analytics to notification endpoints.\nInputs, Required: Notification Correlation Information.\nInputs, Optional: Requested Data with timestamp or Analytics with timestamp, Fetch Instructions.\nNOTE 1:\tIf the MFAF has received the notifications from another source (e.g. NWDAF) without a timestamp, then the MFAF adds itself a timestamp based on the time it received the notification.\nFetch Instructions indicate whether the data or analytics are to be fetched by the Consumer. If the data or analytics are to be fetched, the fetch instructions include an address from which the data may be fetched, one or more Fetch Correlation IDs and a deadline to fetch the data (Fetch Deadline).\nNOTE 2:\tData or Analytics provided in notifications can be processed and formatted according to the Processing and Formatting Instructions provided by the Consumer.\nOutputs, Required: None.\nOutputs, Optional: None.",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.288_9.3.3",
      "section_id": "9.3.3",
      "section_title": "Nmfaf_3caDataManagement_Fetch service operation",
      "content": "Service operation name: Nmfaf_3caDataManagement_Fetch\nDescription: Consumer retrieves from the MFAF, data or analytics (which is regarded as a kind of data) as indicated by Nmfaf_3caDataManagement_Notify Fetch Instructions.\nInputs, Required: Set of Fetch Correlation ID(s).\nInputs, Optional: None.\nOutputs, Required: Operation execution result indication.\nOutputs, Optional: Requested Data or Analytics.\nNOTE:\tData or Analytics provided in notifications can be processed and formatted according to the Processing and Formatting Instructions provided by the Consumer.",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.288_9.4.1",
      "section_id": "9.4.1",
      "section_title": "General",
      "content": "Service Description: This service is used to transfer MFAF UE context information to a consumer (e.g. a target MFAF). It may be triggered by a Nmfaf_3daDataManagement_Configure request.",
      "chunk_type": "definition",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.288_9.4.2",
      "section_id": "9.4.2",
      "section_title": "Nmfaf_ContextManagement_Transfer service operation",
      "content": "Service operation name: Nmfaf_ContextManagement_Transfer\nDescription: Provides MFAF UE context to a consumer.\nInputs, Required: (Set of) UE MFAF Context Identifier(s) (i.e. the Transaction Reference ID that was returned to the consumer when using the Nmfaf_3daDataManagement_Configure service operation to configure or update the MFAF).\nNOTE:\tThese identifiers can have been received from the DCCF via the Nmfaf_3daDataManagement_Configure request (see clause 6.2.6.3.8).\nInputs, Optional: None.\nOutputs, Required: Operation execution result indication. For success Set of MFAF Context(s) (i.e. for each Transaction Reference ID provided as input Data Consumer Information, optionally Formatting Instructions and Processing Instructions, and possible buffered partial contents of pending notifications).\nOutputs, Optional: None.",
      "chunk_type": "general",
      "cross_references": [
        "clause_6.2.6.3.8"
      ]
    },
    {
      "chunk_id": "ts_23.288_10.1",
      "section_id": "10.1",
      "section_title": "General",
      "content": "Table 10.1-1 shows the ADRF services and ADRF service operations.\nADRF service operations may be used to store data or analytics in the ADRF, retrieve data or analytics from an ADRF, or delete data or analytics from an ADRF.\nADRF service operations may also be used to store ML Model(s) or ML Model address(es) in the ADRF, retrieve ML Model(s) from an ADRF or delete ML Model(s) from an ADRF.\nTable 10.1-1: NF services provided by ADRF\nService Name\nService Operations\nOperation Semantics\nExample Consumer(s)\nNadrf_DataManagement\nStorageRequest\nRequest / Response\nDCCF, NWDAF, MFAF\nStorageSubscriptionRequest\nRequest / Response\nDCCF, NWDAF\nStorageSubscriptionRemoval\nRequest / Response\nDCCF, NWDAF\nRetrievalRequest\nRequest / Response\nDCCF, NWDAF\nRetrievalSubscribe\nSubscribe / Notify\nDCCF, NWDAF\nRetrievalUnsubscribe\nDCCF, NWDAF\nRetrievalNotify\nDCCF, NWDAF\nDelete\nRequest / Response\nDCCF, NWDAF\nNadrf_MLModelManagement\nStorageRequest\nRequest / Response\nNWDAF\nRetrievalRequest\nRequest / Response\nNWDAF\nDelete\nRequest / Response\nNWDAF",
      "chunk_type": "definition",
      "cross_references": [
        "table_10.1-1"
      ]
    },
    {
      "chunk_id": "ts_23.288_10.2.1",
      "section_id": "10.2.1",
      "section_title": "General",
      "content": "Service Description: This service enables the consumer to store, retrieve and remove data or analytics from an ADRF.",
      "chunk_type": "definition",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.288_10.2.2",
      "section_id": "10.2.2",
      "section_title": "Nadrf_DataManagement_StorageRequest service operation",
      "content": "Service operation name: Nadrf_DataManagement_StorageRequest\nDescription: The consumer NF uses this service operation to request the ADRF to store data or analytics. Data or analytics are provided to the ADRF in the request message.\nInputs, Required: Data with timestamp or Analytics with timestamp to be stored, Service operation, Analytics Specification or Data Specification.\n\"Service Operation\" identifies the service used to obtain the data or analytics from a Data Source (e.g. Namf_EventExposure_Subscribe or Nnwdaf_AnalyticsSubscription_Subscribe).\n\"Analytics Specification or Data Specification\" is the \"Service Operation\" specific required and optional input parameters that identify the data that was stored (e.g. Analytics ID(s) / Event ID (s), Target of Analytics Reporting or Target of Event Reporting, Analytics Filter or Event Filter, etc.). Service Operations and input parameters are defined in clause 7 for NWDAF and in clause 5.2 of TS 23.502 [3] for the other NFs.\nInputs, Optional: DataSetTag, DSC information, Storage Handling Information, Data Deletion Notification Endpoint (see clause 6.2B.2).\nOutputs Required: Result Indication.\nOutputs, Optional: Storage Transaction Identifier, DataSetTag(s), Storage Approach.",
      "chunk_type": "general",
      "cross_references": [
        "clause_7",
        "ts_23.502_clause_5.2",
        "clause_6.2",
        "ts_23.502"
      ]
    },
    {
      "chunk_id": "ts_23.288_10.2.3",
      "section_id": "10.2.3",
      "section_title": "Nadrf_DataManagement_StorageSubscriptionRequest service operation",
      "content": "Service operation name: Nadrf_DataManagement_StorageSubscriptionRequest\nDescription: The consumer (NWDAF or DCCF) uses this service operation to request the ADRF to initiate a subscription for data or analytics (see clause 6.2B.3). Data or analytics provided in notifications as a result of the subsequent subscription by the ADRF are stored in the ADRF.\nThis service operation provides parameters needed by the ADRF to initiate the subscription (to a DCCF or NWDAF).\nInputs, Required: Service operation, Analytics Specification or Data Specification, Target NF (or Set) to subscribe to for notifications.\n\"Service Operation\" identifies the service used to request data or analytics from a Data Source (e.g. Namf_EventExposure_Subscribe or Nnwdaf_AnalyticsSubscription_Subscribe)\n\"Analytics Specification or Data Specification\" is the \"Service Operation\" specific required and optional input parameters that identify the data to be collected (e.g. Analytics ID(s) / Event ID (s), Target of Analytics Reporting or Target of Event Reporting, Analytics Filter or Event Filter, etc.). Service Operations and input parameters are defined in clause 7 for NWDAF and in clause 5.2 of TS 23.502 [3] for the other NFs.\n\"Target NF (or Set) to subscribe to for notifications\" may be a DCCF or NWDAF that can provide the data or analytics\nInputs, Optional: Formatting Instructions, Processing Instructions, DataSetTag, Storage Handling Information, Data Deletion Notification Endpoint (see clause 6.2B.3).\nFormatting Instructions and Processing Instructions are as defined in clause 5A.4.\nOutputs Required: Transaction Reference ID, DataSetTag(s) (if any).\nOutputs, Optional: Storage Approach.\nNOTE:\tThe parameters used in this service operation, including Formatting and Processing Instructions (if provided) are used by the ADRF when subscribing to a DCCF or NWDAF for Data or Analytics to be stored.",
      "chunk_type": "general",
      "cross_references": [
        "clause_6.2",
        "clause_7",
        "ts_23.502_clause_5.2",
        "clause_5",
        "ts_23.502"
      ]
    },
    {
      "chunk_id": "ts_23.288_10.2.4",
      "section_id": "10.2.4",
      "section_title": "Nadrf_DataManagement_StorageSubscriptionRemoval service operation",
      "content": "Service operation name: Nadrf_DataManagement_StorageSubscriptionRemoval\nDescription: The consumer NF uses this service operation to request that the ADRF no longer subscribes to data or analytics it is collecting and storing.\nInputs, Required: one of the following:\n-\tTransaction Reference ID provided in the Nadrf_DataManagement_StorageSubscriptionRequest Output; or\n-\tDataSetTag.\nInputs, Optional: None.\nOutputs, Required: Operation execution result indication.\nOutputs, Optional: None.",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.288_10.2.5",
      "section_id": "10.2.5",
      "section_title": "Nadrf_DataManagement_RetrievalRequest service operation",
      "content": "Service operation name: Nadrf_DataManagement_RetrievalRequest\nDescription: The consumer NF uses this service operation to retrieve stored data or analytics from the ADRF. The Nadrf_DataManagement_RetrievalRequest response either contains the data or analytics, or provides instructions for fetching the data or analytics. The Nadrf_DataManagement_RetrievalRequest may be unsolicited (e.g. when the consumer itself has known \"Storage Transaction Identifier\") or sent in response to a Fetch Instructions received from the ADRF in an Nadrf_DataManagement_RetrievalNotify.\nInputs, Required: one of the following:\n-\tStorage Transaction Identifier; or\n-\tFetch Correlation ID(s) if the RetrievalRequest is in response to a Fetch Instruction received from the ADRF in an Nadrf_DataManagement_RetrievalNotify; or\n-\tDataSetTag.\nInputs, Optional: None.\nOutputs Required: Result Indication.\nOutputs, Optional: Data or Analytics, DSC information.",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.288_10.2.6",
      "section_id": "10.2.6",
      "section_title": "Nadrf_DataManagement_RetrievalSubscribe service operation",
      "content": "Service operation name: Nadrf_DataManagement_RetrievalSubscribe\nDescription: The consumer NF uses this service operation to retrieve stored data or analytics from the ADRF and to receive future notifications containing the corresponding data or analytics received by ADRF.\nInputs, Required: one of the following:\n-\tService Operation, Analytics Specification or Data Specification, Time Window; or\n-\tDataSetTag.\n\"Service Operation\" identifies the service used to obtain the data or analytics from a Data Source (e.g. Namf_EventExposure_Subscribe or Nnwdaf_AnalyticsSubscription_Subscribe).\n\"Analytics Specification or Data Specification\" is the \"Service Operation\" specific required and optional input parameters that identify the data that was stored (e.g. Analytics ID(s) / Event ID (s), Target of Analytics Reporting or Target of Event Reporting, Analytics Filter or Event Filter, etc.). Service Operations and input parameters are defined in clause 7 for NWDAF and in clause 5.2 of TS 23.502 [3] for the other NFs.\n\"Time Window\" is the start and stop time when the requested data or analytics was collected. If Time Window includes a period in the future, subsequent notifications containing the requested data or analytics received by the ADRF are sent to the notification endpoint.\n\"DataSetTag\" indicates all data records stored or being collected and stored by ADRF which are associated to that attribute.\nInputs, Optional: Fetch flag.\nOutputs Required: Result Indication.\nOutputs, Optional: Subscription Correlation ID.",
      "chunk_type": "general",
      "cross_references": [
        "clause_7",
        "ts_23.502_clause_5.2",
        "ts_23.502"
      ]
    },
    {
      "chunk_id": "ts_23.288_10.2.7",
      "section_id": "10.2.7",
      "section_title": "Nadrf_DataManagement_RetrievalUnsubscribe service operation",
      "content": "Service operation name: Nadrf_DataManagement_RetrievalUnsubscribe\nDescription: The consumer NF uses this service operation to request that the ADRF no longer sends data or analytics to a notification endpoint.\nInputs, Required: Subscription Correlation ID.\nInputs, Optional: None.\nOutputs, Required: Operation execution result indication.\nOutputs, Optional: None.",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.288_10.2.8",
      "section_id": "10.2.8",
      "section_title": "Nadrf_DataManagement_RetrievalNotify service operation",
      "content": "Service operation name: Nadrf_DataManagement_RetrievalNotify\nDescription: This service operation provides consumers with either data or analytics from an ADRF, or instructions to fetch the data or analytics from an ADRF. The notifications are provided to consumers that have subscribed using the Nadrf_DataManagement_RetrievalSubscribe service operation. Historical data or analytics may be retrieved from ADRF storage and data received in the future be sent when obtained by the ADRF. The ADRF may also notify the consumer instance when Data or Analytics is to be deleted\nInputs, Required: Notification Correlation Information, time stamp representing time when ADRF completed preparation of the requested data.\nInputs, Optional: Requested Data or Analytics, Fetch Instructions, Termination Request, DSC information, Data or Analytics Deletion Alert.\nFetch Instructions indicate whether the data or analytics are to be fetched from the ADRF by the Consumer. If the data or analytics are to be fetched, the fetch instructions include an address from which the data may be fetched, one or more Fetch Correlation IDs. and a deadline to fetch the data (Fetch Deadline).\nData or Analytics are fetched using the Nadrf_DataManagement_RetrievalRequest service operation.\nTermination Request indicates that the ADRF requests to terminate the subscription, i.e. ADRF will not provide further notifications related to this subscription, e.g. when all data or analytics requested by the consumer have been provided to the consumer.\nOutputs, Required: Operation execution result indication.\nOutputs, Optional: Data or Analytics Retrieval Indication.\nThe Data or Analytics Retrieval Indication may be sent if the notification contains a Data or Analytics Deletion Alert. The Data or Analytics Retrieval Indication indicates if the consumer will retrieve stored data or analytics prior to deletion (see clause 6.2B.3).",
      "chunk_type": "general",
      "cross_references": [
        "clause_6.2"
      ]
    },
    {
      "chunk_id": "ts_23.288_10.2.9",
      "section_id": "10.2.9",
      "section_title": "Nadrf_DataManagement_Delete",
      "content": "Service operation name: Nadrf_DataManagement_Delete\nDescription: This service operation instructs the ADRF to delete stored data.\nInputs, Required: One of the following:\n-\tStorage Transaction Identifier;\n-\tService Operation, Analytics Specification or Data Specification and Time Window; or\n-\tDataSetTag.\nInputs, Optional: None.\nOutputs, Required: Operation execution result indication.\nOutputs, Optional: None.",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.288_10.3.1",
      "section_id": "10.3.1",
      "section_title": "General",
      "content": "Service Description: This service enables the consumer to store and update, retrieve and remove ML Model(s) or ML Model address(es) from an ADRF.",
      "chunk_type": "definition",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.288_10.3.2",
      "section_id": "10.3.2",
      "section_title": "Nadrf_MLModelManagement_StorageRequest service operation",
      "content": "Service operation name: Nadrf_MLModelManagement_StorageRequest\nDescription: The consumer NF uses this service operation to request the ADRF to store or update ML Model(s). ML Model(s) or ML Model address(es) stored in NWDAF containing MTLF are provided to the ADRF in the request message.\nInputs, Required: NF instance ID of the NWDAF containing MTLF and set of:\n-\t(Updated) ML Model(s); or\n-\tthe tuple (unique ML Model identifier and address of (updated) ML Model file and (updated) Storage size required for each of the ML Models).\nNOTE 1:\tThe ADRF can download ML Model file using the ML Model addresses provided by the NWDAF containing MTLF. How the ADRF locally stores the ML Model is left for implementation.\nInputs, Optional: Allowed NF instance list for the ML Model identifier, Storage Transaction Identifier.\nIf Storage Transaction Identifier is included in the input, then ADRF updates the ML Model(s) corresponding to the Storage Transaction Identifier with the updated ML model(s) or updated ML Model file address(es) provided by consumer NF. A new Storage Transaction Identifier may be generated and sent to consumer NF by ADRF after the ML Model update process.\nOutputs Required:\n-\tML Model storage or ML Model Update Result Indication;\n-\t[Conditional] one or more tuples of unique ML Model identifier and (updated) ML Model address of Model file stored in ADRF.\nNOTE 2:\tThe definition of ML file address such as e.g. name, location and access method is up to stage 3.\nOutputs, Optional: Storage Transaction Identifier.",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.288_10.3.3",
      "section_id": "10.3.3",
      "section_title": "Nadrf_MLModelManagement_Delete service operation",
      "content": "Service operation name: Nadrf_MLModelManagement_Delete\nDescription: This service operation instructs the ADRF to delete stored ML Model file(s) or ML Model address(es).\nInputs, Required:\n-\tStorage Transaction Identifier; or\n-\tone or more unique ML Model identifier(s).\nWhen a Storage Transaction Identifier is given, ADRF shall delete all the models that stored in the corresponding storage transaction.\nInputs, Optional: None.\nOutputs, Required: One of the following:\n-\tOperation execution result indication (i.e. ML Model deleted, ML Model not found, ML Model found but not deleted), if for all of the involved ML Model(s) have the same execution result.\n-\tOne or more tuples (each includes the unique ML Model identifier and corresponding operation execution result indication).\nOutputs, Optional: None.",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.288_10.3.4",
      "section_id": "10.3.4",
      "section_title": "Nadrf_MLModelManagement_RetrievalRequest service operation",
      "content": "Service operation name: Nadrf_MLModelManagement_RetrievalRequest\nDescription: The consumer NF uses this service operation to request the ADRF to get the ML Model(s) stored in ADRF.\nInputs, Required:\n-\tStorage Transaction Identifier; or\n-\tone or more tuples of unique ML Model identifier(s).\nInputs, Optional: None.\nOutputs Required: Result Indication.\n-\t[Conditional] one or more tuples of unique ML Model identifiers and ML Model address of Model file stored in ADRF.\nNOTE:\tThe definition of ML file address such as e.g. name, location and access method is up to stage 3.\nOutputs, Optional: None.\nAnnex A (informative):Methods to handle NAT on IPv4 between UE and AF\nA.1\tMethods to handle NAT on IPv4 between UE and AF\nThe following methods can be used to handle the case when there is a NAT between the UE and AF for data collection:\nNOTE:\tThese methods can be used both when there is a NAT between the UE and the AF, and when there is no NAT between the UE and the AF.\n1)\tUse IPv6 instead of IPv4 and then use any of the procedures in clauses 6.2.8.2.4.2 to 6.2.8.2.4.4.\n2)\tProvide GPSI via header enrichment as described in TS 29.244 [17].\n3)\tHave GPSI as part of the authentication information, or via in-band signalling.\n4)\tAt the establishment of the user plane connection between the UE Application and AF, the AF can use the procedure in clause 4.15.10 of TS 23.502 [3] to get the GPSI.\n5)\tAt the establishment of the user plane connection between the UE Application and a trusted AF, the AF can use the steps 3 to 8 in clause 4.15.10 of TS 23.502 [3], where NEF is replaced by the AF, to retrieve the SUPI of the UE.\nIn methods 2) to 4), the AF can correlate the UE public IP address and port with the SUPI/GPSI.\nAnnex B (informative):Change history\nChange history\nDate\nMeeting\nTDoc\nCR\nRev\nCat\nSubject/Comment\nNew version\n2019-05\nSP#84\nSP-190456\n-\n-\n-\nMCC Editorial update for presentation to TSG SA#84 for approval\n1.0.0\n2019-06\nSP#84\n-\n-\n-\n-\nMCC editorial update for publication after approval at TSG SA#84\n16.0.0\n2019-09\nSP#85\nSP-190612\n0001\n3\nF\nClarifications to Observed Service experience related network data analytics\n16.1.0\n2019-09\nSP#85\nSP-190612\n0010\n1\nF\nSpecification clean-up\n16.1.0\n2019-09\nSP#85\nSP-190612\n0012\n3\nF\nMiscellaneous corrections to TS 23.288\n16.1.0\n2019-09\nSP#85\nSP-190612\n0014\n1\nF\nClarification of NF and AF\n16.1.0\n2019-09\nSP#85\nSP-190612\n0015\n3\nF\nUpdate the Analytics information provided by NWDAF\n16.1.0\n2019-09\nSP#85\nSP-190612\n0017\n2\nF\nClosing open issue on NEF-AF interaction for data collection from AF\n16.1.0\n2019-09\nSP#85\nSP-190612\n0026\n1\nF\nClarification of the correlation information\n16.1.0\n2019-09\nSP#85\nSP-190612\n0027\n4\nF\nClarifications of the pre-check behaviours of the NF\n16.1.0\n2019-09\nSP#85\nSP-190612\n0029\n3\nF\nCorrections to slice load level analytics\n16.1.0\n2019-09\nSP#85\nSP-190612\n0034\n3\nF\nClarifications on Potential QoS Change\n16.1.0\n2019-09\nSP#85\nSP-190612\n0036\n1\nF\nCR to properly separate UE identifiers from Analytics Filter\n16.1.0\n2019-09\nSP#85\nSP-190612\n0037\n1\nF\nCR for update of observed service experience\n16.1.0\n2019-09\nSP#85\nSP-190612\n0039\n3\nF\nMiscellaneous editorial corrections\n16.1.0\n2019-09\nSP#85\nSP-190612\n0040\n3\nF\nOptionality of data to be collected by NWDAF\n16.1.0\n2019-09\nSP#85\nSP-190612\n0042\n1\nF\nClarification on Data Collection\n16.1.0\n2019-09\nSP#85\nSP-190612\n0045\n1\nF\nProbability assertion clarification on NWDAF services description\n16.1.0\n2019-09\nSP#85\nSP-190612\n0046\n1\nF\nCorrections for analytics exposure framework related parameters\n16.1.0\n2019-09\nSP#85\nSP-190612\n0052\n1\nF\nBSF and PCF selection for data collection\n16.1.0\n2019-09\nSP#85\nSP-190612\n0054\n-\nF\nCorrections to Nnwdaf_AnalyticsSubscription_Subscribe and Nnwdaf_AnalyticsInfo_Request service operations\n16.1.0\n2019-12\nSP#86\nSP-191079\n0002\n6\nF\nClarifications to NF load data analytics\n16.2.0\n2019-12\nSP#86\nSP-191079\n0003\n8\nF\nClarifications to Network Performance related network data analytics\n16.2.0\n2019-12\nSP#86\nSP-191079\n0004\n3\nF\nClarifications to Abnormal behaviour analytics\n16.2.0\n2019-12\nSP#86\nSP-191079\n0009\n4\nF\nClarifications to UE mobility and Abnormal behaviour analytics\n16.2.0\n2019-12\nSP#86\nSP-191079\n0043\n2\nF\nRemove UE related analytics for any UE\n16.2.0\n2019-12\nSP#86\nSP-191079\n0044\n6\nF\nClarifications to UE communication and mobility analytics output\n16.2.0\n2019-12\nSP#86\nSP-191079\n0047\n3\nF\nCorrections for observed Service experience related network data analytics\n16.2.0\n2019-12\nSP#86\nSP-191079\n0055\n01\nF\nTerminology Alignment\n16.2.0\n2019-12\nSP#86\nSP-191079\n0057\n5\nF\nEditor's Notes cleanup\n16.2.0\n2019-12\nSP#86\nSP-191079\n0062\n-\nF\nCorrections to User Data Congestion Analytics\n16.2.0\n2019-12\nSP#86\nSP-191079\n0063\n-\nF\nCorrection for data collection from OAM\n16.2.0\n2019-12\nSP#86\nSP-191079\n0064\n7\nF\nCorrections to general and framework parts of analytics\n16.2.0\n2019-12\nSP#86\nSP-191079\n0065\n-\nF\nCorrections to data collection from NFs\n16.2.0\n2019-12\nSP#86\nSP-191079\n0066\n6\nF\nMiscellaneous corrections/updates to TS 23.288\n16.2.0\n2019-12\nSP#86\nSP-191079\n0068\n4\nF\nClarification of the data collection of the OSE\n16.2.0\n2019-12\nSP#86\nSP-191079\n0071\n3\nF\nUpdate to UE related analytics\n16.2.0\n2019-12\nSP#86\nSP-191079\n0072\nF\nClarifications on Supporting Modification of Analytics Subscription\n16.2.0\n2019-12\nSP#86\nSP-191079\n0076\n2\nF\nRemoving Editor's note on how to find a PCF instance serving a UE\n16.2.0\n2019-12\nSP#86\nSP-191079\n0078\n2\nF\nUser Data Congestion - Removal of Editor's Notes and Description Alignments\n16.2.0\n2019-12\nSP#86\nSP-191079\n0081\n3\nF\nCR to update UE communication\n16.2.0\n2019-12\nSP#86\nSP-191079\n0084\n3\nF\nCorrection to Analytics Filter for slice load level analytics\n16.2.0\n2019-12\nSP#86\nSP-191079\n0087\n3\nF\nClarification on NWDAF-assisted expected UE behavioural analytics\n16.2.0\n2019-12\nSP#86\nSP-191079\n0088\nF\nUpdate the correlation information for AMF data and RAN data\n16.2.0\n2019-12\nSP#86\nSP-191079\n0091\n1\nF\nClarification of UE related analytics\n16.2.0\n2019-12\nSP#86\nSP-191079\n0092\nF\nClarification of QoS requirements parameter used for QoS Sustainability Analytics\n16.2.0\n2019-12\nSP#86\nSP-191079\n0093\n4\nF\nAlignments on Analytics Filter Information and clarifications on Reporting Thresholds\n16.2.0\n2019-12\nSP#86\nSP-191079\n0094\n1\nF\nClarification for UPF related data collection\n16.2.0\n2019-12\nSP#86\nSP-191120\n0095\n3\nF\nAlignment of User Data Congestion Analytics\n16.2.0\n2019-12\nSP#86\nSP-191079\n0099\n1\nF\nNEF parameter mapping for outbound analytics\n16.2.0\n2019-12\nSP#86\nSP-191079\n0100\n5\nF\nAlignments on QoS Sustainability Analytics\n16.2.0\n2020-03\nSP#87E\nSP-200070\n0103\n1\nF\nClarification on definitions and NSI\n16.3.0\n2020-03\nSP#87E\nSP-200070\n0104\n-\nF\nNWDAF collect MDT/SON parameters\n16.3.0\n2020-03\nSP#87E\nSP-200070\n0105\n1\nF\nUpdate to Clause 6.1.3 Contents of Analytics Exposure\n16.3.0\n2020-03\nSP#87E\nSP-200070\n0108\n2\nF\nCR to update Observed Service Experience\n16.3.0\n2020-03\nSP#87E\nSP-200070\n0109\n3\nF\nCorrections on UE mobility analytics type by NWDAF service\n16.3.0\n2020-03\nSP#87E\nSP-200070\n0110\n3\nF\nCorrections on UE mobility analytics type by NWDAF service\n16.3.0\n2020-03\nSP#87E\nSP-200070\n0112\n2\nF\nCorrect the filters for UE related analytics\n16.3.0\n2020-03\nSP#87E\nSP-200070\n0113\n4\nF\nA mechanism to avoid the flooding of reporting\n16.3.0\n2020-03\nSP#87E\nSP-200070\n0114\n1\nF\nReporting information updates\n16.3.0\n2020-03\nSP#87E\nSP-200070\n0115\n1\nF\nMega CR on editorial corrections\n16.3.0\n2020-03\nSP#87E\nSP-200070\n0117\n1\nF\nSlice service experience data collection corrections\n16.3.0\n2020-03\nSP#87E\nSP-200070\n0119\n1\nF\nAdd the definition for Maximum number of results parameter into clause 6.1.3\n16.3.0\n2020-03\nSP#87E\nSP-200070\n0123\n1\nF\nClarification of clause 6.7.2 UE mobility analytics\n16.3.0\n2020-03\nSP#87E\nSP-200070\n0124\n1\nF\nClarification of clause 6.7.4 Expected UE behavioural parameters related network data analytics\n16.3.0\n2020-03\nSP#87E\nSP-200070\n0126\n1\nF\nClarification on abnormal behaviour analytics\n16.3.0\n2020-03\nSP#87E\nSP-200070\n0127\n1\nF\nClarifications on data collection\n16.3.0\n2020-03\nSP#87E\nSP-200070\n0128\n1\nF\nCorrections to Observed Service Experience analytics\n16.3.0\n2020-03\nSP#87E\nSP-200070\n0129\n1\nF\nCorrections to User Data Congestion Analytics\n16.3.0\n2020-03\nSP#87E\nSP-200070\n0130\n-\nF\nCorrections related to Analytics Filter Information and others\n16.3.0\n2020-03\nSP#87E\nSP-200070\n0132\n-\nF\nClarifications on Inputs of NWDAF Analytics Subscription\n16.3.0\n2020-03\nSP#87E\nSP-200070\n0139\n-\nF\nClarification of data collection from UPF\n16.3.0\n2020-03\nSP#87E\nSP-200070\n0140\n-\nF\nTS 23.288 editor's note handling\n16.3.0\n2020-03\nSP#87E\nSP-200070\n0142\n1\nF\nClarification on the NWDAF services invoked in Abnormal behaviour\n16.3.0\n2020-07\nSP#88E\nSP-200431\n0118\n3\nF\nAbnormal analytics for any UE\n16.4.0\n2020-07\nSP#88E\nSP-200431\n0146\n1\nF\nClarification of NF load analytics procedure\n16.4.0\n2020-07\nSP#88E\nSP-200431\n0148\n1\nF\nClarification on Data Collection Procedure\n16.4.0\n2020-07\nSP#88E\nSP-200431\n0149\n1\nF\nCorrection on Probability Assertion\n16.4.0\n2020-07\nSP#88E\nSP-200431\n0150\n1\nF\nMiscellaneous FASMO corrections to service experience analytics\n16.4.0\n2020-07\nSP#88E\nSP-200431\n0153\n1\nF\nSupport of abnormal behaviour analytics for any UE\n16.4.0\n2020-07\nSP#88E\nSP-200431\n0154\n1\nF\nSupport of data collection for any UE\n16.4.0\n2020-07\nSP#88E\nSP-200431\n0155\n2\nF\nClarification on UE mobility analytics exposed to AF\n16.4.0\n2020-07\nSP#88E\nSP-200431\n0156\n1\nF\nAbnormal analytics clarifications (not any UE related)\n16.4.0\n2020-07\nSP#88E\nSP-200431\n0158\n1\nF\nClarification on Event and Analytics Filters for some analytics types\n16.4.0\n2020-07\nSP#88E\nSP-200431\n0159\n-\nF\nThe term MoS to apply for all kind of services\n16.4.0\n2020-07\nSP#88E\nSP-200431\n0160\n1\nF\nFurther corrections to Observed Service Experience analytics\n16.4.0\n2020-07\nSP#88E\nSP-200431\n0161\n1\nF\nClarifications on procedures for analytics exposure\n16.4.0\n2020-07\nSP#88E\nSP-200431\n0162\n1\nF\nClarifications on procedures for data collection\n16.4.0\n2020-07\nSP#88E\nSP-200431\n0163\n1\nF\nFurther clarifications on abnormal behaviour related network data analytics\n16.4.0\n2020-07\nSP#88E\nSP-200431\n0165\n1\nF\nClarification for the Network Performance analytics\n16.4.0\n2020-07\nSP#88E\nSP-200431\n0166\n1\nF\nUpdates of data collection for slice service experience\n16.4.0\n2020-07\nSP#88E\nSP-200431\n0167\n1\nF\nCorrections related to external UE ID\n16.4.0\n2020-07\nSP#88E\nSP-200431\n0168\n-\nF\nGeneral clean-up for output abnormal behaviour analytics\n16.4.0\n2020-07\nSP#88E\nSP-200431\n0169\n-\nF\nRemoving service provider actions for exception ID ping-ponging across neighbouring cells\n16.4.0\n2020-07\nSP#88E\nSP-200431\n0170\n1\nF\nUpdated Event IDs for analytics\n16.4.0\n2020-07\nSP#88E\nSP-200431\n0172\n1\nF\nCorrections to Nnwdaf service operations\n16.4.0\n2020-07\nSP#88E\nSP-200431\n0173\n1\nF\nAdding UDM and OAM as consumers of services provided by NWDAF\n16.4.0\n2020-07\nSP#88E\nSP-200431\n0176\n1\nF\nCorrections for maximum number of objects and Maximum number of SUPIs\n16.4.0\n2020-09\nSP#89E\nSP-200679\n0177\n1\nF\nService experience analytics discrimination\n16.5.0\n2020-09\nSP#89E\nSP-200679\n0178\n-\nF\nCorrections for wrong references for TS 28.532 clauses\n16.5.0\n2020-09\nSP#89E\nSP-200679\n0179\n-\nF\nClarification on Target of Event Reporting\n16.5.0\n2020-09\nSP#89E\nSP-200679\n0181\n2\nF\nClarification on Analytics Exposure\n16.5.0\n2020-09\nSP#89E\nSP-200679\n0182\n1\nF\nClarification on data collection for statistics\n16.5.0\n2020-09\nSP#89E\nSP-200679\n0183\n1\nF\nClarification on mapping of expected analytics type and Exception IDs\n16.5.0\n2020-09\nSP#89E\nSP-200679\n0184\n1\nF\nClarification on NWDAF identifying the AF to collect data for an Event\n16.5.0\n2020-09\nSP#89E\nSP-200679\n0186\n1\nF\nClarification on Multiple Parameter Sets for QoS Sustainability\n16.5.0\n2020-12\nSP#90E\nSP-200957\n0188\n1\nF\nClarifications for Charging function as NWDAF consumer\n16.6.0\n2021-03\nSP#90E\nSP-210246\n0192\n-\nF\nCorrect wrong reference\n16.7.0\n2021-03\nSP#90E\nSP-210246\n0199\n1\nF\nUE location in the AMF\n16.7.0\n2021-03\nSP#90E\nSP-210070\n0193\n1\nB\nAnalytics ID UE communication and Observed Service Experience Extension to Support Application Related Analytics for RFSP Policy\n17.0.0\n2021-03\nSP#90E\nSP-210070\n0194\n2\nB\nDispersion Analytics\n17.0.0\n2021-03\nSP#90E\nSP-210070\n0195\n1\nB\nPersistent Data Collection\n17.0.0\n2021-03\nSP#90E\nSP-210070\n0196\n1\nC\nExtending Observed Service Experience related network data analytics with cell energy saving state to Support UP path selection enhancement\n17.0.0\n2021-03\nSP#90E\nSP-210070\n0197\n1\nB\nAdding a new analytics WLAN performance\n17.0.0\n2021-03\nSP#90E\nSP-210070\n0198\n1\nB\nAdding Analytics IDs\n17.0.0\n2021-03\nSP#90E\nSP-210070\n0200\n1\nB\nExtensions to User Data Congestion Analytics\n17.0.0\n2021-03\nSP#90E\nSP-210070\n0201\n1\nC\nKI#4: Slice load level related network data analytics\n17.0.0\n2021-03\nSP#90E\nSP-210070\n0202\n1\nC\nKI#4: Additional consumer NFs for service experience analytics\n17.0.0\n2021-03\nSP#90E\nSP-210070\n0203\n1\nC\nNetwork slice information from OAM\n17.0.0\n2021-03\nSP#90E\nSP-210070\n0204\n1\nC\nUE Communication analytics updates for user plane optimization\n17.0.0\n2021-03\nSP#90E\nSP-210070\n0205\n1\nB\nNWDAF decomposition\n17.0.0\n2021-03\nSP#90E\nSP-210070\n0206\n1\nB\nNWDAF - Data repository function\n17.0.0\n2021-03\nSP#90E\nSP-210070\n0207\n1\nB\nProcedure for Multiple NWDAF Analytics aggregation\n17.0.0\n2021-03\nSP#90E\nSP-210070\n0208\n1\nB\nProcedure for time coordination across multiple NWDAF instances\n17.0.0\n2021-03\nSP#90E\nSP-210070\n0209\n1\nB\nNF Load analytics enhancement\n17.0.0\n2021-03\nSP#90E\nSP-210070\n0210\n1\nB\nSession Management Congestion Control Experience Analytics\n17.0.0\n2021-03\nSP#90E\nSP-210070\n0211\n1\nB\nAdding the new analytics Redundant Transmission Experience\n17.0.0\n2021-03\nSP#90E\nSP-210070\n0212\n1\nC\nExtension of the existing analytics, UE Mobility\n17.0.0\n2021-03\nSP#90E\nSP-210070\n0213\n1\nB\nHierarchical Principles and Interactions on Multiple NWDAFs in TS23.288\n17.0.0\n2021-03\nSP#90E\nSP-210070\n0214\n1\nB\nPrinciples, Procedures, Services of Bulked Data Collection in TS23.288\n17.0.0\n2021-03\nSP#90E\nSP-210071\n0215\n1\nB\nImplementation of Support For Discovering and Tracking Entities in Area of Interesting in TS23.288\n17.0.0\n2021-03\nSP#90E\nSP-210071\n0216\n1\nB\nImplementation of Enhancements on Event Exposure used by NWDAF  in TS23.288\n17.0.0\n2021-03\nSP#90E\nSP-210071\n0218\n1\nB\nML Model sharing between NWDAF instances\n17.0.0\n2021-03\nSP#90E\nSP-210071\n0219\n1\nB\nAnalytics ID Service Experience Extension to Support UP path selection enhancement\n17.0.0\n2021-03\nSP#90E\nSP-210071\n0220\n1\nB\nKI#11: Update of data collection procedures\n17.0.0\n2021-03\nSP#90E\nSP-210071\n0221\n1\nB\nKI#1: Extension of functional descriptions for Model training logical function\n17.0.0\n2021-03\nSP#90E\nSP-210071\n0222\n1\nB\nKI#19: Procedures for ML Model provisioning and training\n17.0.0\n2021-03\nSP#90E\nSP-210071\n0223\n1\nB\nMultiple NWDAF instances architecture\n17.0.0\n2021-03\nSP#90E\nSP-210071\n0224\n1\nB\nProcedures for model sharing\n17.0.0\n2021-03\nSP#90E\nSP-210071\n0229\n1\nB\nNWDAF discovery for no AOI case\n17.0.0\n2021-03\nSP#90E\nSP-210071\n0230\n1\nB\nSupport of analytics aggregation without provision of AOI\n17.0.0\n2021-03\nSP#90E\nSP-210071\n0233\n1\nB\nSupport of DN performance analytics by NWDAF\n17.0.0\n2021-03\nSP#90E\nSP-210071\n0235\n1\nB\nDCCF and ADRF architectural changes to increasing efficiency of data collection\n17.0.0\n2021-03\nSP#90E\nSP-210071\n0236\n1\nB\nProcedures for data collection using DCCF\n17.0.0\n2021-03\nSP#90E\nSP-210071\n0237\n1\nB\nProcedures for data collection using DCCF and Messaging Framework\n17.0.0\n2021-03\nSP#90E\nSP-210071\n0238\n-\nB\nProcedures for analytics exposure using DCCF\n17.0.0\n2021-03\nSP#90E\nSP-210071\n0239\n1\nB\nProcedures for analytics exposure using DCCF and Messaging Framework\n17.0.0\n2021-03\nSP#90E\nSP-210071\n0240\n-\nB\nNWDAF usage of partitioning criteria\n17.0.0\n2021-03\nSP#90E\nSP-210071\n0241\n1\nB\nNew procedure for data collection from UE\n17.0.0\n2021-03\nSP#90E\nSP-210071\n0244\n1\nB\nIncreasing efficiency of data collection (Architecture part)\n17.0.0\n2021-03\nSP#90E\nSP-210071\n0248\n1\nB\nUpdate the procedure for Observed Service Experience related network data analytics case\n17.0.0\n2021-03\nSP#90E\nSP-210072\n0250\n1\nB\nService operations for Multiple NWDAF Analytics aggregation\n17.0.0\n2021-03\nSP#90E\nSP-210072\n0251\n1\nB\nNWDAF Reselection for Multiple NWDAF deployments - procedures\n17.0.0\n2021-03\nSP#90E\nSP-210072\n0252\n1\nB\nNWDAF Discovery and Selection for Multiple NWDAF\n17.0.0\n2021-03\nSP#90E\nSP-210072\n0255\n1\nB\nImprovements on analytics subsets, accuracy levels and ordering of results\n17.0.0\n2021-03\nSP#90E\nSP-210072\n0256\n1\nB\nNWDAF Reselection for Multiple NWDAF deployments - service operations\n17.0.0\n2021-06\nSP#92E\nSP-210348\n0243\n5\nB\nExposing UE mobility analytics for multiple NWDAFs case\n17.1.0\n2021-06\nSP#92E\nSP-210348\n0257\n1\nB\nKI#7 - Extensions to User Data Congestion Analytics\n17.1.0\n2021-06\nSP#92E\nSP-210348\n0258\n3\nB\nKI#8 - Resolving Editors note on mapping UE IP address and SUPI or GPSI\n17.1.0\n2021-06\nSP#92E\nSP-210348\n0259\n2\nB\nNWDAF registering into UDM\n17.1.0\n2021-06\nSP#92E\nSP-210348\n0260\n2\nB\nUpdating clause 5.2 for the discovery of NWDAFs\n17.1.0\n2021-06\nSP#92E\nSP-210348\n0262\n2\nB\nCR to update MTLF services to resolve ENs\n17.1.0\n2021-06\nSP#92E\nSP-210348\n0263\n1\nB\nCR to resolve ENs related to multiple MTLFs\n17.1.0\n2021-06\nSP#92E\nSP-210330\n0265\n1\nA\nDelete NSI ID via N7 interface\n17.1.0\n2021-06\nSP#92E\nSP-210350\n0266\n1\nF\nClarification on DCCF usage in non-roaming architecture\n17.1.0\n2021-06\nSP#92E\nSP-210350\n0267\n1\nF\nClarification on applying analytics subsets\n17.1.0\n2021-06\nSP#92E\nSP-210348\n0268\n1\nB\nAdding Application Status to analytics filter information\n17.1.0\n2021-06\nSP#92E\nSP-210350\n0272\n1\nD\nRemoval of Editorial Note related to Namf/Nsmf_EventExposure\n17.1.0\n2021-06\nSP#92E\nSP-210348\n0273\n1\nB\nPreferred granularity of location in analytics outputs\n17.1.0\n2021-06\nSP#92E\nSP-210348\n0274\n1\nB\nAlignments on analytics subsets, accuracy levels and ordering of results\n17.1.0\n2021-06\nSP#92E\nSP-210348\n0275\n1\nB\nUse of UE behaviour, location and communication trends for analytics optimization\n17.1.0\n2021-06\nSP#92E\nSP-210348\n0276\n1\nB\nService Experience Analytics outputs RAT Type and Frequency information\n17.1.0\n2021-06\nSP#92E\nSP-210350\n0278\n-\nF\nRemoval of analytics consumer or data consumer from the list\n17.1.0\n2021-06\nSP#92E\nSP-210350\n0280\n3\nF\nResolving EN on analytics metadata request\n17.1.0\n2021-06\nSP#92E\nSP-210350\n0282\n-\nF\nAnalytics Context Information Transfer\n17.1.0\n2021-06\nSP#92E\nSP-210350\n0283\n1\nF\nServices for Analytics Subscription Transfer\n17.1.0\n2021-06\nSP#92E\nSP-210348\n0285\n1\nB\nRemoving EN on dataset statistical properties related to analytics aggregation definitions.\n17.1.0\n2021-06\nSP#92E\nSP-210350\n0286\n4\nF\nRemoving EN on bulked data definitions and procedures.\n17.1.0\n2021-06\nSP#92E\nSP-210348\n0287\n1\nB\nRemove ENs from Event Muting Mechanisms\n17.1.0\n2021-06\nSP#92E\nSP-210348\n0288\n1\nB\nRemoval of FFS on SMF mapping of PDU sessions to TAI\n17.1.0\n2021-06\nSP#92E\nSP-210348\n0289\n2\nB\nRemoval of EN related to network slice association information in TS 23.288.\n17.1.0\n2021-06\nSP#92E\nSP-210348\n0290\n1\nB\nAlignment of NWDAF discovery of data exposure capability in TS 23.288.\n17.1.0\n2021-06\nSP#92E\nSP-210348\n0291\n4\nB\nNWDAF discovery and selection based on ML Model information\n17.1.0\n2021-06\nSP#92E\nSP-210348\n0293\n4\nB\nAdd bandwidth into Dispersion analytics per slice\n17.1.0\n2021-06\nSP#92E\nSP-210350\n0295\n1\nC\nImprove the accuracy of the analytics ouput based on Abnormal Behaviour analytics interactions between NWDAFs\n17.1.0\n2021-06\nSP#92E\nSP-210348\n0297\n1\nB\nClarification on MTLF determining when further training is required\n17.1.0\n2021-06\nSP#92E\nSP-210350\n0299\n4\nF\nResolve ENs for clause 6.1A.3.2\n17.1.0\n2021-06\nSP#92E\nSP-210350\n0300\n3\nF\nData collection within AoI for specific UEs\n17.1.0\n2021-06\nSP#92E\nSP-210350\n0304\n5\nF\nMiscellaneous correction(s)\n17.1.0\n2021-06\nSP#92E\nSP-210348\n0305\n3\nB\nDefinition of Nnwdaf_MLModelInfo_Request procedure and services\n17.1.0\n2021-06\nSP#92E\nSP-210348\n0306\n2\nB\nADRF functional description\n17.1.0\n2021-06\nSP#92E\nSP-210348\n0307\n-\nB\nEditor's note resolution for data and analytics collection via messaging framework\n17.1.0\n2021-06\nSP#92E\nSP-210573\n0308\n4\nB\nDCCF services definition\n17.1.0\n2021-06\nSP#92E\nSP-210349\n0309\n-\nB\nMFAF services definition\n17.1.0\n2021-06\nSP#92E\nSP-210349\n0310\n1\nB\nData collection profile parameters\n17.1.0\n2021-06\nSP#92E\nSP-210349\n0311\n1\nB\nClarify the procedure for exposing Service Experience to a MEC\n17.1.0\n2021-06\nSP#92E\nSP-210349\n0315\n1\nB\nUpdate the procedure for Data Collection from NWDAF\n17.1.0\n2021-06\nSP#92E\nSP-210349\n0318\n4\nB\nUpdate to NF Load Analytics\n17.1.0\n2021-06\nSP#92E\nSP-210349\n0319\n1\nB\nUpdate to time coordination across multiple NWDAF instances\n17.1.0\n2021-06\nSP#92E\nSP-210350\n0320\n-\nC\nCorrelation ID for transfer of analytics subscription\n17.1.0\n2021-06\nSP#92E\nSP-210349\n0322\n1\nB\nAnalytics aggregation - EN resolutions\n17.1.0\n2021-06\nSP#92E\nSP-210349\n0323\n-\nB\nAnalytics aggregation - analytics metadata provisioning\n17.1.0\n2021-06\nSP#92E\nSP-210349\n0324\n1\nB\nAnalytics aggregation - analytics metadata content\n17.1.0\n2021-06\nSP#92E\nSP-210349\n0326\n3\nB\nUser Data congestion analytics update\n17.1.0\n2021-06\nSP#92E\nSP-210349\n0329\n-\nB\nAnalytics transfer service operations\n17.1.0\n2021-06\nSP#92E\nSP-210349\n0330\n3\nB\nExtension of Naf_EventExposure for observed service experience data collection from UEs\n17.1.0\n2021-06\nSP#92E\nSP-210333\n0334\n1\nA\nClarification on output parameters in OSE\n17.1.0\n2021-06\nSP#92E\nSP-210349\n0336\n1\nB\nData collection from UE Application\n17.1.0\n2021-06\nSP#92E\nSP-210349\n0337\n1\nB\nMapping UE IP address and GPSI\n17.1.0\n2021-06\nSP#92E\nSP-210349\n0338\n1\nB\nUser consent to data collection and analytics\n17.1.0\n2021-06\nSP#92E\nSP-210350\n0341\n1\nF\nAdding clarifications related to the Supported Analytic Delay\n17.1.0\n2021-06\nSP#92E\nSP-210349\n0342\n-\nB\nDispersion Analytics and DN Performance Analytics to Table 7.1-2\n17.1.0\n2021-06\nSP#92E\nSP-210349\n0343\n1\nB\nAddition of sets of NWDAF identifiers involved in analytics aggregation\n17.1.0\n2021-06\nSP#92E\nSP-210350\n0348\n1\nF\nUpdate to slice load analytics procedure\n17.1.0\n2021-06\nSP#92E\nSP-210349\n0351\n1\nB\nRemoval of FFS Clause 6.2.2.1 on determining data sources in area of interest\n17.1.0\n2021-06\nSP#92E\nSP-210350\n0352\n1\nF\nClarification on data storage in ADRF\n17.1.0\n2021-06\nSP#92E\nSP-210350\n0353\n1\nF\nAnalytics Subscription Transfer for aggregator NWDAF\n17.1.0\n2021-06\nSP#92E\nSP-210349\n0355\n1\nB\nClarification on the NWDAF decomposition\n17.1.0\n2021-06\nSP#92E\nSP-210349\n0356\n1\nB\nAnalytics request to collect data from UE for any UE\n17.1.0\n2021-06\nSP#92E\nSP-210349\n0359\n-\nB\nUpdate to Contents of Analytics Exposure\n17.1.0\n2021-06\nSP#92E\nSP-210349\n0360\n1\nB\nUpdate to NF Load Analytics Output data\n17.1.0\n2021-06\nSP#92E\nSP-210349\n0361\n1\nB\nUpdate to UE Data Collection\n17.1.0\n2021-06\nSP#92E\nSP-210349\n0362\n1\nB\nML Model Provisioning filter information\n17.1.0\n2021-06\nSP#92E\nSP-210350\n0363\n1\nF\nClarification of Application Server address within Analytics Filter information in DN Performance Analytics\n17.1.0\n2021-06\nSP#92E\nSP-210350\n0364\n1\nF\nClarification of Application Server address within Analytics Filter information in Service Experience Analytics\n17.1.0\n2021-06\nSP#92E\nSP-210350\n0366\n1\nF\nCorrection to UE communication analytics for PDU session inactivity timer\n17.1.0\n2021-06\nSP#92E\nSP-210350\n0368\n1\nF\nDispersion analytics update\n17.1.0\n2021-06\nSP#92E\nSP-210349\n0369\n1\nB\nProcessing and Processing Instructions\n17.1.0\n2021-06\nSP#92E\nSP-210350\n0370\n1\nB\nAnalytics Data Repository procedures and Historical Data Handling procedure\n17.1.0\n2021-06\nSP#92E\nSP-210350\n0371\n-\nB\nProcedure for data removal from ADRF\n17.1.0\n2021-06\nSP#92E\nSP-210350\n0372\n-\nF\nAlignment with ADRF functional description and ADRF service operations\n17.1.0\n2021-06\nSP#92E\nSP-210350\n0374\n1\nB\nProcedure for Historical Data and Analytics Storage via Notifications\n17.1.0\n2021-09\nSP#93E\nSP-210921\n0377\n1\nF\nResolving editor's notes for references to NWDAF services and cleanup for call flows\n17.2.0\n2021-09\nSP#93E\nSP-210921\n0378\n-\nF\nDCCF for data collection from applications in the UE\n17.2.0\n2021-09\nSP#93E\nSP-210921\n0379\n1\nF\nADRF ID in Nmfaf_3daDataManagement_Configure service operation\n17.2.0\n2021-09\nSP#93E\nSP-210922\n0381\n1\nB\nKI#15 - User consent\n17.2.0\n2021-09\nSP#93E\nSP-210921\n0382\n1\nB\nCollection of input data for Analytics ID Load level information\n17.2.0\n2021-09\nSP#93E\nSP-210921\n0383\n1\nC\nDefines the Analytics Context identifiers\n17.2.0\n2021-09\nSP#93E\nSP-210921\n0384\n1\nC\nUpdates to Analytics Context information\n17.2.0\n2021-09\nSP#93E\nSP-210921\n0385\n1\nC\nUpdates for Analytics Context Information Transfer\n17.2.0\n2021-09\nSP#93E\nSP-210921\n0386\n1\nF\nNWDAF procedures for Analytics transfer update\n17.2.0\n2021-09\nSP#93E\nSP-210921\n0387\n1\nB\nNWDAF selection including transfer of Analytics context\n17.2.0\n2021-09\nSP#93E\nSP-210921\n0388\n1\nC\nNWDAF re-selection for Multiple NWDAF deployments - procedures -update\n17.2.0\n2021-09\nSP#93E\nSP-210921\n0389\n1\nF\nData collection from AF support for internal group ID\n17.2.0\n2021-09\nSP#93E\nSP-210921\n0390\n-\nF\nEditorial fix in clause 5.2\n17.2.0\n2021-09\nSP#93E\nSP-210921\n0393\n-\nC\nUpdate to Suspicion of DDoS attack\n17.2.0\n2021-09\nSP#93E\nSP-210921\n0394\n1\nC\nApplication ID - an optional input in Dispersion Analytics\n17.2.0\n2021-09\nSP#93E\nSP-210921\n0395\n-\nF\nCorrection to reference descriptions for slice load level analytics\n17.2.0\n2021-09\nSP#93E\nSP-210921\n0396\n-\nB\nRemoving EN on Frequency in OSE\n17.2.0\n2021-09\nSP#93E\nSP-210907\n0398\n1\nA\nClarify the data source of UE behavioural information and expected UE behavioural parameters\n17.2.0\n2021-09\nSP#93E\nSP-210921\n0400\nF\nRemove the FFS on how to remove the noise data by the abnormal UE list\n17.2.0\n2021-09\nSP#93E\nSP-210921\n0401\n1\nF\nAlignment of the ML Model subscription and ML Model request\n17.2.0\n2021-09\nSP#93E\nSP-210921\n0404\n1\nF\nClarify the Analytics Filter Information of the ML Model provisioning\n17.2.0\n2021-09\nSP#93E\nSP-210921\n0406\n1\nF\nUpdate to analytics summary table\n17.2.0\n2021-09\nSP#93E\nSP-210922\n0407\n1\nF\nCorrection for slice restrictions information\n17.2.0\n2021-09\nSP#93E\nSP-210921\n0409\n1\nF\nCorrection to Annex A reference\n17.2.0\n2021-09\nSP#93E\nSP-210921\n0410\n1\nF\nResolve EN on how the level of accuracy can be derived for analytics reports\n17.2.0\n2021-09\nSP#93E\nSP-210921\n0411\n1\nF\nCorrection to NWDAF Data management service operation\n17.2.0\n2021-09\nSP#93E\nSP-210921\n0412\n-\nF\nCorrection in General description of DN Performance Analytics\n17.2.0\n2021-09\nSP#93E\nSP-210921\n0414\n1\nF\nCorrections and clarifications related to analytics subscription transfer\n17.2.0\n2021-09\nSP#93E\nSP-210921\n0417\n1\nF\nCorrections related to analytics aggregation\n17.2.0\n2021-09\nSP#93E\nSP-210921\n0421\n1\nF\nClarification on the usage of Supported Analytics Delay when the NWDAF also supports Analytics Aggregation\n17.2.0\n2021-09\nSP#93E\nSP-210922\n0424\n-\nF\nClarification on Analytics Subscription Transfer\n17.2.0\n2021-09\nSP#93E\nSP-210922\n0426\n1\nF\nMapping information update in UE data collection procedure\n17.2.0\n2021-09\nSP#93E\nSP-210922\n0427\n2\nF\nMiscellaneous correction for TS 23.288\n17.2.0\n2021-09\nSP#93E\nSP-210922\n0428\n1\nF\nUpdate description for AF registration to the NRF in TS 23.288\n17.2.0\n2021-09\nSP#93E\nSP-210922\n0429\n1\nF\nClarifying that some data types for a specific UE collected from OAM via MDT\n17.2.0\n2021-09\nSP#93E\nSP-210922\n0430\n2\nF\nClarify and complement the data source for data collection for NWDAF containing MTLF\n17.2.0\n2021-09\nSP#93E\nSP-210922\n0431\n1\nF\nClarification about the Application ID in the NF profile for AF registration to the NRF\n17.2.0\n2021-09\nSP#93E\nSP-210922\n0432\n1\nF\nML Model storage alignment\n17.2.0\n2021-09\nSP#93E\nSP-210922\n0433\n-\nF\nClarification on the NWDAF or AF triggered mapping procedure\n17.2.0\n2021-09\nSP#93E\nSP-210922\n0434\n1\nF\nRemoval of EASDF\n17.2.0\n2021-12\nSP#94E\nSP-211292\n0437\n1\nF\nAdd mute to DataManagement service\n17.3.0\n2021-12\nSP#94E\nSP-211292\n0438\n1\nF\nCorrecting inconsistencies for analytics transfer\n17.3.0\n2021-12\nSP#94E\nSP-211292\n0439\n1\nF\nUDM-based discovery of NWDAF in Analytics Aggregation procedure\n17.3.0\n2021-12\nSP#94E\nSP-211292\n0441\n-\nF\nAlignment of NWDAF services Example Consumers with corresponding procedures\n17.3.0\n2021-12\nSP#94E\nSP-211292\n0443\n1\nF\nClarify the OSE analytics per RAT type and/or per Frequency\n17.3.0\n2021-12\nSP#94E\nSP-211292\n0444\n1\nF\nAlignment and corrections related to accuracy, confidence and normative wording in notes\n17.3.0\n2021-12\nSP#94E\nSP-211292\n0445\n1\nF\nAlignment, clarifications, corrections related to KI#2 and KI#11\n17.3.0\n2021-12\nSP#94E\nSP-211292\n0447\n1\nF\nClarification for Supported Analytics Delay when reporting mode is requested\n17.3.0\n2021-12\nSP#94E\nSP-211292\n0449\n1\nF\nClarify the Analytics target period\n17.3.0\n2021-12\nSP#94E\nSP-211292\n0450\n3\nF\nClarify the content of ML Model provisioning\n17.3.0\n2021-12\nSP#94E\nSP-211292\n0451\n1\nF\nClarify the Slice load level analytics\n17.3.0\n2021-12\nSP#94E\nSP-211292\n0453\n2\nF\nClarification on Per-UE Service Experience Request Procedure\n17.3.0\n2021-12\nSP#94E\nSP-211293\n0455\n3\nF\nRestriction for 5GC to provide UE IP address to untrusted AF\n17.3.0\n2021-12\nSP#94E\nSP-211292\n0456\n1\nF\nUpdate on Analytics context transfer and clarification on Termination Request\n17.3.0\n2021-12\nSP#94E\nSP-211292\n0457\n1\nF\nClarifications on transfer of analytics context and analytics subscription\n17.3.0\n2021-12\nSP#94E\nSP-211292\n0458\n1\nF\nClarifications on prepared analytics transfer\n17.3.0\n2021-12\nSP#94E\nSP-211292\n0459\n1\nF\nClarifications on analytics aggregation\n17.3.0\n2021-12\nSP#94E\nSP-211292\n0461\n1\nF\nClarify the NWDAF (MTLF) and NWDAF (AnLF)\n17.3.0\n2021-12\nSP#94E\nSP-211292\n0463\n3\nF\nClarify the UE aggregated mobility analytics exposure to NF\n17.3.0\n2021-12\nSP#94E\nSP-211292\n0464\n-\nF\nContent correction of user consent\n17.3.0\n2021-12\nSP#94E\nSP-211292\n0465\n1\nF\nClean up for UE data reporting procedure\n17.3.0\n2021-12\nSP#94E\nSP-211292\n0467\n3\nF\nMiscellaneous corrections for TS 23.288 on eNA_ph2\n17.3.0\n2021-12\nSP#94E\nSP-211292\n0468\n1\nF\nClarification for analytics exposure via NWDAF(hosting DCCF)\n17.3.0\n2021-12\nSP#94E\nSP-211292\n0469\n1\nF\nClarification for analytics subscription termination request\n17.3.0\n2021-12\nSP#94E\nSP-211293\n0471\n1\nF\nCorrection on NWDAF reselectioin\n17.3.0\n2021-12\nSP#94E\nSP-211275\n0474\n1\nA\nAdd the description of Wrong destination address\n17.3.0\n2021-12\nSP#94E\nSP-211293\n0475\n1\nF\nClarifications for Ndccf services and Nnwdaf_DataManagement services\n17.3.0\n2021-12\nSP#94E\nSP-211293\n0476\n1\nF\nClarify the resource usage for a network slice instance\n17.3.0\n2021-12\nSP#94E\nSP-211293\n0478\n1\nF\nClarification on external triggers and clean up the UE mobility analytics\n17.3.0\n2021-12\nSP#94E\nSP-211293\n0479\n1\nF\nClarifications for UE data collection\n17.3.0\n2021-12\nSP#94E\nSP-211293\n0480\n1\nF\nUser consent for analytics and model training\n17.3.0\n2021-12\nSP#94E\nSP-211293\n0481\n1\nF\nTerm alignment of Target of Analytics Reporting and Analytics Filter Information\n17.3.0\n2021-12\nSP#94E\nSP-211293\n0482\n1\nF\nAdding a list to enumerate NF services for enhanced procedures data collection\n17.3.0\n2021-12\nSP#94E\nSP-211293\n0484\n1\nF\nTermination request or rejection of NWDAF data managment service due to user consent not granted\n17.3.0\n2021-12\nSP#94E\nSP-211293\n0486\n1\nF\nCorrections to discovery for NWDAF containing MTLF\n17.3.0\n2021-12\nSP#94E\nSP-211293\n0490\n1\nF\nAlignment and corrections related to prepared analytics transfer\n17.3.0\n2021-12\nSP#94E\nSP-211293\n0491\n1\nF\nClarification on interaction between timers and supported analytics Delay\n17.3.0\n2021-12\nSP#94E\nSP-211293\n0492\n1\nF\nResolve normative wording in notes\n17.3.0\n2021-12\nSP#94E\nSP-211293\n0493\n1\nB\nDCCF-based user consent checking\n17.3.0\n2022-03\nSP#95E\nSP-220056\n0425\n2\nF\nUpdate of Data collection from OAM\n17.4.0\n2022-03\nSP#95E\nSP-220056\n0489\n2\nF\nClarification on including location information for OSE analytics\n17.4.0\n2022-03\nSP#95E\nSP-220056\n0494\n1\nF\nADRF ID in the analytics context between NWDAFs\n17.4.0\n2022-03\nSP#95E\nSP-220056\n0496\n-\nF\nCorrection for the figure of DN Performance Analytics\n17.4.0\n2022-03\nSP#95E\nSP-220056\n0497\n1\nF\nClarification on Dispersion Analytic for identification of Top-Heavy UEs in a location\n17.4.0\n2022-03\nSP#95E\nSP-220056\n0499\n1\nF\nClarification on identifiers used as Target of Analytics Reporting\n17.4.0\n2022-03\nSP#95E\nSP-220056\n0500\n1\nF\nCorrection on Analytics ID on Service Experience\n17.4.0\n2022-03\nSP#95E\nSP-220056\n0504\n1\nF\nClarification for Analytics Aggregation without Provision of Area of Interest\n17.4.0\n2022-03\nSP#95E\nSP-220056\n0505\n1\nF\nUpdate for the user consent checking\n17.4.0\n2022-03\nSP#95E\nSP-220056\n0506\n1\nF\nRemove the redundant content of performance data collected from SMF\n17.4.0\n2022-03\nSP#95E\nSP-220056\n0507\n-\nF\nRemove the statistics value or expected value for load level\n17.4.0\n2022-03\nSP#95E\nSP-220056\n0508\n1\nF\nClarification on UE related analytics\n17.4.0\n2022-03\nSP#95E\nSP-220056\n0509\n1\nF\nCorrection on service operation to retreive the number of UE and number of PDU session\n17.4.0\n2022-06\nSP#96\nSP-220399\n0462\n4\nF\nClarify the Redundant Transmission Experience related analytics\n17.5.0\n2022-06\nSP#96\nSP-220399\n0488\n3\nF\nClarification of transferring ML Model during analytics transfer\n17.5.0\n2022-06\nSP#96\nSP-220399\n0510\n1\nF\nClarification on historical data and analytics storage via MFAF\n17.5.0\n2022-06\nSP#96\nSP-220399\n0511\n1\nF\nAlignment and corrections on analytics subscription procedures\n17.5.0\n2022-06\nSP#96\nSP-220399\n0512\n1\nF\nInputs update for NWDAF Notify services for missing elements\n17.5.0\n2022-06\nSP#96\nSP-220399\n0513\n1\nF\nCorrection to Dispersion Analytics\n17.5.0\n2022-06\nSP#96\nSP-220399\n0515\n1\nF\nAlignment on the data collection from NSACF\n17.5.0\n2022-06\nSP#96\nSP-220399\n0517\n1\nF\nClarify the Analytics subset per different Analytics ID\n17.5.0\n2022-06\nSP#96\nSP-220399\n0518\n-\nF\nAdding UE ID to the Service Data from AF related to the Observed Service Experience\n17.5.0\n2022-06\nSP#96\nSP-220399\n0519\n1\nF\nUpdate inputs parameters for the Nadrf_DataManagement_StorageRequest service\n17.5.0\n2022-06\nSP#96\nSP-220399\n0520\n1\nF\nClarification on data collection with Event Muting Mechanism\n17.5.0\n2022-06\nSP#96\nSP-220391\n0527\n-\nA\nRemoving UDM as consumer of expected UE behavioural parameters analytics\n17.5.0\n2022-06\nSP#96\nSP-220399\n0528\n1\nF\nUpdate the Slice Load Level Analytics and DN Performance Analytics\n17.5.0\n2022-09\nSP#97E\nSP-220778\n0532\n1\nF\nClarification to Data Delivery and Data Collection via DCCF and via MFAF\n17.6.0\n2022-09\nSP#97E\nSP-220778\n0533\n1\nF\nClarification on granularity of time and location for NWDAF analytics results\n17.6.0\n2022-09\nSP#97E\nSP-220770\n0535\n1\nA\nCorrection for packet retransmission input for service experience analytics\n17.6.0\n2022-09\nSP#97E\nSP-220778\n0536\n-\nD\nCorrection on wrong reference clause number\n17.6.0\n2022-09\nSP#97E\nSP-220778\n0537\n1\nF\nAlignment of DCCF and NWDAF Data Management services and corrections to ADRF Data Management service\n17.6.0\n2022-09\nSP#97E\nSP-220778\n0538\n1\nF\nCorrections on information of previous analytics subscription\n17.6.0\n2022-09\nSP#97E\nSP-220778\n0539\n1\nF\nCorrection of wrong references to TS28.532\n17.6.0\n2022-09\nSP#97E\nSP-220778\n0540\n1\nF\nClarify the Nadrf_DataManagement_RetrievalRequest service\n17.6.0\n2022-12\nSP#98E\nSP-221070\n0546\n-\nF\nCorrections to Slice Load level Analytics ID\n17.7.0\n2022-12\nSP#98E\nSP-221070\n0547\n-\nF\nRemove the Editor's Note related to EVEX in SA4\n17.7.0\n2022-12\nSP#98E\nSP-221070\n0550\n1\nF\nFormatting and Processing Instructions related correction to Nadrf_DataManagement service\n17.7.0\n2022-12\nSP#98E\nSP-221070\n0552\n-\nF\nCorrections for time window in ADRF Nadrf_DataManagement service\n17.7.0\n2022-12\nSP#98E\nSP-221070\n0553\n1\nF\nCorrections on exposing 5GS information to untrusted AF\n17.7.0\n2022-12\nSP#98E\nSP-221255\n0596\n-\nF\nCorrection on SMCCE Analytics\n17.7.0\n2022-12\nSP#98E\nSP-221093\n0551\n1\nB\nAlignment for UPF event exposure service to NWDAF via the SMF in TS 23.288\n18.0.0\n2022-12\nSP#98E\nSP-221096\n0554\n1\nB\nTS 23.288 Enhancement to Support AI/ML Data Transfer\n18.0.0\n2022-12\nSP#98E\nSP-221139\n0558\n3\nB\nAdding Interoperability Indicator for ML Model sharing\n18.0.0\n2022-12\nSP#98E\nSP-221139\n0559\n2\nB\nMultiple ML Models for an analytics ID\n18.0.0\n2022-12\nSP#98E\nSP-221139\n0561\n1\nB\nUse case context\n18.0.0\n2022-12\nSP#98E\nSP-221139\n0565\n1\nB\nImproving the Correctness of Service Experience Predictions with Contribution Weights\n18.0.0\n2022-12\nSP#98E\nSP-221096\n0566\n2\nB\nEnhancements to Network Performance Analytics to support AIML data traffic policies\n18.0.0\n2022-12\nSP#98E\nSP-221139\n0569\n-\nB\nEnhancement on OSE for NWDAF assisting PCF in making URSP decisions\n18.0.0\n2022-12\nSP#98E\nSP-221096\n0575\n2\nB\nNWDAF updates to assist resource monitoring of AI/ML-based services\n18.0.0\n2022-12\nSP#98E\nSP-221139\n0576\n2\nB\nQoS sustainability analytics enhancement\n18.0.0\n2022-12\nSP#98E\nSP-221139\n0582\n5\nB\nFederated Learning among Multiple NWDAFs in TS 23.288\n18.0.0\n2022-12\nSP#98E\nSP-221139\n0584\n3\nB\nNWDAF-assisted application detection in TS 23.288\n18.0.0\n2022-12\nSP#98E\nSP-221139\n0595\n1\nB\nUpdate TS23.288 to Manage Event Muting Impact on NFp\n18.0.0\n2023-03\nSP#99\nSP-230054\n0555\n5\nB\nUpdates for DN performance Analytics of Group UEs\n18.1.0\n2023-03\nSP#99\nSP-230060\n0556\n2\nB\nUpdates for Model Provisioning for Analytics of Group UEs\n18.1.0\n2023-03\nSP#99\nSP-230060\n0557\n7\nB\nMonitoring of accuracy of ML Models\n18.1.0\n2023-03\nSP#99\nSP-230060\n0564\n4\nB\nAdding Accuracy Checking Capability to NWDAF Architecture\n18.1.0\n2023-03\nSP#99\nSP-230060\n0592\n2\nB\nEnhancing location analytics with finer granularity location information\n18.1.0\n2023-03\nSP#99\nSP-230060\n0602\n1\nF\nUpdate ML Model provisioning service with Interoperability Information\n18.1.0\n2023-03\nSP#99\nSP-230060\n0604\n7\nB\nSupport the Maintenance of Federated Learning Process in 5GC\n18.1.0\n2023-03\nSP#99\nSP-230060\n0606\n1\nB\nUpdates on pending notifications handling\n18.1.0\n2023-03\nSP#99\nSP-230054\n0608\n-\nB\nNetwork performance analytics\n18.1.0\n2023-03\nSP#99\nSP-230060\n0609\n-\nB\nService Experience Analytics ID\n18.1.0\n2023-03\nSP#99\nSP-230060\n0611\n1\nB\nKey Issue #3: Data and analytics exchange in roaming case\n18.1.0\n2023-03\nSP#99\nSP-230060\n0612\n1\nB\nKey Issue #9: Analytic ID that supports location accuracy estimate\n18.1.0\n2023-03\nSP#99\nSP-230039\n0614\n1\nA\nCorrections for historical analytics collection\n18.1.0\n2023-03\nSP#99\nSP-230054\n0616\n6\nB\nKI#7 - 23.288 CR for adding UE Transmission Latency Performance Analytics\n18.1.0\n2023-03\nSP#99\nSP-230054\n0622\n1\nF\nClarification on enhanced Network Performance analytics\n18.1.0\n2023-03\nSP#99\nSP-230060\n0625\n6\nB\nKI#2 Clarification on PFD Determination Analytics in TS 23.288\n18.1.0\n2023-03\nSP#99\nSP-230060\n0627\n1\nB\nKI#10 NWDAF interaction with MDAS/MDAF in TS 23.288\n18.1.0\n2023-03\nSP#99\nSP-230060\n0628\n11\nC\nUpdate for Federated Learning among Multiple NWDAFs in TS 23.288\n18.1.0\n2023-03\nSP#99\nSP-230060\n0630\n4\nB\neNA_Ph3 DCCF relocation in TS 23.288\n18.1.0\n2023-03\nSP#99\nSP-230060\n0631\n8\nB\nQoS sustainability analytics with fine granularity enhancement\n18.1.0\n2023-03\nSP#99\nSP-230060\n0633\n2\nB\nEnhancements on QoS Sustainability analytics\n18.1.0\n2023-03\nSP#99\nSP-230060\n0634\n4\nB\nEnhance NWDAF to enable Federated Learning\n18.1.0\n2023-03\nSP#99\nSP-230060\n0635\n1\nB\nTS 23.288 enhancements for model sharing.\n18.1.0\n2023-03\nSP#99\nSP-230060\n0636\n1\nB\nRoaming architecture for data or analytics exchange\n18.1.0\n2023-03\nSP#99\nSP-230060\n0637\n7\nB\nAnalytics/ML Model Accuracy Monitoring Functional Description\n18.1.0\n2023-03\nSP#99\nSP-230060\n0640\n1\nB\nUpdate on Multiple ML Models for an analytics ID\n18.1.0\n2023-03\nSP#99\nSP-230061\n0641\n8\nB\nML Model storage and retrieval via ADRF\n18.1.0\n2023-03\nSP#99\nSP-230061\n0645\n3\nB\nKI#4 Optimization on the collection and reporting of network data\n18.1.0\n2023-03\nSP#99\nSP-230061\n0646\n1\nB\nNWDAF data collection from LCS system\n18.1.0\n2023-03\nSP#99\nSP-230061\n0647\n1\nB\nEnhancements to Analytics Reporting Information and NWDAF output\n18.1.0\n2023-03\nSP#99\nSP-230061\n0651\n5\nB\nRelative Proximity Analytics\n18.1.0\n2023-03\nSP#99\nSP-230061\n0653\n1\nB\nUE Mobility analytics enhancement\n18.1.0\n2023-03\nSP#99\nSP-230061\n0658\n4\nB\nKI#1: Update for supporting analytics feedback\n18.1.0\n2023-03\nSP#99\nSP-230065\n0665\n3\nB\nNWDAF analytics to detect URSP enforcement\n18.1.0\n2023-03\nSP#99\nSP-230061\n0666\n3\nB\nNWDAF discovery and selection for an NWDAF supporting MTLF with FL capability\n18.1.0\n2023-03\nSP#99\nSP-230061\n0669\n-\nC\nOptimizing data collection and storage by NWDAF registration in UDM for all Analytics IDs\n18.1.0\n2023-03\nSP#99\nSP-230054\n0671\n1\nB\nEnhancement of Service Experience Analytics to assist federated learning operation\n18.1.0\n2023-03\nSP#99\nSP-230061\n0673\n1\nB\nProcedure for accuracy monitoring at NWDAF containing AnLF\n18.1.0\n2023-03\nSP#99\nSP-230061\n0675\n3\nB\nNew NWDAF service supporting for AnLF assisted MTLF in accuracy monitoring\n18.1.0\n2023-03\nSP#99\nSP-230054\n0677\n1\nB\nKI#7 23.288 CR for UE mobility analytics to assist FL operation\n18.1.0\n2023-03\nSP#99\nSP-230061\n0683\n1\nB\nProcedures for network data analytics in roaming\n18.1.0\n2023-03\nSP#99\nSP-230061\n0689\n8\nB\nMTLF-based ML Model Accuracy Monitoring\n18.1.0\n2023-03\nSP#99\nSP-230061\n0690\n0\nC\nData storage in ADRF using DataSetTag.\n18.1.0\n2023-03\nSP#99\nSP-230061\n0693\n1\nC\nData Storage Management\n18.1.0\n2023-03\nSP#99\nSP-230039\n0695\n-\nA\nCorrections to Data Delivery and Data Collection via DCCF and via MFAF\n18.1.0\n2023-03\nSP#99\nSP-230039\n0696\n1\nA\nCorrections on immediate notification in subscription response\n18.1.0\n2023-03\nSP#99\nSP-230039\n0697\n1\nA\nCorrections for historical analytics exposure procedures\n18.1.0\n2023-03\nSP#99\nSP-230054\n0699\n2\nB\nEnhance WLAN performance analytics for Federated Learing member selection\n18.1.0\n2023-03\nSP#99\nSP-230061\n0704\n2\nB\nAdd new parameters to Redundant Transmission Experience analytics\n18.1.0\n2023-03\nSP#99\nSP-230061\n0705\n2\nB\nUpdates on pending notifications handling by NWDAF\n18.1.0\n2023-03\nSP#99\nSP-230061\n0706\n2\nB\nSupport Model Information Exchange for Federated Learning in 5GC\n18.1.0\n2023-03\nSP#99\nSP-230061\n0707\n1\nC\nUpdate for ML Model provisioning with model identifier\n18.1.0\n2023-03\nSP#99\nSP-230061\n0714\n2\nC\nUpdates to FL procedure related to the maximum response time\n18.1.0\n2023-03\nSP#99\nSP-230062\n0721\n3\nB\nProcedure to retrieve ML Model from ADRF\n18.1.0\n2023-06\nSP#100\nSP-230467\n0598\n5\nB\nRating untrusted AF data sources\n18.2.0\n2023-05\nSP#100\nSP-230466\n0660\n1\nA\nCorrection for NEF service for correlating UE data collection and NWDAF request\n18.2.0\n2023-05\nSP#100\nSP-230467\n0662\n8\nB\nNew analytics ID for traffic flow use case\n18.2.0\n2023-05\nSP#100\nSP-230490\n0668\n3\nF\nNWDAF discovery with overlapping Serving Areas\n18.2.0\n2023-05\nSP#100\nSP-230495\n0688\n2\nC\nNWDAF access to UPF information\n18.2.0\n2023-05\nSP#100\nSP-230467\n0702\n4\nB\nAdding Data Source Information in the Contents of ML Model Provisioning\n18.2.0\n2023-05\nSP#100\nSP-230467\n0703\n2\nC\nUpdate for UE mobility analytics using fine granularity in TS 23.288\n18.2.0\n2023-05\nSP#100\nSP-230467\n0713\n4\nB\nEnhancements to analytics specific procedures for analytics exchange in roaming case\n18.2.0\n2023-05\nSP#100\nSP-230467\n0725\n1\nB\nEnhancement of NWDAF with finer granularity of location information in Observed Service Experience Analytic ID\n18.2.0\n2023-05\nSP#100\nSP-230467\n0726\n2\nC\nData Storage Management\n18.2.0\n2023-05\nSP#100\nSP-230467\n0727\n2\nC\nData storage in ADRF using DSC indicator\n18.2.0\n2023-05\nSP#100\nSP-230476\n0728\n5\nB\nKI#2- Removing Editors Note\n18.2.0\n2023-05\nSP#100\nSP-230467\n0729\n1\nC\nUpdate to ML Model storage and retrieval via ADRF\n18.2.0\n2023-05\nSP#100\nSP-230467\n0730\n-\nB\nResolving ENs in AnLF assisted ML Model accuracy monitoring\n18.2.0\n2023-05\nSP#100\nSP-230467\n0732\n1\nF\nSolving EN in the Procedure for Maintaining Federated Learning\n18.2.0\n2023-05\nSP#100\nSP-230457\n0734\n-\nF\nUpdate to the Input of E2E Data Volumn Transfer Time Analytics\n18.2.0\n2023-05\nSP#100\nSP-230457\n0736\n1\nC\nOAM input Corrections and EN addition\n18.2.0\n2023-05\nSP#100\nSP-230467\n0737\n1\nC\nTimestamp of action taken by analytics consumer\n18.2.0\n2023-05\nSP#100\nSP-230467\n0742\n6\nB\nAddressing ENs in location analytics with finer granularity location information\n18.2.0\n2023-05\nSP#100\nSP-230467\n0743\n7\nB\nAddressing ENs on location accuracy analytics\n18.2.0\n2023-05\nSP#100\nSP-230457\n0748\n1\nB\nService data from AF for E2E data volume transfer time analytics\n18.2.0\n2023-05\nSP#100\nSP-230457\n0751\n1\nB\nResolve an EN on Which AF event can be used to collect Server location\n18.2.0\n2023-05\nSP#100\nSP-230467\n0753\n-\nB\nUpdate NWDAF Services and analytics information tables for KI#9\n18.2.0\n2023-05\nSP#100\nSP-230467\n0754\n4\nB\nClarification on data collection frequency mode in TS 23.288\n18.2.0\n2023-05\nSP#100\nSP-230467\n0755\n8\nC\nClarification on Federated Learning among Multiple NWDAFs in TS 23.288\n18.2.0\n2023-05\nSP#100\nSP-230467\n0761\n3\nB\nExtending Analytics Transfer to support also accuracy checking transfer to target NWDAF.\n18.2.0\n2023-05\nSP#100\nSP-230467\n0763\n5\nB\nRemoving Ens from AnLF Analytics Accuracy Monitoring\n18.2.0\n2023-05\nSP#100\nSP-230467\n0765\n8\nC\nService operations update to general procedure for Federated Learning between NWDAFs\n18.2.0\n2023-05\nSP#100\nSP-230467\n0767\n4\nC\nNew parameter introduced in Contents of ML Model Provisioning\n18.2.0\n2023-05\nSP#100\nSP-230467\n0768\n1\nC\nUpdate to MTLF-based ML Model Accuracy Monitoring Procedure\n18.2.0\n2023-05\nSP#100\nSP-230467\n0769\n3\nC\nGeneral clause update for ML Model(s) retireval from ADRF\n18.2.0\n2023-05\nSP#100\nSP-230468\n0770\n7\nB\nResolving editor's notes in procedures for analytics exposure in roaming case\n18.2.0\n2023-05\nSP#100\nSP-230468\n0771\n5\nC\nClarifications to Model storage and retrieval from ADRF\n18.2.0\n2023-05\nSP#100\nSP-230468\n0773\n7\nC\nUpdates for Nnwdaf_MLModelTraining service\n18.2.0\n2023-05\nSP#100\nSP-230468\n0775\n1\nC\nRoaming architecture for data or analytics exchange\n18.2.0\n2023-05\nSP#100\nSP-230457\n0776\n1\nF\nAIMLsys: KI#7 - Clarification for validity conditions of E2E data volume transfer time analytics\n18.2.0\n2023-05\nSP#100\nSP-230457\n0780\n1\nB\nClarification of N6 data collection and output enhancement for End-to-end data volume transfer\n18.2.0\n2023-05\nSP#100\nSP-230468\n0782\n7\nB\nKI#1 Clarification on the accuracy information\n18.2.0\n2023-06\nSP#100\nSP-230468\n0783\n1\nB\nKI#1 Adding the number of inferences for calculating global accuracy\n18.2.0\n2023-06\nSP#100\nSP-230466\n0785\n1\nA\nClarification for anonymization rules\n18.2.0\n2023-06\nSP#100\nSP-230468\n0787\n5\nB\nKI#1: Update of MLModelMonitor service to deliver Analytics feedback information\n18.2.0\n2023-06\nSP#100\nSP-230457\n0789\n1\nF\nUpdate to remove the EN for DN performance predictions\n18.2.0\n2023-06\nSP#100\nSP-230457\n0790\n1\nF\nUpdate the End-to-end data volume transfer time analytics\n18.2.0\n2023-06\nSP#100\nSP-230466\n0792\n-\nA\nClarifications on the Validity period\n18.2.0\n2023-06\nSP#100\nSP-230468\n0794\n3\nB\nUpdate the procedures for data exchange in roaming case\n18.2.0\n2023-06\nSP#100\nSP-230468\n0796\n-\nC\nUpdate information used for ML Model Accuracy Monitoring\n18.2.0\n2023-06\nSP#100\nSP-230468\n0800\n1\nC\nUE Mobility analytics enhancement\n18.2.0\n2023-06\nSP#100\nSP-230468\n0801\n3\nB\nProcedure for analytics collection from MDAF\n18.2.0\n2023-06\nSP#100\nSP-230468\n0802\n1\nB\nUpdate the contents of ML Model provisioning\n18.2.0\n2023-06\nSP#100\nSP-230468\n0807\n1\nB\nEnhancement of DN Performance Analytics\n18.2.0\n2023-06\nSP#100\nSP-230468\n0808\n4\nB\nUpdate of Procedures for Federated Learning\n18.2.0\n2023-06\nSP#100\nSP-230468\n0816\n5\nB\nResolving Open issues for key issue 3\n18.2.0\n2023-06\nSP#100\nSP-230468\n0817\n1\nC\nSubsets and order of results for newly defined analytics output\n18.2.0\n2023-06\nSP#100\nSP-230457\n0821\n3\nB\nNEF consumes analytic of OSE to support UE member selection\n18.2.0\n2023-06\nSP#100\nSP-230468\n0822\n2\nC\nKI#1 Removing ENs in clause 6.1.3 and 6.2E.2\n18.2.0\n2023-06\nSP#100\nSP-230468\n0823\n4\nC\nGeneral description update about FL\n18.2.0\n2023-06\nSP#100\nSP-230468\n0826\n3\nF\nPFD determination Analytics - Confidence level\n18.2.0\n2023-06\nSP#100\nSP-230468\n0827\n4\nB\nGeographical Identifier in UE Mobility analytics\n18.2.0\n2023-06\nSP#100\nSP-230468\n0830\n2\nB\nService definitions to support analytics and data exchange for roaming cases\n18.2.0\n2023-06\nSP#100\nSP-230468\n0832\n1\nC\nUpdate PFD information\n18.2.0\n2023-06\nSP#100\nSP-230469\n0835\n2\nC\nUpdate the Qos sustainability analytics\n18.2.0\n2023-06\nSP#100\nSP-230469\n0836\n2\nC\nUpdate the data collection from LCS system\n18.2.0\n2023-06\nSP#100\nSP-230469\n0839\n1\nF\nUpdate Analytics/ML Model Accuracy Monitoring Functional Description\n18.2.0\n2023-06\nSP#100\nSP-230469\n0843\n2\nB\nUpdate on NWDAF-assisted URSP\n18.2.0\n2023-09\nSP#101\nSP-230847\n0852\n-\nF\nClarification on enhanced OSE analytics\n18.3.0\n2023-09\nSP#101\nSP-230847\n0853\n1\nF\nUnifying NWDAF roaming exchange terminology and removing EN of the roaming architecture\n18.3.0\n2023-09\nSP#101\nSP-230847\n0854\n1\nF\nResolving issues in ADRF ML Model Storage services\n18.3.0\n2023-09\nSP#101\nSP-230847\n0857\n-\nF\nNumber of Inferences in Nnwdaf_MLModelMonitor_Notify service operation\n18.3.0\n2023-09\nSP#101\nSP-230847\n0862\n1\nF\nCorrections to Analytics Subset\n18.3.0\n2023-09\nSP#101\nSP-230847\n0865\n2\nF\nResolving EN on analytics and data exchange in roaming scenario\n18.3.0\n2023-09\nSP#101\nSP-230847\n0868\n1\nF\nClarifications on determining accuracy of analytics\n18.3.0\n2023-09\nSP#101\nSP-230847\n0871\n1\nF\nAnalytics Transfer Impact in ML Model Accuracy Consumption by NWDAF containing MTLF\n18.3.0\n2023-09\nSP#101\nSP-230847\n0872\n1\nF\nUpdate the DataSetTag in procedure of MTLF-based ML Model Accuracy Monitoring\n18.3.0\n2023-09\nSP#101\nSP-230847\n0874\n-\nF\nUpdate to procedure for Rating untrusted AF data sources\n18.3.0\n2023-09\nSP#101\nSP-230847\n0876\n-\nF\nCorrection to ML Model Accuracy information support\n18.3.0\n2023-09\nSP#101\nSP-230847\n0877\n-\nF\nCorrection to MLModelManagement_Delete service operation\n18.3.0\n2023-09\nSP#101\nSP-230847\n0878\n2\nF\nClarification for roaming exchange capability\n18.3.0\n2023-09\nSP#101\nSP-230847\n0879\n2\nF\nModification for ADRF ML Model storage and retrieval\n18.3.0\n2023-09\nSP#101\nSP-230847\n0880\n2\nF\nRefinement for ML Model information for KI#4\n18.3.0\n2023-09\nSP#101\nSP-230847\n0885\n1\nF\nCorrections on AnLF-assisted MTLF monitoring procedure\n18.3.0\n2023-09\nSP#101\nSP-230847\n0886\n-\nF\nCorrections on MTLF based ML Model Monitoring\n18.3.0\n2023-09\nSP#101\nSP-230847\n0894\n1\nF\nUpdate the description about Data collection profile registration\n18.3.0\n2023-09\nSP#101\nSP-230847\n0895\n-\nF\nUpdate the general description of ADRF\n18.3.0\n2023-09\nSP#101\nSP-230847\n0898\n-\nF\nRemove EN in Network Performance analytics\n18.3.0\n2023-09\nSP#101\nSP-230847\n0899\n1\nF\nEditorial changes of the parameter used for AnLF Analytics Accuracy Monitoring\n18.3.0\n2023-09\nSP#101\nSP-230847\n0905\n1\nF\nClarification on ML Model interoperability\n18.3.0\n2023-09\nSP#101\nSP-230847\n0909\n2\nF\nClarification on multiple ML Models provisioning\n18.3.0\n2023-12\nSP#102\nSP-231257\n0855\n2\nF\nClarification of federated learning procedure\n18.4.0\n2023-12\nSP#102\nSP-231257\n0869\n5\nF\nAlignment on terminology on obtaining location data from LCS\n18.4.0\n2023-12\nSP#102\nSP-231257\n0870\n3\nF\nClarifications on obtaining analytics information from MDAF\n18.4.0\n2023-12\nSP#102\nSP-231257\n0881\n3\nF\nModification to Federated Learning feature description and call flow\n18.4.0\n2023-12\nSP#102\nSP-231257\n0883\n4\nF\nUpdates for ML Model training related procedures and services\n18.4.0\n2023-12\nSP#102\nSP-231257\n0901\n2\nF\nMovement behaviour analytics updates\n18.4.0\n2023-12\nSP#102\nSP-231257\n0904\n2\nF\nCorrection on status report of FL Training\n18.4.0\n2023-12\nSP#102\nSP-231257\n0906\n4\nF\nClarification on Federated Learning between NWDAFs\n18.4.0\n2023-12\nSP#102\nSP-231257\n0911\n3\nF\nReplace the below the cell level with longitude and latitude level\n18.4.0\n2023-12\nSP#102\nSP-231275\n0914\n3\nF\nData collection from UPF\n18.4.0\n2023-12\nSP#102\nSP-231257\n0916\n2\nF\nClarification on the ML Model Metric in Federated Learning\n18.4.0\n2023-12\nSP#102\nSP-231257\n0922\n3\nF\nClarification on movement behaviour analytics\n18.4.0\n2023-12\nSP#102\nSP-231257\n0923\n2\nF\nClarification on procedure for ML Model Training\n18.4.0\n2023-12\nSP#102\nSP-231275\n0924\n2\nF\nCorrections to UPF data collection in NWDAF\n18.4.0\n2023-12\nSP#102\nSP-231257\n0925\n2\nF\nAlignment of parameters for Federated Learning operation\n18.4.0\n2023-12\nSP#102\nSP-231257\n0933\n4\nF\nCorrecting clause 6.2B.7\n18.4.0\n2023-12\nSP#102\nSP-231242\n0935\n-\nA\nWrong NF in 6.2.2.1, bullet 3\n18.4.0\n2023-12\nSP#102\nSP-231257\n0939\n3\nF\nAlignments for ML Model provisioning content and related services\n18.4.0\n2023-12\nSP#102\nSP-231257\n0943\n3\nF\nCorrections of ML Model Training Service\n18.4.0\n2023-12\nSP#102\nSP-231257\n0946\n1\nF\nClarification on registration and discovery procedure for FL\n18.4.0\n2023-12\nSP#102\nSP-231257\n0947\n1\nF\nClarification on the ML Model metric for FL\n18.4.0\n2023-12\nSP#102\nSP-231257\n0949\n2\nF\nUpdate data collected by NWDAF for location Accuracy Analytics\n18.4.0\n2023-12\nSP#102\nSP-231257\n0950\n2\nF\nAdd the velocity estimation to the input data for relative proximity analytics\n18.4.0\n2023-12\nSP#102\nSP-231257\n0953\n1\nF\nRemove EN related to parameters of Nnwdaf_RoamingData_Subscribe service operation\n18.4.0\n2023-12\nSP#102\nSP-231257\n0962\n3\nF\nCorrection on usage of untrusted AF data source rating\n18.4.0\n2023-12\nSP#102\nSP-231253\n0970\n3\nF\nUpdates to AI/ML functionality descriptions related to E2E data volume transfer time analytics\n18.4.0\n2023-12\nSP#102\nSP-231257\n0972\n2\nF\nClarification and correction on the Nnwdaf_MLModelMonitor_Notify service operation\n18.4.0\n2023-12\nSP#102\nSP-231257\n0976\n4\nF\nClarification on the analytics exposure in roaming case\n18.4.0\n2023-12\nSP#102\nSP-231258\n0978\n1\nF\nAdd Ndccf_DataManagement_Transfer service\n18.4.0\n2023-12\nSP#102\nSP-231258\n0980\n1\nF\nCorrections for Analytics Accuracy Subscription Procedures of NWDAF\n18.4.0\n2023-12\nSP#102\nSP-231258\n0985\n1\nF\nUpdate the contents of ML Model Provisioning\n18.4.0\n2023-12\nSP#102\nSP-231258\n0987\n1\nF\nUpdate Location accuracy analytics.\n18.4.0\n2023-12\nSP#102\nSP-231258\n0988\n2\nF\nCorrection to Nadrf_MLModelManagement_StorageRequest service operation\n18.4.0\n2023-12\nSP#102\nSP-231258\n0992\n2\nF\nCorrection on ML Model accuracy information\n18.4.0\n2023-12\nSP#102\nSP-231258\n0993\n2\nF\nCorrection on MTLF-based ML Model Accuracy Monitoring\n18.4.0\n2023-12\nSP#102\nSP-231258\n0994\n2\nF\nAlign and unify description on AnLF Analytics Accuracy Monitoring\n18.4.0\n2023-12\nSP#102\nSP-231258\n1003\n1\nF\nClarifications to Analytics/ML Model Accuracy Monitoring Functionality\n18.4.0\n2023-12\nSP#102\nSP-231258\n1004\n1\nF\nClarifications to Contents of Analytics exposure\n18.4.0\n2023-12\nSP#102\nSP-231258\n1016\n2\nF\nAlignments for Analytics Exposure and related services\n18.4.0\n2023-12\nSP#102\nSP-231258\n1017\n-\nF\nCorrection on procedure for ML Model Storage in ADRF\n18.4.0\n2023-12\nSP#102\nSP-231253\n1019\n4\nF\nResolve EN for end-to-end data volume transfer time analytics\n18.4.0\n2023-12\nSP#102\nSP-231258\n1020\n3\nF\nCorrections on parameters for PFD Determination\n18.4.0\n2024-03\nSP#103\nSP-240094\n0856\n3\nF\nRemoving Editor's Note of the Output of the Network Performance Analytics\n18.5.0\n2024-03\nSP#103\nSP-240099\n0903\n4\nF\nUpdate the consumer of ML Model Provisioning services\n18.5.0\n2024-03\nSP#103\nSP-240099\n0926\n2\nD\nEditorial changes to RE-NWDAF\n18.5.0\n2024-03\nSP#103\nSP-240099\n0938\n4\nF\nUse of ML Model Interoperability Indicator and Vendor ID in Discovery\n18.5.0\n2024-03\nSP#103\nSP-240099\n0945\n4\nF\nClarification on analytics collection from MDAF\n18.5.0\n2024-03\nSP#103\nSP-240099\n0951\n7\nF\nSource of the PFD contained in PFD information retrieved from UDR\n18.5.0\n2024-03\nSP#103\nSP-240099\n0967\n2\nF\nEditorial clean-up for the description of Figures and Procedures\n18.5.0\n2024-03\nSP#103\nSP-240099\n0981\n4\nF\nSolve NAT issue in UE data collection\n18.5.0\n2024-03\nSP#103\nSP-240099\n0986\n5\nF\nClarification on meaning of accuracy\n18.5.0\n2024-03\nSP#103\nSP-240099\n0996\n6\nF\nHarmonising terminology related to Accuracy\n18.5.0\n2024-03\nSP#103\nSP-240099\n1005\n2\nF\nClarifications to Analytics Exposure and data collection in Roaming Case\n18.5.0\n2024-03\nSP#103\nSP-240083\n1013\n1\nA\nAddressing EN on reference of MDA service\n18.5.0\n2024-03\nSP#103\nSP-240099\n1015\n1\nF\nClarification for ADRF discovery\n18.5.0\n2024-03\nSP#103\nSP-240094\n1022\n-\nF\nDNAI parameter removal from E2E data volume transfer time predictions\n18.5.0\n2024-03\nSP#103\nSP-240083\n1024\n1\nA\nCorrection on user consent for retrieving data stored in the ADRF/NWDAF\n18.5.0\n2024-03\nSP#103\nSP-240099\n1025\n1\nF\nCorrection on ML Model retrieval\n18.5.0\n2024-03\nSP#103\nSP-240094\n1027\n1\nF\nClarification on E2E data volume transfer time analytics\n18.5.0\n2024-03\nSP#103\nSP-240099\n1029\n1\nF\nClarification on Federated Learning between NWDAFs\n18.5.0\n2024-03\nSP#103\nSP-240099\n1030\n1\nF\nClarification on ML Model Metric in Federated Learning\n18.5.0\n2024-03\nSP#103\nSP-240099\n1031\n1\nF\nCorrections to ML Model Training\n18.5.0\n2024-03\nSP#103\nSP-240099\n1032\n1\nF\nCorrections to Analytics ID and Service operation\n18.5.0\n2024-03\nSP#103\nSP-240099\n1039\n1\nF\nClarification on output strategy in output information of analytic\n18.5.0\n2024-03\nSP#103\nSP-240099\n1040\n1\nF\nWrong reference number of other specification\n18.5.0\n2024-03\nSP#103\nSP-240099\n1041\n1\nF\nMiscellaneous corrections for TS 23.288\n18.5.0\n2024-03\nSP#103\nSP-240191\n1043\n1\nF\nClarifications on ground truth retrieval of Location Accuracy Analytics\n18.5.0\n2024-03\nSP#103\nSP-240191\n1045\n2\nF\nAdding Analytics Information in the ML Model Monitoring service\n18.5.0\n2024-03\nSP#103\nSP-240191\n1048\n1\nF\nQos related correction\n18.5.0\n2024-03\nSP#103\nSP-240191\n1049\n-\nF\nClarification on the ML Model Metric in Federated Learning\n18.5.0\n2024-03\nSP#103\nSP-240191\n1050\n1\nF\nMiscellaneous corrections\n18.5.0\n2024-03\nSP#103\nSP-240115\n1052\n1\nF\nAlignment of unclear description of 3DA Data Management Service\n18.5.0\n2024-03\nSP#103\nSP-240191\n1053\n1\nF\nAlignment of table 5A.2-1 and table 6.2.2.1-2\n18.5.0\n2024-03\nSP#103\nSP-240191\n1054\n3\nF\nClarification of analytics accuracy information\n18.5.0\n2024-03\nSP#103\nSP-240191\n1056\n1\nF\nClarification of training data in federated learning process\n18.5.0\n2024-03\nSP#103\nSP-240191\n1059\n2\nF\nCorrections related to ML model identifier\n18.5.0\n2024-03\nSP#103\nSP-240115\n1061\n2\nF\nClarification related to the information exposed by the 5GC to NSCE server\n18.5.0\n2024-03\nSP#103\nSP-240083\n1063\n1\nA\nCorrection on Data Management\n18.5.0\n2024-03\nSP#103\nSP-240115\n1064\n2\nF\nCorrection on NWDAF discovery and selection\n18.5.0\n2024-03\nSP#103\nSP-240191\n1066\n-\nF\nFL related corrections\n18.5.0\n2024-03\nSP#103\nSP-240191\n1067\n1\nF\nCorrection to the FL capability type\n18.5.0\n2024-03\nSP#103\nSP-240191\n1071\n-\nF\nAlignments for the Accuracy checking capability in TS 23.288\n18.5.0\n2024-03\nSP#103\nSP-240191\n1072\n2\nF\nModification about the Analytics Accuracy of the ML Model\n18.5.0\n2024-03\nSP#103\nSP-240094\n1074\n2\nF\nAdd KPI and references. Removal of Input Data general Note for the end-to-end data volume transfer time analytics\n18.5.0\n2024-06\nSP#104\nSP-240584\n1076\n-\nA\nWrong service operation used in prepared analytics subscription transfer\n18.6.0\n2024-06\nSP#104\nSP-240584\n1080\n2\nA\nCorrection on ML Model Provisioning with Multiple Analytics IDs and Filters\n18.6.0\n2024-06\nSP#104\nSP-240592\n1084\n3\nF\nCorrections to procedures of e2e data volume transfer time analytics\n18.6.0\n2024-06\nSP#104\nSP-240595\n1087\n1\nF\nClarification on QoS sustainability analytics\n18.6.0\n2024-06\nSP#104\nSP-240595\n1091\n2\nF\nUpdate for ML Model sharing in FL\n18.6.0\n2024-09\nSP#105\nSP-241243\n1105\n-\nF\nClarification on the consumer of ML model provisioning service operation\n18.7.0\n2024-09\nSP#105\nSP-241243\n1123\n3\nF\nAlignment on ML Model update description\n18.7.0\n2024-09\nSP#105\nSP-241243\n1140\n1\nD\nUpdating Abbreviations in TS 23.288\n18.7.0\n2024-09\nSP#105\nSP-241243\n1143\n2\nF\nCorrection NWDAF discovery and selection.\n18.7.0\n2024-12\nSP#106\nSP-241471\n1098\n5\nF\nCorrections to roaming procedures\n18.8.0\n2024-12\nSP#106\nSP-241471\n1200\n1\nF\nClarification for FL feature in R18\n18.8.0\n2024-12\nSP#106\nSP-241471\n1202\n1\nF\nClarification on the service consumers of Nnwdaf, Ndccf, Nmfaf related services\n18.8.0\n2024-12\nSP#106\nSP-241471\n1207\n-\nF\nCorrection on data collection and storage description\n18.8.0\n2024-12\nSP#106\nSP-241471\n1210\n1\nF\nCorrection on ML model Notify service\n18.8.0\n2024-12\nSP#106\nSP-241471\n1215\n1\nF\nAdd missing MFAF Services and Service operations\n18.8.0\n2024-12\nSP#106\nSP-241471\n1226\n2\nF\nClarification on update ML model in ADRF\n18.8.0\n2024-12\nSP#106\nSP-241471\n1228\n2\nD\nRemoval of 3GPP WG references in final TS\n18.8.0\n2024-12\nSP#106\nSP-241471\n1244\n1\nF\nIncorrect reference in NF load analytic\n18.8.0\n2025-03\nSP#107\nSP-250044\n1307\n-\nF\nCorrection on ML Model monitoring service operation\n18.9.0\n2025-03\nSP#107\nSP-250044\n1309\n-\nF\nImplement agreed ML Model update parameter\n18.9.0\n2025-03\nSP#107\nSP-250044\n1373\n1\nF\nSupplement of functional description of NWDAF\n18.9.0\n2025-03\nSP#107\nSP-250044\n1375\n1\nF\nML Model storage description alignment\n18.9.0\n2025-03\nSP#107\nSP-250044\n1395\n1\nF\nCorrection on accuracy monitoring description and procedure\n18.9.0",
      "chunk_type": "general",
      "cross_references": [
        "ts_23.502_clause_4.15.10",
        "clause_6.1.3",
        "clause_6.7.2",
        "clause_6.7.4",
        "clause_5.2",
        "clause_6.1",
        "clause_6.2.2.1",
        "clause_6.2",
        "table_7.1-2",
        "table_17.2.0",
        "table_5",
        "table_6.2.2.1-2",
        "ts_29.244",
        "ts_23.502",
        "ts_23.288",
        "ts_16.2",
        "ts_28.53",
        "ts_17.0",
        "ts_17.1",
        "ts_17.2",
        "ts_17.5",
        "ts_17.6",
        "ts_18.0",
        "ts_18.8"
      ]
    }
  ]
}