{
  "metadata": {
    "specification_id": "ts_23.247",
    "version": "18.8.0",
    "title": "3GPP TS 23.247",
    "file_path": "/content/drive/MyDrive/RAG_thesis/data/23_series/23247-i80/23247-i80.docx"
  },
  "export_info": {
    "export_date": "2025-07-26T09:35:41.597643",
    "total_chunks": 175
  },
  "chunks": [
    {
      "chunk_id": "ts_23.247_1",
      "section_id": "1",
      "section_title": "Scope",
      "content": "The present document specifies architectural enhancements to the 5G system using NR to support multicast and broadcast communication services, complying to the requirements in TS 22.146 [2], TS 22.246 [3] and TS 22.261 [4]. This document encompasses support for functions such as how to deliver multicast and broadcast communications including support within certain location areas, mobility, MBS session management, policy control and QoS, and support for features e.g. group message delivery.\nThe present document also covers interworking with E-UTRAN and EPC based eMBMS for Public Safety (e.g. MCX services).",
      "chunk_type": "general",
      "cross_references": [
        "ts_22.146",
        "ts_22.246",
        "ts_22.261"
      ]
    },
    {
      "chunk_id": "ts_23.247_2",
      "section_id": "2",
      "section_title": "References",
      "content": "The following documents contain provisions which, through reference in this text, constitute provisions of the present document.\n-\tReferences are either specific (identified by date of publication, edition number, version number, etc.) or non‑specific.\n-\tFor a specific reference, subsequent revisions do not apply.\n-\tFor a non-specific reference, the latest version applies. In the case of a reference to a 3GPP document (including a GSM document), a non-specific reference implicitly refers to the latest version of that document in the same Release as the present document.\n[1]\t3GPP TR 21.905: \"Vocabulary for 3GPP Specifications\".\n[2]\t3GPP TS 22.146: \"Multimedia Broadcast/Multicast Service (MBMS); Stage 1\".\n[3]\t3GPP TS 22.246: \"Multimedia Broadcast/Multicast Service (MBMS) user services; Stage 1\".\n[4]\t3GPP TS 22.261: \"Service requirements for the 5G system\".\n[5]\t3GPP TS 23.501: \"System architecture for the 5G System (5GS)\".\n[6]\t3GPP TS 23.502: \"Procedures for the 5G System; Stage 2\".\n[7]\t3GPP TS 23.503: \"Policy and charging control framework for the 5G System (5GS); Stage 2\".\n[8]\t3GPP TS 23.246: \"Multimedia Broadcast/Multicast Service (MBMS); Architecture and functional description\".\n[9]\t3GPP TS 38.300: \"NR; Overall description; Stage-2\".\n[10]\t3GPP TS 23.468: \"Group Communication System Enablers for LTE (GCSE_LTE)\".\n[11]\t3GPP TS 26.348: \"Northbound Application Programming Interface (API) for Multimedia Broadcast/Multicast Service (MBMS) at the xMB reference point\".\n[12]\t3GPP TS 23.003: \"Numbering, Addressing and Identification\".\n[13]\tVoid.\n[14]\tVoid.\n[15]\t3GPP TS 38.413: \"NG Application Protocol (NGAP)\".\n[16]\t3GPP TS 38.401: \"NG-RAN; Architecture description\".\n[17]\t3GPP TS 29.244: \"Interface between the Control Plane and the User Plane Nodes; Stage 3\".\n[18]\t3GPP TS 26.502: \"5G Multicast-Broadcast User Service Architecture\".\n[19]\t3GPP TS 29.510: \"Network Function Repository Services; Stage 3\".\n[20]\t3GPP TS 33.501: \"Security architecture and procedures for 5G system\".\n[21]\t3GPP TS 23.289: \"Mission Critical services over 5G System; Stage 2\".\n[22]\t3GPP TS 26.517: \"5G Multicast-Broadcast User Services; Protocols and Formats\".\n[23]\t3GPP TS 29.281: \"General Packet Radio System (GPRS) Tunnelling Protocol; User Plane (GTPv1-U)\".\n[24]\t3GPP TS 38.423: \"NG-RAN; Xn Application Protocol (XnAP)\".\n[25]\t3GPP TS 24.501: \"Non-Access-Stratum (NAS) protocol for 5G System (5GS); Stage 3\".\n[26]\t3GPP TS 24.575: \"5G System; Multicast/Broadcast UE pre-configuration; Management Object (MO)\".\n[27]\t3GPP TS 23.379: \"Functional architecture and information flows to support Mission Critical Push To Talk (MCPTT); Stage 2\".\n[28]\t3GPP TS 38.331: \"NR; Radio Resource Control (RRC); Protocol specification\".\n[29]\t3GPP TS 32.255: \"5G data connectivity domain charging; Stage 2\".\n[30]\t3GPP TS 32.279: \"5G Multicast-broadcast Services charging\".\n[31]\t3GPP TS 32.240: \"Charging management; Charging architecture and principles\".\n[32]\t3GPP TS 23.527: \"5G System; Restoration Procedures\".",
      "chunk_type": "general",
      "cross_references": [
        "ts_21.905",
        "ts_22.146",
        "ts_22.246",
        "ts_22.261",
        "ts_23.501",
        "ts_23.502",
        "ts_23.503",
        "ts_23.246",
        "ts_38.300",
        "ts_23.468",
        "ts_26.348",
        "ts_23.003",
        "ts_38.413",
        "ts_38.401",
        "ts_29.244",
        "ts_26.502",
        "ts_29.510",
        "ts_33.501",
        "ts_23.289",
        "ts_26.517",
        "ts_29.281",
        "ts_38.423",
        "ts_24.501",
        "ts_24.575",
        "ts_23.379",
        "ts_38.331",
        "ts_32.255",
        "ts_32.279",
        "ts_32.240",
        "ts_23.527"
      ]
    },
    {
      "chunk_id": "ts_23.247_3.1",
      "section_id": "3.1",
      "section_title": "Terms",
      "content": "For the purposes of the present document, the terms and definitions defined in TR 21.905 [1] and the following apply:\n5GC Individual MBS traffic delivery: 5G CN receives a single copy of MBS data packets and delivers separate copies of those MBS data packets to individual UEs via per-UE PDU sessions, hence for each such UE one PDU session is required to be associated with a Multicast MBS Session.\n5GC Shared MBS traffic delivery: 5G CN receives a single copy of MBS data packets and delivers a single copy of those MBS data packets to a RAN node.\nArea Session Identifier: A unique identifier within an MBS Session used for an MBS session with location dependent content. When present, the Area Session ID, together with the TMGI, is used to uniquely identify the data flow of an MBS Session in a specific MBS service area.\nAssociated PDU Session: A PDU Session associated to a multicast MBS session that is used for 5GC Individual MBS traffic delivery method and for signalling related to a user's participation in a multicast MBS session such as join and leave requests.\nAssociated QoS Flow: A unicast QoS Flow that belongs to the associated PDU Session and is used for 5GC Individual MBS traffic delivery method. The associated QoS Flow is mapped from a multicast QoS Flow in a multicast MBS session.\nBroadcast communication service: A 5GS communication service in which the same service and the same specific content data are provided simultaneously to all UEs in a geographical area (i.e. all UEs in the broadcast coverage area are authorized to receive the data).\nNOTE 1:\tFor the broadcast communication service, the content provider and network may not be aware whether the authorized UEs are actually receiving the data being delivered.\nBroadcast MBS session: An MBS session to deliver the broadcast communication service. A broadcast MBS session is characterised by the content to send and the geographical area where to distribute it.\nBroadcast service area: The area within which data of one or multiple Broadcast MBS session(s) are sent.\nMBS QoS Flow: The finest granularity for QoS forwarding treatment for MBS data. Providing different QoS forwarding treatment requires separate MBS QoS Flows in 5GS supporting MBS.\nMBS Service Announcement: Mechanism to allow users to be informed about the available MBS services.\nMBS session: A multicast MBS session or a broadcast MBS session.\nMBS service area: The area within which data of one Multicast or Broadcast MBS session may be sent. For location dependent MBS, for each MBS service area, an Area Session ID, which is unique per MBS Session ID, is allocated and the same location dependent content data for an MBS session is delivered to the UE(s) within an MBS service area.\nMB-SMF service area: The area toward which MBS data received by any of the MB-UPF(s) controlled by the MB-SMF can be delivered. For MBS supporting NG-RAN node(s) within MB-SMF service area, MBS data are delivered via 5GC Shared MBS traffic delivery. For MBS non-supporting NG-RAN node(s) within MB-SMF service area, Multicast MBS session data are delivered via 5GC Individual MBS traffic delivery, while Broadcast MBS session data are not delivered.\nMulticast communication service: A 5GS communication service in which the same service and the same specific content data are provided simultaneously to a dedicated set of UEs (i.e. not all UEs in the coverage of the MBS service area are authorized to receive the data).\nNOTE 2:\tFor multicast communication service, the content provider and network can be aware whether the authorized UEs are actually receiving the data being delivered.\nMulticast MBS session: An MBS session to deliver the multicast communication service. A multicast MBS session is characterised by the content to send, by the list of UEs that may receive the service and optionally by a geographical area where to distribute it.",
      "chunk_type": "general",
      "cross_references": [
        "ts_21.905"
      ]
    },
    {
      "chunk_id": "ts_23.247_3.2",
      "section_id": "3.2",
      "section_title": "Abbreviations",
      "content": "For the purposes of the present document, the abbreviations given in TR 21.905 [1], TS 23.501 [5] and the following apply. An abbreviation defined in the present document takes precedence over the definition of the same abbreviation, if any, in TR 21.905 [1].\nAL FEC\tApplication Level FEC\nCDN\tContent Delivery Network\nFEC\tForward Error Correction\nFSA\tFrequency Selection Area\nLL SSM\tLower Layer SSM\nMBMS\tMultimedia Broadcast/Multicast Service\nMBS\tMulticast/Broadcast Service.\nMBSF\tMulticast/Broadcast Service Function.\nMBSTF\tMulticast/Broadcast Service Transport Function.\nMB-SMF\tMulticast/Broadcast Session Management Function.\nMB-UPF\tMulticast/Broadcast User Plane Function\nMSK\tMBS Service Key\nMTK\tMBS Traffic Key\nPTM\tPoint To Multipoint\nPTP\tPoint To Point\nPTW\tPaging Transmission Window\nSSM\tSource Specific IP Multicast address.\nTMGI\tTemporary Mobile Group Identity",
      "chunk_type": "general",
      "cross_references": [
        "ts_21.905",
        "ts_23.501"
      ]
    },
    {
      "chunk_id": "ts_23.247_4.1",
      "section_id": "4.1",
      "section_title": "Overview of multicast and broadcast communication",
      "content": "Multicast and Broadcast Service (MBS) is a point-to-multipoint service in which data is transmitted from a single source entity to multiple recipients, either to all users in a Broadcast service area, or to users in a multicast group as defined in TS 22.146 [2]. The corresponding types of MBS session are:\n-\tBroadcast MBS session\n-\tMulticast MBS session.\nThe MBS architecture defined in clause 5 follows the 5G System architectural principles as defined in TS 23.501 [5], enabling distribution of the MBS data from the 5GS ingress to NG-RAN node(s) and then to the UE. The MBS architecture provides:\n-\tEfficient usage of RAN and CN resources, with an emphasis on radio interface efficiency;\n-\tEfficient transport for a variety of multicast and broadcast services.\nMulticast/Broadcast Service for roaming is not supported in this release.\nInteraction between Multicast/Broadcast Service and support of deployments topologies with specific SMF Service Areas is not specified in this Release.\nNOTE 1:\tFor broadcast service over multiple MB-SMF Service Areas, mechanism of location dependent broadcast MBS Sessions is assumed to be applied.\nThe collection and reporting of MBS specific charging information are specified in TS 32.255 [29] for PDU session charging and TS 32.279 [30] for MBS session charging.\nThe MBS also provides functionalities such as local MBS service and location dependent MBS service, authorization of multicast MBS and QoS differentiation. Refer to clause 6 for more details.\nMBS traffic is delivered from a single data source (e.g. Application Service Provider) to multiple UEs. Depending on many factors, there are several delivery methods which may be used to deliver the MBS traffic in the 5GS.\nNOTE 2:\tFor clarity, delivery methods are not referred to as unicast/multicast/broadcast but as described below. The term \"unicast delivery\" refers to a mechanism by which application data and signalling between the UE and the application server are delivered using PDU Session within the 3GPP network and using individual UE and application server addresses (e.g. IP addresses) between the 3GPP network and the application server. It is not equivalent to 5GC Individual MBS traffic delivery method defined in this clause.\nBetween 5GC and NG-RAN, there are two possible delivery methods to transmit the MBS data:\n-\t5GC Individual MBS traffic delivery method: This method is only applied for multicast MBS sessions. 5GC receives a single copy of MBS data packets and delivers separate copies of those MBS data packets to individual UEs via per-UE PDU sessions, hence for each such UE one PDU session is required to be associated with a Multicast MBS session.\n-\t5GC Shared MBS traffic delivery method: This method is applied for both broadcast and multicast MBS sessions. 5GC receives a single copy of MBS data packets and delivers a single copy of those MBS packets to an NG-RAN node, which then delivers the packets to one or multiple UEs.\nThe 5GC Shared MBS traffic delivery method is required in all MBS deployments. The 5GC Individual MBS traffic delivery method is required to enable mobility when there is an NG-RAN deployment with non-homogeneous support of MBS.\nFor the Multicast MBS session, a single copy of MBS data packets received by the CN may be delivered via 5GC Individual MBS traffic delivery method for some UE(s) and via 5GC Shared MBS traffic delivery method for other UEs.\nBetween the NG-RAN and the UE, two delivery methods are available for the transmission of MBS data packets over radio interface:\n-\tPoint-to-Point (PTP) delivery method:  NG-RAN delivers separate copies of MBS data packets over radio interface to individual UE(s).\n-\tPoint-to-Multipoint (PTM) delivery method: NG-RAN delivers a single copy of MBS data packets over radio interface to multiple UEs.\nNG-RAN may use a combination of PTP/PTM to deliver an MBS data packets to UEs.\nNOTE 3:\tThe PTP and PTM delivery methods are defined in RAN WGs.\nAs depicted in the following figure, 5GC Shared MBS traffic delivery method (with PTP or PTM delivery) and 5GC Individual MBS traffic delivery method may be used at the same time for a multicast MBS session.\nFigure 4.1‑1: Delivery methods\nFor MBS broadcast communication, only 5GC Shared MBS traffic delivery method with PTM delivery is applicable.\nFor MBS multicast communication, if the NG-RAN node supports MBS, the network shall use the 5GC Shared MBS traffic delivery method for MBS data transmission.\nNOTE 4:\tThe exception is when the UE moves between NG-RAN node not supporting MBS (with 5GC Individual MBS traffic delivery method) and NG-RAN node supporting MBS, there is temporary co-existence between 5GC Shared MBS traffic delivery method and 5GC Individual MBS traffic delivery method. Refer to clause 6.3 for details.\nFor MBS multicast communication, the switching between 5GC Shared MBS traffic delivery method and 5GC Individual MBS traffic delivery method is supported. The UE mobility between RAN nodes both supporting MBS, and between a RAN node supporting MBS and a RAN node not supporting MBS is supported, for details see clause 6.3.\nFor MBS multicast communication, the switching between PTP and PTM delivery methods for 5GC Shared MBS traffic delivery shall be supported. NG-RAN is the decision point for switching between PTP and PTM delivery methods.",
      "chunk_type": "definition",
      "cross_references": [
        "clause_5",
        "clause_6",
        "clause_6.3",
        "figure_4.1",
        "ts_22.146",
        "ts_23.501",
        "ts_32.255",
        "ts_32.279"
      ]
    },
    {
      "chunk_id": "ts_23.247_4.2.1",
      "section_id": "4.2.1",
      "section_title": "Multicast data provisioning",
      "content": "An example for the sequence of phases for multicast data provisioning is described in the figure below:\nFigure 4.2.1-1: Phases of Multicast data provisioning example\nThe following phases are performed for a specific UE:\n-\tUE Session Join: UE Session Join is the process by which a UE joins an MBS Session, i.e. the UE indicates to 5GC that such UE wants to receive Multicast data identified by a specific MBS Session ID.\n-\tUE Session Leave: UE Session Leave is the process by which a UE leaves a MBS Session, i.e. the UE no longer wants to receive Multicast data identified by a specific MBS Session ID.\nThe following phases are performed for a specific service:\n-\tMBS Session Creation: It is the phase that the information of Multicast MBS session is created as described in clause 4.3. This step is optional.\n-\tService announcement: Service announcement is used to distribute information toward UEs about the service required for service reception (e.g. IP multicast address(es)) and possibly other service related parameters (e.g. service start time). This step is optional.\n-\tSession Establishment: It is the phase that Multicast MBS session is established as described in clause 4.3.\n-\tNo data receiving: It is the phase when no multicast data is received by 5GC. This step is optional.\n-\tData transfer: It is the phase when Multicast data are transferred to the UEs.\n-\tSession Release: It is the phase that the resources for Multicast MBS session is released as described in clause 4.3.\n-\tSession Deletion: It is the phase that Multicast MBS session is deleted as described in clause 4.3.\nNOTE:\tAfter session establishment, Multicast MBS session state could be switched between Active and Inactive several times, triggered by AF or User Plane event, see clause 7.2.5. 5GC further updates Multicast MBS session state towards NG-RAN nodes after Session Establishment.\nThe phase of Multicast data provisioning is illustrated with the following example of timeline:\nFigure 4.2.1-2: Multicast service timeline example",
      "chunk_type": "general",
      "cross_references": [
        "clause_4.3",
        "clause_7.2.5",
        "figure_4.2.1-1",
        "figure_4.2.1-2"
      ]
    },
    {
      "chunk_id": "ts_23.247_4.2.2",
      "section_id": "4.2.2",
      "section_title": "Broadcast data provisioning",
      "content": "An example for the phases of broadcast data provisioning is described in the figure below:\nFigure 4.2.2-1: Phases of Broadcast data provisioning\nThe following phases are performed for a specific service:\n-\tMBS Session Creation and establishment: MBS Session Creation is used by the AF to create the MBS Session towards 5GC. MBS session creation can occur in several steps (e.g. TMGI allocation, provisioning information about MBS session, request to activate the MBS session). The last step of the MBS session creation triggers resource establishment for transmitting the DL Broadcast data between 5GC and NG-RAN.\nNOTE:\tFor broadcast communication, after MBS Session Creation and Session Establishment, the established resources are not only between 5GC and NG-RAN, but also between the AF to 5GC.\n-\tService announcement: Service announcement is used to distribute information towards UEs about the service required for service reception (e.g. IP multicast address(es)) and possibly other service related parameters (e.g. service start time). This step can occur in parallel or after the MBS session configuration. However, TMGI allocation is required before. The information of the service announcement, is defined in clause 6.11.\n-\tData transfer: It is the phase when broadcast data are transferred in the air interface.\n-\tSession Release and Deletion: It is the point at which there will be no more need to transmit Broadcast data. At Session Release, the resources in 5GS are released and the broadcast MBS session is deleted.\nThe phase of Broadcast data provisioning is illustrated with the following example of timeline:\nFigure 4.2.2-2: Broadcast service timeline",
      "chunk_type": "general",
      "cross_references": [
        "clause_6.11",
        "figure_4.2.2-1",
        "figure_4.2.2-2"
      ]
    },
    {
      "chunk_id": "ts_23.247_4.3",
      "section_id": "4.3",
      "section_title": "Multicast session state model",
      "content": "The following illustrate the states for the Multicast MBS session:\n-\tConfigured state: Information about the Multicast MBS session (e.g. QoS information) is available in 5GC NFs (e.g. MB-SMF) serving the Multicast MBS session, but no User Plane resources towards NG-RAN are reserved and no MBS data can be transmitted. Only resources at MB-SMF, NEF and MB-UPF are reserved and no multicast data are transmitted. A TMGI can be allocated for the Multicast MBS session. UEs may be allowed to join (subject to authorization check and configuration), but the first accepted UE join request will trigger the Multicast MBS session establishment towards the NG-RAN and the UE, see clause 7.2.1.\nNOTE 1:\tThe SMF is not involved in the Multicast MBS session while the Multicast MBS session is in configured state.\nNOTE 2:\tThere may be several interim states in the configured state, e.g. TMGI requested, or information about the Multicast MBS session provided, but these interim states will not be specified in this release.\n-\tActive state: Multicast MBS session is established and MBS data can be transmitted to the UEs that have joined the Multicast MBS session. Radio resources for the Multicast MBS session are established. To receive multicast MBS session data, UEs that joined the Multicast MBS session shall be in CM-CONNECTED state for receiving data of the Multicast MBS session. UEs are allowed to join the Multicast MBS session (subject to authorization check). 5GC resources and radio resources for the Multicast MBS session are reserved for UEs that joined the Multicast MBS session.\nNOTE 3:\tWhen receiving the data of the Multicast MBS session, the joined UEs can be in CM-CONNECTED with RRC_INACTIVE state as defined in clause 6.17.\n-\tInactive state: Multicast MBS session is established but no MBS data is transmitted to the UEs that have joined the Multicast MBS session. Radio resources for the Multicast MBS session are released, and the UEs that joined the Multicast MBS session may be in CM-CONNECTED or CM-IDLE state. UEs are allowed to join the Multicast MBS session (subject to authorization check).\nThe following procedures are defined which result in transition of the Multicast MBS session state:\nMulticast Session Creation: The AF provides information about the Multicast MBS session and optionally requests the allocation of a TMGI, see clause 7.1.1.2 and 7.1.1.3. Alternatively, the information about the Multicast MBS session can be pre-configured in the network. The creation may indicate whether the Multicast MBS session may be established in active or inactive state and when a Multicast MBS session can become active. The AF may perform creation in several steps, e.g. to first request TMGI and then provide full information about the Multicast MBS session and allow it to be established, or to update the information whether the Multicast MBS session is to be in Active or Inactive state after establishment. Multicast MBS session state transitions from \"Start (NULL)\" to Configured state.\nNOTE 4:\tA Multicast MBS session can also be created by the operator via OAM configuration or be established without prior creation.\n-\tMulticast Session Establishment: When the join request of the first UE for the Multicast MBS session is accepted, the Multicast MBS session is established towards the NG-RAN node and the UE, see clause 7.2.1. Multicast session state transitions from \"Start (NULL)\" or Configured state to either Inactive or Active state.\n-\tMulticast Session Activation: See clause 7.2.5.2, Triggered by the 5GC, the radio resources for the Multicast MBS session are established and Multicast MBS session data starts to be transmitted to the UE. UEs in CM-IDLE state and CM-CONNECTED with RRC Inactive state that joined the Multicast MBS session are notified. Activation can be triggered by AF request or data notification from the MB-UPF. Multicast session state transitions from Inactive state to Active state.\nNOTE 5:\tThe AF could not be aware, and the NEF will not be aware, whether a session is in created or established state. An AF may therefore update the session state to request the activation of a session prior to the establishment of the session, and this will determine that the session is subsequently established in Active state when the first UE joins, but will not trigger the Multicast Session Activation state transition.\n-\tMulticast Session Deactivation: See clause 7.2.5.3. Triggered by the 5GC, the radio resources for the Multicast MBS session are released and Multicast MBS session data stops to be transmitted to the UE. Deactivation can be triggered by AF request or no reception of multicast data by the MB-UPF. Multicast session state transitions from Active to Inactive state.\n-\tMulticast Session Release: Triggered by the last UE leaving the Multicast MBS session (see clause 7.2.2.2), or Multicast Session Deletion procedure (7.1.1.4 or 7.1.1.5), the resources for the Multicast MBS session are released in both 5GC nodes and RAN nodes, see clause 7.2.2. Multicast session state transitions from Active or Inactive state to Configured.\n-\tMulticast Session Deletion: All information about the Multicast MBS session is removed from the 5GC, and the TMGI for the Multicast MBS session (if allocated during Multicast Session Configuration) is deallocated, see clause 7.1.1.4 or 7.1.1.5. The deletion may be triggered by an AF request. Multicast session state transitions from Configured, Active or Inactive state to \"End (NULL)\".\nFigure 4.3-1: Multicast session states and state transitions\nFigure 4.3-2: Multicast session states and state transitions in MB-SMF\nFigure 4.3-3: Multicast session states and state transitions in NG-RAN\nNOTE 6:\tMulticast session states and state transitions in NG-RAN is for illustration purpose, normative procedures are provided by RAN WGs.\nFigure 4.3-4: Multicast session states and state transitions in SMF",
      "chunk_type": "general",
      "cross_references": [
        "clause_7.2.1",
        "clause_6.17",
        "clause_7.1.1.2",
        "clause_7.2.5.2",
        "clause_7.2.5.3",
        "clause_7.2.2.2",
        "clause_7.2.2",
        "clause_7.1.1.4",
        "figure_4.3-1",
        "figure_4.3-2",
        "figure_4.3-3",
        "figure_4.3-4"
      ]
    },
    {
      "chunk_id": "ts_23.247_5.1",
      "section_id": "5.1",
      "section_title": "General architecture",
      "content": "Figure 5.1-1 depicts the MBS reference architecture. Service-based interfaces are used within the Control Plane. Support for interworking at reference points xMB and MB2 is described in Annex C.\nFigure 5.1-1: 5G System architecture for Multicast and Broadcast Service.\nNOTE 1:\tThe MBSF is optional and may be collocated with the NEF or AF/AS, and the MBSTF is an optional network function.\nNOTE 2:\tThe existing service-based interfaces of Nnrf, Nudm, and Nsmf are reused to support MBS. Services for the service-based interfaces of Namf, Nmbsmf, Npcf and Nnef to support MBS are specified in clause 9. Services for the Nmbsf and Nmbstf service-based interfaces to support MBS are defined in TS 26.502 [18].\nNOTE 3:\tAn MBS-enabled AF uses either Nmbsf or Nnef to interact with the MBSF.\nFigure 5.1-2 depicts the 5G system architecture for MBS using the reference point representation.\nFigure 5.1-2: 5G System architecture for Multicast and Broadcast Service in reference point representation.\nNOTE 4:\tThe existing reference points of N1, N2, N4, N5, N10, N11, N30 and N33 are enhanced to support MBS.\nNOTE 5:\tRegarding the functionalities, Nmb13, N29mb and Nmb1 are identical, Nmb5 and Nmb10 are identical, Nmb9 and N6mb are identical.\nNOTE 6:\tCharging architecture is described in TS 32.240 [31].",
      "chunk_type": "definition",
      "cross_references": [
        "clause_9",
        "figure_5.1-1",
        "figure_5.1-2",
        "ts_26.502",
        "ts_32.240"
      ]
    },
    {
      "chunk_id": "ts_23.247_5.2",
      "section_id": "5.2",
      "section_title": "General architecture for interworking with EPS",
      "content": "Interworking between MBS and eMBMS at service layer functionality applies in cases where the same Multicast/Broadcast service is provided via eMBMS and MBS. Figure 5.2-1 depicts the system architecture for interworking between E-UTRAN/EPC eMBMS and MBS at service layer, with collocated BM-SC and MBSF/MBSTF functionalities.\nFigure 5.2-1: MBS-eMBMS interworking system architecture at service layer\nThe BM-SC+MBSF/MBSTF exposes common Nmb5/Nmb10/xMB-C/MB2-C and Nmb8/xMB-U/MB2-U reference points to the NEF and/or AF/AS. A common TMGI is used towards the AF/AS. The TMGI is also used as identifier for transport over E-UTRAN/EPC. The MBSTF distributes the received data to the MB-UPF at reference point Nmb9 and/or the MBMS-GW at reference point SGi-mb, when supported by operator network configuration.\nNOTE 1:\tMB2-C/U and xMB-C/U are legacy reference points.\nNOTE 2:\tIn the case of MBSTF providing MB2-C/U, it may be used for the GCS/AS only supporting GC1 and MB2 interfaces, as defined TS 23.468 [10].",
      "chunk_type": "definition",
      "cross_references": [
        "figure_5.2-1",
        "ts_23.468"
      ]
    },
    {
      "chunk_id": "ts_23.247_5.3.0",
      "section_id": "5.3.0",
      "section_title": "Service-based interfaces",
      "content": "The 5G System Architecture for MBS contains the following service-based interfaces:\nNmbsmf:\tService-based interface exhibited by MB-SMF. Further details are described in clause 9.1.\nNpcf:\tService-based interface exhibited by PCF. Further details are described in clause 9.2.\nNamf:\tService-based interface exhibited by AMF. Further details are described in clause 9.3.\nNnef:\tService-based interface exhibited by NEF. Further details are described in clause 9.4.\nNmbsf:\tService-based interface exhibited by MBSF. Further details are described in clause 9.5.",
      "chunk_type": "general",
      "cross_references": [
        "clause_9.1",
        "clause_9.2",
        "clause_9.3",
        "clause_9.4",
        "clause_9.5"
      ]
    },
    {
      "chunk_id": "ts_23.247_5.3.1",
      "section_id": "5.3.1",
      "section_title": "Reference point",
      "content": "The 5G System Architecture for MBS contains the following new reference points:\nN3mb:\tReference point between the RAN and the MB-UPF.\nN4mb:\tReference point between the MB-SMF and the MB-UPF.\nN6mb:\tReference point between the MB-UPF and the AF/AS.\nN7mb:\tReference point between the MB-SMF and the PCF.\nN11mb:\tReference point between the AMF and the MB-SMF.\nN16mb:\tReference point between the SMF and the MB-SMF.\nN19mb:\tReference Point between the UPF and the MB-UPF.\nN29mb:\tReference point between the MB-SMF and the NEF.\nNmb1:\tReference point between the MB-SMF and the MBSF.\nNmb2:\tReference point between the MBSF and the MBSTF.\nNmb5:\tReference point between the MBSF and the NEF.\nNmb8:\tReference point between the MBSTF and the AF/AS.\nNmb9:\tReference point between the MB-UPF and the MBSTF.\nNmb10:\tReference point between the MBSF and the AF/AS.\nNmb12:\tReference point between the MBSF and the PCF.\nNmb13:\tReference point between the MB-SMF and the AF/AS.\nNmb14:\tReference point between the NEF and the MBSTF.\nN101:\tReference point between the MB-SMF and the CHF.\n5G System Architecture for MBS reuses the existing reference points of N1, N2, N4, N5, N10, N11, N30, N33 and N40 with enhancement to support MBS.",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.247_5.3.2.1",
      "section_id": "5.3.2.1",
      "section_title": "PCF",
      "content": "In addition to the functions defined in TS 23.501 [5], the PCF performs the following functions to support MBS if dynamic PCC for MBS is needed:\n-\tSupporting QoS handling for MBS Session.\n-\tProviding policy information regarding the MBS Session to MB-SMF for authorizing the related QoS profiles.\n-\tInteracting with UDR for QoS information retrieval.\n-\tThe PCF can receive MBS information from AF, NEF or MBSF, e.g. based on the different configuration options in Annex A.",
      "chunk_type": "general",
      "cross_references": [
        "ts_23.501"
      ]
    },
    {
      "chunk_id": "ts_23.247_5.3.2.2",
      "section_id": "5.3.2.2",
      "section_title": "MB-SMF",
      "content": "The MB-SMF performs the following functions to support MBS:\n-\tGeneral for Multicast and Broadcast MBS sessions:\n-\tSupporting MBS session management (including QoS control).\n-\tConfiguring the MB-UPF for multicast and broadcast data transport, based on the policy rules for multicast and broadcast services from PCF or local policy.\n-\tAllocating and de-allocating TMGIs.\n-\tSpecific for Broadcast MBS sessions:\n-\tInteracting with RAN (via AMF) to control data transport using 5GC Shared MBS traffic delivery method.\n-\tSpecific for Multicast MBS sessions:\n-\tInteracting with SMF to provide the SMF with MBS Session Context information.\n-\tInteracting with RAN (via AMF) to establish data transmission resources between MB-UPF and RAN nodes for 5GC Shared MBS traffic delivery method.\n-\tControlling the MB-UPF for multicast data transport using 5GC Individual MBS traffic delivery method.",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.247_5.3.2.3",
      "section_id": "5.3.2.3",
      "section_title": "SMF",
      "content": "In addition to the functions defined in TS 23.501 [5], the SMF performs the following functions to support MBS:\n-\tDiscovering MB-SMF for a Multicast MBS session.\n-\tAuthorizing Multicast MBS session join operation for served UEs if needed.\n-\tInteracting with MB-SMF to obtain multicast Session Context information used as input to modify the PDU Session associated with MBS session.\n-\tInteracting with RAN to provide information about a Multicast MBS session that a UE is participating in.\n-\tInteracting with RAN and UPF for multicast data transport using 5GC Individual MBS traffic delivery method.\n-\tInteracting with RAN to provide MBS Assistance Information for the MBS session.\nNOTE:\tSMF and MB-SMF may be co-located or deployed separately.",
      "chunk_type": "general",
      "cross_references": [
        "ts_23.501"
      ]
    },
    {
      "chunk_id": "ts_23.247_5.3.2.4",
      "section_id": "5.3.2.4",
      "section_title": "MB-UPF",
      "content": "The MB-UPF performs the following functions to support MBS:\n-\tGeneral for Multicast and Broadcast MBS sessions:\n-\tPacket processing of incoming downlink packets for multicast and broadcast flows.\n-\tQoS enforcement (MFBR) based on existing means.\n-\tInteraction with MB-SMF for receiving multicast and broadcast data.\n-\tDelivery of multicast and broadcast data to RAN nodes for 5GC Shared MBS traffic delivery method.\n-\tSpecific for Multicast MBS sessions:\n-\tDelivery of multicast data to UPF for 5GC Individual MBS traffic delivery method.",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.247_5.3.2.5",
      "section_id": "5.3.2.5",
      "section_title": "UPF",
      "content": "In addition to the functions defined in TS 23.501 [5], the UPF performs the following functions to support MBS:\n-\tInteracting with SMF for receiving multicast data from MB-UPF for 5GC Individual MBS traffic delivery method.\n-\tDelivering multicast data to UEs via PDU Session for 5GC Individual MBS traffic delivery method.\nNOTE:\tUPF and MB-UPF may be co-located or deployed separately.",
      "chunk_type": "general",
      "cross_references": [
        "ts_23.501"
      ]
    },
    {
      "chunk_id": "ts_23.247_5.3.2.6",
      "section_id": "5.3.2.6",
      "section_title": "AMF",
      "content": "In addition to the functions defined in TS 23.501 [5], the AMF performs the following functions to support MBS:\n-\tSignalling with NG-RAN and MB-SMF for MBS Session management.\n-\tSelection of NG-RANs for notification of multicast session activation toward UEs in CM-IDLE state.\n-\tSelection of NG-RANs for broadcast traffic distribution.\nAdditionally, AMF being aware of NG-RAN MBS capability.",
      "chunk_type": "general",
      "cross_references": [
        "ts_23.501"
      ]
    },
    {
      "chunk_id": "ts_23.247_5.3.2.7",
      "section_id": "5.3.2.7",
      "section_title": "NG-RAN",
      "content": "In addition to the functions defined in TS 23.501 [5], the NG-RAN performs the following functions to support MBS:\n-\tManagement of MBS QoS flows via N2.\n-\tDelivery of MBS data packets for multiple UEs over radio using PTM or PTP.\n-\tConfiguration of UE for MBS QoS flow reception at AS layer.\n-\tControl switching between PTM and PTP delivery per UE.\n-\tSupport for multicast session service continuity during Xn Handover and N2 Handover.\n-\tSupport group paging at multicast session activation over radio toward UEs in CM-IDLE state and CM-CONNECTED with RRC_INACTIVE state.\n-\tReception of MBS data packets from 5GC via shared MBS traffic delivery.\n-\tSupport for efficient radio resource utilization for multiple broadcast MBS Sessions via multiple CNs to deliver the same broadcast content in the case of network sharing.\n-\tIf supported, determine to move UE(s) receiving multicast MBS data from RRC_CONNECTED state to CM-CONNECTED with RRC_INACTIVE state if the UE(s) are capable of receiving MBS data in RRC_INACTIVE state.",
      "chunk_type": "general",
      "cross_references": [
        "ts_23.501"
      ]
    },
    {
      "chunk_id": "ts_23.247_5.3.2.8",
      "section_id": "5.3.2.8",
      "section_title": "UE",
      "content": "In addition to the functions defined in TS 23.501 [5], the UE may perform the following functions to support MBS:\n-\tReception of multicast data using PTM/PTP in RRC_CONNECTED state.\n-\tIf supported, reception of multicast data using PTM in RRC_INACTIVE state.\n-\tReception of broadcast data using PTM.\n-\tHandling of incoming MBS QoS flows.\n-\tSupport of signalling for joining and leaving a Multicast MBS session.\n-\tMBS resource management support at AS layer.\n-\tReception of notification in CM-IDLE state and CM-CONNECTED with RRC _INACTIVE state for multicast data transmission.\n-\tSupport of the aforementioned functions for UE using power saving functions.\nNOTE :\tUE functionality for MBS security is provided in TS 33.501 [20].",
      "chunk_type": "general",
      "cross_references": [
        "ts_23.501",
        "ts_33.501"
      ]
    },
    {
      "chunk_id": "ts_23.247_5.3.2.9",
      "section_id": "5.3.2.9",
      "section_title": "AF",
      "content": "The AF performs the following functions to support MBS:\n-\tRequesting multicast or broadcast service from the 5GC by providing service information including QoS requirement to 5GC.\n-\tInstructing MBS session operation towards 5GC if needed.\n-\tInteracting with NEF for MBS related service exposure.\n-\tInteracting with NEF for group message delivery to the UE(s).",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.247_5.3.2.10",
      "section_id": "5.3.2.10",
      "section_title": "NEF",
      "content": "In addition to the functions defined in TS 23.501 [5], the NEF performs the following functions to support MBS:\n-\tProviding an interface to AFs for MBS procedures including service provisioning, MBS session and QoS management.\n-\tInteracting with AF and NFs in 5GC, e.g. MB-SMF for MBS session operations, determination of transport parameters.\n-\tSelection of MB-SMF to serve an MBS Session.\n-\tSupport of provisioning the optional MBS Session Assistance Information related to the reception of multicast MBS data in RRC_INACTIVE state.\n-\tInteracting with AF and MBSF/MBSTF for group message delivery.",
      "chunk_type": "general",
      "cross_references": [
        "ts_23.501"
      ]
    },
    {
      "chunk_id": "ts_23.247_5.3.2.11",
      "section_id": "5.3.2.11",
      "section_title": "MBSF",
      "content": "The MBSF performs the following functions to support MBS:\n-\tService level functionality to support MBS, and interworking with LTE MBMS\n-\tInteracting with AF and MB-SMF for MBS session operations, determination of transport parameters, and session transport.\n-\tSelection of MB-SMF to serve an MBS Session.\n-\tControlling MBSTF if the MBSTF is used.\n-\tDetermination of destination IP multicast address for the MBS session if IP multicast address is sourced by MBSTF.\nNOTE 1:\tMBSF functionality related to service and MBS data handling (e.g. encoding) is specified in TS 26.502 [18].\nNOTE 2:\tMBSF functionality for MBS security is provided in TS 33.501 [20].",
      "chunk_type": "general",
      "cross_references": [
        "ts_26.502",
        "ts_33.501"
      ]
    },
    {
      "chunk_id": "ts_23.247_5.3.2.12",
      "section_id": "5.3.2.12",
      "section_title": "MBSTF",
      "content": "The MBSTF performs the following functions to support MBS if deployed:\n-\tMedia anchor for MBS data traffic if needed.\n-\tSourcing of IP Multicast if needed.\n-\tGeneric packet transport functionalities available to any IP multicast enabled application such as framing, multiple flows, packet FEC (encoding).\n-\tMulticast/broadcast delivery of input files as objects or object flows.\nNOTE 1:\tMBSTF functionality related to MBS data handling (e.g. encoding) is specified in TS 26.502 [18].\nNOTE 2:\tMBSTF functionality for MBS security is provided in TS 33.501 [20].",
      "chunk_type": "general",
      "cross_references": [
        "ts_26.502",
        "ts_33.501"
      ]
    },
    {
      "chunk_id": "ts_23.247_5.3.2.13",
      "section_id": "5.3.2.13",
      "section_title": "UDM",
      "content": "In addition to the functions defined in TS 23.501 [5], the UDM performs the following functions to support MBS:\n-\tSupport management of subscription for authorization for multicast MBS sessions.\n-\tSupport management of subscription MBS Assistance Information related to the reception of multicast MBS data in RRC_INACTIVE state.",
      "chunk_type": "general",
      "cross_references": [
        "ts_23.501"
      ]
    },
    {
      "chunk_id": "ts_23.247_5.3.2.14",
      "section_id": "5.3.2.14",
      "section_title": "UDR",
      "content": "In addition to the functions defined in TS 23.501 [5], the UDR performs the following functions to support MBS if deployed:\n-\tSupport storage or retrieval of MBS subscription data by the UDM for UE authorization information for multicast MBS sessions and MBS Assistance Information.\n-\tSupport storage and retrieval of policy data by the PCF for Multicast or Broadcast MBS sessions.",
      "chunk_type": "general",
      "cross_references": [
        "ts_23.501"
      ]
    },
    {
      "chunk_id": "ts_23.247_5.3.2.15.1",
      "section_id": "5.3.2.15.1",
      "section_title": "General",
      "content": "In addition to the functions defined in TS 23.501 [5], the NRF performs the following functions to support MBS:\n-\tSupport of new NF types MB-SMF and MBSF and their corresponding NF profiles.\n-\tFor both multicast and broadcast MBS sessions, support of MB-SMF discovery based on parameters such as DNN, S-NSSAI and MBS service area, at MBS Session creation.\n-\tFor multicast MBS sessions, support of MB-SMF discovery based on MBS Session ID by SMF serving the multicast Session at UE join.\nNOTE:\tFor broadcast MBS Session, AMF discovery by MB-SMF for an MBS service area is based on tracking area IDs related to that service area, as registered in the AMF profile according to TS 23.501 [5].",
      "chunk_type": "definition",
      "cross_references": [
        "ts_23.501"
      ]
    },
    {
      "chunk_id": "ts_23.247_5.3.2.15.2",
      "section_id": "5.3.2.15.2",
      "section_title": "Extensions to NF profile at NRF",
      "content": "In addition to the NF profile contents defined in clause 6.2.6.2 of TS 23.501 [5], the NF profile in the NRF contains the following content:\n-\tFor MB-SMF, the NF profile may include MB-SMF service area, MBS Session ID(s), Area Session ID(s) and corresponding MBS service area(s) if available.",
      "chunk_type": "general",
      "cross_references": [
        "ts_23.501_clause_6.2.6.2",
        "ts_23.501"
      ]
    },
    {
      "chunk_id": "ts_23.247_6.1.1",
      "section_id": "6.1.1",
      "section_title": "AF authorization to the service for multicast and broadcast",
      "content": "The AF should be authorized by the 5GC for delivering MBS data to the 5GC and/or interacting with the 5GC. For signalling exchange with the 5GC, the NEF perform authorization to the external AF for determination of whether the interaction with the 5GC is allowed or not.",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.247_6.1.2",
      "section_id": "6.1.2",
      "section_title": "UE authorization to the service for multicast",
      "content": "The following authorizations are defined:\na)\tWhether the UE is authorized to use the Multicast service in the PLMN.\nb)\tThe authorization for a UE of receiving the content of a specific multicast MBS session.\nA Multicast MBS session may be \"open to any UEs\".\nNOTE 1:\tUE authorization for a specific Multicast MBS session can be implicitly performed when UE is configured for a specific Multicast MBS session, e.g. via Service Announcement for public safety use case.\nNOTE 2:\tThe authorization mentioned by a) is required even if an authorization according to b) is available. If the UE is not authorized to use the Multicast service by the PLMN, the UE is not authorized to join any multicast MBS Session even if the Multicast MBS session is \"open to any UEs\".\nFor a Multicast MBS session, it is required that the 5GC authorizes the UE based on the MBS subscription data and whether the Multicast MBS session is \"open to any UEs\", which are preconfigured, or provided by the AF (see clause 7.2.9).\nThe procedure for UE authorization is a part of UE join procedure and is described in clause 7.2.1.3.",
      "chunk_type": "general",
      "cross_references": [
        "clause_7.2.9",
        "clause_7.2.1.3"
      ]
    },
    {
      "chunk_id": "ts_23.247_6.2.1",
      "section_id": "6.2.1",
      "section_title": "General",
      "content": "A Local MBS service is an MBS service provided in one MBS service area. A location dependent MBS service is an MBS service provided in several MBS service area(s). An MBS service area is identified by a cell list or a tracking area list. The MBS service area could be geographical area information or civic address information, and NEF/MBSF translates the location information to Cell ID list or TAI list as MBS service area, see clause 7.1.1.2.\nThe MBS service area may be updated by the AF for both multicast MBS sessions and broadcast MBS sessions as specified in clause 7.1.1.6.\nFor more details, refer to clause 7.2.4 for multicast MBS session and refer to clause 7.3.4 for broadcast MBS session.",
      "chunk_type": "definition",
      "cross_references": [
        "clause_7.1.1.2",
        "clause_7.1.1.6",
        "clause_7.2.4",
        "clause_7.3.4"
      ]
    },
    {
      "chunk_id": "ts_23.247_6.2.2",
      "section_id": "6.2.2",
      "section_title": "Local MBS service",
      "content": "For a local MBS service, only UEs within the MBS service area may receive content data, while UEs outside the MBS service area are not allowed to receive location specific content. For multicast MBS service, UEs outside the MBS service area are not allowed to join the MBS service, and the network shall not deliver location specific content anymore to the UEs moved out of the MBS service area. Depending on policy, for the multicast MBS service the network may remove UEs outside the MBS service area of the MBS session from the MBS Session Context after a grace period. The SMF may subscribe at the AMF to notifications about \"UE moving in or out of a subscribed \"Area Of Interest\"\" event.\nFor multicast communication, local MBS may be supported via 5GC Individual MBS traffic delivery towards RAN nodes not supporting MBS. If the SMF obtains a notification that the UE is no longer in the MBS service area, the SMF terminates the 5GC Individual MBS traffic delivery towards the UE.\nThe UE shall be able to obtain service area information of the local multicast service via MBS service announcement or via NAS signalling (UE Session Join Accept/Reject including Cell ID list or TAI list). If the UE Session Join procedure fails due to the UE being outside the MBS service area, the UE does not attempt to join the Multicast MBS session again until the UE moves inside the MBS service area. When the UE Session Join succeeds and if the Multicast MBS session is inactive, the UE does not perform monitoring the session activation notification and any other information related to the Multicast MBS session identified by an MBS Session ID over the radio if outside the MBS service area.\nNOTE 1:\tBroadcast communication service is the service provided simultaneously to all UEs in a geographical area, therefore for broadcast it is naturally a local MBS service. If the MBS Service Area consists of areas belonging to multiple MB-SMF Service Areas, the procedure for location dependent MBS Session can be used but the content is the same in all the MB-SMF service areas.\nNOTE 2:\tIn this Release, deployments topologies with specific SMF Service Areas are not supported, as a result, local MBS service over multiple SMF Service Areas (corresponding to multiple MB-SMF Service Areas) using multicast communication is not supported.",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.247_6.2.3",
      "section_id": "6.2.3",
      "section_title": "Location dependent MBS service",
      "content": "A location dependent MBS is identified by MBS Session ID, and provided in several MBS service areas. The location dependent MBS service enables distribution of different content data to different MBS service areas. The same MBS Session ID is used but a different Area Session ID is used for each MBS service area. The Area Session ID is used, in combination with MBS Session ID, to uniquely identify the service area specific part of the content data of the MBS service within 5GS. The network supports the location dependent content distribution for the location dependent MBS services, while UEs are only aware of the MBS Session ID (i.e. UEs are not required to be aware of the Area Session IDs). When UE moves to a new MBS service area, content data from the new MBS service area shall be delivered to the UE, and the network ceases to deliver the content data from the old MBS service areas to the UE. For multicast MBS service, UEs outside all MBS service areas of the location dependent MBS session are not allowed to join the MBS service. When UE moves out of an MBS service area and there is no other MBS service area for the MBS session, the network ceases to deliver the content data to the UE. Depending on policy, for the multicast MBS service the network may remove UEs outside all MBS service areas of the location dependent MBS Session from the multicast MBS Session Context after a grace period The SMF may subscribe at the AMF to notifications about UE moving in or out of all MBS service areas of the location dependent MBS session.\nFor multicast communication towards an NG-RAN supporting MBS, the NG-RAN node handles mobility of UEs within the MBS session between MBS service areas served by the same NG-RAN without interaction with SMF.\nFor multicast communication, location dependent MBS services may be supported via 5GC Individual MBS traffic delivery towards RAN nodes not supporting MBS. If the SMF determines that the UE is in another MBS service area of the Multicast MBS session, the SMF configures the UPF to send multicast data relating to the new MBS service area towards the UE.\nInformation about different MBS service areas for a location dependent MBS service may be provided by one or several AFs or may be configured. The MBS Service Information provided is specified in clause 6.14. Different ingress points for location dependent points for the MBS session are supported for different MBS service area dependent content of the MBS session; different MB-UPF may be assigned for different MBS service areas within the same MB-SMF Service Area for an MBS session.\nFor broadcast communication, if MBS service areas covering different MB-SMF Service Areas are required, different MB-SMFs should be assigned for different MB-SMF service areas for an MBS session, and in this case the MB-SMF involved in the MBS Session should be able to accept TMGI value allocated by other MB-SMF(s).\nThe Area Session ID is allocated by MB-SMF in MBS Session creation procedure. MB-SMF allocates Area Session ID for each MBS services area which is unique within the MBS session. MB-SMF needs to further ensure there is no MBS service area overlapping with other MBS service areas that share the same MBS Session ID.\nThe same QoS applies to all MBS service areas of a location dependent MBS Session.\nNOTE 1:\tIn this Release, deployments topologies with specific SMF Service Areas are not supported, as a result, location dependent service using multicast communication is not supported when a UE moves outside its SMF service area.\nNOTE 2:\tFor location dependent service provided in different MBS service areas within the same SMF service area, it is assumed that one MB-SMF is used for an MBS Session.\nNOTE 3:\tAn example of Location dependent MBS is a nationwide weather forecast service with local weather reports.\nNOTE 4:\tArea Session ID is equivalent to Flow ID as specified in TS 23.246 [8].",
      "chunk_type": "general",
      "cross_references": [
        "clause_6.14",
        "ts_23.246"
      ]
    },
    {
      "chunk_id": "ts_23.247_6.3.1",
      "section_id": "6.3.1",
      "section_title": "Mobility of Multicast MBS session",
      "content": "The mobility of multicast MBS service is supported when:\n-\tThe UE moves from a NG-RAN node that supports MBS to a target NG-RAN node that supports MBS; or\n-\tThe UE moves from a NG-RAN node that supports MBS to a target NG-RAN node that does not support MBS and vice versa.\nDuring the mobility from a NG-RAN node that supports MBS to a target NG-RAN node that supports MBS, or between a NG-RAN node that supports MBS and a target NG-RAN node that does not support MBS, minimization of data loss should be supported, see clause 7.2.3.5 for details.\nTo support Handover from NG-RAN node that supports MBS to a target NG-RAN node that supports MBS:\n-\tIf the shared delivery for the MBS session has not been established towards target NG-RAN, the target NG-RAN establishes the shared delivery for the MBS Session with MB-SMF and MB-UPF.\nTo support Handover from NG-RAN node that supports MBS to a target NG-RAN node that does not support MBS:\n-\tmapping information about unicast QoS flows for multicast data transmission and the information of associated multicast QoS flows are provided to the NG-RAN node. This is already performed during the PDU session modification procedure for the PDU session associated with the MBS session when the UE joins the MBS Session;\n-\tduring the handover procedure, the delivery method is switched from 5GC Shared MBS traffic delivery method to 5GC Individual MBS traffic delivery method, i.e. the N3 tunnel of the PDU Session for 5GC Individual MBS traffic delivery needs to be established towards the target NG-RAN node. The SMF realizes that the target NG-RAN node does not support MBS.\n-\tthe SMF and the MB-SMF shall activate the GTP tunnel between the UPF and the MB-UPF for 5GC Individual MBS traffic delivery method, if needed.\nTo support Handover from a NG-RAN node that does not support MBS to a target NG-RAN node that supports MBS:\n-\tThe PDU sessions, including the one associated with the MBS session and used for 5GC Individual MBS traffic delivery, are handed over to the target NG-RAN node.\n-\tSMF triggers mode switch, i.e. from 5GC Individual MBS traffic delivery method to 5GC shared MBS traffic delivery method.\n-  When the MBS Session Context is given to the target NG-RAN node by the SMF, if the shared delivery for the MBS session has not been established towards target NG-RAN, the target NG-RAN establishes the shared delivery for the MBS Session with MB-SMF and MB-UPF.\n-\tThe 5GC terminates the 5GC Individual MBS traffic delivery and changes to the 5GC shared MBS traffic delivery.",
      "chunk_type": "general",
      "cross_references": [
        "clause_7.2.3.5"
      ]
    },
    {
      "chunk_id": "ts_23.247_6.3.2",
      "section_id": "6.3.2",
      "section_title": "Mobility of Broadcast MBS session",
      "content": "The UE receives the same Broadcast MBS service in the target NG-RAN if the same MBS session is established with 5GC Shared MBS traffic delivery method in the target NG-RAN node.\nNOTE:\tWhen the UE moves into NG-RAN node not supporting MBS within the Broadcast MBS service area, how the UE get the same content via application level is out scope of this specification.",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.247_6.4.1",
      "section_id": "6.4.1",
      "section_title": "General",
      "content": "The UDM stores the MBS subscription information. The MBS subscription data for a UE is included within the UE subscription data.\nAt any time, the operator may change the subscription for multicast services in the UDM.\nThe MBS subscription data in UE subscription data contains the following information:\n-\tMBS authorization information that gives the user permission to use multicast services\n-\tWhether the UE is authorized to use the multicast MBS service.\n-\tOptionally, MBS Session ID(s) of the Multicast MBS session(s) that the UE is allowed to join.\nNOTE:\tThe MBS Session ID applies only for MBS session which is not \"open to any UEs\".\n-\tOptionally, MBS assistance information indicating that a UE is preferred to be kept connected when the related MBS Session the UE joined is active, which contains the following information:\n-\tMBS Session ID(s).\nThe MBS subscription data is provided by the UDM to the SMF during or after the establishment procedure of PDU Session associated with Multicast MBS session(s) using Nudm_SDM service for subscription data type \"MBS subscription data\" as defined in clause 7.2.1.2.\nDuring multicast session join procedure, the SMF retrieves MBS Session information from the MB-SMF, and authorizes the MBS Session join request for the UE based on MBS subscription data of the UE received from UDM and the Any UE indication (i.e. whether the Multicast MBS session is \"open to any UEs\") received from MB-SMF as described in clause 7.2.1.3.\nThe UDR stores the MBS data, which may be updated by the UDM or the AF/NEF as specified in clause 4.15.6.2 of TS 23.502 [6], i.e. AF may provision Multicast MBS Session Authorization information for the MBS as described in clause 7.2.9.",
      "chunk_type": "definition",
      "cross_references": [
        "clause_7.2.1.2",
        "clause_7.2.1.3",
        "ts_23.502_clause_4.15.6.2",
        "clause_7.2.9",
        "ts_23.502"
      ]
    },
    {
      "chunk_id": "ts_23.247_6.4.2",
      "section_id": "6.4.2",
      "section_title": "MBS subscription data in UDM",
      "content": "The information stored in the UDM as defined in clause 5.2.3.3.1 of TS 23.502 [6] is extended as follows:\n-\tMBS subscription data for a UE as part of UE subscription data, as defined in Table 6.4.2-1, with keys defined in Table 6.4.2-2.\nTable 6.4.2-1: MBS subscription data type\nSubscription data type\nField\nDescription\nMBS allowed\nIndicates whether the UE is authorized to use the multicast MBS service.\nMBS subscription data\nAllowed MBS Session ID(s)\nIdentifies the MBS Session(s) that the UE are allowed to join.\nMBS assistance information\nIndicates that the UE is preferred to be kept connected when the related MBS session the UE joined is active, which contains the related MBS Session ID(s)\nTable 6.4.2-2: MBS subscription data type keys\nSubscription Data Types\nData Key\nData Sub Key\nMBS Subscription data\nSUPI\n-",
      "chunk_type": "general",
      "cross_references": [
        "ts_23.502_clause_5.2.3.3.1",
        "table_6.4.2-1",
        "table_6.4.2-2",
        "ts_23.502"
      ]
    },
    {
      "chunk_id": "ts_23.247_6.4.3",
      "section_id": "6.4.3",
      "section_title": "MBS information in UDR",
      "content": "The MBS information may be stored in the UDR by the UDM as part of the subscription data, as defined in clause 5.2.12.2.1 of TS 23.502 [6].\n1.\tMBS data as defined in Tables 6.4.2-1, with keys defined in Table 6.4.3-1.\nTable 6.4.3-1: MBS data type keys\nData Set\nData Subset\nData Key\nData Sub Key\nSubscription Data\nMBS subscription data\nSUPI\n-",
      "chunk_type": "general",
      "cross_references": [
        "ts_23.502_clause_5.2.12.2.1",
        "table_6.4.3-1",
        "ts_23.502"
      ]
    },
    {
      "chunk_id": "ts_23.247_6.5.1",
      "section_id": "6.5.1",
      "section_title": "MBS Session ID",
      "content": "The MBS session ID is used to identify a Multicast/Broadcast MBS Session by the 5G system on external interface towards AF and between AF and UE, and towards the UE.\nMBS Session ID may have the following types:\n-\tTMGI (for broadcast and multicast MBS sessions);\n-\tsource specific IP multicast address (for multicast MBS sessions).\nIf a multicast MBS session is provided within an SNPN, the multicast MBS session can still be identified by a (globally unique) source specific IP multicast address or TMGI. In 5GS internal signalling the PLMN ID, included in TMGI, is complemented with the NID to identify an SNPN.\nSource specific IP multicast address or TMGI may be used as MBS Session ID in NAS messages exchange between a UE and a CN when the UE requests to join/leave a Multicast MBS session. For multicast MBS sessions that the UE joined with a source specific IP multicast address, a TMGI is also allocated by 5GC and is sent to the UE and used in other signalling messages between RAN, CN and UE. Details see clause 7.2.1.3.\nThe UE shall be able to obtain at least one MBS Session ID via MBS service announcement.\nFor multicast MBS sessions, a source specific IP multicast address can be assigned by external AFs.",
      "chunk_type": "general",
      "cross_references": [
        "clause_7.2.1.3"
      ]
    },
    {
      "chunk_id": "ts_23.247_6.5.2",
      "section_id": "6.5.2",
      "section_title": "Temporary Mobile Group Identity",
      "content": "TMGI (Temporary Mobile Group Identity) is defined in TS 23.003 [12] and is used to be able to identify a broadcast MBS Session or a multicast MBS session.\nIn SNPN (Stand-alone Non-Public Network), TMGI is used together with NID (Network Identifier) defined in TS 23.003 [12] to identify an MBS Session.",
      "chunk_type": "general",
      "cross_references": [
        "ts_23.003"
      ]
    },
    {
      "chunk_id": "ts_23.247_6.5.3",
      "section_id": "6.5.3",
      "section_title": "Source Specific IP Multicast Address",
      "content": "The source specific IP multicast address is used to identify an Multicast MBS session and consists of two IP addresses, one is an IP unicast address used as source address in IP packets for identifying the source of the multicast service (e.g. AF/AS), the other is an IP multicast address used as destination address in related IP packets for identifying a multicast communication service associated with the source.",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.247_6.5.4",
      "section_id": "6.5.4",
      "section_title": "MBS Frequency Selection Area ID",
      "content": "The MBS Frequency Selection Area (FSA) ID is used for broadcast MBS session to guide the frequency selection of the UE.\nMBS FSA ID identifies a preconfigured area within, and in proximity to, which the cell(s) announces the MBS FSA ID and the associating frequency (details see TS 38.300 [9]). MBS FSA ID and their mapping to frequencies are provided to RAN nodes via OAM.\nBased on this configuration, RAN nodes announce in SIBs over the radio interface information about the MBS FSA IDs and frequencies.\nWhen a broadcast MBS session is created, the AF may provide MBS FSA ID(s) based on the business agreement. If the AF does not provide MBS FSA ID(s), the MB-SMF determines MBS FSA ID(s) based on configured mapping from MBS service area and/or broadcast MBS session information (e.g. application ID) to MBS FSA ID(s) and sends the determined MBS FSA ID(s), to the AF (optionally via NEF).\nNOTE:\tThe same MBS FSA ID(s) can be assigned to multiple Broadcast MBS sessions.\nThe MBS FSA ID(s) of a broadcast MBS session are communicated in the service announcement towards the UE. The UE compares those MBS FSA IDs(s) with the MBS FSA ID(s) in SIBs for frequency selection.\nDuring MBS Session Start for Broadcast in clause 7.3.1 and MBS Session Update for Broadcast in clause 7.3.3, the MB-SMF may include the MBS FSA ID(s) for the MBS session and send them to the NG-RAN nodes via the AMF. The NG-RAN nodes may then use those MBS FSA ID(s) to determine cells/frequencies within the MBS service area to broadcast MBS session data. For details, see TS 38.300 [9] and TS 38.413 [15].",
      "chunk_type": "general",
      "cross_references": [
        "clause_7.3.1",
        "clause_7.3.3",
        "ts_38.300",
        "ts_38.413"
      ]
    },
    {
      "chunk_id": "ts_23.247_6.5.5",
      "section_id": "6.5.5",
      "section_title": "Associated Session ID",
      "content": "In the case of network sharing, an Associated Session ID may be used as specified in clause 6.18. When the AF creates multiple broadcast MBS Sessions via different CNs to deliver the same content, it may provide the Associated Session ID which enables the NG-RAN to identify the multiple MBS Sessions delivering the same content.\nSource Specific IP Multicast Address specified in clause 6.5.3 may be used as Associated Session ID.",
      "chunk_type": "general",
      "cross_references": [
        "clause_6.18",
        "clause_6.5.3"
      ]
    },
    {
      "chunk_id": "ts_23.247_6.6",
      "section_id": "6.6",
      "section_title": "QoS Handling for Multicast and Broadcast services",
      "content": "For MBS services, the network shall support QoS control per MBS session.\nThe 5G QoS model and parameters as defined in TS 23.501 [5] clause 5.7 also apply to multicast/broadcast communication services with the following differences:\n-\tReflective QoS is not applicable;\n-\tWireline access network specific 5G QoS parameters do not apply to MBS services;\n-\tAlternative QoS Profile is not applicable;\n-\tQoS Notification Control is not applicable;\n-\tUE-AMBR is not applicable;\nNOTE 1:\tFor multicast communication service, the UE-AMBR applies for associated PDU Session.\n-\tSession-AMBR if provided is enforced at MB-UPF but not communicated to NG-RAN.\nNOTE 2:\tWhether Session-AMBR is required in addition to the MBS service data flow bit rate is determined by operator policy and/or agreement with the service provider.\n-\tFor broadcast MBS session, the QoS rule and QoS Flow level QoS parameters are not provided to UE.\nNOTE 3:\tFor broadcast MBS session, the associated QoS Flow(s) are not applicable.\n-\tFor multicast MBS sessions, the QoS rule and QoS Flow level QoS parameters of MBS QoS Flow are not provided to UE.\n-\tFor multicast MBS sessions, the handling of QoS rule and QoS Flow level QoS parameters of the associated QoS Flow(s) is the same as for other QoS Flow without UL in a PDU Session.\nNOTE 4:\tThe UE does not need to know a QoS Flow within the PDU session is mapped from MBS QoS Flow.\nThe network shall support one or multiple QoS flows, which can be either GBR or non-GBR, for an MBS session.\nIf 5GC Individual MBS traffic delivery method is used to deliver multicast data packets, the network may use dedicated QoS Flows for multicast data packets in a PDU session. For the associated QoS Flow in the PDU session, the SMF uses the same QoS parameters (e.g. 5QI) provided by MB-SMF. These dedicated QoS Flows shall be kept separate from QoS Flows unrelated to multicast even if the same 5QI and other QoS parameters are assigned.\nNOTE 5:\tWhen there is a need to apply 5GC Individual MBS traffic delivery, the Session-AMBR of the associated PDU Session can be configured with a sufficiently high value to cater for MBS Session-AMBR.\nThe MB-SMF may obtain QoS information for multicast and broadcast MBS session in different ways depending on the deployment and use cases.\nIf dynamic PCC is not deployed:\n-\tWhen an MBS session is started, the MB-SMF is provided with service requirements including QoS information. If MBSF is not used, the service requirement is provided to the MB-SMF by the AF (directly or via the NEF). If the MBSF is used, the MBSF receives request from the AF (or via the NEF) and decides the related QoS requirements (e.g. considering support for FEC) and provides them to the MB-SMF. The MB-SMF determines the QoS profiles and QoS for N4 rules for the MBS session with QoS parameters of the MBS QoS flows, and provides related information to the RAN and the MB-UPF respectively.\nNOTE 6:\tWhat information is included in the request from AF to MBSF requires collaboration with SA WG4.\nIf dynamic PCC is deployed:\n-\tIt is the PCF that generates policy rules for MBS Session based on the received service requirement and provides the policy rules to the MB-SMF. The MB-SMF, based on the policy rules from the PCF, determines to create, and/or modify MBS QoS Flow(s) including providing QoS information to NG-RAN and MB-UPF, and providing packet detection and forwarding information to MB-UPF.",
      "chunk_type": "requirement",
      "cross_references": [
        "ts_23.501_clause_5.7",
        "ts_23.501"
      ]
    },
    {
      "chunk_id": "ts_23.247_6.7",
      "section_id": "6.7",
      "section_title": "User plane management",
      "content": "The MB-UPF acts as the MBS Session Anchor of an MBS session, and if the MBSTF is involved in the MBS session, then the MBSTF acts as the media anchor of the MBS traffic. The MB-UPF receives only one copy of MBS data packets from AF or MBSTF.\nThe user plane between MB-UPF and AF, may use either multicast transport or a unicast tunnel for the MBS session (depending on application and capabilities of control interface). If the transport network does not support multicast transport, the user plane uses a unicast tunnel for the MBS Session. The user plane between MBSTF and AF may use a unicast tunnel, multicast transport or other means (e.g. HTTP download from external CDN). The user plane between MBSTF and MB-UPF uses a unicast tunnel for the MBS session. If a unicast tunnel is used for the MBS Session between MB-UPF and AF or MBSTF, after receiving the downlink MBS data, the MB-UPF forwards the downlink MBS data without the received outer IP header and tunnel header information.\nNOTE 1:\tFor location dependent MBS Session, the user plane towards the MB-UPF can only use unicast tunnel and content to be delivered to different areas are sent to MB-UPF via different tunnels.\nNOTE 2:\tIf the user plane towards the MB-UPF uses a unicast tunnel, all the service data flows for the MBS Session or for an Area Session for a location-dependent MBS session are sent in the same tunnel.\nThe user plane from the MB-UPF to NG-RAN(s) (for 5GC Shared MBS traffic delivery) and the user plane from the MB-UPF to UPFs (for 5GC Individual MBS traffic delivery) may use multicast transport via a common GTP-U tunnel per MBS session, or use unicast transport via separate GTP-U tunnels at NG-RAN or at UPF per MBS session in the following way\n-\tFor 5GC Shared MBS traffic delivery (i.e. MB-UPF delivers user plane data to NG-RAN supporting MBS), if the transport network supports IP multicast, the NG-RAN node uses multicast transport via a common GTP-U tunnel per MBS session, otherwise unicast transport via separate GTP-U tunnel per MBS session per NG-RAN node is used.\n-\tFor 5GC Individual MBS traffic delivery (i.e. MB-UPF delivers user plane data to UPF), if the transport network supports IP multicast and the UPF supports reception of multicast data over N19mb, UPF use multicast transport via a common GTP-U tunnel per MBS session, otherwise unicast transport via separate GTP-U tunnel per MBS session per UPF is used.\nIf the user plane uses unicast transport, the transport layer destination is the IP address of the NG-RAN or UPF, each NG-RAN or UPF allocates the tunnel separately and multiple GTP-U tunnels are used for the MBS Session. If the user plane uses multicast transport, a common GTP-U tunnel is used for both RAN and UPF nodes. The GTP-U tunnel is identified by a common tunnel ID and an IP multicast address as the transport layer destination, both assigned by 5GC.\nThe above is depicted in Figure 6.7‑1. There could be more than one NG-RANs or UPFs that are involved in the MBS traffic delivery.\nFigure 6.7‑1: Schematic showing user plane data transmission\nThe MB-SMF instructs the MB-UPF to receive packets related to an MBS session.\nMB-UPF transmits the MBS data with the sequence number for each MBS QoS Flow as defined in TS 29.281 [23].\nFor shared delivery, if unicast transport over N3mb applies, the MB-SMF instructs MB-UPF to replicate the received MBS packets and forward them towards multiple RAN nodes via separate GTP tunnel. For shared delivery, if multicast transport over N3mb applies, the MB-SMF instructs the MB-UPF to replicate the received MBS data and forwards the data via a single GTP tunnel.\nFor individual delivery, the MBS data received by the MB-UPF is replicated towards the UPF(s) where individual delivery is performed in the following way:\n-\tThe MB-SMF configures the MB-UPF to receive packets related to an MBS session, to replicate those packets and forward them towards multiple UPFs via GTP tunnels if unicast transport over N19mb is applied, or via a single GTP tunnel if multicast transport over N19mb is applied.\n-\tThe SMF(s) instructs the UPF to receive packets related to a Multicast MBS session from an MB-UPF over N19mb, to replicate those packets and to forward them in multiple PDU sessions.\nFor the MB-SMF and MB-UPF, packet detection, replication and forwarding for an MBS session is realized by using for each MBS session one PDR that detects the incoming MBS packets and points to one FAR that describes the forwarding of the data towards multiple destinations (UPFs or RAN nodes):\n-\tA PFCP session is created when the MBS Session is started, regardless of multicast or unicast transport over N3mb and N19mb.\n-\tFor Multicast transport over N3mb and N19mb, the destination in the FAR contains the MB-UPF IP Multicast Distribution Info.\n-\tFor unicast transport over N3mb and N19mb, the FAR in the PFCP session may contain multiple destinations represented by the NG-RAN N3mb Tunnel Info and UPF N19mb Tunnel Info (if applicable).\nFor the SMF and the UPF (for 5GC individual delivery), packet detection, replication and forwarding for an MBS session is realized by PDR and FAR of the PDU session in which the UE has joined the MBS session:\n-\tThe SMF instructs the UPF to associate the PFCP session of the PDU session with an MBS session.\n-\tA new PDR with Source Interface \"Core\" is used to detect MBS data from N19mb.\nNOTE 3:\tThis PDR is also containing the MBS Session ID to enable a single detection of the incoming MBS data for multiple PDU sessions at the UPF.\n-\tFor unicast transport over N19mb, the SMF requests UPF to allocate N19mb Tunnel Info if not allocated.\n-\tFor multicast transport over N19mb, the SMF includes the low layer source specific multicast address information and C-TEID to UPF.\n-\tIf the SMF wants to maintain the MBS data reception over N19mb but suspends the delivery of the data to the UE's PDU session, the Action of FAR set to \"drop\" (e.g. when the UE is switching from 5GC Individual delivery to 5GC Shared delivery due to the UE moving from MBS non-supporting NG-RAN to MBS supporting NG-RAN). Otherwise the SMF remove the related PDR and FAR.\nSee TS 29.244 [17] for the details of user plane handling.",
      "chunk_type": "general",
      "cross_references": [
        "figure_6.7",
        "ts_29.281",
        "ts_29.244"
      ]
    },
    {
      "chunk_id": "ts_23.247_6.8",
      "section_id": "6.8",
      "section_title": "Interworking with MBMS over E-UTRAN for public safety services",
      "content": "In order to minimize the interruption of services, upon mobility for MBS service from NR/5GC to E-UTRAN/EPC and vice versa, the following applies:\n-\tIf the same MBS service is provided via eMBMS in E-UTRAN and MBS, interworking is supported at service layer.\n-\tThe UE is always configured with a common TMGI regardless of whether the UE is discovering the MBMS/MBS service via E-UTRAN or NR, for both multicast and broadcast MBS services.\n-\tWhen the UE camps on NR and uses a multicast MBS service, the UE joins a multicast MBS session and uses procedures as defined in clause 7.2 for MBS reception for the TMGI. When the UE camps on E-UTRAN, the UE uses procedures as defined in TS 23.246 [8] for MBMS reception for the TMGI.\n-\tThe session context for multicast MBS service transferring is not handed over to E-UTRAN during mobility from 5GS to EPS.",
      "chunk_type": "general",
      "cross_references": [
        "clause_7.2",
        "ts_23.246"
      ]
    },
    {
      "chunk_id": "ts_23.247_6.9.1",
      "section_id": "6.9.1",
      "section_title": "MBS Session Context",
      "content": "The MBS Session Context contains all information describing a particular MBS session in the 5GS and is created in each node involved in the delivery of the MBS data.\nThe content of the Multicast MBS Session Context is described in Table 6.9.1-1.\nTable 6.9.1-1: Multicast MBS Session Context\nParameter\nDescription\nNG-RAN\nAMF\nSMF\nMB-SMF\nState\nState of MBS session ('Active' or 'Inactive' or 'Configured')\nX\n(note 2)\nX\n(note 2)\nX\nSSM (source specific IP multicast address)\nIP multicast address identifying the MBS session.\nX(note 1)\nX(note 1)\nTMGI\nTemporary Mobile Group Identity allocated to the MBS Session.\nX\nX\nx\nX\nArea Session Identifier\nUsed for MBS session with location dependent content. When present, the Area Session Identifier together with the TMGI uniquely identify the MBS Session in a specific MBS service area.\nX(note 1)\nX\nX(note 1)\nX(note 1)\nMB-SMF\nThe MB-SMF that handles the MBS session.\nX\nX\nQoS information\nQoS information of the MBS session.\nX\nX\nX\nMBS Service Area\nArea over which the MBS session data is distributed (i.e. Cell ID list or TAI list).\nX(note 1)\nX(note 1)\nX(note 1)\nNG-RAN Node ID(s)\nNG-RAN nodes which are involved in the Multicast MBS session\nX\nX(note 1, note 4)\nAMF\nThe AMF(s) which are selected for the MBS session\nX\nX\nIP multicast and source address for data distribution\nIP addresses identifying the SSM user plane transport for shared delivery from MB-UPF to NG-RAN and for individual delivery from MB-UPF to UPF when the IP multicast transport is used.\nX (note 1)\nX(note 1)\nX\n(note 1)\nTEID for IP multicast distribution\nTunnel ID allocated by MB-UPF used for receiving the multicast data for shared delivery by NG-RAN and for individual delivery by UPF when the IP multicast transport is used.\nX\nX\nX\n(note 1)\nSMF\nThe SMF(s) that manages the associated PDU session.\nX\nUE ID\nID identifying the UE that successfully join the Multicast MBS session. For NG-RAN it is NGAP UE ID and for SMF it is SUPI.\nX\n(note 3)\nX\n(note 3)\nNG-RAN IP unicast distribution\nThe IP addresses and TEID of NG-RAN used for the user plane between NG-RAN and MB-UPF and between MB-UPF and UPF when Point to Point tunnel is used.\nX (note 1)\nX(note 1)\nX\n(note 1, note 4)\nPCF\nThe MB-PCF that provides policy control for the MBS session.\nX (note 1)\nNOTE 1:\tIt is an optional parameter.\nNOTE 2:\tThe value 'Configured' is not applicable for NG-RAN and SMF.\nNOTE 3:\tthe UE ID is available within the UE Context which contains the MBS information.\nNOTE 4:\tThe Parameter needs to be stored in deployments with shared NG-U termination(s) if unicast transport is used.\nIn Broadcast MBS session, an MBS Session Context is created in the NG-RAN, AMF, MB-SMF and MBSF as a result of the MBS Session Start procedure.\nThe content of the Broadcast MBS Session Context is described in Table 6.9.1-2.\nTable 6.9.1-2: Broadcast MBS Session context\nParameter\nDescription\nNG-RAN\nAMF\nMB-SMF\nTMGI\nTemporary Mobile Group Identity allocated to the MBS Session.\nX\nX\nX\nArea Session Identifier\nUsed for MBS session with location dependent content. When present, the Area Session Identifier together with the TMGI uniquely identify the MBS Session in a specific MBS service area.\nX(note 1)\nX(note 1)\nX(note 1)\nAMF\nThe AMF(s) which are selected for the MBS session\nX\nX\nMB-SMF\nThe MB-SMF that handles the MBS session.\nX\nQoS information\nQoS information for the MBS Session, including the QoS parameters of QoS flows.\nX\nX\nMBS Service Area\nArea over which the MBS session data is distributed (i.e. Cell ID list or TAI list).\nX\nX\nX\nNG-RAN Node ID(s)\nNG-RAN nodes which are selected for the Broadcast MBS session\nX\nX(note 1, note 2)\nIP multicast address for data distribution\nIP addresses identifying the SSM user plane transport used for shared delivery from MB-UPF to NG-RAN when the IP multicast transport is used.\nX(note 1)\nX(note 1)\nTEID for IP multicast distribution\nTunnel ID allocated by MB-UPF used for receiving the broadcast data for shared delivery by NG-RAN when the IP multicast transport is used.\nX\nX(note 1)\nNG-RAN IP unicast distribution\nIP address and TEID of NG-RAN used for the user plane from NG-RAN to MB-UPF when Point to Point tunnel is used.\nX(note 1)\nX(note 1, note 2)\nPCF\nThe PCF that provides policy control for the MBS session.\nX(note 1)\nMBS FSA ID\nMBS Frequency Selection Area (FSA) ID is used for broadcast MBS sessions to guide the frequency selection of the UE.\nX\nX\nAssociated Session ID\nAssociated Session ID is used by NG-RAN in network sharing to identify MBS sessions via different CNs transmitting the same content.\nX(note 1)\nX(note 1)\nNOTE 1:\tIt is an optional parameter.\nNOTE 2:\tThe Parameter needs to be stored in deployments with shared NG-U termination(s) if unicast transport is used.",
      "chunk_type": "general",
      "cross_references": [
        "table_6.9.1-1",
        "table_6.9.1-2"
      ]
    },
    {
      "chunk_id": "ts_23.247_6.10.1",
      "section_id": "6.10.1",
      "section_title": "General",
      "content": "The policy and charging control framework as defined in TS 23.503 [7] applies to Multicast and Broadcast services in the following aspects:\n-\tMBS Session binding: MBS Session binding is the association of an AF Session information to one and only one MBS Session or a location dependent MBS Session in an MBS Service Area. The PCF shall perform the session binding based on the MBS Session ID, i.e. TMGI or source specific IP multicast address. For location dependent MBS Session, Area Session Policy ID is used together with MBS Session ID to associate the AF Session information with the location dependent MBS Session in a specific MBS service area.\n-\tQoS Flow binding: For an MBS Session, QoS Flow binding is the association of a PCC rule to a QoS Flow within an MBS Session. The MB-SMF performs QoS Flow binding for an MBS Session in the same way as the SMF for a PDU Session.\n-\tThe PCF should provision the same MBS policy information for all MBS service areas of a location dependent MBS Session.\n-\tMBS policy information consists of:\n-\tPCC rules for MBS Session are used to provide policy for QoS flows: The following PCC rule parameters defined in Table 6.3.1 of TS 23.503 [7] are applicable for MBS:\n-\tRule identifier.\n-\tService data flow detection: Precedence, Service data flow template (only for IP PDU traffic).\nNOTE:\tIf a unicast tunnel is used over the N6mb/Nmb9 interface to transport MBS data towards the MB-UPF (see Figure 8.2-1), the Service data flow template relates to the inner IP layer within the unicast tunnel.\n-\tPolicy Control: 5G QoS Identifier (5QI), DL-maximum bitrate, DL-guaranteed bitrate, ARP, Priority Level, Averaging Window, Maximum Data Burst Volume.\n-\tCharging: Charging key (to indicate a rating group), metering method.\n-\tPolicy information can also be applicable for an entire MBS session. The following parameters defined for a PDU session in Table 6.4-1 of TS 23.503 [7] are applicable for an entire MBS session:\n-\tAuthorized Session-AMBR.\n-\tExplicitly signalled QoS Characteristics.\n-\tPolicy Control Request Triggers for MBS Session are used to define the conditions when the MB-SMF shall interact again with the PCF to request an update of the policy information for the MBS session by providing information on the condition(s) that have been met. The following Policy Control Request Triggers are defined for MBS:\n-\tMBS Session Update.",
      "chunk_type": "definition",
      "cross_references": [
        "ts_23.503_table_6.3.1",
        "ts_23.503_table_6.4-1",
        "figure_8.2-1",
        "ts_23.503"
      ]
    },
    {
      "chunk_id": "ts_23.247_6.10.2",
      "section_id": "6.10.2",
      "section_title": "MBS Session policy control data in UDR",
      "content": "The policy control profile information may optionally be provided by the UDR at MBS Session establishment, using Nudr service for Data Set \"Policy Data\" and Data Subset \"MBS Session policy control data\", with the source specific multicast address used as MBS session ID or with AF Application identifier as data key is described in Table 6.10.2-1.\nTable 6.10.2-1: MBS Session policy control information\nInformation element name\nDescription\nCategory\n5QI(s)\nAllowed 5QI(s) for a PCC rule of an MBS session (NOTE 1)\nOptional\nARP\nHighest ARP for any PCC rule of an MBS session (NOTE 1)\nOptional\nSession-AMBR\nMaximum Session-AMBR for all Non-GBR QoS Flows of an MBS session (NOTE 1)\nOptional\nGBR\nMaximum aggregated bitrate that can be provided across all GBR QoS Flows for an MBS session (NOTE 1)\nOptional\nNOTE 1:\tThis information element may be used to decide whether to authorize received MBS Service Information.",
      "chunk_type": "general",
      "cross_references": [
        "table_6.10.2-1"
      ]
    },
    {
      "chunk_id": "ts_23.247_6.11",
      "section_id": "6.11",
      "section_title": "Service Announcement",
      "content": "Service Announcement provides the UE with descriptions specifying the multicast or broadcast services to be delivered as part of MBS Session.\nThe Service Announcement may be encoded as defined in TS 26.517 [22] or use application specific formats outside the scope of 3GPP.\nService Announcement information may be delivered to the UE via application specific means or as defined in TS 26.502 [18], using one of the following methods:\n-\tPre-configured at UE side;\n-\tVia an MBS Session; or\n-\tVia a regular PDU Session.\nNOTE 1:\tPre-configured service announcement is specified in TS 24.575 [26].\nThe Service Announcement includes the MBS Session ID(s), which is represented by TMGI or a Source Specific IP Multicast Address, for the service. When the MBS Session ID is Source Specific IP Multicast Address, the Service Announcement may include the PLMN ID of the PLMN and NID for an SNPN in which the service is delivered.\nThe Service Announcement includes an MBS Service Type, which indicates whether the MBS Session for the service is multicast or broadcast.\nNOTE 2:\tA Source Specific IP Multicast Address as MBS Session ID indicates a Multicast MBS session.\nFor local MBS service, the Service Announcement may include the MBS service area. The MBS service area used by AF can be Cell ID list, TAI list, geographical area information or civic address information. Amongst them, Cell ID list and TAI list shall only be used by AFs who reside in trust domain, and when the AFs are aware of such information.\nThe service announcement may contain a start time and/or a sequence of scheduled activation times (e.g. a first time and a periodicity) of the MBS session when the AF may activate the MBS session (for multicast only) and transmit MBS data as described in clause 6.16. When the AF decides that the start time and/or scheduled activation times for the MBS session need to be updated and the UE is unreachable (e.g. due to power saving function), the AF can send service announcement containing the updated time information to the UE at the old start time (if earlier than the new start time) or next scheduled activation time previously provided to the UE for the MBS session via multicast or broadcast.\nNOTE 3:\tThe scheduled activation times are intended to assist UEs using power saving mechanisms and apply both for broadcast and multicast MBS.\nNOTE 4:\tFor UEs using power saving function, if the service announcement is provided via unicast PDU Session, the application server can be aware of the UE's reachability by subscribing to the corresponding event defined in clause 4.15.3.1 of TS 23.502 [6].\nIf the MBS Session is for multicast, the Service Announcement may include the DNN and S-NSSAI of the PDU Session to indicate which PDU Session is associated with the MBS Session.\nNOTE 5:\tFor multicast, AF or MBSF provides Service Announcement to the UE only after the MBS information is available to 5GC, to avoid potential rejection sent by SMF of the MBS session join request.\nNOTE 6:\tThe MBS Service related information, e.g. serving PLMN ID, DNN and S-NSSAI can be pre-configured in the UE.\nNOTE 7:\tIf DNN and S-NSSAI information is not provided in the service announcement or pre-configured, how UE determines the PDU session to join the MBS Session is implementation specific.\nIf the MBS Session is for broadcast, the Service Announcement may include the MBS FSA ID(s) and optional frequency information associated with the broadcast MBS session and may also include an indication that the MBS Session is intended for NR (e)RedCap UEs, UEs that are neither NR RedCap UEs nor NR eRedCap UEs, or any kind of UEs as defined in TS 26.502 [18].\nThe Service Announcement may be provided to a UE by AF or MBSF, or may be retrieved by the UE from those entities.\nNOTE 8:\tHow the UE can obtain the Service Announcement from other entities is not specified.\nNOTE 9:\tFor Mission Critical services over 5G System, Service announcement complies with TS 26.502 [18], TS 26.517 [22] and TS 23.289 [21].\nNOTE 10:\tFor supporting MBS security function, information included in Service Announcement is defined in TS 26.517 [22].",
      "chunk_type": "general",
      "cross_references": [
        "clause_6.16",
        "ts_23.502_clause_4.15.3.1",
        "ts_26.517",
        "ts_26.502",
        "ts_24.575",
        "ts_23.502",
        "ts_23.289"
      ]
    },
    {
      "chunk_id": "ts_23.247_6.12",
      "section_id": "6.12",
      "section_title": "Paging strategy handling",
      "content": "Compared to the paging strategy handling specified in clause 5.4.3 of TS 23.501 [5], the following additional functionality for multicast MBS service applies:\n-\tAt multicast MBS Session Activation, the SMF may provide the most demanding ARP and 5QI of all MBS QoS Flow within the MBS session to the AMF.\n-\tThe AMF may take the received ARP and 5QI into consideration in paging differentiation.",
      "chunk_type": "general",
      "cross_references": [
        "ts_23.501_clause_5.4.3",
        "ts_23.501"
      ]
    },
    {
      "chunk_id": "ts_23.247_6.13",
      "section_id": "6.13",
      "section_title": "MBS Security function",
      "content": "Security function may be used to protect MBS related signalling/data. Detailed descriptions of security requirements, procedures and handling for 5G Multicast/Broadcast Service (MBS) are provided in TS 33.501 [20].\nMBS security function is implemented in the MBSF/MBSTF so that it can be applied only when MBSF/MBSTF are used (i.e. Configuration option 2 and 3). For configuration option 1 how to support MBS security is out of scope of this specification.\nThe following additions to the MBS procedures for multicast Session in the present specification apply if the functionalities of MBS security for control plane procedure for multicast as defined in TS 33.501 [20] is used:\n-\tThe multicast session security context, as defined in TS 33.501 [20], is used to protect MBS traffic of an MBS session. During the session establishment and when a UE joins, the multicast session security context contains MSK and MTK.\n-\tThe UEs in the MBS session use the received multicast session security context to process the protected MBS traffic.\n-\tMBSF distributes the multicast session security context to the MB-SMF via the Nmbsmf_MBSSession_Create Request or Nmbsmf_MBSSession_Update Request message.\n-\tThe SMF interacts with the MB-SMF to obtain the multicast session security context. The MB-SMF provides the security context in the Nmbsmf_MBSSession_ContextStatusSubscribe response message and in the Nmbsmf_MBSSession_ContextStatusNotify request message.\n-\tIf the UE is authorized to join the Multicast MBS session, the SMF shall provide the multicast session security context to the UE in N1 SM container if it received the multicast session security context from the MB-SMF.\n-\tWhen the MSK needs to be updated, MBSF shall send the updated multicast session security context to the MB-SMF, and then the MB-SMF shall trigger the session update as specified in clause 7.2.6 to provide the updated multicast session security context to the UEs in the related MBS session. The updated multicast session security context shall contain an updated MSK and may contain an updated MTK in addition.\nNOTE 1:\tIf no MSK but only the MTK is to be updated, the session update described in the previous bullet is not triggered and the MTK is updated as defined in TS 33.501 [20].\nNOTE 2:\tInteraction between MBSF and MBSTF will be defined in TS 33.501 [20] and TS 26.502 [18].\nNOTE 3:\tThe additions to the user plane procedure to support the security function for multicast and broadcast can be used as defined in TS 33.501 [20].",
      "chunk_type": "general",
      "cross_references": [
        "clause_7.2.6",
        "ts_33.501",
        "ts_26.502"
      ]
    },
    {
      "chunk_id": "ts_23.247_6.14",
      "section_id": "6.14",
      "section_title": "MBS Service Information",
      "content": "MBS Service Information is a set of information used by the AF to describe an MBS session. It is directly conveyed from the AF to the MB-SMF or indirectly via NEF and/or MBSF.\nFor a location dependent MBS Session, the same MBS Service Information should be provided by the AF for each MBS Service Area.\nIn addition, MBS Service Information may be optionally sent from AF/NEF/MBSF to the PCF based on network configuration.\nNOTE 1:\tDepending on deployment scenarios specified in Annex A, AF, NEF or MBSF interacts with MB-SMF, and optionally that AF, NEF or MBSF interacts with PCF.\nThe MBS Service Information consists of an optional AF Application Identifier, an optional Session-AMBR and the description of one or more data flows/media components. For each data flow/media component, the following information may be provided:\n-\tFlow description; and\nNOTE 2:\tIf a unicast tunnel is used over the N6mb/Nmb9 interface to transport MBS data towards the MB-UPF (see Figure 8.2-1), the Flow description relates to the inner IP layer within the unicast tunnel.\n-\tone of the following:\n-\tMedia information (Media type, Media format, bandwidth) with optional Priority indicator;\n-\tQoS requirements (5G QoS parameters (i.e. 5QI, ARP, GBR, MBR) or QoS reference).\nThe following MBS Service Information is mandatory to be supported: 5G QoS parameters (i.e. 5QI, ARP, GBR, MBR) and optional Session-AMBR for one data flow/media component. Additional MBS Service Information is optional to be supported.",
      "chunk_type": "general",
      "cross_references": [
        "figure_8.2-1"
      ]
    },
    {
      "chunk_id": "ts_23.247_6.15",
      "section_id": "6.15",
      "section_title": "Group Message Delivery",
      "content": "Group Message Delivery via MBS Session is a feature that allows an AF to deliver a payload to a group of UEs located in a particular geographical area via a broadcast MBS Session, e.g. for Machine-Type communication. The AF may request to deliver group message and the AF may also request to recall (i.e. cancel) or replace a previously submitted group message. If some UEs of the group are (e)RedCap UEs, the Target UE Classes is provided as described in TS 26.502 [18], to provide the information be used as \"NR RedCap UE information\" specified in clause 6.19.\nGroup Message Delivery utilizes the Object Distribution Method in MBSTF specified in TS 26.502 [18]. The Object Distribution Method can benefit from Application Layer Forward Error Correction (AL-FEC) to achieve reliable delivery.\nIn Group Message Delivery via MBS Session, the NEF is responsible for handling the group message delivery request from the AF, that is, the NEF transforms the group message into a file and determines the meta data information of the file. Over control plane, the NEF provisions Application Service (i.e. MBS User Service creation and MBS User Data Ingest Session creation as specified in TS 26.502 [18]), which then triggers the MBS session creation towards 5GC and NG-RAN. Over user plane, the NEF is responsible for ingesting the file to the MBSTF, which then delivers the file to the UE(s) via 5GC Shared MBS traffic delivery.\nNOTE:\tThe AF can invoke the Nmbsmf service operations offered by the MB-SMF (optionally via the NEF) for Transport Only Mode, as supported in Rel-17.",
      "chunk_type": "general",
      "cross_references": [
        "clause_6.19",
        "ts_26.502"
      ]
    },
    {
      "chunk_id": "ts_23.247_6.16",
      "section_id": "6.16",
      "section_title": "Support of MBS data reception for UEs using power saving functions",
      "content": "MBS provide means to deliver data over MBS Session to multiple UEs at the same time. However, for UEs using power saving functions, e.g. MICO (Mobile Initiated Connection Only) mode with Active Time, or extended DRX (Extended Discontinuous Reception) as defined in clause 5.31.7 of TS 23.501 [5], the UEs are usually unreachable for long periods of time. Moreover, different UEs are likely to be reachable at different times.\nIf a UE becomes unreachable for unicast data transfer due to its using power saving functions, the UE may still be involved in MBS specific operations, e.g. activation/deactivation of the MBS service, MBS data transfer reception, reception of service announcement (if needed).\nTo receive MBS data, those UEs need to wake up at coordinated times when the MBS data is to be transmitted. The UE is informed via the service announcement about a start time and/or a sequence of scheduled activation times (e.g. a first time and a periodicity) of the MBS Session when the AF may activate the MBS Session and transmit MBS data, as described in clause 6.11.\nThe AF may send data starting either at the start time or at any scheduled activation times. If the AF sends data using an multicast MBS Session at a scheduled activation time, it shall first activate the multicast MBS Session at that scheduled activation time.\nNOTE:\tIf the UE does not receive paging for multicast MBS session activation or does not receive MBS data after waking up according to the stored start time and/or scheduled activation times for pre-configured number of times in sequence, the UE can transition to CM-CONNECTED state to retrieve the updated service announcement including start time and/or scheduled activation times for the MBS session from the AF.",
      "chunk_type": "general",
      "cross_references": [
        "ts_23.501_clause_5.31.7",
        "clause_6.11",
        "ts_23.501"
      ]
    },
    {
      "chunk_id": "ts_23.247_6.17",
      "section_id": "6.17",
      "section_title": "Support of Multicast MBS session data reception in UE with RRC_INACTIVE state",
      "content": "To provide multicast MBS service to more UEs in a cell, the NG-RAN may decide to move some UE(s) receiving multicast MBS data from RRC_CONNECTED to RRC_INACTIVE state if the UE(s) is capable to receiving MBS data in RRC_INACTIVE state.\nThe decision in NG-RAN may use the following information provided from 5GC:\n-\tExisting MBS session QoS parameters, e.g. the most demanding ARP and 5QI of all MBS QoS Flow within the MBS session.\n-\tMBS assistance information for the MBS session, the MBS assistance information for the MBS session is an optional parameter and associated with one MBS session, which consists of an indication that the UE is preferred to be kept in connected when the related MBS session that the UE joined is active. When the NG-RAN node receives this information, the NG-RAN may determine to keep the UE in RRC_CONNECTED state even if the MBS session data is supported to be received in RRC_INACTIVE state.\nNOTE 1:\tHow the NG-RAN nodes perform those decisions is up to NG-RAN implementation.\nNOTE 2:\tThe \"RRC Inactive Assistance Information\" in clause 5.3.3.2.5 of TS 23.501 [5] is sent by AMF to NG-RAN, whether and how it is used by NG-RAN for deciding whether to send a UE to RRC_INACTIVE state is decided by NG-RAN.\nThe MBS session QoS parameters (e.g. ARP and 5QI) are provided to NG-RAN by the MB-SMF during user plane establishment for shared delivery.\nThe NG RAN node indicates to the 5GC when a UE joins and during Xn handover in N2 SM related information that it supports MBS multicast with reception in RRC_INACTIVE state.\nPer the MBS session that the UE joined, the related \"MBS assistance information for the MBS session\" is provided to NG-RAN by the SMF if the MBS assistance information is available in the SMF and the MBS session that the UE joined is included in the MBS assistance information. The SMF gets from the UDM the \"MBS assistance information\", which is provisioned by the AF via the NEF to the UDM as part of the MBS subscription data and includes all the MBS session ID(s), where the UE is preferred to be kept connected when the related MBS session that the UE joined is active (as specified in clause 6.4). The SMF provides the \"MBS assistance information for the MBS session\" to the NG-RAN as part of the associated PDU session information within the N2 SM information in the procedures where the associated PDU session information need be sent to NG-RAN node, e.g. PDU Session modification for UE joining, handover procedure as detailed in clause 7.2.1.3 and clause 7.2.3.8.1, respectively.\nWhen an MBS session is to be activated, if there are UE(s) that joined the MBS session, the 5GC activates the MBS Session in the NG-RANs serving the joined UE(s). When the NG-RAN triggers the group paging to activate the MBS session and decides to enable Multicast MBS session data reception for UE with RRC_INACTIVE state, it also indicates that the MBS session data is allowed to be received in RRC_INACTIVE state. Hence the joined UEs in RRC_INACTIVE state in the cells, where the delivered MBS session is allowed to be received in RRC_INACTIVE state, may be able to stay in RRC_INACTIVE state and receive MBS Session data.\nWhen a UE in RRC_INACTIVE state is receiving ongoing MBS session data, if the UE moves to a new cell within the RNA, or if the UE moves outside the current RNA but within the current Registration Area, or if the UE moves out of the current Registration Area, the UE should be able to receive the MBS session data if applicable in the new area.\nNOTE 3:\tThe scenario of the UE moving to a new cell within the RAN Notification Area is specified in RAN specifications.",
      "chunk_type": "general",
      "cross_references": [
        "ts_23.501_clause_5.3.3.2.5",
        "clause_6.4",
        "clause_7.2.1.3",
        "clause_7.2.3.8.1",
        "ts_23.501"
      ]
    },
    {
      "chunk_id": "ts_23.247_6.18",
      "section_id": "6.18",
      "section_title": "Resource sharing across broadcast MBS Sessions during network sharing",
      "content": "In network sharing scenario as specified in clause 5.18 of TS 23.501 [5], the same MBS broadcast service may be delivered via multiple operators' CN participating in the network sharing to a shared NG-RAN, and the shared NG-RAN nodes may broadcast the MBS data only once for resource efficiency.\nWhen the AF creates multiple broadcast MBS sessions via multiple CNs to deliver the same content, the shared NG-RAN allocates radio resource for one of broadcast MBS Sessions instead of allocating radio resource for all the broadcast MBS Sessions.\nNOTE 1:\tThe same QoS requirements are assumed to be provided by the AF for the broadcast MBS Sessions via multiple CNs delivering the same content.\nThe NG-RAN determines the broadcast MBS sessions delivering the same content in one of the following ways:\n-\tBased on the Associated Session ID (see clause 6.5.5) provided by the AF to the NG-RAN via 5GCs when creating broadcast MBS sessions.\n-\tBased on the association of MBS session identifiers (i.e. TMGIs) configured in NG-RAN, the shared NG-RAN nodes can determine that the multiple broadcast MBS sessions are transmitting the same content for the same MBS service. For the location dependent MBS session, the existing MBS session identifiers are used to identify multiple broadcast MBS Sessions via different CNs delivering the same content. The MB-SMF should be able to accept MBS session creation with TMGIs without prior allocation of those TMGIs.\nFor a location dependent MBS session (see Clauses 6.2.3), the AF(s) that create the location dependent MBS sessions towards the participating PLMNs shall supply MBS Service Areas mapped to the same shared radio cells (but that may also be mapped to different non-shared radio cells).\nFor location dependent broadcast services, the shared NG-RAN is required to determine that the multiple broadcast MBS Sessions via different CNs deliver the same content for location-dependent MBS session with additionally considering the MBS Service Area.\nNOTE 2:\tWhen the association of MBS session identifiers is configured in NG-RAN, there is no requirement on the AF to provide an Associated Session ID.\nNOTE 3:\tThe AFs are configured with TMGIs that are mapped to each other in NG-RAN, and the MB-SMF includes those TMGIs in the NF profile it registers at the NRF, and does not allocate those TMGIs to other MBS services.\nNOTE 4:\tIt is up to NG-RAN implementation whether an NG-RAN node requests to receive multiple copies of MBS data from the core networks of different operators or only a single copy of MBS data.\nIllustrated in Figure 6.18-1 is an example that the AF creates broadcast MBS Sessions via 5GC Operators A, B and C respectively to deliver the same content and N3mb unicast transport is used from 5GC to the NG-RAN. Based on operator policy, the NG-RAN node decides towards which operator(s)' 5GC(s) to establish N3mb tunnel(s), i.e. towards only one, some or all operators' 5GC(s). If N3mb multicast transport is used (not shown in Figure 6.18-1), the NG-RAN node decides which multicast group(s) (i.e. LL SSM(s)) to join. Over the Uu interface, the NG-RAN allocates radio resource for only one of the established broadcast MBS Sessions regardless of the number of N3mb tunnels established to deliver the MBS packets.\nFigure 6.18-1: Example of Resource sharing across multiple broadcast MBS Sessions via different CNs to deliver the same content during network sharing",
      "chunk_type": "general",
      "cross_references": [
        "ts_23.501_clause_5.18",
        "clause_6.5.5",
        "figure_6.18-1",
        "ts_23.501"
      ]
    },
    {
      "chunk_id": "ts_23.247_6.19",
      "section_id": "6.19",
      "section_title": "Support of Broadcast MBS Session Intended for NR (e)RedCap UEs",
      "content": "The NR (e)RedCap UE is a UE with reduced capabilities (NR RedCap UE) or enhanced reduced capabilities (NR eRedCap UE) as defined in TS 38.300 [9]. The NR (e)RedCap UEs can only support limited bandwidth and have lower complexity compared to non-(e)RedCap UEs. In order to allocate the appropriate radio resource as defined in TS 38.331 [28], NG-RAN needs to be able to determine whether the broadcast MBS session is intended only for NR (e)RedCap UEs, only for UEs that are neither NR RedCap UEs nor NR eRedCap UEs, or any kind of UEs (i.e. NR RedCap UE, NR eRedCap UE, or UEs that are neither NR RedCap UEs nor NR eRedCap UEs).\nThe \"NR RedCap UE information\" parameter comprises an indication for a broadcast MBS session that can take the following values: \"MBS session expected to be received only by (e)RedCap UEs\", \"MBS session expected to be received by any kind of UEs\", or \"MBS session expected to be received only by UEs that are neither RedCap UEs nor eRedCap UEs\".\nThe \"NR RedCap UE Information\" parameter is provided by the AF to the NEF/MBSF and the MB-SMF as part of MBS Session Creation. The MB-SMF then forwards the \"NR RedCap UEs Information\" parameter in N2 SM Information to the NG-RAN via the AMF in MBS Session Start procedure defined in clause 7.3.1.\nThe \"NR RedCap UE Information\" parameter may be updated by the AF to the NEF/MBSF and the MB-SMF as part of MBS Session Update. The MB-SMF then forwards the updated information to the NG-RAN via the AMF in MBS Session Update procedure defined in clause 7.3.3.\nNOTE 1:\tIt is up to NG-RAN implementation how the \"NR RedCap UEs Information\" parameter is used. When the \"NR RedCap UE Information\" is absent, it is up to NG-RAN implementation whether/how to enable (e)Redcap UE to receive broadcast MBS session.\nNOTE 2:\tIf the MBS Session can be received by any kind of UEs, the MBS FSA ID(s) associated with the MBS session are applicable for both NR (e)RedCap UEs and non-NR-(e)RedCap UEs. If an assignment of the separate MBS FSA ID(s) to NR (e)RedCap UEs and non-NR-(e)RedCap UEs is necessary, two separate MBS sessions are used.",
      "chunk_type": "general",
      "cross_references": [
        "clause_7.3.1",
        "clause_7.3.3",
        "ts_38.300",
        "ts_38.331"
      ]
    },
    {
      "chunk_id": "ts_23.247_6.20",
      "section_id": "6.20",
      "section_title": "QoE Measurement Collection Support for MBS",
      "content": "Quality of Experience (QoE) measurement collection (QMC) may be supported in 5GS as described in clause 5.25.3 of TS 23.501 [5].\nQMC may also be supported to measure the QoE related to the reception of MBS multicast and broadcast sessions as specified in clause 21 of TS 38.300 [9],",
      "chunk_type": "general",
      "cross_references": [
        "ts_23.501_clause_5.25.3",
        "ts_38.300_clause_21",
        "ts_23.501",
        "ts_38.300"
      ]
    },
    {
      "chunk_id": "ts_23.247_7.1.1.1",
      "section_id": "7.1.1.1",
      "section_title": "General",
      "content": "The call flows in clause 7.1.1 and clause 7.3 show a \"NEF/MBSF\", but as detailed in Annex A, there can be different related network deployment involving either only NEF, or MBSF, or both.\nThe interactions between \"NEF/MBSF\" and MB-SMF, PCF, BSF and NRF depicted in the call flows apply for NEF, MBSF or a combined NEF and MBSF, depending on network deployment. They may also apply for an AF in the trusted domain where NEF is not mandated.\nHowever, the interactions between AF and \"NEF/MBSF\" depicted in the call flows only apply for the NEF.\nInteractions between AF and MBSF based on the MB2 interface follow TS 23.468 [10] (see Annex C).\nInteractions between AF and MBSF based on the xMB interface follow TS 26.348 [11] (see Annex C).\nServices offered by the MBSF and related interactions based on that service between MBSF and AF or NEF (if MBSF and NEF are split as shown in configuration 2) are specified in TS 26.502 [18].\nDetailed interactions between the MBSF or NEF and the MBSTF are specified in TS 26.502 [18].",
      "chunk_type": "definition",
      "cross_references": [
        "clause_7.1.1",
        "clause_7.3",
        "ts_23.468",
        "ts_26.348",
        "ts_26.502"
      ]
    },
    {
      "chunk_id": "ts_23.247_7.1.1.2",
      "section_id": "7.1.1.2",
      "section_title": "MBS Session Creation without PCC",
      "content": "This procedure is used by the AF to start the MBS Session towards 5GC and consist of TMGI allocation, and MBS session creation, and they apply to both multicast and broadcast communications unless otherwise stated.\nFor multicast, MBS session establishment procedure triggered by UE join requests may follow the MBS session creation procedure to reserve resources towards NG-RAN. For broadcast, the MBS session start procedure to reserve resources towards NG-RAN is triggered by the MBS session creation procedure.\nFor both broadcast and multicast communication, the TMGI allocation may be separated from the MBS Session creation request.\nFor multicast communication, TMGI allocation procedure is applicable if TMGI is used as MBS Session ID.\nFigure 7.1.1.2-1: MBS Session Creation without PCC\nSteps 1 to 6 are optional and only applicable if TMGI is used as MBS Session ID and required to be pre-allocated.\n1.\tAF sends Nnef_MBSTMGI_Allocate Request (TMGI number, [MBS service area]) message to NEF/MBSF to request allocation of a TMGI(s) to identify new MBS session(s). The MBS service area indicates the possible service area for those TMGI(s) to be allocated, which may be needed for local MBS.\nNOTE 1:\tDepending on the network deployment and use case, MB-SMF may receive requests from AF directly, or via NEF, or via MBSF, or via NEF and MBSF.\n2.\tNEF/MBSF checks authorization of AF. If geographical area information or civic address information was provided by the AF as MBS service area, NEF/MBSF performs the translation.\nNOTE 2:\tNEF is not required if AF is in trusted domain.\n3.\tNEF/MBSF discovers and selects an MB-SMF using NRF or based on local configuration, possibly based on MBS service area.\nIf the NEF/MBSF discovers MB-SMF candidates based on MBS service area, and the MBS service area cannot be covered by the MB-SMF service area of a single MB-SMF, the NEF/MBSF rejects the TMGI allocation with an error information indicating that the MBS service area cannot be covered by the MB-SMF service area of a single MB-SMF. Based on the MB-SMF service areas received from the NRF, the NEF/MBSF may divide the requested MBS service area into several groups of MBS service area, while each group can be served by one MB-SMF. The NEF/MBSF may include the groups of MBS service area in the response to the AF. The subsequent steps are not executed.\n4.\tNEF/MBSF sends an Nmbsmf_TMGI_Allocate Request (TMGI number) message to the MB-SMF.\n5.\tMB-SMF allocates TMGI(s) and returns the TMGI(s) to the NEF/MBSF via the Nmbsmf_TMGI_Allocate response (TMGI(s), expiration time).\n6.\tThe NEF or MBSF responds to the AF by sending an Nnef_MBSTMGI_Allocate Response (TMGI(s), expiration time).\n7.\tThe AF may perform a Service Announcement towards UEs. The AF informs UEs about MBS Session information with MBS Session ID, e.g. TMGI, SSM, and possibly other information e.g. MBS service area, session description information, etc.\nThe MBS service area information can be Cell ID list, TAI list, geographical area information or civic address information. Amongst them, Cell ID list and TAI list shall only be used by AFs who reside in trust domain, and when the AFs are aware of such information.\nThe UE needs to be aware if the service is broadcast or multicast to decide if JOIN is to be performed.\n8.\tAF of content provider may provide description for an MBS session (possibly providing information for a previously allocated TMGI to NEF via a Nnef_MBSSession_Create request ([MBS Session ID], MBS service type, MBS Service Information, [TMGI allocation request], [MBS service area], [Any UE indication], [start and end time of the MBS session], [MBS session state], [ingress transport address request indication], [Request for location-dependent session], [FSA ID(s)], [Associated Session Identifier], [NR RedCap UE Information]). If steps 1-6 have not been executed before, the AF may provide an MBS Session ID containing an SSM or it may request that the network allocates an MBS Session ID (i.e. TMGI). The AF provides the MBS service type (i.e. either multicast service or broadcast service) and MBS Service Information (as defined in clause 6.14). The AF may provide the \"Any UE indication\" (indicating whether a multicast MBS session is \"open to any UEs\"), MBS service area, start and end time of the MBS session and MBS session state (active/inactive). In addition, the AF request may also indicate that the allocation of an ingress transport address is requested and that the AF request is for a location dependent MBS service.\nIf geographical area information or civic address information was provided by the AF as MBS service area, NEF/MBSF translates the MBS service area to Cell ID list or TAI list.\nFor broadcast communication, the AF may determine MBS FSA ID(s) for the Broadcast MBS session based on business agreements and include them in the description of the MBS session.\nFor broadcast communication, to support resource sharing across MBS Sessions during network sharing (see clause 6.18), the AF may include Associated Session Identifier in this step to enable NG-RAN to identify the broadcast MBS sessions from multiple CNs delivering the same content.\nNOTE 3:\tThe same QoS requirements are assumed to be provided by the AF for the broadcast MBS Sessions via multiple CNs delivering the same content.\nNOTE 4:\tMBS session state is applicable for multicast MBS Session.\nFor broadcast communication, the AF may include the information that the broadcast MBS session is intended for NR (e)RedCap UEs only, or UEs that are neither NR RedCap UEs nor NR eRedCap UEs, or any kind of UEs in the \"NR RedCap UE Information\" parameter (as defined in clause 6.19).\n9.\tNEF/MBSF checks authorization of content provider.\n10.\tNEF/MBSF discovers MB-SMF candidates and selects MB-SMF as ingress control node, possibly based on MBS service area. If a TMGI is included in step 8, NEF/MBSF finds MB-SMF based on that TMGI.\nIf the NEF/MBSF discovers MB-SMF candidates based on MBS service area, and the MBS service area is not covered by the MB-SMF service area of a single MB-SMF, the NEF/MBSF rejects the MBS session creation with an error information indicating that the MBS service area cannot be covered by the MB-SMF service area of a single MB-SMF. Based on the MB-SMF service areas received from the NRF, the NEF/MBSF may divide the requested MBS service area into several groups of MBS service area, while each group can be served by one MB-SMF. The NEF/MBSF may include the groups of MBS service area in the response to the AF. The flow continues in step 20 below.\n11.\tNEF/MBSF sends Nmbsmf_MBSSession_Create Request ([MBS Session ID], MBS service type, [TMGI allocation request], MBS Service Information (as defined in clause 6.14), [MBS service area], [Any UE indication], [start and end time of the MBS session], [MBS session state], [ingress transport address request indication], [FSA ID(s)], [Associated Session Identifier], [multicast session security context], [NR RedCap UE Information]) to MB-SMF, to request MB-SMF to reserve ingress resources for a MBS distribution session. The NEF/MBSF forwards all parameters it has received from the AF in step 8. If the MBSF decides to insert an MBSTF into the user plane for the MBS session, it also indicates that the allocation of an ingress transport address is requested even if this was not requested in step 8. The request also includes the Any UE indication if provided in step 8. If the MBSF acts as the MBS security function for multicast as defined in TS 33.501 [20], it provides a multicast session security context for the MBS session.\nIf requested to do so, or if a source specific multicast is provided as MBS Session ID in step 11, the MB-SMF allocates a TMGI.\nFor broadcast communication, if no MBS FSA ID(s) have been received, the MB-SMF selects MBS FSA ID(s) for the Broadcast MBS session based on local configuration.\nIf the MBS service area received in this step cannot be covered by the MB-SMF service area of the MB-SMF, the MB-SMF reduces the MBS service area to be within the MB-SMF service area and continues the procedure using the reduced MBS service area.\nFor broadcast communication, the NEF/MBSF forwards the \"NR RedCap UE Information\" parameter, if received from the AF.\n12.\tVoid.\n13.\tThe MB-SMF derives the required QoS parameters locally based on the MBS Service Information.\n14.\tMB-SMF selects the MB-UPF. If the allocation of an ingress transport address was requested in step 11, the MB-SMF requests the MB-UPF to reserve user plane ingress resources. If multicast transport of the MBS data towards RAN nodes is to be used, the MB-SMF also request the MB-UPF to reserve for the outgoing data a tunnel endpoint and the related identifiers (source IP address, SSM and GTP Tunnel ID) and to forward data received at the user plane ingress resource using that tunnel endpoint.\nIf the allocation of an ingress transport address was not requested in step 11, the MB-SMF provides the SSM received as MBS Session ID to the MB-UPF and requests the MB-UPF to join the corresponding multicast tree from the content provider. The MB-SMF may also defer the configuration to join the corresponding multicast tree e.g. based on information that the session is inactive, service requirements and MBS start/end time until receiving the first query for the MBS session as part of the establishment procedure in clause 7.2.1.3, or until receiving a request to activate the MBS session via the MBS Session Update procedure in clause 7.1.1.6.\n15.\tIf requested, MB-UPF selects an ingress address (IP address and port) and a tunnel endpoint for the outgoing data and provides it to MB-SMF.\n16.\tThe MB-SMF sends an Nmbsmf_MBSSession_Create response ([TMGI], [Allocated ingress address], [Information of area reduction]).\nMB-SMF indicates the possibly allocated ingress address to the NEF/MBSF. MB-SMF may include TMGI if it is allocated in step 11. For broadcast communication, the MB-SMF includes any MBS FSA ID(s) selected in step 11.\nIf the MB-SMF reduces the service area in step 11, the MB-SMF includes result information in the response indicating that the MBS service area cannot be covered by the MB-SMF service area of a single MB-SMF, and includes the Information of area reduction that relates to the reduced MBS service area.\nNOTE 5:\tDetails of the Information of area reduction is defined by stage 3.\n16a.\tIf a source specific multicast address is provided as MBS Session ID in step 11, the MB-SMF updates its NF profile at the NRF with the serving MBS Session ID. If an MBS service area was received in step 11, the MB-SMF updates its NF profile at the NRF with that information.\nNOTE 6:\tIf TMGI is used to represent an MBS Session, MB-SMF does not need to update NRF if the TMGI range(s) supported by an MB-SMF is already included in the MB-SMF profile when MB-SMF register itself into NRF.\n17.\tFor broadcast communication, the MB-SMF continues the procedure towards the AMF and NG-RAN as specified in clause 7.3.1 to request the allocation of resources to for the transmission of the broadcast session.\n18.\t[Optional] If the MBSF decides to use an MBSTF, the NEF/MBSF provides the ingress address received in step 16 towards the MBSTF as DL destination. If the allocation of an ingress transport address was requested in step 8, the MBSF requests the MBSTF to allocate the user plane ingress resources. If the allocation of an ingress transport address was not requested in step 8, the MBSF provides the SSM received as Multicast session ID in step 8 and requests the MBSTF to join the corresponding multicast tree from the content provider.\n19.\t[Conditional on step 19] If requested, the MBSTF selects an ingress address (IP address and port) and provides it to NEF/MBSF.\n20.\tThe NEF/MBSF indicates the possibly allocated ingress address and other parameters (e.g. TMGI) to the AF via an Nnef_MBSSession_Create response ([TMGI], [Allocated ingress address], [Information of area reduction]). If MBS Session ID is not provided in step 8, or the MBS Session ID is SSM, the NEF/MBSF provides the allocated TMGI. If AF requested the allocation of an ingress transport address, the message also includes the allocated ingress address. For broadcast communication, the message also includes any MBS FSA ID(s) received in step 17.\nIf the NEF/MBSF rejects the TMGI allocation in step 10, or receives the result information in step 16 indicating that the MBS service area cannot be covered by the MB-SMF service area of the MB-SMF, the NEF/MBSF includes that result information, and forwards the Information of area reduction.\n21.\tSame as step 7. The AF may also perform a service announcement at this stage.\n22.\tFor multicast communication, depending on configuration UEs can join the MBS Session as specified in clause 7.2.1.",
      "chunk_type": "general",
      "cross_references": [
        "clause_6.14",
        "clause_6.18",
        "clause_6.19",
        "clause_7.2.1.3",
        "clause_7.1.1.6",
        "clause_7.3.1",
        "clause_7.2.1",
        "figure_7.1.1.2-1",
        "ts_33.501"
      ]
    },
    {
      "chunk_id": "ts_23.247_7.1.1.3",
      "section_id": "7.1.1.3",
      "section_title": "MBS Session Creation with PCC",
      "content": "Deployment of dynamic PCC is optional. This clause describes the procedure when dynamic PCC is deployed.\nFigure 7.1.1.3-1: MBS Session Creation with PCC\nSteps 1 to 7 are optional and only applicable if TMGI is used as MBS Session ID and required to be pre-allocated.\n1 to 9:\tSame as in Figure 7.1.1.2-1.\n10.\tThe NEF/MBSF may optionally, based on local configuration, decide to interact with the PCF.\nNOTE 1:\tIn the deployment without NEF and MBSF, the AF optionally interacts with PCF in steps 11-18.\nIf the NEF/MBSF decided to interact with the PCF, steps 11 to 19 are performed, and in step 20 the MBS Service Information is not provided to the MB-SMF.\nIf the NEF/MBSF decided not to interact with the PCF, steps 12 to 19 are skipped, and in step 20 the MBS Service Information is provided to the MB-SMF.\n11.\t[Conditional] If the NEF/MBSF did not receive an MBS Session ID from the AF in step 8, the NEF/MBSF sends an Nmbsmf_TMGI_Allocate Request (1) message to the MB-SMF and the MB-SMF allocates a TMGI and returns the TMGI to the NEF/MBSF via the Nmbsmf_TMGI_Allocate response (TMGI, expiration time).\n12.\t[Conditional] If the NEF/MBSF receives the Request for location-dependent session from the AF and if there is a need to select the same PCF for the location dependent MBS Sessions, the NEF/MBSF first uses the BSF Discovery service to discover whether there is a PCF serving the MBS session with the MBS Session ID by using Nbsf_management_Discovery operation. If there is a PCF registered for the MBS Session ID, the NEF/MBSF interacts with that PCF and skips the following step 13.\nNOTE 2:\tThis step is not necessary in a deployment with a single PCF.\n13.\t[Conditional] If step 12 was not executed or the interaction with the BSF revealed that no PCF is registered for the MBS Session ID, the NEF/MBSF discovers the PCF candidates by interacting with the NRF and selects a PCF, possibly based on MBS service area.\n14.\tThe NEF/MBSF sends an Npcf_MBSPolicyAuthorization_Create Request (MBS Session ID, [Area Session Policy ID], [Request for location dependent MBS session], MBS Service Information (as defined in clause 6.14)) to the PCF.\n15.\t[Optional] The PCF may retrieve authorization information for the MBS session from the UDR (see clause 6.10.2) and takes it into account for the subsequent authorization and QoS allowance check.\nNOTE 3:\tThis step is not necessary in a deployment with a single PCF if authorization data are stored in the PCF.\n16.\tThe PCF determines whether the request is authorized and if the request is authorized, the PCF derives the required QoS parameters based on the received MBS Service Information and determines whether this QoS is allowed. If the required QoS is allowed, the PCF generates the policy information for the MBS session (as defined in clause 6.10) and stores it together with the MBS Session ID.\n17.\tIf the request is authorized and the required QoS is allowed, the PCF registers at the BSF that it handles the MBS session by using Nbsf_management_Register Request (MBS Session ID, PCF ID). It provides an identifier that the policy association is for MBS and the MBS Session ID, its own PCF ID and optionally its PCF set ID.\nNOTE 4:\tThis step is not necessary in a deployment with a single PCF.\n18.\tThe PCF sends an Npcf_MBSPolicyAuthorization_Create Response (Result indication, [Area Session Policy ID]) to the NEF/MBSF.\n-\tThe request is authorized for a location dependent MBS Session, the PCF assigns Area Session Policy ID.\n-\tIf the request is not authorized or the required QoS is not allowed, the PCF indicates so in the response to the NEF/MBSF which in turn informs the AF about it (by sending the Nnef_MBSSession_Create Response) and ends this procedure.\n19.\tSame as step 10 in Figure 7.1.1.2-1.\n20.\tSame as step 11 in Figure 7.1.1.2-1 with the following differences:\n-\tIf the optional interaction between AF/NEF/MBSF and PCF has been performed:\n-\tThe MBS Service Information is not present (as it was already provided to the PCF in step 14).\n-\tFor location dependent MBS service, the AF/NEF/MBSF also includes Area Session Policy ID (which is assigned by the PCF in step 18) to the MB-SMF.\n21.\tThe MB-SMF discovers the PCF using NRF.\n22.\tThe MB-SMF sends an Npcf_MBSPolicyControl_Create Request (MBS Session ID, [Area Session policy ID], [MBS Service Information (as defined in clause 6.14)]) for the MBS session towards the PCF. The MB-SMF forwards the MBS Service Information to the PCF if received from the NEF/MBSF in the previous step 20.\nFor location dependent MBS Session, the MB-SMF also sends Area Session Policy ID to the PCF as follows:\n-\tIf the AF/NEF/MBSF does not include Area Session policy ID, (i.e. the AF/NEF/MBSF has not interacted with PCF), the MB-SMF uses its assigned Area Session ID as Area Session Policy ID.\n-\tIf AF/NEF/MBSF includes Area Session Policy ID (i.e. AF/NEF/MBSF (i.e. the AF/NEF/MBSF has interacted with PCF), the MB-SMF provides that received Area Session Policy ID (received from AF/NEF/MBSF) as Area Session Policy ID.\nIf PCF receives MBS Service Information from the MB-SMF, the PCF performs the subsequent steps 23 to 26. If the PCF does not receive MBS Service Information from the MB-SMF, but has previously determined policy information for the MBS session (see step 16) corresponding to the MBS Session ID (and Area Session Policy ID for location dependent MBS) received from the MB-SMF, the PCF continues with step 27.\n23.\tIf the PCF is not handling the MBS Session ID, the PCF uses the BSF Register service to check whether there is already a PCF serving the MBS session. If so, the PCF skips steps 24 to 26 and indicates in step 27 that the PCF serving the MBS session shall be contacted.\nNOTE 5:\tThis step is not necessary in a deployment with a single PCF.\n24.\t[Optional] The PCF may retrieve authorization information for the MBS session from the UDR (see clause 6.10.2) and takes it into account for the subsequent authorization and QoS allowance check.\nNOTE 6:\tThis step is not necessary if authorization data are stored in the PCF.\n25.\tThe PCF determines whether the request is authorized and if the request is authorized, the PCF derives the required QoS parameters based on the received MBS Service Information and determines whether this QoS is allowed. If the required QoS is allowed, the PCF generates the policy information for the MBS session (as defined in clause 6.10) and stores it together with the MBS Session ID.\n26.\tIf the request is authorized and the required QoS is allowed the PCF registers at the BSF that it handles the MBS session by using Nbsf_management_Register Request (MBS Session ID, PCF ID). It provides an identifier that the policy association is for MBS and the MBS Session ID, its own PCF ID and optionally its PCF set ID.\nNOTE 7:\tThis step is not necessary in a deployment with a single PCF.\n27.\tThe PCF responds with Npcf_MBSPolicyControl_Create Response ([policy information for the MBS session (as defined in clause 6.10)], Result indication).\nIf the request is not authorized or the required QoS is not allowed, the PCF indicates so in the response to the MB-SMF which in turn informs the AF about it (by sending the Nmbsmf_MBSSession_Create Response) and ends this procedure.\nIf another PCF is serving the MBS session, the PCF indicates that another PCF serving the MBS session shall be contacted and provides an ID of that other PCF. The MB-SMF then repeats step 22 towards that other PCF.\n28-37:\tSame as steps 14-22 in Figure 7.1.1.2-1.\nNOTE 8:\tSteps 33-36 can be executed in parallel to step 32.",
      "chunk_type": "general",
      "cross_references": [
        "clause_6.14",
        "clause_6.10.2",
        "clause_6.10",
        "figure_7.1.1.3-1",
        "figure_7.1.1.2-1"
      ]
    },
    {
      "chunk_id": "ts_23.247_7.1.1.4",
      "section_id": "7.1.1.4",
      "section_title": "MBS Session Deletion without PCC",
      "content": "This procedure is used by the AF to delete the MBS Session. This procedure may also include TMGI de-allocation. The procedures apply to both multicast and broadcast communications unless otherwise stated. This procedure releases the reserved resources in both 5GC and NG-RAN.\nFigure 7.1.1.4-1: MBS Session Deletion without PCC\n1.\tAF of content provider may request to delete the MBS session (MBS Session ID).\n2/3.\tIf an MBSTF was inserted into the user plane, the MBSF request the MBSTF to release user plane resources.\n4.\tNEF/MBSF requests MB-SMF to delete resources for the MBS session.\n5.\tFor Broadcast MBS session, the MB-SMF triggers resource release towards the AMFs as specified in clause 7.3.2. For Multicast MBS session, the MB-SMF triggers resource release towards the SMFs as specified in clause 7.2.2.3.\n6/7.\tMB-SMF requests the MB-UPF to release user plane resources.\n8.\t[Conditional] If MB-SMF configured the profile with an MBS Session ID when the MBS session was created, the MB-SMF updates its NF profile at NRF to release the MBS Session ID.\n9.\tMB-SMF responds to the NEF/MBSF.\n10.\tThe NEF/MBSF responds to the AF.\n11.\t[Optional] AF requests NEF/MBSF to de-allocate TMGI(s),\n12.\t[Conditional on step 11] NEF/MBSF forwards request to de-allocate TMGI(s) to MB-SMF.\n13.\t[Conditional on step 12] The MB-SMF responds to the NEF or MBSF by sending a de-allocate TMGI Response message.\n14.\t[Conditional on step 13] NEF or MBSF forwards de-allocate TMGI Response message to AF.",
      "chunk_type": "general",
      "cross_references": [
        "clause_7.3.2",
        "clause_7.2.2.3",
        "figure_7.1.1.4-1"
      ]
    },
    {
      "chunk_id": "ts_23.247_7.1.1.5",
      "section_id": "7.1.1.5",
      "section_title": "MBS Session Deletion with PCC",
      "content": "This procedure is used by the AF to release the MBS Session. This procedure may also include TMGI de-allocation. The procedures apply to both multicast and broadcast communications unless otherwise stated. This procedure releases the reserved resources in both 5GC and NG-RAN.\nFigure 7.1.1.5-1: MBS Session Deletion with PCC\n1-3.\tSame as in Figure 7.1.1.4-1.\nFor the interaction with the PCF in this procedure, the NEF/MBSF applies the same decision that was taken in step 10 in Figure 7.1.1.3-1 during the MBS Session Creation with PCC procedure:\nIf the NEF/MBSF decided to interact with the PCF, steps 4 to 5 are performed.\nIf the NEF/MBSF decided not to interact with the PCF, steps 4 to 5 are skipped.\nNOTE 1:\tIf NEF and MBSF is not deployed, the AF optionally interacts with PCF in steps 4 to 5.\n4.\tThe NEF/MBSF sends an Npcf_MBSPolicyAuthorization_Delete Request to the PCF that handles the MBS Session.\n5.\tThe PCF sends an Npcf_MBSPolicyAuthorization_Delete Response to the NEF/MBSF.\n6.\tSame as step 4 in Figure 7.1.1.4-1.\n7.\tThe MB-SMF sends the Npcf_MBSPolicyControl_Delete Request to request the deletion of the SM Policy Association with the PCF.\n8.\tThe PCF sends the Npcf_MBSPolicyControl_Delete Response to the MB-SMF.\n9.\tThe PCF de-registers at the BSF that it handles the MBS session.\n10-19.\tSame as steps 5-14 in Figure 7.1.1.4-1.",
      "chunk_type": "general",
      "cross_references": [
        "figure_7.1.1.5-1",
        "figure_7.1.1.4-1",
        "figure_7.1.1.3-1"
      ]
    },
    {
      "chunk_id": "ts_23.247_7.1.1.6",
      "section_id": "7.1.1.6",
      "section_title": "MBS Session Update without PCC",
      "content": "This procedure is used by the AF to update the MBS service area and/or MBS Service Information. Updating MBS Service Information may lead to addition of new MBS QoS Flow(s), removal of existing MBS QoS Flow(s) or update of existing MBS QoS Flow(s). The procedure applies to both multicast and broadcast communications unless otherwise stated.\nIf the MBSF acts as the MBS security function for multicast as defined in TS 33.501 [20], it may use this procedure to provide an MSK for the MBS session via the control plane. In this case the MBSF may initiate this procedure and steps 1, 2 and 10 do not apply.\nNOTE:\tThe procedure is not applicable if no MSK but only the MTK is to be updated.\nFor local multicast services and location dependent multicast services, the AF may perform a Service Announcement towards UEs to update the MBS service area before the MBS Session Update procedure is started or after the MBS Session Update procedure is completed.\nFigure 7.1.1.6-1: MBS Session Update without PCC\n1.\tAF of content provider initiates MBS Session Update to a NEF/MBSF, e.g. to update MBS service area and/or update MBS Service Information (as defined in clause 6.14), or to activate or deactivate an MBS session. AF may provide updated information for an MBS session (identified by MBS session ID) by sending an Nnef_MBSSession_Update Request (MBS Session ID, [MBS Service Information], [MBS service area], [MBS session state (active/inactive)], [NR RedCap UE Information]).\nIf geographical area information or civic address information was provided by the AF as MBS service area, NEF/MBSF translates the MBS service area to Cell ID list or TAI list.\nFor broadcast communication, the AF may subsequently update \"NR RedCap UE Information\" parameter.\n2.\tNEF checks authorization of AF.\n3.\tNEF/MBSF sends Nmbsmf_MBSSession_Update Request to MB-SMF forwarding the updated information received from the AF in step 1. If the MBSF acts as the MBS security function for multicast as defined in TS 33.501 [20], it may provide an updated multicast session security context for the MBS session in the Nmbsmf_MBSSession_Update Request.\nIf the MBS service area is not covered by the MB-SMF service area of the MB-SMF, the MB-SMF reduces the MBS service area to be within the MB-SMF service area and continues the procedure with the reduced MBS service area.\nFor broadcast communication, the NEF/MBSF forwards \"NR RedCap UE Information\" parameter to the MB-SMF, if received.\n4.\tThe MB-SMF derives any updated QoS parameters locally under consideration of the updated MBS Service Information. This may lead to addition of new MBS QoS Flow(s), removal of existing MBS QoS Flow(s) or update of existing MBS QoS Flow(s).\n5-6.\tMB-SMF may need to update MB-UPF, e.g. if new MBS QoS Flow is to be created, or existing MBS QoS Flow is to be deleted.\n7.\tFor broadcast communication, the MB-SMF continues the procedure towards the AMF and NG-RAN as specified in clause 7.3.3. For multicast communication, the MB-SMF continues the procedure towards the AMF and NG-RAN as specified in clause 7.2.5 (for service activation/deactivation), 7.2.6 (for QoS updates and service area updates).\n8.\tIf an MBS service area is being updated, the MB-SMF stores the new service area in its profile at the NRF.\n9.\tMB-SMF responds to the NEF/MBSF with a Nmbsmf_MBSSession_Update Response ([Information of area reduction]).\nIf the MB-SMF reduces the MBS service area in step 3, the MB-SMF includes result information in the response indicating that the MBS service area cannot be covered by the MB-SMF service area of the MB-SMF, and includes the Information of area reduction that relates to the reduced MBS service area.\nNOTE:\tDetails of the Information of area reduction is defined by stage 3.\n10.\tNEF/MBSF responds to the AF with a Nnef_MBSSession_Update Response ([MBS service area information]).\nIf the NEF/MBSF receives the result information in step 9 indicating that the MBS service area cannot be covered by the MB-SMF service area of the MB-SMF, the NEF/MBSF includes that result information, and the Information of area reduction.",
      "chunk_type": "general",
      "cross_references": [
        "clause_6.14",
        "clause_7.3.3",
        "clause_7.2.5",
        "figure_7.1.1.6-1",
        "ts_33.501"
      ]
    },
    {
      "chunk_id": "ts_23.247_7.1.1.7",
      "section_id": "7.1.1.7",
      "section_title": "MBS Session Update with PCC",
      "content": "For local multicast services and location dependent multicast services, the AF may perform a Service Announcement towards UEs to update the MBS service area before the MBS Session Update procedure is started or after the MBS Session Update procedure is completed.\nFigure 7.1.1.7-1: MBS Session Update with PCC\n1-2.\tSame as in Figure 7.1.1.6-1.\n3.\tFor the interaction with the PCF in this procedure, the NEF/MBSF applies the same decision that was taken in step 10 in Figure 7.1.1.3-1 during the MBS Session Creation with PCC procedure unless the MBS session update only relates to an activation or deactivation of the MBS session and/or an MBS service area update and thus no PCF interactions are required.\nIf the NEF/MBSF decided to interact with the PCF, steps 4 to 6 are performed and in step 7 an indication that the PCF has to be contacted is provided, and MBS Service Information is not provided to the MB-SMF.\nIf the NEF/MBSF decided not to interact with the PCF, steps 4 to 6 are skipped and MBS Service Information is provided to the MB-SMF in step 7.\nNOTE 1:\tIn the deployment without NEF and MBSF, the AF optionally interacts with PCF in steps 4 - 6.\n4.\tNEF/MBSF sends an Npcf_MBSPolicy_Authorization_Update Request (application session context, [MBS Service Information]) to the PCF forwarding the updated information received from the AF in step 1.\n5.\tThe PCF determines whether the update is authorized and if the update is authorized, the PCF derives the update for the QoS parameters based on the received MBS Service Information and determines whether this new QoS is allowed. If the new QoS is allowed, the PCF updates the policy information for the MBS session (as defined in clause 6.10) accordingly. If the policy information for the MBS session has changed, the PCF shall provide an indication that the PCF has to be contacted.\n6.\tThe PCF sends an Npcf_MBSPolicy_Authorization_Update Response (Result indication, [indication that the PCF has to be contacted]) to the NEF/MBSF.\nIf the update is not authorized or the new QoS is not allowed, the PCF indicates so in the response to the NEF/MBSF which in turn informs the AF about it (by sending the Nnef_MBSSession_Update Response) and ends this procedure.\n7.\tThe NEF/MBSF sends Nmbsmf_MBSSession_Update Request to the MB-SMF forwarding the updated information received from the AF in step 1. If the NEF/MBSF has decided not to interact with the PCF, the NEF/MBSF send the indication that the PCF has to be contacted, in addition.\nIf the NEF/MBSF has decided to interact with the PCF and thus provided the updated MBS Service Information to the PCF in step 4, the updated MBS Service Information is not forwarded. The NEF/MBSF forwards the indication that the PCF has to be contacted, if received from the PCF.\n8.\tIf the MB-SMF does not receive the indication that the PCF has to be contacted, the MB-SMF decides whether to interact with the PCF. If it decides not to interact with the PCF, it continues with step 11. Otherwise, the MB-SMF sends an Npcf_MBSPolicyControl_Update Request (MBS Policy Association ID, [MBS Service Information]) for the MBS session towards the PCF. The MB-SMF forwards the MBS Service Information to the PCF if received from the NEF/MBSF in the previous step 7.\nIf PCF receives MBS Service Information from the MB-SMF, the PCF performs the subsequent step 9. If the PCF does not receive MBS Service Information from the MB-SMF, the PCF identifies any updated policy information for the MBS session (as defined in clause 6.10) corresponding to the MBS Session ID received from the MB-SMF and continues with step 10.\n9.\tThe PCF determines whether the update is authorized and if the update is authorized, the PCF derives the update for the QoS parameters based on the received MBS Service Information and determines whether this new QoS is allowed. If the new QoS is allowed, the PCF updates the policy information for the MBS session (as defined in clause 6.10) accordingly.\n10.\tThe PCF responds with Npcf_MBSPolicyControl_Update Response ([updated policy information for the MBS session], Result indication).\nIf the request is not authorized or the required QoS is not allowed, the PCF indicates so in the response to the MB-SMF which in turn informs the AF about it (by sending the Nmbsmf_MBSSession_Update Response) and ends this procedure.\n11.-16.\tSame as steps 5-10 in Figure 7.1.1.6-1.",
      "chunk_type": "general",
      "cross_references": [
        "clause_6.10",
        "figure_7.1.1.7-1",
        "figure_7.1.1.6-1",
        "figure_7.1.1.3-1"
      ]
    },
    {
      "chunk_id": "ts_23.247_7.1.2",
      "section_id": "7.1.2",
      "section_title": "MB-SMF discovery and selection for multicast/broadcast session",
      "content": "To facilitate the MB-SMF discovery/selection for one multicast/broadcast MBS session, the following mechanism is used:\n-\tThe MB-SMF registers its capability related to Multicast/Broadcast Service session management (e.g. S-NSSAI(s) and the associated NSI ID(s) (if available), DNN(s), TMGI range, service area) as part of its profile to the NRF by invoking Nnrf_NFManagement_NFRegister. In addition, when a Multicast MBS session is created and the MBS Session ID is not yet included in the MB-SMF profile, the MB-SMF updates its profile towards the NRF with the MB Session ID (i.e. TMGI or source specific IP multicast address).\nNOTE:\tThe operator can preconfigure MB-SMF for specific source IP multicast address range or TMGI range.\n-\tWhen the UE joins the multicast MBS session via PDU session modification procedures, the SMF serving the PDU session invokes the Nnrf_NFDiscovery_Request Request including the MBS Session ID for multicast provided by the UE and optionally other information, i.e. the S-NSSAI and the associated NSI ID (if available), DNN, etc. to query the NRF for MB-SMF information. Based on the MBS Session ID and other information for query, the NRF decides whether an MB-SMF serving the MBS session exists (i.e. the NRF decides whether the requested MBS Session ID is in the profile of an MB-SMF, as defined in clause 7.1.1.2 or clause 7.1.1.3 or preconfigured by the operator). If so, the NRF provides in Nnrf_NFDiscovery_Request Response the information of the MB-SMF currently serving the MBS session. The SMF serving the PDU session selects the MB-SMF currently serving the multicast MBS session, based on the MB-SMF information provided by the NRF. For local MBS services, the SMF takes MB-SMF service area, UE location into account when selecting the MB-SMF. If no MB-SMF serving the Multicast MBS session exists, the NRF does not provide MB-SMF profiles in the response message to the SMF as defined in TS 29.510 [19].\n-\tWhen the shared tunnel for shared delivery is established as described in clause 7.2.1.4, the AMF may invoke the Nnrf_NFDiscovery_Request Request including MBS Session ID and Area Session ID (if received from the NG-RAN), to query the NRF for the MB-SMF information. In this case, based on the MBS Session ID and Area Session ID, the NRF provides in Nnrf_NFDiscovery_Request Response the MB-SMF information currently serving the MBS session and the Area Session ID.\n-\tWhen the Multicast MBS Session Context is deleted from the MB-SMF, e.g. due to MBS session release, the MB-SMF updates its profile towards the NRF (i.e. removing the MBS Session ID which is no longer served by the MB-SMF), if the MB-SMF performed NRF registration at multicast MBS Session Creation.\n-\tDuring MBS session information provisioning procedures defined in clause 7.1.1.2, unless the MB-SMF information is available by other means, e.g. locally configured in the NEF/MBSF/AF, the NEF/MBSF/AF queries the NRF with information of the Multicast/Broadcast Service session (as specified in clause 5.3.2.15.1) and selects the MB-SMF(s) based on the MB-SMF information provided by the NRF. For local MBS services, the NEF/MBSF/AF takes MB-SMF service area into account when selecting the MB-SMF(s).",
      "chunk_type": "general",
      "cross_references": [
        "clause_7.1.1.2",
        "clause_7.1.1.3",
        "clause_7.2.1.4",
        "clause_5.3.2.15.1",
        "ts_29.510"
      ]
    },
    {
      "chunk_id": "ts_23.247_7.1.3",
      "section_id": "7.1.3",
      "section_title": "MB-UPF discovery and selection for multicast/broadcast session",
      "content": "The selection and reselection of the MB-UPF are performed by the MB-SMF by considering MB-UPF deployment. For the local Broadcast/Multicast MBS session and location dependent MBS session, the service area is taken into consideration for MB-UPF selection.\nMB-SMF may be locally configured with the information about the available MB-UPFs, e.g. by OA&M system when MB-UPF is instantiated or removed.\nThe MB-UPF selection functionality in the MB-SMF may optionally utilize the NRF to discover MB-UPF instance(s) which is similar with UPF selection with NRF defined in the TS 23.501 [5] clause 6.3.3.2.",
      "chunk_type": "general",
      "cross_references": [
        "ts_23.501_clause_6.3.3.2",
        "ts_23.501"
      ]
    },
    {
      "chunk_id": "ts_23.247_7.2.1.1",
      "section_id": "7.2.1.1",
      "section_title": "General",
      "content": "MBS Session Join procedure is used by UEs to inform the 5GC of the UE interest in joining a multicast MBS session. The first accepted UE join request will trigger the multicast MBS session establishment towards the NG-RAN and the UE.",
      "chunk_type": "definition",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.247_7.2.1.2",
      "section_id": "7.2.1.2",
      "section_title": "Establishment of a PDU Session that can be associated with multicast session(s)",
      "content": "The PDU Session associated with Multicast MBS session(s) (i.e. the associated PDU Session) is established using the procedures as specified in TS 23.502 [6] clause 4.3.2.2 with the following differences:\nNOTE 1:\tThe DNN and S-NSSAI are used to establish the PDU session which can carry the operations related to Multicast MBS session(s), i.e. session join/leave, and can be associated with multicast MBS session(s).\n-\tIn step 2, the AMF selects an SMF capable of handling Multicast MBS sessions based on DNN and S-NSSAI, locally configured data or a corresponding SMF profile stored in the NRF. For indirect discovery, the AMF requests the SCP to select an SMF capable of handling Multicast MBS sessions.\n-\tIn step 4, if MBS subscription data for the UE (i.e. corresponding SUPI), DNN and S-NSSAI of the HPLMN or subscribed SNPN is not available, the SMF retrieves the MBS subscription data using Nudm_SDM_Get (SUPI, MBS subscription data, selected DNN, S-NSSAI of the HPLMN or subscribed SNPN, Serving PLMN ID (or PLMN ID and NID)) and subscribes to be notified when this subscription data is modified using Nudm_SDM_Subscribe (SUPI, MBS subscription data, selected DNN, S-NSSAI of the HPLMN or SNPN, Serving PLMN ID (or PLMN ID and NID)). UDM may get this information from UDR by Nudr_DM_Query (SUPI, MBS data, selected DNN, S-NSSAI of the HPLMN or subscribed SNPN, Serving PLMN ID (or PLMN ID and NID)) and may subscribe to notifications from UDR for the same data by Nudr_DM_subscribe. The MBS subscription data can also be retrieved along with the Session Management Subscription data, i.e. with additional input parameter for MBS subscription data in the Nudm_SDM services.\nNOTE 2:\tIn this release, roaming is not supported, i.e. HPLMN and Serving PLMN are the same and subscribed SNPN and serving SNPN are same.",
      "chunk_type": "general",
      "cross_references": [
        "ts_23.502_clause_4.3.2.2",
        "ts_23.502"
      ]
    },
    {
      "chunk_id": "ts_23.247_7.2.1.3",
      "section_id": "7.2.1.3",
      "section_title": "Multicast session join and session establishment procedure",
      "content": "The following steps are executed before the UE requests to join the MBS session:\n-\tThe MBS Session may have been created in the 5GC (see clause 7.1.1 for details).\n-\tThe UE registers in the PLMN or SNPN and may have established a PDU session that can be associated with multicast session(s).\n-\tThe UE has known at least the MBS Session ID of a multicast group that the UE can join, e.g. via service announcement.\nFigure 7.2.1.3-1: PDU Session modification for UE joining Multicast MBS session\n1.\tTo join a multicast group:\n-\tif there is an existing PDU session that can be used to send the UE join request for the multicast MBS Session, the UE sends a PDU Session Modification Request over that PDU session (i.e. associated PDU Session) which additionally contains one or several MBS Session ID(s) and join request. The MBS Session ID(s) indicate the multicast MBS session(s) that UE wants to join.\n-\tif the UE has no appropriate PDU session established with the DNN and S-NSSAI for the multicast MBS session, the UE joins the multicast MBS session by sending PDU Session Establishment Request for associated PDU session together with one or several MBS Session ID(s) and join request. In that case, before step 2, the network proceeds with establishment of the associated PDU session executing steps 4 to 10 of PDU Session Establishment procedure as specified in TS 23.502 [6] clause 4.3.2.2.\nNOTE 1:\tTo avoid that join requests at the MBS session start time are rejected due to many UEs joining at the same time, UEs can send join requests already before the MBS session start time if provided in service announcement as specified in clause 6.11.\n2.\t[Conditional] Based on the received MBS Session ID and join request, the SMF determines this is MBS Session join request.\nIf SMF has no information about MBS Session Context for the indicated MBS Session ID(s), SMF discovers and selects an MB-SMF for the MBS Session via the NRF as described in clause 7.1.2. If no MB-SMF is assigned for the MBS Session ID (i.e. the NRF provides empty MB-SMF profile), the SMF may select an MB-SMF and request it to configure the multicast MBS session or the SMF may reject the join request and respond to the UE with an appropriate cause value.\nNOTE 2:\tDetails about how the SMF selects an MB-SMF and requests it to configure the multicast MBS session are left to SMF implementation.\n3.\t[Conditional] For each MBS session in step 1, if the SMF has not subscribed to the MBS Session Context, it invokes Nmbsmf_MBSSession_ContextStatusSubscribe request (MBS Session ID) towards the MB-SMF to subscribe to events notifications related to the multicast MBS session and to request information about the MBS Session Context. The MB-SMF responds with the information about the indicated multicast MBS session in Nmbsmf_MBSSession_ContextStatusSubscribe response (multicast QoS flow information (e.g. QoS profile(s) for the multicast MBS session), [start time], [session state (Active/Inactive)], [Any UE indication], [multicast DL tunnel info], [multicast session security context]).\nIf it is the first time for the MB-SMF to receive Nmbsmf_MBSSession_ContextStatusSubscribe request of the indicated MBS Session from any SMF, the MB-SMF learns it is the first UE joining the multicast MBS session. For multicast transport between MB-UPF and content provider, if it is the first UE joining the multicast MBS session, and MB-UPF has not joined the multicast tree in the MBS session creation procedure, described in clause 7.1.1, the MB-SMF requests the MB-UPF to join the multicast tree towards the AF/MBSF, otherwise MB-SMF will not send the request to the MB-UPF.\nNOTE 3:\tThe MB-SMF can answer the Nmbsmf_MBSSession_ContextStatusSubscribe request either based on information received in the MBS session creation procedures in clause 7.1.1 or based on preconfigured information. The pre-configuration also includes information about the MBS session stored in the NRF. If the MB-SMF uses preconfigured information, the pre-configuration also includes MB-UPF configuration.\n4.\tThe SMF determines whether the user is authorized to join the Multicast MBS session taking into account the MBS subscription data received from the UDM and the Any UE indication if received from the MB-SMF. The SMF considers the UE as authorized to the Multicast MBS session if the UE is authorized to use multicast MBS services, and if the MBS Session ID(s) in the PDU Session Modification Request is included in the MBS subscription data or Any UE indication is received. If authorization check fails, the SMF rejects the join request with a cause value. If a UE joins prior to the start time of the multicast MBS session, the SMF may accept the join request and indicate to the UE the start time, or it may reject the join request with an appropriate error cause and optionally a back-off timer. If a UE joins while the multicast MBS session is inactive, the SMF accepts the join request. The MBS subscription data from the UDM may also contain MBS assistance information.\nNOTE 4:\tTo avoid that joins requests at the MBS session start time are rejected due to many UEs joining at the same time, the SMF can accept join requests already before the MBS session start time and indicate to the UE the start time.\n5.\tIf the join request is accepted, the SMF responds to the AMF through Nsmf_PDUSession_UpdateSMContext response (N2 SM information (PDU Session ID, MBS Session ID, [updated PDU Session information], [mapping information between unicast QoS flow(s) and multicast QoS flow (s)], [MBS Assistance Information for the MBS session]), N1 SM container (PDU Session Modification Command, [multicast session security context])) to:\n-\tcreate an MBS Session Context for the indicated MBS session in the RAN, if it does not exist in the RAN already; and\n-\tinform the NG-RAN about the relation between the Multicast MBS Session Context and the UE's PDU Session context by including the MBS Session ID and the mapping between the multicast QoS flow(s) and associated QoS flow(s).\nBased on operator policy, the SMF may prepare for 5GC Individual MBS traffic delivery fall-back. The SMF maps the received QoS information of the multicast QoS Flow into PDU Session's unicast QoS Flow information, and includes the information of the QoS Flows and the mapping information about the QoS Flows (termed \"associated QoS flow information\") in the SM information sent to RAN. The SMF compares the QFIs of the multicast QoS Flows received from the MB-SMF with QFIs in use for the PDU Session and assigns unused QFIs to the PDU Session's unicast QoS Flows corresponding to multicast QoS Flows.\nNOTE 5:\tDetailed information included in N2 SM information will be aligned with by RAN WG3.\nNOTE 6:\tThe SMF uses the same QoS in the received MBS QoS Flow QoS information for the associated QoS Flow in the unicast PDU session.\nIf the MBS session join procedure was triggered by the UE together with PDU Session Establishment procedure for the associated PDU session, the SMF provides the N2 SM information and N1 SM container for the associated PDU session in Namf_Communication_N1N2MessageTransfer service operation towards the AMF, as described in step 11 of clause 4.3.2.2.1 in TS 23.502 [6]. The N2 SM information also includes the MBS Session ID and, if 5GC individual MBS traffic delivery fall-back is supported, the mapping information between unicast QoS flow(s) and multicast QoS flow(s).\nIf the join request is rejected, the SMF responds to the AMF through Nsmf_PDUSession_UpdateSMContext response (N1 SM container (PDU Session Modification Reject)) and the message will not contain any MBS Session Context or the N2 SM information for the associated PDU session. The PDU Session Modification Reject message is forwarded to the UE via the NG-RAN, and the following steps are skipped.\nThe SMF may also include the MBS assistance information for the MBS session in N2 SM Information, if the MBS subscription data from the UDM contains the MBS assistance information which includes the ID of the MBS session that the UE requests to join. The MBS assistance information for the MBS session sent to NG-RAN is described in clause 6.17.\n6.\tThe N2 message, which includes the MBS Session ID(s) the UE has joined and, if applicable, associated QoS Flow, is sent to the NG-RAN.\nIf the MBS is supported by NG-RAN, 5GC Shared MBS traffic delivery is adopted. If the MBS is not supported by NG-RAN, 5GC Individual MBS traffic delivery is used if the PDU Session's unicast QoS Flow include QoS Flows for the multicast session.\nIf the NG-RAN supports MBS, the NG-RAN uses the MBS Session ID to determine that the PDU Session identified by the PDU Session ID is associated with the indicated multicast MBS session.\nIf the NG-RAN supports MBS, the associated unicast QoS flow information, if provided, is not used to allocate the radio resource and CN resource for corresponding QoS flows.\nNOTE 7:\tUE join request via PDU Session signalling will fail if NG-RAN rejects the PDU Session Resource setup request (e.g. due to the number of UEs reaching a limit).\n7.\t[Conditional] If shared tunnel has not been established for the multicast MBS session towards the NG-RAN node, the procedures in clause 7.2.1.4 for the establishment of shared delivery toward NG-RAN node are executed. This step is executed separately for each multicast MBS session.\n7a.\tIf the MBS Session is active, the NG-RAN configures radio resources for MBS session.\n8.\tIf the MBS Session is active, the NG-RAN node performs AN specific signalling exchange with the UE to configure the UE with radio resources for the multicast MBS session. If the NG-RAN does not support MBS and the MBS Session is active, radio resources are reconfigured for unicast transmission of the MBS data over the associated PDU session. As part of the AN specific signalling exchange, the N1 SM container (PDU Session Modification Command) is provided to the UE.\n9.\tThe NG-RAN node sends the PDU session modification response.\nIf the MBS is not supported by NG-RAN, the accepted unicast QoS flow is included in the N2 SM information. If the MBS is supported by NG-RAN, the N2 SM information further includes the indication of supporting MBS. If the target NG-RAN node support MBS multicast with reception in RRC_INACTIVE state, it indicates that in the N2 SM information.\n10.\tThe AMF invokes Nsmf_PDUSession_UpdateSMContext request ([N2 SM information]) to the SMF.\nPer the indication of whether the NG-RAN supports MBS, the SMF determines whether 5GC Individual MBS traffic delivery is used for multicast data transmission.\nNOTE 8:\tIf the shared tunnel is used, no interaction with UPF is needed for the indicated multicast MBS session\n[Conditional] This step is used for 5GC Individual MBS traffic delivery, if the related NG-RAN does not support MBS. If a shared tunnel between the UPF (PSA) and MB-UPF for 5GC Individual MBS traffic delivery has not yet been established by the SMF for the multicast MBS session, steps 11a to 11d are executed. Step 11e is executed irrespective of that.\n11a.\tThe SMF contacts the UPF to request the creation of a tunnel and provides the MBS Session ID. The UPF indicates to the SMF whether the tunnel for this multicast MBS session is newly allocated (as there can be multiple SMFs interacting with the same UPF for the same multicast MBS Session).\nIf the UPF determines to use unicast transport over N19mb, the UPF allocates a DL N19mb Tunnel endpoint for the multicast MBS session if the SMF request is the first one to allocate DL N19mb Tunnel endpoint for the multicast MBS Session in the UPF. The UPF includes the DL Tunnel Info in the response to the SMF. The DL tunnel info includes the downlink tunnel ID and the UPF address.\nIf the UPF determines to use multicast transport over N19mb, the UPF joins the multicast distribution if the SMF request is the first one for the MBS Session in the UPF. Steps 11b to 11d are skipped.\n11b.\tIf the UPF indicates the DL N19mb Tunnel is newly allocated, the SMF invokes Nmbsmf_MBSSession_ContextUpdate request (MBS Session ID, [DL tunnel info]) towards the MB-SMF for establishing the multicast MBS session transport between MB-UPF and UPF.\n11c.\tIf the DL tunnel info of the UPF is received, the MB-SMF configures the MB-UPF to transmit the multicast MBS session data towards UPF using the possibly received downlink tunnel ID.\n11d.\tThe MB-SMF responds to the SMF through Nmbsmf_MBSSession_ContextUpdate response (MBS Session ID, [multicast DL tunnel info]). If the UPF DL tunnel info for unicast transport is not received by the MB-SMF, multicast transport between MB-UPF and UPF is to be used, and the MB-SMF includes the downlink tunnel information with the low layer transport multicast address for the multicast MBS session.\n11e.\tThe SMF configures the UPF to forward the received multicast MBS session data within the PDU session. (This step may be combined with step 11a).\n12.\tThe SMF responds to the AMF with Nsmf_PDUSession_UpdateSMContext response message.\n13.\tThe MB-UPF receives multicast PDUs, either directly from the content provider or via the MBSTF that can manipulate the data.\nSteps 14 to 16 are for 5GC Shared MBS traffic delivery:\n14.\tThe MB-UPF sends multicast PDUs in the N3mb tunnel associated to the multicast MBS session to the NG-RAN. There is only one tunnel per multicast MBS session per MBS service area and NG-RAN node, i.e. all the UEs which have joined the multicast MBS session via the NG-RAN node share this tunnel for reception of the multicast MBS session data.\n15.\tVoid.\n16.\tThe NG-RAN transmits the multicast MBS session data to the UE(s) via the MBS Radio Bearer using either PTP or PTM transmission.\nIn this step or at later stage, the NG-RAN may determine to apply delivery enabling reception by UEs in RRC_INACTIVE state for the MBS session, as defined in clause 6.17.\nNOTE 9: Whether and when the NG-RAN determine to apply delivery enabling reception by UEs in RRC_INACTIVE state for the MBS session as defined in clause 6.17 is to be decided by NG-RAN.\nSteps 17 to 19 are for 5GC Individual MBS traffic delivery:\n17.\tThe MB-UPF sends multicast PDUs in the N19mb tunnel associated to the multicast MBS session to the UPF. There is only one tunnel per multicast MBS session and destination UPF, i.e. all associated PDU sessions served by the destination UPF share this tunnel.\n18.\tThe UPF forwards the multicast data towards the NG-RAN via unicast (i.e. in the N3 tunnel of the associated PDU Session).\n19.\tThe NG-RAN forwards the multicast MBS session data to the UE via unicast (i.e. over the radio bearer(s) corresponding to the associated QoS flow(s) of the associated PDU Session).\nNOTE 10:\tDetails of the DL MBS data transmission are described in clause 6.7.\nNOTE 11:\tWhen the MBSF is involved in the multicast MBS session, the tunnel between MBSTF and MB-UPF has been established in the MBS session creation procedure.",
      "chunk_type": "procedure",
      "cross_references": [
        "clause_7.1.1",
        "ts_23.502_clause_4.3.2.2",
        "clause_6.11",
        "clause_7.1.2",
        "ts_23.502_clause_4.3.2.2.1",
        "clause_6.17",
        "clause_7.2.1.4",
        "clause_6.7",
        "figure_7.2.1.3-1",
        "ts_23.502"
      ]
    },
    {
      "chunk_id": "ts_23.247_7.2.1.4",
      "section_id": "7.2.1.4",
      "section_title": "Establishment of shared delivery toward RAN node",
      "content": "In the following cases, the shared tunnel for shared delivery is established between the NG-RAN and MB-UPF:\n-\tThe first UE is included in the context of the MBS session in the NG-RAN.\nNOTE 1:\tWhen the multicast MBS session is inactive, if there is at least one UE joining the multicast MBS session is in RRC_CONNECTED state in the NG-RAN, the shared delivery is not released.\nNOTE 2:\tShare delivery establishment procedures are used when MBS supporting NG-RAN node(s) get involved in the multicast MBS session regardless of the state of the multicast MBS session.\n-\tHandover to the target NG-RAN when the shared delivery tunnel is not established in the target RAN node for this multicast MBS session.\nFigure 7.2.1.4-1: Establishment of shared delivery toward NG-RAN node\n1.\tA NG-RAN node decides to establish shared delivery for a multicast MBS session when it serves at least one UE within the multicast MBS session. For location dependent services, the NG-RAN node needs to establish shared delivery for the location dependent contents of a multicast MBS session if it serves at least one UE assigned to an MBS Session ID and Area Session ID.\n2.\tThe NG-RAN sends an N2 MBS Session request message (MBS Session ID, [Area Session ID], N2 SM information ([unicast DL tunnel Info])) towards the AMF.\nIf the NG-RAN node is configured to use unicast transport for the shared delivery, it allocates a GTP tunnel endpoint and provides the unicast DL tunnel Info in the request, which includes the GTP tunnel endpoint and NG-RAN node address. For location dependent MBS services, the NG-RAN node also provides the Area Session ID.\n3.\tThe AMF selects the MB-SMF serving the multicast MBS session, e.g. using the NRF discovery service or locally stored information. It invokes Nmbsmf_MBSSession_ContextUpdate request (MBS Session ID, [Area Session ID], N2 SM information, NG-RAN Node ID) to the MB-SMF.\nThe AMF stores the information of the NG-RAN nodes (e.g. NG-RAN Node ID) for the subsequent signaling related to the multicast MBS Session.\n4.\t[Conditional] If the MB-SMF receives the unicast DL tunnel Info in step 3 in a deployment where NG-RAN nodes share a common user plane entity, the MB-SMF only establishes the shared tunnel towards the DL GTP tunnel endpoint if the shared tunnel has not yet been established (as determined based on the stored DL GTP Tunnel endpoint(s) for the MBS session). The MB-SMF also stores the received DL GTP Tunnel and corresponding NG-RAN Node ID for the MBS session.\nTo establish the shared tunnel towards the DL GTP tunnel endpoint, the MB-SMF configures the MB-UPF to send multicast data for the multicast MBS session (or location dependent content of the multicast MBS session if an Area Session ID was received) towards that GTP tunnel endpoint via unicast transport.\n5.\tThe MB-SMF stores the information of the AMF (e.g. AMF ID) in the Multicast MBS session context (or location dependent part of the Multicast MBS Session Context if an Area Session ID was received) to enable subsequent signalling towards that AMF.\n6.\tThe MB-SMF sends Nmbsmf_MBSSession_ContextUpdate response (MBS Session ID, [Area Session ID], N2 SM information ([TMGI], multicast QoS flow information, session state (Active/Inactive), [multicast DL tunnel Info], [MBS service areas])) to the AMF. If the MB-SMF did not receive unicast DL tunnel Info in step 3, it provides the multicast DL tunnel info that includes transport multicast address (e.g. a LL SSM) and a GTP tunnel endpoint for multicast transport of the shared delivery.\n7.\tThe AMF sends an N2 MBS Session response message (MBS Session ID, [Area Session ID], N2 SM information) to the NG-RAN node. If the NG-RAN node receives the multicast DL tunnel Info of the shared delivery, it uses the transport multicast address included in the multicast DL tunnel info to join the multicast transport distribution.",
      "chunk_type": "general",
      "cross_references": [
        "figure_7.2.1.4-1"
      ]
    },
    {
      "chunk_id": "ts_23.247_7.2.2.1",
      "section_id": "7.2.2.1",
      "section_title": "General",
      "content": "This clause describes Multicast MBS Session leave requested by the UE or by the network. This clause also describes Multicast MBS Session release.",
      "chunk_type": "definition",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.247_7.2.2.2",
      "section_id": "7.2.2.2",
      "section_title": "Multicast Session leave requested by the UE",
      "content": "When the UE determines to leave the Multicast MBS session, it shall send PDU session Modification request to inform the 5GC the leaving operation. The Figure 7.2.2.2-1 describes the procedure.\nFigure 7.2.2.2-1: UE initiated Multicast MBS Session leave\n1.\tThe UE sends the PDU Session Modification Request when the UE determine to leave the multicast MBS Session. The PDU Session Modification Request carries leave indication and the MBS Session ID which the UE want to leave.\n2.\tThe AMF invokes Nsmf_PDUSession_UpdateSMContext (N1 SM container (PDU Session Modification Request)) to the SMF.\n3a.\t[Conditional] If 5GC individual MBS traffic delivery is applied towards the UE, the SMF sends an N4 Session Modification Request to the UPF (PSA). The SMF reconfigures the UPF to terminate the distribution of multicast data via the PDU session.\n3b.\t[Conditional] The UPF (PSA) sends an N4 Session Modification Response to the SMF.\nIf there are no PDU sessions to transmit the multicast MBS session data in the UPF, and unicast transport is used over N19mb, the UPF releases the DL N19mb tunnel endpoint and informs the SMF.\nIf there are no PDU sessions to transmit the multicast MBS session data in the UPF, and multicast transport is used over N19mb, the UPF leaves the multicast distribution tree of MB-UPF.\n4.\t[Conditional] If the UPF indicates the tunnel release (i.e. unicast transport was used), the SMF invokes Nmbsmf_MBSSession_ContextUpdate Request (Release, MBS Session ID, tunnel information) to release the tunnel between UPF and MB-UPF for this multicast MBS session. The MB-SMF determines whether the context update is for tunnel release or create based on whether the tunnel information exists in the multicast MBS Session Context stored in the MB-SMF or not.\n5.\t[Conditional] If the MB-SMF determines the context update is for tunnel release, the MB-SMF request to MB-UPF to release the tunnel between UPF and MB-UPF for the multicast MBS session.\n6.\t[Conditional] The MB-SMF responds to the SMF for step 4.\n7.\tThe SMF invokes the Nsmf_PDUSession_UpdateSMContext Response (PDU Session ID, N2 SM information ([MBS Session ID], [leave indication]), N1 SM container) service operation. In the N2 SM information, the MBS Session ID and the leave indication are included for informing the NG-RAN to remove the UE from this MBS session if 5GC Shared MBS traffic delivery method is used towards the UE. If 5GC Individual MBS traffic delivery method is used towards the UE, the N2 SM information does not include MBS related information.\nIn the N2 SM information, the SMF also informs the NG-RAN to release the associated QoS Flow(s), which carry or intend to carry the multicast MBS session traffic for 5GC individual MBS traffic delivery.\nThe associated QoS Flow(s) are released as defined in TS 23.502 [6] clause 4.3.3.2.\n8.\tThe AMF send N2 message (N2 SM information, N1 SM container) to the NG-RAN\n9.\tThe NG-RAN node performs the necessary AN-specific resource modification procedure toward the UE and transports the N1 SM container received in step 7 to the UE.\n10.\tThe NG-RAN node removes the UE from this multicast MBS session and sends a N2 message to the AMF.\n11.\tThe AMF transfers the N2 message received in step 9 to the SMF via the Nsmf_PDUSession_UpdateSMContext service operation.\nThe SMF updates the associated PDU session context, e.g. remove the MBS Session ID from the associated PDU session context. In addition, if associated QoS flow is used for the multicast MBS session, the SMF also removes the associated QoS flow information associated with the indicated multicast MBS session from the associated PDU session context.\n12.\t[Conditional] If the UE is the last joined one of the multicast MBS session in the SMF, The SMF also indicates that the last UE served by the SMF leaves the Multicast MBS Session, the SMF unsubscribes the notifications of the MBS Session Context status updates from the MB-SMF by invoking Nmbsmf_MBSSession_ContextStatusUnsubscribe service operation. The MB-SMF will no longer notify the SMF of the further context status updates of the multicast MBS session (e.g. activation, deactivation, update, release, etc.). For multicast transport between MB-UPF and content provider, if the SMF is the last remaining SMF that is subscribed for the MBS Session notification from the MB-SMF, i.e. if it is the last UE leaving the MBS session, the MB-SMF requests the MB-UPF to stop forwarding the multicast MBS session data and may request the MB-UPF to leave the multicast tree towards the AF/MBSF, if the MB-UPF joins the multicast tree when the first UE joins the MBS session.\n13.\t[Conditional] If the UE is the last UE in this RAN node for this multicast MBS session, the NG-RAN release shared delivery between NG-RAN and MB-UPF as described in clause 7.2.2.4.\nIf release of the PDU Session associated with a multicast MBS session is triggered, corresponding procedures between UE, NG-RAN, AMF, and SMF are performed as described in clause 4.3.4 of TS 23.502 [6], and SMF triggers the UE leave the multicast MBS session by performing steps 3-6 in Figure 7.2.2.2-1 for each multicast MBS session(s) associated with the PDU Session, and UE considers as left all the multicast MBS sessions associated with the PDU Session.\nNOTE:\tIf the associated PDU Session is released, the UE leaves MBS Session(s) associated with that PDU session implicitly. To resume the reception of the related MBS service(s), the UE needs to initiate the procedures as defined in clause 7.2.1 to re-join the MBS Session(s).\nIf the UE deregistration procedure is executed, corresponding procedures between UE, NG-RAN, AMF, and SMF are performed as described in clause 4.2.2.3 of TS 23.502 [6], and SMF performs steps 3-6 in Figure 7.2.2.2-1 for all multicast MBS sessions joined by the UE. When the PDU Session Release procedure or UE deregistration procedure is executed, according to the UE context, NG-RAN performs step 10 for each multicast MBS session associated with the released PDU Session(s).",
      "chunk_type": "requirement",
      "cross_references": [
        "ts_23.502_clause_4.3.3.2",
        "clause_7.2.2.4",
        "ts_23.502_clause_4.3.4",
        "clause_7.2.1",
        "ts_23.502_clause_4.2.2.3",
        "figure_7.2.2.2-1",
        "ts_23.502"
      ]
    },
    {
      "chunk_id": "ts_23.247_7.2.2.3",
      "section_id": "7.2.2.3",
      "section_title": "Multicast session leave requested by the network or MBS session release",
      "content": "This procedure applies to the following scenarios:\n1.\tWhen the MB-SMF decides to release an MBS Session:\n-\tbased on a request from the AF (directly or via the NEF/MBSF);\nIn this scenario, the MB-SMF notifies the SMF of multicast session release, and the SMF initiates procedures to remove all joined UEs from the MBS session.\n2.\tWhen the SMF decides to remove a UE from an MBS session:\n-\tbased on a request from the UDM (subscription change); or\n-\tdue to local and location dependent MBS service is described in clause 7.2.4; or\n-\tdue to network internal reasons.\nFor the active MBS session, to release radio resources as early as possible, the MB-SMF may trigger Multicast Session Deactivation towards the NG-RAN as specified in steps 5-9 of clause 7.2.5.3, prior to or in parallel with triggering MBS Session Release to the SMF.\nFigure 7.2.2.3-1: MBS Session Release or Multicast session leave requested by the network\n1a.\tFor MB-SMF triggered MBS session release, the SMF receives Nmbsmf_MBSSession_ContextStatusNotify (MBS Session ID, multicast session release) from the MB-SMF with MBS Session ID. The SMF checks all joined UEs and perform step 2 to step 9 for each UE.\n1b.\tThe SMF decides to remove a UE from the MBS session without MBS session release (e.g. due to UE moving out of MBS service area for local or location dependent MBS service as described in clause 7.2.4).\n2.\tFor UEs without activated UP, the SMF may perform the same procedure as defined in step 3-7 in clause 7.2.5.2.\nAlternatively, for UEs without activated UP, the SMF does not trigger message to the AMF, instead the SMF marks that the UE is to be informed of the MBS Session release. In this case, the SMF initiates PDU Session Modification to inform the UE of the MBS Session release at next UP activation of the associated PDU Session, if needed.\n3.\tFor the joined UEs with UP activated, the SMF invokes Namf_Communication_N1N2MessageTransfer to the AMF. The N1 SM container indicates UE removed from MBS session with appropriate cause (e.g. MBS session release, out of MBS service area, etc.). In N2 SM information, the SMF informs the NG-RAN to remove the UE from the MBS session. If there are associated QoS Flow(s) for individual delivery, the SMF also releases those QoS Flow(s) as specified in TS 23.502 [6] clause 4.3.3.2.\n4.\tThe AMF sends N2 Request to the NG-RAN.\n5.\tThe NG-RAN transports the N1 SM container (PDU Session Modification Command (MBS Session ID, UE removed from MBS session with appropriate cause)) to the UE.\n6.\tThe NG-RAN performs radio resource modification. If there are no joined UEs in the MBS session, the NG-RAN releases the radio resources.\n7.\tIf there are no joined UEs in the MBS session, for unicast transport of N3mb, the NG-RAN initiates the DL tunnel release towards MB-UPF via AMF and MB-SMF. For multicast transportation of N3mb, the NG-RAN performs IGMP/MLD Leave for the MBS session. See clause 7.2.2.4 for details.\n8.\tThe NG-RAN sends N2 Response to the AMF. If there are no joined UEs in the MBS session, the MBS Session Context is removed from the NG-RAN.\n9.\tThe AMF transfers the N2 message received in step 8 to the SMF via the Nsmf_PDUSession_UpdateSMContext service operation. The SMF removes the UE from the MBS Session.",
      "chunk_type": "general",
      "cross_references": [
        "clause_7.2.4",
        "clause_7.2.5.3",
        "clause_7.2.5.2",
        "ts_23.502_clause_4.3.3.2",
        "clause_7.2.2.4",
        "figure_7.2.2.3-1",
        "ts_23.502"
      ]
    },
    {
      "chunk_id": "ts_23.247_7.2.2.4",
      "section_id": "7.2.2.4",
      "section_title": "Release of shared delivery toward RAN node",
      "content": "In the following case, the shared delivery tunnel may be released between NG-RAN and MB-UPF:\n-\tThe last UE is excluded from the context of the multicast MBS session in the NG-RAN node;\n-\tHandover to the target NG-RAN when the UE is the last UE for this multicast MBS session in the source NG-RAN node during handover preparation phase known by the source NG-RAN node;\n-\tHandover to the target E-UTRAN when the UE is the last UE for this multicast MBS session in the source NG-RAN node;\n-\tMBS session deletion.\nNOTE:\tWhen the multicast MBS session is inactive, the shared delivery is not released if there is at least one UE is in RRC_CONNECTED state for this multicast MBS session.\nFigure 7.2.2.4-1: Release of shared delivery toward RAN node\n1.\tA RAN node decides to release shared delivery for a multicast MBS session, e.g. because it no longer serves at least one UE within the multicast MBS session. For location dependent services, the NG-RAN node may release shared delivery for the location dependent contents of a multicast MBS session if it no longer serves at least one UE assigned to an MBS Session ID and Area Session ID.\n2.\tThe NG-RAN node sends N2 MBS Session release request (MBS Session ID, [Area Session ID], [N2 SM information ([GTP tunnel info], release indication)])]) to the AMF. For location dependent services, the NG-RAN node also provides the Area Session ID. The RAN node includes the unicast DL tunnel info if unicast transport is used for the shared delivery. If the NG-RAN node was configured to use multicast transport for the 5GC Shared MBS traffic delivery, the NG-RAN node does not include the N2 SM information in the message.\n3.\t[Conditional] If the N2 SM information is received or it is the last RAN node controlled by the AMF serving the multicast MBS session, the AMF invokes Nmbsmf_MBSSession_ContextUpdate request (MBS Session ID [Area Session ID], [leave indication], [N2 SM information ([DL GTP tunnel endpoint ID])], NG-RAN Node ID) to the MB-SMF corresponding to the MB-SMF ID stored in the AMF for the MBS Session ID. If it is the last RAN node controlled by the AMF serving the multicast MBS session identified by the MBS Session ID or both the MBS Session ID and Area Session ID (if exists), the leave indication is included.\n4.\t[Conditional] If unicast transport was used towards the NG-RAN node, the MB-SMF determines whether the context update is for tunnel release or create based on the release indication in the N2 container. If the MB-SMF determines the context update is for tunnel release, it performs the following:\nIf the unicast transport was used towards the NG-RAN in a deployment where NG-RAN nodes share a common user plane entity, the MB-SMF removes the received NG-RAN Node ID and possibly DL GTP tunnel endpoint from the stored NG-RAN Node ID(s) for the DL GTP tunnel endpoint for the MBS session, and checks whether the DL GTP tunnel is in use by other NG-RAN nodes based on the stored NG-RAN Node ID(s) for DL GTP tunnel endpoint for the MBS session.\nFor the deployment where NG-RAN nodes do not share a common user plane entity, the DL GTP tunnel will not be used by other NG-RAN nodes.\nIf the related DL GTP tunnel is not in use by other NG-RAN nodes the MB-SMF sends N4mb Session Modification to the MB-UPF to release the N3mb tunnel used for the multicast MBS session (or location dependent content of the multicast MBS session if an Area Session ID was received) towards that NG-RAN node using the received GTP tunnel info.\n5.\t[Conditional] The MB-SMF responses to the AMF with MBS Session ID and Area Session ID if received. If leave indication is received, the MB-SMF also removes the information of the AMF from the context of the multicast MBS session.\n6.\tThe AMF removes the information of the RAN node from the context of the multicast MBS session (or location dependent part of the multicast MBS session if an Area Session ID was received).\n7.\tThe AMF sends an N2 MBS Session release response (MBS Session ID, [Area Session ID]) to the RAN node. The NG-RAN node deletes the GTP tunnel info (if unicast transport is used for the shared delivery) or sends IGMP/MLD leave message to leave the multicast distribution tree (if multicast transport is used for the shared delivery). The NG-RAN node releases local resources for the multicast MBS session.",
      "chunk_type": "general",
      "cross_references": [
        "figure_7.2.2.4-1"
      ]
    },
    {
      "chunk_id": "ts_23.247_7.2.3.1",
      "section_id": "7.2.3.1",
      "section_title": "General",
      "content": "UE may move from one NG-RAN node to another NG-RAN node after UE has joined the MB Session. There are various mobility scenarios possible, depending on whether one of the involved NG-RAN nodes supports MBS.\nDuring an active MBS Session, mobility between an NG-RAN supporting MBS and an NG-RAN node not supporting MBS requires the mobility procedure to provide the appropriate MBS traffic delivery method at the target NG-RAN node.",
      "chunk_type": "definition",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.247_7.2.3.2",
      "section_id": "7.2.3.2",
      "section_title": "Xn based handover from MBS supporting NG-RAN node",
      "content": "This clause describes an Xn based handover with MBS traffic delivered to the UE at the source NG-RAN node supporting MBS.\nFigure 7.2.3.2-1: Xn based handover with MBS Session\nThe following additions apply compared to clause 4.9.1.2 of TS 23.502 [6]:\nBefore Handover:\nThe source NG RAN has been provided with MBS Session Resource information (including the MBS Session ID and multicast QoS flow information) and the UE Context information contains a mapping information within the PDU Session Resource associated with the MBS Session Resource, e.g. including mapped unicast QoS Flows associated with the multicast QoS flow(s) of the MBS Session Resource.\nHandover Preparation Phase:\nAt Xn handover, the target NG-RAN is provided with MBS session information by the source NG-RAN which causes:\n-\tan MBS non-supporting target NG-RAN node to prepare the unicast resources according to associated QoS flow(s) information.\n‐\tan MBS supporting target NG-RAN node to allocate to the UE shared NG-RAN resources according to the MBS session information. If the 5GC Shared MBS traffic delivery for the indicated multicast MBS Session has not been established in target NG-RAN, target NG-RAN triggers setup of the resources for the 5GC Shared MBS traffic delivery, see clause 7.2.1.4 for details.\n1.\tTarget NG-RAN to AMF: the target NG-RAN sends N2 Path Switch Request to AMF.\nThe target NG-RAN node, if MBS-capable, indicates it supports of MBS to SMF in N2 SM information. Per the received N2 SM information, the SMF knows whether the target NG-RAN node supports MBS and determines the delivery method, i.e. whether the 5GC Shared MBS traffic delivery or 5GC Individual MBS traffic delivery is used for MBS data transferring.\nThe SMF differentiates two cases:\nCase A) The target NG-RAN supports MBS. Step 3 applies and step 4 is skipped.\n3.\tSMF to UPF: The SMF invokes N4 Session Modification procedure with the UPF (PSA) only for unicast PDU Session.\nCase B) The target NG-RAN does not support MBS. Step 3 is skipped, step 4 applies.\n4.\tThis step is the same as described in step 11 of clause 7.2.1.3.\nThe details of how to perform data forwarding refers to clause 7.2.3.5.\n5.\tSMF to AMF: The SMF responds to AMF through Nsmf_PDUSession_UpdateSMContext response.\n6.\tAMF to target NG-RAN: The AMF sends the path switch Ack to target NG-RAN.",
      "chunk_type": "general",
      "cross_references": [
        "ts_23.502_clause_4.9.1.2",
        "clause_7.2.1.4",
        "clause_7.2.1.3",
        "clause_7.2.3.5",
        "figure_7.2.3.2-1",
        "ts_23.502"
      ]
    },
    {
      "chunk_id": "ts_23.247_7.2.3.3",
      "section_id": "7.2.3.3",
      "section_title": "N2 based handover from MBS supporting NG-RAN node",
      "content": "This clause describes the N2 based handover with MBS traffic delivered to the UE at the source NG-RAN node supporting MBS.\nFigure 7.2.3.3-1: N2 based handover with MBS Session\nThe following additions apply compared to clause 4.9.1.3 of TS 23.502 [6]):\n1.\tSource NG-RAN to S-AMF: Handover Required (RAN container (MBS Session information, associated PDU session information, [associated QoS flow information and corresponding multicast QoS flow information])).\n2.\t[Conditional] S-AMF to T-AMF: The T-AMF is provided with associated PDU Session information and the MBS session related information.\n3.\tT-AMF and SMF(s): T-AMF interacts with SMF via Nsmf_PDUSession_UpdateSMContext request/response. In the response sent by SMF, multicast MBS session related information (i.e. MBS session ID and optionally the mapping between the multicast QoS flow(s) and associated QoS flow(s)), is included in the N2 SM information.\n4.\tT-AMF to Target NG-RAN: The Target NG-RAN prepares the radio resource based on the received information:\n-\tIf the Target NG-RAN does not support MBS, the MBS Session related information is not used. The Target NG-RAN uses the associated PDU Session information to allocate resource to deliver MBS data. The MBS data are transmitted via the associated QoS flows within the associated PDU Session.\n-\tIf the Target NG-RAN supports MBS, the Target NG-RAN uses the multicast MBS Session related information to allocate RAN resources to deliver the MBS data. If 5GC Shared MBS traffic delivery for the indicated multicast MBS session has not been established towards the Target NG-RAN, the Target NG-RAN initiates the shared delivery establishment towards the MB-SMF via AMF as described in clause 7.2.1.4.\n5.\tTarget NG-RAN to T-AMF: The target NG-RAN sends Handover Request Ack to T-AMF.\nThe target NG-RAN node, if MBS-capable, indicates it supports MBS to SMF in N2 SM information. Per the received N2 SM information, the SMF knows whether the target NG-RAN node supports MBS and determines the delivery method, i.e. whether the 5GC Shared MBS traffic delivery or 5GC Individual MBS traffic delivery is used for MBS data transferring.\n12.\tT-AMF to SMF: The AMF invokes Nsmf_PDUSession_UpdateSMContext request towards SMF, the message includes the received N2 SM information received from the target NG-RAN.\n13-14.\tSame as described in steps 3-4 of clause 7.2.3.2.\nThe details of how to perform data forwarding, refers to clause 7.2.3.5.\n15.\tSMF to T-AMF: The SMF sends the Nsmf_PDUSession_UpdateSMContext Response to the T-AMF.",
      "chunk_type": "general",
      "cross_references": [
        "ts_23.502_clause_4.9.1.3",
        "clause_7.2.1.4",
        "clause_7.2.3.2",
        "clause_7.2.3.5",
        "figure_7.2.3.3-1",
        "ts_23.502"
      ]
    },
    {
      "chunk_id": "ts_23.247_7.2.3.4",
      "section_id": "7.2.3.4",
      "section_title": "Xn/N2 based handover from non-MBS supporting NG-RAN node",
      "content": "When the UE has joined the multicast MBS session and the source NG-RAN node does not support MBS, the 5GC Individual MBS traffic delivery method is used for the multicast MBS session data delivery. When the Xn/N2 based handover procedure is triggered, the UE is handed over to the target NG-RAN node per existing Xn /N2 based handover procedure defined in TS 23.502 [6].\nThe following applies for an Xn based handover from an NG-RAN node not supporting 5G MBS:\n-\tThe source NG-RAN node requests the associated QoS Flow(s) in the associated PDU session to be handed over to the target NG-RAN node.\n-\tIn the Path Switch Request message, the target NG-RAN node, if MBS-capable, indicates it supports MBS to the SMF in the N2 SM information.\n-\tAfter successful handover, if the target NG-RAN node supports MBS, the SMF triggers modification of the associated PDU Session at the target NG-RAN node by including the multicast MBS session related information in N2 SM Information as described in step 7 of clause 7.2.1.3, which may trigger the target NG-RAN node to initiate establishment of shared delivery as described in clause 7.2.1.4. NG-RAN provides the response to the request for the modification of the PDU session when the shared delivery of the MBS session data to the related UE (if applicable) is available\n-\tBased on the response of PDU session modification procedure, the SMF changes the MBS session data delivery method from 5GC Individual MBS traffic delivery method to 5GC shared MBS traffic delivery method, and sends N4 Session modification message to UPF to configure UPF to not forward the received multicast MBS session data via the associated PDU Session. If there are no multicast MBS session data forwarding via the associated PDU session(s) needed, the SMF may also release the shared tunnel between the UPF and MB-UPF.\nThe following applies for an N2 based handover from an NG-RAN node not supporting MBS:\n-\tDuring handover preparation phase, the SMF includes the multicast MBS session related information in N2 SM Information as described in step 7 of clause 7.2.1.3 and sends it to the target NG-RAN. The target NG-RAN, if MBS-capable, indicates it supports MBS to SMF in N2 SM information. If the target NG-RAN node supports MBS, the target NG-RAN node adds the UE into the MBS Session Context. If 5GC Shared MBS traffic delivery for the indicated multicast MBS session has not been established towards the target NG-RAN, the target NG-RAN uses the multicast MBS Session related information to allocate RAN resources to deliver the MBS data and initiates the shared delivery establishment towards the MB-SMF as described in clause 7.2.1.4.\n-\tBased on the received MBS support information in N2 SM information from the target NG-RAN, the SMF determines the MBS data delivery method for the multicast MBS session. The SMF configures UPF to not forward the received multicast service data to the associated PDU Session via N4 Session modification message, i.e. SMF changes 5GC individual MBS traffic delivery to 5GC shared MBS traffic delivery. If there are no multicast MBS session data forwarding via the associated PDU session(s), the SMF may also release the shared tunnel between the UPF and MB-UPF.",
      "chunk_type": "general",
      "cross_references": [
        "clause_7.2.1.3",
        "clause_7.2.1.4",
        "ts_23.502"
      ]
    },
    {
      "chunk_id": "ts_23.247_7.2.3.5",
      "section_id": "7.2.3.5",
      "section_title": "Minimization of data loss",
      "content": "To minimize data loss of a multicast MBS session during the handover procedure the following functions apply:\n-\tFor each MBS QoS flow, the MB-UPF adds a sequence number in each data packet of the MBS session sent by the MB-UPF and forwarded to all related NG-RAN nodes and UPFs via GTP-U tunnel. When the UPF forwards the received MBS data packet, the sequence number shall not be changed.\n-\tIf both the source NG-RAN node and target NG-RAN node support MBS, to minimize data loss of the MBS session either of, or a combination of, the following methods may be applied, as specified in TS 38.300 [9]:\n-\tData may be forwarded from source NG-RAN node to target NG-RAN node. In handover preparation phase, the MBS progress information (i.e. PDCP number) is exchanged between source NG-RAN node and target NG-RAN node.\n-\tNG-RAN nodes share a common user plane entity, denoted as shared NG-U termination in TS 38.300 [9], which allows the allocation of identical PDCP numbers to MBS users data when delivered to UEs in cells served by different NG-RAN nodes.\n-\tIf source NG-RAN node supports MBS and target NG-RAN node does not support MBS, the multicast MBS session data is forwarded from source NG-RAN node to target NG-RAN node via data forwarding tunnels allocated by the target NG-RAN node associated with the mapped unicast QoS flows within the associated PDU session according to the data forwarding mechanism defined in TS 23.502 [6].\n-\tIf source NG-RAN node does not support MBS and target NG-RAN node supports MBS, for Xn/N2 handover, the multicast MBS session data is forwarded to the target NG-RAN node as the data forwarding mechanism defined in TS 23.502 [6]. Directly after the handover the target NG-RAN node thus still receives MBS session data via individual delivery. The UPF forwards multicast MBS session data within the associated PDU session which includes the sequence number received from the MB-UPF to the target NG-RAN node. Shared delivery of MBS data towards the target RAN node is being established as described in clause 7.2.1.4 and the target RAN node receives sequence numbers as part of the MBS data with sequence numbers via shared delivery.\nNOTE:\tFor N2 handover, the detail mechanism of how to transmit the received forwarded multicast MBS session data to UE is defined by RAN WGs.",
      "chunk_type": "general",
      "cross_references": [
        "clause_7.2.1.4",
        "ts_38.300",
        "ts_23.502"
      ]
    },
    {
      "chunk_id": "ts_23.247_7.2.3.6",
      "section_id": "7.2.3.6",
      "section_title": "Xn/N2 based handover for inactive MBS session",
      "content": "If the MBS session is in Inactive state, the following differences apply as compared to the handover procedures for the MBS session in Active state:\n-\tThe target NG-RAN is provided with the MBS session ID, but is not provided with Active MBS Session Information by the source NG-RAN as specified in TS 38.423 [24] and in TS 38.413 [15].\n-\tFor Xn/N2 based handover, the information that MBS session is Inactive state is implied by the lack of Active MBS Session Information provided from the source RAN node towards the target RAN node.\n-\tFor the MBS supporting NG-RAN node, the target NG-RAN establishes the shared tunnel with the MB-UPF as usual, if it hasn't been established before. However, as the MBS session is in Inactive state, the NG-RAN node will not allocate related radio resource.\nNOTE 1:\tThe MBS Session Inactive state is provided by MB-SMF to NG-RAN in the N2 SM information in step 7 of clause 7.2.1.4.\n-\tAfter a handover to a target NG-RAN node not supporting MBS, the SMF removes the associated QoS flow(s) information.\nNOTE 2:\tWhether the associated QoS Flow(s) are removed from UE, NG-RAN, or only resource in NG-RAN is removed is up to implementation.",
      "chunk_type": "general",
      "cross_references": [
        "clause_7.2.1.4",
        "ts_38.423",
        "ts_38.413"
      ]
    },
    {
      "chunk_id": "ts_23.247_7.2.3.7",
      "section_id": "7.2.3.7",
      "section_title": "Connection Resume in RRC_INACTIVE procedure",
      "content": "If an MBS session is in Inactive state, the UE may be in CM-CONNECTED with RRC_INACTIVE state. If an MBS Session is in Active state, the UE may also be in CM-CONNECTED with RRC_INACTIVE state as specified in clause 16.10.5.2 of TS 38.300 [9].\nThe UE may resume the connection in a different NG-RAN node as specified in clauses 4.8.2.2 and 4.8.2.2a of TS 23.502 [6], with following enhancement when the context retrieval is successful:\n-\tFor an MBS supporting NG-RAN:\n-\tif the UE context retrieved from the last serving NG-RAN includes MBS session information and the NG-RAN node has not yet established the 5GC Shared MBS traffic delivery for the MBS session, the NG-RAN establishes the 5GC Shared MBS traffic delivery as specified in clause 7.2.1.4. The NG-RAN then sends Path Switch Request indicating the MBS support information;\n-\tif the UE context retrieved from the last serving NG-RAN does not include MBS session information, Path Switch Request sent from NG-RAN includes the MBS support information. Based on the MBS support information, the SMF, after acknowledging the path switch request, provides the MBS related information and if applicable the associated QoS flow(s) information to the NG-RAN as specified in clause 7.2.1.3. The NG-RAN establishes the 5GC Shared MBS traffic delivery as specified in clause 7.2.1.4.\n-\tFor an MBS non-supporting NG-RAN, Path Switch Request sent from NG-RAN does not include the MBS support information. If the MBS session is still inactive, the SMF, after acknowledging the path switch request, removes the associated QoS flow(s) information if it was provided before.\nIf the UE context retrieval fails, the UE is moved into RRC_IDLE state as per TS 38.300 [9]. The UE initiates the NAS signalling recovery including activating PDU Session(s) (see TS 24.501 [25]). When the associated PDU session(s) is activated during registration procedure (see clause 4.2.2.2.2 of TS 23.502 [6]) or service request procedure (see clause 4.2.3.2 of TS 23.502 [6]), clause 7.2.8 applies.\nNOTE:\tAs specified in clause 4.2.2.2.2 of TS 23.502 [6], parts of the service request procedure can also be executed during the Mobility Registration Update procedure.",
      "chunk_type": "procedure",
      "cross_references": [
        "ts_38.300_clause_16.10.5.2",
        "clause_7.2.1.4",
        "clause_7.2.1.3",
        "ts_23.502_clause_4.2.2.2.2",
        "ts_23.502_clause_4.2.3.2",
        "ts_23.502_clause_7.2.8",
        "ts_38.300",
        "ts_23.502",
        "ts_24.501"
      ]
    },
    {
      "chunk_id": "ts_23.247_7.2.3.8.1",
      "section_id": "7.2.3.8.1",
      "section_title": "General",
      "content": "The procedures in clauses 7.2.3.2, 7.2.3.3, 7.2.3.4, 7.2.3.6 and 7.2.3.7 apply with the following additions:\n-\tDuring Xn handover, if the target NG-RAN node support MBS multicast with reception in RRC_INACTIVE state, it indicates to the SMF in the N2 SM information in the Path Switch Request message that it supports MBS multicast with reception in RRC_INACTIVE state.\n-\tDuring N2 handover, if the target NG-RAN node support MBS multicast with reception in RRC_INACTIVE state, it indicates to the SMF in the N2 SM information in the Handover Request Ack message that it supports MBS multicast with reception in RRC_INACTIVE state.\n-\tIf the MBS assistance information is available at the SMF for an MBS session that the UE joined:\n-\tIf there is signalling of MBS session related information from SMF to target RAN node, the SMF includes MBS Assistance Information in the N2 SM information.\n-\tFor N2-based handover, when the SMF provides the MBS session related information as part of the associated PDU Session context data as specified in the existing procedures, the SMF also includes the MBS Assistance Information in the N2 SM information.\n-\tFor Xn-based handover or Connection Resume towards an target RAN node that supports MBS multicast with reception in RRC_INACTIVE state, if the source RAN does not support MBS multicast with reception in RRC_INACTIVE state, after successful handover the SMF triggers a modification of the associated PDU Session and provides the MBS Assistance Information in N2 SM Information.\n-\tFor Xn-based handover or Connection Resume, the MBS session information transferred from source NG-RAN towards target NG-RAN also include MBS assistance information for the MBS session if such information is available at the source RAN node as specified in TS 38.300 [9].\nNOTE 1:\tIn deployments where not all the MBS supporting NG RAN nodes support delivery of multicast MBS session data to UEs in RRC_INACTIVE state, a source NG-RAN node not supporting delivery of multicast MBS session data to UEs in RRC_INACTIVE state will not provide MBS assistance information for the MBS session to the target NG-RAN node.\nNOTE 2:\tIt is assumed that a RAN node not supporting delivery of multicast MBS session data to UEs in RRC_INACTIVE state ignores the MBS assistance information for the MBS session.\nFor a UE that is receiving multicast MBS data in CM-CONNECTED with RRC_INACTIVE state, the scenarios for UE mobility are as follows:\n-\tUE moves to new cell within the RAN Notification Area (RNA).\n-\tUE moves outside the current RAN Notification Area but within the current Registration Area (RA).\n-\tUE moves out of the current Registration Area.",
      "chunk_type": "definition",
      "cross_references": [
        "ts_38.300"
      ]
    },
    {
      "chunk_id": "ts_23.247_7.2.3.8.2",
      "section_id": "7.2.3.8.2",
      "section_title": "Mobility of UE in RRC_INACTIVE state receiving MBS data within RNA",
      "content": "When a UE in RRC_INACTIVE state is receiving ongoing MBS session data and moves to a new cell within the RNA, the UE may receive the MBS session data in RRC_INACTIVE state or resume the connection as specified in TS 38.300 [9].",
      "chunk_type": "general",
      "cross_references": [
        "ts_38.300"
      ]
    },
    {
      "chunk_id": "ts_23.247_7.2.3.8.3",
      "section_id": "7.2.3.8.3",
      "section_title": "Mobility of UE in RRC_INACTIVE state receiving MBS data out of RNA and within RA",
      "content": "When a UE in RRC_INACTIVE state is receiving multicast MBS session data, if the UE moves out of the RNA and within the RA, the UE resumes the connection in the same way as specified in clause 7.2.3.7.",
      "chunk_type": "general",
      "cross_references": [
        "clause_7.2.3.7"
      ]
    },
    {
      "chunk_id": "ts_23.247_7.2.3.8.4",
      "section_id": "7.2.3.8.4",
      "section_title": "Mobility of UE in RRC_INACTIVE state receiving MBS data out of RA",
      "content": "When the UE in RRC_INACTIVE receiving multicast MBS session data, if the UE moves out of the RA, the UE initiates the Mobility Registration Update procedure to activate the associated PDU session(s) as specified in clause 4.2.2.2.2 of TS 23.502 [6]. Hence the shared delivery (if not already established) or the individual delivery can be established towards the NG-RAN node to enable delivery of multicast MBS session data to the UEs.",
      "chunk_type": "general",
      "cross_references": [
        "ts_23.502_clause_4.2.2.2.2",
        "ts_23.502"
      ]
    },
    {
      "chunk_id": "ts_23.247_7.2.4.1",
      "section_id": "7.2.4.1",
      "section_title": "General",
      "content": "The clause captures the procedural enhancement to support Location dependent MBS service and the Local MBS service described in clause 6.2.",
      "chunk_type": "definition",
      "cross_references": [
        "clause_6.2"
      ]
    },
    {
      "chunk_id": "ts_23.247_7.2.4.2.0",
      "section_id": "7.2.4.2.0",
      "section_title": "Creation for location dependent MBS session",
      "content": "For location dependent MBS, the MBS session creation procedure is performed as defined in clause 7.1.1.2 with the following additions and difference:\n-\tMultiple AFs may start the same Multicast MBS session with different content in different MBS service areas. The AF (or NEF/MBSF if involved) selects MB-SMF for different MBS service areas.\n-\tFor each MBS service area, the AF creates a location dependent component of an MBS session for that service area towards the MB-SMF and provides the service area, which may be via NEF or MBSF. The MB-SMF additionally returns the Area Session ID allocated by MB-SMF in the response to a request to create a location dependent component of a Multicast MBS session, and the NEF forwards this Area Session ID to the AF. The AF provides the Area Session ID in subsequent requests related to that location dependent component of the MBS session.\n-\tWhen requesting the creation of a location dependent component of the MBS session for a service area, the AF provides an indication that the request is for the creation of a location dependent component of the MBS session.\n-\tThe NEF, if involved in the MBS Session, maps MBS service areas of external format (if any) to network internal format (list of cells, TAIs).\n-\tMB-SMF allocates Area Session ID, and updates its NF profile towards the NRF with the MBS Session ID, MBS service area and Area Session ID.\nNOTE:\tFor a location dependent service provided in different MBS service areas within the same SMF service area, it is assumed that one MB-SMF is used for an MBS Session.\n-\tThe QoS of Multicast MBS session is determined based on the service requirements per MBS Session. MB-SMF assign the same QFI for MBS QoS Flow with the same QoS requirement in different MBS service areas.\n-\tThe MB-SMF configures the MB-UPF separately for each service area. The MB-SMF may select the MB-UPF based on the MBS service area.\n-\tAll MBS service area(s) of the location dependent MBS session are indicated to the UE in the Service Announcement as defined in clause 6.11.\n-\tThe AF transmits the DL media streams to MB-UPF via tunnels to differentiate the content delivered to different areas.",
      "chunk_type": "general",
      "cross_references": [
        "clause_7.1.1.2",
        "clause_6.11"
      ]
    },
    {
      "chunk_id": "ts_23.247_7.2.4.2.1",
      "section_id": "7.2.4.2.1",
      "section_title": "UE join location dependent Multicast MBS session and establishment procedure",
      "content": "The location dependent multicast session join and establishment procedure is performed as defined in clause 7.2.1 with the following additions:\n-\tThe location dependent Multicast MBS session is created as described in clause 7.2.4.2.0.\n-\tThe UE may have information about the location dependent multicast service including all MBS service areas of the location dependent MBS session via Service Announcement as specified in clause 7.2.4.3.1.\n-\tIf the UE determines that it is in MBS service area of the location dependent MBS session based on the information about local multicast service e.g. obtained via Service Announcement, the UE sends Join Request to join the multicast group. If the UE determines that it is outside all MBS service area of the location dependent MBS session, the UE does not send the Join Request.\n-\tIf SMF requires information about the multicast MBS Session Context for the indicated MBS Session ID, the SMF requests MB-SMF information via Nnrf_NFDiscovery_Request Request (MBS Session ID, UE location). The SMF should provide the TAI where the UE is located as input for the MB-SMF discovery. If the NRF does not have information about service areas for an MBS Session ID in the MB-SMF profile but obtains a TAI in combination with MBS Session ID as query parameter, the NRF ignores the TAI and provides the MB-SMF profile matching the MBS Session ID.If the TAI is not included, but the related MB-SMF include the service area, the NRF return all the MB-SMF associated with that MBS Session ID.\nNOTE 1:\tThe AMF provides the User Location Information of the UE (cell ID and current tracking area ID) towards the SMF within Nsmf_PDUSession_CreateSMContext request and if the location changed also in Nsmf_PDUSession_UpdateSMContext request (as used for the join) as specified in clauses 4.3.2.2.1 and 4.3.3.2 of TS 23.502 [6].\n-\tThe NRF provides information about the MB-SMF(s) serving the Multicast MBS session at the possible indicated location. The NRF provides the service areas and Area Session IDs for the Multicast MBS session as part of the MB-SMF profile(s), via Nnrf_NFDiscovery_Request Response (MB-SMF profile (Area Session ID(s), MBS service area(s)). The SMF selects the MB-SMF based on the location area where the UE is residing (if the TAI is not provided to the NRF) and interacts with MB-SMF to retrieve QoS information of the multicast QoS flow(s) for the MBS Session ID and subscribes to notifications about the MBS Session ID.\n-\tThe SMF check whether the UE is inside MBS service areas of the location dependent MBS session by comparing the User Location Information of the UE provided by the AMF with the MBS service areas received from the NRF. If the UE is out of all MBS service area of the location dependent MBS session, the SMF reject the multicast session join request.\n-\tIf the Join Request from the UE is accepted, the SMF may subscribe at the AMF using the Namf_EventExposure service to notifications about the \"UE moving in or out of a subscribed \"Area Of Interest\"\" event. The SMF supplies all MBS service areas of the location dependent MBS session as Area Of Interest.\n-\tThe SMF requests the AMF to transfer an N2 message to the RAN node using the Nsmf_PDUSession_UpdateSMContext response, to provide the NG-RAN with Multicast MBS session information which additionally includes the Area Session ID.\n-\tIf the NG-RAN node supports MBS, the NG-RAN uses the received MBS Session ID and Area Session ID to determine the local Multicast MBS session context and whether the user plane for the local Multicast MBS session is already established. If the RAN determines the shared delivery is not established for the MBS Session ID and Area Session ID, the NG-RAN initiates the shared delivery establishment as specified in clause 7.2.1.4 and provides the Area Session ID, tracking area ID(s) concerning the RAN node in addition to MBS Session ID in the request for shared delivery establishment. The MB-SMF provides MBS service area information (Area Session ID(s), MBS service area(s)) associated with the same MBS session to NG-RAN in the shared delivery establishment response. MB-SMF may either provide only the service areas concerning the target RAN node or all service areas associated with the MBS session. If the MB-SMF only provides the service areas concerning the target RAN node, which includes the cell ID(s), the cell ID is included if the tracking area IDs associated with the indicated cell ID is received by the MB-SMF.\n-\tIf the NG-RAN node serving the UE does not support MBS and the UE is in the MBS service area, the SMF apply individual delivery towards the UE. The SMF configures the UPF to send data related to the Multicast MBS session and service area via individual delivery within a PDU session of the UE. The SMF additionally subscribes at the AMF using the Namf_EventExposure service to notifications about UE location changes (e.g. for a small MBS service area), or to notifications about the \"UE moving in or out of a subscribed \"Area Of Interest\"\" event. In the latter case, the SMF supplies the service area associated with the multicast area session where the UE resides as Area Of Interest. The SMF configures separate ingress terminations at the UPF for each service area and interacts separately for each service area (providing MBS Session ID and Area Session ID) with the MB-SMF to request or terminate the distribution of data for the MBS session and service area towards the UPF.",
      "chunk_type": "procedure",
      "cross_references": [
        "clause_7.2.1",
        "clause_7.2.4.2.0",
        "clause_7.2.4.3.1",
        "clause_7.2.1.4",
        "ts_23.502"
      ]
    },
    {
      "chunk_id": "ts_23.247_7.2.4.2.3",
      "section_id": "7.2.4.2.3",
      "section_title": "Handover procedure",
      "content": "The Handover procedure for the UE is performed as defined in clause 7.2.3.2, 7.2.3.3, and 7.2.3.4 with the following additions:\n-\tIf the UE is receiving multicast data corresponding to the MBS Session ID and Area Session ID via the 5GC Shared MBS traffic delivery from cells served by the Source NG-RAN before the handover, for the Xn Handover (comparing with the clause 7.2.3.2), the following applies:\n-\tThe Source RAN node includes MBS Session ID, Area Session ID and MBS service area associated with the cell where the UE resides to the Target RAN node.\nNOTE 1:\tDuring the handover procedure the associated QoS flow is established towards a NG RAN node not supporting MBS regardless whether the UE is still in the MBS service area associated with the original Area Session ID or not\n-\tIf the UE is receiving multicast data corresponding to the MBS Session ID and Area Session ID from cells served by the Source NG-RAN via the 5GC Shared MBS traffic delivery before the handover, for the N2 Handover (comparing with the clause 7.2.3.3), the following applies:\n-\tThe source RAN node includes MBS session area information (MBS Session ID, Area Session ID and MBS service area associated with the cell where the UE resides) for delivery to the Target RAN node within the Source to Target transparent container in the Handover Required message.\n-\tThe SMF forwards the Source to Target transparent container and may also include MBS session area information (MBS Session ID, Area Session ID and MBS service area) to the Target RAN in Handover request.\nNOTE 2:\tThe SMF cannot determine the UE location and a possible new service area at this stage.\n-\tIf the UE is receiving multicast data corresponding to the MBS Session ID and Area Session ID from cells served by the Source NG-RAN via the 5GC Individual MBS traffic delivery before the Handover, for the Xn/N2 handover procedure (comparing with the clause 7.2.3.4), the following applies:\nNOTE 3:\tDuring the Xn handover procedure, the associated QoS flow is established at Target RAN side regardless whether the UE is still in the MBS service area associated with the original Area Session ID or not.\n-\tFor the N2 handover procedure, the SMF includes MBS session area information (MBS Session ID, Area Session ID, and MBS service area) associated with the last known service area of the UE in N2 SM information to the Target RAN node in Handover Request message.\n-\tIf the target RAN node supports MBS, it determines whether to establish the resources for multicast distribution and data forwarding for the received MBS Session ID and Area Session ID, based on MBS Session ID, Area Session ID, MBS service area provided by the source RAN (if source RAN support MBS) or SMF (if source RAN not support MBS) and the target location of the UE. If UE is not in the MBS service area provided by the source RAN (if source RAN supports MBS) or SMF (if source RAN does not support MBS), the target RAN does not allocate RAN resources, including the resource for data forwarding, for the multicast MBS Session to the UE.\n-\tIf the target RAN node support MBS, when it determines the shared delivery is not established for the multicast session ID and Area Session ID, the target NG-RAN initiates the shared delivery establishment as specified in clause 7.2.1.4 and provides the Area Session ID and tracking area ID(s) concerning the RAN node in addition to MBS Session ID in the request for shared delivery establishment. The MB-SMF provides MBS session area information (Area Session ID(s), MBS service area(s)) associated with the MBS session to the NG-RAN in the shared delivery establishment reply. The MB-SMF may either provide only the service areas concerning the target RAN node or all service areas associated with the MBS session.\nNOTE 4:\tIf the target RAN does not support MBS, the associated QoS flow is established at target RAN side during the handover procedure regardless whether the UE is still in the MBS service area associated with the original Area Session ID or not.\n-\tIf the target RAN supports MBS, but the Source RAN does not support MBS, the SMF configures the UPF to stop sending data related to the Multicast MBS session and service area via the associated PDU session of the UE. The SMF unsubscribes at the AMF using the Namf_EventExposure service to notifications about UE location changes, or to notifications about the \"UE moving in or out of a subscribed \"Area Of Interest\"\" event (for an individual service area).\nNOTE 5:\tIf the UE is still in the MBS session, the subscription for the UE entering or leaving the complete service area does not need to be changed.\n-\tWhen the AMF receives the User Location Information from target RAN node via the Path Switch Request message or Handover Notify message, the AMF provide it to the SMF. When the SMF get the User Location Information, the SMF determines the MBS service area of the UE camping cell by comparing the User Location Information received from AMF with the MBS service areas received from the NRF. The SMF uses the determined MBS service area and determined user location as follows:\n-\tThe SMF updates the Area Session ID in the locally stored the UE MBS Session Context with the corresponding Area Session ID if the Area Session ID is changed.\n-\tIf the target RAN does not support MBS, the Source RAN supported MBS, and the UE is in a service area of the MBS session, the SMF applies individual delivery towards the UE. The SMF configures the UPF to send data related to the Multicast MBS session and service area via the associated PDU session of the UE. The SMF additionally subscribes at the AMF using the Namf_EventExposure service to notifications about UE location changes, or to notifications about the \"UE moving in or out of a subscribed \"Area Of Interest\"\" event. In the latter case the SMF supplies the service area of the multicast area session as Area Of Interest. If associated QoS flows are not yet included in the PDU session, the SMF updates the PDU session with associated QoS flows.\n-\tIf the UE has moved to another MBS service area of the MBS session:\n-\tIf the target NG-RAN node support MBS after the completion of the handover procedure, the SMF provides the MBS session related information including the new Area session ID to NG-RAN via the PDU Session Modification procedure. Per the received the MBS session related information, the 5GC shared delivery is established.\n-\tIf the target NG-RAN node does not support MBS, the SMF updates the UPF to forward the MBS data packets which are received from the tunnel associated with the new Area Session ID to the target NG-RAN node. If the SMF did not configure the UPF to receive the MBS data packet from the tunnel associated with the new Area Session ID before, the SMF informs the MB-SMF of the new Area Session ID and UPF DL N19mb Tunnel information. MB-SMF configure the MB-UPF to transmit the Multicast MBS session data towards UPF using the received downlink tunnel ID. If the SMF subscribed to the \"Area Of Interest\" event, the SMF also updates the subscription with the new service area as \"Area Of Interest\".\n-\tIf the UE has moved out of all the MBS service areas of the MBS session:\n-\tIf the target NG-RAN node does not support MBS, the SMF deletes the associated QoS flow from NG-RAN and UPF after the completion of the handover.\n-\tPer operator's policy (e.g. when a local configured timer expires since the UE left the whole MBS service area), the SMF may remove the UE from the MBS session as defined in clause 7.2.2.3. When the UE is removed from the location dependent MBS session, the SMF also unsubscribes to the AMF from the notifications about the \"UE moving in or out of a subscribed \"Area Of Interest\"\" event.",
      "chunk_type": "procedure",
      "cross_references": [
        "clause_7.2.3.2",
        "clause_7.2.3.3",
        "clause_7.2.3.4",
        "clause_7.2.1.4",
        "clause_7.2.2.3"
      ]
    },
    {
      "chunk_id": "ts_23.247_7.2.4.2.4",
      "section_id": "7.2.4.2.4",
      "section_title": "Activation of location dependent MBS session",
      "content": "When the location dependent MBS session is activated, the MBS session is activated in the whole MBS service area of the MBS session. It is not supported that the same MBS session is in Active state in one MBS service area but in Inactive state in another MBS service area.\nNOTE:\tAs an exception, if the MBS session contains service areas served by several different MB-SMFs, the activation is for all service areas served by the MB-SMF.\nWhen the MB-SMF is requested by an AF to activate the MBS session in a service area of the MBS session or the MB-UPF reports detection of data for a service area of the MBS session, the MB-SMF triggers the activation for all service areas of the MBS session that it serves, i.e. whole MBS session is activated.\nFor the location dependent MBS session activation, the differences comparing to the procedure defined in clause 7.2.5.2 are as below:\n-\tThe SMF invokes Namf_MT_EnableGroupReachability service operation to AMF, which includes the whole MBS service area associated with the MBS session, i.e. the sum of all MBS service area associated with the MBS Session ID regardless of the Area Session ID.\n-\tFor the UE in CM-IDLE state, when the AMF triggers the paging, it take the receiving MBS service area information into account. Only the NG-RAN nodes which are included in the MBS service area need to be triggered for paging.\n-\tSMF checks whether the UE is in or out of the MBS service area based on the change notification or UE location information included in Nsmf_PDUSession_UpdateSMContext Request or Namf_MT_UEReachabilityInfoNotify message. Based on that information, the SMF determines how to activate the MBS session in the same way as the handling defined in clause 7.2.4.2.3\n-\tWhen the SMF provides the MBS session information to the NG-RAN nodes, it includes the MBS service area, and Area Session ID, in the N2 SM information.",
      "chunk_type": "general",
      "cross_references": [
        "clause_7.2.5.2",
        "clause_7.2.4.2.3"
      ]
    },
    {
      "chunk_id": "ts_23.247_7.2.4.2.5",
      "section_id": "7.2.4.2.5",
      "section_title": "UE location change handling within the same NG-RAN node between cells belonging to different MBS service areas during Individual delivery",
      "content": "If UE has moved out of the MBS service area corresponding to the original Area Session ID, the SMF checks whether UE is in MBS service area corresponding to a new Area Session ID within the same MBS session:\n-\tFor the case UE is out of the original MBS service area but in another MBS service area of the MBS session:\n-\tIf the RAN node does not support MBS and the MBS session is active, the SMF updates the UPF to forward the MBS data packets which are received from the tunnel associated with the new Area Session ID to the RAN node. If the SMF did not configure the UPF receiving the MBS data packet from the tunnel associated with the new Area Session ID before, the SMF informs the MB-SMF of the new Area Session ID and UPF DL N19mb Tunnel information. The MB-SMF configure the MB-UPF to transmit the Multicast MBS session data towards UPF using the received downlink tunnel ID.\n-\tThe SMF updates the AMF of the area of interest event subscription by supplying the new MBS service area as Area Of Interest.\n-\tFor the case UE is out of all the MBS service areas of the MBS session:\n-\tIf RAN node does not support MBS, the SMF delete the associated QoS flow from NG-RAN and UPF.\n-\tPer operator's policy (e.g. when a local configured timer expires since the UE left the whole MBS service area), the SMF may remove the UE from the MBS session as defined in clause 7.2.2.3. When the UE is removed from the location dependent MBS session, the SMF also unsubscribes to the AMF from the notifications about the \"UE moving in or out of a subscribed \"Area Of Interest\"\" event.\n-\tFor the case UE comes back to the MBS service area of the multicast MBS session after moving out of the whole MBS service area of the multicast MBS session, e.g. before the local configured timer expires:\n-\tIf the UE is still in the multicast MBS session, the SMF adds the associated QoS flow at NG-RAN and UPF.",
      "chunk_type": "general",
      "cross_references": [
        "clause_7.2.2.3"
      ]
    },
    {
      "chunk_id": "ts_23.247_7.2.4.2.6",
      "section_id": "7.2.4.2.6",
      "section_title": "UE location change handling by SMF",
      "content": "When the SMF receives a notification about a UE location change or is becoming aware of a UE location change (e.g. during handover, Mobility Registration Update and Service Request procedures), the SMF checks whether the new UE location is inside or outside all MBS service areas of the location dependent MBS session:\n-\tFor the case that UE is out of all MBS service area of the location dependent MBS session:\n-\tIf RAN node does not support MBS, the SMF delete the associated QoS flow from the RAN node and the UPF.\n-\tPer operator's policy (e.g. when a local configured timer expires since the UE left the whole MBS service area of the MBS session) the SMF may remove the UE from the multicast MBS session as defined in clause 7.2.2.3. The SMF also unsubscribes to the AMF from the notifications about the \"UE moving in or out of a subscribed \"Area Of Interest\"\" event.\n-\tFor the case UE comes back to MBS service area of the location dependent MBS session after moving out of the whole MBS service area of the multicast MBS session, e.g. before the local configured timer expires:\n-\tIf the UE is still in the multicast MBS session and the multicast MBS session is in Active state, the SMF tries to activate the multicast MBS session towards the UE.",
      "chunk_type": "general",
      "cross_references": [
        "clause_7.2.2.3"
      ]
    },
    {
      "chunk_id": "ts_23.247_7.2.4.2.7",
      "section_id": "7.2.4.2.7",
      "section_title": "UE mobility within the same NG-RAN between cells belonging to different MBS service areas for shared delivery",
      "content": "When the UE moves from one service area to another served by the same NG-RAN, the NG-RAN node that supports MBS handles content switching due to mobility between service areas it serves without interaction with SMF. If it is the first that UE enters a new location area the RAN node requests shared delivery from the MB-SMF for the corresponding Area Session ID. If the last UE leaves a location area the RAN node requests the termination of shared delivery from the MB-SMF for the corresponding Area Session ID.\nUE mobility can happen within the same NG-RAN between cells in or out of all the MBS service areas:\n-\tThe NG-RAN detects whether the UE is IN or OUT of all MBS service areas of a location dependent MBS session. If the UE moves in or out of all MBS service areas of a location dependent MBS session, the NG-RAN notifies the SMF.\nNOTE:\tWhen the UE joins, the SMF subscribes to the \"Area Of Interest\" event, and provides the combination of all MBS service areas of location dependent MBS session as \"Area Of Interest\" (see clause 7.2.4.2.1).\n-\tWhen the SMF knows the UE is IN or OUT of all MBS service area of location dependent MBS session, the SMF behaves as in clause 7.2.4.2.6.",
      "chunk_type": "general",
      "cross_references": [
        "clause_7.2.4.2.1",
        "clause_7.2.4.2.6"
      ]
    },
    {
      "chunk_id": "ts_23.247_7.2.4.2.9",
      "section_id": "7.2.4.2.9",
      "section_title": "Connection Resume procedure",
      "content": "The Connection Resume procedure for the UE is performed as defined in clause 7.2.3.7 with the following additions:\n-\tFor an MBS-supporting target NG RAN\n-\tThe target RAN node obtains MBS session information including an area session ID from the source RAN node (during the connection retrieval) or the SMF and initiates the shared delivery establishment (if not established yet) as specified in clause 7.2.1.4 providing that area session ID. It obtains information about location areas and related area session IDs during the shared delivery establishment. The target RAN then applies the procedures in clause 7.2.4.2.7.\n-\tFor a non MBS-supporting target NG RAN, the SMF subscribes at the AMF using the Namf_EventExposure service to notifications about UE location changes (if not yet done), and applies the procedures in 7.2.4.2.5.",
      "chunk_type": "procedure",
      "cross_references": [
        "clause_7.2.3.7",
        "clause_7.2.1.4",
        "clause_7.2.4.2.7"
      ]
    },
    {
      "chunk_id": "ts_23.247_7.2.4.3.1",
      "section_id": "7.2.4.3.1",
      "section_title": "Local MBS service area information provided by AF",
      "content": "For local multicast services, the MBS service area information is provided to the UE and the 5GC as specified in clauses 7.1.1.2 and 7.1.1.3 with the following differences and clarifications:\n-\tFor the Service Announcement, MBS service area information is included unless it is preconfigured.\n-\tWhen performing the MBS session creation request to the 5GC, the MBS service area information for a Multicast MBS session is provided by the AF unless it is preconfigured.",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.247_7.2.4.3.2",
      "section_id": "7.2.4.3.2",
      "section_title": "Multicast session join and session establishment procedure for local MBS",
      "content": "For the case that the multicast service is only available within a limited area, the UEs outside the MBS service area are not allowed to join the multicast service.\nThe Multicast MBS session join and session establishment for multicast service available within a limited area are performed as specified in clause 7.2.1.3 with the following differences and clarifications:\n-\tThe local Multicast MBS session has been created where the AF provided the MBS service area information as specified in clause 7.2.4.3.1.\n-\tThe UE may have information about local multicast service including MBS service area via Service Announcement as specified in clause 7.2.4.3.1.\n-\tIn step 1, if the UE determines that it is in the MBS service area based on the information about local multicast service e.g. obtained via Service Announcement, the UE sends the PDU Session Modification Request (MBS Session ID) or the PDU Session Establishment Request (MBS Session ID) as a Join Request to join the multicast group. If the UE determines that it is outside the MBS service area, the UE does not send the Join Request.\n-\tIn step 3, the SMF obtains the MBS service area (i.e. Cell ID list or TAI list) of the indicated MBS session from the MB-SMF, and the SMF determines the indicated MBS session corresponds to local multicast service based on the MBS service area.\n-\tIn step 5, the SMF checks whether the UE is inside or outside the MBS service area.\n-\tThe SMF determines whether the UE is inside the MBS service area by comparing the User Location Information of the UE received from the AMF with the MBS service area received from the MB-SMF.\nNOTE 1:\tThe AMF provides the User Location Information of the UE (cell ID and current tracking area ID) towards the SMF within Nsmf_PDUSession_CreateSMContext request and if the location changed also in Nsmf_PDUSession_UpdateSMContext request (as used for the join) as specified in clauses 4.3.2.2.1 and 4.3.3.2 of TS 23.502 [6].\n-\tIf the SMF detects that the UE is inside the MBS service area, the SMF continues the process of multicast session join as specified in clause 7.2.1.3 with the following additions:\n-\tThe SMF sends the UE a PDU Session Modification Command or a PDU Session Establishment Accept indicating a Join Accept as a response to the Join Request. The Joint Accept includes the MBS service area (i.e. Cell ID list or TAI list).\n-\tThe Multicast MBS session information sent by the SMF to the NG-RAN includes the MBS service area (i.e. Cell ID list or TAI list).\n-\tIf the RAN node serving the UE does not support MBS the SMF applies individual delivery towards the UE. The SMF configures the UPF to send data related to the Multicast MBS session via individual delivery within a PDU session of the UE.\n-\tIf the SMF detects that the UE is outside the MBS service area, the SMF rejects the multicast session join, so sends a Join Reject to the UE indicating that the MBS join is rejected. The Joint Reject includes the reject reason (outside of local service area) and the MBS service area (i.e. Cell ID list or TAI list).\nIn this case, the MBS Session establishment (i.e. resources establishment for MBS traffic delivery) for the UE is not performed.\nNOTE 2:\tThere may be the case that the UE determines that it is inside the MBS service area based on the geographical area information or civic address information as MBS service area information provided by the AF, so sends a Join Request but the UE is outside the MBS service area.\nNOTE 3:\tWhich SM NAS message is used to deliver the Join Reject (e.g. PDU Session Modification Reject) is defined in stage 3 specifications.\n-\tIf the Join Request from the UE is accepted, the SMF subscribes to the UE mobility event notification from the AMF (e.g. UE moving into or out of Area Of Interest, which is set by MBS service area), by invoking Namf_EventExposure_Subscribe service operation as specified in clause 5.2.2.3.2 of TS 23.502 [6]. The SMF supplies the service area associated with the Multicast MBS session as Area Of Interest.\n-\tFor the UE that received the Join Reject from the SMF, later, if the UE detects that it is inside the MBS service area based on the MBS service area provided in the Join Reject, the UE sends the PDU Session Modification Request (MBS Session ID) to join the multicast group.",
      "chunk_type": "procedure",
      "cross_references": [
        "clause_7.2.1.3",
        "clause_7.2.4.3.1",
        "ts_23.502_clause_5.2.2.3.2",
        "ts_23.502"
      ]
    },
    {
      "chunk_id": "ts_23.247_7.2.4.3.3",
      "section_id": "7.2.4.3.3",
      "section_title": "Handover procedure with local MBS session",
      "content": "The Handover procedure for the UE is performed as defined in clause 7.2.3 with the following additions:\n-\tIf the UE is camping at the Source RAN node and receiving multicast data corresponding to the MBS Session ID via the 5GC Shared MBS traffic delivery before the Handover, for Xn based handover in clause 7.2.3.2, the Source RAN node includes MBS Session ID and MBS service area to the Target RAN node during Handover Preparation phase. For N2 based handover in clause 7.2.3.3, this step corresponds to Handover Request and Handover Required message, respectively.\nNOTE:\tDuring the Xn or N2 handover procedures, if the target RAN node does not support MBS, the associated QoS flow is established at the Target RAN side regardless whether the UE is still in the MBS service area.\n-\tIf the UE is camping at the Source RAN node and receiving multicast data corresponding to the MBS Session ID via the 5GC individual MBS traffic delivery before the Handover, for the N2 Handover in clause 7.2.3.4, the SMF includes MBS session area information (MBS Session ID and MBS service area) in N2 SM information to the Target RAN node in Handover request.\n-\tIf the Target RAN node support MBS, it determines whether to establish the resources for multicast distribution and data forwarding for MBS Session ID, based on the received MBS Session ID provided by the source RAN (if source RAN support MBS) or SMF (if source RAN not support MBS), and target location of the UE. If UE is not in the in the MBS service area provided by the source RAN (if source RAN support MBS) or SMF (if source RAN not support MBS), the Target RAN does not allocate RAN resources, including the resource for data forwarding, for the multicast MBS Session to the UE.\n-\tIf the target RAN node support MBS, when it determines that the UE is in the MBS service area and that the shared delivery is not established for the multicast session ID, the target NG-RAN initiates the shared delivery establishment as specified in clause 7.2.1.4.\n-\tWhen the AMF receives the User Location Information from target RAN node via the Path Switch Request message or Handover Notify message, the AMF provide it to the SMF. When the SMF get the User Location Information, the SMF check the MBS service area of UE camping cell by comparing the User Location Information received from AMF with the MBS service area received from the MB-SMF. The SMF uses the determined UE location and MBS service area as follows:\n-\tThe SMF determines whether the UE is outside the MBS service area by comparing the received Cell ID and tracking area ID with the MBS service area received from the MB-SMF.\n-\tIf the UE is inside the MBS service area and target RAN node does not support MBS, the SMF applies individual delivery towards the UE. If associated QoS flows are not yet included in the PDU session, the SMF updates the PDU session with associated QoS flows. If the SMF did not configure the UPF to receive the MBS data packet from the tunnel associated with the Multicast MBS session before, the SMF informs the MB-SMF of the MBS session and UPF DL N19mb Tunnel information. MB-SMF configure the MB-UPF to transmit the Multicast MBS session data towards UPF using the received downlink tunnel ID.\n-\tIf the UE is out of the service area of the MBS session:\n-\tIf the target NG-RAN node does not support MBS, the SMF deletes the associated QoS flow from NG-RAN node and the UPF after the completion of the handover procedure.\n-\tPer operator's policy (e.g. when a local configured timer expires since the UE left the whole MBS service area of the MBS session) the SMF may remove the UE from the MBS session as defined in clause 7.2.2.3. When the UE is removed from the local MBS session, the SMF also unsubscribes to the AMF from the notifications about the \"UE moving in or out of a subscribed \"Area Of Interest\"\" event.",
      "chunk_type": "procedure",
      "cross_references": [
        "clause_7.2.3",
        "clause_7.2.3.2",
        "clause_7.2.3.3",
        "clause_7.2.3.4",
        "clause_7.2.1.4",
        "clause_7.2.2.3"
      ]
    },
    {
      "chunk_id": "ts_23.247_7.2.4.3.4",
      "section_id": "7.2.4.3.4",
      "section_title": "Activation of local MBS session",
      "content": "For the local MBS session activation, the differences comparing to the procedure defined in clause 7.2.5.2 are as below.\n-\tThe SMF invokes Namf_MT_EnableGroupReachability service operation to AMF, which include the MBS service area associated with the MBS session.\n-\tFor the UE in CM-IDLE state, when the AMF triggers the paging, it takes the received MBS service area information into account and only triggers the paging at the NG-RAN nodes which are included in the MBS service area.\n-\tSMF checks whether the UE is in or out of the MBS service area based on the change notification or UE location information included in Nsmf_PDUSession_UpdateSMContext Request or Namf_MT_UEReachabilityInfoNotify message. Based on that information, the SMF determines how to activate the MBS session same as the handling when the SMF get the User Location Information defined in clause 7.2.4.3.3.\n-\tWhen the SMF provides the MBS session information to the NG-RAN nodes, it includes the MBS service area in the N2 SM information.",
      "chunk_type": "general",
      "cross_references": [
        "clause_7.2.5.2",
        "clause_7.2.4.3.3"
      ]
    },
    {
      "chunk_id": "ts_23.247_7.2.4.3.5",
      "section_id": "7.2.4.3.5",
      "section_title": "UE location change handling by SMF",
      "content": "When the SMF receives a notification about a UE location change or is becoming aware of a UE location change (e.g. during handover, Mobility Registration Update and Service Request procedures), the SMF checks whether the new UE location is inside or outside the MBS service area of the MBS session.\n-\tFor the case UE is out of the MBS service area of the MBS session:\n-\tIf RAN node does not support MBS, the SMF delete the associated QoS flow from the RAN node and the UPF.\n-\tPer operator's policy (e.g. when a local configured timer expires since the UE left the MBS service area of the MBS session) the SMF may remove the UE from the multicast MBS session as defined in clause 7.2.2.3. When the UE is removed from the local MBS session, the SMF also unsubscribes to the AMF from the notifications about the \"UE moving in or out of a subscribed \"Area Of Interest\"\" event.\n-\tFor the case UE comes back to the MBS service area of the multicast MBS session after moving out of the MBS service area of the multicast MBS session, e.g. before the local configured timer expires:\n-\tIf the UE is still in the multicast MBS session and the multicast MBS session is in Active state, the SMF tries to activate the multicast MBS session towards the UE.",
      "chunk_type": "general",
      "cross_references": [
        "clause_7.2.2.3"
      ]
    },
    {
      "chunk_id": "ts_23.247_7.2.4.3.6",
      "section_id": "7.2.4.3.6",
      "section_title": "UE mobility within the same NG-RAN between cells in or out of the MBS service area",
      "content": "If UE mobility can happen within the same NG-RAN between cells in or out of the service area,\n-\tThe NG-RAN detects whether the UE is IN or OUT of an MBS service area and notifies the SMF if the UE moves in or out of the MBS service area.\nNOTE:\tWhen the UE joins, the SMF subscribes to the \"Area Of Interest\" event (see clause 7.2.4.3.2).\n-\tWhen the SMF knows the UE is IN or OUT of an MBS service, the SMF behaves as in clause 7.2.4.3.5.",
      "chunk_type": "general",
      "cross_references": [
        "clause_7.2.4.3.2",
        "clause_7.2.4.3.5"
      ]
    },
    {
      "chunk_id": "ts_23.247_7.2.4.3.8",
      "section_id": "7.2.4.3.8",
      "section_title": "Connection Resume procedure with local MBS session",
      "content": "The Connection Resume procedure for the UE is performed as defined in clause 7.2.3.7 with the following additions:\n-\tThe source RAN, if supporting MBS and if the MBS session is active, provides MBS service area to the target RAN during the UE Context Retrieval procedure;\n-\tAn MBS supporting target RAN then applies the procedures in clause 7.2.4.3.6.\n-\tThe SMF applies the procedures in clause 7.2.4.3.5.",
      "chunk_type": "procedure",
      "cross_references": [
        "clause_7.2.3.7",
        "clause_7.2.4.3.6",
        "clause_7.2.4.3.5"
      ]
    },
    {
      "chunk_id": "ts_23.247_7.2.5.1",
      "section_id": "7.2.5.1",
      "section_title": "General",
      "content": "MBS Session activation procedure is for multicast only. MBS Session activation procedure is triggered by MB-SMF, when it receives the notification from MB-UPF for the downlink MBS DL data, or when it receives the request directly from AF or via NEF. The MBS Session activation procedure is used for activating the resources for MBS data at NG-RAN node. The multicast session state transits from Inactive to Active after MBS Session activation procedure, see clause 4.3.\nMBS Session deactivation procedure is for multicast only. MBS Session deactivation procedure is triggered by MB-SMF, when it receives the notification from MB-UPF in the case that there is no downlink data to be transmitted for some duration, or when it receives the request directly from AF or via NEF. The MBS Session deactivation procedure is used for deactivating the resources for MBS data at NG-RAN node. The multicast session state transits from Active to Inactive after MBS Session deactivation procedure, see clause 4.3.\nNOTE:\tFor services (e.g. Mission Critical service) that require low latency and zero packet loss even for the first downlink packet(s), periodic keep-alive packets during interruptions of media transmission (e.g. Floor Idle as specified in TS 23.379 [27], referenced by TS 23.289 [21]), which are sent over user plane of an MBS session, can be used in order to prevent a deactivation of the MBS session based on MB-UPF notifications and to keep UEs within the MBS session in a state where they can receive the MBS session data without being paged. It is up to implementation that the periodicity of the keep-alive packets configured in the AF needs to consider NG-RAN's configuration.",
      "chunk_type": "definition",
      "cross_references": [
        "clause_4.3",
        "ts_23.379",
        "ts_23.289"
      ]
    },
    {
      "chunk_id": "ts_23.247_7.2.5.2",
      "section_id": "7.2.5.2",
      "section_title": "MBS session activation procedure",
      "content": "The following can trigger the MBS session activation procedure:\n-\tAF requests MB-SMF to activate the MBS session;\n-\tMB-UPF receives the multicast data and notifies MB-SMF.\nFigure 7.2.5.2-1: MBS session activation procedure\nIn this procedure, steps 11 to 15 are executed if the MB-SMF finds out there are shared tunnel established. Steps 11 to 15, if needed, are executed in parallel with steps 2 to 10.\n1.\tThe procedure may be triggered by the following events:\n-\tWhen the MB-UPF receives downlink data for a multicast MBS session, based on the instruction from the MB-SMF (as described in clause 7.2.5.3), the MB-UPF sends N4mb Notification (N4 Session ID) to the MB-SMF for indicating the arrival of DL MBS data.\n-\tThe AF sends MBS Activation request (TMGI) to the MB-SMF directly or via NEF.\n2.\tMB-SMF sends Nmbsmf_MBSSession_ContextStatusNotify (MBS Session ID, multicast session state = Active) to SMF(s).\nThe SMF sets the related multicast MBS session state to Active and finds out the list of UEs that joined the multicast MBS session identified by the related TMGI. If the SMF determines the user plane of the associated PDU session(s) of the UE(s) with respect to the TMGI are activated already, steps 3-8a will be skipped for those UE(s), i.e. executed from step 8b.\n3.\tThe SMF invokes Namf_MT_EnableGroupReachability Request (List of UEs, [PDU Session ID of the associated PDU Sessions], TMGI, [UE reachability Notification Address], [most demanding ARP, 5QI of all MBS QoS Flow within MBS session], [MBS service area]) to AMF(s). When later UE is reachable, the UE reachability Notification Address is used by the AMF to identify and notify the related SMF.\nAfter receiving the request, for each UE in the list, the AMF determines CM state of the UE: see steps 4 - 7.\n4a.\tIf there are UEs involved in the multicast MBS Session and in CM-CONNECTED state, the AMF indicates those UEs to the SMF, using Namf_MT_EnableGroupReachability Response (UE list). Otherwise, the response does not include UE list.\n4b.\tFor each UE in the UE list included in step 4a, if the QoS profile(s) for associated PDU Session has not yet been provided, the SMF invokes Namf_Communication_N1N2MessageTransfer (N2 SM information (PDU Session ID, MBS Session ID, [QoS profile(s) for associated QoS flow(s)], [mapping information between the unicast QoS flow and multicast QoS flow])) to the AMF for the UE which is identified in step 4a. The associated unicast QoS Flow(s) as well as the mapping information between the unicast QoS Flow(s) and multicast QoS Flow(s) are included to support the 5GC Individual MBS traffic delivery.\nThe SMF may also include the MBS assistance information for the MBS session in N2 SM Information, if the MBS subscription data from the UDM contains the MBS assistance information which includes the ID(s) of the MBS session(s) that the UE joined. The MBS assistance information for MBS session sent to the NG-RAN is described in clause 6.17.\nThe procedure continues at step 9.\n5.\t[Conditional] If AMF determines that there are UEs in CM-IDLE state and involved in the multicast MBS Session, the AMF figures out the paging area covering all the registration areas of those UE(s), which need to be paged. The paging area needs to be further restricted to be within the MBS service area if received in step 3. The AMF may apply paging differentiation as specified in clause 6.12. The AMF sends a Multicast Group paging request message to the NG-RAN node(s) belonging to this Multicast Paging Area with the involved UE list and TMGI as the identifier to be paged if the related NG-RAN node(s) support MBS. If the AMF knows that the NG-RAN node(s) do not support MBS based on configuration, the AMF sends Paging message(s) to the NG-RAN node(s) per UE as described in step 4b in clause 4.2.3.3 of TS 23.502 [6].\nNOTE 1:\tIn addition to the paging in clause 6.12, other paging strategies is up to AMF implementation.\nNOTE 2:\tIf NG-RAN performs the Group paging, it can indicate that the MBS session data is allowed to be received in RRC_INACTIVE state. More details of the paging are specified by the RAN WGs.\nNOTE 3:\tCM-IDLE UEs using power saving function are included by the AMF in Group paging as specified in clause 7.2.10.\n6.\tReceiving the paging, the UE(s) in CM-IDLE state sends Service Request message to the AMF, see clause 4.2.3 of TS 23.502 [6].\nNOTE 4:\tStep 6 for a UE can be parallel to step 5 for another UE(s), which has not received any paging yet.\nAfter receiving the Service Request sent by the UE(s),\n-\tEither based on the received PDU Session ID in step 3, the AMF invokes steps 7a/7b to update the related PDU sessions; or:\n-\tBased on the received UE reachability Notification Address in step 3, the AMF identifies and notifies the related SMF of the UE(s), which are reachable now and the Location Information, by using the Namf_MT_UEReachabilityInfoNotify message. In this case, it can be a separated notification or combined with step 8.\n7a/7b.\tBased on the received PDU Session ID in step 3, the AMF identifies the related SMF and invokes Nsmf_PDUSession_UpdateSMContext request. The SMF replies with Nsmf_PDUSession_UpdateSMContext response.\nThe SMF may also include the MBS assistance information for the MBS session in N2 SM Information, if the MBS subscription data from the UDM contains the MBS assistance information which includes the ID(s) of the MBS session(s) that the UE joined. The MBS assistance information for MBS session sent to the NG-RAN is described in clause 6.17. The procedure then continues at step 9.\n8a.\tFor UE(s) that do not respond to paging, the AMF informs the SMF of the paging failure in Namf_MT_UEReachabilityInfoNotify.\n8b.\tFor UE(s) that is indicated as reachable via the Namf_MT_UEReachabilityInfoNotify message, or user plane of the associated PDU session is activated already but the QoS profile(s) for associated QoS flow(s) needs to be provided for the PDU session, the SMF invokes Namf_Communication_N1N2MessageTransfer (N2 SM information ()) to the AMF same as described in step 4b.\nThe SMF may also include the MBS assistance information for the MBS session in N2 SM Information, if the MBS subscription data from the UDM contains the MBS assistance information which includes the ID(s) of the MBS session(s) that the UE joined. The MBS assistance information for MBS session sent to the NG-RAN is described in clause 6.17.\n9.\tThe AMF sends N2 request message (N2 SM information ()) to the RAN node.\nNOTE 5:\tA joined UE is not able to receive MBS data if NG-RAN rejects the PDU Session Resource setup request (due to implementation specific reasons, e.g. activation of user plane fails due to the number of UEs reaching a limit).\n10a.\tIf the shared tunnel has not been established before, the shared tunnel is established at this step, as defined in clause 7.2.1.4. The NG-RAN configures UE with RRC messages if needed.\nIn this step or at later stage, NG-RAN may determine whether to apply delivery enabling reception by UEs in RRC_INACTIVE state for the MBS session, as defined in clause 6.17.\nNOTE 6:\tWhether and when the NG-RAN determines to apply delivery enabling reception by UEs in RRC_INACTIVE state for the MBS session as defined in clause 6.17 is to be decided by NG-RAN.\n10b.\tSteps 8 to 12 defined in clause 7.2.1.3 are performed. If 5GC Individual MBS traffic delivery is used, the SMF configures the UPF for individual delivery and if necessary, requests the MB-SMF to configure the MB-UPF to send multicast data to the UPF.\n11.\tIf the MB-SMF finds out there are shared tunnel established, step11-15 are performed. The MB-SMF invokes Namf_MBSCommunication_N2MessageTransfer Request (TMGI, N2 SM Information (Activation, TMGI)) to the AMF for those NG-RAN nodes, which have shared tunnel with MB-UPF. This step may be performed in parallel with step 2.\nNOTE 7:\tThe messages in steps 10a, 11 and 12 are MBS-specific and it is possible that the AMF(s) in steps 10a, 11 and 12 are not associate to any UEs involved in the multicast MBS Session.\n12.\tThe AMF sends NGAP activation request message (N2 SM Information ()) to the NG-RAN nodes. For those UEs that have joined in the MBS Session and are in RRC_INACTIVE state, the RAN nodes perform RAN paging as specified in TS 38.300 [9]. If Group paging is triggered, the NG-RAN may indicate that the MBS session data is allowed to be received in RRC_INACTIVE state as specified in clause 6.17.\nNOTE 8:\tUEs in RRC_INACTIVE state will be considered for RAN paging related to an MBS session even if those UEs are using power saving functions, e.g. MICO (Mobile Initiated Connection Only) mode with Active Time, or extended DRX (Extended Discontinuous Reception) as defined in clause 5.31.7 of TS 23.501 [5].\n13.\tThe NG-RAN nodes responses to AMF by NGAP activation response message. The NG-RAN nodes establish radio resources to transmit multicast MBS session data to the UE(s).\nIn this step or at later stage, NG-RAN may determine whether to apply delivery enabling reception by UEs in RRC_INACTIVE state for the MBS session, as defined in clause 6.17.\nNOTE 9:\tWhether and when the NG-RAN determines to apply delivery enabling reception by UEs in RRC_INACTIVE state for the MBS session as defined in clause 6.17 is to be decided by the NG-RAN.\nIf the NG-RAN determines that a UE receives the multicast MBS data in RRC_CONNECTED state, the NG-RAN shall not release the radio connection of a UE that has joined into the Multicast MBS session only because no unicast traffic is received for the UE.\n14.\tAMF to MB-SMF: Namf_MBSCommunication_N2MessageTransfer Response ().\n15.\tThe MB-SMF sends N4mb Session Modification Request to the MB-UPF to forward the received MBS packets. The MB-UPF responds to the MB-SMF with N4mb Session Modification Response acknowledging the MB-SMF request.\nNOTE 10:\tDepending on implementation, step 15 can be executed after the first successful response in step 14 to shorten the activation time, or buffering at the MB-UPF can be applied sufficiently long for the majority of RAN nodes to activate the MBS session to reduce packet loss.",
      "chunk_type": "procedure",
      "cross_references": [
        "clause_7.2.5.3",
        "clause_6.17",
        "clause_6.12",
        "ts_23.502_clause_4.2.3.3",
        "clause_7.2.10",
        "ts_23.502_clause_4.2.3",
        "clause_7.2.1.4",
        "clause_7.2.1.3",
        "ts_23.501_clause_5.31.7",
        "figure_7.2.5.2-1",
        "ts_23.502",
        "ts_38.300",
        "ts_23.501"
      ]
    },
    {
      "chunk_id": "ts_23.247_7.2.5.3",
      "section_id": "7.2.5.3",
      "section_title": "MBS session deactivation procedure",
      "content": "Figure 7.2.5.3-1: MBS session deactivation procedure\nIn this procedure, steps 3 to 4 and steps 5 to 9 are executed in parallel.\n1.\tThe procedure may be triggered by the following events:\n-\tWhen MB-UPF detects there is no data receives for the MBS Session, MB-UPF sends MB-N4 Notification (N4 Session ID) to the MB-SMF for deactivating the MBS session.\n-\tAF sends MBS Deactivation request (TMGI) to the MB-SMF directly or via NEF.\n2.\tThe MB-SMF sends an N4mb Session Modification Request (TMGI, [Buffered Downlink Traffic detection]) to the MB-UPF. The Buffered Downlink Traffic detection is requested by MB-SMF to be informed by the MB-UPF about incoming MBS data. The MB-SMF triggers MBS session activation once informed. If the MBS session is to be activated via the AF request directly, the Buffered Downlink traffic detection is not needed, but the MB-SMF still instructs the MB-UPF to stop forwarding and possibly to buffer MBS data.\nMB-UPF to MB-SMF: N4mb Session Modification Response acknowledging the MB-SMF request.\nNOTE 1:\tIt is up to stage 3 to determine whether MB-UPF keeps the DL F-TEID(s) for N3mb and N19mb interfaces.\n3.\tThe MB-SMF sends Nmbsmf_MBSSession_ContextStatusNotify request (MBS Session ID) to the SMFs.\nBased on the received MBS Session ID, the SMF sets the indicated multicast MBS session state to Inactive:\n‐\tIf the SMF finds out there are UE(s) that joined the indicated multicast MBS session and use 5GC Individual MBS traffic delivery, step 4 is performed for those UE(s).\n‐\tIf SMF find there are no UE(s) that joined the indicated MBS session and use 5GC Individual MBS traffic delivery, no further operation for SMF is required.\n4a.\t[Conditional] For UE(s) for which the 5GC individual delivery is used, step 3b and steps 4-8 in clause 4.3.3.2 of TS 23.502 [6] are performed to remove the associated QoS flow(s) related to the multicast MBS session.\nNOTE 2:\tWhether the associated QoS Flow(s) are removed from UE, NG-RAN, or only resource in NG-RAN is removed is up to implementation.\n4b\t[Conditional] For UE(s) for which the 5GC individual delivery is used, the related SMF(s) may keep the shared tunnel that is used for Individual MBS traffic delivery over N19mb interface. If the SMF decides to release the shared tunnel, steps 3 to 6 in clause 7.2.2.2 need to be performed.\n5.\tIf the MB-SMF finds out there are shared tunnel established over N3mb interface, the MB-SMF sends Namf_MBSCommunication_N2MessageTransfer Request (TMGI, N2 SM information (Deactivation, TMGI)) to the AMFs.\n6.\tThe AMF sends NGAP deactivation request message (N2 SM information ()) to the NG-RAN nodes.\n7.\tThe NG-RAN node keeps the multicast MBS Session Context and N3mb shared tunnel for the multicast MBS session.\nIf the MBS Session Context indicates no UE for the multicast MBS session (e.g. due to UE becomes CM-IDLE state), the NG-RAN triggers release of the shared delivery as described in clause 7.2.2.4.\n8.\tNG-RAN acknowledges the NGAP deactivation Response message.\n9.\tThe AMF invokes Namf_MBSCommunication_N2MessageTransfer Response to acknowledge the service for MB-SMF.\nWhen the MBS session is in \"Inactive\" state and handover procedure is triggered, it is defined in clause 7.2.3.6.\nNOTE 3:\tThere is no explicit \"deactivation\" indication to the UE, how the UE is changed to IDLE state is defined in TS 38.300 [9].",
      "chunk_type": "procedure",
      "cross_references": [
        "ts_23.502_clause_4.3.3.2",
        "clause_7.2.2.2",
        "clause_7.2.2.4",
        "clause_7.2.3.6",
        "figure_7.2.5.3-1",
        "ts_23.502",
        "ts_38.300"
      ]
    },
    {
      "chunk_id": "ts_23.247_7.2.6",
      "section_id": "7.2.6",
      "section_title": "Multicast session update procedure",
      "content": "Multicast MBS session update procedure is invoked by the AF to update the service requirement (result in multicast QoS parameters update and/or multicast QoS flow addition/removal) and/or MBS Service Area for an ongoing Multicast MBS session.\nIf the MBSF acts as the MBS security function for multicast as defined in TS 33.501 [20], it may use this procedure to provide an updated MSK and optional updated MTK in addition for the MBS session via the control plane.\nNOTE:\tThe procedure is not applicable if no MSK but only the MTK is to be updated.\nFor the interaction between AF or MBSF and MB-SMF, see clauses 7.1.1.6 and 7.1.1.7.\nFigure 7.2.6-1: Multicast MBS Session update procedure\n1.\tThis procedure is triggered by the MB-SMF receiving the updated service requirement, an updated multicast session security context from the MBSF and/or MBS Service Area for a multicast MBS Session, see clauses 7.1.1.6 and 7.1.1.7.\n2.\tThe AF providing the updated service area may also inform UEs at application level about the new service area via a service announcement.\nNOTE 1:\tIf a UE is located in a cell which was previously outside the service area and is now inside the updated service area, the UE can join the multicast service as specified in clause 7.2.1.3.\nFor QoS updates steps 3 to 7 are performed.\nFor MBS Service Area update steps 3 to 7 may be performed to allow NG-RAN to terminate data transmission in the area which is no longer in the MBS Service Area.\n3.\tThe MB-SMF invokes Namf_MBSCommunication_N2MessageTransfer service operation (MBS Session ID, [Area Session ID], N2 SM message container (TMGI, [QoS profile(s) for multicast MBS session], [MBS Service Area], [Area Session Id])) to the AMF(s).\n4.\tThe involved AMF sends N2 MBS session request (N2 SM message container) to NG-RAN nodes handling the multicast MBS session and possible Area Session ID based on the RAN node IDs stored in the AMF for the MBS session.\n5.\tThe NG-RAN node updates the QoS profile and/or MBS Service Area for the multicast MBS session based on the N2 MBS session request. If only QoS parameters are updated without multicast QoS flows added/removed, the NG-RAN may also update the QoS parameters of the associating PDU Sessions.\nFor MBS Service Area update, the NG-RAN updates the MBS Session Context with the updated MBS Service Area. The NG-RAN stops transmission of the related multicast data in the cell(s) which is within the old MBS Service Area but now outside the updated MBS Service Area. The NG-RAN also configures the UE not to receive the MBS data over the radio interface if the NG-RAN detects the UE(s) was in the previous MBS Service Area but is outside the updated MBS Service Area. If the NG-RAN node no longer serves any cells within the updated MBS service area, it requests to release shared delivery resource as defined in clause 7.2.2.4.\n6.\tThe NG-RAN node(s) acknowledges N2 MBS session request by sending an N2 MBS session Response message to the AMF.\n7.\tThe AMF invokes the Nmbsmf_MBSSession_ContextUpdate () to the MB-SMF.\n8.\tThe MB-SMF sends Nmbsmf_MBSSession_ContextStatusNotify request (MBS Session ID, [QoS profiles for multicast for MBS session], [MBS Service Area], [Area Session ID], [updated multicast session security context]) to the SMFs. For MBS Service Area updates, if an Area Session ID exists, the MB-SMF provides the MBS Service Area corresponding to the Area Session ID to the SMFs involved in the multicast MBS session. For QoS updates, the MB-SMF notifies SMFs handling all MBS service areas.\n9.\tThe SMF determines the affected UEs it serves based on the multicast MBS Session ID and Area Session ID (if provided) received in the step 8.\nThe subsequent steps 10 to 12 are executed for each affected UE. For QoS updates, steps 10 and 11 are skipped.\n10.\t[Conditional] For an MBS Service Area update, if the SMF previously subscribed at the AMF to notifications about the UE moving in or out of a subscribed \"Area Of Interest\", the SMF updates the subscription with the new MBS Service Area as area of interest.\n11.\t[Optional] When the MBS Service Area is updated, if the SMF does not have the latest UE location, the SMF queries AMF which then query the NG-RAN for the current location of the UE to determine whether the UE is within the updated MBS Service Area.\n12.\t[Conditional] For QoS Updates, if the 5GC Individual MBS traffic delivery is used, or if the associated QoS flows is to be added/removed, the SMF triggers PDU Session Modification procedure as defined in TS 23.502 [6]. If the 5GC Individual MBS traffic delivery is used, the SMF may also configure the UPF with the updated QoS and/or updated or removed QoS flows.\nFor MSK updates, the SMF also triggers PDU Session Modification procedure and provides the updated multicast session security context in the N1 SM container.\nFor MBS Service Area update, the SMF triggers the PDU Session Modification procedure as defined in TS 23.502 [6] with the following enhancement:\n-\tThe SMF also updates the PDU session resources associated to the multicast MBS session with the new MBS service area in an N2 container. The RAN node serving the PDU session starts or terminates transmission of multicast content in cells which are added or removed in the updated service area, respectively, and if necessary, interacts with the MB-SMF to start or terminate the distribution of multicast data to the RAN node.\n-\tTowards the UE, the SMF provides the MBS service area in N1 SM container to the UE. For a UE previously inside the MBS service area but now outside the updated MBS service area of the multicast MBS session, the SMF may alternatively, based on operator policy, inform the UE in the N1 SM container that the UE has been removed from the multicast MBS session.\n-\tTowards the NG-RAN, the SMF provides the updated MBS service area in N2 SM information. For a NG-RAN node supporting MBS, it starts transmission of multicast content in cells which are added in the updated MBS service area if UEs within the Multicast MBS session are within those cells, and if necessary, the NG-RAN interacts with the MB-SMF to start the distribution of multicast data to the RAN node. The RAN node stops transmission of multicast content in cells which are removed from the updated MBS service area, and if necessary, the NG-RAN interacts with the MB-SMF to terminate the distribution of multicast data to the RAN node\n-\tFor Individual delivery and a local Multicast MBS session the following applies: For a UE previously inside the service area but now outside the updated MBS service area, the SMF removes associated unicast QoS flows for the multicast MBS session. For a UE previously outside the service area but now inside the updated service area, the SMF adds associated unicast QoS flows for the multicast MBS session to the PDU session resources.",
      "chunk_type": "procedure",
      "cross_references": [
        "clause_7.2.1.3",
        "clause_7.2.2.4",
        "figure_7.2.6-1",
        "ts_33.501",
        "ts_23.502"
      ]
    },
    {
      "chunk_id": "ts_23.247_7.2.8",
      "section_id": "7.2.8",
      "section_title": "Service request procedure",
      "content": "If the multicast MBS session is in Inactive state, the UE can go to CM-IDLE state or the user plane of the associated PDU Session may be deactivated even when the UE is in CM-CONNECTED state. When user plane of the associated PDU session is activated again, the SMF sends the MBS session information to NG-RAN during Service Request procedure as specified in TS 23.502 [6]. The MBS session information indicates that this MBS session is in Inactive state; and:\n-\tFor the MBS supporting NG-RAN node, the NG-RAN establish the shared tunnel with the MB-UPF as usual. However, as the MBS session is in Inactive state, the NG-RAN node will not allocate related radio resource.\n-\tFor the non-MBS supporting NG-RAN node, the unicast QoS flow associated with the MBS session are not established.\nThe service request procedure can also be executed while the multicast MBS session is in Active state: The UE can go to CM-IDLE state due to AN release as specified in TS 23.502 [6]. In addition, to activate the associated PDU session(s) parts of the service request procedure can also be executed during the Mobility Registration Update procedure as specified in clause 4.2.2.2.2 of TS 23.502 [6]. When the service request procedure is executed, the SMF provides the MBS session information indicating that the UE joined the MBS session to the NG-RAN within N2 SM container for the associated PDU Session.\nNOTE:\tNetwork triggered Service Request, if triggered for other reason, can also be used by the SMF to provide that MBS session information to NG-RAN.",
      "chunk_type": "procedure",
      "cross_references": [
        "ts_23.502_clause_4.2.2.2.2",
        "ts_23.502"
      ]
    },
    {
      "chunk_id": "ts_23.247_7.2.9",
      "section_id": "7.2.9",
      "section_title": "AF provisioning multicast MBS Session Authorization information",
      "content": "The AF provisions the multicast MBS session authorization information for multicast MBS sessions that are not open to \"any UE\". The procedure specified in clause 4.15.6.2 of TS 23.502 [6] is reused with the following enhancements:\n-\tThe AF may provision the MBS Session Authorization information to the 5GC. The MBS Session Authorization information is associated with a group of UEs.\nTable 7.2.9-1: MBS Session Authorization information\nParameters\nDescription\nMBS Session Authorization information\nOne or more MBS Session IDs.\nA group of UEs identified by an External Group ID.\n-\tThe AF may support multicast MBS group membership management and provide parameters as described in Table 7.2.9-2.\nTable 7.2.9-2: Multicast MBS group membership management parameters\nParameters\nDescription\nList of GPSI\nList of multicast group members, each member is identified by GPSI.\nExternal Group ID\nIdentifier for multicast MBS group.\n-\tIf a new multicast MBS group is created, the UDM shall assign a unique Internal Group ID for the multicast MBS group and include the newly assigned Internal Group ID in the Nudr_DM_Create Request message.\n-\tIf the AF is authorised by the UDM to provision the MBS Session Authorization information, the UDM resolves the GPSI of each MBS session group member to SUPI, and requests to create, update or delete the provisioned MBS Session Authorization information as part of the MBS subscription data for each SUPI via Nudr_DM_Create/Update/Delete Request message, and the message includes the provisioned MBS Session Authorization information.\n7.2.9a\tAF provisioning MBS Session assistance information\nAfter the AF obtains the MBS Session ID of a multicast MBS Session as specified in clauses 7.1.1.2 and 7.1.1.3, the AF may provision the MBS Session assistance information for the UE(s) via NEF to UDM using the procedure of external parameter provisioning as specified clause 4.15.6.2 of TS 23.502 [6] with the following enhancements:\n-\tthe AF may provision MBS Session Assistance Information, which indicates that a UE is preferred to be kept connected when the related MBS Session the UE joined is active.\nTable 7.2.9a-1: MBS Session Assistance information\nParameters\nDescription\nMBS Session Assistance information\nA list of UEs represented by GPSIs that are preferred to be kept connected when the MBS Session represented by the indicated MBS session ID the UE joined is active.\nMBS Session ID.\nNOTE 1:\tMBS Session Assistance information has no effect if the function of UE receiving MBS multicast in RRC_INACTIVE state is not used. The AF does not provision the MBS Session assistance information if the AF knows that the PLMN does not support the function of UE receiving MBS multicast in RRC_INACTIVE state.\nNOTE 2:\tThe AF can provide the MBS Session assistance information for the UEs based on observed or expected UE data transmission behaviour, e.g. a frequent talker and/or the group leader of a multicast group represented by an MBS Session ID.\nNOTE 3:\tIf the MBS Assistance Information is already available when a UE joins a multicast MBS Session, the SMF provides the information to the NG-RAN in the UE join procedure as specified in clause 7.2.1.3. If the MBS Assistance Information becomes available in the UDM, the UDM performs procedure of Session Management Subscriber Data Update Notification to SMF as specified in clause 4.5.2 of TS 23.502 [6] per subscription data change notification requested by the SMF.\nIf the AF is authorised by the UDM to provision the UE list MBS Assistance information, the UDM resolves the GPSI to SUPI, and requests to create, update or delete the provisioned UE list MBS Assistance information as part of the MBS subscription data for each SUPI.",
      "chunk_type": "general",
      "cross_references": [
        "ts_23.502_clause_4.15.6.2",
        "clause_7.2.1.3",
        "ts_23.502_clause_4.5.2",
        "table_7.2.9-1",
        "table_7.2.9-2",
        "table_7.2.9",
        "ts_23.502"
      ]
    },
    {
      "chunk_id": "ts_23.247_7.2.10",
      "section_id": "7.2.10",
      "section_title": "Multicast MBS procedures for UEs using power saving functions",
      "content": "For a UE using power saving function to receive multicast MBS Session data, the following applies:\n-\tFor an multicast MBS session, a UE needs to join the multicast session as defined in clause 7.2.1.3 prior to MBS data reception. To join the multicast session, the UE needs to be in RRC_CONNECTED state. The UE may select any suitable time when it is in RRC_CONNECTED state or transition to RRC_CONNECTED state before joining the multicast session.\nNOTE 1:\tIf the UE has not previously joined the multicast MBS session, at the possible scheduled activation time it performs MBS join procedure. Whether the UE performs MBS join procedure in advance and stays \"joined\" or every time at activation time is left up to UE implementation.\n-\tAt MBS Session Activation, when the AMF perform group paging, the AMF also includes the CM-IDLE UEs using power saving function(s).\n-\tIf a UE is in RRC_CONNECTED state or in CM-IDLE state or CM-CONNECTED with RRC_INACTIVE state, and reachable (e.g. in active time in MICO or PTW for eDRX), due to other reasons at the start time and the scheduled activation times, the UE follows the related MBS procedures (e.g. clause 7.2.1 for UE join and clause 7.2.5.2 for MBS Session Activation).\n-\tIf a UE is in CM-IDLE state or CM-CONNECTED with RRC_INACTIVE and in deep sleep (i.e. unreachable for paging to the network) at the possible start time and the possible scheduled activation times, the UE leaves the deep sleep state at the session start time and the possible scheduled activation times to allow MBS related procedures (e.g. clause 7.2.1 for UE join and clause 7.2.5.2 for MBS Session Activation):\n-\tAt the possible start time, an RRC_IDLE or CM-CONNECTED with RRC_INACTIVE UE needs to send a request to transition to RRC_CONNECTED state and join the multicast MBS session (if not done before).\nNOTE 2:\tThe UE become reachable in the network for the unicast service as well.\n-\tAt the possible scheduled activation times, an RRC_IDLE UE that already joined the multicast MBS session needs to listen for paging requests and if paged by the network follow the existing procedures in clause 7.2.5.2.\nNOTE 3:\tHow long the UE need to listen to paging is left up to UE implementation.\n-\tWhen the UE is in the middle of an MBS data transfer, and the UE is scheduled to move to deep sleep due to power saving, e.g. end of PTW for extended idle mode DRX, expiration of active time for MICO or the UE transitioning from CM-CONNECTED to CM-IDLE in the case of MICO with no active time, then the UE does not go to deep sleep during the remainder of the current MBS data transfer.\nNOTE 4:\tIf at the end of the current MBS data transfer the UE knows there is another MBS data transfer scheduled soon, depending on the time between MBS data transfers, the UE can decide to go to sleep between MBS data transfers.",
      "chunk_type": "procedure",
      "cross_references": [
        "clause_7.2.1.3",
        "clause_7.2.1",
        "clause_7.2.5.2"
      ]
    },
    {
      "chunk_id": "ts_23.247_7.3",
      "section_id": "7.3",
      "section_title": "MBS procedures for broadcast Session",
      "content": "NOTE:\tThe interactions between the MBSF, the MBSTF and the AF, for example file delivery and HTTP adaptive streaming, will be defined in TS 26.502 [18] and TS 26.517 [22].",
      "chunk_type": "procedure",
      "cross_references": [
        "ts_26.502",
        "ts_26.517"
      ]
    },
    {
      "chunk_id": "ts_23.247_7.3.1",
      "section_id": "7.3.1",
      "section_title": "MBS Session Start for Broadcast",
      "content": "The Broadcast MBS Session Start follows the common procedure specified in clause 7.1.1.2 or clause 7.1.1.3, which consist of TMGI Allocation and MBS Session Create. It is possible for AF to allocate TMGI once but create the MBS Session for multiple times. A combined procedure to perform both TMGI allocation and MBS Session Create is available.\nThe TMGI Allocation is used by AF to obtain the TMGI as MBS Session ID (i.e. TMGI) and perform service announcement towards UEs.\nThe MBS Session Create (with MBS service type set to broadcast service) is used by the AF to indicate the impending start of the transmission of MBS data, and to provide the session attributes, so that resources for the MBS Session are set up in the MB-UPF and in the NG-RAN for 5GC Shared MBS traffic delivery. The MBS Session Create can be used if TMGI has not been allocated. In this case, MB-SMF will allocate a unique TMGI for the AF and then start the MBS Session.\nNOTE 1:\tWhen the multicast transport between NG-RAN and MB-UPF is described below, source specific multicasting is assumed.\nTo receive the data of broadcast communication service, the UE is either preconfigured with needed configuration (see TS 24.575 [26] for UE pre-configuration) for the UE to receive MBS service, or provisioned with the configuration of Broadcast MBS session on application level (service announcement as described in TS 26.502 [18] and TS 26.517 [22]). If the needed configuration is pre-configured, the UE does not need to interact with network.\nFigure 7.3.1-1: MBS Session Establishment for Broadcast\n0\tBased on OAM configuration, RAN nodes announce in SIBs over the radio interface information about the MBS FSA IDs and frequencies of neighbouring cells.\n1.\tTo establish broadcast MBS session, the AF performs TMGI allocation and MBS session creation as specified in clause 7.1.1.2 or 7.1.1.3. The MBS service type indicates to be broadcast service. The MBS FSA ID(s) of a broadcast MBS session are communicated in the service announcement towards the UE. The UE compares those MBS FSA IDs(s) with the MBS FSA ID(s) in SIBs for frequency selection.\n2.\tThe MB-SMF may use NRF to discover the AMF(s) supporting MBS based on the MBS service area and select the appropriate one(s). Then the MB-SMF sends the Namf_MBSBroadcast_ContextCreate (TMGI, N2 SM information ([LL SSM], 5G QoS Profile, [NR RedCap UE Information]), MBS service area, [MBS FSA ID(s)]) messages to the selected AMF(s) in parallel if the service type is broadcast service. The MB-SMF may include a maximum response time in the request.\nIf the MB-SMF receives the \"NR RedCap UE Information\" parameter (as defined in clause 6.19) from the AF (which may be via NEF/MBSF), the MB-SMF includes the \"NR RedCap UE Information\" parameter in N2 SM information.\n3.\tThe AMF transfers the MBS Session Resource Setup Request message, which contains the N2 SM information in the received Namf_MBSBroadcast_ContextCreate Request to all NG-RANs which support MBS in the MBS service area. The AMF includes the MBS service area.\n4.\tNG-RAN creates a Broadcast MBS Session Context and stores the TMGI and the QoS Profile in the MBS Session Context. The LL SSM are optional parameters and only provided by MB-SMF to NG-RAN if N3mb multicast transport is configured to be used in the 5GC. If MBS FSA ID(s) were received, the NG-RAN may use those MBS FSA ID(s)s to determine cells/frequencies within the MBS service area to broadcast MBS session data based on OAM configuration about the MBS FSA IDs and related frequencies.\nIf N2 SM information contains \"NR RedCap UE Information\", the NG-RAN determines that the related MBS service is intended to be received by NR (e)RedCap UEs only, only UEs that are neither NR RedCap UEs nor NR eRedCap UEs, or any kind of UEs and allocates the appropriate radio resources as defined in TS 38.331 [28].\nDepending on the NG-RAN's preference to use multicast or unicast transport over N3mb and the availability of the LL SSM, step 5a or step 5b is executed.\n5a.\tIf NG-RAN prefers to use N3mb multicast transport (and if LL SSM is available in NG-RAN), the NG-RAN joins the multicast group (i.e. LL SSM).\n5b.\tIf NG-RAN prefers to use N3mb unicast transport (or if the LL SSM is not available in NG-RAN) between the NG-RAN and MB-UPF, NG-RAN allocates its N3mb DL Tunnel endpoint to receive downlink MBS session data.\n6.\tThe NG-RAN reports successful establishment of the MBS Session resources (which may include multiple MBS QoS Flows) by sending MBS Session Resource Setup Response (TMGI, N2 SM information ([N3mb DL Tunnel Info])) message(s) to the AMF. If NG-RAN prefers to use N3mb unicast transport (or if the LL SSM is not available in NG-RAN) between the NG-RAN and MB-UPF, NG-RAN provides its N3mb DL Tunnel Info as part of the N2 SM information. For more details, refer to TS 38.413 [15].\n7.\tThe AMF transfers the Namf_MBSBroadcast_ContextCreate Response () to the MB-SMF. The AMF should respond success when it receives the first success response from the NG-RAN(s). And if all NG-RAN(s) report failure, the AMF should respond failure. The MB-SMF stores the AMF(s) which responds success in the MBS Session Context as the downstream nodes. If the AMF receives the NG-RAN response(s) from all involved NG-RAN(s), the AMF should include an indication of completion of the operation in all NG-RANs. If received from NG-RAN node, the N3mb DL Tunnel Info and NG-RAN ID are included in the response.\n8.\t[Conditional] If N3mb unicast transport is to be used (i.e. N3mb DL Tunnel Info is present in the Namf_MBSBroadcast_ContextCreate Response message from AMF) in a deployment where NG-RAN nodes share a common user plane entity, the MB-SMF only establishes the shared tunnel towards the DL GTP tunnel endpoint if the shared tunnel has not yet been established (as determined based on the stored DL GTP Tunnel endpoint(s) for the MBS session). The MB-SMF also stores the received DL GTP Tunnel and corresponding NG-RAN Node ID for the MBS session. For the deployment where NG-RAN nodes do not share a common user plane entity, the DL GTP tunnel will not be used by other NG-RAN nodes. In a deployment where NG-RAN nodes do not share a common user plane entity, the MB-SMF always establishes the shared tunnel towards the DL GTP tunnel endpoint.\nTo establish the shared tunnel towards the DL GTP tunnel endpoint, the MB-SMF sends an N4mb Session Modification Request to the MB-UPF to allocate the N3mb unicast transport tunnel for a replicated MBS stream for the MBS Session.\n8a-8b.\tIf the AF subscribed to a Delivery Status Indication (see clause 7.3.5), the MB-SMF notifies the AF as specified in step 2 of clause 7.3.5. The MB-SMF notifies the AF directly by invoking Nmbsmf_MBSSession_StatusNotify service operation, or the MB-SMF notifies the AF via NEF/MBSF (if deployed) by invoking Nmbsmf_MBSSession_StatusNotify service operation to the NEF/MBSF which then invokes Nnef_MBSSession_StatusNotify service operation to the AF.\n9.\tNG-RAN broadcasts the TMGI representing the MBS service over radio interface. Step 9 can take place in parallel with step 6.\n10.\tAnother NG-RAN may report successful establishment of the MBS Session resources (which may include multiple MBS QoS Flows) by sending MBS Session Resource Setup Response (TMGI, N2 SM information ([N3mb DL Tunnel Info])) message after the AMF transferred the Namf_MBSBroadcast_ContextCreate Response () to the MB-SMF.\n11.\tThe AMF transfers the Namf_MBSBroadcast_ContextStatusNotify request () to the MB-SMF. When the AMF receives the response from all NG-RAN nodes, the AMF includes an indication of the completion of the operation. If the AMF does not receive responses from all NG-RAN nodes before the maximum response time elapses since the reception of the Namf_MBSBroadcast_ContextCreate Request, then the AMF should transfer the Namf_MBSBroadcast_ContextStatusNotify request () which indicates partial success or failure.\n12.\t[Conditional] If N3mb unicast transport is to be used (i.e. N3mb DL Tunnel Info is present in the MBS Session Start Response message from AMF), the handling in MB-SMF and MB-UPF is the same as specified in step 8.\n13.\tThe AF starts transmitting the DL media stream to MB-UPF using the N6mb Tunnel, or optionally un-tunnelled i.e. as an IP multicast stream using the HL MC address.\n14.\tThe MB-UPF transmits the media stream to NG-RAN via N3mb multicast transport or unicast transport.\n15.\tThe NG-RAN transmits the received DL media stream using DL PTM resources.\nNOTE 2:\tStep 6-8 and 2-4 are comparable to step 2-5 and 6-7 in clause 7.2.1.4, respectively.\n7.3.1a\tMBS Session Start for resource sharing across multiple broadcast MBS Sessions during network sharing\nTo support resource sharing across multiple broadcast MBS Sessions during network sharing (see clause 6.18), in addition to clause 7.3.1, the following enhancement applies:\n-\tStep 2: The MB-SMF includes Associated Session ID in the N2 SM information in Namf_MBSBroadcast_ContextCreate.\n-\tStep 4: A shared NG-RAN node identifies the associated MBS sessions as specified in clause 6.18. The associated MBS sessions share radio resource configuration based on the existing Broadcast MBS Session context.\n-\tStep 5a: If the NG-RAN determines there is already an existing broadcast MBS session delivering the same content, the NG-RAN may skip joining the multicast group based on operator policy, i.e. step 5a can be skipped.\n-\tStep 5b: If the NG-RAN determines there is already an existing broadcast MBS session delivering the same content, a shared NG-RAN node may decide not to allocate N3mb DL tunnel endpoint.\n-\tStep 6:\n-\tFor N3mb multicast transport, when the NG-RAN node decides to skip joining the multicast group in step 5a, the NG-RAN still reports successful establishment of the MBS Session resource.\n-\tFor N3mb unicast transport, when the NG-RAN decides not to allocate N3mb DL Tunnel endpoint in step 5b, the NG-RAN still reports successful establishment of the MBS Session resource but the N3mb DL Tunnel Info is not included in MBS Session Resource Setup Response.\n-\tStep 8: If the N3mb unicast transport is used but N3mb DL Tunnel Info is not present in MBS Session Resource Setup Response, the MB-SMF accepts the response and skips step 8.\n-\tStep 9: If the NG-RAN determines that radio resource has been allocated for another broadcast MBS Session delivering the same content as specified in clause 6.18, the NG-RAN advertises the TMGI of the broadcast MBS session, and reuses such already allocated radio resource for the MBS data transmission for the broadcast MBS session.\nNOTE:\tThe 5G QoS Profile values for the broadcast MBS sessions are assumed to be pre-agreed amongst the multiple operators participating in the network sharing, and are the same irrespective of the PLMN from which the MBS Session Start is sent.\n-\tStep 10 ~ step 12:\nThe handling is the same as steps 5, 6, 7 and 8.\n-\tStep 14: If the user plane of a broadcast MBS session from its MB-UPF to the shared NG-RAN is not established, the NG-RAN will not receive the MBS packets from the MB-UPF.\n-\tStep 15: If the NG-RAN receives multiple DL media streams for the same content represented by the same Associated Session ID via multiple CNs, the NG-RAN should deliver only one DL media stream.",
      "chunk_type": "general",
      "cross_references": [
        "clause_7.1.1.2",
        "clause_7.1.1.3",
        "clause_6.19",
        "clause_7.3.5",
        "clause_7.2.1.4",
        "clause_6.18",
        "clause_7.3.1",
        "figure_7.3.1-1",
        "ts_24.575",
        "ts_26.502",
        "ts_26.517",
        "ts_38.331",
        "ts_38.413"
      ]
    },
    {
      "chunk_id": "ts_23.247_7.3.2",
      "section_id": "7.3.2",
      "section_title": "MBS Session Release for Broadcast",
      "content": "The MBS Session Release for broadcast follows the MBS Session Deletion (e.g. TMGI De-allocation and MBS Session Deletion) so that resource for shared MBS delivery is released. It is possible for AF to stop MBS Session but keep TMGI allocated.\nFigure 7.3.2-1: MBS Session Release for Broadcast\n1.\tThe AF/AS may stop the media stream before sending the MBS Session Release Request (TMGI) message to the 3GPP network.\n2.\tThe AF/AS performs MBS Session Deletion procedure to request release of MBS Session (steps 1 ~ 10 in figure 7.1.1.4-1, or steps 1 ~ 15 in figure 7.1.1.5-1).\n3.\tMB-SMF sends Namf_MBSBroadcast_ContextRelease request (TMGI) to the AMF(s) that has been involved in the MBS Session.\n4.\tThe AMF sends an N2 message to all RAN nodes that have been involved to release MBS session. If a NG-RAN node receives multiple N2 message to release the MBS Session for the same TMGI (e.g. from several AMFs the NG-RAN is connected to), NG-RAN only performs step 5 and step 6 once.\n5.\tThe NG-RAN stops the PTM transmission and stops TMGI advertisement for the MBS Session.\nDepending on whether multicast or unicast transport is used over N3mb, step 6a or step 6b is executed.\n6a.\tIf N3mb multicast transport has been used, the NG-RAN sends a Leave message (LL SSM) to stop the media stream to this NG-RAN node.\n6b.\tIf N3mb unicast transport has been used, the NG-RAN releases its unicast DL N3mb Tunnel endpoint.\n7.\tNG-RAN deletes the MBS Session Context of the broadcast MBS Session. The NG-RAN reports successful release of resources for the MBS Session by sending MBS Session Resource Release Response (TMGI) message(s) to the AMF(s).\n8.\tThe AMF sends Namf_MBSBroadcast_ContextRelease response (TMGI) to the MB-SMF.\n9.\tThe AF may start a TMGI de-allocation procedure (steps 11 ~ 14 in figure 7.1.1.4-1, or steps 16 ~ 19 in figure 7.1.1.5-1).\n7.3.2a\tMBS Session Release for resource sharing across multiple broadcast MBS Sessions during network sharing\nTo support resource sharing across multiple broadcast MBS Sessions, in addition to clause 7.3.2, the following enhancement applies:\n-\tStep 5:\n-\tIf the NG-RAN determines there are other associated broadcast MBS Sessions based on the Associated Session Identifier, the step 5 is skipped.\n-\tStep 6a:\n-\tIf the NG-RAN skipped joining the multicast group (LL SSM) in clause 7.3.1a, the NG-RAN does not send a Leave message (LL SSM),\n-\tOtherwise, if the NG-RAN joined the multicast group (LL SSM) previously, and if the NG-RAN determines there are other associated broadcast MBS Sessions based on the Associated Session Identifier, the NG-RAN may trigger procedure of Transport change for resource sharing across broadcast MBS Sessions during network sharing as specified in clause 7.3.7.\n-\tStep 6b:\n-\tIf the DL N3mb Tunnel for the broadcast MBS Session was not allocated previously in clause 7.3.1a, step 6b is skipped.\nOtherwise, if the DL N3mb Tunnel for the broadcast MBS Session was allocated previously, and if the NG-RAN determines there are other associated broadcast MBS Sessions based on the Associated Session Identifier, the NG-RAN may trigger the procedure of Transport change for resource sharing across broadcast MBS Sessions during network sharing as specified in clause 7.3.7.",
      "chunk_type": "general",
      "cross_references": [
        "clause_7.3.2",
        "clause_7.3.1",
        "clause_7.3.7",
        "figure_7.3.2-1",
        "figure_7.1.1.4-1",
        "figure_7.1.1.5-1"
      ]
    },
    {
      "chunk_id": "ts_23.247_7.3.3",
      "section_id": "7.3.3",
      "section_title": "MBS Session Update for Broadcast",
      "content": "The MBS Session Update for broadcast is used by the AF to update the broadcast area or service requirements of the MBS Session which may lead to addition of new MBS QoS Flow(s), removal of existing MBS QoS Flow(s) or update of existing MBS QoS Flow(s).\nFigure 7.3.3-1: MBS Session Update for Broadcast\n1.\tThe AF starts MBS session update procedure by sending Nnef_MBSSession_Update Request to the NEF/MBSF with TMGI (steps 1-6 and steps 9-10 in Figure 7.1.1.6-1, or steps 1-12 and steps 15-16 in Figure 7.1.1.7-1). The AF may adjust service requirement and/or broadcast area. The service requirements adjustment may lead to addition of new MBS QoS Flow(s), removal of existing MBS QoS Flow(s) or update of existing MBS QoS Flow(s).\n2.\tThe MB-SMF sends Namf_MBSBroadcast_ContextUpdate Request (TMGI, N2 SM information (MBS Session ID, [MBS QoS profile], [service area(s)], [Area Session ID(s)], [MBS IP Multicast Tunnel Info(s)], [MBS FSA ID(s)], [NR RedCap UE Information]), [updated MBS service area]) to the AMFs. For a location dependent service, the MB-SMF may provide information about several location areas. If the broadcast area is updated, the MB-SMF may use NRF to discover the AMF(s) based on the new broadcast area and select the appropriate one(s). The MB-SMF may include a maximum response time in the request.\nDepending on the change of the MBS service area, the MB-SMF may send Namf_MBSBroadcast_ContextCreate to some AMFs in the new MBS service area, Namf_MBSBroadcast_ContextRelease to some other AMFs in the old MBS service area.\nThe MB-SMF includes the \"NR RedCap UE Information\" parameter in N2 SM information, if received.\n3.\tThe AMF sends MBS Session Resource Update to NG-RANs with TMGI, the updated 5G QoS Profile and the updated MBS service area.\nDepending on the change of the MBS service area, the AMF may send MBS Session Resource Setup to some NG-RANs in new MBS service area (see clause 7.3.1) and MBS Session Resource Release to some other NG-RANs in old MBS service area.\n4.\tThe NG-RAN updates MBS Session Context.\nIf N2 SM information contains \"NR RedCap UE Information\" for the broadcast MBS session, the NG-RAN may update the radio resources accordingly as specified in TS 38.331 [28].\n5.\tThe NG-RAN reports successful update of the MBS Session resources (which may include multiple MBS QoS Flows) by sending MBS Session Resource Update Response (TMGI, N2 SM information ([N3mb DL Tunnel Info])) message(s) to the AMF. N3mb DL Tunnel Info is only available when unicast transport applies between MB-UPF and NG-RAN and the NG-RAN wants the transport to be changed. The NG-RAN should be ready to receive using the N3mb DL tunnel. For more details, refer to TS 38.413 [15].\n6.\tThe AMF sends Namf_MBSBroadcast_ContextUpdate Response to the MB-SMF. If the AMF received the NG-RAN responses from all involved NG-RAN(s), the AMF should include an indication of completion of the operation in all NG-RANs. If received from NG-RAN node, the N3mb DL Tunnel Info and corresponding NG-RAN ID are included in the response.\n6a.\t[Conditional] If MBS service area is changed in such a manner that NG-RAN nodes are added or removed from handling the MBS session, and N3mb unicast transport is used.\n-\tIn a deployment where NG-RAN nodes share a common user plane entity, the MB-SMF perform as following:\n-\tFor the NG-RAN node to be added, the MB-SMF only establishes the shared tunnel towards the DL GTP tunnel endpoint if the shared tunnel has not yet been established (as determined based on the stored DL GTP Tunnel endpoint(s) for the MBS session). The MB-SMF also stores the received DL GTP Tunnel and corresponding NG-RAN Node ID for the MBS session.\n-\tFor the NG-RAN node to be removed, the MB-SMF removes the received NG-RAN Node ID and possibly DL GTP tunnel endpoint from the stored NG-RAN Node ID(s) for the DL GTP tunnel endpoint for the MBS session, and checks whether the DL GTP tunnel is in use by other NG-RAN nodes based on the stored NG-RAN Node ID(s) for DL GTP tunnel endpoint for the MBS session. If the related DL GTP tunnel is not in use by other NG-RAN nodes, the N3mb unicast transport tunnel shall be removed.\n-\tIn a deployment where NG-RAN nodes do not share a common user plane entity, the MB-SMF always establishes or releases the shared tunnel towards the DL GTP tunnel endpoint if NG-RAN nodes are added or removed from handling the MBS session.\nIf the N3mb unicast transport tunnel need to be added or removed, the SMF sends an N4mb Session Modification Request to the MB-UPF to establish or release the N3mb unicast transport tunnel for establishing, or releasing the MBS stream for the MBS Session.\n7.\tThe NG-RAN updates the MBS Session. It takes place in parallel with step 5 to step 6.\n8\tAnother NG-RAN may report successful update of the MBS Session resources (which may include multiple MBS QoS Flows) by sending MBS Session Resource Update Response (TMGI, N2 SM information ([N3mb DL Tunnel Info])) message after the AMF transferred the Namf_MBSBroadcast_ContextUpdate Response () to the MB-SMF. N3mb DL Tunnel Info is only available when unicast transport applies between MB-UPF and NG-RAN and the NG-RAN wants the transport to be changed. The NG-RAN should be ready to receive using the N3mb DL tunnel. For more details, refer to TS 38.413 [15].\n9.\tThe AMF transfers the Namf_MBSBroadcast_ContextStatusNotify request () to the MB-SMF. When the AMF receives the response from all NG-RAN nodes, the AMF should include an indication of completion of the operation in all NG-RANs. If the AMF does not receive responses from all NG-RAN nodes before the maximum response time elapses since the reception of the Namf_MBSBroadcast_ContextUpdate Request, then the AMF should transfer the Namf_MBSBroadcast_ContextStatusNotify request () which indicates partial success or failure. If received from NG-RAN node, the N3mb DL Tunnel Info and corresponding NG-RAN ID are included in the request.\n10.\t[Conditional] If MBS service area is changed in such a manner that NG-RAN nodes are added or removed from handling the MBS session, and N3mb unicast transport is used, the MB-SMF establishes or releases the shared delivery tunnel via unicast N3mb transport for the MBS Session in the same manner as described in step 6a.",
      "chunk_type": "general",
      "cross_references": [
        "clause_7.3.1",
        "figure_7.3.3-1",
        "figure_7.1.1.6-1",
        "figure_7.1.1.7-1",
        "ts_38.331",
        "ts_38.413"
      ]
    },
    {
      "chunk_id": "ts_23.247_7.3.4",
      "section_id": "7.3.4",
      "section_title": "Support for Location dependent Broadcast Service",
      "content": "The clause describes procedures to support the Location dependent broadcast service as described in clause 6.2.\nThe MBS session creation procedure is performed as defined in clause 7.1.1.2 with the following additions:\n-\tMultiple AFs may start the same Broadcast MBS session with different content in different MBS service areas. The NEF selects MB-SMF as ingress control node(s) for different MBS service areas.\n-\tIf presented, the NEF maps possible external identifiers for MBS service areas to network-internal identifiers (e.g. list of cells, TAIs).\n-\tAn NEF/MBSF uses the service area to discover the MB-SMF.\nIf different MB-SMFs are assigned for different MBS service areas belonging to different MB-SMF service areas for an MBS session as specified in clause 6.2.3, an MB-SMF shall accept TMGIs allocated by other MB-SMF.\n-\tFor Location dependent Broadcast Service, MB-SMF allocates Area Session ID, and updates its NF profile towards the NRF with the TMGI and Area Session ID.\n-\tThe MB-SMF may select the MB-UPF based on the MBS service area.\n-\tThe MBS service area(s) are indicated to the UE in the Service Announcement as defined in clause 6.11.\nThe MBS session establishment procedure is performed as defined in clauses 7.3.1 and 7.3.1a with the following additions or clarification:\n-\tMB-SMF requests the AMF to transfer an N2 message (i.e. MBS Session Resource Setup Request) to the NG-RAN nodes of the MBS service area with Broadcast MBS session information which additionally includes the Area Session IDs and MBS service areas.\n-\tThe NG-RAN uses the received MBS Session ID and Area Session IDs to determine the local Broadcast MBS session contexts.\n-\tThe NG-RAN responds for service areas it handles with the Area Session ID(s) and DL tunnel endpoint(s) for the DL tunnel(s) from MB-SMF if unicast transport applies over N3mb between MB-UPF and NG-RAN.\n-\tAccording to the Area Session ID(s) and DL tunnel endpoint(s) provided by NG-RAN, the MB-SMF instructs the MB-UPF to send location dependent content.\n-\tThe AF transmits the DL media streams to MB-UPF via tunnels to differentiate the content delivered to different areas.",
      "chunk_type": "general",
      "cross_references": [
        "clause_6.2",
        "clause_7.1.1.2",
        "clause_6.2.3",
        "clause_6.11"
      ]
    },
    {
      "chunk_id": "ts_23.247_7.3.5",
      "section_id": "7.3.5",
      "section_title": "MBS Session Delivery Status Indication for Broadcast",
      "content": "The MBS Session Delivery Status Indication for broadcast is used by the MB-SMF to notify the AF/AS of conditions affecting the delivery of the MBS session (e.g. MBS session created, MBS session terminated, etc.). The occurrence of the indicated condition may have been detected at the MB-SMF or may have been reported to the MB-SMF by other entities involved in the MBS session delivery.\nFigure 7.3.5-1: MBS Session Delivery Status Indication for Broadcast\n1.\tThe external AF subscribes event for delivery status towards the NEF, and the NEF subscribes corresponding event towards the MB-SMF (step 1a), or the legacy AS request status report towards the MBSF, and the MBSF subscribes event for delivery status towards the MB-SMF (step 1b), or the internal AF subscribes event for delivery status towards the MB-SMF (step 1c).\n2.\tThe MB-SMF notifies the TMGI and the event towards the NEF, and the NEF notifies the TMGI and corresponding event towards the external AF (step 2a), or the MB-SMF notifies the TMGI and the event towards the MBSF, and the MBSF sends Delivery Status Indication to legacy AS with the TMGI and the corresponding event (step 2b), or the MB-SMF notifies the TMGI and the event towards the internal AF (step 2c).\nFor the \"MBS session started\" event, after the MB-SMF contacts AMFs to request the establishment of the Broadcast MBS session, the MB-SMF may wait until it has received a Namf_MBSBroadcast_ContextCreate Response or Namf_MBSBroadcast_ContextStatusNotify with the indication of the completion of the operation from each AMF (see clause 7.3.1) before determining that the Broadcast MBS session has been started.",
      "chunk_type": "general",
      "cross_references": [
        "clause_7.3.1",
        "figure_7.3.5-1"
      ]
    },
    {
      "chunk_id": "ts_23.247_7.3.6",
      "section_id": "7.3.6",
      "section_title": "Broadcast MBS Session Release Require",
      "content": "When NG-RAN is not able continue to provide the Broadcast MBS Session, e.g. due to lack of radio resources, NG-RAN may initiate Broadcast Session Release Require procedure.\nFigure 7.3.6-1: Broadcast MBS Session Release Require\n1.\tIf NG-RAN cannot continue to provide the Broadcast MBS session, e.g. due to lack of radio resources, the NG-RAN sends Broadcast Session Release Require (MBS Session ID) to the AMF.\n2.\tThe AMF initiates Broadcast Session Release towards the NG-RAN as defined in steps 4 - 7 in clause 7.3.2.\n3.\tIf unicast transport applies in N3mb, the AMF receives the DL tunnel Info for the Broadcast MBS Session from the NG-RAN in step 2. The AMF notifies the MB-SMF about the DL tunnel release via Namf_MBSBroadcast_ContextStatusNotify with N3mb DL Tunnel Info and corresponding NG-RAN ID. If multicast transport applies in N3mb, only when Broadcast Session Release Require is performed for all the NG-RANs involved in the MBS session which are managed by the AMF, the AMF notifies the MB-SMF about radio resource release via Namf_MBSBroadcast_ContextStatusNotify indicating radio resource release.\n3a-3b.\tThis step applies if the AF subscribed to a Delivery Status Indication (see clause 7.3.5). If Broadcast Session Release Require is performed by all the NG-RANs, i.e. for unicast N3mb transport, the MB-SMF releases all the DL tunnel Info for the broadcast MBS Session, and for multicast N3mb transport, the MB-SMF receives radio resource release from all the AMFs for the broadcast MBS Session, the MB-SMF notifies the AF directly of the situation by invoking Nmbsmf_MBSSession_StatusNotify, or the MB-SMF notifies the AF via NEF/MBSF (if deployed) by invoking Nmbsmf_MBSSession_StatusNotify service operation to the NEF/MBSF which then invokes Nnef_MBSSession_StatusNotify service operation to the AF\n4.\tThe MB-SMF performs N4mb Session Modification to let MB-UPF stop the broadcast data forwarding towards the indicated DL tunnel and release the DL tunnel as specified in step 6a of clause 7.3.3.",
      "chunk_type": "general",
      "cross_references": [
        "clause_7.3.2",
        "clause_7.3.5",
        "clause_7.3.3",
        "figure_7.3.6-1"
      ]
    },
    {
      "chunk_id": "ts_23.247_7.3.7",
      "section_id": "7.3.7",
      "section_title": "Transport change for resource sharing across broadcast MBS Sessions during network sharing",
      "content": "The procedure in this clause is performed when one of the following events occur and resource sharing across broadcast MBS Sessions in network sharing as specified in clause 6.18 is applied:\n-\tWhen a broadcast MBS session, from which the shared NG-RAN receives a DL MBS data stream, is released, and the NG-RAN node determines to request to receive an DL MBS data stream from another operator's CN with a remaining broadcast MBS session.\n-\tWhen the shared NG-RAN receives a Broadcast Session Modification Request with an N3mb path failure indication as specified in TS 23.527 [32], and the NG-RAN node determines to request to receive the DL MBS data stream via another operator's CN.\nNOTE 1:\tThe NG-RAN node can also allocate a new receiving tunnel endpoint to restore the user plane towards the current CN.\nFigure 7.3.7-1: Transport change for resource sharing across broadcast MBS Sessions during network sharing\n1.\tThe NG-RAN selects another broadcast MBS Session that is delivering the same content via another CN to establish user plane, utilizing the broadcast MBS session context stored in the NG-RAN.\nIf unicast transport of N3mb applies, continue at step 3.\nNOTE 2:\tWhich CN is to be selected is up to NG-RAN implementation.\n2.\tIf multicast transport of N3mb applies, the NG-RAN joins the multicast group towards the LL SSM provided by the CN and continues at step 8.\n3.\tIf unicast transport of N3mb applies, the NG-RAN allocates N3mb DL Tunnel Info, and sends N2 message (e.g. BROADCAST SESSION TRANSPORT REQUEST) to the AMF, including the MBS Session ID, the N3mb DL Tunnel Info and optional Area session ID.\n4.\tThe AMF transfers the Namf_MBSBroadcast_ContextStatusNotify request to the MB-SMF, which contains the N2 message.\n4a.\tThe MB-SMF returns Namf_MBSBroadcast_ContextStatusNotify response.\n5.\tThe MB-SMF sends an N4mb Session Modification Request to the MB-UPF to allocate the N3mb point-to-point transport tunnel for a replicated MBS stream for the MBS Session. The MB-UPF sends N4mb Session Modification Response to the MB-SMF.\n6.\tThe AMF forwards the received N2 information in N2 message (e.g. BROADCAST SESSION TRANSPORT RESPONSE) to the NG-RAN.\n7.\tThe NG-RAN receives the media stream from the MB-UPF via N3mb multicast transport or unicast transport.\n8.\tThe NG-RAN sends the received packets using the existing radio resource.",
      "chunk_type": "general",
      "cross_references": [
        "clause_6.18",
        "figure_7.3.7-1",
        "ts_23.527"
      ]
    },
    {
      "chunk_id": "ts_23.247_7.3.8",
      "section_id": "7.3.8",
      "section_title": "Broadcast MBS procedures for UEs using power saving functions",
      "content": "For a UE using power saving function to receive broadcast MBS Session data, the following apply:\n-\tIf a UE is in RRC_CONNECTED mode due to other reasons at the start time or the scheduled activation times, the UE follows normal connected mode procedures.\n-\tIf a UE is in RRC_IDLE state and reachable (e.g. in active time in MICO or PTW for eDRX) at the start time or the scheduled activation times, the UE follows normal idle mode procedure.\n-\tIf a UE is in RRC_IDLE mode or CM-CONNECTED with RRC_INACTIVE state and not reachable (i.e. in deep sleep) at the start time or the scheduled activation times, the UE leaves the deep sleep state only to receive the MBS broadcast service, but should not update the AMF to become reachable for paging to minimize signalling load.\nNOTE 1:\tUE would therefore still be considered unreachable for paging in the AMF.\n-\tWhen the UE is in the middle of an MBS data transfer, and the UE is scheduled to move to deep sleep due to power saving, e.g. end of PTW for extended idle mode DRX, expiration of active time for MICO, or the UE transitioning from CM-CONNECTED to CM-CONNECTED with RRC_INACTIVE state with eDRX or the UE transitioning from CM-CONNECTED to CM-IDLE in the case of MICO with no active time, then the UE does not go to deep sleep during the remainder of the current MBS data transfer.\nNOTE 2:\tIf at the end of the current MBS data transfer the UE knows there is another MBS data transfer scheduled soon, depending on the time between MBS data transfers, the UE can decide to go to sleep between MBS data transfers.",
      "chunk_type": "procedure",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.247_7.4.1",
      "section_id": "7.4.1",
      "section_title": "Inter-system mobility with interworking at service layer",
      "content": "For inter-system mobility with interworking at service layer, i.e. the same multicast service is provided via eMBMS in E-UTRAN and MBS, the UE is instructed to switch between MBS and eMBMS:\nNOTE 1:\tThe source network can be configured with the frequencies where the same service is provided in the target network, i.e. the EPC network neighbouring the 5GC network support the same eMBMS service.\nNOTE 2:\tThe UE can be configured, per TMGI, to know that the same service is provided over MBS and eMBMS.\n-\tMobility from MBS to eMBMS.\nWhen moving to E-UTRAN/EPC, the UE initiates procedures as defined in TS 23.246 [8] to receive MBMS service for the TMGI(s).\nIf the UE has one or more unicast PDU Sessions (including, but not limited to, the PDU Session used for MBS and for another service (e.g. Public Safety service) with the QoS Flow(s) for the other service) moving to EPS, and if the handover procedure from 5GS to EPS using N26 interface described in clause 4.11.1.2.1 of TS 23.502 [6] is used:\n-\tFor the PDU Session used also for MBS, the SMF+PGW-C removes the UE from the Multicast MBS session context(s), if it exists, upon receiving a Modify Bearer Request of the PDU Session from the SGW (i.e. step 14a of clause 4.11.1.2.1 of TS 23.502 [6]).\nNOTE 3:\tWhen 5GS to EPS mobility is complete, if there is pending request of removing a UE from a released MBS Session (see step 2 of clause 7.2.2.3), the pending request is also removed locally.\n-\tThe NG-RAN removes the UE from the Multicast MBS session context(s) if it exists, or removes the whole multicast session context if the UE is the last one for the Multicast MBS session (e.g. after receiving the UE Context Release Command message sent by the AMF).\nFor 5GS to EPS Idle mode mobility with no N26, when the UE moves to the EPS and performs E-UTRAN/EPS attach according to step 8 of clause 4.11.2.4.1 of TS 23.502 [6], if the UE does not maintain registration in 5GC, upon reachability time-out, the AMF may implicitly detach the UE and release the possible remaining PDU Session(s) in 5GC. The SMF+PGW-C removes the UE from the Multicast MBS session context(s), if it exists, upon receiving a tracking area update from the UE.\nNOTE 4:\tWhen 5GS to EPS mobility is complete, if there is pending request of removing a UE from a released MBS Session (see step 2 of clause 7.2.2.3), the pending request is also removed locally.\n-\tMobility from eMBMS to MBS.\nWhen the UE has moved to NR/5GC, it triggers the multicast context and multicast flow setup/modification via PDU Session Modification procedures as defined in clause 6.8 to receive MBS transport for the TMGI(s).",
      "chunk_type": "general",
      "cross_references": [
        "ts_23.502_clause_4.11.1.2.1",
        "clause_7.2.2.3",
        "ts_23.502_clause_4.11.2.4.1",
        "clause_6.8",
        "ts_23.246",
        "ts_23.502"
      ]
    },
    {
      "chunk_id": "ts_23.247_7.5.1",
      "section_id": "7.5.1",
      "section_title": "Group Message Delivery via MBS Broadcast",
      "content": "Figure 7.5.1-1: Group Message Delivery via MBS Broadcast\nNOTE 1:\tThe steps in this clause for group message delivery to the UE(s) follow the procedures specified in TS 26.502 [18], where the NEF acts as an MBS Application Provider.\n1.\tThe AF sends Nnef_MBSGroupMsgDelivery_Create Request to the NEF. The Request message contains the Group Message Payload, MBS service area, Group Message Delivery Start Time, Stop Time and External Group Identifier, Target UE Classes (as defined in TS 26.502 [18]).\n2.\tThe NEF checks authorization of the AF. If geographical area information or civic address information was provided by the AF as MBS service area, the NEF translates the MBS service area to Cell ID list or TAI list. The NEF may further check the MBS capability within the MBS service area.\nNOTE 2:\tThe NEF is mandated for group message delivery.\n3.\tThe NEF transforms the group message payload into a file, and determines the meta data information of the file (e.g. File URL, etc.). The NEF assigns a Group Message Correlation ID that identifies this group message delivery request.\nIf Application Service Provisioning specified in TS 26.502 [18] has not been performed, step 4 to step 8 are executed. Otherwise, they can be skipped.\n4.\tThe NEF performs Application Service Provisioning by invoking Nmbsf_MBSUserService_Create and Nmbsf_MBSUserDataIngestSession_Create towards the MBSF using Object Distribution Method as specified in TS 26.502 [18].\n5.\tThe MBSF performs MBS Session Creation as specified in clause 7.1.1.2 or clause 7.1.1.3.\n6.\tThe MBSF performs Distribution Session Provisioning as specified in TS 26.502 [18]. The MBSF invokes Nmbstf_MBSDistributionSession_Create on the MBSTF, passing the parameters of the MBS Distribution Session received in step 4 to the MBSTF.\n7.\tThe MB-SMF initiates the MBS Session Start for Broadcast procedure as specified in step 2 to step 9 in clause 7.3.1.\n8.\tIf the MBSF performs the service announcement, it initiates the MBS User Service Announcement as specified in TS 26.502 [18]. The application may receive the appropriate information through the MBS-6 API from the MBS Client (see TS 26.502 [18]). The NEF may receive the service announcement information via Nmbsf_MBSUserDataIngestSession_StatusNotify callback service operation (see TS 26.502 [18]).\n9.\tThe NEF sends Nnef_MBSGroupMsgDelivery_Create Response (Group Message Correlation ID, Acceptance Status, Cause) to the AF. The Acceptance Status indicates whether the group message delivery request is accepted or not. If not, the Cause is included indicating the appropriate failure reason. If the AF performs the service announcement, the NEF includes in the Group Message Response the service announcement information which contains information such as Session Description parameters (e.g. TMGI) and the object meta data as specified in TS 26.502 [18]. The NEF may further include the area where MBS is not supported within the MBS service area in the Nnef_MBSGroupMsgDelivery_Create response to the AF.\nIf the AF knows the UEs that are located in the area where MBS is not supported, AF may use unicast to send the group message to those UEs.\n10.\tIf the AF needs to perform the Service Announcement, the AF sends the application service announcement to the UE as specified in TS 26.502 [18].\n11.\tThe NEF performs the User Data Ingestion towards the MBSTF as specified in TS 26.502 [18]. The NEF may push the file to the MBSTF or let MBSTF pull the file from the NEF.\n12.\tThe MBSTF performs packetization and optionally FEC encoding as specified in TS 26.502 [18].\n13.\tThe MBSTF delivers the packets to the MB-UPF to NG-RAN, and NG-RAN broadcast to the UE as specified in step 13 to step 15 in clause 7.3.1.\n14.\tBased on the service announcement information received in step 8 or step 10, when the UE receives the packets, the MBS client performs FEC decoding to restore the file and gets the group message from the file, as specified in TS 26.502 [18]. The MBS Client can expose the file towards the application in the UE using the MBS-7 API (see TS 26.502 [18]).\n15.\tThe MBSTF notifies the MBSF of User Data distribution status, and the MBSF then notifies the MBSF of the User Data ingestion status as specific in TS 26.502 [18].\n16.\tThe NEF sends Nnef_MBSGroupMsgDelivery_StatusNotify to the AF, containing Group Message Correlation ID, Delivery Status. The Delivery Status indicates whether delivery of Group Message Payload is successful or not. The delivery status information is received by the NEF via Nmbsf_MBSUserDataIngestSession_StatusNotify service operation (see TS 26.502 [18]).",
      "chunk_type": "general",
      "cross_references": [
        "clause_7.1.1.2",
        "clause_7.1.1.3",
        "clause_7.3.1",
        "figure_7.5.1-1",
        "ts_26.502"
      ]
    },
    {
      "chunk_id": "ts_23.247_7.5.2",
      "section_id": "7.5.2",
      "section_title": "Modification of previously submitted Group message",
      "content": "Figure 7.5.2-1: Modify Group Message Delivery via MBS Broadcast\nNOTE:\tThe steps in this clause for modification of group message delivery to the UE(s) follow the procedures specified in TS 26.502 [18], where the NEF acts as an MBS Application Provider.\n1.\tThe AF sends Nnef_MBSGroupMsgDelivery_Update Request to the NEF. The Request message contains the Group Message Correlation ID, Group Message Payload, MBS service area, Group Message Delivery Start Time, Stop Time and External Group Identifier, Target UE Classes (as defined in TS 26.502 [18]). The NEF identifies the associated MBS Service by the external Group Identifier. The Group Message Correlation ID indicates the transaction to be modified.\n2.\tThe NEF checks authorization of AF. If geographical area information or civic address information was provided by the AF as MBS service area, the NEF translates the MBS service area to Cell ID list or TAI list. The NEF may further check the MBS capability within the MBS service area.\nFor Group Message Payload update, steps 3 to 6 are executed:\n3.\tThe NEF transforms the group message payload into a file, and use the determined file meta data (e.g. File URL, etc.) in clause 7.5.1.\n4.\tIf the NEF pushes the updated file to the MBSTF, step 4 to step 5 can be skipped. If the MBSTF pulls the updated file from the NEF, the NEF updates MBS User Data Ingest Session on the MBSF as specified in TS 26.502 [18]. The update service operation needs to indicate an update of the file containing the updated group message.\n5.\tThe MBSF updates MBS Distribution Session on the MBSTF as specified in TS 26.502 [18]. The update service operation needs to indicate an update of the file containing the updated group message.\n6.\tThe NEF pushes the update file to the MBSTF or the MBSTF pulls the updated file from the NEF. And the MBSTF delivers the updated file towards the MB-UPF in 5GC as specified in clause 4.3.3.2 of TS 26.502 [18].\nFor MBS service area update, step 7 and step 8 are executed:\n7.\tThe NEF updates MBS User Service on the MBSF as specified in TS 26.502 [18]. The update service operation indicates MBS service area update.\n8.\tThe MBSF performs MBS Session Update as specified in clause 7.1.1.6 or clause 7.1.1.7 to update MBS service area, which triggers MBS Session Update for Broadcast as specified in clause 7.3.3.\n9.\tThe NEF sends Nnef_MBSGroupMsgDelivery_Update Response (Acceptance Status, Cause) to the AF. The Acceptance Status indicates whether the group message update request is accepted or not. If not, the Cause is included indicating the appropriate failure reason. The NEF may further include the area where MBS is not supported in the Nnef_MBSGroupMsgDelivery_Update response to the AF.\nAfter the modified group message is delivered, the NEF sends Nnef_MBSGroupMsgDelivery_StatusNotify to the AF as described in step 16 in clause 7.5.1.",
      "chunk_type": "general",
      "cross_references": [
        "clause_7.5.1",
        "ts_26.502_clause_4.3.3.2",
        "clause_7.1.1.6",
        "clause_7.1.1.7",
        "clause_7.3.3",
        "figure_7.5.2-1",
        "ts_26.502"
      ]
    },
    {
      "chunk_id": "ts_23.247_7.5.3",
      "section_id": "7.5.3",
      "section_title": "Cancellation of previously submitted Group message",
      "content": "Figure 7.5.3-1: Cancelling Group Message Delivery via MBS Broadcast\nNOTE:\tThe steps in this clause for cancelling the group message delivery to the UE(s) follow the procedures specified in TS 26.502 [18] where the NEF acts as an MBS Application Provider.\n1.\tThe AF sends Nnef_MBSGroupMsgDelivery_Delete Request (Group Message Correlation ID, External Group Identifier) to the NEF. The NEF identifies the associated MBS Service by the External Group Identifier. The Group Message Correlation ID indicates the transaction to be cancelled.\n2.\tThe NEF checks authorization of the AF.\nSteps 3 to step 5 are executed if the group message delivery has started and MBSF needs to inform the MBS Client about the cancellation of the file delivery. Otherwise, they can be skipped.\n3.\tThe NEF updates MBS User Data Ingest Session on the MBSF as specified in TS 26.502 [18] indicating the cancellation of the file delivery.\n4.\tIf the MBSTF pulled the file from the NEF previously, the MBSF updates MBS Distribution Session on the MBSTF as specified in TS 26.502 [18] indicating cancellation of the file delivery and the MBSTF stops the file delivery.\n5.\tIf the NEF pushed the file previously to the MBSTF, the NEF may send HTTP DELETE to the MBSTF to cancel the file delivery. The MBSTF stops the file delivery.\n6.\tThe NEF destroys MBS User Data Ingest Session on the MBSF as specified in TS 26.502 [18].\n7.\tThe MBSF destroys MBS Distribution Session on the MBSTF as specified in TS 26.502 [18].\n8.\tThe MBSF performs MBS Session Deletion as specified in clause 7.1.1.4 or clause 7.1.1.5, which includes MBS Session Release for Broadcast as specified in clause 7.3.2.\n9.\tThe NEF sends Nnef_MBSGroupMsgDelivery_Delete Response (Acceptance Status, Cause) to the AF. The Acceptance Status indicates whether the Nnef_MBSGroupMsgDelivery_Delete Request is accepted or not. Cause is included when the Nnef_MBSGroupMsgDelivery_Delete Request is not accepted.",
      "chunk_type": "general",
      "cross_references": [
        "clause_7.1.1.4",
        "clause_7.1.1.5",
        "clause_7.3.2",
        "figure_7.5.3-1",
        "ts_26.502"
      ]
    },
    {
      "chunk_id": "ts_23.247_8.1.1",
      "section_id": "8.1.1",
      "section_title": "General",
      "content": "The control plane protocol stacks for Multicast and Broadcast service between NG-RAN and MB-SMF is defined in the clause 8.1.1 and the other control plane protocol stacks for Multicast and Broadcast service are defined in the TS 23.501 [5] clause 8.2.\nThe control plane protocols for N4mb reference point between MB-SMF and MB-UPF are defined in TS 29.244 [17].\nThe reference point Nmb2 between MBSF and MBSTF will be defined in TS 26.502 [18] and TS 26.517 [22].",
      "chunk_type": "definition",
      "cross_references": [
        "clause_8.1.1",
        "ts_23.501_clause_8.2",
        "ts_23.501",
        "ts_29.244",
        "ts_26.502",
        "ts_26.517"
      ]
    },
    {
      "chunk_id": "ts_23.247_8.1.2",
      "section_id": "8.1.2",
      "section_title": "NG-RAN – MB-SMF",
      "content": "Legend:\n-\tN2 SM information: This is the subset of NG-AP information that the AMF transparently relays between the NG-RAN and the MB-SMF, and is included in the NG-AP messages and the N11mb related messages, where the NG-RAN node has MBS capability and in this Release the NG-RAN is a 3GPP NR.\nFigure 8.1.1-1: Control Plane between the NG-RAN and the MB-SMF",
      "chunk_type": "general",
      "cross_references": [
        "figure_8.1.1-1"
      ]
    },
    {
      "chunk_id": "ts_23.247_8.2",
      "section_id": "8.2",
      "section_title": "User plane for Multicast and Broadcast services",
      "content": "The User plane protocol stack for PDU session which handles the multicast operation is same with the PDU session user plane Protocol Stack defined in the TS 23.501 [5] clause 8.3.1.\nThe user plane protocol stack for MBS session in case of shared delivery is described in Figure 8.2-1 and Figure 8.2-2. In Figure 8.2-1, the UDP tunnel applies to N6mb and Nmb9, while in Figure 8.2-2, the plain IP multicast applies to N6mb. The user plane protocol stack for MBS session in case of individual delivery is described in Figure 8.2-3.\nFigure 8.2-1: User Plane Protocol Stack for MBS session (UDP Tunnel)\nFigure 8.2-2: User Plane Protocol Stack for MBS session (plain IP multicast)\n-\t5G-AN Protocol Layers: This set of protocols/layers depends on the AN:\n-\tin this Release, the 5G-AN is a 3GPP NR, these protocols/layers are defined in TS 38.401 [16]. The radio protocol between the UE and the 5G-AN node (gNodeB) is specified in TS 38.300 [9].\nFigure 8.2-3: User Plane Protocol Stack for MBS session in case of Individual delivery\n-\t5G-AN Protocol Layers: This set of protocols/layers depends on the AN:\n-\tin this Release, the 5G-AN is a 3GPP NR, these protocols/layers are defined in TS 38.401 [16]. The radio protocol between the UE and the 5G-AN node (gNodeB) is specified in TS 38.300 [9].\nNOTE:\tIn Figure 8.2-3, the User Plane Protocol Stack between MB-UPF and AF/MBSTF is shown in Figure 8.2-1 and Figure 8.2-2.",
      "chunk_type": "general",
      "cross_references": [
        "ts_23.501_clause_8.3.1",
        "figure_8.2-1",
        "figure_8.2-2",
        "figure_8.2-3",
        "ts_38.300_figure_8.2-3",
        "ts_23.501",
        "ts_38.401",
        "ts_38.300"
      ]
    },
    {
      "chunk_id": "ts_23.247_9.1.1",
      "section_id": "9.1.1",
      "section_title": "General",
      "content": "The following table illustrates the MB-SMF Services for MBS.\nTable 9.1.1-1: NF services provided by MB-SMF\nService Name\nService Operations\nOperation\nSemantics\nExample Consumer (s)\nNmbsmf_TMGI\nAllocate\nRequest/Response\nNEF, MBSF, AF\nDeallocate\nRequest/Response\nNEF, MBSF, AF\nContextStatusSubscribe\nSMF\nNmbsmf_MBSSession\nContextStatusUnsubscribe\nSubscribe/Notify\nSMF\nContextStatusNotify\nSMF\nContextUpdate\nRequest/Response\nAMF, SMF\nStatusSubscribe\nSubscribe/Notify\nMBSF, NEF, AF\nStatusUnsubscribe\nMBSF, NEF, AF\nStatusNotify\nMBSF, NEF, AF\nCreate\nRequest/Response\nMBSF, NEF, AF\nUpdate\nRequest/Response\nMBSF, NEF, AF\nDelete\nRequest/Response\nMBSF, NEF, AF",
      "chunk_type": "definition",
      "cross_references": [
        "table_9.1.1-1"
      ]
    },
    {
      "chunk_id": "ts_23.247_9.1.2.1",
      "section_id": "9.1.2.1",
      "section_title": "General",
      "content": "Service description: NF Service Consumer can use this service to request the allocation of TMGIs and release allocated TMGIs.",
      "chunk_type": "definition",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.247_9.1.2.2",
      "section_id": "9.1.2.2",
      "section_title": "Nmbsmf_TMGI_Allocate service operation",
      "content": "Service operation name: Nmbsmf_TMGI_Allocate\nDescription: This service is used by the NF Service Consumer to request the allocation of TMGI(s) or request to refresh previously allocated TMGI(s).\nInputs, Required: Number of TMGIs.\nInputs, Optional: TMGI(s) for which the expiry time is to be extended).\nOutputs, Required: TMGI(s), Expiry Time of the TMGI(s), Result Indication.\nOutputs, Optional: NID.",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.247_9.1.2.3",
      "section_id": "9.1.2.3",
      "section_title": "Nmbsmf_TMGI_Deallocate service operation",
      "content": "Service operation name: Nmbsmf_TMGI_Deallocate\nDescription: NF Service Consumer can use this service to request the release of TMGI(s).\nInputs, Required: TMGI(s).\nInputs, Optional: None.\nOutputs, Required: Success or not.\nOutputs, Optional: None.",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.247_9.1.3.1",
      "section_id": "9.1.3.1",
      "section_title": "General",
      "content": "Service description: The following are the key functionalities of this NF service:\n-\t(between AMF or SMF and MB-SMF) For multicast, NF Service Consumer can use this service to request the reception of MBS data or to terminate the reception of MBS data of a Multicast MBS session, or for a location dependent Multicast MBS session, the part of the multicast MBS session within a service area;\n-\t(between SMF and MB-SMF) For multicast, allow consumer NFs to query information (e.g. QoS information) about MBS Session. This service will be invoked by SMF for UE join event;\n-\t(between SMF (only for multicast) or MBSF/NEF and MB-SMF) Allow consumer NFs to subscribe and unsubscribe for an Event ID and MBS Session, or for a location dependent MBS session, related to the part of the MBS session within a service area (only for MBSF/NEF);\n-\t(between SMF (only for multicast) or MBSF/NEF and MB-SMF) Notifying events on the MBS Session, or for a location dependent MBS session, related to the part of the MBS session within a service area (only for MBSF/NEF), to the subscribed NFs;\n-\t(between MBSF/NEF/AF and MB-SMF) Creation/Modification/Activation/Deactivation/Release of Multicast MBS session, or for a location dependent Multicast MBS session, the part of the Multicast MBS session within a service area; and\n-\t(between MBSF/NEF and MB-SMF) Creation/Modification/Start/Stop/Release of Broadcast MBS sessions, or for a location dependent Broadcast MBS session, the part of the Broadcast MBS session within a service area.\nThe following events related to MBS Session Context can be subscribed by SMF as consumer NF:\n-\t(between SMF and MB-SMF, only for multicast) QoS change: The event notification is sent when QoS within a Multicast MBS session changes, e.g. adding/removing QoS flow(s);\n-\t(between SMF and MB-SMF only for multicast) multicast session state (Active, Inactive);\n-\t(between SMF and MB-SMF only for multicast) Multicast MBS session service area change (for a location dependent Broadcast MBS session, the notification relates to the part of the Broadcast MBS session within a service area);\n-\t(between SMF and MB-SMF only for multicast) Multicast MBS session release;\n-\t(between SMF and MB-SMF only for multicast) multicast session security context update.\nThe following events related to an MBS session, or for a location dependent MBS session, related to the part of the MBS session within a service area, can be subscribed by MBSF, NEF, or AF as consumer NF:\n-\t(between MBSF/NEF/AF and MB-SMF) MBS session release due to TMGI expiry;\n-\t(between MBSF/NEF/AF and MB-SMF) Broadcast delivery status.\nNOTE:\tWhether event IDs are needed can be determined by stage 3.",
      "chunk_type": "definition",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.247_9.1.3.2",
      "section_id": "9.1.3.2",
      "section_title": "Nmbsmf_MBSSession_ContextUpdate service operation",
      "content": "Service operation name: Nmbsmf_MBSSession_ContextUpdate\nDescription: NF Service Consumer can use this service to request or terminate the reception of data of a multicast session, or for a location dependent MBS session, related to the part of the MBS session within a service area.\nInputs, Required: MBS Session ID, if consumer is AMF: N2 container (Establishment or Release, MBS Session ID, Possible Area Session ID, Possible GTP Tunnel info for unicast transport, Possible tracking Area IDs), AMF ID, if consumer is SMF: SMF ID, MBS Session ID, Action(Establishment or Release).\nInputs, Optional: if consumer is SMF: Area Session ID, Unicast GTP Tunnel info of the UPF.\nOutputs, Required: Success or not.\nOutputs, Optional: if consumer is AMF: N2 container (MBS Session ID, Possible Multicast DL tunnel info, multicast QoS flow information, session state (Active/Inactive), [MBS service areas]); if consumer is SMF: Multicast DL tunnel info.",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.247_9.1.3.3",
      "section_id": "9.1.3.3",
      "section_title": "Nmbsmf_MBSSession_ContextStatusSubscribe service operation",
      "content": "Service operation name: Nmbsmf_MBSSession_ContextStatusSubscribe\nDescription: Service Consumer NF can use this service operation to request information (e.g. QoS information) about a multicast session and to subscribe to notification of events about the multicast session context.\nInputs, Required: MBS Session ID, Notification Target Address, Events ID(s).\nInputs, Optional: None.\nOutputs, Required: None.\nOutputs, Optional: Event information (e.g. QoS information for multicast session, multicast MBS session state (Active, Inactive), multicast session service area for local multicast service), Start time of multicast MBS session, multicast DL tunnel info, if consumer is SMF: indication that the multicast MBS session allows any UE to join, multicast session security context.",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.247_9.1.3.4",
      "section_id": "9.1.3.4",
      "section_title": "Nmbsmf_MBSSession_ContextStatusNotify service operation",
      "content": "Service operation name: Nmbsmf_MBSSession_ContextStatusNotify\nDescription: This service operation, which is applicable to multicast MBS session, is used by the MB-SMF to notify its consumers about events of an MBS Session, or for a location dependent MBS session, related to a service area change.\nInputs, Required: MBS Session ID, Event ID.\nInputs, Optional: Event information (e.g. QoS information of MBS Session, MBS service area, Area Session ID, updated multicast session security context).\nOutputs, Required: Operation execution result indication.\nOutputs, Optional: Cause.",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.247_9.1.3.5",
      "section_id": "9.1.3.5",
      "section_title": "Nmbsmf_MBSSession_ContextStatusUnsubscribe service operation",
      "content": "Service operation name: Nmbsmf_MBSSession_ContextStatusUnsubscribe\nDescription: This service operation, which is applicable to multicast MBS session, is used by the consumer to unsubscribe to notifications about MBS context events.\nInputs, Required: MBS Session ID.\nInputs, Optional: None.\nOutputs, Required: Operation execution result indication.\nOutputs, Optional: None.",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.247_9.1.3.6",
      "section_id": "9.1.3.6",
      "section_title": "Nmbsmf_MBSSession_Create service operation",
      "content": "Service operation name: Nmbsmf_MBSSession_Create\nDescription: Create a new multicast session or broadcast session, or for a location dependent MBS session, the part of the MBS session within a service area. Optionally subscribe to notifications for this MBS session.\nInput, Required: MBS Session ID (SSM or TMGI) or TMGI allocation request, MBS Service Type (multicast or broadcast).\nInput, Optional: DNN, S-NSSAI, MBS service area, Area Session Policy ID, MBS Service Information (as defined in clause 6.14), Input Transport Address Request, MBS start time, MBS termination time, NR RedCap UE Information (as defined in clause 6.19). For a multicast session, indication that any UE may join, multicast session security context. For a broadcast session, MBS FSA ID(s). For subscription to notifications event ID(s), Notification Target Address, Request for location dependent MBS session, Associated Session ID for resource sharing across broadcast MBS Sessions during network sharing.\nOutput, Required: Result Indication.\nOutput, Optional: TMGI, NID, Expiry Time of the TMGI, Cause, MB-UPF tunnel info, MBS FSA ID(s), Area Session ID, Information of area reduction.",
      "chunk_type": "general",
      "cross_references": [
        "clause_6.14",
        "clause_6.19"
      ]
    },
    {
      "chunk_id": "ts_23.247_9.1.3.7",
      "section_id": "9.1.3.7",
      "section_title": "Nmbsmf_MBSSession_Update service operation",
      "content": "Service operation name: Nmbsmf_MBSSession_Update\nDescription: Update the established multicast session or broadcast session, or for a location dependent MBS session, the part of the MBS session within a service area, e.g. QoS update.\nInput, Required: MBS Session ID.\nInput, Optional: MBS Service Information (as defined in clause 6.14), MBS service area, for a broadcast session, MBS FSA ID(s), Area Session ID, indication that the PCF has to be contacted, NR RedCap UE Information (as defined in clause 6.19). For multicast, session state (Active/Inactive), updated multicast session security context.\nOutput, Required: Result Indication.\nOutput, Optional: MBS FSA ID(s), Information of area reduction.",
      "chunk_type": "general",
      "cross_references": [
        "clause_6.14",
        "clause_6.19"
      ]
    },
    {
      "chunk_id": "ts_23.247_9.1.3.8",
      "section_id": "9.1.3.8",
      "section_title": "Nmbsmf_MBSSession_Delete service operation",
      "content": "Service operation name: Nmbsmf_MBSSession_Delete\nDescription: Release the multicast session or broadcast session, or for a location dependent MBS session, the part of the MBS session within a service area. The MBS session is deleted and the subscription (if any) to notifications about events related to the status of the MBS session is terminated.\nInput, Required: MBS Session ID.\nInput, Optional: Area Session ID.\nOutput, Required: Result Indication.\nOutput, Optional: Cause.",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.247_9.1.3.9",
      "section_id": "9.1.3.9",
      "section_title": "Nmbsmf_MBSSession_StatusNotify service operation",
      "content": "Service operation name: Nmbsmf_MBSSession_StatusNotify\nDescription: This service operation is used by the MB-SMF to notify its consumers about the status change of the MBS session, or for a location dependent MBS session, of the part of the MBS session within a service area.\nInput, Required: MBS Session ID, Event ID.\nInput, Optional: Event information, Area Session ID.\nOutput, Required: Result Indication.",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.247_9.1.3.10",
      "section_id": "9.1.3.10",
      "section_title": "Nmbsmf_MBSSession_StatusSubscribe service operation",
      "content": "Service operation name: Nmbsmf_MBSSession_StatusSubscribe\nDescription: This service operation is used by the NF service consumer (e.g. NEF, MBSF, AF) to subscribe notification about events related to the status of the MBS session, or for a location dependent MBS session, the part of the MBS session within a service area.\nInput, Required: MBS Session ID, event ID(s), Notification Target Address.\nInput, Optional: Area Session ID.\nOutput, Required: When the subscription is accepted: Subscription Correlation ID.",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.247_9.1.3.11",
      "section_id": "9.1.3.11",
      "section_title": "Nmbsmf_MBSSession_StatusUnsubscribe service operation",
      "content": "Service operation name: Nmbsmf_MBSSession_StatusUnsubscribe\nDescription: This service operation, is used by the NF service consumer (e.g. NEF, MBSF, AF) to unsubscribe to notification about events related to the status of the MBS session, or for a location dependent MBS session, the part of the MBS session within a service area.\nInput, Required: Subscription Correlation ID.\nInput, Optional: Area Session ID.\nOutput, Required: Result Indication.",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.247_9.2.1",
      "section_id": "9.2.1",
      "section_title": "General",
      "content": "The following table illustrates the PCF Services for MBS.\nTable 9.2.1-1: NF services provided by PCF for MBS\nService Name\nService Operations\nOperation\nSemantics\nExample Consumer (s)\nNpcf_MBSPolicyControl\nCreate\nRequest/Response\nMB-SMF\nUpdate\nRequest/Response\nMB-SMF\nDelete\nRequest/Response\nMB-SMF\nNpcf_MBSPolicy Authorization\nCreate\nRequest/Response\nAF, NEF, MBSF\nUpdate\nRequest/Response\nAF, NEF, MBSF\nDelete\nRequest/Response\nAF, NEF, MBSF",
      "chunk_type": "definition",
      "cross_references": [
        "table_9.2.1-1"
      ]
    },
    {
      "chunk_id": "ts_23.247_9.2.2.1",
      "section_id": "9.2.2.1",
      "section_title": "General",
      "content": "Service description: NF Service Consumer, e.g. MB-SMF, can create and manage a MBS Policy Association in the PCF through which the NF Service Consumer receives policy information for the MBS Session.\nAs part of this service, the PCF may provide the NF Service Consumer, e.g. MB-SMF, with policy information for the MBS Session that may contain (the details are defined in clause 6.10):\n-\tPolicy information applicable for an entire MBS Session.\n-\tPCC rule information.\n-\tPolicy Control Request Trigger information.\nAt MBS Session establishment the NF Service Consumer, e.g. MB-SMF, requests the creation of a corresponding MBS Policy Association with the PCF by using Npcf_MBSPolicyControl_Create and provides relevant parameters about the MBS Session to the PCF.\n-\tWhen the PCF has created the \"MBS Policy Association\", the PCF may provide policy information as defined above.\nWhen a Policy Control Request Trigger condition is met the NF Service Consumer, e.g. MB-SMF, requests the update of the MBS Policy Association by providing information on the condition(s) that have been met using Npcf_MBSPolicyControl_Update. The PCF may provide updated policy information for the MBS session to the NF Service Consumer.\nAt MBS Session Release the NF Service Consumer, e.g. MB-SMF, requests the deletion of the corresponding MBS Policy Association.",
      "chunk_type": "definition",
      "cross_references": [
        "clause_6.10"
      ]
    },
    {
      "chunk_id": "ts_23.247_9.2.2.2",
      "section_id": "9.2.2.2",
      "section_title": "Npcf_MBSPolicyControl_Create service operation",
      "content": "Service operation name: Npcf_MBSPolicyControl_Create\nDescription: The NF Service Consumer can request the creation of a MBS Policy Association and provide relevant parameters about the MBS Session to the PCF.\nInputs, Required: MBS Session ID.\nInputs, Optional: MBS Service Information (as defined in clause 6.14), Area Session Policy ID, DNN, S-NSSAI.\nOutputs, Required: Success or Failure. In the case of Success, MBS Policy Association ID and Policy information for the MBS Session (as defined in clause 6.10).\nOutputs, Optional: In the case of Failure, the Service Information that can be accepted by the PCF. In the case of Failure, indication that another PCF shall be contacted and an ID of that other PCF.",
      "chunk_type": "general",
      "cross_references": [
        "clause_6.14",
        "clause_6.10"
      ]
    },
    {
      "chunk_id": "ts_23.247_9.2.2.4",
      "section_id": "9.2.2.4",
      "section_title": "Npcf_MBSPolicyControl_Delete service operation",
      "content": "Service operation name: Npcf_MBSPolicyControl_Delete\nDescription: The NF Service Consumer (i.e. MB-SMF) can request the deletion of the MBS Policy Association and of the associated resources.\nInputs, Required: MBS Policy Association ID.\nInputs, Optional: None.\nOutputs, Required: Success or Failure.\nOutputs, Optional: None.",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.247_9.2.2.5",
      "section_id": "9.2.2.5",
      "section_title": "Npcf_MBSPolicyControl_Update service operation",
      "content": "Service operation name: Npcf_MBSPolicyControl_Update\nDescription: The NF Service Consumer can request an update of the MBS Policy Association.\nInputs, Required: MBS Policy Association ID.\nInputs, Optional: MBS Service Information (as defined in clause 6.14), Information on the Policy Control Request Trigger condition that has been met.\nOutputs, Required: Success or Failure.\nOutputs, Optional: In the case of Failure, the Service Information that can be accepted by the PCF. In the case of Success, Policy information for the MBS Session (as defined in clause 6.10).",
      "chunk_type": "general",
      "cross_references": [
        "clause_6.14",
        "clause_6.10"
      ]
    },
    {
      "chunk_id": "ts_23.247_9.2.3.1",
      "section_id": "9.2.3.1",
      "section_title": "General",
      "content": "Service description: This service is to authorise an AF / NEF / MBSF request for an MBS service and to create policies as requested by the authorized AF for the MBS Service. This service also allows the NF consumer to subscribe/unsubscribe the notification of events.",
      "chunk_type": "definition",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.247_9.2.3.2",
      "section_id": "9.2.3.2",
      "section_title": "Npcf_MBSPolicyAuthorization_Create service operation",
      "content": "Service operation name: Npcf_MBSPolicyAuthorization_Create\nDescription: Authorize the request, and optionally determines and installs MBS Policy Control Data according to the information provided by the NF Consumer.\nInputs, Required: MBS Session ID.\nInputs, Optional: DNN if available, S-NSSAI if available, MBS Service Information (as defined in clause 6.14), Request for location dependent MBS session.\nOutputs, Required: Success (application session context) or Failure (reason for failure).\nOutputs, Optional: Area Session Policy ID (for location dependent session), in the case of Failure, the MBS Service Information that can be accepted by the PCF.",
      "chunk_type": "general",
      "cross_references": [
        "clause_6.14"
      ]
    },
    {
      "chunk_id": "ts_23.247_9.2.3.3",
      "section_id": "9.2.3.3",
      "section_title": "Npcf_MBSPolicyAuthorization_Update service operation",
      "content": "Service operation name: Npcf_MBSPolicyAuthorization_Update\nDescription: Provides updated information to the PCF.\nInputs, Required: Identification of the application session context.\nInputs, Optional: MBS Service Information (as defined in clause 6.14).\nOutputs, Required: Success or Failure (reason for failure).\nOutputs, Optional: In the case of Failure, the MBS Service Information that can be accepted by the PCF. In the case of Success, indication that the PCF has to be contacted.\nProvides updated application level information and communicates with Npcf_MBSPolicyControl service to determine and install the policy according to the information provided by the NF Consumer. Updates an application context in the PCF.",
      "chunk_type": "general",
      "cross_references": [
        "clause_6.14"
      ]
    },
    {
      "chunk_id": "ts_23.247_9.2.3.4",
      "section_id": "9.2.3.4",
      "section_title": "Npcf_MBSPolicyAuthorization_Delete service operation",
      "content": "Service operation name: Npcf_MBSPolicyAuthorization_Delete\nDescription: Provides means for the NF Consumer to delete the context of application level session information.\nInputs, Required: Identification of the application session context.\nInputs, Optional: None.\nOutputs, Required: Success or Failure.\nOutputs, Optional: None.",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.247_9.3.1",
      "section_id": "9.3.1",
      "section_title": "General",
      "content": "The Namf_MT_EnableGroupReachability service operation is defined in TS 23.502 [6].\nThe following table illustrates the new AMF Service for broadcast communication.\nTable 9.3.1-1: NF services provided by AMF\nService Name\nService Operations\nOperation\nSemantics\nExample Consumer (s)\nNamf_MBSBroadcast\nContextCreate\nRequest/Response\nMB-SMF\nContextUpdate\nRequest/Response\nMB-SMF\nContextRelease\nRequest/Response\nMB-SMF\nContextStatusNotify\nSubscribe/Notify\nMB-SMF\nNamf_MBSCommunication\nN2MessageTransfer\nRequest/Response\nMB-SMF",
      "chunk_type": "definition",
      "cross_references": [
        "table_9.3.1-1",
        "ts_23.502"
      ]
    },
    {
      "chunk_id": "ts_23.247_9.3.2.1",
      "section_id": "9.3.2.1",
      "section_title": "General",
      "content": "Service description: This service is used by the consumer for broadcast communication.",
      "chunk_type": "definition",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.247_9.3.2.2",
      "section_id": "9.3.2.2",
      "section_title": "Namf_MBSBroadcast_ContextCreate service operation",
      "content": "Service operation name: Namf_MBSBroadcast_ContextCreate\nDescription: This service operation is used to create the broadcast session context towards the AMF.\nInputs, Required: MBS Session ID, Broadcast service area, N2 container (e.g. MBS Session ID, MBS QoS profile, Broadcast service area), Notification Endpoint.\nInputs, Optional: Area Session ID, Optional parameters in the N2 container (MBS IP Multicast Tunnel Info, Area Session ID, MBS FSA ID(s), Associated Session ID for resource sharing across broadcast MBS Sessions during network sharing).\nOutputs, Required: Result Indication.\nOutputs, Optional: N2 container (MBS Session ID, Area Session ID, NG-RAN MBS Tunnel Info).",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.247_9.3.2.3",
      "section_id": "9.3.2.3",
      "section_title": "Namf_MBSBroadcast_ContextUpdate service operation",
      "content": "Service operation name: Namf_MBSBroadcast_ContextUpdate\nDescription: This service operation is used to update the broadcast session context towards the AMF.\nInputs, Required: MBS Session ID.\nInputs, Optional: Broadcast service area, N2 container (MBS Session ID, Possible MBS QoS profile, Possible Broadcast service area, Possible Area Session ID, Possible MBS IP Multicast Tunnel Info, MBS FSA ID(s)), Notification Endpoint.\nOutputs, Required: Result Indication.\nOutputs, Optional: N2 container (MBS Session ID, Area Session ID, NG-RAN MBS Tunnel Info).",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.247_9.3.2.4",
      "section_id": "9.3.2.4",
      "section_title": "Namf_MBSBroadcast_ContextRelease service operation",
      "content": "Service operation name: Namf_MBSBroadcast_ContextRelease\nDescription: This service operation is used to release the broadcast session context towards the AMF.\nInputs, Required: MBS Session ID, N2 container (MBS Session ID).\nInputs, Optional: None.\nOutputs, Required: Result Indication.\nOutputs, Optional: None.",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.247_9.3.2.5",
      "section_id": "9.3.2.5",
      "section_title": "Namf_MBSBroadcast_ContextStatusNotify service operation",
      "content": "Service operation name: Namf_MBSBroadcast_ContextStatusNotify\nDescription: This service operation is used to notify its consumers about the status change of a broadcast session context.\nInputs, Required: MBS Session ID.\nInputs, Optional: Event ID (e.g. change of NG-RAN MBS Tunnel Info), N2 SM information.\nOutputs, Required: Result Indication.\nOutputs, Optional: None.",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.247_9.3.3.1",
      "section_id": "9.3.3.1",
      "section_title": "General",
      "content": "Service description: This service enables MBS multicast related N2 message transfer towards the NG-RAN via the AMF, during multicast session activation/deactivation/update/release.",
      "chunk_type": "definition",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.247_9.3.3.2",
      "section_id": "9.3.3.2",
      "section_title": "Namf_MBSCommunication_N2MessageTransfer service operation",
      "content": "Service operation name: Namf_MBSCommunication_N2MessageTransfer\nDescription: This service operation is used by the NF Consumer to request the AMF to transfer the MBS related N2 message to the NG-RAN nodes serving the multicast MBS session.\nInput, Required: MBS Session ID, N2 SM information.\nInput, Optional: MBS Area Session ID.\nOutput, Required: Result Indication.\nOutput, Optional: Cause.",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.247_9.4.1",
      "section_id": "9.4.1",
      "section_title": "General",
      "content": "The following table illustrates the NEF Services for MBS.\nTable 9.4.1-1: NF services provided by NEF\nService Name\nService Operations\nOperation\nSemantics\nExample Consumer (s)\nNnef_MBSTMGI\nAllocate\nRequest/Response\nAF\nDeallocate\nRequest/Response\nAF\nExpiryNotify\nSubscribe/Notify\nAF\nNnef_MBSSession\nCreate\nRequest/Response\nAF\nUpdate\nRequest/Response\nAF\nDelete\nRequest/Response\nAF\nStatusNotify\nSubscribe/Notify\nAF\nStatusSubscribe\nAF\nStatusUnsubscribe\nAF\nNnef_MBSGroupMsgDelivery\nCreate\nRequest/Response\nAF\nUpdate\nRequest/Response\nAF\nDelete\nRequest/Response\nAF\nStatusNotify\nSubscribe/Notify\nAF",
      "chunk_type": "definition",
      "cross_references": [
        "table_9.4.1-1"
      ]
    },
    {
      "chunk_id": "ts_23.247_9.4.2.1",
      "section_id": "9.4.2.1",
      "section_title": "General",
      "content": "Service description: NF Service Consumer can use this service to request the allocation of TMGIs and deallocate TMGIs previously allocated.",
      "chunk_type": "definition",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.247_9.4.2.2",
      "section_id": "9.4.2.2",
      "section_title": "Nnef_MBSTMGI_Allocate service operation",
      "content": "Service operation name: Nnef_MBSTMGI_Allocate\nDescription: This service is used by the NF Service Consumer to request allocation of TMGI(s), or to refresh the expiry time for already allocated TMGI(s).\nInputs, Required: Number of TMGIs (may be zero if only a refresh of expiry time is requested).\nInputs, Optional: TMGI(s) for which the expiry time is to be extended, MBS service area.\nOutputs, Required: TMGIs, Expiry Time, Result Indication.\nOutputs, Optional: NID.",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.247_9.4.2.3",
      "section_id": "9.4.2.3",
      "section_title": "Nnef_MBSTMGI_Deallocate service operation",
      "content": "Service operation name: Nnef_MBSTMGI_Deallocate\nDescription: This service is used by the NF Service Consumer to request deallocation the TMGI(s).\nInputs, Required: TMGI(s).\nInputs, Optional: None.\nOutputs, Required: Success or not.\nOutputs, Optional: None.",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.247_9.4.2.4",
      "section_id": "9.4.2.4",
      "section_title": "Nnef_MBSTMGI_ExpiryNotify service operation",
      "content": "Service operation name: Nnef_MBSTMGI_ExpiryNotify\nDescription: This service is used by the NEF to notify the NF service consumer of the timer expiry for TMGI(s).\nInputs, Required: TMGI(s).\nInputs, Optional: None.\nOutputs, Required: None.\nOutputs, Optional: None.",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.247_9.4.3.1",
      "section_id": "9.4.3.1",
      "section_title": "General",
      "content": "Service description: This service operates on the multicast and broadcast MBS sessions. The following are the key functionalities of this NF service:\n-\tCreate/Update Delete for both multicast and broadcast MBS session, or for a location dependent MBS session, the part of the MBS session within a service area;\n-\tProvide a Notification about subscribed events. The following events are supported:\n-\tMBS session release due to TMGI expiry.\n-\tBroadcast delivery status.",
      "chunk_type": "definition",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.247_9.4.3.2",
      "section_id": "9.4.3.2",
      "section_title": "Nnef_MBSSession_Create service operation",
      "content": "Service operation name: Nnef_MBSSession_Create\nDescription: Create a new multicast session or broadcast session, or for a location dependent MBS session, the part of the MBS session within a service area. Optionally implicitly subscribe to notifications for this MBS session.\nInput, Required: MBS Session ID (SSM or TMGI) or TMGI allocation request, MBS Service Type (broadcast or multicast).\nInput, Optional: MBS service area (mandatory for broadcast. Can be Cell ID list and/or TAI list, or geographical area information, or civic address information), MBS start time, MBS stop time, MBS Service Information (as defined in clause 6.14), Input Transport Address Request, session state (Active/Inactive), for subscription to notifications notification target address, NR RedCap UE Information (as defined in clause 6.19). For a multicast session, indication that any UE may join the multicast session. Request for location dependent MBS session. For a broadcast session, MBS FSA ID(s), Associated Session ID for resource sharing across broadcast MBS Sessions during network sharing.\nOutput, Required: Result Indication.\nOutput, Optional: TMGI, NID, Cause, MB-UPF tunnel info, MBS FSA ID(s), Area Session ID, Information of area reduction.",
      "chunk_type": "general",
      "cross_references": [
        "clause_6.14",
        "clause_6.19"
      ]
    },
    {
      "chunk_id": "ts_23.247_9.4.3.3",
      "section_id": "9.4.3.3",
      "section_title": "Nnef_MBSSession_Update service operation",
      "content": "Service operation name: Nnef_MBSSession_Update\nDescription: This service is used by the NF service consumer to update the established multicast session or broadcast session, or for a location dependent MBS session, the part of the MBS session within a service area, e.g. QoS update. For multicast MBS Session, this service is also used to activate or deactivate the MBS Session.\nInput, Required: MBS Session ID.\nInput, Optional: MBS Service Information (as defined in clause 6.14), MBS service area, session state (Active/Inactive), Area Session ID. For a broadcast session, MBS FSA ID(s), NR RedCap UE Information (as defined in clause 6.19).\nOutput, Required: Result Indication.\nOutput, Optional: MBS FSA ID(s), Information of area reduction.",
      "chunk_type": "general",
      "cross_references": [
        "clause_6.14",
        "clause_6.19"
      ]
    },
    {
      "chunk_id": "ts_23.247_9.4.3.4",
      "section_id": "9.4.3.4",
      "section_title": "Nnef_MBSSession_Delete service operation",
      "content": "Service operation name: Nnef_MBSSession_Delete\nDescription: This service is used to delete the multicast or broadcast MBS session, or for a location dependent MBS session, the part of the MBS session within a service area.\nInput, Required: MBS Session ID.\nInput, Optional: Area Session ID.\nOutput, Required: Result Indication.\nOutput, Optional: Cause.",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.247_9.4.3.5",
      "section_id": "9.4.3.5",
      "section_title": "Nnef_MBSSession_StatusNotify service operation",
      "content": "Service operation name: Nnef_MBSSession_StatusNotify\nDescription: This service is used by the MB-SMF to notify the NF service consumers of the subscribed events related to an MBS session, or for a location dependent MBS session, related to the part of the MBS session within a service area.\nInputs, Required: Status Information, MBS Session ID.\nInputs, Optional: Area Session ID.\nOutputs, Required: None.\nOutputs, Optional: None.",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.247_9.4.3.6",
      "section_id": "9.4.3.6",
      "section_title": "Nnef_MBSSession_StatusSubscribe service operation",
      "content": "Service operation name: Nnef_MBSSession_StatusSubscribe\nDescription: This service is used by the NF service consumers to subscribe to the MBS Session status information of an MBS session, or for a location dependent MBS session, of the part of the MBS session within a service area.\nInputs, Required: Status Information, MBS Session ID.\nInputs, Optional: Area Session ID.\nOutputs, Required: None.\nOutputs, Optional: None.",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.247_9.4.3.7",
      "section_id": "9.4.3.7",
      "section_title": "Nnef_MBSSession_StatusUnsubscribe service operation",
      "content": "Service operation name: Nnef_MBSSession_StatusUnsubscribe\nDescription: This service is used by the NF service consumers to unsubscribe to the MBS Session status information of an MBS session or for a location dependent MBS session, of the part of the MBS session within a service area.\nInputs, Required: Status Information, MBS Session ID.\nInputs, Optional: Area Session ID.\nOutputs, Required: None.\nOutputs, Optional: None.",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.247_9.4.4.1",
      "section_id": "9.4.4.1",
      "section_title": "General",
      "content": "Service description: NF Service Consumer can use this service to request group message delivery or to modify or to cancel previously submitted group message delivery.",
      "chunk_type": "definition",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.247_9.4.4.2",
      "section_id": "9.4.4.2",
      "section_title": "Nnef_MBSGroupMsgDelivery_Create service operation",
      "content": "Service operation name: Nnef_MBSGroupMsgDelivery_Create\nDescription: This service is used by the NF Service Consumer to request group message delivery.\nInputs, Required: Group Message Payload, MBS service area, Group Message Delivery Start Time, Stop Time, External Group Identifier, Notification Endpoint.\nInputs, Optional: Target UE Classes (as defined in TS 26.502 [18]).\nOutputs, Required: Group Message Correlation ID, Delivery Status, service announcement information.\nOutputs, Optional: Cause, service area without MBS capability.",
      "chunk_type": "general",
      "cross_references": [
        "ts_26.502"
      ]
    },
    {
      "chunk_id": "ts_23.247_9.4.4.3",
      "section_id": "9.4.4.3",
      "section_title": "Nnef_MBSGroupMsgDelivery_Update service operation",
      "content": "Service operation name: Nnef_MBSGroupMsgDelivery_Update\nDescription: This service is used by the NF Service Consumer to replace group message delivery.\nInputs, Required: Group Message Correlation ID.\nInputs, Optional: Group Message Payload, MBS service area, Group Message Delivery Start Time, Stop Time, Notification Endpoint, Target UE Classes (as defined in TS 26.502 [18]).\nOutputs, Required: Acceptance Status\nOutputs, Optional: Cause, service area without MBS capability.\n9.4.4.3a\tNnef_MBSGroupMsgDelivery_Delete service operation\nService operation name: Nnef_MBSGroupMsgDelivery_Delete\nDescription: This service is used by the NF Service Consumer to recall (or cancel) group message delivery.\nInputs, Required: Group Message Correlation ID.\nInputs, Optional: None.\nOutputs, Required: Acceptance Status.\nOutputs, Optional: Cause.",
      "chunk_type": "general",
      "cross_references": [
        "ts_26.502"
      ]
    },
    {
      "chunk_id": "ts_23.247_9.4.4.4",
      "section_id": "9.4.4.4",
      "section_title": "Nnef_MBSGroupMsgDelivery_StatusNotify service operation",
      "content": "Service operation name: Nnef_MBSGroupMsgDelivery_StatusNotify\nDescription: This service is used by the NEF to notify the NF service consumers of the status of a group message delivery.\nNOTE:\tThis notification corresponds to an implicit subscription.\nInputs, Required: Status Information, Notification Endpoint.\nInputs, Optional: None.\nOutputs, Required: None.\nOutputs, Optional: None.",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.247_9.5",
      "section_id": "9.5",
      "section_title": "MBSF Services",
      "content": "MBSF services are defined in TS 26.502 [18].\nAnnex A (normative):Configuration options at Service and/or Application for MBS\nFigure A-1 provides the reference architecture with all configuration variants for Application Function interaction with 5G Core Network, usage of NEF or MBSF in the control plane, and usage of N6, MB2-U or xMB-U in user plane.\nFigure A-1: Configuration options at Service and/or Application\nThe following characteristics describe each of the Configuration options:\n-\tConfiguration Option 1: No MBSF:\n-\tThis configuration is used for Transport Only Mode (i.e. MBS provides only transport of MBS data in a transparent manner without modifying the data), when the Multicast service or Broadcast service does not require service layer interworking with LTE MBMS.\n-\tThe control plane entry point for the Application Function outside the trusted domain towards 5GC to request establishment of an MBS session is the NEF via N33.\n-\tAn application function within the trusted domain can directly use the N30, N5 and N29mb service based interfaces. In this case some NEF functionality related to PCF and MB-SMF interaction is incorporated in AF.\nNOTE 1:\tApplication function within the trusted domain selects MB-SMF based on e.g. its local configuration, or query NRF based on location, etc.\n-\tThe user plane entry point for the Application Function towards 5GC is the MB-UPF via N6mb.\n-\tConfiguration Option 2: MBSF, N33 towards AF:\n-\tThis configuration may be used for Service Mode (i.e. MBS provides service layer capability, allows to modify the data), or when service layer interworking with LTE MBMS is required, or when the functionalities of MBS security is used (see clause 6.13).\n-\tWhen interworking with LTE MBMS for Transport Only Mode services, N33/Nmb5 and Nmb8 provide the same functionalities as N33/N13mb and N6mb respectively.\n-\tThe control plane entry point from the Application Function to request establishment of an MBS session is the NEF via N33.\n-\tThe user plane entry point for the Application Function towards 5GC is the MBSTF via MB2-U, xMB-U or Nmb8.\n-\tThe NEF and MBSF may be collocated.\n-\tIf the MBSF is not collocated with the NEF, the reference point between the NEF and MBSF is Nmb5.\n-\tAn application function within the trusted domain may be collocated with MBSF.\n-\tConfiguration Option 3: MBSF, MB2-C/xMB-C/Nmb10 towards AF:\n-\tThis configuration may be used for Service Mode (xMB-C or Nmb10), or when interworking with LTE MBMS is required (MB2-C, xMB-C or Nmb10), or when the functionalities of MBS security is used (see clause 6.13).\n-\tWhen interworking with LTE MBMS for Transport Only Mode services, Nmb10 and Nmb8 provide the same functionalities as Nmb13 and N6mb respectively.\n-\tThe control plane entry point from the Application Function to request establishment of an MBS session is the MBSF via MB2-C, xMB-C or Nmb10.\n-\tThe user plane entry point for the Application Function is the MBSTF via MB2-U, xMB-U or Nmb8.\nFor service mode, MBSF shall be used, i.e. either Configuration 2 or Configuration 3 shall be used. In this case, the MBSF instructs the MBSTF to modify the MBS data (e.g. including the FEC or MBS data transcoding).\nFor Configuration Option 2 and Option 3, when interworking with LTE MBMS is used, LTE MBMS and MBS use the same mode (i.e. both use Transport Only Mode or Service Mode).\nFor Transport Only mode:\n-\tIf interworking with LTE MBMS at 5GC is required for the service, MBSF and MBSTF shall be used, i.e. either Configuration 2 or Configuration 3 shall be used.\n-\tIf interworking with LTE MBMS is not required for the service, MBSF and MBSTF are optional.\nNOTE 2:\tInterworking providing by AF is out of scope of this specification.\nMBSTF shall be used when MBSF is used.\nAny particular deployment may support any combination of these configurations.\nAnnex B (informative):Service levels for multicast communication service\nThe following service levels for the multicast communication service are defined:\nNOTE 1:\tTransport Only mode and Full-Service mode of operation as defined in TS 23.246 [8] differ from the service levels defined here.\n-\tBasic service level. The following requirements are defined:\n-\tMedia transported transparently through the 5GS.\n-\tInteractions between UE and network for receiving the multicast communication service.\n-\tPacket distribution from the 5GS ingress to NG-RAN node(s).\n-\tData delivery from NG-RAN node(s) to the UE.\n-\tEnhanced service level, with additional requirements on top of basic service level. Different requirements out of the set below may be necessary to address each use case:\n-\tLocal MBS service.\n-\tUser authentication and authorization for Multicast MBS session.\nNOTE 2:\tUser authentication and authorization is an optional feature in 5GS.\n-\tExplicit configuration of Multicast MBS session by AF, including group member information.\n-\tEnhanced QoS support. E.g. to differentiate MBS data flow with different QoS over 5GS.\nAnnex C (normative):Interworking at reference points MB2 and xMB\nTo allow the MBS System to interwork with a GCS AS supporting the MB2 interfaces defined in TS 23.468 [10]:\n-\tIn addition to supporting the Nmbsf service-based API at Nmb10 (as defined in clause 5.1) the MBSF shall support interfaces MB2 C.\n-\tIn addition to supporting content ingest interfaces defined in TS 26.502 [18] at Nmb8 (as defined in clause 5.1) the MBSTF shall support interfaces MB2 U.\nTo allow the MBS System to interwork with a Content Provider supporting the xMB interfaces defined in TS 26.348 [11]:\n-\tIn addition to supporting the Nmbsf service-based API at Nmb10 (as defined in clause 5.1) the MBSF shall support interface xMB C.\n-\tIn addition to supporting content ingest interfaces defined in TS 26.502 [18] at Nmb8 (as defined in clause 5.1) the MBSTF shall support interface xMB U.\nFigure C-1: Interworking with GCS AS supporting MB2 interfaces and with Content Provider supporting xMB interfaces\nAnnex D (informative):Change history\nChange history\nDate\nMeeting\nTDoc\nCR\nRev\nCat\nSubject/Comment\nNew version\n2021-03\nSA2#143E\nS2-2101423\n-\n-\n-\nTS skeleton approved at S2#143E\n0.0.0\n2021-06\nSA#92E\nSP-210368\n-\n-\n-\nMCC editorial update for presentation to TSG SA#92E for information\n1.0.0\n2021-09\nSA#93E\nSP-210941\n-\n-\n-\nMCC editorial update for presentation to TSG SA#93E for approval\n2.0.0\n2021-09\nSA#93E\n-\n-\n-\n-\nMCC editorial update for publication after TSG SA#93E approval\n17.0.0\n2021-12\nSA#94E\nSP-211285\n0001\n-\nF\nClarification on interworking with EPS\n17.1.0\n2021-12\nSA#94E\nSP-211285\n0002\n3\nF\nMBS Session Management vs Configuration\n17.1.0\n2021-12\nSA#94E\nSP-211285\n0006\n1\nF\nMulticast MBS Session: resolving ENs and cleanup\n17.1.0\n2021-12\nSA#94E\nSP-211285\n0008\n2\nF\nInterworking with MBMS over E-UTRAN for broadcast service\n17.1.0\n2021-12\nSA#94E\nSP-211285\n0010\n2\nF\nLocal MBS service and Location dependent MBS service\n17.1.0\n2021-12\nSA#94E\nSP-211285\n0012\n1\nF\nMulticast session join and session establishment\n17.1.0\n2021-12\nSA#94E\nSP-211285\n0014\n3\nF\nMulticast session leave and session release\n17.1.0\n2021-12\nSA#94E\nSP-211285\n0015\n3\nF\nClarifications on functional entities\n17.1.0\n2021-12\nSA#94E\nSP-211285\n0019\n2\nF\nNRF service operation for broadcast service\n17.1.0\n2021-12\nSA#94E\nSP-211285\n0021\n4\nF\nClarification of the local MBS service\n17.1.0\n2021-12\nSA#94E\nSP-211285\n0022\n4\nF\nLeftover issue for MBS session activation and deactivation\n17.1.0\n2021-12\nSA#94E\nSP-211285\n0023\n1\nF\nLossless handover for MBS session\n17.1.0\n2021-12\nSA#94E\nSP-211285\n0025\n1\nF\nWhen UE joining UE authorization for the multicast MBS session\n17.1.0\n2021-12\nSA#94E\nSP-211285\n0026\n3\nF\nMiscellaneous corrections\n17.1.0\n2021-12\nSA#94E\nSP-211285\n0027\n1\nF\nClarification on User Plane Management\n17.1.0\n2021-12\nSA#94E\nSP-211285\n0029\n4\nF\nUpdates on cases that SMF rejects UE join request\n17.1.0\n2021-12\nSA#94E\nSP-211285\n0031\n1\nD\nEditorial modification on terms, abbreviations\n17.1.0\n2021-12\nSA#94E\nSP-211285\n0032\n1\nF\nModification on session join and shared tunnel establishment related procedures\n17.1.0\n2021-12\nSA#94E\nSP-211285\n0033\n1\nF\nModification on session leave and shared tunnel release related procedures\n17.1.0\n2021-12\nSA#94E\nSP-211285\n0035\n2\nF\nModification on handover procedures\n17.1.0\n2021-12\nSA#94E\nSP-211285\n0038\n3\nF\nReplacement reference architecture figures\n17.1.0\n2021-12\nSA#94E\nSP-211286\n0041\n1\nF\nUpdate to the Multicast session join and session establishment, and removing procedure.\n17.1.0\n2021-12\nSA#94E\nSP-211286\n0043\n1\nF\nClarification on the MBS service activation/deactivation/update and related service operation\n17.1.0\n2021-12\nSA#94E\nSP-211286\n0044\n1\nF\nmodification on the MBS Broadcast session management\n17.1.0\n2021-12\nSA#94E\nSP-211286\n0045\n1\nF\nClarification on the Qos handling and Policy control in the clause 6\n17.1.0\n2021-12\nSA#94E\nSP-211286\n0050\n2\nF\nPCC related MBS corrections\n17.1.0\n2021-12\nSA#94E\nSP-211286\n0051\n1\nF\nCorrections to MBS Broadcast Session Establishment\n17.1.0\n2021-12\nSA#94E\nSP-211286\n0054\n-\nF\nClarification on local multicast\n17.1.0\n2021-12\nSA#94E\nSP-211286\n0055\n1\nF\nMinimize multicast service interruption caused by unintended PDU session release\n17.1.0\n2021-12\nSA#94E\nSP-211286\n0057\n1\nF\nMulticast MBS service for SNPN\n17.1.0\n2021-12\nSA#94E\nSP-211286\n0060\n1\nF\nUpdates to NF services for MBS\n17.1.0\n2021-12\nSA#94E\nSP-211286\n0062\n1\nF\nModification on activation procedure\n17.1.0\n2021-12\nSA#94E\nSP-211286\n0064\n1\nF\nClarification on NF services\n17.1.0\n2021-12\nSA#94E\nSP-211286\n0066\n1\nF\nClarification on Annex A for transport mode\n17.1.0\n2021-12\nSA#94E\nSP-211286\n0067\n1\nF\nFixing the EN and Nmbsmf_MBSSession service operation parameters.\n17.1.0\n2021-12\nSA#94E\nSP-211286\n0068\n1\nF\nclarification on PDR and FAR in A-UPF for MBS data traffic in individual delivery\n17.1.0\n2021-12\nSA#94E\nSP-211286\n0073\n1\nF\nClarification on the input of PCF/NEF/MB-SMF service operation\n17.1.0\n2021-12\nSA#94E\nSP-211286\n0074\n1\nF\nBroadcast Frequency selection Identifier\n17.1.0\n2022-03\nSA#95E\nSP-220052\n0075\n1\nF\nClarification on MBS Session Update procedures\n17.2.0\n2022-03\nSA#95E\nSP-220052\n0077\n1\nD\nAdding a heading of clause 5\n17.2.0\n2022-03\nSA#95E\nSP-220052\n0078\n1\nF\nCorrections for Location dependent MBS session\n17.2.0\n2022-03\nSA#95E\nSP-220052\n0079\n-\nF\nRemoving UE from Multicast MBS Session\n17.2.0\n2022-03\nSA#95E\nSP-220052\n0081\n1\nF\nResolving ENs, cleanup and corrections\n17.2.0\n2022-03\nSA#95E\nSP-220052\n0083\n1\nF\nCorrections to MBS procedures for broadcast Session\n17.2.0\n2022-03\nSA#95E\nSP-220052\n0085\n1\nF\nPaging strategy handling for multicast MBS session\n17.2.0\n2022-03\nSA#95E\nSP-220052\n0086\n1\nF\nRestoration of multicast MBS session following AN release\n17.2.0\n2022-03\nSA#95E\nSP-220052\n0089\n1\nF\nMiscellaneous corrections on TS 23.247\n17.2.0\n2022-03\nSA#95E\nSP-220052\n0092\n1\nF\nMBS Frequency Selection Area Identifier\n17.2.0\n2022-03\nSA#95E\nSP-220052\n0093\n1\nF\nIndication whether MBS session is active\n17.2.0\n2022-03\nSA#95E\nSP-220052\n0095\n1\nF\nResolving the PCC related EN and issue\n17.2.0\n2022-03\nSA#95E\nSP-220052\n0096\n1\nF\nClarification on the MBS session Create and update procedure.\n17.2.0\n2022-06\nSA#96\nSP-220395\n0090\n5\nF\nClarification of MBS data forwarding\n17.3.0\n2022-06\nSA#96\nSP-220395\n0101\n1\nF\nCorrection on the mobility procedures for MBS\n17.3.0\n2022-06\nSA#96\nSP-220395\n0102\n-\nF\nBroadcast MBS Session Release Require Procedure\n17.3.0\n2022-06\nSA#96\nSP-220395\n0103\n1\nF\nMBS Service Area for MB-SMF selection in TMGI Allocation\n17.3.0\n2022-06\nSA#96\nSP-220395\n0104\n1\nF\nAlignment with RAN3 and other corrections\n17.3.0\n2022-06\nSA#96\nSP-220395\n0105\n1\nF\nCorrection to MBS Session Context and MBS Session Activation procedure\n17.3.0\n2022-06\nSA#96\nSP-220395\n0106\n1\nF\nResolve the residual ENs and Clean-up in TS 23.247\n17.3.0\n2022-06\nSA#96\nSP-220395\n0107\n1\nF\nMega CR to clean up\n17.3.0\n2022-06\nSA#96\nSP-220395\n0110\n-\nF\nClarification on MBS security function\n17.3.0\n2022-06\nSA#96\nSP-220395\n0111\n1\nF\nUsage of NAS message for UE joining procedure\n17.3.0\n2022-06\nSA#96\nSP-220395\n0112\n-\nF\nClarification on MBS session activation procedure\n17.3.0\n2022-06\nSA#96\nSP-220395\n0113\n-\nF\nClarification on Activation procedure\n17.3.0\n2022-06\nSA#96\nSP-220395\n0115\n1\nF\nClarification on local dependent MBS session\n17.3.0\n2022-06\nSA#96\nSP-220395\n0116\n1\nF\nMiscellaneous corrections\n17.3.0\n2022-06\nSA#96\nSP-220395\n0117\n-\nF\nClarifications on traffic usage reporting and charging\n17.3.0\n2022-06\nSA#96\nSP-220395\n0119\n1\nF\nTunnel between MBSTF and MB-UPF\n17.3.0\n2022-09\nSA#97E\nSP-220775\n0109\n4\nF\nUpdate of PCC procedure for 5MBS\n17.4.0\n2022-09\nSA#97E\nSP-220775\n0122\n-\nF\nMBS Session Status and broadcast MBS Session\n17.4.0\n2022-09\nSA#97E\nSP-220775\n0124\n-\nF\nClarification on local multicast\n17.4.0\n2022-09\nSA#97E\nSP-220775\n0126\n1\nF\nCorrection to MB-SMF update in NRF\n17.4.0\n2022-09\nSA#97E\nSP-220775\n0127\n1\nF\nCorrection and editorial improvement\n17.4.0\n2022-09\nSA#97E\nSP-220775\n0130\n1\nF\nClarification on the mobility in RRC inactive\n17.4.0\n2022-09\nSA#97E\nSP-220775\n0132\n1\nF\nRemoving the EN on the HO\n17.4.0\n2022-12\nSA#98E\nSP-221068\n0129\n2\nF\nClarification on the traffic handling in MBSTF for interworking\n17.5.0\n2022-12\nSA#98E\nSP-221068\n0134\n1\nF\nHandling of tunnel between UPF and MB_UPF for Multicast MBS session Deactivation and Reactivation\n17.5.0\n2022-12\nSA#98E\nSP-221068\n0135\n-\nF\nMissing NID in output parameters to AF for SNPN\n17.5.0\n2022-12\nSA#98E\nSP-221068\n0137\n1\nF\nClean-up of PCC procedures for 5MBS\n17.5.0\n2022-12\nSA#98E\nSP-221068\n0139\n5\nF\nCR on MTK or MSK processing\n17.5.0\n2022-12\nSA#98E\nSP-221068\n0141\n1\nF\nClarification on the shared delivery tunnel management for common gNB UP case\n17.5.0\n2022-12\nSA#98E\nSP-221095\n0143\n1\nB\nGroup Message Delivery\n18.0.0\n2023-03\nSA#99\nSP-230051\n0146\n3\nB\nUpdate the scope of TS 23.247\n18.1.0\n2023-03\nSA#99\nSP-230051\n0149\n8\nB\nSupport of MBS multicast reception by UEs in RRC_INACTIVE state\n18.1.0\n2023-03\nSA#99\nSP-230051\n0150\n1\nB\nCoexistence with existing power saving mechanisms for capability-limited devices\n18.1.0\n2023-03\nSA#99\nSP-230037\n0152\n2\nA\nAMF knowing MBS support status of NG-RAN node (s) for Multicast Activation\n18.1.0\n2023-03\nSA#99\nSP-230037\n0154\n2\nA\nCorrection to description of Fig. 7.1.1.3-1\n18.1.0\n2023-03\nSA#99\nSP-230037\n0156\n1\nA\nCorrection to location dependent service for broadcast\n18.1.0\n2023-03\nSA#99\nSP-230037\n0158\n1\nA\nCorrection to Broadcast MBS Session handling\n18.1.0\n2023-03\nSA#99\nSP-230051\n0159\n7\nB\nSupport RRC_INACTIVE UE receiving multicast MBS data\n18.1.0\n2023-03\nSA#99\nSP-230051\n0160\n6\nB\nIntroducing functionality of resource efficiency in MOCN Network Sharing\n18.1.0\n2023-03\nSA#99\nSP-230051\n0161\n-\nC\nResolve ENs on Group Message Delivery and corrections\n18.1.0\n2023-03\nSA#99\nSP-230051\n0162\n1\nB\nSupport MBS for UEs using power saving functions\n18.1.0\n2023-03\nSA#99\nSP-230051\n0163\n1\nB\nOn the Update of Group Message Delivery\n18.1.0\n2023-03\nSA#99\nSP-230051\n0164\n6\nB\nOn Clarifying the Scenario Considering the Power Saving Mechanism\n18.1.0\n2023-03\nSA#99\nSP-230051\n0165\n3\nB\nOn resource efficiency for MBS reception in RAN sharing scenario\n18.1.0\n2023-03\nSA#99\nSP-230037\n0166\n1\nF\nAlign the MB-SMF discovery enhancement in clause 7.1.2\n18.1.0\n2023-03\nSA#99\nSP-230051\n0168\n6\nB\nSupport of RRC Inactive state reception for MBS session\n18.1.0\n2023-03\nSA#99\nSP-230037\n0170\n3\nA\nClarification shared NG-U Termination among gNBs for Broadcast MBS session\n18.1.0\n2023-03\nSA#99\nSP-230051\n0171\n5\nB\nKI#1, adding RRC inactive network functionality of NF description\n18.1.0\n2023-03\nSA#99\nSP-230051\n0176\n9\nB\nKI#2, adding MOCN network sharing for the same content\n18.1.0\n2023-03\nSA#99\nSP-230051\n0179\n8\nB\nMobility procedures for UEs receiving multicast MBS session data in RRC Inactive state\n18.1.0\n2023-03\nSA#99\nSP-230037\n0187\n2\nA\nUpdate on the security in accordance with SA3 LS\n18.1.0\n2023-06\nSA#100\nSP-230453\n0205\n1\nA\nAlignment with RAN on Xn/N2 based handover for inactive MBS session\n18.2.0\n2023-06\nSA#100\nSP-230454\n0207\n1\nF\nKI#1 Correction of mobility procedures for delivery of multicast MBS session data to RRC_INACTIVE UE\n18.2.0\n2023-06\nSA#100\nSP-230454\n0210\n1\nC\nKI#2 Resolve EN in broadcast procedures for resource sharing in network sharing\n18.2.0\n2023-06\nSA#100\nSP-230454\n0213\n1\nF\nUpdate functional entity clauses for group message delivery and power saving functions\n18.2.0\n2023-06\nSA#100\nSP-230454\n0214\n1\nF\nUpdate the abbreviation for Release 18\n18.2.0\n2023-06\nSA#100\nSP-230454\n0220\n1\nB\nUpdate group message delivery procedure\n18.2.0\n2023-06\nSA#100\nSP-230453\n0224\n1\nA\nConnection resume with local multicast session\n18.2.0\n2023-06\nSA#100\nSP-230453\n0225\n1\nA\nConnection resume with location dependent multicast session\n18.2.0\n2023-06\nSA#100\nSP-230454\n0226\n1\nB\nMobility Registration Update and Service Request procedures for local multicast service\n18.2.0\n2023-06\nSA#100\nSP-230454\n0227\n1\nB\nMobility Registration Update and Service Request procedures for location dependent multicast service\n18.2.0\n2023-06\nSA#100\nSP-230453\n0230\n1\nA\nClarification on the RRC resume failure for inactive MBS session\n18.2.0\n2023-06\nSA#100\nSP-230454\n0231\n1\nB\nResolving the EN on the MOCN enhancement for the location dependent MBS session\n18.2.0\n2023-06\nSA#100\nSP-230454\n0232\n1\nF\nResolving the EN on TMGI index and TMGI update for the configuration mechanism in the MOCN enhancement\n18.2.0\n2023-06\nSA#100\nSP-230454\n0237\n1\nD\nClarification of applications for Group Message Delivery\n18.2.0\n2023-06\nSA#100\nSP-230453\n0239\n1\nA\nHandover Procedure correction\n18.2.0\n2023-06\nSA#100\nSP-230454\n0240\n1\nF\nOpen issue related to mobility procedures of RRC Inactivate state UE\n18.2.0\n2023-06\nSA#100\nSP-230453\n0246\n1\nA\nCorrections for unicast tunnel establishment for MBS broadcast\n18.2.0\n2023-06\nSA#100\nSP-230454\n0252\n2\nF\nEnabling simultaneous join for high number of UEs that support multicast RRC inactive reception\n18.2.0\n2023-06\nSA#100\nSP-230454\n0253\n1\nF\nMobility procedures for RRC inactive UEs\n18.2.0\n2023-06\nSA#100\nSP-230454\n0258\n1\nB\nUpdate of MBS service announcement for capability-limited devices\n18.2.0\n2023-06\nSA#100\nSP-230454\n0259\n1\nB\nMBS session activation for UEs using power saving functions\n18.2.0\n2023-06\nSA#100\nSP-230454\n0260\n1\nF\nResolving open issues for Multicast MBS procedures for UEs using power saving functions\n18.2.0\n2023-06\nSA#100\nSP-230454\n0269\n2\nF\nClarification on the NEF role and interface for the group message data delivery\n18.2.0\n2023-09\nSA#101\nSP-230834\n0262\n5\nA\nCorrections related to indicating failure of establishing MBS broadcast transmission resources\n18.3.0\n2023-09\nSA#101\nSP-230843\n0279\n1\nF\nCorrections for support of MBS data reception for UEs using power saving functions\n18.3.0\n2023-09\nSA#101\nSP-230843\n0280\n3\nF\nGroup Paging for Multicast MBS session data reception in RRC_INACTIVE state\n18.3.0\n2023-09\nSA#101\nSP-230834\n0284\n1\nA\nMulticast over N6mb not applicable for location dependent MBS session\n18.3.0\n2023-09\nSA#101\nSP-230843\n0285\n1\nF\nAlignment with stage 3 on Parameter Provisioning of MBS Assistance Information\n18.3.0\n2023-09\nSA#101\nSP-230843\n0286\n2\nF\nConverting the requirement of AF handling service announcement to a NOTE\n18.3.0\n2023-09\nSA#101\nSP-230834\n0288\n2\nA\nOn the step number correction of 5MBS\n18.3.0\n2023-09\nSA#101\nSP-230834\n0292\n-\nA\nCorrecting the figure and term\n18.3.0\n2023-09\nSA#101\nSP-230843\n0297\n1\nF\nResolving the EN on the RRC inactive assistant information\n18.3.0\n2023-09\nSA#101\nSP-230843\n0300\n2\nF\nRRC INACTIVE UE Mobility within the same RNA\n18.3.0\n2023-09\nSA#101\nSP-230843\n0301\n1\nF\nClarification on the Resource sharing across broadcast MBS Sessions in MOCN\n18.3.0\n2023-09\nSA#101\nSP-230843\n0303\n1\nF\nEditorial corrections\n18.3.0\n2023-12\nSA#102\nSP-231240\n0201\n4\nA\nCorrection to PCC procedures for location dependent MBS service\n18.4.0\n2023-12\nSA#102\nSP-231240\n0276\n4\nA\nHandling of unsupported MBS service area\n18.4.0\n2023-12\nSA#102\nSP-231251\n0278\n3\nF\nAlignment with RAN on transfer of assistance information during handover.\n18.4.0\n2023-12\nSA#102\nSP-231248\n0307\n-\nF\nUpdate UE pre-configuration\n18.4.0\n2023-12\nSA#102\nSP-231251\n0316\n1\nF\nCorrection on the references\n18.4.0\n2023-12\nSA#102\nSP-231251\n0317\n1\nF\nCorrection to the GroupMessage service operation\n18.4.0\n2023-12\nSA#102\nSP-231240\n0319\n1\nA\nMBS Session deactivation and Mission Critical services\n18.4.0\n2023-12\nSA#102\nSP-231240\n0321\n2\nA\nCorrection to notification target address for context status notify of broadcast MBS\n18.4.0\n2023-12\nSA#102\nSP-231251\n0322\n3\nF\nPending MBS Session Release request at 5GS to EPS mobility\n18.4.0\n2023-12\nSA#102\nSP-231251\n0323\n3\nF\nResource sharing across broadcast MBS Sessions during network sharing\n18.4.0\n2023-12\nSA#102\nSP-231251\n0324\n-\nF\nContext Status Notification during transport change for resource sharing\n18.4.0\n2023-12\nSA#102\nSP-231251\n0326\n2\nF\nCorrection on shared N3mb tunnels towards NG-RAN in network sharing scenarios\n18.4.0\n2023-12\nSA#102\nSP-231240\n0330\n1\nA\nFlow description within MBS Service Information if MBS data are transported in IP tunnel toward MB-UPF\n18.4.0\n2023-12\nSA#102\nSP-231240\n0332\n1\nA\nLocation Dependent MBS broadcast session with multiple MB-SMFs\n18.4.0\n2023-12\nSA#102\nSP-231251\n0336\n-\nF\nMobility of UE in RRC_INACTIVE state receiving MBS data within RNA\n18.4.0\n2023-12\nSA#102\nSP-231251\n0340\n3\nF\nClarification on MBS session data reception in RRC_INACTIVE state\n18.4.0\n2023-12\nSA#102\nSP-231248\n0343\n1\nF\nCorrection for Multicast session leave procedure\n18.4.0\n2024-03\nSA#103\nSP-240092\n0341\n8\nF\nSupport for RedCap UEs in MBS Broadcast\n18.5.0\n2024-03\nSA#103\nSP-240092\n0349\n1\nF\nOn the general correction in TS 23.247\n18.5.0\n2024-03\nSA#103\nSP-240080\n0350\n3\nA\nCorrection on the AMF service operation for 5MBS\n18.5.0\n2024-03\nSA#103\nSP-240092\n0352\n1\nF\nClarification on the Multicast MBS procedures for UEs using power saving functions\n18.5.0\n2024-03\nSA#103\nSP-240080\n0354\n1\nA\nMB-SMF Service Area Definition\n18.5.0\n2024-03\nSA#103\nSP-240464\n0356\n1\nF\nClarification on 5MBS charging\n18.5.0\n2024-06\nSA#104\nSP-240602\n0358\n2\nF\nQMC Support for MBS Multicast and Broadcast\n18.6.0\n2024-06\nSA#104\nSP-240590\n0359\n2\nF\nProviding MBS assistance information from SMF towards NG-RAN node during Xn handover\n18.6.0\n2024-06\nSA#104\nSP-240590\n0362\n-\nF\ncorrection on the reference and duplicate wording\n18.6.0\n2024-06\nSA#104\nSP-240590\n0363\n4\nF\nFSA ID used for MBS session involving RedCap and non-RedCap UE\n18.6.0\n2024-06\nSA#104\nSP-240590\n0368\n1\nD\nCleanup CR for TS 23.247\n18.6.0\n2024-06\nSA#104\nSP-240590\n0369\n2\nF\nTransport change for resource sharing across broadcast MBS Sessions & network sharing\n18.6.0\n2024-06\nSA#104\nSP-240590\n0370\n1\nF\nClarification on NR RedCap UEs Information and Group message delivery\n18.6.0\n2024-09\nSA#105\nSP-241238\n0366\n3\nA\nHandling when MBS service area across multiple MB-SMFs\n18.7.0\n2024-09\nSA#105\nSP-241257\n0371\n1\nF\nMBS Charging Support\n18.7.0\n2025-03\nSA#107\nSP-250029\n0379\n-\nA\nThe NEF/MBSF rejects the MBS session creation when handling MBS session creation request\n18.8.0\n2025-03\nSA#107\nSP-250033\n0384\n1\nF\nClarify the support of broadcast reception for eRedCap UEs\n18.8.0",
      "chunk_type": "general",
      "cross_references": [
        "clause_6.13",
        "clause_5.1",
        "clause_6",
        "clause_5",
        "clause_7.1.2",
        "ts_26.502",
        "ts_23.246",
        "ts_23.468",
        "ts_26.348",
        "ts_23.247"
      ]
    }
  ]
}