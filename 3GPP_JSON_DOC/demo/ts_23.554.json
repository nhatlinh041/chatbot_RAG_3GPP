{
  "metadata": {
    "specification_id": "ts_23.554",
    "version": "18.8.0",
    "title": "3GPP TS 23.554",
    "file_path": "/content/drive/MyDrive/RAG_thesis/data/23_series/23554-i80/23554-i80.docx"
  },
  "export_info": {
    "export_date": "2025-07-26T09:29:14.842361",
    "total_chunks": 186
  },
  "chunks": [
    {
      "chunk_id": "ts_23.554_1",
      "section_id": "1",
      "section_title": "Scope",
      "content": "The present document specifies the functional architecture, procedures, information flows and APIs for MSGin5G Service. MSGin5G Service provides messaging communication capability in 5GS especially for Massive Internet of Things (MIoT).\nMSGin5G Service includes the following message communication models:\n-\tPoint-to-Point message;\n-\tApplication-to-Point message/ Point-to-Application message;\n-\tGroup message;\n-\tBroadcast message.\nThe corresponding service requirements are defined in 3GPP TS 22.262 [2].\nMSGin5G Service provides the following capabilities to enhance the message delivery for all message communication models:\n-\tMSGin5G Store and Forward;\n-\tMessage communication based on Messaging Topic;\n-\tMessage Aggregation;\n-\tMessage Segmentation and Reassembly;\n-\tMessage Gateway to interwork with non MSGin5G messaging services;\n-\tUsage of Network Capabilities including UE reachability status monitoring and MSGin5G device triggering.\nThe present specification also defines the usage and interactions of the MSGin5G Service with SEAL services and the utilizing of SEAL functionalities in MSGin5G service.",
      "chunk_type": "general",
      "cross_references": [
        "ts_22.262"
      ]
    },
    {
      "chunk_id": "ts_23.554_2",
      "section_id": "2",
      "section_title": "References",
      "content": "The following documents contain provisions which, through reference in this text, constitute provisions of the present document.\n-\tReferences are either specific (identified by date of publication, edition number, version number, etc.) or non‑specific.\n-\tFor a specific reference, subsequent revisions do not apply.\n-\tFor a non-specific reference, the latest version applies. In the case of a reference to a 3GPP document (including a GSM document), a non-specific reference implicitly refers to the latest version of that document in the same Release as the present document.\n[1]\t3GPP TR 21.905: \"Vocabulary for 3GPP Specifications\".\n[2]\t3GPP TS 22.262: \"Message Service within the 5G System\".\n[3]\tGSMA PRD RCC.07: \"RCC.07 Rich Communication Suite 9.0 Advanced Communications Services and Client Specification\".\n[4]\tOMA OMA-ERELD-LightweightM2M-V1_1-20180612-C: \"Enabler Release Definition for LightweightM2M\".\n[5]\t3GPP TS 23.434: \"Service Enabler Architecture Layer for Verticals\".\n[6]\t3GPP TS 23.222: \"Functional architecture and information flows to support Common API Framework for 3GPP Northbound APIs; Stage 2\".\n[7]\t3GPP TS 23.502: \"Procedures for the 5G System\".\n[8]\t3GPP TS 23.682: \"Architecture enhancements to facilitate communications with packet data networks and applications\".\n[9]\t3GPP TS 29.122: \"T8 reference point for northbound Application Programming Interfaces (APIs)\".\n[10]\t3GPP TS 29.522: \"5G System; Network Exposure Function Northbound APIs; Stage 3\".\n[11]\t3GPP TS 23.401: \"General Packet Radio Service (GPRS) enhancements for Evolved Universal Terrestrial Radio Access Network (E-UTRAN) access\".\n[12]\t3GPP TS 23.501: \"System Architecture for the 5G System (5GS); Stage 2\".\n[13]\t3GPP TS 23.204: \"Support of Short Message Service (SMS) over generic 3GPP Internet Protocol (IP) access; Stage 2\".\n[14]\t3GPP TS 23.041: \"Technical realization of Cell Broadcast Service (CBS)\".\n[15]\t3GPP TS 23.040: \"Technical realization of the Short Message Service (SMS)\".\n[16]\t3GPP TS 33.501: \"Security architecture and procedures for 5G System\".\n[17]\t3GPP TS 32.240: \"Charging architecture and principles\".\n[18]\t3GPP TS 23.304: \"Proximity based Services (ProSe) in the 5G System (5GS)\".\n[19]\t3GPP TS 23.303: \"Proximity-based services (ProSe)\".",
      "chunk_type": "general",
      "cross_references": [
        "ts_21.905",
        "ts_22.262",
        "ts_23.434",
        "ts_23.222",
        "ts_23.502",
        "ts_23.682",
        "ts_29.122",
        "ts_29.522",
        "ts_23.401",
        "ts_23.501",
        "ts_23.204",
        "ts_23.041",
        "ts_23.040",
        "ts_33.501",
        "ts_32.240",
        "ts_23.304",
        "ts_23.303"
      ]
    },
    {
      "chunk_id": "ts_23.554_3.1",
      "section_id": "3.1",
      "section_title": "Definitions",
      "content": "For the purposes of the present document, the terms and definitions given in 3GPP TR 21.905 [1] and the following apply. A term defined in the present document takes precedence over the definition of the same term, if any, in 3GPP TR 21.905 [1].\nAS-to-Point messaging: an MSGin5G message delivery that is originated at an Application Server in the network and terminated at a UE.\nBroadcast Area: an area consisting of one or more cells where the broadcast message is delivered.\nBroadcast messaging: an MSGin5G message delivery that is delivered to UEs in a Broadcast Area.\nBroadcast Message Gateway: the entity in MSGin5G Service to support delivery Broadcast messages to Legacy 3GPP UEs, Non-3GPP UEs and MSGin5G UEs.\nConstrained UE: an MSGin5G UE which cannot connect to the 3GPP network directly for message exchange with MSGin5G Server.\nGroup messaging: message delivery that is originated at a UE or an Application Server and is terminated at all members of the group (a group member can be of type UE, Legacy 3GPP UE or Non-3GPP UE).\nLegacy 3GPP Message Gateway: the entity in MSGin5G Service to support interworking with Legacy 3GPP UEs.\nLegacy 3GPP UE: the UE that supports legacy 3GPP message sending and receiving (e.g. SMS, NIDD, etc) in MSGin5G Service.\nMSGin5G Client: the client that enables MSGin5G message sending and receiving.\nMessage Gateway: general terminology for Legacy 3GPP Message Gateway, Non-3GPP Message Gateway, or Broadcast Message Gateway.\nMSGin5G Gateway UE: an MSGin5G UE that can provide access to multiple constrained UEs to connect to the 3GPP network for MSGin5G services.\nMSGin5G Group: the group of UEs which members may be MSGin5G UE, Legacy 3GPP UE and Non-3GPP UE.\nMSGin5G message: the message defined in the present specification that is exchanged between the MSGin5G Service endpoints under the MSGin5G Service.\nMSGin5G Server: a server in MSGin5G Service that receives and delivers MSGin5G messages among MSGin5G Service endpoints.\nMSGin5G Service: an MNO message service using the 5G System that enables Point- to-Point, AS-to-Point, Point-to-AS, Group and Broadcast message delivery for thing-to-thing communication and person-to-thing communication.\nMessaging Topic: an identifier for a topic to which a UE or an Application Server can subscribe to in order to receive messages that are characterized by a Message Topic.\nMSGin5G UE: the UE that uses MSGin5G Client in MSGin5G Service.\nNon-3GPP Message Gateway: the entity in MSGin5G Service to support interworking with Non-3GPP UEs.\nNon-3GPP UE: the UE that supports non-3GPP message sending and receiving (e.g. RCS message as specified in GSMA PRD RCC.07 [3], OMA LWM2M message as specified in OMA OMA-ERELD-LightweightM2M [4]) in MSGin5G Service.\nNOTE:\tThe MSGin5G UE utilizes MSGin5G Client in MSGin5G Service. The Legacy 3GPP UE and Non-3GPP UE does not utilize MSGin5G Client in MSGin5G Service.\nNon-MSGin5G UE: general terminology for Legacy 3GPP UE or Non-3GPP UE.\nPoint-to-AS messaging: an MSGin5G message delivery that is originated at a UE and terminated at an Application Server.\nPoint-to-Point messaging: an MSGin5G message delivery that originates at a UE and terminates at a UE, where at least one of the end points is an MSGin5G UE.",
      "chunk_type": "definition",
      "cross_references": [
        "ts_21.905"
      ]
    },
    {
      "chunk_id": "ts_23.554_3.2",
      "section_id": "3.2",
      "section_title": "Symbols",
      "content": "For the purposes of the present document, the following symbols apply:\n<symbol>\t<Explanation>",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.554_3.3",
      "section_id": "3.3",
      "section_title": "Abbreviations",
      "content": "For the purposes of the present document, the abbreviations given in 3GPP TR 21.905 [1] and the following apply. An abbreviation defined in the present document takes precedence over the definition of the same abbreviation, if any, in 3GPP TR 21.905 [1].\n5GS\t5G System\nAOMT\tAS-Originated Mobile-Terminated\nAS\tApplication Server\nBMG\tBroadcast Message Gateway\nCAPIF\tCommon API Framework for northbound APIs\nMOAT\tMobile-Originated AS-Terminated\nMOMT\tMobile-Originated Mobile-Terminated\nNIDD\tNon IP Data Delivery\nSCEF\tService Capability Exposure Function\nSCS\tService Capability Server\nSEAL\tService Enabler Architecture Layer for Verticals\nSMSC\tShort Message Service Center\nVAL\tVertical Application Layer",
      "chunk_type": "general",
      "cross_references": [
        "ts_21.905"
      ]
    },
    {
      "chunk_id": "ts_23.554_4.1.1",
      "section_id": "4.1.1",
      "section_title": "Description",
      "content": "This subclause specifies the general architecture requirements for MSGin5G Service.",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.554_4.1.2",
      "section_id": "4.1.2",
      "section_title": "Requirements",
      "content": "[AR-4.1.2-a] The MSGin5G Client shall support one or more applications which need to use the MSGin5G message exchanging capabilities.\n[AR-4.1.2-b] The MSGin5G Server shall support one or more Applications Servers which support the MSGin5G message exchanging capabilities.\n[AR-4.1.2-c] The MSGin5G messaging related capabilities (e.g. registration, Point-to-Point messaging, Group messaging, message delivery status, etc.) should be exposed as APIs to the Applications Server(s).\n[AR-4.1.2-d]\tThe application architecture shall enable the communication between the UEs in different PLMNs. The UEs support MSGin5G Service.\n[AR-4.1.2-e]\tThe MSGin5G service should support different application priority levels for the MSGin5G messages including High, Normal and Low.",
      "chunk_type": "requirement",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.554_4.2.1",
      "section_id": "4.2.1",
      "section_title": "Description",
      "content": "This subclause specifies the requirements for UE types supported by MSGin5G Service.",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.554_4.2.2",
      "section_id": "4.2.2",
      "section_title": "Requirements",
      "content": "[AR-4.2.2-a] The application architecture shall support the message exchanging between the following UE types:\n1.\tMSGin5G UE:\n1)\tconstrained devices (e.g. sensors, actuators) and\n2)\tunconstrained devices with advanced capabilities (e.g. washing machine, micro-ovens)\n2.\tLegacy 3GPP UE\n3.\tNon-3GPP UE\n[AR-4.2.2-b] The application architecture shall enable the unconstrained devices to act as a MSGin5G Gateway UE to constrained devices to communicate with MSGin5G Server.",
      "chunk_type": "requirement",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.554_4.3.1",
      "section_id": "4.3.1",
      "section_title": "Description",
      "content": "This subclause specifies the requirements for MSGin5G communication models.",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.554_4.3.2",
      "section_id": "4.3.2",
      "section_title": "Requirements",
      "content": "[AR-4.3.2-a] The application architecture shall support the following message communication models:\n1\tPoint-to-Point message;\n2\tApplication-to-Point message/ Point-to-Application message;\n3\tGroup message;\n4\tBroadcast message.\n[AR-4.3.2-b]\tThe application architecture shall support interconnecting between the MSGin5G Service and other different messaging delivery mechanisms, (e.g. SMS as specified in 3GPP TS23.040 [15], or RCS message as specified in GSMA PRD RCC.07 [3]).",
      "chunk_type": "requirement",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.554_4.4.1",
      "section_id": "4.4.1",
      "section_title": "Introduction",
      "content": "This subclause specifies the charging related requirements for the MSGin5G Service.",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.554_4.4.2",
      "section_id": "4.4.2",
      "section_title": "Requirements",
      "content": "[AR-4.4.2] The MSGin5G Server shall support collecting charging information from MSGin5G message according to the operator's charging policy including charge per message, charge by amount of data, and flat rate (e.g., per month or per year).",
      "chunk_type": "requirement",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.554_5.1",
      "section_id": "5.1",
      "section_title": "General",
      "content": "The following aspects of MSGin5G Service are described in this clause:\n-\tapplication architecture;\n-\tfunctional entities;\n-\treference points;\n-\tcapability exposure for enabling MSGin5G Service; and\n-\tservice-based interface representation for MSGin5G Service.",
      "chunk_type": "definition",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.554_5.2",
      "section_id": "5.2",
      "section_title": "Application Architecture",
      "content": "Figure 5.2-1 shows the application architecture of the MSGin5G service. The MSGin5G service shall fulfil the service requirements which are enumerated in 3GPP TS 22.262 [2] and the architecture requirements enumerated in clause 4.\nFigure 5.2-1: Application Architecture of the MSGin5G Service\nThe Application Client resides on the same UE with the MSGin5G Client as shown in MSGin5G UE-1, or resides on a different UE and interacts with the MSGin5G Client over the MSGin5G-5 reference point as shown in UE-2.\nThe MSGin5G Client(s) interacts with SEAL Clients over the SEAL-C reference point specified for each SEAL service. The MSGin5G Server(s) interacts with SEAL Servers over the SEAL-S reference point specified for each SEAL service. The interaction between a SEAL Client and the corresponding SEAL Server is supported by SEAL-UU reference point specified for each SEAL service as specified in 3GPP TS 23.434 [5].\nThe MSGin5G UE-1 communicates with MSGin5G Server over MSGin5G-1 reference point.\nThe Legacy 3GPP Message Gateway interacts with MSGin5G Server over MSGin5G-2 reference point on behalf of Legacy 3GPP UE (e.g., SMS, NIDD).\nThe Non-3GPP Message Gateway interacts with MSGin5G Server over MSGin5G-4 reference point on behalf of Non-3GPP UE.\nThe Broadcast Message Gateway interacts with MSGin5G Server over MSGin5G-7 reference point.\nNOTE 1:\tA SEAL Group Management Server and a SEAL Configuration Management Server (both specified in 3GPP TS 23.434 [5]) may be collocated in the MSGin5G Server. A SEAL Configuration Management Client specified in 3GPP TS 23.434 [5] may be collocated in the MSGin5G Client, Legacy 3GPP Message Gateway and Non-3GPP Message Gateway. The implementation of such deployment option is out of scope of the present specification.\nNOTE 2:\tDepending on the non-3GPP message service, the interaction between Non-3GPP message client and Non-3GPP Message Gateway may involve 3GPP Core Network.\nNOTE 3:\t3GPP Core Network may not be involved for the interaction between the Non-3GPP Message Gateway and the MSGin5G Server.\nNOTE 4:\tIf the Application Client on UE-2 communicates with the MSGin5G Client on UE‑1 over the MSGin5G-5 reference point then the transport layer communication is based on the Unicast mode 5G ProSe Direct Communication specified in 3GPP TS 23.304 [18] or is implementation specific.\nThe architecture shown in Figure 5.2-2 and Figure 5.2-3 illustrate architectural options for providing MSGin5G services for constrained devices. In these figures, the MSGin5G UE-2 is a constrained device which does not connect to the 3GPP network directly for message exchange with MSGin5G Server (e.g. UE-2 is out of 3GPP RAN coverage, with or without authorization to use UE-to-Network relay). If allowed by configuration, the MSGin5G UE-2 can use the options listed below to communicate with the MSGin5G Server:\n-\tthe MSGin5G UE-2 uses an UE-1 as relay;\n-\tthe MSGin5G UE-2 interacts with an MSGin5G Gateway UE which supports MSGin5G Gateway Client.\nFigure 5.2-2 shows the application architecture of MSGin5G UE-2 using an UE-1 as a relay. The SEAL Client(s) residing on the UE-1 also acts as relay for the SEAL Client(s) residing on the MSGin5G UE-2 as specified in 3GPP TS 23.434 [5].\nNOTE 5:\tIn this option, MSGin5G UE-2 discovers the UE-1 and then uses the UE-1 as a ProSe UE-to-Network Relay by using the procedure specified in 3GPP TS 23.304 [18].\nNOTE 6:\tThe UE-1 can be any UE supporting ProSe UE-to-Network Relay capability and may not be an MSGin5G UE.\nFigure 5.2-2: MSGin5G UE-2 using UE-1 as a relay\nFigure 5.2-3 shows the application architecture of MSGin5G UE-2 with MSGin5G Client interacts with an MSGin5G Gateway UE over the MSGin5G-6 reference point.\nNOTE 7:\tBoth MSGin5G Client functionality and MSGin5G Gateway service functionality are internal functionalities of MSGin5G Gateway Client. The interaction between MSGin5G Client functionality in the MSGin5G Gateway Client and the MSGin5G Gateway service functionality is implementation specific.\nFigure 5.2-3: MSGin5G UE-2 with MSGin5G Client interacts with an MSGin5G Gateway UE\nNOTE 8:\tMSGin5G-6 reference point is based on the Unicast mode 5G ProSe Direct Communication specified in 3GPP TS 23.304 [18].\nEditor’s note:\tHow to handle SEAL Client functionality in a constrained MSGin5G UE is FFS.\nFigure 5.2-4 illustrates the functional model for interconnection between MSGin5G servers.\nFigure 5.2-4: Interconnection between MSGin5G Servers\nTo support distributed SEAL server deployment in one PLMN, and delivering MSGin5G messages between different PLMNs, the MSGin5G Server interacts with another MSGin5G Server over MSGin5G-8 reference point.",
      "chunk_type": "requirement",
      "cross_references": [
        "clause_4",
        "figure_5.2-1",
        "figure_5.2-2",
        "figure_5.2-3",
        "figure_5.2-4",
        "ts_22.262",
        "ts_23.434",
        "ts_23.304"
      ]
    },
    {
      "chunk_id": "ts_23.554_5.3.1",
      "section_id": "5.3.1",
      "section_title": "General",
      "content": "The functional entities of the application architecture for the MSGin5G Service are described in this clause.",
      "chunk_type": "definition",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.554_5.3.2.1",
      "section_id": "5.3.2.1",
      "section_title": "General functionalities",
      "content": "An MSGin5G Server provides server-side functionality to assist MSGin5G Clients with the sending and receiving of messages via the MSGin5G Service to/from Application Servers and/or other MSGin5G Service endpoints on other UEs, and collect charging information from MSGin5G message.\nFunctionalities of MSGin5G Server:\n-\tTo manage MSGin5G UEs that are home to the MSGin5G Server and provides:\n-\thandling the registration of these MSGin5G UEs\n-\thandling the message initiation by these MSGin5G UEs\n-\thandling the message delivery to these MSGin5G UEs\n-\tTo deliver messages to an MSGin5G Service endpoint based on the terminating MSGin5G Service ID. The terminating MSGin5G Service ID may be served by the same MSGin5G Server or served by another MSGin5G Server. If the MSGin5G Service ID is served by another MSGin5G Server, the MSGin5G Server forwards the messages to the next MSGin5G Server until it reaches to the MSGin5G Server that is the home of the terminating MSGin5G Service ID;\n-\tTo resolve the MSGin5G Group Service ID to determine the members of the Group as specified in 3GPP TS 23.434[5];\n-\tInterworking with non 3GPP messaging service through the Non-3GPP Message Gateway;\n-\tInterworking with legacy 3GPP messaging service through the Legacy 3GPP Message Gateway;\n-\tInterworking with a 3GPP broadcast service through the Broadcast Message Gateway;\n-\tExchanging MSGin5G messages with Application Servers, MSGin5G Clients, Legacy 3GPP Message Gateway, and Non-3GPP Message Gateway;\n-\tSupporting MSGin5G message segmentation according to service provider's policy;\n-\tSupporting UE configuration procedures as specified in TS 23.434 [5] or communicating with the SEAL Configuration Management Server to provide MSGin5G configuration data on a UE to be ready for the MSGin5G Service;\n-\tManaging information related to the MSGin5G Service, such as MSGin5G Client Triggering Information, MSGin5G Client availability and MSGin5G Client Supported MSGin5G segment size, and Broadcast Message Gateway;\n-\tSupport store and forward of messages based on the sender request and the availability and reachability of the service endpoints, and\n-\tInteractions towards the CHF, as defined in TS 32.240 [17], to collect charging information from MSGin5G message according to the operator's charging policy and report charging information to CHF.\nNOTE:\tThe details of charging function are out of scope of the present document.",
      "chunk_type": "definition",
      "cross_references": [
        "ts_23.434",
        "ts_32.240"
      ]
    },
    {
      "chunk_id": "ts_23.554_5.3.2.2",
      "section_id": "5.3.2.2",
      "section_title": "Target resolution",
      "content": "Upon receiving the MSGin5G message request to deliver the message to the recipient (which could be any of the MSGin5G UE, Legacy 3GPP UE, Non-3GPP UE or Application Server), the MSGin5G Server checks the recipient's registration status (created at the time of each MSGin5G UE/Application Server registration to MSGin5G Server, or the Message Gateway performs registration with the MSGin5G Server on behalf of the Non-MSGin5G UEs) for availability and reachability of MSGin5G service endpoints. The MSGin5G Server will attempt for delivery of the MSGin5G message request towards recipient based on the UE Service ID/AS Service ID, if the recipient is available and reachable. If the recipient is unavailable, the MSGin5G Server stores the message for deferred delivery unless the sender or the recipient opted out of store and forward services.\nNOTE:\tIf reachability monitoring (see clause 8.9.2) is not used or the recipient is not an MSGin5G UE, the MSGin5G Server assumes the recipient is reachable.\nIf the recipient is Non-MSGin5G UE, the Legacy 3GPP Message Gateway or the Non-3GPP Message Gateway that the Non-MSGin5G UE is registered with, will receive the MSGin5G message request on behalf of the Non-MSGin5G UE, and then delivers the message to the Non-MSGin5G UE by using the Non-MSGin5G message delivery mechanism.\nIf the message is a Broadcast message, the Broadcast Message Gateway will receive the MSGin5G message request and will deliver the message to all UEs in the Broadcast Area via the Broadcast messaging delivery mechanism, based on the Broadcast Area ID.",
      "chunk_type": "general",
      "cross_references": [
        "clause_8.9.2"
      ]
    },
    {
      "chunk_id": "ts_23.554_5.3.3.1",
      "section_id": "5.3.3.1",
      "section_title": "General functionalities of MSGin5G Client",
      "content": "An MSGin5G Client provides client-side functionality for UE Application Clients with the sending and receiving of messages via the MSGin5G Service to/from Application Servers and/or other MSGin5G Service endpoints; i.e. UEs.\nFunctionalities of MSGin5G Client including:\n-\tmay expose MSGin5G APIs to enable Application Clients to use an MSGin5G Service;\n-\tsupporting (de-)registration of an MSGin5G Client to an MSGin5G Server to use MSGin5G Service;\n-\tsupporting configuration of an MSGin5G Client required to use MSGin5G Service;\n-\tconstruction of MSGin5G message when requested by a native application or Application Client;\n-\tdelivery of MSGin5G message payload to the targeted native application or Application Client;\n-\texchanging MSGin5G messages via an MSGin5G Server to/from Application Servers and/or other MSGin5G Service endpoints; i.e. UEs;\n-\tsupport MSGin5G message segmentation and re-assembly;\n-\tsupport MSGin5G message aggregation and segregation\nNOTE 1:\tA native application on an MSGin5G UE is the application logic built within the MSGin5G Client.\nNOTE 2:\tAn MSGin5G Client residing in a constrained device is the same as an MSGin5G Client residing in an unconstrained device. i.e. both of them use the same transport/data formats and have the same capabilities.",
      "chunk_type": "definition",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.554_5.3.3.2",
      "section_id": "5.3.3.2",
      "section_title": "MSGin5G Gateway Client",
      "content": "An MSGin5G Gateway Client is an MSGin5G Client which supports MSGin5G Gateway service functionality in addition to the MSGin5G Client functionalities specified in clause 5.3.3.1. It enables constrained devices to obtain services from the MSGin5G Server when communications via ProSe UE-to-Network Relay are not or cannot be supported.\nThe MSGin5G Gateway service functionality in the MSGin5G Gateway Client supports:\n-\tsupporting the bulk configuration and bulk (de-)registration for the MSGin5G Client residing on the Constrained UE, e.g. checking whether bulk configuration/bulk (de-)registration can be used, holding the (de-)registration request from MSGin5G Client residing on the constrained device, construction of the bulk (de-)registration request and splitting of the MSGin5G UE bulk (de-)registration response.\nNOTE:\tWhether other capabilities, e.g. detailing of the support for (de-)registration of constrained devices, are needed to be supported by MSGin5G Gateway service functionality is out of scope of the present document.",
      "chunk_type": "general",
      "cross_references": [
        "clause_5.3.3.1"
      ]
    },
    {
      "chunk_id": "ts_23.554_5.3.4.1",
      "section_id": "5.3.4.1",
      "section_title": "General Description of Message Gateway",
      "content": "A Message Gateway in the MSGin5G application architecture provides functionality to deliver MSGin5G messages to Non-MSGin5G UEs.\nNOTE 1:\tIt is an implementation option to deliver broadcast messages to Legacy 3GPP UEs and MSGin5G UEs (see Figure 5.2-1).\nA Message Gateway performs the role of interconnecting two different messaging delivery mechanisms and assures the message integrity between different message delivery mechanisms. A message delivery mechanism comprises the specific set of protocols, procedures and rules.\nFunctionalities of Message Gateway:\n-\tEnables seamless delivery of an MSGin5G message between different message delivery mechanisms with integrity;\n-\tCommunicates with the MSGin5G Server using either an MSGin5G Client functionality or similar functions to enable sending and receiving MSGin5G messages;\n-\tDelivers payload of an MSGin5G message to the Non-MSGin5G UE using the specific message delivery mechanism available to that Non-MSGin5G UE and vice versa;\n-\tPerforms message sender and receiver addresses conversion according to the two connected message delivery mechanisms and maintain the mapping of the address pair used for a response message delivery;\n-\tPerform registration and de-registration with the MSGin5G Server on behalf of the Non-MSGin5G UEs;\n-\tAct as a service endpoint to perform message segmentation and reassembly for the Non-MSGin5G UEs when needed;\n-\tAct as a service endpoint to split the aggregated MSGin5G message into multiple individual MSGin5G message requests for the Non-MSGin5G UEs; and\n-\tPerforms protocol conversion according to the service supported by the target UE;\n-\tSupports the MSGin5G message delivery status report\n1.\tIf application level message delivery status report is not supported by the Non-MSGin5G message delivery mechanisms, based on the information (e.g. response to the message delivery request, transport level information, etc) obtained from the Non-MSGin5G message delivery mechanisms, the Message Gateway fetches the delivery status from the above information and uses it to create an MSGin5G message delivery status report on behalf of Non-MSGin5G UE. If the delivery status is failure, also fetch the suitable failure reason from the above information and use it as reason of failure in the MSGin5G message delivery status report.\n2.\tIf application level message delivery status report is supported by the Non-MSGin5G message delivery mechanisms (e.g. RCS specified in GSMA PRD RCC.07 [3]), translates the application level message delivery status report in the Non-MSGin5G message delivery mechanisms to MSGin5G message delivery status report.\nThere are three types of Message Gateways used to deliver MSGin5G messages to different UE types: the Legacy 3GPP Message Gateway, the non-3GPP Message Gateway, and the Broadcast Message Gateway.\nNOTE 2:\tImplementation of the Message Gateway and the MSGin5G Server together is a deployment option that is out of scope the present specification.",
      "chunk_type": "definition",
      "cross_references": [
        "figure_5.2-1"
      ]
    },
    {
      "chunk_id": "ts_23.554_5.3.4.2",
      "section_id": "5.3.4.2",
      "section_title": "Legacy 3GPP Message Gateway",
      "content": "The Legacy 3GPP Message Gateway is used to deliver MSGin5G message to Legacy 3GPP UEs, using their 3GPP supported message delivery mechanisms.",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.554_5.3.4.3",
      "section_id": "5.3.4.3",
      "section_title": "Non-3GPP Message Gateway",
      "content": "The Non-3GPP Message Gateway is used to deliver MSGin5G message to Non-MSGin5G UEs, using their (non-3GPP) supported message delivery mechanisms.",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.554_5.3.4.4",
      "section_id": "5.3.4.4",
      "section_title": "Broadcast Message Gateway",
      "content": "The Broadcast Message Gateway is used to deliver MSGin5G message to MSGin5G UEs, Legacy 3GPP UEs or Non-MSGin5G UEs in a Broadcast Area.",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.554_5.3.5",
      "section_id": "5.3.5",
      "section_title": "Application Client",
      "content": "The Application Client is an entity in the application layer to implement and perform the application service logic for its own service.\nThe Application Client interacts with MSGin5G Client for on the same or different UE sending and receiving MSGin5G messages. The Application Client provides needed information for the MSGin5G Client to perform MSGin5G Service with other endpoints.",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.554_5.3.6",
      "section_id": "5.3.6",
      "section_title": "Application Server",
      "content": "The Application Server is an entity in the application layer to implement and perform the application service logic.\nThe Application Server supports sending and receiving messages with MSGin5G Service layer protocols and procedures.",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.554_5.3.7",
      "section_id": "5.3.7",
      "section_title": "Legacy 3GPP Message Client",
      "content": "The Legacy 3GPP Message Client provides client-side functionality for a Legacy 3GPP messaging service (e.g. SMS, NIDD).\nNOTE:\tThe details of the Legacy 3GPP Message Client are out of scope of the present document.",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.554_5.3.8",
      "section_id": "5.3.8",
      "section_title": "Non-3GPP Message Client",
      "content": "The Non-3GPP Message Client provides client-side functionality for a Non-3GPP messaging service.\nNOTE:\tThe details of the Non-3GPP message client are out of scope of the present document.",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.554_5.3.9",
      "section_id": "5.3.9",
      "section_title": "SEAL Client",
      "content": "The following SEAL Clients for MSGin5G Service are supported:\n-\tGroup management client as specified in 3GPP TS 23.434 [5];\n-\tConfiguration management client as specified in 3GPP TS 23.434 [5].",
      "chunk_type": "general",
      "cross_references": [
        "ts_23.434"
      ]
    },
    {
      "chunk_id": "ts_23.554_5.3.10",
      "section_id": "5.3.10",
      "section_title": "SEAL server",
      "content": "The following SEAL servers for MSGin5G Service are supported:\n-\tGroup management server as specified in 3GPP TS 23.434 [5];\n-\tConfiguration management server as specified in 3GPP TS 23.434 [5].\nNOTE:\tUsage of other SEAL services (e.g. location) from 3GPP TS 23.434 [5] for MSGin5G Service is not in scope of the present document.",
      "chunk_type": "general",
      "cross_references": [
        "ts_23.434"
      ]
    },
    {
      "chunk_id": "ts_23.554_5.4.1",
      "section_id": "5.4.1",
      "section_title": "General",
      "content": "The reference points of the service architecture for the MSGin5G Service are described in this clause.",
      "chunk_type": "definition",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.554_5.4.2",
      "section_id": "5.4.2",
      "section_title": "MSGin5G-1",
      "content": "The interactions related to enabling MSGin5G message exchange between an MSGin5G Client and an MSGin5G Server are supported by the MSGin5G-1 reference point. This reference point supports:\n-\tRegistration of an MSGin5G Client to an MSGin5G Server when not using IMS based solution; and\n-\tThe exchange of MSGin5G messages.",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.554_5.4.3",
      "section_id": "5.4.3",
      "section_title": "MSGin5G-2",
      "content": "The interactions related to enabling MSGin5G message exchange between an MSGin5G Server and the Legacy 3GPP Message Gateway are supported by the MSGin5G-2 reference point. This reference point supports:\n-\tThe exchange of MSGin5G messages between MSGin5G Server and the Legacy 3GPP Message Gateway; and\n-\tPerform registration /de-registration on behalf of the Legacy 3GPP UEs that the Message Gateway connects with the MSGin5G Server.\nNOTE:\tIndicating the delivery mechanism on the MSGin5G-2 reference point is out of scope of current functionality.",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.554_5.4.4",
      "section_id": "5.4.4",
      "section_title": "MSGin5G-3",
      "content": "The interactions related to enabling MSGin5G message exchange between an Application Server and an MSGin5G Server are supported by the MSGin5G-3 reference point. This reference point supports:\n-\tAccess to MSGin5G Server and APIs to enable sending and receiving of MSGin5G messages; and\n-\tAdherence to CAPIF as specified in 3GPP TS 23.222 [6].",
      "chunk_type": "general",
      "cross_references": [
        "ts_23.222"
      ]
    },
    {
      "chunk_id": "ts_23.554_5.4.5",
      "section_id": "5.4.5",
      "section_title": "MSGin5G-4",
      "content": "The interactions related to enabling MSGin5G message exchange between a Non-3GPP Message Gateway and an MSGin5G Server are supported by the MSGin5G-4 reference point. This reference point supports:\n-\tThe exchange of MSGin5G messages between MSGin5G Server and the Non-3GPP Message Gateway; and\n-\tPerform registration/de-registration on behalf of the Non-3GPP UEs that the Message Gateway connects with the MSGin5G Server",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.554_5.4.6",
      "section_id": "5.4.6",
      "section_title": "MSGin5G-5",
      "content": "The interactions related to enabling MSGin5G message related information exchange between an Application Client and an MSGin5G Client are supported by the MSGin5G-5 reference point. The Application Client can reside on the same UE with the MSGin5G Client or reside on a different UE. This reference point supports:\n-\tProviding information from Application Clients required to enable the MSGin5G Client to construct an MSGin5G message to be delivered to other MSGin5G Service endpoints.\n-\tConfiguring application clients with information required to enable the MSGin5G Client and MSGin5G Server to exchange and route MSGin5G messages to other MSGin5G Service endpoints.\n-\tSending notifications and information in the incoming MSGin5G messages received by the MSGin5G Client to the Application Clients from other MSGin5G Service endpoints.",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.554_5.4.7",
      "section_id": "5.4.7",
      "section_title": "MSGin5G-6",
      "content": "The MSGin5G Client of MSGin5G UE-2 communicates with MSGin5G Gateway service functionality residing on an MSGin5G Gateway UE over MSGin5G-6 reference point. The interface is based on Unicast mode 5G ProSe Direct Communication specified in 3GPP TS 23.304 [18].",
      "chunk_type": "general",
      "cross_references": [
        "ts_23.304"
      ]
    },
    {
      "chunk_id": "ts_23.554_5.4.8",
      "section_id": "5.4.8",
      "section_title": "SEAL-C",
      "content": "The following SEAL-C reference points for MSGin5G Service are supported:\n-\tGM-C reference point for group management as specified in 3GPP TS 23.434 [5];\n-\tCM-C reference point for configuration management as specified in 3GPP TS 23.434 [5].",
      "chunk_type": "general",
      "cross_references": [
        "ts_23.434"
      ]
    },
    {
      "chunk_id": "ts_23.554_5.4.9",
      "section_id": "5.4.9",
      "section_title": "SEAL-S",
      "content": "The following SEAL-S reference points for MSGin5G Service are supported:\n-\tGM-S reference point for group management as specified in 3GPP TS 23.434 [5];\n-\tCM-S reference point for configuration management as specified in 3GPP TS 23.434 [5].",
      "chunk_type": "general",
      "cross_references": [
        "ts_23.434"
      ]
    },
    {
      "chunk_id": "ts_23.554_5.4.10",
      "section_id": "5.4.10",
      "section_title": "SEAL-UU",
      "content": "The following SEAL-UU reference points for MSGin5G Service are supported:\n-\tGM-UU reference point for group management as specified in 3GPP TS 23.434 [5];\n-\tCM-UU reference point for configuration management as specified in 3GPP TS 23.434 [5].\n5.4.11\tMSGin5G-7\nThe MSGin5G-7 reference point is used by the MSGin5G Server to communicate with the Broadcast Message Gateway to deliver Broadcast messages.\n5.4.12\tMSGin5G-8\nThe MSGin5G-8 reference point is used by the MSGin5G Server to communicate with another MSGin5G Server to deliver messages to the MSGin5G Service endpoint which is served by the other MSGin5G Server, and for message exchange related to Messaging Topic (un)subscriptions.",
      "chunk_type": "general",
      "cross_references": [
        "ts_23.434"
      ]
    },
    {
      "chunk_id": "ts_23.554_5.5.1",
      "section_id": "5.5.1",
      "section_title": "MSGin5G application enabler layer adaptation to CAPIF",
      "content": "The MSGin5G Server and Application Server may support CAPIF. When CAPIF is supported:\n-\tThe MSGin5G Server shall support the CAPIF API provider domain functions (i.e. CAPIF-2/2e, CAPIF-3/3e, CAPIF-4/4e and CAPIF-5/5e as specified in 3GPP TS 23.222 [6]) as shown in Figure 5.5.1-1;\n-\tThe Application Server shall act as API invoker and support the API invoker functions (i.e. CAPIF-1/1e and CAPIF-2/2e as specified in 3GPP TS 23.222 [6]) as shown in Figure 5.5.1-1.\nFigure 5.5.1-1: MSGin5G adaptation to the CAPIF architecture",
      "chunk_type": "requirement",
      "cross_references": [
        "ts_23.222_figure_5.5.1-1",
        "figure_5.5.1-1",
        "ts_23.222"
      ]
    },
    {
      "chunk_id": "ts_23.554_5.6.1",
      "section_id": "5.6.1",
      "section_title": "General",
      "content": "The Service based architecture for MSGin5G Service is represented using functional entities and reference points between the functional entities as specified in clause 5.",
      "chunk_type": "definition",
      "cross_references": [
        "clause_5"
      ]
    },
    {
      "chunk_id": "ts_23.554_5.6.2",
      "section_id": "5.6.2",
      "section_title": "Service based architecture",
      "content": "Figure 5.6.2-1 is the Service based Architecture for MSGin5G Service.\nFigure 5.6.2-1: Service based MSGin5G Architecture\nNOTE:\tThe AS, BMG, L3G and N3G in this Service based MSGin5G Architecture are in the same trust domain.\nThe M5S function is a service based function exhibited by MSGin5G Server.\nThe M5C function is the MSGin5G Client.\nThe AC is the Application Client.\nThe L3G function is a service based function exhibited by Legacy 3GPP Message Gateway.\nThe N3G function is a service based function exhibited by Non-3GPP Message Gateway.\nThe BMG function is a service based function exhibited by the Broadcast Message Gateway.\nThe M5S manages the distribution of the messages it has received from MSGin5G UE, from Application Server, or from N3G (on behalf of Non-3GPP UE) or from L3G (on behalf of Legacy 3GPP UE).\nThe M5S invokes services provided by L3G/N3G/BMG to send MSGin5G messages towards Legacy 3GPP UE, Non-3GPP UE, or the broadcast delivery mechanism.\nThe AS/L3G/N3G invokes services provided by M5S to send MSGin5G messages to M5S on behalf of Legacy 3GPP UE or Non-3GPP UE.\nThe M5S invokes services provided by SEAL Group management function to do MSGin5G Group management.\nThe M5S/L3G/N3G invokes services provided by SEAL Configuration management function to do service configuration (including UE service ID provisioning).",
      "chunk_type": "general",
      "cross_references": [
        "figure_5.6.2-1"
      ]
    },
    {
      "chunk_id": "ts_23.554_5.6.3",
      "section_id": "5.6.3",
      "section_title": "Service based interfaces",
      "content": "Table 5.6.3-1 specifies the service based interfaces supported by MSGin5G Service.\nTable 5.6.3-1: Service based interfaces supported by MSGin5G Service\nService based interface\nApplication function entity\nMapping server entity\nAPIs offered\nMm5s\nMSGin5G Server function\nMSGin5G Server\nSpecified in 9.1\nMl3g\nLegacy 3GPP Message Gateway function\nLegacy 3GPP Message Gateway\nSpecified in 9.2.1\nMn3g\nNon-3GPP Message Gateway function\nNon-3GPP Message Gateway\nSpecified in 9.2.2\nMbg\nBroadcast Message Gateway function\nBroadcast Message Gateway\nSpecified in 9.2.3",
      "chunk_type": "general",
      "cross_references": [
        "table_5.6.3-1"
      ]
    },
    {
      "chunk_id": "ts_23.554_6.1.1",
      "section_id": "6.1.1",
      "section_title": "General",
      "content": "MSGin5G Service endpoints shall be identified by unique identifiers within the MSGin5G Service domain. For each MSGin5G Service endpoint the identifier shall be a unique URI that can be used to identify the MSGin5G Service endpoint's home service domain.\nThe following clauses describe different types of MSGin5G Service endpoint identifiers.",
      "chunk_type": "definition",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.554_6.1.2",
      "section_id": "6.1.2",
      "section_title": "UE Service Identity (UE Service ID)",
      "content": "UE Service ID is the identifier of a UE (i.e. MSGin5G UE, Legacy 3GPP UE or Non-3GPP UE).\nFor an MSGin5G UE, the assigned UE Service ID is used by the MSGin5G Client to register with the MSGin5G Server and to send and receive MSGin5G messages. It is used by the MSGin5G Server to authenticate and authorize the associated UE to the MSGin5G Service at the application layer.\nFor a Legacy 3GPP UE or a Non-3GPP UE, the assigned UE Service ID is used by the Message Gateway to register with the MSGin5G Server on behalf of Legacy 3GPP UE or Non-3GPP UE, to map into the Service ID in their defined message delivery mechanisms for interworking, and to send/receive MSGin5G messages to/from MSGin5G Server on behalf of Legacy 3GPP UE or Non-3GPP UE.",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.554_6.1.3",
      "section_id": "6.1.3",
      "section_title": "Application Server Service Identity (AS Service ID)",
      "content": "AS Service ID is the identifier of an Application Server. It is used to perform mutual authentication with the MSGin5G Server for establishing a secured service connection, and it is used to send/receive message API request/response to/from other MSGin5G Service endpoints via MSGin5G Server.",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.554_6.1.4",
      "section_id": "6.1.4",
      "section_title": "Message Gateway Service Identity (MGW Service ID)",
      "content": "MGW Service ID is the identifier of Message Gateway. It is used to perform mutual authentication with the MSGin5G Server for establishing a secured service connection.",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.554_6.2",
      "section_id": "6.2",
      "section_title": "MSGin5G Group Service Identity (Group Service ID)",
      "content": "The Group Service ID is a unique identifier within the MSGin5G Service that represents a pre-defined MSGin5G Group. A pre-defined MSGin5G Group is established before the MSGin5G Group messages are sent to it, and is assigned a unique and permanent Group Service ID when it is established. This Group Service ID shall be communicated to all members of the group. A service endpoint (MSGin5G UE or Application Server) shall use this Group Service ID to send a message to all members of the group.\nThe Group Service ID shall be a unique URI that can be used to identify where the group is hosted.",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.554_6.3",
      "section_id": "6.3",
      "section_title": "Broadcast Area Service Identity (Broadcast Area ID)",
      "content": "The Broadcast Area ID is the identity of the Service Area where the broadcast message is delivered.",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.554_6.4",
      "section_id": "6.4",
      "section_title": "MSGin5G UE Identity (MSGin5G UE ID)",
      "content": "The MSGin5G UE ID is a unique identifier that represents the MSGin5G UE (i.e. the device identifier of the MSGin5G UE). The MSGin5G UE ID may be pre-configured to the MSGin5G UE by its vendor.",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.554_6.5",
      "section_id": "6.5",
      "section_title": "Non-MSGin5G UE identity (Non-MSGin5G UE ID)",
      "content": "The Non-MSGin5G UE ID is a unique identifier that represents the Non-MSGin5G UE. A Non-MSGin5G UE ID is associated with a specific Non-MSGin5G UE. It is used by the Message Gateway in the MSGin5G Service to record the Non-MSGin5G UE. It is also used by the Message Gateway as a part of VAL UE ID when the Message Gateway executes the Non-MSGin5G UE configuration procedure on behalf of a Non-MSGin5G UE. The format of Non-MSGin5G UE ID may differ among different VALs. The non-MSGin5G ID may be pre-configured to the Non-MSGin5G UE by its vendor.",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.554_6.6",
      "section_id": "6.6",
      "section_title": "Application Identity (Application ID)",
      "content": "Application ID is an identifier that represents the application for which the payload of message is intended. The content of Application ID is outside the scope of this document.",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.554_6.7",
      "section_id": "6.7",
      "section_title": "MSGin5G Server address",
      "content": "MSGin5G Server address is the identifier of an MSGin5G Server within an MSGin5G service provider's domain. The MSGin5G Service endpoints in this MSGin5G service provider's domain can contact an MSGin5G Server by using the MSGin5G Server address of this MSGin5G Server.",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.554_7.1",
      "section_id": "7.1",
      "section_title": "General",
      "content": "Massive Internet of Things (MIoT) is one of key market segments of 5G. The typical IoT device communication is sending and receiving small data which can be delivered just in a message. The MSGin5G Service is designed and optimized for massive IoT device communication including thing-to-thing communication and person-to-thing communication.\nThe MSGin5G Service is a message enabler for applications. An Application Client in a UE utilizes MSGin5G Service to send a message to another UE, to multiple UEs or to the Application Server, or the Application Server utilizes the MSGin5G Service to send a message to a UE or to multiple UEs. All messages will be routed via the MSGin5G Server in the 5G system. The MSGin5G Service flow is shown in figure 7.1-1.\nIf the UE supports a legacy 3GPP message service (e.g. SMS, NIDD, or CB) and does not support the MSGin5G Service (i.e. UE has no MSGin5G Client), the message will be translated to the appropriate message delivery mechanism by the Legacy 3GPP Message Gateway. A UE that does not support any 3GPP message service can connect to the MSGin5G Service via Non-3GPP Message Gateway that facilitates the translation between the MSGin5G Service and non-3GPP message delivery mechanism. The connection between such UE and the gateway can be via 3GPP access or non 3GPP access (e.g. WLAN) and is out of scope of the present specification.\nAn Application Server resides outside the 3GPP domain and connects to the MSGin5G Server via a CAPIF-aware reference point.\nThe message communication models include:\n-\tPoint-to-Point messaging: message that is originated at a UE (UE A) and terminated at another UE (UE B, a Legacy 3GPP UE or a Non-3GPP UE).\n-\tAS-to-Point messaging: message that is originated at an Application Sever and terminated at a UE.\n-\tPoint-to-AS messaging: message that is originated at a UE and terminated at an Application Sever.\n-\tGroup Messaging: message that is originated at a UE or an Application Server and is terminated at a group of UEs (a group member can be of type UE A, Legacy 3GPP UE or Non-3GPP UE).\n-\tBroadcast Messaging: message that is originated at an Application Sever or an MSGin5G UE and broadcasted to all the UEs in a specific Broadcast Area within coverage of a cell or of multiple cells. An existing broadcast function (e.g. CB specified in 3GPP TS 23.041 [14]) may be reused in broadcast messaging of MSGin5G Service.\n-\tTopic Messaging: message that is originated at an Application Sever or a UE and is delivered to all UEs and Application Server(s) that have subscribed to the topic.\nFigure 7.1-1: The MSGin5G Service overview",
      "chunk_type": "definition",
      "cross_references": [
        "figure_7.1-1",
        "ts_23.041"
      ]
    },
    {
      "chunk_id": "ts_23.554_7.2",
      "section_id": "7.2",
      "section_title": "Service flow",
      "content": "Before a UE or an Application Server can use the MSGin5G Service it needs to register with the MSGin5G Server.\nA UE registers with its identity, its security credentials, the capabilities that it supports, and its availability. The MSGin5G Server will use the availability registration and de-registration to determine if the UE is available for message delivery. If a UE is unavailable for message delivery, the MSGin5G Server will store the message and deliver it once the UE becomes available again.\nWhen a UE or an Application Server sends an MSGin5G message to a recipient UE then such message will be sent to the MSGin5G Server and this server will deliver the message to the UE based on the capabilities of the recipient UE (MSGin5G UE, Legacy 3GPP UE or Non-3GPP UE). If the recipient UE is a Legacy 3GPP UE then the MSGin5G Server will forward the message to the Legacy 3GPP Message Gateway and this gateway will convert the message to a message that is supported by the recipient UE (e.g. SMS, NIDD or CB). If the recipient UE is a Non-3GPP UE then the MSGin5G Server will forward the message to the Non-3GPP Message Gateway and this gateway will convert the message to a message that is supported by the recipient UE.\nA Legacy 3GPP UE sends the application payload to the Legacy 3GPP Message Gateway and this gateway will forward the application payload in an MSGin5G message to the MSGin5G Server, which will deliver the message to the recipient UE(s). A Non-3GPP UE sends the application payload to the Non-3GPP Message Gateway and this gateway will forward the application payload in an MSGin5G message to the MSGin5G Server, which will deliver the message to the recipient UE(s).\nNOTE:\tConversion by a Message Gateway is out of scope of the present specification.\nIf a UE or an Application Server sends an MSGin5G message to a group of UEs, the MSGin5G Server will deliver the message to all group members taking into account if such a UE is an MSGin5G UE, a Legacy 3GPP UE or a Non-MSGin5G UE and if such UE is available for delivery.\nIf a UE or an Application Server sends an MSGin5G message containing a Messaging Topic to the MSGin5G Server, the MSGin5G Server will distribute the message to all UEs and Application Servers that have subscribed to that topic.\nIf a UE or an Application Server sends a broadcast message to a Broadcast Area, the MSGin5G Server forwards the message to the Broadcast Message Gateway and this gateway will forward the message to the broadcast function.\nAn originating UE or Application Server may request the recipient UE(s) to acknowledge reception of the message. If such a request is made, a message delivery status report shall be sent by the recipient MSGin5G UE or the Message Gateway (on behalf of the Non-MSGin5G UE) as a point-to-point message back to the originating UE or Application Server. The acknolwedgement information is included in the payload and the format of this information is out of scope of the present specification.\nThe Non-MSGin5G UE may respond to an incoming MSGin5G message; it is subject to the Message Gateway implementation to maintain the transaction of the incoming MSGin5G message and reply to it to the sender, with the response it receives from the Non-MSGin5G UE.",
      "chunk_type": "procedure",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.554_7.3",
      "section_id": "7.3",
      "section_title": "Message delivery flow at MSGin5G Server",
      "content": "Figure 7.3-1 shows the flow for message delivery by the MSGin5G Server.\nFigure 7.3-1: The message delivery flow at the MSGin5G Server",
      "chunk_type": "procedure",
      "cross_references": [
        "figure_7.3-1"
      ]
    },
    {
      "chunk_id": "ts_23.554_8.1.1",
      "section_id": "8.1.1",
      "section_title": "General",
      "content": "The configuration procedure is used to get the MSGin5G Service configuration information (e.g. UE Service ID). The configuration procedure is used by the MSGin5G UE or used by Message Gateway on behalf of the Non-MSGin5G UE. The MSGin5G Service configuration information is used in the future messaging communication.\nThe VAL UE configuration data specified in TS 23.434 [5] is used in this configuration procedure. After the configuration procedure, the MSGin5G UE, or the Message Gateway on behalf of the Non-MSGin5G UE can register to MSGin5G Server.\nNOTE 1:\tThe configuration on the Message Gateway to support the Non-MSGin5G UE for MSGin5G Service can also be done without using the SEAL configuration procedures and is implementation specific.\nNOTE 2:\tThe MSGin5G Service configuration information can also be pre-configured to the MSGin5G UE/Non-MSGin5G UE and is implementation specific.",
      "chunk_type": "definition",
      "cross_references": [
        "ts_23.434"
      ]
    },
    {
      "chunk_id": "ts_23.554_8.1.2",
      "section_id": "8.1.2",
      "section_title": "MSGin5G UE Configuration",
      "content": "In the MSGin5G UE configuration procedure, the MSGin5G UE acts as Configuration management client specified in 3GPP TS 23.434 [5].\nThe following steps of configuration management service apply for the MSGin5G UE:\n-\tSend the Get VAL UE configuration request specified in clause 11.3.2.1 of 3GPP TS 23.434 [5];\n-\tReceive the related Get VAL UE configuration response specified in clause 11.3.2.2 of 3GPP TS 23.434 [5];\nThe usage of the above information flows is clarified as below:\n-\tThe MSGin5G UE ID works as VAL UE ID which is mandatory in the Get VAL UE configuration request;\n-\tThe UE Service ID works as VAL user ID;\n-\tThe service identifier of MSGin5G Service works as VAL service ID;\nBesides the IEs specified in clause 11.3.2.1 of 3GPP TS 23.434 [5], the information in table 8.1.2-1 is also included in the Get VAL UE configuration request.\nTable 8.1.2-1: Additional Information in the Get VAL UE configuration request\nInformation element\nStatus\nDescription\nMSGin5G UE information\nO\nOther information needed by the configuration procedure. (see NOTE)\nNOTE:\tThe information can be the device type, device vendor, etc. It is specified by application provider or MSGin5G Service provider and is out of scope of this document. The MSGin5G Service provider can configure the MSGin5G UE with different configuration data based on this IE. E.g. all sensors can be configured to a same MSGin5G Server.\nThe information in table 8.1.2-2 is included in the Get VAL UE configuration response as a part of VAL UE configuration data.\nTable 8.1.2-2: Information in the Get VAL UE configuration response\nInformation element\nStatus\nDescription\nUE Service ID\nM\nUE Service ID assigned to the requesting MSGin5G UE.\nMSGin5G Server address\nM\nThe MSGin5G Server which serves this MSGin5G UE.\nMSGin5G Service specific information\nO\nThe specific information of the MSGin5G Service specified by the MSGin5G Service provider. (see NOTE)\nNOTE:\tE.g. the segment size of MSGin5G message in this service provider. The detailed definition is out of scope of this document.\nBesides the functionalities of Configuration Management Server specified in 3GPP TS 23.434 [5], the MSGin5G Configuration Function should also check whether the MSGin5G UE ID (i.e. VAL UE ID) is included in a former Get VAL UE configuration request.\n-\tIf so, the MSGin5G Configuration Function included the UE Service ID assigned to the MSGin5G UE in the former configuration procedure as a part of VAL UE configuration data,\n-\tOtherwise, a new UE Service ID is assigned to the MSGin5G UE and included in the VAL UE configuration data.\nThen the MSGin5G Configuration Function processes the configuration request according to the service policy.",
      "chunk_type": "general",
      "cross_references": [
        "ts_23.434_clause_11.3.2.1",
        "ts_23.434_clause_11.3.2.2",
        "table_8.1.2-1",
        "table_8.1.2-2",
        "ts_23.434"
      ]
    },
    {
      "chunk_id": "ts_23.554_8.1.3",
      "section_id": "8.1.3",
      "section_title": "Message Gateway Configuration for support of Non-MSGin5G UE",
      "content": "The Message Gateway performs the configuration procedure on behalf of the Non-MSGin5G UE to get the MSGin5G Service configuration information (e.g. UE Service ID).\nNOTE 1:\tAs an alternative to the configuration procedure all the necessary service information (including the UE Service ID) of a Non-MSGin5G UE can be pre-configured with the Message Gateway.\nIf Configuration Management service in SEAL is used for the Message Gateway configuration, the Message Gateway acts as Configuration management client specified in 3GPP TS 23.434 [5] on behalf of each Non- MSGin5G UE.\nThe following steps of configuration management service may apply for the Message Gateway:\n-\tSend the Get VAL UE configuration request specified in clause 11.3.2.1 of 3GPP TS 23.434 [5];\n-\tReceive the related Get VAL UE configuration response specified in clause 11.3.2.2 of 3GPP TS 23.434 [5];\nThe usage of the above information flows is clarified as below:\n-\tAn Information Element contains both Non-MSGin5G UE ID and MGW Service ID works as VAL UE ID which is mandatory in the Get VAL UE configuration request;\nNOTE 2:\tThe Non-MSGin5G UE ID may differ among different VALs and may not be unique among different Gateways. It is not enough to use only Non-MSGin5G UE ID as VAL UE ID.\n-\tThe UE Service ID works as VAL user ID;\n-\tThe service identifier of MSGin5G Service works as VAL service ID;\nBesides the IEs specified in clause 11.3.2.1 of 3GPP TS 23.434 [5], the information in table 8.1.3-1 is also included in the Get VAL UE configuration request.\nTable 8.1.3-1: Additional Information in the Get VAL UE configuration request\nInformation element\nStatus\nDescription\nNon-MSGin5G UE information\nO\nOther information needed by the configuration procedure. (see NOTE)\nNOTE:\tThe information can be the device type, device Vendor, etc. It is specified by application provider or MSGin5G Service provider and is out of scope of this document. The MSGin5G Service provider can configure the Non-MSGin5G UE with different configuration data based on this IE. E.g. all sensors can be configured to a same MSGin5G Server.\nThe information in table 8.1.3-2 is included in the Get VAL UE configuration response as a part of VAL UE configuration data. The information is used by Message Gateway to support non-MSGin5G UEs that will be used to register with the MSGin5G Server for MSGin5G service.\nTable 8.1.3-2: Information in the Get VAL UE configuration response\nInformation element\nStatus\nDescription\nUE Service ID\nM\nUE service ID assigned to the requesting Non-MSGin5G UE.\nMSGin5G Server address\nM\nThe MSGin5G Server which serves this MSGin5G UE.\nMSGin5G Service specific information\nO\nThe specific information of the MSGin5G Service specified by the MSGin5G Service provider. (see NOTE)\nNOTE:\tThe information (except UE Service IE) used by Message Gateway to support non-MSGin5G UEs that will be used to register with the MSGin5G Server for MSGin5G service is included in this IE. The detailed information is specified in Table 8.2.1-1. Other service specific information can also be included in this IE, the detailed definition of the other service specific information is out of scope of this document.\nBesides the functionalities of Configuration Management Server specified in 3GPP TS 23.434 [5], the MSGin5G Configuration Function should also check whether the MSGin5G UE ID (i.e. VAL UE ID) is included in a former Get VAL UE configuration request.\n-\tIf so, the MSGin5G Configuration Function included the UE Service ID assigned to the Non-MSGin5G UE in the former configuration procedure as a part of VAL UE configuration data.\n-\tOtherwise, a new UE Service ID is assigned to the Non-MSGin5G UE and included in the VAL UE configuration data.\nThen the MSGin5G Configuration Function processes the configuration request according to the service policy.",
      "chunk_type": "general",
      "cross_references": [
        "ts_23.434_clause_11.3.2.1",
        "ts_23.434_clause_11.3.2.2",
        "table_8.1.3-1",
        "table_8.1.3-2",
        "table_8.2.1-1",
        "ts_23.434"
      ]
    },
    {
      "chunk_id": "ts_23.554_8.1.4",
      "section_id": "8.1.4",
      "section_title": "MSGin5G UE bulk configuration over MSGin5G-6 reference point",
      "content": "When more than one MSGin5G UEs, which are constrained devices, which support an MSGin5G Client, get the MSGin5G Service configuration information via the MSGin5G Gateway UE, the MSGin5G Gateway UE may decide to use bulk configuration procedure specified in this clause based on service policy.\nPre-conditions:\n1.\tThe constrained MSGin5G UE has discovered and selected an MSGin5G Gateway UE as specified in clause 8.2.8 and connected to the serving network via the MSGin5G Gateway UE successfully.\n2.\tThe MSGin5G Gateway UE has been configured by using the procedure specified in clause 8.1.2 of the present document.\nThe constrained MSGin5G UE sends the Get VAL UE configuration request as specified in clause 8.1.2 of the present document to MSGin5G Gateway UE. If the MSGin5G Gateway UE decides to use bulk configuration based on the service policy, the MSGin5G Gateway UE sends a Get VAL UE configuration response including the information elements as listed in table 8.1.4-1 as a part of VAL UE configuration data to the constrained MSGin5G UEs before bulk configuration is performed. This Get VAL UE configuration response is used to inform each constrained MSGin5G UE that their Get VAL UE configuration requests will be handled later.\nNOTE:\tHow to decide that bulk configuration is used is implementation specific and out of scope.\nTable 8.1.4-1: Information in the Get VAL UE configuration response to constrained device before bulk configuration is performed\nInformation element\nStatus\nDescription\nMaximum configuration time\nM\nThe maximum wait time for the bulk configuration request to be sent to the MSGin5G Server.\nIn the MSGin5G UE bulk configuration procedure, the MSGin5G Gateway UE acts as Configuration management client specified in clause 8.1.2 of the present document. In addition to the information elements listed in table 8.1.2-1 of the present document and clause 11.3.2.1 of 3GPP TS 23.434 [5], the Get VAL UE configuration request used for bulk configuration also includes the information elements as listed in table 8.1.4-2.\nTable 8.1.4-2: additional Information in the Get VAL UE configuration request\nInformation element\nStatus\nDescription\nBulk configuration flag\nM\nIndicates this request is an enhanced Get VAL UE configuration request used for MSGin5G UE bulk configuration\nList of MSGin5G UE IDs\nM\nList of MSGin5G UE ID of MSGin5G UEs which needed to be configured in this bulk configuration request\nIn addition to the information elements listed in table 8.1.2-2 of the present document, the Get VAL UE configuration response used for bulk configuration also includes the information elements as listed in table 8.1.4-3 as a part of VAL UE configuration data as specified in clause 11.3.2.2 of 3GPP TS 23.434 [5].\nTable 8.1.4-3: additional Information in the Get VAL UE configuration response\nInformation element\nStatus\nDescription\nList of MSGin5G UE configuration information\nM\nEach element in this list contains information as specified in Table 8.1.2-2. The configuration information included in this IE is used to complete the configuration of the constrained MSGin5G UEs.\nEditor's note:\tThe enhancement of VAL UE configuration request and response are needed to be captured by eSEAL2 WID and are FFS.\nUpon receiving the Get VAL UE configuration response used for bulk configuration, the MSGin5G Gateway UE includes the MSGin5G UE configuration information in the List of MSGin5G UE configuration information into multiple individual Get VAL UE configuration responses and sends them to the corresponding constrained MSGin5G UEs.",
      "chunk_type": "general",
      "cross_references": [
        "clause_8.2.8",
        "clause_8.1.2",
        "ts_23.434_clause_11.3.2.1",
        "ts_23.434_clause_11.3.2.2",
        "table_8.1.4-1",
        "table_8.1.2-1",
        "table_8.1.4-2",
        "table_8.1.2-2",
        "table_8.1.4-3",
        "ts_23.434_table_8.1.4-3",
        "ts_23.434"
      ]
    },
    {
      "chunk_id": "ts_23.554_8.2.0",
      "section_id": "8.2.0",
      "section_title": "General",
      "content": "Before a UE or an Application Server can use the MSGin5G Service it needs to register with the MSGin5G Server.\nThe procedures of MSGin5G UE registration/de-registration are specified in clause 8.2.1 and clause 8.8.2. The procedures also apply when the MSGin5G UE uses MSGin5G services by using another UE as relay.\nThe procedures of Non-MSGin5G UE registration/de-registration are specified in clause 8.2.3 and clause 8.8.4.\nThe procedures of Application Server registration/de-registration are specified in clause 8.2.5 and clause 8.8.6.\nThe MSGin5G Gateway UE may use bulk registration to register more than one of MSGin5G UEs at one time if allowed by the service policy. The bulk registration procedure is specified in clause 8.2.7. Before using bulk registration, the MSGin5G UE should select a MSGin5G Gateway as specified in clause 8.2.8. If a MSGin5G Gateway UE is selected by an MSGin5G UE, the MSGin5G UE should use bulk registration over MSGin5G-6 reference point specified in clause 8.2.7 instead of the MSGin5G UE registration procedure specified in clause 8.2.1. The corresponding procedure of MSGin5G UE bulk de-registration over MSGin5G-6 reference point is specified in clause 8.2.11.\nThe Message Gateway may also use bulk registration/de-registration to register more than one of Non-MSGin5G UE at one time with the MSGin5G Server. The procedures of Non-MSGin5G UE bulk registration and Non-MSGin5G UE bulk de-registration are specified in clause 8.2.9 and clause 8.2.10 respectively.",
      "chunk_type": "definition",
      "cross_references": [
        "clause_8.2.1",
        "clause_8.8.2",
        "clause_8.2.3",
        "clause_8.8.4",
        "clause_8.2.5",
        "clause_8.8.6",
        "clause_8.2.7",
        "clause_8.2.8",
        "clause_8.2.11",
        "clause_8.2.9",
        "clause_8.2.10"
      ]
    },
    {
      "chunk_id": "ts_23.554_8.2.1",
      "section_id": "8.2.1",
      "section_title": "MSGin5G UE Registration",
      "content": "The signalling flow for MSGin5G UE registration is illustrated in figure 8.2.1-1. The procedure assumes that the MSGin5G UE is responsible for initiating registration to the MSGin5G Server in order to establish association with the MSGin5G Server to receive MSGin5G Services.\nPre-conditions:\n1.\tThe MSGin5G UE has connected to the serving network successfully.\n2.\tThe MSGin5G UE has successfully completed the Configuration procedure; alternatively, a UE Service ID and the MSGin5G Server address have been pre-configured on the MSGin5G UE.\n3.\tBoth the MSGin5G UE and MSGin5G Server have been configured with the necessary credentials to enable authenticating one another.\nFigure 8.2.1-1: MSGin5G Client registration\n1.\tThe MSGin5G UE sends an MSGin5G UE registration request to the MSGin5G Server. The request includes the UE Service ID and may include the MSGin5G Client Profile and Requested expiration time as detailed in Table 8.2.1-1.\nTable 8.2.1-1: MSGin5G UE registration request\nInformation element\nStatus\nDescription\nUE Service ID\nM\nUE service identifier assigned to the requesting MSGin5G UE.\nMSGin5G Client Profile\nO\nSet of parameters describing the MSGin5G Client\n>MSGin5G Client Triggering Information\nO\nUE Identifier (i.e., MSISDN, external ID), port number(s) and associated protocol (e.g., SMS, NIDD, etc.) for device triggering. See Table 8.2.1‑2. The MSGin5G Server uses the information in step 5 of clause 8.9.3.2.\n>MSGin5G Client Communication Availability\nO\nCommunication availability information for the MSGin5G Client to receive MSGin5G messages. This IE informs the MSGin5G Server if the client has a specific application-level schedule/periodicity to its MSGin5G communications. See Table 8.2.1-3.\n> MSGin5G Client Supported MSGin5G segment size\nO\nThe maximum payload size of the MSGin5G message can be used by the MSGin5G Server to deliver message to this MSGin5G Client. The MSGin5G message sent to this MSGin5G Client should be segmented by the MSGin5G Server if the payload size of the message is bigger than this IE as specified in clause 8.5.\nThe value of this IE is decided by the MSGin5G Client, and is depended on the MSGin5G Client capabilities, e.g. computing capability or application processing time limitation.\nIf this IE is not included, the MSGin5G Server shall use the pre-configured global value (default value is 2048 bytes) within the MSGin5G service domain.\nRequested expiration time\nO\nRequested expiration time for the registration.\nTable 8.2.1-2: MSGin5G Client Triggering Information\nInformation element\nStatus\nDescription\nMSGin5G UE ID\nM\nIdentity of the UE hosting the MSGin5G Client (e.g., the External Identifier defined in TS 23.682 [8], or an MSISDN)\nMSGin5G Client Ports\nM\nList of port numbers that the MSGin5G Client listens on for device triggers from the MSGin5G Server. Also included with each port number is an associated protocol (e.g., SMS, NIDD, etc.).\nTable 8.2.1-3: MSGin5G Client Communication Availability\nInformation element\nStatus\nDescription\nScheduled communication time\nM\nTime when the UE becomes available for communication.\nCommunication duration time\nM\nDuration time of periodic communication.\nPeriodic communication indicator\nO\nIdentifies whether the client communicates periodically or not, e.g., on demand.\nPeriodic communication interval\nO\nInterval Time of periodic communication. This IE is mandatory if the Periodic communication indicator indicates periodic communications.\nData size indication\nO\nIndicates the expected data size to be exchanged during the communication duration.\nStore and forward option\nO\nIndicates opting out of store and forward services for incoming MSGin5G requests. The MSGin5G Server uses the information to determine whether Store and Forward procedure applies as specified in clause 8.3.6.\n2.\tUpon receiving the request, the MSGin5G Server initiates authentication procedures with the MSGin5G Client and authorizes the MSGin5G Client. If the registration is successful, the MSGin5G Server stores the UE Service ID and associated MSGin5G Client Profile. The UE Service ID and associated MSGin5G Client Profile should be maintained on the MSGin5G Server until one of the following cases applies:\na)\tthe MSGin5G UE de-registers from the MSGin5G Server as specified in clause 8.2.2;\nb)\tthe MSGin5G UE re-registered successfully with a different MSGin5G Client Profile; In this case, the MSGin5G Server shall store the UE Service ID and associated new MSGin5G Client Profile;\nc)\tthe MSGin5G UE registration is expired; or\nd)\tthe MSGin5G Server deletes the MSGin5G UE registration as required by the service provider.\nNOTE:\tThe authentication procedures in step 2 are built on top of the transport layer mechanism specified in Annex Y.2 of 3GPP TS 33.501 [16].\n3.\tThe MSGin5G Server sends an MSGin5G UE registration response to the MSGin5G UE. The response includes the information elements as detailed in Table 8.2.1-4. The registration expiration time may be returned either as provided by the MSGin5G client in the registration request or determined by the MSGin5G Server based on local policy.\nTable 8.2.1-4: MSGin5G UE registration response\nInformation element\nStatus\nDescription\nUE Service ID\nM\nUE service identifier of the requesting MSGin5G UE.\nRegistration result\nM\nIndication if the registration is success or failure\nRegistration expiration time\n(see NOTE 1)\nO\nIndicates the expiration time of the registration.\nFailure Cause (see NOTE 2)\nO\nThe reason for failure\nNOTE 1:\tThis IE shall only be present when the Registration is Success.\nNOTE 2:\tThis IE shall only be present when the Registration result is Failure.",
      "chunk_type": "general",
      "cross_references": [
        "clause_8.9.3.2",
        "clause_8.5",
        "clause_8.3.6",
        "clause_8.2.2",
        "table_8.2.1-1",
        "table_8.2.1",
        "table_8.2.1-3",
        "table_8.2.1-2",
        "table_8.2.1-4",
        "figure_8.2.1-1",
        "ts_23.682",
        "ts_33.501"
      ]
    },
    {
      "chunk_id": "ts_23.554_8.2.2",
      "section_id": "8.2.2",
      "section_title": "MSGin5G UE De-Registration",
      "content": "By de-registering, the MSGin5G UE informs the MSGin5G Server that it wishes to terminate its association with the MSGin5G Server.\nNOTE 1:\tDe-registration implies that Client Triggering Information and the Client Communication Availability Information are no longer valid.\nThe procedure assumes that the MSGin5G UE is responsible for initiating the de-registration from the MSGin5G Server. The signalling flow for MSGin5G UE de-registration is illustrated in figure 8.2.2-1.\nPre-condition:\n1.\tThe MSGin5G UE is registered to the MSGin5G Server.\nFigure 8.2.2-1: MSGin5G UE de-registration\n1.\tThe MSGin5G UE determines to de-register from the MSGin5G Server.\n2.\tThe MSGin5G UE sends an MSGin5G UE de-registration request to the MSGin5G Server that includes the UE Service ID, as detailed in Table 8.2.2-1.\nTable 8.2.2-1: MSGin5G UE de-registration request\nInformation element\nStatus\nDescription\nUE Service ID\nM\nUE service identifier assigned to the MSGin5G UE.\n3.\tThe MSGin5G Server may initiate authentication procedures with the MSGin5G Client and authorizes the MSGin5G Client. If the MSGin5G Server has authorized the MSGin5G Client successfully it deletes any UE Service ID and associated MSGin5G Client Profile that it has stored.\nNOTE 2:\tThe authentication procedures in step 3 are built on top of the transport layer mechanism specified in Annex Y.2 of 3GPP TS 33.501 [16].\n4.\tThe MSGin5G Server sends an MSGin5G UE de-registration response as detailed in Table 8.2.2-2 to the MSGin5G UE.\nTable 8.2.2-2: MSGin5G UE de-registration response\nInformation element\nStatus\nDescription\nUE Service ID\nM\nUE service identifier of the MSGin5G UE.\nDe-registration result\nM\nIndication if the de-registration is success or failure\nFailure Cause\nO\nThe reason for failure",
      "chunk_type": "general",
      "cross_references": [
        "table_8.2.2-1",
        "table_8.2.2-2",
        "figure_8.2.2-1",
        "ts_33.501"
      ]
    },
    {
      "chunk_id": "ts_23.554_8.2.3",
      "section_id": "8.2.3",
      "section_title": "Non-MSGin5G UE Registration",
      "content": "Non-MSGin5G UEs (i.e., Legacy 3GPP UEs or Non-3GPP UEs) are connected to the MSGin5G Server through a Message Gateway. The Message Gateway performs registration with the MSGin5G Server on behalf of the Non MSGin5G UEs, based on pre-provisioned information when it receives a registration request from the Non MSGin5G UE, or gets the knowledge that the Non-MSGin5G UE is ready for the MSGin5G service. After the procedure is completed, the Message Gateway may communicate the result to the Non-MSGin5G UE to enable MSGin5G Services at the Non MSGin5G UE.\nNOTE:\tThe communication procedure between Non-MSGin5G UE and Message Gateway is out of scope of this document.\nThe signalling flow is illustrated in figure 8.2.3-1.\nPre-conditions:\n1.\tThe Message Gateway has been pre-configured with the MSGin5G Server address.\n2.\tThe Message Gateway has been configured with the necessary information as specified in clause 8.1.3. If the UE Service ID and Non-MSGin5G UE credentials have been configured and the Non-MSGin5G UE Profile is available, this pre-condition enables authentication and Non- MSGin5G UE registration at the Message Server.\n3.\tA secured connection has been established between the Message Gateway and the MSGin5G Server.\nFigure 8.2.3-1: Non-MSGin5G UE registration\n1.\tThe Message Gateway sends the Non-MSGin5G UE registration request to the MSGin5G Server. The request includes the information pre-configured to the Message Gateway or provided by the Non-MSGin5G UE (e.g. in non-MSGin5G registration or bootstrapping procedures which are out of scope of the present specification) and detailed in Table 8.2.3-1.\nTable 8.2.3-1: Non-MSGin5G UE registration request\nInformation element\nStatus\nDescription\nUE Service ID\nM\nUE service identifier assigned to the requesting Non-MSGin5G UE.\nMGW Service ID\nM\nThe service identifier of the Message Gateway performing registration on behalf of a Non-MSGin5G UE\nNon-MSGin5G UE Profile\nO\nSet of parameters describing the Non-MSGin5G UE\n>Non-MSGin5G UE Communication Availability\nO\nCommunication availability information for the Non-MSGin5G UE to receive messages. This IE informs the MSGin5G Server if the Non-MSGin5G UE has a specific application-level schedule/periodicity to its MSGin5G communications, which may be used to determine whether and when MSGin5G communications are attempted. See Table 8.2.1-3.\n2.\tUpon receiving the request, the MSGin5G Server initiates authentication procedures with the Message Gateway on behalf of the Non-MSGin5G Client and authorises the Non-MSGin5G UE to receive the MSGin5G Service. If the registration is successful, the MSGin5G Server stores the UE Service ID and associated Non-MSGin5G UE Profile. The UE Service ID and associated Non-MSGin5G UE Profile should be maintained on the MSGin5G Server until one of the following cases applies:\na)\tthe Non-MSGin5G UE de-registers from the MSGin5G Server as specified in clause 8.2.4;\nb)\tthe Non-MSGin5G UE re-registered successfully with a different Non-MSGin5G UE Profile; In this case, the MSGin5G Server shall store the UE Service ID and associated new Non-MSGin5G UE Profile;\nc)\tthe Non-MSGin5G UE registration is expired; or\nd)\tthe MSGin5G Server deletes the Non-MSGin5G UE registration as required by the service provider.\nNOTE:\tThe authentication procedures in step 2 are built on top of the transport layer mechanism specified in Annex Y.2 of 3GPP TS 33.501 [16].\n3.\tThe MSGin5G Server returns the result of the registration in the Non-MSGin5G UE registration response message with the information detailed in table 8.2.1-4, to the Message Gateway.",
      "chunk_type": "general",
      "cross_references": [
        "clause_8.1.3",
        "clause_8.2.4",
        "table_8.2.3-1",
        "table_8.2.1-3",
        "table_8.2.1-4",
        "figure_8.2.3-1",
        "ts_33.501"
      ]
    },
    {
      "chunk_id": "ts_23.554_8.2.4",
      "section_id": "8.2.4",
      "section_title": "Non-MSGin5G UE De-registration",
      "content": "The Message Gateway performs de-registration with the MSGin5G Server on behalf of the Non-MSGin5G UEs, in order to terminate services from the MSGin5G Server.\nNOTE:\tAfter the procedure is completed, the Message Gateway may communicate the result to the requesting Non-MSGin5G UE and the procedure is out of scope of this document.\nThe procedure assumes that the Message Gateway is responsible for initiating the de-registration from the MSGin5G Server on behalf of the Non-MSGin5G UE. The signaling flow for Non-MSGin5G UE de-registration is illustrated in figure 8.2.4-1.\nPre-condition:\n1.\tThe Message Gateway successfully performed registration with the MSGin5G Server on behalf of the Non-MSGin5G UE.\nFigure 8.2.4-1: Non-MSGin5G UE de-registration\n1.\tThe Message Gateway determines to de-register the Non-MSGin5G UE with the MSGin5G Server.\n2.\tThe Message Gateway sends a Non-MSGin5G UE de-registration request to the MSGin5G Server that includes the UE Service ID associated with the Non-MSGin5G UE, as shown in Table 8.2.4-1.\nTable 8.2.4-1: Non-MSGin5G UE de-registration request\nInformation element\nStatus\nDescription\nUE Service ID\nM\nUE service identifier assigned to the Non-MSGin5G UE.\n3.\tUpon receiving the request, the MSGin5G Server may initiate authentication procedures with the Message Gateway on behalf of the Non-MSGin5G Client and authorizes the Message Gateway. If the MSGin5G Server has authorized the Message Gateway successfully, it deletes any UE Service ID and associated Non-MSGin5G UE Profile that it has stored.\nNOTE:\tThe authentication procedures in step 3 are built on top of the transport layer mechanism specified in Annex Y.2 of 3GPP TS 33.501 [16].\n4.\tThe MSGin5G Server replies with a Non-MSGin5G UE de-registration response as shown in table 8.2.4-2.\nTable 8.2.4-2: Non-MSGin5G UE De-registration response\nInformation element\nStatus\nDescription\nUE Service ID\nM\nUE service identifier of the Non-MSGin5G UE.\nDe-registration result\nM\nIndication if the de-registration is success or failure\nFailure Cause\nO\nThe reason for failure",
      "chunk_type": "general",
      "cross_references": [
        "table_8.2.4-1",
        "table_8.2.4-2",
        "figure_8.2.4-1",
        "ts_33.501"
      ]
    },
    {
      "chunk_id": "ts_23.554_8.2.5",
      "section_id": "8.2.5",
      "section_title": "Application Server Registration",
      "content": "The signalling flow for Application Server registration is illustrated in figure 8.2.5-1. Application Server may use the procedure in this clause to do registration.\nNOTE:\tIf the Application Server does not use the Registration procedure, applicable Information Elements as listed in Table 9.1.2.3-1 need to be configured on the MSGin5G Server.\nPre-conditions:\n1.\tThe Application Server has connected to the serving network successfully.\n2.\tAn AS Service ID has been provisioned on the Application Server.\n3.\tThe MSGin5G Server address has been provisioned on the Application Server.\n4.\tBoth the Application Server and MSGin5G Server have been configured with the necessary credentials to enable authenticating one another.\nFigure 8.2.5-1: Application Server registration\n1.\tThe Application Server sends an Application Server registration request to the MSGin5G Server. The request may include authorization information for the Application Server to register to the MSGin5G Server. The request shall include the AS Service ID and may include Application Profile information and Requested expiration time as detailed in Table 9.1.2.3‑1.\n2.\tUpon receiving the request, the MSGin5G Server validates the Application Server registration request and may verify the security credentials.\nNOTE:\tThe authentication procedures in step 2 are built on top of the transport layer mechanism specified in Annex Y.4 of 3GPP TS 33.501 [16].\n3.\tThe MSGin5G Server sends an Application Server registration response to the Application Server. The response includes the information elements as specified in Table 9.1.2.4-1. If the registration is successful, the MSGin5G Server stores the AS Profile information as detailed in Table 9.1.2.3-1. The Application Profile should be maintained on the MSGin5G Server until one of the following cases applies:\na)\tthe Application Server de-registers from the MSGin5G Server as specified in clause 8.2.6;\nb)\tthe Application Server re-registered successfully with a different Application Profile; In this case, the MSGin5G Server shall store the AS Service ID and associated new Application Profile;\nc)\tthe Application Server registration is expired; or\nd)\tthe MSGin5G Server deletes the Application Server registration as required by the service provider.",
      "chunk_type": "general",
      "cross_references": [
        "clause_8.2.6",
        "table_9.1.2.3-1",
        "table_9.1.2.3",
        "table_9.1.2.4-1",
        "figure_8.2.5-1",
        "ts_33.501"
      ]
    },
    {
      "chunk_id": "ts_23.554_8.2.6",
      "section_id": "8.2.6",
      "section_title": "Application Server De-registration",
      "content": "By de-registering, the Application Server informs the MSGin5G Server that it wishes to terminate its association with the MSGin5G Server.\nThe procedure assumes that the Application Server is responsible for triggering the de-registration from the MSGin5G Server. The signalling flow for Application Server de-registration is illustrated in figure 8.2.6-1.\nPre-conditions:\n1.\tThe Application Server is registered to the MSGin5G Server.\nFigure 8.2.6-1: Application Server de-registration\n1.\tThe Application Server determines to de-register from the MSGin5G Server.\n2.\tThe Application Server sends an Application Server de-registration request to the MSGin5G Server that includes the AS Service ID, as detailed in Table 9.1.2.5-1.\n3.\tThe MSGin5G Server validates the Application Server de-registration request. If the MSGin5G Server has authorized the Application Server successfully, it deletes any AS Profile information that it has stored.\nNOTE:\tThe authentication procedures in step 3 are built on top of the transport layer mechanism specified in Annex Y.4 of 3GPP TS 33.501 [16].\n4.\tThe MSGin5G Server replies with an Application Server de-registration response as detailed in Table 9.1.2.6-1.",
      "chunk_type": "general",
      "cross_references": [
        "table_9.1.2.5-1",
        "table_9.1.2.6-1",
        "figure_8.2.6-1",
        "ts_33.501"
      ]
    },
    {
      "chunk_id": "ts_23.554_8.2.7",
      "section_id": "8.2.7",
      "section_title": "MSGin5G UE bulk registration over MSGin5G-6 reference point",
      "content": "When MSGin5G UE-1 and UE-2, which support an MSGin5G Client, perform registration via MSGin5G Gateway UE to contact the MSGin5G Server, the MSGin5G Gateway service functionality in the MSGin5G Gateway UE may decide to use bulk registration procedure specified in this clause based on the registration request sent from MSGin5G Clients in MSGin5G UE-1 and MSGin5G UE-2, if allowed by service policy. The procedure for MSGin5G UE bulk registration is illustrated in figure 8.2.7-1.\nPre-conditions:\n1.\tThe MSGin5G Gateway UE has registered to the MSGin5G Server successfully.\n2.\tMSGin5G UE-1 and MSGin5G UE-2 have discovered and selected an MSGin5G Gateway UE as specified in clause 8.2.8 and connected to the serving network via MSGin5G Gateway UE successfully.\n3.\tUE Service IDs and the MSGin5G Server addresses have been configured on the MSGin5G Gateway UE, MSGin5G UE-1 and MSGin5G UE-2. All these MSGin5G UEs are served by a same MSGin5G Server.\n4.\tBoth the MSGin5G UEs and MSGin5G Server have been configured with the necessary credentials to enable authenticating one another.\nFigure 8.2.7-1: MSGin5G Client bulk registration\n1.\tThe MSGin5G Client-1 sends an MSGin5G UE registration request to the MSGin5G Server as specified in clause 8.2.1, In addition to the Information Elements specified in table 8.2.1-1, the MSGin5G Client-1 may also add the Information Elements specified in table 8.2.7-1 in the MSGin5G UE registration request.\nTable 8.2.7-1: MSGin5G UE registration request\nInformation element\nStatus\nDescription\nRegistration urgent degree\nO\nIndicates whether the registration request is urgent or not.\nWait time\nO\nIndicates the maximum wait time of the registration request allowed by the MSGin5G Client which sent the registration request before the bulk registration request is sent to the MSGin5G Server.\n2.\tUpon receiving the MSGin5G UE registration request, the MSGin5G Gateway Client checks whether this request can be queued for bulk-handling based on the service policy and the information included in the MSGin5G UE registration request, e.g. whether the MSGin5G UE registration request is urgent.\nNOTE 1:\tWhether bulk registration is supported can be configured in the MSGin5G Gateway Client.\nNOTE 2:\tThe bulk registration conditions are specified by the application provider or MSGin5G Service provider and are out of scope of this document.\n3.\tBased on step 2:\na)\tif the MSGin5G UE registration request is urgent, MSGin5G Gateway Client may also include other registration requests; or\nb)\tif the MSGin5G UE registration request can be bulk-handled, MSGin5G Gateway Client sends a bulk registration notification to MSGin5G Client-1 and caches/stores the MSGin5G UE registration request until the bulk registration conditions can be fulfilled. The Information Elements specified in table 8.2.7-2 are included in the bulk registration notification. The steps 4 and 5 are skipped.\nTable 8.2.7-2: bulk registration notification\nInformation element\nStatus\nDescription\nUE Service ID\nM\nUE service identifier assigned to the requesting MSGin5G UE.\nExpected registration time\nO\nThe expected time when the bulk registration can be handled and the MSGin5G UE registration Response can be received.\n4.\tThe MSGin5G Server handles the MSGin5G UE registration request as specified in clause 8.2.1 and sends the corresponding MSGin5G UE registration response to MSGin5G Gateway Client.\n5.\tThe MSGin5G Gateway Client sends the MSGin5G UE registration response to MSGin5G Client-1. The MSGin5G Client-1 handles the MSGin5G UE registration response as specified in clause 8.2.1 and skips all the remaining steps in the present clause.\n6.\tMSGin5G Client-2 sends an MSGin5G UE registration request and the MSGin5G UE registration request is handed as in steps 2-5.\n7.\tThe MSGin5G Gateway Client finds that the conditions of sending a bulk registration request can be fulfilled, e.g.\na)\tthe registration request expiration time in the MSGin5G UE registration request sent from MSGin5G Client-1 or MSGin5G Client-2 is reached; or\nb)\tthe periodic bulk registration interval is reached; or\nc)\tthe maximum MSGin5G UE registration request number in a MSGin5G UE bulk registration request is reached.\nNOTE 3:\tThe maximum registration time, periodic bulk registration interval and maximum MSGin5G UE registration request number are implementation specific and out of the scope of the current specification.\n8.\tThe MSGin5G Gateway Client includes all cached/stored MSGin5G UE registration requests in an MSGin5G UE bulk registration request and sends it to the MSGin5G Server. The Information Elements specified in table 8.2.7-3 are included in the MSGin5G UE bulk registration request.\nTable 8.2.7-3: MSGin5G UE bulk registration request\nInformation element\nStatus\nDescription\nNumber of individual MSGin5G UE registration requests\nM\nIndicates total number of MSGin5G UE registration requests which are bulked in this MSGin5G UE bulk registration request\nList of individual MSGin5G UE registration request\nM\nEach element in this list contains information as specified in Table 8.2.1-1.\n9.\tUpon receiving the MSGin5G UE bulk registration request, the MSGin5G Server splits the MSGin5G UE bulk registration request, executes the authentication, authorization and registration procedures for each MSGin5G Client individually as specified in clause 8.2.1.\nEditor's note:\tSecurity aspects of bulk registration is the responsibility of SA3.\n10.\tThe MSGin5G Server includes all corresponding MSGin5G UE registration responses in an MSGin5G UE bulk registration response and sends it to MSGin5G Gateway Client. The Information Elements specified in table 8.2.7-4 are included in the MSGin5G UE bulk registration response.\nTable 8.2.7-4: MSGin5G UE bulk registration response\nInformation element\nStatus\nDescription\nNumber of individual MSGin5G UE registration responses\nM\nIndicates total number of MSGin5G UE registration responses which are bulked in this MSGin5G UE bulk registration response\nList of individual MSGin5G UE registration response\nM\nEach element in this list contains information as specified in Table 8.2.1-4.\n11.\tUpon receiving the MSGin5G UE bulk registration response, the MSGin5G Gateway Client splits the MSGin5G UE bulk registration response into multiple individual MSGin5G UE registration responses. Each individual MSGin5G UE registration response contains information as specified in Table 8.2.1-4.\n12.\tMSGin5G Gateway Client sends the MSGin5G UE registration Response 1 to MSGin5G Client-1.\n13.\tMSGin5G Gateway Client sends the MSGin5G UE registration Response 2 to MSGin5G Client-2.",
      "chunk_type": "general",
      "cross_references": [
        "clause_8.2.8",
        "clause_8.2.1",
        "table_8.2.1-1",
        "table_8.2.7-1",
        "table_8.2.7-2",
        "table_8.2.7-3",
        "table_8.2.7-4",
        "table_8.2.1-4",
        "figure_8.2.7-1"
      ]
    },
    {
      "chunk_id": "ts_23.554_8.2.8",
      "section_id": "8.2.8",
      "section_title": "Constrained device with MSGin5G Client selecting MSGin5G Gateway UE",
      "content": "The signalling flow for MSGin5G Client-2 in the MSGin5G UE-2 (which is a constrained device) to request other MSGin5G UEs supporting MSGin5G Gateway service functionality to provide their configuration is illustrated in figure 8.2.8-1.\nPre-conditions:\n1)\tMSGin5G UE-2 is not able to communicate with MSGin5G Server directly;\n2)\tMSGin5G UE-2 has discovered nearby MSGin5G UEs using ProSe direct discovery procedure as specified in 3GPP TS 23.304 [18] and the 5G ProSe Direct Communication is established between MSGin5G UE-2 and nearby MSGin5G UE-1 and MSGin5G UE-3 as specified in 3GPP TS 23.304 [18].\n3)\tAn MSGin5G UE-3 supports MSGin5G Gateway service functionality (i.e. MSGin5G UE-3 is an MSGin5G Gateway UE) and an MSGin5G UE-1 does not support MSGin5G Gateway service functionality (i.e. MSGin5G UE-1 is not an MSGin5G Gateway UE).\n4)\tThe UE service ID has been pre-configured on the MSGin5G UE-2.\nFigure 8.2.8-1: Constrained UE sending message to request configuration of the MSGin5G Gateway UE\n1)\tThe MSGin5G Client-2 in MSGin5G UE-2 (which is a constrained UE) sends messages to all surrounding MSGin5G UEs (using ProSe Direction communication as specified in 3GPP TS 23.304 [18]) to provide their gateway configuration if MSGin5G Gateway service functionality is supported by the MSGin5G UE, i.e. the MSGin5G UE is a MSGin5G Gateway UE. The request message includes information elements as specified in Table 8.2.8-1.\nTable 8.2.8-1: Information elements for Request for gateway UE configuration\nInformation element\nStatus\nDescription\nLayer-2 ID\nM\nLayer-2 identity of UE-2\nUE service ID\nM\nUE service identifier of the UE-2\nMSGin5G UE ID\nO\nMSGin5G device identifier of the UE-2\nRequired packet size\nM\nMaximum allowed packet size of the UE-2\n2)\tUpon receiving the request from the MSGin5G Client of MSGin5G UE-2, the MSGin5G UE-3 supporting the MSGin5G Gateway service functionality sends the response for the gateway configuration. The response message includes information elements as specified in Table 8.2.8-2. The MSGin5G UE-1 does not support the MSGin5G Gateway service functionality and ignores the request for gateway UE configuration, i.e. should not send a corresponding response.\nTable 8.2.8-2: Information elements for Response for gateway UE configuration\nInformation element\nStatus\nDescription\nLayer-2 ID\nM\nLayer-2 identity of UE-1\nUE service ID\nM\nUE service identifier of the UE-1\nMSGin5G UE ID\nO\nMSGin5G device identifier of the UE-1\nAllowed packet size\nM\nMaximum allowed packet size of the UE-2\n3)\tIf the MSGin5G UE-2 receives responses from multiple different MSGin5G Gateway UEs, then the MSGin5G Client of the MSGin5G UE-2 selects an MSGin5G Gateway UE whose value of the Allowed packet size is equal or more than the value of the Required packet size of the MSGin5G UE-2. If the value of the Allowed packet size is less than the value of the Required packet size for all MSGin5G Gateway UE, then the MSGin5G Client of the MSGin5G UE-2 selects the MSGin5G Gateway UE with the maximum value of the Allowed packet size among all MSGin5G Gateway UEs and further sets the maximum allowed packet size of the constrained UE to the value of the Allowed packet size of the selected MSGin5G Gateway UE.\nIf the MSGin5G UE-2 receives responses from multiple MSGin5G Gateway UEs which serve different domains, the MSGin5G UE-2 shall select the MSGin5G Gateway UE that serves the same domain as the MSGin5G UE-2 does, based on the UE service ID.\nOnce MSGin5G UE has selected the MSGin5G Gateway UE, the MSGin5G UE indicates the selected MSGin5G Gateway UE by registering to use the gateway service. The signalling flow for MSGin5G Client in the MSGin5G UE (which is a constrained device) to register itself to use Gateway service of the MSGin5G Gateway UE is illustrated in figure 8.2.8-2.\nFigure 8.2.8-2: Constrained UE registering to use MSGin5G Gateway UE\n1)\tUpon selecting the MSGin5G Gateway UE, the MSGin5G Client of the MSGin5G UE sends a Gateway registration request to register with the selected MSGin5G Gateway UE to request the use of gateway service. The request message includes the UE service ID and may include the MSGin5G UE ID of the MSGin5G UE (i.e. constrained UE) and the time till when constrained device is intended to use the gateway service from the selected MSGin5G Gateway UE. The information elements are specified in Table 8.2.8-3.\nTable 8.2.8-3: Information elements for Gateway registration request\nInformation element\nStatus\nDescription\nUE service ID\nM\nUE service identifier of the MSGin5G UE\nMSGin5G UE ID\nO\nUnique identifier that represents the MSGin5G UE (i.e. the device identifier of the MSGin5G UE)\nTime till\nO\nThe time when constrained device is intended to use the gateway service\n2)\tUpon receiving the request from the MSGin5G Client of the MSGin5G UE, the MSGin5G Gateway Client in MSGin5G Gateway UE checks whether the MSGin5G UE is authorized to use the gateway service or not.\n3)\tThe MSGin5G Gateway Client in MSGin5G Gateway UE sends the response message with the status of the registration. If the registration is successful, the response message includes parameters like the Accepted time till when the constrained device is allowed to use the gateway service from the selected MSGin5G Gateway UE. The information elements are specified in Table 8.2.8-4.\nTable 8.2.8-4: Gateway registration response\nInformation element\nStatus\nDescription\nUE Service ID\nM\nUE service identifier of the requesting MSGin5G UE.\nRegistration result\nM\nIndication if the registration is success or failure\nAccepted time till\nO\nIndicates the time when constrained device is allowed to use the gateway service if the constrained device was authorized succesfully.\nFailure Cause\nO\nThe reason for failure. This IE should be included if the Registration result is failure.",
      "chunk_type": "general",
      "cross_references": [
        "table_8.2.8-1",
        "table_8.2.8-2",
        "table_8.2.8-3",
        "table_8.2.8-4",
        "figure_8.2.8-1",
        "figure_8.2.8-2",
        "ts_23.304"
      ]
    },
    {
      "chunk_id": "ts_23.554_8.2.9",
      "section_id": "8.2.9",
      "section_title": "Non-MSGin5G UE bulk registration",
      "content": "Non-MSGin5G UEs (i.e., Legacy 3GPP UEs or Non-3GPP UEs) are connected to the MSGin5G Server through a Message Gateway. The Message Gateway may decide to use bulk registration procedure specified in this clause based on service policy. The procedure for Non-MSGin5G UE bulk registration is illustrated in figure 8.2.9-1.\nPre-conditions:\n1.\tThe Message Gateway has been pre-configured with the MSGin5G Server address.\n2.\tThe Message Gateway has been configured with the necessary information as specified in clause 8.1.3. If the UE Service ID and Non-MSGin5G UE credentials have been configured and the Non-MSGin5G UEs' Profile is available, this pre-condition enables authentication and Non- MSGin5G UEs registration at the Message Server.\n3.\tA secured connection has been established between the Message Gateway and the MSGin5G Server.\nFigure 8.2.9-1: Non-MSGin5G UE bulk registration\n1.\tThe Message Gateway determines to perform Non-MSGin5G UE bulk registration.\nNOTE:\tThe conditions of whether the Non-MSGin5G UE bulk registration is used are implementation specific and out of the scope of the current specification.\n2.\tThe Message Gateway sends a Non-MSGin5G UE bulk registration request to the MSGin5G Server. The Information Elements specified in table 8.2.9-1 are included in the Non-MSGin5G UE bulk registration request.\nTable 8.2.9-1: Non-MSGin5G UE bulk registration request\nInformation element\nStatus\nDescription\nNumber of individual MSGin5G UE registration requests\nM\nIndicates total number of Non-MSGin5G UE registration requests which are bulked in this Non-MSGin5G UE bulk registration request\nList of individual Non-MSGin5G UE information\nM\nEach element in this list contains information as specified in Table 8.2.3-1.\n3.\tUpon receiving the Non-MSGin5G UE bulk registration request, the MSGin5G Server processes each of the UE registrations from the list individually as specified in clause 8.2.3. For each individual Non-MSGin5G UE registration that successful, the MSGin5G Server stores that UE Service ID and associated Non-MSGin5G UE Profile information.\nEditor's note:\tSecurity aspects of Non-MSGin5G UE bulk registration is the responsibility of SA3.\n4.\tThe MSGin5G Server includes all corresponding MSGin5G UE registration responses in a Non-MSGin5G UE bulk registration response and sends it to the Message Gateway. The Information Elements specified in table 8.2.9-2 are included in the Non-MSGin5G UE bulk registration response.\nTable 8.2.9-2: MSGin5G UE bulk registration response\nInformation element\nStatus\nDescription\nNumber of individual Non-MSGin5G UE registration responses\nM\nIndicates total number of Non-MSGin5G UE registration responses which are bulked in this MSGin5G UE bulk registration response\nList of individual Non-MSGin5G UE registration response\nM\nEach element in this list contains information as specified in Table 8.2.1-4.",
      "chunk_type": "general",
      "cross_references": [
        "clause_8.1.3",
        "clause_8.2.3",
        "table_8.2.9-1",
        "table_8.2.3-1",
        "table_8.2.9-2",
        "table_8.2.1-4",
        "figure_8.2.9-1"
      ]
    },
    {
      "chunk_id": "ts_23.554_8.2.10",
      "section_id": "8.2.10",
      "section_title": "Non-MSGin5G UE bulk de-registration",
      "content": "The procedure assumes that the Message Gateway is responsible for initiating the bulk de-registration from the MSGin5G Server on behalf of the Non-MSGin5G UEs. The signaling flow for Non-MSGin5G UE bulk de-registration is illustrated in figure 8.2.10-1.\nPre-conditions:\n1.\tThe Message Gateway successfully performed registration with the MSGin5G Server on behalf of a set of Non-MSGin5G UEs.\nFigure 8.2.10-1: Non-MSGin5G UE bulk de-registration\n1.\tThe Message Gateway determines to perform Non-MSGin5G UE bulk de-registration.\nNOTE:\tThe conditions of whether the Non-MSGin5G UEs can be bulked de-registered are implementation specific and out of the scope of the current specification.\n2.\tThe Message Gateway sends a Non-MSGin5G UE bulk de-registration request to the MSGin5G Server. The Information Elements specified in table 8.2.10-1 are included in the Non-MSGin5G UE bulk de-registration request.\nTable 8.2.10-1: Non-MSGin5G UE bulk de-registration request\nInformation element\nStatus\nDescription\nNumber of individual MSGin5G UE de-registration requests\nM\nIndicates total number of Non-MSGin5G UE de-registration requests which are bulked in this Non-MSGin5G UE bulk de-registration request\nList of individual UE Service ID\nM\nEach element in this list contains a UE service identifier assigned to the Non-MSGin5G UE.\n3.\tUpon receiving the request, the MSGin5G Server processes each of the UE de-registration from the list individually as specified in clause 8.2.4. The MSGin5G Server deletes any applicable UE Service ID in the List of individual UE Service ID and associated MSGin5G Client Profile information that it has stored.\nEditor's note:\tSecurity aspects of Non-MSGin5G UE bulk de-registration is the responsibility of SA3.\n4.\tThe MSGin5G Server replies with a Non-MSGin5G UE bulk de-registration response as shown in table 8.2.10‑2.\nTable 8.2.10-2: Non-MSGin5G UE bulk de-registration response\nInformation element\nStatus\nDescription\nNumber of individual Non-MSGin5G UE de-registration responses\nM\nIndicates total number of Non-MSGin5G UE de-registration responses which are bulked in this Non-MSGin5G UE bulk de-registration response\nList of individual Non-MSGin5G UE de-registration response\nM\nEach element in this list contains information as specified in Table 8.2.4-2.",
      "chunk_type": "general",
      "cross_references": [
        "clause_8.2.4",
        "table_8.2.10-1",
        "table_8.2.10",
        "table_8.2.10-2",
        "table_8.2.4-2",
        "figure_8.2.10-1"
      ]
    },
    {
      "chunk_id": "ts_23.554_8.2.11",
      "section_id": "8.2.11",
      "section_title": "MSGin5G UE bulk de-registration over MSGin5G-6 reference point",
      "content": "The MSGin5G Gateway UE may decide to use bulk de-registration procedure specified in this clause based on the de-registration request sent from MSGin5G Clients in MSGin5G UEs or, if allowed by service policy. The procedure for MSGin5G UE bulk de-registration is illustrated in figure 8.2.11-1.\nPre-conditions:\n1.\tThe MSGin5G Gateway UE has registered to the MSGin5G Server successfully.\n2.\tMSGin5G UE-1 and MSGin5G UE-2 have registered to the MSGin5G Server via MSGin5G Gateway UE successfully as specified in clause 8.2.8.\nFigure 8.2.11-1: MSGin5G UE bulk de-registration\n1.\tThe MSGin5G Client-1 sends an MSGin5G UE de-registration request to the MSGin5G Server as specified in clause 8.2.2, In addition to the Information Elements specified in table 8.2.2-1, the MSGin5G Client-1 may also add the Information Elements specified in table 8.2.11-1 in the MSGin5G UE de-registration request.\nTable 8.2.11-1: MSGin5G UE de-registration request\nInformation element\nStatus\nDescription\nDe-registration urgent degree\nO\nIndicates whether the de-registration request is urgent or not.\nWait time\nO\nIndicates the maximum wait time of the de-registration request allowed by the MSGin5G Client-2 before the bulk de-registration request is sent to the MSGin5G Server.\n2.\tUpon receiving the MSGin5G UE de-registration request, the MSGin5G Gateway Client checks whether this request can be queued for bulk-handling based on the service policy and the information included in the MSGin5G UE registration request, e.g. whether the MSGin5G UE de-registration request is urgent.\nNOTE 1:\tWhether bulk de-registration is supported can be configured in the MSGin5G Gateway Client.\nNOTE 2:\tThe bulk de-registration conditions are specified by the application provider or MSGin5G Service provider and are out of scope of this document.\n3.\tBased on step 2:\na)\tif the MSGin5G UE de-registration request is urgent, the MSGin5G Gateway Client may also include other registration requests; or\nb)\tif the MSGin5G UE de-registration request can be bulked, MSGin5G Client-1 sends a bulk de-registration notification to MSGin5G Client-1 and caches/stores the MSGin5G UE de-registration request until the bulk de-registration conditions can be fulfilled. The Information Elements specified in table 8.2.11-2 are included in the bulk de-registration notification. The steps 4 and 5 are skipped.\nTable 8.2.11-2: bulk de-registration notification\nInformation element\nStatus\nDescription\nUE Service ID\nM\nUE service identifier assigned to the requesting MSGin5G UE.\nExpected de-registration time\nO\nThe expected time when the bulk de-registration can be handled and the MSGin5G UE de-registration response can be received.\n4.\tThe MSGin5G Server handles the MSGin5G UE de-registration request as specified in clause 8.2.2 and sends the corresponding MSGin5G UE de-registration response to MSGin5G Gateway Client.\n5.\tThe MSGin5G Gateway Client sends the MSGin5G UE de-registration response to MSGin5G Client-1. The MSGin5G Client-1 handles the MSGin5G UE de-registration response as specified in clause 8.2.2 and skips all the remaining steps in the present clause.\n6.\tMSGin5G Client-2 sends an MSGin5G UE de-registration request and the MSGin5G UE de-registration request is handled as in steps 2-5.\n7.\tThe MSGin5G Gateway Client finds that the conditions of sending a bulk de-registration request can be fulfilled, e.g.\na)\tthe de-registration request expiration time in the MSGin5G UE de-registration request sent from MSGin5G Client-1 or MSGin5G Client-2 is reached; or\nb)\tthe periodic bulk de-registration interval is reached; or\nc)\tthe maximum MSGin5G UE de-registration request number in a MSGin5G UE bulk de-registration request is reached.\nNOTE 3:\tThe maximum de-registration time, periodic bulk de-registration interval and maximum MSGin5G UE de-registration request number are implementation specific and out of the scope of the current specification.\n8.\tThe MSGin5G Gateway Client includes all cached/stored MSGin5G UE de-registration requests in an MSGin5G UE bulk de-registration request and sends it to the MSGin5G Server. The Information Elements specified in table 8.2.11-3 are included in the MSGin5G UE bulk de-registration request.\nTable 8.2.11-3: MSGin5G UE bulk de-registration request\nInformation element\nStatus\nDescription\nNumber of individual MSGin5G UE de-registration requests\nM\nIndicates total number of MSGin5G UE de-registration requests which are bulked in this MSGin5G UE bulk de-registration request\nList of individual MSGin5G UE de-registration request\nM\nEach element in this list contains information as specified in Table 8.2.2-1.\n9.\tUpon receiving the MSGin5G UE bulk de-registration request, the MSGin5G Server processes each of the MSGin5G UE de-registration from the list individually as specified in clause 8.2.2.\nEditor's note:\tSecurity aspects of MSGin5G UE bulk de-registration is the responsibility of SA3.\n10.\tThe MSGin5G Server includes all corresponding MSGin5G UE de-registration responses in an MSGin5G UE bulk de-registration response and sends it to MSGin5G Gateway Client. The Information Elements specified in table 8.2.11-4 are included in the MSGin5G UE bulk de-registration response.\nTable 8.2.11-4: MSGin5G UE bulk de-registration response\nInformation element\nStatus\nDescription\nNumber of individual MSGin5G UE de-registration responses\nM\nIndicates total number of MSGin5G UE de-registration responses which are bulked in this MSGin5G UE bulk de-registration response\nList of individual MSGin5G UE de-registration response\nM\nEach element in this list contains information as specified in Table 8.2.2-2\n11.\tUpon receiving the MSGin5G UE bulk de-registration response, the MSGin5G Gateway Client splits the MSGin5G UE bulk de-registration response into multiple individual MSGin5G UE de-registration responses. Each individual MSGin5G UE de-registration response contains information as specified in Table 8.2.2-2.\n12.\tMSGin5G Gateway Client sends the MSGin5G UE de-registration Response 1 to MSGin5G Client-1.\n13.\tMSGin5G Gateway Client sends the MSGin5G UE de-registration Response 2 to MSGin5G Client-2.",
      "chunk_type": "general",
      "cross_references": [
        "clause_8.2.8",
        "clause_8.2.2",
        "table_8.2.2-1",
        "table_8.2.11-1",
        "table_8.2.11-2",
        "table_8.2.11-3",
        "table_8.2.11-4",
        "table_8.2.2-2",
        "figure_8.2.11-1"
      ]
    },
    {
      "chunk_id": "ts_23.554_8.3.1",
      "section_id": "8.3.1",
      "section_title": "General",
      "content": "All MSGin5G message traffic is routed via the MSGin5G Server. The present clause specifies the MSGin5G message origination procedure when a MSGin5G service endpoint (i.e. MSGin5G UE, AS or Message Gateway) sending a message to its recipient(s) and the MSGin5G message termination procedure when a MSGin5G Server delivers a message to the MSGin5G service endpoint.",
      "chunk_type": "definition",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.554_8.3.2",
      "section_id": "8.3.2",
      "section_title": "MSGin5G messages origination procedure",
      "content": "Figure 8.3.2-1 shows the procedure for an MSGin5G UE that initiates an MSGin5G message request.\nFigure 8.3.2-1: New MSGin5G message request from UE\nFigure 8.3.2-2 shows the procedure for an Application Server that initiates an API request specified in clause 9.1.1.1 for sending an MSGin5G message to UE.\nFigure 8.3.2-2: Application Server initiates a request for sending an MSGin5G message\nFigure 8.3.2-3 shows the procedure for a Legacy 3GPP Message Gateway or a non-3GPP Message Gateway that sends a new MSGin5G message request to the MSGin5G Server on behalf of a Legacy 3GPP UE or Non-3GPP UE.\nFigure 8.3.2-3: New MSGin5G message request sending from Message Gateway\nThe following procedure applies to the above figures 8.3.2-1, 8.3.2-2 and 8.3.2-3 with the exception that step 1 only applies to figure 8.3.2-1.\n1.\tThe Application Client in the UE sends a request to the MSGin5G Client for invoking the MSGin5G Client to send a new MSGin5G message to a recipient or to multiple recipients.\nEditor's note:\tWhether the APIs provided by the MSGin5G Client to the Application Client is to be specified in another clause of the TS is FFS.\n2.\tAs shown in figure 8.3.2-1 or 8.3.2-3, the MSGin5G Client or Message Gateway sends the MSGin5G message request to the MSGin5G Server and includes the IEs as listed in table 8.3.2-1 in the request; or as shown in figure 8.3.2-2, the Application Server sends an API request to the MSGin5G Server for sending an MSGin5G message, the API request includes the IEs as listed in table 8.3.2-1.\nNOTE:\tIf the value of the Store and forward flag IE in the MSGin5G message request indicates that store and forward services are requested by the sender, the procedure in 8.3.6 applies instead.\nTable 8.3.2-1: Request to MSGin5G Server for sending MSGin5G message\nInformation element\nStatus\nDescription\nOriginating UE Service ID/AS Service ID\nM\nThe service identity of the sending MSGin5G Client, Legacy 3GPP UE, Non-3GPP UE or the sending Application Server.\nRecipient UE Service ID/AS Service ID\n(see NOTE 1, NOTE 2)\nO\nThe service identity of the receiving MSGin5G Client, Legacy 3GPP UE, Non-3GPP UE or the receiving Application Server.\nThis IE is mandatory for Point-to-Point messaging, AS-to-Point messaging, AOMT messaging and MOAT messaging and is not present in other message scenarios.\nGroup Service ID\n(see NOTE 1)\nO\nThe service identifier of the target MSGin5G Group.\nThis IE is mandatory for a Group Message and is not present in other message scenarios.\nBroadcast Area ID\n(see NOTE 1)\nO\nThe service identifier of the Broadcast Service Area where the message needs to be broadcast.\nThis IE is mandatory in the Broadcast Message and is not present in other message scenarios.\nMessaging Topic (see NOTE 1)\nO\nIndicates which Messaging Topic this message is related to.\nThis IE is mandatory for a message distribution based on topic and is not present in other message scenarios.\nApplication ID\nO\nIdentifies the application(s) for which the payload is intended.\nThis list of Application IDs IE is required when the message is sent to one or multiple Application Clients served by same MSGin5G Client.\nThis list of Application IDs IE may be included when the message is sent to an Application Server or to an Application Client.\nMSGin5G Server is unaware of the content.\nMessage ID\nM\nUnique identifier of this message.\nDelivery status required\nO\nIndicates if delivery acknowledgement from the recipient is requested.\nPayload\nO\nPayload of the message.\nMSGin5G Server/Client is unaware of the content.\nIf the request is sent from MSGin5G Client or Message Gateway to the MSGin5G Server, the maximum size of this IE is a configurable value that shall not exceed 2048 octets.\nPriority type (see NOTE 3)\nO\nApplication priority level requested for this message. The application priority levels include High, Normal and Low. The default Priority type of an MSGin5G message is Normal.\nMessage is segmented\nO\nIndicates this message is part of a segmented message.\nSegmentation set identifier\nO\nAll segmented messages associated within the same set of segmented messages (i.e. associated with the same MSGin5G message) are assigned the same unique identifier.\nMandatory IE to be present in every segmented message.\nTotal number of message segments\nO\nIndicates the total number of segments for the message.\nThe Total Segments needs to be included only in the first segment of the message.\nMessage segment number\nO\nAn incrementing message segment number that indicates segmented message number of each segmented message within a set of segmented messages\nLast segment flag\nO\nAn indicator of whether this segmented message is the last segment in the set of segmented messages or not.\nThe Last Segment Flag needs to be included only in the last segment of the message. Message segment number of the segment with \"Last Segment Flag\" set can be considered as total segments.\nStore and forward flag\nM\nAn indicator of whether store and forward services are requested for this message. If the value indicates that store and forward services are requested by the sender, the store and forward procedure in clause 8.3.6 applies.\nStore and forward parameters\nO\nParameters used by MSGin5G Server for providing store and forward services, as detailed in table 8.3.2-2. This IE shall be included only if the value of the Store and forward flag IE indicates that store and forward services are requested. The MSGin5G store and forward procedure is detailed in clause 8.3.6.\nNOTE 1:\tOnly one of these IEs shall be included to represent the type of message request. The MSGin5G Client may construct the related IEs based on the information received from Application Client, e.g. adds the MSGin5G service domain.\nNOTE 2:\tWhen the originator is an Application Server, (i.e. Originating AS Service ID is present), this IE shall be a UE Service ID.\nNOTE 3:\tThe MSGin5G message with high priority should not be aggregated. The other usages of the priority level of the message is implementation specific and is out of scope of this document.\nTable 8.3.2-2: Store and forward parameters\nValue\nStatus\nDescription\nMessage expiration time\nO\nIndicates message expiration time used for providing store and forward services if the destination is not available for communications, The MSGin5GServer attempts delivery at or before the message expiration time, or when the recipient becomes available.\nApplication specific store and forward information\nO\nApplication specific information about store and forward handling, e.g. a delivery time/date.\n3.\tThe MSGin5G Server verifies that the sender is authorized to send the message and checks the integrity of the message.\nIf the received MSGin5G message request is for a Group Message, the MSGin5G Server shall generate an individual message to all group members (excluding the message originator) with additional Recipient UE Service ID to each individual message as shown in table 8.3.3-1.\nIf the received MSGin5G message is a Message Topic message, the MSGin5G Server shall generate an individual message to all subscribers subscribing this message topic (excluding the message originator) with additional Recipient UE Service ID to each individual message as shown in table 8.3.3-1.\n4.\tThe MSGin5G Server may send a Message response to the originating entity if the message is rejected or stored and includes the IEs as listed in table 8.3.2-3 in the response.\nTable 8.3.2-3: Message response\nInformation element\nStatus\nDescription\nOriginating UE Service ID/AS Service ID\nM\nThe identity of the MSGin5G Client, Legacy 3GPP UE, Non-3GPP UE or the identity of the Application Server that initiated the Request that is being responded to.\nMessage ID\nM\nIdentifier of the Request that is being responded to.\nSegment set identifier\nO\nIncluded in the message response if the originating message was a segmented message.\nDelivery Status\nO\nIndicates if delivery is a failure, or if the message is stored for deferred delivery.\nFailure Cause\nO\nThe reason for failure",
      "chunk_type": "procedure",
      "cross_references": [
        "clause_9.1.1.1",
        "clause_8.3.6",
        "table_8.3.2-1",
        "table_8.3.2-2",
        "table_8.3.3-1",
        "table_8.3.2-3",
        "figure_8.3.2-1",
        "figure_8.3.2-2",
        "figure_8.3.2-3"
      ]
    },
    {
      "chunk_id": "ts_23.554_8.3.3",
      "section_id": "8.3.3",
      "section_title": "MSGin5G messages termination procedure",
      "content": "Figure 8.3.3-1 shows the procedure for the MSGin5G Server that delivers an MSGin5G message.\nFigure 8.3.3-1: MSGin5G message towards UE\nFigure 8.3.3-2 shows the same procedure (step 1 only), however for the MSGin5G Server that delivers the message to an Application Server by application request.\nFigure 8.3.3-2: Message towards an Application Server\nFigure 8.3.3-3 shows the procedure for the MSGin5G Server that delivers an MSGin5G message to a Legacy 3GPP Message Gateway, a Non-3GPP Message Gateway, or a Broadcast Message Gateway.\nFigure 8.3.3-3: MSGin5G message towards a Message Gateway\nThe following procedure applies to the above figures 8.3.3-1, 8.3.3-2 and 8.3.3-3 with the exception that step 2 only applies to figure 8.3.3-1.\n1.\tThe MSGin5G Server delivers the received MSGin5G message as listed in table 8.3.3-1.\nTable 8.3.3-1: MSGin5G message request from MSGin5G Server\nInformation element\nStatus\nDescription\nOriginating UE Service ID/AS Service ID\nM\nThe service identity of the originating MSGin5G Client, Legacy 3GPP UE, Non-3GPP UE or the originating Application Server.\nRecipient UE Service ID/AS Service ID\nO\nThe service identity of the receiving entity.\nFor Group messaging, this IE can be a Recipient UE Service ID only. This IE is fetched from the participant information of the recipient in the group profile.\nFor message delivery based on Messaging Topic subscription, this IE is the UE Service ID/AS Service ID of the Messaging Topic subscriber.\nBroadcast Area ID\nO\nThe identifier of the Service Area where the message needs to be broadcast.\nApplication ID\nO\nIdentifies the application for which the payload is intended.\nMessage ID\nM\nUnique identifier of this message.\nDelivery status required\nO\nIndicates if delivery acknowledgement from the recipient is requested.\nPayload\nO\nPayload of the message.\nMessage is segmented\nO\nIndicates this message is part of a segmented message.\nGroup Service ID\nO\nThe service identifier of a Group.\nMessaging Topic\nO\nIndicates which Messaging Topic this message is related to.\nSegmentation Set Identifier\nO\nAll segmented messages associated within the same set of segmented messages (i.e. associated with the same MSGin5G message) are assigned the same unique identifier.\nTotal number of message segments\nO\nIndicates the total number of segments for the message.\nThe Total Segments needs to be included only in the first segment of the message.\nMessage segment number\nO\nAn incrementing message segment number that indicates segmented message number of each segmented message within a set of segmented messages.\nLast Segment Flag\nO\nAn indicator of whether this segmented message is the last segment in the set of segmented messages or not.\nThe Last Segment Flag needs to be included only in the last segment of the message. Message segment number of the segment with \"Last Segment Flag\" set can be considered as total segments.\nPriority type\nO\nApplication priority level requested by the message originator for this message.",
      "chunk_type": "procedure",
      "cross_references": [
        "table_8.3.3-1",
        "figure_8.3.3-1",
        "figure_8.3.3-2",
        "figure_8.3.3-3"
      ]
    },
    {
      "chunk_id": "ts_23.554_8.3.4",
      "section_id": "8.3.4",
      "section_title": "MSGin5G message delivery status report into the MSGin5G Server",
      "content": "Figure 8.3.4-1 shows the procedure for an MSGin5G UE that initiates an MSGin5G message delivery status report.\nFigure 8.3.4-1: Message delivery status report from MSGin5G UE\nFigure 8.3.4-2 shows the procedure for an Application Server that initiates an API request for MSGin5G message delivery status report specified in clause 9.1.1.4 to UE.\nFigure 8.3.4-2: Message delivery status report from Application Server\nFigure 8.3.2-3 shows the procedure for a Legacy 3GPP Message Gateway or a Non-3GPP Message Gateway that sends an MSGin5G message delivery status report to the MSGin5G Server on behalf of a Legacy 3GPP UE or Non-3GPP UE.\nFigure 8.3.4-3: Message delivery status report from Message Gateway (on behalf of Non-MSGin5G UE)\nPre-conditions:\n1.\tThe sender of an MSGin5G message has asked for a message delivery status report.\nProcedures:\nThe following procedure applies to the above figures 8.3.4-1, 8.3.4-2 and 8.3.4-3 with the exception that step 1 only applies to figure 8.3.4-1.\n1.\tThe Application Client in the MSGin5G UE sends a request to the MSGin5G Client for invoking the MSGin5G Client to send an MSGin5G message delivery status report to a recipient.\nEditor's note:\tWhether the APIs provided by the MSGin5G Client to the Application Client is to be specified in another clause of the TS is FFS.\n2.\tAs shown in figure 8.3.4-1 or 8.3.4-3, the MSGin5G Client or Message Gateway sends the MSGin5G message delivery status report to the MSGin5G Server and includes the IEs as listed in table 8.3.4-1, or as shown in figure 8.3.4-2, the Application Server sends an API request to the MSGin5G Server for sending an MSGin5G message, the API request includes the IEs as listed in table 8.3.4-1.\nTable 8.3.4-1: Message delivery status report to MSGin5G Server\nInformation element\nStatus\nDescription\nOriginating UE Service ID/AS Service ID\nM\nThe service identity of the sending MSGin5G Client, Legacy 3GPP UE, Non-3GPP UE or the sending Application Server.\nRecipient UE Service ID/AS Service ID (NOTE)\nM\nThe service identity of the receiving MSGin5G Client, Legacy 3GPP UE, Non-3GPP UE or the receiving Application Server.\nThis is the sender of the message that this message delivery status report is for.\nMessage ID\nM\nUnique identifier of message delivery status report.\nThe message ID of the MSGin5G message that is being acknowledged is included in this IE.\nFailure Cause\nO\nThe Failure Cause indicates the failure reason, if applicable.\nDelivery Status\nM\nThe delivery status description, including success or failure in delivery\nNOTE:\tWhen the originator is an Application Server, (i.e. Originating AS Service ID is present), this IE shall be a UE Service ID.\n3.\tThe MSGin5G Server verifies that the sender is authorized to send the message delivery status report.\n4.\tThe MSGin5G Server may send a response to the originating entity if the message delivery status report is rejected and includes the IEs as listed in table 8.3.2-3 in the response.",
      "chunk_type": "general",
      "cross_references": [
        "clause_9.1.1.4",
        "table_8.3.4-1",
        "table_8.3.2-3",
        "figure_8.3.4-1",
        "figure_8.3.4-2",
        "figure_8.3.2-3",
        "figure_8.3.4-3"
      ]
    },
    {
      "chunk_id": "ts_23.554_8.3.5",
      "section_id": "8.3.5",
      "section_title": "MSGin5G message delivery status report from the MSGin5G Server",
      "content": "Figure 8.3.5-1 shows the procedure for the MSGin5G Server that forwards an MSGin5G message delivery status report to an MSGin5G UE.\nFigure 8.3.5-1: Message delivery status report towards an MSGin5G UE\nFigure 8.3.5-2 shows the procedure for the MSGin5G Server that forwards an MSGin5G message delivery status report to an Application Server.\nFigure 8.3.5-2: Message delivery status report towards an Application Server\nFigure 8.3.5-3 shows the procedure for the MSGin5G Server that forwards an MSGin5G message delivery status report to a Legacy 3GPP Message Gateway or a Non-3GPP Message Gateway.\nFigure 8.3.5-3: Message delivery status report towards a Message Gateway\nThe following procedure applies to the above figures 8.3.5-1, 8.3.5-2 and 8.3.5-3 with the exception that step 2 only applies to figure 8.3.5-1.\n1.\tthe MSGin5G Server sends the MSGin5G message delivery status report to the MSGin5G UE or Message Gateway and includes the IEs as listed in table 8.3.5-1, or as shown in figure 8.3.5-2 and figure 8.3.5-3, the MSGin5G Server sends an API request to the Application Server for sending an MSGin5G message, the API request includes the IEs as listed in table 8.3.5-1.\nTable 8.3.5-1: Message delivery status report to MSGin5G Server\nInformation element\nStatus\nDescription\nOriginating UE Service ID/AS Service ID\nM\nThe service identity of the sending MSGin5G Client, Legacy 3GPP UE, Non-3GPP UE or the sending Application Server.\nRecipient UE Service ID/AS Service ID (see NOTE)\nM\nThe service identity of the receiving MSGin5G Client, Legacy 3GPP UE, Non-3GPP UE or the receiving Application Server.\nThis is the sender of the message that this message delivery status report is for.\nMessage ID\nM\nUnique identifier of message delivery status report.\nThe message ID of the MSGin5G message that is being acknowledged is included in this IE.\nFailure Cause\nO\nThe Failure Cause indicates the failure reason, if applicable.\nDelivery Status\nM\nThe delivery status description, including success or failure in delivery.\nNOTE:\tWhen the originator is an Application Server, (i.e. Originating AS Service ID is present), this IE shall be a UE Service ID.\n2.\tThe MSGin5G Client sends the MSGin5G message delivery status report to Application Client.",
      "chunk_type": "general",
      "cross_references": [
        "table_8.3.5-1",
        "figure_8.3.5-1",
        "figure_8.3.5-2",
        "figure_8.3.5-3"
      ]
    },
    {
      "chunk_id": "ts_23.554_8.3.6",
      "section_id": "8.3.6",
      "section_title": "MSGin5G Store and Forward",
      "content": "Figure 8.3.6-1 shows the procedure for providing store and forward services for MSGin5G message requests.\nThis procedure applies when an MSGin5G message is received at the MSGin5G Server for delivery and the message cannot be delivered to the recipient UE; otherwise, the procedure detailed in clause 8.3.2 applies.\nPre-conditions:\n1.\tThe MSGin5G Client or Application Server has registered to the MSGin5G Server.\n2.\tThe MSGin5G Server has determined that the recipient UE is not available.\nNOTE:\tIn addition to UE registration status, the MSGin5G Server can use e.g, UE reachability status monitoring specified in clause 8.9.2 or the recipient's Communication Availability information specified in clause 8.2 to determine whether the recipient is available and reachable for message delivery.\nFigure 8.3.6-1: Store and forward procedure\n1.\tMSGin5G message origination handling, see steps 1-3 in clause 8.3.2. The value of the Store and forward flag IE (see Table 8.3.2-1) in the MSGin5G message indicates that store and forward services are requested by the sender.\n2.\tThe MSGin5G Server checks the registration information of the recipient UE. If the Store and forward option IE (see Table 8.2.1-3) indicates that the recipient UE opts out of store and forward services, the message is discarded and the procedure proceeds with step 4 and ends with step 4. If the Store and forward flag IE (see Table 8.3.2-1) in the received message indicates that store and forward services are not requested by the sender, the message is discarded and the procedure proceeds with step 4 and ends with step 4.\nIf store and forward processing is required, the MSGin5G Server uses the Application specific store and forward information IE (see Table 8.3.2-2) to determine storage and forwarding.\n3.\tBefore the Message expiration time is expired, the MSGin5G Server may trigger the Recipient UE based on the MSGin5G device triggering procedure in clause 8.9.3.\n4.\tThe MSGin5G Server may send a message response as defined in table 8.3.2-3 which includes store and forward status information in the Delivery Status IE, e.g., that the delivery had been deferred, or has been discarded.\n5.\tThe recipient UE becomes available.\n6.\tWhen the recipient UE becomes available, the MSGin5G Server attempts delivery of the request using the procedure specified in clause 8.3.3.\nIf the UE does not become available prior to the expiration time, the MSGin5G Server attempts delivery of the request at the message expiration time and the stored message is discarded or apply local implementation afterwards.\n7.\tThe MSGin5G Server may send a message response as defined in table 8.3.2-3 which includes store and forward status information in the Delivery Status IE, e.g., that the message was discarded.",
      "chunk_type": "general",
      "cross_references": [
        "clause_8.3.2",
        "clause_8.9.2",
        "clause_8.2",
        "clause_8.9.3",
        "clause_8.3.3",
        "table_8.3.2-1",
        "table_8.2.1-3",
        "table_8.3.2-2",
        "table_8.3.2-3",
        "figure_8.3.6-1"
      ]
    },
    {
      "chunk_id": "ts_23.554_8.4.1",
      "section_id": "8.4.1",
      "section_title": "General",
      "content": "Based on maximum segment size allowed to transmit over available transport, the MSGin5G Service can optimize communications by aggregating one or more messages towards the same target. The target may be an UE, an Application Server, a Broadcast Area, an MSGin5G Group or a Messaging Topic.\nThe following pre-conditions apply for message aggregation:\n1.\tThe recipient UE(s) support an MSGin5G Client or the (Legacy-3GPP and non-3GPP) Message Gateway supports the MSGin5G Client capability.\n2.\tThe MSGin5G Client 1 and MSGin5G Client 2 are registered with the MSGin5G Server, or an Application Server has established a secured communication with the MSGin5G Server.",
      "chunk_type": "definition",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.554_8.4.2",
      "section_id": "8.4.2",
      "section_title": "Message Aggregation at MSGin5G Client",
      "content": "Figure 8.4.2-1 shows the procedure for an MSGin5G Client aggregating a set of Point-to-Point messages each carrying small amounts of data. All of the Point-to-Point messages to be aggregated are targeted to the same UE.\nNOTE 1:\tAggregation of multiple messages can also be done with the Application Client; in this case it is implementation specific and out of the scope of the current specification.\nFigure 8.4.2-1: MSGin5G UE aggregates messages towards target MSGin5G UE\nFigure 8.4.2-2 shows the procedure for an MSGin5G Client aggregating a set of Point-to-AS messages each carrying small amounts of data. All of the Point-to-AS messages to be aggregated are sent to same Application Server.\nFigure 8.4.2-2: MSGin5G UE aggregates messages towards target Application Server\nFigure 8.4.2-3 shows the procedure for an MSGin5G Client aggregating a set of Point-to-Point messages each carrying small amounts of data. All of the Point-to-Point messages to be aggregated are sent to same recipient Non-MSGin5G UE.\nFigure 8.4.2-3: MSGin5G UE aggregates messages towards target Non-MSGin5G UE\nFigure 8.4.2-4 shows the procedure for an MSGin5G Client sends aggregated message to a MSGin5G group. All of the messages to be aggregated are sent to same MSGin5G Group.\nFigure 8.4.2-4: MSGin5G UE sends aggregated messages towards target MSGin5G Group\nFigure 8.4.2-5 shows the procedure for an MSGin5G Client sends aggregated message based on Messaging Topic. All the messages to be aggregated have the same Messaging Topic.\nFigure 8.4.2-5: MSGin5G UE sends aggregated messages towards target MSGin5G Group\nFigure 8.4.2-6 shows the procedure for an MSGin5G Client aggregating a set of Broadcast messages each carrying small amounts of data. All of the Broadcast messages to be  aggregated are sent to same Broadcast Area.\nFigure 8.4.2-6: MSGin5G UE aggregates messages towards target Broadcast Area\nThe following procedure applies to the above figures 8.4.2-1 to 8.4.2-6 with the exception that:\na)\tstep 4a only applies to figure 8.4.2-4\nb)\tstep 7a only applies to figure 8.4.2-1 and figure 8.4.2-4;\nc)\tstep 7b only applies to figure 8.4.2-3. and figure 8.4.2-4; and\nd)\tstep 7c only applies to figure 8.4.2-6.\n1.\tApplication Client(s) initiates a request to the MSGin5G Client 1 to send a message to another target. The target may be an MSGin5G UE, a Non-MSGin5G UE, an Application Server, a MSGin5G group, or a broadcast area. the Application Client(s) may also initiate a request to the MSGin5G Client 1 to send a message which  is to be delivered based on Messaging Topic.\n2.\tThe MSGin5G Client 1 checks if aggregation is allowed for this message as per the service configuration. The MSGin5G Client 1 also checks the message data size and the priority level to determine if the received message can be aggregated. For example, MSGin5G Client 1 finds that the message has a small payload size when compared to the maximum segment size that can be transmitted over available transport and is not high priority message (i.e. the value of Priority type included in the message is not \"High\"), the MSGin5G Client 1 may aggregate this message. The MSGin5G Client 1 may continue aggregating messages until an optimal segment size is reached before sending the aggregated message. When the aggregation is finished, e.g. the optimal segment size is reached or other conditions such as waiting time configured by service provider is fulfilled, the MSGin5G Client sends the aggregated message as per scheduling policy towards a selected target.\nNOTE 2:\tThe condition(s) when the aggregation is needed to be finished is implementation specific.\nNOTE 3:\tThe configuration of whether aggregation is allowed for MSGin5G messages and how the MSGin5G Client 1 uses information such as individual message priority, maximum time to wait, etc for aggregating and sending is out of scope of the present document.\nNOTE 4:\tThe maximum segment size that can be transmitted over available transport is configured to the MSGin5G Client 1 in the MSGin5G Service specific information IE as specified in Table 8.1.2-2.\n3.\tThe MSGin5G Client 1 aggregates multiple MSGin5G message requests intended for a selected target and sends the Aggregated message request containing the information elements specified in Table 8.4.2-1 and Table 8.4.2-2 according to scheduling policy towards the MSGin5G Server.\nTable 8.4.2-1: Aggregated message request (MSGin5G Client to MSGin5G Server)\nInformation element\nStatus\nDescription\nOriginator UE Service ID\nM\nThe service identity of the sending MSGin5G Client.\nRecipient UE Service ID/AS Service ID (see NOTE)\nO\nThe service identity of the receiving MSGin5G Client or the receiving Application Server.\nGroup Service ID\n(see NOTE)\nO\nThe service identifier of the target MSGin5G Group.\nMessaging Topic (see NOTE)\nO\nIndicates which Messaging Topic this message is related to.\nBroadcast Area ID (see NOTE)\nO\nThe service identifier of the Broadcast Area where the message needs to be broadcast.\nMessage ID\nM\nUnique identifier of this aggregated message\nNumber of individual messages\nM\nIndicates total number of messages which are aggregated into this message\nList of individual messages\nM\nEach element in this list contains information elements as specified in Table 8.4.2-2.\nStore and forward flag\nO\nAn indicator of whether store and forward services are requested for this aggregated message. The store and forward services can be applied to the aggregated message only if all messages in this aggregated message can be store and forwarded.\nStore and forward parameters\nO\nParameters used by MSGin5G Server for providing store and forward services, as detailed in table 8.3.2-2. This IE shall be included only if the value of the Store and forward flag IE indicates that store and forward services are requested.\nNOTE\tOnly one of these IEs shall be included to represent the type of message request.\nTable 8.4.2-2: Individual message data\nInformation element\nStatus\nDescription\nIndividual Message ID\nM\nUnique identifier of this individual message.\nApplication ID\nO\nIdentifies the application for which the payload is intended.\nDelivery status required\nO\nIndicates if delivery acknowledgement from the recipient is requested.\nPayload\nM\nPayload of the message\nPriority type\nO\nApplication priority level requested for this message as specified in Table 8.3.2-1 except that the value of this IE should not be High.\nNOTE 5:\tTotal size of Aggregated message request is less than or equal to maximum segment size allowed to be transmitted over available transport.\n4.\tMSGin5G Server checks whether the MSGin5G Client 1 is authorized to send the Aggregated message request.\n4a\tThe MSGin5G Server performs the necessary message exchanging procedure with the Application Server as per clause 8.7.4.2.\n5.\tThe MSGin5G Server sends the Aggregated message response to the MSGin5G Client 1 in the cases listed below. The information elements defined in Table 8.4.2-3 shall be included in the response.:\na)\tMSGin5G Client 1 is not authorized to send Aggregated message request; or\nb)\tthe Aggregated message request is not valid; or\nc)\tif MSGin5G Client 1 is authorized but the message is stored for deferred delivery.\nTable 8.4.2-3: Aggregated message response (MSGin5G Server to MSGin5G Client)\nInformation element\nStatus\nDescription\nOriginal MSGin5G Client ID\nM\nThe identity of the MSGin5G Client sending the original message.\nMessage ID\nM\nUnique identifier of the original aggregated message\nDelivery Status\nO\nIndicates if delivery is a failure, or if the message is stored for deferred delivery.\nFailure Cause\nO\nThis IE contains the failure reason, e.g. the originator is not authorized to send a message request or one of the multiple messages aggregated has an issue, may be included in this IE.\n6.\tIf MSGin5G Client 1 is authorized to send an Aggregated message request, the MSGin5G Server sends the Aggregated message request towards the selected target as specified in clause 8.3.3. If the aggregated message is sent to a recipient whose supported message segment size is smaller than the aggregated message, the MSGin5G Server should remove the last individual message in the List of individual messages element from the aggregated message until the aggregated message is smaller than the maximum segment size that can be transmitted over available transport. The MSGin5G messages removed from the aggregated message may be sent individually or aggregated again by the MSGin5G Server according to service configuration.\n7a.\tIf the recipient of the aggregated message is MSGin5G UE 2, the MSGin5G Client 2 in the MSGin5G UE 2 splits the received Aggregated message request into multiple individual MSGin5G message requests. The content of each MSGin5G message is delivered to the recipient Application Client(s).\nNOTE 6:\tThe delivery between MSGin5G Client and Application Client is out of scope of the present document.\n7b.\tIf the recipient of the aggregated message is a Message Gateway on behalf of Non-MSGin5G UE, the Message Gateway splits the received Aggregated message request into multiple individual MSGin5G message requests. The content of each MSGin5G message is delivered to the Non-MSGin5G UE via Non-MSGin5G message delivery.\nNOTE 7:\tThe Non-MSGin5G message delivery is out of scope of this document.\n7c. If the aggregated message needs to be delivered in the Broadcast Area, the Broadcast Message Gateway splits the received Aggregated message request into multiple individual MSGin5G message requests. The Broadcast Message Gateway broadcasts each individual MSGin5G message request to the MSGin5G UEs in the Broadcast Area, or broadcasts the content of each individual MSGin5G message request to the non-MSGin5G UEs in the Broadcast Area via CBCF. The procedures on CBCF are specified in 3GPP TS 23.041 [14].\n8.\tThe recipient MSGin5G Client/ Application Server/ Message Gateway may initiate sending a message delivery status report, if requested in the original message that is received as in Step 7a (for MSGin5G UE), step 7b (for Non-MSGin5G UE) or Step 6 (for Application Server). MSGin5G Client 2/ Application Server/ Message Gateway sends the message delivery status report towards the MSGin5G Client on MSGin5G UE 1 via MSGin5G Server.\nNOTE 8:\tThe message delivery status reports can also be aggregated into a single message.",
      "chunk_type": "general",
      "cross_references": [
        "clause_8.7.4.2",
        "clause_8.3.3",
        "table_8.1.2-2",
        "table_8.4.2-1",
        "table_8.4.2-2",
        "table_8.3.2-2",
        "table_8.3.2-1",
        "table_8.4.2-3",
        "figure_8.4.2-1",
        "figure_8.4.2-2",
        "figure_8.4.2-3",
        "figure_8.4.2-4",
        "figure_8.4.2-5",
        "figure_8.4.2-6",
        "ts_23.041"
      ]
    },
    {
      "chunk_id": "ts_23.554_8.4.3",
      "section_id": "8.4.3",
      "section_title": "Message aggregation at MSGin5G Server",
      "content": "Figure 8.4.3-1 shows the procedure for the MSGin5G Server aggregating a set of Application-to-Point messages targeted to the same recipient UE, set of group messages for the same MSGin5G group, or a set of messages delivered based on Messaging Topic for the same Messaging Topic, or a set of messages broadcasted to the same Service Area, each carrying a small amount data targeted towards the same target MSGin5G UE(s).\nNOTE 1:\tAggregation of multiple messages can also be done at the Application Server; in this case it is implementation specific and out of the scope of the current specification.\nFigure 8.4.3-1: MSGin5G Server aggregates messages towards target MSGin5G UE\nFigure 8.4.3-2 shows the procedure for MSGin5G Server aggregating a set of Application-to-Point messages targeted to the same recipient UE, or a set of group messages for the same MSGin5G group, or a set of messages delivered based on Messaging Topic for the same Messaging Topic, or a set of messages broadcasted to the same Service Area, each carrying a small amount data targeted towards the same target Non-MSGin5G UE(s).\nFigure 8.4.3-2: MSGin5G Server aggregates messages towards target Non-MSGin5G UE\nFigure 8.4.3-3 shows the procedure for MSGin5G Server aggregating Broadcast messages, each carrying a small amount data targeted towards the target Broadcast Area.\nFigure 8.4.3-3: MSGin5G Server delivers aggregated message towards Non-MSGin5G UEs in the Broadcast Area\nThe following procedure applies to the above figures 8.4.3-1, 8.4.3-2 and 8.4.3-3 with the exception that step 4a only applies to figure 8.4.3-1, step 4b only applies to figure 8.4.3-2 and step 4c only applies to figure 8.4.3-3.\n1.\tThe Application Server initiates to send a set of Application-to-Point messages targeted to the same recipient UE, or a set of group messages for the same MSGin5G group, or a set of messages delivered based on Messaging Topic for the same Messaging Topic, or a set of messages broadcasted to the same Service Area, and sends the request to MSGin5G Server. The MSGin5G Server executes the MSGin5G messages origination procedure for each message as specified in clause 8.3.2.\n2.\tThe MSGin5G Server checks the message data size and the priority level of each message to determine if these messages, targeted to the same service end-point and of the same message type (i.e., either a set of Application-to-Point messages targeted to the same recipient UE, a set of group messages for the same MSGin5G group, a set of messages delivered based on Messaging Topic for the same Messaging Topic or a set of messages broadcasted to the same Service Area,), can be aggregated. For example, the MSGin5G Server finds that the messages have small payload size when compared to the maximum segment size that can be transmitted over available transport and are not high priority messages (i.e. the value of Priority type included in the message is not \"High\"), which could be sent as per scheduling policy towards a selected target.\nNOTE 2:\tMSGin5G Server decides to continue aggregating messages until optimal use of segment size before sending message towards MSGin5G Client 1.\n3.\tThe MSGin5G Server aggregates multiple MSGin5G message requests intended for the target UE. The Aggregated message request contain the information elements as defined in Table 8.4.3-1 and Table 8.4.2‑2. The MSGin5G Server delivers the Aggregated message request by using the MSGin5G messages termination procedure specified in clause 8.3.3.\nTable 8.4.3-1: Aggregated message request (MSGin5G Server to MSGin5G Client)\nInformation element\nStatus\nDescription\nOriginating AS Service ID\nM\nThe service identity of the sending Application Server.\nRecipient UE Service ID\nO\nThe service identity of the receiving MSGin5G Client.\nThis IE in Mandatory for all type of message request except the broadcast message.\nGroup Service ID (see NOTE)\nO\nThe service identifier of the target MSGin5G Group.\nThis IE should be present if the aggregated message is a set of group messages for the same MSGin5G group.\nMessaging Topic (see NOTE)\nO\nIndicates which Messaging Topic this message is related to.\nThis IE should be present if the aggregated message is a set of message delivered based on Messaging Topic for the same Messaging Topic\nBroadcast Area ID (see NOTE)\nO\nThe identifier of the Service Area where the message needs to be broadcast.\nMessage ID\nM\nUnique identifier of this message\nNumber of individual messages\nM\nIndicates total number of messages which are aggregated into single message\nList of Individual messages\nM\nEach element in this list contains information as specified in Table 8.3.3-1\nNOTE:\tOnly one of these IEs shall be included to represent the type of message request.\nNOTE 3:\tTotal size of Aggregated message request is less than or equal to maximum segment size allowed to transmit over available transport.\n4a.\tIf the recipient of the aggregated message is MSGin5G UE, the MSGin5G Client 1 residing on the MSGin5G UE splits the received Aggregated message request into multiple individual MSGin5G message requests. The content of each MSGin5G message is delivered to the recipient Application Client(s).\nNOTE 4:\tThe delivery between MSGin5G Client and Application Client is out of scope of the present document.\n4b.\tIf the recipient of the aggregated message is the Message Gateway on behalf of Non-MSGin5G UE, the Message Gateway splits the received Aggregated message request into multiple individual MSGin5G message requests. The content of each MSGin5G message is delivered to the Non-MSGin5G UE via Non-MSGin5G message delivery.\nNOTE 5:\tThe Non-MSGin5Gmessage delivery is out of scope of this document.\nNOTE 6:\tThe MSGin5G Server may aggregate messages towards the target UE if it receives messages from multiple MSGin5G UEs (instead of Application Server).\n4c.\tIf the recipient of the aggregated message is a Broadcast Area, the Broadcast Message Gateway split the received aggregated message request into multiple individual MSGin5G message requests. The Broadcast Message Gateway may either broadcast each individual MSGin5G message request to the MSGin5G UEs in the Broadcast Area, or broadcast the content of each individual MSGin5G message request to the non-MSGin5G UEs in the Broadcast Area, via CBCF. The procedures on CBCF are specified in 3GPP TS 23.041 [14].",
      "chunk_type": "general",
      "cross_references": [
        "clause_8.3.2",
        "clause_8.3.3",
        "table_8.4.3-1",
        "table_8.4.2",
        "table_8.3.3-1",
        "figure_8.4.3-1",
        "figure_8.4.3-2",
        "figure_8.4.3-3",
        "ts_23.041"
      ]
    },
    {
      "chunk_id": "ts_23.554_8.5.1",
      "section_id": "8.5.1",
      "section_title": "General",
      "content": "This clause introduces MSGin5G message segmentation and reassembly functionality to the MSGin5G Service.\nSegmentation and reassembly operations are performed by the MSGin5G Server, or by the MSGin5G Client, or by the Message Gateway, depending on the communication models. For Application-to-Point use case, the MSGin5G Server performs MSGin5G message segmentation while the MSGin5G Client performs MSGin5G message reassembly. For Point-to-Application use case, the MSGin5G Client performs MSGin5G message segmentation while the MSGin5G Server performs MSGin5G message reassembly. For the Point-to-Point use case the MSGin5G Client performs both the segmentation and the reassembly.\nThe Message Gateway performs segmentation and reassembly if the sender or the recipient is a non-MSGin5G UE.\nThe Aggregated message request should not be segmented. If aggregated message is sent to a recipient whose supported message segment size is smaller than the payload of aggregated message, the MSGin5G Server should handle the Aggregated message as specified in clause 8.4.2.\nThe maximum segmentation size of the payload of MSGin5G message is 2048 bytes and can be configurable. The supported segment size for an MSGin5G UE may be provided in the MSGin5G UE registration request.",
      "chunk_type": "definition",
      "cross_references": [
        "clause_8.4.2"
      ]
    },
    {
      "chunk_id": "ts_23.554_8.5.2",
      "section_id": "8.5.2",
      "section_title": "Application-to-Point Segmentation and Reassembly",
      "content": "Figure 8.5.2-1 shows the MSGin5G message segmentation and reassembly procedure for Application-to-Point MSGin5G message use cases (e.g. AOMT).\nNOTE 1:\tSegmentation can also be done by the Application Server, in this case the Application Server will create a segmented message and send it as a regular MSGin5G message. In this case it is implementation specific and out of the scope of the current specification.\nPre-conditions:\n1.\tA UE hosts an MSGin5G Client and an Application Client.\n2.\tThe MSGin5G Client has registered with the MSGin5G Server.\n3.\tAn Application Server needs to deliver application data to the Application Client on the UE and the size of the application data exceeds the maximum allowed packet size (e.g. due to limitation by the UE's access network transport).\n4.\tBoth the Application Server and the MSGin5G UE are hosted by the same MSGin5G Server.\nFigure 8.5.2-1: Application-to-Point MSGin5G Message Segmentation and Reassembly\n1.\tAn Application Server sends a message to an MSGin5G Server that targets an Application Client on a UE.\n2.\tThe MSGin5G Server compares the size of the payload of the received message to the Supported MSGin5G segment size of the targeted UE and detects that the size exceeds the limit. As a result, the MSGin5G Sever segments the received message into a set of segmented messages. Within each segmented message, the information elements defined in Table 8.3.3-1 are included to enable the MSGin5G Client on the targeted UE to reassemble the segmented messages, with following clarifications.\na)\tThe MSGin5G message request includes following information elements from Table 8.3.3-1:\ni)\tOriginating AS Service ID, Recipient UE Service ID, Message ID, Segmentation Set Identifier and Message segment number in each segmented message\nii)\tDelivery status required and Total number of message segments, only if it is the first segment of the message\niii)\tLast Segment Flag, only if it is the last segment of the message.\n3.\tThe MSGin5G Server sends each segmented message to the targeted UE. If any segment is not received within the expected time (based on configuration) then proceed to step 4.\n4.\tIf MSGin5G Client has received all segments (determined based on First segment and Last Segment), the MSGin5G Client reassembles all the segmented messages into a single MSGin5G message based on the information elements mentioned in step 2. If not all segments are received within expected time, then the MSGin5G Client recovers the segments as described in clause 8.5.6 MSGin5G message segment recovery procedure, before continuing with rest of the steps.\nNOTE 2:\tWhen no further segments are received within expected time and if both first segment and last segment are missing, recovery can be initiated as described in clause 8.5.6 MSGin5G message segment recovery procedure for recovering the first segment and then for remaining segments.\n5.\tThe MSGin5G Client sends Message received confirmation request to the MSGin5G Server. The information elements defined in Table 8.5.2-2 are included in the request. The result information element will contain \"success\" if the reassembly of the segments is success. Otherwise, the result information element will contain \"failure\".\nTable 8.5.2-2: Message Received Confirmation Request Information Elements\nInformation element\nStatus\nDescription\nSegmentation Set Identifier\nM\nThe Segmentation Set Identifier as received in segments.\nResult\nM\nIndicates the \"success\" or \"failure\"\n6.\tIf reassembly of segments is successful, the MSGin5G Client delivers the contents of the MSGin5G message to the targeted Application Client. If MSGin5G Client has not received all messages (even after recovery procedure) or reassembly of segments failed for any reason (e.g. corrupt data) then the MSGin5G Client will notify receiving of a failed message to the Application Client.",
      "chunk_type": "general",
      "cross_references": [
        "clause_8.5.6",
        "table_8.3.3-1",
        "table_8.5.2-2",
        "figure_8.5.2-1"
      ]
    },
    {
      "chunk_id": "ts_23.554_8.5.3",
      "section_id": "8.5.3",
      "section_title": "Point-to-Application Message Segmentation and Reassembly",
      "content": "Figure 8.5.3-1 shows the MSGin5G message segmentation and reassembly procedure for Point-to-Application MSGin5G message use cases (e.g. MOAT).\nPre-conditions:\n1.\tA UE hosts an MSGin5G Client and an Application Client.\n2.\tThe MSGin5G Client registered with the MSGin5G Server.\n3.\tAn Application Client on the UE needs to deliver application data to an Application Server and the size of the application data exceeds the maximum allowed packet size (e.g. due to limitation by the UE's access network transport).\n4.\tBoth the Application Server and the MSGin5G UE are hosted by the same MSGin5G Server.\nFigure 8.5.3-1: Point-to-Application MSGin5G Message Segmentation and Reassembly\n1.\tAn Application Client on a UE sends a message to an MSGin5G Client that targets an Application Server and that has a size that exceeds the maximum allowed packet size.\n2.\tThe MSGin5G Client compares the size of the payload of the received message to its Supported MSGin5G segment size for message delivery to the MSGin5G Server and detects that the size exceeds the limit. As a result, the MSGin5G Client segments the received message into a set of segmented messages such that each segmented message can fit within the Supported MSGin5G segment size. Within each segmented message, the information elements defined in Table 8.3.2-1 are included to enable the MSGin5G Server to reassemble the segmented messages, with following clarifications.\na)\tThe MSGin5G message request includes following information elements from Table 8.3.2-1:\ni)\tOriginating UE Service ID, Recipient AS Service ID, Message ID, Segmentation set identifier and Message segment number in each segmented message\nii)\tDelivery status required and Total number of message segments, only if it is the first segment of the message\niii)\tLast segment flag, only if it is the last segment of the message.\n3.\tThe MSGin5G Client sends each segmented message to the MSGin5G Server. If any segment is not received within the expected time (based on configuration) then proceed to step 4.\n4.\tIf MSGin5G Server has received all segments (determined based on first segment and last Segment), the MSGin5G Server reassembles all the segmented messages into a single MSGin5G message based on the information elements mentioned in step 2. If not all segments are received within expected time, then the MSGin5G Server recovers the segments as described in clause 8.5.6 MSGin5G message segment recovery procedure, before continuing with rest of the steps.\nNOTE 1:\tWhen no further segments are received within expected time and if both first segment and last segment are missing, recovery can be initiated as described in clause 8.5.6 MSGin5G message segment recovery procedure for recovering the first segment and then for remaining segments.\n5.\tThe MSGin5G Server sends a Message received confirmation to the MSGin5G Client. The information elements defined in Table 8.3.2-3 are included in the request.\n6.\tIf reassembly of segments is successful, the MSGin5G Server delivers the contents of the MSGin5G message to the targeted Application Server. If MSGin5G Server has not received all messages (even after recovery procedure) or reassembly of segments failed for any reason (e.g. corrupt data) then the MSGin5G Server will notify receiving of a failed message to the Application Server.",
      "chunk_type": "general",
      "cross_references": [
        "clause_8.5.6",
        "table_8.3.2-1",
        "table_8.3.2-3",
        "figure_8.5.3-1"
      ]
    },
    {
      "chunk_id": "ts_23.554_8.5.4",
      "section_id": "8.5.4",
      "section_title": "Point-to-Point Message Segmentation and Reassembly",
      "content": "Figure 8.5.4-1 shows the MSGin5G message segmentation and reassembly procedure for Point-to-Point MSGin5G message use cases (e.g. MOMT).\nIf the recipient UE is a non-MSGin5G UE, the reassembly is performed by the Message Gateway.\nThis procedure assumes that a UE is only aware of the maximum payload size of the delivery mechanism it is currently using, and it is not aware of the maximum payload size of the recipient UE.\nPre-conditions:\n1.\tBoth UEs host an MSGin5G Client and an Application Client.\n2.\tThe MSGin5G Clients registered with the MSGin5G Server.\n3.\tAn Application Client on the UE needs to deliver application data to an Application Client on another UE and the size of the application data exceeds the allowed maximum packet size (e.g. due to limitation by the UE's access network transport).\n4.\tBoth the sending and the receiving MSGin5G UE are hosted by the same MSGin5G Server.\nFigure 8.5.4-1: Point-to-Point MSGin5G Message Segmentation and Reassembly\n1.\tAn Application Client on UE 1 sends a message to MSGin5G Client 1 that targets Application Client on UE 2.\n2.\tThe MSGin5G Client 1 compares the size of payload of the received message to its Supported MSGin5G segment size  for message delivery to the MSGin5G Server and detects that the size exceeds the limit of the originating UE. As a result, the MSGin5G Client segments the received message into a set of segmented messages such that each segmented message can fit within the Supported MSGin5G segment size.\nThe MSGin5G message request includes following information elements from Table 8.3.2-1:\ni)\tOriginating UE Service ID, Recipient UE Service ID, Message ID, Segmentation set identifier and Message segment number in each segmented message\nii)\tDelivery status required and Total number of message segments, only if it is the first segment of the message\niii)\tLast segment flag, only if it is the last segment of the message.\n3.\tThe MSGin5G Client 1 sends each segmented message to the MSGin5G Server. If any segment is not received within the expected time (based on configuration) then proceed to step 5.\n4.\tThe MSGin5G Server checks if each segment does not exceed the configured maximum packet size of the targeted UE. If the maximum packet size is not exceeded, then the MSGin5G Server proceeds with step 6.\nIf the maximum packet size is exceeded, the MSGin5G Server performs the following operations:\na)\tIf all segments are received within expected time, then the MSGin5G Server reassembles subsequent segmented messages into a single MSGin5G message until the Last segment flag indication is received. The re-assembled message is then segmented such that each segment is smaller than the maximum allowed packet size of the targeted UE. Within each segmented message, the information elements as mentioned in step 2 are included to enable reassembly at the target, then proceed with step 6.\nb)\tIf not all segments are received within expected time, then the MSGin5G Server acts as Message Receiver to recover the segments as described in clause 8.5.6 MSGin5G message segment recovery procedure, before continuing with rest of the steps. If all segments are received after recovery procedure, then the MSGin5G Server skips to step 4-a, otherwise proceed to step 5.\n5.\tThe MSGin5G Server sends Message received confirmation to the MSGin5G Client 1. The information elements defined in Table 8.3.2-3 are included in the request. If the Result information element is \"failure\" further steps are not executed.\n6.\tThe MSGin5G Server sends each segmented message to the MSGin5G Client 2. If any segment as a separate message is not received within the expected time (based on configuration) then proceed to step 8.\n7.\tThe MSGin5G Client 2 reassembles all the segmented messages into a single MSGin5G message based on the information elements defined mentioned in step 2. If not all segments are received within expected time, then the MSGin5G Client 2 acts as Message receiver to recover the segments as described in clause 8.5.6 MSGin5G message segment recovery procedure, before continuing with rest of the steps.\nNOTE 1:\tSteps 7, 8 and 9 can also be performed by the MSGin5G Client functionality in the Message Gateway in case the recipient UE is a non-MSGin5G UE.\n8.\tThe MSGin5G Client 2 sends Message received confirmation to the MSGin5G Server. The information elements defined in Table 8.5.2-2 are included in the request. The Result information element will contain \"success\" if the reassembly of the segments is successful. Otherwise, the Result information element will contain \"failure\".\n9.\tThe MSGin5G Client 2 delivers the contents of the MSGin5G message to the targeted Application Client. If MSGin5G Client has not received all messages (even after recovery procedure) or reassembly of segments failed for any reason (e.g. corrupt data) then the MSGin5G Client will notify receiving of failed message to Application Client.",
      "chunk_type": "general",
      "cross_references": [
        "clause_8.5.6",
        "table_8.3.2-1",
        "table_8.3.2-3",
        "table_8.5.2-2",
        "figure_8.5.4-1"
      ]
    },
    {
      "chunk_id": "ts_23.554_8.5.5",
      "section_id": "8.5.5",
      "section_title": "Group Message Segmentation and Reassembly",
      "content": "A Group Message is sent from the MSGin5G Server to a group of recipient UEs. The MSGin5G Server sends the message to each individual recipient taking into account the Supported MSGin5G segment size of each recipient and segments the message as described in clause 8.5.4.",
      "chunk_type": "general",
      "cross_references": [
        "clause_8.5.4"
      ]
    },
    {
      "chunk_id": "ts_23.554_8.5.6",
      "section_id": "8.5.6",
      "section_title": "MSGin5G Message Segment Recovery",
      "content": "Figure 8.5.6-1 illustrates an MSGin5G message segmentation recovery procedure. The procedure is applicable to Application-to-Point messages, Point-to-Application messages, Point-to-Point message and Group messages.\nPre-conditions:\n1.\tThe Message sender has delivered segmented messages to Message receiver.\nFigure 8.5.6-1: MSGin5G Message Segmentation and Reassembly\n1.\tThe Message Receiver detects that few segments are missing to reassemble complete message.\n2.\tThe Message receiver sends Segment recovery request to Message sender. The information elements defined in Table 8.5.6-1 are included in the request message.\nTable 8.5.6-1: Segment Recovery Request Information Elements\nInformation element\nStatus\nDescription\nSegmentation Set Identifier\nM\nThe Segmentation Set Identifier as received in segments.\nList of Segment range\nM\nList of Segment range which the client wants to recover, each segment range consist of start and end sequence number of missing segments e.g. (5-7, 10-10, 15-19)\n3.\tThe Message sender sends Segment recovery acknowledgement to the MSGin5G Receiver.\n4.\tThe Message sender sends each segmented message to the Message receiver within an individual access network transport packet. If any segment is not received within the expected time (based on configuration) then the Message receiver may consider as recovery failed or may initiate the procedure again with updated list of segment range.\nNOTE:\tThe MSGin5G message segment recovery procedure may repeat based on the configuration.\n5.\tIf Message receiver has received all segments (determined based on First segment and Last Segment), the Message receiver reassembles all the segmented messages into a single MSGin5G message.",
      "chunk_type": "general",
      "cross_references": [
        "table_8.5.6-1",
        "figure_8.5.6-1"
      ]
    },
    {
      "chunk_id": "ts_23.554_8.6.1",
      "section_id": "8.6.1",
      "section_title": "General MSGin5G messaging procedure on Message Gateway",
      "content": "Figure 8.6.1-1 shows the MSGin5G message delivery procedure on Message Gateway for Non-MSGin5G UEs.\nFigure 8.6.1-1: MSGin5G messaging procedure on Message Gateway.\n1.\tThe MSGin5G Server forwards the MSGin5G message request to recipient Non-MSGin5G UE based on the UE Service ID or to the Broadcast Message Gateway based on the Broadcast Area ID as specified in clause 8.3.3. A Delivery status required IE may be included in the MSGin5G message request.\n2.\tThe Message Gateway records if a message delivery status report is requested in the message. Then it translates the MSGin5G message to a Non-MSGin5G message (e.g. SMS, RCS message as specified in GSMA PRD RCC.07 [3]) with message delivery status report requested and finishes the information exchange procedure with Non-MSGin5G UE (e.g. sends the non-MSGin5G message to the Non-MSGin5G UE and receives the needed response).\nNOTE 1:\tThe information exchange procedure between Message Gateway and Non-MSGin5G UE is out of scope of this specification.\n3.\tThe Message Gateway checks if application level message delivery status report is supported by the Non-MSGin5G message delivery mechanism. If not supported, step 4a will be used and steps 4b and 5b will be skipped; otherwise step 4b-5b will be used and step 4a will be skipped.\n4a.\tBased on the information (e.g. response to the non-MSGin5G message delivery request, transport level information) obtained from the non-MSGin5G message delivery mechanism, the Message Gateway fetches the delivery status from the above information and uses it to create an MSGin5G message delivery status report. If the delivery status is a failure, the Message Gateway also fetches the suitable failure reason from the above information and uses it as reason of failure in the MSGin5G message delivery status report. The Information Elements listed in table 8.3.4-1 are included in the MSGin5G message delivery status report.\n4b.\tA non-MSGin5G application level message delivery status report is received by the Message Gateway.\nNOTE 2:\tThe procedure of non-MSGin5G application level message delivery status report is out of scope of this specification.\n5b. The Message Gateway translates the non-MSGin5G application level message delivery status report to MSGin5G message delivery status report as specified in clause 8.3.4. The Information Elements listed in table 8.3.4-1 are also included in this MSGin5G message delivery status report, but the Delivery Status and Failure Cause IEs are fetched from the non-MSGin5G application level message delivery status report.\n6.\tThe Message Gateway sends the MSGin5G message delivery status report to the MSGin5G Server on behalf of the Non-MSGin5G UE or based on the delivery result of the broadcast delivery mechanism, as specified in clause 8.3.4.\nNOTE:\tThe Broadcast Message Gateway could provide the delivery status report. If the recipient UE supports an MSGin5G Client, the MSGin5G UE can (also) send a delivery status report.",
      "chunk_type": "definition",
      "cross_references": [
        "clause_8.3.3",
        "clause_8.3.4",
        "table_8.3.4-1",
        "figure_8.6.1-1"
      ]
    },
    {
      "chunk_id": "ts_23.554_8.6.2.1",
      "section_id": "8.6.2.1",
      "section_title": "Legacy 3GPP UE receives message from group",
      "content": "Figure 8.6.2.1-1 shows the procedure for Legacy 3GPP UE to receive message from group.\nPre-conditions:\n1.\tThe MSGin5G Server has received the Group message to be sent to a target Legacy 3GPP UE.\nFigure 8.6.2.1-1: Legacy 3GPP UE receives a message from a group\n1.\tThe MSGin5G Server sends the MSGin5G message request to the recipient based on the UE Service ID. The Legacy 3GPP Message Gateway receives the MSGin5G message request on behalf of the Legacy 3GPP UE as defined in clause 8.3.3 with following clarifications:\na)\tThe MSGin5G message request includes Originating UE Service ID, Recipient Group Service ID, Recipient UE Service ID, Message ID, Payload information elements from Table 8.3.3-1. The MSGin5G message request may include Delivery status required, Application ID and Priority type information elements from Table 8.3.3-1.\n2.\tThe Legacy 3GPP Message Gateway translates the MSGin5G message request to Legacy 3GPP message (e.g. SMS).\n3.\tThe Legacy 3GPP message gateway sends the Legacy 3GPP message (e.g. SMS) to Legacy 3GPP UE.\n4.\tThe Legacy 3GPP UE delivers the payload of the legacy 3GPP message (e.g. SMS) to the targeted Application Client on the Legacy 3GPP UE.",
      "chunk_type": "general",
      "cross_references": [
        "clause_8.3.3",
        "table_8.3.3-1",
        "figure_8.6.2.1-1"
      ]
    },
    {
      "chunk_id": "ts_23.554_8.6.2.2",
      "section_id": "8.6.2.2",
      "section_title": "Non-3GPP message client receives message from group",
      "content": "Figure 8.6.2.2-1 shows the procedure for Non-3GPP message client to receive message from group.\nPre-conditions:\n1.\tThe MSGin5G Server has received the Group message to be sent to target Non-3GPP UE.\nFigure 8.6.2.2-1: Non-3GPP message client receives a message from a group\n1.\tThe MSGin5G Server sends the MSGin5G message request to the recipient based on the UE Service ID. The MSGin5G Gateway receives the MSGin5G message request on behalf of the Non-3GPP UE as defined in clause 8.3.3 with following clarifications:\na)\tThe MSGin5G message request includes Originating UE Service ID, Recipient Group Service ID, Recipient UE Service ID, Message ID, Payload information elements from Table 8.3.3-1. The MSGin5G message request may include Delivery status required, Application ID and Priority type information elements from Table 8.3.3-1.\n2.\tThe Non-3GPP Message Gateway translates the MSGin5G message to Non-3GPP message.\n3.\tThe Non-3GPP Message Gateway sends message to Non-3GPP Message Client.\n4)\tThe Non-3GPP UE delivers the payload of the non-3GPP message (e.g. RCS) to the targeted Application Client on the Non-3GPP UE.\nNOTE:\tThe procedure to translate an MSGin5G message to a Non-3GPP message and to send a Non-3GPP message from the Non-3GPP Message Gateway to the Non-3GPP Message Client are out of scope of 3GPP.",
      "chunk_type": "general",
      "cross_references": [
        "clause_8.3.3",
        "table_8.3.3-1",
        "figure_8.6.2.2-1"
      ]
    },
    {
      "chunk_id": "ts_23.554_8.7",
      "section_id": "8.7",
      "section_title": "E2E Message delivery procedures",
      "content": "Editor's note: It is also FFS how endpoints are provided with the Service IDs of the counterparts with which the E2E message delivery procedures are used.\nEditor's note: Generalizing MSISDN to Legacy 3GPP identifier in pre-conditions is FFS.",
      "chunk_type": "procedure",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.554_8.7.1.1",
      "section_id": "8.7.1.1",
      "section_title": "From MSGin5G UE to MSGin5G UE",
      "content": "Figure 8.7.1.1-1 shows the message delivery procedure from MSGin5G UE 1 to MSGin5G UE 2.\nPre-condition:\n1.\tBoth MSGin5G Client 1 in MSGin5G UE 1 and MSGin5G Client 2 in MSGin5G UE 2 have registered with the MSGin5G Server.\nFigure 8.7.1.1-1 Message delivery between MSGin5G UEs\n1.\tThe MSGin5G Client 1 sends an MSGin5G message request to MSGin5G Server as specified in clause 8.3.2 with following clarifications:\na)\tThe MSGin5G message request includes Originating UE Service ID, Recipient UE Service ID and Message ID information elements in Table 8.3.2-1, and may include Delivery status required, Application ID, Payload, Priority type information elements from Table 8.3.2-1.\nb)\tUpon receiving the MSGin5G message request, the MSGin5G Server determines if the MSGin5G Client 1 is authorized to send a message to MSGin5G Client 2.\n2.\tThe MSGin5G Server forwards the MSGin5G message request to MSGin5G Client 2 as specified in clause 8.3.3.\n3.\tIf Delivery status required is included in the MSGin5G message request, MSGin5G Client 2 sends MSGin5G message delivery status report to the MSGin5G Server as specified in clause 8.3.4 and then the MSGin5G Server sends MSGin5G message delivery status report to MSGin5G Client 1 as specified in clause 8.3.5.",
      "chunk_type": "general",
      "cross_references": [
        "clause_8.3.2",
        "clause_8.3.3",
        "clause_8.3.4",
        "clause_8.3.5",
        "table_8.3.2-1",
        "figure_8.7.1.1-1"
      ]
    },
    {
      "chunk_id": "ts_23.554_8.7.1.2",
      "section_id": "8.7.1.2",
      "section_title": "From MSGin5G UE to Legacy 3GPP UE",
      "content": "Figure 8.7.1.2-1 shows the message delivery procedure from MSGin5G UE to Legacy 3GPP UE.\nPre-conditions:\n1.\tMSGin5G Client in MSGin5G UE has registered with the MSGin5G Server and the Message Gateway has registered with the MSGin5G Server on behalf of the Legacy 3GPP UE.\n2.\tLegacy 3GPP Message Gateway is aware of the UE Service ID of Legacy 3GPP UE and maintains the mapping to IDs used in the legacy network.\nFigure 8.7.1.2-1: Message delivery from MSGin5G UE to Legacy 3GPP UE\n1.\tThe MSGin5G Client sends an MSGin5G message request to the MSGin5G Server as specified in clause 8.3.2 with following clarifications:\na)\tThe MSGin5G message request includes Originating UE Service ID, Recipient UE Service ID and Message ID information elements in Table 8.3.2-1, and may include Delivery status required, Application ID, Payload, Priority type information elements from Table 8.3.2-1.\n2.\tUpon receiving the MSGin5G message request, the MSGin5G Server determines if the MSGin5G Client is authorized to send a message to the recipient UE.\n3.\tThe MSGin5G Server forwards the MSGin5G message request to the recipient based on the UE Service ID. The Legacy 3GPP Gateway receives the MSGin5G message request on behalf of the Legacy 3GPP UE as specified in 8.3.3.\n4.\tThe Legacy 3GPP Message Gateway determines which legacy 3GPP message delivery mechanism (e.g. SMS, NIDD, Device triggering) will be used based on Legacy 3GPP UE capability, the UE communication status, and the MSGin5G Service configuration. When selected, the Legacy 3GPP Message Gateway maps the UE Service ID to the corresponding identifier. For example (not an exhaustive list):\na)\tif the Legacy 3GPP Message Gateway selected the device triggering delivery mechanism, it maps the UE Service ID to MSISDN and Application port ID\nb)\tif the Legacy 3GPP Message Gateway selected the NIDD delivery mechanism, it maps the UE Service ID to External Identifier or MSISDN.\nc)\tif the Legacy 3GPP Message Gateway selected the SMS delivery mechanism, it maps the UE Service ID to MSISDN.\n5-7. The Legacy 3GPP Message Gateway sends the payload of the MSGin5G message to the terminating Legacy 3GPP UE using the determined delivery mechanism. For example:\na)\tFor Device triggering delivery mechanism, the Legacy 3GPP Message Gateway interacts with the MTC-IWF/SCEF/NEF and maps the payload of the MSGin5G message to one or more Device Triggering requests. The MTC-IWF/SCEF/NEF interacts with SMS-SC for delivery to the UE and to receive the message delivery status report (see TS 23.682 [8] clause 5.2, TS 29.122 [9] clause 4.4.6 and TS 29.522 [10] clause 4.4.3)\nb)\tFor NIDD delivery mechanism, the Legacy 3GPP Message Gateway may interact with the SCEF/NEF and maps the payload of the MSGin5G message to one or more NIDD submit request messages. The Reliable Data Service Configuration, Maximum Latency, Priority, PDN Connection Establishment Option settings are based on pre-configurations (see TS 23.682 [8] clause 5.13, TS 29.122 [9] clause 4.4.5.3 and TS 29.522 [10] clause 4.4.12.3). Alternatively, if tunnel parameters are provisioned in the Legacy 3GPP Message Gateway and UPF/P-GW the payload could be tunnelled via the UPF/P-GW (see TS 23.401 [11] (clause 4.3.17.8.3.3), TS 23.501[12] clause 5.6.10.3, TS 23.502 [7] clause 4.24);\nc)\tFor SMS delivery mechanism, the Legacy 3GPP Message Gateway sends SMS to the Legacy 3GPP UE through the SMSC according to the procedure in TS 23.204 [13] or the procedure in clause 4.13.3 of TS 23.502 [7].\n8.\tIf Delivery status required is included in the MSGin5G message request, the Legacy 3GPP Message Gateway sends the MSGin5G message delivery status report to the MSGin5G Server as specified in clause 8.3.4 and then the MSGin5G Server sends the message delivery status report to the MSGin5G Client as specified in clause 8.3.5.",
      "chunk_type": "general",
      "cross_references": [
        "clause_8.3.2",
        "ts_23.682_clause_5.2",
        "ts_23.682_clause_4.4.6",
        "ts_29.122_clause_4.4.3",
        "ts_23.682_clause_5.13",
        "ts_23.682_clause_4.4.5.3",
        "ts_29.122_clause_4.4.12.3",
        "ts_23.401_clause_4.3.17.8.3.3",
        "ts_23.501_clause_5.6.10.3",
        "ts_23.501_clause_4.24",
        "ts_23.204_clause_4.13.3",
        "clause_8.3.4",
        "clause_8.3.5",
        "table_8.3.2-1",
        "figure_8.7.1.2-1",
        "ts_23.502_clause_4.13.3",
        "ts_23.682",
        "ts_29.122",
        "ts_29.522",
        "ts_23.401",
        "ts_23.501",
        "ts_23.502",
        "ts_23.204"
      ]
    },
    {
      "chunk_id": "ts_23.554_8.7.1.3",
      "section_id": "8.7.1.3",
      "section_title": "From MSGin5G UE to Non-3GPP UE",
      "content": "Figure 8.7.1.3-1 shows the message delivery procedure from MSGin5G UE to Non-3GPP UE.\nPre-conditions:\n1.\tMSGin5G Client in MSGin5G UE has registered with the MSGin5G Server and the Non-3GPP Message Gateway has registered with the MSGin5G Server on behalf of the Non-3GPP UE.\n2.\tNon-3GPP Message Gateway is aware of the non-3GPP message client in Non-3GPP UE and provides the mapping to UE Service ID.\nFigure 8.7.1.3-1 Message Delivery from MSGin5G UE to Non-3GPP UE\n1.\tThe Application Client in the MSGin5G UE triggers the MSGin5G Client to send an MSGin5G message request to the MSGin5G Server as specified in 8.3.2 with following clarifications:\na)\tThe MSGin5G message request includes Originating UE Service ID, Recipient UE Service ID and Message ID information elements in Table 8.3.2-1, and may include Delivery status required, Application ID, Payload, Priority type information elements from Table 8.3.2-1.\n2.\tThe MSGin5G Server determines if the MSGin5G Client is authorized to send a message to the recipient UE.\n3.\tThe MSGin5G Server forwards the MSGin5G message request to the recipient based on the UE Service ID. The Non-3GPP Message Gateway receives the MSGin5G message request on behalf of the Non-3GPP UE as specified in clause 8.6.1.\n4.\tThe Non-3GPP Message Gateway translates the MSGin5G message to the Non-3GPP message with message delivery status report, if appropriate, requested and sends it to the Non-3GPP Message Client. This step is outside the scope of the present specification.\n5.\tIf message delivery status report is requested, the Non-3GPP Message Gateway sends the MSGin5G message delivery status report to the MSGin5G Server as specified in clause 8.3.4, the MSGin5G Server forwards the MSGin5G message delivery status report to the MSGin5G Client as specified in clause 8.3.5.",
      "chunk_type": "general",
      "cross_references": [
        "clause_8.6.1",
        "clause_8.3.4",
        "clause_8.3.5",
        "table_8.3.2-1",
        "figure_8.7.1.3-1"
      ]
    },
    {
      "chunk_id": "ts_23.554_8.7.1.4",
      "section_id": "8.7.1.4",
      "section_title": "From Legacy 3GPP UE to MSGin5G UE",
      "content": "This procedure is used for message reply from Legacy 3GPP UE (e.g. SMS UE) to MSGin5G UE.\nFigure 8.7.1.4-1 shows the response message delivery procedure from Legacy 3GPP UE (e.g. SMS UE) to MSGin5G UE.\nPre-conditions:\n1.\tMSGin5G Client in MSGin5G UE has registered with the MSGin5G Server and the Legacy 3GPP Message Gateway has registered with the MSGin5G Server on behalf of the Legacy 3GPP UE.\n2.\tThe Legacy 3GPP UE received a message from the MSGin5G UE.\n3.\tThe Legacy 3GPP Message Gateway is aware of the Legacy 3GPP UE and provides the mapping to UE Service ID.\n4.\tThe Legacy 3GPP UE replies to the MSGin5G UE upon receiving the message from the MSGin5G UE.\n5.\tThe Legacy 3GPP Message Gateway implementation supports storing a messaging transaction, i.e. mapping the message originating MSGin5G Service ID and the message delivered to the Legacy 3GPP UE, for an operator configured time period to allow if the Legacy 3GPP UE will send a response to the incoming message.\nFigure 8.7.1.4-1: Legacy 3GPPs UE replies to MSGin5G UE\n1.\tThe Legacy 3GPP UE sends a Legacy 3GPP message request to the Legacy 3GPP Message Gateway (e.g. through SMSC if SMS is used according the procedure in 3GPP TS 23.204 [13] or the procedure in clause 4.13.3 of TS 23.502 [7]).\n2.\tThe Legacy 3GPP Message Gateway translates the SMS message into MSGin5G message and sends an MSGin5G message request to the MSGin5G Server as specified in clause 8.3.2 with the following clarifications:\na)\tThe MSGin5G message request includes Originating UE Service ID, Recipient UE Service ID, and Message ID information elements in Table 8.3.2-1, and may include Delivery status required, Application ID, Payload, Priority type information elements from Table 8.3.2-1.\nb)\tUpon receiving the MSGin5G message request, the MSGin5G Server determines if the Legacy 3GPP UE with its UE Service ID is allowed to send a message to the MSGin5G UE.\n3.\tThe MSGin5G Server forwards the MSGin5G message request to the target MSGin5G Client as specified in clause 8.3.3.\n4-6.\tIf the message delivery status report is requested, the MSGin5G Client in MSGin5G UE sends an MSGin5G message delivery status report to the MSGin5G Server as specified in clause 8.3.4, the MSGin5G Server sends the MSGin5G message delivery status report to the Legacy 3GPP Message Gateway specified in clause 8.3.5, the Legacy 3GPP Message Gateway translates the MSGin5G message delivery status report to a Legacy 3GPP message delivery status report and sends it to the Legacy 3GPP UE.",
      "chunk_type": "general",
      "cross_references": [
        "ts_23.204_clause_4.13.3",
        "clause_8.3.2",
        "clause_8.3.3",
        "clause_8.3.4",
        "clause_8.3.5",
        "table_8.3.2-1",
        "figure_8.7.1.4-1",
        "ts_23.502_clause_4.13.3",
        "ts_23.204",
        "ts_23.502"
      ]
    },
    {
      "chunk_id": "ts_23.554_8.7.1.5",
      "section_id": "8.7.1.5",
      "section_title": "From Non-3GPP UE to MSGin5G UE",
      "content": "This procedure is used for message reply from Non-3GPP UE to MSGin5G UE.\nFigure 8.7.1.5-1 shows the message delivery procedure from Non-3GPP UE to MSGin5G UE.\nPre-conditions:\n1.\tMSGin5G Client in MSGin5G UE has registered with the MSGin5G Server and the Non-3GPP Message Gateway has registered with the MSGin5G Server on behalf of the Non-3GPP UE.\n2.\tThe Non-3GPP UE received a message from the MSGin5G UE.\n3.\tThe Non-3GPP Message Gateway is aware of the Non-3GPP message client on the Non-3GPP UE and provides the mapping to UE Service ID.\n4.\tThe Non-3GPP UE replies to the MSGin5G UE upon receiving the message from the MSGin5G UE.\n5.\tThe Non-3GPP Message Gateway implementation supports storing a messaging transaction, i.e. mapping the message originating MSGin5G Service ID and the message delivered to the Non-3GPP UE, for an operator configured time period to allow if the Non-3GPP UE will send a response to the incoming message.\nFigure 8.7.1.5-1: Non-3GPP UE replies to MSGin5G UE\n1.\tThe Non-3GPP UE sends a Non-3GPP message request to the Non-3GPP Message Gateway.\n2.\tThe Non-3GPP Message Gateway translates the Non-3GPP message to MSGin5G message with message delivery status report requested and sends an MSGin5G message request to the MSGin5G Server as specified in clause 8.3.2 with the following clarifications:\na)\tThe MSGin5G message request includes Originating UE Service ID, Recipient UE Service ID and Message ID information elements in Table 8.3.2-1, and may include Delivery status required, Application ID, Payload, Priority type information elements from Table 8.3.2-1.\nb)\tUpon receiving the MSGin5G message request, the MSGin5G Server determines if the Non-3GPP UE with its UE Service ID is allowed to send a message to the MSGin5G UE.\n3.\tThe MSGin5G Server forwards the MSGin5G message request to the target MSGin5G Client as specified in clause 8.3.3.\n4.\tIf the message delivery status report is requested by the Non-3GPP UE, the MSGin5G Client in MSGin5G UE sends an MSGin5G message delivery status report to the MSGin5G Server specified in clause 8.3.4, the MSGin5G Server sends the MSGin5G message delivery status report to the Non-3GPP Message Gateway specified in clause 8.3.5, the Non-3GPP Message Gateway translates the MSGin5G message delivery status report to a Non-3GPP message delivery status report and sends it to the Non-3GPP UE.",
      "chunk_type": "general",
      "cross_references": [
        "clause_8.3.2",
        "clause_8.3.3",
        "clause_8.3.4",
        "clause_8.3.5",
        "table_8.3.2-1",
        "figure_8.7.1.5-1"
      ]
    },
    {
      "chunk_id": "ts_23.554_8.7.2.1",
      "section_id": "8.7.2.1",
      "section_title": "From Application Server to MSGin5G UE",
      "content": "Figure 8.7.2.1-1 shows the message delivery procedure from Application Server to MSGin5G UE.\nPre-conditions:\n1.\tThe MSGin5G Client is registered with the MSGin5G Server.\n2.\tThe Application Server has established secured communication with the MSGin5G Server.\nFigure 8.7.2.1-1: Message delivery from Application Server to MSGin5G UE\n1.\tThe Application Server sends an API Request to MSGin5G Server for sending MSGin5G message as specified in clause 8.3.2 with the following clarifications:\na)\tThe API request includes Originating AS Service ID, Recipient UE Service ID, and Message ID information elements from Table 8.3.2-1, and may include Delivery status required, Application ID, Payload, Priority type information elements from Table 8.3.2-1.\nb)\tUpon receiving the API Request for MSGin5G message delivery, the MSGin5G Server determines if the Application Server is allowed to send a message to the MSGin5G UE.\n2.\tThe MSGin5G Server sends the MSGin5G message request to MSGin5G Client as specified in clause 8.3.3.\n3.\tIf Delivery status required is included in the MSGin5G message request, MSGin5G Client 2 sends the message delivery status report to the MSGin5G Server specified in clause 8.3.4.\n4.\tThe MSGin5G Server sends the message delivery status report to the Application Server as specified in clause 8.3.5",
      "chunk_type": "general",
      "cross_references": [
        "clause_8.3.2",
        "clause_8.3.3",
        "clause_8.3.4",
        "clause_8.3.5",
        "table_8.3.2-1",
        "figure_8.7.2.1-1"
      ]
    },
    {
      "chunk_id": "ts_23.554_8.7.2.2",
      "section_id": "8.7.2.2",
      "section_title": "From Application Server to Legacy 3GPP UE",
      "content": "Figure 8.7.2.2-1 shows the message delivery procedure from Application Server to Legacy 3GPP UE.\nPre-conditions:\n1.\tThe Application Server has established secured communication with the MSGin5G Server.\n2.\tThe Legacy 3GPP Message Gateway has registered with the MSGin5G Server on behalf of the client in the Legacy 3GPP UE.\n3.\tLegacy 3GPP Message Gateway is aware of the legacy 3GPP message client (i.e. SMS client) in Legacy 3GPP UE and provides the mapping to UE Service ID.\nFigure 8.7.2.2-1: Application Server to Legacy 3GPP UE messaging\n1.\tThe Application Server sends an API Request to the MSGin5G Server for sending an MSGin5G message as specified in clause 8.3.2 with the following clarifications:\na)\tThe API Request includes Originating AS Service ID, Recipient UE Service ID, and Message ID information elements from Table 8.3.2-1, and may include Delivery status required, Application ID, Payload, Priority type information elements from Table 8.3.2-1.\n2.\tUpon receiving the API Request for MSGin5G message delivery, the MSGin5G Server determines if the Application Server is allowed to send a message to the recipient UE.\n3.\tThe MSGin5G Server sends the MSGin5G message request to the recipient based on the UE Service ID. The Legacy 3GPP Gateway receives the MSGin5G message request on behalf of the Legacy 3GPP UE as specified in clause 8.3.3.\n4-7. Same with step 4-7 in clause 8.7.1.2.\n8.\tThe Legacy 3GPP Message Gateway sends the MSGin5G message delivery status report to the MSGin5G Server as specified in clause 8.3.4.",
      "chunk_type": "general",
      "cross_references": [
        "clause_8.3.2",
        "clause_8.3.3",
        "clause_8.7.1.2",
        "clause_8.3.4",
        "table_8.3.2-1",
        "figure_8.7.2.2-1"
      ]
    },
    {
      "chunk_id": "ts_23.554_8.7.2.3",
      "section_id": "8.7.2.3",
      "section_title": "From Application Server to Non-3GPP UE",
      "content": "Figure 8.7.2.3-1 shows the message delivery procedure from Application Server to Non-3GPP UE.\nPre-conditions:\n1.\tThe Application Server has established a secured communication with the MSGin5G Server.\n2.\tThe Non-3GPP Message Gateway has registered with the MSGin5G Server on behalf of the message client in the Non-3GPP UE.\n3.\tNon-3GPP Message Gateway is aware of the non-3GPP message client in Non-3GPP UE and provides the mapping to UE Service ID.\nFigure 8.7.2.3-1 Application Server to Non-3GPP UE messaging\n1.\tThe Application Server sends an API Request to the MSGin5G Server for sending an MSGin5G message as specified in 8.3.2 with the following clarifications:\na)\tThe API Request includes Originating AS Service ID, Recipient UE Service ID, and Message ID information elements from Table 8.3.2-1, and may include Delivery status required, Application ID, Payload, Priority type information elements from Table 8.3.2-1.\n2.\tUpon receiving the API Request for MSGin5G message delivery, the MSGin5G Server determines if the Application Server is allowed to send a message to the Non-3GPP UE.\n3.\tThe MSGin5G Server sends the MSGin5G message request to the recipient based on the UE Service ID. The Non-3GPP Message Gateway receives the MSGin5G message request on behalf of the Non-3GPP UE as specified in clause 8.3.3.\n4.\tThe Non-3GPP Message Gateway translates the MSGin5G message to the Non-3GPP message and sends it to the Non-3GPP UE. This step is outside the scope of the present specification.\n5-6.\tIf message delivery status report is required, the Non-3GPP Message Gateway sends the MSGin5G message delivery status report to the MSGin5G Server as specified in clause 8.3.4, the MSGin5G Server sends the message delivery status report to the Application Server as specified in clause 8.3.5.",
      "chunk_type": "general",
      "cross_references": [
        "clause_8.3.3",
        "clause_8.3.4",
        "clause_8.3.5",
        "table_8.3.2-1",
        "figure_8.7.2.3-1"
      ]
    },
    {
      "chunk_id": "ts_23.554_8.7.3.1",
      "section_id": "8.7.3.1",
      "section_title": "From MSGin5G UE to Application Server",
      "content": "Figure 8.7.3.1-1 shows the message delivery procedure from MSGin5G UE to Application Server.\nPre-conditions:\n1.\tThe Application Server and MSGin5G Client in MSGin5G UE have registered with the MSGin5G Server.\nFigure 8.7.3.1-1: Message delivery from MSGin5G UE to Application Server\n1.\tThe MSGin5G Client sends an MSGin5G message request to the MSGin5G Server as specified in clause 8.3.2 with the following clarifications:\na)\tThe MSGin5G message request includes Originating UE Service ID, Recipient AS Service ID, and Message ID information elements from Table 8.3.2-1, and may include Delivery status required, Application ID, Payload, Priority type information elements from Table 8.3.2-1.\nb)\tUpon receiving the MSGin5G message request, the MSGin5G Server determines if the MSGin5G Client is allowed to send message to Application Server.\n2.\tThe MSGin5G Server forwards the MSGin5G message request to the Application Server as specified in clause 8.3.3.\n3-4.\tIf Delivery status required is included in the MSGin5G message request, the Application Server sends the message delivery status report to the MSGin5G Server as specified in clause 8.3.4, the MSGin5G Server sends the delivery status to MSGin5G Client as specified in clause 8.3.5.",
      "chunk_type": "general",
      "cross_references": [
        "clause_8.3.2",
        "clause_8.3.3",
        "clause_8.3.4",
        "clause_8.3.5",
        "table_8.3.2-1",
        "figure_8.7.3.1-1"
      ]
    },
    {
      "chunk_id": "ts_23.554_8.7.3.2",
      "section_id": "8.7.3.2",
      "section_title": "From Legacy 3GPP UE to Application Server",
      "content": "This procedure is used for message reply from Non-3GPP UE to Application Server.\nFigure 8.7.3.2-1 shows the message delivery procedure from Legacy 3GPP UE to Application Server.\nPre-conditions:\n1.\tThe Application Server has established secured communication with the MSGin5G Server.\n2.\tThe Legacy 3GPP Message Gateway has registered with the MSGin5G Server on behalf of the message client in the Legacy 3GPP UE.\n3\tThe Legacy 3GPP UE received a message from the Application Server.\n4.\tThe Legacy 3GPP Message Gateway is aware of the Legacy 3GPP Message client on the Legacy 3GPP UE and provides the mapping between its identifiers and UE Service ID.\n5.\tThe Legacy 3GPP Message Gateway implementation supports storing a messaging transaction, i.e. mapping the message originating MSGin5G Service ID and the message delivered to the Legacy 3GPP UE, for an operator configured time period to allow if the Legacy 3GPP UE will send a response to the incoming message.\nFigure 8.7.3.2-1: Legacy 3GPP UE replies to Application Server\n1.\tThe Legacy 3GPP UE sends a Legacy 3GPP message request to the Legacy 3GPP Message Gateway (e.g. through SMSC if SMS is used according the procedure in 3GPP TS 23.204 [13] or the procedure in clause 4.13.3 of TS 23.502 [7]).\n2.\tThe Legacy 3GPP Message Gateway translates the Legacy 3GPP message into an MSGin5G message and may include message delivery status report requested in the MSGin5G message. The Legacy 3GPP Message Gateway sends the MSGin5G message request to the MSGin5G Server as specified in clause 8.3.2 with the following clarifications:\na)\tThe MSGin5G message request includes Originating UE Service ID, Recipient AS Service ID and Message ID information elements from Table 8.3.2-1, and may include Delivery status required, and may include Application ID, Payload and Priority type information elements from Table 8.3.2-1.\nb)\tUpon receiving the MSGin5G message request, the MSGin5G Server determines if the Legacy 3GPP UE with its UE Service ID is allowed to send a message to the Application Server.\n3.\tThe MSGin5G Server forwards the MSGin5G message in API request to the Application Server as specified in clause 8.3.3.\n4-6.\tIf message delivery status report is requested, the Application Server sends the message delivery status report by API request to the MSGin5G Server as specified in clause 8.3.4, the MSGin5G Server forwards the message delivery status report to the Legacy 3GPP Message Gateway as specified in clause 8.3.5, the Legacy 3GPP Message Gateway translates the MSGin5G message delivery status report into a Legacy 3GPP message delivery status report and sends it to the Legacy 3GPP UE.",
      "chunk_type": "general",
      "cross_references": [
        "ts_23.204_clause_4.13.3",
        "clause_8.3.2",
        "clause_8.3.3",
        "clause_8.3.4",
        "clause_8.3.5",
        "table_8.3.2-1",
        "figure_8.7.3.2-1",
        "ts_23.502_clause_4.13.3",
        "ts_23.204",
        "ts_23.502"
      ]
    },
    {
      "chunk_id": "ts_23.554_8.7.3.3",
      "section_id": "8.7.3.3",
      "section_title": "From Non-3GPP UE to Application Server",
      "content": "This procedure is used for message reply from Legacy 3GPP UE to Application Server.\nFigure 8.7.3.3-1 shows the message delivery procedure from Non-3GPP UE to Application Server.\nPre-conditions:\n1.\tThe Application Server has established secured communication with the MSGin5G Server.\n2.\tThe Non-3GPP Message Client in Non-3GPP UE has registered with the MSGin5G Server via the Non-3GPP Message Gateway.\n3.\tThe Non-3GPP UE received a message from the Application Server.\n4.\tThe Non-3GPP Message Gateway is aware of the Non-3GPP message client on the Non-3GPP UE and provides the mapping between its identifiers and UE Service ID.\n5.\tThe Non-3GPP Message Gateway implementation supports storing a messaging transaction, i.e. mapping the message originating MSGin5G Service ID and the message delivered to the Non-3GPP UE, for an operator configured time period to allow if the Non-3GPP UE will send a response to the incoming message.\nFigure 8.7.3.3-1: Non-3GPP UE replies to Application Server\n1.\tThe Non-3GPP UE sends a Non-3GPP message request to the Non-3GPP Message Gateway.\n2.\tThe Non-3GPP Message Gateway translates the Non-3GPP Message into an MSGin5G message and may include MSGin5G message delivery status report requested in the MSGin5G message. The Non-3GPP Message Gateway sends an MSGin5G message request to the MSGin5G Server as specified in clause 8.3.2 with the following clarifications:\na)\tThe MSGin5G message request includes Originating UE Service ID, Recipient AS Service ID, and Message ID information elements in Table 8.3.2-1, and may include Delivery status required, Application ID, Payload, Priority type information elements from Table 8.3.2-1.\nb)\tUpon receiving the MSGin5G message request, the MSGin5G Server determines if the Non-3GPP UE with its UE Service ID is allowed to send a message to the Application Server.\n3.\tThe MSGin5G Server forwards the MSGin5G message in an API request to the Application Server as specified in clause 8.3.3.\n4-6.\tIf the delivery status is required, the Application Server sends a message delivery status report by API request to the MSGin5G Server as specified in clause 8.3.4, the MSGin5G Server sends the message delivery status report to the Non-3GPP Message Gateway as specified in clause 8.3.5, the Non-3GPP Message Gateway translates the MSGin5G message delivery status report into a Non-3GPP message delivery status report and sends it to the Non-3GPP UE.",
      "chunk_type": "general",
      "cross_references": [
        "clause_8.3.2",
        "clause_8.3.3",
        "clause_8.3.4",
        "clause_8.3.5",
        "table_8.3.2-1",
        "figure_8.7.3.3-1"
      ]
    },
    {
      "chunk_id": "ts_23.554_8.7.4.1",
      "section_id": "8.7.4.1",
      "section_title": "General",
      "content": "This clause introduces a group messaging procedure for MSGin5G Client and MSGin5G Server to send and receive Group messages after a group is created. In this procedure, the group creation and membership management are handled by group management function specified in 3GPP TS 23.434 [5].",
      "chunk_type": "definition",
      "cross_references": [
        "ts_23.434"
      ]
    },
    {
      "chunk_id": "ts_23.554_8.7.4.2",
      "section_id": "8.7.4.2",
      "section_title": "Message delivery from UE to group",
      "content": "Figure 8.7.4.2-1 shows the MSGin5G Group messaging procedure in which MSGin5G Client (both IMS and non-IMS UE) sends a message to a group.\nPre-conditions:\n1.\tAn MSGin5G Group is created by following group management SEAL service procedures as specified in 3GPP TS 23.434 [5].\n2.\tAll participants in the MSGin5G Group may get the Group information i.e. the Group Service ID.\n3.\tThe MSGin5G Server has a copy of the group profile with all the group members by using Group information query specified in 3GPP TS 23.434 [5].\nFigure 8.7.4.2-1: Group messaging in MSGin5G Service\n1.\tThe MSGin5G Client 1 sends a message to a group as specified in clause 8.3.2 with following clarifications:\na)\tThe MSGin5G message request includes Originating UE Service ID, Recipient Group Service ID and Message ID information elements from Table 8.3.2-1. The MSGin5G message request may include Delivery status required, Application ID, Payload and Priority type information elements from Table 8.3.2-1.\n2.\tUpon receiving the MSGin5G message request to send the group message, the MSGin5G Server may send the message to the Application Server based on service ID present in the received MSGin5G message request (e.g. to log application specific message or for analytics). Otherwise go to step 4.\na)\tUpon receiving the MSGin5G message request, the Application Server validates the message and if the message is not valid, the Application Server sends MSGin5G message response with delivery status set as Reject to the MSGin5G Server. Otherwise, go to step 3.\nb)\tThe MSGin5G Server sends the MSGin5G message response with delivery status set as reject to the MSGin5G Client 1. The information elements defined in Table 8.3.2-3 are included in the response. Following procedures will be skipped.\n3.\tThe Application Server initiates to send message to all group members and sends the MSGin5G message request to the MSGin5G Server.\nEditor's note:\tWhether to keep or correct step 2 or 3 is FFS.\n4\tUpon receiving the MSGin5G message request, if the MSGin5G Server determines the MSGin5G Client-1 is authorized to send the group message, the MSGin5G Server resolves the group ID to determine the members of that group, based on the information from the group management server as specified in 3GPP TS 23.434 [5].\nNOTE:\tIf the originating UE is member of the group, the originating UE is not included as recipient of the group message.\n5.\tThe MSGin5G Server sends the message to all participants of the group by their UE Service ID. The MSGin5G message request includes Originating UE Service ID, Recipient Group ID, Recipient UE Service ID, Message ID, Payload information elements from Table 8.3.3-1. The MSGin5G message request may include Delivery status required, Application ID and Priority type information elements from Table 8.3.3-1. The MSGin5G Server routes, using the procedures in clause 8.3.3, the message to:\na)\ta MSGin5G UE,\nb)\ta Legacy 3GPP UE,\nc)\ta Non-3GPP UE.\nNOTE:\tSteps 5 a), 5 b) and 5 c) can happen in parallel and in any order.\n5.\tUpon receiving the group message, if message delivery status report is requested and if supported by target message client, the MSGin5G Client or Legacy 3GPP UE or Non-3GPP message client sends the message delivery status report to originator MSGin5G Client 1 as specified in clause 8.2.4 and 8.3.5.",
      "chunk_type": "general",
      "cross_references": [
        "clause_8.3.2",
        "clause_8.3.3",
        "clause_8.2.4",
        "table_8.3.2-1",
        "table_8.3.2-3",
        "table_8.3.3-1",
        "figure_8.7.4.2-1",
        "ts_23.434_figure_8.7.4.2-1",
        "ts_23.434"
      ]
    },
    {
      "chunk_id": "ts_23.554_8.7.4.3",
      "section_id": "8.7.4.3",
      "section_title": "Message delivery procedure from Application Server to group",
      "content": "Figure 8.6.4.3-1 shows the MSGin5G Group messaging procedure in which the Application Server sends a message to a group.\nPre-conditions:\n1.\tAn MSGin5G Group is created by following group management SEAL service procedures as specified in 3GPP TS 23.434 [5].\nFigure 8.7.4.3-1: Group messaging in MSGin5G Service\n1.\tThe Application Server sends a message to a group as specified in clause 8.3.2.\n2\tUpon receiving the MSGin5G message request, if the AS is authorized to send the group message, the MSGin5G Server resolves the group ID to determine the members of that group, based on the information from the group management server specified in 3GPP TS 23.434 [5].\n3.\tThe MSGin5G Server sends the message to all participants of the group based on UE Service ID. The MSGin5G message Request includes Originating AS Service ID, Recipient Group ID, Recipient UE Service ID, Message ID, Payload information elements from Table 8.3.3-1. The MSGin5G message Request may include Delivery Status Required, Application ID and Priority Type information elements from Table 8.3.3-1. The MSGin5G Server routes, using the procedures in clause 8.7.2, the message to:\na)\ta MSGin5G UE,\nb)\ta Legacy 3GPP UE,\nc)\ta Non-3GPP UE.\nNOTE:\tSteps 3 a), 3 b) and 3 c) can happen in parallel and in any order.\n4.\tUpon receiving the group message, if message delivery status report is requested and if supported by the target message client, the MSGin5G Client or Legacy 3GPP UE or Non-3GPP message client sends the message delivery status report to originator Application Server as specified in clause 8.3.4 and 8.3.5.",
      "chunk_type": "procedure",
      "cross_references": [
        "clause_8.3.2",
        "clause_8.7.2",
        "clause_8.3.4",
        "table_8.3.3-1",
        "figure_8.6.4.3-1",
        "ts_23.434_figure_8.7.4.3-1",
        "ts_23.434"
      ]
    },
    {
      "chunk_id": "ts_23.554_8.7.5.1",
      "section_id": "8.7.5.1",
      "section_title": "General",
      "content": "MSGin5G messages may be delivered between different PLMNs.\nThe procedure specified in clause 8.7.5.2 applies to Point-to-Point message, Group message, and may also apply to AS-to-Point message and Point-to-AS message delivery if agreed by the business agreement between the PLMN operators. The procedure specified in clause 8.7.5.3 applies to Message delivery based on Messaging Topic.",
      "chunk_type": "definition",
      "cross_references": [
        "clause_8.7.5.2",
        "clause_8.7.5.3"
      ]
    },
    {
      "chunk_id": "ts_23.554_8.7.5.2",
      "section_id": "8.7.5.2",
      "section_title": "Inter-PLMN message exchange procedure",
      "content": "Pre-condition:\n1.\tThe Message Sender (e.g. MSGin5G Client 1 in MSGin5G UE 1) is registered to the MSGin5G Server 1 in one PLMN.\n2.\tThe Message Receiver (e.g. MSGin5G Client 2 in MSGin5G UE 2) is registered to the MSGin5G Server 2 in another PLMN.\n3.\tMSGin5G Server 1 and MSGin5G Server 2 have established a secured connection.\nEditor's Note: TS 33.501 does not specify how the connection is secured.\nFigure 8.7.5.2-1 shows message delivery between MSGin5G endpoints in different PLMNs, where the Message Sender is registered in MSGin5G Server 1 and the Message Receiver is registered in MSGin5G Server 2.\nFigure 8.7.5.2-1: Message delivery between MSGin5G UEs in different PLMNs\n1.\tThe Message Sender sends an MSGin5G message request to MSGin5G Server 1 in PLMN 1 as specified in clause 8.3.2.\n2.\tThe MSGin5G Server 1 analyses the target UE Service ID and determines that the message is targeted to the Message Receiver in PLMN 2, authenticates that the Message Sender is allowed to send a message to the Message Receiver, and then the MSGin5G Server 1 forwards the MSGin5G message request to MSGin5G Server 2 in PLMN 2. The MSGin5G message request contains the Information Elements as specified in table 8.3.3-1.\n3.\tMSGin5G Server 2 forwards the MSGin5G message request to the Message Receiver as specified in clause 8.3.3.\n4-6.\tIf the message delivery status report is requested, the Message Receiver sends a message delivery status report to Message Sender as per procedure specified in clause 8.3.4 and 8.3.5.",
      "chunk_type": "procedure",
      "cross_references": [
        "clause_8.3.2",
        "clause_8.3.3",
        "clause_8.3.4",
        "table_8.3.3-1",
        "figure_8.7.5.2-1",
        "ts_33.501"
      ]
    },
    {
      "chunk_id": "ts_23.554_8.7.5.3",
      "section_id": "8.7.5.3",
      "section_title": "Inter-PLMN message exchange procedure based on Messaging Topic",
      "content": "Figure 8.7.5.3-1 shows the inter-PLMN Message delivery based on Messaging Topic when MSGin5G Server 2 forwards the Messaging Topic subscription request from the MSGin5G UE/Application Server served by it to MSGin5G Server 1 as specified in clause 8.8.4.\nPre-condition:\n1.\tThe Message Sender (e.g. an MSGin5G UE, a Message Gateway on behalf of a Non-MSGin5G UE or an Application Server) is registered to the MSGin5G Server 1 in PLMN 1.\n2.\tThe Message Receiver (e.g. an MSGin5G UE, a Message Gateway on behalf of a Non-MSGin5G UE or an Application Server) is registered to the MSGin5G Server 2 in PLMN 2.\n3.\tMSGin5G Server 1 and MSGin5G Server 2 have established a secured connection.\n4.\tMSGin5G Client or Application Server served by MSGin5G Server 2 has subscribed to a Messaging Topic with the MSGin5G Server 1 as specified in clause 8.8.4 via MSGin5G Server 2.\nFigure 8.7.5.3-1: Message delivery between MSGin5G UEs in different PLMNs\n1.\tThe Message Sender sends an MSGin5G message request (if the sender is an MSGin5G UE) or API request (if the sender is an Application Server or a Message Gateway on behalf of a Non-MSGin5G UE) to MSGin5G Server 1 in PLMN 1 as specified in clause 8.3.2. A Messaging Topic is included in this request.\n2.\tThe MSGin5G Server 1 checks the subscriptions of the Messaging Topic included in the request and obtains the UE Service ID/AS Service ID of the Message Receivers. The MSGin5G Server 1 determines that the message with this Messaging Topic is needed to be delivered to an MSGin5G UE/Application Server served by Message Server 2 in PLMN 2 based on the UE Service ID/AS Service ID of the Message Receiver. The MSGin5G Server 1 then sends the MSGin5G message to MSGin5G Server 2. The MSGin5G message request contains the Information Elements as specified in table 8.3.3-1.\n3\tThe MSGin5G Server 2 delivers the MSGin5G message request to Messager Receiver based on the UE Service ID/AS Service ID in the message as specified in clause 8.3.3.\n4-6.\tIf the message delivery status report is requested, the Message Receiver sends message delivery status report to Message Sender as per procedure specified in clause 8.3.4 and 8.3.5.\nFigure 8.7.5.3-2 shows the inter-PLMN Message delivery to subscribing service endpoints based on Messaging Topic when MSGin5G Server 2 subscribes the Messaging Topic on behalf of all MSGin5G UEs/Application Servers served by it as specified in clause 8.8.4.\nPre-condition:\n1.\tThe Message Sender (e.g. an MSGin5G UE, a Message Gateway on behalf of a Non-MSGin5G UE or an Application Server) is registered to the MSGin5G Server 1 in PLMN 1.\n2.\tThe Message Receiver (e.g. an MSGin5G UE, a Message Gateway on behalf of a Non-MSGin5G UE or an Application Server) is registered to the MSGin5G Server 2 in PLMN 2.\n3.\tMSGin5G Server 1 and MSGin5G Server 2 have established a secured connection.\n4.\tMSGin5G Server 2 subscribed to a Messaging Topic with the MSGin5G Server 1 as specified in clause 8.8.4. A Messaging Topic with the MSGin5G Server 2 address of the subscriber has been created on MSGin5G Server 1.\n5.\tThe MSGin5G Client or Application Server served by MSGin5G Server 2 subscribed to the Messaging Topic with the MSGin5G Server 2. A Messaging Topic with the UE Service ID/AS Service ID of the subscriber has been created on MSGin5G Server 2.\nFigure 8.7.5.3-2: Message delivery between MSGin5G UEs in different PLMNs\n1.\tThe Message Sender sends an MSGin5G message request (if the sender is an MSGin5G UE) or API request (if the sender is an Application Server or a Message Gateway) to MSGin5G Server 1 in PLMN 1 as specified in clause 8.3.2. A Messaging Topic is included in this request.\n2.\tThe MSGin5G Server 1 checks the subscription of the Messaging Topic included in the request. The MSGin5G Server 1 determines that the message with this Messaging Topic is needed to be delivered to the Message Server 2 in PLMN 2 and sends the MSGin5G message to MSGin5G Server 2. The MSGin5G message request contains the Information Elements as specified in table 8.3.2-1.\n3a\tThe MSGin5G Server 2 checks the subscription of the Messaging Topic included in the inbound request. The MSGin5G Server 2 delivers the MSGin5G message request to Messager Receiver 1 based on its UE Service ID/AS Service ID as specified in clause 8.8.2.\n3b\tThe MSGin5G Server 2 also delivers the MSGin5G message request to Messager Receiver 2 which subscribed to this Messaging Topic as specified in clause 8.8.2.\n4a-6a.\tIf the message delivery status report is requested, the Message Receiver 1 sends message delivery status report to Message Sender as per procedure specified in clause 8.3.4 and 8.3.5.\n4b-6b.\tIf the message delivery status report is requested, the Message Receiver 2 sends message delivery status report to Message Sender as per procedure specified in clause 8.3.4 and 8.3.5.",
      "chunk_type": "procedure",
      "cross_references": [
        "clause_8.8.4",
        "clause_8.3.2",
        "clause_8.3.3",
        "clause_8.3.4",
        "clause_8.8.2",
        "table_8.3.3-1",
        "table_8.3.2-1",
        "figure_8.7.5.3-1",
        "figure_8.7.5.3-2"
      ]
    },
    {
      "chunk_id": "ts_23.554_8.7.6.1",
      "section_id": "8.7.6.1",
      "section_title": "General",
      "content": "This clause introduces a Broadcast message procedure for an Application Server and an MSGin5G UE to send a Broadcast message. In this procedure, an MSGin5G message is delivered via broadcast to MSGin5G UEs or non-MSGin5G UEs in a Broadcast Area.",
      "chunk_type": "definition",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.554_8.7.6.2",
      "section_id": "8.7.6.2",
      "section_title": "Broadcast message delivery procedure",
      "content": "Figure 8.7.6.2-1 shows the Broadcast message delivery procedure from Application Server or MSGin5G UE to the UEs in Broadcast Area.\nPre-condition:\n1.\tApplication Server or MSGin5G Client in MSGin5G UE has registered with the MSGin5G Server.\nFigure 8.7.6.2-1: Message Delivery in Broadcast Area\n1.\tAn MSGin5G message request is sent by an Application Server or an MSGin5G UE to the MSGin5G Server as specified in clause 8.3.2 with following clarifications:\na)\tThe MSGin5G message includes Originating UE Service ID/AS service ID, Broadcast Area ID and Message ID information elements in Table 8.3.2-1, and may include Delivery status required, Application ID, Payload information elements from Table 8.3.2-1.\n2.\tThe MSGin5G Server determines if the Application Server or MSGin5G Client is authorized to send a Broadcast message.\n3.\tThe MSGin5G Server forwards the Broadcast message request to the CBCF (as specified in 3GPP TS 23.041 [14]) via the Broadcast Message Gateway based on the Broadcast Area ID as specified in 8.3.3.\n4.\tThe Broadcast Message Gateway delivers the message to the CBCF which broadcasts the message to the MSGin5G UEs in the Broadcast Area or to the non-MSGin5G UEs in the Broadcast Area. This step is out of scope of the present specification.\nIf the Delivery status requested information element is included in the MSGin5G Broadcast message, a recipient MSGin5G UE sends the delivery report as specified in clause 8.3.4.",
      "chunk_type": "procedure",
      "cross_references": [
        "clause_8.3.2",
        "clause_8.3.4",
        "table_8.3.2-1",
        "figure_8.7.6.2-1",
        "ts_23.041"
      ]
    },
    {
      "chunk_id": "ts_23.554_8.8.0",
      "section_id": "8.8.0",
      "section_title": "General",
      "content": "In order to receive the message with a specific Messaging Topic, a UE or an Application Sever subscribes to this Messaging Topic. The procedures of a MSGin5G Server creating a Messaging Topic and a UE or an Application Sever subscribing/unsubscribing one or more Messaging Topic(s) from an MSGin5G Server are specified in clause 8.8.1 and clause 8.8.3.\nWhen a Messaging Topic(s) has already been created on a different MSGin5G server, an MSGin5G Server needs to learn the available Messaging Topics on the other MSGin5G Server. An MSGin5G Server may use the Messaging Topic list subscription procedure specified in clause 8.8.4.2 to learn the Messaging Topics available on the other MSGin5G Server. The corresponding Messaging Topic list unsubscription procedure is specified in clause 8.8.4.2a.\nAn MSGin5G Server may subscribe one or more Messaging Topic(s) on the other MSGin5G Server on behalf of the UE(s) and/or Application Sever(s) if the Messaging Topic list are not hosted locally. The procedure of MSGin5G Server subscribing one or more Messaging Topic(s) from the other MSGin5G Server is specified in clause 8.8.4.3 and the corresponding unsubscription procedure is specified in clause 8.8.4.4.\nA MSGin5G Server may also forward a subscription request to the MSGin5G Server that already handles the Messaging Topic.",
      "chunk_type": "definition",
      "cross_references": [
        "clause_8.8.1",
        "clause_8.8.3",
        "clause_8.8.4.2",
        "clause_8.8.4.3",
        "clause_8.8.4.4"
      ]
    },
    {
      "chunk_id": "ts_23.554_8.8.1",
      "section_id": "8.8.1",
      "section_title": "Messaging Topic Subscription",
      "content": "An MSGin5G Client or an Application Server can subscribe one or more Messaging Topic(s) on the MSGin5G Server. The Messaging Topic IE will be populated by the Application Client or the Application Server and the content of this IE is out of scope.\nWhen an MSGin5G Client or an Application Server is subscribed to a Messaging Topic, then the MSGin5G Server will deliver messages that contain the same Messaging Topic to the subscribers.\nFigure 8.8.1-1 shows the MSGin5G Client/Application Server subscribing to Messaging Topic(s) on the MSGin5G Server.\nPre-conditions:\n1.\tThe MSGin5G Client or Application Server has registered to the MSGin5G Server.\nFigure 8.8.1-1: MSGin5G Service endpoint subscribes to Messaging topic(s)\n1.\tThe MSGin5G Client or Application Server sends a Messaging Topic subscription request to the MSGin5G Server. The request includes the information elements listed in Table 8.8.1-1.\nTable 8.8.1-1: Messaging Topic subscription request\nInformation element\nStatus\nDescription\nOriginating UE Service ID/AS Service ID\nM\nThe service identity of the sending MSGin5G Client or the sending Application Server.\nMessaging Topic\nM\nA list of Messaging Topic(s) that is to be subscribed. The number of Messaging Topic(s) included in this IE can be one or more.\nExpiration\nO\nThe date and time when the subscription expires.\nThis date and time apply to all Messaging Topic(s) subscribed in this request.\nIf this IE is included, the value of it should be larger than 0.\nIf this IE is not included, the expiration time is subject to operator policy.\nNOTE:\tThe content of the Messaging Topic is out of scope of the present document.\n2.\tThe MSGin5G Server validates the Messaging Topic subscription request and checks the locally stored Messaging Topic(s).\na)\tIf the subscribed Messaging Topic has already been created, the MSGin5G Server checks whether the UE Service ID/AS Service ID of the subscriber is already included in the subscribers list of this Messaging Topic.\n1.\tIf not, the MSGin5G Server adds the UE Service ID/AS Service ID of the subscriber to the subscribers list of this Messaging Topic. The MSGin5G Server sets the validity time of this subscription to the value of the Expire IE or to a default value according to the service policy.\n2.\tElse, the MSGin5G Server updates the validity time of this subscription.\nb)\tIf the subscribed Messaging Topic has not been already created, the MSGin5G Server creates this Messaging Topic, and adds the UE Service ID/AS Service ID of the subscriber to the subscribers list of this Messaging Topic. The MSGin5G Server sets the validity time of this subscription to the value of the Expire IE or to a default value according to the service policy.\n3.\tThe MSGin5G Server sends a Messaging Topic Subscription response to the originator of the request. The response includes the information listed in Table 8.8.1-2.\nTable 8.8.1-2: Messaging Topic Subscription response\nInformation element\nStatus\nDescription\nSubscription status\nM\nIndicates whether the subscription was successfully added or deleted on the MSGin5G Server.\nExpiration\nO\nThe validity date and time of this subscription set by the MSGin5G Server.",
      "chunk_type": "general",
      "cross_references": [
        "table_8.8.1-1",
        "table_8.8.1-2",
        "figure_8.8.1-1"
      ]
    },
    {
      "chunk_id": "ts_23.554_8.8.2",
      "section_id": "8.8.2",
      "section_title": "Message delivery based on Messaging Topic",
      "content": "If an MSGin5G Client or an Application Server is in the subscribers list of a Messaging Topic, the MSGin5G Server delivers messages that contain this Messaging Topic to it.\nFigure 8.8.2-1 shows the Message delivery to a subscribing service endpoint based on Messaging Topic.\nPre-conditions:\n1.\tThe MSGin5G Client or Application Server subscribed to a Messaging Topic with the MSGin5G Server. A Messaging Topic with the UE Service ID/AS Service ID of the subscriber has been created.\nFigure 8.8.2-1: Message delivery to subscribing service endpoint based on Messaging Topic\n1.\tThe MSGin5G Server receives an MSGin5G message request or an API message request corresponding to step 2 in figures 8.3.2-1 or 8.3.2-2 which includes the IEs as listed in table 8.3.2-1. The MSGin5G message request or API message request contains a Messaging Topic IE corresponding to the Messaging Topic for which subscription(s) exist.\n2.\tThe MSGin5G Server uses the procedure described in clause 8.3.3 to deliver the message to all subscriber(s) of this Messaging Topic. In each message, the UE Service ID/AS Service ID of subscriber should be added as the Recipient UE Service ID/AS Service ID IE specified in table 8.3.3-1.",
      "chunk_type": "general",
      "cross_references": [
        "clause_8.3.3",
        "table_8.3.2-1",
        "table_8.3.3-1",
        "figure_8.8.2-1"
      ]
    },
    {
      "chunk_id": "ts_23.554_8.8.3",
      "section_id": "8.8.3",
      "section_title": "Messaging Topic Unsubscription",
      "content": "Corresponding to message topic subscription, an MSGin5G Client or an Application Server can unsubscribe from one or more Messaging Topic(s) on the MSGin5G Server.\nFigure 8.8.3-1 shows the MSGin5G Client/Application Server unsubscribing to Messaging Topic(s) on the MSGin5G Server.\nPre-condition\n1.\tThe MSGin5G Client or Application Server has subscribed one or more message topic(s) on the MSGin5G Server.\nFigure 8.8.3-1: MSGin5G Service endpoint unsubscribes to Messaging topic(s)\n1.\tThe MSGin5G Client or Application Server sends a Messaging Topic unsubscription request to the MSGin5G Server. The request includes the information listed in Table 8.8.3-1.\nTable 8.8.3-1: Messaging Topic unsubscription request\nInformation element\nStatus\nDescription\nOriginating UE Service ID/AS Service ID\nM\nThe service identity of the sending MSGin5G Client or the sending Application Server.\nMessaging Topic(s)\nM\nA list of Messaging Topic(s) that is to be unsubscribed. The number of Messaging Topic(s) included in this IE can be one or more.\n2.\tThe MSGin5G Server validates the Messaging Topic unsubscription request and checks the locally stored Messaging Topic(s). If the UE Service ID/AS Service ID is included in the subscribers list of this Messaging Topic, the MSGin5G Server removes the UE Service ID/AS Service ID from the subscribers list of this Messaging Topic.\n3.\tThe MSGin5G Server sends a Messaging Topic Unsubscription response to the originator of the request. The response includes the information listed in Table 8.8.3-2.\nTable 8.8.3-2: Messaging Topic Unsubscription response\nInformation element\nStatus\nDescription\nsubscription status\nM\nIndicates whether the subscription was successfully deleted on the MSGin5G Server\nNOTE:\tIf the MSGin5G Server holds no more subscriptions for a Messaging Topic then how to handle the locally stored Messaging Topic is implementation specific.",
      "chunk_type": "general",
      "cross_references": [
        "table_8.8.3-1",
        "table_8.8.3-2",
        "figure_8.8.3-1"
      ]
    },
    {
      "chunk_id": "ts_23.554_8.8.4.1",
      "section_id": "8.8.4.1",
      "section_title": "General",
      "content": "When a Messaging Topic(s) is handled between different MSGin5G Servers, the MSGin5G Server 1 may work in the following models, when the subscription for the Messaging Topic exists on Server 2:\na.\tMod.A: the MSGin5G UE/Application Server served by MSGin5G Server 1 subscribes to Messaging Topic(s) and the MSGin5G Server 1 forwards Messaging Topic subscription request from the MSGin5G UE/Application Server to MSGin5G Server 2 or\nb.\tMod.B: the MSGin5G UE/Application Server served by MSGin5G Server 1 subscribes to Messaging Topic(s) and the MSGin5G Server 1 subscribes to the Messaging Topic(s) on Server 2 on behalf of all MSGin5G UE/Application Server served by it.\nIf the subscription for the Messaging Topic already exists on Server 1, or if the subscription does not exist either on Server 1 or on Server 2, the procedure in clause 8.8.1 applies.\nThe MSGin5G Server may work in one model based on the service policy. The MSGin5G Server 1 and MSGin5G Server 2 can be located in the same PLMN or different PLMNs.\nTo enable the message delivery based on Messaging Topic between different MSGin5G Servers, an MSGin5G Server shall subscribe the Messaging Topic list from other MSGin5G Servers as specified in clause 8.8.4.2. If the Messaging Topic is created or deleted on an MSGin5G Server, and if there are Messaging Topic list subscriptions from other MSGin5G Server(s), the MSGin5G Server shall send a Messaging Topic list notification to the corresponding MSGin5G Server(s) as specified in clause 8.8.4.2. When an MSGin5G Server receives a Messaging Topic subscription or unsubscription from an MSGin5G Client, it shall handle the Messaging Topic subscription or unsubscription request as specified in clause 8.8.4.3 or clause 8.8.4.4.\nEditor's note:\tIf a Messaging Topic creation procedure, where Messaging Topic subscription management is controlled by the MSGin5G Server, is required is FFS.",
      "chunk_type": "definition",
      "cross_references": [
        "clause_8.8.1",
        "clause_8.8.4.2",
        "clause_8.8.4.3",
        "clause_8.8.4.4"
      ]
    },
    {
      "chunk_id": "ts_23.554_8.8.4.2",
      "section_id": "8.8.4.2",
      "section_title": "Messaging Topic list subscription",
      "content": "Before the subscribing of Messaging Topic(s), the MSGin5G Server 1 should obtain the available Messaging Topic list on the MSGin5G Server 2 to determine whether to forward the Messaging Topic subscription request to MSGin5G Server 2, to subscribe to the Messaging Topic on behalf of all MSGin5G UE/Application Server served by it on MSGin5G Server 2, or to create the subscription on Server 1 as specified in clause 8.8.1 if the subscription does not exist on Server 2.\nFigure 8.8.4.2-1 shows the MSGin5G Server 1 subscribing to Messaging Topic list on the MSGin5G Server 2.\nNOTE 1:\tIf the MSGin5G Server 1 and MSGin5G Server 2 are located in the same PLMN, the synchronization of Messaging Topic list between MSGin5G Servers may also be implementation specific.\nPre-conditions:\n1.\tMSGin5G Server 1 and MSGin5G Server 2 have established a secured connection.\nEditor's Note: How a secure connection between two MSGin5G Servers is to be established is FFS.\nFigure 8.8.4.2-1: MSGin5G Server 1 subscribes to Messaging Topic list on the MSGin5G Server 2\n1.\tThe MSGin5G Server 1 sends a Messaging Topic list subscription request to the MSGin5G Server 2. The request includes the information elements listed in Table 8.8.4.2-1.\nTable 8.8.4.2-1: Messaging Topic list subscription request\nInformation element\nStatus\nDescription\nOriginating MSGin5G Server ID\nM\nThe MSGin5G Server which requests the Messaging Topic list.\nRecipient MSGin5G Server ID\nM\nThe MSGin5G Server which holds the Messaging Topic list.\nSecurity credentials\nO\nSecurity information required by the MSGin5G Server 2 and is left for implementation.\nExpiration\nO\nThe date and time when the subscription expires.\nIf this IE is included, the value of it should be larger than 0.\nIf this IE is not included, the expiration time is subject to operator policy.\n2.\tUpon receiving the Messaging Topic list subscription request, the MSGin5G Server 2 validates this request and may verify the security credentials.\n3.\tThe MSGin5G Server 2 checks the locally stored Messaging Topic list subscription(s).\na)\tIf the MSGin5G Server 1's subscription has already been created, the MSGin5G Server 2 updates the validity time of this subscription.\nb)\tIf the MSGin5G Server 1's subscription has not been created, the MSGin5G Server 2 creates the subscription.\n4.\tThe MSGin5G Server 2 sends a Messaging Topic list Subscription response to MSGin5G Server 1. The response includes the information listed in Table 8.8.4.2-2.\nTable 8.8.4.2-2: Messaging Topic list Subscription response\nInformation element\nStatus\nDescription\nSubscription status\nM\nIndicates whether the subscription was successfully added or deleted on the MSGin5G Server 2.\nExpiration\nO\nThe validity date and time of this Messaging Topic list subscription set by the MSGin5G Server 2.\n5.\tThe MSGin5G Server 2 checks whether Messaging Topic list notification is needed, e.g. whether the MSGin5G Server 1 subscribes the Messaging Topic list on MSGin5G Server 2 for the first time, or the local Messaging Topic(s) on the MSGin5G Server 2 are updated, e.g. new Messaging Topic(s) has been created or existing Messaging Topic(s) has been deleted.\nNOTE 2:\tIf the MSGin5G Server 1 has previously unsubscribed the Messaging Topic list on MSGin5G Server 2, the MSGin5G Server 2 should consider that the MSGin5G Server 1 subscribes the Messaging Topic list on MSGin5G Server 2 for the first time when the MSGin5G Server 1 subscribes the Messaging Topic list again.\n6.\tIf Messaging Topic list notification is needed, the MSGin5G Server 2 sends a Messaging Topic list notification to MSGin5G Server 1. The notification includes the information listed in Table 8.8.4.2-3.\nTable 8.8.4.2-3: Messaging Topic list notification\nInformation element\nStatus\nDescription\nExpiration\nO\nThe new validity date and time of this subscription set by the MSGin5G Server 2.\n>Messaging Topic list\nM\nA list of Messaging Topic(s) that exists on the MSGin5G Server 2.\nIf the MSGin5G Server 1 subscribes the Messaging Topic list on MSGin5G Server 2 for the first time, the MSGin5G Server 2 should include all Messaging Topic(s) that exist on the MSGin5G Server 2 in this Messaging Topic list, else the MSGin5G Server 2 includes the deviation of Messaging Topic(s) since the last notification,\nEach element in this list contains information as specified in Table 8.8.4.2-4.\nBased on service policy, the MSGin5G Server 2 may only include a part of Messaging Topic(s) in the notification which are allowed to be subscribed by MSGin5G Server 1.\nTable 8.8.4.2-4: Individual Messaging Topic\nInformation element\nStatus\nDescription\nMessaging Topic\nM\nUnique identifier of this Messaging Topic.\nUpdate status\nM\nIdentifies the Messaging Topic is newly created on the MSGin5G Server 2, or newly deleted on the MSGin5G Server 2\n7.\tUpon receiving the Messaging Topic list notification, the MSGin5G Server 1 updates the locally stored Messaging Topic list:\na)\tif the Update status of a Messaging Topic is Created, the MSGin5G Server 1 adds the Messaging Topic to the locally stored Messaging Topic list; and\nb)\tif the Update status of a Messaging Topic is Deleted,\ni)\tif the Messaging Topic exists on MSGin5G Server 1, the MSGin5G Server 1 removes the Messaging Topic from the locally stored Messaging Topic list; and\nii)\tif the Messaging Topic does not exist on MSGin5G Server 1, the MSGin5G Server 1 ignores this Messaging Topic update.\nNOTE 3:\tThe MSGin5G Server should not send Messaging Topic list notification to other MSGin5G Servers if its locally stored Messaging Topic list is updated by receiving a Messaging Topic list notification.\n8.8.4.2a\tMessaging Topic list unsubscription\nCorresponding to message topic list  subscription, the MSGin5G Server 1 can unsubscribe the available Messaging Topic list on the MSGin5G Server 2 if it decides to stop to forward the Messaging Topic subscription request to MSGin5G Server 2, or to subscribe to the Messaging Topic on behalf of all MSGin5G UE/Application Server served by it on MSGin5G Server 2, based on decision of service provider.\nFigure 8.8.4.2a-1 shows theMSGin5G Server 1 unsubscribing to Messaging Topic list on the MSGin5G Server2.\nPre-conditions:\n1.\tMSGin5G Server 1 and MSGin5G Server 2 have established a secured connection.\n2.\tThe MSGin5G Server 1 has subscribed Messaging Topic list on the MSGin5G Server 2.\nFigure 8.8.4.2a-1: MSGin5G Server 1 unsubscribes to Messaging Topic list on the MSGin5G Server 2\n1.\tThe MSGin5G Server 1 sends a Messaging Topic list unsubscription request to the MSGin5G Server 2. The request includes the information elements listed in Table 8.8.4.2a-1.\nTable 8.8.4.2a-1: Messaging Topic list unsubscription request\nInformation element\nStatus\nDescription\nOriginating MSGin5G Server address\nM\nThe MSGin5G Server which requests the unsubscription of the Messaging Topic list.\nRecipient MSGin5G Server address\nM\nThe MSGin5G Server which holds the Messaging Topic list.\nSecurity credentials\nO\nSecurity information required by the MSGin5G Server 2 and is left for implementation.\n2.\tUpon receiving the Messaging Topic list unsubscription request, the MSGin5G Server 2 validates this request and may verify the security credentials.\n3.\tThe MSGin5G Server 2 checks the locally stored Messaging Topic list subscription(s) and removes previous Message Topic list subscription from MSGin5G Server 1.\n4.\tThe MSGin5G Server 2 sends a Messaging Topic list unsubscription response to MSGin5G Server 1. The response includes the information listed in Table 8.8.4.2a-2.\nTable 8.8.4.2a-2: Messaging Topic list Subscription response\nInformation element\nStatus\nDescription\nSubscription status\nM\nIndicates whether the subscription was successfully deleted on the MSGin5G Server",
      "chunk_type": "general",
      "cross_references": [
        "clause_8.8.1",
        "table_8.8.4.2-1",
        "table_8.8.4.2-2",
        "table_8.8.4.2-3",
        "table_8.8.4.2-4",
        "table_8.8.4.2",
        "figure_8.8.4.2-1",
        "figure_8.8.4.2"
      ]
    },
    {
      "chunk_id": "ts_23.554_8.8.4.3",
      "section_id": "8.8.4.3",
      "section_title": "Messaging Topic Subscription between different MSGin5G Servers",
      "content": "If the MSGin5G Server 1 works in Mod.A (see clause 8.8.4.1), upon receiving a Messaging Topic subscription request from MSGin5G Client or Application Server, if the Messaging Topic is included in the Messaging Topic list of MSGin5G Server 2, the MSGin5G Server 1 forwards the Messaging Topic subscription request to MSGin5G Server 2. Otherwise, the MSGin5G Server 1 handles the Messaging Topic subscription request as specified in clause 8.8.3.\nIf the MSGin5G Server 1 works in Mod.B (see clause 8.8.4.1), upon receiving a Messaging Topic subscription request from MSGin5G Client or Application Server, if the Messaging Topic is not included in the Messaging Topic list of MSGin5G Server 2, the MSGin5G Server 1 handles the Messaging Topic subscription request as specified in clause 8.8.1. Otherwise, it may subscribe one or more Messaging Topic(s) from the Messaging Topic list by using the procedure specified in clause 8.8.1 with the clarification listed below.\nThe procedure for the Messaging Topic subscription for both Mod. A and Mod. B. between MSGin5G Servers is as follows:\n1.\tThe MSGin5G Server 1 includes the information elements listed in Table 8.8.4.3-1 instead of the information elements listed in Table 8.8.1-1.\nTable 8.8.4.3-1: Messaging Topic subscription request\nInformation element\nStatus\nDescription\nOriginating UE Service ID/AS Service ID (see NOTE 1)\nO\nThe service identity of the sending MSGin5G Client or the sending Application Server.\nThis IE shall be included if MSGin5G Server 1 forwards Messaging Topic subscription request from the MSGin5G UE/Application Server served by it to MSGin5G Server 2.\nMSGin5G Server address (see NOTE 1)\nO\nThe MSGin5G Server which subscribes the Messaging Topic(s).\nThis IE shall be included if MSGin5G Server 1 subscribe the Messaging Topic on behalf of all MSGin5G UE/Application Server served by it.\nSecurity credentials\nO\nSecurity information required by the MSGin5G Server 2 and is left for implementation.\nMessaging Topic (see NOTE 2)\nM\nA list of Messaging Topic(s) that is to be subscribed. The number of Messaging Topic(s) included in this IE can be one or more.\nExpiration\nO\nThe date and time when the subscription expires.\nThis date and time apply to all Messaging Topic(s) subscribed in this request.\nIf this IE is included, the value of it should be larger than 0.\nIf this IE is not included, the expiration time is subject to operator policy.\nNOTE 1:\tOnly one of these IEs shall be included.\nNOTE 2:\tThe content of the Messaging Topic is out of scope of 3GPP specifications.\n2.\tUpon receiving the Messaging Topic subscription request, the MSGin5G Server 2 validates this request and may verify the security credentials.\n3.\tThe MSGin5G Server 2 handles the Originating UE Service ID/AS Service ID or MSGin5G Server address included in the Messaging Topic subscription request as the UE Service ID/AS Service ID included in Table 8.8.1-1.",
      "chunk_type": "general",
      "cross_references": [
        "clause_8.8.4.1",
        "clause_8.8.3",
        "clause_8.8.1",
        "table_8.8.4.3-1",
        "table_8.8.1-1"
      ]
    },
    {
      "chunk_id": "ts_23.554_8.8.4.4",
      "section_id": "8.8.4.4",
      "section_title": "Messaging Topic Unsubscription between different MSGin5G Servers",
      "content": "If the MSGin5G Server 1 works in Mod.A (see clause 8.8.4.1), and upon receiving a Messaging Topic unsubscription request from MSGin5G Client or Application Server, and if the Messaging Topic is included in the Messaging Topic list of MSGin5G Server 2, the MSGin5G Server 1 forwards the Messaging Topic unsubscription request to MSGin5G Server 2. Otherwise, the MSGin5G Server 1 handles the Messaging Topic unsubscription request as specified in clause 8.8.1.\nIf the MSGin5G Server 1 works in Mod.B (see clause 8.8.4.1), it may also unsubscribe one or more Messaging Topic(s) from the Messaging Topic list held on MSGin5G Server 2 by using the procedure specified in clause 8.8.3 with the clarification listed below.\nThe procedure for the Messaging Topic unsubscription for both Mod. A and Mod. B. between MSGin5G Servers is as follows:\n1.\tThe MSGin5G Server 1 includes the information elements listed in Table 8.8.4.4-1 instead of the information elements listed in Table 8.8.3-1.\nTable 8.8.4.4-1: Messaging Topic unsubscription request\nInformation element\nStatus\nDescription\nOriginating UE Service ID/AS Service ID (see NOTE 1)\nO\nThe service identity of the sending MSGin5G Client or the sending Application Server.\nThis IE shall be included if MSGin5G Server 1 forwards Messaging Topic unsubscription request from the MSGin5G UE/Application Server served by it to MSGin5G Server 2.\nMSGin5G Server address (see NOTE 1)\nO\nThe MSGin5G Server which unsubscribes the Messaging Topic(s).\nThis IE shall be included if MSGin5G Server 1 subscribe the Messaging Topic on behalf of all MSGin5G UE/Application Server served by it.\nSecurity credentials\nO\nSecurity information required by the MSGin5G Server 2 and is left for implementation.\nMessaging Topic\nM\nA list of Messaging Topic(s) that is to be unsubscribed. The number of Messaging Topic(s) included in this IE can be one or more.\nNOTE 1:\tOnly one of these IEs shall be included.\n2.\tUpon receiving the Messaging Topic unsubscription request, the MSGin5G Server 2 validates this request and may validate the security credentials.\n3.\tThe MSGin5G Server 2 handles the Originating UE Service ID/AS Service ID or MSGin5G Server address included in the Messaging Topic unsubscription request as the UE Service ID/AS Service ID included in Table 8.8.3-1.\n8.9\tUsage of Network Capabilities",
      "chunk_type": "general",
      "cross_references": [
        "clause_8.8.4.1",
        "clause_8.8.1",
        "clause_8.8.3",
        "table_8.8.4.4-1",
        "table_8.8.3-1"
      ]
    },
    {
      "chunk_id": "ts_23.554_8.9.1",
      "section_id": "8.9.1",
      "section_title": "General",
      "content": "The present clause specifies the functionality leveraged by the MSGin5G Service via Core Network exposure.",
      "chunk_type": "definition",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.554_8.9.2.1",
      "section_id": "8.9.2.1",
      "section_title": "General",
      "content": "UE reachability status leverages the 3GPP network monitoring functionality exposed via T8/N33 reference point detailed in 3GPP TS 23.502 [7] and TS 29.522[10]. The MSGin5G Server may use the UE reachability status monitoring by using the 3GPP Network capabilities based on the information, i.e. whether UE reachability status monitoring is needed to be used for this message, received from the Application Server, i.e. based on Information Elements specified in clause 9.1.2.1 or based on the information received from the MSGin5G Client, i.e. based on Information Elements specified in clause 8.11.4. How (e.g., via request/response or subscription) to monitor the UE reachability using the 3GPP Network capabilities is implementation dependent.\nNOTE 1:\tUse of the UE reachability status monitoring procedure in the application layer has no impact to how the Core Network delivers the message to the UE.\nNOTE 2:\tMSGin5G Service provider policies may indicate whether the UE reachability status monitoring feature is enabled or not.",
      "chunk_type": "definition",
      "cross_references": [
        "clause_9.1.2.1",
        "clause_8.11.4",
        "ts_23.502",
        "ts_29.522"
      ]
    },
    {
      "chunk_id": "ts_23.554_8.9.2.2.1",
      "section_id": "8.9.2.2.1",
      "section_title": "Request-response",
      "content": "Figure 8.9.2.2.1-1 shows the procedure which may be used by the MSGin5G Server to make a request for UE reachability status information.\nPre-conditions:\n1.\tA UE hosts an MSGin5G Client.\n2.\tThe MSGin5G Client has registered with the MSGin5G Server and has shared UE contact information.\n3.\tThe MSGin5G Server has determined to subscribe for monitoring of UE reachability events in the Core Network, e.g., that the UE is a sleepy node.\nNOTE:\tHow the MSGin5G Server subscribes for monitoring of UE reachability events in the Core Network is implementation dependent.\nFigure 8.9.2.2.1-1: MSGin5G reachability status request-response.\n1.\tThe MSGin5G Server sends a one-time Monitoring Request to the 3GPP Network using SCEF/NEF capabilities.\nThe one-time Monitoring Request includes monitoring type set to UE_REACHABILITY, Maximum Number of Reports of 1 and does not include the Monitoring Duration IE.\n2.\tThe 3GPP network processes the monitoring request and determines the reachability status of the UE(s), as described in 3GPP TS 29.122 [9].\n3.\tIf the Monitoring Request is successfully processed, a monitoring response providing the UE(s) reachability status is sent to the MSGin5G Server. The response may include idle mode information e.g., active time granted to the UE, eDRX cycle length, periodic RAU/TAU timer., depending on the parameters indicated in the request.",
      "chunk_type": "general",
      "cross_references": [
        "figure_8.9.2.2.1-1",
        "ts_29.122"
      ]
    },
    {
      "chunk_id": "ts_23.554_8.9.2.2.2",
      "section_id": "8.9.2.2.2",
      "section_title": "Subscribe",
      "content": "Figure 8.9.2.2.2-1 shows the procedure which may be used by the MSGin5G Server to subscribe for monitoring of UE reachability.\nPre-conditions:\n1.\tA UE hosts an MSGin5G Client.\n2.\tThe MSGin5G Client has registered with the MSGin5G Server and has shared UE contact information.\n3.\tThe MSGin5G Server subscribes for monitoring of UE reachability events in the Core Network, e.g., that the UE is a sleepy node, based on the information, i.e. whether UE reachability status monitoring is needed to be used for this message, received from the Application Server or MSGin5G Client.\nNOTE:\tHow the MSGin5G Server subscribes for monitoring of UE reachability events in the Core Network is implementation dependent.\nFigure 8.9.2.2.2-1: MSGin5G reachability status subscribe.\n1.\tThe MSGin5G Server sends a Monitoring Event Subscribe request to the 3GPP Network using existing SCEF/NEF capabilities.\nThe Monitoring Event Subscribe is a Monitoring Request with monitoring type set to UE_REACHABILITY, and either the Maximum Number of Reports greater than 1 or the Monitoring Duration IE are included.\n3.\tThe 3GPP network processes the Monitoring Event Subscribe request as described in 3GPP TS 29.122 [9].\n4.\tIf the Monitoring Event Subscribe Request is successfully processed, a response indicating the request was accepted is sent to the MSGin5G Server.",
      "chunk_type": "general",
      "cross_references": [
        "figure_8.9.2.2.2-1",
        "ts_29.122"
      ]
    },
    {
      "chunk_id": "ts_23.554_8.9.2.2.3",
      "section_id": "8.9.2.2.3",
      "section_title": "Notify",
      "content": "Figure 8.9.2.2.3-1 shows the procedure which may be for updating MSGin5G reachability status.\nPre-conditions:\n1.\tThe MSGin5G Server has subscribed for reachability status monitoring for a UE or group of UEs.\n2.\tThe monitored UE(s) has transitioned to Connected Mode, Idle Mode or eDRX paging occasion and the 3GPP Network Entities has detected the change in UE reachability status.\nFigure 8.9.2.2.3-1: MSGin5G reachability status notify.\n1.\tBased on the reachability status change of a monitored UE(s), the 3GPP Network sends a Monitoring Notification message for UE reachability to the MSGin5G Server as specified in 3GPP TS 29.122 [9].\nThe notification may include idle mode information e.g., active time granted to the UE, eDRX cycle length, periodic RAU/TAU timer, depending on the subscription.\n2.\tAfter receiving a UE Reachability monitoring notification, the MSGin5G Server responds with an acknowledgement of the notification via SCEF/NEF.\n3.\tThe MSGin5G Server uses the information provided in the UE reachability monitoring event report to update its information on the UE's availability, e.g., MSGin5G Client Availability information. The MSGin5G Server may provide additional services based on reachability information, e.g., forward a stored message.",
      "chunk_type": "general",
      "cross_references": [
        "figure_8.9.2.2.3-1",
        "ts_29.122"
      ]
    },
    {
      "chunk_id": "ts_23.554_8.9.2.2.4",
      "section_id": "8.9.2.2.4",
      "section_title": "Unsubscribe",
      "content": "Figure 8.9.2.2.4-1 shows the procedure which may be used by the MSGin5G Server to unsubscribe from monitoring of UE reachability.\nPre-conditions:\n1.\tThe MSGin5G Server has subscribed for reachability status monitoring for a UE or group of UEs.\n2.\tLater, the MSGin5G Server unsubscribes for monitoring of UE reachability events in the Core Network, based on the information received from the Application Server or MSGin5G Client.\nNOTE 1:\tHow the MSGin5G Server subscribes or unsubscribes for monitoring of UE reachability events in the Core Network is implementation dependent.\nNOTE 2:\tIf the initial MSGin5G Server subscription for reachability status monitoring reaches the Maximum Number of Reports or Monitoring Duration indicated in the request, the 3GPP Network automatically deletes the subscription and an explicit MSGin5G reachability status unsubscribe is not necessary.\nFigure 8.9.2.2.4-1: MSGin5G reachability status unsubscribe.\n1.\tThe MSGin5G Server sends a Monitoring event unsubscribe request to the 3GPP Network using existing SCEF/NEF capabilities.\n2.\tThe 3GPP network processes the Monitoring event unsubscribe request and deletes the subscription, as described in 3GPP TS 29.122 [9].\n3.\tIf the Monitoring event unsubscribe request is successfully processed, a response indicating the subscription was deleted is sent to the MSGin5G Server via SCEF/NEF.",
      "chunk_type": "general",
      "cross_references": [
        "figure_8.9.2.2.4-1",
        "ts_29.122"
      ]
    },
    {
      "chunk_id": "ts_23.554_8.9.2.3",
      "section_id": "8.9.2.3",
      "section_title": "Flows",
      "content": "The following information flows are specified for UE reachability status monitoring:\n-\tUE Reachability monitoring request and response;\n-\tUE Reachability monitoring subscribe and unsubscribe\n-\tUE Reachability monitoring notify\nAll UE reachability monitoring interactions from MSGin5G Server (acting as SCS/AS) to SCEF/NEF occur over T8/N33 reference points capabilities detailed in 3GPP TS 23.502 [7] and TS 29.522[10]. As specified in TS 29.522[10] clause 4.4.2, all UE Reachability monitoring procedures use APIs specified in TS 23.682 [8] clause 5.6.1.4 and 3GPP TS 29.122 [9] clause 4.4.2.2.",
      "chunk_type": "procedure",
      "cross_references": [
        "ts_29.522_clause_4.4.2",
        "ts_23.682_clause_5.6.1.4",
        "ts_29.122_clause_4.4.2.2",
        "ts_23.502",
        "ts_29.522",
        "ts_23.682",
        "ts_29.122"
      ]
    },
    {
      "chunk_id": "ts_23.554_8.9.3.1",
      "section_id": "8.9.3.1",
      "section_title": "General",
      "content": "MSGin5G device triggering is the means by which an MSGin5G Server leverages the 3GPP network device triggering capabilities, exposed via T8 /N33 reference point, while attempting to deliver an MSGin5G message. For example, when an Application Server initiates an MSGin5G message request, but the target MSGin5G UE is not reachable, the MSGin5G Server may use the 3GPP network device triggering mechanism to wake up the device and then deliver the payload to the destination.",
      "chunk_type": "definition",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.554_8.9.3.2",
      "section_id": "8.9.3.2",
      "section_title": "Procedure",
      "content": "Figure 8.9.3.2-1 shows the MSGin5G device triggering procedure.\nPre-conditions:\n1.\tThe target UE is an MSGin5G UE.\n2.\tThe target MSGin5G Client is registered with the MSGin5G Server.\n3.\tAt a later time, after the registration is completed, the MSGin5G UE has become unreachable by the MSGin5G Server.\nFigure 8.9.3.2-1: MSGin5G Triggering Procedure\n1.\tThe MSGin5G Server receives a request for sending an MSGin5G message, the request includes the IEs as detailed in clause 9.1.2.1.\n2.\tIf the MSGin5G Server determines that the recipient MSGin5G Client is not reachable, it initiates a device trigger request via the SCEF/NEF.\nTo determine the reachability of the target MSGin5G UE, the MSGin5G Server may use the UE reachability status monitoring procedure in clause 8.9.2. The MSGin5G Server may also use availability information provided by the MSGin5G Client at registration in the MSGin5G Client Communication Availability IE, as detailed in Table 8.2.1-1.\nNOTE 1:\tHow the MSGin5G Server uses the MSGin5G Client Communication Availability IE, the UE reachability status monitoring procedure, or a combination thereof to make this determination is implementation specific.\nNOTE 2:\tIf the recipient MSGin5G Client is reachable then the trigger request is not required, the MSGin5G Server sends the MSGin5G message as detailed in clause 8.3.3 and the rest of the steps in this procedure are skipped.\n3.\tThe MSGin5G Server sends a request for Device Triggering via SCEF/NEF and determines the flow as detailed in clause 8.9.3.2. The Device Triggering request uses the UE Identifier, port number(s) and associated protocol information provided by the MSGin5G Client at registration in the MSGin5G Client Triggering Information IE.\nThe MSGin5G Server may use MSGin5G Client Communication Availability and/or pre-configured information to determine the timing of the Device Triggering request, e.g. the trigger may be sent to ensure that the target UE is reachable prior to resuming MSGin5G communications.\n4.\tThe MSGin5G Server receives a response from SCEF/NEF indicating the success or failure status of the request, as detailed in clause 8.9.3.3.\n5.\tThe device trigger is delivered to the target via SCEF/NEF and the Core Network. The targeted MSGin5G Client or Application Client receives the device trigger request. The targeted MSGin5G Client or Application Client parses the payload of the trigger request and determines the device trigger purpose. The target UE becomes reachable, and the MSGin5G Client or Application Client becomes available for further MSGin5G communications.\n6.\tThe MSGin5G Server receives a Device Triggering delivery status report from SCEF/NEF indicating the success of the delivery, as detailed in clause 8.9.3.3.\n7.\tThe MSGin5G Server send a Device Triggering delivery status report response to SCEF/NEF to acknowledge the delivery status report, as detailed in clause 8.9.3.3.\nBased on the trigger purpose derived from the payload, the targeted MSGin5G Client performs the corresponding actions (e.g. establish access network connectivity, contact the Application Server).",
      "chunk_type": "procedure",
      "cross_references": [
        "clause_9.1.2.1",
        "clause_8.9.2",
        "clause_8.3.3",
        "clause_8.9.3.2",
        "clause_8.9.3.3",
        "table_8.2.1-1",
        "figure_8.9.3.2-1"
      ]
    },
    {
      "chunk_id": "ts_23.554_8.9.3.3",
      "section_id": "8.9.3.3",
      "section_title": "Flows",
      "content": "The following information flows are specified for MSGin5G triggering:\n1.\trequest for device triggering;\n2.\tresponse to device triggering;\n3.\tdevice triggering delivery report; and\n4.\tdevice triggering delivery report response.\nAll device triggering interactions from MSGin5G Server (acting as SCS/AS) to SCEF/NEF occur over T8/N33 reference points, using capabilities detailed in 3GPP TS 23.502 [7] and TS 29.522[10]. As specified in TS 29.522[10] clause 4.4.3, all device triggering flows use APIs specified in TS 23.682 [8] clause 5.17.1 and 3GPP TS 29.122 [9] clause 4.4.6.\n8.10\tUsage of SEAL",
      "chunk_type": "procedure",
      "cross_references": [
        "ts_29.522_clause_4.4.3",
        "ts_23.682_clause_5.17.1",
        "ts_29.122_clause_4.4.6",
        "ts_23.502",
        "ts_29.522",
        "ts_23.682",
        "ts_29.122"
      ]
    },
    {
      "chunk_id": "ts_23.554_8.10.1",
      "section_id": "8.10.1",
      "section_title": "General",
      "content": "The MSGin5G Service functional entities MSGin5G Client and MSGin5G Server utilize the SEAL services. All SEAL services specified in 3GPP TS 23.434 [5] are available to MSGin5G Service. In this clause, only the details of the information flows, procedures and APIs whose utilization by MSGin5G Service are well-known are described.",
      "chunk_type": "definition",
      "cross_references": [
        "ts_23.434"
      ]
    },
    {
      "chunk_id": "ts_23.554_8.10.2.1",
      "section_id": "8.10.2.1",
      "section_title": "General",
      "content": "The MSGin5G Service functional entities MSGin5G Client and MSGin5G Server utilize configuration management service procedures of SEAL to support MSGin5G Service.",
      "chunk_type": "definition",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.554_8.10.2.2",
      "section_id": "8.10.2.2",
      "section_title": "Information flows",
      "content": "The following information flows of Configuration Management service are applicable for the MSGin5G Service:\n-\tGet VAL UE configuration request specified in subclause 11.3.2.1 of 3GPP TS 23.434 [5];\n-\tBesides the IEs specified in subclause 11.3.2.1 of 3GPP TS 23.434 [5], the information in table 8.10.2.2-1 is also included in the Get VAL UE configuration request.\nTable 8.10.2.2-1: Additional information in the Get VAL UE configuration request\nInformation element\nStatus\nDescription\nMSGin5G UE information\nO\nOther information needed by the configuration procedure. (NOTE)\nNOTE:\tThe information can be the device type, device Vendor, etc. It is specified by application provider or MSGin5G Service provider and is out of scope of this document. The MSGin5G Service provider can configure the MSGin5G UE with different configuration data based on this IE. E.g. all sensors can be configured to a same MSGin5G Server.\n-\tGet VAL UE configuration response specified in subclause 11.3.2.2 of 3GPP TS 23.434 [5];\n-\tBesides the IEs specified in subclause 11.3.2.2 of 3GPP TS 23.434 [5], the information in table 8.10.2.2-2 is also included in the Get VAL UE configuration response.\nTable 8.10.2.2-2: Additional information in the Get VAL UE configuration response\nInformation element\nStatus\nDescription\nUE service ID\nM\nMSGin5G Service ID assigned to the requesting MSGin5G UE.\nMSGin5G Server address\nM\nThe MSGin5G Server which serves this MSGin5G UE.\nMSGin5G Service specified information\nO\nThe specific information of the MSGin5G Service specified by the MSGin5G Service provider. (NOTE)\nNOTE:\tE.g. the segment size of MSGin5G message in this service provider, the detailed definition is out of scope of this document.\nThe usage of the above information flows is clarified as below:\n-\tThe VAL UE ID is the MSGin5G UE ID;\n-\tVAL service ID is the service identifier of the MSGin5G Service; and\n-\tVAL UE configuration data is the MSGin5G UE configuration data.",
      "chunk_type": "procedure",
      "cross_references": [
        "ts_23.434_clause_11.3.2.1",
        "ts_23.434_clause_11.3.2.2",
        "table_8.10.2.2-1",
        "table_8.10.2.2-2",
        "ts_23.434"
      ]
    },
    {
      "chunk_id": "ts_23.554_8.10.2.3",
      "section_id": "8.10.2.3",
      "section_title": "Procedures",
      "content": "The following procedures of configuration management service are applicable for the MSGin5G Service:\n-\tVAL UE configuration data specified in subclause 11.3.3 of 3GPP TS 23.434 [5].",
      "chunk_type": "procedure",
      "cross_references": [
        "ts_23.434_clause_11.3.3",
        "ts_23.434"
      ]
    },
    {
      "chunk_id": "ts_23.554_8.10.3.1",
      "section_id": "8.10.3.1",
      "section_title": "General",
      "content": "The MSGin5G Service functional entities MSGin5G Client and MSGin5G Server utilize SEAL Client and SEAL Server for the group management service (e.g. creation, join, leave) on the group configuration information (e.g. group join policy, group leader) provided by the MSGin5G Server. The decisions and corresponding triggers (e.g. group creation, join, leave and deletion) for group management are responsibility of the application leveraging MSGin5G Service. The group management service of SEAL provides support for creating group for MSGin5G Service for applications leveraging MSGin5G Service.",
      "chunk_type": "definition",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.554_8.10.3.2",
      "section_id": "8.10.3.2",
      "section_title": "Information flows",
      "content": "The information flows of group management procedures are specified in 3GPP TS 23.434 [5].",
      "chunk_type": "procedure",
      "cross_references": [
        "ts_23.434"
      ]
    },
    {
      "chunk_id": "ts_23.554_8.10.3.3",
      "section_id": "8.10.3.3",
      "section_title": "Procedures",
      "content": "The following procedures of group management service of SEAL as specified in 3GPP TS 23.434 [5] are applicable for the MSGin5G Service:\n-\tGroup creation specified in clause 10.3.3;\n--\tSubsequent to Step 3, when the identity list with the list of VAL user IDs or VAL UE IDs that are part of the created group contain the list of VAL user IDs or VAL UE IDs which does not have group management client (e.g. Legacy 3GPP UEs, Non-3GPP UEs or Application Server), it is responsibility of the VAL server (MSGin5G Server) to initiate the group creation notification towards those UEs.\n-\tGroup membership update specified in clause 10.3.5.2;.\n-\tGroup configuration management specified in clause 10.3.6;\n-\tLocation-based group creation specified in clause 10.3.7;\n-\tGroup announcement and join specified in clause 10.3.8;\n-\tGroup member leave specified in clause 10.3.9;\n-\tTemporary groups specified in clause 10.3.10;\n-\tGroup deletion specified in clause 10.3.13.\nNOTE:\tIf the UE that is involved the Group management procedures does not have group management client (e.g. Legacy 3GPP UEs, Non-3GPP UEs or Application Server), it is responsibility of the VAL server (MSGin5G Server) to initiate the necessary group management request/response towards SEAL Group Management server on behalf of those UE. And if applicable, send and receive the necessary group management request/response to/from those UEs.",
      "chunk_type": "procedure",
      "cross_references": [
        "clause_10.3.3",
        "clause_10.3.5.2",
        "clause_10.3.6",
        "clause_10.3.7",
        "clause_10.3.8",
        "clause_10.3.9",
        "clause_10.3.10",
        "clause_10.3.13",
        "ts_23.434"
      ]
    },
    {
      "chunk_id": "ts_23.554_8.10.3.4",
      "section_id": "8.10.3.4",
      "section_title": "APIs",
      "content": "The following APIs of group management service of SEAL as specified in 3GPP TS 23.434 [5] are applicable for the MSGin5G Service:\n-\tSS_GroupManagement API specified in clause 10.4.2;\n-\tSS_Group_Management_Event API specified in clause 10.4.5.",
      "chunk_type": "general",
      "cross_references": [
        "clause_10.4.2",
        "clause_10.4.5",
        "ts_23.434"
      ]
    },
    {
      "chunk_id": "ts_23.554_8.11.1",
      "section_id": "8.11.1",
      "section_title": "General",
      "content": "This clause specifies the procedures for an Application Client residing on a different UE-2 than the UE with the MSGin5G Client (resides on MSGin5G UE-1) to perform Application Client registration, to send messages and receive messages using MSGin5G Client. The communication between Application Client and MSGin5G Client is over MSGin5G-5 reference point.\nNOTE: The procedure in this clause is also applicable to UE-2 that is out of network coverage.\nEditor's note: The API definition for the procedures defined in this clause is FFS.\nEditor's note: Whether the procedures in this clause are applicable to Application Client within MSGin5G UE-1 is FFS.",
      "chunk_type": "definition",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.554_8.11.2",
      "section_id": "8.11.2",
      "section_title": "Application Client registration using MSGin5G Client",
      "content": "The signalling flow for registration of Application Client on the UE-2 with MSGin5G Client on MSGin5G UE-1 to use MSGin5G service is illustrated in figure 8.11.2-1.\nPre-conditions:\n1.\tThe MSGin5G UE-1 is configured with information to recognize and authorize UE-2.\n2.\tThe Application Client on UE-2 has discovered or is configured that the MSGin5G Client resides on MSGin5G UE-1 and can provide the MSGin5G service capability to it.\n3.\tThe UE-2 is using NR-PC5 to communicate with MSGin5G UE-1.\nFigure 8.11.2-1: Registration of Application Client on UE-2 with MSGin5G Client on MSGin5G UE-1\n1)\tAn Application Client on the UE-2 registers with MSGin5G Client-1 in MSGin5G UE-1 to use MSGin5G service. The request message includes information elements as specified in Table 8.11.2-1.\nTable 8.11.2-1: Information elements for Registration to gateway UE request\nInformation element\nStatus\nDescription\nLayer-2 ID\nM\nLayer-2 identity of UE-2\nApplication ID\nM\nApplication ID of the application client on UE-2\nCredential information\nM\nUE-2 credential information\nEditor's note 1: The security parameters to include in the message between UE-2 and MSGin5G UE-1 are FFS.\nEditor's note 2: The alignment between the request/response name in clause 8.11.2/8.11.3 and the updated architecture is FFS.\n2)\tUpon receiving the request from the Application Client, the MSGin5G Client authorizes the Application Client on UE-2 to it for MSGin5G service. The MSGin5G Client assigns a Registration ID and stores the mapping of the Registration ID, Application ID and Layer-2 ID of the UE-2.\nNOTE 1:\tThe MSGin5G Client may reject the request for registration to use it for MSGin5G service based on local condition (like available power or connectivity to access network or any other reason outside the scope of 3GPP).\n3)\tThe MSGin5G Client sends a response to the Application Client. The response message includes information elements as specified in Table 8.11.2-2.\nTable 8.11.2-2: Information elements for Registration to gateway UE response\nInformation element\nStatus\nDescription\nResult\nM\nIndicates success or failure of the request\nRegistration ID\nO\nIdentifies registration. This IE is included only if Result IE is set to success.\nFailure reason\nO\nIndicates failure reason. This IE is included only if Result IE is set to failure.\nNOTE 2:\tIf the MSGin5G Client decided to reject the request for registration or if authorization fails in step 2, the MSGin5G Client sends a failure response to the Application Client. Otherwise, the MSGin5G Client sends a success response to the Application Client.\nNOTE 3:\tThe MSGin5G Client may provide MSGin5G service capabilities for multiple Application Clients, at the same time.",
      "chunk_type": "general",
      "cross_references": [
        "clause_8.11.2",
        "table_8.11.2-1",
        "table_8.11.2-2",
        "figure_8.11.2-1"
      ]
    },
    {
      "chunk_id": "ts_23.554_8.11.3",
      "section_id": "8.11.3",
      "section_title": "Application Client de-registration using MSGin5G Client",
      "content": "The signalling flow for deregistration of Application Client on the UE-2 with MSGin5G Client-1 on MSGin5G UE-1 is illustrated in figure 8.11.3-1.\nPre-conditions:\n1.\tThe Application Client on UE-2 is successfully registered with MSGin5G Client on MSGin5G UE-1.\nFigure 8.11.3-1: Deregistration of Application Client on UE-2 with MSGin5G Client on MSGin5G UE-1\n1)\tAn Application Client on the UE-2 deregisters with MSGin5G Client in MSGin5G UE-1 to discontinue usage of the MSGin5G Service. The request message includes information elements as specified in Table 8.11.3-1.\nTable 8.11.3-1: Information elements for Deregistration to gateway UE request\nInformation element\nStatus\nDescription\nRegistration ID\nM\nIdentifies the registration\nCredential information\nM\nUE-2 credential information\n2)\tUpon receiving the request from the Application Client, the MSGin5G Client removes the mapping of Registration ID, Application ID and Layer-2 ID of the UE-2. The MSGin5G Client sends a response to the Application Client on UE-2. The response message includes the information elements as specified in Table 8.11.3-2.\nTable 8.11.3-2: Information elements for Deregistration to gateway UE response\nInformation element\nStatus\nDescription\nResult\nM\nIndicates success or failure of the request\nFailure reason\nO\nIndicates failure reason. This IE is included only if the Result IE is set to failure.",
      "chunk_type": "general",
      "cross_references": [
        "table_8.11.3-1",
        "table_8.11.3-2",
        "figure_8.11.3-1"
      ]
    },
    {
      "chunk_id": "ts_23.554_8.11.4",
      "section_id": "8.11.4",
      "section_title": "Application Client sending a message using MSGin5G Client on another UE",
      "content": "The signalling flow for the Application Client on the UE-2 to send a message using the MSGin5G Client on MSGin5G UE-1 is illustrated in figure 8.11.4-1.\nPre-conditions:\n1.\tThe MSGin5G UE-1 is connected to an access network that provides connectivity to the MSGin5G Server.\n2.\tThe Application Client on UE-2 is successfully registered with MSGin5G UE-1 to use MSGin5G service.\nFigure 8.11.4-1: Application Client on UE-2 sends message using MSGin5G Client on MSGin5G UE-1\n1)\tAn Application Client on the UE-2 sends a request to send MSGin5G message to the MSGin5G Client. The information elements defined in Table 8.11.4-1 are included in the message.\nTable 8.11.4-1: Information elements for Request to send MSGin5G message\nInformation element\nStatus\nDescription\nRecipient UE Service ID or AS Service ID (see NOTE)\nO\nThe service identity of the recipient. This IE is mandatory to initiate Point-to-Point messaging and Point-to-AS messaging.\nGroup Service ID (see NOTE)\nO\nThe service identifier of the target MSGin5G Group.\nThis IE is mandatory to initiate Group messaging.\nBroadcast Area ID\n(see NOTE)\nO\nThe service identifier of the Broadcast Service Area where the message needs to be broadcast.\nThis IE is mandatory in the Broadcast Message.\nMessaging Topic\n(see NOTE)\nO\nIndicates which Messaging Topic this message is related to.\nThis IE is mandatory for a message distribution based on topic.\nApplication ID\nO\nIdentifies the application(s) for which the payload is intended.\nPayload\nM\nPayload of the message.\nMSGin5G Server/Client is unaware of the content.\nDelivery status required\nO\nIndicates whether delivery status is required or not.\nPriority type\nO\nApplication priority level requested for this message as specified in Table 8.3.2-1.\nNOTE:\tOnly one occurrence shall be present of any of these IEs.\nEditor's note:\tIf table 8.11.4-1 should be moved to separate clause to be applicable for communication between any Application Client and any MSGin5G Client is FFS.\n2)\tUpon receiving the request from the Application Client in UE-2, the MSGin5G Client constructs an MSGin5G message with the related IEs specified in table 8.3.2-1 and sends the MSGin5G message.\na)\tif the size of the received message exceeds the maximum allowed packet size, the MSGin5G Client sends the message as specified in clause 8.5; or\nb)\tIf the size of the received message does not exceed the maximum allowed packet size, the MSGin5G Client sends the message as specified in clause 8.7.; or\nc)\tIf the size of the received message does not exceed the maximum allowed packet size, the MSGin5G Client may apply message aggregation as specified in clause 8.4 before sending the message as specified in clause 8.7.\nNOTE 1:\tThe MSGin5G Client may also reject the request to send the MSGin5G message based on local condition (like available power or connectivity to access network or any other reason outside the scope of 3GPP).\n3)\tThe MSGin5G Client sends a response to Application Client on UE-2. The response message includes the information elements as specified in Table 8.11.4-2.\nTable 8.11.4-2: Information elements for Response to send MSGin5G message\nInformation element\nStatus\nDescription\nUE Service ID or AS Service ID or Group Service ID or Broadcast Area ID or Message Topic\nM\nThe service identifier that the message is sent\nResult\nM\nIndicates success or failure of the request\nFailure reason\nO\nIndicates failure reason. This IE is included only if Result IE is set to failure.\nNOTE 2:\tIf the MSGin5G Client has decided to reject the request to send the message or the MSGin5G Client received a reject response from the MSGin5G Server in step 2, the MSGin5G Client sends a failure response to the Application Client and stops performing further steps.\n4)\tIf delivery status is requested in the message in step 1, the MSGin5G Client may receive MSGin5G message delivery status report from the MSGin5G Server.\n5)\tUpon receiving the MSGin5G message delivery status report, the MSGin5G Client sends the message delivery status report to the Application Client on UE-2. The message delivery status report includes information elements as specified in Table 8.11.4-3.\nTable 8.11.4-3: Information elements for MSGin5G message delivery status\nInformation element\nStatus\nDescription\nUE Service ID or AS Service ID\nM\nThe service identifier that sends the message delivery status\nDelivery status\nM\nIndicates delivery status",
      "chunk_type": "general",
      "cross_references": [
        "clause_8.5",
        "clause_8.7",
        "clause_8.4",
        "table_8.11.4-1",
        "table_8.3.2-1",
        "table_8.11.4-2",
        "table_8.11.4-3",
        "figure_8.11.4-1"
      ]
    },
    {
      "chunk_id": "ts_23.554_8.11.5",
      "section_id": "8.11.5",
      "section_title": "Application Client receiving message via MSGin5G Client on another UE",
      "content": "The signalling flow for an Application Client on the UE-2 to receive a message using the MSGin5G Client on MSGin5G UE-1 is illustrated in figure 8.11.5-1.\nPre-conditions:\n1.\tThe MSGin5G UE-1 is connected to an access network that provides connectivity to the MSGin5G Server.\n2.\tThe Application Client on UE-2 is successfully registered with MSGin5G UE-1 to use MSGin5G service.\nFigure 8.11.5-1: Application Client on UE-2 receives message using MSGin5G Client on MSGin5G UE‑1\n1)\tThe MSGin5G Client receives an MSGin5G message as specified in clause 8.3.3 for the Application Client on UE-2. The MSGin5G Client performs reassembly if the received message is part of a segmented message and waits till the whole message is received. The MSGin5G Client may also perform the segment recovery procedure as specified in clause 8.5.4 to recover missing segments.\n2)\tUpon successfully receiving a message for the Application Client on UE-2, the MSGin5G Client sends a message received request to the Application Client based on the Application ID in the received message. The message includes information elements as specified in Table 8.11.5-1.\nTable 8.11.5-1: Information elements for Message received request\nInformation element\nStatus\nDescription\nRecipient UE Service ID/AS Service ID (see NOTE)\nO\nThe service identifier of the originator. This IE is mandatory for Point-to-Point messaging and AS-to-Point messaging.\nGroup Service ID (see NOTE)\nO\nThe service identifier of the MSGin5G Group\nThis IE is mandatory for Group Message.\nMessaging Topic\n(see NOTE)\nO\nIndicates the Topic for which the message is received. This IE is mandatory for a Topic Message.\nPayload\nM\nPayload of the message.\nMSGin5G Server/Client is unaware of the content.\nDelivery status required\nO\nIndicates whether delivery status is required or not\nPriority type\nO\nApplication priority level requested for this message as specified in Table 8.3.2-1.\nNOTE:\tOnly one occurrence shall be present of any of these IEs.\n3)\tUpon successfully receiving the message, the Application Client on UE-2 sends the message received response to the MSGin5G Client.\n4)\tIf delivery status is requested in the received message, the Application Client on UE-2 sends the message delivery status to the MSGin5G Client.\n5)\tUpon receiving the delivery status, the MSGin5G Client constructs the MSGin5G message delivery status report as specified in table 8.3.4-1 and sends it to the MSGin5G Server.",
      "chunk_type": "general",
      "cross_references": [
        "clause_8.3.3",
        "clause_8.5.4",
        "table_8.11.5-1",
        "table_8.3.2-1",
        "table_8.3.4-1",
        "figure_8.11.5-1"
      ]
    },
    {
      "chunk_id": "ts_23.554_9.1.1.1.1",
      "section_id": "9.1.1.1.1",
      "section_title": "General",
      "content": "API description: This API enables the Application Server to send MSGin5G message to the MSGin5G Server.",
      "chunk_type": "definition",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.554_9.1.1.1.2",
      "section_id": "9.1.1.1.2",
      "section_title": "Send_MSGin5G_Message operation",
      "content": "API operation name: Send_MSGin5G_Message\nDescription: Send an MSGin5G message to MSGin5G Server.\nKnown Consumers: Application Server\nInputs: Refer subclause 9.1.2.1\nOutputs: Refer subclause 8.3.2\nSee subclause 8.3.2 for the details of usage of this API operation.",
      "chunk_type": "general",
      "cross_references": [
        "clause_9.1.2.1",
        "clause_8.3.2"
      ]
    },
    {
      "chunk_id": "ts_23.554_9.1.1.2.1",
      "section_id": "9.1.1.2.1",
      "section_title": "General",
      "content": "API description: This API enables the Message Gateway or other 5GS Function to deliver MSGin5G message to the MSGin5G Server.",
      "chunk_type": "definition",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.554_9.1.1.2.2",
      "section_id": "9.1.1.2.2",
      "section_title": "Send_ MSGin5G_Message operation",
      "content": "API operation name: Send_MSGin5G_Message\nDescription: Send an MSGin5G message to MSGin5G Server.\nKnown Consumers: L3G, N3G.\nInputs: Refer subclause 8.3.2\nOutputs: Refer subclause 8.3.2\nSee subclause 8.3.2 for the details of usage of this API operation.",
      "chunk_type": "general",
      "cross_references": [
        "clause_8.3.2"
      ]
    },
    {
      "chunk_id": "ts_23.554_9.1.1.3.1",
      "section_id": "9.1.1.3.1",
      "section_title": "General",
      "content": "API description: This API enables the Application Server to delivery MSGin5G message delivery status report to the MSGin5G Server.",
      "chunk_type": "definition",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.554_9.1.1.3.2",
      "section_id": "9.1.1.3.2",
      "section_title": "Report_Message_Delivery_Status operation",
      "content": "API operation name: Report_Message_Delivery_Status\nDescription: Send an MSGin5G message delivery status report to MSGin5G Server.\nKnown Consumers: Application Server\nInputs: Refer subclause 9.1.2.2\nOutputs: Refer subclause 8.3.4\nSee subclause 8.3.4 for the details of usage of this API operation.",
      "chunk_type": "general",
      "cross_references": [
        "clause_9.1.2.2",
        "clause_8.3.4"
      ]
    },
    {
      "chunk_id": "ts_23.554_9.1.1.4.1",
      "section_id": "9.1.1.4.1",
      "section_title": "General",
      "content": "API description: This API enables the Message Gateway to deliver MSGin5G message delivery status reports to the MSGin5G Server.",
      "chunk_type": "definition",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.554_9.1.1.4.2",
      "section_id": "9.1.1.4.2",
      "section_title": "Report_Message_Delivery_Status operation",
      "content": "API operation name: Report_Message_Delivery_Status\nDescription: Send an MSGin5G message delivery status report to MSGin5G Server.\nKnown Consumers: L3G, N3G, BMG.\nInputs: Refer subclause 8.3.4\nOutputs: Refer subclause 8.3.4\nSee subclause 8.3.4 for the details of usage of this API operation.",
      "chunk_type": "general",
      "cross_references": [
        "clause_8.3.4"
      ]
    },
    {
      "chunk_id": "ts_23.554_9.1.1.5.1",
      "section_id": "9.1.1.5.1",
      "section_title": "General",
      "content": "API description: This API enables the Application Server to register to MSGin5G Server.",
      "chunk_type": "definition",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.554_9.1.1.5.2",
      "section_id": "9.1.1.5.2",
      "section_title": "Registration operation",
      "content": "API operation name: Registration\nDescription: Do registration or update registration to an MSGin5G Server, by using this API, the Application Server provides/updates its information, including the URL used for the message delivery from MSGin5G Server to Application Server.\nKnown Consumers: Application Server\nInputs: Refer subclause 9.1.2.3\nOutputs: Refer subclause 9.1.2.4",
      "chunk_type": "general",
      "cross_references": [
        "clause_9.1.2.3",
        "clause_9.1.2.4"
      ]
    },
    {
      "chunk_id": "ts_23.554_9.1.1.5.3",
      "section_id": "9.1.1.5.3",
      "section_title": "Deregistration operation",
      "content": "API operation name: Send_MSGin5G_Message\nDescription: Do deregistration with an MSGin5G Server.\nKnown Consumers: Application Server\nInputs: Refer subclause 9.1.2.5\nOutputs: Refer subclause 9.1.2.6",
      "chunk_type": "general",
      "cross_references": [
        "clause_9.1.2.5",
        "clause_9.1.2.6"
      ]
    },
    {
      "chunk_id": "ts_23.554_9.1.1.6.1",
      "section_id": "9.1.1.6.1",
      "section_title": "General",
      "content": "API description: This API enables another MSGin5G Server to communicate with the MSGin5G Server to subscribe and receive subsequent notification events of the Messaging Topic list and information of specific message topics on the MSGin5G Server.",
      "chunk_type": "definition",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.554_9.1.1.6.2",
      "section_id": "9.1.1.6.2",
      "section_title": "Subscribe Messaging Topiclist operation",
      "content": "API operation name: Subscribe_Messaging_Topiclist\nDescription: Subscribing to changes to Messaging Topic list on the MSGin5G Server.\nKnown Consumers: MSGin5G Server\nInputs: Refer subclause 8.8.4.2\nOutputs: Refer subclause 8.8.4.2\nSee subclause 8.8.4.2 for the details of usage of this API operation",
      "chunk_type": "general",
      "cross_references": [
        "clause_8.8.4.2"
      ]
    },
    {
      "chunk_id": "ts_23.554_9.1.1.6.3",
      "section_id": "9.1.1.6.3",
      "section_title": "Notify Messaging Topiclist operation",
      "content": "API operation name: Notify_Messaging_Topiclist\nDescription: Notification for changes to Messaging Topic list on the MSGin5G Server.\nKnown Consumers: MSGin5G Server\nInputs: Refer subclause 8.8.4.2\nOutputs: Refer subclause 8.8.4.2\nSee subclause 8.8.4.2 for the details of usage of this API operation",
      "chunk_type": "general",
      "cross_references": [
        "clause_8.8.4.2"
      ]
    },
    {
      "chunk_id": "ts_23.554_9.1.1.6.4",
      "section_id": "9.1.1.6.4",
      "section_title": "Subscribe Messaging Topic operation",
      "content": "API operation name: Subscribe_Messaging_Topic\nDescription: Subscribing to changes to one or more specific Messaging Topic(s) on the MSGin5G Server.\nKnown Consumers: MSGin5G Server\nInputs: Refer subclause 8.8.4.3\nOutputs: Refer subclause 8.8.4.3\nSee subclause 8.8.4.3 for the details of usage of this API operation",
      "chunk_type": "general",
      "cross_references": [
        "clause_8.8.4.3"
      ]
    },
    {
      "chunk_id": "ts_23.554_9.1.1.6.5",
      "section_id": "9.1.1.6.5",
      "section_title": "Notify Messaging Topic operation",
      "content": "API operation name: Notify_Messaging_Topic\nDescription: Notification for changes to one or more specific Messaging Topic(s) on the MSGin5G Server.\nKnown Consumers: MSGin5G Server\nInputs: Refer subclause 8.8.4.3\nOutputs: Refer subclause 8.8.4.3\nSee subclause 8.8.4.3 for the details of usage of this API operation",
      "chunk_type": "general",
      "cross_references": [
        "clause_8.8.4.3"
      ]
    },
    {
      "chunk_id": "ts_23.554_9.1.1.6.6",
      "section_id": "9.1.1.6.6",
      "section_title": "Unsubscribe Messaging Topiclist operation",
      "content": "API operation name: Unsubscribe_Messaging_Topiclist\nDescription: Unsubscribing to changes to Messaging Topic list on the MSGin5G Server.\nKnown Consumers: MSGin5G Server\nInputs: Refer subclause 8.8.4.2a\nOutputs: Refer subclause 8.8.4.2a\nSee subclause 8.8.4.2 for the details of usage of this API operation",
      "chunk_type": "general",
      "cross_references": [
        "clause_8.8.4.2"
      ]
    },
    {
      "chunk_id": "ts_23.554_9.1.1.6.7",
      "section_id": "9.1.1.6.7",
      "section_title": "Unsubscribe Messaging Topic operation",
      "content": "API operation name: Unsubscribe_Messaging_Topic\nDescription: Unsubscribing to changes to one or more specific Messaging Topic(s) on the MSGin5G Server.\nKnown Consumers: MSGin5G Server\nInputs: Refer subclause 8.8.4.4\nOutputs: Refer subclause 8.8.4.4\nSee subclause 8.8.4.4 for the details of usage of this API operation",
      "chunk_type": "general",
      "cross_references": [
        "clause_8.8.4.4"
      ]
    },
    {
      "chunk_id": "ts_23.554_9.1.2.1",
      "section_id": "9.1.2.1",
      "section_title": "M5S Application Server originating message send request",
      "content": "The information flows from the Application Server to the MSGin5G Server for message delivery includes the IEs in table 8.3.2-1. Additionally, the following information in table 9.1.2.1-2 elements needs to be included:\nTable 9.1.2.1-2: M5S Northbound Message Delivery Send request\nInformation element\nStatus\nDescription\nLatency\nO\nThe latency requirement for the message.\nAuthorization Information\nO\nThe authorization information used to determine whether the Application Server is allowed to send the message",
      "chunk_type": "general",
      "cross_references": [
        "table_8.3.2-1",
        "table_9.1.2.1-2"
      ]
    },
    {
      "chunk_id": "ts_23.554_9.1.2.2",
      "section_id": "9.1.2.2",
      "section_title": "M5S Application Server originating message delivery status report request",
      "content": "The information flows from the Application Server to the MSGin5G Server for message delivery status report includes the IE in table 8.3.4-1, and the following information in table 9.1.2.2-1 elements needs to be included:\nTable 9.1.2.2-1: M5S Northbound Message Delivery Send request\nInformation element\nStatus\nDescription\nAuthorization Information\nO\nThe authorization information used to determine whether the Application Server is allowed to send the message",
      "chunk_type": "general",
      "cross_references": [
        "table_8.3.4-1",
        "table_9.1.2.2-1"
      ]
    },
    {
      "chunk_id": "ts_23.554_9.1.2.3",
      "section_id": "9.1.2.3",
      "section_title": "M5S Application Server registration request",
      "content": "The information flows from the Application Server to the MSGin5G Server for registration request includes the information elements in Table 9.1.2.3-1.\nTable 9.1.2.3-1: Application Server Registration request\nInformation element\nStatus\nDescription\nAS service ID\nM\nThe MSGin5G identifier of the Application Server.\nThis ID is configured before registration.\nApplication ID\nO\nThe identifier of the application specified by the application provider.\nAuthorization Information\nO\nThe authorization information used to determine whether the Application Server is allowed to send the message\nNotification target URI\nO\nThe URL for receiving message, message delivery status report. The MSGin5G Server uses this URL to interact to Application Server.\nRequested expiration time\nO\nRequested expiration time for the registration.\nApplication Profile (NOTE)\nO\nThe elements in Application Profile include the information of the Application Server, e.g. application name, application provider, application scenario description, application category.\nThis IE is used by MSGin5G Server to compare with application client information.\nNOTE:\tThe detailed definition of Application Profile is out of scope of this document.",
      "chunk_type": "general",
      "cross_references": [
        "table_9.1.2.3-1"
      ]
    },
    {
      "chunk_id": "ts_23.554_9.1.2.4",
      "section_id": "9.1.2.4",
      "section_title": "M5S Application Server registration response",
      "content": "The information flows from the MSGin5G Server to the Application Server for registration response includes the information elements in Table 9.1.2.4-1.\nTable 9.1.2.4-1: Application Server registration response\nInformation element\nStatus\nDescription\nAS service ID\nM\nThe MSGin5G identifier of the Application Server.\nRegistration result\nM\nIndication if the registration is success or failure\nRegistration expiration time\n(see NOTE 1)\nO\nIndicates the expiration time of the registration.\nFailure Cause (see NOTE 2)\nO\nThe reason for failure\nNOTE 1:\tThis IE shall only be present when the Registration is Success.\nNOTE 2:\tThis IE shall only be present when the Registration result is Failure.",
      "chunk_type": "general",
      "cross_references": [
        "table_9.1.2.4-1"
      ]
    },
    {
      "chunk_id": "ts_23.554_9.1.2.5",
      "section_id": "9.1.2.5",
      "section_title": "M5S Application Server de-registration request",
      "content": "The information flows from the Application Server to the MSGin5G Server for de-registration request includes the information elements in Table 9.1.2.5-1.\nTable 9.1.2.5-1: Application Server de-registration request\nInformation element\nStatus\nDescription\nAS service ID\nM\nThe MSGin5G identifier of the Application Server.",
      "chunk_type": "general",
      "cross_references": [
        "table_9.1.2.5-1"
      ]
    },
    {
      "chunk_id": "ts_23.554_9.1.2.6",
      "section_id": "9.1.2.6",
      "section_title": "M5S Application Server de-registration response",
      "content": "The information flows from the MSGin5G Server to the Application Server for de-registration response includes the information elements in Table 9.1.2.6-1.\nTable 9.1.2.6-1: Application Server de-registration response\nInformation element\nStatus\nDescription\nAS service ID\nM\nThe MSGin5G identifier of the Application Server.\nDe-registration result\nM\nIndication if the de-registration is success or failure\nFailure Cause (see NOTE)\nO\nThe reason for failure\nNOTE:\tThis IE shall only be present when the de-registration result is Failure.",
      "chunk_type": "general",
      "cross_references": [
        "table_9.1.2.6-1"
      ]
    },
    {
      "chunk_id": "ts_23.554_9.2.1.1.1",
      "section_id": "9.2.1.1.1",
      "section_title": "General",
      "content": "API description: This API enables the MSGin5G Server to deliver MSGin5G message to the Legacy 3GPP Message Gateway.",
      "chunk_type": "definition",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.554_9.2.1.1.2",
      "section_id": "9.2.1.1.2",
      "section_title": "Send_Message operation",
      "content": "API operation name: Send_MSGin5G_Message\nDescription: Send an MSGin5G message to Legacy 3GPP Message Gateway.\nKnown Consumers: M5S.\nInputs: Refer subclause 8.3.3\nOutputs: Refer subclause 8.3.3\nSee subclause 8.3.3 for the details of usage of this API operation.",
      "chunk_type": "general",
      "cross_references": [
        "clause_8.3.3"
      ]
    },
    {
      "chunk_id": "ts_23.554_9.2.1.2.1",
      "section_id": "9.2.1.2.1",
      "section_title": "General",
      "content": "API description: This API enables the MSGin5G Server to deliver a Delivery Status Report to the Legacy 3GPP Message Gateway.",
      "chunk_type": "definition",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.554_9.2.1.2.2",
      "section_id": "9.2.1.2.2",
      "section_title": "Report_Message_Delivery_Status operation",
      "content": "API operation name: Report_Message_Delivery_Status\nDescription: Send an MSGin5G message delivery status report to Legacy 3GPP Message Gateway.\nKnown Consumers: M5S.\nInputs: Refer subclause 8.3.5\nOutputs: Refer subclause 8.3.5\nSee subclause 8.3.5 for the details of usage of this API operation.",
      "chunk_type": "general",
      "cross_references": [
        "clause_8.3.5"
      ]
    },
    {
      "chunk_id": "ts_23.554_9.2.2.1.1",
      "section_id": "9.2.2.1.1",
      "section_title": "General",
      "content": "API description: This API enables the MSGin5G Server to deliver MSGin5G message to the Non-3GPP Message Gateway.",
      "chunk_type": "definition",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.554_9.2.2.1.2",
      "section_id": "9.2.2.1.2",
      "section_title": "Send_Message operation",
      "content": "API operation name: Create_MSGin5G_Message\nDescription: Send an MSGin5G message to Non-3GPP Message Gateway.\nKnown Consumers: M5S.\nInputs: Refer subclause 8.3.3\nOutputs: Refer subclause 8.3.3\nSee subclause 8.3.3 for the details of usage of this API operation.",
      "chunk_type": "general",
      "cross_references": [
        "clause_8.3.3"
      ]
    },
    {
      "chunk_id": "ts_23.554_9.2.2.2.1",
      "section_id": "9.2.2.2.1",
      "section_title": "General",
      "content": "API description: This API enables the MSGin5G Server to deliver a Delivery Status Report to the Non-3GPP Message Gateway.",
      "chunk_type": "definition",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.554_9.2.2.2.2",
      "section_id": "9.2.2.2.2",
      "section_title": "Report_Message_Delivery_Status operation",
      "content": "API operation name: Report_Message_Delivery_Status\nDescription: Send an MSGin5G message delivery status report to Non-3GPP Message Gateway.\nKnown Consumers: M5S.\nInputs: Refer subclause 8.3.5\nOutputs: Refer subclause 8.3.5\nSee subclause 8.3.5 for the details of usage of this API operation.",
      "chunk_type": "general",
      "cross_references": [
        "clause_8.3.5"
      ]
    },
    {
      "chunk_id": "ts_23.554_9.2.3.1.1",
      "section_id": "9.2.3.1.1",
      "section_title": "General",
      "content": "API description: This API enables the MSGin5G Server to deliver MSGin5G messages to the Broadcast Message Gateway.",
      "chunk_type": "definition",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.554_9.2.3.1.2",
      "section_id": "9.2.3.1.2",
      "section_title": "Send_Message operation",
      "content": "API operation name: Create_MSGin5G_Message\nDescription: Send an MSGin5G message to Broadcast Message Gateway.\nKnown Consumers: M5S.\nInputs: Refer subclause 8.3.3\nOutputs: Refer subclause 8.3.3\nSee subclause 8.3.3 for the details of usage of this API operation.",
      "chunk_type": "general",
      "cross_references": [
        "clause_8.3.3"
      ]
    },
    {
      "chunk_id": "ts_23.554_10.1",
      "section_id": "10.1",
      "section_title": "Payload",
      "content": "The Payload Information Element carries the application payload that is transferred by the MSGin5G Service, of which the content is transparent to the MSGin5G Service.\nIf the message originates from an MSGin5G UE, the Payload IE is a string of maximum length that can be transported without segmentation but not more than 2048 octets.",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.554_10.2",
      "section_id": "10.2",
      "section_title": "Application ID",
      "content": "The Application ID Information Element identifies the Application Client on the UE or in the Application Server.\nThe Application ID is a string, which shall allow identifying 65535 different Application Clients. The Application ID is configured or provisioned in the Application Client or the Application Server.",
      "chunk_type": "requirement",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.554_10.3",
      "section_id": "10.3",
      "section_title": "Messaging Topic",
      "content": "The Messaging Topic Information Element indicates the topic of the message, which an interested UE or Application Server can subscribe to.\nThe Messaging Topic IE is a string, which shall allow identiying 65535 different Messaging Topics. Allocating and populating the Messaging Topic IE is done by the Application Client or the Application Server.",
      "chunk_type": "requirement",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.554_10.4",
      "section_id": "10.4",
      "section_title": "Broadcast Area ID",
      "content": "The Broadcast Area ID Information Element identifies the service area where the Broadcast Message will be delivered.\nThe Broadcast Area ID IE is a string, which shall allow identiying 65535 different Broadcast Areas. The Broadcast Area ID is provisioned on the Application Client or the Application Server and is mapped by the Broadcast Message Gateway onto the Broadcast Area as used by the broadcast service in the 5GC.",
      "chunk_type": "requirement",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.554_10.5",
      "section_id": "10.5",
      "section_title": "Message ID",
      "content": "The Message ID Information Element uniquely identifies a specific MSGin5G message in the MSGin5G Service. If message delivery status report is requested by an MSGin5G message, the Message ID IE in this MSGin5G message is used by the sender of the MSGin5G message to match the message delivery status report with the original MSGin5G message. It is also used by the MSGin5G Server in aggregating the message delivery status report message delivery status reports.\nThe Message ID shall be unique within the MSGin5G Service and shall be generated by the sender of a new message.",
      "chunk_type": "general",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.554_10.6",
      "section_id": "10.6",
      "section_title": "Failure Cause",
      "content": "The Failure Cause Information Element indicates the the failure reason of an MSGin5G message, if this MSGin5G message can not be delivered successfully.\nThe Failure Cause IE is a string, which shall allow identiying 65535 different failure reasons.",
      "chunk_type": "requirement",
      "cross_references": []
    },
    {
      "chunk_id": "ts_23.554_11.1",
      "section_id": "11.1",
      "section_title": "General",
      "content": "This clause describes deployments of the functional model specified in clause 5.",
      "chunk_type": "definition",
      "cross_references": [
        "clause_5"
      ]
    },
    {
      "chunk_id": "ts_23.554_11.2",
      "section_id": "11.2",
      "section_title": "Deployment of MSGin5G server(s)",
      "content": "The MSGin5G server(s) should be deployed in the PLMN operator domain. The VAL service using MSGin5G service for the message delivery acts as Application Server and interacts with MSGin5G Server via MSGin5G-3 reference point. The MSGin5G server(s) connects with the 3GPP network system in one or more PLMN operator domain. The MSGin5G server(s) may be supporting multiple Application Servers.\nFigure 11.2-1 illustrates the deployment of multiple MSGin5G Servers in a single PLMN operator domain. Each MSGin5G Server serves a part of MSGin5G service subscribers (including the subscriber using the MSGin5G UE or Non-MSGin5G UE) in this PLMN operator domain. In this deployment, the MSGin5G Servers shall be connected with each other to provide the MSGin5G service to all MSGin5G service subscribers in the PLMN operator domain. The MSGin5G Servers provide MSGin5G service to the Application Server(s) deployed in the VAL service provider domain. The Application Server may be connected and registered to one MSGin5G Server.\nFigure 11.2-1: MSGin5G Server(s) deployed in a single PLMN operator domain with interconnection between MSGin5G Server(s)\nFigure 11.2-2 illustrates the deployment of MSGin5G Servers in multiple PLMN operator domains. Each MSGin5G Server serves the MSGin5G service subscribers in this PLMN operator domain. In this deployment, the MSGin5G Servers deployed in PLMN operator domain 1 may be connected with the MSGin5G deployed in PLMN operator domain 2 to provide the MSGin5G service interconnection based on the business agreement between PLMN operator 1 and PLMN operator 2.\nFigure 11.2-2: MSGin5G Server(s) deployed in multiple PLMN operator domain with interconnection between MSGin5G Server(s)\nEditor's note:\tWhether MSGin5G Server can be deployed in EDN to fulfill the delay requirement specified in [R-5.1.2-001] of 3GPP TS 22.262 [2] is FFS.",
      "chunk_type": "general",
      "cross_references": [
        "figure_11.2-1",
        "figure_11.2-2",
        "ts_22.262"
      ]
    },
    {
      "chunk_id": "ts_23.554_11.3",
      "section_id": "11.3",
      "section_title": "Deployment of Message Gateway(s)",
      "content": "Figure 11.3-1 illustrates the deployment of Message Gateway in a single PLMN operator domain. If only one Message Gateway, i.e. Message Gateway 1 in Figure 11.3-1, is deployed, all MSGin5G Servers in this PLMN domain may connected to a single Message Gateway to provide the MSGin5G service for the Non-MSGin5G UEs. Multiple Message Gateways may also be deployed in a single PLMN operator domain. In this deployment, i.e. Message Gateway 1 and Message Gateway 2 in Figure 11.3-1 are deployed, each Message Gateway is used to provide MSGin5G service for a part of MSGin5G service subscribers in this PLMN operator domain.\nNOTE:\tThe relationship between MSGin5G service subscribers served by the MSGin5G Server and Message Gateway, e.g. whether all MSGin5G service subscribers served by MSGin5G Server 1 use Message Gateway 1 or some of them use Message Gateway 1 and some of them use Message Gateway 2, is implementation specific.\nFigure 11.3-1: deployment of Message Gateway in a single PLMN operator domain\nFigure 11.3-2 illustrates the deployment of Message Gateway in multipl PLMN operator domains. The MSGin5G Server(s) in one PLMN domain are only connected the Message Gateway(s) in the same PLMN operator domain to provide the MSGin5G service for the Non-MSGin5G UEs served by this PLMN operator.\nFigure 11.3-2: deployment of Message Gateway in multipl PLMN operator domains",
      "chunk_type": "general",
      "cross_references": [
        "figure_11.3-1",
        "figure_11.3-2"
      ]
    },
    {
      "chunk_id": "ts_23.554_11.4",
      "section_id": "11.4",
      "section_title": "Deployment of MSGin5G Server(s) and SEAL server(s)",
      "content": "If an MSGin5G Server interacts with SEAL Servers over the SEAL-S reference point specified for each SEAL service, i.e. the SEAL Server are not collocated in the MSGin5G Server, the application of functional model to deployments of SEAL servers specified in 3GPP TS 23.434 [5] applied. In the deployment, MSGin5G acts as the VAL servers specified in 3GPP TS 23.434 [5], but may be deployed in the PLMN operator domain.\nAnnex A (informative):Change history\nChange history\nDate\nMeeting\nTDoc\nCR\nRev\nCat\nSubject/Comment\nNew version\n2020-11\nSA6#40-e\nTR skeleton agreed in SA6#40: S6-202295\n0.0.0\n2021-01\nSA6#41-e\nImplemented pCRs approved in SA6#41-e: S6-210363\nEditorial changes by the rapporteur\n0.1.0\n2021-03\nSA6#42-e\nImplemented pCRs approved in SA6#42-e: S6-210615, S6-210588, S6-210597, S6-210720\nEditorial changes by the rapporteur\n0.2.0\n2021-04\nSA6#42 BIS-e\nImplemented pCRs approved in SA6#42 BIS-e: S6-210827, S6-211087, S6-211088, S6-210989, S6-211089, S6-211090, S6-211091, S6-211092, S6-211093, S6-211094, S6-211095, S6-210988, S6-210969, S6-211071, S6-211096, S6-210822, S6-211042, S6-211043, S6-211097, S6-211098\nEditorial changes by the rapporteur\n0.3.0\n2021-06\nSA6#43 -e\nImplemented pCRs approved in SA6#43-e: S6-211135, S6-211136, S6-211367, S6-211337, S6-211232, S6-211338, S6-211230, S6-211342, S6-211339, S6-211340, S6-211341, S6-211399, S6-211400, S6-211349, S6-211490, S6-211169, S6-211343, S6-211344, S6-211430, S6-211355\nEditorial changes by the rapporteur\n0.4.0\n2021-06\nSA#92 -e\nSP-210474\nPresentation for information at SA#92-e\n1.0.0\n2021-07\nSA6#44-e\nImplemented pCRs approved in SA6#44-e: S6-211527, S6-211722, S6-211723, S6-211726, S6-211727, S6-211724, S6-211841, S6-211774, S6-211775, S6-211776, S6-211777, S6-211780, S6-211779, S6-211781, S6-211592, S6-211842, S6-211628, S6-211629, S6-211843, S6-211844, S6-211713\nEditorial changes by the rapporteur\n1.1.0\n2021-09\nSA6#45-e\nImplemented pCRs approved in SA6#45-e: S6-212164, S6-212153, S6-212084, S6-212089, S6-211944, S6-212154, S6-212105, S6-211954, S6-211955, S6-212155, S6-211957, S6-211959, S6-212156, S6-212177\nEditorial changes by the rapporteur\n1.2.0\n2021-09\nSA#93-e\nSP-210947\nPresentation for approval at SA#93-e\n2.0.0\n2021-09\nSA#93-e\nSP-210947\nMCC Editorial update for publication after TSG SA approval (SA#93)\n17.0.0\n2021-09\nEditorial corrections as agreed by SA6\n17.0.1\n2021-12\nSA#94-e\nSP-211521\n0001\n1\nF\nRemove ENs with no actions in clause 5\n17.1.0\n2021-12\nSA#94-e\nSP-211521\n0002\n1\nF\nCorrections in clause 7\n17.1.0\n2021-12\nSA#94-e\nSP-211521\n0004\n2\nF\nAdd definition of MSGin5G Server address\n17.1.0\n2021-12\nSA#94-e\nSP-211521\n0005\n1\nF\nCorrection on clause 5.3.2.2 target resolution\n17.1.0\n2021-12\nSA#94-e\nSP-211521\n0006\n1\nF\nCorrection on message delivery procedure to Message Gateway\n17.1.0\n2021-12\nSA#94-e\nSP-211521\n0007\n1\nD\nEditorial of MSGin5G\n17.1.0\n2021-12\nSA#94-e\nSP-211521\n0008\n1\nF\nRemove API Related EN and modify Figure 8.3.5-2\n17.1.0\n2021-12\nSA#94-e\nSP-211521\n0010\n1\nF\nCorrection on clause 8.3.3\n17.1.0\n2021-12\nSA#94-e\nSP-211521\n0011\n1\nF\nCorrection on clause 8.7.5\n17.1.0\n2021-12\nSA#94-e\nSP-211521\n0012\n2\nF\n5GMARCH store and forward\n17.1.0\n2021-12\nSA#94-e\nSP-211521\n0014\n1\nB\nMessage topic unsubscription\n17.1.0\n2021-12\nSA#94-e\nSP-211521\n0015\n1\nF\nEditoral correction\n17.1.0\n2021-12\nSA#94-e\nSP-211521\n0016\nF\nCorrections on broadcast\n17.1.0\n2021-12\nSA#94-e\nSP-211521\n0017\nF\nAlignment on Message Gateway IE name\n17.1.0\n2021-12\nSA#94-e\nSP-211521\n0018\n1\nF\nRemove one IE from AS originating message send request\n17.1.0\n2021-12\nSA#94-e\nSP-211521\n0019\n1\nF\nCorrection on Message Aggregation\n17.1.0\n2021-12\nSA#94-e\nSP-211521\n0020\n1\nF\nSecurity aspect of MSGin5G align with SA3\n17.1.0\n2022-03\nSA#95-e\nSP-220105\n0021\n2\nF\nCorrection on Message Segment Recovery\n17.2.0\n2022-03\nSA#95-e\nSP-220105\n0022\n2\nF\nCorrection on Point-to-Point Message Segmentation and Reassembly\n17.2.0\n2022-03\nSA#95-e\nSP-220105\n0023\n1\nF\nCorrection on Usage of Network Capabilities\n17.2.0\n2022-03\nSA#95-e\nSP-220105\n0024\n1\nF\nEditoral corrections\n17.2.0\n2022-03\nSA#95-e\nSP-220105\n0026\n2\nF\nClarification on clause 5.3.3 functional entity of MSGin5G Client\n17.2.0\n2022-03\nSA#95-e\nSP-220105\n0027\n2\nF\nClarification and correction on clause 8.8 Other MSGin5G messaging related procedures\n17.2.0\n2022-03\nSA#95-e\nSP-220105\n0028\n2\nF\nClarification and correction on clause 8.11 Constrained devices\n17.2.0\n2022-03\nSA#95-e\nSP-220105\n0029\n1\nF\nDefinitions of Gateway UE and Relay UE\n17.2.0\n2022-06\nSA#96\nSP-220481\n0030\n1\nB\nApplication architecture enhancement of broadcast aspect\n18.0.0\n2022-06\nSA#96\nSP-220481\n0031\n1\nB\nBroadcast Message delivery procedure\n18.0.0\n2022-06\nSA#96\nSP-220481\n0032\n1\nB\nCharging architectural requirements\n18.0.0\n2022-06\nSA#96\nSP-220481\n0033\n1\nF\nDelete the example of the originator address in Table 8.11.5-1\n18.0.0\n2022-06\nSA#96\nSP-220481\n0034\n1\nD\nEditoral corrections\n18.0.0\n2022-06\nSA#96\nSP-220481\n0035\n2\nB\nBulk registration for constrained device over MSGin5G-6 reference point\n18.0.0\n2022-06\nSA#96\nSP-220481\n0036\n1\nC\nValues and usage of Priority type\n18.0.0\n2022-06\nSA#96\nSP-220481\n0037\n1\nC\nMSGin5G message aggregation and segment\n18.0.0\n2022-06\nSA#96\nSP-220481\n0038\n1\nB\nUpdate of MSGin5G group management\n18.0.0\n2022-06\nSA#96\nSP-220481\n0039\n1\nD\nUpdate of abbreviations\n18.0.0\n2022-06\nSA#96\nSP-220481\n0040\n1\nF\nClarify relationship between store forward and device triggering\n18.0.0\n2022-06\nSA#96\nSP-220481\n0041\n1\nF\nRemove the EN of broadcast in clause 10.4\n18.0.0\n2022-06\nSA#96\nSP-220481\n0042\nD\nRemoval of ENs with no action\n18.0.0\n2022-06\nSA#96\nSP-220481\n0043\n1\nB\nMessaging Topic handling between different MSGin5G Servers\n18.0.0\n2022-06\nSA#96\nSP-220481\n0044\n1\nB\nMessage delivery based on Messaging Topic for different PLMNs\n18.0.0\n2022-06\nSA#96\nSP-220481\n0045\n1\nD\nUpdate of MSGin5G UE registration\n18.0.0\n2022-09\nSA#97\nSP-220921\n0046\n4\nF\nUpdate of Non-MSGin5G UE registration\n18.1.0\n2022-09\nSA#97\nSP-220921\n0047\n2\nB\nRelay selection procedure over MSGin5G-6 interface\n18.1.0\n2022-09\nSA#97\nSP-220921\n0048\n2\nF\nCorrection on clause 8.1.3\n18.1.0\n2022-09\nSA#97\nSP-220921\n0049\nF\nRemoval of EN in clause 10\n18.1.0\n2022-09\nSA#97\nSP-220921\n0050\nF\nRemoval of EN in clause 5.3.2.1\n18.1.0\n2022-09\nSA#97\nSP-220921\n0051\n1\nF\nAggregated message handling at the MSGin5G Server\n18.1.0\n2022-09\nSA#97\nSP-220921\n0052\n1\nF\nTypos, readability, and abbreviations\n18.1.0\n2022-09\nSA#97\nSP-220921\n0053\n1\nC\nBroadcast Message Gateway additions\n18.1.0\n2022-09\nSA#97\nSP-220921\n0054\nC\nHandling of Priority Type IE\n18.1.0\n2022-09\nSA#97\nSP-220921\n0055\n1\nF\nCorrections to clauses 4-6\n18.1.0\n2022-09\nSA#97\nSP-220921\n0056\n3\nF\nCorrection to clause 8.1.3\n18.1.0\n2022-09\nSA#97\nSP-220921\n0057\n3\nF\nCorrection to clause 8.2.1\n18.1.0\n2022-09\nSA#97\nSP-220921\n0058\n1\nF\nCorrections to clauses 8.2.7- 8.7.3.3\n18.1.0\n2022-09\nSA#97\nSP-220921\n0059\n1\nF\nCorrections to clauses 8.7.4.2 - 8.7.5.3\n18.1.0\n2022-09\nSA#97\nSP-220921\n0060\n1\nF\nCorrections for handling topic subscriptions between servers\n18.1.0\n2022-09\nSA#97\nSP-220921\n0061\n1\nF\nCorrections for constrained devices using gateway UE\n18.1.0\n2022-09\nSA#97\nSP-220921\n0062\n1\nF\nCorrected figure in chapter 8.7.1.5\n18.1.0\n2022-09\nSA#97\nSP-220921\n0063\n1\nF\nSecurity credentials IE in MSGin5G UE registration aligned with 33501\n18.1.0\n2022-09\nSA#97\nSP-220921\n0064\n1\nF\nSecurity credentials IE in Message Gateway registration aligned with 33501\n18.1.0\n2022-09\nSA#97\nSP-220921\n0065\n1\nF\nSecurity credentials IE in Application Server Registration aligned with 33501\n18.1.0\n2022-09\nSA#97\nSP-220921\n0066\nF\nSecurity credentials IE in messaging procedures aligned with 33501\n18.1.0\n2022-09\nSA#97\nSP-220921\n0067\nF\nSecurity credentials IE in APIs provided by MSGin5G Server aligned with 33501\n18.1.0\n2022-12\nSA#98\nSP-221240\n0068\nF\nRemove the EN about Application ID in clause 8.4.2\n18.2.0\n2022-12\nSA#98\nSP-221240\n0070\n1\nB\nBulk registration of Non-MSGin5G UEs\n18.2.0\n2022-12\nSA#98\nSP-221240\n0071\n1\nB\nBulk de-registration of Non-MSGin5G UEs\n18.2.0\n2022-12\nSA#98\nSP-221240\n0072\n1\nB\nMSGin5G UE bulk de-registration over MSGin5G-6 reference point\n18.2.0\n2022-12\nSA#98\nSP-221240\n0073\n1\nF\nMessage Aggregation used in Group messaging and Message delivery based on Messaging Topic\n18.2.0\n2022-12\nSA#98\nSP-221240\n0075\nF\nRemove EN in clause 8.3.1\n18.2.0\n2022-12\nSA#98\nSP-221240\n0076\nD\nTerms alignment\n18.2.0\n2022-12\nSA#98\nSP-221240\n0078\nF\nCorrection to clause 5.1\n18.2.0\n2022-12\nSA#98\nSP-221240\n0079\n1\nF\nCorrection to clause 6.1.4\n18.2.0\n2022-12\nSA#98\nSP-221240\n0081\n2\nF\nCorrections to clause 9.1.1.4\n18.2.0\n2022-12\nSA#98\nSP-221240\n0082\n1\nF\nCorrections to clause 10\n18.2.0\n2022-12\nSA#98\nSP-221240\n0083\n1\nF\nNote on status reporting of broadcast message\n18.2.0\n2022-12\nSA#98\nSP-221240\n0086\n3\nF\nResolution on EN about UE type\n18.2.0\n2022-12\nSA#98\nSP-221240\n0087\nF\nResolution on Editor's Note on Priority IE for constrained devices\n18.2.0\n2022-12\nSA#98\nSP-221240\n0088\n1\nF\nCorrection to clause 8.4.2\n18.2.0\n2022-12\nSA#98\nSP-221240\n0090\nF\nRewording some steps in clause 8.4.2\n18.2.0\n2022-12\nSA#98\nSP-221240\n0092\n2\nB\nMSGin5G UE bulk configuration over MSGin5G-6 reference point\n18.2.0\n2022-12\nSA#98\nSP-221240\n0094\nF\nRemove EN in clause 8.9.2\n18.2.0\n2023-03\nSA#99\nSP-230285\n0095\n2\nD\nCorrections for clause 4.3.2\n18.3.0\n2023-03\nSA#99\nSP-230285\n0096\n2\nD\nEditorial type corrections for clause 5.2\n18.3.0\n2023-03\nSA#99\nSP-230285\n0097\n1\nC\nAdd the element of Registration expiration time\n18.3.0\n2023-03\nSA#99\nSP-230285\n0098\n1\nF\nUpdate the scope\n18.3.0\n2023-03\nSA#99\nSP-230285\n0100\n1\nF\nThe MSGin5G Client Profile handling on MSGin5G Server\n18.3.0\n2023-03\nSA#99\nSP-230285\n0101\n1\nB\nAdds new group management capabilities to MSGin5G service\n18.3.0\n2023-03\nSA#99\nSP-230285\n0102\n1\nC\nSeparation of Availability and Reachability concepts\n18.3.0\n2023-03\nSA#99\nSP-230285\n0104\n1\nF\nAS registration is optional\n18.3.0\n2023-03\nSA#99\nSP-230285\n0105\n2\nF\nVarious corrections on Topic handling\n18.3.0\n2023-03\nSA#99\nSP-230285\n0106\n1\nC\nDevice Triggering should not be restricted to the AS\n18.3.0\n2023-03\nSA#99\nSP-230285\n0107\n1\nF\nClarification when Store and forward applies\n18.3.0\n2023-03\nSA#99\nSP-230285\n0108\n1\nD\nMissing abbreviation\n18.3.0\n2023-03\nSA#99\nSP-230285\n0109\n1\nF\nCorrection to UE-1 in Application Architecture\n18.3.0\n2023-03\nSA#99\nSP-230285\n0110\n1\nF\nCorrections on clause 8.11\n18.3.0\n2023-03\nSA#99\nSP-230285\n0114\n1\nF\nArchitecture and reference point between MSGin5G Servers\n18.3.0\n2023-03\nSA#99\nSP-230285\n0115\n1\nF\nDeployment models\n18.3.0\n2023-03\nSA#99\nSP-230285\n0117\n1\nB\nMessaging Topic Event API\n18.3.0\n2023-04\nEditorial corrections; corrupt style of Figure 5.2-2 title and replacing in the requirement [AR-4.1.2-e] description \"Including\" with \"including\"\n18.3.1\n2023-06\nSA#100\nSP-230697\n0119\n1\nF\nMSGin5G-8 naming issue\n18.4.0\n2023-06\nSA#100\nSP-230697\n0121\n1\nF\nModification of security credentials IE\n18.4.0\n2023-06\nSA#100\nSP-230697\n0123\n3\nF\nUpdate the architecture for constrained device\n18.4.0\n2023-06\nSA#100\nSP-230697\n0124\n2\nF\nUpdate the constrained device related definitions\n18.4.0\n2023-06\nSA#100\nSP-230697\n0125\n1\nF\nUpdate the Messaging Topic handling between different MSGin5G Servers\n18.4.0\n2023-06\nSA#100\nSP-230697\n0126\nF\nResolution of EN in 8.4.2\n18.4.0\n2023-06\nSA#100\nSP-230697\n0127\n2\nC\nResolution of ENs in 8.5.x\n18.4.0\n2023-06\nSA#100\nSP-230697\n0128\n1\nC\nSome correction on identities\n18.4.0\n2023-06\nSA#100\nSP-230697\n0129\nF\nUpdate of 8.2.7 MSGin5G UE bulk registration based on constrained UE related architecture\n18.4.0\n2023-06\nSA#100\nSP-230697\n0130\n2\nF\nUpdate of clause 8.2.8\n18.4.0\n2023-06\nSA#100\nSP-230697\n0131\n1\nF\nUpdate of clause 8.2.9 and 8.2.10 for Non-MSGin5G UE bulk (de)registration\n18.4.0\n2023-06\nSA#100\nSP-230697\n0132\n1\nF\nUpdate of clause 8.2.11 MSGin5G UE bulk de-registration\n18.4.0\n2023-06\nSA#100\nSP-230697\n0133\n1\nF\nUpdate of clause 8.11.1\n18.4.0\n2023-06\nSA#100\nSP-230697\n0134\n2\nF\nUpdate of Application Client (de-)registration using MSGin5G Client\n18.4.0\n2023-06\nSA#100\nSP-230697\n0135\n1\nF\nUpdate of Application Client sending and receiving message using MSGin5G Client\n18.4.0\n2023-06\nSA#100\nSP-230697\n0136\n1\nF\nClarify procedures in clause 8.3 with corrections\n18.4.0\n2023-06\nSA#100\nSP-230697\n0138\n1\nF\nNew Message Delivery Flow\n18.4.0\n2023-07\nSA#100\nEditorial corrections to the CR implementations like e.g. correcting the incorrect red text in the bullet in clause 5.3.3.2\n18.4.1\n2023-09\nSA#101\nSP-230995\n0139\n1\nF\nCorrection of grammatical errors\n18.5.0\n2023-09\nSA#101\nSP-230995\n0140\n1\nF\nCorrection on NOTE 8 in clause 5.2\n18.5.0\n2023-09\nSA#101\nSP-230995\n0141\n1\nF\nMessage delivery flow\n18.5.0\n2023-09\nSA#101\nSP-230995\n0143\n4\nF\nCorrections to clause 8.1.4\n18.5.0\n2023-09\nSA#101\nSP-230995\n0144\n2\nF\nCorrections to MSGin5G Registration\n18.5.0\n2023-09\nSA#101\nSP-230995\n0145\n1\nF\nCorrection to MSGin5G UE De-registration\n18.5.0\n2023-09\nSA#101\nSP-230995\n0146\n1\nF\nCorrections to Non-MSGin5G UE Registration\n18.5.0\n2023-09\nSA#101\nSP-230995\n0147\n2\nF\nCorrections to AS (de-)registration\n18.5.0\n2023-09\nSA#101\nSP-230995\n0148\n3\nF\nCorrections to MSGin5G UE bulk (de-)registration\n18.5.0\n2023-09\nSA#101\nSP-230995\n0149\n2\nF\nCorrections to Constrained UE registration procedure\n18.5.0\n2023-09\nSA#101\nSP-230995\n0150\n1\nF\nCorrection of profile storing\n18.5.0\n2023-09\nSA#101\nSP-230995\n0151\n1\nF\nNo response message if message is discarded\n18.5.0\n2023-09\nSA#101\nSP-230995\n0153\n1\nF\nCorrections on message segmentation\n18.5.0\n2023-09\nSA#101\nSP-230995\n0155\n1\nF\nCorrections to Topic Unsubscription\n18.5.0\n2023-09\nSA#101\nSP-230995\n0156\n2\nF\nCorrection for subscription management between 2 servers\n18.5.0\n2023-09\nSA#101\nSP-230995\n0157\nF\nCorrections in pre-conditions\n18.5.0\n2023-09\nSA#101\nSP-230995\n0159\n1\nF\nCorrection to procedure for inter-PLMN message exchange\n18.5.0\n2023-09\nSA#101\nSP-230995\n0160\n3\nF\nCorrection of reference\n18.5.0\n2023-09\nSA#101\nSP-230995\n0161\n1\nF\nCorrection to empty clause 8.10.3.2\n18.5.0\n2023-09\nSA#101\nSP-230995\n0162\n1\nF\nLegacy and non 3GPP Message Gateway interactions with SEAL services\n18.5.0\n2023-09\nSA#101\nSP-230995\n0163\nF\nCorrection to clause 4.2.2\n18.5.0\n2023-09\nSA#101\nSP-230995\n0167\n1\nF\nCorrection on Message Aggregation at MSGin5G Client\n18.5.0\n2023-09\nSA#101\nSP-230995\n0168\n3\nF\nUpdate of the Message Aggregation at MSGin5G Server\n18.5.0\n2023-12\nSA#102\nSP-231542\n0170\nF\nMessaging Topic list unsubscription\n18.6.0\n2023-12\nSA#102\nSP-231542\n0171\nF\nMessaging Topic related unsubscription APIs\n18.6.0\n2023-12\nSA#102\nSP-231542\n0173\n2\nF\nUE reachability status monitoring is decided by application layer\n18.6.0\n2023-12\nSA#102\nSP-231542\n0176\n1\nF\nResolution of EN\n18.6.0\n2023-12\nSA#102\nSP-231542\n0177\n1\nF\nResolution of EN\n18.6.0\n2023-12\nSA#102\nSP-231542\n0178\nF\nResolution of EN\n18.6.0\n2023-12\nSA#102\nSP-231542\n0179\nF\nResolution of EN\n18.6.0\n2023-12\nSA#102\nSP-231542\n0182\nF\nResolution of EN\n18.6.0\n2023-12\nSA#102\nSP-231542\n0183\nF\nResolution of EN\n18.6.0\n2023-12\nSA#102\nSP-231542\n0186\n1\nF\nRemoval of Topic\n18.6.0\n2023-12\nSA#102\nSP-231542\n0187\n1\nF\nResponse message for segmented message is wrong\n18.6.0\n2023-12\nSA#102\nSP-231542\n0189\n1\nF\nAdd general description in clause 8.2\n18.6.0\n2023-12\nSA#102\nSP-231542\n0190\n2\nF\nAdd general description in clause 8.8\n18.6.0\n2023-12\nSA#102\nSP-231542\n0191\n1\nF\nPre-conditions in clause 8.2.8\n18.6.0\n2024-03\nSA#103\nSP-240299\n0198\n1\nF\nCorrection on Message response\n18.7.0\n2024-03\nSA#103\nSP-240299\n0200\nF\nCorrection on Supported MSGin5G segment size and he procedure of segmentation\n18.7.0\n2024-06\nSA#104\nSP-240753\n0208\n1\nF\nUpdate the elements of application Server de-registration response\n18.8.0\n2024-06\nSA#104\nSP-240753\n0209\nF\nUpdate the elements of application Server de-registration response\n18.8.0",
      "chunk_type": "general",
      "cross_references": [
        "clause_5",
        "clause_7",
        "clause_5.3.2.2",
        "clause_8.3.3",
        "clause_8.7.5",
        "clause_5.3.3",
        "clause_8.8",
        "clause_8.11",
        "clause_10.4",
        "clause_8.1.3",
        "clause_10",
        "clause_5.3.2.1",
        "clause_8.2.1",
        "clause_8.4.2",
        "clause_8.3.1",
        "clause_5.1",
        "clause_6.1.4",
        "clause_9.1.1.4",
        "clause_8.9.2",
        "clause_4.3.2",
        "clause_5.2",
        "clause_8.2.8",
        "clause_8.2.9",
        "clause_8.2.11",
        "clause_8.11.1",
        "clause_8.3",
        "clause_5.3.3.2",
        "clause_8.1.4",
        "clause_8.10.3.2",
        "clause_4.2.2",
        "clause_8.2",
        "table_8.11.5-1",
        "figure_8.3.5-2",
        "figure_5.2-2",
        "ts_23.434",
        "ts_18.0",
        "ts_18.3"
      ]
    }
  ]
}